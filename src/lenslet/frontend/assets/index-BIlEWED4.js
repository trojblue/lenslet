var f0=Object.defineProperty;var Qf=e=>{throw TypeError(e)};var h0=(e,t,n)=>t in e?f0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Hn=(e,t,n)=>h0(e,typeof t!="symbol"?t+"":t,n),mu=(e,t,n)=>t.has(e)||Qf("Cannot "+n);var b=(e,t,n)=>(mu(e,t,"read from private field"),n?n.call(e):t.get(e)),le=(e,t,n)=>t.has(e)?Qf("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),V=(e,t,n,r)=>(mu(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ge=(e,t,n)=>(mu(e,t,"access private method"),n);var ll=(e,t,n,r)=>({set _(s){V(e,t,s,n)},get _(){return b(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function m0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mp={exports:{}},_a={},Rp={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zo=Symbol.for("react.element"),p0=Symbol.for("react.portal"),g0=Symbol.for("react.fragment"),v0=Symbol.for("react.strict_mode"),y0=Symbol.for("react.profiler"),x0=Symbol.for("react.provider"),w0=Symbol.for("react.context"),S0=Symbol.for("react.forward_ref"),C0=Symbol.for("react.suspense"),b0=Symbol.for("react.memo"),k0=Symbol.for("react.lazy"),Kf=Symbol.iterator;function E0(e){return e===null||typeof e!="object"?null:(e=Kf&&e[Kf]||e["@@iterator"],typeof e=="function"?e:null)}var Lp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Tp=Object.assign,_p={};function Ri(e,t,n){this.props=e,this.context=t,this.refs=_p,this.updater=n||Lp}Ri.prototype.isReactComponent={};Ri.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ri.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Pp(){}Pp.prototype=Ri.prototype;function wd(e,t,n){this.props=e,this.context=t,this.refs=_p,this.updater=n||Lp}var Sd=wd.prototype=new Pp;Sd.constructor=wd;Tp(Sd,Ri.prototype);Sd.isPureReactComponent=!0;var qf=Array.isArray,Ip=Object.prototype.hasOwnProperty,Cd={current:null},Fp={key:!0,ref:!0,__self:!0,__source:!0};function Op(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Ip.call(t,r)&&!Fp.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:zo,type:e,key:i,ref:o,props:s,_owner:Cd.current}}function N0(e,t){return{$$typeof:zo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function bd(e){return typeof e=="object"&&e!==null&&e.$$typeof===zo}function j0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Yf=/\/+/g;function pu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?j0(""+e.key):t.toString(36)}function _l(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case zo:case p0:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+pu(o,0):r,qf(s)?(n="",e!=null&&(n=e.replace(Yf,"$&/")+"/"),_l(s,t,n,"",function(d){return d})):s!=null&&(bd(s)&&(s=N0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Yf,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",qf(e))for(var l=0;l<e.length;l++){i=e[l];var u=r+pu(i,l);o+=_l(i,t,n,u,s)}else if(u=E0(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=r+pu(i,l++),o+=_l(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function al(e,t,n){if(e==null)return e;var r=[],s=0;return _l(e,r,"","",function(i){return t.call(n,i,s++)}),r}function M0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Tt={current:null},Pl={transition:null},R0={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:Pl,ReactCurrentOwner:Cd};function Dp(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:al,forEach:function(e,t,n){al(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return al(e,function(){t++}),t},toArray:function(e){return al(e,function(t){return t})||[]},only:function(e){if(!bd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Se.Component=Ri;Se.Fragment=g0;Se.Profiler=y0;Se.PureComponent=wd;Se.StrictMode=v0;Se.Suspense=C0;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R0;Se.act=Dp;Se.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Tp({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Cd.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)Ip.call(t,u)&&!Fp.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:zo,type:e.type,key:s,ref:i,props:r,_owner:o}};Se.createContext=function(e){return e={$$typeof:w0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:x0,_context:e},e.Consumer=e};Se.createElement=Op;Se.createFactory=function(e){var t=Op.bind(null,e);return t.type=e,t};Se.createRef=function(){return{current:null}};Se.forwardRef=function(e){return{$$typeof:S0,render:e}};Se.isValidElement=bd;Se.lazy=function(e){return{$$typeof:k0,_payload:{_status:-1,_result:e},_init:M0}};Se.memo=function(e,t){return{$$typeof:b0,type:e,compare:t===void 0?null:t}};Se.startTransition=function(e){var t=Pl.transition;Pl.transition={};try{e()}finally{Pl.transition=t}};Se.unstable_act=Dp;Se.useCallback=function(e,t){return Tt.current.useCallback(e,t)};Se.useContext=function(e){return Tt.current.useContext(e)};Se.useDebugValue=function(){};Se.useDeferredValue=function(e){return Tt.current.useDeferredValue(e)};Se.useEffect=function(e,t){return Tt.current.useEffect(e,t)};Se.useId=function(){return Tt.current.useId()};Se.useImperativeHandle=function(e,t,n){return Tt.current.useImperativeHandle(e,t,n)};Se.useInsertionEffect=function(e,t){return Tt.current.useInsertionEffect(e,t)};Se.useLayoutEffect=function(e,t){return Tt.current.useLayoutEffect(e,t)};Se.useMemo=function(e,t){return Tt.current.useMemo(e,t)};Se.useReducer=function(e,t,n){return Tt.current.useReducer(e,t,n)};Se.useRef=function(e){return Tt.current.useRef(e)};Se.useState=function(e){return Tt.current.useState(e)};Se.useSyncExternalStore=function(e,t,n){return Tt.current.useSyncExternalStore(e,t,n)};Se.useTransition=function(){return Tt.current.useTransition()};Se.version="18.3.1";Rp.exports=Se;var c=Rp.exports;const Xl=m0(c);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0=c,T0=Symbol.for("react.element"),_0=Symbol.for("react.fragment"),P0=Object.prototype.hasOwnProperty,I0=L0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F0={key:!0,ref:!0,__self:!0,__source:!0};function zp(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)P0.call(t,r)&&!F0.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:T0,type:e,key:i,ref:o,props:s,_owner:I0.current}}_a.Fragment=_0;_a.jsx=zp;_a.jsxs=zp;Mp.exports=_a;var a=Mp.exports,Ap={exports:{}},Zt={},$p={exports:{}},Up={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,H){var J=z.length;z.push(H);e:for(;0<J;){var ae=J-1>>>1,ce=z[ae];if(0<s(ce,H))z[ae]=H,z[J]=ce,J=ae;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var H=z[0],J=z.pop();if(J!==H){z[0]=J;e:for(var ae=0,ce=z.length,Le=ce>>>1;ae<Le;){var Q=2*(ae+1)-1,K=z[Q],ne=Q+1,fe=z[ne];if(0>s(K,J))ne<ce&&0>s(fe,K)?(z[ae]=fe,z[ne]=J,ae=ne):(z[ae]=K,z[Q]=J,ae=Q);else if(ne<ce&&0>s(fe,J))z[ae]=fe,z[ne]=J,ae=ne;else break e}}return H}function s(z,H){var J=z.sortIndex-H.sortIndex;return J!==0?J:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,m=null,g=3,C=!1,w=!1,E=!1,L=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(z){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=z)r(d),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(d)}}function v(z){if(E=!1,p(z),!w)if(n(u)!==null)w=!0,_(S);else{var H=n(d);H!==null&&de(v,H.startTime-z)}}function S(z,H){w=!1,E&&(E=!1,y(k),k=-1),C=!0;var J=g;try{for(p(H),m=n(u);m!==null&&(!(m.expirationTime>H)||z&&!F());){var ae=m.callback;if(typeof ae=="function"){m.callback=null,g=m.priorityLevel;var ce=ae(m.expirationTime<=H);H=e.unstable_now(),typeof ce=="function"?m.callback=ce:m===n(u)&&r(u),p(H)}else r(u);m=n(u)}if(m!==null)var Le=!0;else{var Q=n(d);Q!==null&&de(v,Q.startTime-H),Le=!1}return Le}finally{m=null,g=J,C=!1}}var R=!1,j=null,k=-1,T=5,N=-1;function F(){return!(e.unstable_now()-N<T)}function U(){if(j!==null){var z=e.unstable_now();N=z;var H=!0;try{H=j(!0,z)}finally{H?D():(R=!1,j=null)}}else R=!1}var D;if(typeof h=="function")D=function(){h(U)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ue=ee.port2;ee.port1.onmessage=U,D=function(){ue.postMessage(null)}}else D=function(){L(U,0)};function _(z){j=z,R||(R=!0,D())}function de(z,H){k=L(function(){z(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){w||C||(w=!0,_(S))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(z){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var J=g;g=H;try{return z()}finally{g=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var J=g;g=z;try{return H()}finally{g=J}},e.unstable_scheduleCallback=function(z,H,J){var ae=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ae+J:ae):J=ae,z){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=J+ce,z={id:f++,callback:H,priorityLevel:z,startTime:J,expirationTime:ce,sortIndex:-1},J>ae?(z.sortIndex=J,t(d,z),n(u)===null&&z===n(d)&&(E?(y(k),k=-1):E=!0,de(v,J-ae))):(z.sortIndex=ce,t(u,z),w||C||(w=!0,_(S))),z},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(z){var H=g;return function(){var J=g;g=H;try{return z.apply(this,arguments)}finally{g=J}}}})(Up);$p.exports=Up;var O0=$p.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0=c,Jt=O0;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bp=new Set,fo={};function ks(e,t){Si(e,t),Si(e+"Capture",t)}function Si(e,t){for(fo[e]=t,e=0;e<t.length;e++)Bp.add(t[e])}var sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xu=Object.prototype.hasOwnProperty,z0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gf={},Xf={};function A0(e){return Xu.call(Xf,e)?!0:Xu.call(Gf,e)?!1:z0.test(e)?Xf[e]=!0:(Gf[e]=!0,!1)}function $0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function U0(e,t,n,r){if(t===null||typeof t>"u"||$0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _t(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pt[e]=new _t(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pt[t]=new _t(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){pt[e]=new _t(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pt[e]=new _t(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pt[e]=new _t(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){pt[e]=new _t(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){pt[e]=new _t(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){pt[e]=new _t(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){pt[e]=new _t(e,5,!1,e.toLowerCase(),null,!1,!1)});var kd=/[\-:]([a-z])/g;function Ed(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(kd,Ed);pt[t]=new _t(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(kd,Ed);pt[t]=new _t(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(kd,Ed);pt[t]=new _t(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){pt[e]=new _t(e,1,!1,e.toLowerCase(),null,!1,!1)});pt.xlinkHref=new _t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){pt[e]=new _t(e,1,!1,e.toLowerCase(),null,!0,!0)});function Nd(e,t,n,r){var s=pt.hasOwnProperty(t)?pt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(U0(t,n,s,r)&&(n=null),r||s===null?A0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ar=D0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ul=Symbol.for("react.element"),Us=Symbol.for("react.portal"),Bs=Symbol.for("react.fragment"),jd=Symbol.for("react.strict_mode"),Ju=Symbol.for("react.profiler"),Wp=Symbol.for("react.provider"),Hp=Symbol.for("react.context"),Md=Symbol.for("react.forward_ref"),Zu=Symbol.for("react.suspense"),ec=Symbol.for("react.suspense_list"),Rd=Symbol.for("react.memo"),vr=Symbol.for("react.lazy"),Vp=Symbol.for("react.offscreen"),Jf=Symbol.iterator;function Di(e){return e===null||typeof e!="object"?null:(e=Jf&&e[Jf]||e["@@iterator"],typeof e=="function"?e:null)}var Ae=Object.assign,gu;function Yi(e){if(gu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);gu=t&&t[1]||""}return`
`+gu+e}var vu=!1;function yu(e,t){if(!e||vu)return"";vu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{vu=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Yi(e):""}function B0(e){switch(e.tag){case 5:return Yi(e.type);case 16:return Yi("Lazy");case 13:return Yi("Suspense");case 19:return Yi("SuspenseList");case 0:case 2:case 15:return e=yu(e.type,!1),e;case 11:return e=yu(e.type.render,!1),e;case 1:return e=yu(e.type,!0),e;default:return""}}function tc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bs:return"Fragment";case Us:return"Portal";case Ju:return"Profiler";case jd:return"StrictMode";case Zu:return"Suspense";case ec:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Hp:return(e.displayName||"Context")+".Consumer";case Wp:return(e._context.displayName||"Context")+".Provider";case Md:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rd:return t=e.displayName||null,t!==null?t:tc(e.type)||"Memo";case vr:t=e._payload,e=e._init;try{return tc(e(t))}catch{}}return null}function W0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tc(t);case 8:return t===jd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ur(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Qp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function H0(e){var t=Qp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cl(e){e._valueTracker||(e._valueTracker=H0(e))}function Kp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Qp(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Jl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nc(e,t){var n=t.checked;return Ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Zf(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ur(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qp(e,t){t=t.checked,t!=null&&Nd(e,"checked",t,!1)}function rc(e,t){qp(e,t);var n=Ur(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?sc(e,t.type,n):t.hasOwnProperty("defaultValue")&&sc(e,t.type,Ur(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function eh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function sc(e,t,n){(t!=="number"||Jl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Gi=Array.isArray;function Zs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ur(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ic(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return Ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function th(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($(92));if(Gi(n)){if(1<n.length)throw Error($(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ur(n)}}function Yp(e,t){var n=Ur(t.value),r=Ur(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function nh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Gp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Gp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var dl,Xp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(dl=dl||document.createElement("div"),dl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=dl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ho(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var to={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},V0=["Webkit","ms","Moz","O"];Object.keys(to).forEach(function(e){V0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),to[t]=to[e]})});function Jp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||to.hasOwnProperty(e)&&to[e]?(""+t).trim():t+"px"}function Zp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Jp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Q0=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lc(e,t){if(t){if(Q0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function ac(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uc=null;function Ld(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cc=null,ei=null,ti=null;function rh(e){if(e=Uo(e)){if(typeof cc!="function")throw Error($(280));var t=e.stateNode;t&&(t=Da(t),cc(e.stateNode,e.type,t))}}function eg(e){ei?ti?ti.push(e):ti=[e]:ei=e}function tg(){if(ei){var e=ei,t=ti;if(ti=ei=null,rh(e),t)for(e=0;e<t.length;e++)rh(t[e])}}function ng(e,t){return e(t)}function rg(){}var xu=!1;function sg(e,t,n){if(xu)return e(t,n);xu=!0;try{return ng(e,t,n)}finally{xu=!1,(ei!==null||ti!==null)&&(rg(),tg())}}function mo(e,t){var n=e.stateNode;if(n===null)return null;var r=Da(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,t,typeof n));return n}var dc=!1;if(sr)try{var zi={};Object.defineProperty(zi,"passive",{get:function(){dc=!0}}),window.addEventListener("test",zi,zi),window.removeEventListener("test",zi,zi)}catch{dc=!1}function K0(e,t,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(f){this.onError(f)}}var no=!1,Zl=null,ea=!1,fc=null,q0={onError:function(e){no=!0,Zl=e}};function Y0(e,t,n,r,s,i,o,l,u){no=!1,Zl=null,K0.apply(q0,arguments)}function G0(e,t,n,r,s,i,o,l,u){if(Y0.apply(this,arguments),no){if(no){var d=Zl;no=!1,Zl=null}else throw Error($(198));ea||(ea=!0,fc=d)}}function Es(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ig(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sh(e){if(Es(e)!==e)throw Error($(188))}function X0(e){var t=e.alternate;if(!t){if(t=Es(e),t===null)throw Error($(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return sh(s),e;if(i===r)return sh(s),t;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:t}function og(e){return e=X0(e),e!==null?lg(e):null}function lg(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=lg(e);if(t!==null)return t;e=e.sibling}return null}var ag=Jt.unstable_scheduleCallback,ih=Jt.unstable_cancelCallback,J0=Jt.unstable_shouldYield,Z0=Jt.unstable_requestPaint,Qe=Jt.unstable_now,ex=Jt.unstable_getCurrentPriorityLevel,Td=Jt.unstable_ImmediatePriority,ug=Jt.unstable_UserBlockingPriority,ta=Jt.unstable_NormalPriority,tx=Jt.unstable_LowPriority,cg=Jt.unstable_IdlePriority,Pa=null,Dn=null;function nx(e){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(Pa,e,void 0,(e.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:ix,rx=Math.log,sx=Math.LN2;function ix(e){return e>>>=0,e===0?32:31-(rx(e)/sx|0)|0}var fl=64,hl=4194304;function Xi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function na(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Xi(l):(i&=o,i!==0&&(r=Xi(i)))}else o=n&~s,o!==0?r=Xi(o):i!==0&&(r=Xi(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-En(t),s=1<<n,r|=e[n],t&=~s;return r}function ox(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lx(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-En(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=ox(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function hc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function dg(){var e=fl;return fl<<=1,!(fl&4194240)&&(fl=64),e}function wu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ao(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-En(t),e[t]=n}function ax(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-En(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function _d(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-En(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var je=0;function fg(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var hg,Pd,mg,pg,gg,mc=!1,ml=[],_r=null,Pr=null,Ir=null,po=new Map,go=new Map,xr=[],ux="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oh(e,t){switch(e){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":po.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":go.delete(t.pointerId)}}function Ai(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Uo(t),t!==null&&Pd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function cx(e,t,n,r,s){switch(t){case"focusin":return _r=Ai(_r,e,t,n,r,s),!0;case"dragenter":return Pr=Ai(Pr,e,t,n,r,s),!0;case"mouseover":return Ir=Ai(Ir,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return po.set(i,Ai(po.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,go.set(i,Ai(go.get(i)||null,e,t,n,r,s)),!0}return!1}function vg(e){var t=Zr(e.target);if(t!==null){var n=Es(t);if(n!==null){if(t=n.tag,t===13){if(t=ig(n),t!==null){e.blockedOn=t,gg(e.priority,function(){mg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Il(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=pc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);uc=r,n.target.dispatchEvent(r),uc=null}else return t=Uo(n),t!==null&&Pd(t),e.blockedOn=n,!1;t.shift()}return!0}function lh(e,t,n){Il(e)&&n.delete(t)}function dx(){mc=!1,_r!==null&&Il(_r)&&(_r=null),Pr!==null&&Il(Pr)&&(Pr=null),Ir!==null&&Il(Ir)&&(Ir=null),po.forEach(lh),go.forEach(lh)}function $i(e,t){e.blockedOn===t&&(e.blockedOn=null,mc||(mc=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,dx)))}function vo(e){function t(s){return $i(s,e)}if(0<ml.length){$i(ml[0],e);for(var n=1;n<ml.length;n++){var r=ml[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_r!==null&&$i(_r,e),Pr!==null&&$i(Pr,e),Ir!==null&&$i(Ir,e),po.forEach(t),go.forEach(t),n=0;n<xr.length;n++)r=xr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<xr.length&&(n=xr[0],n.blockedOn===null);)vg(n),n.blockedOn===null&&xr.shift()}var ni=ar.ReactCurrentBatchConfig,ra=!0;function fx(e,t,n,r){var s=je,i=ni.transition;ni.transition=null;try{je=1,Id(e,t,n,r)}finally{je=s,ni.transition=i}}function hx(e,t,n,r){var s=je,i=ni.transition;ni.transition=null;try{je=4,Id(e,t,n,r)}finally{je=s,ni.transition=i}}function Id(e,t,n,r){if(ra){var s=pc(e,t,n,r);if(s===null)Lu(e,t,r,sa,n),oh(e,r);else if(cx(s,e,t,n,r))r.stopPropagation();else if(oh(e,r),t&4&&-1<ux.indexOf(e)){for(;s!==null;){var i=Uo(s);if(i!==null&&hg(i),i=pc(e,t,n,r),i===null&&Lu(e,t,r,sa,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Lu(e,t,r,null,n)}}var sa=null;function pc(e,t,n,r){if(sa=null,e=Ld(r),e=Zr(e),e!==null)if(t=Es(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ig(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return sa=e,null}function yg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ex()){case Td:return 1;case ug:return 4;case ta:case tx:return 16;case cg:return 536870912;default:return 16}default:return 16}}var Lr=null,Fd=null,Fl=null;function xg(){if(Fl)return Fl;var e,t=Fd,n=t.length,r,s="value"in Lr?Lr.value:Lr.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Fl=s.slice(e,1<r?1-r:void 0)}function Ol(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function pl(){return!0}function ah(){return!1}function en(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?pl:ah,this.isPropagationStopped=ah,this}return Ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pl)},persist:function(){},isPersistent:pl}),t}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Od=en(Li),$o=Ae({},Li,{view:0,detail:0}),mx=en($o),Su,Cu,Ui,Ia=Ae({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ui&&(Ui&&e.type==="mousemove"?(Su=e.screenX-Ui.screenX,Cu=e.screenY-Ui.screenY):Cu=Su=0,Ui=e),Su)},movementY:function(e){return"movementY"in e?e.movementY:Cu}}),uh=en(Ia),px=Ae({},Ia,{dataTransfer:0}),gx=en(px),vx=Ae({},$o,{relatedTarget:0}),bu=en(vx),yx=Ae({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),xx=en(yx),wx=Ae({},Li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sx=en(wx),Cx=Ae({},Li,{data:0}),ch=en(Cx),bx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ex={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ex[e])?!!t[e]:!1}function Dd(){return Nx}var jx=Ae({},$o,{key:function(e){if(e.key){var t=bx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ol(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dd,charCode:function(e){return e.type==="keypress"?Ol(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ol(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Mx=en(jx),Rx=Ae({},Ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dh=en(Rx),Lx=Ae({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dd}),Tx=en(Lx),_x=Ae({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),Px=en(_x),Ix=Ae({},Ia,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fx=en(Ix),Ox=[9,13,27,32],zd=sr&&"CompositionEvent"in window,ro=null;sr&&"documentMode"in document&&(ro=document.documentMode);var Dx=sr&&"TextEvent"in window&&!ro,wg=sr&&(!zd||ro&&8<ro&&11>=ro),fh=" ",hh=!1;function Sg(e,t){switch(e){case"keyup":return Ox.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ws=!1;function zx(e,t){switch(e){case"compositionend":return Cg(t);case"keypress":return t.which!==32?null:(hh=!0,fh);case"textInput":return e=t.data,e===fh&&hh?null:e;default:return null}}function Ax(e,t){if(Ws)return e==="compositionend"||!zd&&Sg(e,t)?(e=xg(),Fl=Fd=Lr=null,Ws=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wg&&t.locale!=="ko"?null:t.data;default:return null}}var $x={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$x[e.type]:t==="textarea"}function bg(e,t,n,r){eg(r),t=ia(t,"onChange"),0<t.length&&(n=new Od("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var so=null,yo=null;function Ux(e){Ig(e,0)}function Fa(e){var t=Qs(e);if(Kp(t))return e}function Bx(e,t){if(e==="change")return t}var kg=!1;if(sr){var ku;if(sr){var Eu="oninput"in document;if(!Eu){var ph=document.createElement("div");ph.setAttribute("oninput","return;"),Eu=typeof ph.oninput=="function"}ku=Eu}else ku=!1;kg=ku&&(!document.documentMode||9<document.documentMode)}function gh(){so&&(so.detachEvent("onpropertychange",Eg),yo=so=null)}function Eg(e){if(e.propertyName==="value"&&Fa(yo)){var t=[];bg(t,yo,e,Ld(e)),sg(Ux,t)}}function Wx(e,t,n){e==="focusin"?(gh(),so=t,yo=n,so.attachEvent("onpropertychange",Eg)):e==="focusout"&&gh()}function Hx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fa(yo)}function Vx(e,t){if(e==="click")return Fa(t)}function Qx(e,t){if(e==="input"||e==="change")return Fa(t)}function Kx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mn=typeof Object.is=="function"?Object.is:Kx;function xo(e,t){if(Mn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Xu.call(t,s)||!Mn(e[s],t[s]))return!1}return!0}function vh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yh(e,t){var n=vh(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vh(n)}}function Ng(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ng(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jg(){for(var e=window,t=Jl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Jl(e.document)}return t}function Ad(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qx(e){var t=jg(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ng(n.ownerDocument.documentElement,n)){if(r!==null&&Ad(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=yh(n,i);var o=yh(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Yx=sr&&"documentMode"in document&&11>=document.documentMode,Hs=null,gc=null,io=null,vc=!1;function xh(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vc||Hs==null||Hs!==Jl(r)||(r=Hs,"selectionStart"in r&&Ad(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),io&&xo(io,r)||(io=r,r=ia(gc,"onSelect"),0<r.length&&(t=new Od("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Hs)))}function gl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Vs={animationend:gl("Animation","AnimationEnd"),animationiteration:gl("Animation","AnimationIteration"),animationstart:gl("Animation","AnimationStart"),transitionend:gl("Transition","TransitionEnd")},Nu={},Mg={};sr&&(Mg=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function Oa(e){if(Nu[e])return Nu[e];if(!Vs[e])return e;var t=Vs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Mg)return Nu[e]=t[n];return e}var Rg=Oa("animationend"),Lg=Oa("animationiteration"),Tg=Oa("animationstart"),_g=Oa("transitionend"),Pg=new Map,wh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wr(e,t){Pg.set(e,t),ks(t,[e])}for(var ju=0;ju<wh.length;ju++){var Mu=wh[ju],Gx=Mu.toLowerCase(),Xx=Mu[0].toUpperCase()+Mu.slice(1);Wr(Gx,"on"+Xx)}Wr(Rg,"onAnimationEnd");Wr(Lg,"onAnimationIteration");Wr(Tg,"onAnimationStart");Wr("dblclick","onDoubleClick");Wr("focusin","onFocus");Wr("focusout","onBlur");Wr(_g,"onTransitionEnd");Si("onMouseEnter",["mouseout","mouseover"]);Si("onMouseLeave",["mouseout","mouseover"]);Si("onPointerEnter",["pointerout","pointerover"]);Si("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ji));function Sh(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,G0(r,t,void 0,e),e.currentTarget=null}function Ig(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Sh(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Sh(s,l,d),i=u}}}if(ea)throw e=fc,ea=!1,fc=null,e}function Pe(e,t){var n=t[Cc];n===void 0&&(n=t[Cc]=new Set);var r=e+"__bubble";n.has(r)||(Fg(t,e,2,!1),n.add(r))}function Ru(e,t,n){var r=0;t&&(r|=4),Fg(n,e,r,t)}var vl="_reactListening"+Math.random().toString(36).slice(2);function wo(e){if(!e[vl]){e[vl]=!0,Bp.forEach(function(n){n!=="selectionchange"&&(Jx.has(n)||Ru(n,!1,e),Ru(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vl]||(t[vl]=!0,Ru("selectionchange",!1,t))}}function Fg(e,t,n,r){switch(yg(t)){case 1:var s=fx;break;case 4:s=hx;break;default:s=Id}n=s.bind(null,t,n,e),s=void 0,!dc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Lu(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Zr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}sg(function(){var d=i,f=Ld(n),m=[];e:{var g=Pg.get(e);if(g!==void 0){var C=Od,w=e;switch(e){case"keypress":if(Ol(n)===0)break e;case"keydown":case"keyup":C=Mx;break;case"focusin":w="focus",C=bu;break;case"focusout":w="blur",C=bu;break;case"beforeblur":case"afterblur":C=bu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=uh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=gx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=Tx;break;case Rg:case Lg:case Tg:C=xx;break;case _g:C=Px;break;case"scroll":C=mx;break;case"wheel":C=Fx;break;case"copy":case"cut":case"paste":C=Sx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=dh}var E=(t&4)!==0,L=!E&&e==="scroll",y=E?g!==null?g+"Capture":null:g;E=[];for(var h=d,p;h!==null;){p=h;var v=p.stateNode;if(p.tag===5&&v!==null&&(p=v,y!==null&&(v=mo(h,y),v!=null&&E.push(So(h,v,p)))),L)break;h=h.return}0<E.length&&(g=new C(g,w,null,n,f),m.push({event:g,listeners:E}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",g&&n!==uc&&(w=n.relatedTarget||n.fromElement)&&(Zr(w)||w[ir]))break e;if((C||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,C?(w=n.relatedTarget||n.toElement,C=d,w=w?Zr(w):null,w!==null&&(L=Es(w),w!==L||w.tag!==5&&w.tag!==6)&&(w=null)):(C=null,w=d),C!==w)){if(E=uh,v="onMouseLeave",y="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(E=dh,v="onPointerLeave",y="onPointerEnter",h="pointer"),L=C==null?g:Qs(C),p=w==null?g:Qs(w),g=new E(v,h+"leave",C,n,f),g.target=L,g.relatedTarget=p,v=null,Zr(f)===d&&(E=new E(y,h+"enter",w,n,f),E.target=p,E.relatedTarget=L,v=E),L=v,C&&w)t:{for(E=C,y=w,h=0,p=E;p;p=Ds(p))h++;for(p=0,v=y;v;v=Ds(v))p++;for(;0<h-p;)E=Ds(E),h--;for(;0<p-h;)y=Ds(y),p--;for(;h--;){if(E===y||y!==null&&E===y.alternate)break t;E=Ds(E),y=Ds(y)}E=null}else E=null;C!==null&&Ch(m,g,C,E,!1),w!==null&&L!==null&&Ch(m,L,w,E,!0)}}e:{if(g=d?Qs(d):window,C=g.nodeName&&g.nodeName.toLowerCase(),C==="select"||C==="input"&&g.type==="file")var S=Bx;else if(mh(g))if(kg)S=Qx;else{S=Hx;var R=Wx}else(C=g.nodeName)&&C.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(S=Vx);if(S&&(S=S(e,d))){bg(m,S,n,f);break e}R&&R(e,g,d),e==="focusout"&&(R=g._wrapperState)&&R.controlled&&g.type==="number"&&sc(g,"number",g.value)}switch(R=d?Qs(d):window,e){case"focusin":(mh(R)||R.contentEditable==="true")&&(Hs=R,gc=d,io=null);break;case"focusout":io=gc=Hs=null;break;case"mousedown":vc=!0;break;case"contextmenu":case"mouseup":case"dragend":vc=!1,xh(m,n,f);break;case"selectionchange":if(Yx)break;case"keydown":case"keyup":xh(m,n,f)}var j;if(zd)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Ws?Sg(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(wg&&n.locale!=="ko"&&(Ws||k!=="onCompositionStart"?k==="onCompositionEnd"&&Ws&&(j=xg()):(Lr=f,Fd="value"in Lr?Lr.value:Lr.textContent,Ws=!0)),R=ia(d,k),0<R.length&&(k=new ch(k,e,null,n,f),m.push({event:k,listeners:R}),j?k.data=j:(j=Cg(n),j!==null&&(k.data=j)))),(j=Dx?zx(e,n):Ax(e,n))&&(d=ia(d,"onBeforeInput"),0<d.length&&(f=new ch("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=j))}Ig(m,t)})}function So(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ia(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=mo(e,n),i!=null&&r.unshift(So(e,i,s)),i=mo(e,t),i!=null&&r.push(So(e,i,s))),e=e.return}return r}function Ds(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ch(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=mo(n,i),u!=null&&o.unshift(So(n,u,l))):s||(u=mo(n,i),u!=null&&o.push(So(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Zx=/\r\n?/g,ew=/\u0000|\uFFFD/g;function bh(e){return(typeof e=="string"?e:""+e).replace(Zx,`
`).replace(ew,"")}function yl(e,t,n){if(t=bh(t),bh(e)!==t&&n)throw Error($(425))}function oa(){}var yc=null,xc=null;function wc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Sc=typeof setTimeout=="function"?setTimeout:void 0,tw=typeof clearTimeout=="function"?clearTimeout:void 0,kh=typeof Promise=="function"?Promise:void 0,nw=typeof queueMicrotask=="function"?queueMicrotask:typeof kh<"u"?function(e){return kh.resolve(null).then(e).catch(rw)}:Sc;function rw(e){setTimeout(function(){throw e})}function Tu(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),vo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);vo(t)}function Fr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Eh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ti=Math.random().toString(36).slice(2),On="__reactFiber$"+Ti,Co="__reactProps$"+Ti,ir="__reactContainer$"+Ti,Cc="__reactEvents$"+Ti,sw="__reactListeners$"+Ti,iw="__reactHandles$"+Ti;function Zr(e){var t=e[On];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ir]||n[On]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Eh(e);e!==null;){if(n=e[On])return n;e=Eh(e)}return t}e=n,n=e.parentNode}return null}function Uo(e){return e=e[On]||e[ir],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function Da(e){return e[Co]||null}var bc=[],Ks=-1;function Hr(e){return{current:e}}function Ie(e){0>Ks||(e.current=bc[Ks],bc[Ks]=null,Ks--)}function Te(e,t){Ks++,bc[Ks]=e.current,e.current=t}var Br={},St=Hr(Br),Ut=Hr(!1),vs=Br;function Ci(e,t){var n=e.type.contextTypes;if(!n)return Br;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Bt(e){return e=e.childContextTypes,e!=null}function la(){Ie(Ut),Ie(St)}function Nh(e,t,n){if(St.current!==Br)throw Error($(168));Te(St,t),Te(Ut,n)}function Og(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error($(108,W0(e)||"Unknown",s));return Ae({},n,r)}function aa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Br,vs=St.current,Te(St,e),Te(Ut,Ut.current),!0}function jh(e,t,n){var r=e.stateNode;if(!r)throw Error($(169));n?(e=Og(e,t,vs),r.__reactInternalMemoizedMergedChildContext=e,Ie(Ut),Ie(St),Te(St,e)):Ie(Ut),Te(Ut,n)}var qn=null,za=!1,_u=!1;function Dg(e){qn===null?qn=[e]:qn.push(e)}function ow(e){za=!0,Dg(e)}function Vr(){if(!_u&&qn!==null){_u=!0;var e=0,t=je;try{var n=qn;for(je=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}qn=null,za=!1}catch(s){throw qn!==null&&(qn=qn.slice(e+1)),ag(Td,Vr),s}finally{je=t,_u=!1}}return null}var qs=[],Ys=0,ua=null,ca=0,on=[],ln=0,ys=null,Zn=1,er="";function Xr(e,t){qs[Ys++]=ca,qs[Ys++]=ua,ua=e,ca=t}function zg(e,t,n){on[ln++]=Zn,on[ln++]=er,on[ln++]=ys,ys=e;var r=Zn;e=er;var s=32-En(r)-1;r&=~(1<<s),n+=1;var i=32-En(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Zn=1<<32-En(t)+s|n<<s|r,er=i+e}else Zn=1<<i|n<<s|r,er=e}function $d(e){e.return!==null&&(Xr(e,1),zg(e,1,0))}function Ud(e){for(;e===ua;)ua=qs[--Ys],qs[Ys]=null,ca=qs[--Ys],qs[Ys]=null;for(;e===ys;)ys=on[--ln],on[ln]=null,er=on[--ln],on[ln]=null,Zn=on[--ln],on[ln]=null}var Xt=null,Gt=null,Oe=!1,kn=null;function Ag(e,t){var n=un(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Mh(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xt=e,Gt=Fr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xt=e,Gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ys!==null?{id:Zn,overflow:er}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=un(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Xt=e,Gt=null,!0):!1;default:return!1}}function kc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ec(e){if(Oe){var t=Gt;if(t){var n=t;if(!Mh(e,t)){if(kc(e))throw Error($(418));t=Fr(n.nextSibling);var r=Xt;t&&Mh(e,t)?Ag(r,n):(e.flags=e.flags&-4097|2,Oe=!1,Xt=e)}}else{if(kc(e))throw Error($(418));e.flags=e.flags&-4097|2,Oe=!1,Xt=e}}}function Rh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xt=e}function xl(e){if(e!==Xt)return!1;if(!Oe)return Rh(e),Oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!wc(e.type,e.memoizedProps)),t&&(t=Gt)){if(kc(e))throw $g(),Error($(418));for(;t;)Ag(e,t),t=Fr(t.nextSibling)}if(Rh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Gt=Fr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Gt=null}}else Gt=Xt?Fr(e.stateNode.nextSibling):null;return!0}function $g(){for(var e=Gt;e;)e=Fr(e.nextSibling)}function bi(){Gt=Xt=null,Oe=!1}function Bd(e){kn===null?kn=[e]:kn.push(e)}var lw=ar.ReactCurrentBatchConfig;function Bi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function wl(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Lh(e){var t=e._init;return t(e._payload)}function Ug(e){function t(y,h){if(e){var p=y.deletions;p===null?(y.deletions=[h],y.flags|=16):p.push(h)}}function n(y,h){if(!e)return null;for(;h!==null;)t(y,h),h=h.sibling;return null}function r(y,h){for(y=new Map;h!==null;)h.key!==null?y.set(h.key,h):y.set(h.index,h),h=h.sibling;return y}function s(y,h){return y=Ar(y,h),y.index=0,y.sibling=null,y}function i(y,h,p){return y.index=p,e?(p=y.alternate,p!==null?(p=p.index,p<h?(y.flags|=2,h):p):(y.flags|=2,h)):(y.flags|=1048576,h)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,h,p,v){return h===null||h.tag!==6?(h=Au(p,y.mode,v),h.return=y,h):(h=s(h,p),h.return=y,h)}function u(y,h,p,v){var S=p.type;return S===Bs?f(y,h,p.props.children,v,p.key):h!==null&&(h.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===vr&&Lh(S)===h.type)?(v=s(h,p.props),v.ref=Bi(y,h,p),v.return=y,v):(v=Wl(p.type,p.key,p.props,null,y.mode,v),v.ref=Bi(y,h,p),v.return=y,v)}function d(y,h,p,v){return h===null||h.tag!==4||h.stateNode.containerInfo!==p.containerInfo||h.stateNode.implementation!==p.implementation?(h=$u(p,y.mode,v),h.return=y,h):(h=s(h,p.children||[]),h.return=y,h)}function f(y,h,p,v,S){return h===null||h.tag!==7?(h=gs(p,y.mode,v,S),h.return=y,h):(h=s(h,p),h.return=y,h)}function m(y,h,p){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Au(""+h,y.mode,p),h.return=y,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case ul:return p=Wl(h.type,h.key,h.props,null,y.mode,p),p.ref=Bi(y,null,h),p.return=y,p;case Us:return h=$u(h,y.mode,p),h.return=y,h;case vr:var v=h._init;return m(y,v(h._payload),p)}if(Gi(h)||Di(h))return h=gs(h,y.mode,p,null),h.return=y,h;wl(y,h)}return null}function g(y,h,p,v){var S=h!==null?h.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return S!==null?null:l(y,h,""+p,v);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ul:return p.key===S?u(y,h,p,v):null;case Us:return p.key===S?d(y,h,p,v):null;case vr:return S=p._init,g(y,h,S(p._payload),v)}if(Gi(p)||Di(p))return S!==null?null:f(y,h,p,v,null);wl(y,p)}return null}function C(y,h,p,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return y=y.get(p)||null,l(h,y,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ul:return y=y.get(v.key===null?p:v.key)||null,u(h,y,v,S);case Us:return y=y.get(v.key===null?p:v.key)||null,d(h,y,v,S);case vr:var R=v._init;return C(y,h,p,R(v._payload),S)}if(Gi(v)||Di(v))return y=y.get(p)||null,f(h,y,v,S,null);wl(h,v)}return null}function w(y,h,p,v){for(var S=null,R=null,j=h,k=h=0,T=null;j!==null&&k<p.length;k++){j.index>k?(T=j,j=null):T=j.sibling;var N=g(y,j,p[k],v);if(N===null){j===null&&(j=T);break}e&&j&&N.alternate===null&&t(y,j),h=i(N,h,k),R===null?S=N:R.sibling=N,R=N,j=T}if(k===p.length)return n(y,j),Oe&&Xr(y,k),S;if(j===null){for(;k<p.length;k++)j=m(y,p[k],v),j!==null&&(h=i(j,h,k),R===null?S=j:R.sibling=j,R=j);return Oe&&Xr(y,k),S}for(j=r(y,j);k<p.length;k++)T=C(j,y,k,p[k],v),T!==null&&(e&&T.alternate!==null&&j.delete(T.key===null?k:T.key),h=i(T,h,k),R===null?S=T:R.sibling=T,R=T);return e&&j.forEach(function(F){return t(y,F)}),Oe&&Xr(y,k),S}function E(y,h,p,v){var S=Di(p);if(typeof S!="function")throw Error($(150));if(p=S.call(p),p==null)throw Error($(151));for(var R=S=null,j=h,k=h=0,T=null,N=p.next();j!==null&&!N.done;k++,N=p.next()){j.index>k?(T=j,j=null):T=j.sibling;var F=g(y,j,N.value,v);if(F===null){j===null&&(j=T);break}e&&j&&F.alternate===null&&t(y,j),h=i(F,h,k),R===null?S=F:R.sibling=F,R=F,j=T}if(N.done)return n(y,j),Oe&&Xr(y,k),S;if(j===null){for(;!N.done;k++,N=p.next())N=m(y,N.value,v),N!==null&&(h=i(N,h,k),R===null?S=N:R.sibling=N,R=N);return Oe&&Xr(y,k),S}for(j=r(y,j);!N.done;k++,N=p.next())N=C(j,y,k,N.value,v),N!==null&&(e&&N.alternate!==null&&j.delete(N.key===null?k:N.key),h=i(N,h,k),R===null?S=N:R.sibling=N,R=N);return e&&j.forEach(function(U){return t(y,U)}),Oe&&Xr(y,k),S}function L(y,h,p,v){if(typeof p=="object"&&p!==null&&p.type===Bs&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case ul:e:{for(var S=p.key,R=h;R!==null;){if(R.key===S){if(S=p.type,S===Bs){if(R.tag===7){n(y,R.sibling),h=s(R,p.props.children),h.return=y,y=h;break e}}else if(R.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===vr&&Lh(S)===R.type){n(y,R.sibling),h=s(R,p.props),h.ref=Bi(y,R,p),h.return=y,y=h;break e}n(y,R);break}else t(y,R);R=R.sibling}p.type===Bs?(h=gs(p.props.children,y.mode,v,p.key),h.return=y,y=h):(v=Wl(p.type,p.key,p.props,null,y.mode,v),v.ref=Bi(y,h,p),v.return=y,y=v)}return o(y);case Us:e:{for(R=p.key;h!==null;){if(h.key===R)if(h.tag===4&&h.stateNode.containerInfo===p.containerInfo&&h.stateNode.implementation===p.implementation){n(y,h.sibling),h=s(h,p.children||[]),h.return=y,y=h;break e}else{n(y,h);break}else t(y,h);h=h.sibling}h=$u(p,y.mode,v),h.return=y,y=h}return o(y);case vr:return R=p._init,L(y,h,R(p._payload),v)}if(Gi(p))return w(y,h,p,v);if(Di(p))return E(y,h,p,v);wl(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,h!==null&&h.tag===6?(n(y,h.sibling),h=s(h,p),h.return=y,y=h):(n(y,h),h=Au(p,y.mode,v),h.return=y,y=h),o(y)):n(y,h)}return L}var ki=Ug(!0),Bg=Ug(!1),da=Hr(null),fa=null,Gs=null,Wd=null;function Hd(){Wd=Gs=fa=null}function Vd(e){var t=da.current;Ie(da),e._currentValue=t}function Nc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ri(e,t){fa=e,Wd=Gs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($t=!0),e.firstContext=null)}function dn(e){var t=e._currentValue;if(Wd!==e)if(e={context:e,memoizedValue:t,next:null},Gs===null){if(fa===null)throw Error($(308));Gs=e,fa.dependencies={lanes:0,firstContext:e}}else Gs=Gs.next=e;return t}var es=null;function Qd(e){es===null?es=[e]:es.push(e)}function Wg(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Qd(t)):(n.next=s.next,s.next=n),t.interleaved=n,or(e,r)}function or(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var yr=!1;function Kd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function tr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Or(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,be&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,or(e,n)}return s=r.interleaved,s===null?(t.next=t,Qd(r)):(t.next=s.next,s.next=t),r.interleaved=t,or(e,n)}function Dl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,_d(e,n)}}function Th(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ha(e,t,n,r){var s=e.updateQueue;yr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=d=u=null,l=i;do{var g=l.lane,C=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:C,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,E=l;switch(g=t,C=n,E.tag){case 1:if(w=E.payload,typeof w=="function"){m=w.call(C,m,g);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=E.payload,g=typeof w=="function"?w.call(C,m,g):w,g==null)break e;m=Ae({},m,g);break e;case 2:yr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else C={eventTime:C,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=C,u=m):f=f.next=C,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);ws|=o,e.lanes=o,e.memoizedState=m}}function _h(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Bo={},zn=Hr(Bo),bo=Hr(Bo),ko=Hr(Bo);function ts(e){if(e===Bo)throw Error($(174));return e}function qd(e,t){switch(Te(ko,t),Te(bo,e),Te(zn,Bo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=oc(t,e)}Ie(zn),Te(zn,t)}function Ei(){Ie(zn),Ie(bo),Ie(ko)}function Vg(e){ts(ko.current);var t=ts(zn.current),n=oc(t,e.type);t!==n&&(Te(bo,e),Te(zn,n))}function Yd(e){bo.current===e&&(Ie(zn),Ie(bo))}var De=Hr(0);function ma(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pu=[];function Gd(){for(var e=0;e<Pu.length;e++)Pu[e]._workInProgressVersionPrimary=null;Pu.length=0}var zl=ar.ReactCurrentDispatcher,Iu=ar.ReactCurrentBatchConfig,xs=0,ze=null,Je=null,ot=null,pa=!1,oo=!1,Eo=0,aw=0;function yt(){throw Error($(321))}function Xd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Mn(e[n],t[n]))return!1;return!0}function Jd(e,t,n,r,s,i){if(xs=i,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,zl.current=e===null||e.memoizedState===null?fw:hw,e=n(r,s),oo){i=0;do{if(oo=!1,Eo=0,25<=i)throw Error($(301));i+=1,ot=Je=null,t.updateQueue=null,zl.current=mw,e=n(r,s)}while(oo)}if(zl.current=ga,t=Je!==null&&Je.next!==null,xs=0,ot=Je=ze=null,pa=!1,t)throw Error($(300));return e}function Zd(){var e=Eo!==0;return Eo=0,e}function _n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?ze.memoizedState=ot=e:ot=ot.next=e,ot}function fn(){if(Je===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=Je.next;var t=ot===null?ze.memoizedState:ot.next;if(t!==null)ot=t,Je=e;else{if(e===null)throw Error($(310));Je=e,e={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},ot===null?ze.memoizedState=ot=e:ot=ot.next=e}return ot}function No(e,t){return typeof t=="function"?t(e):t}function Fu(e){var t=fn(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=Je,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var f=d.lane;if((xs&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,ze.lanes|=f,ws|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,Mn(r,t.memoizedState)||($t=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,ze.lanes|=i,ws|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ou(e){var t=fn(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Mn(i,t.memoizedState)||($t=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Qg(){}function Kg(e,t){var n=ze,r=fn(),s=t(),i=!Mn(r.memoizedState,s);if(i&&(r.memoizedState=s,$t=!0),r=r.queue,ef(Gg.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,jo(9,Yg.bind(null,n,r,s,t),void 0,null),lt===null)throw Error($(349));xs&30||qg(n,t,s)}return s}function qg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Yg(e,t,n,r){t.value=n,t.getSnapshot=r,Xg(t)&&Jg(e)}function Gg(e,t,n){return n(function(){Xg(t)&&Jg(e)})}function Xg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Mn(e,n)}catch{return!0}}function Jg(e){var t=or(e,1);t!==null&&Nn(t,e,1,-1)}function Ph(e){var t=_n();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:e},t.queue=e,e=e.dispatch=dw.bind(null,ze,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Zg(){return fn().memoizedState}function Al(e,t,n,r){var s=_n();ze.flags|=e,s.memoizedState=jo(1|t,n,void 0,r===void 0?null:r)}function Aa(e,t,n,r){var s=fn();r=r===void 0?null:r;var i=void 0;if(Je!==null){var o=Je.memoizedState;if(i=o.destroy,r!==null&&Xd(r,o.deps)){s.memoizedState=jo(t,n,i,r);return}}ze.flags|=e,s.memoizedState=jo(1|t,n,i,r)}function Ih(e,t){return Al(8390656,8,e,t)}function ef(e,t){return Aa(2048,8,e,t)}function ev(e,t){return Aa(4,2,e,t)}function tv(e,t){return Aa(4,4,e,t)}function nv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rv(e,t,n){return n=n!=null?n.concat([e]):null,Aa(4,4,nv.bind(null,t,e),n)}function tf(){}function sv(e,t){var n=fn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function iv(e,t){var n=fn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ov(e,t,n){return xs&21?(Mn(n,t)||(n=dg(),ze.lanes|=n,ws|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$t=!0),e.memoizedState=n)}function uw(e,t){var n=je;je=n!==0&&4>n?n:4,e(!0);var r=Iu.transition;Iu.transition={};try{e(!1),t()}finally{je=n,Iu.transition=r}}function lv(){return fn().memoizedState}function cw(e,t,n){var r=zr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},av(e))uv(t,n);else if(n=Wg(e,t,n,r),n!==null){var s=Lt();Nn(n,e,r,s),cv(n,t,r)}}function dw(e,t,n){var r=zr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(av(e))uv(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Mn(l,o)){var u=t.interleaved;u===null?(s.next=s,Qd(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=Wg(e,t,s,r),n!==null&&(s=Lt(),Nn(n,e,r,s),cv(n,t,r))}}function av(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function uv(e,t){oo=pa=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function cv(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,_d(e,n)}}var ga={readContext:dn,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},fw={readContext:dn,useCallback:function(e,t){return _n().memoizedState=[e,t===void 0?null:t],e},useContext:dn,useEffect:Ih,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Al(4194308,4,nv.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Al(4194308,4,e,t)},useInsertionEffect:function(e,t){return Al(4,2,e,t)},useMemo:function(e,t){var n=_n();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_n();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=cw.bind(null,ze,e),[r.memoizedState,e]},useRef:function(e){var t=_n();return e={current:e},t.memoizedState=e},useState:Ph,useDebugValue:tf,useDeferredValue:function(e){return _n().memoizedState=e},useTransition:function(){var e=Ph(!1),t=e[0];return e=uw.bind(null,e[1]),_n().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ze,s=_n();if(Oe){if(n===void 0)throw Error($(407));n=n()}else{if(n=t(),lt===null)throw Error($(349));xs&30||qg(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Ih(Gg.bind(null,r,i,e),[e]),r.flags|=2048,jo(9,Yg.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=_n(),t=lt.identifierPrefix;if(Oe){var n=er,r=Zn;n=(r&~(1<<32-En(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Eo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=aw++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hw={readContext:dn,useCallback:sv,useContext:dn,useEffect:ef,useImperativeHandle:rv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:iv,useReducer:Fu,useRef:Zg,useState:function(){return Fu(No)},useDebugValue:tf,useDeferredValue:function(e){var t=fn();return ov(t,Je.memoizedState,e)},useTransition:function(){var e=Fu(No)[0],t=fn().memoizedState;return[e,t]},useMutableSource:Qg,useSyncExternalStore:Kg,useId:lv,unstable_isNewReconciler:!1},mw={readContext:dn,useCallback:sv,useContext:dn,useEffect:ef,useImperativeHandle:rv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:iv,useReducer:Ou,useRef:Zg,useState:function(){return Ou(No)},useDebugValue:tf,useDeferredValue:function(e){var t=fn();return Je===null?t.memoizedState=e:ov(t,Je.memoizedState,e)},useTransition:function(){var e=Ou(No)[0],t=fn().memoizedState;return[e,t]},useMutableSource:Qg,useSyncExternalStore:Kg,useId:lv,unstable_isNewReconciler:!1};function xn(e,t){if(e&&e.defaultProps){t=Ae({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function jc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ae({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var $a={isMounted:function(e){return(e=e._reactInternals)?Es(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Lt(),s=zr(e),i=tr(r,s);i.payload=t,n!=null&&(i.callback=n),t=Or(e,i,s),t!==null&&(Nn(t,e,s,r),Dl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Lt(),s=zr(e),i=tr(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Or(e,i,s),t!==null&&(Nn(t,e,s,r),Dl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lt(),r=zr(e),s=tr(n,r);s.tag=2,t!=null&&(s.callback=t),t=Or(e,s,r),t!==null&&(Nn(t,e,r,n),Dl(t,e,r))}};function Fh(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!xo(n,r)||!xo(s,i):!0}function dv(e,t,n){var r=!1,s=Br,i=t.contextType;return typeof i=="object"&&i!==null?i=dn(i):(s=Bt(t)?vs:St.current,r=t.contextTypes,i=(r=r!=null)?Ci(e,s):Br),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$a,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Oh(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&$a.enqueueReplaceState(t,t.state,null)}function Mc(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Kd(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=dn(i):(i=Bt(t)?vs:St.current,s.context=Ci(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(jc(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&$a.enqueueReplaceState(s,s.state,null),ha(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ni(e,t){try{var n="",r=t;do n+=B0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Du(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Rc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pw=typeof WeakMap=="function"?WeakMap:Map;function fv(e,t,n){n=tr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ya||(ya=!0,Ac=r),Rc(e,t)},n}function hv(e,t,n){n=tr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Rc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Rc(e,t),typeof r!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Dh(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new pw;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Rw.bind(null,e,t,n),t.then(e,e))}function zh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ah(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=tr(-1,1),t.tag=2,Or(n,t,1))),n.lanes|=1),e)}var gw=ar.ReactCurrentOwner,$t=!1;function Mt(e,t,n,r){t.child=e===null?Bg(t,null,n,r):ki(t,e.child,n,r)}function $h(e,t,n,r,s){n=n.render;var i=t.ref;return ri(t,s),r=Jd(e,t,n,r,i,s),n=Zd(),e!==null&&!$t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,lr(e,t,s)):(Oe&&n&&$d(t),t.flags|=1,Mt(e,t,r,s),t.child)}function Uh(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!cf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,mv(e,t,i,r,s)):(e=Wl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:xo,n(o,r)&&e.ref===t.ref)return lr(e,t,s)}return t.flags|=1,e=Ar(i,r),e.ref=t.ref,e.return=t,t.child=e}function mv(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(xo(i,r)&&e.ref===t.ref)if($t=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&($t=!0);else return t.lanes=e.lanes,lr(e,t,s)}return Lc(e,t,n,r,s)}function pv(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Js,Yt),Yt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Te(Js,Yt),Yt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Js,Yt),Yt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Te(Js,Yt),Yt|=r;return Mt(e,t,s,n),t.child}function gv(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Lc(e,t,n,r,s){var i=Bt(n)?vs:St.current;return i=Ci(t,i),ri(t,s),n=Jd(e,t,n,r,i,s),r=Zd(),e!==null&&!$t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,lr(e,t,s)):(Oe&&r&&$d(t),t.flags|=1,Mt(e,t,n,s),t.child)}function Bh(e,t,n,r,s){if(Bt(n)){var i=!0;aa(t)}else i=!1;if(ri(t,s),t.stateNode===null)$l(e,t),dv(t,n,r),Mc(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=dn(d):(d=Bt(n)?vs:St.current,d=Ci(t,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Oh(t,o,r,d),yr=!1;var g=t.memoizedState;o.state=g,ha(t,r,o,s),u=t.memoizedState,l!==r||g!==u||Ut.current||yr?(typeof f=="function"&&(jc(t,n,f,r),u=t.memoizedState),(l=yr||Fh(t,n,l,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Hg(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:xn(t.type,l),o.props=d,m=t.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=dn(u):(u=Bt(n)?vs:St.current,u=Ci(t,u));var C=n.getDerivedStateFromProps;(f=typeof C=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Oh(t,o,r,u),yr=!1,g=t.memoizedState,o.state=g,ha(t,r,o,s);var w=t.memoizedState;l!==m||g!==w||Ut.current||yr?(typeof C=="function"&&(jc(t,n,C,r),w=t.memoizedState),(d=yr||Fh(t,n,d,r,g,w,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Tc(e,t,n,r,i,s)}function Tc(e,t,n,r,s,i){gv(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&jh(t,n,!1),lr(e,t,i);r=t.stateNode,gw.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=ki(t,e.child,null,i),t.child=ki(t,null,l,i)):Mt(e,t,l,i),t.memoizedState=r.state,s&&jh(t,n,!0),t.child}function vv(e){var t=e.stateNode;t.pendingContext?Nh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Nh(e,t.context,!1),qd(e,t.containerInfo)}function Wh(e,t,n,r,s){return bi(),Bd(s),t.flags|=256,Mt(e,t,n,r),t.child}var _c={dehydrated:null,treeContext:null,retryLane:0};function Pc(e){return{baseLanes:e,cachePool:null,transitions:null}}function yv(e,t,n){var r=t.pendingProps,s=De.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Te(De,s&1),e===null)return Ec(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Wa(o,r,0,null),e=gs(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Pc(n),t.memoizedState=_c,e):nf(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return vw(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Ar(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ar(l,i):(i=gs(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Pc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=_c,r}return i=e.child,e=i.sibling,r=Ar(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function nf(e,t){return t=Wa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Sl(e,t,n,r){return r!==null&&Bd(r),ki(t,e.child,null,n),e=nf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vw(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Du(Error($(422))),Sl(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Wa({mode:"visible",children:r.children},s,0,null),i=gs(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ki(t,e.child,null,o),t.child.memoizedState=Pc(o),t.memoizedState=_c,i);if(!(t.mode&1))return Sl(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=Du(i,r,void 0),Sl(e,t,o,r)}if(l=(o&e.childLanes)!==0,$t||l){if(r=lt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,or(e,s),Nn(r,e,s,-1))}return uf(),r=Du(Error($(421))),Sl(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Lw.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Gt=Fr(s.nextSibling),Xt=t,Oe=!0,kn=null,e!==null&&(on[ln++]=Zn,on[ln++]=er,on[ln++]=ys,Zn=e.id,er=e.overflow,ys=t),t=nf(t,r.children),t.flags|=4096,t)}function Hh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Nc(e.return,t,n)}function zu(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function xv(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Mt(e,t,r.children,n),r=De.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hh(e,n,t);else if(e.tag===19)Hh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Te(De,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&ma(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),zu(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ma(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}zu(t,!0,n,null,i);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $l(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function lr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ws|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,n=Ar(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ar(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function yw(e,t,n){switch(t.tag){case 3:vv(t),bi();break;case 5:Vg(t);break;case 1:Bt(t.type)&&aa(t);break;case 4:qd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Te(da,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Te(De,De.current&1),t.flags|=128,null):n&t.child.childLanes?yv(e,t,n):(Te(De,De.current&1),e=lr(e,t,n),e!==null?e.sibling:null);Te(De,De.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return xv(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(De,De.current),r)break;return null;case 22:case 23:return t.lanes=0,pv(e,t,n)}return lr(e,t,n)}var wv,Ic,Sv,Cv;wv=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ic=function(){};Sv=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ts(zn.current);var i=null;switch(n){case"input":s=nc(e,s),r=nc(e,r),i=[];break;case"select":s=Ae({},s,{value:void 0}),r=Ae({},r,{value:void 0}),i=[];break;case"textarea":s=ic(e,s),r=ic(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=oa)}lc(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(fo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(fo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Pe("scroll",e),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Cv=function(e,t,n,r){n!==r&&(t.flags|=4)};function Wi(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function xt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function xw(e,t,n){var r=t.pendingProps;switch(Ud(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(t),null;case 1:return Bt(t.type)&&la(),xt(t),null;case 3:return r=t.stateNode,Ei(),Ie(Ut),Ie(St),Gd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(xl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,kn!==null&&(Bc(kn),kn=null))),Ic(e,t),xt(t),null;case 5:Yd(t);var s=ts(ko.current);if(n=t.type,e!==null&&t.stateNode!=null)Sv(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error($(166));return xt(t),null}if(e=ts(zn.current),xl(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[On]=t,r[Co]=i,e=(t.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(s=0;s<Ji.length;s++)Pe(Ji[s],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":Zf(r,i),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Pe("invalid",r);break;case"textarea":th(r,i),Pe("invalid",r)}lc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&yl(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&yl(r.textContent,l,e),s=["children",""+l]):fo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Pe("scroll",r)}switch(n){case"input":cl(r),eh(r,i,!0);break;case"textarea":cl(r),nh(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=oa)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Gp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[On]=t,e[Co]=r,wv(e,t,!1,!1),t.stateNode=e;e:{switch(o=ac(n,r),n){case"dialog":Pe("cancel",e),Pe("close",e),s=r;break;case"iframe":case"object":case"embed":Pe("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ji.length;s++)Pe(Ji[s],e);s=r;break;case"source":Pe("error",e),s=r;break;case"img":case"image":case"link":Pe("error",e),Pe("load",e),s=r;break;case"details":Pe("toggle",e),s=r;break;case"input":Zf(e,r),s=nc(e,r),Pe("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ae({},r,{value:void 0}),Pe("invalid",e);break;case"textarea":th(e,r),s=ic(e,r),Pe("invalid",e);break;default:s=r}lc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Zp(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Xp(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ho(e,u):typeof u=="number"&&ho(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Pe("scroll",e):u!=null&&Nd(e,i,u,o))}switch(n){case"input":cl(e),eh(e,r,!1);break;case"textarea":cl(e),nh(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ur(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Zs(e,!!r.multiple,i,!1):r.defaultValue!=null&&Zs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=oa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xt(t),null;case 6:if(e&&t.stateNode!=null)Cv(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error($(166));if(n=ts(ko.current),ts(zn.current),xl(t)){if(r=t.stateNode,n=t.memoizedProps,r[On]=t,(i=r.nodeValue!==n)&&(e=Xt,e!==null))switch(e.tag){case 3:yl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yl(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[On]=t,t.stateNode=r}return xt(t),null;case 13:if(Ie(De),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Oe&&Gt!==null&&t.mode&1&&!(t.flags&128))$g(),bi(),t.flags|=98560,i=!1;else if(i=xl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error($(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[On]=t}else bi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;xt(t),i=!1}else kn!==null&&(Bc(kn),kn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||De.current&1?et===0&&(et=3):uf())),t.updateQueue!==null&&(t.flags|=4),xt(t),null);case 4:return Ei(),Ic(e,t),e===null&&wo(t.stateNode.containerInfo),xt(t),null;case 10:return Vd(t.type._context),xt(t),null;case 17:return Bt(t.type)&&la(),xt(t),null;case 19:if(Ie(De),i=t.memoizedState,i===null)return xt(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Wi(i,!1);else{if(et!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ma(e),o!==null){for(t.flags|=128,Wi(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Te(De,De.current&1|2),t.child}e=e.sibling}i.tail!==null&&Qe()>ji&&(t.flags|=128,r=!0,Wi(i,!1),t.lanes=4194304)}else{if(!r)if(e=ma(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Wi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Oe)return xt(t),null}else 2*Qe()-i.renderingStartTime>ji&&n!==1073741824&&(t.flags|=128,r=!0,Wi(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qe(),t.sibling=null,n=De.current,Te(De,r?n&1|2:n&1),t):(xt(t),null);case 22:case 23:return af(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Yt&1073741824&&(xt(t),t.subtreeFlags&6&&(t.flags|=8192)):xt(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function ww(e,t){switch(Ud(t),t.tag){case 1:return Bt(t.type)&&la(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ei(),Ie(Ut),Ie(St),Gd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Yd(t),null;case 13:if(Ie(De),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));bi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie(De),null;case 4:return Ei(),null;case 10:return Vd(t.type._context),null;case 22:case 23:return af(),null;case 24:return null;default:return null}}var Cl=!1,wt=!1,Sw=typeof WeakSet=="function"?WeakSet:Set,G=null;function Xs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(e,t,r)}else n.current=null}function Fc(e,t,n){try{n()}catch(r){We(e,t,r)}}var Vh=!1;function Cw(e,t){if(yc=ra,e=jg(),Ad(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,m=e,g=null;t:for(;;){for(var C;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(C=m.firstChild)!==null;)g=m,m=C;for(;;){if(m===e)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(u=o),(C=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=C}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(xc={focusedElem:e,selectionRange:n},ra=!1,G=t;G!==null;)if(t=G,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,G=e;else for(;G!==null;){t=G;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var E=w.memoizedProps,L=w.memoizedState,y=t.stateNode,h=y.getSnapshotBeforeUpdate(t.elementType===t.type?E:xn(t.type,E),L);y.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(v){We(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,G=e;break}G=t.return}return w=Vh,Vh=!1,w}function lo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Fc(t,n,i)}s=s.next}while(s!==r)}}function Ua(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Oc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function bv(e){var t=e.alternate;t!==null&&(e.alternate=null,bv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[On],delete t[Co],delete t[Cc],delete t[sw],delete t[iw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function kv(e){return e.tag===5||e.tag===3||e.tag===4}function Qh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||kv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Dc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=oa));else if(r!==4&&(e=e.child,e!==null))for(Dc(e,t,n),e=e.sibling;e!==null;)Dc(e,t,n),e=e.sibling}function zc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(zc(e,t,n),e=e.sibling;e!==null;)zc(e,t,n),e=e.sibling}var ht=null,bn=!1;function mr(e,t,n){for(n=n.child;n!==null;)Ev(e,t,n),n=n.sibling}function Ev(e,t,n){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(Pa,n)}catch{}switch(n.tag){case 5:wt||Xs(n,t);case 6:var r=ht,s=bn;ht=null,mr(e,t,n),ht=r,bn=s,ht!==null&&(bn?(e=ht,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ht.removeChild(n.stateNode));break;case 18:ht!==null&&(bn?(e=ht,n=n.stateNode,e.nodeType===8?Tu(e.parentNode,n):e.nodeType===1&&Tu(e,n),vo(e)):Tu(ht,n.stateNode));break;case 4:r=ht,s=bn,ht=n.stateNode.containerInfo,bn=!0,mr(e,t,n),ht=r,bn=s;break;case 0:case 11:case 14:case 15:if(!wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Fc(n,t,o),s=s.next}while(s!==r)}mr(e,t,n);break;case 1:if(!wt&&(Xs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){We(n,t,l)}mr(e,t,n);break;case 21:mr(e,t,n);break;case 22:n.mode&1?(wt=(r=wt)||n.memoizedState!==null,mr(e,t,n),wt=r):mr(e,t,n);break;default:mr(e,t,n)}}function Kh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Sw),t.forEach(function(r){var s=Tw.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function vn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ht=l.stateNode,bn=!1;break e;case 3:ht=l.stateNode.containerInfo,bn=!0;break e;case 4:ht=l.stateNode.containerInfo,bn=!0;break e}l=l.return}if(ht===null)throw Error($(160));Ev(i,o,s),ht=null,bn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){We(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Nv(t,e),t=t.sibling}function Nv(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vn(t,e),Tn(e),r&4){try{lo(3,e,e.return),Ua(3,e)}catch(E){We(e,e.return,E)}try{lo(5,e,e.return)}catch(E){We(e,e.return,E)}}break;case 1:vn(t,e),Tn(e),r&512&&n!==null&&Xs(n,n.return);break;case 5:if(vn(t,e),Tn(e),r&512&&n!==null&&Xs(n,n.return),e.flags&32){var s=e.stateNode;try{ho(s,"")}catch(E){We(e,e.return,E)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&qp(s,i),ac(l,o);var d=ac(l,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?Zp(s,m):f==="dangerouslySetInnerHTML"?Xp(s,m):f==="children"?ho(s,m):Nd(s,f,m,d)}switch(l){case"input":rc(s,i);break;case"textarea":Yp(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var C=i.value;C!=null?Zs(s,!!i.multiple,C,!1):g!==!!i.multiple&&(i.defaultValue!=null?Zs(s,!!i.multiple,i.defaultValue,!0):Zs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Co]=i}catch(E){We(e,e.return,E)}}break;case 6:if(vn(t,e),Tn(e),r&4){if(e.stateNode===null)throw Error($(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(E){We(e,e.return,E)}}break;case 3:if(vn(t,e),Tn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vo(t.containerInfo)}catch(E){We(e,e.return,E)}break;case 4:vn(t,e),Tn(e);break;case 13:vn(t,e),Tn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(of=Qe())),r&4&&Kh(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(wt=(d=wt)||f,vn(t,e),wt=d):vn(t,e),Tn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(G=e,f=e.child;f!==null;){for(m=G=f;G!==null;){switch(g=G,C=g.child,g.tag){case 0:case 11:case 14:case 15:lo(4,g,g.return);break;case 1:Xs(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(E){We(r,n,E)}}break;case 5:Xs(g,g.return);break;case 22:if(g.memoizedState!==null){Yh(m);continue}}C!==null?(C.return=g,G=C):Yh(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Jp("display",o))}catch(E){We(e,e.return,E)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(E){We(e,e.return,E)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:vn(t,e),Tn(e),r&4&&Kh(e);break;case 21:break;default:vn(t,e),Tn(e)}}function Tn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(kv(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ho(s,""),r.flags&=-33);var i=Qh(e);zc(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Qh(e);Dc(e,l,o);break;default:throw Error($(161))}}catch(u){We(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bw(e,t,n){G=e,jv(e)}function jv(e,t,n){for(var r=(e.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Cl;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||wt;l=Cl;var d=wt;if(Cl=o,(wt=u)&&!d)for(G=s;G!==null;)o=G,u=o.child,o.tag===22&&o.memoizedState!==null?Gh(s):u!==null?(u.return=o,G=u):Gh(s);for(;i!==null;)G=i,jv(i),i=i.sibling;G=s,Cl=l,wt=d}qh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):qh(e)}}function qh(e){for(;G!==null;){var t=G;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wt||Ua(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!wt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:xn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&_h(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}_h(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&vo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}wt||t.flags&512&&Oc(t)}catch(g){We(t,t.return,g)}}if(t===e){G=null;break}if(n=t.sibling,n!==null){n.return=t.return,G=n;break}G=t.return}}function Yh(e){for(;G!==null;){var t=G;if(t===e){G=null;break}var n=t.sibling;if(n!==null){n.return=t.return,G=n;break}G=t.return}}function Gh(e){for(;G!==null;){var t=G;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ua(4,t)}catch(u){We(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){We(t,s,u)}}var i=t.return;try{Oc(t)}catch(u){We(t,i,u)}break;case 5:var o=t.return;try{Oc(t)}catch(u){We(t,o,u)}}}catch(u){We(t,t.return,u)}if(t===e){G=null;break}var l=t.sibling;if(l!==null){l.return=t.return,G=l;break}G=t.return}}var kw=Math.ceil,va=ar.ReactCurrentDispatcher,rf=ar.ReactCurrentOwner,cn=ar.ReactCurrentBatchConfig,be=0,lt=null,Ye=null,mt=0,Yt=0,Js=Hr(0),et=0,Mo=null,ws=0,Ba=0,sf=0,ao=null,At=null,of=0,ji=1/0,Kn=null,ya=!1,Ac=null,Dr=null,bl=!1,Tr=null,xa=0,uo=0,$c=null,Ul=-1,Bl=0;function Lt(){return be&6?Qe():Ul!==-1?Ul:Ul=Qe()}function zr(e){return e.mode&1?be&2&&mt!==0?mt&-mt:lw.transition!==null?(Bl===0&&(Bl=dg()),Bl):(e=je,e!==0||(e=window.event,e=e===void 0?16:yg(e.type)),e):1}function Nn(e,t,n,r){if(50<uo)throw uo=0,$c=null,Error($(185));Ao(e,n,r),(!(be&2)||e!==lt)&&(e===lt&&(!(be&2)&&(Ba|=n),et===4&&wr(e,mt)),Wt(e,r),n===1&&be===0&&!(t.mode&1)&&(ji=Qe()+500,za&&Vr()))}function Wt(e,t){var n=e.callbackNode;lx(e,t);var r=na(e,e===lt?mt:0);if(r===0)n!==null&&ih(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ih(n),t===1)e.tag===0?ow(Xh.bind(null,e)):Dg(Xh.bind(null,e)),nw(function(){!(be&6)&&Vr()}),n=null;else{switch(fg(r)){case 1:n=Td;break;case 4:n=ug;break;case 16:n=ta;break;case 536870912:n=cg;break;default:n=ta}n=Fv(n,Mv.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Mv(e,t){if(Ul=-1,Bl=0,be&6)throw Error($(327));var n=e.callbackNode;if(si()&&e.callbackNode!==n)return null;var r=na(e,e===lt?mt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=wa(e,r);else{t=r;var s=be;be|=2;var i=Lv();(lt!==e||mt!==t)&&(Kn=null,ji=Qe()+500,ps(e,t));do try{jw();break}catch(l){Rv(e,l)}while(!0);Hd(),va.current=i,be=s,Ye!==null?t=0:(lt=null,mt=0,t=et)}if(t!==0){if(t===2&&(s=hc(e),s!==0&&(r=s,t=Uc(e,s))),t===1)throw n=Mo,ps(e,0),wr(e,r),Wt(e,Qe()),n;if(t===6)wr(e,r);else{if(s=e.current.alternate,!(r&30)&&!Ew(s)&&(t=wa(e,r),t===2&&(i=hc(e),i!==0&&(r=i,t=Uc(e,i))),t===1))throw n=Mo,ps(e,0),wr(e,r),Wt(e,Qe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error($(345));case 2:Jr(e,At,Kn);break;case 3:if(wr(e,r),(r&130023424)===r&&(t=of+500-Qe(),10<t)){if(na(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Lt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Sc(Jr.bind(null,e,At,Kn),t);break}Jr(e,At,Kn);break;case 4:if(wr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-En(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kw(r/1960))-r,10<r){e.timeoutHandle=Sc(Jr.bind(null,e,At,Kn),r);break}Jr(e,At,Kn);break;case 5:Jr(e,At,Kn);break;default:throw Error($(329))}}}return Wt(e,Qe()),e.callbackNode===n?Mv.bind(null,e):null}function Uc(e,t){var n=ao;return e.current.memoizedState.isDehydrated&&(ps(e,t).flags|=256),e=wa(e,t),e!==2&&(t=At,At=n,t!==null&&Bc(t)),e}function Bc(e){At===null?At=e:At.push.apply(At,e)}function Ew(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Mn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wr(e,t){for(t&=~sf,t&=~Ba,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-En(t),r=1<<n;e[n]=-1,t&=~r}}function Xh(e){if(be&6)throw Error($(327));si();var t=na(e,0);if(!(t&1))return Wt(e,Qe()),null;var n=wa(e,t);if(e.tag!==0&&n===2){var r=hc(e);r!==0&&(t=r,n=Uc(e,r))}if(n===1)throw n=Mo,ps(e,0),wr(e,t),Wt(e,Qe()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Jr(e,At,Kn),Wt(e,Qe()),null}function lf(e,t){var n=be;be|=1;try{return e(t)}finally{be=n,be===0&&(ji=Qe()+500,za&&Vr())}}function Ss(e){Tr!==null&&Tr.tag===0&&!(be&6)&&si();var t=be;be|=1;var n=cn.transition,r=je;try{if(cn.transition=null,je=1,e)return e()}finally{je=r,cn.transition=n,be=t,!(be&6)&&Vr()}}function af(){Yt=Js.current,Ie(Js)}function ps(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,tw(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(Ud(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&la();break;case 3:Ei(),Ie(Ut),Ie(St),Gd();break;case 5:Yd(r);break;case 4:Ei();break;case 13:Ie(De);break;case 19:Ie(De);break;case 10:Vd(r.type._context);break;case 22:case 23:af()}n=n.return}if(lt=e,Ye=e=Ar(e.current,null),mt=Yt=t,et=0,Mo=null,sf=Ba=ws=0,At=ao=null,es!==null){for(t=0;t<es.length;t++)if(n=es[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}es=null}return e}function Rv(e,t){do{var n=Ye;try{if(Hd(),zl.current=ga,pa){for(var r=ze.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}pa=!1}if(xs=0,ot=Je=ze=null,oo=!1,Eo=0,rf.current=null,n===null||n.return===null){et=1,Mo=t,Ye=null;break}e:{var i=e,o=n.return,l=n,u=t;if(t=mt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var C=zh(o);if(C!==null){C.flags&=-257,Ah(C,o,l,i,t),C.mode&1&&Dh(i,d,t),t=C,u=d;var w=t.updateQueue;if(w===null){var E=new Set;E.add(u),t.updateQueue=E}else w.add(u);break e}else{if(!(t&1)){Dh(i,d,t),uf();break e}u=Error($(426))}}else if(Oe&&l.mode&1){var L=zh(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),Ah(L,o,l,i,t),Bd(Ni(u,l));break e}}i=u=Ni(u,l),et!==4&&(et=2),ao===null?ao=[i]:ao.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=fv(i,u,t);Th(i,y);break e;case 1:l=u;var h=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof h.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Dr===null||!Dr.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var v=hv(i,l,t);Th(i,v);break e}}i=i.return}while(i!==null)}_v(n)}catch(S){t=S,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(!0)}function Lv(){var e=va.current;return va.current=ga,e===null?ga:e}function uf(){(et===0||et===3||et===2)&&(et=4),lt===null||!(ws&268435455)&&!(Ba&268435455)||wr(lt,mt)}function wa(e,t){var n=be;be|=2;var r=Lv();(lt!==e||mt!==t)&&(Kn=null,ps(e,t));do try{Nw();break}catch(s){Rv(e,s)}while(!0);if(Hd(),be=n,va.current=r,Ye!==null)throw Error($(261));return lt=null,mt=0,et}function Nw(){for(;Ye!==null;)Tv(Ye)}function jw(){for(;Ye!==null&&!J0();)Tv(Ye)}function Tv(e){var t=Iv(e.alternate,e,Yt);e.memoizedProps=e.pendingProps,t===null?_v(e):Ye=t,rf.current=null}function _v(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ww(n,t),n!==null){n.flags&=32767,Ye=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{et=6,Ye=null;return}}else if(n=xw(n,t,Yt),n!==null){Ye=n;return}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);et===0&&(et=5)}function Jr(e,t,n){var r=je,s=cn.transition;try{cn.transition=null,je=1,Mw(e,t,n,r)}finally{cn.transition=s,je=r}return null}function Mw(e,t,n,r){do si();while(Tr!==null);if(be&6)throw Error($(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(ax(e,i),e===lt&&(Ye=lt=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bl||(bl=!0,Fv(ta,function(){return si(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=cn.transition,cn.transition=null;var o=je;je=1;var l=be;be|=4,rf.current=null,Cw(e,n),Nv(n,e),qx(xc),ra=!!yc,xc=yc=null,e.current=n,bw(n),Z0(),be=l,je=o,cn.transition=i}else e.current=n;if(bl&&(bl=!1,Tr=e,xa=s),i=e.pendingLanes,i===0&&(Dr=null),nx(n.stateNode),Wt(e,Qe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ya)throw ya=!1,e=Ac,Ac=null,e;return xa&1&&e.tag!==0&&si(),i=e.pendingLanes,i&1?e===$c?uo++:(uo=0,$c=e):uo=0,Vr(),null}function si(){if(Tr!==null){var e=fg(xa),t=cn.transition,n=je;try{if(cn.transition=null,je=16>e?16:e,Tr===null)var r=!1;else{if(e=Tr,Tr=null,xa=0,be&6)throw Error($(331));var s=be;for(be|=4,G=e.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(G=d;G!==null;){var f=G;switch(f.tag){case 0:case 11:case 15:lo(8,f,i)}var m=f.child;if(m!==null)m.return=f,G=m;else for(;G!==null;){f=G;var g=f.sibling,C=f.return;if(bv(f),f===d){G=null;break}if(g!==null){g.return=C,G=g;break}G=C}}}var w=i.alternate;if(w!==null){var E=w.child;if(E!==null){w.child=null;do{var L=E.sibling;E.sibling=null,E=L}while(E!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:lo(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,G=y;break e}G=i.return}}var h=e.current;for(G=h;G!==null;){o=G;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,G=p;else e:for(o=h;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ua(9,l)}}catch(S){We(l,l.return,S)}if(l===o){G=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,G=v;break e}G=l.return}}if(be=s,Vr(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(Pa,e)}catch{}r=!0}return r}finally{je=n,cn.transition=t}}return!1}function Jh(e,t,n){t=Ni(n,t),t=fv(e,t,1),e=Or(e,t,1),t=Lt(),e!==null&&(Ao(e,1,t),Wt(e,t))}function We(e,t,n){if(e.tag===3)Jh(e,e,n);else for(;t!==null;){if(t.tag===3){Jh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Dr===null||!Dr.has(r))){e=Ni(n,e),e=hv(t,e,1),t=Or(t,e,1),e=Lt(),t!==null&&(Ao(t,1,e),Wt(t,e));break}}t=t.return}}function Rw(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Lt(),e.pingedLanes|=e.suspendedLanes&n,lt===e&&(mt&n)===n&&(et===4||et===3&&(mt&130023424)===mt&&500>Qe()-of?ps(e,0):sf|=n),Wt(e,t)}function Pv(e,t){t===0&&(e.mode&1?(t=hl,hl<<=1,!(hl&130023424)&&(hl=4194304)):t=1);var n=Lt();e=or(e,t),e!==null&&(Ao(e,t,n),Wt(e,n))}function Lw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Pv(e,n)}function Tw(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(t),Pv(e,n)}var Iv;Iv=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ut.current)$t=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return $t=!1,yw(e,t,n);$t=!!(e.flags&131072)}else $t=!1,Oe&&t.flags&1048576&&zg(t,ca,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$l(e,t),e=t.pendingProps;var s=Ci(t,St.current);ri(t,n),s=Jd(null,t,r,e,s,n);var i=Zd();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bt(r)?(i=!0,aa(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Kd(t),s.updater=$a,t.stateNode=s,s._reactInternals=t,Mc(t,r,e,n),t=Tc(null,t,r,!0,i,n)):(t.tag=0,Oe&&i&&$d(t),Mt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch($l(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Pw(r),e=xn(r,e),s){case 0:t=Lc(null,t,r,e,n);break e;case 1:t=Bh(null,t,r,e,n);break e;case 11:t=$h(null,t,r,e,n);break e;case 14:t=Uh(null,t,r,xn(r.type,e),n);break e}throw Error($(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:xn(r,s),Lc(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:xn(r,s),Bh(e,t,r,s,n);case 3:e:{if(vv(t),e===null)throw Error($(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Hg(e,t),ha(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ni(Error($(423)),t),t=Wh(e,t,r,n,s);break e}else if(r!==s){s=Ni(Error($(424)),t),t=Wh(e,t,r,n,s);break e}else for(Gt=Fr(t.stateNode.containerInfo.firstChild),Xt=t,Oe=!0,kn=null,n=Bg(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bi(),r===s){t=lr(e,t,n);break e}Mt(e,t,r,n)}t=t.child}return t;case 5:return Vg(t),e===null&&Ec(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,wc(r,s)?o=null:i!==null&&wc(r,i)&&(t.flags|=32),gv(e,t),Mt(e,t,o,n),t.child;case 6:return e===null&&Ec(t),null;case 13:return yv(e,t,n);case 4:return qd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ki(t,null,r,n):Mt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:xn(r,s),$h(e,t,r,s,n);case 7:return Mt(e,t,t.pendingProps,n),t.child;case 8:return Mt(e,t,t.pendingProps.children,n),t.child;case 12:return Mt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Te(da,r._currentValue),r._currentValue=o,i!==null)if(Mn(i.value,o)){if(i.children===s.children&&!Ut.current){t=lr(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=tr(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Nc(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Nc(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Mt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ri(t,n),s=dn(s),r=r(s),t.flags|=1,Mt(e,t,r,n),t.child;case 14:return r=t.type,s=xn(r,t.pendingProps),s=xn(r.type,s),Uh(e,t,r,s,n);case 15:return mv(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:xn(r,s),$l(e,t),t.tag=1,Bt(r)?(e=!0,aa(t)):e=!1,ri(t,n),dv(t,r,s),Mc(t,r,s,n),Tc(null,t,r,!0,e,n);case 19:return xv(e,t,n);case 22:return pv(e,t,n)}throw Error($(156,t.tag))};function Fv(e,t){return ag(e,t)}function _w(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(e,t,n,r){return new _w(e,t,n,r)}function cf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Pw(e){if(typeof e=="function")return cf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Md)return 11;if(e===Rd)return 14}return 2}function Ar(e,t){var n=e.alternate;return n===null?(n=un(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Wl(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")cf(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Bs:return gs(n.children,s,i,t);case jd:o=8,s|=8;break;case Ju:return e=un(12,n,t,s|2),e.elementType=Ju,e.lanes=i,e;case Zu:return e=un(13,n,t,s),e.elementType=Zu,e.lanes=i,e;case ec:return e=un(19,n,t,s),e.elementType=ec,e.lanes=i,e;case Vp:return Wa(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Wp:o=10;break e;case Hp:o=9;break e;case Md:o=11;break e;case Rd:o=14;break e;case vr:o=16,r=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=un(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function gs(e,t,n,r){return e=un(7,e,r,t),e.lanes=n,e}function Wa(e,t,n,r){return e=un(22,e,r,t),e.elementType=Vp,e.lanes=n,e.stateNode={isHidden:!1},e}function Au(e,t,n){return e=un(6,e,null,t),e.lanes=n,e}function $u(e,t,n){return t=un(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Iw(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wu(0),this.expirationTimes=wu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function df(e,t,n,r,s,i,o,l,u){return e=new Iw(e,t,n,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=un(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kd(i),e}function Fw(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Us,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ov(e){if(!e)return Br;e=e._reactInternals;e:{if(Es(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(Bt(n))return Og(e,n,t)}return t}function Dv(e,t,n,r,s,i,o,l,u){return e=df(n,r,!0,e,s,i,o,l,u),e.context=Ov(null),n=e.current,r=Lt(),s=zr(n),i=tr(r,s),i.callback=t??null,Or(n,i,s),e.current.lanes=s,Ao(e,s,r),Wt(e,r),e}function Ha(e,t,n,r){var s=t.current,i=Lt(),o=zr(s);return n=Ov(n),t.context===null?t.context=n:t.pendingContext=n,t=tr(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Or(s,t,o),e!==null&&(Nn(e,s,o,i),Dl(e,s,o)),o}function Sa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ff(e,t){Zh(e,t),(e=e.alternate)&&Zh(e,t)}function Ow(){return null}var zv=typeof reportError=="function"?reportError:function(e){console.error(e)};function hf(e){this._internalRoot=e}Va.prototype.render=hf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));Ha(e,t,null,null)};Va.prototype.unmount=hf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ss(function(){Ha(null,e,null,null)}),t[ir]=null}};function Va(e){this._internalRoot=e}Va.prototype.unstable_scheduleHydration=function(e){if(e){var t=pg();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xr.length&&t!==0&&t<xr[n].priority;n++);xr.splice(n,0,e),n===0&&vg(e)}};function mf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Qa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function em(){}function Dw(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Sa(o);i.call(d)}}var o=Dv(t,r,e,0,null,!1,!1,"",em);return e._reactRootContainer=o,e[ir]=o.current,wo(e.nodeType===8?e.parentNode:e),Ss(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Sa(u);l.call(d)}}var u=df(e,0,!1,null,null,!1,!1,"",em);return e._reactRootContainer=u,e[ir]=u.current,wo(e.nodeType===8?e.parentNode:e),Ss(function(){Ha(t,u,n,r)}),u}function Ka(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Sa(o);l.call(u)}}Ha(t,o,e,s)}else o=Dw(n,t,e,s,r);return Sa(o)}hg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Xi(t.pendingLanes);n!==0&&(_d(t,n|1),Wt(t,Qe()),!(be&6)&&(ji=Qe()+500,Vr()))}break;case 13:Ss(function(){var r=or(e,1);if(r!==null){var s=Lt();Nn(r,e,1,s)}}),ff(e,1)}};Pd=function(e){if(e.tag===13){var t=or(e,134217728);if(t!==null){var n=Lt();Nn(t,e,134217728,n)}ff(e,134217728)}};mg=function(e){if(e.tag===13){var t=zr(e),n=or(e,t);if(n!==null){var r=Lt();Nn(n,e,t,r)}ff(e,t)}};pg=function(){return je};gg=function(e,t){var n=je;try{return je=e,t()}finally{je=n}};cc=function(e,t,n){switch(t){case"input":if(rc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Da(r);if(!s)throw Error($(90));Kp(r),rc(r,s)}}}break;case"textarea":Yp(e,n);break;case"select":t=n.value,t!=null&&Zs(e,!!n.multiple,t,!1)}};ng=lf;rg=Ss;var zw={usingClientEntryPoint:!1,Events:[Uo,Qs,Da,eg,tg,lf]},Hi={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Aw={bundleType:Hi.bundleType,version:Hi.version,rendererPackageName:Hi.rendererPackageName,rendererConfig:Hi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=og(e),e===null?null:e.stateNode},findFiberByHostInstance:Hi.findFiberByHostInstance||Ow,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kl.isDisabled&&kl.supportsFiber)try{Pa=kl.inject(Aw),Dn=kl}catch{}}Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zw;Zt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mf(t))throw Error($(200));return Fw(e,t,null,n)};Zt.createRoot=function(e,t){if(!mf(e))throw Error($(299));var n=!1,r="",s=zv;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=df(e,1,!1,null,null,n,!1,r,s),e[ir]=t.current,wo(e.nodeType===8?e.parentNode:e),new hf(t)};Zt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=og(t),e=e===null?null:e.stateNode,e};Zt.flushSync=function(e){return Ss(e)};Zt.hydrate=function(e,t,n){if(!Qa(t))throw Error($(200));return Ka(null,e,t,!0,n)};Zt.hydrateRoot=function(e,t,n){if(!mf(e))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=zv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Dv(t,null,e,1,n??null,s,!1,i,o),e[ir]=t.current,wo(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Va(t)};Zt.render=function(e,t,n){if(!Qa(t))throw Error($(200));return Ka(null,e,t,!1,n)};Zt.unmountComponentAtNode=function(e){if(!Qa(e))throw Error($(40));return e._reactRootContainer?(Ss(function(){Ka(null,null,e,!1,function(){e._reactRootContainer=null,e[ir]=null})}),!0):!1};Zt.unstable_batchedUpdates=lf;Zt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qa(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return Ka(e,t,n,!1,r)};Zt.version="18.3.1-next-f1338f8080-20240426";function Av(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Av)}catch(e){console.error(e)}}Av(),Ap.exports=Zt;var pf=Ap.exports,$v,tm=pf;$v=tm.createRoot,tm.hydrateRoot;var _i=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$w={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Sr,xd,vp,Uw=(vp=class{constructor(){le(this,Sr,$w);le(this,xd,!1)}setTimeoutProvider(e){V(this,Sr,e)}setTimeout(e,t){return b(this,Sr).setTimeout(e,t)}clearTimeout(e){b(this,Sr).clearTimeout(e)}setInterval(e,t){return b(this,Sr).setInterval(e,t)}clearInterval(e){b(this,Sr).clearInterval(e)}},Sr=new WeakMap,xd=new WeakMap,vp),ns=new Uw;function Bw(e){setTimeout(e,0)}var Cs=typeof window>"u"||"Deno"in globalThis;function Rt(){}function Ww(e,t){return typeof e=="function"?e(t):e}function Wc(e){return typeof e=="number"&&e>=0&&e!==1/0}function Uv(e,t){return Math.max(e+(t||0)-Date.now(),0)}function $r(e,t){return typeof e=="function"?e(t):e}function sn(e,t){return typeof e=="function"?e(t):e}function nm(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==gf(o,t.options))return!1}else if(!Ro(t.queryKey,o))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function rm(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(bs(t.options.mutationKey)!==bs(i))return!1}else if(!Ro(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function gf(e,t){return((t==null?void 0:t.queryKeyHashFn)||bs)(e)}function bs(e){return JSON.stringify(e,(t,n)=>Hc(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ro(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Ro(e[n],t[n])):!1}var Hw=Object.prototype.hasOwnProperty;function Bv(e,t){if(e===t)return e;const n=sm(e)&&sm(t);if(!n&&!(Hc(e)&&Hc(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let u=0;for(let d=0;d<o;d++){const f=n?d:i[d],m=e[f],g=t[f];if(m===g){l[f]=m,(n?d<s:Hw.call(e,f))&&u++;continue}if(m===null||g===null||typeof m!="object"||typeof g!="object"){l[f]=g;continue}const C=Bv(m,g);l[f]=C,C===m&&u++}return s===o&&u===s?e:l}function Ca(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function sm(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Hc(e){if(!im(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!im(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function im(e){return Object.prototype.toString.call(e)==="[object Object]"}function Vw(e){return new Promise(t=>{ns.setTimeout(t,e)})}function Vc(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Bv(e,t):t}function Qw(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function Kw(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var vf=Symbol();function Wv(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===vf?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Hv(e,t){return typeof e=="function"?e(...t):!!e}function qw(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var os,Cr,ui,yp,Yw=(yp=class extends _i{constructor(){super();le(this,os);le(this,Cr);le(this,ui);V(this,ui,t=>{if(!Cs&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){b(this,Cr)||this.setEventListener(b(this,ui))}onUnsubscribe(){var t;this.hasListeners()||((t=b(this,Cr))==null||t.call(this),V(this,Cr,void 0))}setEventListener(t){var n;V(this,ui,t),(n=b(this,Cr))==null||n.call(this),V(this,Cr,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){b(this,os)!==t&&(V(this,os,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof b(this,os)=="boolean"?b(this,os):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},os=new WeakMap,Cr=new WeakMap,ui=new WeakMap,yp),yf=new Yw;function Qc(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var Gw=Bw;function Xw(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=Gw;const i=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;t++;try{u=l()}finally{t--,t||o()}return u},batchCalls:l=>(...u)=>{i(()=>{l(...u)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Ze=Xw(),ci,br,di,xp,Jw=(xp=class extends _i{constructor(){super();le(this,ci,!0);le(this,br);le(this,di);V(this,di,t=>{if(!Cs&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){b(this,br)||this.setEventListener(b(this,di))}onUnsubscribe(){var t;this.hasListeners()||((t=b(this,br))==null||t.call(this),V(this,br,void 0))}setEventListener(t){var n;V(this,di,t),(n=b(this,br))==null||n.call(this),V(this,br,t(this.setOnline.bind(this)))}setOnline(t){b(this,ci)!==t&&(V(this,ci,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return b(this,ci)}},ci=new WeakMap,br=new WeakMap,di=new WeakMap,xp),ba=new Jw;function Zw(e){return Math.min(1e3*2**e,3e4)}function Vv(e){return(e??"online")==="online"?ba.isOnline():!0}var Kc=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Qv(e){let t=!1,n=0,r;const s=Qc(),i=()=>s.status!=="pending",o=E=>{var L;if(!i()){const y=new Kc(E);g(y),(L=e.onCancel)==null||L.call(e,y)}},l=()=>{t=!0},u=()=>{t=!1},d=()=>yf.isFocused()&&(e.networkMode==="always"||ba.isOnline())&&e.canRun(),f=()=>Vv(e.networkMode)&&e.canRun(),m=E=>{i()||(r==null||r(),s.resolve(E))},g=E=>{i()||(r==null||r(),s.reject(E))},C=()=>new Promise(E=>{var L;r=y=>{(i()||d())&&E(y)},(L=e.onPause)==null||L.call(e)}).then(()=>{var E;r=void 0,i()||(E=e.onContinue)==null||E.call(e)}),w=()=>{if(i())return;let E;const L=n===0?e.initialPromise:void 0;try{E=L??e.fn()}catch(y){E=Promise.reject(y)}Promise.resolve(E).then(m).catch(y=>{var R;if(i())return;const h=e.retry??(Cs?0:3),p=e.retryDelay??Zw,v=typeof p=="function"?p(n,y):p,S=h===!0||typeof h=="number"&&n<h||typeof h=="function"&&h(n,y);if(t||!S){g(y);return}n++,(R=e.onFail)==null||R.call(e,n,y),Vw(v).then(()=>d()?void 0:C()).then(()=>{t?g(y):w()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:u,canStart:f,start:()=>(f()?w():C().then(w),s)}}var ls,wp,Kv=(wp=class{constructor(){le(this,ls)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Wc(this.gcTime)&&V(this,ls,ns.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Cs?1/0:5*60*1e3))}clearGcTimeout(){b(this,ls)&&(ns.clearTimeout(b(this,ls)),V(this,ls,void 0))}},ls=new WeakMap,wp),as,fi,rn,us,it,Po,cs,Sn,Qn,Sp,e1=(Sp=class extends Kv{constructor(t){super();le(this,Sn);le(this,as);le(this,fi);le(this,rn);le(this,us);le(this,it);le(this,Po);le(this,cs);V(this,cs,!1),V(this,Po,t.defaultOptions),this.setOptions(t.options),this.observers=[],V(this,us,t.client),V(this,rn,b(this,us).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,V(this,as,lm(this.options)),this.state=t.state??b(this,as),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=b(this,it))==null?void 0:t.promise}setOptions(t){if(this.options={...b(this,Po),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=lm(this.options);n.data!==void 0&&(this.setState(om(n.data,n.dataUpdatedAt)),V(this,as,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&b(this,rn).remove(this)}setData(t,n){const r=Vc(this.state.data,t,this.options);return ge(this,Sn,Qn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ge(this,Sn,Qn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=b(this,it))==null?void 0:r.promise;return(s=b(this,it))==null||s.cancel(t),n?n.then(Rt).catch(Rt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(b(this,as))}isActive(){return this.observers.some(t=>sn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===vf||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>$r(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Uv(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=b(this,it))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=b(this,it))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),b(this,rn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(b(this,it)&&(b(this,cs)?b(this,it).cancel({revert:!0}):b(this,it).cancelRetry()),this.scheduleGc()),b(this,rn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ge(this,Sn,Qn).call(this,{type:"invalidate"})}async fetch(t,n){var u,d,f,m,g,C,w,E,L,y,h,p;if(this.state.fetchStatus!=="idle"&&((u=b(this,it))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(b(this,it))return b(this,it).continueRetry(),b(this,it).promise}if(t&&this.setOptions(t),!this.options.queryFn){const v=this.observers.find(S=>S.options.queryFn);v&&this.setOptions(v.options)}const r=new AbortController,s=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(V(this,cs,!0),r.signal)})},i=()=>{const v=Wv(this.options,n),R=(()=>{const j={client:b(this,us),queryKey:this.queryKey,meta:this.meta};return s(j),j})();return V(this,cs,!1),this.options.persister?this.options.persister(v,R,this):v(R)},l=(()=>{const v={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:b(this,us),state:this.state,fetchFn:i};return s(v),v})();(d=this.options.behavior)==null||d.onFetch(l,this),V(this,fi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&ge(this,Sn,Qn).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),V(this,it,Qv({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:v=>{v instanceof Kc&&v.revert&&this.setState({...b(this,fi),fetchStatus:"idle"}),r.abort()},onFail:(v,S)=>{ge(this,Sn,Qn).call(this,{type:"failed",failureCount:v,error:S})},onPause:()=>{ge(this,Sn,Qn).call(this,{type:"pause"})},onContinue:()=>{ge(this,Sn,Qn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const v=await b(this,it).start();if(v===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(v),(C=(g=b(this,rn).config).onSuccess)==null||C.call(g,v,this),(E=(w=b(this,rn).config).onSettled)==null||E.call(w,v,this.state.error,this),v}catch(v){if(v instanceof Kc){if(v.silent)return b(this,it).promise;if(v.revert){if(this.state.data===void 0)throw v;return this.state.data}}throw ge(this,Sn,Qn).call(this,{type:"error",error:v}),(y=(L=b(this,rn).config).onError)==null||y.call(L,v,this),(p=(h=b(this,rn).config).onSettled)==null||p.call(h,this.state.data,v,this),v}finally{this.scheduleGc()}}},as=new WeakMap,fi=new WeakMap,rn=new WeakMap,us=new WeakMap,it=new WeakMap,Po=new WeakMap,cs=new WeakMap,Sn=new WeakSet,Qn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...qv(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...om(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return V(this,fi,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Ze.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),b(this,rn).notify({query:this,type:"updated",action:t})})},Sp);function qv(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Vv(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function om(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function lm(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Dt,Ce,Io,Nt,ds,hi,Yn,kr,Fo,mi,pi,fs,hs,Er,gi,Ne,Zi,qc,Yc,Gc,Xc,Jc,Zc,ed,Yv,Cp,t1=(Cp=class extends _i{constructor(t,n){super();le(this,Ne);le(this,Dt);le(this,Ce);le(this,Io);le(this,Nt);le(this,ds);le(this,hi);le(this,Yn);le(this,kr);le(this,Fo);le(this,mi);le(this,pi);le(this,fs);le(this,hs);le(this,Er);le(this,gi,new Set);this.options=n,V(this,Dt,t),V(this,kr,null),V(this,Yn,Qc()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(b(this,Ce).addObserver(this),am(b(this,Ce),this.options)?ge(this,Ne,Zi).call(this):this.updateResult(),ge(this,Ne,Xc).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return td(b(this,Ce),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return td(b(this,Ce),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ge(this,Ne,Jc).call(this),ge(this,Ne,Zc).call(this),b(this,Ce).removeObserver(this)}setOptions(t){const n=this.options,r=b(this,Ce);if(this.options=b(this,Dt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof sn(this.options.enabled,b(this,Ce))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ge(this,Ne,ed).call(this),b(this,Ce).setOptions(this.options),n._defaulted&&!Ca(this.options,n)&&b(this,Dt).getQueryCache().notify({type:"observerOptionsUpdated",query:b(this,Ce),observer:this});const s=this.hasListeners();s&&um(b(this,Ce),r,this.options,n)&&ge(this,Ne,Zi).call(this),this.updateResult(),s&&(b(this,Ce)!==r||sn(this.options.enabled,b(this,Ce))!==sn(n.enabled,b(this,Ce))||$r(this.options.staleTime,b(this,Ce))!==$r(n.staleTime,b(this,Ce)))&&ge(this,Ne,qc).call(this);const i=ge(this,Ne,Yc).call(this);s&&(b(this,Ce)!==r||sn(this.options.enabled,b(this,Ce))!==sn(n.enabled,b(this,Ce))||i!==b(this,Er))&&ge(this,Ne,Gc).call(this,i)}getOptimisticResult(t){const n=b(this,Dt).getQueryCache().build(b(this,Dt),t),r=this.createResult(n,t);return r1(this,r)&&(V(this,Nt,r),V(this,hi,this.options),V(this,ds,b(this,Ce).state)),r}getCurrentResult(){return b(this,Nt)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&b(this,Yn).status==="pending"&&b(this,Yn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){b(this,gi).add(t)}getCurrentQuery(){return b(this,Ce)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=b(this,Dt).defaultQueryOptions(t),r=b(this,Dt).getQueryCache().build(b(this,Dt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ge(this,Ne,Zi).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),b(this,Nt)))}createResult(t,n){var T;const r=b(this,Ce),s=this.options,i=b(this,Nt),o=b(this,ds),l=b(this,hi),d=t!==r?t.state:b(this,Io),{state:f}=t;let m={...f},g=!1,C;if(n._optimisticResults){const N=this.hasListeners(),F=!N&&am(t,n),U=N&&um(t,r,n,s);(F||U)&&(m={...m,...qv(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:w,errorUpdatedAt:E,status:L}=m;C=m.data;let y=!1;if(n.placeholderData!==void 0&&C===void 0&&L==="pending"){let N;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(N=i.data,y=!0):N=typeof n.placeholderData=="function"?n.placeholderData((T=b(this,pi))==null?void 0:T.state.data,b(this,pi)):n.placeholderData,N!==void 0&&(L="success",C=Vc(i==null?void 0:i.data,N,n),g=!0)}if(n.select&&C!==void 0&&!y)if(i&&C===(o==null?void 0:o.data)&&n.select===b(this,Fo))C=b(this,mi);else try{V(this,Fo,n.select),C=n.select(C),C=Vc(i==null?void 0:i.data,C,n),V(this,mi,C),V(this,kr,null)}catch(N){V(this,kr,N)}b(this,kr)&&(w=b(this,kr),C=b(this,mi),E=Date.now(),L="error");const h=m.fetchStatus==="fetching",p=L==="pending",v=L==="error",S=p&&h,R=C!==void 0,k={status:L,fetchStatus:m.fetchStatus,isPending:p,isSuccess:L==="success",isError:v,isInitialLoading:S,isLoading:S,data:C,dataUpdatedAt:m.dataUpdatedAt,error:w,errorUpdatedAt:E,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:h,isRefetching:h&&!p,isLoadingError:v&&!R,isPaused:m.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:v&&R,isStale:xf(t,n),refetch:this.refetch,promise:b(this,Yn),isEnabled:sn(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const N=D=>{k.status==="error"?D.reject(k.error):k.data!==void 0&&D.resolve(k.data)},F=()=>{const D=V(this,Yn,k.promise=Qc());N(D)},U=b(this,Yn);switch(U.status){case"pending":t.queryHash===r.queryHash&&N(U);break;case"fulfilled":(k.status==="error"||k.data!==U.value)&&F();break;case"rejected":(k.status!=="error"||k.error!==U.reason)&&F();break}}return k}updateResult(){const t=b(this,Nt),n=this.createResult(b(this,Ce),this.options);if(V(this,ds,b(this,Ce).state),V(this,hi,this.options),b(this,ds).data!==void 0&&V(this,pi,b(this,Ce)),Ca(n,t))return;V(this,Nt,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!b(this,gi).size)return!0;const o=new Set(i??b(this,gi));return this.options.throwOnError&&o.add("error"),Object.keys(b(this,Nt)).some(l=>{const u=l;return b(this,Nt)[u]!==t[u]&&o.has(u)})};ge(this,Ne,Yv).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ge(this,Ne,Xc).call(this)}},Dt=new WeakMap,Ce=new WeakMap,Io=new WeakMap,Nt=new WeakMap,ds=new WeakMap,hi=new WeakMap,Yn=new WeakMap,kr=new WeakMap,Fo=new WeakMap,mi=new WeakMap,pi=new WeakMap,fs=new WeakMap,hs=new WeakMap,Er=new WeakMap,gi=new WeakMap,Ne=new WeakSet,Zi=function(t){ge(this,Ne,ed).call(this);let n=b(this,Ce).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Rt)),n},qc=function(){ge(this,Ne,Jc).call(this);const t=$r(this.options.staleTime,b(this,Ce));if(Cs||b(this,Nt).isStale||!Wc(t))return;const r=Uv(b(this,Nt).dataUpdatedAt,t)+1;V(this,fs,ns.setTimeout(()=>{b(this,Nt).isStale||this.updateResult()},r))},Yc=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(b(this,Ce)):this.options.refetchInterval)??!1},Gc=function(t){ge(this,Ne,Zc).call(this),V(this,Er,t),!(Cs||sn(this.options.enabled,b(this,Ce))===!1||!Wc(b(this,Er))||b(this,Er)===0)&&V(this,hs,ns.setInterval(()=>{(this.options.refetchIntervalInBackground||yf.isFocused())&&ge(this,Ne,Zi).call(this)},b(this,Er)))},Xc=function(){ge(this,Ne,qc).call(this),ge(this,Ne,Gc).call(this,ge(this,Ne,Yc).call(this))},Jc=function(){b(this,fs)&&(ns.clearTimeout(b(this,fs)),V(this,fs,void 0))},Zc=function(){b(this,hs)&&(ns.clearInterval(b(this,hs)),V(this,hs,void 0))},ed=function(){const t=b(this,Dt).getQueryCache().build(b(this,Dt),this.options);if(t===b(this,Ce))return;const n=b(this,Ce);V(this,Ce,t),V(this,Io,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},Yv=function(t){Ze.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(b(this,Nt))}),b(this,Dt).getQueryCache().notify({query:b(this,Ce),type:"observerResultsUpdated"})})},Cp);function n1(e,t){return sn(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function am(e,t){return n1(e,t)||e.state.data!==void 0&&td(e,t,t.refetchOnMount)}function td(e,t,n){if(sn(t.enabled,e)!==!1&&$r(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&xf(e,t)}return!1}function um(e,t,n,r){return(e!==t||sn(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&xf(e,n)}function xf(e,t){return sn(t.enabled,e)!==!1&&e.isStaleByTime($r(t.staleTime,e))}function r1(e,t){return!Ca(e.getCurrentResult(),t)}function cm(e){return{onFetch:(t,n)=>{var f,m,g,C,w;const r=t.options,s=(g=(m=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:m.fetchMore)==null?void 0:g.direction,i=((C=t.state.data)==null?void 0:C.pages)||[],o=((w=t.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const d=async()=>{let E=!1;const L=p=>{qw(p,()=>t.signal,()=>E=!0)},y=Wv(t.options,t.fetchOptions),h=async(p,v,S)=>{if(E)return Promise.reject();if(v==null&&p.pages.length)return Promise.resolve(p);const j=(()=>{const F={client:t.client,queryKey:t.queryKey,pageParam:v,direction:S?"backward":"forward",meta:t.options.meta};return L(F),F})(),k=await y(j),{maxPages:T}=t.options,N=S?Kw:Qw;return{pages:N(p.pages,k,T),pageParams:N(p.pageParams,v,T)}};if(s&&i.length){const p=s==="backward",v=p?s1:dm,S={pages:i,pageParams:o},R=v(r,S);l=await h(S,R,p)}else{const p=e??i.length;do{const v=u===0?o[0]??r.initialPageParam:dm(r,l);if(u>0&&v==null)break;l=await h(l,v),u++}while(u<p)}return l};t.options.persister?t.fetchFn=()=>{var E,L;return(L=(E=t.options).persister)==null?void 0:L.call(E,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function dm(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function s1(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Oo,Pn,jt,ms,In,gr,bp,i1=(bp=class extends Kv{constructor(t){super();le(this,In);le(this,Oo);le(this,Pn);le(this,jt);le(this,ms);V(this,Oo,t.client),this.mutationId=t.mutationId,V(this,jt,t.mutationCache),V(this,Pn,[]),this.state=t.state||Gv(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){b(this,Pn).includes(t)||(b(this,Pn).push(t),this.clearGcTimeout(),b(this,jt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){V(this,Pn,b(this,Pn).filter(n=>n!==t)),this.scheduleGc(),b(this,jt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){b(this,Pn).length||(this.state.status==="pending"?this.scheduleGc():b(this,jt).remove(this))}continue(){var t;return((t=b(this,ms))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,u,d,f,m,g,C,w,E,L,y,h,p,v,S,R,j,k,T;const n=()=>{ge(this,In,gr).call(this,{type:"continue"})},r={client:b(this,Oo),meta:this.options.meta,mutationKey:this.options.mutationKey};V(this,ms,Qv({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(N,F)=>{ge(this,In,gr).call(this,{type:"failed",failureCount:N,error:F})},onPause:()=>{ge(this,In,gr).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>b(this,jt).canRun(this)}));const s=this.state.status==="pending",i=!b(this,ms).canStart();try{if(s)n();else{ge(this,In,gr).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=b(this,jt).config).onMutate)==null?void 0:l.call(o,t,this,r));const F=await((d=(u=this.options).onMutate)==null?void 0:d.call(u,t,r));F!==this.state.context&&ge(this,In,gr).call(this,{type:"pending",context:F,variables:t,isPaused:i})}const N=await b(this,ms).start();return await((m=(f=b(this,jt).config).onSuccess)==null?void 0:m.call(f,N,t,this.state.context,this,r)),await((C=(g=this.options).onSuccess)==null?void 0:C.call(g,N,t,this.state.context,r)),await((E=(w=b(this,jt).config).onSettled)==null?void 0:E.call(w,N,null,this.state.variables,this.state.context,this,r)),await((y=(L=this.options).onSettled)==null?void 0:y.call(L,N,null,t,this.state.context,r)),ge(this,In,gr).call(this,{type:"success",data:N}),N}catch(N){try{await((p=(h=b(this,jt).config).onError)==null?void 0:p.call(h,N,t,this.state.context,this,r))}catch(F){Promise.reject(F)}try{await((S=(v=this.options).onError)==null?void 0:S.call(v,N,t,this.state.context,r))}catch(F){Promise.reject(F)}try{await((j=(R=b(this,jt).config).onSettled)==null?void 0:j.call(R,void 0,N,this.state.variables,this.state.context,this,r))}catch(F){Promise.reject(F)}try{await((T=(k=this.options).onSettled)==null?void 0:T.call(k,void 0,N,t,this.state.context,r))}catch(F){Promise.reject(F)}throw ge(this,In,gr).call(this,{type:"error",error:N}),N}finally{b(this,jt).runNext(this)}}},Oo=new WeakMap,Pn=new WeakMap,jt=new WeakMap,ms=new WeakMap,In=new WeakSet,gr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ze.batch(()=>{b(this,Pn).forEach(r=>{r.onMutationUpdate(t)}),b(this,jt).notify({mutation:this,type:"updated",action:t})})},bp);function Gv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Gn,Cn,Do,kp,o1=(kp=class extends _i{constructor(t={}){super();le(this,Gn);le(this,Cn);le(this,Do);this.config=t,V(this,Gn,new Set),V(this,Cn,new Map),V(this,Do,0)}build(t,n,r){const s=new i1({client:t,mutationCache:this,mutationId:++ll(this,Do)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){b(this,Gn).add(t);const n=El(t);if(typeof n=="string"){const r=b(this,Cn).get(n);r?r.push(t):b(this,Cn).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(b(this,Gn).delete(t)){const n=El(t);if(typeof n=="string"){const r=b(this,Cn).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&b(this,Cn).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=El(t);if(typeof n=="string"){const r=b(this,Cn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=El(t);if(typeof n=="string"){const s=(r=b(this,Cn).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ze.batch(()=>{b(this,Gn).forEach(t=>{this.notify({type:"removed",mutation:t})}),b(this,Gn).clear(),b(this,Cn).clear()})}getAll(){return Array.from(b(this,Gn))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>rm(n,r))}findAll(t={}){return this.getAll().filter(n=>rm(t,n))}notify(t){Ze.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Ze.batch(()=>Promise.all(t.map(n=>n.continue().catch(Rt))))}},Gn=new WeakMap,Cn=new WeakMap,Do=new WeakMap,kp);function El(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Xn,Nr,zt,Jn,rr,Hl,nd,Ep,l1=(Ep=class extends _i{constructor(n,r){super();le(this,rr);le(this,Xn);le(this,Nr);le(this,zt);le(this,Jn);V(this,Xn,n),this.setOptions(r),this.bindMethods(),ge(this,rr,Hl).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=b(this,Xn).defaultMutationOptions(n),Ca(this.options,r)||b(this,Xn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:b(this,zt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&bs(r.mutationKey)!==bs(this.options.mutationKey)?this.reset():((s=b(this,zt))==null?void 0:s.state.status)==="pending"&&b(this,zt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=b(this,zt))==null||n.removeObserver(this)}onMutationUpdate(n){ge(this,rr,Hl).call(this),ge(this,rr,nd).call(this,n)}getCurrentResult(){return b(this,Nr)}reset(){var n;(n=b(this,zt))==null||n.removeObserver(this),V(this,zt,void 0),ge(this,rr,Hl).call(this),ge(this,rr,nd).call(this)}mutate(n,r){var s;return V(this,Jn,r),(s=b(this,zt))==null||s.removeObserver(this),V(this,zt,b(this,Xn).getMutationCache().build(b(this,Xn),this.options)),b(this,zt).addObserver(this),b(this,zt).execute(n)}},Xn=new WeakMap,Nr=new WeakMap,zt=new WeakMap,Jn=new WeakMap,rr=new WeakSet,Hl=function(){var r;const n=((r=b(this,zt))==null?void 0:r.state)??Gv();V(this,Nr,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},nd=function(n){Ze.batch(()=>{var r,s,i,o,l,u,d,f;if(b(this,Jn)&&this.hasListeners()){const m=b(this,Nr).variables,g=b(this,Nr).context,C={client:b(this,Xn),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=b(this,Jn)).onSuccess)==null||s.call(r,n.data,m,g,C)}catch(w){Promise.reject(w)}try{(o=(i=b(this,Jn)).onSettled)==null||o.call(i,n.data,null,m,g,C)}catch(w){Promise.reject(w)}}else if((n==null?void 0:n.type)==="error"){try{(u=(l=b(this,Jn)).onError)==null||u.call(l,n.error,m,g,C)}catch(w){Promise.reject(w)}try{(f=(d=b(this,Jn)).onSettled)==null||f.call(d,void 0,n.error,m,g,C)}catch(w){Promise.reject(w)}}}this.listeners.forEach(m=>{m(b(this,Nr))})})},Ep),Fn,Np,a1=(Np=class extends _i{constructor(t={}){super();le(this,Fn);this.config=t,V(this,Fn,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??gf(s,n);let o=this.get(i);return o||(o=new e1({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){b(this,Fn).has(t.queryHash)||(b(this,Fn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=b(this,Fn).get(t.queryHash);n&&(t.destroy(),n===t&&b(this,Fn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ze.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return b(this,Fn).get(t)}getAll(){return[...b(this,Fn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>nm(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>nm(t,r)):n}notify(t){Ze.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Ze.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ze.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Fn=new WeakMap,Np),Ue,jr,Mr,vi,yi,Rr,xi,wi,jp,u1=(jp=class{constructor(e={}){le(this,Ue);le(this,jr);le(this,Mr);le(this,vi);le(this,yi);le(this,Rr);le(this,xi);le(this,wi);V(this,Ue,e.queryCache||new a1),V(this,jr,e.mutationCache||new o1),V(this,Mr,e.defaultOptions||{}),V(this,vi,new Map),V(this,yi,new Map),V(this,Rr,0)}mount(){ll(this,Rr)._++,b(this,Rr)===1&&(V(this,xi,yf.subscribe(async e=>{e&&(await this.resumePausedMutations(),b(this,Ue).onFocus())})),V(this,wi,ba.subscribe(async e=>{e&&(await this.resumePausedMutations(),b(this,Ue).onOnline())})))}unmount(){var e,t;ll(this,Rr)._--,b(this,Rr)===0&&((e=b(this,xi))==null||e.call(this),V(this,xi,void 0),(t=b(this,wi))==null||t.call(this),V(this,wi,void 0))}isFetching(e){return b(this,Ue).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return b(this,jr).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=b(this,Ue).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=b(this,Ue).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime($r(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return b(this,Ue).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=b(this,Ue).get(r.queryHash),i=s==null?void 0:s.state.data,o=Ww(t,i);if(o!==void 0)return b(this,Ue).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Ze.batch(()=>b(this,Ue).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=b(this,Ue).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=b(this,Ue);Ze.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=b(this,Ue);return Ze.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Ze.batch(()=>b(this,Ue).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Rt).catch(Rt)}invalidateQueries(e,t={}){return Ze.batch(()=>(b(this,Ue).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Ze.batch(()=>b(this,Ue).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Rt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Rt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=b(this,Ue).build(this,t);return n.isStaleByTime($r(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Rt).catch(Rt)}fetchInfiniteQuery(e){return e.behavior=cm(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Rt).catch(Rt)}ensureInfiniteQueryData(e){return e.behavior=cm(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ba.isOnline()?b(this,jr).resumePausedMutations():Promise.resolve()}getQueryCache(){return b(this,Ue)}getMutationCache(){return b(this,jr)}getDefaultOptions(){return b(this,Mr)}setDefaultOptions(e){V(this,Mr,e)}setQueryDefaults(e,t){b(this,vi).set(bs(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...b(this,vi).values()],n={};return t.forEach(r=>{Ro(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){b(this,yi).set(bs(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...b(this,yi).values()],n={};return t.forEach(r=>{Ro(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...b(this,Mr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=gf(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===vf&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...b(this,Mr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){b(this,Ue).clear(),b(this,jr).clear()}},Ue=new WeakMap,jr=new WeakMap,Mr=new WeakMap,vi=new WeakMap,yi=new WeakMap,Rr=new WeakMap,xi=new WeakMap,wi=new WeakMap,jp),Xv=c.createContext(void 0),Qr=e=>{const t=c.useContext(Xv);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},c1=({client:e,children:t})=>(c.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(Xv.Provider,{value:e,children:t})),Jv=c.createContext(!1),d1=()=>c.useContext(Jv);Jv.Provider;function f1(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var h1=c.createContext(f1()),m1=()=>c.useContext(h1),p1=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},g1=e=>{c.useEffect(()=>{e.clearReset()},[e])},v1=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||Hv(n,[e.error,r])),y1=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},x1=(e,t)=>e.isLoading&&e.isFetching&&!t,w1=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,fm=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function S1(e,t,n){var m,g,C,w,E;const r=d1(),s=m1(),i=Qr(),o=i.defaultQueryOptions(e);(g=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||g.call(m,o),o._optimisticResults=r?"isRestoring":"optimistic",y1(o),p1(o,s),g1(s);const l=!i.getQueryCache().get(o.queryHash),[u]=c.useState(()=>new t(i,o)),d=u.getOptimisticResult(o),f=!r&&e.subscribed!==!1;if(c.useSyncExternalStore(c.useCallback(L=>{const y=f?u.subscribe(Ze.batchCalls(L)):Rt;return u.updateResult(),y},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),c.useEffect(()=>{u.setOptions(o)},[o,u]),w1(o,d))throw fm(o,u,s);if(v1({result:d,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((w=(C=i.getDefaultOptions().queries)==null?void 0:C._experimental_afterQuery)==null||w.call(C,o,d),o.experimental_prefetchInRender&&!Cs&&x1(d,r)){const L=l?fm(o,u,s):(E=i.getQueryCache().get(o.queryHash))==null?void 0:E.promise;L==null||L.catch(Rt).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?d:u.trackResult(d)}function qa(e,t){return S1(e,t1)}function C1(e,t){const n=Qr(),[r]=c.useState(()=>new l1(n,e));c.useEffect(()=>{r.setOptions(e)},[r,e]);const s=c.useSyncExternalStore(c.useCallback(o=>r.subscribe(Ze.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=c.useCallback((o,l)=>{r.mutate(o,l).catch(Rt)},[r]);if(s.error&&Hv(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function hm(e){return e.length>0&&"options"in e[0]}function rd({value:e,onChange:t,options:n,placeholder:r="Select...",trigger:s,triggerClassName:i="",panelClassName:o="",align:l="left",width:u="auto",showChevron:d=!0,title:f,disabled:m=!1,"aria-label":g}){var k;const[C,w]=c.useState(!1),E=c.useRef(null),L=c.useRef(null),h=c.useCallback(()=>{const T=N=>{const F=N.find(U=>U.value===e);return F?F.label:null};if(hm(n))for(const N of n){const F=T(N.options);if(F)return F}else{const N=T(n);if(N)return N}return r},[e,n,r])();c.useEffect(()=>{if(!C)return;const T=F=>{E.current&&!E.current.contains(F.target)&&w(!1)},N=F=>{var U;F.key==="Escape"&&(w(!1),(U=L.current)==null||U.focus())};return window.addEventListener("click",T),window.addEventListener("keydown",N),()=>{window.removeEventListener("click",T),window.removeEventListener("keydown",N)}},[C]);const p=T=>{var N;t(T),w(!1),(N=L.current)==null||N.focus()},v=T=>T.map(N=>a.jsxs("button",{className:"dropdown-item","data-active":N.value===e,disabled:N.disabled,onClick:()=>!N.disabled&&p(N.value),role:"menuitem",children:[N.icon&&a.jsx("span",{className:"shrink-0",children:N.icon}),a.jsx("span",{className:"flex-1 truncate",children:N.label}),N.value===e&&a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 text-accent",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})]},N.value)),S=((k=L.current)==null?void 0:k.offsetWidth)??0,R=u==="trigger"?S:u==="auto"?void 0:u,j={...R?{width:R,minWidth:R}:{},...l==="right"?{right:0}:{left:0}};return a.jsxs("div",{ref:E,className:"relative",children:[s?a.jsx("div",{onClick:()=>!m&&w(T=>!T),children:s}):a.jsxs("button",{ref:L,type:"button",className:`dropdown-trigger ${i}`,onClick:()=>w(T=>!T),disabled:m,title:f,"aria-label":g,"aria-haspopup":"listbox","aria-expanded":C,children:[a.jsx("span",{className:"truncate",children:h}),d&&a.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`shrink-0 opacity-60 transition-transform ${C?"rotate-180":""}`,children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),C&&a.jsx("div",{className:`dropdown-panel ${o}`,style:j,role:"listbox","aria-label":g,children:hm(n)?n.map((T,N)=>a.jsxs("div",{children:[T.label&&a.jsx("div",{className:"dropdown-label",children:T.label}),v(T.options),N<n.length-1&&a.jsx("div",{className:"dropdown-divider"})]},T.label||N)):v(n)})]})}const b1={offline:"sync-dot-offline",unstable:"sync-dot-unstable",recent:"sync-dot-recent",editing:"sync-dot-editing",live:"sync-dot-live"};function k1({state:e,presence:t,syncLabel:n,connectionLabel:r,lastEditedLabel:s,hasEdits:i,localTypingActive:o,recentTouches:l,isNarrow:u}){const[d,f]=c.useState(!1),[m,g]=c.useState(null),C=c.useRef(null),w=c.useRef(null),E=c.useRef(null),L=t?`${t.viewing} viewing  ${t.editing} editing`:"- viewing  - editing",y=t?String(t.viewing):"-",h=c.useCallback(()=>{E.current&&(window.clearTimeout(E.current),E.current=null)},[]),p=c.useCallback((S,R)=>{var j;R&&((j=navigator.clipboard)==null||j.writeText(R).then(()=>{g(S),h(),E.current=window.setTimeout(()=>{g(k=>k===S?null:k)},1e3)}).catch(()=>{}))},[h]),v=c.useCallback(()=>{f(!1),window.requestAnimationFrame(()=>{var S;return(S=w.current)==null?void 0:S.focus()})},[]);return c.useEffect(()=>{if(!d)return;const S=j=>{!C.current||C.current.contains(j.target)||v()},R=j=>{j.key==="Escape"&&v()};return window.addEventListener("mousedown",S),window.addEventListener("keydown",R),()=>{window.removeEventListener("mousedown",S),window.removeEventListener("keydown",R)}},[d,v]),c.useEffect(()=>()=>{h()},[h]),a.jsxs("div",{ref:C,className:"sync-indicator",children:[a.jsxs("button",{ref:w,type:"button",className:"sync-indicator-button",onClick:()=>d?v():f(!0),"aria-haspopup":"dialog","aria-expanded":d,"aria-label":"Sync status",title:L,children:[a.jsx("span",{className:`sync-indicator-dot ${b1[e]}`,"aria-hidden":"true"}),!u&&a.jsx("span",{className:"sync-indicator-count tabular-nums",children:y}),!u&&o&&a.jsx("span",{className:"sync-indicator-local",children:"typing"})]}),d&&a.jsxs("div",{role:"dialog","aria-label":"Sync status",className:"sync-indicator-card select-text",children:[a.jsx("div",{className:"sync-indicator-line sync-indicator-primary",children:n}),a.jsx("div",{className:"sync-indicator-line",children:r}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:L}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:i?`Last edited: ${s}`:"No edits yet."}),o&&a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:"Local typing in progress (saved on blur)."}),a.jsxs("div",{className:"sync-indicator-section",children:[a.jsx("div",{className:"sync-indicator-section-title",children:"Recently touched files"}),l.length>0?a.jsx("div",{className:"sync-indicator-list",children:l.map(S=>a.jsxs("div",{className:"sync-indicator-item",children:[a.jsx("button",{type:"button",className:"sync-indicator-item-name",title:`Copy filename: ${S.label}`,onClick:()=>p(S.path,S.label),children:S.label}),a.jsx("span",{className:"sync-indicator-item-time tabular-nums",children:m===S.path?"Copied":S.timeLabel})]},S.path))}):a.jsx("div",{className:"sync-indicator-empty",children:"No recent touches."})]})]})]})}function E1({rootRef:e,onSearch:t,viewerActive:n,onBack:r,zoomPercent:s,onZoomPercentChange:i,currentLabel:o,itemCount:l,totalCount:u,sortSpec:d,metricKeys:f,onSortChange:m,sortDisabled:g=!1,filterCount:C,onOpenFilters:w,starFilters:E,onToggleStar:L,onClearStars:y,onClearFilters:h,starCounts:p,viewMode:v,onViewMode:S,gridItemSize:R,onGridItemSize:j,leftOpen:k,rightOpen:T,onToggleLeft:N,onToggleRight:F,onPrevImage:U,onNextImage:D,canPrevImage:ee,canNextImage:ue,searchDisabled:_=!1,searchPlaceholder:de,syncIndicator:z}){const[H,J]=c.useState(!1),[ae,ce]=c.useState(!1),[Le,Q]=c.useState(!1),K=c.useRef(null),ne=c.useRef(null);c.useEffect(()=>{if(!H)return;const B=Y=>{K.current&&!K.current.contains(Y.target)&&J(!1)};return window.addEventListener("click",B),()=>window.removeEventListener("click",B)},[H]),c.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const B=window.matchMedia("(max-width: 900px)"),Y=Z=>ce(Z.matches);return ce(B.matches),"addEventListener"in B?(B.addEventListener("change",Y),()=>B.removeEventListener("change",Y)):(B.addListener(Y),()=>B.removeListener(Y))},[]),c.useEffect(()=>{if(_){Q(!1);return}if(!ae||n){Q(!1);return}if(!Le)return;const B=window.requestAnimationFrame(()=>{var Y;return(Y=ne.current)==null?void 0:Y.focus()});return()=>window.cancelAnimationFrame(B)},[ae,Le,n,_]);const fe=d??{kind:"builtin",key:"added",dir:"desc"},Me=fe.dir,$e=fe.kind==="builtin"&&fe.key==="random",He=n||g,at=f!=null&&f.length?f.map(B=>({value:`metric:${B}`,label:B,disabled:g})):[],tt=[{value:"builtin:added",label:"Date added",disabled:g},{value:"builtin:name",label:"Filename",disabled:g},{value:"builtin:random",label:"Random",disabled:g},...at],tn=[{label:"Layout",options:[{value:"layout:grid",label:"Grid"},{value:"layout:masonry",label:"Masonry"}]},{label:"Sort by",options:tt}],nt=fe.kind==="metric"?`metric:${fe.key}`:`builtin:${fe.key}`,Pt=[{label:"Sort by",options:tt}],nn=ae&&!n,It=B=>{if(B.startsWith("layout:")){const Y=B==="layout:masonry"?"adaptive":"grid";S==null||S(Y)}else{if(g)return;m==null||m(mm(B,fe))}},Ct=()=>{!m||g||m($e?fe:{...fe,dir:Me==="desc"?"asc":"desc"})},ut=E??[],_e=ut.length,A=j1(C,_e),se=N1(l,u),q=o||"Root";return a.jsxs("div",{ref:e,className:"toolbar-shell fixed top-0 left-0 right-0 h-12 grid grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] items-center px-3 gap-3 bg-panel border-b border-border z-[var(--z-toolbar)] col-span-full row-start-1 select-none",children:[a.jsxs("div",{className:"toolbar-left flex items-center gap-4 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsxs("div",{className:"flex flex-col min-w-0 leading-tight",children:[a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted",children:"Scope"}),a.jsx("span",{className:"text-sm font-medium text-text truncate",title:q,children:q})]}),se&&a.jsx("span",{className:"toolbar-count text-xs text-muted whitespace-nowrap tabular-nums",children:se})]}),a.jsxs("div",{className:"toolbar-sort flex items-center gap-2",children:[a.jsxs("div",{className:`toolbar-sort-controls flex items-center gap-2 ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsx(rd,{value:nt,onChange:It,options:tn,title:"Sort and layout options","aria-label":"Sort and layout",triggerClassName:"min-w-[110px]"}),a.jsx("button",{className:"toolbar-sort-dir btn btn-icon",onClick:Ct,title:g?"Sorting disabled":$e?"Shuffle":`Sort ${Me==="desc"?"descending":"ascending"}`,"aria-label":$e?"Shuffle":"Toggle sort direction","aria-disabled":He,disabled:He,children:$e?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Me==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]}),a.jsxs("div",{ref:K,className:`toolbar-filter relative ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsxs("button",{className:`btn ${A>0?"btn-active":""}`,onClick:()=>J(B=>!B),"aria-haspopup":"dialog","aria-expanded":H,title:"Filters","aria-disabled":n,children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),a.jsx("span",{className:"toolbar-filters-label",children:"Filters"}),A>0&&a.jsx("span",{className:"toolbar-filters-count px-1.5 py-0.5 text-[11px] rounded-full bg-accent-strong text-text",children:A})]}),H&&a.jsxs("div",{role:"dialog","aria-label":"Filters",className:"dropdown-panel w-[240px]",style:{top:"38px",left:0},children:[a.jsx("div",{className:"dropdown-label",children:"Rating"}),a.jsxs("div",{className:"px-1",children:[[5,4,3,2,1].map(B=>{const Y=ut.includes(B),Z=(p==null?void 0:p[String(B)])??0;return a.jsxs("button",{onClick:()=>L==null?void 0:L(B),className:`dropdown-item justify-between ${Y?"bg-accent-muted":""}`,children:[a.jsxs("span",{className:Y?"text-star-active":"text-text",children:["".repeat(B),"".repeat(5-B)]}),a.jsx("span",{className:"text-xs text-muted",children:Z})]},B)}),a.jsxs("button",{onClick:()=>L==null?void 0:L(0),className:`dropdown-item justify-between ${ut.includes(0)?"bg-accent-muted":""}`,children:[a.jsx("span",{className:"text-text",children:"Unrated"}),a.jsx("span",{className:"text-xs text-muted",children:(p==null?void 0:p["0"])??0})]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("div",{className:"dropdown-label",children:"Metrics"}),a.jsxs("button",{className:"dropdown-item",onClick:()=>{J(!1),w==null||w()},children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]}),a.jsx("span",{children:"Open Metrics Panel"}),(C||0)>0&&a.jsxs("span",{className:"ml-auto text-xs text-muted",children:[C," active"]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("button",{className:"dropdown-item text-muted hover:text-text",onClick:()=>{h?h():y==null||y()},disabled:A===0,children:"Clear all filters"})]})]}),n&&a.jsxs("button",{className:"btn btn-sm",onClick:r,title:"Back to grid",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})]})]}),a.jsx("div",{className:"toolbar-center flex items-center gap-3 justify-center min-w-0",children:n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"range",min:5,max:800,step:1,value:Math.round(Math.max(5,Math.min(800,s??100))),onChange:B=>i==null?void 0:i(Number(B.target.value)),className:"zoom-slider","aria-label":"Zoom level"}),a.jsxs("span",{className:"text-xs text-muted min-w-[42px] text-right",children:[Math.round(s??100),"%"]})]}):j&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted",children:"Size"}),a.jsx("input",{type:"range",min:80,max:500,step:10,value:R??220,onChange:B=>j(Number(B.target.value)),className:"w-28 h-1.5 bg-border rounded-full appearance-none cursor-pointer hover:bg-hover transition-colors [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-text [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-text [&::-moz-range-thumb]:border-0","aria-label":"Thumbnail size"})]})}),a.jsxs("div",{className:"toolbar-right flex items-center gap-2 justify-end",children:[a.jsxs("div",{className:`toolbar-nav flex items-center gap-1 mr-1 ${n?"":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,children:[a.jsx("button",{className:`btn btn-icon ${ee?"":"opacity-40 cursor-not-allowed"}`,title:"Previous image (A / )",onClick:()=>ee&&(U==null?void 0:U()),"aria-label":"Previous image","aria-disabled":!ee,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("button",{className:`btn btn-icon ${ue?"":"opacity-40 cursor-not-allowed"}`,title:"Next image (D / )",onClick:()=>ue&&(D==null?void 0:D()),"aria-label":"Next image","aria-disabled":!ue,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 6l6 6-6 6"})})})]}),a.jsxs("div",{className:"toolbar-panels flex items-center gap-1",children:[a.jsx("button",{className:`btn btn-icon ${k?"":"opacity-50"}`,title:k?"Hide left panel (Ctrl+B)":"Show left panel (Ctrl+B)",onClick:N,"aria-pressed":k,"aria-label":"Toggle left panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"11",y:"5",width:"10",height:"14",rx:"1.5"})]})}),a.jsx("button",{className:`btn btn-icon ${T?"":"opacity-50"}`,title:T?"Hide right panel (Ctrl+Alt+B)":"Show right panel (Ctrl+Alt+B)",onClick:F,"aria-pressed":T,"aria-label":"Toggle right panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"15",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"3",y:"5",width:"10",height:"14",rx:"1.5"})]})})]}),z&&a.jsx(k1,{...z,isNarrow:ae}),!n&&ae&&a.jsx("button",{className:`btn btn-icon ${Le?"btn-active":""} ${_?"opacity-50 cursor-not-allowed":""}`,"aria-label":Le?"Close search":"Open search",title:_?"Search disabled":Le?"Close search":"Search",onClick:()=>!_&&Q(B=>!B),disabled:_,children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("circle",{cx:"11",cy:"11",r:"7"}),a.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),!n&&!ae?a.jsx("div",{className:"toolbar-search w-[240px]",children:a.jsx("input",{ref:ne,"aria-label":"Search filename, tags, notes",placeholder:_?de??"Search disabled":"Search...",onChange:B=>t(B.target.value),className:"toolbar-search-input input w-full focus:w-full transition-all duration-200 select-text",disabled:_})}):n?a.jsx("div",{className:"toolbar-search w-[240px]","aria-hidden":"true"}):null]}),!n&&ae&&Le&&!_&&a.jsx("div",{className:"toolbar-search-row",children:a.jsx("input",{ref:ne,"aria-label":"Search filename, tags, notes",placeholder:de??"Search...",onChange:B=>t(B.target.value),className:"toolbar-search-input-mobile input input-lg w-full select-text"})}),nn&&a.jsx("div",{className:"mobile-drawer",children:a.jsxs("div",{className:"mobile-drawer-row",children:[a.jsxs("div",{className:"mobile-pill-group",children:[a.jsx("button",{className:`mobile-pill ${v==="grid"?"is-active":""}`,onClick:()=>S==null?void 0:S("grid"),"aria-pressed":v==="grid",children:"Grid"}),a.jsx("button",{className:`mobile-pill ${v==="adaptive"?"is-active":""}`,onClick:()=>S==null?void 0:S("adaptive"),"aria-pressed":v==="adaptive",children:"Masonry"})]}),a.jsx(rd,{value:nt,onChange:B=>m==null?void 0:m(mm(B,fe)),options:Pt,"aria-label":"Sort",triggerClassName:"mobile-pill mobile-pill-dropdown",panelClassName:"mobile-drawer-panel",disabled:g}),a.jsx("button",{className:`mobile-pill mobile-pill-icon ${He?"opacity-50 cursor-not-allowed":""}`,onClick:Ct,title:g?"Sorting disabled":$e?"Shuffle":`Sort ${Me==="desc"?"descending":"ascending"}`,"aria-label":$e?"Shuffle":"Toggle sort direction","aria-disabled":He,disabled:He,children:$e?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Me==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]})})]})}function N1(e,t){if(typeof e!="number")return null;const n=e.toLocaleString();if(typeof t!="number")return`${n} items`;const r=t.toLocaleString();return t===e?`${n} items`:`${n} / ${r} items`}function j1(e,t){return typeof e=="number"?e:t>0?1:0}function mm(e,t){if(e.startsWith("metric:")){const n=e.slice(7);return n?{kind:"metric",key:n,dir:t.dir}:t}if(e.startsWith("builtin:")){const n=e.slice(8);if(n==="name"||n==="added"||n==="random")return{kind:"builtin",key:n,dir:t.dir}}return t}class jn extends Error{constructor(n,r,s,i){super(r);Hn(this,"status");Hn(this,"url");Hn(this,"body");this.name="FetchError",this.status=n,this.url=s,this.body=i}}function M1(e){const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function Zv(e,t,n){if(t&&typeof t=="object"){const r=t,s=typeof r.error=="string"?r.error:null,i=typeof r.message=="string"?r.message:null;if(s&&i)return`${s}: ${i}`;if(s)return s;if(i)return i}return typeof t=="string"&&t?t:`HTTP ${e} for ${n}`}function ft(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{let u=null;const d=await l.text().catch(()=>"");if(d)if((l.headers.get("content-type")||"").includes("application/json")||M1(d))try{u=JSON.parse(d)}catch{u=d}else u=d;if(!l.ok)throw new jn(l.status,Zv(l.status,u,e),e,u);return u}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}function Nl(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{if(!l.ok){const u=await l.text().catch(()=>""),d=u||null;throw new jn(l.status,Zv(l.status,d,e),e,d)}return l.blob()}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}class ey{constructor(t){Hn(this,"store",new Map);Hn(this,"inflight",new Map);Hn(this,"totalBytes",0);this.maxBytes=t}getMaxBytes(){return this.maxBytes}getTotalBytes(){return this.totalBytes}getSize(){return this.store.size}has(t){return this.store.has(t)}isInflight(t){return this.inflight.has(t)}get(t){const n=this.store.get(t);if(n)return this.store.delete(t),this.store.set(t,n),n.blob}evictIfNeeded(t){for(;this.totalBytes+t>this.maxBytes&&this.store.size>0;){const n=this.store.keys().next().value;if(n==null)break;const r=this.store.get(n);r&&(this.totalBytes-=r.size),this.store.delete(n)}}set(t,n){const r=n.size||0;if(!(r>this.maxBytes)){if(this.store.has(t)){const s=this.store.get(t);this.totalBytes-=s.size,this.store.delete(t)}this.evictIfNeeded(r),this.store.set(t,{blob:n,size:r}),this.totalBytes+=r}}async getOrFetch(t,n){const r=this.get(t);if(r)return r;const s=this.inflight.get(t);if(s)return s.promise;const i=n(),o=typeof i=="object"&&"promise"in i,l=o?i.promise:i,u=o?i.abort:void 0,d=l.then(f=>(this.set(t,f),f)).finally(()=>{this.inflight.delete(t)});return this.inflight.set(t,{promise:d,abort:u}),d}prefetch(t,n){if(this.store.has(t)||this.inflight.has(t))return;const r=n(),s=typeof r=="object"&&"promise"in r,i=s?r.promise:r,o=s?r.abort:void 0,l=i.then(u=>(this.set(t,u),u)).catch(()=>new Blob).finally(()=>{this.inflight.delete(t)});this.inflight.set(t,{promise:l,abort:o})}cancelPrefetch(t){const n=this.inflight.get(t);if(n!=null&&n.abort)try{n.abort()}catch{}this.inflight.delete(t)}clear(){for(const[t,n]of this.inflight)if(n.abort)try{n.abort()}catch{}this.inflight.clear(),this.store.clear(),this.totalBytes=0}evictPrefix(t){const n=(()=>{const s=t?`/${t.replace(/^\/+/,"")}`:"/";return s==="/"?"/":s.replace(/\/+$/,"")})(),r=s=>{const i=s.startsWith("/")?s.replace(/\/+$/,""):`/${s.replace(/\/+$/,"")}`;return n==="/"?!0:i===n||i.startsWith(`${n}/`)};for(const[s,i]of Array.from(this.store.entries()))r(s)&&(this.totalBytes-=i.size,this.store.delete(s));for(const[s,i]of Array.from(this.inflight.entries()))if(r(s)){if(i.abort)try{i.abort()}catch{}this.inflight.delete(s)}this.totalBytes<0&&(this.totalBytes=0)}}const $s=new ey(60*1024*1024),sd=new ey(20*1024*1024),Uu={};function R1(){const e=Uu==null?void 0:Uu.VITE_API_BASE,t=typeof window<"u",n=t?window.location.origin:"http://localhost",r=t?window.location.hostname:"localhost",s=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\]|.+\.localhost)$/i.test(r);if(!e)return"";let i;try{i=new URL(e,n)}catch{return""}const o=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\])$/i.test(i.hostname);return s?i.origin:o?"":i.origin}const Be=R1();const L1=40*1024*1024;function T1(e){return e==="viewer"||e==="compare"}function pm(e){return`${Be}/thumb?path=${encodeURIComponent(e)}`}function gm(e){return`${Be}/file?path=${encodeURIComponent(e)}`}const Bu="lenslet.client_id",vm="lenslet.client_id.session",ty="lenslet.last_event_id",_1=1e3,P1=3e4,I1=5;let id=null,Vl=null,ym=0,ii=null,oi=0,Ya=!0,ka=!1;function ny(){return typeof window<"u"&&typeof EventSource<"u"}function xm(e,t){if(!e)return null;try{return e.getItem(t)}catch{return null}}function wm(e,t,n){if(e)try{e.setItem(t,n)}catch{}}function F1(e,t){if(e)try{e.removeItem(t)}catch{}}function O1(){if(typeof navigator>"u")return"server";const e=navigator.userAgent||"",t=navigator.language||"",n=navigator.platform||"",r=typeof Intl<"u"&&Intl.DateTimeFormat().resolvedOptions().timeZone||"",s=typeof screen<"u"?`${screen.width}x${screen.height}x${screen.colorDepth}`:"";return[e,t,n,r,s].join("|")}function D1(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=t*16777619>>>0;return t.toString(16).padStart(8,"0")}function Sm(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`}function Vi(e){return id=e,e}function Ea(e){if(typeof window>"u")return null;try{return e==="local"?window.localStorage:window.sessionStorage}catch{return null}}function Mi(){if(id)return id;const e=Ea("local"),t=Ea("session"),n=xm(t,vm);if(n)return Vi(n);const r=xm(e,Bu);if(t){const i=Sm();return wm(t,vm,i),r&&F1(e,Bu),Vi(i)}if(r)return Vi(r);if(e){const i=Sm();return wm(e,Bu,i),Vi(i)}const s=`fp_${D1(O1())}_${Math.random().toString(36).slice(2,8)}`;return Vi(s)}function Lo(e="lenslet"){ym+=1;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`nonce_${Math.random().toString(36).slice(2,10)}_${Date.now()}_${ym}`;return`${e}:${Mi()}:${t}`}function z1(){if(Vl!=null)return Vl;if(typeof window>"u")return null;const e=Ea("local");if(!e)return null;try{const t=e.getItem(ty);if(!t)return null;const n=Number(t);return!Number.isFinite(n)||n<=0?null:(Vl=n,n)}catch{return null}}function A1(e){if(!Number.isFinite(e)||e<=0||(Vl=e,typeof window>"u"))return;const t=Ea("local");if(t)try{t.setItem(ty,String(e))}catch{}}function $1(){if(typeof window>"u")return`${Be}/events`;const e=new URL(`${Be}/events`,window.location.origin),t=z1();return t!=null&&Number.isFinite(t)&&e.searchParams.set("last_event_id",String(t)),e.toString()}function U1(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}let wn=null,ry="idle";const od=new Set,ld=new Set,ad=new Set;function li(e){ry=e;for(const t of ld)t(e)}function wf(e){if(ka!==e){ka=e;for(const t of ad)t(e)}}function Sf(){ii!=null&&(window.clearTimeout(ii),ii=null)}function B1(){oi=0,Sf()}function W1(){if(!Ya||ii!=null)return;oi+=1;const e=Math.min(_1*Math.pow(2,oi-1),P1);oi>=I1?(li("offline"),wf(!0)):li("reconnecting"),ii=window.setTimeout(()=>{ii=null,sy()},e)}function sy(){if(!Ya||!ny()||(wn&&wn.readyState===EventSource.CLOSED&&(wn.close(),wn=null),wn))return;oi>0?li("reconnecting"):li("connecting");const e=new EventSource($1());wn=e;const t=n=>r=>{const s=U1(r.data);if(!s)return;const i=r.lastEventId?Number(r.lastEventId):null,o=i!=null&&Number.isFinite(i)?i:null;o!=null&&A1(o);for(const l of od)l({type:n,id:o,data:s})};e.addEventListener("item-updated",t("item-updated")),e.addEventListener("metrics-updated",t("metrics-updated")),e.addEventListener("presence",t("presence")),e.onopen=()=>{B1(),wf(!1),li("live")},e.onerror=()=>{wn===e&&(e.close(),wn=null,W1())}}function H1(){Ya=!0,ny()&&(Sf(),sy())}function V1(){Ya=!1,Sf(),oi=0,wn&&(wn.close(),wn=null),wf(!1),li("offline")}function Q1(e){return od.add(e),()=>{od.delete(e)}}function K1(e){return ld.add(e),e(ry),()=>{ld.delete(e)}}function q1(e){return ad.add(e),e(ka),()=>{ad.delete(e)}}function Y1(){return ka}function G1(e,t){const n=JSON.stringify(t),r=`${Be}${e}`;if(typeof navigator<"u"&&typeof navigator.sendBeacon=="function")try{if(navigator.sendBeacon(r,new Blob([n],{type:"application/json"})))return!0}catch{}if(typeof fetch!="function")return!1;try{return fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:n,keepalive:!0}),!0}catch{return!1}}function X1(e,t,n){return G1("/presence/leave",{gallery_id:e,lease_id:t,client_id:n??Mi()})}function jl(e){return e??Mi()}function Ml(e,t){return ft(`${Be}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).promise}function J1(e,t){const n=new URLSearchParams({path:e});return(t==null?void 0:t.page)!=null&&n.set("page",String(t.page)),(t==null?void 0:t.pageSize)!=null&&n.set("page_size",String(t.pageSize)),t!=null&&t.recursive&&n.set("recursive","1"),t!=null&&t.legacyRecursive&&n.set("legacy_recursive","1"),n.toString()}const ve={getFolder:(e,t)=>ft(`${Be}/folders?${J1(e,t)}`).promise,search:(e,t)=>{const n=new URLSearchParams;return e&&n.set("q",e),t&&n.set("path",t),ft(`${Be}/search?${n}`).promise},getEmbeddings:()=>ft(`${Be}/embeddings`).promise,searchEmbeddings:e=>ft(`${Be}/embeddings/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise,refreshFolder:e=>{const t=new URLSearchParams({path:e});return ft(`${Be}/refresh?${t}`,{method:"POST"}).promise},getSidecar:e=>ft(`${Be}/item?path=${encodeURIComponent(e)}`).promise,patchSidecar:(e,t,n)=>{const s={"Content-Type":"application/json","Idempotency-Key":(n==null?void 0:n.idempotencyKey)??Lo("patch"),"x-client-id":Mi(),"x-updated-by":"web"};return(n==null?void 0:n.ifMatch)!=null&&(s["If-Match"]=String(n.ifMatch)),ft(`${Be}/item?path=${encodeURIComponent(e)}`,{method:"PATCH",headers:s,body:JSON.stringify(t)}).promise},getMetadata:e=>ft(`${Be}/metadata?path=${encodeURIComponent(e)}`).promise,putSidecar:(e,t)=>ft(`${Be}/item?path=${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-client-id":Mi(),"x-updated-by":"web"},body:JSON.stringify(t)}).promise,getHealth:()=>ft(`${Be}/health`).promise,joinPresence:(e,t,n)=>Ml("/presence/join",{gallery_id:e,client_id:jl(n),lease_id:t}),movePresence:(e,t,n,r)=>Ml("/presence/move",{from_gallery_id:e,to_gallery_id:t,client_id:jl(r),lease_id:n}),leavePresence:(e,t,n)=>Ml("/presence/leave",{gallery_id:e,client_id:jl(n),lease_id:t}),postPresence:(e,t,n)=>Ml("/presence",{gallery_id:e,client_id:jl(n),lease_id:t}),getThumb:e=>sd.getOrFetch(e,()=>Nl(pm(e))),prefetchThumb:e=>{sd.prefetch(e,()=>Nl(pm(e)))},getFile:e=>$s.getOrFetch(e,()=>Nl(gm(e))),prefetchFile:async(e,t)=>{if(T1(t)&&!($s.has(e)||$s.isInflight(e)))try{const n=await Nl(gm(e),{headers:{"x-lenslet-prefetch":t}}).promise;n.size<=L1&&$s.set(e,n)}catch{}},cancelPrefetch:e=>{$s.cancelPrefetch(e)},uploadFile:async(e,t)=>{const n=new FormData;return n.append("dest",e),n.append("file",t),ft(`${Be}/file`,{method:"POST",body:n,timeoutMs:6e4}).promise},moveFile:async(e,t)=>{const n=new FormData;return n.append("src",e),n.append("dest",t),ft(`${Be}/move`,{method:"POST",body:n}).promise},deleteFiles:async e=>ft(`${Be}/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:e})}).promise,exportIntent:async e=>{const t=new FormData;return t.append("path",e),ft(`${Be}/export-intent`,{method:"POST",body:t}).promise},getViews:()=>ft(`${Be}/views`).promise,saveViews:e=>ft(`${Be}/views`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise};class Z1{constructor(t=400){Hn(this,"cache",new Map);Hn(this,"maxSize");this.maxSize=t,typeof window<"u"&&window.addEventListener("beforeunload",()=>this.clear(),{once:!0})}get(t){const n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){for(this.cache.has(t)&&this.cache.delete(t);this.cache.size>=this.maxSize;){const r=this.cache.keys().next().value;if(r===void 0)break;const s=this.cache.get(r);if(this.cache.delete(r),s)try{URL.revokeObjectURL(s)}catch{}}this.cache.set(t,n)}clear(){for(const t of this.cache.values())try{URL.revokeObjectURL(t)}catch{}this.cache.clear()}}const Wu=new Z1(400);function eS({path:e,name:t,onClick:n,selected:r,highlighted:s,highlightKey:i,displayW:o,displayH:l,ioRoot:u,isScrolling:d,priority:f}){const m=c.useRef(null),[g,C]=c.useState(()=>Wu.get(e)??null),[w,E]=c.useState(!1),[L,y]=c.useState(()=>!!g);c.useEffect(()=>{const p=m.current;if(!p)return;const v=new IntersectionObserver(S=>{for(const R of S)R.target===p&&E(R.isIntersecting||R.intersectionRatio>0)},{root:u??null,rootMargin:"200px 0px",threshold:.01});return v.observe(p),()=>{v.unobserve(p),v.disconnect()}},[u]),c.useEffect(()=>{if(g||!(w&&!d||f))return;let p=!0;return ve.getThumb(e).then(v=>{if(!p)return;const S=URL.createObjectURL(v);Wu.set(e,S),C(S)}).catch(()=>{}),()=>{p=!1}},[e,g,w,d,f]),c.useEffect(()=>{var v;if(!g){y(!1);return}const p=(v=m.current)==null?void 0:v.querySelector("img");p&&p.complete&&p.naturalWidth>0?y(!0):y(!1)},[g]),c.useEffect(()=>{C(Wu.get(e)??null)},[e]);const h=["absolute inset-0 relative bg-hover border border-border rounded-lg overflow-hidden select-none",r?"outline-2 outline-accent":"",s?"thumb-updated-ring":"","hover:outline hover:outline-1 hover:outline-accent"].filter(Boolean).join(" ");return a.jsx("div",{ref:m,"data-highlight-key":i??void 0,className:h,onClick:n,children:g?a.jsx("img",{className:`w-full h-full object-cover block pointer-events-none select-none opacity-0 transition-opacity duration-[160ms] ${L?"opacity-100":""}`,src:g,alt:t,loading:"lazy",decoding:"async",onLoad:()=>y(!0),width:o?Math.round(o):void 0,height:l?Math.round(l):void 0}):null})}function zs(e,t,n){let r=n.initialDeps??[],s,i=!0;function o(){var l,u,d;let f;n.key&&((l=n.debug)!=null&&l.call(n))&&(f=Date.now());const m=e();if(!(m.length!==r.length||m.some((w,E)=>r[E]!==w)))return s;r=m;let C;if(n.key&&((u=n.debug)!=null&&u.call(n))&&(C=Date.now()),s=t(...m),n.key&&((d=n.debug)!=null&&d.call(n))){const w=Math.round((Date.now()-f)*100)/100,E=Math.round((Date.now()-C)*100)/100,L=E/16,y=(h,p)=>{for(h=String(h);h.length<p;)h=" "+h;return h};console.info(`%c ${y(E,5)} /${y(w,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*L,120))}deg 100% 31%);`,n==null?void 0:n.key)}return n!=null&&n.onChange&&!(i&&n.skipInitialOnChange)&&n.onChange(s),i=!1,s}return o.updateDeps=l=>{r=l},o}function Cm(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const tS=(e,t)=>Math.abs(e-t)<1.01,nS=(e,t,n)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,s),n)}},bm=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},rS=e=>e,sS=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},iS=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const s=o=>{const{width:l,height:u}=o;t({width:Math.round(l),height:Math.round(u)})};if(s(bm(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const u=o[0];if(u!=null&&u.borderBoxSize){const d=u.borderBoxSize[0];if(d){s({width:d.inlineSize,height:d.blockSize});return}}s(bm(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},km={passive:!0},Em=typeof window>"u"?!0:"onscrollend"in window,oS=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&Em?()=>{}:nS(r,()=>{t(s,!1)},e.options.isScrollingResetDelay),o=f=>()=>{const{horizontal:m,isRtl:g}=e.options;s=m?n.scrollLeft*(g&&-1||1):n.scrollTop,i(),t(s,f)},l=o(!0),u=o(!1);u(),n.addEventListener("scroll",l,km);const d=e.options.useScrollendEvent&&Em;return d&&n.addEventListener("scrollend",u,km),()=>{n.removeEventListener("scroll",l),d&&n.removeEventListener("scrollend",u)}},lS=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},aS=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const o=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class uS{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:rS,rangeExtractor:sS,onChange:()=>{},measureElement:lS,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=zs(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=n[o];if(s.has(l.lane))continue;const u=i.get(l.lane);if(u==null||l.end>u.end?i.set(l.lane,l):l.end<u.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=zs(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,s,i,o,l)=>(this.prevLanes!==void 0&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=zs(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l},u)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const g of this.laneAssignments.keys())g>=n&&this.laneAssignments.delete(g);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(g=>{this.itemSizeCache.set(g.key,g.size)}));const d=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const f=this.measurementsCache.slice(0,d),m=new Array(l).fill(void 0);for(let g=0;g<d;g++){const C=f[g];C&&(m[C.lane]=g)}for(let g=d;g<n;g++){const C=i(g),w=this.laneAssignments.get(g);let E,L;if(w!==void 0&&this.options.lanes>1){E=w;const v=m[E],S=v!==void 0?f[v]:void 0;L=S?S.end+this.options.gap:r+s}else{const v=this.options.lanes===1?f[g-1]:this.getFurthestMeasurement(f,g);L=v?v.end+this.options.gap:r+s,E=v?v.lane:g%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(g,E)}const y=u.get(C),h=typeof y=="number"?y:this.options.estimateSize(g),p=L+h;f[g]={index:g,start:L,size:h,end:p,key:C,lane:E},m[E]=g}return this.measurementsCache=f,f},{key:!1,debug:()=>this.options.debug}),this.calculateRange=zs(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?cS({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=zs(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,o)=>i===null||o===null?[]:n({startIndex:i,endIndex:o,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=zs(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,o=n.length;i<o;i++){const l=n[i],u=r[l];s.push(u)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return Cm(r[iy(0,r.length-1,s=>Cm(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(s.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const o=10,l=d=>{if(!this.targetWindow)return;const f=this.getOffsetForIndex(n,d);if(!f){console.warn("Failed to get offset for index:",n);return}const[m,g]=f;this._scrollToOffset(m,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const C=this.getScrollOffset(),w=this.getOffsetForIndex(n,g);if(!w){console.warn("Failed to get offset for index:",n);return}tS(w[0],C)||u(g)})},u=d=>{this.targetWindow&&(i++,i<o?this.targetWindow.requestAnimationFrame(()=>l(d)):console.warn(`Failed to scroll to index ${n} after ${o} attempts.`))};l(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}s=Math.max(...i.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const iy=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function cS({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const s=e.length-1,i=u=>e[u].start;if(e.length<=r)return{startIndex:0,endIndex:s};let o=iy(0,s,i,n),l=o;if(r===1)for(;l<s&&e[l].end<n+t;)l++;else if(r>1){const u=Array(r).fill(0);for(;l<s&&u.some(f=>f<n+t);){const f=e[l];u[f.lane]=f.end,l++}const d=Array(r).fill(n+t);for(;o>=0&&d.some(f=>f>=n);){const f=e[o];d[f.lane]=f.start,o--}o=Math.max(0,o-o%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const Nm=typeof document<"u"?c.useLayoutEffect:c.useEffect;function dS(e){const t=c.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var o;i?pf.flushSync(t):t(),(o=e.onChange)==null||o.call(e,s,i)}},[r]=c.useState(()=>new uS(n));return r.setOptions(n),Nm(()=>r._didMount(),[]),Nm(()=>r._willUpdate()),r}function fS(e){return dS({observeElementRect:iS,observeElementOffset:oS,scrollToFn:aS,...e})}function hS({containerW:e,gap:t,targetCell:n,aspect:r,captionH:s}){const i=Math.max(1,Math.floor((e+t)/(n+t))),o=(e-t*(i-1))/i,l=o*r.h/r.w,u=l+s+t;return{columns:i,cellW:o,mediaH:l,rowH:u}}const mS=1.333;function pS({items:e,containerWidth:t,targetHeight:n,gap:r,captionH:s}){if(t<=0)return[];const i=[];let o=[],l=0;const u=(d,f)=>({index:i.length,height:f+s+r,imageH:f,items:d.map(m=>({item:m.item,displayW:m.aspect*f,displayH:f,originalIndex:m.originalIndex}))});for(let d=0;d<e.length;d++){const f=e[d],m=f.w>0&&f.h>0?f.w/f.h:mS;o.push({item:f,aspect:m,originalIndex:d}),l+=m;const g=(o.length-1)*r;if(l*n+g>=t){const w=(t-g)/l;i.push(u(o,w)),o=[],l=0}}return o.length>0&&i.push(u(o,n)),i}function gS(e,t,n){return{mode:"adaptive",rows:pS({items:t,containerWidth:e,targetHeight:n.targetCell,gap:n.gap,captionH:n.captionH})}}function vS(e,t,n){const{columns:r,cellW:s,mediaH:i,rowH:o}=hS({containerW:e,gap:n.gap,targetCell:n.targetCell,aspect:n.aspect,captionH:n.captionH}),l=Math.ceil(t.length/Math.max(1,r));return{mode:"grid",columns:r,cellW:s,mediaH:i,rowH:o,rowCount:l}}function yS(e,t,n){const[r,s]=c.useState(0);c.useLayoutEffect(()=>{const u=e.current;if(!u)return;const d=()=>{const m=getComputedStyle(u),g=u.clientWidth-parseFloat(m.paddingLeft)-parseFloat(m.paddingRight);s(g)},f=new ResizeObserver(d);return f.observe(u),d(),()=>f.disconnect()},[]);const i=c.useMemo(()=>n.viewMode==="adaptive"?gS(r,t,n):vS(r,t,n),[r,t,n.viewMode,n.gap,n.targetCell,n.aspect.w,n.aspect.h,n.captionH]),o=fS({count:i.mode==="adaptive"?i.rows.length:i.rowCount,getScrollElement:()=>e.current,estimateSize:u=>i.mode==="adaptive"?i.rows[u].height:i.rowH,overscan:8}),l=o.getVirtualItems();return c.useEffect(()=>{o.measure()},[i,o]),{width:r,layout:i,rowVirtualizer:o,virtualRows:l}}function xS(e,t,n,r){if(!e.length)return null;const s=n?e.findIndex(l=>l.path===n):0,i=Math.max(1,t);let o=s;if(r.key==="ArrowRight"||r.key==="d")o=Math.min(e.length-1,s+1);else if(r.key==="ArrowLeft"||r.key==="a")o=Math.max(0,s-1);else if(r.key==="ArrowDown"||r.key==="s")o=Math.min(e.length-1,s+i);else if(r.key==="ArrowUp"||r.key==="w")o=Math.max(0,s-i);else return r.key==="Enter"&&n?"open":null;return o}function wS(e,t,n){const r=[];for(const s of e){if(t.mode==="adaptive"){const l=t.rows[s.index];if(!l)continue;for(const u of l.items)r.push(u.item.path);continue}const i=s.index*t.columns,o=n.slice(i,i+t.columns);for(const l of o)r.push(l.path)}return Array.from(new Set(r))}const Vn=12,SS=44,CS={w:4,h:3},bS=350,kS=120;function ES(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function NS({items:e,selected:t,restoreToSelectionToken:n,onSelectionChange:r,onOpenViewer:s,onContextMenuItem:i,highlight:o,recentlyUpdated:l,onVisiblePathsChange:u,suppressSelectionHighlight:d=!1,viewMode:f="grid",targetCellSize:m=220,scrollRef:g,hideScrollbar:C=!1}){const[w,E]=c.useState(null),[L,y]=c.useState(null),[h,p]=c.useState(!1),[v,S]=c.useState(null),[R,j]=c.useState(null),k=c.useRef(null),T=c.useRef(null),N=c.useRef(null),F=g??N,U=c.useRef(null),D=c.useRef(new Set),ee=m,{width:ue,layout:_,rowVirtualizer:de,virtualRows:z}=yS(F,e,{gap:Vn,targetCell:ee,aspect:CS,captionH:SS,viewMode:f}),H=c.useMemo(()=>{const A=new Map;for(let se=0;se<e.length;se++)A.set(e[se].path,se);return A},[e]),J=c.useMemo(()=>{if(_.mode!=="adaptive")return null;const A=new Map;return _.rows.forEach((se,q)=>{let B=0;se.items.forEach((Y,Z)=>{const ie=B+Y.displayW/2;A.set(Y.item.path,{row:q,center:ie,order:Z}),B+=Y.displayW+Vn})}),A},[_]);c.useEffect(()=>{if(!t.length)return;const A=t[0];v!==A&&S(A)},[t,v]);const ae=c.useMemo(()=>{if(_.mode!=="adaptive")return null;let A=0;return _.rows.map(se=>{const q=A;return A+=se.height,{start:q,height:se.height}})},[_]),ce=c.useRef(null),Le=(A,se)=>{try{if(ce.current!=null){try{cancelAnimationFrame(ce.current)}catch{}ce.current=null}const q=A.scrollTop,B=se-q;if(Math.abs(B)<1){A.scrollTop=se;return}const Y=140,Z=performance.now(),ie=ke=>1-Math.pow(1-ke,3),we=ke=>{const Ee=Math.min(1,(ke-Z)/Y),Re=ie(Ee);A.scrollTop=q+B*Re,Ee<1?ce.current=requestAnimationFrame(we):ce.current=null};ce.current=requestAnimationFrame(we)}catch{A.scrollTop=se}},[Q,K]=c.useState(!1);c.useEffect(()=>{const A=F.current;if(!A)return;let se=0;const q=()=>{K(!0),window.clearTimeout(se),se=window.setTimeout(()=>K(!1),kS)};return A.addEventListener("scroll",q,{passive:!0}),()=>A.removeEventListener("scroll",q)},[]);const ne=()=>{T.current!=null&&(window.clearTimeout(T.current),T.current=null)},fe=()=>{if(ne(),p(!1),E(null),k.current){try{URL.revokeObjectURL(k.current)}catch{}k.current=null}y(null)},Me=A=>{Q||(ne(),E(A),p(!1),T.current=window.setTimeout(async()=>{T.current=null;try{const se=await ve.getFile(A),q=URL.createObjectURL(se);if(k.current)try{URL.revokeObjectURL(k.current)}catch{}k.current=q,y(q),p(!0)}catch{}},bS))},$e=_.mode==="grid"?_.columns:Math.max(1,Math.floor(ue/(ee+Vn))),He=(A,se)=>{if(_.mode!=="adaptive")return null;const q=_.rows[A];if(!q)return null;let B=0,Y=null;for(const Z of q.items){const ie=B+Z.displayW/2,we=Math.abs(ie-se);(!Y||we<Y.dist)&&(Y={path:Z.item.path,dist:we}),B+=Z.displayW+Vn}return Y?Y.path:null},at=(A,se)=>{var Re,ct,dt,Ft;if(!e.length)return null;const q=A??e[0].path;if(_.mode!=="adaptive"){const hn=xS(e,$e,q,se);return hn==="open"||hn==null?hn:((Re=e[hn])==null?void 0:Re.path)??null}const B=J==null?void 0:J.get(q);if(!B)return q;const Y=H.get(q)??0,Z=se.key;if(Z==="Enter")return"open";if(Z==="ArrowRight"||Z==="d")return((ct=e[Math.min(e.length-1,Y+1)])==null?void 0:ct.path)??q;if(Z==="ArrowLeft"||Z==="a")return((dt=e[Math.max(0,Y-1)])==null?void 0:dt.path)??q;const ie=Z==="ArrowDown"||Z==="s"?1:Z==="ArrowUp"||Z==="w"?-1:0;if(ie===0)return null;const we=B.row+ie;if(we<0||we>=(((Ft=_.rows)==null?void 0:Ft.length)??0))return q;const ke=B.center;return He(we,ke)??q},tt=A=>{var se;try{(se=document.getElementById(`cell-${encodeURIComponent(A)}`))==null||se.focus()}catch{}},tn=c.useCallback(A=>{try{ve.prefetchThumb(A)}catch{}},[]),nt=(A,se)=>{S(A),j(A);const q=!!se.shiftKey,B=!!(se.ctrlKey||se.metaKey);if(q){const Y=U.current??v??t[0]??A,Z=H.get(Y)??e.findIndex(we=>we.path===Y),ie=H.get(A)??e.findIndex(we=>we.path===A);if(Z!==-1&&ie!==-1){const we=Math.min(Z,ie),ke=Math.max(Z,ie),Ee=e.slice(we,ke+1).map(Re=>Re.path);if(B){const Re=new Set(t);for(const ct of Ee)Re.add(ct);r(Array.from(Re))}else r(Ee)}else r([A])}else if(B){const Y=new Set(t);Y.has(A)?Y.delete(A):Y.add(A),r(Array.from(Y)),U.current=A}else r([A]),U.current=A;Q||tn(A),tt(A)},Pt=(A,se)=>{var q,B;try{const Y=nn.has(A)&&t.length>0?t:[A];(q=se.dataTransfer)==null||q.setData("application/x-lenslet-paths",JSON.stringify(Y)),se.dataTransfer&&(se.dataTransfer.effectAllowed="copyMove");try{document.body.classList.add("drag-active")}catch{}const ie=se.currentTarget.querySelector(".cell-content img"),we=document.createElement("div");we.className="drag-ghost";const ke=document.createElement("img");ke.draggable=!1,ke.alt="drag",ie&&ie.src&&(ke.src=ie.src),we.appendChild(ke),document.body.appendChild(we);const Ee=we.getBoundingClientRect().width||150;(B=se.dataTransfer)==null||B.setDragImage(we,Math.round(Ee/2),0);const Re=()=>{try{we.remove()}catch{}try{document.body.classList.remove("drag-active")}catch{}window.removeEventListener("dragend",Re),window.removeEventListener("pointerup",Re),document.removeEventListener("visibilitychange",Re)};window.addEventListener("dragend",Re),window.addEventListener("pointerup",Re),document.addEventListener("visibilitychange",Re)}catch{}};c.useEffect(()=>{const A=F.current;if(!A)return;const se=q=>{var Re,ct,dt;const B=at(R,q);if(B==null)return;if(q.preventDefault(),B==="open"){R&&s(R);return}const Y=e.find(Ft=>Ft.path===B);if(!Y)return;j(Y.path),S(Y.path),r([Y.path]);try{U.current=Y.path}catch{}const Z=_.mode==="grid"?Math.floor((H.get(Y.path)??0)/Math.max(1,_.columns)):((Re=J==null?void 0:J.get(Y.path))==null?void 0:Re.row)??0,ie=A.scrollTop,we=ie+A.clientHeight,ke=_.mode==="adaptive"?((ct=ae==null?void 0:ae[Z])==null?void 0:ct.start)??0:Z*_.rowH,Ee=_.mode==="adaptive"?ke+(((dt=ae==null?void 0:ae[Z])==null?void 0:dt.height)??0):ke+_.rowH;(ke<ie||Ee>we)&&Le(A,ke),tt(Y.path)};return A.addEventListener("keydown",se),()=>{A.removeEventListener("keydown",se)}},[e,R,$e,s,_,J,ae,H]),c.useLayoutEffect(()=>{var Z;const A=F.current;if(!A||!n||!t||t.length===0)return;const se=t[0],q=H.get(se);if(q==null||q<0)return;let B=0;if(_.mode==="grid")B=Math.floor(q/Math.max(1,_.columns));else{let ie=0,we=_.rows.length-1;for(;ie<=we;){const ke=ie+we>>1,Ee=_.rows[ke];if(q>=Ee.items[0].originalIndex&&q<=Ee.items[Ee.items.length-1].originalIndex){B=ke;break}q<Ee.items[0].originalIndex?we=ke-1:ie=ke+1}}const Y=_.mode==="adaptive"?((Z=ae==null?void 0:ae[B])==null?void 0:Z.start)??0:B*_.rowH;try{A.scrollTop=Y}catch{}},[n,_,ae]);const nn=c.useMemo(()=>new Set(t),[t]),It=!!(w&&L&&h),Ct=c.useMemo(()=>wS(z,_,e),[e,_,z]);c.useEffect(()=>{if(!(Q||Ct.length===0))for(const A of Ct)tn(A)},[Q,Ct,tn]),c.useEffect(()=>{var A;(A=F.current)==null||A.focus()},[]),c.useEffect(()=>{var A;if(d){try{(A=F.current)==null||A.blur()}catch{}try{j(null)}catch{}}},[d]);const ut=c.useMemo(()=>{const A=new Set;for(const se of z){if(_.mode==="adaptive"){const Y=_.rows[se.index];if(!Y)continue;for(const Z of Y.items)A.add(Z.item.path);continue}const q=se.index*_.columns,B=Math.min(e.length,q+_.columns);for(let Y=q;Y<B;Y+=1){const Z=e[Y];Z&&A.add(Z.path)}}return A},[e,_,z]);c.useEffect(()=>{u&&(ES(D.current,ut)||(D.current=ut,u(ut)))},[u,ut]);const _e=R?`cell-${encodeURIComponent(R)}`:void 0;return a.jsx("div",{role:"grid","aria-label":"Gallery",className:`relative h-full overflow-auto p-3 outline-none ${C?"scrollbar-hidden pr-4":"scrollbar-thin"} ${It?"cursor-zoom-in":""}`,ref:F,tabIndex:0,"aria-activedescendant":_e,onMouseDown:()=>{var A;return(A=F.current)==null?void 0:A.focus()},style:{"--gap":`${Vn}px`},children:a.jsxs("div",{className:"relative w-full",style:{height:de.getTotalSize()},children:[z.map(A=>{var Z;let se=[],q={},B="";if(_.mode==="adaptive"){const ie=_.rows[A.index];if(!ie)return null;se=ie.items,q={height:ie.height,transform:`translate3d(0, ${A.start}px, 0)`,display:"flex",gap:Vn,paddingBottom:Vn},B="absolute top-0 left-0 right-0 w-full will-change-transform"}else{const ie=A.index*_.columns;se=e.slice(ie,ie+_.columns).map(ke=>({item:ke,displayW:_.cellW,displayH:_.mediaH})),q={transform:`translate3d(0, ${A.start}px, 0)`,gridTemplateColumns:`repeat(${_.columns}, minmax(0, 1fr))`,gap:Vn,paddingBottom:Vn},B="absolute top-0 left-0 right-0 w-full grid will-change-transform"}const Y=A.index===((Z=z[0])==null?void 0:Z.index);return a.jsx("div",{className:B,role:"row",style:q,children:se.map(({item:ie,displayW:we,displayH:ke})=>{const Ee=!d&&(v===ie.path||nn.has(ie.path)),Re=(l==null?void 0:l.get(ie.path))??null,ct=Re!=null,dt=_.mode==="adaptive"?{width:we}:{},Ft=_.mode==="adaptive"?{height:ke}:{},hn=_.mode==="adaptive"?"relative rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group shrink-0":"relative aspect-[4/3] rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group";return a.jsxs("div",{id:`cell-${encodeURIComponent(ie.path)}`,className:`relative min-w-0 ${Ee?"outline outline-2 outline-accent outline-offset-2 rounded-[10px]":""}`,role:"gridcell","aria-selected":Ee,tabIndex:R===ie.path?0:-1,onFocus:()=>j(ie.path),draggable:!0,style:dt,onDragStart:rt=>Pt(ie.path,rt),onDragEnd:()=>{},onContextMenu:rt=>{rt.preventDefault(),rt.stopPropagation(),i&&i(rt,ie.path)},children:[a.jsxs("div",{className:hn,style:Ft,onDoubleClick:()=>s(ie.path),onMouseLeave:fe,children:[a.jsx("div",{className:"cell-content absolute inset-0",children:a.jsx(eS,{path:ie.path,name:ie.name,selected:Ee,highlighted:ct,highlightKey:Re,displayW:we,displayH:ke,ioRoot:F.current,isScrolling:Q,priority:Y,onClick:rt=>nt(ie.path,rt)})}),a.jsx("div",{className:"absolute right-0 bottom-0 w-7 h-7 cursor-zoom-in",onMouseEnter:()=>Me(ie.path),onMouseLeave:fe,children:a.jsx("div",{className:"absolute right-0 bottom-0 h-[18px] w-[18px] flex items-center justify-center text-text select-none opacity-0 group-hover:opacity-50 hover:opacity-100 transition-all duration-[140ms]",style:{clipPath:'path("M0 9C0 4.02944 4.02944 0 9 0H18V18H0V9Z")',background:"linear-gradient(135deg, rgba(18,18,18,0.9) 0%, rgba(34,34,34,0.9) 60%, rgba(22,22,22,0.9) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",borderLeft:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 1px 2px rgba(0,0,0,0.45)",backdropFilter:"blur(1px)"},children:a.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#d9dce2]","aria-hidden":"true",style:{transform:"translate(0px,0px)"},children:[a.jsx("circle",{cx:"11",cy:"11",r:"5.4"}),a.jsx("path",{d:"M15.5 15.5 L19 19"})]})})})]}),a.jsxs("div",{className:"flex flex-col items-center text-center gap-0 mt-1 px-0.5 text-white/90",children:[a.jsx("div",{className:"text-sm leading-[18px] thumb-filename line-clamp-2 break-words hyphens-auto text-center",title:ie.name,children:(()=>{const rt=(o||"").trim();if(!rt)return ie.name;const st=ie.name,Ot=st.toLowerCase().indexOf(rt.toLowerCase());if(Ot===-1)return ie.name;const Ns=st.slice(0,Ot),Ge=st.slice(Ot,Ot+rt.length),Ht=st.slice(Ot+rt.length);return a.jsxs(a.Fragment,{children:[Ns,a.jsx("mark",{className:"bg-accent/20 text-inherit rounded px-0.5",children:Ge}),Ht]})})()}),a.jsxs("div",{className:"text-[11px] leading-[15px] opacity-70",children:[ie.w,"  ",ie.h]})]})]},ie.path)})},A.key)}),w&&L&&h&&pf.createPortal(a.jsx("div",{className:"toolbar-offset fixed inset-0 z-[999] flex items-center justify-center pointer-events-none bg-black/20 opacity-100",children:a.jsx("img",{src:L,alt:"preview",className:"max-w-[80vw] max-h-[80vh] object-contain opacity-[0.98]"})}),document.body)]},`${f}-${$e}`)})}const jS=48,MS=[.1,.24,.5,.74,.9];function RS({items:e,metricKey:t,scrollRef:n,sortDir:r}){const{orderedValues:s,numericValues:i}=c.useMemo(()=>{var N;const k=[],T=[];for(const F of e){const U=(N=F.metrics)==null?void 0:N[t],D=U==null||Number.isNaN(U)?null:U;k.push(D),D!=null&&T.push(D)}return{orderedValues:k,numericValues:T}},[e,t]),o=c.useMemo(()=>LS(i,jS),[i]),l=c.useMemo(()=>TS(i,MS),[i]),[u,d]=c.useState(0),[f,m]=c.useState(null),[g,C]=c.useState(!1),w=c.useRef(null);if(c.useEffect(()=>{const k=n.current;if(!k)return;const T=()=>{const N=Math.max(1,k.scrollHeight-k.clientHeight),F=rs(N>0?k.scrollTop/N:0);d(F)};return T(),k.addEventListener("scroll",T,{passive:!0}),window.addEventListener("resize",T),()=>{k.removeEventListener("scroll",T),window.removeEventListener("resize",T)}},[n,e.length]),c.useEffect(()=>{m(null)},[t,e.length]),!o)return null;const E={min:o.min,max:o.max},L=f!=null?Mm(f):null,y=Mm(u),h=r==="desc",p=c.useMemo(()=>f==null?null:IS(s,f),[s,f]);function v(k){m(rs(k))}function S(){m(null)}function R(k){const T=n.current;if(!T)return;const N=Math.max(0,T.scrollHeight-T.clientHeight);T.scrollTop=rs(k)*N}function j(k){var N;const T=(N=w.current)==null?void 0:N.getBoundingClientRect();return T?rs((k.clientY-T.top)/T.height):null}return a.jsxs("div",{className:"absolute right-0 top-3 bottom-3 w-[14px] flex items-stretch pointer-events-auto",children:[a.jsxs("svg",{ref:w,viewBox:"0 0 10 100",preserveAspectRatio:"none",className:"w-full h-full rounded bg-surface-inset border border-border/60 cursor-ns-resize",onPointerDown:k=>{var N;k.preventDefault();const T=j(k);T!=null&&(C(!0),v(T),R(T),(N=w.current)==null||N.setPointerCapture(k.pointerId))},onPointerMove:k=>{const T=j(k);if(T==null){g||S();return}v(T),g&&R(T)},onPointerUp:k=>{var T;C(!1),(T=w.current)==null||T.releasePointerCapture(k.pointerId)},onPointerLeave:()=>{g||S()},children:[_S(o.bins,"var(--border-strong)",{flip:h}),PS(l,E,{flip:h,color:"var(--muted)"}),jm(y,{color:"var(--highlight)",strokeWidth:.8}),L!=null&&jm(L,{color:"var(--text-secondary)",strokeWidth:.6,dashed:!0})]}),p!=null&&f!=null&&a.jsx("div",{className:"pointer-events-none absolute right-full mr-2 px-1.5 py-0.5 rounded border border-border bg-surface text-[10px] text-text shadow",style:{top:`calc(${(f*100).toFixed(2)}% - 8px)`},children:OS(p)})]})}function LS(e,t){if(!e.length)return null;const n=Math.min(...e);let r=Math.max(...e);n===r&&(r=n+1);const s=new Array(t).fill(0),i=t/(r-n);for(const o of e){const l=Math.max(0,Math.min(t-1,Math.floor((o-n)*i)));s[l]+=1}return{bins:s,min:n,max:r}}function TS(e,t){if(!e.length)return[];const n=[...e].sort((s,i)=>s-i),r=n.length-1;return t.map(s=>{const i=r*s,o=Math.floor(i),l=Math.ceil(i);if(o===l)return n[o];const u=i-o;return n[o]+(n[l]-n[o])*u})}function _S(e,t,n){const r=Math.max(1,...e),s=100/e.length,i=(n==null?void 0:n.flip)??!1;return e.map((o,l)=>{const u=Math.max(.8,o/r*10),d=(i?e.length-1-l:l)*s;return a.jsx("rect",{x:10-u,y:d,width:u,height:Math.max(.2,s-.2),fill:t,opacity:.9},`sb-${l}`)})}function PS(e,t,n){const r=(n==null?void 0:n.flip)??!1,s=n==null?void 0:n.color;return e.map((i,o)=>{const l=FS(i,t,r),u=o===2;return a.jsx("line",{x1:0,y1:l,x2:10,y2:l,stroke:s,strokeWidth:u?.8:.5,opacity:u?.9:.6,vectorEffect:"non-scaling-stroke"},`qt-${o}-${i}`)})}function jm(e,t){return a.jsx("line",{x1:0,y1:e,x2:10,y2:e,stroke:t.color,strokeWidth:t.strokeWidth??.6,strokeDasharray:t.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function IS(e,t){if(!e.length)return null;const n=Math.round(rs(t)*(e.length-1)),r=e[n];if(r!=null)return r;for(let s=1;s<e.length;s++){const i=n-s;if(i>=0&&e[i]!=null)return e[i];const o=n+s;if(o<e.length&&e[o]!=null)return e[o]}return null}function FS(e,t,n){const r=t.max-t.min;if(r===0)return 0;const s=rs((e-t.min)/r);return(n?1-s:s)*100}function Mm(e){return rs(e)*100}function rs(e){return e<0?0:e>1?1:e}function OS(e){if(e==null||Number.isNaN(e))return"-";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function ss(e,t){const[n,r]=c.useState(null),s=c.useRef(null);return c.useEffect(()=>{if(!e){if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}r(null);return}let i=!0;return e().then(o=>{if(!i)return;const l=URL.createObjectURL(o);if(s.current)try{URL.revokeObjectURL(s.current)}catch{}s.current=l,r(l)}).catch(()=>{}),()=>{i=!1}},t),c.useEffect(()=>()=>{if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}},[]),n}function DS(){const[e,t]=c.useState(1),[n,r]=c.useState(0),[s,i]=c.useState(0),[o,l]=c.useState(1),[u,d]=c.useState(!1),[f,m]=c.useState(!1),[g,C]=c.useState(!1),w=c.useRef(null),E=c.useRef(null),L=()=>{const p=w.current,v=E.current;if(!p||!v||!v.naturalWidth||!v.naturalHeight)return;const S=p.getBoundingClientRect(),R=S.width/v.naturalWidth,j=S.height/v.naturalHeight,k=Math.min(1,Math.min(R,j));l(k);const T=v.naturalWidth*k,N=v.naturalHeight*k;r((S.width-T)/2),i((S.height-N)/2)};return c.useEffect(()=>{const p=w.current;if(!p)return;const v=new ResizeObserver(()=>{try{requestAnimationFrame(()=>L())}catch{L()}});return v.observe(p),()=>v.disconnect()},[]),{scale:e,setScale:t,tx:n,setTx:r,ty:s,setTy:i,base:o,setBase:l,ready:u,setReady:d,dragging:f,setDragging:m,visible:g,setVisible:C,containerRef:w,imgRef:E,fitAndCenter:L,handleWheel:p=>{p.preventDefault();const v=p.deltaY>0?-1:1,S=1.2,R=.05,j=8,k=w.current;if(!k)return;const T=k.getBoundingClientRect(),N=p.clientX-T.left,F=p.clientY-T.top;t(U=>{const D=Math.min(j,Math.max(R,U*Math.pow(S,v))),ee=D/U;return r(ue=>N-ee*(N-ue)),i(ue=>F-ee*(F-ue)),Number(D.toFixed(4))})},handleMouseDown:p=>{const v=w.current,S=E.current;if(!v||!S||p.target!==S)return;const j=v.getBoundingClientRect();if(p.clientX<j.left||p.clientX>j.right||p.clientY<j.top||p.clientY>j.bottom)return;p.preventDefault(),p.stopPropagation(),m(!0);const k=p.clientX,T=p.clientY,N=n,F=s,U=ee=>{r(N+(ee.clientX-k)),i(F+(ee.clientY-T))},D=()=>{window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",D),m(!1)};window.addEventListener("mousemove",U),window.addEventListener("mouseup",D)}}}function zS({path:e,onClose:t,onNavigate:n,onZoomChange:r,requestedZoomPercent:s,onZoomRequestConsumed:i}){const{scale:o,setScale:l,tx:u,setTx:d,ty:f,setTy:m,base:g,ready:C,setReady:w,dragging:E,visible:L,setVisible:y,containerRef:h,imgRef:p,fitAndCenter:v,handleWheel:S,handleMouseDown:R}=DS(),j=ss(()=>ve.getFile(e),[e]),k=ss(()=>ve.getThumb(e),[e]),T=c.useCallback(()=>{y(!1),window.setTimeout(t,110)},[t,y]);return c.useEffect(()=>{requestAnimationFrame(()=>{var N;y(!0),(N=h.current)==null||N.focus()})},[e]),c.useEffect(()=>{const N=F=>{F.key==="Escape"?T():(F.key==="ArrowRight"||F.key==="d")&&n?n(1):(F.key==="ArrowLeft"||F.key==="a")&&n&&n(-1)};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[t,n]),c.useEffect(()=>{w(!1)},[j]),c.useEffect(()=>{r&&r(g*o*100)},[g,o,r]),c.useEffect(()=>{if(s==null)return;const N=h.current;if(!N){i&&i();return}const F=Math.max(.05,Math.min(8,s/100/Math.max(1e-6,g))),U=N.getBoundingClientRect(),D=U.width/2,ee=U.height/2;l(ue=>{const _=F/ue;return d(de=>D-_*(D-de)),m(de=>ee-_*(ee-de)),Number(F.toFixed(4))}),i&&i()},[s,g,i]),a.jsxs("div",{ref:h,role:"dialog","aria-modal":!0,"aria-label":"Image viewer",tabIndex:-1,className:`toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] flex items-start justify-start bg-panel z-viewer overflow-hidden transition-opacity duration-[110ms] ease-out cursor-grab focus:outline-none focus-visible:outline-none ${E?"cursor-grabbing select-none":""} ${L?"opacity-100":"opacity-0"}`,style:{outline:"none"},onClick:T,onWheel:S,onMouseDown:R,onKeyDown:N=>{N.key==="Tab"&&N.preventDefault()},children:[a.jsxs("button",{"aria-label":"Close",onClick:N=>{N.stopPropagation(),T()},className:"btn btn-sm absolute top-3 right-3 z-10",title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]}),k&&a.jsx("img",{src:k,alt:"thumb",className:"absolute top-0 left-0 max-w-none max-h-none object-contain pointer-events-none transition-opacity duration-[110ms] ease-out",draggable:!1,onDragStart:N=>N.preventDefault(),style:{transform:`translate(${u}px, ${f}px) scale(${g})`,transformOrigin:"0 0",opacity:C?0:.5,filter:"blur(0.25px)"}}),j&&a.jsx("img",{ref:p,src:j,alt:"viewer",className:"max-w-none max-h-none object-contain transition-opacity duration-[110ms] ease-out will-change-transform select-none",draggable:!1,onDragStart:N=>{N.preventDefault()},onLoad:N=>{v(),l(1);try{requestAnimationFrame(()=>w(!0))}catch{w(!0)}},onClick:N=>N.stopPropagation(),style:{transform:`translate(${u}px, ${f}px) scale(${g*o})`,transformOrigin:"0 0",opacity:C?.99:0,WebkitUserDrag:"none"}})]})}function Cf(e){return!e||!(e instanceof HTMLElement)?!1:e.closest('input, textarea, [contenteditable="true"]')!==null}const AS=1.2,$S=.05,US=8;function BS(){const[e,t]=c.useState(1),[n,r]=c.useState(0),[s,i]=c.useState(0),[o,l]=c.useState(0),[u,d]=c.useState(0),[f,m]=c.useState(1),[g,C]=c.useState(1),[w,E]=c.useState(!1),L=c.useRef(null),y=c.useRef(null),h=c.useRef(null),p=c.useCallback(()=>{const j=L.current;if(!j)return;const k=j.getBoundingClientRect(),T=(N,F,U,D)=>{if(!N||!N.naturalWidth||!N.naturalHeight)return;const ee=k.width/N.naturalWidth,ue=k.height/N.naturalHeight,_=Math.min(1,Math.min(ee,ue)),de=N.naturalWidth*_,z=N.naturalHeight*_;F(_),U((k.width-de)/2),D((k.height-z)/2)};T(y.current,m,r,i),T(h.current,C,l,d)},[]);c.useEffect(()=>{const j=L.current;if(!j)return;const k=new ResizeObserver(()=>{try{requestAnimationFrame(()=>p())}catch{p()}});return k.observe(j),()=>k.disconnect()},[p]);const v=c.useCallback(()=>{t(1),p()},[p]),S=c.useCallback(j=>{j.preventDefault();const k=j.deltaY>0?-1:1,T=L.current;if(!T)return;const N=T.getBoundingClientRect(),F=j.clientX-N.left,U=j.clientY-N.top;t(D=>{const ee=Math.min(US,Math.max($S,D*Math.pow(AS,k))),ue=ee/D;return r(_=>F-ue*(F-_)),i(_=>U-ue*(U-_)),l(_=>F-ue*(F-_)),d(_=>U-ue*(U-_)),Number(ee.toFixed(4))})},[]),R=c.useCallback(j=>{if(j.button!==0||!L.current)return;j.preventDefault(),E(!0);const T=j.clientX,N=j.clientY,F=n,U=s,D=o,ee=u,ue=de=>{const z=de.clientX-T,H=de.clientY-N;r(F+z),i(U+H),l(D+z),d(ee+H)},_=()=>{window.removeEventListener("pointermove",ue),window.removeEventListener("pointerup",_),E(!1)};window.addEventListener("pointermove",ue),window.addEventListener("pointerup",_)},[n,s,o,u]);return{scale:e,baseA:f,baseB:g,txA:n,tyA:s,txB:o,tyB:u,dragging:w,containerRef:L,imgARef:y,imgBRef:h,fitAndCenter:p,resetView:v,handleWheel:S,handlePointerDown:R}}function WS({aItem:e,bItem:t,index:n,total:r,canPrev:s,canNext:i,onNavigate:o,onClose:l}){const u=c.useRef(null),[d,f]=c.useState(50),[m,g]=c.useState(!1),[C,w]=c.useState(!1),{scale:E,baseA:L,baseB:y,txA:h,tyA:p,txB:v,tyB:S,dragging:R,containerRef:j,imgARef:k,imgBRef:T,fitAndCenter:N,resetView:F,handleWheel:U,handlePointerDown:D}=BS(),ee=(e==null?void 0:e.path)??null,ue=(t==null?void 0:t.path)??null,_=(e==null?void 0:e.name)??ee??"Select an image",de=(t==null?void 0:t.name)??ue??"Select another image";c.useEffect(()=>{requestAnimationFrame(()=>{var K;return(K=u.current)==null?void 0:K.focus()})},[ee,ue]),c.useEffect(()=>{F(),g(!1),w(!1)},[ee,ue,F]),c.useEffect(()=>{const K=ne=>{if(!Cf(ne.target)){if(ne.key==="Escape"){ne.preventDefault(),l();return}if((ne.key==="ArrowRight"||ne.key==="d")&&i){ne.preventDefault(),o(1);return}(ne.key==="ArrowLeft"||ne.key==="a")&&s&&(ne.preventDefault(),o(-1))}};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[l,o,s,i]);const z=ss(ee?()=>ve.getFile(ee):null,[ee]),H=ss(ue?()=>ve.getFile(ue):null,[ue]),J=ss(ee?()=>ve.getThumb(ee):null,[ee]),ae=ss(ue?()=>ve.getThumb(ue):null,[ue]),ce=c.useCallback(K=>Math.min(95,Math.max(5,K)),[]),Le=c.useCallback(K=>{const ne=K.target;ne!=null&&ne.closest(".compare-label")||ne!=null&&ne.closest(".compare-divider-hit")||D(K)},[D]),Q=c.useCallback(K=>{const ne=j.current;if(!ne)return;K.preventDefault(),K.stopPropagation();const fe=ne.getBoundingClientRect(),Me=K.currentTarget;Me.setPointerCapture(K.pointerId);const $e=at=>{const tt=(at.clientX-fe.left)/fe.width*100;f(ce(tt))},He=at=>{Me.releasePointerCapture(at.pointerId),window.removeEventListener("pointermove",$e),window.removeEventListener("pointerup",He)};window.addEventListener("pointermove",$e),window.addEventListener("pointerup",He)},[ce]);return a.jsxs("div",{ref:u,role:"dialog","aria-modal":!0,"aria-label":"Compare images",tabIndex:-1,className:"toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] bg-panel z-viewer flex flex-col overflow-hidden focus:outline-none",onKeyDown:K=>{K.key==="Tab"&&K.preventDefault()},children:[a.jsxs("div",{className:"compare-header flex items-center gap-3 px-3 py-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Compare"}),a.jsx("div",{className:"text-xs text-muted",children:r>=2?`${n+1}-${Math.min(n+2,r)} of ${r}`:"Select 2 images"}),a.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(-1),disabled:!s,title:"Previous (Left Arrow or A)",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Prev"]}),a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(1),disabled:!i,title:"Next (Right Arrow or D)",children:["Next",a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"btn btn-sm",onClick:l,title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]})]})]}),a.jsx("div",{className:"flex-1 min-h-0 p-3 bg-panel",children:a.jsx("div",{ref:j,className:`compare-stage ${R?"is-dragging":""}`,onWheel:U,onPointerDown:Le,children:!e||!t?a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-sm text-muted",children:"Select 2 images to compare."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"compare-label left-3",children:[a.jsx("span",{className:"compare-label-tag",children:"A"}),a.jsx("span",{className:"truncate",title:e.path,children:_})]}),a.jsxs("div",{className:"compare-label right-3",children:[a.jsx("span",{className:"compare-label-tag",children:"B"}),a.jsx("span",{className:"truncate",title:t.path,children:de})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 ${100-d}% 0 0)`},children:[J&&a.jsx("img",{src:J,alt:"thumb A",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:K=>K.preventDefault(),style:{transform:`translate(${h}px, ${p}px) scale(${L})`,transformOrigin:"0 0",opacity:m?0:.5}}),z&&a.jsx("img",{ref:k,src:z,alt:"compare A",className:"compare-image",draggable:!1,onDragStart:K=>K.preventDefault(),onLoad:()=>{N();try{requestAnimationFrame(()=>g(!0))}catch{g(!0)}},style:{transform:`translate(${h}px, ${p}px) scale(${L*E})`,transformOrigin:"0 0",opacity:m?.99:0}})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 0 0 ${d}%)`},children:[ae&&a.jsx("img",{src:ae,alt:"thumb B",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:K=>K.preventDefault(),style:{transform:`translate(${v}px, ${S}px) scale(${y})`,transformOrigin:"0 0",opacity:C?0:.5}}),H&&a.jsx("img",{ref:T,src:H,alt:"compare B",className:"compare-image",draggable:!1,onDragStart:K=>K.preventDefault(),onLoad:()=>{N();try{requestAnimationFrame(()=>w(!0))}catch{w(!0)}},style:{transform:`translate(${v}px, ${S}px) scale(${y*E})`,transformOrigin:"0 0",opacity:C?.99:0}})]}),a.jsxs("div",{className:"compare-divider-hit",style:{left:`${d}%`},onPointerDown:Q,children:[a.jsx("div",{className:"compare-divider-line"}),a.jsx("div",{className:"compare-divider-handle"})]})]})})})]})}function Ga(){const[e,t]=c.useState(Y1());return c.useEffect(()=>q1(t),[]),e}const To=e=>["item",e],HS={v:1,tags:[],notes:"",version:1,updated_at:"",updated_by:"web"},yn=new Map,Ql=new Map,ud=new Map,bf=new Map;let Rm=0;const $n=new Map,eo=new Map,VS=12e3,cd=new Set,dd=new Set;let kf={state:"idle"},_o=null,fd=0;function Rl(e){kf=e;for(const t of cd)t(e)}function nr(){const e=$n.size>0,t=yn.size+Ql.size+fd;if(e){Rl({state:"error",message:"Conflict detected"});return}if(_o){Rl({state:"error",message:_o});return}if(t>0){Rl({state:"syncing"});return}Rl({state:"idle"})}function Ef(){let e=null;for(const t of ud.values())e=e==null?t:Math.min(e,t);for(const t of bf.values())e=e==null?t:Math.min(e,t);return e}function Na(){const e=Ef();for(const t of dd)t(e)}function ja(e){_o=e,nr()}function oy(){_o&&(_o=null,nr())}function Lm(e){fd=Math.max(0,fd+e),nr()}function QS(){Rm+=1;const e=Rm;return bf.set(e,Date.now()),Na(),e}function KS(e){e!=null&&bf.delete(e)&&Na()}function Xa(e){const t=eo.get(e);if(!t||!t.size)return;const n=$n.get(e)??null;for(const r of t)r(n)}function Tm(e){return $n.get(e)??null}function Ja(e){$n.delete(e)&&(Xa(e),nr())}function qS(e,t){$n.set(e,t),Xa(e),nr()}function YS(e,t){const n=eo.get(e)??new Set;return n.add(t),eo.set(e,n),t($n.get(e)??null),()=>{const r=eo.get(e);r&&(r.delete(t),r.size||eo.delete(e))}}function GS(e){const[t,n]=c.useState(()=>e?Tm(e):null);return c.useEffect(()=>{if(!e){n(null);return}return n(Tm(e)),YS(e,n)},[e]),t}function XS(e){return cd.add(e),e(kf),()=>{cd.delete(e)}}function JS(){const[e,t]=c.useState(kf);return c.useEffect(()=>XS(t),[]),e}function ZS(e){return dd.add(e),e(Ef()),()=>{dd.delete(e)}}function eC(){const[e,t]=c.useState(()=>Ef()),[n,r]=c.useState(()=>e==null?null:Date.now()-e);return c.useEffect(()=>ZS(t),[]),c.useEffect(()=>{if(e==null){r(null);return}r(Date.now()-e);const s=window.setInterval(()=>{r(Date.now()-e)},1e3);return()=>window.clearInterval(s)},[e]),n}function hd(e){const t={};return Object.prototype.hasOwnProperty.call(e,"star")&&(t.set_star=e.star??null),Object.prototype.hasOwnProperty.call(e,"notes")&&(t.set_notes=e.notes??""),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.set_tags=Array.isArray(e.tags)?e.tags:[]),t}function md(e){var t,n;return e.set_star!==void 0||e.set_notes!==void 0||e.set_tags!==void 0||(((t=e.add_tags)==null?void 0:t.length)??0)>0||(((n=e.remove_tags)==null?void 0:n.length)??0)>0}function Qi(e){const t=[],n=new Set;for(const r of e??[]){if(typeof r!="string")continue;const s=r.trim();!s||n.has(s)||(n.add(s),t.push(s))}return t}function tC(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}function nC(e,t){if(e.set_star!==void 0&&(t.star??null)!==e.set_star||e.set_notes!==void 0&&(t.notes??"")!==(e.set_notes??""))return!1;if(e.set_tags!==void 0){const r=Qi(e.set_tags),s=Qi(t.tags);return tC(r,s)}const n=Qi(t.tags);for(const r of Qi(e.add_tags))if(!n.includes(r))return!1;for(const r of Qi(e.remove_tags))if(n.includes(r))return!1;return!0}function ly(e,t,n){if(n instanceof jn&&n.status===409){const r=n.body;if(r!=null&&r.current)return qS(e,{path:e,current:r.current,pending:t,receivedAt:new Date().toISOString()}),!0}return!1}function rC(e,t){const n=$n.get(e);if(n){if(nC(n.pending,t)){Ja(e);return}$n.set(e,{...n,current:t}),Xa(e),nr()}}function sC(e){const t=Ga();return qa({queryKey:To(e),queryFn:()=>ve.getSidecar(e),enabled:!!e,staleTime:3e4,gcTime:5*6e4,retry:2,refetchInterval:t?VS:!1,refetchIntervalInBackground:t})}function iC(e){const t=Qr();return C1({mutationFn:async({patch:n,baseVersion:r,idempotencyKey:s})=>{const i=hd(n);if(!md(i))return t.getQueryData(To(e))??HS;const o={...i,base_version:r};try{return await ve.patchSidecar(e,o,{idempotencyKey:s??Lo("patch"),ifMatch:r})}catch(l){throw ly(e,i,l),l}},retry:(n,r)=>r instanceof jn&&r.status===409?!1:n<2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),4e3),onMutate:()=>(oy(),Lm(1),{inflightId:QS()}),onSuccess:n=>{Ja(e),t.setQueryData(To(e),n)},onError:n=>{n instanceof jn&&n.status===409||(n instanceof jn?ja(n.message):ja("Failed to save"))},onSettled:(n,r,s,i)=>{Lm(-1),KS(i==null?void 0:i.inflightId)}})}const oC=6;async function _m(e,t){if(!e.length)return;let n=0;const r=[],s=async()=>{for(;n<e.length;){const o=n++,l=e[o];try{await ay(l,t)}catch(u){r.push({path:l,error:u}),console.error(`[bulkUpdateSidecars] Failed for ${l}:`,u)}}},i=Array.from({length:Math.min(oC,e.length)},()=>s());if(await Promise.all(i),r.length===e.length)throw new Error(`All ${e.length} sidecar updates failed`)}async function ay(e,t){const n=yn.get(e)||{};yn.set(e,{...n,...t}),oy(),nr();const r=Ql.get(e);if(r)return r;ud.set(e,Date.now()),Na();const s=(async()=>{try{for(;yn.has(e);){const i=yn.get(e);if(!i)break;const o=hd(i);if(!md(o)){yn.get(e)===i&&yn.delete(e);continue}let l=1;try{l=(await ve.getSidecar(e)).version??1}catch{l=1}const u={...o,base_version:l};try{await ve.patchSidecar(e,u,{idempotencyKey:Lo("patch"),ifMatch:l}),Ja(e),yn.get(e)===i&&yn.delete(e)}catch(d){if(ly(e,o,d)){const m=yn.get(e);if(m&&m!==i){const g=hd(m);if(md(g)){const C=$n.get(e);C&&($n.set(e,{...C,pending:g}),Xa(e))}}yn.delete(e)}else d instanceof jn?ja(d.message):ja("Failed to save");throw d}}}finally{Ql.delete(e),ud.delete(e),Na(),nr()}})();return Ql.set(e,s),nr(),s}function Hu(e){const t=["B","KB","MB","GB","TB"];let n=0,r=e;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${r.toFixed(1)} ${t[n]}`}function Vu(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function lC(e,t=28){if(e.length<=t)return e;const n=Math.max(4,Math.floor((t-1)/2));return`${e.slice(0,n)}${e.slice(-n)}`}const aC=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});function uC(e){const t=e.trim();return!t||/[zZ]|[+-]\d{2}:?\d{2}$/.test(t)?t:`${t.includes("T")?t:t.replace(" ","T")}Z`}function uy(e){if(!e)return null;const t=Date.parse(uC(e));return Number.isFinite(t)?t:null}function cC(e,t=Date.now()){const n=Math.max(0,t-e),r=Math.max(1,Math.floor(n/1e3));if(r<60)return`${r} second${r===1?"":"s"} ago`;const s=Math.floor(r/60);if(s<60)return`${s} minute${s===1?"":"s"} ago`;const i=Math.floor(s/60);return`${i} hour${i===1?"":"s"} ago`}function dC(e){return aC.format(new Date(e))}function ai(e){if(Array.isArray(e))return e.map(ai);if(e&&typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,ai(n)]));if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")||t.startsWith('"')&&t.endsWith('"'))try{const r=JSON.parse(t);return ai(r)}catch{return e}}return e}function Ki(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function fC(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Pm(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}function hC(e){const t=/(\"(\\u[a-fA-F0-9]{4}|\\[^u]|[^\\"])*\"(?:\s*:)?|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\btrue\b|\bfalse\b|\bnull\b)/g;let n="",r=0;for(const s of e.matchAll(t)){const i=s.index??0,o=s[0];n+=Ki(e.slice(r,i));let l="var(--json-fallback)",u=null;if(o.startsWith('"')&&o.trimEnd().endsWith(":")){l="var(--json-key)";const d=o.trim().replace(/:\s*$/,"");try{u=JSON.parse(d)}catch{u=null}}else o.startsWith('"')?l="var(--json-string)":/true|false|null/.test(o)?l="var(--json-literal)":l="var(--json-number)";u?n+=`<span class="ui-json-key" data-json-key="${Ki(u)}" style="color:${l}">${Ki(o)}</span>`:n+=`<span style="color:${l}">${Ki(o)}</span>`,r=i+o.length}return n+=Ki(e.slice(r)),n}function Ma(e){return e==null?String(e):typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):Array.isArray(e)?`[${e.map(Ma).join(",")}]`:typeof e=="object"?`{${Object.entries(e).sort(([n],[r])=>n.localeCompare(r)).map(([n,r])=>`${n}:${Ma(r)}`).join(",")}}`:String(e)}function Ll(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);try{return JSON.stringify(e,null,1)}catch{return String(e)}}function mC(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function cy(e){return e==="pil_info"||e.startsWith("pil_info.")||e.startsWith("pil_info[")}function Im(e,t){if(typeof t=="number")return e?`${e}[${t}]`:`[${t}]`;const n=/^[A-Za-z0-9_$-]+$/.test(t);return e?n?`${e}.${t}`:`${e}["${t}"]`:n?t:`["${t}"]`}function Ra(e,t,n,r,s){if(s.skipPilInfo&&cy(t))return;const i=t||"(root)";if(r>=s.maxDepth){n.set(i,e);return}if(Array.isArray(e)){if(!e.length){n.set(i,[]);return}if(e.length>s.maxArray){n.set(i,e);return}e.forEach((o,l)=>Ra(o,Im(t,l),n,r+1,s));return}if(mC(e)){const o=Object.keys(e).sort((l,u)=>l.localeCompare(u));if(!o.length){n.set(t||"(root)",{});return}for(const l of o)s.skipPilInfo&&!t&&l==="pil_info"||Ra(e[l],Im(t,l),n,r+1,s);return}n.set(i,e)}const pC=["overview","compare","basics","metadata","notes"],Fm="lenslet.inspector.sections",Om="lenslet.inspector.metricsExpanded",Qu=12,Dm=120,gC=8,vC=80,yC={overview:!0,compare:!0,metadata:!0,basics:!0,notes:!0};function qi({title:e,open:t,onToggle:n,actions:r,children:s,contentClassName:i}){const[o,l]=c.useState(t),[u,d]=c.useState(t?"open":"closed");return c.useEffect(()=>{if(t){l(!0);const m=window.requestAnimationFrame(()=>d("open"));return()=>window.cancelAnimationFrame(m)}d("closing");const f=window.setTimeout(()=>{l(!1),d("closed")},140);return()=>window.clearTimeout(f)},[t]),a.jsxs("div",{className:"border-b border-border/60",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[a.jsxs("button",{type:"button",onClick:n,"aria-expanded":t,className:"flex items-center gap-2 inspector-section-title hover:text-text transition-colors",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform ${t?"rotate-90":""}`,"aria-hidden":"true",children:a.jsx("path",{d:"m9 18 6-6-6-6"})}),a.jsx("span",{children:e})]}),r]}),o&&a.jsx("div",{className:"inspector-section-body","data-state":u,"aria-hidden":!t,children:a.jsx("div",{className:i??"px-3 pb-3",children:s})})]})}function xC({path:e,selectedPaths:t=[],items:n=[],compareActive:r=!1,compareA:s=null,compareB:i=null,onResize:o,onStarChanged:l,sortSpec:u,onFindSimilar:d,embeddingsAvailable:f=!1,embeddingsLoading:m=!1,onLocalTypingChange:g}){const C=!!e,{data:w,isLoading:E}=sC(e??""),L=iC(e??""),y=Qr(),[h,p]=c.useState(yC),v=c.useCallback(I=>{p(oe=>({...oe,[I]:!oe[I]}))},[]),[S,R]=c.useState(!1),j=t.length>1,k=!!d&&f&&!j,T=d?f?j?"Select a single image to search.":null:m?"Loading embeddings...":"No embeddings detected.":null,[N,F]=c.useState(""),[U,D]=c.useState(""),[ee,ue]=c.useState(null),[_,de]=c.useState(null),[z,H]=c.useState("idle"),[J,ae]=c.useState(!1),[ce,Le]=c.useState(null),Q=c.useRef(null),[K,ne]=c.useState(!1),[fe,Me]=c.useState("idle"),[$e,He]=c.useState(null),[at,tt]=c.useState(null),[tn,nt]=c.useState(null),[Pt,nn]=c.useState(!1),It=c.useRef(0),[Ct,ut]=c.useState(null),[_e,A]=c.useState({}),se=c.useRef(!1),q=c.useCallback(I=>{se.current!==I&&(se.current=I,g==null||g(I))},[g]),Y=c.useMemo(()=>{const I=n.find(oe=>oe.path===e);return I&&I.star!==void 0?I.star:null},[n,e])??(w==null?void 0:w.star)??null,Z=GS(j?null:e),ie={tags:!!(Z!=null&&Z.pending.set_tags),notes:(Z==null?void 0:Z.pending.set_notes)!==void 0,star:(Z==null?void 0:Z.pending.set_star)!==void 0},we=c.useMemo(()=>{const I=new Set(t);return n.filter(oe=>I.has(oe.path))},[n,t]),ke=c.useMemo(()=>we.reduce((I,oe)=>I+(oe.size||0),0),[we]);c.useEffect(()=>{w&&(F((w.tags||[]).join(", ")),D(w.notes||"")),ue(null),de(null),H("idle"),ae(!1),Le(null),Q.current&&(window.clearTimeout(Q.current),Q.current=null),ne(!1),q(!1)},[w==null?void 0:w.updated_at,q,e]),c.useEffect(()=>()=>{Q.current&&(window.clearTimeout(Q.current),Q.current=null),q(!1)},[q]);const Ee=c.useCallback(I=>{if(j&&t.length){_m(t,I);return}if(!e)return;const oe=(w==null?void 0:w.version)??1;L.mutate({patch:I,baseVersion:oe,idempotencyKey:Lo("patch")})},[j,t,e,w==null?void 0:w.version,L]),Re=c.useCallback(I=>{D(I),q(!0)},[q]),ct=c.useCallback(()=>{Ee({notes:U}),q(!1)},[Ee,U,q]),dt=c.useCallback(I=>{F(I),q(!0)},[q]),Ft=c.useCallback(()=>{Ee({tags:Pm(N)}),q(!1)},[Ee,q,N]),hn=c.useCallback(()=>{if(!Z||!e)return;const I={};Z.pending.set_tags!==void 0&&(I.tags=Pm(N)),Z.pending.set_notes!==void 0&&(I.notes=U),Z.pending.set_star!==void 0&&(I.star=Y??null);const oe=Z.current.version??1;L.mutate({patch:I,baseVersion:oe,idempotencyKey:Lo("patch")})},[Z,e,N,U,Y,L]),rt=c.useCallback(()=>{if(!Z||!e)return;const I=Z.current;F((I.tags||[]).join(", ")),D(I.notes||""),y.setQueryData(To(e),I),Ja(e),l==null||l([e],I.star??null)},[Z,e,y,l]);c.useEffect(()=>{if(!e)return;const I=oe=>{if(Cf(oe.target))return;const he=oe.key;if(!/^[0-5]$/.test(he))return;oe.preventDefault();const me=he==="0"?null:Number(he);if(j&&t.length){Ee({star:me}),l==null||l(t,me);return}Ee({star:me}),l==null||l([e],me)};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[e,j,t,Ee,l]);const st=ss(e?()=>ve.getThumb(e):null,[e]),Ot=e?e.split("/").pop()||e:"",Ns=c.useMemo(()=>{var oe;if(Ot.includes("."))return Ot.slice(Ot.lastIndexOf(".")+1).toUpperCase();const I=n.find(he=>he.path===e);return(oe=I==null?void 0:I.type)!=null&&oe.includes("/")?I.type.split("/")[1].toUpperCase():""},[Ot,n,e]),Ge=c.useMemo(()=>n.find(I=>I.path===e),[n,e]),Ht=c.useMemo(()=>e?(Ge==null?void 0:Ge.source)??e:"",[Ge,e]),Rn=(s==null?void 0:s.path)??null,mn=(i==null?void 0:i.path)??null,Pi=r&&!!Rn&&!!mn,Wo=(s==null?void 0:s.name)??Rn??"A",js=(i==null?void 0:i.name)??mn??"B",Ms=c.useCallback(async()=>{if(e){H("loading"),de(null);try{const I=await ve.getMetadata(e);ue(I.meta),H("loaded")}catch(I){const oe=I instanceof Error?I.message:"Failed to load metadata";ue(null),de(oe),H("error")}}},[e]),ur=c.useCallback(async(I,oe)=>{const he=It.current+1;It.current=he,Me("loading"),He(null);try{const[me,Ke]=await Promise.all([ve.getMetadata(I),ve.getMetadata(oe)]);if(It.current!==he)return;tt(me.meta),nt(Ke.meta),Me("loaded")}catch(me){if(It.current!==he)return;const Ke=me instanceof Error?me.message:"Failed to load metadata";tt(null),nt(null),He(Ke),Me("error")}},[]);c.useEffect(()=>{if(!Pi||!Rn||!mn){It.current+=1,Me("idle"),He(null),tt(null),nt(null);return}nn(!1),ur(Rn,mn)},[Pi,Rn,mn,ur]);const Rs=c.useMemo(()=>{if(!ee)return"";try{return JSON.stringify(ee,null,1)}catch{return""}},[ee]),Ls=c.useMemo(()=>{if(!ee)return"";const I=ai(ee);if(!K&&I&&typeof I=="object"&&!Array.isArray(I)&&"pil_info"in I){const oe={};for(const[he,me]of Object.entries(I))oe[he]=he==="pil_info"?"Hidden (toggle Show PIL info to expand)":me;return JSON.stringify(oe,null,1)}return JSON.stringify(I,null,1)},[ee,K]),Za=c.useCallback(()=>{var I;Rs&&((I=navigator.clipboard)==null||I.writeText(Rs).then(()=>{ae(!0),setTimeout(()=>ae(!1),1200)}).catch(oe=>{const he=oe instanceof Error?oe.message:"Copy failed";de(he)}))},[Rs]),Ho=c.useCallback(I=>{var oe;I&&((oe=navigator.clipboard)==null||oe.writeText(I).then(()=>{Le(I),Q.current&&window.clearTimeout(Q.current),Q.current=window.setTimeout(()=>{Le(null),Q.current=null},900)}).catch(()=>{}))},[]),Ts=c.useCallback(I=>{const oe=I.target;if(!oe)return;const he=oe.closest("[data-json-key]");if(!he)return;const me=he.getAttribute("data-json-key");me&&(I.preventDefault(),Ho(me))},[Ho]),Vo=c.useMemo(()=>Ls?hC(Ls):"",[Ls]);let Qo=Ls||"PNG metadata not loaded yet.";z==="loading"?Qo="Loading metadata":z==="error"&&_&&(Qo=_);const eu=z==="loading",Fe=z==="loaded"&&!!Rs,Ko=Fe?"h-48":"h-24";let Kr="Load meta";eu?Kr="Loading":Fe&&(Kr=J?"Copied":"Copy");const Ii=Fe?Za:Ms,cr=!!ee&&typeof ee=="object"&&!Array.isArray(ee)&&"pil_info"in ee,Vt=j?null:a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[Fe&&cr&&a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors",onClick:()=>ne(I=>!I),disabled:!Fe,children:K?"Hide PIL info":"Show PIL info"}),a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[78px]",onClick:Ii,disabled:!e||eu,children:Kr})]}),Un=c.useCallback(()=>{!Rn||!mn||ur(Rn,mn)},[Rn,mn,ur]),pn=c.useMemo(()=>{if(!at||!tn)return null;const I=ai(at),oe=ai(tn),he=new Map,me=new Map,Ke={maxDepth:gC,maxArray:vC,skipPilInfo:!Pt};Ra(I,"",he,0,Ke),Ra(oe,"",me,0,Ke);const dr=new Set([...he.keys(),...me.keys()]),qe=[];let Yr=0,bt=0,ye=0;const Qt=Array.from(dr).sort((kt,_s)=>kt.localeCompare(_s)),fr=!Pt;for(const kt of Qt){if(fr&&cy(kt))continue;const _s=he.has(kt),qo=me.has(kt);if(!_s&&qo){bt+=1,qe.push({key:kt,kind:"onlyB",aText:"",bText:Ll(me.get(kt))});continue}if(_s&&!qo){Yr+=1,qe.push({key:kt,kind:"onlyA",aText:Ll(he.get(kt)),bText:""});continue}const Ps=he.get(kt),Is=me.get(kt),nu=Ma(Ps),Yo=Ma(Is);nu!==Yo&&(ye+=1,qe.push({key:kt,kind:"different",aText:Ll(Ps),bText:Ll(Is)}))}const Kt=Math.max(0,qe.length-Dm);return{entries:Kt?qe.slice(0,Dm):qe,onlyA:Yr,onlyB:bt,different:ye,truncatedCount:Kt}},[at,tn,Pt]);c.useEffect(()=>{try{const I=localStorage.getItem(Fm);if(!I)return;const oe=JSON.parse(I);if(!oe||typeof oe!="object")return;const he={};for(const me of pC)typeof oe[me]=="boolean"&&(he[me]=oe[me]);Object.keys(he).length>0&&p(me=>({...me,...he}))}catch{}},[]),c.useEffect(()=>{try{localStorage.setItem(Fm,JSON.stringify(h))}catch{}},[h]),c.useEffect(()=>{try{const I=localStorage.getItem(Om);I==="1"||I==="true"?R(!0):(I==="0"||I==="false")&&R(!1)}catch{}},[]),c.useEffect(()=>{try{localStorage.setItem(Om,S?"1":"0")}catch{}},[S]);const qr=c.useCallback((I,oe)=>{var he;oe&&((he=navigator.clipboard)==null||he.writeText(oe).then(()=>{ut(I),setTimeout(()=>ut(me=>me===I?null:me),1e3)}).catch(()=>{}))},[]),Bn=c.useCallback((I,oe)=>{if(oe&&!_e[I]){const he=oe.offsetHeight;he&&A(me=>me[I]?me:{...me,[I]:he})}},[_e]),Wn="toolbar-offset absolute bottom-0 left-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20";return C?a.jsxs("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:[!j&&a.jsx("div",{className:"p-3 border-b border-border flex justify-center",children:a.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border w-[220px] h-[160px] bg-panel select-none",children:[st&&a.jsx("img",{src:st,alt:"thumb",className:"block w-full h-full object-contain"}),!!Ns&&a.jsx("div",{className:"absolute top-1.5 left-1.5 bg-surface border border-border text-text text-xs px-1.5 py-0.5 rounded-md select-none",children:Ns})]})}),a.jsxs(qi,{title:j?"Selection":"Item",open:h.overview,onToggle:()=>v("overview"),contentClassName:"px-3 pb-3 space-y-2",actions:d&&a.jsx("button",{type:"button",className:"btn btn-sm",onClick:d,disabled:!k,title:T??"Find similar",children:"Find similar"}),children:[j?a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Selected"}),a.jsxs("div",{className:"inspector-field-value",children:[t.length," files"]})]}),a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Total size"}),a.jsx("div",{className:"inspector-field-value",children:Hu(ke)})]})]}):a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Filename"}),a.jsx("div",{className:"inspector-field-value break-all",title:Ot,children:Ot})]}),T&&a.jsx("div",{className:"text-[11px] text-muted",children:T})]}),r&&Pi&&a.jsx(qi,{title:"Compare Metadata",open:h.compare,onToggle:()=>v("compare"),actions:a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors",onClick:Un,disabled:fe==="loading",children:fe==="loading"?"Loading":"Reload"}),a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors",onClick:()=>nn(I=>!I),disabled:fe!=="loaded",children:Pt?"Hide PIL info":"Include PIL info"})]}),children:a.jsxs("div",{className:"space-y-2 text-[11px]",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px] text-muted",children:[a.jsxs("div",{children:[a.jsx("div",{className:"uppercase tracking-wide text-[10px]",children:"A"}),a.jsx("div",{className:"text-text break-all",title:Wo,children:Wo})]}),a.jsxs("div",{children:[a.jsx("div",{className:"uppercase tracking-wide text-[10px]",children:"B"}),a.jsx("div",{className:"text-text break-all",title:js,children:js})]})]}),fe==="loading"&&a.jsx("div",{className:"text-muted",children:"Loading metadata"}),fe==="error"&&$e&&a.jsx("div",{className:"text-danger break-words",children:$e}),fe==="loaded"&&pn&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-muted",children:[a.jsxs("span",{children:[pn.different," different  ",pn.onlyA," only A  ",pn.onlyB," only B"]}),a.jsx("span",{className:"text-[10px] uppercase tracking-wide",children:"Deep paths"})]}),pn.entries.length===0?a.jsx("div",{className:"text-muted",children:"No differences found."}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-[minmax(80px,_1fr)_minmax(0,_1fr)_minmax(0,_1fr)] gap-2 text-[10px] uppercase tracking-wide text-muted",children:[a.jsx("div",{children:"Path"}),a.jsx("div",{children:"A"}),a.jsx("div",{children:"B"})]}),pn.entries.map(I=>a.jsxs("div",{className:"grid grid-cols-[minmax(80px,_1fr)_minmax(0,_1fr)_minmax(0,_1fr)] gap-2",children:[a.jsx("div",{className:"text-[11px] text-muted font-mono break-all",children:I.key}),a.jsx("div",{className:"text-[11px] font-mono bg-surface-inset border border-border/60 rounded px-2 py-1 whitespace-pre-wrap break-words max-h-32 overflow-auto",children:I.aText}),a.jsx("div",{className:"text-[11px] font-mono bg-surface-inset border border-border/60 rounded px-2 py-1 whitespace-pre-wrap break-words max-h-32 overflow-auto",children:I.bText})]},I.key)),pn.truncatedCount>0&&a.jsxs("div",{className:"text-muted text-[11px]",children:["+",pn.truncatedCount," more differences not shown."]})]})]})]})}),a.jsxs(qi,{title:"Basics",open:h.basics,onToggle:()=>v("basics"),children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",role:"radiogroup","aria-label":"Star rating",children:[a.jsx("span",{className:"ui-kv-label w-16 shrink-0",children:j?"Rating (all)":"Rating"}),a.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(I=>{const oe=(Y??0)>=I;return a.jsx("button",{className:`w-6 h-6 flex items-center justify-center rounded-lg border border-border/60 bg-transparent text-[13px] ${oe?"text-star-active":"text-star-inactive"} hover:border-border hover:text-star-hover transition-colors`,onClick:()=>{const he=Y===I&&!j?null:I;j&&t.length?(l==null||l(t,he),_m(t,{star:he})):e&&(l==null||l([e],he),ay(e,{star:he}))},title:`${I} star${I>1?"s":""} (key ${I})`,"aria-label":`${I} star${I>1?"s":""}`,"aria-pressed":Y===I,children:oe?"":""},I)})})]}),!j&&Z&&ie.star&&a.jsxs("div",{className:"ui-banner ui-banner-danger mt-2 text-[11px] flex items-center justify-between gap-2",children:[a.jsx("span",{children:"Rating conflict."}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:hn,children:"Apply again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:rt,children:"Keep theirs"})]})]}),!j&&Ge&&a.jsxs("div",{className:"text-[12px] space-y-1.5 leading-relaxed",children:[a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>qr("dimensions",`${Ge.w}${Ge.h}`),children:"Dimensions"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:I=>Bn("dimensions",I),style:_e.dimensions?{minHeight:_e.dimensions}:void 0,children:Ct==="dimensions"?"Copied":`${Ge.w}${Ge.h}`})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>qr("size",Hu(Ge.size)),children:"Size"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:I=>Bn("size",I),style:_e.size?{minHeight:_e.size}:void 0,children:Ct==="size"?"Copied":Hu(Ge.size)})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>qr("type",Ge.type),children:"Type"}),a.jsx("span",{className:"ui-kv-value break-all text-right inline-block min-w-[80px]",ref:I=>Bn("type",I),style:_e.type?{minHeight:_e.type}:void 0,children:Ct==="type"?"Copied":Ge.type})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Ht&&qr("source",Ht),children:"Source"}),a.jsx("span",{className:"ui-kv-value inspector-value-clamp break-words text-right max-w-[70%] inline-block min-w-[80px]",ref:I=>Bn("source",I),style:_e.source?{minHeight:_e.source}:void 0,title:Ht,children:Ct==="source"?"Copied":Ht})]}),(()=>{const I=Ge.metrics||null;if(!I)return null;const oe=Object.entries(I).filter(([,ye])=>ye!=null);if(!oe.length)return null;const he=(u==null?void 0:u.kind)==="metric"?u.key:null,me=[...oe].sort(([ye],[Qt])=>ye.localeCompare(Qt));let Ke=me;if(he){const ye=me.findIndex(([Qt])=>Qt===he);ye>0&&(Ke=[me[ye],...me.slice(0,ye),...me.slice(ye+1)])}const dr=Ke.length>Qu,Yr=S||!dr?Ke:Ke.slice(0,Qu),bt=Ke.length-Qu;return a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"ui-subsection-title mb-1",children:"Metrics"}),a.jsxs("div",{className:"space-y-1",children:[Yr.map(([ye,Qt])=>{const fr=he===ye;return a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:`w-24 shrink-0 ${fr?"text-accent font-medium":"ui-kv-label"}`,children:ye}),a.jsx("span",{className:`ui-kv-value text-right ${fr?"text-accent font-medium":""}`,children:fC(Qt)})]},ye)}),dr&&a.jsx("button",{type:"button",className:"text-[11px] text-muted underline underline-offset-2 hover:text-text",onClick:()=>R(ye=>!ye),"aria-expanded":S,children:S?"Show less":`+${bt} more`})]})]})})()]})]}),!j&&a.jsxs(qi,{title:"Metadata",open:h.metadata,onToggle:()=>v("metadata"),actions:Vt,children:[a.jsxs("div",{className:"relative",children:[ce&&a.jsxs("div",{className:"ui-json-key-toast",children:["Copied key: ",ce]}),a.jsx("pre",{className:`ui-code-block ui-code-block-resizable ${Ko} overflow-auto whitespace-pre-wrap`,onClick:Ts,children:Fe?a.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:Vo}}):Qo})]}),_&&a.jsx("div",{className:"text-[11px] text-danger mt-1 break-words",children:_})]}),a.jsxs(qi,{title:"Notes & Tags",open:h.notes,onToggle:()=>v("notes"),contentClassName:"px-3 pb-3 space-y-2",children:[!j&&Z&&(ie.tags||ie.notes)&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Conflicting edits detected."}),a.jsx("div",{className:"text-[11px] text-muted mt-0.5",children:"Your changes were not saved because this item was updated elsewhere."}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:hn,children:"Apply my changes again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:rt,children:"Keep theirs"})]})]}),a.jsx("textarea",{className:"ui-textarea inspector-input w-full scrollbar-thin",placeholder:"Add notes",value:U,onChange:I=>Re(I.target.value),onBlur:ct,"aria-label":j?"Notes for selected items":"Notes"}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:j?"Tags (apply to all, comma-separated)":"Tags (comma-separated)"}),a.jsx("input",{className:"ui-input inspector-input w-full",placeholder:"tag1, tag2",value:N,onChange:I=>dt(I.target.value),onBlur:Ft,"aria-label":j?"Tags for selected items":"Tags"})]})]}),a.jsx("div",{className:Wn,onMouseDown:o})]}):a.jsx("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:a.jsx("div",{className:Wn,onMouseDown:o})})}function wC({open:e,embeddings:t,rejected:n=[],selectedPath:r,embeddingsLoading:s=!1,embeddingsError:i,onClose:o,onSearch:l}){const[u,d]=c.useState(""),[f,m]=c.useState("path"),[g,C]=c.useState(""),[w,E]=c.useState(""),[L,y]=c.useState("50"),[h,p]=c.useState(""),[v,S]=c.useState(null),[R,j]=c.useState(!1),k=c.useRef(null),T=c.useRef(null),N=c.useMemo(()=>t.find(_=>_.name===u)??t[0]??null,[t,u]);c.useEffect(()=>{e&&(S(null),t.length>0&&!t.some(_=>_.name===u)&&d(t[0].name),r?(m("path"),C(r)):(m("vector"),C("")))},[e,t,u,r]),c.useEffect(()=>{if(!e)return;const _=f==="vector"?T.current:k.current,de=window.requestAnimationFrame(()=>_==null?void 0:_.focus());return()=>window.cancelAnimationFrame(de)},[e,f]);const F=c.useCallback(async()=>{if(S(null),!t.length){S("No embeddings available for similarity search.");return}if(!N){S("Select an embedding to search.");return}const _=g.trim(),de=w.trim(),z=Number(L);if(!Number.isFinite(z)||z<=0){S("Top K must be a positive number.");return}const H=Math.min(1e3,Math.max(1,Math.floor(z))),J=h.trim()===""?null:Number(h);if(J!=null&&!Number.isFinite(J)){S("Min score must be a valid number.");return}if(f==="path"&&!_){S("Select an image path for the query.");return}if(f==="vector"&&!de){S("Paste a base64 vector for the query.");return}const ae={embedding:N.name,query_path:f==="path"?_:null,query_vector_b64:f==="vector"?de:null,top_k:H,min_score:J};j(!0);try{await l(ae),o()}catch(ce){ce instanceof jn||ce instanceof Error?S(ce.message):S("Failed to run similarity search.")}finally{j(!1)}},[t.length,N,g,w,L,h,f,l,o]);c.useEffect(()=>{if(!e)return;const _=de=>{if(de.key==="Escape"){de.preventDefault(),o();return}(de.ctrlKey||de.metaKey)&&de.key==="Enter"&&(de.preventDefault(),F())};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[e,o,F]);const U=c.useCallback(()=>{var _;r&&(m("path"),C(r),(_=k.current)==null||_.focus())},[r]);if(!e)return null;const D=t.map(_=>({value:_.name,label:_.name})),ee=n.length>0,ue=n.slice(0,3);return a.jsx("div",{className:"fixed inset-0 z-[var(--z-overlay)] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",onClick:_=>{_.target===_.currentTarget&&o()},children:a.jsxs("div",{className:"w-full max-w-2xl rounded-lg border border-border bg-panel shadow-[0_20px_50px_rgba(0,0,0,0.55)]",onClick:_=>_.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Find similar",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-text",children:"Find similar"}),a.jsx("div",{className:"text-xs text-muted",children:"Search with embeddings"})]}),a.jsx("button",{className:"btn btn-sm",onClick:o,"aria-label":"Close",children:"Close"})]}),a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[i&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:i}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Embedding"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rd,{value:(N==null?void 0:N.name)??"",onChange:d,options:D,placeholder:s?"Loading embeddings...":"Select embedding",disabled:!t.length,triggerClassName:"min-w-[180px]"}),N&&a.jsxs("span",{className:"text-xs text-muted",children:[N.dimension," dims, ",N.metric,", ",N.dtype]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Query mode"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",className:`btn btn-sm ${f==="path"?"btn-active":""}`,onClick:()=>m("path"),"aria-pressed":f==="path",children:"Selected image"}),a.jsx("button",{type:"button",className:`btn btn-sm ${f==="vector"?"btn-active":""}`,onClick:()=>m("vector"),"aria-pressed":f==="vector",children:"Vector input"})]})]}),f==="path"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Image path"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:k,type:"text",className:"input w-full",value:g,onChange:_=>C(_.target.value),placeholder:r?"Selected image path":"Select an image first"}),a.jsx("button",{type:"button",className:"btn btn-sm",onClick:U,disabled:!r,title:r?"Use selected image":"Select an image first",children:"Use selected"})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Vector (base64 float32)"}),a.jsx("textarea",{ref:T,className:"ui-textarea w-full font-mono text-[11px]",rows:5,value:w,onChange:_=>E(_.target.value),placeholder:"Paste base64-encoded float32 vector"}),a.jsx("div",{className:"text-[11px] text-muted",children:"Base64 of little-endian float32. Length must match embedding dimension."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Top K"}),a.jsx("input",{type:"number",min:1,max:1e3,step:1,className:"input ui-number w-full",value:L,onChange:_=>y(_.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Min score"}),a.jsx("input",{type:"number",step:.01,className:"input ui-number w-full",value:h,onChange:_=>p(_.target.value),placeholder:"Optional"})]})]}),ee&&a.jsxs("div",{className:"ui-banner text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Skipped columns"}),a.jsxs("div",{className:"mt-1 space-y-1 text-muted",children:[ue.map(_=>a.jsxs("div",{children:[_.name,": ",_.reason]},_.name)),n.length>ue.length&&a.jsxs("div",{children:["+",n.length-ue.length," more"]})]})]}),v&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:v})]}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-border",children:[a.jsx("div",{className:"text-xs text-muted",children:N?`Metric: ${N.metric}`:"Metric: cosine"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:o,disabled:R,children:"Cancel"}),a.jsx("button",{className:"btn btn-sm btn-active",onClick:F,disabled:R||!t.length,children:R?"Searching...":"Find similar"})]})]})]})})}const dy=1,Kl=200,SC=5*6e4,CC=6e4,fy=(e,t)=>t!=null&&t.recursive?["folder",e,"recursive",t.page??dy,t.pageSize??Kl]:["folder",e];function hy(e){return e[0]!=="folder"||e[2]!=="recursive"||typeof e[1]!="string"||typeof e[3]!="number"||typeof e[4]!="number"?null:e}function bC(e){return hy(e)!==null}function kC(e,t,n=!0){if(!bC(e))return!0;const r=hy(e);if(r==null)return!1;const[,s,,i]=r;return i!==dy?!1:!!(s===t||n&&s==="/")}function EC(e,t,n=!0){return!Array.isArray(e)||e[0]!=="folder"?!1:!kC(e,t,n)}const NC=15e3;function jC(e,t){return ve.getFolder(e,t)}function pd(e,t=!1,n){const r=Ga(),s={recursive:t,page:n==null?void 0:n.page,pageSize:n==null?void 0:n.pageSize,legacyRecursive:n==null?void 0:n.legacyRecursive},i=!!s.recursive;return qa({queryKey:fy(e,s),queryFn:()=>jC(e,s),enabled:(n==null?void 0:n.enabled)??!0,staleTime:1e4,gcTime:i?CC:SC,retry:2,retryDelay:o=>Math.min(1e3*Math.pow(2,o),5e3),refetchOnWindowFocus:!1,refetchInterval:r?NC:!1,refetchIntervalInBackground:r})}const MC=(e,t)=>["search",e,t],RC=2e4;function LC(e,t){const n=Ga();return qa({enabled:!!e.trim(),queryKey:MC(e,t),queryFn:()=>ve.search(e,t),staleTime:3e3,gcTime:6e4,placeholderData:r=>r,retry:1,refetchInterval:n?RC:!1,refetchIntervalInBackground:n})}const TC=()=>["embeddings"];function _C(){return qa({queryKey:TC(),queryFn:ve.getEmbeddings,staleTime:6e4,gcTime:5*6e4,retry:1,refetchOnWindowFocus:!1})}const PC=/^[\/@a-zA-Z0-9._\-\/]{1,512}$/,IC=[".jpg",".jpeg",".png",".webp"];function An(e){try{const t=decodeURI(e||""),r=(t.startsWith("/")?t:`/${t}`).replace(/\/{2,}/g,"/"),s=r.length>1?r.replace(/\/$/,""):r;return PC.test(s)?s:"/"}catch{return"/"}}function zm(){return(window.location.hash||"").replace(/^#/,"")}function Am(e){const t=An(e),n=`#${encodeURI(t)}`;window.location.hash!==n&&(window.location.hash=n)}function Tl(e){const t=An(e),n=`#${encodeURI(t)}`;if(window.location.hash!==n){const r=`${window.location.pathname}${window.location.search}${n}`;window.history.replaceState(window.history.state,"",r)}}function FC(e){const n=An(e).toLowerCase();return IC.some(r=>n.endsWith(r))}function OC(e,t){const n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,""),s=[n,r].filter(Boolean).join("/");return s.startsWith("/")?s:`/${s}`}function $m(e){const n=An(e).split("/").filter(Boolean);return n.length<=1?"/":"/"+n.slice(0,-1).join("/")}function DC(e){return An(e).split("/").filter(Boolean).pop()||""}function zC(e){return e.endsWith("/_trash_")}const AC=new Set([0,1,2,3,4,5]),Nf=new Set(["<","<=",">",">="]),$C=/^\d{4}-\d{2}-\d{2}$/;function UC(e,t){return!t||!t.and.length?e:e.filter(n=>BC(n,t.and))}function BC(e,t){for(const n of t)if(!WC(e,n))return!1;return!0}function WC(e,t){var n,r,s,i,o,l,u;if("stars"in t){const d=t.stars;if(!d||!d.length)return!0;const f=e.star??0;return d.includes(f)}if("starsIn"in t){const d=t.starsIn.values;if(!d||!d.length)return!0;const f=e.star??0;return d.includes(f)}if("starsNotIn"in t){const d=t.starsNotIn.values;if(!d||!d.length)return!0;const f=e.star??0;return!d.includes(f)}if("nameContains"in t){const d=(n=t.nameContains.value)==null?void 0:n.trim();return d?(e.name??"").toLowerCase().includes(d.toLowerCase()):!0}if("nameNotContains"in t){const d=(r=t.nameNotContains.value)==null?void 0:r.trim();return d?!(e.name??"").toLowerCase().includes(d.toLowerCase()):!0}if("commentsContains"in t){const d=(s=t.commentsContains.value)==null?void 0:s.trim();if(!d)return!0;const f=e.comments??"";return f?f.toLowerCase().includes(d.toLowerCase()):!1}if("commentsNotContains"in t){const d=(i=t.commentsNotContains.value)==null?void 0:i.trim();if(!d)return!0;const f=e.comments??"";return f?!f.toLowerCase().includes(d.toLowerCase()):!1}if("urlContains"in t){const d=(o=t.urlContains.value)==null?void 0:o.trim();if(!d)return!0;const f=e.source??e.url??"";return f?f.toLowerCase().includes(d.toLowerCase()):!1}if("urlNotContains"in t){const d=(l=t.urlNotContains.value)==null?void 0:l.trim();if(!d)return!0;const f=e.source??e.url??"";return f?!f.toLowerCase().includes(d.toLowerCase()):!1}if("dateRange"in t){const{from:d,to:f}=t.dateRange;if(!d&&!f)return!0;if(!e.addedAt)return!1;const m=Date.parse(e.addedAt);if(Number.isNaN(m))return!1;const g=Wm(d,!1),C=Wm(f,!0);return!(g!=null&&m<g||C!=null&&m>C)}if("widthCompare"in t){const{op:d,value:f}=t.widthCompare;if(!Number.isFinite(f))return!0;const m=e.w;return!Number.isFinite(m)||m<=0?!1:Hm(m,d,f)}if("heightCompare"in t){const{op:d,value:f}=t.heightCompare;if(!Number.isFinite(f))return!0;const m=e.h;return!Number.isFinite(m)||m<=0?!1:Hm(m,d,f)}if("metricRange"in t){const{key:d,min:f,max:m}=t.metricRange,g=(u=e.metrics)==null?void 0:u[d];return!(g==null||g<f||g>m)}return!0}function gd(e){if(!e||typeof e!="object")return null;const t=e.and;if(!Array.isArray(t))return null;const n=[];for(const r of t){const s=sb(r);s&&n.push(s)}return{and:n}}function Um(e){var r;const t=e.and.find(s=>"stars"in s),n=e.and.find(s=>"starsIn"in s);return(r=n==null?void 0:n.starsIn)!=null&&r.values?n.starsIn.values:(t==null?void 0:t.stars)??[]}function Ku(e,t){return my(e,t)}function HC(e){var n;const t=e.and.find(r=>"starsIn"in r);return((n=t==null?void 0:t.starsIn)==null?void 0:n.values)??[]}function my(e,t){const n=co(t),r=e.and.filter(s=>!("starsIn"in s)&&!("stars"in s));return n.length?{and:[{starsIn:{values:n}},...r]}:{and:r}}function VC(e){var n;const t=e.and.find(r=>"starsNotIn"in r);return((n=t==null?void 0:t.starsNotIn)==null?void 0:n.values)??[]}function py(e,t){const n=co(t),r=e.and.filter(s=>!("starsNotIn"in s));return n.length?{and:[{starsNotIn:{values:n}},...r]}:{and:r}}function QC(e){var n;const t=e.and.find(r=>"nameContains"in r);return((n=t==null?void 0:t.nameContains)==null?void 0:n.value)??null}function gy(e,t){const n=an(t),r=e.and.filter(s=>!("nameContains"in s));return n?{and:[{nameContains:{value:n}},...r]}:{and:r}}function KC(e){var n;const t=e.and.find(r=>"nameNotContains"in r);return((n=t==null?void 0:t.nameNotContains)==null?void 0:n.value)??null}function vy(e,t){const n=an(t),r=e.and.filter(s=>!("nameNotContains"in s));return n?{and:[{nameNotContains:{value:n}},...r]}:{and:r}}function qC(e){var n;const t=e.and.find(r=>"commentsContains"in r);return((n=t==null?void 0:t.commentsContains)==null?void 0:n.value)??null}function yy(e,t){const n=an(t),r=e.and.filter(s=>!("commentsContains"in s));return n?{and:[{commentsContains:{value:n}},...r]}:{and:r}}function YC(e){var n;const t=e.and.find(r=>"commentsNotContains"in r);return((n=t==null?void 0:t.commentsNotContains)==null?void 0:n.value)??null}function xy(e,t){const n=an(t),r=e.and.filter(s=>!("commentsNotContains"in s));return n?{and:[{commentsNotContains:{value:n}},...r]}:{and:r}}function GC(e){var n;const t=e.and.find(r=>"urlContains"in r);return((n=t==null?void 0:t.urlContains)==null?void 0:n.value)??null}function wy(e,t){const n=an(t),r=e.and.filter(s=>!("urlContains"in s));return n?{and:[{urlContains:{value:n}},...r]}:{and:r}}function XC(e){var n;const t=e.and.find(r=>"urlNotContains"in r);return((n=t==null?void 0:t.urlNotContains)==null?void 0:n.value)??null}function Sy(e,t){const n=an(t),r=e.and.filter(s=>!("urlNotContains"in s));return n?{and:[{urlNotContains:{value:n}},...r]}:{and:r}}function JC(e){const t=e.and.find(n=>"dateRange"in n);return(t==null?void 0:t.dateRange)??null}function vd(e,t){const n=La((t==null?void 0:t.from)??null),r=La((t==null?void 0:t.to)??null),s=e.and.filter(i=>!("dateRange"in i));return!n&&!r?{and:s}:{and:[{dateRange:{...n?{from:n}:{},...r?{to:r}:{}}},...s]}}function ZC(e){const t=e.and.find(n=>"widthCompare"in n);return(t==null?void 0:t.widthCompare)??null}function ql(e,t){const n=e.and.filter(r=>!("widthCompare"in r));return!t||!Number.isFinite(t.value)||!Nf.has(t.op)?{and:n}:{and:[{widthCompare:{op:t.op,value:t.value}},...n]}}function eb(e){const t=e.and.find(n=>"heightCompare"in n);return(t==null?void 0:t.heightCompare)??null}function Yl(e,t){const n=e.and.filter(r=>!("heightCompare"in r));return!t||!Number.isFinite(t.value)||!Nf.has(t.op)?{and:n}:{and:[{heightCompare:{op:t.op,value:t.value}},...n]}}function tb(e,t){const n=e.and.find(r=>"metricRange"in r&&r.metricRange.key===t);return(n==null?void 0:n.metricRange)??null}function nb(e,t,n){const r=e.and.filter(s=>!("metricRange"in s&&s.metricRange.key===t));return n?{and:[{metricRange:{key:t,min:n.min,max:n.max}},...r]}:{and:r}}function rb(e){const t=gd(e);return t?t.and.length:0}function sb(e){var t,n,r,s,i,o,l,u;if(!e||typeof e!="object")return null;if("stars"in e){const d=co(e.stars);return d.length?{starsIn:{values:d}}:null}if("starsIn"in e){const d=co((t=e.starsIn)==null?void 0:t.values);return d.length?{starsIn:{values:d}}:null}if("starsNotIn"in e){const d=co((n=e.starsNotIn)==null?void 0:n.values);return d.length?{starsNotIn:{values:d}}:null}if("nameContains"in e){const d=an((r=e.nameContains)==null?void 0:r.value);return d?{nameContains:{value:d}}:null}if("nameNotContains"in e){const d=an((s=e.nameNotContains)==null?void 0:s.value);return d?{nameNotContains:{value:d}}:null}if("commentsContains"in e){const d=an((i=e.commentsContains)==null?void 0:i.value);return d?{commentsContains:{value:d}}:null}if("commentsNotContains"in e){const d=an((o=e.commentsNotContains)==null?void 0:o.value);return d?{commentsNotContains:{value:d}}:null}if("urlContains"in e){const d=an((l=e.urlContains)==null?void 0:l.value);return d?{urlContains:{value:d}}:null}if("urlNotContains"in e){const d=an((u=e.urlNotContains)==null?void 0:u.value);return d?{urlNotContains:{value:d}}:null}if("dateRange"in e){const d=e.dateRange,f=La((d==null?void 0:d.from)??null),m=La((d==null?void 0:d.to)??null);return!f&&!m?null:{dateRange:{...f?{from:f}:{},...m?{to:m}:{}}}}if("widthCompare"in e){const d=e.widthCompare,f=Bm(d==null?void 0:d.op,d==null?void 0:d.value);return f?{widthCompare:f}:null}if("heightCompare"in e){const d=e.heightCompare,f=Bm(d==null?void 0:d.op,d==null?void 0:d.value);return f?{heightCompare:f}:null}if("metricRange"in e){const d=e.metricRange;if(!d||typeof d!="object")return null;const f=typeof d.key=="string"?d.key:"",m=yd(d.min),g=yd(d.max);return!f||m==null||g==null||m>g?null:{metricRange:{key:f,min:m,max:g}}}return null}function co(e){if(!Array.isArray(e))return[];const t=[],n=new Set;for(const r of e){const s=typeof r=="number"?r:typeof r=="string"?Number(r):NaN;!Number.isInteger(s)||!AC.has(s)||n.has(s)||(n.add(s),t.push(s))}return t}function an(e){if(typeof e!="string")return null;const t=e.trim();return t||null}function La(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=Date.parse(t);return Number.isNaN(n)?null:t}function Bm(e,t){if(typeof e!="string"||!Nf.has(e))return null;const n=yd(t);return n==null?null:{op:e,value:n}}function Wm(e,t){if(!e)return null;const n=e.trim();if(!n)return null;const r=Date.parse(n);return Number.isNaN(r)?null:t&&$C.test(n)?r+24*60*60*1e3-1:r}function Hm(e,t,n){switch(t){case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;default:return!0}}function yd(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function Vm(e){return e.addedAt?Date.parse(e.addedAt):0}function Ta(e,t){return e.name.localeCompare(t.name)}function ib(e,t){const n=Vm(e),r=Vm(t);return n===r?Ta(e,t):n-r}function ob(e){return(t,n)=>{var i,o;const r=(i=t.metrics)==null?void 0:i[e],s=(o=n.metrics)==null?void 0:o[e];return r==null&&s==null?Ta(t,n):r==null?1:s==null?-1:r===s?Ta(t,n):r-s}}function Qm(e,t){return UC(e,t)}function lb(e){let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function ab(e,t){const n=lb(t||1),r=[...e];for(let s=r.length-1;s>0;s-=1){const i=Math.floor(n()*(s+1));[r[s],r[i]]=[r[i],r[s]]}return r}function ub(e,t,n){if(t.kind==="builtin"&&t.key==="random"){const i=n??Date.now();return ab(e,i)}let r=ib;t.kind==="metric"?r=ob(t.key):t.key==="name"&&(r=Ta);const s=[...e].sort(r);return t.dir==="desc"?s.reverse():s}const Km="leftW.folders",qm="leftW.metrics",cb="leftW",Ym="rightW";function db(e,t){const[n,r]=c.useState(240),[s,i]=c.useState(320),[o,l]=c.useState(240),u=t==="metrics"?s:n,d=c.useRef(u),f=c.useRef(o);return c.useEffect(()=>{d.current=u},[u]),c.useEffect(()=>{f.current=o},[o]),c.useEffect(()=>{try{const C=window.localStorage,w=Number(C.getItem(Km)??C.getItem(cb));Number.isFinite(w)&&w>0&&r(w);const E=Number(C.getItem(qm));Number.isFinite(E)&&E>0&&i(E);const L=Number(C.getItem(Ym));Number.isFinite(L)&&L>0&&l(L)}catch{}},[]),{leftW:u,rightW:o,onResizeLeft:C=>{C.preventDefault();const w=e.current;if(!w)return;const E=w.getBoundingClientRect(),L=t==="metrics"?qm:Km;let y=d.current;const h=v=>{const S=v.clientX-E.left,R=200,j=Math.max(R,E.width-f.current-200),k=Math.min(Math.max(S,R),j);y=k,t==="metrics"?i(k):r(k)},p=()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",p);try{window.localStorage.setItem(L,String(y))}catch{}};window.addEventListener("mousemove",h),window.addEventListener("mouseup",p)},onResizeRight:C=>{C.preventDefault();const w=e.current;if(!w)return;const E=w.getBoundingClientRect();let L=f.current;const y=p=>{const v=p.clientX-E.left,S=E.width-v,R=240,j=Math.max(R,E.width-d.current-200),k=Math.min(Math.max(S,R),j);L=k,f.current=k,l(k)},h=()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",h);try{window.localStorage.setItem(Ym,String(L))}catch{}};window.addEventListener("mousemove",y),window.addEventListener("mouseup",h)}}}function fb({x:e,y:t,items:n}){return a.jsx("div",{className:"dropdown-panel fixed",role:"menu",style:{left:e,top:t,minWidth:180},onClick:r=>r.stopPropagation(),children:n.map((r,s)=>a.jsxs("button",{className:`dropdown-item w-full ${r.danger?"text-danger hover:text-danger":""}`,role:"menuitem","aria-disabled":r.disabled,disabled:r.disabled,onClick:i=>{i.stopPropagation(),r.disabled||r.onClick()},children:[r.icon&&a.jsx("span",{className:"shrink-0",children:r.icon}),a.jsx("span",{children:r.label})]},s))})}function Gm(e){return JSON.stringify(e,null,2)}function Xm(e){const t=s=>'"'+s.replaceAll('"','""')+'"',n="path,folder,name,star,type,size,width,height,tags,notes",r=e.map(s=>{const i=(s.tags||[]).join(" "),o=s.notes||"";return[s.path,s.folder,s.name,String(s.star??""),s.type??"",s.size??"",s.width??"",s.height??"",i,o].map(l=>t(String(l))).join(",")});return[n,...r].join(`
`)}function Jm(e){return e.map(t=>{const n=t.path.split("/").filter(Boolean);n.pop();const r=n.length?`/${n.join("/")}`:"/";return{path:t.path,folder:r,name:t.name,star:t.star??null,type:t.type,size:t.size,width:t.w,height:t.h}})}function hb(e,t=250){const[n,r]=Xl.useState(e);return Xl.useEffect(()=>{const s=window.setTimeout(()=>r(e),Math.max(0,t));return()=>window.clearTimeout(s)},[e,t]),n}const Cy="application/x-lenslet-paths",mb='[role="treeitem"].drop-target';function Zm(e){var n;return Array.from(((n=e.dataTransfer)==null?void 0:n.types)||[]).includes(Cy)}function pb(e){document.querySelectorAll(mb).forEach(t=>{t!==e&&t.classList.remove("drop-target")})}function ep(e){pb(e),e.classList.add("drop-target")}function tp(e){return e.startsWith("/")?e:`/${e}`}function gb({path:e,isLeaf:t}){const n=Qr(),r=c.useCallback(l=>{Zm(l)&&(l.preventDefault(),t&&ep(l.currentTarget))},[t]),s=c.useCallback(l=>{!t||!Zm(l)||(l.preventDefault(),ep(l.currentTarget))},[t]),i=c.useCallback(l=>{const u=l.currentTarget,d=document.elementFromPoint(l.clientX,l.clientY);d&&u.contains(d)||u.classList.remove("drop-target")},[]),o=c.useCallback(async l=>{const u=l.dataTransfer;if(!u)return;l.preventDefault(),l.currentTarget.classList.remove("drop-target");const d=u.getData(Cy),m=(d?JSON.parse(d):[]).filter(Boolean);if(!m.length)return;let g=m[0].split("/").slice(0,-1).join("/")||"/";g=tp(g);const C=tp(e);try{for(const w of m)await ve.moveFile(w,C);n.invalidateQueries({queryKey:["folder",g]}),n.invalidateQueries({queryKey:["folder",C]}),n.setQueryData(["folder",g],w=>!w||!Array.isArray(w.items)?w:{...w,items:w.items.filter(E=>!m.includes(E.path))})}catch{}},[e,n]);return{onDragOver:r,onDragEnter:s,onDragLeave:i,onDrop:o}}const vb='[role="tree"] [role="treeitem"]';function yb(){return Array.from(document.querySelectorAll(vb))}function xb(e,t){var i;const n=yb(),r=n.findIndex(o=>o===e);if(r===-1)return;let s=r;t==="ArrowDown"?s=Math.min(n.length-1,r+1):t==="ArrowUp"?s=Math.max(0,r-1):t==="Home"?s=0:t==="End"&&(s=n.length-1),(i=n[s])==null||i.focus()}function wb({path:e,isLeaf:t,isExpanded:n,setExpanded:r,onOpen:s}){return c.useCallback(i=>{if(i.key==="Enter"){i.preventDefault(),s(e);return}if(i.key==="ArrowRight"){!t&&!n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.add(e),l}));return}if(i.key==="ArrowLeft"){!t&&n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.delete(e),l}));return}(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="Home"||i.key==="End")&&(i.preventDefault(),xb(i.currentTarget,i.key))},[e,t,n,r,s])}function Sb({current:e,roots:t,data:n,onOpen:r,onResize:s,onContextMenu:i,countVersion:o,className:l,showResizeHandle:u=!0}){const[d,f]=c.useState(new Set(["/"])),m=c.useRef(new Map),g=c.useRef(new Map),C=Qr(),w=c.useCallback(async L=>{const y=An(L||"/"),h=m.current,p=g.current,v=h.get(y);if(v!==void 0)return v;const S=C.getQueryData(fy(y,{recursive:!0}));if(S){const k=S.totalItems??S.items.length;return h.set(y,k),k}const R=p.get(y);if(R)return R;const j=(async()=>{try{const k=await ve.getFolder(y,{recursive:!0}),T=k.totalItems??k.items.length;return h.set(y,T),T}finally{p.delete(y)}})();return p.set(y,j),j},[C]);c.useEffect(()=>{m.current.clear(),g.current.clear()},[o]),c.useEffect(()=>{const L=e.split("/").filter(Boolean),y=["/"];let h="";for(const p of L)h=h?`${h}/${p}`:`/${p}`,y.push(h);f(p=>{const v=new Set(p);for(const S of y)v.add(S);return v})},[e]);const E=l??"h-full overflow-auto bg-panel scrollbar-thin";return a.jsxs("div",{className:E,children:[a.jsx("div",{className:"p-1",role:"tree","aria-label":"Folders",children:t.map(L=>a.jsx(by,{path:L.path,label:L.label,depth:0,current:e,expanded:d,setExpanded:f,onOpen:r,onContextMenu:i,initial:n,getSubtreeCount:w,countVersion:o},L.path))}),u&&a.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 left-[calc(var(--left)-3px)] hover:bg-accent/20",onMouseDown:s})]})}function by({path:e,label:t,depth:n,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,initial:u,getSubtreeCount:d,countVersion:f}){var N;const m=s.has(e),g=r===e,C=e==="/"||m||g,{data:w}=pd(e,!1,{enabled:C}),E=u&&e===u.path?u:w,y=!!E?E.dirs.length===0:!1,[h,p]=c.useState(E?E.items.length:null),v=wb({path:e,isLeaf:y,isExpanded:m,setExpanded:i,onOpen:o}),{onDragOver:S,onDragEnter:R,onDragLeave:j,onDrop:k}=gb({path:e,isLeaf:y}),T=F=>{F.stopPropagation(),i(U=>{const D=new Set(U);return D.has(e)?D.delete(e):D.add(e),D})};return c.useEffect(()=>{let F=!1;if(!E){p(null);return}if(p(E.items.length),!!(m&&(n>0||g)))return d(e).then(D=>{F||p(D)}).catch(D=>{F||console.warn(`Failed to compute subtree count for ${e}:`,D)}),()=>{F=!0}},[E,e,d,f,m,n,g]),a.jsxs("div",{children:[a.jsxs("div",{className:`flex items-center gap-1.5 py-0.5 px-2 rounded-md cursor-pointer min-h-[28px] outline-none transition-colors duration-75 ${g?"bg-accent/20 text-accent font-medium":"hover:bg-white/5 text-text"}`,role:"treeitem","aria-level":n+1,"aria-expanded":y?void 0:m,"aria-selected":g,tabIndex:g?0:-1,style:{paddingLeft:8+n*14},onClick:()=>o(e),onContextMenu:F=>{F.preventDefault(),F.stopPropagation(),l&&l(F,e)},onKeyDown:v,onDragOver:S,onDragEnter:R,onDragLeave:j,onDrop:k,children:[a.jsx("span",{className:"w-4 text-center opacity-60 hover:opacity-100 text-[10px]",onClick:T,children:m?"":""}),a.jsx("span",{className:"flex-1 overflow-hidden truncate text-sm",title:t,children:lC(t,28)}),h!==null&&a.jsx("span",{className:"text-[10px] opacity-50 bg-white/5 border border-white/5 rounded px-1.5 min-w-[24px] text-center",children:h})]}),m&&((N=E==null?void 0:E.dirs)==null?void 0:N.map(F=>a.jsx(by,{path:OC(e,F.name),label:F.name,depth:n+1,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,getSubtreeCount:d,countVersion:f},F.name)))]})}const is=40,Cb=12,np=[5,4,3,2,1],rp=["<","<=",">",">="];function bb({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l,onChangeFilters:u}){const d=r&&r.length?a.jsx(kb,{selectedItems:r,metricKeys:n}):null,f=a.jsx(Eb,{filters:o,onChangeFilters:u});return n.length?a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[d,a.jsx(Nb,{items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}),f]}):a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[d,f,a.jsx("div",{className:"p-4 text-sm text-muted",children:"No metrics found in this dataset."})]})}function kb({selectedItems:e,metricKeys:t}){const n=c.useMemo(()=>{if(!e.length)return null;const u=new Map;for(const m of e){const g=m.metrics;if(g)for(const[C,w]of Object.entries(g)){if(w==null||Number.isNaN(w))continue;const E=u.get(C);E?E.push(w):u.set(C,[w])}}return u.size?{entries:(t.length?t.filter(m=>u.has(m)):Array.from(u.keys()).sort()).map(m=>{const g=u.get(m)??[],C=Math.min(...g),w=Math.max(...g),E=g.reduce((L,y)=>L+y,0)/Math.max(1,g.length);return{key:m,value:g[0],min:C,max:w,avg:E,count:g.length}}),totalItems:e.length}:null},[e,t]);if(!n)return null;const{entries:r,totalItems:s}=n,i=r.slice(0,Cb),o=r.length-i.length,l=s>1;return a.jsxs("div",{className:"ui-card",children:[a.jsxs("div",{className:"ui-card-header",children:[a.jsx("div",{className:"ui-section-title",children:"Selected metrics"}),a.jsxs("div",{className:"text-[11px] text-muted",children:[s," item",s===1?"":"s"]})]}),a.jsxs("div",{className:"space-y-1 text-[12px]",children:[i.map(u=>a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-muted w-28 shrink-0 truncate",title:u.key,children:u.key}),a.jsxs("span",{className:"font-mono text-text text-right tabular-nums",children:[l?`${qt(u.min)}  ${qt(u.max)}`:qt(u.value),l&&a.jsxs("span",{className:"text-[11px] text-muted ml-2",children:["avg ",qt(u.avg),u.count!==s?`  ${u.count}/${s}`:""]})]})]},u.key)),o>0&&a.jsxs("div",{className:"text-[11px] text-muted",children:["+",o," more"]})]})]})}function Eb({filters:e,onChangeFilters:t}){const n=c.useMemo(()=>HC(e),[e]),r=c.useMemo(()=>VC(e),[e]),s=c.useMemo(()=>QC(e)??"",[e]),i=c.useMemo(()=>KC(e)??"",[e]),o=c.useMemo(()=>qC(e)??"",[e]),l=c.useMemo(()=>YC(e)??"",[e]),u=c.useMemo(()=>GC(e)??"",[e]),d=c.useMemo(()=>XC(e)??"",[e]),f=c.useMemo(()=>JC(e)??{},[e]),m=c.useMemo(()=>cp(f.from),[f.from]),g=c.useMemo(()=>cp(f.to),[f.to]),C=c.useMemo(()=>ZC(e),[e]),w=c.useMemo(()=>eb(e),[e]),[E,L]=c.useState((C==null?void 0:C.op)??">="),[y,h]=c.useState((w==null?void 0:w.op)??">=");c.useEffect(()=>{C!=null&&C.op&&L(C.op)},[C==null?void 0:C.op]),c.useEffect(()=>{w!=null&&w.op&&h(w.op)},[w==null?void 0:w.op]);const p=(v,S)=>{const R=new Set(n),j=new Set(r);v==="include"?R.has(S)?R.delete(S):(R.add(S),j.delete(S)):j.has(S)?j.delete(S):(j.add(S),R.delete(S));let k=my(e,Array.from(R));k=py(k,Array.from(j)),t(k)};return a.jsxs("div",{className:"ui-card",children:[a.jsx("div",{className:"ui-section-title mb-3",children:"Attributes"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Rating"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Include"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[np.map(v=>{const S=n.includes(v);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${S?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",v),"aria-pressed":S,title:`Include ${v} star${v>1?"s":""}`,children:[v,""]},`stars-in-${v}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${n.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",0),"aria-pressed":n.includes(0),title:"Include unrated",children:"None"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Exclude"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[np.map(v=>{const S=r.includes(v);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${S?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",v),"aria-pressed":S,title:`Exclude ${v} star${v>1?"s":""}`,children:[v,""]},`stars-out-${v}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${r.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",0),"aria-pressed":r.includes(0),title:"Exclude unrated",children:"None"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Filename"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:s,placeholder:"e.g. draft",onChange:v=>t(gy(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:i,placeholder:"e.g. v1",onChange:v=>t(vy(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Comments"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:o,placeholder:"e.g. hero",onChange:v=>t(yy(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:l,placeholder:"e.g. todo",onChange:v=>t(xy(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"URL"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:u,placeholder:"e.g. s3://bucket",onChange:v=>t(wy(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:d,placeholder:"e.g. http://",onChange:v=>t(Sy(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Date Added"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"From"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:m,onChange:v=>t(vd(e,{from:v.target.value||null,to:f.to??null}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"To"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:g,onChange:v=>t(vd(e,{from:f.from??null,to:v.target.value||null}))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Dimensions"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Width"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:E,onChange:v=>{const S=v.target.value;L(S),C&&t(ql(e,{op:S,value:C.value}))},children:rp.map(v=>a.jsx("option",{value:v,children:v},`w-${v}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:C?String(C.value):"",min:0,placeholder:"px",onChange:v=>{const S=v.target.value;if(!S){t(ql(e,null));return}const R=Number(S);Number.isFinite(R)&&t(ql(e,{op:E,value:R}))}})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Height"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:y,onChange:v=>{const S=v.target.value;h(S),w&&t(Yl(e,{op:S,value:w.value}))},children:rp.map(v=>a.jsx("option",{value:v,children:v},`h-${v}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:w?String(w.value):"",min:0,placeholder:"px",onChange:v=>{const S=v.target.value;if(!S){t(Yl(e,null));return}const R=Number(S);Number.isFinite(R)&&t(Yl(e,{op:y,value:R}))}})]})]})]})]})]})]})}function Nb({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}){const[u,d]=c.useState(!1),f=s&&n.includes(s)?s:n[0];return a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("label",{className:"ui-label",children:"Metric"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-[11px]",onClick:()=>d(m=>!m),"aria-pressed":u,children:u?"Show one":"Show all"})]}),u?a.jsx("div",{className:"ui-input ui-input-readonly w-full flex items-center text-xs",children:"All metrics"}):a.jsx("select",{className:"ui-select w-full",value:f,onChange:m=>i(m.target.value),children:n.map(m=>a.jsx("option",{value:m,children:m},m))})]}),u?a.jsx("div",{className:"space-y-3",children:n.map(m=>a.jsx(sp,{metricKey:m,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l,showTitle:!0},m))}):f?a.jsx(sp,{metricKey:f,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l}):a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]})}function sp({items:e,filteredItems:t,metricKey:n,selectedItems:r,filters:s,onChangeRange:i,showTitle:o=!1}){const l=c.useMemo(()=>ip(e,n),[e,n]),u=c.useMemo(()=>qu(l,is),[l]),d=c.useMemo(()=>ip(t,n),[t,n]),f=c.useMemo(()=>u?qu(d,is,u):null,[d,u]),m=tb(s,n),[g,C]=c.useState(null),[w,E]=c.useState(!1),L=c.useRef(null),y=c.useRef(null),h=c.useRef(!1),p=c.useRef(null),[v,S]=c.useState(null),[R,j]=c.useState(""),[k,T]=c.useState(""),[N,F]=c.useState(null),U=g??m,D=u?{min:u.min,max:u.max}:null,ee=c.useMemo(()=>{var K;if(!(r!=null&&r.length))return[];const Q=[];for(const ne of r){const fe=(K=ne.metrics)==null?void 0:K[n];fe==null||Number.isNaN(fe)||Q.push(fe)}return Q},[r,n]),ue=ee.length===1?ee[0]:null,_=c.useMemo(()=>!u||ee.length<2?null:qu(ee,is,u),[ee,u]);c.useEffect(()=>{if(!m||!D){N!=="min"&&j(m?pr(m.min):""),N!=="max"&&T(m?pr(m.max):"");return}if(N!=="min"){const Q=As(m.min,D.min)?"":pr(m.min);j(Q)}if(N!=="max"){const Q=As(m.max,D.max)?"":pr(m.max);T(Q)}},[m,D,N]),c.useEffect(()=>{S(null)},[n,D==null?void 0:D.min,D==null?void 0:D.max]);const de=Q=>{var fe;if(!D)return null;const K=(fe=p.current)==null?void 0:fe.getBoundingClientRect();if(!K)return null;const ne=jf((Q.clientX-K.left)/K.width);return D.min+(D.max-D.min)*ne},z=(Q,K)=>{if(!D)return;const ne=L.current??Q,fe=lp(ne,Q);C(fe),K&&i(n,fe)},H=Q=>{var ne;if(!D)return;Q.preventDefault();const K=de(Q);K!=null&&(E(!0),C(null),L.current=K,y.current=Q.clientX,h.current=!1,S(K),(ne=p.current)==null||ne.setPointerCapture(Q.pointerId))},J=Q=>{const K=de(Q);if(K==null){w||S(null);return}if(S(K),w){const ne=y.current;if(!h.current&&ne!=null){if(Math.abs(Q.clientX-ne)<4)return;h.current=!0}h.current&&z(K,!1)}},ae=Q=>{var ne;if(!w)return;E(!1),(ne=p.current)==null||ne.releasePointerCapture(Q.pointerId);const K=de(Q);h.current&&K!=null?(S(K),z(K,!0)):m&&i(n,null),L.current=null,y.current=null,h.current=!1,setTimeout(()=>C(null),0)},ce=(Q,K)=>{if(!D)return;const ne=ap(Q),fe=ap(K);if(!ne.valid||!fe.valid){ne.valid||j(m?pr(m.min):""),fe.valid||T(m?pr(m.max):"");return}if(ne.value==null&&fe.value==null){i(n,null);return}const Me=ne.value??D.min,$e=fe.value??D.max,He=up(Me,D.min,D.max),at=up($e,D.min,D.max),tt=lp(He,at);if(As(tt.min,D.min)&&As(tt.max,D.max)){i(n,null);return}i(n,tt)};if(!u||!D)return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]});const Le=ee.length;return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mb-2 tabular-nums",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{children:["Population: ",u.count]}),a.jsxs("span",{children:["Filtered: ",(f==null?void 0:f.count)??0]}),Le>1&&a.jsxs("span",{className:"text-text",children:["Selected: ",Le]})]}),ue!=null&&a.jsxs("span",{className:"text-text",children:["Selected: ",qt(ue)]})]}),a.jsxs("svg",{ref:p,viewBox:`0 0 ${is} 100`,preserveAspectRatio:"none",className:"w-full h-28 cursor-crosshair rounded-md bg-surface-inset",onPointerDown:H,onPointerMove:J,onPointerUp:ae,onPointerLeave:()=>S(null),children:[Yu(u.bins,"#2e3a4b"),f&&Yu(f.bins,"#3a8fff"),_&&Yu(_.bins,"#f59e0b",{opacity:.55}),U&&jb(U,D),ue!=null&&op(ue,D,{color:"var(--highlight)",strokeWidth:.7}),v!=null&&op(v,D,{color:"rgba(255,255,255,0.75)",strokeWidth:.5,dashed:!0})]}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mt-2 tabular-nums",children:[a.jsx("span",{children:qt(D==null?void 0:D.min)}),a.jsxs("div",{className:"flex flex-col items-center text-center leading-tight",children:[U?a.jsx("span",{className:"text-text",children:As(U.min,D.min)?` ${qt(U.max)}`:As(U.max,D.max)?` ${qt(U.min)}`:`${qt(U.min)}  ${qt(U.max)}`}):v!=null?a.jsxs("span",{className:"text-text",children:["Cursor: ",qt(v)]}):a.jsx("span",{children:"Drag to filter"}),U&&v!=null&&a.jsxs("span",{className:"text-[11px] text-muted",children:["Cursor: ",qt(v)]})]}),a.jsx("span",{children:qt(D==null?void 0:D.max)})]}),a.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-2 mt-3 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Min"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:R,placeholder:pr(D.min),onFocus:()=>F("min"),onBlur:()=>{F(null),ce(R,k)},onChange:Q=>j(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&Q.currentTarget.blur()}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Max"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:k,placeholder:pr(D.max),onFocus:()=>F("max"),onBlur:()=>{F(null),ce(R,k)},onChange:Q=>T(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&Q.currentTarget.blur()}})]}),a.jsx("button",{className:"btn btn-xs btn-ghost text-muted hover:text-text",onClick:()=>i(n,null),children:"Clear"})]})]})}function qu(e,t,n){if(!e.length)return null;const r=n?n.min:Math.min(...e);let s=n?n.max:Math.max(...e);r===s&&(s=r+1);const i=new Array(t).fill(0),o=t/(s-r);for(const l of e){const u=Math.max(0,Math.min(t-1,Math.floor((l-r)*o)));i[u]+=1}return{bins:i,min:r,max:s,count:e.length}}function ip(e,t){var r;const n=[];for(const s of e){const i=(r=s.metrics)==null?void 0:r[t];i==null||Number.isNaN(i)||n.push(i)}return n}function Yu(e,t,n){const r=Math.max(1,...e),s=(n==null?void 0:n.opacity)??.9;return e.map((i,o)=>{const l=i/r*100;return a.jsx("rect",{x:o+.05,y:100-l,width:.9,height:l,fill:t,opacity:s},`${t}-${o}`)})}function jb(e,t){const n=(e.min-t.min)/(t.max-t.min),r=(e.max-t.min)/(t.max-t.min),s=is*jf(Math.min(n,r)),i=is*Math.abs(r-n);return a.jsx("rect",{x:s,y:0,width:Math.max(.5,i),height:100,fill:"rgba(255,255,255,0.08)",stroke:"rgba(255,255,255,0.4)",strokeWidth:.4})}function op(e,t,n){const r=jf((e-t.min)/(t.max-t.min)),s=is*r;return a.jsx("line",{x1:s,y1:0,x2:s,y2:100,stroke:n.color,strokeWidth:n.strokeWidth??.5,strokeDasharray:n.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function lp(e,t){return e<t?{min:e,max:t}:{min:t,max:e}}function jf(e){return e<0?0:e>1?1:e}function qt(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function pr(e){if(!Number.isFinite(e))return"";const t=e.toString();return t.includes("e")?e.toFixed(6):t}function ap(e){const t=e.trim();if(!t)return{value:null,valid:!0};const n=Number(t);return Number.isFinite(n)?{value:n,valid:!0}:{value:null,valid:!1}}function up(e,t,n){return e<t?t:e>n?n:e}function As(e,t){const n=Math.max(1,Math.abs(e),Math.abs(t));return Math.abs(e-t)<=1e-6*n}function cp(e){return e?e.length>=10?e.slice(0,10):e:""}const Mb=[{label:"Root",path:"/"}];function Rb({leftTool:e,onToolChange:t,compareEnabled:n,compareActive:r,onOpenCompare:s,views:i,activeViewId:o,onActivateView:l,onSaveView:u,current:d,data:f,onOpenFolder:m,onContextMenu:g,countVersion:C,items:w,filteredItems:E,metricKeys:L,selectedItems:y,selectedMetric:h,onSelectMetric:p,filters:v,onChangeRange:S,onChangeFilters:R,onResize:j}){const k=e==="folders"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",T=e==="metrics"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",N=r?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover";return a.jsxs("div",{className:"app-left-panel col-start-1 row-start-2 relative border-r border-border bg-panel overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-y-0 left-0 w-10 border-r border-border flex flex-col items-center gap-2 py-3 bg-surface-overlay",children:[a.jsx("button",{className:k,title:"Folders","aria-label":"Folders","aria-pressed":e==="folders",onClick:()=>t("folders"),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M3 7.5h6l2-2h10a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2z"})})}),a.jsx("button",{className:T,title:"Metrics / Filters","aria-label":"Metrics and Filters","aria-pressed":e==="metrics",onClick:()=>t("metrics"),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]})}),a.jsx("div",{className:"w-6 h-px bg-border/70 my-1"}),a.jsx("button",{className:`${N} ${n?"":"opacity-40 cursor-not-allowed"}`,title:n?"Compare selected images":"Compare (select 2+)","aria-label":"Compare selected images","aria-pressed":r,"aria-disabled":!n,disabled:!n,onClick:()=>{n&&s()},children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("rect",{x:"3",y:"4",width:"8",height:"16",rx:"1"}),a.jsx("rect",{x:"13",y:"4",width:"8",height:"16",rx:"1"})]})}),a.jsx("div",{className:"flex-1"}),a.jsx("a",{className:"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover cursor-pointer",href:"https://github.com/trojblue/lenslet",title:"Lenslet on GitHub","aria-label":"Lenslet on GitHub",target:"_blank",rel:"noreferrer",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M12 .5C5.73.5.5 5.74.5 12.02c0 5.1 3.29 9.42 7.86 10.95.58.11.79-.25.79-.56v-2.17c-3.2.7-3.88-1.55-3.88-1.55-.53-1.35-1.29-1.71-1.29-1.71-1.05-.72.08-.71.08-.71 1.16.08 1.78 1.2 1.78 1.2 1.03 1.77 2.71 1.26 3.37.96.1-.75.4-1.26.73-1.55-2.55-.29-5.23-1.29-5.23-5.74 0-1.27.45-2.31 1.19-3.13-.12-.29-.52-1.46.11-3.05 0 0 .97-.31 3.18 1.19.92-.26 1.91-.39 2.89-.39.98 0 1.97.13 2.89.39 2.2-1.5 3.18-1.19 3.18-1.19.63 1.59.23 2.76.11 3.05.74.82 1.19 1.86 1.19 3.13 0 4.46-2.69 5.45-5.25 5.73.41.36.78 1.07.78 2.16v3.2c0 .31.21.67.8.56 4.56-1.53 7.85-5.85 7.85-10.95C23.5 5.74 18.27.5 12 .5z"})})})]}),a.jsx("div",{className:"ml-10 h-full",children:e==="folders"?a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"px-2 py-2 border-b border-border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Smart Folders"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:u,title:"Save current view as Smart Folder",children:"+ New"})]}),i.length?a.jsx("div",{className:"flex flex-col gap-1",children:i.map(U=>{const D=U.id===o;return a.jsx("button",{className:`text-left px-2 py-1.5 rounded-md text-sm ${D?"bg-accent-muted text-accent":"hover:bg-hover text-text"}`,onClick:()=>l(U),children:U.name},U.id)})}):a.jsx("div",{className:"text-xs text-muted px-1 py-1.5",children:"No saved Smart Folders yet."})]}),a.jsx(Sb,{current:d,roots:Mb,data:f,onOpen:m,onContextMenu:g,countVersion:C,className:"flex-1 min-h-0 overflow-auto scrollbar-thin",showResizeHandle:!1})]}):a.jsx(bb,{items:w,filteredItems:E,metricKeys:L,selectedItems:y,selectedMetric:h,onSelectMetric:p,filters:v,onChangeRange:S,onChangeFilters:R})}),a.jsx("div",{className:"toolbar-offset absolute bottom-0 right-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20",onMouseDown:j})]})}function Lb({persistenceEnabled:e,offViewSummary:t,onRevealOffView:n,canRevealOffView:r=!1,onClearOffView:s,browserZoomPercent:i}){const l=!!(t!=null&&t.names.length)&&t?` (${t.names.join(", ")}${t.extra?` +${t.extra}`:""})`:"",u=r&&n!=null,d=typeof i=="number"?i:null,f=d!==null&&Math.abs(d-100)>=2;return!e||f||!!t?a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-col gap-2",children:[!e&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("span",{className:"font-semibold",children:"Not persisted."})," Workspace is read-only; edits stay in memory until restart."]}),f&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs",children:[a.jsxs("span",{className:"font-semibold",children:["Browser zoom ",Math.round(d),"%."]})," For best results, set it to 100% so UI elements stay in correct proportions."]}),t&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex items-center justify-between gap-3",children:[a.jsxs("span",{children:["Updates outside current view: ",t.count," item",t.count===1?"":"s",l]}),a.jsxs("div",{className:"flex items-center gap-2",children:[u&&a.jsx("button",{className:"text-muted hover:text-text transition-colors",onClick:()=>n==null?void 0:n(),"aria-label":"Reveal off-view updates",children:"Reveal"}),a.jsx("button",{className:"text-muted hover:text-text transition-colors text-base leading-none",onClick:s,"aria-label":"Clear off-view updates",children:""})]})]})]})}):null}const Tb=6e3,_b=1e4,Pb=24*60*6e4,Ib=3e4,Fb=350,Ob=1400,Db=2048,zb=6,Ab=10;function ky(e){const t=new Map;for(const n of e)t.set(n.path,n.name);return t}function Ey(e,t){return t.get(e)??e.split("/").pop()??e}function dp(e,t){const n=e.filter(r=>!t.has(r.path));return n.length===e.length?e:n}function fp(e,t,n,r,s){const i=e.filter(l=>l.path!==t);return[{path:t,ts:n,kind:r},...i].slice(0,s)}function $b(e,t){if(!e.length)return null;const n=ky(t),r=new Set,s=[];for(const o of e)r.has(o.path)||(r.add(o.path),s.push(o.path));const i=s.slice(0,2).map(o=>Ey(o,n));return{count:s.length,names:i,extra:Math.max(0,s.length-i.length)}}function Ub(e,t,n,r){if(!e.length)return[];const s=ky(t);return e.map(i=>({path:i.path,label:Ey(i.path,s),timeLabel:r(i.ts,n)}))}function Bb(e){const[t,n]=c.useState([]),[r,s]=c.useState([]),[i,o]=c.useState(new Map),l=c.useRef(new Map),u=c.useRef(new Set),d=c.useRef(new Set),f=c.useRef(new Set);c.useEffect(()=>()=>{for(const L of l.current.values())window.clearTimeout(L);l.current.clear(),u.current.clear()},[]),c.useEffect(()=>{d.current=new Set(e),n(L=>dp(L,f.current))},[e]);const m=c.useCallback((L,y)=>{if(y!=null){if(u.current.has(y))return;if(u.current.add(y),u.current.size>Db){const R=u.current.values().next().value;R!=null&&u.current.delete(R)}}const h=y!=null?`event:${y}`:`event:${L}:${Date.now()}`;o(R=>{if(R.get(L)===h)return R;const j=new Map(R);return j.set(L,h),j});const p=l.current,v=p.get(L);v!=null&&window.clearTimeout(v);const S=window.setTimeout(()=>{o(R=>{if(R.get(L)!==h)return R;const j=new Map(R);return j.delete(L),j}),p.delete(L)},Ob);p.set(L,S)},[]),g=c.useCallback(L=>{f.current=L,n(y=>dp(y,L))},[]),C=c.useCallback((L,y,h)=>{const p=Date.now();d.current.has(L)&&f.current.has(L)||n(S=>fp(S,L,p,y,zb)),m(L,h)},[m]),w=c.useCallback((L,y,h)=>{const p=Date.now(),v=uy(h)??p;s(S=>fp(S,L,v,y,Ab))},[]),E=c.useCallback(()=>{n([])},[]);return{offViewActivity:t,recentTouches:r,highlightedPaths:i,onVisiblePathsChange:g,markRecentActivity:C,markRecentTouch:w,clearOffViewActivity:E}}function Wb(e){return e.isOffline?"offline":e.isUnstable?"unstable":e.recentEditActive?"recent":Number.isFinite(e.editingCount)&&e.editingCount>0?"editing":"live"}function Ny(e){if(!e.length)return e;const t=new Set,n=[];for(const r of e)t.has(r.path)||(t.add(r.path),n.push(r));return n}function jy(e){return{...e,items:Ny(e.items)}}function Hb(e,t){const n=e.pageCount??1,r=e.pageSize??t,s=(e.page??1)+1;return n<=1||s>n?null:{startPage:s,endPage:n,pageSize:r}}function Vb(e,t){if(e.path!==t.path)return jy(t);const n=Ny([...e.items,...t.items]);return{...e,generatedAt:t.generatedAt??e.generatedAt,dirs:e.dirs.length?e.dirs:t.dirs,items:n,page:t.page??e.page,pageSize:t.pageSize??e.pageSize,pageCount:t.pageCount??e.pageCount,totalItems:t.totalItems??e.totalItems}}async function Qb(e,t){const n=t.shouldContinue??(()=>!0);let r=jy(e);t.onUpdate(r);const s=Hb(e,t.defaultPageSize);if(s)for(let i=s.startPage;i<=s.endPage;i+=1){let o;try{o=await t.fetchPage(i,s.pageSize)}catch{return}if(!n())return;r=Vb(r,o),t.onUpdate(r)}}const My=[-2,-1,1,2],Ry=[-2,-1,0,1,2,3];My.length;Ry.length;function Kb(e,t,n){return Math.min(Math.max(e,t),n)}function Ly(e,t,n){const r=new Set,s=[];for(const i of n){const o=t+i;if(o<0||o>=e.length)continue;const l=e[o];!l||r.has(l)||(r.add(l),s.push(l))}return s}function qb(e,t){if(!t)return[];const n=e.indexOf(t);return n<0?[]:Ly(e,n,My)}function Yb(e,t){if(e.length<2)return[];const n=Math.max(0,e.length-2),r=Kb(t,0,n);return Ly(e,r,Ry)}const Ve={sortKey:"sortKey",sortDir:"sortDir",sortSpec:"sortSpec",starFilters:"starFilters",filterAst:"filterAst",selectedMetric:"selectedMetric",viewMode:"viewMode",gridItemSize:"gridItemSize",leftOpen:"leftOpen",rightOpen:"rightOpen"};function Gb(e){switch(e){case"live":return"Live";case"reconnecting":return"Reconnecting";case"offline":return"Offline";case"connecting":case"idle":default:return"Connecting"}}function hp(e){if(!(e instanceof jn))return null;const t=e.body;if(!t||typeof t!="object")return null;const n=t.error;return typeof n=="string"?n:null}function mp(e,t){for(const n of e)ve.prefetchFile(n,t),ve.prefetchThumb(n)}function pp(e,t){return t-e<Pb?cC(e,t):dC(e)}function Xb(e,t){return e?t instanceof jn||t instanceof Error?t.message:"Failed to load embeddings.":null}function Jb(e,t,n,r){return e||t?n:r}function Zb(e,t,n,r,s,i){return e?n:t||i==="/"?r:s}function ek(){var Bf,Wf,Hf;const[e,t]=c.useState("/"),[n,r]=c.useState(""),[s,i]=c.useState([]),[o,l]=c.useState(!1),[u,d]=c.useState(null),[f,m]=c.useState(null),[g,C]=c.useState(!1),[w,E]=c.useState(0),[L,y]=c.useState(0),[h,p]=c.useState(null),[v,S]=c.useState(100),[R,j]=c.useState(null),[k,T]=c.useState(()=>({filters:{and:[]},sort:{kind:"builtin",key:"added",dir:"desc"},selectedMetric:void 0})),[N,F]=c.useState(()=>Date.now()),[U,D]=c.useState("adaptive"),[ee,ue]=c.useState(220),[_,de]=c.useState(!0),[z,H]=c.useState(!0),[J,ae]=c.useState("folders"),[ce,Le]=c.useState([]),[Q,K]=c.useState(null),[ne,fe]=c.useState(0),[Me,$e]=c.useState({}),He=c.useRef(null),at=c.useRef(null),tt=c.useRef(null),tn=c.useRef(null),nt=c.useRef(!1),Pt=c.useRef(!1),nn=c.useRef(null),It=c.useRef(null),Ct=c.useRef(Mi()),ut=c.useRef(null),_e=c.useRef(null),A=c.useRef(null),se=c.useRef(!1),q=c.useRef(null),B=c.useRef("idle"),{leftW:Y,rightW:Z,onResizeLeft:ie,onResizeRight:we}=db(He,J),[ke,Ee]=c.useState(!1),[Re,ct]=c.useState(null),dt=Qr(),Ft=JS(),hn=Ga(),rt=eC(),[st,Ot]=c.useState("idle"),[Ns,Ge]=c.useState({}),[Ht,Rn]=c.useState(null),[mn,Pi]=c.useState(null),[Wo,js]=c.useState(!1),[Ms,ur]=c.useState(()=>Date.now()),[Rs,Ls]=c.useState(!0),[Za,Ho]=c.useState(!1);c.useEffect(()=>{const x=P=>{const O=An(P),W=FC(O)?O:null,te=W?$m(O):O;W?(m(W),i([W])):(m(null),nt.current=!1),t(pe=>pe===te?pe:(y(X=>X+1),te))};x(zm());const M=()=>x(zm());return window.addEventListener("hashchange",M),()=>window.removeEventListener("hashchange",M)},[]),c.useEffect(()=>{if(mn==null){js(!1);return}js(!0);const x=window.setTimeout(()=>js(!1),Tb);return()=>window.clearTimeout(x)},[mn]),c.useEffect(()=>{if(Ht==null)return;ur(Date.now());const x=window.setInterval(()=>ur(Date.now()),1e4);return()=>window.clearInterval(x)},[Ht]);const{data:Ts,refetch:Vo,isLoading:Qo,isError:eu}=pd(e,!0,{page:1,pageSize:Kl}),[Fe,Ko]=c.useState(),Kr=c.useRef(0),Ii=c.useCallback(()=>Vo(),[Vo]),{data:cr}=pd("/",!0,{enabled:!1,page:1,pageSize:Kl});c.useEffect(()=>{dt.removeQueries({predicate:({queryKey:x})=>EC(x,e,!0)})},[e,dt]),c.useEffect(()=>{Kr.current+=1,Ko(void 0)},[e]),c.useEffect(()=>{if(!Ts)return;const x=++Kr.current;let M=!1;return Qb(Ts,{defaultPageSize:Kl,fetchPage:(P,O)=>ve.getFolder(Ts.path,{recursive:!0,page:P,pageSize:O}),onUpdate:Ko,shouldContinue:()=>!M&&Kr.current===x}),()=>{M=!0}},[Ts]);const Vt=u!==null,Un=!Vt&&n.trim().length>0,pn=hb(n,250),qr=c.useMemo(()=>pn.trim().replace(/\s+/g," "),[pn]),Bn=LC(Un?qr:"",e),Wn=_C(),I=((Bf=Wn.data)==null?void 0:Bf.embeddings)??[],oe=((Wf=Wn.data)==null?void 0:Wf.rejected)??[],he=I.length>0,me=Xb(Wn.isError,Wn.error),Ke=c.useMemo(()=>An(e||"/"),[e]),dr=c.useMemo(()=>Um(k.filters),[k.filters]),qe=c.useMemo(()=>{var M;return(Un?((M=Bn.data)==null?void 0:M.items)??[]:(Fe==null?void 0:Fe.items)??[]).map(P=>({...P,star:Me[P.path]!==void 0?Me[P.path]:P.star}))},[Un,Bn.data,Fe,Me]),Yr=c.useMemo(()=>{var P;const x=new Map;for(const O of qe)x.set(O.path,O);const M=((P=Bn.data)==null?void 0:P.items)??[];for(const O of M){if(x.has(O.path))continue;const W=Me[O.path]!==void 0?Me[O.path]:O.star;x.set(O.path,{...O,star:W})}return x},[qe,Bn.data,Me]),bt=c.useMemo(()=>u?u.items.map(x=>{const M=Yr.get(x.path);return M||lk(x.path,Me[x.path])}):[],[u,Yr,Me]),ye=c.useMemo(()=>{if(u)return Qm(bt,k.filters);const x=Qm(qe,k.filters);return ub(x,k.sort,N)},[u,bt,qe,k.filters,k.sort,N]),Qt=u?bt.length:qe.length,fr=ye.length,Kt=c.useMemo(()=>ye.map(x=>x.path),[ye]),{offViewActivity:tu,recentTouches:kt,highlightedPaths:_s,onVisiblePathsChange:qo,markRecentActivity:Ps,markRecentTouch:Is,clearOffViewActivity:nu}=Bb(Kt),Yo=c.useMemo(()=>new Set(s),[s]),Ty=c.useMemo(()=>{if(!s.length)return[];const x=u?bt:qe,M=new Map(x.map(O=>[O.path,O])),P=new Map(ye.map(O=>[O.path,O]));return s.map(O=>M.get(O)??P.get(O)).filter(O=>!!O)},[s,u,bt,qe,ye]),gn=c.useMemo(()=>ye.filter(x=>Yo.has(x.path)),[ye,Yo]),Mf=c.useMemo(()=>gn.map(x=>x.path),[gn]),Go=Math.max(0,gn.length-2),Gr=Math.min(w,Go),Rf=gn[Gr]??null,Lf=gn[Gr+1]??null,_y=Gr>0,Py=Gr<gn.length-2,Fi=gn.length>=2,Iy=u?bt:qe,Oi=u?null:k.sort.kind==="metric"?k.sort.key:null,Tf=c.useMemo(()=>Oi?ye.some(x=>{var P;const M=(P=x.metrics)==null?void 0:P[Oi];return M!=null&&!Number.isNaN(M)}):!1,[ye,Oi]);c.useEffect(()=>{E(x=>x>Go?Go:x)},[Go]);const ru=c.useCallback(x=>{const M=Date.now(),O=uy(x)??M,W=O>M?M:O;Rn(te=>te==null?W:te>W?te:W),Pi(M),ur(M)},[]),su=c.useCallback(x=>{const M=Object.prototype.hasOwnProperty.call(x,"star"),P=x.metrics!==void 0,O=x.comments!==void 0;if(!M&&!P&&!O)return;const W=pe=>{if(pe.path!==x.path)return pe;let X=pe;return M&&pe.star!==x.star&&(X={...X,star:x.star??null}),P&&(X={...X,metrics:x.metrics??null}),O&&pe.comments!==x.comments&&(X={...X,comments:x.comments??""}),X},te=pe=>{if(!pe)return pe;let X=!1;const re=pe.items.map(xe=>{const gt=W(xe);return gt!==xe&&(X=!0),gt});return X?{...pe,items:re}:pe};dt.setQueriesData({predicate:({queryKey:pe})=>Array.isArray(pe)&&pe[0]==="folder"},te),dt.setQueriesData({predicate:({queryKey:pe})=>Array.isArray(pe)&&pe[0]==="search"},te)},[dt]),Fy=c.useCallback(()=>{fe(x=>x+1)},[]),Fs=c.useCallback(x=>{x.length&&Ge(M=>{let P=!1;const O={...M};for(const W of x){const te=M[W.gallery_id];te&&te.viewing===W.viewing&&te.editing===W.editing||(O[W.gallery_id]=W,P=!0)}return P?O:M})},[]),Xo=c.useCallback(()=>{q.current!=null&&(window.clearTimeout(q.current),q.current=null)},[]),Jo=c.useCallback(x=>{x&&Ge(M=>{if(!(x in M))return M;const P={...M};return delete P[x],P})},[]),iu=c.useCallback(x=>{ut.current=x.lease_id,_e.current=x.gallery_id,Fs([x])},[Fs]),Ln=c.useCallback(async(x,M=!1)=>{const P=Ct.current,O=M?void 0:ut.current??void 0,W=te=>ve.joinPresence(x,te,P);try{iu(await W(O));return}catch(te){if(!M&&hp(te)==="invalid_lease"){iu(await W(void 0));return}throw te}},[iu]),_f=c.useCallback(async(x,M)=>{if(x===M){await Ln(M);return}const P=ut.current;if(!P){await Ln(M,!0);return}try{const O=await ve.movePresence(x,M,P,Ct.current);_e.current=O.to_scope.gallery_id,Fs([O.from_scope,O.to_scope]);return}catch(O){const W=hp(O);if(W==="invalid_lease"){await Ln(M,!0);return}if(W==="scope_mismatch"){await Ln(M);return}throw O}},[Fs,Ln]),Pf=c.useCallback(async x=>{const M=_e.current;if(!M){await Ln(x,!0);return}if(M===x){await Ln(x);return}await _f(M,x)},[Ln,_f]),Zo=c.useCallback(async()=>{if(se.current)return;const x=A.current;if(x){A.current=null,se.current=!0;try{await Pf(x)}catch{}finally{se.current=!1;const M=A.current;M&&M!==_e.current&&Zo()}}},[Pf]),Os=c.useCallback((x,M=!1)=>{if(A.current=x,Xo(),M||_e.current==null){Zo();return}q.current=window.setTimeout(()=>{q.current=null,Zo()},Fb)},[Xo,Zo]),If=c.useCallback(()=>{_e.current=null,ut.current=null,A.current=null,Xo()},[Xo]),el=c.useCallback(x=>{const M=_e.current,P=ut.current;!M||!P||(X1(M,P,Ct.current),x&&Jo(M),If())},[Jo,If]);c.useEffect(()=>{H1();const x=Q1(P=>{if(P.type==="presence"){const te=P.data;if(!(te!=null&&te.gallery_id))return;Fs([te]);return}const O=P.data;if(!(O!=null&&O.path))return;const W=O.path;if(P.type==="item-updated"){const te=P.data,pe={v:1,tags:te.tags??[],notes:te.notes??"",star:te.star??null,version:te.version??1,updated_at:te.updated_at??"",updated_by:te.updated_by??"server"};dt.setQueryData(To(W),pe),su({path:W,star:te.star??null,metrics:te.metrics,comments:te.notes??""}),rC(W,pe),Ps(W,"item-updated",P.id),Is(W,"item-updated",te.updated_at),ru(te.updated_at),$e(X=>{if(X[W]===void 0)return X;const re={...X};return delete re[W],re})}else if(P.type==="metrics-updated"){const te=P.data;su({path:W,metrics:te.metrics}),Ps(W,"metrics-updated",P.id),Is(W,"metrics-updated",te.updated_at),ru(te.updated_at)}}),M=K1(Ot);return()=>{x(),M(),V1()}},[Fs,Ps,Is,dt,su,ru]),c.useEffect(()=>{const x=_e.current;x!==Ke&&Os(Ke,x==null)},[Ke,Os]),c.useEffect(()=>{const x=window.setInterval(()=>{const M=_e.current;M&&Ln(M)},Ib);return()=>{window.clearInterval(x)}},[Ln]),c.useEffect(()=>{const x=B.current;if(B.current=st,st==="live"&&x!=="live"){Os(Ke,!0);return}(st==="reconnecting"||st==="offline")&&Jo(_e.current)},[Jo,st,Ke,Os]),c.useEffect(()=>{const x=()=>el(!0),M=()=>el(!0),P=()=>{Os(Ke,!0)};return window.addEventListener("pagehide",x),window.addEventListener("beforeunload",M),window.addEventListener("pageshow",P),()=>{window.removeEventListener("pagehide",x),window.removeEventListener("beforeunload",M),window.removeEventListener("pageshow",P),el(!1)}},[Ke,Os,el]),c.useEffect(()=>{let x=!1;return ve.getHealth().then(M=>{var O;if(x)return;const P=((O=M==null?void 0:M.labels)==null?void 0:O.enabled)??!0;Ls(P)}).catch(()=>{}),()=>{x=!0}},[]);const Oy=c.useMemo(()=>{const x=u?bt:qe,M={0:0,1:0,2:0,3:0,4:0,5:0};for(const P of x){const O=Me[P.path]??P.star??0;M[String(O)]=(M[String(O)]||0)+1}return M},[u,bt,qe,Me]),hr=c.useMemo(()=>{const x=new Set;let M=0;const P=u?bt:qe;for(const O of P){const W=O.metrics;if(W)for(const te of Object.keys(W))x.add(te);if(M+=1,M>=250&&x.size>0)break}return Array.from(x).sort()},[u,bt,qe]);c.useEffect(()=>{Vt||hr.length&&T(x=>{const M=x.selectedMetric&&hr.includes(x.selectedMetric)?x.selectedMetric:hr[0];return M===x.selectedMetric?x:{...x,selectedMetric:M}})},[hr,Vt]),c.useEffect(()=>{Vt||k.sort.kind==="metric"&&(hr.includes(k.sort.key)||T(x=>({...x,sort:{kind:"builtin",key:"added",dir:x.sort.dir}})))},[hr,k.sort,Vt]);const tl=c.useMemo(()=>rb(k.filters),[k.filters]),nl=(Fe==null?void 0:Fe.totalItems)??(Fe==null?void 0:Fe.items.length)??Qt,Dy=e==="/"?nl:(cr==null?void 0:cr.totalItems)??(cr==null?void 0:cr.items.length)??nl,ou=Vt||Un||tl>0,rl=Ns[e],zy=Ft.state==="syncing"?"Syncing":Ft.state==="error"?Ft.message?`Not saved  ${Ft.message}`:"Not saved  retry":"All changes saved",Ay=Gb(st),lu=Ht!=null,$y=c.useMemo(()=>!lu||Ht==null?"No edits yet.":pp(Ht,Ms),[lu,Ht,Ms]),Uy=(rl==null?void 0:rl.editing)??0,By=rt!=null&&rt>_b,Wy=st==="offline"||st==="connecting"||st==="idle",Hy=st==="reconnecting"||hn||Ft.state==="error"||By,Vy=Wb({isOffline:Wy,isUnstable:Hy,recentEditActive:Wo,editingCount:Uy}),Qy=c.useMemo(()=>$b(tu,ye),[tu,ye]),Ky=c.useMemo(()=>Ub(kt,ye,Ms,pp),[ye,Ms,kt]),qy=Jb(Vt,ou,fr,nl),Yy=Zb(Vt,ou,Qt,nl,Dy,e),Ff=c.useMemo(()=>{if(!u)return null;if(u.queryPath){const x=u.queryPath.split("/").filter(Boolean);return x.length?x[x.length-1]:u.queryPath}return u.queryVector?"Vector query":null},[u]),Of=c.useMemo(()=>u?tl>0?`${fr} of ${Qt}`:`${Qt}`:null,[u,tl,fr,Qt]),Et=c.useCallback(x=>{T(M=>({...M,filters:x(M.filters)}))},[]),Gy=c.useCallback(x=>{T(M=>({...M,filters:x}))},[]),sl=c.useCallback(()=>{Et(x=>Ku(x,[]))},[Et]),Df=c.useCallback(()=>{T(x=>({...x,filters:{and:[]}}))},[]),au=c.useCallback(()=>{d(null);const x=It.current;It.current=null,x&&x.length?(i(x),y(M=>M+1)):i([])},[]),Xy=c.useCallback(()=>{u&&au(),r(""),T(x=>({...x,filters:{and:[]}}))},[au,u]),Jy=c.useCallback(async x=>{!u&&It.current===null&&(It.current=s);const M=await ve.searchEmbeddings(x);if(d({embedding:M.embedding,queryPath:x.query_path??null,queryVector:x.query_vector_b64??null,topK:x.top_k??50,minScore:x.min_score??null,items:M.items,createdAt:Date.now()}),M.items.length){const P=x.query_path&&M.items.some(O=>O.path===x.query_path)?x.query_path:M.items[0].path;i([P]),y(O=>O+1)}else i([])},[u,s]),uu=c.useCallback((x,M)=>{Et(P=>nb(P,x,M))},[Et]),zf=c.useMemo(()=>{var M,P,O,W,te,pe;const x=[];for(const X of k.filters.and)if("stars"in X){const re=X.stars||[];if(!re.length)continue;x.push({id:"stars",label:`Rating in: ${Gu(re)}`,onRemove:()=>sl()})}else if("starsIn"in X){const re=X.starsIn.values||[];if(!re.length)continue;x.push({id:"stars-in",label:`Rating in: ${Gu(re)}`,onRemove:()=>sl()})}else if("starsNotIn"in X){const re=X.starsNotIn.values||[];if(!re.length)continue;x.push({id:"stars-not-in",label:`Rating not in: ${Gu(re)}`,onRemove:()=>Et(xe=>py(xe,[]))})}else if("nameContains"in X){const re=(M=X.nameContains.value)==null?void 0:M.trim();if(!re)continue;x.push({id:"name-contains",label:`Filename contains: ${re}`,onRemove:()=>Et(xe=>gy(xe,""))})}else if("nameNotContains"in X){const re=(P=X.nameNotContains.value)==null?void 0:P.trim();if(!re)continue;x.push({id:"name-not-contains",label:`Filename not: ${re}`,onRemove:()=>Et(xe=>vy(xe,""))})}else if("commentsContains"in X){const re=(O=X.commentsContains.value)==null?void 0:O.trim();if(!re)continue;x.push({id:"comments-contains",label:`Comments contain: ${re}`,onRemove:()=>Et(xe=>yy(xe,""))})}else if("commentsNotContains"in X){const re=(W=X.commentsNotContains.value)==null?void 0:W.trim();if(!re)continue;x.push({id:"comments-not-contains",label:`Comments not: ${re}`,onRemove:()=>Et(xe=>xy(xe,""))})}else if("urlContains"in X){const re=(te=X.urlContains.value)==null?void 0:te.trim();if(!re)continue;x.push({id:"url-contains",label:`URL contains: ${re}`,onRemove:()=>Et(xe=>wy(xe,""))})}else if("urlNotContains"in X){const re=(pe=X.urlNotContains.value)==null?void 0:pe.trim();if(!re)continue;x.push({id:"url-not-contains",label:`URL not: ${re}`,onRemove:()=>Et(xe=>Sy(xe,""))})}else if("dateRange"in X){const{from:re,to:xe}=X.dateRange;if(!re&&!xe)continue;x.push({id:"date-range",label:`Date: ${rk(re,xe)}`,onRemove:()=>Et(gt=>vd(gt,null))})}else if("widthCompare"in X){const{op:re,value:xe}=X.widthCompare;x.push({id:"width-compare",label:`Width ${re} ${xe}`,onRemove:()=>Et(gt=>ql(gt,null))})}else if("heightCompare"in X){const{op:re,value:xe}=X.heightCompare;x.push({id:"height-compare",label:`Height ${re} ${xe}`,onRemove:()=>Et(gt=>Yl(gt,null))})}else if("metricRange"in X){const{key:re,min:xe,max:gt}=X.metricRange;x.push({id:`metric:${re}`,label:`${re}: ${ik(xe,gt)}`,onRemove:()=>uu(re,null)})}return x},[k.filters,sl,uu,Et]),Zy=c.useCallback(x=>{const M=new Set(dr);M.has(x)?M.delete(x):M.add(x),T(P=>({...P,filters:Ku(P.filters,Array.from(M))}))},[dr]),e0=c.useCallback(()=>{de(!0),ae("metrics")},[]),t0=c.useCallback(x=>{T(M=>({...M,sort:x})),x.kind==="builtin"&&x.key==="random"&&F(Date.now())},[]),Af=c.useCallback(x=>{if(x==="/"||x==="")return"Lenslet | Root";const M=x.split("/").filter(Boolean);if(!M.length)return"Lenslet";const P=M.slice(-2).join("/");return`Lenslet | ${M.length>2?`.../${P}`:`/${P}`}`},[]),n0=c.useMemo(()=>sk(e),[e]);c.useEffect(()=>{document.title=Af(e)},[e,Af]),c.useEffect(()=>{let x=!0;return ve.getViews().then(M=>{x&&Le(M.views||[])}).catch(()=>{x&&Le([])}),()=>{x=!1}},[]),c.useEffect(()=>{Un&&(i([]),f&&(m(null),nt.current=!1,Tl(e)))},[Un,f,e]),c.useEffect(()=>{const x=He.current,M=tn.current;if(!x||!M)return;const P=()=>{const O=Math.max(48,Math.round(M.getBoundingClientRect().height));x.style.setProperty("--toolbar-h",`${O}px`)};if(P(),"ResizeObserver"in window){const O=new ResizeObserver(P);return O.observe(M),()=>O.disconnect()}return window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]),c.useEffect(()=>{try{const x=localStorage.getItem(Ve.sortKey),M=localStorage.getItem(Ve.sortDir),P=localStorage.getItem(Ve.sortSpec),O=localStorage.getItem(Ve.starFilters),W=localStorage.getItem(Ve.filterAst),te=localStorage.getItem(Ve.selectedMetric),pe=localStorage.getItem(Ve.viewMode),X=localStorage.getItem(Ve.gridItemSize),re=localStorage.getItem(Ve.leftOpen),xe=localStorage.getItem(Ve.rightOpen),Vf=(vt=>{if(!vt)return null;const Xe=Vu(vt);return!Xe||typeof Xe!="object"?null:Xe.kind==="builtin"&&(Xe.key==="name"||Xe.key==="added"||Xe.key==="random")&&(Xe.dir==="asc"||Xe.dir==="desc")||Xe.kind==="metric"&&typeof Xe.key=="string"&&Xe.key.length>0&&(Xe.dir==="asc"||Xe.dir==="desc")?Xe:null})(P)??{kind:"builtin",key:x==="name"||x==="added"||x==="random"?x:"added",dir:M==="asc"||M==="desc"?M:"desc"};Vf.key==="random"&&F(Date.now());let hu=(vt=>{if(!vt)return null;const Xe=Vu(vt);return gd(Xe)})(W)??{and:[]};if(O){const vt=Vu(O);if(Array.isArray(vt)){const Xe=vt.filter(d0=>[0,1,2,3,4,5].includes(d0));hu=Ku(hu,Xe)}}if(T(vt=>({...vt,sort:Vf,filters:hu,selectedMetric:te||vt.selectedMetric})),(pe==="grid"||pe==="adaptive")&&D(pe),X){const vt=Number(X);!isNaN(vt)&&vt>=80&&vt<=500&&ue(vt)}(re==="0"||re==="false")&&de(!1),(xe==="0"||xe==="false")&&H(!1)}catch{}},[]),c.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia("(max-width: 900px)"),M=()=>{x.matches&&(de(!1),H(!1))};return M(),"addEventListener"in x?(x.addEventListener("change",M),()=>x.removeEventListener("change",M)):(x.addListener(M),()=>x.removeListener(M))},[]),c.useEffect(()=>{if(typeof window>"u")return;const x=[1,1.25,1.5,1.75,2,3,4],M=W=>x.reduce((te,pe)=>Math.abs(pe-W)<Math.abs(te-W)?pe:te,x[0]),P=()=>{var gt;const W=window.devicePixelRatio||1,te=M(W),pe=((gt=window.visualViewport)==null?void 0:gt.scale)??1,X=W*pe/te;if(!Number.isFinite(X)){j(null);return}const re=Math.round(X*100),xe=Math.min(500,Math.max(25,re));j(xe)};P(),window.addEventListener("resize",P),window.addEventListener("orientationchange",P);const O=window.visualViewport;return O&&O.addEventListener("resize",P),()=>{window.removeEventListener("resize",P),window.removeEventListener("orientationchange",P),O&&O.removeEventListener("resize",P)}},[]),c.useEffect(()=>{try{localStorage.setItem(Ve.sortKey,k.sort.kind==="builtin"?k.sort.key:"added"),localStorage.setItem(Ve.sortDir,k.sort.dir),localStorage.setItem(Ve.sortSpec,JSON.stringify(k.sort));const x=Um(k.filters);localStorage.setItem(Ve.starFilters,JSON.stringify(x)),localStorage.setItem(Ve.filterAst,JSON.stringify(k.filters)),k.selectedMetric?localStorage.setItem(Ve.selectedMetric,k.selectedMetric):localStorage.removeItem(Ve.selectedMetric),localStorage.setItem(Ve.viewMode,U),localStorage.setItem(Ve.gridItemSize,String(ee)),localStorage.setItem(Ve.leftOpen,_?"1":"0"),localStorage.setItem(Ve.rightOpen,z?"1":"0")}catch{}},[k,U,ee,_,z]),c.useEffect(()=>{const x=at.current;if(!x)return;const M=O=>Math.min(500,Math.max(80,O)),P=O=>{O.ctrlKey&&(f||g||(O.preventDefault(),ue(W=>M(W+(O.deltaY<0?20:-20)))))};return x.addEventListener("wheel",P,{passive:!1}),()=>x.removeEventListener("wheel",P)},[f,g]),c.useEffect(()=>{if(f||g)return;const x=at.current;if(!x)return;const M=X=>Math.min(500,Math.max(80,X));let P=null;const O=X=>{if(X.length<2)return 0;const[re,xe]=[X[0],X[1]];return Math.hypot(re.clientX-xe.clientX,re.clientY-xe.clientY)},W=X=>{if(X.touches.length!==2)return;const re=O(X.touches);re&&(P={dist:re,size:ee})},te=X=>{if(!P||X.touches.length!==2)return;const re=O(X.touches);if(!re)return;X.preventDefault();const xe=M(P.size*(re/P.dist));ue(xe)},pe=()=>{P=null};return x.addEventListener("touchstart",W,{passive:!0}),x.addEventListener("touchmove",te,{passive:!1}),x.addEventListener("touchend",pe),x.addEventListener("touchcancel",pe),()=>{x.removeEventListener("touchstart",W),x.removeEventListener("touchmove",te),x.removeEventListener("touchend",pe),x.removeEventListener("touchcancel",pe)}},[f,g,ee]),c.useEffect(()=>{mp(qb(Kt,f),"viewer")},[f,Kt]),c.useEffect(()=>{g&&mp(Yb(Mf,Gr),"compare")},[g,Mf,Gr]);const il=c.useCallback(x=>{m(null),nt.current=!1;const M=An(x);t(M),Am(M)},[]),r0=c.useCallback(async()=>{const x=window.prompt("Save Smart Folder as:","New Smart Folder");if(!x)return;const M=tk(x,ce),P={id:M,name:x,pool:{kind:"folder",path:e},view:JSON.parse(JSON.stringify(k))},O=[...ce.filter(W=>W.id!==M),P];Le(O),K(M);try{await ve.saveViews({version:1,views:O})}catch(W){if(W instanceof jn&&W.status===403){const te=new Blob([JSON.stringify({version:1,views:O},null,2)],{type:"application/json"});Gl(te,`lenslet-smart-folder-${M}.json`),alert("No-write mode: exported Smart Folder JSON instead of saving.");return}console.error("Failed to save Smart Folder:",W)}},[e,k,ce]);c.useEffect(()=>{if(!Q)return;const x=ce.find(O=>O.id===Q);if(!x){K(null);return}const M=x.pool.path===e,P=JSON.stringify(x.view)===JSON.stringify(k);(!M||!P)&&K(null)},[Q,ce,e,k]);const ol=c.useCallback(x=>{if(!x)return;const M=document.getElementById(`cell-${encodeURIComponent(x)}`);M==null||M.focus()},[]),s0=c.useCallback(x=>{m(x),nt.current=!0,Am(x)},[]),$f=c.useCallback(()=>{m(null),nt.current?(nt.current=!1,window.history.back()):Tl(e),ol(nn.current)},[ol]),i0=c.useCallback(()=>{g||!Fi||(s[0]&&(nn.current=s[0]),E(0),C(!0),f&&(m(null),nt.current&&(nt.current=!1),Tl(e)),Pt.current||(window.history.pushState({compare:!0},"",window.location.href),Pt.current=!0))},[g,Fi,s,f,e]),cu=c.useCallback(()=>{C(!1),Pt.current&&(Pt.current=!1,window.history.back()),ol(nn.current??s[0])},[ol,s]),o0=c.useCallback(x=>{gn.length<2||E(M=>{const P=Math.max(0,gn.length-2);return Math.min(P,Math.max(0,M+x))})},[gn.length]);c.useEffect(()=>{g&&(Fi||cu())},[g,Fi,cu]),c.useEffect(()=>{const x=()=>{f&&(nt.current=!1,m(null)),g&&(Pt.current=!1,C(!1))};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[f,g]),c.useEffect(()=>{const x=He.current;if(!x)return;const M=W=>{W.dataTransfer&&Array.from(W.dataTransfer.types).includes("Files")&&(W.preventDefault(),Ee(!0))},P=W=>{const te=W.relatedTarget;te&&x.contains(te)||Ee(!1)},O=async W=>{var X,re;W.preventDefault(),Ee(!1);const te=Array.from(((X=W.dataTransfer)==null?void 0:X.files)??[]);if(!te.length)return;if(!((((re=Fe==null?void 0:Fe.dirs)==null?void 0:re.length)??0)===0)){alert("Uploads are only allowed into folders without subdirectories.");return}for(const xe of te)try{await ve.uploadFile(e,xe)}catch(gt){console.error(`Failed to upload ${xe.name}:`,gt)}Ii()};return x.addEventListener("dragover",M),x.addEventListener("dragleave",P),x.addEventListener("drop",O),()=>{x.removeEventListener("dragover",M),x.removeEventListener("dragleave",P),x.removeEventListener("drop",O)}},[e,(Hf=Fe==null?void 0:Fe.dirs)==null?void 0:Hf.length,Ii]),c.useEffect(()=>{const x=()=>ct(null),M=P=>{P.key==="Escape"&&ct(null)};return window.addEventListener("click",x),window.addEventListener("keydown",M),()=>{window.removeEventListener("click",x),window.removeEventListener("keydown",M)}},[]),c.useEffect(()=>{const x=M=>{if(!Cf(M.target)){if((M.ctrlKey||M.metaKey)&&M.key.toLowerCase()==="b"){M.preventDefault(),M.altKey?H(P=>!P):de(P=>!P);return}if(!(f||g)){if(M.key==="Backspace"||M.key==="Delete")M.preventDefault(),il($m(e));else if((M.ctrlKey||M.metaKey)&&M.key.toLowerCase()==="a")M.preventDefault(),i(ye.map(P=>P.path));else if(M.key==="Escape")s.length&&(M.preventDefault(),i([]));else if(M.key==="/"){M.preventDefault();const P=document.querySelector(".toolbar-right .input");P==null||P.focus()}}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,ye,s,f,g,il]);const l0=_?`${Y}px`:"0px",a0=z?`${Z}px`:"0px",Uf=f??s[0]??null,du=Uf?Kt.indexOf(Uf):-1,u0=du>0,c0=du>=0&&du<Kt.length-1,fu=c.useCallback(x=>{if(!Kt.length)return;const M=f??s[0];if(!M)return;const P=Kt.indexOf(M);if(P===-1)return;const O=Math.min(Kt.length-1,Math.max(0,P+x)),W=Kt[O];!W||W===M||(f&&(m(W),Tl(W)),i([W]))},[Kt,f,s]);return a.jsxs("div",{className:"app-shell grid h-full grid-cols-[var(--left)_1fr_var(--right)]",ref:He,style:{"--left":l0,"--right":a0},children:[a.jsx(E1,{rootRef:tn,onSearch:r,viewerActive:!!f,onBack:$f,zoomPercent:f?v:void 0,onZoomPercentChange:x=>p(x),currentLabel:n0,itemCount:qy,totalCount:Yy,sortSpec:k.sort,metricKeys:hr,onSortChange:t0,sortDisabled:Vt,filterCount:tl,onOpenFilters:e0,starFilters:dr,onToggleStar:Zy,onClearStars:sl,onClearFilters:Df,starCounts:Oy,viewMode:U,onViewMode:D,gridItemSize:ee,onGridItemSize:ue,leftOpen:_,rightOpen:z,onToggleLeft:()=>de(x=>!x),onToggleRight:()=>H(x=>!x),onPrevImage:()=>fu(-1),onNextImage:()=>fu(1),canPrevImage:u0,canNextImage:c0,searchDisabled:Vt,searchPlaceholder:Vt?"Exit similarity to search":void 0,syncIndicator:{state:Vy,presence:rl,syncLabel:zy,connectionLabel:Ay,lastEditedLabel:$y,hasEdits:lu,localTypingActive:Za,recentTouches:Ky}}),_&&a.jsx(Rb,{leftTool:J,onToolChange:ae,compareEnabled:Fi,compareActive:g,onOpenCompare:i0,views:ce,activeViewId:Q,onActivateView:x=>{var P;K(x.id);const M=gd((P=x.view)==null?void 0:P.filters)??{and:[]};T({...x.view,filters:M}),il(x.pool.path)},onSaveView:r0,current:e,data:Fe,onOpenFolder:x=>{K(null),il(x)},onContextMenu:(x,M)=>{x.preventDefault(),ct({x:x.clientX,y:x.clientY,kind:"tree",payload:{path:M}})},countVersion:ne,items:Iy,filteredItems:ye,metricKeys:hr,selectedItems:Ty,selectedMetric:k.selectedMetric,onSelectMetric:x=>T(M=>({...M,selectedMetric:x})),filters:k.filters,onChangeRange:uu,onChangeFilters:Gy,onResize:ie}),a.jsxs("div",{className:"grid-shell col-start-2 row-start-2 relative overflow-hidden flex flex-col",ref:at,children:[a.jsx("div",{"aria-live":"polite",className:"sr-only",children:s.length?`${s.length} selected`:""}),a.jsx(Lb,{persistenceEnabled:Rs,offViewSummary:Qy,canRevealOffView:ou,onRevealOffView:Xy,onClearOffView:nu,browserZoomPercent:R}),u&&a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"font-semibold",children:"Similarity mode"}),a.jsxs("span",{className:"text-muted",children:["Embedding: ",u.embedding]}),Ff&&a.jsxs("span",{className:"text-muted",children:["Query: ",Ff]}),Of&&a.jsxs("span",{className:"text-muted",children:["Results: ",Of]}),a.jsxs("span",{className:"text-muted",children:["Top K: ",u.topK]}),u.minScore!=null&&a.jsxs("span",{className:"text-muted",children:["Min score: ",u.minScore]})]}),a.jsx("button",{className:"btn btn-sm",onClick:au,children:"Exit similarity"})]})}),zf.length>0&&a.jsx("div",{className:"sticky top-0 z-10 px-3 py-2 bg-panel border-b border-border",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Filters"}),zf.map(x=>a.jsxs("span",{className:"filter-chip",children:[a.jsx("span",{className:"truncate max-w-[240px]",title:x.label,children:x.label}),a.jsx("button",{className:"filter-chip-remove","aria-label":`Clear filter ${x.label}`,onClick:x.onRemove,children:""})]},x.id)),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:Df,children:"Clear all"})]})}),!1,a.jsxs("div",{className:"flex-1 min-h-0 relative",children:[a.jsx(NS,{items:ye,selected:s,restoreToSelectionToken:L,onSelectionChange:i,onOpenViewer:x=>{try{nn.current=x}catch{}s0(x),i([x])},highlight:Un?qr:"",recentlyUpdated:_s,onVisiblePathsChange:qo,suppressSelectionHighlight:!!f||g,viewMode:U,targetCellSize:ee,onContextMenuItem:(x,M)=>{x.preventDefault();const P=s.length?s:[M];ct({x:x.clientX,y:x.clientY,kind:"grid",payload:{paths:P}})},scrollRef:tt,hideScrollbar:Tf}),Tf&&Oi&&a.jsx(RS,{items:ye,metricKey:Oi,scrollRef:tt,sortDir:k.sort.dir})]})]}),z&&a.jsx(xC,{path:s[0]??null,selectedPaths:s,items:ye,compareActive:g,compareA:Rf,compareB:Lf,sortSpec:k.sort,onResize:we,onStarChanged:(x,M)=>{$e(P=>{const O={...P};for(const W of x)O[W]=M;return O})},onFindSimilar:()=>l(!0),embeddingsAvailable:he,embeddingsLoading:Wn.isLoading,onLocalTypingChange:Ho}),a.jsx(wC,{open:o,embeddings:I,rejected:oe,selectedPath:s[0]??null,embeddingsLoading:Wn.isLoading,embeddingsError:me,onClose:()=>l(!1),onSearch:Jy}),f&&a.jsx(zS,{path:f,onClose:$f,onZoomChange:x=>S(Math.round(x)),requestedZoomPercent:h,onZoomRequestConsumed:()=>p(null),onNavigate:fu}),g&&a.jsx(WS,{aItem:Rf,bItem:Lf,index:Gr,total:gn.length,canPrev:_y,canNext:Py,onNavigate:o0,onClose:cu}),ke&&a.jsx("div",{className:"toolbar-offset fixed inset-0 left-[var(--left)] right-[var(--right)] bg-accent/10 border-2 border-dashed border-accent text-text flex items-center justify-center text-lg z-overlay pointer-events-none",children:"Drop images to upload"}),Re&&a.jsx(ak,{ctx:Re,current:e,items:ye,refetch:Ii,setCtx:ct,onInvalidateCounts:Fy})]})}function tk(e,t){const n=nk(e)||"view",r=new Set(t.map(i=>i.id));if(!r.has(n))return n;let s=2;for(;r.has(`${n}-${s}`);)s+=1;return`${n}-${s}`}function nk(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function Gu(e){const t=e.filter(s=>s>0).sort((s,i)=>i-s),n=e.includes(0),r=[...t.map(s=>String(s))];return n&&r.push("None"),r.join(", ")}function rk(e,t){return e&&t?`${e} to ${t}`:e?`from ${e}`:t?`to ${t}`:""}function sk(e){if(e==="/"||e==="")return"Root";const t=e.split("/").filter(Boolean);return t.length?t.length<=2?`/${t.join("/")}`:`.../${t.slice(-2).join("/")}`:"Root"}function ik(e,t){return`${gp(e)}${gp(t)}`}function gp(e){const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function ok(e){const t=e.toLowerCase();return t.endsWith(".png")?"image/png":t.endsWith(".webp")?"image/webp":"image/jpeg"}function lk(e,t){const n=e.split("/").pop()??e;return{path:e,name:n,type:ok(e),w:0,h:0,size:0,hasThumb:!0,hasMeta:!1,star:t??null}}function Gl(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function ak({ctx:e,current:t,items:n,refetch:r,setCtx:s,onInvalidateCounts:i}){const o=zC(t),l=Qr(),[u,d]=Xl.useState(!1),[f,m]=Xl.useState(null),g=()=>new Date().toISOString().replace(/[:.]/g,"-"),C=h=>{const p=v=>h==="/"?!0:v===h||v.startsWith(`${h}/`);l.invalidateQueries({predicate:({queryKey:v})=>{if(!Array.isArray(v)||v[0]!=="folder")return!1;const S=typeof v[1]=="string"?v[1]:"";return p(S)}})},w=h=>{const p=An(h);return p===""?"/":p},E=async()=>{const h=w(e.payload.path||"/");d(!0);try{await ve.refreshFolder(h),C(h),i(),(t===h||t.startsWith(h==="/"?"/":`${h}/`))&&await r(),sd.evictPrefix(h),$s.evictPrefix(h)}catch(p){console.error("Failed to refresh folder:",p)}finally{d(!1),s(null)}},L=h=>async()=>{m(h);const p=e.payload.path||t;try{const S=(await ve.getFolder(p,{recursive:!0,legacyRecursive:!0})).items,R=Jm(S),j=h==="csv"?Xm(R):Gm(R),k=h==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8",T=p==="/"?"root":(p.replace(/^\/+/,"")||"root").replace(/\//g,"_");Gl(new Blob([j],{type:k}),`metadata_${T}_${g()}.${h}`)}catch(v){console.error("Failed to export folder:",v),alert("Failed to export folder. See console for details.")}finally{m(null),s(null)}},y=e.kind==="tree"?[{label:u?"Refreshing":"Refresh",disabled:u,onClick:E},{label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f||u,onClick:L("csv")},{label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f||u,onClick:L("json")}]:(()=>{const h=e.payload.paths??[],p=[],v=R=>async()=>{m(R);try{const j=new Set(h),k=n.filter(U=>j.has(U.path)),T=Jm(k),N=R==="csv"?Xm(T):Gm(T),F=R==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8";Gl(new Blob([N],{type:F}),`metadata_selection_${g()}.${R}`)}finally{m(null),s(null)}},S=async()=>{var j;if(!h.length)return;s(null);const R=new Map(n.map(k=>[k.path,k]));for(const k of h)try{const T=await ve.getFile(k),N=((j=R.get(k))==null?void 0:j.name)||DC(k)||"image";Gl(T,N)}catch(T){console.error(`Failed to download ${k}:`,T)}};return h.length&&p.push({label:h.length>1?`Download (${h.length})`:"Download",onClick:S}),p.push({label:"Move to trash",disabled:o,onClick:async()=>{if(!o){for(const R of h)try{await ve.moveFile(R,"/_trash_")}catch(j){console.error(`Failed to trash ${R}:`,j)}r(),s(null)}}}),o&&(p.push({label:"Permanent delete",danger:!0,onClick:async()=>{if(confirm(`Delete ${h.length} file(s) permanently? This cannot be undone.`)){try{await ve.deleteFiles(h)}catch(R){console.error("Failed to delete files:",R)}r(),s(null)}}}),p.push({label:"Recover",onClick:async()=>{for(const R of h)try{const k=(await ve.getSidecar(R)).original_position,T=k&&k.split("/").slice(0,-1).join("/")||"/";await ve.moveFile(R,T)}catch(j){console.error(`Failed to recover ${R}:`,j)}r(),s(null)}})),h.length&&(p.push({label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f,onClick:v("csv")}),p.push({label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f,onClick:v("json")})),p})();return a.jsx(fb,{x:e.x,y:e.y,items:y})}const uk=new u1({defaultOptions:{queries:{staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always"},mutations:{retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),5e3)}}});function ck(){return a.jsx(c1,{client:uk,children:a.jsx(ek,{})})}$v(document.getElementById("root")).render(a.jsx(ck,{}));
