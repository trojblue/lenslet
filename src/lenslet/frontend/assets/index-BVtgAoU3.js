var $v=Object.defineProperty;var Fd=e=>{throw TypeError(e)};var Uv=(e,t,n)=>t in e?$v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var mn=(e,t,n)=>Uv(e,typeof t!="symbol"?t+"":t,n),oa=(e,t,n)=>t.has(e)||Fd("Cannot "+n);var w=(e,t,n)=>(oa(e,t,"read from private field"),n?n.call(e):t.get(e)),ne=(e,t,n)=>t.has(e)?Fd("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Q=(e,t,n,r)=>(oa(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ae=(e,t,n)=>(oa(e,t,"access private method"),n);var Zi=(e,t,n,r)=>({set _(s){Q(e,t,s,n)},get _(){return w(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Bv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dp={exports:{}},wl={},fp={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hi=Symbol.for("react.element"),Wv=Symbol.for("react.portal"),Hv=Symbol.for("react.fragment"),Vv=Symbol.for("react.strict_mode"),Qv=Symbol.for("react.profiler"),Kv=Symbol.for("react.provider"),Yv=Symbol.for("react.context"),Gv=Symbol.for("react.forward_ref"),qv=Symbol.for("react.suspense"),Xv=Symbol.for("react.memo"),Jv=Symbol.for("react.lazy"),zd=Symbol.iterator;function Zv(e){return e===null||typeof e!="object"?null:(e=zd&&e[zd]||e["@@iterator"],typeof e=="function"?e:null)}var hp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pp=Object.assign,mp={};function Us(e,t,n){this.props=e,this.context=t,this.refs=mp,this.updater=n||hp}Us.prototype.isReactComponent={};Us.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Us.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function gp(){}gp.prototype=Us.prototype;function fc(e,t,n){this.props=e,this.context=t,this.refs=mp,this.updater=n||hp}var hc=fc.prototype=new gp;hc.constructor=fc;pp(hc,Us.prototype);hc.isPureReactComponent=!0;var Dd=Array.isArray,vp=Object.prototype.hasOwnProperty,pc={current:null},yp={key:!0,ref:!0,__self:!0,__source:!0};function xp(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)vp.call(t,r)&&!yp.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Hi,type:e,key:i,ref:o,props:s,_owner:pc.current}}function ey(e,t){return{$$typeof:Hi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function mc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hi}function ty(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ad=/\/+/g;function la(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ty(""+e.key):t.toString(36)}function ko(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Hi:case Wv:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+la(o,0):r,Dd(s)?(n="",e!=null&&(n=e.replace(Ad,"$&/")+"/"),ko(s,t,n,"",function(c){return c})):s!=null&&(mc(s)&&(s=ey(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ad,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Dd(e))for(var l=0;l<e.length;l++){i=e[l];var a=r+la(i,l);o+=ko(i,t,n,a,s)}else if(a=Zv(e),typeof a=="function")for(e=a.call(e),l=0;!(i=e.next()).done;)i=i.value,a=r+la(i,l++),o+=ko(i,t,n,a,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function eo(e,t,n){if(e==null)return e;var r=[],s=0;return ko(e,r,"","",function(i){return t.call(n,i,s++)}),r}function ny(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var mt={current:null},Co={transition:null},ry={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:Co,ReactCurrentOwner:pc};function wp(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:eo,forEach:function(e,t,n){eo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return eo(e,function(){t++}),t},toArray:function(e){return eo(e,function(t){return t})||[]},only:function(e){if(!mc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ce.Component=Us;ce.Fragment=Hv;ce.Profiler=Qv;ce.PureComponent=fc;ce.StrictMode=Vv;ce.Suspense=qv;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ry;ce.act=wp;ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=pp({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=pc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)vp.call(t,a)&&!yp.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Hi,type:e.type,key:s,ref:i,props:r,_owner:o}};ce.createContext=function(e){return e={$$typeof:Yv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Kv,_context:e},e.Consumer=e};ce.createElement=xp;ce.createFactory=function(e){var t=xp.bind(null,e);return t.type=e,t};ce.createRef=function(){return{current:null}};ce.forwardRef=function(e){return{$$typeof:Gv,render:e}};ce.isValidElement=mc;ce.lazy=function(e){return{$$typeof:Jv,_payload:{_status:-1,_result:e},_init:ny}};ce.memo=function(e,t){return{$$typeof:Xv,type:e,compare:t===void 0?null:t}};ce.startTransition=function(e){var t=Co.transition;Co.transition={};try{e()}finally{Co.transition=t}};ce.unstable_act=wp;ce.useCallback=function(e,t){return mt.current.useCallback(e,t)};ce.useContext=function(e){return mt.current.useContext(e)};ce.useDebugValue=function(){};ce.useDeferredValue=function(e){return mt.current.useDeferredValue(e)};ce.useEffect=function(e,t){return mt.current.useEffect(e,t)};ce.useId=function(){return mt.current.useId()};ce.useImperativeHandle=function(e,t,n){return mt.current.useImperativeHandle(e,t,n)};ce.useInsertionEffect=function(e,t){return mt.current.useInsertionEffect(e,t)};ce.useLayoutEffect=function(e,t){return mt.current.useLayoutEffect(e,t)};ce.useMemo=function(e,t){return mt.current.useMemo(e,t)};ce.useReducer=function(e,t,n){return mt.current.useReducer(e,t,n)};ce.useRef=function(e){return mt.current.useRef(e)};ce.useState=function(e){return mt.current.useState(e)};ce.useSyncExternalStore=function(e,t,n){return mt.current.useSyncExternalStore(e,t,n)};ce.useTransition=function(){return mt.current.useTransition()};ce.version="18.3.1";fp.exports=ce;var f=fp.exports;const Bo=Bv(f);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy=f,iy=Symbol.for("react.element"),oy=Symbol.for("react.fragment"),ly=Object.prototype.hasOwnProperty,ay=sy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uy={key:!0,ref:!0,__self:!0,__source:!0};function Sp(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)ly.call(t,r)&&!uy.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:iy,type:e,key:i,ref:o,props:s,_owner:ay.current}}wl.Fragment=oy;wl.jsx=Sp;wl.jsxs=Sp;dp.exports=wl;var u=dp.exports,kp={exports:{}},Tt={},Cp={exports:{}},Ep={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,B){var Z=P.length;P.push(B);e:for(;0<Z;){var pe=Z-1>>>1,ue=P[pe];if(0<s(ue,B))P[pe]=B,P[Z]=ue,Z=pe;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var B=P[0],Z=P.pop();if(Z!==B){P[0]=Z;e:for(var pe=0,ue=P.length,Me=ue>>>1;pe<Me;){var q=2*(pe+1)-1,le=P[q],oe=q+1,de=P[oe];if(0>s(le,Z))oe<ue&&0>s(de,le)?(P[pe]=de,P[oe]=Z,pe=oe):(P[pe]=le,P[q]=Z,pe=q);else if(oe<ue&&0>s(de,Z))P[pe]=de,P[oe]=Z,pe=oe;else break e}}return B}function s(P,B){var Z=P.sortIndex-B.sortIndex;return Z!==0?Z:P.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],c=[],m=1,h=null,y=3,S=!1,k=!1,E=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(P){for(var B=n(c);B!==null;){if(B.callback===null)r(c);else if(B.startTime<=P)r(c),B.sortIndex=B.expirationTime,t(a,B);else break;B=n(c)}}function d(P){if(E=!1,p(P),!k)if(n(a)!==null)k=!0,je(C);else{var B=n(c);B!==null&&he(d,B.startTime-P)}}function C(P,B){k=!1,E&&(E=!1,v(j),j=-1),S=!0;var Z=y;try{for(p(B),h=n(a);h!==null&&(!(h.expirationTime>B)||P&&!z());){var pe=h.callback;if(typeof pe=="function"){h.callback=null,y=h.priorityLevel;var ue=pe(h.expirationTime<=B);B=e.unstable_now(),typeof ue=="function"?h.callback=ue:h===n(a)&&r(a),p(B)}else r(a);h=n(a)}if(h!==null)var Me=!0;else{var q=n(c);q!==null&&he(d,q.startTime-B),Me=!1}return Me}finally{h=null,y=Z,S=!1}}var M=!1,T=null,j=-1,I=5,N=-1;function z(){return!(e.unstable_now()-N<I)}function J(){if(T!==null){var P=e.unstable_now();N=P;var B=!0;try{B=T(!0,P)}finally{B?U():(M=!1,T=null)}}else M=!1}var U;if(typeof g=="function")U=function(){g(J)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,be=V.port2;V.port1.onmessage=J,U=function(){be.postMessage(null)}}else U=function(){b(J,0)};function je(P){T=P,M||(M=!0,U())}function he(P,B){j=b(function(){P(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){k||S||(k=!0,je(C))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(P){switch(y){case 1:case 2:case 3:var B=3;break;default:B=y}var Z=y;y=B;try{return P()}finally{y=Z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var Z=y;y=P;try{return B()}finally{y=Z}},e.unstable_scheduleCallback=function(P,B,Z){var pe=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?pe+Z:pe):Z=pe,P){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Z+ue,P={id:m++,callback:B,priorityLevel:P,startTime:Z,expirationTime:ue,sortIndex:-1},Z>pe?(P.sortIndex=Z,t(c,P),n(a)===null&&P===n(c)&&(E?(v(j),j=-1):E=!0,he(d,Z-pe))):(P.sortIndex=ue,t(a,P),k||S||(k=!0,je(C))),P},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(P){var B=y;return function(){var Z=y;y=B;try{return P.apply(this,arguments)}finally{y=Z}}}})(Ep);Cp.exports=Ep;var cy=Cp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy=f,Lt=cy;function F(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Np=new Set,yi={};function Kr(e,t){Ps(e,t),Ps(e+"Capture",t)}function Ps(e,t){for(yi[e]=t,e=0;e<t.length;e++)Np.add(t[e])}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Va=Object.prototype.hasOwnProperty,fy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$d={},Ud={};function hy(e){return Va.call(Ud,e)?!0:Va.call($d,e)?!1:fy.test(e)?Ud[e]=!0:($d[e]=!0,!1)}function py(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function my(e,t,n,r){if(t===null||typeof t>"u"||py(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gt(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){et[e]=new gt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];et[t]=new gt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){et[e]=new gt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){et[e]=new gt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){et[e]=new gt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){et[e]=new gt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){et[e]=new gt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){et[e]=new gt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){et[e]=new gt(e,5,!1,e.toLowerCase(),null,!1,!1)});var gc=/[\-:]([a-z])/g;function vc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gc,vc);et[t]=new gt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gc,vc);et[t]=new gt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gc,vc);et[t]=new gt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){et[e]=new gt(e,1,!1,e.toLowerCase(),null,!1,!1)});et.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){et[e]=new gt(e,1,!1,e.toLowerCase(),null,!0,!0)});function yc(e,t,n,r){var s=et.hasOwnProperty(t)?et[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(my(t,n,s,r)&&(n=null),r||s===null?hy(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var _n=dy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,to=Symbol.for("react.element"),ts=Symbol.for("react.portal"),ns=Symbol.for("react.fragment"),xc=Symbol.for("react.strict_mode"),Qa=Symbol.for("react.profiler"),bp=Symbol.for("react.provider"),jp=Symbol.for("react.context"),wc=Symbol.for("react.forward_ref"),Ka=Symbol.for("react.suspense"),Ya=Symbol.for("react.suspense_list"),Sc=Symbol.for("react.memo"),An=Symbol.for("react.lazy"),Mp=Symbol.for("react.offscreen"),Bd=Symbol.iterator;function Ks(e){return e===null||typeof e!="object"?null:(e=Bd&&e[Bd]||e["@@iterator"],typeof e=="function"?e:null)}var Ie=Object.assign,aa;function ni(e){if(aa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);aa=t&&t[1]||""}return`
`+aa+e}var ua=!1;function ca(e,t){if(!e||ua)return"";ua=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var a=`
`+s[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{ua=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ni(e):""}function gy(e){switch(e.tag){case 5:return ni(e.type);case 16:return ni("Lazy");case 13:return ni("Suspense");case 19:return ni("SuspenseList");case 0:case 2:case 15:return e=ca(e.type,!1),e;case 11:return e=ca(e.type.render,!1),e;case 1:return e=ca(e.type,!0),e;default:return""}}function Ga(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ns:return"Fragment";case ts:return"Portal";case Qa:return"Profiler";case xc:return"StrictMode";case Ka:return"Suspense";case Ya:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case jp:return(e.displayName||"Context")+".Consumer";case bp:return(e._context.displayName||"Context")+".Provider";case wc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Sc:return t=e.displayName||null,t!==null?t:Ga(e.type)||"Memo";case An:t=e._payload,e=e._init;try{return Ga(e(t))}catch{}}return null}function vy(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ga(t);case 8:return t===xc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Rp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yy(e){var t=Rp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function no(e){e._valueTracker||(e._valueTracker=yy(e))}function Lp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Rp(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Wo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function qa(e,t){var n=t.checked;return Ie({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Wd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=cr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Tp(e,t){t=t.checked,t!=null&&yc(e,"checked",t,!1)}function Xa(e,t){Tp(e,t);var n=cr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ja(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ja(e,t.type,cr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Hd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ja(e,t,n){(t!=="number"||Wo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ri=Array.isArray;function hs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+cr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Za(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ie({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Vd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(F(92));if(ri(n)){if(1<n.length)throw Error(F(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:cr(n)}}function Ip(e,t){var n=cr(t.value),r=cr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Qd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _p(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_p(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ro,Pp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ro=ro||document.createElement("div"),ro.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ro.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ai={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xy=["Webkit","ms","Moz","O"];Object.keys(ai).forEach(function(e){xy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ai[t]=ai[e]})});function Op(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ai.hasOwnProperty(e)&&ai[e]?(""+t).trim():t+"px"}function Fp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Op(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var wy=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tu(e,t){if(t){if(wy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(F(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(F(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(F(61))}if(t.style!=null&&typeof t.style!="object")throw Error(F(62))}}function nu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ru=null;function kc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var su=null,ps=null,ms=null;function Kd(e){if(e=Ki(e)){if(typeof su!="function")throw Error(F(280));var t=e.stateNode;t&&(t=Nl(t),su(e.stateNode,e.type,t))}}function zp(e){ps?ms?ms.push(e):ms=[e]:ps=e}function Dp(){if(ps){var e=ps,t=ms;if(ms=ps=null,Kd(e),t)for(e=0;e<t.length;e++)Kd(t[e])}}function Ap(e,t){return e(t)}function $p(){}var da=!1;function Up(e,t,n){if(da)return e(t,n);da=!0;try{return Ap(e,t,n)}finally{da=!1,(ps!==null||ms!==null)&&($p(),Dp())}}function wi(e,t){var n=e.stateNode;if(n===null)return null;var r=Nl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(F(231,t,typeof n));return n}var iu=!1;if(Rn)try{var Ys={};Object.defineProperty(Ys,"passive",{get:function(){iu=!0}}),window.addEventListener("test",Ys,Ys),window.removeEventListener("test",Ys,Ys)}catch{iu=!1}function Sy(e,t,n,r,s,i,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(m){this.onError(m)}}var ui=!1,Ho=null,Vo=!1,ou=null,ky={onError:function(e){ui=!0,Ho=e}};function Cy(e,t,n,r,s,i,o,l,a){ui=!1,Ho=null,Sy.apply(ky,arguments)}function Ey(e,t,n,r,s,i,o,l,a){if(Cy.apply(this,arguments),ui){if(ui){var c=Ho;ui=!1,Ho=null}else throw Error(F(198));Vo||(Vo=!0,ou=c)}}function Yr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Bp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Yd(e){if(Yr(e)!==e)throw Error(F(188))}function Ny(e){var t=e.alternate;if(!t){if(t=Yr(e),t===null)throw Error(F(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Yd(s),e;if(i===r)return Yd(s),t;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?e:t}function Wp(e){return e=Ny(e),e!==null?Hp(e):null}function Hp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Hp(e);if(t!==null)return t;e=e.sibling}return null}var Vp=Lt.unstable_scheduleCallback,Gd=Lt.unstable_cancelCallback,by=Lt.unstable_shouldYield,jy=Lt.unstable_requestPaint,$e=Lt.unstable_now,My=Lt.unstable_getCurrentPriorityLevel,Cc=Lt.unstable_ImmediatePriority,Qp=Lt.unstable_UserBlockingPriority,Qo=Lt.unstable_NormalPriority,Ry=Lt.unstable_LowPriority,Kp=Lt.unstable_IdlePriority,Sl=null,cn=null;function Ly(e){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Sl,e,void 0,(e.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:_y,Ty=Math.log,Iy=Math.LN2;function _y(e){return e>>>=0,e===0?32:31-(Ty(e)/Iy|0)|0}var so=64,io=4194304;function si(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ko(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=si(l):(i&=o,i!==0&&(r=si(i)))}else o=n&~s,o!==0?r=si(o):i!==0&&(r=si(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Jt(t),s=1<<n,r|=e[n],t&=~s;return r}function Py(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oy(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Jt(i),l=1<<o,a=s[o];a===-1?(!(l&n)||l&r)&&(s[o]=Py(l,t)):a<=t&&(e.expiredLanes|=l),i&=~l}}function lu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Yp(){var e=so;return so<<=1,!(so&4194240)&&(so=64),e}function fa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jt(t),e[t]=n}function Fy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Jt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Ec(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Jt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var xe=0;function Gp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var qp,Nc,Xp,Jp,Zp,au=!1,oo=[],er=null,tr=null,nr=null,Si=new Map,ki=new Map,Un=[],zy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qd(e,t){switch(e){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Si.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ki.delete(t.pointerId)}}function Gs(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ki(t),t!==null&&Nc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Dy(e,t,n,r,s){switch(t){case"focusin":return er=Gs(er,e,t,n,r,s),!0;case"dragenter":return tr=Gs(tr,e,t,n,r,s),!0;case"mouseover":return nr=Gs(nr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Si.set(i,Gs(Si.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ki.set(i,Gs(ki.get(i)||null,e,t,n,r,s)),!0}return!1}function em(e){var t=Cr(e.target);if(t!==null){var n=Yr(t);if(n!==null){if(t=n.tag,t===13){if(t=Bp(n),t!==null){e.blockedOn=t,Zp(e.priority,function(){Xp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Eo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=uu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ru=r,n.target.dispatchEvent(r),ru=null}else return t=Ki(n),t!==null&&Nc(t),e.blockedOn=n,!1;t.shift()}return!0}function Xd(e,t,n){Eo(e)&&n.delete(t)}function Ay(){au=!1,er!==null&&Eo(er)&&(er=null),tr!==null&&Eo(tr)&&(tr=null),nr!==null&&Eo(nr)&&(nr=null),Si.forEach(Xd),ki.forEach(Xd)}function qs(e,t){e.blockedOn===t&&(e.blockedOn=null,au||(au=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,Ay)))}function Ci(e){function t(s){return qs(s,e)}if(0<oo.length){qs(oo[0],e);for(var n=1;n<oo.length;n++){var r=oo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(er!==null&&qs(er,e),tr!==null&&qs(tr,e),nr!==null&&qs(nr,e),Si.forEach(t),ki.forEach(t),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)em(n),n.blockedOn===null&&Un.shift()}var gs=_n.ReactCurrentBatchConfig,Yo=!0;function $y(e,t,n,r){var s=xe,i=gs.transition;gs.transition=null;try{xe=1,bc(e,t,n,r)}finally{xe=s,gs.transition=i}}function Uy(e,t,n,r){var s=xe,i=gs.transition;gs.transition=null;try{xe=4,bc(e,t,n,r)}finally{xe=s,gs.transition=i}}function bc(e,t,n,r){if(Yo){var s=uu(e,t,n,r);if(s===null)ka(e,t,r,Go,n),qd(e,r);else if(Dy(s,e,t,n,r))r.stopPropagation();else if(qd(e,r),t&4&&-1<zy.indexOf(e)){for(;s!==null;){var i=Ki(s);if(i!==null&&qp(i),i=uu(e,t,n,r),i===null&&ka(e,t,r,Go,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ka(e,t,r,null,n)}}var Go=null;function uu(e,t,n,r){if(Go=null,e=kc(r),e=Cr(e),e!==null)if(t=Yr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Bp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Go=e,null}function tm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(My()){case Cc:return 1;case Qp:return 4;case Qo:case Ry:return 16;case Kp:return 536870912;default:return 16}default:return 16}}var Jn=null,jc=null,No=null;function nm(){if(No)return No;var e,t=jc,n=t.length,r,s="value"in Jn?Jn.value:Jn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return No=s.slice(e,1<r?1-r:void 0)}function bo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lo(){return!0}function Jd(){return!1}function It(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?lo:Jd,this.isPropagationStopped=Jd,this}return Ie(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lo)},persist:function(){},isPersistent:lo}),t}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mc=It(Bs),Qi=Ie({},Bs,{view:0,detail:0}),By=It(Qi),ha,pa,Xs,kl=Ie({},Qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xs&&(Xs&&e.type==="mousemove"?(ha=e.screenX-Xs.screenX,pa=e.screenY-Xs.screenY):pa=ha=0,Xs=e),ha)},movementY:function(e){return"movementY"in e?e.movementY:pa}}),Zd=It(kl),Wy=Ie({},kl,{dataTransfer:0}),Hy=It(Wy),Vy=Ie({},Qi,{relatedTarget:0}),ma=It(Vy),Qy=Ie({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ky=It(Qy),Yy=Ie({},Bs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Gy=It(Yy),qy=Ie({},Bs,{data:0}),ef=It(qy),Xy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zy[e])?!!t[e]:!1}function Rc(){return e0}var t0=Ie({},Qi,{key:function(e){if(e.key){var t=Xy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rc,charCode:function(e){return e.type==="keypress"?bo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),n0=It(t0),r0=Ie({},kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tf=It(r0),s0=Ie({},Qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rc}),i0=It(s0),o0=Ie({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),l0=It(o0),a0=Ie({},kl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),u0=It(a0),c0=[9,13,27,32],Lc=Rn&&"CompositionEvent"in window,ci=null;Rn&&"documentMode"in document&&(ci=document.documentMode);var d0=Rn&&"TextEvent"in window&&!ci,rm=Rn&&(!Lc||ci&&8<ci&&11>=ci),nf=" ",rf=!1;function sm(e,t){switch(e){case"keyup":return c0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function im(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rs=!1;function f0(e,t){switch(e){case"compositionend":return im(t);case"keypress":return t.which!==32?null:(rf=!0,nf);case"textInput":return e=t.data,e===nf&&rf?null:e;default:return null}}function h0(e,t){if(rs)return e==="compositionend"||!Lc&&sm(e,t)?(e=nm(),No=jc=Jn=null,rs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rm&&t.locale!=="ko"?null:t.data;default:return null}}var p0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!p0[e.type]:t==="textarea"}function om(e,t,n,r){zp(r),t=qo(t,"onChange"),0<t.length&&(n=new Mc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var di=null,Ei=null;function m0(e){vm(e,0)}function Cl(e){var t=os(e);if(Lp(t))return e}function g0(e,t){if(e==="change")return t}var lm=!1;if(Rn){var ga;if(Rn){var va="oninput"in document;if(!va){var of=document.createElement("div");of.setAttribute("oninput","return;"),va=typeof of.oninput=="function"}ga=va}else ga=!1;lm=ga&&(!document.documentMode||9<document.documentMode)}function lf(){di&&(di.detachEvent("onpropertychange",am),Ei=di=null)}function am(e){if(e.propertyName==="value"&&Cl(Ei)){var t=[];om(t,Ei,e,kc(e)),Up(m0,t)}}function v0(e,t,n){e==="focusin"?(lf(),di=t,Ei=n,di.attachEvent("onpropertychange",am)):e==="focusout"&&lf()}function y0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Cl(Ei)}function x0(e,t){if(e==="click")return Cl(t)}function w0(e,t){if(e==="input"||e==="change")return Cl(t)}function S0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var en=typeof Object.is=="function"?Object.is:S0;function Ni(e,t){if(en(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Va.call(t,s)||!en(e[s],t[s]))return!1}return!0}function af(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uf(e,t){var n=af(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=af(n)}}function um(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?um(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cm(){for(var e=window,t=Wo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wo(e.document)}return t}function Tc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function k0(e){var t=cm(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&um(n.ownerDocument.documentElement,n)){if(r!==null&&Tc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=uf(n,i);var o=uf(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var C0=Rn&&"documentMode"in document&&11>=document.documentMode,ss=null,cu=null,fi=null,du=!1;function cf(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;du||ss==null||ss!==Wo(r)||(r=ss,"selectionStart"in r&&Tc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fi&&Ni(fi,r)||(fi=r,r=qo(cu,"onSelect"),0<r.length&&(t=new Mc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ss)))}function ao(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var is={animationend:ao("Animation","AnimationEnd"),animationiteration:ao("Animation","AnimationIteration"),animationstart:ao("Animation","AnimationStart"),transitionend:ao("Transition","TransitionEnd")},ya={},dm={};Rn&&(dm=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function El(e){if(ya[e])return ya[e];if(!is[e])return e;var t=is[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in dm)return ya[e]=t[n];return e}var fm=El("animationend"),hm=El("animationiteration"),pm=El("animationstart"),mm=El("transitionend"),gm=new Map,df="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fr(e,t){gm.set(e,t),Kr(t,[e])}for(var xa=0;xa<df.length;xa++){var wa=df[xa],E0=wa.toLowerCase(),N0=wa[0].toUpperCase()+wa.slice(1);fr(E0,"on"+N0)}fr(fm,"onAnimationEnd");fr(hm,"onAnimationIteration");fr(pm,"onAnimationStart");fr("dblclick","onDoubleClick");fr("focusin","onFocus");fr("focusout","onBlur");fr(mm,"onTransitionEnd");Ps("onMouseEnter",["mouseout","mouseover"]);Ps("onMouseLeave",["mouseout","mouseover"]);Ps("onPointerEnter",["pointerout","pointerover"]);Ps("onPointerLeave",["pointerout","pointerover"]);Kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ii));function ff(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ey(r,t,void 0,e),e.currentTarget=null}function vm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==i&&s.isPropagationStopped())break e;ff(s,l,c),i=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==i&&s.isPropagationStopped())break e;ff(s,l,c),i=a}}}if(Vo)throw e=ou,Vo=!1,ou=null,e}function ke(e,t){var n=t[gu];n===void 0&&(n=t[gu]=new Set);var r=e+"__bubble";n.has(r)||(ym(t,e,2,!1),n.add(r))}function Sa(e,t,n){var r=0;t&&(r|=4),ym(n,e,r,t)}var uo="_reactListening"+Math.random().toString(36).slice(2);function bi(e){if(!e[uo]){e[uo]=!0,Np.forEach(function(n){n!=="selectionchange"&&(b0.has(n)||Sa(n,!1,e),Sa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[uo]||(t[uo]=!0,Sa("selectionchange",!1,t))}}function ym(e,t,n,r){switch(tm(t)){case 1:var s=$y;break;case 4:s=Uy;break;default:s=bc}n=s.bind(null,t,n,e),s=void 0,!iu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ka(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Cr(l),o===null)return;if(a=o.tag,a===5||a===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Up(function(){var c=i,m=kc(n),h=[];e:{var y=gm.get(e);if(y!==void 0){var S=Mc,k=e;switch(e){case"keypress":if(bo(n)===0)break e;case"keydown":case"keyup":S=n0;break;case"focusin":k="focus",S=ma;break;case"focusout":k="blur",S=ma;break;case"beforeblur":case"afterblur":S=ma;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Zd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Hy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=i0;break;case fm:case hm:case pm:S=Ky;break;case mm:S=l0;break;case"scroll":S=By;break;case"wheel":S=u0;break;case"copy":case"cut":case"paste":S=Gy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=tf}var E=(t&4)!==0,b=!E&&e==="scroll",v=E?y!==null?y+"Capture":null:y;E=[];for(var g=c,p;g!==null;){p=g;var d=p.stateNode;if(p.tag===5&&d!==null&&(p=d,v!==null&&(d=wi(g,v),d!=null&&E.push(ji(g,d,p)))),b)break;g=g.return}0<E.length&&(y=new S(y,k,null,n,m),h.push({event:y,listeners:E}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",y&&n!==ru&&(k=n.relatedTarget||n.fromElement)&&(Cr(k)||k[Ln]))break e;if((S||y)&&(y=m.window===m?m:(y=m.ownerDocument)?y.defaultView||y.parentWindow:window,S?(k=n.relatedTarget||n.toElement,S=c,k=k?Cr(k):null,k!==null&&(b=Yr(k),k!==b||k.tag!==5&&k.tag!==6)&&(k=null)):(S=null,k=c),S!==k)){if(E=Zd,d="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(E=tf,d="onPointerLeave",v="onPointerEnter",g="pointer"),b=S==null?y:os(S),p=k==null?y:os(k),y=new E(d,g+"leave",S,n,m),y.target=b,y.relatedTarget=p,d=null,Cr(m)===c&&(E=new E(v,g+"enter",k,n,m),E.target=p,E.relatedTarget=b,d=E),b=d,S&&k)t:{for(E=S,v=k,g=0,p=E;p;p=qr(p))g++;for(p=0,d=v;d;d=qr(d))p++;for(;0<g-p;)E=qr(E),g--;for(;0<p-g;)v=qr(v),p--;for(;g--;){if(E===v||v!==null&&E===v.alternate)break t;E=qr(E),v=qr(v)}E=null}else E=null;S!==null&&hf(h,y,S,E,!1),k!==null&&b!==null&&hf(h,b,k,E,!0)}}e:{if(y=c?os(c):window,S=y.nodeName&&y.nodeName.toLowerCase(),S==="select"||S==="input"&&y.type==="file")var C=g0;else if(sf(y))if(lm)C=w0;else{C=y0;var M=v0}else(S=y.nodeName)&&S.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(C=x0);if(C&&(C=C(e,c))){om(h,C,n,m);break e}M&&M(e,y,c),e==="focusout"&&(M=y._wrapperState)&&M.controlled&&y.type==="number"&&Ja(y,"number",y.value)}switch(M=c?os(c):window,e){case"focusin":(sf(M)||M.contentEditable==="true")&&(ss=M,cu=c,fi=null);break;case"focusout":fi=cu=ss=null;break;case"mousedown":du=!0;break;case"contextmenu":case"mouseup":case"dragend":du=!1,cf(h,n,m);break;case"selectionchange":if(C0)break;case"keydown":case"keyup":cf(h,n,m)}var T;if(Lc)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else rs?sm(e,n)&&(j="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(rm&&n.locale!=="ko"&&(rs||j!=="onCompositionStart"?j==="onCompositionEnd"&&rs&&(T=nm()):(Jn=m,jc="value"in Jn?Jn.value:Jn.textContent,rs=!0)),M=qo(c,j),0<M.length&&(j=new ef(j,e,null,n,m),h.push({event:j,listeners:M}),T?j.data=T:(T=im(n),T!==null&&(j.data=T)))),(T=d0?f0(e,n):h0(e,n))&&(c=qo(c,"onBeforeInput"),0<c.length&&(m=new ef("onBeforeInput","beforeinput",null,n,m),h.push({event:m,listeners:c}),m.data=T))}vm(h,t)})}function ji(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=wi(e,n),i!=null&&r.unshift(ji(e,i,s)),i=wi(e,t),i!=null&&r.push(ji(e,i,s))),e=e.return}return r}function qr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hf(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,s?(a=wi(n,i),a!=null&&o.unshift(ji(n,a,l))):s||(a=wi(n,i),a!=null&&o.push(ji(n,a,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var j0=/\r\n?/g,M0=/\u0000|\uFFFD/g;function pf(e){return(typeof e=="string"?e:""+e).replace(j0,`
`).replace(M0,"")}function co(e,t,n){if(t=pf(t),pf(e)!==t&&n)throw Error(F(425))}function Xo(){}var fu=null,hu=null;function pu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var mu=typeof setTimeout=="function"?setTimeout:void 0,R0=typeof clearTimeout=="function"?clearTimeout:void 0,mf=typeof Promise=="function"?Promise:void 0,L0=typeof queueMicrotask=="function"?queueMicrotask:typeof mf<"u"?function(e){return mf.resolve(null).then(e).catch(T0)}:mu;function T0(e){setTimeout(function(){throw e})}function Ca(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ci(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ci(t)}function rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function gf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ws=Math.random().toString(36).slice(2),un="__reactFiber$"+Ws,Mi="__reactProps$"+Ws,Ln="__reactContainer$"+Ws,gu="__reactEvents$"+Ws,I0="__reactListeners$"+Ws,_0="__reactHandles$"+Ws;function Cr(e){var t=e[un];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ln]||n[un]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=gf(e);e!==null;){if(n=e[un])return n;e=gf(e)}return t}e=n,n=e.parentNode}return null}function Ki(e){return e=e[un]||e[Ln],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function os(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(F(33))}function Nl(e){return e[Mi]||null}var vu=[],ls=-1;function hr(e){return{current:e}}function Ce(e){0>ls||(e.current=vu[ls],vu[ls]=null,ls--)}function Se(e,t){ls++,vu[ls]=e.current,e.current=t}var dr={},ot=hr(dr),kt=hr(!1),$r=dr;function Os(e,t){var n=e.type.contextTypes;if(!n)return dr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ct(e){return e=e.childContextTypes,e!=null}function Jo(){Ce(kt),Ce(ot)}function vf(e,t,n){if(ot.current!==dr)throw Error(F(168));Se(ot,t),Se(kt,n)}function xm(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(F(108,vy(e)||"Unknown",s));return Ie({},n,r)}function Zo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dr,$r=ot.current,Se(ot,e),Se(kt,kt.current),!0}function yf(e,t,n){var r=e.stateNode;if(!r)throw Error(F(169));n?(e=xm(e,t,$r),r.__reactInternalMemoizedMergedChildContext=e,Ce(kt),Ce(ot),Se(ot,e)):Ce(kt),Se(kt,n)}var xn=null,bl=!1,Ea=!1;function wm(e){xn===null?xn=[e]:xn.push(e)}function P0(e){bl=!0,wm(e)}function pr(){if(!Ea&&xn!==null){Ea=!0;var e=0,t=xe;try{var n=xn;for(xe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}xn=null,bl=!1}catch(s){throw xn!==null&&(xn=xn.slice(e+1)),Vp(Cc,pr),s}finally{xe=t,Ea=!1}}return null}var as=[],us=0,el=null,tl=0,Ot=[],Ft=0,Ur=null,En=1,Nn="";function Sr(e,t){as[us++]=tl,as[us++]=el,el=e,tl=t}function Sm(e,t,n){Ot[Ft++]=En,Ot[Ft++]=Nn,Ot[Ft++]=Ur,Ur=e;var r=En;e=Nn;var s=32-Jt(r)-1;r&=~(1<<s),n+=1;var i=32-Jt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,En=1<<32-Jt(t)+s|n<<s|r,Nn=i+e}else En=1<<i|n<<s|r,Nn=e}function Ic(e){e.return!==null&&(Sr(e,1),Sm(e,1,0))}function _c(e){for(;e===el;)el=as[--us],as[us]=null,tl=as[--us],as[us]=null;for(;e===Ur;)Ur=Ot[--Ft],Ot[Ft]=null,Nn=Ot[--Ft],Ot[Ft]=null,En=Ot[--Ft],Ot[Ft]=null}var Rt=null,Mt=null,Ne=!1,qt=null;function km(e,t){var n=Dt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rt=e,Mt=rr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rt=e,Mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ur!==null?{id:En,overflow:Nn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Dt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Rt=e,Mt=null,!0):!1;default:return!1}}function yu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xu(e){if(Ne){var t=Mt;if(t){var n=t;if(!xf(e,t)){if(yu(e))throw Error(F(418));t=rr(n.nextSibling);var r=Rt;t&&xf(e,t)?km(r,n):(e.flags=e.flags&-4097|2,Ne=!1,Rt=e)}}else{if(yu(e))throw Error(F(418));e.flags=e.flags&-4097|2,Ne=!1,Rt=e}}}function wf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rt=e}function fo(e){if(e!==Rt)return!1;if(!Ne)return wf(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!pu(e.type,e.memoizedProps)),t&&(t=Mt)){if(yu(e))throw Cm(),Error(F(418));for(;t;)km(e,t),t=rr(t.nextSibling)}if(wf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(F(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Mt=rr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Mt=null}}else Mt=Rt?rr(e.stateNode.nextSibling):null;return!0}function Cm(){for(var e=Mt;e;)e=rr(e.nextSibling)}function Fs(){Mt=Rt=null,Ne=!1}function Pc(e){qt===null?qt=[e]:qt.push(e)}var O0=_n.ReactCurrentBatchConfig;function Js(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,e))}return e}function ho(e,t){throw e=Object.prototype.toString.call(t),Error(F(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Sf(e){var t=e._init;return t(e._payload)}function Em(e){function t(v,g){if(e){var p=v.deletions;p===null?(v.deletions=[g],v.flags|=16):p.push(g)}}function n(v,g){if(!e)return null;for(;g!==null;)t(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function s(v,g){return v=lr(v,g),v.index=0,v.sibling=null,v}function i(v,g,p){return v.index=p,e?(p=v.alternate,p!==null?(p=p.index,p<g?(v.flags|=2,g):p):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,g,p,d){return g===null||g.tag!==6?(g=Ta(p,v.mode,d),g.return=v,g):(g=s(g,p),g.return=v,g)}function a(v,g,p,d){var C=p.type;return C===ns?m(v,g,p.props.children,d,p.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===An&&Sf(C)===g.type)?(d=s(g,p.props),d.ref=Js(v,g,p),d.return=v,d):(d=_o(p.type,p.key,p.props,null,v.mode,d),d.ref=Js(v,g,p),d.return=v,d)}function c(v,g,p,d){return g===null||g.tag!==4||g.stateNode.containerInfo!==p.containerInfo||g.stateNode.implementation!==p.implementation?(g=Ia(p,v.mode,d),g.return=v,g):(g=s(g,p.children||[]),g.return=v,g)}function m(v,g,p,d,C){return g===null||g.tag!==7?(g=Ar(p,v.mode,d,C),g.return=v,g):(g=s(g,p),g.return=v,g)}function h(v,g,p){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Ta(""+g,v.mode,p),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case to:return p=_o(g.type,g.key,g.props,null,v.mode,p),p.ref=Js(v,null,g),p.return=v,p;case ts:return g=Ia(g,v.mode,p),g.return=v,g;case An:var d=g._init;return h(v,d(g._payload),p)}if(ri(g)||Ks(g))return g=Ar(g,v.mode,p,null),g.return=v,g;ho(v,g)}return null}function y(v,g,p,d){var C=g!==null?g.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return C!==null?null:l(v,g,""+p,d);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case to:return p.key===C?a(v,g,p,d):null;case ts:return p.key===C?c(v,g,p,d):null;case An:return C=p._init,y(v,g,C(p._payload),d)}if(ri(p)||Ks(p))return C!==null?null:m(v,g,p,d,null);ho(v,p)}return null}function S(v,g,p,d,C){if(typeof d=="string"&&d!==""||typeof d=="number")return v=v.get(p)||null,l(g,v,""+d,C);if(typeof d=="object"&&d!==null){switch(d.$$typeof){case to:return v=v.get(d.key===null?p:d.key)||null,a(g,v,d,C);case ts:return v=v.get(d.key===null?p:d.key)||null,c(g,v,d,C);case An:var M=d._init;return S(v,g,p,M(d._payload),C)}if(ri(d)||Ks(d))return v=v.get(p)||null,m(g,v,d,C,null);ho(g,d)}return null}function k(v,g,p,d){for(var C=null,M=null,T=g,j=g=0,I=null;T!==null&&j<p.length;j++){T.index>j?(I=T,T=null):I=T.sibling;var N=y(v,T,p[j],d);if(N===null){T===null&&(T=I);break}e&&T&&N.alternate===null&&t(v,T),g=i(N,g,j),M===null?C=N:M.sibling=N,M=N,T=I}if(j===p.length)return n(v,T),Ne&&Sr(v,j),C;if(T===null){for(;j<p.length;j++)T=h(v,p[j],d),T!==null&&(g=i(T,g,j),M===null?C=T:M.sibling=T,M=T);return Ne&&Sr(v,j),C}for(T=r(v,T);j<p.length;j++)I=S(T,v,j,p[j],d),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?j:I.key),g=i(I,g,j),M===null?C=I:M.sibling=I,M=I);return e&&T.forEach(function(z){return t(v,z)}),Ne&&Sr(v,j),C}function E(v,g,p,d){var C=Ks(p);if(typeof C!="function")throw Error(F(150));if(p=C.call(p),p==null)throw Error(F(151));for(var M=C=null,T=g,j=g=0,I=null,N=p.next();T!==null&&!N.done;j++,N=p.next()){T.index>j?(I=T,T=null):I=T.sibling;var z=y(v,T,N.value,d);if(z===null){T===null&&(T=I);break}e&&T&&z.alternate===null&&t(v,T),g=i(z,g,j),M===null?C=z:M.sibling=z,M=z,T=I}if(N.done)return n(v,T),Ne&&Sr(v,j),C;if(T===null){for(;!N.done;j++,N=p.next())N=h(v,N.value,d),N!==null&&(g=i(N,g,j),M===null?C=N:M.sibling=N,M=N);return Ne&&Sr(v,j),C}for(T=r(v,T);!N.done;j++,N=p.next())N=S(T,v,j,N.value,d),N!==null&&(e&&N.alternate!==null&&T.delete(N.key===null?j:N.key),g=i(N,g,j),M===null?C=N:M.sibling=N,M=N);return e&&T.forEach(function(J){return t(v,J)}),Ne&&Sr(v,j),C}function b(v,g,p,d){if(typeof p=="object"&&p!==null&&p.type===ns&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case to:e:{for(var C=p.key,M=g;M!==null;){if(M.key===C){if(C=p.type,C===ns){if(M.tag===7){n(v,M.sibling),g=s(M,p.props.children),g.return=v,v=g;break e}}else if(M.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===An&&Sf(C)===M.type){n(v,M.sibling),g=s(M,p.props),g.ref=Js(v,M,p),g.return=v,v=g;break e}n(v,M);break}else t(v,M);M=M.sibling}p.type===ns?(g=Ar(p.props.children,v.mode,d,p.key),g.return=v,v=g):(d=_o(p.type,p.key,p.props,null,v.mode,d),d.ref=Js(v,g,p),d.return=v,v=d)}return o(v);case ts:e:{for(M=p.key;g!==null;){if(g.key===M)if(g.tag===4&&g.stateNode.containerInfo===p.containerInfo&&g.stateNode.implementation===p.implementation){n(v,g.sibling),g=s(g,p.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else t(v,g);g=g.sibling}g=Ia(p,v.mode,d),g.return=v,v=g}return o(v);case An:return M=p._init,b(v,g,M(p._payload),d)}if(ri(p))return k(v,g,p,d);if(Ks(p))return E(v,g,p,d);ho(v,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,g!==null&&g.tag===6?(n(v,g.sibling),g=s(g,p),g.return=v,v=g):(n(v,g),g=Ta(p,v.mode,d),g.return=v,v=g),o(v)):n(v,g)}return b}var zs=Em(!0),Nm=Em(!1),nl=hr(null),rl=null,cs=null,Oc=null;function Fc(){Oc=cs=rl=null}function zc(e){var t=nl.current;Ce(nl),e._currentValue=t}function wu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function vs(e,t){rl=e,Oc=cs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(St=!0),e.firstContext=null)}function $t(e){var t=e._currentValue;if(Oc!==e)if(e={context:e,memoizedValue:t,next:null},cs===null){if(rl===null)throw Error(F(308));cs=e,rl.dependencies={lanes:0,firstContext:e}}else cs=cs.next=e;return t}var Er=null;function Dc(e){Er===null?Er=[e]:Er.push(e)}function bm(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Dc(t)):(n.next=s.next,s.next=n),t.interleaved=n,Tn(e,r)}function Tn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var $n=!1;function Ac(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Tn(e,n)}return s=r.interleaved,s===null?(t.next=t,Dc(r)):(t.next=s.next,s.next=t),r.interleaved=t,Tn(e,n)}function jo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ec(e,n)}}function kf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sl(e,t,n,r){var s=e.updateQueue;$n=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?i=c:o.next=c,o=a;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=c:l.next=c,m.lastBaseUpdate=a))}if(i!==null){var h=s.baseState;o=0,m=c=a=null,l=i;do{var y=l.lane,S=l.eventTime;if((r&y)===y){m!==null&&(m=m.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=e,E=l;switch(y=t,S=n,E.tag){case 1:if(k=E.payload,typeof k=="function"){h=k.call(S,h,y);break e}h=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=E.payload,y=typeof k=="function"?k.call(S,h,y):k,y==null)break e;h=Ie({},h,y);break e;case 2:$n=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,y=s.effects,y===null?s.effects=[l]:y.push(l))}else S={eventTime:S,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(c=m=S,a=h):m=m.next=S,o|=y;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;y=l,l=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(m===null&&(a=h),s.baseState=a,s.firstBaseUpdate=c,s.lastBaseUpdate=m,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Wr|=o,e.lanes=o,e.memoizedState=h}}function Cf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var Yi={},dn=hr(Yi),Ri=hr(Yi),Li=hr(Yi);function Nr(e){if(e===Yi)throw Error(F(174));return e}function $c(e,t){switch(Se(Li,t),Se(Ri,e),Se(dn,Yi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:eu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=eu(t,e)}Ce(dn),Se(dn,t)}function Ds(){Ce(dn),Ce(Ri),Ce(Li)}function Mm(e){Nr(Li.current);var t=Nr(dn.current),n=eu(t,e.type);t!==n&&(Se(Ri,e),Se(dn,n))}function Uc(e){Ri.current===e&&(Ce(dn),Ce(Ri))}var Le=hr(0);function il(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Na=[];function Bc(){for(var e=0;e<Na.length;e++)Na[e]._workInProgressVersionPrimary=null;Na.length=0}var Mo=_n.ReactCurrentDispatcher,ba=_n.ReactCurrentBatchConfig,Br=0,Te=null,He=null,Ge=null,ol=!1,hi=!1,Ti=0,F0=0;function rt(){throw Error(F(321))}function Wc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!en(e[n],t[n]))return!1;return!0}function Hc(e,t,n,r,s,i){if(Br=i,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Mo.current=e===null||e.memoizedState===null?$0:U0,e=n(r,s),hi){i=0;do{if(hi=!1,Ti=0,25<=i)throw Error(F(301));i+=1,Ge=He=null,t.updateQueue=null,Mo.current=B0,e=n(r,s)}while(hi)}if(Mo.current=ll,t=He!==null&&He.next!==null,Br=0,Ge=He=Te=null,ol=!1,t)throw Error(F(300));return e}function Vc(){var e=Ti!==0;return Ti=0,e}function sn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Te.memoizedState=Ge=e:Ge=Ge.next=e,Ge}function Ut(){if(He===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=Ge===null?Te.memoizedState:Ge.next;if(t!==null)Ge=t,He=e;else{if(e===null)throw Error(F(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ge===null?Te.memoizedState=Ge=e:Ge=Ge.next=e}return Ge}function Ii(e,t){return typeof t=="function"?t(e):t}function ja(e){var t=Ut(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var r=He,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,a=null,c=i;do{var m=c.lane;if((Br&m)===m)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:m,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=h,o=r):a=a.next=h,Te.lanes|=m,Wr|=m}c=c.next}while(c!==null&&c!==i);a===null?o=r:a.next=l,en(r,t.memoizedState)||(St=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Te.lanes|=i,Wr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ma(e){var t=Ut(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);en(i,t.memoizedState)||(St=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Rm(){}function Lm(e,t){var n=Te,r=Ut(),s=t(),i=!en(r.memoizedState,s);if(i&&(r.memoizedState=s,St=!0),r=r.queue,Qc(_m.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,_i(9,Im.bind(null,n,r,s,t),void 0,null),qe===null)throw Error(F(349));Br&30||Tm(n,t,s)}return s}function Tm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Im(e,t,n,r){t.value=n,t.getSnapshot=r,Pm(t)&&Om(e)}function _m(e,t,n){return n(function(){Pm(t)&&Om(e)})}function Pm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!en(e,n)}catch{return!0}}function Om(e){var t=Tn(e,1);t!==null&&Zt(t,e,1,-1)}function Ef(e){var t=sn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:e},t.queue=e,e=e.dispatch=A0.bind(null,Te,e),[t.memoizedState,e]}function _i(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Fm(){return Ut().memoizedState}function Ro(e,t,n,r){var s=sn();Te.flags|=e,s.memoizedState=_i(1|t,n,void 0,r===void 0?null:r)}function jl(e,t,n,r){var s=Ut();r=r===void 0?null:r;var i=void 0;if(He!==null){var o=He.memoizedState;if(i=o.destroy,r!==null&&Wc(r,o.deps)){s.memoizedState=_i(t,n,i,r);return}}Te.flags|=e,s.memoizedState=_i(1|t,n,i,r)}function Nf(e,t){return Ro(8390656,8,e,t)}function Qc(e,t){return jl(2048,8,e,t)}function zm(e,t){return jl(4,2,e,t)}function Dm(e,t){return jl(4,4,e,t)}function Am(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $m(e,t,n){return n=n!=null?n.concat([e]):null,jl(4,4,Am.bind(null,t,e),n)}function Kc(){}function Um(e,t){var n=Ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Bm(e,t){var n=Ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wm(e,t,n){return Br&21?(en(n,t)||(n=Yp(),Te.lanes|=n,Wr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,St=!0),e.memoizedState=n)}function z0(e,t){var n=xe;xe=n!==0&&4>n?n:4,e(!0);var r=ba.transition;ba.transition={};try{e(!1),t()}finally{xe=n,ba.transition=r}}function Hm(){return Ut().memoizedState}function D0(e,t,n){var r=or(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Vm(e))Qm(t,n);else if(n=bm(e,t,n,r),n!==null){var s=pt();Zt(n,e,r,s),Km(n,t,r)}}function A0(e,t,n){var r=or(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vm(e))Qm(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,en(l,o)){var a=t.interleaved;a===null?(s.next=s,Dc(t)):(s.next=a.next,a.next=s),t.interleaved=s;return}}catch{}finally{}n=bm(e,t,s,r),n!==null&&(s=pt(),Zt(n,e,r,s),Km(n,t,r))}}function Vm(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function Qm(e,t){hi=ol=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Km(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ec(e,n)}}var ll={readContext:$t,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},$0={readContext:$t,useCallback:function(e,t){return sn().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:Nf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ro(4194308,4,Am.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ro(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ro(4,2,e,t)},useMemo:function(e,t){var n=sn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=sn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=D0.bind(null,Te,e),[r.memoizedState,e]},useRef:function(e){var t=sn();return e={current:e},t.memoizedState=e},useState:Ef,useDebugValue:Kc,useDeferredValue:function(e){return sn().memoizedState=e},useTransition:function(){var e=Ef(!1),t=e[0];return e=z0.bind(null,e[1]),sn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Te,s=sn();if(Ne){if(n===void 0)throw Error(F(407));n=n()}else{if(n=t(),qe===null)throw Error(F(349));Br&30||Tm(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Nf(_m.bind(null,r,i,e),[e]),r.flags|=2048,_i(9,Im.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=sn(),t=qe.identifierPrefix;if(Ne){var n=Nn,r=En;n=(r&~(1<<32-Jt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ti++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=F0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},U0={readContext:$t,useCallback:Um,useContext:$t,useEffect:Qc,useImperativeHandle:$m,useInsertionEffect:zm,useLayoutEffect:Dm,useMemo:Bm,useReducer:ja,useRef:Fm,useState:function(){return ja(Ii)},useDebugValue:Kc,useDeferredValue:function(e){var t=Ut();return Wm(t,He.memoizedState,e)},useTransition:function(){var e=ja(Ii)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:Rm,useSyncExternalStore:Lm,useId:Hm,unstable_isNewReconciler:!1},B0={readContext:$t,useCallback:Um,useContext:$t,useEffect:Qc,useImperativeHandle:$m,useInsertionEffect:zm,useLayoutEffect:Dm,useMemo:Bm,useReducer:Ma,useRef:Fm,useState:function(){return Ma(Ii)},useDebugValue:Kc,useDeferredValue:function(e){var t=Ut();return He===null?t.memoizedState=e:Wm(t,He.memoizedState,e)},useTransition:function(){var e=Ma(Ii)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:Rm,useSyncExternalStore:Lm,useId:Hm,unstable_isNewReconciler:!1};function Vt(e,t){if(e&&e.defaultProps){t=Ie({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Su(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ie({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ml={isMounted:function(e){return(e=e._reactInternals)?Yr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=pt(),s=or(e),i=bn(r,s);i.payload=t,n!=null&&(i.callback=n),t=sr(e,i,s),t!==null&&(Zt(t,e,s,r),jo(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=pt(),s=or(e),i=bn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=sr(e,i,s),t!==null&&(Zt(t,e,s,r),jo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=pt(),r=or(e),s=bn(n,r);s.tag=2,t!=null&&(s.callback=t),t=sr(e,s,r),t!==null&&(Zt(t,e,r,n),jo(t,e,r))}};function bf(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ni(n,r)||!Ni(s,i):!0}function Ym(e,t,n){var r=!1,s=dr,i=t.contextType;return typeof i=="object"&&i!==null?i=$t(i):(s=Ct(t)?$r:ot.current,r=t.contextTypes,i=(r=r!=null)?Os(e,s):dr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ml,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function jf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ml.enqueueReplaceState(t,t.state,null)}function ku(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Ac(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=$t(i):(i=Ct(t)?$r:ot.current,s.context=Os(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Su(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ml.enqueueReplaceState(s,s.state,null),sl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function As(e,t){try{var n="",r=t;do n+=gy(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Ra(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Cu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var W0=typeof WeakMap=="function"?WeakMap:Map;function Gm(e,t,n){n=bn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ul||(ul=!0,_u=r),Cu(e,t)},n}function qm(e,t,n){n=bn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Cu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Cu(e,t),typeof r!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Mf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new W0;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=rx.bind(null,e,t,n),t.then(e,e))}function Rf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Lf(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bn(-1,1),t.tag=2,sr(n,t,1))),n.lanes|=1),e)}var H0=_n.ReactCurrentOwner,St=!1;function ft(e,t,n,r){t.child=e===null?Nm(t,null,n,r):zs(t,e.child,n,r)}function Tf(e,t,n,r,s){n=n.render;var i=t.ref;return vs(t,s),r=Hc(e,t,n,r,i,s),n=Vc(),e!==null&&!St?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,In(e,t,s)):(Ne&&n&&Ic(t),t.flags|=1,ft(e,t,r,s),t.child)}function If(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!td(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Xm(e,t,i,r,s)):(e=_o(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ni,n(o,r)&&e.ref===t.ref)return In(e,t,s)}return t.flags|=1,e=lr(i,r),e.ref=t.ref,e.return=t,t.child=e}function Xm(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ni(i,r)&&e.ref===t.ref)if(St=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(St=!0);else return t.lanes=e.lanes,In(e,t,s)}return Eu(e,t,n,r,s)}function Jm(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(fs,jt),jt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Se(fs,jt),jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Se(fs,jt),jt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Se(fs,jt),jt|=r;return ft(e,t,s,n),t.child}function Zm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eu(e,t,n,r,s){var i=Ct(n)?$r:ot.current;return i=Os(t,i),vs(t,s),n=Hc(e,t,n,r,i,s),r=Vc(),e!==null&&!St?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,In(e,t,s)):(Ne&&r&&Ic(t),t.flags|=1,ft(e,t,n,s),t.child)}function _f(e,t,n,r,s){if(Ct(n)){var i=!0;Zo(t)}else i=!1;if(vs(t,s),t.stateNode===null)Lo(e,t),Ym(t,n,r),ku(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=$t(c):(c=Ct(n)?$r:ot.current,c=Os(t,c));var m=n.getDerivedStateFromProps,h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&jf(t,o,r,c),$n=!1;var y=t.memoizedState;o.state=y,sl(t,r,o,s),a=t.memoizedState,l!==r||y!==a||kt.current||$n?(typeof m=="function"&&(Su(t,n,m,r),a=t.memoizedState),(l=$n||bf(t,n,l,r,y,a,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,jm(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Vt(t.type,l),o.props=c,h=t.pendingProps,y=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=$t(a):(a=Ct(n)?$r:ot.current,a=Os(t,a));var S=n.getDerivedStateFromProps;(m=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||y!==a)&&jf(t,o,r,a),$n=!1,y=t.memoizedState,o.state=y,sl(t,r,o,s);var k=t.memoizedState;l!==h||y!==k||kt.current||$n?(typeof S=="function"&&(Su(t,n,S,r),k=t.memoizedState),(c=$n||bf(t,n,c,r,y,k,a)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),o.props=r,o.state=k,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,i,s)}function Nu(e,t,n,r,s,i){Zm(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&yf(t,n,!1),In(e,t,i);r=t.stateNode,H0.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=zs(t,e.child,null,i),t.child=zs(t,null,l,i)):ft(e,t,l,i),t.memoizedState=r.state,s&&yf(t,n,!0),t.child}function eg(e){var t=e.stateNode;t.pendingContext?vf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vf(e,t.context,!1),$c(e,t.containerInfo)}function Pf(e,t,n,r,s){return Fs(),Pc(s),t.flags|=256,ft(e,t,n,r),t.child}var bu={dehydrated:null,treeContext:null,retryLane:0};function ju(e){return{baseLanes:e,cachePool:null,transitions:null}}function tg(e,t,n){var r=t.pendingProps,s=Le.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Se(Le,s&1),e===null)return xu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Tl(o,r,0,null),e=Ar(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ju(n),t.memoizedState=bu,e):Yc(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return V0(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=lr(s,a),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=lr(l,i):(i=Ar(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?ju(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=bu,r}return i=e.child,e=i.sibling,r=lr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Yc(e,t){return t=Tl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function po(e,t,n,r){return r!==null&&Pc(r),zs(t,e.child,null,n),e=Yc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function V0(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Ra(Error(F(422))),po(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Tl({mode:"visible",children:r.children},s,0,null),i=Ar(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&zs(t,e.child,null,o),t.child.memoizedState=ju(o),t.memoizedState=bu,i);if(!(t.mode&1))return po(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=Ra(i,r,void 0),po(e,t,o,r)}if(l=(o&e.childLanes)!==0,St||l){if(r=qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tn(e,s),Zt(r,e,s,-1))}return ed(),r=Ra(Error(F(421))),po(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=sx.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Mt=rr(s.nextSibling),Rt=t,Ne=!0,qt=null,e!==null&&(Ot[Ft++]=En,Ot[Ft++]=Nn,Ot[Ft++]=Ur,En=e.id,Nn=e.overflow,Ur=t),t=Yc(t,r.children),t.flags|=4096,t)}function Of(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),wu(e.return,t,n)}function La(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ng(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(ft(e,t,r.children,n),r=Le.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Of(e,n,t);else if(e.tag===19)Of(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Se(Le,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&il(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),La(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&il(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}La(t,!0,n,null,i);break;case"together":La(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Lo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function In(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Wr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(F(153));if(t.child!==null){for(e=t.child,n=lr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=lr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Q0(e,t,n){switch(t.tag){case 3:eg(t),Fs();break;case 5:Mm(t);break;case 1:Ct(t.type)&&Zo(t);break;case 4:$c(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Se(nl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Se(Le,Le.current&1),t.flags|=128,null):n&t.child.childLanes?tg(e,t,n):(Se(Le,Le.current&1),e=In(e,t,n),e!==null?e.sibling:null);Se(Le,Le.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return ng(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Se(Le,Le.current),r)break;return null;case 22:case 23:return t.lanes=0,Jm(e,t,n)}return In(e,t,n)}var rg,Mu,sg,ig;rg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Mu=function(){};sg=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Nr(dn.current);var i=null;switch(n){case"input":s=qa(e,s),r=qa(e,r),i=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),i=[];break;case"textarea":s=Za(e,s),r=Za(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Xo)}tu(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(yi.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var a=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(i||(i=[]),i.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(yi.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&ke("scroll",e),i||l===a||(i=[])):(i=i||[]).push(c,a))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};ig=function(e,t,n,r){n!==r&&(t.flags|=4)};function Zs(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function K0(e,t,n){var r=t.pendingProps;switch(_c(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return Ct(t.type)&&Jo(),st(t),null;case 3:return r=t.stateNode,Ds(),Ce(kt),Ce(ot),Bc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(fo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qt!==null&&(Fu(qt),qt=null))),Mu(e,t),st(t),null;case 5:Uc(t);var s=Nr(Li.current);if(n=t.type,e!==null&&t.stateNode!=null)sg(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(F(166));return st(t),null}if(e=Nr(dn.current),fo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[un]=t,r[Mi]=i,e=(t.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<ii.length;s++)ke(ii[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":Wd(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":Vd(r,i),ke("invalid",r)}tu(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&co(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&co(r.textContent,l,e),s=["children",""+l]):yi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":no(r),Hd(r,i,!0);break;case"textarea":no(r),Qd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Xo)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_p(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[un]=t,e[Mi]=r,rg(e,t,!1,!1),t.stateNode=e;e:{switch(o=nu(n,r),n){case"dialog":ke("cancel",e),ke("close",e),s=r;break;case"iframe":case"object":case"embed":ke("load",e),s=r;break;case"video":case"audio":for(s=0;s<ii.length;s++)ke(ii[s],e);s=r;break;case"source":ke("error",e),s=r;break;case"img":case"image":case"link":ke("error",e),ke("load",e),s=r;break;case"details":ke("toggle",e),s=r;break;case"input":Wd(e,r),s=qa(e,r),ke("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),ke("invalid",e);break;case"textarea":Vd(e,r),s=Za(e,r),ke("invalid",e);break;default:s=r}tu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?Fp(e,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Pp(e,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&xi(e,a):typeof a=="number"&&xi(e,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(yi.hasOwnProperty(i)?a!=null&&i==="onScroll"&&ke("scroll",e):a!=null&&yc(e,i,a,o))}switch(n){case"input":no(e),Hd(e,r,!1);break;case"textarea":no(e),Qd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+cr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?hs(e,!!r.multiple,i,!1):r.defaultValue!=null&&hs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Xo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return st(t),null;case 6:if(e&&t.stateNode!=null)ig(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(F(166));if(n=Nr(Li.current),Nr(dn.current),fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[un]=t,(i=r.nodeValue!==n)&&(e=Rt,e!==null))switch(e.tag){case 3:co(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&co(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=t,t.stateNode=r}return st(t),null;case 13:if(Ce(Le),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&Mt!==null&&t.mode&1&&!(t.flags&128))Cm(),Fs(),t.flags|=98560,i=!1;else if(i=fo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(F(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[un]=t}else Fs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;st(t),i=!1}else qt!==null&&(Fu(qt),qt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?Qe===0&&(Qe=3):ed())),t.updateQueue!==null&&(t.flags|=4),st(t),null);case 4:return Ds(),Mu(e,t),e===null&&bi(t.stateNode.containerInfo),st(t),null;case 10:return zc(t.type._context),st(t),null;case 17:return Ct(t.type)&&Jo(),st(t),null;case 19:if(Ce(Le),i=t.memoizedState,i===null)return st(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Zs(i,!1);else{if(Qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=il(e),o!==null){for(t.flags|=128,Zs(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Se(Le,Le.current&1|2),t.child}e=e.sibling}i.tail!==null&&$e()>$s&&(t.flags|=128,r=!0,Zs(i,!1),t.lanes=4194304)}else{if(!r)if(e=il(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Zs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ne)return st(t),null}else 2*$e()-i.renderingStartTime>$s&&n!==1073741824&&(t.flags|=128,r=!0,Zs(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=$e(),t.sibling=null,n=Le.current,Se(Le,r?n&1|2:n&1),t):(st(t),null);case 22:case 23:return Zc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?jt&1073741824&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),null;case 24:return null;case 25:return null}throw Error(F(156,t.tag))}function Y0(e,t){switch(_c(t),t.tag){case 1:return Ct(t.type)&&Jo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ds(),Ce(kt),Ce(ot),Bc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Uc(t),null;case 13:if(Ce(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(F(340));Fs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(Le),null;case 4:return Ds(),null;case 10:return zc(t.type._context),null;case 22:case 23:return Zc(),null;case 24:return null;default:return null}}var mo=!1,it=!1,G0=typeof WeakSet=="function"?WeakSet:Set,G=null;function ds(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(e,t,r)}else n.current=null}function Ru(e,t,n){try{n()}catch(r){Fe(e,t,r)}}var Ff=!1;function q0(e,t){if(fu=Yo,e=cm(),Tc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,m=0,h=e,y=null;t:for(;;){for(var S;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(a=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(S=h.firstChild)!==null;)y=h,h=S;for(;;){if(h===e)break t;if(y===n&&++c===s&&(l=o),y===i&&++m===r&&(a=o),(S=h.nextSibling)!==null)break;h=y,y=h.parentNode}h=S}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(hu={focusedElem:e,selectionRange:n},Yo=!1,G=t;G!==null;)if(t=G,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,G=e;else for(;G!==null;){t=G;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var E=k.memoizedProps,b=k.memoizedState,v=t.stateNode,g=v.getSnapshotBeforeUpdate(t.elementType===t.type?E:Vt(t.type,E),b);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(d){Fe(t,t.return,d)}if(e=t.sibling,e!==null){e.return=t.return,G=e;break}G=t.return}return k=Ff,Ff=!1,k}function pi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ru(t,n,i)}s=s.next}while(s!==r)}}function Rl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Lu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function og(e){var t=e.alternate;t!==null&&(e.alternate=null,og(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[un],delete t[Mi],delete t[gu],delete t[I0],delete t[_0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lg(e){return e.tag===5||e.tag===3||e.tag===4}function zf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Xo));else if(r!==4&&(e=e.child,e!==null))for(Tu(e,t,n),e=e.sibling;e!==null;)Tu(e,t,n),e=e.sibling}function Iu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Iu(e,t,n),e=e.sibling;e!==null;)Iu(e,t,n),e=e.sibling}var Je=null,Gt=!1;function Fn(e,t,n){for(n=n.child;n!==null;)ag(e,t,n),n=n.sibling}function ag(e,t,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Sl,n)}catch{}switch(n.tag){case 5:it||ds(n,t);case 6:var r=Je,s=Gt;Je=null,Fn(e,t,n),Je=r,Gt=s,Je!==null&&(Gt?(e=Je,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(Gt?(e=Je,n=n.stateNode,e.nodeType===8?Ca(e.parentNode,n):e.nodeType===1&&Ca(e,n),Ci(e)):Ca(Je,n.stateNode));break;case 4:r=Je,s=Gt,Je=n.stateNode.containerInfo,Gt=!0,Fn(e,t,n),Je=r,Gt=s;break;case 0:case 11:case 14:case 15:if(!it&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ru(n,t,o),s=s.next}while(s!==r)}Fn(e,t,n);break;case 1:if(!it&&(ds(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Fe(n,t,l)}Fn(e,t,n);break;case 21:Fn(e,t,n);break;case 22:n.mode&1?(it=(r=it)||n.memoizedState!==null,Fn(e,t,n),it=r):Fn(e,t,n);break;default:Fn(e,t,n)}}function Df(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new G0),t.forEach(function(r){var s=ix.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Wt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Je=l.stateNode,Gt=!1;break e;case 3:Je=l.stateNode.containerInfo,Gt=!0;break e;case 4:Je=l.stateNode.containerInfo,Gt=!0;break e}l=l.return}if(Je===null)throw Error(F(160));ag(i,o,s),Je=null,Gt=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(c){Fe(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ug(t,e),t=t.sibling}function ug(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Wt(t,e),rn(e),r&4){try{pi(3,e,e.return),Rl(3,e)}catch(E){Fe(e,e.return,E)}try{pi(5,e,e.return)}catch(E){Fe(e,e.return,E)}}break;case 1:Wt(t,e),rn(e),r&512&&n!==null&&ds(n,n.return);break;case 5:if(Wt(t,e),rn(e),r&512&&n!==null&&ds(n,n.return),e.flags&32){var s=e.stateNode;try{xi(s,"")}catch(E){Fe(e,e.return,E)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Tp(s,i),nu(l,o);var c=nu(l,i);for(o=0;o<a.length;o+=2){var m=a[o],h=a[o+1];m==="style"?Fp(s,h):m==="dangerouslySetInnerHTML"?Pp(s,h):m==="children"?xi(s,h):yc(s,m,h,c)}switch(l){case"input":Xa(s,i);break;case"textarea":Ip(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?hs(s,!!i.multiple,S,!1):y!==!!i.multiple&&(i.defaultValue!=null?hs(s,!!i.multiple,i.defaultValue,!0):hs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Mi]=i}catch(E){Fe(e,e.return,E)}}break;case 6:if(Wt(t,e),rn(e),r&4){if(e.stateNode===null)throw Error(F(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(E){Fe(e,e.return,E)}}break;case 3:if(Wt(t,e),rn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ci(t.containerInfo)}catch(E){Fe(e,e.return,E)}break;case 4:Wt(t,e),rn(e);break;case 13:Wt(t,e),rn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Xc=$e())),r&4&&Df(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(it=(c=it)||m,Wt(t,e),it=c):Wt(t,e),rn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!m&&e.mode&1)for(G=e,m=e.child;m!==null;){for(h=G=m;G!==null;){switch(y=G,S=y.child,y.tag){case 0:case 11:case 14:case 15:pi(4,y,y.return);break;case 1:ds(y,y.return);var k=y.stateNode;if(typeof k.componentWillUnmount=="function"){r=y,n=y.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(E){Fe(r,n,E)}}break;case 5:ds(y,y.return);break;case 22:if(y.memoizedState!==null){$f(h);continue}}S!==null?(S.return=y,G=S):$f(h)}m=m.sibling}e:for(m=null,h=e;;){if(h.tag===5){if(m===null){m=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,a=h.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Op("display",o))}catch(E){Fe(e,e.return,E)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(E){Fe(e,e.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Wt(t,e),rn(e),r&4&&Df(e);break;case 21:break;default:Wt(t,e),rn(e)}}function rn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(lg(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(xi(s,""),r.flags&=-33);var i=zf(e);Iu(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=zf(e);Tu(e,l,o);break;default:throw Error(F(161))}}catch(a){Fe(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function X0(e,t,n){G=e,cg(e)}function cg(e,t,n){for(var r=(e.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||mo;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||it;l=mo;var c=it;if(mo=o,(it=a)&&!c)for(G=s;G!==null;)o=G,a=o.child,o.tag===22&&o.memoizedState!==null?Uf(s):a!==null?(a.return=o,G=a):Uf(s);for(;i!==null;)G=i,cg(i),i=i.sibling;G=s,mo=l,it=c}Af(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):Af(e)}}function Af(e){for(;G!==null;){var t=G;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:it||Rl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!it)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Vt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Cf(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Cf(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var m=c.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&Ci(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}it||t.flags&512&&Lu(t)}catch(y){Fe(t,t.return,y)}}if(t===e){G=null;break}if(n=t.sibling,n!==null){n.return=t.return,G=n;break}G=t.return}}function $f(e){for(;G!==null;){var t=G;if(t===e){G=null;break}var n=t.sibling;if(n!==null){n.return=t.return,G=n;break}G=t.return}}function Uf(e){for(;G!==null;){var t=G;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Rl(4,t)}catch(a){Fe(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(a){Fe(t,s,a)}}var i=t.return;try{Lu(t)}catch(a){Fe(t,i,a)}break;case 5:var o=t.return;try{Lu(t)}catch(a){Fe(t,o,a)}}}catch(a){Fe(t,t.return,a)}if(t===e){G=null;break}var l=t.sibling;if(l!==null){l.return=t.return,G=l;break}G=t.return}}var J0=Math.ceil,al=_n.ReactCurrentDispatcher,Gc=_n.ReactCurrentOwner,At=_n.ReactCurrentBatchConfig,ge=0,qe=null,Ue=null,Ze=0,jt=0,fs=hr(0),Qe=0,Pi=null,Wr=0,Ll=0,qc=0,mi=null,wt=null,Xc=0,$s=1/0,yn=null,ul=!1,_u=null,ir=null,go=!1,Zn=null,cl=0,gi=0,Pu=null,To=-1,Io=0;function pt(){return ge&6?$e():To!==-1?To:To=$e()}function or(e){return e.mode&1?ge&2&&Ze!==0?Ze&-Ze:O0.transition!==null?(Io===0&&(Io=Yp()),Io):(e=xe,e!==0||(e=window.event,e=e===void 0?16:tm(e.type)),e):1}function Zt(e,t,n,r){if(50<gi)throw gi=0,Pu=null,Error(F(185));Vi(e,n,r),(!(ge&2)||e!==qe)&&(e===qe&&(!(ge&2)&&(Ll|=n),Qe===4&&Bn(e,Ze)),Et(e,r),n===1&&ge===0&&!(t.mode&1)&&($s=$e()+500,bl&&pr()))}function Et(e,t){var n=e.callbackNode;Oy(e,t);var r=Ko(e,e===qe?Ze:0);if(r===0)n!==null&&Gd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Gd(n),t===1)e.tag===0?P0(Bf.bind(null,e)):wm(Bf.bind(null,e)),L0(function(){!(ge&6)&&pr()}),n=null;else{switch(Gp(r)){case 1:n=Cc;break;case 4:n=Qp;break;case 16:n=Qo;break;case 536870912:n=Kp;break;default:n=Qo}n=yg(n,dg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function dg(e,t){if(To=-1,Io=0,ge&6)throw Error(F(327));var n=e.callbackNode;if(ys()&&e.callbackNode!==n)return null;var r=Ko(e,e===qe?Ze:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=dl(e,r);else{t=r;var s=ge;ge|=2;var i=hg();(qe!==e||Ze!==t)&&(yn=null,$s=$e()+500,Dr(e,t));do try{tx();break}catch(l){fg(e,l)}while(!0);Fc(),al.current=i,ge=s,Ue!==null?t=0:(qe=null,Ze=0,t=Qe)}if(t!==0){if(t===2&&(s=lu(e),s!==0&&(r=s,t=Ou(e,s))),t===1)throw n=Pi,Dr(e,0),Bn(e,r),Et(e,$e()),n;if(t===6)Bn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Z0(s)&&(t=dl(e,r),t===2&&(i=lu(e),i!==0&&(r=i,t=Ou(e,i))),t===1))throw n=Pi,Dr(e,0),Bn(e,r),Et(e,$e()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(F(345));case 2:kr(e,wt,yn);break;case 3:if(Bn(e,r),(r&130023424)===r&&(t=Xc+500-$e(),10<t)){if(Ko(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){pt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=mu(kr.bind(null,e,wt,yn),t);break}kr(e,wt,yn);break;case 4:if(Bn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Jt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*J0(r/1960))-r,10<r){e.timeoutHandle=mu(kr.bind(null,e,wt,yn),r);break}kr(e,wt,yn);break;case 5:kr(e,wt,yn);break;default:throw Error(F(329))}}}return Et(e,$e()),e.callbackNode===n?dg.bind(null,e):null}function Ou(e,t){var n=mi;return e.current.memoizedState.isDehydrated&&(Dr(e,t).flags|=256),e=dl(e,t),e!==2&&(t=wt,wt=n,t!==null&&Fu(t)),e}function Fu(e){wt===null?wt=e:wt.push.apply(wt,e)}function Z0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!en(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bn(e,t){for(t&=~qc,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Jt(t),r=1<<n;e[n]=-1,t&=~r}}function Bf(e){if(ge&6)throw Error(F(327));ys();var t=Ko(e,0);if(!(t&1))return Et(e,$e()),null;var n=dl(e,t);if(e.tag!==0&&n===2){var r=lu(e);r!==0&&(t=r,n=Ou(e,r))}if(n===1)throw n=Pi,Dr(e,0),Bn(e,t),Et(e,$e()),n;if(n===6)throw Error(F(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kr(e,wt,yn),Et(e,$e()),null}function Jc(e,t){var n=ge;ge|=1;try{return e(t)}finally{ge=n,ge===0&&($s=$e()+500,bl&&pr())}}function Hr(e){Zn!==null&&Zn.tag===0&&!(ge&6)&&ys();var t=ge;ge|=1;var n=At.transition,r=xe;try{if(At.transition=null,xe=1,e)return e()}finally{xe=r,At.transition=n,ge=t,!(ge&6)&&pr()}}function Zc(){jt=fs.current,Ce(fs)}function Dr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,R0(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(_c(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jo();break;case 3:Ds(),Ce(kt),Ce(ot),Bc();break;case 5:Uc(r);break;case 4:Ds();break;case 13:Ce(Le);break;case 19:Ce(Le);break;case 10:zc(r.type._context);break;case 22:case 23:Zc()}n=n.return}if(qe=e,Ue=e=lr(e.current,null),Ze=jt=t,Qe=0,Pi=null,qc=Ll=Wr=0,wt=mi=null,Er!==null){for(t=0;t<Er.length;t++)if(n=Er[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Er=null}return e}function fg(e,t){do{var n=Ue;try{if(Fc(),Mo.current=ll,ol){for(var r=Te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ol=!1}if(Br=0,Ge=He=Te=null,hi=!1,Ti=0,Gc.current=null,n===null||n.return===null){Qe=1,Pi=t,Ue=null;break}e:{var i=e,o=n.return,l=n,a=t;if(t=Ze,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,m=l,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var y=m.alternate;y?(m.updateQueue=y.updateQueue,m.memoizedState=y.memoizedState,m.lanes=y.lanes):(m.updateQueue=null,m.memoizedState=null)}var S=Rf(o);if(S!==null){S.flags&=-257,Lf(S,o,l,i,t),S.mode&1&&Mf(i,c,t),t=S,a=c;var k=t.updateQueue;if(k===null){var E=new Set;E.add(a),t.updateQueue=E}else k.add(a);break e}else{if(!(t&1)){Mf(i,c,t),ed();break e}a=Error(F(426))}}else if(Ne&&l.mode&1){var b=Rf(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Lf(b,o,l,i,t),Pc(As(a,l));break e}}i=a=As(a,l),Qe!==4&&(Qe=2),mi===null?mi=[i]:mi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=Gm(i,a,t);kf(i,v);break e;case 1:l=a;var g=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ir===null||!ir.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var d=qm(i,l,t);kf(i,d);break e}}i=i.return}while(i!==null)}mg(n)}catch(C){t=C,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function hg(){var e=al.current;return al.current=ll,e===null?ll:e}function ed(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),qe===null||!(Wr&268435455)&&!(Ll&268435455)||Bn(qe,Ze)}function dl(e,t){var n=ge;ge|=2;var r=hg();(qe!==e||Ze!==t)&&(yn=null,Dr(e,t));do try{ex();break}catch(s){fg(e,s)}while(!0);if(Fc(),ge=n,al.current=r,Ue!==null)throw Error(F(261));return qe=null,Ze=0,Qe}function ex(){for(;Ue!==null;)pg(Ue)}function tx(){for(;Ue!==null&&!by();)pg(Ue)}function pg(e){var t=vg(e.alternate,e,jt);e.memoizedProps=e.pendingProps,t===null?mg(e):Ue=t,Gc.current=null}function mg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Y0(n,t),n!==null){n.flags&=32767,Ue=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qe=6,Ue=null;return}}else if(n=K0(n,t,jt),n!==null){Ue=n;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);Qe===0&&(Qe=5)}function kr(e,t,n){var r=xe,s=At.transition;try{At.transition=null,xe=1,nx(e,t,n,r)}finally{At.transition=s,xe=r}return null}function nx(e,t,n,r){do ys();while(Zn!==null);if(ge&6)throw Error(F(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(F(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Fy(e,i),e===qe&&(Ue=qe=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||go||(go=!0,yg(Qo,function(){return ys(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=At.transition,At.transition=null;var o=xe;xe=1;var l=ge;ge|=4,Gc.current=null,q0(e,n),ug(n,e),k0(hu),Yo=!!fu,hu=fu=null,e.current=n,X0(n),jy(),ge=l,xe=o,At.transition=i}else e.current=n;if(go&&(go=!1,Zn=e,cl=s),i=e.pendingLanes,i===0&&(ir=null),Ly(n.stateNode),Et(e,$e()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ul)throw ul=!1,e=_u,_u=null,e;return cl&1&&e.tag!==0&&ys(),i=e.pendingLanes,i&1?e===Pu?gi++:(gi=0,Pu=e):gi=0,pr(),null}function ys(){if(Zn!==null){var e=Gp(cl),t=At.transition,n=xe;try{if(At.transition=null,xe=16>e?16:e,Zn===null)var r=!1;else{if(e=Zn,Zn=null,cl=0,ge&6)throw Error(F(331));var s=ge;for(ge|=4,G=e.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(G=c;G!==null;){var m=G;switch(m.tag){case 0:case 11:case 15:pi(8,m,i)}var h=m.child;if(h!==null)h.return=m,G=h;else for(;G!==null;){m=G;var y=m.sibling,S=m.return;if(og(m),m===c){G=null;break}if(y!==null){y.return=S,G=y;break}G=S}}}var k=i.alternate;if(k!==null){var E=k.child;if(E!==null){k.child=null;do{var b=E.sibling;E.sibling=null,E=b}while(E!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:pi(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,G=v;break e}G=i.return}}var g=e.current;for(G=g;G!==null;){o=G;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,G=p;else e:for(o=g;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Rl(9,l)}}catch(C){Fe(l,l.return,C)}if(l===o){G=null;break e}var d=l.sibling;if(d!==null){d.return=l.return,G=d;break e}G=l.return}}if(ge=s,pr(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Sl,e)}catch{}r=!0}return r}finally{xe=n,At.transition=t}}return!1}function Wf(e,t,n){t=As(n,t),t=Gm(e,t,1),e=sr(e,t,1),t=pt(),e!==null&&(Vi(e,1,t),Et(e,t))}function Fe(e,t,n){if(e.tag===3)Wf(e,e,n);else for(;t!==null;){if(t.tag===3){Wf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ir===null||!ir.has(r))){e=As(n,e),e=qm(t,e,1),t=sr(t,e,1),e=pt(),t!==null&&(Vi(t,1,e),Et(t,e));break}}t=t.return}}function rx(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=pt(),e.pingedLanes|=e.suspendedLanes&n,qe===e&&(Ze&n)===n&&(Qe===4||Qe===3&&(Ze&130023424)===Ze&&500>$e()-Xc?Dr(e,0):qc|=n),Et(e,t)}function gg(e,t){t===0&&(e.mode&1?(t=io,io<<=1,!(io&130023424)&&(io=4194304)):t=1);var n=pt();e=Tn(e,t),e!==null&&(Vi(e,t,n),Et(e,n))}function sx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),gg(e,n)}function ix(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(t),gg(e,n)}var vg;vg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||kt.current)St=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return St=!1,Q0(e,t,n);St=!!(e.flags&131072)}else St=!1,Ne&&t.flags&1048576&&Sm(t,tl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Lo(e,t),e=t.pendingProps;var s=Os(t,ot.current);vs(t,n),s=Hc(null,t,r,e,s,n);var i=Vc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ct(r)?(i=!0,Zo(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ac(t),s.updater=Ml,t.stateNode=s,s._reactInternals=t,ku(t,r,e,n),t=Nu(null,t,r,!0,i,n)):(t.tag=0,Ne&&i&&Ic(t),ft(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Lo(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=lx(r),e=Vt(r,e),s){case 0:t=Eu(null,t,r,e,n);break e;case 1:t=_f(null,t,r,e,n);break e;case 11:t=Tf(null,t,r,e,n);break e;case 14:t=If(null,t,r,Vt(r.type,e),n);break e}throw Error(F(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vt(r,s),Eu(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vt(r,s),_f(e,t,r,s,n);case 3:e:{if(eg(t),e===null)throw Error(F(387));r=t.pendingProps,i=t.memoizedState,s=i.element,jm(e,t),sl(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=As(Error(F(423)),t),t=Pf(e,t,r,n,s);break e}else if(r!==s){s=As(Error(F(424)),t),t=Pf(e,t,r,n,s);break e}else for(Mt=rr(t.stateNode.containerInfo.firstChild),Rt=t,Ne=!0,qt=null,n=Nm(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fs(),r===s){t=In(e,t,n);break e}ft(e,t,r,n)}t=t.child}return t;case 5:return Mm(t),e===null&&xu(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,pu(r,s)?o=null:i!==null&&pu(r,i)&&(t.flags|=32),Zm(e,t),ft(e,t,o,n),t.child;case 6:return e===null&&xu(t),null;case 13:return tg(e,t,n);case 4:return $c(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=zs(t,null,r,n):ft(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vt(r,s),Tf(e,t,r,s,n);case 7:return ft(e,t,t.pendingProps,n),t.child;case 8:return ft(e,t,t.pendingProps.children,n),t.child;case 12:return ft(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Se(nl,r._currentValue),r._currentValue=o,i!==null)if(en(i.value,o)){if(i.children===s.children&&!kt.current){t=In(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=bn(-1,n&-n),a.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var m=c.pending;m===null?a.next=a:(a.next=m.next,m.next=a),c.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),wu(i.return,n,t),l.lanes|=n;break}a=a.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),wu(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ft(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,vs(t,n),s=$t(s),r=r(s),t.flags|=1,ft(e,t,r,n),t.child;case 14:return r=t.type,s=Vt(r,t.pendingProps),s=Vt(r.type,s),If(e,t,r,s,n);case 15:return Xm(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vt(r,s),Lo(e,t),t.tag=1,Ct(r)?(e=!0,Zo(t)):e=!1,vs(t,n),Ym(t,r,s),ku(t,r,s,n),Nu(null,t,r,!0,e,n);case 19:return ng(e,t,n);case 22:return Jm(e,t,n)}throw Error(F(156,t.tag))};function yg(e,t){return Vp(e,t)}function ox(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,t,n,r){return new ox(e,t,n,r)}function td(e){return e=e.prototype,!(!e||!e.isReactComponent)}function lx(e){if(typeof e=="function")return td(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wc)return 11;if(e===Sc)return 14}return 2}function lr(e,t){var n=e.alternate;return n===null?(n=Dt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _o(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")td(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ns:return Ar(n.children,s,i,t);case xc:o=8,s|=8;break;case Qa:return e=Dt(12,n,t,s|2),e.elementType=Qa,e.lanes=i,e;case Ka:return e=Dt(13,n,t,s),e.elementType=Ka,e.lanes=i,e;case Ya:return e=Dt(19,n,t,s),e.elementType=Ya,e.lanes=i,e;case Mp:return Tl(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bp:o=10;break e;case jp:o=9;break e;case wc:o=11;break e;case Sc:o=14;break e;case An:o=16,r=null;break e}throw Error(F(130,e==null?e:typeof e,""))}return t=Dt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Ar(e,t,n,r){return e=Dt(7,e,r,t),e.lanes=n,e}function Tl(e,t,n,r){return e=Dt(22,e,r,t),e.elementType=Mp,e.lanes=n,e.stateNode={isHidden:!1},e}function Ta(e,t,n){return e=Dt(6,e,null,t),e.lanes=n,e}function Ia(e,t,n){return t=Dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ax(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fa(0),this.expirationTimes=fa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fa(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function nd(e,t,n,r,s,i,o,l,a){return e=new ax(e,t,n,l,a),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Dt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ac(i),e}function ux(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ts,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function xg(e){if(!e)return dr;e=e._reactInternals;e:{if(Yr(e)!==e||e.tag!==1)throw Error(F(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(F(171))}if(e.tag===1){var n=e.type;if(Ct(n))return xm(e,n,t)}return t}function wg(e,t,n,r,s,i,o,l,a){return e=nd(n,r,!0,e,s,i,o,l,a),e.context=xg(null),n=e.current,r=pt(),s=or(n),i=bn(r,s),i.callback=t??null,sr(n,i,s),e.current.lanes=s,Vi(e,s,r),Et(e,r),e}function Il(e,t,n,r){var s=t.current,i=pt(),o=or(s);return n=xg(n),t.context===null?t.context=n:t.pendingContext=n,t=bn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=sr(s,t,o),e!==null&&(Zt(e,s,o,i),jo(e,s,o)),o}function fl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Hf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function rd(e,t){Hf(e,t),(e=e.alternate)&&Hf(e,t)}function cx(){return null}var Sg=typeof reportError=="function"?reportError:function(e){console.error(e)};function sd(e){this._internalRoot=e}_l.prototype.render=sd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(F(409));Il(e,t,null,null)};_l.prototype.unmount=sd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hr(function(){Il(null,e,null,null)}),t[Ln]=null}};function _l(e){this._internalRoot=e}_l.prototype.unstable_scheduleHydration=function(e){if(e){var t=Jp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Un.length&&t!==0&&t<Un[n].priority;n++);Un.splice(n,0,e),n===0&&em(e)}};function id(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Vf(){}function dx(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=fl(o);i.call(c)}}var o=wg(t,r,e,0,null,!1,!1,"",Vf);return e._reactRootContainer=o,e[Ln]=o.current,bi(e.nodeType===8?e.parentNode:e),Hr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=fl(a);l.call(c)}}var a=nd(e,0,!1,null,null,!1,!1,"",Vf);return e._reactRootContainer=a,e[Ln]=a.current,bi(e.nodeType===8?e.parentNode:e),Hr(function(){Il(t,a,n,r)}),a}function Ol(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var a=fl(o);l.call(a)}}Il(t,o,e,s)}else o=dx(n,t,e,s,r);return fl(o)}qp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=si(t.pendingLanes);n!==0&&(Ec(t,n|1),Et(t,$e()),!(ge&6)&&($s=$e()+500,pr()))}break;case 13:Hr(function(){var r=Tn(e,1);if(r!==null){var s=pt();Zt(r,e,1,s)}}),rd(e,1)}};Nc=function(e){if(e.tag===13){var t=Tn(e,134217728);if(t!==null){var n=pt();Zt(t,e,134217728,n)}rd(e,134217728)}};Xp=function(e){if(e.tag===13){var t=or(e),n=Tn(e,t);if(n!==null){var r=pt();Zt(n,e,t,r)}rd(e,t)}};Jp=function(){return xe};Zp=function(e,t){var n=xe;try{return xe=e,t()}finally{xe=n}};su=function(e,t,n){switch(t){case"input":if(Xa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Nl(r);if(!s)throw Error(F(90));Lp(r),Xa(r,s)}}}break;case"textarea":Ip(e,n);break;case"select":t=n.value,t!=null&&hs(e,!!n.multiple,t,!1)}};Ap=Jc;$p=Hr;var fx={usingClientEntryPoint:!1,Events:[Ki,os,Nl,zp,Dp,Jc]},ei={findFiberByHostInstance:Cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hx={bundleType:ei.bundleType,version:ei.version,rendererPackageName:ei.rendererPackageName,rendererConfig:ei.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Wp(e),e===null?null:e.stateNode},findFiberByHostInstance:ei.findFiberByHostInstance||cx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vo.isDisabled&&vo.supportsFiber)try{Sl=vo.inject(hx),cn=vo}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fx;Tt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!id(t))throw Error(F(200));return ux(e,t,null,n)};Tt.createRoot=function(e,t){if(!id(e))throw Error(F(299));var n=!1,r="",s=Sg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=nd(e,1,!1,null,null,n,!1,r,s),e[Ln]=t.current,bi(e.nodeType===8?e.parentNode:e),new sd(t)};Tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(F(188)):(e=Object.keys(e).join(","),Error(F(268,e)));return e=Wp(t),e=e===null?null:e.stateNode,e};Tt.flushSync=function(e){return Hr(e)};Tt.hydrate=function(e,t,n){if(!Pl(t))throw Error(F(200));return Ol(null,e,t,!0,n)};Tt.hydrateRoot=function(e,t,n){if(!id(e))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Sg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=wg(t,null,e,1,n??null,s,!1,i,o),e[Ln]=t.current,bi(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new _l(t)};Tt.render=function(e,t,n){if(!Pl(t))throw Error(F(200));return Ol(null,e,t,!1,n)};Tt.unmountComponentAtNode=function(e){if(!Pl(e))throw Error(F(40));return e._reactRootContainer?(Hr(function(){Ol(null,null,e,!1,function(){e._reactRootContainer=null,e[Ln]=null})}),!0):!1};Tt.unstable_batchedUpdates=Jc;Tt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Pl(n))throw Error(F(200));if(e==null||e._reactInternals===void 0)throw Error(F(38));return Ol(e,t,n,!1,r)};Tt.version="18.3.1-next-f1338f8080-20240426";function kg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kg)}catch(e){console.error(e)}}kg(),kp.exports=Tt;var od=kp.exports,Cg,Qf=od;Cg=Qf.createRoot,Qf.hydrateRoot;var Hs=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},px={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Wn,dc,ep,mx=(ep=class{constructor(){ne(this,Wn,px);ne(this,dc,!1)}setTimeoutProvider(e){Q(this,Wn,e)}setTimeout(e,t){return w(this,Wn).setTimeout(e,t)}clearTimeout(e){w(this,Wn).clearTimeout(e)}setInterval(e,t){return w(this,Wn).setInterval(e,t)}clearInterval(e){w(this,Wn).clearInterval(e)}},Wn=new WeakMap,dc=new WeakMap,ep),br=new mx;function gx(e){setTimeout(e,0)}var Vr=typeof window>"u"||"Deno"in globalThis;function ht(){}function vx(e,t){return typeof e=="function"?e(t):e}function zu(e){return typeof e=="number"&&e>=0&&e!==1/0}function Eg(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ar(e,t){return typeof e=="function"?e(t):e}function Pt(e,t){return typeof e=="function"?e(t):e}function Kf(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==ld(o,t.options))return!1}else if(!Oi(t.queryKey,o))return!1}if(n!=="all"){const a=t.isActive();if(n==="active"&&!a||n==="inactive"&&a)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function Yf(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Qr(t.options.mutationKey)!==Qr(i))return!1}else if(!Oi(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function ld(e,t){return((t==null?void 0:t.queryKeyHashFn)||Qr)(e)}function Qr(e){return JSON.stringify(e,(t,n)=>Du(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Oi(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Oi(e[n],t[n])):!1}var yx=Object.prototype.hasOwnProperty;function Ng(e,t){if(e===t)return e;const n=Gf(e)&&Gf(t);if(!n&&!(Du(e)&&Du(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let a=0;for(let c=0;c<o;c++){const m=n?c:i[c],h=e[m],y=t[m];if(h===y){l[m]=h,(n?c<s:yx.call(e,m))&&a++;continue}if(h===null||y===null||typeof h!="object"||typeof y!="object"){l[m]=y;continue}const S=Ng(h,y);l[m]=S,S===h&&a++}return s===o&&a===s?e:l}function hl(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Gf(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Du(e){if(!qf(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!qf(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function qf(e){return Object.prototype.toString.call(e)==="[object Object]"}function xx(e){return new Promise(t=>{br.setTimeout(t,e)})}function Au(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Ng(e,t):t}function wx(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function Sx(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var ad=Symbol();function bg(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===ad?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function jg(e,t){return typeof e=="function"?e(...t):!!e}function kx(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var Rr,Hn,ks,tp,Cx=(tp=class extends Hs{constructor(){super();ne(this,Rr);ne(this,Hn);ne(this,ks);Q(this,ks,t=>{if(!Vr&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){w(this,Hn)||this.setEventListener(w(this,ks))}onUnsubscribe(){var t;this.hasListeners()||((t=w(this,Hn))==null||t.call(this),Q(this,Hn,void 0))}setEventListener(t){var n;Q(this,ks,t),(n=w(this,Hn))==null||n.call(this),Q(this,Hn,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){w(this,Rr)!==t&&(Q(this,Rr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof w(this,Rr)=="boolean"?w(this,Rr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Rr=new WeakMap,Hn=new WeakMap,ks=new WeakMap,tp),ud=new Cx;function $u(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var Ex=gx;function Nx(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=Ex;const i=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(a=>{n(a)})})})};return{batch:l=>{let a;t++;try{a=l()}finally{t--,t||o()}return a},batchCalls:l=>(...a)=>{i(()=>{l(...a)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Ve=Nx(),Cs,Vn,Es,np,bx=(np=class extends Hs{constructor(){super();ne(this,Cs,!0);ne(this,Vn);ne(this,Es);Q(this,Es,t=>{if(!Vr&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){w(this,Vn)||this.setEventListener(w(this,Es))}onUnsubscribe(){var t;this.hasListeners()||((t=w(this,Vn))==null||t.call(this),Q(this,Vn,void 0))}setEventListener(t){var n;Q(this,Es,t),(n=w(this,Vn))==null||n.call(this),Q(this,Vn,t(this.setOnline.bind(this)))}setOnline(t){w(this,Cs)!==t&&(Q(this,Cs,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return w(this,Cs)}},Cs=new WeakMap,Vn=new WeakMap,Es=new WeakMap,np),pl=new bx;function jx(e){return Math.min(1e3*2**e,3e4)}function Mg(e){return(e??"online")==="online"?pl.isOnline():!0}var Uu=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Rg(e){let t=!1,n=0,r;const s=$u(),i=()=>s.status!=="pending",o=E=>{var b;if(!i()){const v=new Uu(E);y(v),(b=e.onCancel)==null||b.call(e,v)}},l=()=>{t=!0},a=()=>{t=!1},c=()=>ud.isFocused()&&(e.networkMode==="always"||pl.isOnline())&&e.canRun(),m=()=>Mg(e.networkMode)&&e.canRun(),h=E=>{i()||(r==null||r(),s.resolve(E))},y=E=>{i()||(r==null||r(),s.reject(E))},S=()=>new Promise(E=>{var b;r=v=>{(i()||c())&&E(v)},(b=e.onPause)==null||b.call(e)}).then(()=>{var E;r=void 0,i()||(E=e.onContinue)==null||E.call(e)}),k=()=>{if(i())return;let E;const b=n===0?e.initialPromise:void 0;try{E=b??e.fn()}catch(v){E=Promise.reject(v)}Promise.resolve(E).then(h).catch(v=>{var M;if(i())return;const g=e.retry??(Vr?0:3),p=e.retryDelay??jx,d=typeof p=="function"?p(n,v):p,C=g===!0||typeof g=="number"&&n<g||typeof g=="function"&&g(n,v);if(t||!C){y(v);return}n++,(M=e.onFail)==null||M.call(e,n,v),xx(d).then(()=>c()?void 0:S()).then(()=>{t?y(v):k()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:a,canStart:m,start:()=>(m()?k():S().then(k),s)}}var Lr,rp,Lg=(rp=class{constructor(){ne(this,Lr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),zu(this.gcTime)&&Q(this,Lr,br.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Vr?1/0:5*60*1e3))}clearGcTimeout(){w(this,Lr)&&(br.clearTimeout(w(this,Lr)),Q(this,Lr,void 0))}},Lr=new WeakMap,rp),Tr,Ns,_t,Ir,Ye,Ai,_r,Kt,vn,sp,Mx=(sp=class extends Lg{constructor(t){super();ne(this,Kt);ne(this,Tr);ne(this,Ns);ne(this,_t);ne(this,Ir);ne(this,Ye);ne(this,Ai);ne(this,_r);Q(this,_r,!1),Q(this,Ai,t.defaultOptions),this.setOptions(t.options),this.observers=[],Q(this,Ir,t.client),Q(this,_t,w(this,Ir).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Q(this,Tr,Jf(this.options)),this.state=t.state??w(this,Tr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=w(this,Ye))==null?void 0:t.promise}setOptions(t){if(this.options={...w(this,Ai),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Jf(this.options);n.data!==void 0&&(this.setState(Xf(n.data,n.dataUpdatedAt)),Q(this,Tr,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&w(this,_t).remove(this)}setData(t,n){const r=Au(this.state.data,t,this.options);return ae(this,Kt,vn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ae(this,Kt,vn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=w(this,Ye))==null?void 0:r.promise;return(s=w(this,Ye))==null||s.cancel(t),n?n.then(ht).catch(ht):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(w(this,Tr))}isActive(){return this.observers.some(t=>Pt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ad||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ar(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Eg(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=w(this,Ye))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=w(this,Ye))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),w(this,_t).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(w(this,Ye)&&(w(this,_r)?w(this,Ye).cancel({revert:!0}):w(this,Ye).cancelRetry()),this.scheduleGc()),w(this,_t).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ae(this,Kt,vn).call(this,{type:"invalidate"})}async fetch(t,n){var a,c,m,h,y,S,k,E,b,v,g,p;if(this.state.fetchStatus!=="idle"&&((a=w(this,Ye))==null?void 0:a.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(w(this,Ye))return w(this,Ye).continueRetry(),w(this,Ye).promise}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(C=>C.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,s=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(Q(this,_r,!0),r.signal)})},i=()=>{const d=bg(this.options,n),M=(()=>{const T={client:w(this,Ir),queryKey:this.queryKey,meta:this.meta};return s(T),T})();return Q(this,_r,!1),this.options.persister?this.options.persister(d,M,this):d(M)},l=(()=>{const d={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:w(this,Ir),state:this.state,fetchFn:i};return s(d),d})();(c=this.options.behavior)==null||c.onFetch(l,this),Q(this,Ns,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=l.fetchOptions)==null?void 0:m.meta))&&ae(this,Kt,vn).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),Q(this,Ye,Rg({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:d=>{d instanceof Uu&&d.revert&&this.setState({...w(this,Ns),fetchStatus:"idle"}),r.abort()},onFail:(d,C)=>{ae(this,Kt,vn).call(this,{type:"failed",failureCount:d,error:C})},onPause:()=>{ae(this,Kt,vn).call(this,{type:"pause"})},onContinue:()=>{ae(this,Kt,vn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const d=await w(this,Ye).start();if(d===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(d),(S=(y=w(this,_t).config).onSuccess)==null||S.call(y,d,this),(E=(k=w(this,_t).config).onSettled)==null||E.call(k,d,this.state.error,this),d}catch(d){if(d instanceof Uu){if(d.silent)return w(this,Ye).promise;if(d.revert){if(this.state.data===void 0)throw d;return this.state.data}}throw ae(this,Kt,vn).call(this,{type:"error",error:d}),(v=(b=w(this,_t).config).onError)==null||v.call(b,d,this),(p=(g=w(this,_t).config).onSettled)==null||p.call(g,this.state.data,d,this),d}finally{this.scheduleGc()}}},Tr=new WeakMap,Ns=new WeakMap,_t=new WeakMap,Ir=new WeakMap,Ye=new WeakMap,Ai=new WeakMap,_r=new WeakMap,Kt=new WeakSet,vn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Tg(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...Xf(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Q(this,Ns,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Ve.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),w(this,_t).notify({query:this,type:"updated",action:t})})},sp);function Tg(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Mg(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Xf(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Jf(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var yt,fe,$i,ct,Pr,bs,wn,Qn,Ui,js,Ms,Or,Fr,Kn,Rs,ye,oi,Bu,Wu,Hu,Vu,Qu,Ku,Yu,Ig,ip,Rx=(ip=class extends Hs{constructor(t,n){super();ne(this,ye);ne(this,yt);ne(this,fe);ne(this,$i);ne(this,ct);ne(this,Pr);ne(this,bs);ne(this,wn);ne(this,Qn);ne(this,Ui);ne(this,js);ne(this,Ms);ne(this,Or);ne(this,Fr);ne(this,Kn);ne(this,Rs,new Set);this.options=n,Q(this,yt,t),Q(this,Qn,null),Q(this,wn,$u()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(w(this,fe).addObserver(this),Zf(w(this,fe),this.options)?ae(this,ye,oi).call(this):this.updateResult(),ae(this,ye,Vu).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gu(w(this,fe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gu(w(this,fe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ae(this,ye,Qu).call(this),ae(this,ye,Ku).call(this),w(this,fe).removeObserver(this)}setOptions(t){const n=this.options,r=w(this,fe);if(this.options=w(this,yt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Pt(this.options.enabled,w(this,fe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ae(this,ye,Yu).call(this),w(this,fe).setOptions(this.options),n._defaulted&&!hl(this.options,n)&&w(this,yt).getQueryCache().notify({type:"observerOptionsUpdated",query:w(this,fe),observer:this});const s=this.hasListeners();s&&eh(w(this,fe),r,this.options,n)&&ae(this,ye,oi).call(this),this.updateResult(),s&&(w(this,fe)!==r||Pt(this.options.enabled,w(this,fe))!==Pt(n.enabled,w(this,fe))||ar(this.options.staleTime,w(this,fe))!==ar(n.staleTime,w(this,fe)))&&ae(this,ye,Bu).call(this);const i=ae(this,ye,Wu).call(this);s&&(w(this,fe)!==r||Pt(this.options.enabled,w(this,fe))!==Pt(n.enabled,w(this,fe))||i!==w(this,Kn))&&ae(this,ye,Hu).call(this,i)}getOptimisticResult(t){const n=w(this,yt).getQueryCache().build(w(this,yt),t),r=this.createResult(n,t);return Tx(this,r)&&(Q(this,ct,r),Q(this,bs,this.options),Q(this,Pr,w(this,fe).state)),r}getCurrentResult(){return w(this,ct)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&w(this,wn).status==="pending"&&w(this,wn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){w(this,Rs).add(t)}getCurrentQuery(){return w(this,fe)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=w(this,yt).defaultQueryOptions(t),r=w(this,yt).getQueryCache().build(w(this,yt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ae(this,ye,oi).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),w(this,ct)))}createResult(t,n){var I;const r=w(this,fe),s=this.options,i=w(this,ct),o=w(this,Pr),l=w(this,bs),c=t!==r?t.state:w(this,$i),{state:m}=t;let h={...m},y=!1,S;if(n._optimisticResults){const N=this.hasListeners(),z=!N&&Zf(t,n),J=N&&eh(t,r,n,s);(z||J)&&(h={...h,...Tg(m.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:k,errorUpdatedAt:E,status:b}=h;S=h.data;let v=!1;if(n.placeholderData!==void 0&&S===void 0&&b==="pending"){let N;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(N=i.data,v=!0):N=typeof n.placeholderData=="function"?n.placeholderData((I=w(this,Ms))==null?void 0:I.state.data,w(this,Ms)):n.placeholderData,N!==void 0&&(b="success",S=Au(i==null?void 0:i.data,N,n),y=!0)}if(n.select&&S!==void 0&&!v)if(i&&S===(o==null?void 0:o.data)&&n.select===w(this,Ui))S=w(this,js);else try{Q(this,Ui,n.select),S=n.select(S),S=Au(i==null?void 0:i.data,S,n),Q(this,js,S),Q(this,Qn,null)}catch(N){Q(this,Qn,N)}w(this,Qn)&&(k=w(this,Qn),S=w(this,js),E=Date.now(),b="error");const g=h.fetchStatus==="fetching",p=b==="pending",d=b==="error",C=p&&g,M=S!==void 0,j={status:b,fetchStatus:h.fetchStatus,isPending:p,isSuccess:b==="success",isError:d,isInitialLoading:C,isLoading:C,data:S,dataUpdatedAt:h.dataUpdatedAt,error:k,errorUpdatedAt:E,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:g,isRefetching:g&&!p,isLoadingError:d&&!M,isPaused:h.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:d&&M,isStale:cd(t,n),refetch:this.refetch,promise:w(this,wn),isEnabled:Pt(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const N=U=>{j.status==="error"?U.reject(j.error):j.data!==void 0&&U.resolve(j.data)},z=()=>{const U=Q(this,wn,j.promise=$u());N(U)},J=w(this,wn);switch(J.status){case"pending":t.queryHash===r.queryHash&&N(J);break;case"fulfilled":(j.status==="error"||j.data!==J.value)&&z();break;case"rejected":(j.status!=="error"||j.error!==J.reason)&&z();break}}return j}updateResult(){const t=w(this,ct),n=this.createResult(w(this,fe),this.options);if(Q(this,Pr,w(this,fe).state),Q(this,bs,this.options),w(this,Pr).data!==void 0&&Q(this,Ms,w(this,fe)),hl(n,t))return;Q(this,ct,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!w(this,Rs).size)return!0;const o=new Set(i??w(this,Rs));return this.options.throwOnError&&o.add("error"),Object.keys(w(this,ct)).some(l=>{const a=l;return w(this,ct)[a]!==t[a]&&o.has(a)})};ae(this,ye,Ig).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ae(this,ye,Vu).call(this)}},yt=new WeakMap,fe=new WeakMap,$i=new WeakMap,ct=new WeakMap,Pr=new WeakMap,bs=new WeakMap,wn=new WeakMap,Qn=new WeakMap,Ui=new WeakMap,js=new WeakMap,Ms=new WeakMap,Or=new WeakMap,Fr=new WeakMap,Kn=new WeakMap,Rs=new WeakMap,ye=new WeakSet,oi=function(t){ae(this,ye,Yu).call(this);let n=w(this,fe).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(ht)),n},Bu=function(){ae(this,ye,Qu).call(this);const t=ar(this.options.staleTime,w(this,fe));if(Vr||w(this,ct).isStale||!zu(t))return;const r=Eg(w(this,ct).dataUpdatedAt,t)+1;Q(this,Or,br.setTimeout(()=>{w(this,ct).isStale||this.updateResult()},r))},Wu=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(w(this,fe)):this.options.refetchInterval)??!1},Hu=function(t){ae(this,ye,Ku).call(this),Q(this,Kn,t),!(Vr||Pt(this.options.enabled,w(this,fe))===!1||!zu(w(this,Kn))||w(this,Kn)===0)&&Q(this,Fr,br.setInterval(()=>{(this.options.refetchIntervalInBackground||ud.isFocused())&&ae(this,ye,oi).call(this)},w(this,Kn)))},Vu=function(){ae(this,ye,Bu).call(this),ae(this,ye,Hu).call(this,ae(this,ye,Wu).call(this))},Qu=function(){w(this,Or)&&(br.clearTimeout(w(this,Or)),Q(this,Or,void 0))},Ku=function(){w(this,Fr)&&(br.clearInterval(w(this,Fr)),Q(this,Fr,void 0))},Yu=function(){const t=w(this,yt).getQueryCache().build(w(this,yt),this.options);if(t===w(this,fe))return;const n=w(this,fe);Q(this,fe,t),Q(this,$i,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},Ig=function(t){Ve.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(w(this,ct))}),w(this,yt).getQueryCache().notify({query:w(this,fe),type:"observerResultsUpdated"})})},ip);function Lx(e,t){return Pt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Zf(e,t){return Lx(e,t)||e.state.data!==void 0&&Gu(e,t,t.refetchOnMount)}function Gu(e,t,n){if(Pt(t.enabled,e)!==!1&&ar(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&cd(e,t)}return!1}function eh(e,t,n,r){return(e!==t||Pt(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&cd(e,n)}function cd(e,t){return Pt(t.enabled,e)!==!1&&e.isStaleByTime(ar(t.staleTime,e))}function Tx(e,t){return!hl(e.getCurrentResult(),t)}function th(e){return{onFetch:(t,n)=>{var m,h,y,S,k;const r=t.options,s=(y=(h=(m=t.fetchOptions)==null?void 0:m.meta)==null?void 0:h.fetchMore)==null?void 0:y.direction,i=((S=t.state.data)==null?void 0:S.pages)||[],o=((k=t.state.data)==null?void 0:k.pageParams)||[];let l={pages:[],pageParams:[]},a=0;const c=async()=>{let E=!1;const b=p=>{kx(p,()=>t.signal,()=>E=!0)},v=bg(t.options,t.fetchOptions),g=async(p,d,C)=>{if(E)return Promise.reject();if(d==null&&p.pages.length)return Promise.resolve(p);const T=(()=>{const z={client:t.client,queryKey:t.queryKey,pageParam:d,direction:C?"backward":"forward",meta:t.options.meta};return b(z),z})(),j=await v(T),{maxPages:I}=t.options,N=C?Sx:wx;return{pages:N(p.pages,j,I),pageParams:N(p.pageParams,d,I)}};if(s&&i.length){const p=s==="backward",d=p?Ix:nh,C={pages:i,pageParams:o},M=d(r,C);l=await g(C,M,p)}else{const p=e??i.length;do{const d=a===0?o[0]??r.initialPageParam:nh(r,l);if(a>0&&d==null)break;l=await g(l,d),a++}while(a<p)}return l};t.options.persister?t.fetchFn=()=>{var E,b;return(b=(E=t.options).persister)==null?void 0:b.call(E,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function nh(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Ix(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Bi,on,dt,zr,ln,Dn,op,_x=(op=class extends Lg{constructor(t){super();ne(this,ln);ne(this,Bi);ne(this,on);ne(this,dt);ne(this,zr);Q(this,Bi,t.client),this.mutationId=t.mutationId,Q(this,dt,t.mutationCache),Q(this,on,[]),this.state=t.state||_g(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){w(this,on).includes(t)||(w(this,on).push(t),this.clearGcTimeout(),w(this,dt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Q(this,on,w(this,on).filter(n=>n!==t)),this.scheduleGc(),w(this,dt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){w(this,on).length||(this.state.status==="pending"?this.scheduleGc():w(this,dt).remove(this))}continue(){var t;return((t=w(this,zr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,a,c,m,h,y,S,k,E,b,v,g,p,d,C,M,T,j,I;const n=()=>{ae(this,ln,Dn).call(this,{type:"continue"})},r={client:w(this,Bi),meta:this.options.meta,mutationKey:this.options.mutationKey};Q(this,zr,Rg({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(N,z)=>{ae(this,ln,Dn).call(this,{type:"failed",failureCount:N,error:z})},onPause:()=>{ae(this,ln,Dn).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>w(this,dt).canRun(this)}));const s=this.state.status==="pending",i=!w(this,zr).canStart();try{if(s)n();else{ae(this,ln,Dn).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=w(this,dt).config).onMutate)==null?void 0:l.call(o,t,this,r));const z=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,t,r));z!==this.state.context&&ae(this,ln,Dn).call(this,{type:"pending",context:z,variables:t,isPaused:i})}const N=await w(this,zr).start();return await((h=(m=w(this,dt).config).onSuccess)==null?void 0:h.call(m,N,t,this.state.context,this,r)),await((S=(y=this.options).onSuccess)==null?void 0:S.call(y,N,t,this.state.context,r)),await((E=(k=w(this,dt).config).onSettled)==null?void 0:E.call(k,N,null,this.state.variables,this.state.context,this,r)),await((v=(b=this.options).onSettled)==null?void 0:v.call(b,N,null,t,this.state.context,r)),ae(this,ln,Dn).call(this,{type:"success",data:N}),N}catch(N){try{await((p=(g=w(this,dt).config).onError)==null?void 0:p.call(g,N,t,this.state.context,this,r))}catch(z){Promise.reject(z)}try{await((C=(d=this.options).onError)==null?void 0:C.call(d,N,t,this.state.context,r))}catch(z){Promise.reject(z)}try{await((T=(M=w(this,dt).config).onSettled)==null?void 0:T.call(M,void 0,N,this.state.variables,this.state.context,this,r))}catch(z){Promise.reject(z)}try{await((I=(j=this.options).onSettled)==null?void 0:I.call(j,void 0,N,t,this.state.context,r))}catch(z){Promise.reject(z)}throw ae(this,ln,Dn).call(this,{type:"error",error:N}),N}finally{w(this,dt).runNext(this)}}},Bi=new WeakMap,on=new WeakMap,dt=new WeakMap,zr=new WeakMap,ln=new WeakSet,Dn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ve.batch(()=>{w(this,on).forEach(r=>{r.onMutationUpdate(t)}),w(this,dt).notify({mutation:this,type:"updated",action:t})})},op);function _g(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Sn,Yt,Wi,lp,Px=(lp=class extends Hs{constructor(t={}){super();ne(this,Sn);ne(this,Yt);ne(this,Wi);this.config=t,Q(this,Sn,new Set),Q(this,Yt,new Map),Q(this,Wi,0)}build(t,n,r){const s=new _x({client:t,mutationCache:this,mutationId:++Zi(this,Wi)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){w(this,Sn).add(t);const n=yo(t);if(typeof n=="string"){const r=w(this,Yt).get(n);r?r.push(t):w(this,Yt).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(w(this,Sn).delete(t)){const n=yo(t);if(typeof n=="string"){const r=w(this,Yt).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&w(this,Yt).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=yo(t);if(typeof n=="string"){const r=w(this,Yt).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=yo(t);if(typeof n=="string"){const s=(r=w(this,Yt).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ve.batch(()=>{w(this,Sn).forEach(t=>{this.notify({type:"removed",mutation:t})}),w(this,Sn).clear(),w(this,Yt).clear()})}getAll(){return Array.from(w(this,Sn))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Yf(n,r))}findAll(t={}){return this.getAll().filter(n=>Yf(t,n))}notify(t){Ve.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Ve.batch(()=>Promise.all(t.map(n=>n.continue().catch(ht))))}},Sn=new WeakMap,Yt=new WeakMap,Wi=new WeakMap,lp);function yo(e){var t;return(t=e.options.scope)==null?void 0:t.id}var kn,Yn,xt,Cn,Mn,Po,qu,ap,Ox=(ap=class extends Hs{constructor(n,r){super();ne(this,Mn);ne(this,kn);ne(this,Yn);ne(this,xt);ne(this,Cn);Q(this,kn,n),this.setOptions(r),this.bindMethods(),ae(this,Mn,Po).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=w(this,kn).defaultMutationOptions(n),hl(this.options,r)||w(this,kn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:w(this,xt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Qr(r.mutationKey)!==Qr(this.options.mutationKey)?this.reset():((s=w(this,xt))==null?void 0:s.state.status)==="pending"&&w(this,xt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=w(this,xt))==null||n.removeObserver(this)}onMutationUpdate(n){ae(this,Mn,Po).call(this),ae(this,Mn,qu).call(this,n)}getCurrentResult(){return w(this,Yn)}reset(){var n;(n=w(this,xt))==null||n.removeObserver(this),Q(this,xt,void 0),ae(this,Mn,Po).call(this),ae(this,Mn,qu).call(this)}mutate(n,r){var s;return Q(this,Cn,r),(s=w(this,xt))==null||s.removeObserver(this),Q(this,xt,w(this,kn).getMutationCache().build(w(this,kn),this.options)),w(this,xt).addObserver(this),w(this,xt).execute(n)}},kn=new WeakMap,Yn=new WeakMap,xt=new WeakMap,Cn=new WeakMap,Mn=new WeakSet,Po=function(){var r;const n=((r=w(this,xt))==null?void 0:r.state)??_g();Q(this,Yn,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},qu=function(n){Ve.batch(()=>{var r,s,i,o,l,a,c,m;if(w(this,Cn)&&this.hasListeners()){const h=w(this,Yn).variables,y=w(this,Yn).context,S={client:w(this,kn),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=w(this,Cn)).onSuccess)==null||s.call(r,n.data,h,y,S)}catch(k){Promise.reject(k)}try{(o=(i=w(this,Cn)).onSettled)==null||o.call(i,n.data,null,h,y,S)}catch(k){Promise.reject(k)}}else if((n==null?void 0:n.type)==="error"){try{(a=(l=w(this,Cn)).onError)==null||a.call(l,n.error,h,y,S)}catch(k){Promise.reject(k)}try{(m=(c=w(this,Cn)).onSettled)==null||m.call(c,void 0,n.error,h,y,S)}catch(k){Promise.reject(k)}}}this.listeners.forEach(h=>{h(w(this,Yn))})})},ap),an,up,Fx=(up=class extends Hs{constructor(t={}){super();ne(this,an);this.config=t,Q(this,an,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??ld(s,n);let o=this.get(i);return o||(o=new Mx({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){w(this,an).has(t.queryHash)||(w(this,an).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=w(this,an).get(t.queryHash);n&&(t.destroy(),n===t&&w(this,an).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ve.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return w(this,an).get(t)}getAll(){return[...w(this,an).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Kf(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Kf(t,r)):n}notify(t){Ve.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Ve.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ve.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},an=new WeakMap,up),Oe,Gn,qn,Ls,Ts,Xn,Is,_s,cp,zx=(cp=class{constructor(e={}){ne(this,Oe);ne(this,Gn);ne(this,qn);ne(this,Ls);ne(this,Ts);ne(this,Xn);ne(this,Is);ne(this,_s);Q(this,Oe,e.queryCache||new Fx),Q(this,Gn,e.mutationCache||new Px),Q(this,qn,e.defaultOptions||{}),Q(this,Ls,new Map),Q(this,Ts,new Map),Q(this,Xn,0)}mount(){Zi(this,Xn)._++,w(this,Xn)===1&&(Q(this,Is,ud.subscribe(async e=>{e&&(await this.resumePausedMutations(),w(this,Oe).onFocus())})),Q(this,_s,pl.subscribe(async e=>{e&&(await this.resumePausedMutations(),w(this,Oe).onOnline())})))}unmount(){var e,t;Zi(this,Xn)._--,w(this,Xn)===0&&((e=w(this,Is))==null||e.call(this),Q(this,Is,void 0),(t=w(this,_s))==null||t.call(this),Q(this,_s,void 0))}isFetching(e){return w(this,Oe).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return w(this,Gn).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=w(this,Oe).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=w(this,Oe).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(ar(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return w(this,Oe).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=w(this,Oe).get(r.queryHash),i=s==null?void 0:s.state.data,o=vx(t,i);if(o!==void 0)return w(this,Oe).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Ve.batch(()=>w(this,Oe).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=w(this,Oe).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=w(this,Oe);Ve.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=w(this,Oe);return Ve.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Ve.batch(()=>w(this,Oe).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(ht).catch(ht)}invalidateQueries(e,t={}){return Ve.batch(()=>(w(this,Oe).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Ve.batch(()=>w(this,Oe).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(ht)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ht)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=w(this,Oe).build(this,t);return n.isStaleByTime(ar(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ht).catch(ht)}fetchInfiniteQuery(e){return e.behavior=th(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ht).catch(ht)}ensureInfiniteQueryData(e){return e.behavior=th(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return pl.isOnline()?w(this,Gn).resumePausedMutations():Promise.resolve()}getQueryCache(){return w(this,Oe)}getMutationCache(){return w(this,Gn)}getDefaultOptions(){return w(this,qn)}setDefaultOptions(e){Q(this,qn,e)}setQueryDefaults(e,t){w(this,Ls).set(Qr(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...w(this,Ls).values()],n={};return t.forEach(r=>{Oi(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){w(this,Ts).set(Qr(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...w(this,Ts).values()],n={};return t.forEach(r=>{Oi(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...w(this,qn).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=ld(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ad&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...w(this,qn).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){w(this,Oe).clear(),w(this,Gn).clear()}},Oe=new WeakMap,Gn=new WeakMap,qn=new WeakMap,Ls=new WeakMap,Ts=new WeakMap,Xn=new WeakMap,Is=new WeakMap,_s=new WeakMap,cp),Pg=f.createContext(void 0),Gr=e=>{const t=f.useContext(Pg);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Dx=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),u.jsx(Pg.Provider,{value:e,children:t})),Og=f.createContext(!1),Ax=()=>f.useContext(Og);Og.Provider;function $x(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Ux=f.createContext($x()),Bx=()=>f.useContext(Ux),Wx=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Hx=e=>{f.useEffect(()=>{e.clearReset()},[e])},Vx=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||jg(n,[e.error,r])),Qx=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Kx=(e,t)=>e.isLoading&&e.isFetching&&!t,Yx=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,rh=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Gx(e,t,n){var h,y,S,k,E;const r=Ax(),s=Bx(),i=Gr(),o=i.defaultQueryOptions(e);(y=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||y.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",Qx(o),Wx(o,s),Hx(s);const l=!i.getQueryCache().get(o.queryHash),[a]=f.useState(()=>new t(i,o)),c=a.getOptimisticResult(o),m=!r&&e.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(b=>{const v=m?a.subscribe(Ve.batchCalls(b)):ht;return a.updateResult(),v},[a,m]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),f.useEffect(()=>{a.setOptions(o)},[o,a]),Yx(o,c))throw rh(o,a,s);if(Vx({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((k=(S=i.getDefaultOptions().queries)==null?void 0:S._experimental_afterQuery)==null||k.call(S,o,c),o.experimental_prefetchInRender&&!Vr&&Kx(c,r)){const b=l?rh(o,a,s):(E=i.getQueryCache().get(o.queryHash))==null?void 0:E.promise;b==null||b.catch(ht).finally(()=>{a.updateResult()})}return o.notifyOnChangeProps?c:a.trackResult(c)}function dd(e,t){return Gx(e,Rx)}function qx(e,t){const n=Gr(),[r]=f.useState(()=>new Ox(n,e));f.useEffect(()=>{r.setOptions(e)},[r,e]);const s=f.useSyncExternalStore(f.useCallback(o=>r.subscribe(Ve.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=f.useCallback((o,l)=>{r.mutate(o,l).catch(ht)},[r]);if(s.error&&jg(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function sh(e){return e.length>0&&"options"in e[0]}function ih({value:e,onChange:t,options:n,placeholder:r="Select...",trigger:s,triggerClassName:i="",panelClassName:o="",align:l="left",width:a="auto",showChevron:c=!0,title:m,disabled:h=!1,"aria-label":y}){var j;const[S,k]=f.useState(!1),E=f.useRef(null),b=f.useRef(null),g=f.useCallback(()=>{const I=N=>{const z=N.find(J=>J.value===e);return z?z.label:null};if(sh(n))for(const N of n){const z=I(N.options);if(z)return z}else{const N=I(n);if(N)return N}return r},[e,n,r])();f.useEffect(()=>{if(!S)return;const I=z=>{E.current&&!E.current.contains(z.target)&&k(!1)},N=z=>{var J;z.key==="Escape"&&(k(!1),(J=b.current)==null||J.focus())};return window.addEventListener("click",I),window.addEventListener("keydown",N),()=>{window.removeEventListener("click",I),window.removeEventListener("keydown",N)}},[S]);const p=I=>{var N;t(I),k(!1),(N=b.current)==null||N.focus()},d=I=>I.map(N=>u.jsxs("button",{className:"dropdown-item","data-active":N.value===e,disabled:N.disabled,onClick:()=>!N.disabled&&p(N.value),role:"menuitem",children:[N.icon&&u.jsx("span",{className:"shrink-0",children:N.icon}),u.jsx("span",{className:"flex-1 truncate",children:N.label}),N.value===e&&u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 text-accent",children:u.jsx("polyline",{points:"20 6 9 17 4 12"})})]},N.value)),C=((j=b.current)==null?void 0:j.offsetWidth)??0,M=a==="trigger"?C:a==="auto"?void 0:a,T={...M?{width:M,minWidth:M}:{},...l==="right"?{right:0}:{left:0}};return u.jsxs("div",{ref:E,className:"relative",children:[s?u.jsx("div",{onClick:()=>!h&&k(I=>!I),children:s}):u.jsxs("button",{ref:b,type:"button",className:`dropdown-trigger ${i}`,onClick:()=>k(I=>!I),disabled:h,title:m,"aria-label":y,"aria-haspopup":"listbox","aria-expanded":S,children:[u.jsx("span",{className:"truncate",children:g}),c&&u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`shrink-0 opacity-60 transition-transform ${S?"rotate-180":""}`,children:u.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),S&&u.jsx("div",{className:`dropdown-panel ${o}`,style:T,role:"listbox","aria-label":y,children:sh(n)?n.map((I,N)=>u.jsxs("div",{children:[I.label&&u.jsx("div",{className:"dropdown-label",children:I.label}),d(I.options),N<n.length-1&&u.jsx("div",{className:"dropdown-divider"})]},I.label||N)):d(n)})]})}const Xx={offline:"sync-dot-offline",unstable:"sync-dot-unstable",recent:"sync-dot-recent",editing:"sync-dot-editing",live:"sync-dot-live"};function Jx({state:e,presence:t,syncLabel:n,connectionLabel:r,lastEditedLabel:s,hasEdits:i,recentTouches:o,isNarrow:l}){const[a,c]=f.useState(!1),[m,h]=f.useState(null),y=f.useRef(null),S=f.useRef(null),k=f.useRef(null),E=t?`${t.viewing} viewing  ${t.editing} editing`:"- viewing  - editing",b=t?String(t.viewing):"-",v=f.useCallback(()=>{k.current&&(window.clearTimeout(k.current),k.current=null)},[]),g=f.useCallback((d,C)=>{var M;C&&((M=navigator.clipboard)==null||M.writeText(C).then(()=>{h(d),v(),k.current=window.setTimeout(()=>{h(T=>T===d?null:T)},1e3)}).catch(()=>{}))},[v]),p=f.useCallback(()=>{c(!1),window.requestAnimationFrame(()=>{var d;return(d=S.current)==null?void 0:d.focus()})},[]);return f.useEffect(()=>{if(!a)return;const d=M=>{!y.current||y.current.contains(M.target)||p()},C=M=>{M.key==="Escape"&&p()};return window.addEventListener("mousedown",d),window.addEventListener("keydown",C),()=>{window.removeEventListener("mousedown",d),window.removeEventListener("keydown",C)}},[a,p]),f.useEffect(()=>()=>{v()},[v]),u.jsxs("div",{ref:y,className:"sync-indicator",children:[u.jsxs("button",{ref:S,type:"button",className:"sync-indicator-button",onClick:()=>a?p():c(!0),"aria-haspopup":"dialog","aria-expanded":a,"aria-label":"Sync status",title:E,children:[u.jsx("span",{className:`sync-indicator-dot ${Xx[e]}`,"aria-hidden":"true"}),!l&&u.jsx("span",{className:"sync-indicator-count tabular-nums",children:b})]}),a&&u.jsxs("div",{role:"dialog","aria-label":"Sync status",className:"sync-indicator-card select-text",children:[u.jsx("div",{className:"sync-indicator-line sync-indicator-primary",children:n}),u.jsx("div",{className:"sync-indicator-line",children:r}),u.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:E}),u.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:i?`Last edited: ${s}`:"No edits yet."}),u.jsxs("div",{className:"sync-indicator-section",children:[u.jsx("div",{className:"sync-indicator-section-title",children:"Recently touched files"}),o.length>0?u.jsx("div",{className:"sync-indicator-list",children:o.map(d=>u.jsxs("div",{className:"sync-indicator-item",children:[u.jsx("button",{type:"button",className:"sync-indicator-item-name",title:`Copy filename: ${d.label}`,onClick:()=>g(d.path,d.label),children:d.label}),u.jsx("span",{className:"sync-indicator-item-time tabular-nums",children:m===d.path?"Copied":d.timeLabel})]},d.path))}):u.jsx("div",{className:"sync-indicator-empty",children:"No recent touches."})]})]})]})}function Zx({rootRef:e,onSearch:t,viewerActive:n,onBack:r,zoomPercent:s,onZoomPercentChange:i,currentLabel:o,itemCount:l,totalCount:a,sortSpec:c,metricKeys:m,onSortChange:h,filterCount:y,onOpenFilters:S,starFilters:k,onToggleStar:E,onClearStars:b,onClearFilters:v,starCounts:g,viewMode:p,onViewMode:d,gridItemSize:C,onGridItemSize:M,leftOpen:T,rightOpen:j,onToggleLeft:I,onToggleRight:N,onPrevImage:z,onNextImage:J,canPrevImage:U,canNextImage:V,syncIndicator:be}){const[je,he]=f.useState(!1),[P,B]=f.useState(!1),[Z,pe]=f.useState(!1),ue=f.useRef(null),Me=f.useRef(null);f.useEffect(()=>{if(!je)return;const R=O=>{ue.current&&!ue.current.contains(O.target)&&he(!1)};return window.addEventListener("click",R),()=>window.removeEventListener("click",R)},[je]),f.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const R=window.matchMedia("(max-width: 900px)"),O=Y=>B(Y.matches);return B(R.matches),"addEventListener"in R?(R.addEventListener("change",O),()=>R.removeEventListener("change",O)):(R.addListener(O),()=>R.removeListener(O))},[]),f.useEffect(()=>{if(!P||n){pe(!1);return}if(!Z)return;const R=window.requestAnimationFrame(()=>{var O;return(O=Me.current)==null?void 0:O.focus()});return()=>window.cancelAnimationFrame(R)},[P,Z,n]);const q=c??{kind:"builtin",key:"added",dir:"desc"},le=q.dir,oe=q.kind==="builtin"&&q.key==="random",de=m!=null&&m.length?m.map(R=>({value:`metric:${R}`,label:R})):[],tt=[{value:"builtin:added",label:"Date added"},{value:"builtin:name",label:"Filename"},{value:"builtin:random",label:"Random"},...de],Re=[{label:"Layout",options:[{value:"layout:grid",label:"Grid"},{value:"layout:masonry",label:"Masonry"}]},{label:"Sort by",options:tt}],vt=q.kind==="metric"?`metric:${q.key}`:`builtin:${q.key}`,hn=[{label:"Sort by",options:tt}],Bt=P&&!n,mr=R=>{if(R.startsWith("layout:")){const O=R==="layout:masonry"?"adaptive":"grid";d==null||d(O)}else h==null||h(oh(R,q))},pn=()=>{h&&h(oe?q:{...q,dir:le==="desc"?"asc":"desc"})},tn=k??[],gr=tn.length,A=tw(y,gr),ee=ew(l,a),te=o||"Root";return u.jsxs("div",{ref:e,className:"toolbar-shell fixed top-0 left-0 right-0 h-12 grid grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] items-center px-3 gap-3 bg-panel border-b border-border z-[var(--z-toolbar)] col-span-full row-start-1 select-none",children:[u.jsxs("div",{className:"toolbar-left flex items-center gap-4 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[u.jsxs("div",{className:"flex flex-col min-w-0 leading-tight",children:[u.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted",children:"Scope"}),u.jsx("span",{className:"text-sm font-medium text-text truncate",title:te,children:te})]}),ee&&u.jsx("span",{className:"toolbar-count text-xs text-muted whitespace-nowrap tabular-nums",children:ee})]}),u.jsxs("div",{className:"toolbar-sort flex items-center gap-2",children:[u.jsxs("div",{className:`toolbar-sort-controls flex items-center gap-2 ${n?"opacity-40 pointer-events-none":""}`,children:[u.jsx(ih,{value:vt,onChange:mr,options:Re,title:"Sort and layout options","aria-label":"Sort and layout",triggerClassName:"min-w-[110px]"}),u.jsx("button",{className:"toolbar-sort-dir btn btn-icon",onClick:pn,title:oe?"Shuffle":`Sort ${le==="desc"?"descending":"ascending"}`,"aria-label":oe?"Shuffle":"Toggle sort direction","aria-disabled":n,children:oe?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),u.jsx("path",{d:"M21 3v5h-5"})]}):le==="desc"?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 5v14"}),u.jsx("path",{d:"M19 12l-7 7-7-7"})]}):u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 19V5"}),u.jsx("path",{d:"M5 12l7-7 7 7"})]})})]}),u.jsxs("div",{ref:ue,className:`toolbar-filter relative ${n?"opacity-40 pointer-events-none":""}`,children:[u.jsxs("button",{className:`btn ${A>0?"btn-active":""}`,onClick:()=>he(R=>!R),"aria-haspopup":"dialog","aria-expanded":je,title:"Filters","aria-disabled":n,children:[u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),u.jsx("span",{className:"toolbar-filters-label",children:"Filters"}),A>0&&u.jsx("span",{className:"toolbar-filters-count px-1.5 py-0.5 text-[11px] rounded-full bg-accent-strong text-text",children:A})]}),je&&u.jsxs("div",{role:"dialog","aria-label":"Filters",className:"dropdown-panel w-[240px]",style:{top:"38px",left:0},children:[u.jsx("div",{className:"dropdown-label",children:"Rating"}),u.jsxs("div",{className:"px-1",children:[[5,4,3,2,1].map(R=>{const O=tn.includes(R),Y=(g==null?void 0:g[String(R)])??0;return u.jsxs("button",{onClick:()=>E==null?void 0:E(R),className:`dropdown-item justify-between ${O?"bg-accent-muted":""}`,children:[u.jsxs("span",{className:O?"text-star-active":"text-text",children:["".repeat(R),"".repeat(5-R)]}),u.jsx("span",{className:"text-xs text-muted",children:Y})]},R)}),u.jsxs("button",{onClick:()=>E==null?void 0:E(0),className:`dropdown-item justify-between ${tn.includes(0)?"bg-accent-muted":""}`,children:[u.jsx("span",{className:"text-text",children:"Unrated"}),u.jsx("span",{className:"text-xs text-muted",children:(g==null?void 0:g["0"])??0})]})]}),u.jsx("div",{className:"dropdown-divider"}),u.jsx("div",{className:"dropdown-label",children:"Metrics"}),u.jsxs("button",{className:"dropdown-item",onClick:()=>{he(!1),S==null||S()},children:[u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M4 19V9"}),u.jsx("path",{d:"M10 19V5"}),u.jsx("path",{d:"M16 19v-7"}),u.jsx("path",{d:"M3 19h18"})]}),u.jsx("span",{children:"Open Metrics Panel"}),(y||0)>0&&u.jsxs("span",{className:"ml-auto text-xs text-muted",children:[y," active"]})]}),u.jsx("div",{className:"dropdown-divider"}),u.jsx("button",{className:"dropdown-item text-muted hover:text-text",onClick:()=>{v?v():b==null||b()},disabled:A===0,children:"Clear all filters"})]})]}),n&&u.jsxs("button",{className:"btn btn-sm",onClick:r,title:"Back to grid",children:[u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})]})]}),u.jsx("div",{className:"toolbar-center flex items-center gap-3 justify-center min-w-0",children:n?u.jsxs(u.Fragment,{children:[u.jsx("input",{type:"range",min:5,max:800,step:1,value:Math.round(Math.max(5,Math.min(800,s??100))),onChange:R=>i==null?void 0:i(Number(R.target.value)),className:"zoom-slider","aria-label":"Zoom level"}),u.jsxs("span",{className:"text-xs text-muted min-w-[42px] text-right",children:[Math.round(s??100),"%"]})]}):M&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs text-muted",children:"Size"}),u.jsx("input",{type:"range",min:80,max:500,step:10,value:C??220,onChange:R=>M(Number(R.target.value)),className:"w-28 h-1.5 bg-border rounded-full appearance-none cursor-pointer hover:bg-hover transition-colors [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-text [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-text [&::-moz-range-thumb]:border-0","aria-label":"Thumbnail size"})]})}),u.jsxs("div",{className:"toolbar-right flex items-center gap-2 justify-end",children:[u.jsxs("div",{className:`toolbar-nav flex items-center gap-1 mr-1 ${n?"":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,children:[u.jsx("button",{className:`btn btn-icon ${U?"":"opacity-40 cursor-not-allowed"}`,title:"Previous image (A / )",onClick:()=>U&&(z==null?void 0:z()),"aria-label":"Previous image","aria-disabled":!U,children:u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M15 18l-6-6 6-6"})})}),u.jsx("button",{className:`btn btn-icon ${V?"":"opacity-40 cursor-not-allowed"}`,title:"Next image (D / )",onClick:()=>V&&(J==null?void 0:J()),"aria-label":"Next image","aria-disabled":!V,children:u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M9 6l6 6-6 6"})})})]}),u.jsxs("div",{className:"toolbar-panels flex items-center gap-1",children:[u.jsx("button",{className:`btn btn-icon ${T?"":"opacity-50"}`,title:T?"Hide left panel (Ctrl+B)":"Show left panel (Ctrl+B)",onClick:I,"aria-pressed":T,"aria-label":"Toggle left panel",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"3",y:"5",width:"6",height:"14",rx:"1.5"}),u.jsx("rect",{x:"11",y:"5",width:"10",height:"14",rx:"1.5"})]})}),u.jsx("button",{className:`btn btn-icon ${j?"":"opacity-50"}`,title:j?"Hide right panel (Ctrl+Alt+B)":"Show right panel (Ctrl+Alt+B)",onClick:N,"aria-pressed":j,"aria-label":"Toggle right panel",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"15",y:"5",width:"6",height:"14",rx:"1.5"}),u.jsx("rect",{x:"3",y:"5",width:"10",height:"14",rx:"1.5"})]})})]}),be&&u.jsx(Jx,{...be,isNarrow:P}),!n&&P&&u.jsx("button",{className:`btn btn-icon ${Z?"btn-active":""}`,"aria-label":Z?"Close search":"Open search",title:Z?"Close search":"Search",onClick:()=>pe(R=>!R),children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[u.jsx("circle",{cx:"11",cy:"11",r:"7"}),u.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),!n&&!P?u.jsx("div",{className:"toolbar-search w-[240px]",children:u.jsx("input",{ref:Me,"aria-label":"Search filename, tags, notes",placeholder:"Search...",onChange:R=>t(R.target.value),className:"toolbar-search-input input w-full focus:w-full transition-all duration-200 select-text"})}):n?u.jsx("div",{className:"toolbar-search w-[240px]","aria-hidden":"true"}):null]}),!n&&P&&Z&&u.jsx("div",{className:"toolbar-search-row",children:u.jsx("input",{ref:Me,"aria-label":"Search filename, tags, notes",placeholder:"Search...",onChange:R=>t(R.target.value),className:"toolbar-search-input-mobile input input-lg w-full select-text"})}),Bt&&u.jsx("div",{className:"mobile-drawer",children:u.jsxs("div",{className:"mobile-drawer-row",children:[u.jsxs("div",{className:"mobile-pill-group",children:[u.jsx("button",{className:`mobile-pill ${p==="grid"?"is-active":""}`,onClick:()=>d==null?void 0:d("grid"),"aria-pressed":p==="grid",children:"Grid"}),u.jsx("button",{className:`mobile-pill ${p==="adaptive"?"is-active":""}`,onClick:()=>d==null?void 0:d("adaptive"),"aria-pressed":p==="adaptive",children:"Masonry"})]}),u.jsx(ih,{value:vt,onChange:R=>h==null?void 0:h(oh(R,q)),options:hn,"aria-label":"Sort",triggerClassName:"mobile-pill mobile-pill-dropdown",panelClassName:"mobile-drawer-panel"}),u.jsx("button",{className:"mobile-pill mobile-pill-icon",onClick:pn,title:oe?"Shuffle":`Sort ${le==="desc"?"descending":"ascending"}`,"aria-label":oe?"Shuffle":"Toggle sort direction",children:oe?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),u.jsx("path",{d:"M21 3v5h-5"})]}):le==="desc"?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 5v14"}),u.jsx("path",{d:"M19 12l-7 7-7-7"})]}):u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 19V5"}),u.jsx("path",{d:"M5 12l7-7 7 7"})]})})]})})]})}function ew(e,t){if(typeof e!="number")return null;const n=e.toLocaleString();if(typeof t!="number")return`${n} items`;const r=t.toLocaleString();return t===e?`${n} items`:`${n} / ${r} items`}function tw(e,t){return typeof e=="number"?e:t>0?1:0}function oh(e,t){if(e.startsWith("metric:")){const n=e.slice(7);return n?{kind:"metric",key:n,dir:t.dir}:t}if(e.startsWith("builtin:")){const n=e.slice(8);if(n==="name"||n==="added"||n==="random")return{kind:"builtin",key:n,dir:t.dir}}return t}class ur extends Error{constructor(n,r,s,i){super(r);mn(this,"status");mn(this,"url");mn(this,"body");this.name="FetchError",this.status=n,this.url=s,this.body=i}}function nw(e){const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function Fg(e,t,n){if(t&&typeof t=="object"){const r=t,s=typeof r.error=="string"?r.error:null,i=typeof r.message=="string"?r.message:null;if(s&&i)return`${s}: ${i}`;if(s)return s;if(i)return i}return typeof t=="string"&&t?t:`HTTP ${e} for ${n}`}function ut(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{let a=null;const c=await l.text().catch(()=>"");if(c)if((l.headers.get("content-type")||"").includes("application/json")||nw(c))try{a=JSON.parse(c)}catch{a=c}else a=c;if(!l.ok)throw new ur(l.status,Fg(l.status,a,e),e,a);return a}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}function xo(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{if(!l.ok){const a=await l.text().catch(()=>""),c=a||null;throw new ur(l.status,Fg(l.status,c,e),e,c)}return l.blob()}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}class zg{constructor(t){mn(this,"store",new Map);mn(this,"inflight",new Map);mn(this,"totalBytes",0);this.maxBytes=t}getMaxBytes(){return this.maxBytes}getTotalBytes(){return this.totalBytes}getSize(){return this.store.size}has(t){return this.store.has(t)}isInflight(t){return this.inflight.has(t)}get(t){const n=this.store.get(t);if(n)return this.store.delete(t),this.store.set(t,n),n.blob}evictIfNeeded(t){for(;this.totalBytes+t>this.maxBytes&&this.store.size>0;){const n=this.store.keys().next().value;if(n==null)break;const r=this.store.get(n);r&&(this.totalBytes-=r.size),this.store.delete(n)}}set(t,n){const r=n.size||0;if(!(r>this.maxBytes)){if(this.store.has(t)){const s=this.store.get(t);this.totalBytes-=s.size,this.store.delete(t)}this.evictIfNeeded(r),this.store.set(t,{blob:n,size:r}),this.totalBytes+=r}}async getOrFetch(t,n){const r=this.get(t);if(r)return r;const s=this.inflight.get(t);if(s)return s.promise;const i=n(),o=typeof i=="object"&&"promise"in i,l=o?i.promise:i,a=o?i.abort:void 0,c=l.then(m=>(this.set(t,m),m)).finally(()=>{this.inflight.delete(t)});return this.inflight.set(t,{promise:c,abort:a}),c}prefetch(t,n){if(this.store.has(t)||this.inflight.has(t))return;const r=n(),s=typeof r=="object"&&"promise"in r,i=s?r.promise:r,o=s?r.abort:void 0,l=i.then(a=>(this.set(t,a),a)).catch(()=>new Blob).finally(()=>{this.inflight.delete(t)});this.inflight.set(t,{promise:l,abort:o})}cancelPrefetch(t){const n=this.inflight.get(t);if(n!=null&&n.abort)try{n.abort()}catch{}this.inflight.delete(t)}clear(){for(const[t,n]of this.inflight)if(n.abort)try{n.abort()}catch{}this.inflight.clear(),this.store.clear(),this.totalBytes=0}evictPrefix(t){const n=(()=>{const s=t?`/${t.replace(/^\/+/,"")}`:"/";return s==="/"?"/":s.replace(/\/+$/,"")})(),r=s=>{const i=s.startsWith("/")?s.replace(/\/+$/,""):`/${s.replace(/\/+$/,"")}`;return n==="/"?!0:i===n||i.startsWith(`${n}/`)};for(const[s,i]of Array.from(this.store.entries()))r(s)&&(this.totalBytes-=i.size,this.store.delete(s));for(const[s,i]of Array.from(this.inflight.entries()))if(r(s)){if(i.abort)try{i.abort()}catch{}this.inflight.delete(s)}this.totalBytes<0&&(this.totalBytes=0)}}const es=new zg(60*1024*1024),Xu=new zg(20*1024*1024),_a={};function rw(){const e=_a==null?void 0:_a.VITE_API_BASE,t=typeof window<"u",n=t?window.location.origin:"http://localhost",r=t?window.location.hostname:"localhost",s=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\]|.+\.localhost)$/i.test(r);if(!e)return"";let i;try{i=new URL(e,n)}catch{return""}const o=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\])$/i.test(i.hostname);return s?i.origin:o?"":i.origin}const Ae=rw();const sw=40*1024*1024,lh="lenslet.client_id",ah="lenslet.client_id.session",Dg="lenslet.last_event_id",iw=1e3,ow=3e4,lw=5;let Xr=null,Oo=null,uh=0,xs=null,ws=0,Fl=!0,ml=!1;function Ag(){return typeof window<"u"&&typeof EventSource<"u"}function ch(e,t){if(!e)return null;try{return e.getItem(t)}catch{return null}}function dh(e,t,n){if(e)try{e.setItem(t,n)}catch{}}function aw(){if(typeof navigator>"u")return"server";const e=navigator.userAgent||"",t=navigator.language||"",n=navigator.platform||"",r=typeof Intl<"u"&&Intl.DateTimeFormat().resolvedOptions().timeZone||"",s=typeof screen<"u"?`${screen.width}x${screen.height}x${screen.colorDepth}`:"";return[e,t,n,r,s].join("|")}function uw(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=t*16777619>>>0;return t.toString(16).padStart(8,"0")}function Fo(){if(Xr)return Xr;const e=typeof window<"u"?window.localStorage:null,t=typeof window<"u"?window.sessionStorage:null,n=ch(e,lh)||ch(t,ah);if(n)return Xr=n,n;const r=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`;if(e)return dh(e,lh,r),Xr=r,r;if(t)return dh(t,ah,r),Xr=r,r;const s=`fp_${uw(aw())}`;return Xr=s,s}function Fi(e="lenslet"){uh+=1;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`nonce_${Math.random().toString(36).slice(2,10)}_${Date.now()}_${uh}`;return`${e}:${Fo()}:${t}`}function cw(){if(Oo!=null)return Oo;if(typeof window>"u")return null;try{const e=window.localStorage.getItem(Dg);if(!e)return null;const t=Number(e);return!Number.isFinite(t)||t<=0?null:(Oo=t,t)}catch{return null}}function dw(e){if(!(!Number.isFinite(e)||e<=0)&&(Oo=e,!(typeof window>"u")))try{window.localStorage.setItem(Dg,String(e))}catch{}}function fw(){if(typeof window>"u")return`${Ae}/events`;const e=new URL(`${Ae}/events`,window.location.origin),t=cw();return t!=null&&Number.isFinite(t)&&e.searchParams.set("last_event_id",String(t)),e.toString()}function hw(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}let Qt=null,$g="idle";const Ju=new Set,Zu=new Set,ec=new Set;function Ss(e){$g=e;for(const t of Zu)t(e)}function fd(e){if(ml!==e){ml=e;for(const t of ec)t(e)}}function hd(){xs!=null&&(window.clearTimeout(xs),xs=null)}function pw(){ws=0,hd()}function mw(){if(!Fl||xs!=null)return;ws+=1;const e=Math.min(iw*Math.pow(2,ws-1),ow);ws>=lw?(Ss("offline"),fd(!0)):Ss("reconnecting"),xs=window.setTimeout(()=>{xs=null,Ug()},e)}function Ug(){if(!Fl||!Ag()||(Qt&&Qt.readyState===EventSource.CLOSED&&(Qt.close(),Qt=null),Qt))return;ws>0?Ss("reconnecting"):Ss("connecting");const e=new EventSource(fw());Qt=e;const t=n=>r=>{const s=hw(r.data);if(!s)return;const i=r.lastEventId?Number(r.lastEventId):null,o=i!=null&&Number.isFinite(i)?i:null;o!=null&&dw(o);for(const l of Ju)l({type:n,id:o,data:s})};e.addEventListener("item-updated",t("item-updated")),e.addEventListener("metrics-updated",t("metrics-updated")),e.addEventListener("presence",t("presence")),e.onopen=()=>{pw(),fd(!1),Ss("live")},e.onerror=()=>{Qt===e&&(e.close(),Qt=null,mw())}}function gw(){Fl=!0,Ag()&&(hd(),Ug())}function vw(){Fl=!1,hd(),ws=0,Qt&&(Qt.close(),Qt=null),fd(!1),Ss("offline")}function yw(e){return Ju.add(e),()=>{Ju.delete(e)}}function xw(e){return Zu.add(e),e($g),()=>{Zu.delete(e)}}function ww(e){return ec.add(e),e(ml),()=>{ec.delete(e)}}function Sw(){return ml}const me={getFolder:(e,t)=>{const n=new URLSearchParams({path:e});return t!=null&&n.set("page",String(t)),ut(`${Ae}/folders?${n}`).promise},search:(e,t)=>{const n=new URLSearchParams;return e&&n.set("q",e),t&&n.set("path",t),ut(`${Ae}/search?${n}`).promise},refreshFolder:e=>{const t=new URLSearchParams({path:e});return ut(`${Ae}/refresh?${t}`,{method:"POST"}).promise},getSidecar:e=>ut(`${Ae}/item?path=${encodeURIComponent(e)}`).promise,patchSidecar:(e,t,n)=>{const s={"Content-Type":"application/json","Idempotency-Key":(n==null?void 0:n.idempotencyKey)??Fi("patch"),"x-client-id":Fo(),"x-updated-by":"web"};return(n==null?void 0:n.ifMatch)!=null&&(s["If-Match"]=String(n.ifMatch)),ut(`${Ae}/item?path=${encodeURIComponent(e)}`,{method:"PATCH",headers:s,body:JSON.stringify(t)}).promise},getMetadata:e=>ut(`${Ae}/metadata?path=${encodeURIComponent(e)}`).promise,putSidecar:(e,t)=>ut(`${Ae}/item?path=${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-client-id":Fo(),"x-updated-by":"web"},body:JSON.stringify(t)}).promise,getHealth:()=>ut(`${Ae}/health`).promise,postPresence:(e,t)=>ut(`${Ae}/presence`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gallery_id:e,client_id:t??Fo()})}).promise,getThumb:e=>Xu.getOrFetch(e,()=>xo(`${Ae}/thumb?path=${encodeURIComponent(e)}`)),prefetchThumb:e=>{Xu.prefetch(e,()=>xo(`${Ae}/thumb?path=${encodeURIComponent(e)}`))},getFile:e=>es.getOrFetch(e,()=>xo(`${Ae}/file?path=${encodeURIComponent(e)}`)),prefetchFile:async e=>{if(!(es.has(e)||es.isInflight(e)))try{const t=await xo(`${Ae}/file?path=${encodeURIComponent(e)}`).promise;t.size<=sw&&es.set(e,t)}catch{}},cancelPrefetch:e=>{es.cancelPrefetch(e)},uploadFile:async(e,t)=>{const n=new FormData;return n.append("dest",e),n.append("file",t),ut(`${Ae}/file`,{method:"POST",body:n,timeoutMs:6e4}).promise},moveFile:async(e,t)=>{const n=new FormData;return n.append("src",e),n.append("dest",t),ut(`${Ae}/move`,{method:"POST",body:n}).promise},deleteFiles:async e=>ut(`${Ae}/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:e})}).promise,exportIntent:async e=>{const t=new FormData;return t.append("path",e),ut(`${Ae}/export-intent`,{method:"POST",body:t}).promise},getViews:()=>ut(`${Ae}/views`).promise,saveViews:e=>ut(`${Ae}/views`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise};class kw{constructor(t=400){mn(this,"cache",new Map);mn(this,"maxSize");this.maxSize=t,typeof window<"u"&&window.addEventListener("beforeunload",()=>this.clear(),{once:!0})}get(t){const n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){for(this.cache.has(t)&&this.cache.delete(t);this.cache.size>=this.maxSize;){const r=this.cache.keys().next().value;if(r===void 0)break;const s=this.cache.get(r);if(this.cache.delete(r),s)try{URL.revokeObjectURL(s)}catch{}}this.cache.set(t,n)}clear(){for(const t of this.cache.values())try{URL.revokeObjectURL(t)}catch{}this.cache.clear()}}const Pa=new kw(400);function Cw({path:e,name:t,onClick:n,selected:r,highlighted:s,displayW:i,displayH:o,ioRoot:l,isScrolling:a,priority:c}){const m=f.useRef(null),[h,y]=f.useState(()=>Pa.get(e)??null),[S,k]=f.useState(!1),[E,b]=f.useState(()=>!!h);return f.useEffect(()=>{const v=m.current;if(!v)return;const g=new IntersectionObserver(p=>{for(const d of p)d.target===v&&k(d.isIntersecting||d.intersectionRatio>0)},{root:l??null,rootMargin:"200px 0px",threshold:.01});return g.observe(v),()=>{g.unobserve(v),g.disconnect()}},[l]),f.useEffect(()=>{if(h||!(S&&!a||c))return;let v=!0;return me.getThumb(e).then(g=>{if(!v)return;const p=URL.createObjectURL(g);Pa.set(e,p),y(p)}).catch(()=>{}),()=>{v=!1}},[e,h,S,a,c]),f.useEffect(()=>{var g;if(!h){b(!1);return}const v=(g=m.current)==null?void 0:g.querySelector("img");v&&v.complete&&v.naturalWidth>0?b(!0):b(!1)},[h]),f.useEffect(()=>{y(Pa.get(e)??null)},[e]),u.jsx("div",{ref:m,className:`absolute inset-0 relative bg-hover border border-border rounded-lg overflow-hidden select-none ${r?"outline-2 outline-accent":""} ${s?"ring-2 ring-accent/60 animate-pulse":""} hover:outline hover:outline-1 hover:outline-accent`,onClick:n,children:h?u.jsx("img",{className:`w-full h-full object-cover block pointer-events-none select-none opacity-0 transition-opacity duration-[160ms] ${E?"opacity-100":""}`,src:h,alt:t,loading:"lazy",decoding:"async",onLoad:()=>b(!0),width:i?Math.round(i):void 0,height:o?Math.round(o):void 0}):null})}function Jr(e,t,n){let r=n.initialDeps??[],s,i=!0;function o(){var l,a,c;let m;n.key&&((l=n.debug)!=null&&l.call(n))&&(m=Date.now());const h=e();if(!(h.length!==r.length||h.some((k,E)=>r[E]!==k)))return s;r=h;let S;if(n.key&&((a=n.debug)!=null&&a.call(n))&&(S=Date.now()),s=t(...h),n.key&&((c=n.debug)!=null&&c.call(n))){const k=Math.round((Date.now()-m)*100)/100,E=Math.round((Date.now()-S)*100)/100,b=E/16,v=(g,p)=>{for(g=String(g);g.length<p;)g=" "+g;return g};console.info(`%c ${v(E,5)} /${v(k,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*b,120))}deg 100% 31%);`,n==null?void 0:n.key)}return n!=null&&n.onChange&&!(i&&n.skipInitialOnChange)&&n.onChange(s),i=!1,s}return o.updateDeps=l=>{r=l},o}function fh(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const Ew=(e,t)=>Math.abs(e-t)<1.01,Nw=(e,t,n)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,s),n)}},hh=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},bw=e=>e,jw=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},Mw=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const s=o=>{const{width:l,height:a}=o;t({width:Math.round(l),height:Math.round(a)})};if(s(hh(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const a=o[0];if(a!=null&&a.borderBoxSize){const c=a.borderBoxSize[0];if(c){s({width:c.inlineSize,height:c.blockSize});return}}s(hh(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},ph={passive:!0},mh=typeof window>"u"?!0:"onscrollend"in window,Rw=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&mh?()=>{}:Nw(r,()=>{t(s,!1)},e.options.isScrollingResetDelay),o=m=>()=>{const{horizontal:h,isRtl:y}=e.options;s=h?n.scrollLeft*(y&&-1||1):n.scrollTop,i(),t(s,m)},l=o(!0),a=o(!1);a(),n.addEventListener("scroll",l,ph);const c=e.options.useScrollendEvent&&mh;return c&&n.addEventListener("scrollend",a,ph),()=>{n.removeEventListener("scroll",l),c&&n.removeEventListener("scrollend",a)}},Lw=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},Tw=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const o=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class Iw{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:bw,rangeExtractor:jw,onChange:()=>{},measureElement:Lw,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=Jr(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=n[o];if(s.has(l.lane))continue;const a=i.get(l.lane);if(a==null||l.end>a.end?i.set(l.lane,l):l.end<a.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=Jr(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,s,i,o,l)=>(this.prevLanes!==void 0&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=Jr(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l},a)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const y of this.laneAssignments.keys())y>=n&&this.laneAssignments.delete(y);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(y=>{this.itemSizeCache.set(y.key,y.size)}));const c=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const m=this.measurementsCache.slice(0,c),h=new Array(l).fill(void 0);for(let y=0;y<c;y++){const S=m[y];S&&(h[S.lane]=y)}for(let y=c;y<n;y++){const S=i(y),k=this.laneAssignments.get(y);let E,b;if(k!==void 0&&this.options.lanes>1){E=k;const d=h[E],C=d!==void 0?m[d]:void 0;b=C?C.end+this.options.gap:r+s}else{const d=this.options.lanes===1?m[y-1]:this.getFurthestMeasurement(m,y);b=d?d.end+this.options.gap:r+s,E=d?d.lane:y%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(y,E)}const v=a.get(S),g=typeof v=="number"?v:this.options.estimateSize(y),p=b+g;m[y]={index:y,start:b,size:g,end:p,key:S,lane:E},h[E]=y}return this.measurementsCache=m,m},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Jr(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?_w({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Jr(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,o)=>i===null||o===null?[]:n({startIndex:i,endIndex:o,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=Jr(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,o=n.length;i<o;i++){const l=n[i],a=r[l];s.push(a)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return fh(r[Bg(0,r.length-1,s=>fh(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(s.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const o=10,l=c=>{if(!this.targetWindow)return;const m=this.getOffsetForIndex(n,c);if(!m){console.warn("Failed to get offset for index:",n);return}const[h,y]=m;this._scrollToOffset(h,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const S=this.getScrollOffset(),k=this.getOffsetForIndex(n,y);if(!k){console.warn("Failed to get offset for index:",n);return}Ew(k[0],S)||a(y)})},a=c=>{this.targetWindow&&(i++,i<o?this.targetWindow.requestAnimationFrame(()=>l(c)):console.warn(`Failed to scroll to index ${n} after ${o} attempts.`))};l(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}s=Math.max(...i.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const Bg=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function _w({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const s=e.length-1,i=a=>e[a].start;if(e.length<=r)return{startIndex:0,endIndex:s};let o=Bg(0,s,i,n),l=o;if(r===1)for(;l<s&&e[l].end<n+t;)l++;else if(r>1){const a=Array(r).fill(0);for(;l<s&&a.some(m=>m<n+t);){const m=e[l];a[m.lane]=m.end,l++}const c=Array(r).fill(n+t);for(;o>=0&&c.some(m=>m>=n);){const m=e[o];c[m.lane]=m.start,o--}o=Math.max(0,o-o%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const gh=typeof document<"u"?f.useLayoutEffect:f.useEffect;function Pw(e){const t=f.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var o;i?od.flushSync(t):t(),(o=e.onChange)==null||o.call(e,s,i)}},[r]=f.useState(()=>new Iw(n));return r.setOptions(n),gh(()=>r._didMount(),[]),gh(()=>r._willUpdate()),r}function Ow(e){return Pw({observeElementRect:Mw,observeElementOffset:Rw,scrollToFn:Tw,...e})}function Fw({containerW:e,gap:t,targetCell:n,aspect:r,captionH:s}){const i=Math.max(1,Math.floor((e+t)/(n+t))),o=(e-t*(i-1))/i,l=o*r.h/r.w,a=l+s+t;return{columns:i,cellW:o,mediaH:l,rowH:a}}const zw=1.333;function Dw({items:e,containerWidth:t,targetHeight:n,gap:r,captionH:s}){if(t<=0)return[];const i=[];let o=[],l=0;const a=(c,m)=>({index:i.length,height:m+s+r,imageH:m,items:c.map(h=>({item:h.item,displayW:h.aspect*m,displayH:m,originalIndex:h.originalIndex}))});for(let c=0;c<e.length;c++){const m=e[c],h=m.w>0&&m.h>0?m.w/m.h:zw;o.push({item:m,aspect:h,originalIndex:c}),l+=h;const y=(o.length-1)*r;if(l*n+y>=t){const k=(t-y)/l;i.push(a(o,k)),o=[],l=0}}return o.length>0&&i.push(a(o,n)),i}function Aw(e,t,n){return{mode:"adaptive",rows:Dw({items:t,containerWidth:e,targetHeight:n.targetCell,gap:n.gap,captionH:n.captionH})}}function $w(e,t,n){const{columns:r,cellW:s,mediaH:i,rowH:o}=Fw({containerW:e,gap:n.gap,targetCell:n.targetCell,aspect:n.aspect,captionH:n.captionH}),l=Math.ceil(t.length/Math.max(1,r));return{mode:"grid",columns:r,cellW:s,mediaH:i,rowH:o,rowCount:l}}function Uw(e,t,n){const[r,s]=f.useState(0);f.useLayoutEffect(()=>{const a=e.current;if(!a)return;const c=()=>{const h=getComputedStyle(a),y=a.clientWidth-parseFloat(h.paddingLeft)-parseFloat(h.paddingRight);s(y)},m=new ResizeObserver(c);return m.observe(a),c(),()=>m.disconnect()},[]);const i=f.useMemo(()=>n.viewMode==="adaptive"?Aw(r,t,n):$w(r,t,n),[r,t,n.viewMode,n.gap,n.targetCell,n.aspect.w,n.aspect.h,n.captionH]),o=Ow({count:i.mode==="adaptive"?i.rows.length:i.rowCount,getScrollElement:()=>e.current,estimateSize:a=>i.mode==="adaptive"?i.rows[a].height:i.rowH,overscan:8}),l=o.getVirtualItems();return f.useEffect(()=>{o.measure()},[i,o]),{width:r,layout:i,rowVirtualizer:o,virtualRows:l}}function Bw(e,t,n,r){if(!e.length)return null;const s=n?e.findIndex(l=>l.path===n):0,i=Math.max(1,t);let o=s;if(r.key==="ArrowRight"||r.key==="d")o=Math.min(e.length-1,s+1);else if(r.key==="ArrowLeft"||r.key==="a")o=Math.max(0,s-1);else if(r.key==="ArrowDown"||r.key==="s")o=Math.min(e.length-1,s+i);else if(r.key==="ArrowUp"||r.key==="w")o=Math.max(0,s-i);else return r.key==="Enter"&&n?"open":null;return o}const gn=12,Ww=44,Hw={w:4,h:3},Vw=350,Qw=120;function Kw({items:e,selected:t,restoreToSelectionToken:n,onSelectionChange:r,onOpenViewer:s,onContextMenuItem:i,highlight:o,recentlyUpdated:l,suppressSelectionHighlight:a=!1,viewMode:c="grid",targetCellSize:m=220,scrollRef:h,hideScrollbar:y=!1}){const[S,k]=f.useState(null),[E,b]=f.useState(null),[v,g]=f.useState(!1),[p,d]=f.useState(null),[C,M]=f.useState(null),T=f.useRef(null),j=f.useRef(null),I=f.useRef(null),N=h??I,z=f.useRef(null),J=m,{width:U,layout:V,rowVirtualizer:be,virtualRows:je}=Uw(N,e,{gap:gn,targetCell:J,aspect:Hw,captionH:Ww,viewMode:c}),he=f.useMemo(()=>{const A=new Map;for(let ee=0;ee<e.length;ee++)A.set(e[ee].path,ee);return A},[e]),P=f.useMemo(()=>{if(V.mode!=="adaptive")return null;const A=new Map;return V.rows.forEach((ee,te)=>{let R=0;ee.items.forEach((O,Y)=>{const W=R+O.displayW/2;A.set(O.item.path,{row:te,center:W,order:Y}),R+=O.displayW+gn})}),A},[V]);f.useEffect(()=>{if(!t.length)return;const A=t[0];p!==A&&d(A)},[t,p]);const B=f.useMemo(()=>{if(V.mode!=="adaptive")return null;let A=0;return V.rows.map(ee=>{const te=A;return A+=ee.height,{start:te,height:ee.height}})},[V]),Z=f.useRef(null),pe=(A,ee)=>{try{if(Z.current!=null){try{cancelAnimationFrame(Z.current)}catch{}Z.current=null}const te=A.scrollTop,R=ee-te;if(Math.abs(R)<1){A.scrollTop=ee;return}const O=140,Y=performance.now(),W=ve=>1-Math.pow(1-ve,3),ie=ve=>{const _e=Math.min(1,(ve-Y)/O),we=W(_e);A.scrollTop=te+R*we,_e<1?Z.current=requestAnimationFrame(ie):Z.current=null};Z.current=requestAnimationFrame(ie)}catch{A.scrollTop=ee}},[ue,Me]=f.useState(!1);f.useEffect(()=>{const A=N.current;if(!A)return;let ee=0;const te=()=>{Me(!0),window.clearTimeout(ee),ee=window.setTimeout(()=>Me(!1),Qw)};return A.addEventListener("scroll",te,{passive:!0}),()=>A.removeEventListener("scroll",te)},[]);const q=()=>{j.current!=null&&(window.clearTimeout(j.current),j.current=null)},le=()=>{if(q(),g(!1),k(null),T.current){try{URL.revokeObjectURL(T.current)}catch{}T.current=null}b(null)},oe=A=>{ue||(q(),k(A),g(!1),j.current=window.setTimeout(async()=>{j.current=null;try{const ee=await me.getFile(A),te=URL.createObjectURL(ee);if(T.current)try{URL.revokeObjectURL(T.current)}catch{}T.current=te,b(te),g(!0)}catch{}},Vw))},de=V.mode==="grid"?V.columns:Math.max(1,Math.floor(U/(J+gn))),tt=(A,ee)=>{if(V.mode!=="adaptive")return null;const te=V.rows[A];if(!te)return null;let R=0,O=null;for(const Y of te.items){const W=R+Y.displayW/2,ie=Math.abs(W-ee);(!O||ie<O.dist)&&(O={path:Y.item.path,dist:ie}),R+=Y.displayW+gn}return O?O.path:null},Re=(A,ee)=>{var we,Xe,Ee,lt;if(!e.length)return null;const te=A??e[0].path;if(V.mode!=="adaptive"){const Pe=Bw(e,de,te,ee);return Pe==="open"||Pe==null?Pe:((we=e[Pe])==null?void 0:we.path)??null}const R=P==null?void 0:P.get(te);if(!R)return te;const O=he.get(te)??0,Y=ee.key;if(Y==="Enter")return"open";if(Y==="ArrowRight"||Y==="d")return((Xe=e[Math.min(e.length-1,O+1)])==null?void 0:Xe.path)??te;if(Y==="ArrowLeft"||Y==="a")return((Ee=e[Math.max(0,O-1)])==null?void 0:Ee.path)??te;const W=Y==="ArrowDown"||Y==="s"?1:Y==="ArrowUp"||Y==="w"?-1:0;if(W===0)return null;const ie=R.row+W;if(ie<0||ie>=(((lt=V.rows)==null?void 0:lt.length)??0))return te;const ve=R.center;return tt(ie,ve)??te},vt=A=>{var ee;try{(ee=document.getElementById(`cell-${encodeURIComponent(A)}`))==null||ee.focus()}catch{}},hn=A=>{try{me.prefetchFile(A),me.prefetchThumb(A)}catch{}},Bt=(A,ee)=>{d(A),M(A);const te=!!ee.shiftKey,R=!!(ee.ctrlKey||ee.metaKey);if(te){const O=z.current??p??t[0]??A,Y=he.get(O)??e.findIndex(ie=>ie.path===O),W=he.get(A)??e.findIndex(ie=>ie.path===A);if(Y!==-1&&W!==-1){const ie=Math.min(Y,W),ve=Math.max(Y,W),_e=e.slice(ie,ve+1).map(we=>we.path);if(R){const we=new Set(t);for(const Xe of _e)we.add(Xe);r(Array.from(we))}else r(_e)}else r([A])}else if(R){const O=new Set(t);O.has(A)?O.delete(A):O.add(A),r(Array.from(O)),z.current=A}else r([A]),z.current=A;ue||hn(A),vt(A)},mr=(A,ee)=>{var te,R;try{const O=pn.has(A)&&t.length>0?t:[A];(te=ee.dataTransfer)==null||te.setData("application/x-lenslet-paths",JSON.stringify(O)),ee.dataTransfer&&(ee.dataTransfer.effectAllowed="copyMove");try{document.body.classList.add("drag-active")}catch{}const W=ee.currentTarget.querySelector(".cell-content img"),ie=document.createElement("div");ie.className="drag-ghost";const ve=document.createElement("img");ve.draggable=!1,ve.alt="drag",W&&W.src&&(ve.src=W.src),ie.appendChild(ve),document.body.appendChild(ie);const _e=ie.getBoundingClientRect().width||150;(R=ee.dataTransfer)==null||R.setDragImage(ie,Math.round(_e/2),0);const we=()=>{try{ie.remove()}catch{}try{document.body.classList.remove("drag-active")}catch{}window.removeEventListener("dragend",we),window.removeEventListener("pointerup",we),document.removeEventListener("visibilitychange",we)};window.addEventListener("dragend",we),window.addEventListener("pointerup",we),document.addEventListener("visibilitychange",we)}catch{}};f.useEffect(()=>{const A=N.current;if(!A)return;const ee=te=>{var we,Xe,Ee;const R=Re(C,te);if(R==null)return;if(te.preventDefault(),R==="open"){C&&s(C);return}const O=e.find(lt=>lt.path===R);if(!O)return;M(O.path),d(O.path),r([O.path]);try{z.current=O.path}catch{}const Y=V.mode==="grid"?Math.floor((he.get(O.path)??0)/Math.max(1,V.columns)):((we=P==null?void 0:P.get(O.path))==null?void 0:we.row)??0,W=A.scrollTop,ie=W+A.clientHeight,ve=V.mode==="adaptive"?((Xe=B==null?void 0:B[Y])==null?void 0:Xe.start)??0:Y*V.rowH,_e=V.mode==="adaptive"?ve+(((Ee=B==null?void 0:B[Y])==null?void 0:Ee.height)??0):ve+V.rowH;(ve<W||_e>ie)&&pe(A,ve),vt(O.path)};return A.addEventListener("keydown",ee),()=>{A.removeEventListener("keydown",ee)}},[e,C,de,s,V,P,B,he]),f.useLayoutEffect(()=>{var Y;const A=N.current;if(!A||!n||!t||t.length===0)return;const ee=t[0],te=he.get(ee);if(te==null||te<0)return;let R=0;if(V.mode==="grid")R=Math.floor(te/Math.max(1,V.columns));else{let W=0,ie=V.rows.length-1;for(;W<=ie;){const ve=W+ie>>1,_e=V.rows[ve];if(te>=_e.items[0].originalIndex&&te<=_e.items[_e.items.length-1].originalIndex){R=ve;break}te<_e.items[0].originalIndex?ie=ve-1:W=ve+1}}const O=V.mode==="adaptive"?((Y=B==null?void 0:B[R])==null?void 0:Y.start)??0:R*V.rowH;try{A.scrollTop=O}catch{}},[n,V,B]);const pn=f.useMemo(()=>new Set(t),[t]),tn=!!(S&&E&&v);f.useEffect(()=>{var A;(A=N.current)==null||A.focus()},[]),f.useEffect(()=>{var A;if(a){try{(A=N.current)==null||A.blur()}catch{}try{M(null)}catch{}}},[a]);const gr=C?`cell-${encodeURIComponent(C)}`:void 0;return u.jsx("div",{role:"grid","aria-label":"Gallery",className:`relative h-full overflow-auto p-3 outline-none ${y?"scrollbar-hidden pr-4":"scrollbar-thin"} ${tn?"cursor-zoom-in":""}`,ref:N,tabIndex:0,"aria-activedescendant":gr,onMouseDown:()=>{var A;return(A=N.current)==null?void 0:A.focus()},style:{"--gap":`${gn}px`},children:u.jsxs("div",{className:"relative w-full",style:{height:be.getTotalSize()},children:[je.map(A=>{var Y;let ee=[],te={},R="";if(V.mode==="adaptive"){const W=V.rows[A.index];if(!W)return null;ee=W.items,te={height:W.height,transform:`translate3d(0, ${A.start}px, 0)`,display:"flex",gap:gn,paddingBottom:gn},R="absolute top-0 left-0 right-0 w-full will-change-transform"}else{const W=A.index*V.columns;ee=e.slice(W,W+V.columns).map(ve=>({item:ve,displayW:V.cellW,displayH:V.mediaH})),te={transform:`translate3d(0, ${A.start}px, 0)`,gridTemplateColumns:`repeat(${V.columns}, minmax(0, 1fr))`,gap:gn,paddingBottom:gn},R="absolute top-0 left-0 right-0 w-full grid will-change-transform"}const O=A.index===((Y=je[0])==null?void 0:Y.index);try{if(!ue)for(const{item:W}of ee)try{me.prefetchThumb(W.path)}catch{}}catch{}return u.jsx("div",{className:R,role:"row",style:te,children:ee.map(({item:W,displayW:ie,displayH:ve})=>{const _e=!a&&(p===W.path||pn.has(W.path)),we=(l==null?void 0:l.has(W.path))??!1,Xe=V.mode==="adaptive"?{width:ie}:{},Ee=V.mode==="adaptive"?{height:ve}:{},lt=V.mode==="adaptive"?"relative rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group shrink-0":"relative aspect-[4/3] rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group";return u.jsxs("div",{id:`cell-${encodeURIComponent(W.path)}`,className:`relative min-w-0 ${_e?"outline outline-2 outline-accent outline-offset-2 rounded-[10px]":""}`,role:"gridcell","aria-selected":_e,tabIndex:C===W.path?0:-1,onFocus:()=>M(W.path),draggable:!0,style:Xe,onDragStart:Pe=>mr(W.path,Pe),onDragEnd:()=>{},onContextMenu:Pe=>{Pe.preventDefault(),Pe.stopPropagation(),i&&i(Pe,W.path)},children:[u.jsxs("div",{className:lt,style:Ee,onMouseEnter:()=>{try{me.prefetchFile(W.path)}catch{}},onDoubleClick:()=>s(W.path),onMouseLeave:le,children:[u.jsx("div",{className:"cell-content absolute inset-0",children:u.jsx(Cw,{path:W.path,name:W.name,selected:_e,highlighted:we,displayW:ie,displayH:ve,ioRoot:N.current,isScrolling:ue,priority:O,onClick:Pe=>Bt(W.path,Pe)})}),u.jsx("div",{className:"absolute right-0 bottom-0 w-7 h-7 cursor-zoom-in",onMouseEnter:()=>oe(W.path),onMouseLeave:le,children:u.jsx("div",{className:"absolute right-0 bottom-0 h-[18px] w-[18px] flex items-center justify-center text-text select-none opacity-0 group-hover:opacity-50 hover:opacity-100 transition-all duration-[140ms]",style:{clipPath:'path("M0 9C0 4.02944 4.02944 0 9 0H18V18H0V9Z")',background:"linear-gradient(135deg, rgba(18,18,18,0.9) 0%, rgba(34,34,34,0.9) 60%, rgba(22,22,22,0.9) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",borderLeft:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 1px 2px rgba(0,0,0,0.45)",backdropFilter:"blur(1px)"},children:u.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#d9dce2]","aria-hidden":"true",style:{transform:"translate(0px,0px)"},children:[u.jsx("circle",{cx:"11",cy:"11",r:"5.4"}),u.jsx("path",{d:"M15.5 15.5 L19 19"})]})})})]}),u.jsxs("div",{className:"flex flex-col items-center text-center gap-0 mt-1 px-0.5 text-white/90",children:[u.jsx("div",{className:"text-sm leading-[18px] thumb-filename line-clamp-2 break-words hyphens-auto text-center",title:W.name,children:(()=>{const Pe=(o||"").trim();if(!Pe)return W.name;const vr=W.name,yr=vr.toLowerCase().indexOf(Pe.toLowerCase());if(yr===-1)return W.name;const $l=vr.slice(0,yr),Ul=vr.slice(yr,yr+Pe.length),Bl=vr.slice(yr+Pe.length);return u.jsxs(u.Fragment,{children:[$l,u.jsx("mark",{className:"bg-accent/20 text-inherit rounded px-0.5",children:Ul}),Bl]})})()}),u.jsxs("div",{className:"text-[11px] leading-[15px] opacity-70",children:[W.w,"  ",W.h]})]})]},W.path)})},A.key)}),S&&E&&v&&od.createPortal(u.jsx("div",{className:"toolbar-offset fixed inset-0 z-[999] flex items-center justify-center pointer-events-none bg-black/20 opacity-100",children:u.jsx("img",{src:E,alt:"preview",className:"max-w-[80vw] max-h-[80vh] object-contain opacity-[0.98]"})}),document.body)]},`${c}-${de}`)})}const Yw=48,Gw=[.1,.24,.5,.74,.9];function qw({items:e,metricKey:t,scrollRef:n,sortDir:r}){const{orderedValues:s,numericValues:i}=f.useMemo(()=>{var N;const j=[],I=[];for(const z of e){const J=(N=z.metrics)==null?void 0:N[t],U=J==null||Number.isNaN(J)?null:J;j.push(U),U!=null&&I.push(U)}return{orderedValues:j,numericValues:I}},[e,t]),o=f.useMemo(()=>Xw(i,Yw),[i]),l=f.useMemo(()=>Jw(i,Gw),[i]),[a,c]=f.useState(0),[m,h]=f.useState(null),[y,S]=f.useState(!1),k=f.useRef(null);if(f.useEffect(()=>{const j=n.current;if(!j)return;const I=()=>{const N=Math.max(1,j.scrollHeight-j.clientHeight),z=jr(N>0?j.scrollTop/N:0);c(z)};return I(),j.addEventListener("scroll",I,{passive:!0}),window.addEventListener("resize",I),()=>{j.removeEventListener("scroll",I),window.removeEventListener("resize",I)}},[n,e.length]),f.useEffect(()=>{h(null)},[t,e.length]),!o)return null;const E={min:o.min,max:o.max},b=m!=null?yh(m):null,v=yh(a),g=r==="desc",p=f.useMemo(()=>m==null?null:t1(s,m),[s,m]);function d(j){h(jr(j))}function C(){h(null)}function M(j){const I=n.current;if(!I)return;const N=Math.max(0,I.scrollHeight-I.clientHeight);I.scrollTop=jr(j)*N}function T(j){var N;const I=(N=k.current)==null?void 0:N.getBoundingClientRect();return I?jr((j.clientY-I.top)/I.height):null}return u.jsxs("div",{className:"absolute right-0 top-3 bottom-3 w-[14px] flex items-stretch pointer-events-auto",children:[u.jsxs("svg",{ref:k,viewBox:"0 0 10 100",preserveAspectRatio:"none",className:"w-full h-full rounded bg-surface-inset border border-border/60 cursor-ns-resize",onPointerDown:j=>{var N;j.preventDefault();const I=T(j);I!=null&&(S(!0),d(I),M(I),(N=k.current)==null||N.setPointerCapture(j.pointerId))},onPointerMove:j=>{const I=T(j);if(I==null){y||C();return}d(I),y&&M(I)},onPointerUp:j=>{var I;S(!1),(I=k.current)==null||I.releasePointerCapture(j.pointerId)},onPointerLeave:()=>{y||C()},children:[Zw(o.bins,"var(--border-strong)",{flip:g}),e1(l,E,{flip:g,color:"var(--muted)"}),vh(v,{color:"var(--highlight)",strokeWidth:.8}),b!=null&&vh(b,{color:"var(--text-secondary)",strokeWidth:.6,dashed:!0})]}),p!=null&&m!=null&&u.jsx("div",{className:"pointer-events-none absolute right-full mr-2 px-1.5 py-0.5 rounded border border-border bg-surface text-[10px] text-text shadow",style:{top:`calc(${(m*100).toFixed(2)}% - 8px)`},children:r1(p)})]})}function Xw(e,t){if(!e.length)return null;const n=Math.min(...e);let r=Math.max(...e);n===r&&(r=n+1);const s=new Array(t).fill(0),i=t/(r-n);for(const o of e){const l=Math.max(0,Math.min(t-1,Math.floor((o-n)*i)));s[l]+=1}return{bins:s,min:n,max:r}}function Jw(e,t){if(!e.length)return[];const n=[...e].sort((s,i)=>s-i),r=n.length-1;return t.map(s=>{const i=r*s,o=Math.floor(i),l=Math.ceil(i);if(o===l)return n[o];const a=i-o;return n[o]+(n[l]-n[o])*a})}function Zw(e,t,n){const r=Math.max(1,...e),s=100/e.length,i=(n==null?void 0:n.flip)??!1;return e.map((o,l)=>{const a=Math.max(.8,o/r*10),c=(i?e.length-1-l:l)*s;return u.jsx("rect",{x:10-a,y:c,width:a,height:Math.max(.2,s-.2),fill:t,opacity:.9},`sb-${l}`)})}function e1(e,t,n){const r=(n==null?void 0:n.flip)??!1,s=n==null?void 0:n.color;return e.map((i,o)=>{const l=n1(i,t,r),a=o===2;return u.jsx("line",{x1:0,y1:l,x2:10,y2:l,stroke:s,strokeWidth:a?.8:.5,opacity:a?.9:.6,vectorEffect:"non-scaling-stroke"},`qt-${o}-${i}`)})}function vh(e,t){return u.jsx("line",{x1:0,y1:e,x2:10,y2:e,stroke:t.color,strokeWidth:t.strokeWidth??.6,strokeDasharray:t.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function t1(e,t){if(!e.length)return null;const n=Math.round(jr(t)*(e.length-1)),r=e[n];if(r!=null)return r;for(let s=1;s<e.length;s++){const i=n-s;if(i>=0&&e[i]!=null)return e[i];const o=n+s;if(o<e.length&&e[o]!=null)return e[o]}return null}function n1(e,t,n){const r=t.max-t.min;if(r===0)return 0;const s=jr((e-t.min)/r);return(n?1-s:s)*100}function yh(e){return jr(e)*100}function jr(e){return e<0?0:e>1?1:e}function r1(e){if(e==null||Number.isNaN(e))return"-";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function tc(e,t){const[n,r]=f.useState(null),s=f.useRef(null);return f.useEffect(()=>{if(!e){if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}r(null);return}let i=!0;return e().then(o=>{if(!i)return;const l=URL.createObjectURL(o);if(s.current)try{URL.revokeObjectURL(s.current)}catch{}s.current=l,r(l)}).catch(()=>{}),()=>{i=!1}},t),f.useEffect(()=>()=>{if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}},[]),n}function s1(){const[e,t]=f.useState(1),[n,r]=f.useState(0),[s,i]=f.useState(0),[o,l]=f.useState(1),[a,c]=f.useState(!1),[m,h]=f.useState(!1),[y,S]=f.useState(!1),k=f.useRef(null),E=f.useRef(null),b=()=>{const p=k.current,d=E.current;if(!p||!d||!d.naturalWidth||!d.naturalHeight)return;const C=p.getBoundingClientRect(),M=C.width/d.naturalWidth,T=C.height/d.naturalHeight,j=Math.min(1,Math.min(M,T));l(j);const I=d.naturalWidth*j,N=d.naturalHeight*j;r((C.width-I)/2),i((C.height-N)/2)};return f.useEffect(()=>{const p=k.current;if(!p)return;const d=new ResizeObserver(()=>{try{requestAnimationFrame(()=>b())}catch{b()}});return d.observe(p),()=>d.disconnect()},[]),{scale:e,setScale:t,tx:n,setTx:r,ty:s,setTy:i,base:o,setBase:l,ready:a,setReady:c,dragging:m,setDragging:h,visible:y,setVisible:S,containerRef:k,imgRef:E,fitAndCenter:b,handleWheel:p=>{p.preventDefault();const d=p.deltaY>0?-1:1,C=1.2,M=.05,T=8,j=k.current;if(!j)return;const I=j.getBoundingClientRect(),N=p.clientX-I.left,z=p.clientY-I.top;t(J=>{const U=Math.min(T,Math.max(M,J*Math.pow(C,d))),V=U/J;return r(be=>N-V*(N-be)),i(be=>z-V*(z-be)),Number(U.toFixed(4))})},handleMouseDown:p=>{const d=k.current,C=E.current;if(!d||!C||p.target!==C)return;const T=d.getBoundingClientRect();if(p.clientX<T.left||p.clientX>T.right||p.clientY<T.top||p.clientY>T.bottom)return;p.preventDefault(),p.stopPropagation(),h(!0);const j=p.clientX,I=p.clientY,N=n,z=s,J=V=>{r(N+(V.clientX-j)),i(z+(V.clientY-I))},U=()=>{window.removeEventListener("mousemove",J),window.removeEventListener("mouseup",U),h(!1)};window.addEventListener("mousemove",J),window.addEventListener("mouseup",U)}}}function i1({path:e,onClose:t,onNavigate:n,onZoomChange:r,requestedZoomPercent:s,onZoomRequestConsumed:i}){const{scale:o,setScale:l,tx:a,setTx:c,ty:m,setTy:h,base:y,ready:S,setReady:k,dragging:E,visible:b,setVisible:v,containerRef:g,imgRef:p,fitAndCenter:d,handleWheel:C,handleMouseDown:M}=s1(),T=tc(()=>me.getFile(e),[e]),j=tc(()=>me.getThumb(e),[e]),I=f.useCallback(()=>{v(!1),window.setTimeout(t,110)},[t,v]);return f.useEffect(()=>{requestAnimationFrame(()=>{var N;v(!0),(N=g.current)==null||N.focus()})},[e]),f.useEffect(()=>{const N=z=>{z.key==="Escape"?I():(z.key==="ArrowRight"||z.key==="d")&&n?n(1):(z.key==="ArrowLeft"||z.key==="a")&&n&&n(-1)};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[t,n]),f.useEffect(()=>{k(!1)},[T]),f.useEffect(()=>{r&&r(y*o*100)},[y,o,r]),f.useEffect(()=>{if(s==null)return;const N=g.current;if(!N){i&&i();return}const z=Math.max(.05,Math.min(8,s/100/Math.max(1e-6,y))),J=N.getBoundingClientRect(),U=J.width/2,V=J.height/2;l(be=>{const je=z/be;return c(he=>U-je*(U-he)),h(he=>V-je*(V-he)),Number(z.toFixed(4))}),i&&i()},[s,y,i]),u.jsxs("div",{ref:g,role:"dialog","aria-modal":!0,"aria-label":"Image viewer",tabIndex:-1,className:`toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] flex items-start justify-start bg-panel z-viewer overflow-hidden transition-opacity duration-[110ms] ease-out cursor-grab focus:outline-none focus-visible:outline-none ${E?"cursor-grabbing select-none":""} ${b?"opacity-100":"opacity-0"}`,style:{outline:"none"},onClick:I,onWheel:C,onMouseDown:M,onKeyDown:N=>{N.key==="Tab"&&N.preventDefault()},children:[u.jsxs("button",{"aria-label":"Close",onClick:N=>{N.stopPropagation(),I()},className:"btn btn-sm absolute top-3 right-3 z-10",title:"Close (Esc)",children:[u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"M6 6l12 12"})]}),"Close"]}),j&&u.jsx("img",{src:j,alt:"thumb",className:"absolute top-0 left-0 max-w-none max-h-none object-contain pointer-events-none transition-opacity duration-[110ms] ease-out",draggable:!1,onDragStart:N=>N.preventDefault(),style:{transform:`translate(${a}px, ${m}px) scale(${y})`,transformOrigin:"0 0",opacity:S?0:.5,filter:"blur(0.25px)"}}),T&&u.jsx("img",{ref:p,src:T,alt:"viewer",className:"max-w-none max-h-none object-contain transition-opacity duration-[110ms] ease-out will-change-transform select-none",draggable:!1,onDragStart:N=>{N.preventDefault()},onLoad:N=>{d(),l(1);try{requestAnimationFrame(()=>k(!0))}catch{k(!0)}},onClick:N=>N.stopPropagation(),style:{transform:`translate(${a}px, ${m}px) scale(${y*o})`,transformOrigin:"0 0",opacity:S?.99:0,WebkitUserDrag:"none"}})]})}function zl(){const[e,t]=f.useState(Sw());return f.useEffect(()=>ww(t),[]),e}const zi=e=>["item",e],o1={v:1,tags:[],notes:"",version:1,updated_at:"",updated_by:"web"},Ht=new Map,zo=new Map,nc=new Map,pd=new Map;let xh=0;const fn=new Map,li=new Map,l1=12e3,rc=new Set,sc=new Set;let md={state:"idle"},Di=null,ic=0;function wo(e){md=e;for(const t of rc)t(e)}function jn(){const e=fn.size>0,t=Ht.size+zo.size+ic;if(e){wo({state:"error",message:"Conflict detected"});return}if(Di){wo({state:"error",message:Di});return}if(t>0){wo({state:"syncing"});return}wo({state:"idle"})}function gd(){let e=null;for(const t of nc.values())e=e==null?t:Math.min(e,t);for(const t of pd.values())e=e==null?t:Math.min(e,t);return e}function gl(){const e=gd();for(const t of sc)t(e)}function vl(e){Di=e,jn()}function Wg(){Di&&(Di=null,jn())}function wh(e){ic=Math.max(0,ic+e),jn()}function a1(){xh+=1;const e=xh;return pd.set(e,Date.now()),gl(),e}function u1(e){e!=null&&pd.delete(e)&&gl()}function Dl(e){const t=li.get(e);if(!t||!t.size)return;const n=fn.get(e)??null;for(const r of t)r(n)}function Sh(e){return fn.get(e)??null}function Al(e){fn.delete(e)&&(Dl(e),jn())}function c1(e,t){fn.set(e,t),Dl(e),jn()}function d1(e,t){const n=li.get(e)??new Set;return n.add(t),li.set(e,n),t(fn.get(e)??null),()=>{const r=li.get(e);r&&(r.delete(t),r.size||li.delete(e))}}function f1(e){const[t,n]=f.useState(()=>e?Sh(e):null);return f.useEffect(()=>{if(!e){n(null);return}return n(Sh(e)),d1(e,n)},[e]),t}function h1(e){return rc.add(e),e(md),()=>{rc.delete(e)}}function p1(){const[e,t]=f.useState(md);return f.useEffect(()=>h1(t),[]),e}function m1(e){return sc.add(e),e(gd()),()=>{sc.delete(e)}}function g1(){const[e,t]=f.useState(()=>gd()),[n,r]=f.useState(()=>e==null?null:Date.now()-e);return f.useEffect(()=>m1(t),[]),f.useEffect(()=>{if(e==null){r(null);return}r(Date.now()-e);const s=window.setInterval(()=>{r(Date.now()-e)},1e3);return()=>window.clearInterval(s)},[e]),n}function oc(e){const t={};return Object.prototype.hasOwnProperty.call(e,"star")&&(t.set_star=e.star??null),Object.prototype.hasOwnProperty.call(e,"notes")&&(t.set_notes=e.notes??""),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.set_tags=Array.isArray(e.tags)?e.tags:[]),t}function lc(e){var t,n;return e.set_star!==void 0||e.set_notes!==void 0||e.set_tags!==void 0||(((t=e.add_tags)==null?void 0:t.length)??0)>0||(((n=e.remove_tags)==null?void 0:n.length)??0)>0}function ti(e){const t=[],n=new Set;for(const r of e??[]){if(typeof r!="string")continue;const s=r.trim();!s||n.has(s)||(n.add(s),t.push(s))}return t}function v1(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}function y1(e,t){if(e.set_star!==void 0&&(t.star??null)!==e.set_star||e.set_notes!==void 0&&(t.notes??"")!==(e.set_notes??""))return!1;if(e.set_tags!==void 0){const r=ti(e.set_tags),s=ti(t.tags);return v1(r,s)}const n=ti(t.tags);for(const r of ti(e.add_tags))if(!n.includes(r))return!1;for(const r of ti(e.remove_tags))if(n.includes(r))return!1;return!0}function Hg(e,t,n){if(n instanceof ur&&n.status===409){const r=n.body;if(r!=null&&r.current)return c1(e,{path:e,current:r.current,pending:t,receivedAt:new Date().toISOString()}),!0}return!1}function x1(e,t){const n=fn.get(e);if(n){if(y1(n.pending,t)){Al(e);return}fn.set(e,{...n,current:t}),Dl(e),jn()}}function w1(e){const t=zl();return dd({queryKey:zi(e),queryFn:()=>me.getSidecar(e),enabled:!!e,staleTime:3e4,gcTime:5*6e4,retry:2,refetchInterval:t?l1:!1,refetchIntervalInBackground:t})}function S1(e){const t=Gr();return qx({mutationFn:async({patch:n,baseVersion:r,idempotencyKey:s})=>{const i=oc(n);if(!lc(i))return t.getQueryData(zi(e))??o1;const o={...i,base_version:r};try{return await me.patchSidecar(e,o,{idempotencyKey:s??Fi("patch"),ifMatch:r})}catch(l){throw Hg(e,i,l),l}},retry:(n,r)=>r instanceof ur&&r.status===409?!1:n<2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),4e3),onMutate:()=>(Wg(),wh(1),{inflightId:a1()}),onSuccess:n=>{Al(e),t.setQueryData(zi(e),n)},onError:n=>{n instanceof ur&&n.status===409||(n instanceof ur?vl(n.message):vl("Failed to save"))},onSettled:(n,r,s,i)=>{wh(-1),u1(i==null?void 0:i.inflightId)}})}const k1=6;async function kh(e,t){if(!e.length)return;let n=0;const r=[],s=async()=>{for(;n<e.length;){const o=n++,l=e[o];try{await Vg(l,t)}catch(a){r.push({path:l,error:a}),console.error(`[bulkUpdateSidecars] Failed for ${l}:`,a)}}},i=Array.from({length:Math.min(k1,e.length)},()=>s());if(await Promise.all(i),r.length===e.length)throw new Error(`All ${e.length} sidecar updates failed`)}async function Vg(e,t){const n=Ht.get(e)||{};Ht.set(e,{...n,...t}),Wg(),jn();const r=zo.get(e);if(r)return r;nc.set(e,Date.now()),gl();const s=(async()=>{try{for(;Ht.has(e);){const i=Ht.get(e);if(!i)break;const o=oc(i);if(!lc(o)){Ht.get(e)===i&&Ht.delete(e);continue}let l=1;try{l=(await me.getSidecar(e)).version??1}catch{l=1}const a={...o,base_version:l};try{await me.patchSidecar(e,a,{idempotencyKey:Fi("patch"),ifMatch:l}),Al(e),Ht.get(e)===i&&Ht.delete(e)}catch(c){if(Hg(e,o,c)){const h=Ht.get(e);if(h&&h!==i){const y=oc(h);if(lc(y)){const S=fn.get(e);S&&(fn.set(e,{...S,pending:y}),Dl(e))}}Ht.delete(e)}else c instanceof ur?vl(c.message):vl("Failed to save");throw c}}}finally{zo.delete(e),nc.delete(e),gl(),jn()}})();return zo.set(e,s),jn(),s}function Oa(e){const t=["B","KB","MB","GB","TB"];let n=0,r=e;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${r.toFixed(1)} ${t[n]}`}function Fa(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function C1(e,t=28){if(e.length<=t)return e;const n=Math.max(4,Math.floor((t-1)/2));return`${e.slice(0,n)}${e.slice(-n)}`}const E1=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});function N1(e){const t=e.trim();return!t||/[zZ]|[+-]\d{2}:?\d{2}$/.test(t)?t:`${t.includes("T")?t:t.replace(" ","T")}Z`}function Ch(e){if(!e)return null;const t=Date.parse(N1(e));return Number.isFinite(t)?t:null}function b1(e,t=Date.now()){const n=Math.max(0,t-e),r=Math.max(1,Math.floor(n/1e3));if(r<60)return`${r} second${r===1?"":"s"} ago`;const s=Math.floor(r/60);if(s<60)return`${s} minute${s===1?"":"s"} ago`;const i=Math.floor(s/60);return`${i} hour${i===1?"":"s"} ago`}function j1(e){return E1.format(new Date(e))}function Qg(e){return!e||!(e instanceof HTMLElement)?!1:e.closest('input, textarea, [contenteditable="true"]')!==null}function Do(e){if(Array.isArray(e))return e.map(Do);if(e&&typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,Do(n)]));if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")||t.startsWith('"')&&t.endsWith('"'))try{const r=JSON.parse(t);return Do(r)}catch{return e}}return e}function za(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function M1(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Eh(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}function R1(e){const t=/(\"(\\u[a-fA-F0-9]{4}|\\[^u]|[^\\"])*\"(?:\s*:)?|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\btrue\b|\bfalse\b|\bnull\b)/g;let n="",r=0;for(const s of e.matchAll(t)){const i=s.index??0,o=s[0];n+=za(e.slice(r,i));let l="var(--json-fallback)";o.startsWith('"')&&o.trimEnd().endsWith(":")?l="var(--json-key)":o.startsWith('"')?l="var(--json-string)":/true|false|null/.test(o)?l="var(--json-literal)":l="var(--json-number)",n+=`<span style="color:${l}">${za(o)}</span>`,r=i+o.length}return n+=za(e.slice(r)),n}const L1=["overview","basics","metadata","notes"],Nh="lenslet.inspector.sections",bh="lenslet.inspector.metricsExpanded",Da=12,T1={overview:!0,metadata:!0,basics:!0,notes:!0};function So({title:e,open:t,onToggle:n,actions:r,children:s,contentClassName:i}){const[o,l]=f.useState(t),[a,c]=f.useState(t?"open":"closed");return f.useEffect(()=>{if(t){l(!0);const h=window.requestAnimationFrame(()=>c("open"));return()=>window.cancelAnimationFrame(h)}c("closing");const m=window.setTimeout(()=>{l(!1),c("closed")},140);return()=>window.clearTimeout(m)},[t]),u.jsxs("div",{className:"border-b border-border/60",children:[u.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[u.jsxs("button",{type:"button",onClick:n,"aria-expanded":t,className:"flex items-center gap-2 inspector-section-title hover:text-text transition-colors",children:[u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform ${t?"rotate-90":""}`,"aria-hidden":"true",children:u.jsx("path",{d:"m9 18 6-6-6-6"})}),u.jsx("span",{children:e})]}),r]}),o&&u.jsx("div",{className:"inspector-section-body","data-state":a,"aria-hidden":!t,children:u.jsx("div",{className:i??"px-3 pb-3",children:s})})]})}function I1({path:e,selectedPaths:t=[],items:n=[],onResize:r,onStarChanged:s,sortSpec:i}){const o=!!e,{data:l,isLoading:a}=w1(e??""),c=S1(e??""),m=Gr(),[h,y]=f.useState(T1),S=f.useCallback(R=>{y(O=>({...O,[R]:!O[R]}))},[]),[k,E]=f.useState(!1),[b,v]=f.useState(""),[g,p]=f.useState(""),[d,C]=f.useState(""),[M,T]=f.useState(null),[j,I]=f.useState("idle"),[N,z]=f.useState(!1),[J,U]=f.useState(null),[V,be]=f.useState({}),he=f.useMemo(()=>{const R=n.find(O=>O.path===e);return R&&R.star!==void 0?R.star:null},[n,e])??(l==null?void 0:l.star)??null,P=t.length>1,B=f1(P?null:e),Z={tags:!!(B!=null&&B.pending.set_tags),notes:(B==null?void 0:B.pending.set_notes)!==void 0,star:(B==null?void 0:B.pending.set_star)!==void 0},pe=f.useMemo(()=>{const R=new Set(t);return n.filter(O=>R.has(O.path))},[n,t]),ue=f.useMemo(()=>pe.reduce((R,O)=>R+(O.size||0),0),[pe]);f.useEffect(()=>{l&&(v((l.tags||[]).join(", ")),p(l.notes||"")),C(""),T(null),I("idle"),z(!1)},[l==null?void 0:l.updated_at,e]);const Me=f.useCallback(R=>{if(P&&t.length){kh(t,R);return}if(!e)return;const O=(l==null?void 0:l.version)??1;c.mutate({patch:R,baseVersion:O,idempotencyKey:Fi("patch")})},[P,t,e,l==null?void 0:l.version,c]),q=f.useCallback(()=>{if(!B||!e)return;const R={};B.pending.set_tags!==void 0&&(R.tags=Eh(b)),B.pending.set_notes!==void 0&&(R.notes=g),B.pending.set_star!==void 0&&(R.star=he??null);const O=B.current.version??1;c.mutate({patch:R,baseVersion:O,idempotencyKey:Fi("patch")})},[B,e,b,g,he,c]),le=f.useCallback(()=>{if(!B||!e)return;const R=B.current;v((R.tags||[]).join(", ")),p(R.notes||""),m.setQueryData(zi(e),R),Al(e),s==null||s([e],R.star??null)},[B,e,m,s]);f.useEffect(()=>{if(!e)return;const R=O=>{if(Qg(O.target))return;const Y=O.key;if(!/^[0-5]$/.test(Y))return;O.preventDefault();const W=Y==="0"?null:Number(Y);if(P&&t.length){Me({star:W}),s==null||s(t,W);return}Me({star:W}),s==null||s([e],W)};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[e,P,t,Me,s]);const oe=tc(e?()=>me.getThumb(e):null,[e]),de=e?e.split("/").pop()||e:"",tt=f.useMemo(()=>{var O;if(de.includes("."))return de.slice(de.lastIndexOf(".")+1).toUpperCase();const R=n.find(Y=>Y.path===e);return(O=R==null?void 0:R.type)!=null&&O.includes("/")?R.type.split("/")[1].toUpperCase():""},[de,n,e]),Re=f.useMemo(()=>n.find(R=>R.path===e),[n,e]),vt=f.useMemo(()=>e?(Re==null?void 0:Re.source)??e:"",[Re,e]),hn=f.useCallback(async()=>{if(e){I("loading"),T(null);try{const R=await me.getMetadata(e),O=Do(R.meta),Y=JSON.stringify(O,null,2);C(Y),I("loaded")}catch(R){const O=R instanceof Error?R.message:"Failed to load metadata";C(O),T(O),I("error")}}},[e]),Bt=f.useCallback(()=>{var R;d&&((R=navigator.clipboard)==null||R.writeText(d).then(()=>{z(!0),setTimeout(()=>z(!1),1200)}).catch(O=>{const Y=O instanceof Error?O.message:"Copy failed";T(Y)}))},[d]),mr=f.useMemo(()=>d?R1(d):"",[d]),pn=j==="loading"?"Loading metadata":d||"PNG metadata not loaded yet.",tn=j==="loaded"&&!!d,gr=tn?"h-48":"h-24",A=P?null:u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d&&u.jsx("button",{className:"text-muted underline underline-offset-2 hover:text-text disabled:opacity-60 min-w-[48px] text-center",onClick:Bt,disabled:!d,title:"Copy metadata",children:N?"Copied":"Copy"}),u.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[78px]",onClick:hn,disabled:!e||j==="loading",children:j==="loading"?"Loading":"Load meta"})]});f.useEffect(()=>{try{const R=localStorage.getItem(Nh);if(!R)return;const O=JSON.parse(R);if(!O||typeof O!="object")return;const Y={};for(const W of L1)typeof O[W]=="boolean"&&(Y[W]=O[W]);Object.keys(Y).length>0&&y(W=>({...W,...Y}))}catch{}},[]),f.useEffect(()=>{try{localStorage.setItem(Nh,JSON.stringify(h))}catch{}},[h]),f.useEffect(()=>{try{const R=localStorage.getItem(bh);R==="1"||R==="true"?E(!0):(R==="0"||R==="false")&&E(!1)}catch{}},[]),f.useEffect(()=>{try{localStorage.setItem(bh,k?"1":"0")}catch{}},[k]);const ee=f.useCallback((R,O)=>{var Y;O&&((Y=navigator.clipboard)==null||Y.writeText(O).then(()=>{U(R),setTimeout(()=>U(W=>W===R?null:W),1e3)}).catch(()=>{}))},[]),te=f.useCallback((R,O)=>{if(O&&!V[R]){const Y=O.offsetHeight;Y&&be(W=>W[R]?W:{...W,[R]:Y})}},[V]);return o?u.jsxs("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:[!P&&u.jsx("div",{className:"p-3 border-b border-border flex justify-center",children:u.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border w-[220px] h-[160px] bg-panel select-none",children:[oe&&u.jsx("img",{src:oe,alt:"thumb",className:"block w-full h-full object-contain"}),!!tt&&u.jsx("div",{className:"absolute top-1.5 left-1.5 bg-surface border border-border text-text text-xs px-1.5 py-0.5 rounded-md select-none",children:tt})]})}),u.jsx(So,{title:P?"Selection":"Item",open:h.overview,onToggle:()=>S("overview"),contentClassName:"px-3 pb-3 space-y-2",children:P?u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{className:"inspector-field",children:[u.jsx("div",{className:"inspector-field-label",children:"Selected"}),u.jsxs("div",{className:"inspector-field-value",children:[t.length," files"]})]}),u.jsxs("div",{className:"inspector-field",children:[u.jsx("div",{className:"inspector-field-label",children:"Total size"}),u.jsx("div",{className:"inspector-field-value",children:Oa(ue)})]})]}):u.jsxs("div",{className:"inspector-field",children:[u.jsx("div",{className:"inspector-field-label",children:"Filename"}),u.jsx("div",{className:"inspector-field-value break-all",title:de,children:de})]})}),u.jsxs(So,{title:"Basics",open:h.basics,onToggle:()=>S("basics"),children:[u.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",role:"radiogroup","aria-label":"Star rating",children:[u.jsx("span",{className:"ui-kv-label w-16 shrink-0",children:P?"Rating (all)":"Rating"}),u.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(R=>{const O=(he??0)>=R;return u.jsx("button",{className:`w-6 h-6 flex items-center justify-center rounded-lg border border-border/60 bg-transparent text-[13px] ${O?"text-star-active":"text-star-inactive"} hover:border-border hover:text-star-hover transition-colors`,onClick:()=>{const Y=he===R&&!P?null:R;P&&t.length?(s==null||s(t,Y),kh(t,{star:Y})):e&&(s==null||s([e],Y),Vg(e,{star:Y}))},title:`${R} star${R>1?"s":""} (key ${R})`,"aria-label":`${R} star${R>1?"s":""}`,"aria-pressed":he===R,children:O?"":""},R)})})]}),!P&&B&&Z.star&&u.jsxs("div",{className:"ui-banner ui-banner-danger mt-2 text-[11px] flex items-center justify-between gap-2",children:[u.jsx("span",{children:"Rating conflict."}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{className:"btn btn-sm",onClick:q,children:"Apply again"}),u.jsx("button",{className:"btn btn-sm btn-ghost",onClick:le,children:"Keep theirs"})]})]}),!P&&Re&&u.jsxs("div",{className:"text-[12px] space-y-1.5 leading-relaxed",children:[u.jsxs("div",{className:"ui-kv-row",children:[u.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ee("dimensions",`${Re.w}${Re.h}`),children:"Dimensions"}),u.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:R=>te("dimensions",R),style:V.dimensions?{minHeight:V.dimensions}:void 0,children:J==="dimensions"?"Copied":`${Re.w}${Re.h}`})]}),u.jsxs("div",{className:"ui-kv-row",children:[u.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ee("size",Oa(Re.size)),children:"Size"}),u.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:R=>te("size",R),style:V.size?{minHeight:V.size}:void 0,children:J==="size"?"Copied":Oa(Re.size)})]}),u.jsxs("div",{className:"ui-kv-row",children:[u.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ee("type",Re.type),children:"Type"}),u.jsx("span",{className:"ui-kv-value break-all text-right inline-block min-w-[80px]",ref:R=>te("type",R),style:V.type?{minHeight:V.type}:void 0,children:J==="type"?"Copied":Re.type})]}),u.jsxs("div",{className:"ui-kv-row",children:[u.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>vt&&ee("source",vt),children:"Source"}),u.jsx("span",{className:"ui-kv-value inspector-value-clamp break-words text-right max-w-[70%] inline-block min-w-[80px]",ref:R=>te("source",R),style:V.source?{minHeight:V.source}:void 0,title:vt,children:J==="source"?"Copied":vt})]}),(()=>{const R=Re.metrics||null;if(!R)return null;const O=Object.entries(R).filter(([,Ee])=>Ee!=null);if(!O.length)return null;const Y=(i==null?void 0:i.kind)==="metric"?i.key:null,W=[...O].sort(([Ee],[lt])=>Ee.localeCompare(lt));let ie=W;if(Y){const Ee=W.findIndex(([lt])=>lt===Y);Ee>0&&(ie=[W[Ee],...W.slice(0,Ee),...W.slice(Ee+1)])}const ve=ie.length>Da,we=k||!ve?ie:ie.slice(0,Da),Xe=ie.length-Da;return u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"ui-subsection-title mb-1",children:"Metrics"}),u.jsxs("div",{className:"space-y-1",children:[we.map(([Ee,lt])=>{const Pe=Y===Ee;return u.jsxs("div",{className:"ui-kv-row",children:[u.jsx("span",{className:`w-24 shrink-0 ${Pe?"text-accent font-medium":"ui-kv-label"}`,children:Ee}),u.jsx("span",{className:`ui-kv-value text-right ${Pe?"text-accent font-medium":""}`,children:M1(lt)})]},Ee)}),ve&&u.jsx("button",{type:"button",className:"text-[11px] text-muted underline underline-offset-2 hover:text-text",onClick:()=>E(Ee=>!Ee),"aria-expanded":k,children:k?"Show less":`+${Xe} more`})]})]})})()]})]}),!P&&u.jsxs(So,{title:"Metadata",open:h.metadata,onToggle:()=>S("metadata"),actions:A,children:[u.jsx("pre",{className:`ui-code-block ${gr} overflow-auto whitespace-pre-wrap`,children:tn?u.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:mr}}):pn}),M&&u.jsx("div",{className:"text-[11px] text-danger mt-1 break-words",children:M})]}),u.jsxs(So,{title:"Notes & Tags",open:h.notes,onToggle:()=>S("notes"),contentClassName:"px-3 pb-3 space-y-2",children:[!P&&B&&(Z.tags||Z.notes)&&u.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[u.jsx("div",{className:"font-semibold",children:"Conflicting edits detected."}),u.jsx("div",{className:"text-[11px] text-muted mt-0.5",children:"Your changes were not saved because this item was updated elsewhere."}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsx("button",{className:"btn btn-sm",onClick:q,children:"Apply my changes again"}),u.jsx("button",{className:"btn btn-sm btn-ghost",onClick:le,children:"Keep theirs"})]})]}),u.jsx("textarea",{className:"ui-textarea inspector-input w-full scrollbar-thin",placeholder:"Add notes",value:g,onChange:R=>p(R.target.value),onBlur:()=>{Me({notes:g})},"aria-label":P?"Notes for selected items":"Notes"}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-label",children:P?"Tags (apply to all, comma-separated)":"Tags (comma-separated)"}),u.jsx("input",{className:"ui-input inspector-input w-full",placeholder:"tag1, tag2",value:b,onChange:R=>v(R.target.value),onBlur:()=>{Me({tags:Eh(b)})},"aria-label":P?"Tags for selected items":"Tags"})]})]}),u.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 right-[calc(var(--right)-3px)] hover:bg-accent/20",onMouseDown:r})]}):u.jsx("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:u.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 right-[calc(var(--right)-3px)] hover:bg-accent/20",onMouseDown:r})})}const _1=e=>["folder",e],P1=15e3;function Kg(e){const t=zl();return dd({queryKey:_1(e),queryFn:()=>me.getFolder(e),staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),5e3),refetchOnWindowFocus:!1,refetchInterval:t?P1:!1,refetchIntervalInBackground:t})}const O1=(e,t)=>["search",e,t],F1=2e4;function z1(e,t){const n=zl();return dd({enabled:!!e.trim(),queryKey:O1(e,t),queryFn:()=>me.search(e,t),staleTime:3e3,gcTime:6e4,placeholderData:r=>r,retry:1,refetchInterval:n?F1:!1,refetchIntervalInBackground:n})}const D1=/^[\/@a-zA-Z0-9._\-\/]{1,512}$/,A1=[".jpg",".jpeg",".png",".webp"];function Xt(e){try{const t=decodeURI(e||""),r=(t.startsWith("/")?t:`/${t}`).replace(/\/{2,}/g,"/"),s=r.length>1?r.replace(/\/$/,""):r;return D1.test(s)?s:"/"}catch{return"/"}}function jh(){return(window.location.hash||"").replace(/^#/,"")}function Mh(e){const t=Xt(e),n=`#${encodeURI(t)}`;window.location.hash!==n&&(window.location.hash=n)}function Aa(e){const t=Xt(e),n=`#${encodeURI(t)}`;if(window.location.hash!==n){const r=`${window.location.pathname}${window.location.search}${n}`;window.history.replaceState(window.history.state,"",r)}}function $1(e){const n=Xt(e).toLowerCase();return A1.some(r=>n.endsWith(r))}function vd(e,t){const n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,""),s=[n,r].filter(Boolean).join("/");return s.startsWith("/")?s:`/${s}`}function Rh(e){const n=Xt(e).split("/").filter(Boolean);return n.length<=1?"/":"/"+n.slice(0,-1).join("/")}function U1(e){return e.endsWith("/_trash_")}const B1=new Set([0,1,2,3,4,5]),yd=new Set(["<","<=",">",">="]),W1=/^\d{4}-\d{2}-\d{2}$/;function H1(e,t){return!t||!t.and.length?e:e.filter(n=>V1(n,t.and))}function V1(e,t){for(const n of t)if(!Q1(e,n))return!1;return!0}function Q1(e,t){var n,r,s,i,o,l,a;if("stars"in t){const c=t.stars;if(!c||!c.length)return!0;const m=e.star??0;return c.includes(m)}if("starsIn"in t){const c=t.starsIn.values;if(!c||!c.length)return!0;const m=e.star??0;return c.includes(m)}if("starsNotIn"in t){const c=t.starsNotIn.values;if(!c||!c.length)return!0;const m=e.star??0;return!c.includes(m)}if("nameContains"in t){const c=(n=t.nameContains.value)==null?void 0:n.trim();return c?(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("nameNotContains"in t){const c=(r=t.nameNotContains.value)==null?void 0:r.trim();return c?!(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("commentsContains"in t){const c=(s=t.commentsContains.value)==null?void 0:s.trim();if(!c)return!0;const m=e.comments??"";return m?m.toLowerCase().includes(c.toLowerCase()):!1}if("commentsNotContains"in t){const c=(i=t.commentsNotContains.value)==null?void 0:i.trim();if(!c)return!0;const m=e.comments??"";return m?!m.toLowerCase().includes(c.toLowerCase()):!1}if("urlContains"in t){const c=(o=t.urlContains.value)==null?void 0:o.trim();if(!c)return!0;const m=e.source??e.url??"";return m?m.toLowerCase().includes(c.toLowerCase()):!1}if("urlNotContains"in t){const c=(l=t.urlNotContains.value)==null?void 0:l.trim();if(!c)return!0;const m=e.source??e.url??"";return m?!m.toLowerCase().includes(c.toLowerCase()):!1}if("dateRange"in t){const{from:c,to:m}=t.dateRange;if(!c&&!m)return!0;if(!e.addedAt)return!1;const h=Date.parse(e.addedAt);if(Number.isNaN(h))return!1;const y=Ih(c,!1),S=Ih(m,!0);return!(y!=null&&h<y||S!=null&&h>S)}if("widthCompare"in t){const{op:c,value:m}=t.widthCompare;if(!Number.isFinite(m))return!0;const h=e.w;return!Number.isFinite(h)||h<=0?!1:_h(h,c,m)}if("heightCompare"in t){const{op:c,value:m}=t.heightCompare;if(!Number.isFinite(m))return!0;const h=e.h;return!Number.isFinite(h)||h<=0?!1:_h(h,c,m)}if("metricRange"in t){const{key:c,min:m,max:h}=t.metricRange,y=(a=e.metrics)==null?void 0:a[c];return!(y==null||y<m||y>h)}return!0}function ac(e){if(!e||typeof e!="object")return null;const t=e.and;if(!Array.isArray(t))return null;const n=[];for(const r of t){const s=lS(r);s&&n.push(s)}return{and:n}}function Lh(e){var r;const t=e.and.find(s=>"stars"in s),n=e.and.find(s=>"starsIn"in s);return(r=n==null?void 0:n.starsIn)!=null&&r.values?n.starsIn.values:(t==null?void 0:t.stars)??[]}function $a(e,t){return Yg(e,t)}function K1(e){var n;const t=e.and.find(r=>"starsIn"in r);return((n=t==null?void 0:t.starsIn)==null?void 0:n.values)??[]}function Yg(e,t){const n=vi(t),r=e.and.filter(s=>!("starsIn"in s)&&!("stars"in s));return n.length?{and:[{starsIn:{values:n}},...r]}:{and:r}}function Y1(e){var n;const t=e.and.find(r=>"starsNotIn"in r);return((n=t==null?void 0:t.starsNotIn)==null?void 0:n.values)??[]}function Gg(e,t){const n=vi(t),r=e.and.filter(s=>!("starsNotIn"in s));return n.length?{and:[{starsNotIn:{values:n}},...r]}:{and:r}}function G1(e){var n;const t=e.and.find(r=>"nameContains"in r);return((n=t==null?void 0:t.nameContains)==null?void 0:n.value)??null}function qg(e,t){const n=zt(t),r=e.and.filter(s=>!("nameContains"in s));return n?{and:[{nameContains:{value:n}},...r]}:{and:r}}function q1(e){var n;const t=e.and.find(r=>"nameNotContains"in r);return((n=t==null?void 0:t.nameNotContains)==null?void 0:n.value)??null}function Xg(e,t){const n=zt(t),r=e.and.filter(s=>!("nameNotContains"in s));return n?{and:[{nameNotContains:{value:n}},...r]}:{and:r}}function X1(e){var n;const t=e.and.find(r=>"commentsContains"in r);return((n=t==null?void 0:t.commentsContains)==null?void 0:n.value)??null}function Jg(e,t){const n=zt(t),r=e.and.filter(s=>!("commentsContains"in s));return n?{and:[{commentsContains:{value:n}},...r]}:{and:r}}function J1(e){var n;const t=e.and.find(r=>"commentsNotContains"in r);return((n=t==null?void 0:t.commentsNotContains)==null?void 0:n.value)??null}function Zg(e,t){const n=zt(t),r=e.and.filter(s=>!("commentsNotContains"in s));return n?{and:[{commentsNotContains:{value:n}},...r]}:{and:r}}function Z1(e){var n;const t=e.and.find(r=>"urlContains"in r);return((n=t==null?void 0:t.urlContains)==null?void 0:n.value)??null}function ev(e,t){const n=zt(t),r=e.and.filter(s=>!("urlContains"in s));return n?{and:[{urlContains:{value:n}},...r]}:{and:r}}function eS(e){var n;const t=e.and.find(r=>"urlNotContains"in r);return((n=t==null?void 0:t.urlNotContains)==null?void 0:n.value)??null}function tv(e,t){const n=zt(t),r=e.and.filter(s=>!("urlNotContains"in s));return n?{and:[{urlNotContains:{value:n}},...r]}:{and:r}}function tS(e){const t=e.and.find(n=>"dateRange"in n);return(t==null?void 0:t.dateRange)??null}function uc(e,t){const n=yl((t==null?void 0:t.from)??null),r=yl((t==null?void 0:t.to)??null),s=e.and.filter(i=>!("dateRange"in i));return!n&&!r?{and:s}:{and:[{dateRange:{...n?{from:n}:{},...r?{to:r}:{}}},...s]}}function nS(e){const t=e.and.find(n=>"widthCompare"in n);return(t==null?void 0:t.widthCompare)??null}function Ao(e,t){const n=e.and.filter(r=>!("widthCompare"in r));return!t||!Number.isFinite(t.value)||!yd.has(t.op)?{and:n}:{and:[{widthCompare:{op:t.op,value:t.value}},...n]}}function rS(e){const t=e.and.find(n=>"heightCompare"in n);return(t==null?void 0:t.heightCompare)??null}function $o(e,t){const n=e.and.filter(r=>!("heightCompare"in r));return!t||!Number.isFinite(t.value)||!yd.has(t.op)?{and:n}:{and:[{heightCompare:{op:t.op,value:t.value}},...n]}}function sS(e,t){const n=e.and.find(r=>"metricRange"in r&&r.metricRange.key===t);return(n==null?void 0:n.metricRange)??null}function iS(e,t,n){const r=e.and.filter(s=>!("metricRange"in s&&s.metricRange.key===t));return n?{and:[{metricRange:{key:t,min:n.min,max:n.max}},...r]}:{and:r}}function oS(e){const t=ac(e);return t?t.and.length:0}function lS(e){var t,n,r,s,i,o,l,a;if(!e||typeof e!="object")return null;if("stars"in e){const c=vi(e.stars);return c.length?{starsIn:{values:c}}:null}if("starsIn"in e){const c=vi((t=e.starsIn)==null?void 0:t.values);return c.length?{starsIn:{values:c}}:null}if("starsNotIn"in e){const c=vi((n=e.starsNotIn)==null?void 0:n.values);return c.length?{starsNotIn:{values:c}}:null}if("nameContains"in e){const c=zt((r=e.nameContains)==null?void 0:r.value);return c?{nameContains:{value:c}}:null}if("nameNotContains"in e){const c=zt((s=e.nameNotContains)==null?void 0:s.value);return c?{nameNotContains:{value:c}}:null}if("commentsContains"in e){const c=zt((i=e.commentsContains)==null?void 0:i.value);return c?{commentsContains:{value:c}}:null}if("commentsNotContains"in e){const c=zt((o=e.commentsNotContains)==null?void 0:o.value);return c?{commentsNotContains:{value:c}}:null}if("urlContains"in e){const c=zt((l=e.urlContains)==null?void 0:l.value);return c?{urlContains:{value:c}}:null}if("urlNotContains"in e){const c=zt((a=e.urlNotContains)==null?void 0:a.value);return c?{urlNotContains:{value:c}}:null}if("dateRange"in e){const c=e.dateRange,m=yl((c==null?void 0:c.from)??null),h=yl((c==null?void 0:c.to)??null);return!m&&!h?null:{dateRange:{...m?{from:m}:{},...h?{to:h}:{}}}}if("widthCompare"in e){const c=e.widthCompare,m=Th(c==null?void 0:c.op,c==null?void 0:c.value);return m?{widthCompare:m}:null}if("heightCompare"in e){const c=e.heightCompare,m=Th(c==null?void 0:c.op,c==null?void 0:c.value);return m?{heightCompare:m}:null}if("metricRange"in e){const c=e.metricRange;if(!c||typeof c!="object")return null;const m=typeof c.key=="string"?c.key:"",h=cc(c.min),y=cc(c.max);return!m||h==null||y==null||h>y?null:{metricRange:{key:m,min:h,max:y}}}return null}function vi(e){if(!Array.isArray(e))return[];const t=[],n=new Set;for(const r of e){const s=typeof r=="number"?r:typeof r=="string"?Number(r):NaN;!Number.isInteger(s)||!B1.has(s)||n.has(s)||(n.add(s),t.push(s))}return t}function zt(e){if(typeof e!="string")return null;const t=e.trim();return t||null}function yl(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=Date.parse(t);return Number.isNaN(n)?null:t}function Th(e,t){if(typeof e!="string"||!yd.has(e))return null;const n=cc(t);return n==null?null:{op:e,value:n}}function Ih(e,t){if(!e)return null;const n=e.trim();if(!n)return null;const r=Date.parse(n);return Number.isNaN(r)?null:t&&W1.test(n)?r+24*60*60*1e3-1:r}function _h(e,t,n){switch(t){case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;default:return!0}}function cc(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function Ph(e){return e.addedAt?Date.parse(e.addedAt):0}function xl(e,t){return e.name.localeCompare(t.name)}function aS(e,t){const n=Ph(e),r=Ph(t);return n===r?xl(e,t):n-r}function uS(e){return(t,n)=>{var i,o;const r=(i=t.metrics)==null?void 0:i[e],s=(o=n.metrics)==null?void 0:o[e];return r==null&&s==null?xl(t,n):r==null?1:s==null?-1:r===s?xl(t,n):r-s}}function cS(e,t){return H1(e,t)}function dS(e){let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function fS(e,t){const n=dS(t||1),r=[...e];for(let s=r.length-1;s>0;s-=1){const i=Math.floor(n()*(s+1));[r[s],r[i]]=[r[i],r[s]]}return r}function hS(e,t,n){if(t.kind==="builtin"&&t.key==="random"){const i=n??Date.now();return fS(e,i)}let r=aS;t.kind==="metric"?r=uS(t.key):t.key==="name"&&(r=xl);const s=[...e].sort(r);return t.dir==="desc"?s.reverse():s}const Oh="leftW.folders",Fh="leftW.metrics",pS="leftW",zh="rightW";function mS(e,t){const[n,r]=f.useState(240),[s,i]=f.useState(320),[o,l]=f.useState(240),a=t==="metrics"?s:n,c=f.useRef(a),m=f.useRef(o);return f.useEffect(()=>{c.current=a},[a]),f.useEffect(()=>{m.current=o},[o]),f.useEffect(()=>{try{const S=window.localStorage,k=Number(S.getItem(Oh)??S.getItem(pS));Number.isFinite(k)&&k>0&&r(k);const E=Number(S.getItem(Fh));Number.isFinite(E)&&E>0&&i(E);const b=Number(S.getItem(zh));Number.isFinite(b)&&b>0&&l(b)}catch{}},[]),{leftW:a,rightW:o,onResizeLeft:S=>{S.preventDefault();const k=e.current;if(!k)return;const E=k.getBoundingClientRect(),b=t==="metrics"?Fh:Oh;let v=c.current;const g=d=>{const C=d.clientX-E.left,M=200,T=Math.max(M,E.width-m.current-200),j=Math.min(Math.max(C,M),T);v=j,t==="metrics"?i(j):r(j)},p=()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",p);try{window.localStorage.setItem(b,String(v))}catch{}};window.addEventListener("mousemove",g),window.addEventListener("mouseup",p)},onResizeRight:S=>{S.preventDefault();const k=e.current;if(!k)return;const E=k.getBoundingClientRect(),b=g=>{const p=g.clientX-E.left,d=E.width-p,C=240,M=Math.max(C,E.width-c.current-200),T=Math.min(Math.max(d,C),M);l(T)},v=()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",v);try{window.localStorage.setItem(zh,String(m.current))}catch{}};window.addEventListener("mousemove",b),window.addEventListener("mouseup",v)}}}function gS({x:e,y:t,items:n}){return u.jsx("div",{className:"dropdown-panel fixed",role:"menu",style:{left:e,top:t,minWidth:180},onClick:r=>r.stopPropagation(),children:n.map((r,s)=>u.jsxs("button",{className:`dropdown-item w-full ${r.danger?"text-danger hover:text-danger":""}`,role:"menuitem","aria-disabled":r.disabled,disabled:r.disabled,onClick:i=>{i.stopPropagation(),r.disabled||r.onClick()},children:[r.icon&&u.jsx("span",{className:"shrink-0",children:r.icon}),u.jsx("span",{children:r.label})]},s))})}function Dh(e){return JSON.stringify(e,null,2)}function Ah(e){const t=s=>'"'+s.replaceAll('"','""')+'"',n="path,folder,name,star,type,size,width,height,tags,notes",r=e.map(s=>{const i=(s.tags||[]).join(" "),o=s.notes||"";return[s.path,s.folder,s.name,String(s.star??""),s.type??"",s.size??"",s.width??"",s.height??"",i,o].map(l=>t(String(l))).join(",")});return[n,...r].join(`
`)}function Ua(e){return e.map(t=>{const n=t.path.split("/").filter(Boolean);n.pop();const r=n.length?`/${n.join("/")}`:"/";return{path:t.path,folder:r,name:t.name,star:t.star??null,type:t.type,size:t.size,width:t.w,height:t.h}})}function vS(e,t=250){const[n,r]=Bo.useState(e);return Bo.useEffect(()=>{const s=window.setTimeout(()=>r(e),Math.max(0,t));return()=>window.clearTimeout(s)},[e,t]),n}const nv="application/x-lenslet-paths",yS='[role="treeitem"].drop-target';function $h(e){var n;return Array.from(((n=e.dataTransfer)==null?void 0:n.types)||[]).includes(nv)}function xS(e){document.querySelectorAll(yS).forEach(t=>{t!==e&&t.classList.remove("drop-target")})}function Uh(e){xS(e),e.classList.add("drop-target")}function Bh(e){return e.startsWith("/")?e:`/${e}`}function wS({path:e,isLeaf:t}){const n=Gr(),r=f.useCallback(l=>{$h(l)&&(l.preventDefault(),t&&Uh(l.currentTarget))},[t]),s=f.useCallback(l=>{!t||!$h(l)||(l.preventDefault(),Uh(l.currentTarget))},[t]),i=f.useCallback(l=>{const a=l.currentTarget,c=document.elementFromPoint(l.clientX,l.clientY);c&&a.contains(c)||a.classList.remove("drop-target")},[]),o=f.useCallback(async l=>{const a=l.dataTransfer;if(!a)return;l.preventDefault(),l.currentTarget.classList.remove("drop-target");const c=a.getData(nv),h=(c?JSON.parse(c):[]).filter(Boolean);if(!h.length)return;let y=h[0].split("/").slice(0,-1).join("/")||"/";y=Bh(y);const S=Bh(e);try{for(const k of h)await me.moveFile(k,S);n.invalidateQueries({queryKey:["folder",y]}),n.invalidateQueries({queryKey:["folder",S]}),n.setQueryData(["folder",y],k=>!k||!Array.isArray(k.items)?k:{...k,items:k.items.filter(E=>!h.includes(E.path))})}catch{}},[e,n]);return{onDragOver:r,onDragEnter:s,onDragLeave:i,onDrop:o}}const SS='[role="tree"] [role="treeitem"]';function kS(){return Array.from(document.querySelectorAll(SS))}function CS(e,t){var i;const n=kS(),r=n.findIndex(o=>o===e);if(r===-1)return;let s=r;t==="ArrowDown"?s=Math.min(n.length-1,r+1):t==="ArrowUp"?s=Math.max(0,r-1):t==="Home"?s=0:t==="End"&&(s=n.length-1),(i=n[s])==null||i.focus()}function ES({path:e,isLeaf:t,isExpanded:n,setExpanded:r,onOpen:s}){return f.useCallback(i=>{if(i.key==="Enter"){i.preventDefault(),s(e);return}if(i.key==="ArrowRight"){!t&&!n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.add(e),l}));return}if(i.key==="ArrowLeft"){!t&&n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.delete(e),l}));return}(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="Home"||i.key==="End")&&(i.preventDefault(),CS(i.currentTarget,i.key))},[e,t,n,r,s])}function NS({current:e,roots:t,data:n,onOpen:r,onResize:s,onContextMenu:i,className:o,showResizeHandle:l=!0}){const[a,c]=f.useState(new Set(["/"])),m=f.useRef(new Map),h=f.useRef(new Map),y=f.useCallback(async(k,E)=>{const b=Xt(k||"/"),v=m.current,g=h.current,p=v.get(b);if(p!==void 0)return p;const d=g.get(b);if(d)return d;const C=(async()=>{let M=0;const T=new Set,j=[{path:b,index:E}];for(;j.length;){const I=j.pop(),{path:N,index:z}=I;if(T.has(N))continue;T.add(N);let J=z;if(!J)try{J=await me.getFolder(N)}catch(U){console.warn(`Failed to count folder ${N}:`,U);continue}M+=J.items.length;for(const U of J.dirs)U.kind==="branch"&&j.push({path:vd(N,U.name)})}return v.set(b,M),g.delete(b),M})();return g.set(b,C),C},[]);f.useEffect(()=>{const k=e.split("/").filter(Boolean),E=["/"];let b="";for(const v of k)b=b?`${b}/${v}`:`/${v}`,E.push(b);c(v=>{const g=new Set(v);for(const p of E)g.add(p);return g})},[e]);const S=o??"h-full overflow-auto bg-panel scrollbar-thin";return u.jsxs("div",{className:S,children:[u.jsx("div",{className:"p-1",role:"tree","aria-label":"Folders",children:t.map(k=>u.jsx(rv,{path:k.path,label:k.label,depth:0,current:e,expanded:a,setExpanded:c,onOpen:r,onContextMenu:i,initial:n,getSubtreeCount:y},k.path))}),l&&u.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 left-[calc(var(--left)-3px)] hover:bg-accent/20",onMouseDown:s})]})}function rv({path:e,label:t,depth:n,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,initial:a,getSubtreeCount:c}){var T,j;const m=s.has(e),{data:h}=Kg(e),y=a&&e===a.path?a:h,S=r===e,k=(((T=y==null?void 0:y.dirs)==null?void 0:T.length)??0)===0,[E,b]=f.useState(y?y.items.length:null),v=ES({path:e,isLeaf:k,isExpanded:m,setExpanded:i,onOpen:o}),{onDragOver:g,onDragEnter:p,onDragLeave:d,onDrop:C}=wS({path:e,isLeaf:k}),M=I=>{I.stopPropagation(),i(N=>{const z=new Set(N);return z.has(e)?z.delete(e):z.add(e),z})};return f.useEffect(()=>{let I=!1;if(!y){b(null);return}return b(y.items.length),c(e,y).then(N=>{I||b(N)}).catch(N=>{I||console.warn(`Failed to compute subtree count for ${e}:`,N)}),()=>{I=!0}},[y,e,c]),u.jsxs("div",{children:[u.jsxs("div",{className:`flex items-center gap-1.5 py-0.5 px-2 rounded-md cursor-pointer min-h-[28px] outline-none transition-colors duration-75 ${S?"bg-accent/20 text-accent font-medium":"hover:bg-white/5 text-text"}`,role:"treeitem","aria-level":n+1,"aria-expanded":k?void 0:m,"aria-selected":S,tabIndex:S?0:-1,style:{paddingLeft:8+n*14},onClick:()=>o(e),onContextMenu:I=>{I.preventDefault(),I.stopPropagation(),l&&l(I,e)},onKeyDown:v,onDragOver:g,onDragEnter:p,onDragLeave:d,onDrop:C,children:[u.jsx("span",{className:"w-4 text-center opacity-60 hover:opacity-100 text-[10px]",onClick:M,children:m?"":""}),u.jsx("span",{className:"flex-1 overflow-hidden truncate text-sm",title:t,children:C1(t,28)}),E!==null&&u.jsx("span",{className:"text-[10px] opacity-50 bg-white/5 border border-white/5 rounded px-1.5 min-w-[24px] text-center",children:E})]}),m&&((j=y==null?void 0:y.dirs)==null?void 0:j.map(I=>u.jsx(rv,{path:vd(e,I.name),label:I.name,depth:n+1,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,getSubtreeCount:c},I.name)))]})}const Mr=40,bS=12,Wh=[5,4,3,2,1],Hh=["<","<=",">",">="];function jS({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l,onChangeFilters:a}){const c=r&&r.length?u.jsx(MS,{selectedItems:r,metricKeys:n}):null,m=u.jsx(RS,{filters:o,onChangeFilters:a});return n.length?u.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,u.jsx(LS,{items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}),m]}):u.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,m,u.jsx("div",{className:"p-4 text-sm text-muted",children:"No metrics found in this dataset."})]})}function MS({selectedItems:e,metricKeys:t}){const n=f.useMemo(()=>{if(!e.length)return null;const a=new Map;for(const h of e){const y=h.metrics;if(y)for(const[S,k]of Object.entries(y)){if(k==null||Number.isNaN(k))continue;const E=a.get(S);E?E.push(k):a.set(S,[k])}}return a.size?{entries:(t.length?t.filter(h=>a.has(h)):Array.from(a.keys()).sort()).map(h=>{const y=a.get(h)??[],S=Math.min(...y),k=Math.max(...y),E=y.reduce((b,v)=>b+v,0)/Math.max(1,y.length);return{key:h,value:y[0],min:S,max:k,avg:E,count:y.length}}),totalItems:e.length}:null},[e,t]);if(!n)return null;const{entries:r,totalItems:s}=n,i=r.slice(0,bS),o=r.length-i.length,l=s>1;return u.jsxs("div",{className:"ui-card",children:[u.jsxs("div",{className:"ui-card-header",children:[u.jsx("div",{className:"ui-section-title",children:"Selected metrics"}),u.jsxs("div",{className:"text-[11px] text-muted",children:[s," item",s===1?"":"s"]})]}),u.jsxs("div",{className:"space-y-1 text-[12px]",children:[i.map(a=>u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsx("span",{className:"text-muted w-28 shrink-0 truncate",title:a.key,children:a.key}),u.jsxs("span",{className:"font-mono text-text text-right tabular-nums",children:[l?`${bt(a.min)}  ${bt(a.max)}`:bt(a.value),l&&u.jsxs("span",{className:"text-[11px] text-muted ml-2",children:["avg ",bt(a.avg),a.count!==s?`  ${a.count}/${s}`:""]})]})]},a.key)),o>0&&u.jsxs("div",{className:"text-[11px] text-muted",children:["+",o," more"]})]})]})}function RS({filters:e,onChangeFilters:t}){const n=f.useMemo(()=>K1(e),[e]),r=f.useMemo(()=>Y1(e),[e]),s=f.useMemo(()=>G1(e)??"",[e]),i=f.useMemo(()=>q1(e)??"",[e]),o=f.useMemo(()=>X1(e)??"",[e]),l=f.useMemo(()=>J1(e)??"",[e]),a=f.useMemo(()=>Z1(e)??"",[e]),c=f.useMemo(()=>eS(e)??"",[e]),m=f.useMemo(()=>tS(e)??{},[e]),h=f.useMemo(()=>Xh(m.from),[m.from]),y=f.useMemo(()=>Xh(m.to),[m.to]),S=f.useMemo(()=>nS(e),[e]),k=f.useMemo(()=>rS(e),[e]),[E,b]=f.useState((S==null?void 0:S.op)??">="),[v,g]=f.useState((k==null?void 0:k.op)??">=");f.useEffect(()=>{S!=null&&S.op&&b(S.op)},[S==null?void 0:S.op]),f.useEffect(()=>{k!=null&&k.op&&g(k.op)},[k==null?void 0:k.op]);const p=(d,C)=>{const M=new Set(n),T=new Set(r);d==="include"?M.has(C)?M.delete(C):(M.add(C),T.delete(C)):T.has(C)?T.delete(C):(T.add(C),M.delete(C));let j=Yg(e,Array.from(M));j=Gg(j,Array.from(T)),t(j)};return u.jsxs("div",{className:"ui-card",children:[u.jsx("div",{className:"ui-section-title mb-3",children:"Attributes"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-2",children:"Rating"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"ui-label",children:"Include"}),u.jsxs("div",{className:"flex flex-wrap gap-1",children:[Wh.map(d=>{const C=n.includes(d);return u.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${C?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",d),"aria-pressed":C,title:`Include ${d} star${d>1?"s":""}`,children:[d,""]},`stars-in-${d}`)}),u.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${n.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",0),"aria-pressed":n.includes(0),title:"Include unrated",children:"None"})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-label",children:"Exclude"}),u.jsxs("div",{className:"flex flex-wrap gap-1",children:[Wh.map(d=>{const C=r.includes(d);return u.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${C?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",d),"aria-pressed":C,title:`Exclude ${d} star${d>1?"s":""}`,children:[d,""]},`stars-out-${d}`)}),u.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${r.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",0),"aria-pressed":r.includes(0),title:"Exclude unrated",children:"None"})]})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-2",children:"Filename"}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Contains"}),u.jsx("input",{className:"ui-input w-full",value:s,placeholder:"e.g. draft",onChange:d=>t(qg(e,d.target.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Does not contain"}),u.jsx("input",{className:"ui-input w-full",value:i,placeholder:"e.g. v1",onChange:d=>t(Xg(e,d.target.value))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-2",children:"Comments"}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Contains"}),u.jsx("input",{className:"ui-input w-full",value:o,placeholder:"e.g. hero",onChange:d=>t(Jg(e,d.target.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Does not contain"}),u.jsx("input",{className:"ui-input w-full",value:l,placeholder:"e.g. todo",onChange:d=>t(Zg(e,d.target.value))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-2",children:"URL"}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Contains"}),u.jsx("input",{className:"ui-input w-full",value:a,placeholder:"e.g. s3://bucket",onChange:d=>t(ev(e,d.target.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Does not contain"}),u.jsx("input",{className:"ui-input w-full",value:c,placeholder:"e.g. http://",onChange:d=>t(tv(e,d.target.value))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-2",children:"Date Added"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"From"}),u.jsx("input",{type:"date",className:"ui-input w-full",value:h,onChange:d=>t(uc(e,{from:d.target.value||null,to:m.to??null}))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"To"}),u.jsx("input",{type:"date",className:"ui-input w-full",value:y,onChange:d=>t(uc(e,{from:m.from??null,to:d.target.value||null}))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-2",children:"Dimensions"}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Width"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("select",{className:"ui-select ui-select-compact w-16",value:E,onChange:d=>{const C=d.target.value;b(C),S&&t(Ao(e,{op:C,value:S.value}))},children:Hh.map(d=>u.jsx("option",{value:d,children:d},`w-${d}`))}),u.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:S?String(S.value):"",min:0,placeholder:"px",onChange:d=>{const C=d.target.value;if(!C){t(Ao(e,null));return}const M=Number(C);Number.isFinite(M)&&t(Ao(e,{op:E,value:M}))}})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Height"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("select",{className:"ui-select ui-select-compact w-16",value:v,onChange:d=>{const C=d.target.value;g(C),k&&t($o(e,{op:C,value:k.value}))},children:Hh.map(d=>u.jsx("option",{value:d,children:d},`h-${d}`))}),u.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:k?String(k.value):"",min:0,placeholder:"px",onChange:d=>{const C=d.target.value;if(!C){t($o(e,null));return}const M=Number(C);Number.isFinite(M)&&t($o(e,{op:v,value:M}))}})]})]})]})]})]})]})}function LS({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}){const[a,c]=f.useState(!1),m=s&&n.includes(s)?s:n[0];return u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsx("label",{className:"ui-label",children:"Metric"}),u.jsx("button",{className:"btn btn-sm btn-ghost text-[11px]",onClick:()=>c(h=>!h),"aria-pressed":a,children:a?"Show one":"Show all"})]}),a?u.jsx("div",{className:"ui-input ui-input-readonly w-full flex items-center text-xs",children:"All metrics"}):u.jsx("select",{className:"ui-select w-full",value:m,onChange:h=>i(h.target.value),children:n.map(h=>u.jsx("option",{value:h,children:h},h))})]}),a?u.jsx("div",{className:"space-y-3",children:n.map(h=>u.jsx(Vh,{metricKey:h,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l,showTitle:!0},h))}):m?u.jsx(Vh,{metricKey:m,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l}):u.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]})}function Vh({items:e,filteredItems:t,metricKey:n,selectedItems:r,filters:s,onChangeRange:i,showTitle:o=!1}){const l=f.useMemo(()=>Qh(e,n),[e,n]),a=f.useMemo(()=>Ba(l,Mr),[l]),c=f.useMemo(()=>Qh(t,n),[t,n]),m=f.useMemo(()=>a?Ba(c,Mr,a):null,[c,a]),h=sS(s,n),[y,S]=f.useState(null),[k,E]=f.useState(!1),b=f.useRef(null),v=f.useRef(null),g=f.useRef(!1),p=f.useRef(null),[d,C]=f.useState(null),[M,T]=f.useState(""),[j,I]=f.useState(""),[N,z]=f.useState(null),J=y??h,U=a?{min:a.min,max:a.max}:null,V=f.useMemo(()=>{var le;if(!(r!=null&&r.length))return[];const q=[];for(const oe of r){const de=(le=oe.metrics)==null?void 0:le[n];de==null||Number.isNaN(de)||q.push(de)}return q},[r,n]),be=V.length===1?V[0]:null,je=f.useMemo(()=>!a||V.length<2?null:Ba(V,Mr,a),[V,a]);f.useEffect(()=>{if(!h||!U){N!=="min"&&T(h?zn(h.min):""),N!=="max"&&I(h?zn(h.max):"");return}if(N!=="min"){const q=Zr(h.min,U.min)?"":zn(h.min);T(q)}if(N!=="max"){const q=Zr(h.max,U.max)?"":zn(h.max);I(q)}},[h,U,N]),f.useEffect(()=>{C(null)},[n,U==null?void 0:U.min,U==null?void 0:U.max]);const he=q=>{var de;if(!U)return null;const le=(de=p.current)==null?void 0:de.getBoundingClientRect();if(!le)return null;const oe=xd((q.clientX-le.left)/le.width);return U.min+(U.max-U.min)*oe},P=(q,le)=>{if(!U)return;const oe=b.current??q,de=Yh(oe,q);S(de),le&&i(n,de)},B=q=>{var oe;if(!U)return;q.preventDefault();const le=he(q);le!=null&&(E(!0),S(null),b.current=le,v.current=q.clientX,g.current=!1,C(le),(oe=p.current)==null||oe.setPointerCapture(q.pointerId))},Z=q=>{const le=he(q);if(le==null){k||C(null);return}if(C(le),k){const oe=v.current;if(!g.current&&oe!=null){if(Math.abs(q.clientX-oe)<4)return;g.current=!0}g.current&&P(le,!1)}},pe=q=>{var oe;if(!k)return;E(!1),(oe=p.current)==null||oe.releasePointerCapture(q.pointerId);const le=he(q);g.current&&le!=null?(C(le),P(le,!0)):h&&i(n,null),b.current=null,v.current=null,g.current=!1,setTimeout(()=>S(null),0)},ue=(q,le)=>{if(!U)return;const oe=Gh(q),de=Gh(le);if(!oe.valid||!de.valid){oe.valid||T(h?zn(h.min):""),de.valid||I(h?zn(h.max):"");return}if(oe.value==null&&de.value==null){i(n,null);return}const tt=oe.value??U.min,Re=de.value??U.max,vt=qh(tt,U.min,U.max),hn=qh(Re,U.min,U.max),Bt=Yh(vt,hn);if(Zr(Bt.min,U.min)&&Zr(Bt.max,U.max)){i(n,null);return}i(n,Bt)};if(!a||!U)return u.jsxs("div",{className:"ui-card",children:[o&&u.jsx("div",{className:"ui-section-title mb-2",children:n}),u.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]});const Me=V.length;return u.jsxs("div",{className:"ui-card",children:[o&&u.jsx("div",{className:"ui-section-title mb-2",children:n}),u.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mb-2 tabular-nums",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{children:["Population: ",a.count]}),u.jsxs("span",{children:["Filtered: ",(m==null?void 0:m.count)??0]}),Me>1&&u.jsxs("span",{className:"text-text",children:["Selected: ",Me]})]}),be!=null&&u.jsxs("span",{className:"text-text",children:["Selected: ",bt(be)]})]}),u.jsxs("svg",{ref:p,viewBox:`0 0 ${Mr} 100`,preserveAspectRatio:"none",className:"w-full h-28 cursor-crosshair rounded-md bg-surface-inset",onPointerDown:B,onPointerMove:Z,onPointerUp:pe,onPointerLeave:()=>C(null),children:[Wa(a.bins,"#2e3a4b"),m&&Wa(m.bins,"#3a8fff"),je&&Wa(je.bins,"#f59e0b",{opacity:.55}),J&&TS(J,U),be!=null&&Kh(be,U,{color:"var(--highlight)",strokeWidth:.7}),d!=null&&Kh(d,U,{color:"rgba(255,255,255,0.75)",strokeWidth:.5,dashed:!0})]}),u.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mt-2 tabular-nums",children:[u.jsx("span",{children:bt(U==null?void 0:U.min)}),u.jsxs("div",{className:"flex flex-col items-center text-center leading-tight",children:[J?u.jsx("span",{className:"text-text",children:Zr(J.min,U.min)?` ${bt(J.max)}`:Zr(J.max,U.max)?` ${bt(J.min)}`:`${bt(J.min)}  ${bt(J.max)}`}):d!=null?u.jsxs("span",{className:"text-text",children:["Cursor: ",bt(d)]}):u.jsx("span",{children:"Drag to filter"}),J&&d!=null&&u.jsxs("span",{className:"text-[11px] text-muted",children:["Cursor: ",bt(d)]})]}),u.jsx("span",{children:bt(U==null?void 0:U.max)})]}),u.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-2 mt-3 items-end",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Min"}),u.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:M,placeholder:zn(U.min),onFocus:()=>z("min"),onBlur:()=>{z(null),ue(M,j)},onChange:q=>T(q.target.value),onKeyDown:q=>{q.key==="Enter"&&q.currentTarget.blur()}})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Max"}),u.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:j,placeholder:zn(U.max),onFocus:()=>z("max"),onBlur:()=>{z(null),ue(M,j)},onChange:q=>I(q.target.value),onKeyDown:q=>{q.key==="Enter"&&q.currentTarget.blur()}})]}),u.jsx("button",{className:"btn btn-xs btn-ghost text-muted hover:text-text",onClick:()=>i(n,null),children:"Clear"})]})]})}function Ba(e,t,n){if(!e.length)return null;const r=n?n.min:Math.min(...e);let s=n?n.max:Math.max(...e);r===s&&(s=r+1);const i=new Array(t).fill(0),o=t/(s-r);for(const l of e){const a=Math.max(0,Math.min(t-1,Math.floor((l-r)*o)));i[a]+=1}return{bins:i,min:r,max:s,count:e.length}}function Qh(e,t){var r;const n=[];for(const s of e){const i=(r=s.metrics)==null?void 0:r[t];i==null||Number.isNaN(i)||n.push(i)}return n}function Wa(e,t,n){const r=Math.max(1,...e),s=(n==null?void 0:n.opacity)??.9;return e.map((i,o)=>{const l=i/r*100;return u.jsx("rect",{x:o+.05,y:100-l,width:.9,height:l,fill:t,opacity:s},`${t}-${o}`)})}function TS(e,t){const n=(e.min-t.min)/(t.max-t.min),r=(e.max-t.min)/(t.max-t.min),s=Mr*xd(Math.min(n,r)),i=Mr*Math.abs(r-n);return u.jsx("rect",{x:s,y:0,width:Math.max(.5,i),height:100,fill:"rgba(255,255,255,0.08)",stroke:"rgba(255,255,255,0.4)",strokeWidth:.4})}function Kh(e,t,n){const r=xd((e-t.min)/(t.max-t.min)),s=Mr*r;return u.jsx("line",{x1:s,y1:0,x2:s,y2:100,stroke:n.color,strokeWidth:n.strokeWidth??.5,strokeDasharray:n.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function Yh(e,t){return e<t?{min:e,max:t}:{min:t,max:e}}function xd(e){return e<0?0:e>1?1:e}function bt(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function zn(e){if(!Number.isFinite(e))return"";const t=e.toString();return t.includes("e")?e.toFixed(6):t}function Gh(e){const t=e.trim();if(!t)return{value:null,valid:!0};const n=Number(t);return Number.isFinite(n)?{value:n,valid:!0}:{value:null,valid:!1}}function qh(e,t,n){return e<t?t:e>n?n:e}function Zr(e,t){const n=Math.max(1,Math.abs(e),Math.abs(t));return Math.abs(e-t)<=1e-6*n}function Xh(e){return e?e.length>=10?e.slice(0,10):e:""}const IS=[{label:"Root",path:"/"}];function _S({leftTool:e,onToolChange:t,views:n,activeViewId:r,onActivateView:s,onSaveView:i,current:o,data:l,onOpenFolder:a,onContextMenu:c,items:m,filteredItems:h,metricKeys:y,selectedItems:S,selectedMetric:k,onSelectMetric:E,filters:b,onChangeRange:v,onChangeFilters:g,onResize:p}){const d=e==="folders"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",C=e==="metrics"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover";return u.jsxs("div",{className:"app-left-panel col-start-1 row-start-2 relative border-r border-border bg-panel overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-y-0 left-0 w-10 border-r border-border flex flex-col items-center gap-2 py-3 bg-surface-overlay",children:[u.jsx("button",{className:d,title:"Folders","aria-label":"Folders","aria-pressed":e==="folders",onClick:()=>t("folders"),children:u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:u.jsx("path",{d:"M3 7.5h6l2-2h10a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2z"})})}),u.jsx("button",{className:C,title:"Metrics / Filters","aria-label":"Metrics and Filters","aria-pressed":e==="metrics",onClick:()=>t("metrics"),children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[u.jsx("path",{d:"M4 19V9"}),u.jsx("path",{d:"M10 19V5"}),u.jsx("path",{d:"M16 19v-7"}),u.jsx("path",{d:"M3 19h18"})]})})]}),u.jsx("div",{className:"ml-10 h-full",children:e==="folders"?u.jsxs("div",{className:"h-full flex flex-col",children:[u.jsxs("div",{className:"px-2 py-2 border-b border-border",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Smart Folders"}),u.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:i,title:"Save current view as Smart Folder",children:"+ New"})]}),n.length?u.jsx("div",{className:"flex flex-col gap-1",children:n.map(M=>{const T=M.id===r;return u.jsx("button",{className:`text-left px-2 py-1.5 rounded-md text-sm ${T?"bg-accent-muted text-accent":"hover:bg-hover text-text"}`,onClick:()=>s(M),children:M.name},M.id)})}):u.jsx("div",{className:"text-xs text-muted px-1 py-1.5",children:"No saved Smart Folders yet."})]}),u.jsx(NS,{current:o,roots:IS,data:l,onOpen:a,onContextMenu:c,className:"flex-1 min-h-0 overflow-auto scrollbar-thin",showResizeHandle:!1})]}):u.jsx(jS,{items:m,filteredItems:h,metricKeys:y,selectedItems:S,selectedMetric:k,onSelectMetric:E,filters:b,onChangeRange:v,onChangeFilters:g})}),u.jsx("div",{className:"toolbar-offset absolute bottom-0 right-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20",onMouseDown:p})]})}function PS({persistenceEnabled:e,recentSummary:t,onDismissRecent:n,onCloseRecent:r,browserZoomPercent:s}){const i=t?` (${t.names.join(", ")}${t.extra?` +${t.extra}`:""})`:"",o=!!(t!=null&&t.names.length),l=typeof s=="number"?s:null,a=l!==null&&Math.abs(l-100)>=2;return!e||a||!!t?u.jsx("div",{className:"border-b border-border bg-panel",children:u.jsxs("div",{className:"px-3 py-2 flex flex-col gap-2",children:[!e&&u.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[u.jsx("span",{className:"font-semibold",children:"Not persisted."})," Workspace is read-only; edits stay in memory until restart."]}),a&&u.jsxs("div",{className:"ui-banner ui-banner-accent text-xs",children:[u.jsxs("span",{className:"font-semibold",children:["Browser zoom ",Math.round(l),"%."]})," For best results, set it to 100% so UI elements stay in correct proportions."]}),t&&u.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex items-center justify-between gap-3",children:[u.jsxs("span",{children:["Recent updates: ",t.count," item",t.count===1?"":"s",o?i:""]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{className:"text-muted hover:text-text transition-colors",onClick:n,"aria-label":"Hide recent activity until refresh",children:"Hide until refresh"}),u.jsx("button",{className:"text-muted hover:text-text transition-colors text-base leading-none",onClick:r,"aria-label":"Close recent activity",children:""})]})]})]})}):u.jsx(u.Fragment,{})}const Jh=6e3,OS=15*6e4,FS=1e4,zS=24*60*6e4,De={sortKey:"sortKey",sortDir:"sortDir",sortSpec:"sortSpec",starFilters:"starFilters",filterAst:"filterAst",selectedMetric:"selectedMetric",viewMode:"viewMode",gridItemSize:"gridItemSize",leftOpen:"leftOpen",rightOpen:"rightOpen"};function DS(e){switch(e){case"live":return"Live";case"reconnecting":return"Reconnecting";case"offline":return"Offline";case"connecting":case"idle":default:return"Connecting"}}function AS(e){return e.isOffline?"offline":e.isUnstable?"unstable":e.recentEditActive?"recent":e.editingActive?"editing":"live"}function sv(e,t){return t-e<zS?b1(e,t):j1(e)}function $S(e,t){if(!e.length)return null;const n=new Set,r=[];for(const i of e)n.has(i.path)||(n.add(i.path),r.push(i.path));const s=r.slice(0,2).map(i=>{const o=t.find(l=>l.path===i);return(o==null?void 0:o.name)??i.split("/").pop()??i});return{count:r.length,names:s,extra:Math.max(0,r.length-s.length)}}function US(e,t,n){return e.length?e.map(r=>{const s=t.find(l=>l.path===r.path),i=(s==null?void 0:s.name)??r.path.split("/").pop()??r.path,o=sv(r.ts,n);return{path:r.path,label:i,timeLabel:o}}):[]}function BS(){var Od;const[e,t]=f.useState("/"),[n,r]=f.useState(""),[s,i]=f.useState([]),[o,l]=f.useState(null),[a,c]=f.useState(0),[m,h]=f.useState(null),[y,S]=f.useState(100),[k,E]=f.useState(null),[b,v]=f.useState(()=>({filters:{and:[]},sort:{kind:"builtin",key:"added",dir:"desc"},selectedMetric:void 0})),[g,p]=f.useState(()=>Date.now()),[d,C]=f.useState("adaptive"),[M,T]=f.useState(220),[j,I]=f.useState(!0),[N,z]=f.useState(!0),[J,U]=f.useState("folders"),[V,be]=f.useState([]),[je,he]=f.useState(null),[P,B]=f.useState(null),[Z,pe]=f.useState(null),[ue,Me]=f.useState({}),q=f.useRef(null),le=f.useRef(null),oe=f.useRef(null),de=f.useRef(null),tt=f.useRef(!1),Re=f.useRef(null),vt=f.useRef(new Map),hn=f.useRef(new Map),{leftW:Bt,rightW:mr,onResizeLeft:pn,onResizeRight:tn}=mS(q,J),[gr,A]=f.useState(!1),[ee,te]=f.useState(null),R=Gr(),O=p1(),Y=zl(),W=g1(),[ie,ve]=f.useState("idle"),[_e,we]=f.useState({}),[Xe,Ee]=f.useState([]),[lt,Pe]=f.useState([]),[vr,yr]=f.useState(null),[$l,Ul]=f.useState(!1),[Bl,wd]=f.useState(new Set),Wl=f.useRef(new Map),[Pn,iv]=f.useState(null),[Sd,ov]=f.useState(null),[lv,Hl]=f.useState(!1),[Vs,Vl]=f.useState(()=>Date.now()),[av,uv]=f.useState(!0);f.useEffect(()=>{const x=_=>{const H=Xt(_),$=$1(H)?H:null,D=$?Rh(H):H;$?(l($),i([$])):(l(null),tt.current=!1),t(re=>re===D?re:(c(X=>X+1),D))};x(jh());const L=()=>x(jh());return window.addEventListener("hashchange",L),()=>window.removeEventListener("hashchange",L)},[]),f.useEffect(()=>()=>{for(const x of Wl.current.values())window.clearTimeout(x);Wl.current.clear()},[]),f.useEffect(()=>{if(Sd==null){Hl(!1);return}Hl(!0);const x=window.setTimeout(()=>Hl(!1),Jh);return()=>window.clearTimeout(x)},[Sd]),f.useEffect(()=>{if(Pn==null)return;Vl(Date.now());const x=window.setInterval(()=>Vl(Date.now()),1e4);return()=>window.clearInterval(x)},[Pn]);const{data:ze,refetch:Ql,isLoading:XS,isError:JS}=Kg(e),xr=n.trim().length>0,kd=vS(n,250),Cd=f.useMemo(()=>kd.trim().replace(/\s+/g," "),[kd]),Ed=z1(xr?Cd:"",e),Kl=f.useMemo(()=>Lh(b.filters),[b.filters]),nn=f.useMemo(()=>{var L;return(xr?((L=Ed.data)==null?void 0:L.items)??[]:(ze==null?void 0:ze.items)??[]).map(_=>({..._,star:ue[_.path]!==void 0?ue[_.path]:_.star}))},[xr,Ed.data,ze,ue]),Ke=f.useMemo(()=>{const x=cS(nn,b.filters);return hS(x,b.sort,g)},[nn,b.filters,b.sort,g]),cv=nn.length,dv=Ke.length,Nt=f.useMemo(()=>Ke.map(x=>x.path),[Ke]),fv=f.useMemo(()=>{if(!s.length)return[];const x=new Map(nn.map(_=>[_.path,_])),L=new Map(Ke.map(_=>[_.path,_]));return s.map(_=>x.get(_)??L.get(_)).filter(_=>!!_)},[s,nn,Ke]),Qs=b.sort.kind==="metric"?b.sort.key:null,Nd=f.useMemo(()=>Qs?Ke.some(x=>{var _;const L=(_=x.metrics)==null?void 0:_[Qs];return L!=null&&!Number.isNaN(L)}):!1,[Ke,Qs]),bd=f.useCallback(x=>{wd($=>{if($.has(x))return $;const D=new Set($);return D.add(x),D});const L=Wl.current,_=L.get(x);_&&window.clearTimeout(_);const H=window.setTimeout(()=>{wd($=>{if(!$.has(x))return $;const D=new Set($);return D.delete(x),D}),L.delete(x)},Jh);L.set(x,H)},[]),Yl=f.useCallback(x=>{const L=Date.now(),H=Ch(x)??L,$=H>L?L:H;iv(D=>D==null?$:D>$?D:$),ov(L),Vl(L)},[]),Gl=f.useCallback((x,L,_)=>{const H=Date.now(),$=Ch(_)??H;Pe(D=>{const re=D.filter(K=>K.path!==x);return[{path:x,ts:$,kind:L},...re].slice(0,10)})},[]),ql=f.useCallback((x,L)=>{const _=Date.now();Ee(H=>{const $=H.filter(re=>re.path!==x);return[{path:x,ts:_,kind:L},...$].slice(0,6)}),bd(x)},[bd]),Xl=f.useCallback(x=>{const L=Object.prototype.hasOwnProperty.call(x,"star"),_=x.metrics!==void 0,H=x.comments!==void 0;if(!L&&!_&&!H)return;const $=D=>{if(D.path!==x.path)return D;let re=D;return L&&D.star!==x.star&&(re={...re,star:x.star??null}),_&&(re={...re,metrics:x.metrics??null}),H&&D.comments!==x.comments&&(re={...re,comments:x.comments??""}),re};R.setQueriesData({predicate:({queryKey:D})=>Array.isArray(D)&&D[0]==="folder"},D=>{if(!D)return D;let re=!1;const X=D.items.map(K=>{const se=$(K);return se!==K&&(re=!0),se});return re?{...D,items:X}:D}),R.setQueriesData({predicate:({queryKey:D})=>Array.isArray(D)&&D[0]==="search"},D=>{if(!D)return D;let re=!1;const X=D.items.map(K=>{const se=$(K);return se!==K&&(re=!0),se});return re?{...D,items:X}:D})},[R]),Jl=f.useCallback(async x=>{const L=Xt(x||"/"),_=vt.current,H=hn.current,$=_.get(L);if($!==void 0)return $;const D=H.get(L);if(D)return D;const re=(async()=>{const X=[L],K=new Set;let se=0;for(;X.length;){const Be=X.pop();if(!K.has(Be)){K.add(Be);try{const wr=await me.getFolder(Be);se+=wr.items.length;for(const sa of wr.dirs)sa.kind==="branch"&&X.push(vd(Be,sa.name))}catch(wr){console.warn(`Failed to count folder ${Be}:`,wr)}}}return _.set(L,se),H.delete(L),se})();return H.set(L,re),re},[]);f.useEffect(()=>{let x=!1;const L=Xt(e||"/");return(async()=>{const H=Jl("/"),$=L==="/"?H:Jl(L),[D,re]=await Promise.all([H,$]);x||(pe(D),B(re))})().catch(H=>console.warn("Failed to compute folder counts:",H)),()=>{x=!0}},[e,Jl]),f.useEffect(()=>{gw();const x=yw(_=>{if(_.type==="presence"){const D=_.data;if(!(D!=null&&D.gallery_id))return;we(re=>({...re,[D.gallery_id]:D}));return}const H=_.data;if(!(H!=null&&H.path))return;const $=H.path;if(_.type==="item-updated"){const D=_.data,re={v:1,tags:D.tags??[],notes:D.notes??"",star:D.star??null,version:D.version??1,updated_at:D.updated_at??"",updated_by:D.updated_by??"server"};R.setQueryData(zi($),re),Xl({path:$,star:D.star??null,metrics:D.metrics,comments:D.notes??""}),x1($,re),ql($,"item-updated"),Gl($,"item-updated",D.updated_at),Yl(D.updated_at),Me(X=>{if(X[$]===void 0)return X;const K={...X};return delete K[$],K})}else if(_.type==="metrics-updated"){const D=_.data;Xl({path:$,metrics:D.metrics}),ql($,"metrics-updated"),Gl($,"metrics-updated",D.updated_at),Yl(D.updated_at)}}),L=xw(ve);return()=>{x(),L(),vw()}},[ql,Gl,R,Xl,Yl]),f.useEffect(()=>{let x=!1;const L=Xt(e||"/"),_=async()=>{try{const $=await me.postPresence(L);!x&&($!=null&&$.gallery_id)&&we(D=>({...D,[$.gallery_id]:$}))}catch{}};_();const H=window.setInterval(_,3e4);return()=>{x=!0,window.clearInterval(H)}},[e]),f.useEffect(()=>{let x=!1;return me.getHealth().then(L=>{var H;if(x)return;const _=((H=L==null?void 0:L.labels)==null?void 0:H.enabled)??!0;uv(_)}).catch(()=>{}),()=>{x=!0}},[]);const hv=f.useMemo(()=>{const x=nn,L={0:0,1:0,2:0,3:0,4:0,5:0};for(const _ of x){const H=ue[_.path]??_.star??0;L[String(H)]=(L[String(H)]||0)+1}return L},[nn,ue]),On=f.useMemo(()=>{const x=new Set;let L=0;for(const _ of nn){const H=_.metrics;if(H)for(const $ of Object.keys(H))x.add($);if(L+=1,L>=250&&x.size>0)break}return Array.from(x).sort()},[nn]);f.useEffect(()=>{On.length&&v(x=>{const L=x.selectedMetric&&On.includes(x.selectedMetric)?x.selectedMetric:On[0];return L===x.selectedMetric?x:{...x,selectedMetric:L}})},[On]),f.useEffect(()=>{b.sort.kind==="metric"&&(On.includes(b.sort.key)||v(x=>({...x,sort:{kind:"builtin",key:"added",dir:x.sort.dir}})))},[On,b.sort]);const jd=f.useMemo(()=>oS(b.filters),[b.filters]),Gi=P??cv,pv=Z??Gi,Md=xr||jd>0,qi=_e[e],mv=O.state==="syncing"?"Syncing":O.state==="error"?O.message?`Not saved  ${O.message}`:"Not saved  retry":"All changes saved",gv=DS(ie),Zl=Pn!=null,vv=f.useMemo(()=>!Zl||Pn==null?"No edits yet.":sv(Pn,Vs),[Zl,Pn,Vs]),Rd=Pn==null?null:Math.max(0,Vs-Pn),yv=((qi==null?void 0:qi.editing)??0)>0||Rd!=null&&Rd<OS,xv=W!=null&&W>FS,wv=ie==="offline"||ie==="connecting"||ie==="idle",Sv=ie==="reconnecting"||Y||O.state==="error"||xv,kv=AS({isOffline:wv,isUnstable:Sv,recentEditActive:lv,editingActive:yv}),Cv=f.useMemo(()=>$S(Xe,Ke),[Xe,Ke]),ea=f.useMemo(()=>Xe.length?Xe.reduce((x,L)=>Math.max(x,L.ts),0):null,[Xe]),Ev=$l||vr!=null&&ea!=null&&ea<=vr?null:Cv,Nv=f.useMemo(()=>US(lt,Ke,Vs),[Ke,Vs,lt]),bv=Md?dv:Gi,jv=Md||e==="/"?Gi:pv,at=f.useCallback(x=>{v(L=>({...L,filters:x(L.filters)}))},[]),Mv=f.useCallback(x=>{v(L=>({...L,filters:x}))},[]),Xi=f.useCallback(()=>{at(x=>$a(x,[]))},[at]),Ld=f.useCallback(()=>{v(x=>({...x,filters:{and:[]}}))},[]),ta=f.useCallback((x,L)=>{at(_=>iS(_,x,L))},[at]),Td=f.useMemo(()=>{var L,_,H,$,D,re;const x=[];for(const X of b.filters.and)if("stars"in X){const K=X.stars||[];if(!K.length)continue;x.push({id:"stars",label:`Rating in: ${Ha(K)}`,onRemove:()=>Xi()})}else if("starsIn"in X){const K=X.starsIn.values||[];if(!K.length)continue;x.push({id:"stars-in",label:`Rating in: ${Ha(K)}`,onRemove:()=>Xi()})}else if("starsNotIn"in X){const K=X.starsNotIn.values||[];if(!K.length)continue;x.push({id:"stars-not-in",label:`Rating not in: ${Ha(K)}`,onRemove:()=>at(se=>Gg(se,[]))})}else if("nameContains"in X){const K=(L=X.nameContains.value)==null?void 0:L.trim();if(!K)continue;x.push({id:"name-contains",label:`Filename contains: ${K}`,onRemove:()=>at(se=>qg(se,""))})}else if("nameNotContains"in X){const K=(_=X.nameNotContains.value)==null?void 0:_.trim();if(!K)continue;x.push({id:"name-not-contains",label:`Filename not: ${K}`,onRemove:()=>at(se=>Xg(se,""))})}else if("commentsContains"in X){const K=(H=X.commentsContains.value)==null?void 0:H.trim();if(!K)continue;x.push({id:"comments-contains",label:`Comments contain: ${K}`,onRemove:()=>at(se=>Jg(se,""))})}else if("commentsNotContains"in X){const K=($=X.commentsNotContains.value)==null?void 0:$.trim();if(!K)continue;x.push({id:"comments-not-contains",label:`Comments not: ${K}`,onRemove:()=>at(se=>Zg(se,""))})}else if("urlContains"in X){const K=(D=X.urlContains.value)==null?void 0:D.trim();if(!K)continue;x.push({id:"url-contains",label:`URL contains: ${K}`,onRemove:()=>at(se=>ev(se,""))})}else if("urlNotContains"in X){const K=(re=X.urlNotContains.value)==null?void 0:re.trim();if(!K)continue;x.push({id:"url-not-contains",label:`URL not: ${K}`,onRemove:()=>at(se=>tv(se,""))})}else if("dateRange"in X){const{from:K,to:se}=X.dateRange;if(!K&&!se)continue;x.push({id:"date-range",label:`Date: ${VS(K,se)}`,onRemove:()=>at(Be=>uc(Be,null))})}else if("widthCompare"in X){const{op:K,value:se}=X.widthCompare;x.push({id:"width-compare",label:`Width ${K} ${se}`,onRemove:()=>at(Be=>Ao(Be,null))})}else if("heightCompare"in X){const{op:K,value:se}=X.heightCompare;x.push({id:"height-compare",label:`Height ${K} ${se}`,onRemove:()=>at(Be=>$o(Be,null))})}else if("metricRange"in X){const{key:K,min:se,max:Be}=X.metricRange;x.push({id:`metric:${K}`,label:`${K}: ${KS(se,Be)}`,onRemove:()=>ta(K,null)})}return x},[b.filters,Xi,ta,at]),Rv=f.useCallback(x=>{const L=new Set(Kl);L.has(x)?L.delete(x):L.add(x),v(_=>({..._,filters:$a(_.filters,Array.from(L))}))},[Kl]),Lv=f.useCallback(()=>{I(!0),U("metrics")},[]),Tv=f.useCallback(x=>{v(L=>({...L,sort:x})),x.kind==="builtin"&&x.key==="random"&&p(Date.now())},[]),Id=f.useCallback(x=>{if(x==="/"||x==="")return"Lenslet | Root";const L=x.split("/").filter(Boolean);if(!L.length)return"Lenslet";const _=L.slice(-2).join("/");return`Lenslet | ${L.length>2?`.../${_}`:`/${_}`}`},[]),Iv=f.useMemo(()=>QS(e),[e]);f.useEffect(()=>{document.title=Id(e)},[e,Id]),f.useEffect(()=>{let x=!0;return me.getViews().then(L=>{x&&be(L.views||[])}).catch(()=>{x&&be([])}),()=>{x=!1}},[]),f.useEffect(()=>{xr&&(i([]),o&&(l(null),tt.current=!1,Aa(e)))},[xr,o,e]),f.useEffect(()=>{const x=q.current,L=de.current;if(!x||!L)return;const _=()=>{const H=Math.max(48,Math.round(L.getBoundingClientRect().height));x.style.setProperty("--toolbar-h",`${H}px`)};if(_(),"ResizeObserver"in window){const H=new ResizeObserver(_);return H.observe(L),()=>H.disconnect()}return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]),f.useEffect(()=>{try{const x=localStorage.getItem(De.sortKey),L=localStorage.getItem(De.sortDir),_=localStorage.getItem(De.sortSpec),H=localStorage.getItem(De.starFilters),$=localStorage.getItem(De.filterAst),D=localStorage.getItem(De.selectedMetric),re=localStorage.getItem(De.viewMode),X=localStorage.getItem(De.gridItemSize),K=localStorage.getItem(De.leftOpen),se=localStorage.getItem(De.rightOpen),wr=(nt=>{if(!nt)return null;const We=Fa(nt);return!We||typeof We!="object"?null:We.kind==="builtin"&&(We.key==="name"||We.key==="added"||We.key==="random")&&(We.dir==="asc"||We.dir==="desc")||We.kind==="metric"&&typeof We.key=="string"&&We.key.length>0&&(We.dir==="asc"||We.dir==="desc")?We:null})(_)??{kind:"builtin",key:x==="name"||x==="added"||x==="random"?x:"added",dir:L==="asc"||L==="desc"?L:"desc"};wr.key==="random"&&p(Date.now());let ia=(nt=>{if(!nt)return null;const We=Fa(nt);return ac(We)})($)??{and:[]};if(H){const nt=Fa(H);if(Array.isArray(nt)){const We=nt.filter(Av=>[0,1,2,3,4,5].includes(Av));ia=$a(ia,We)}}if(v(nt=>({...nt,sort:wr,filters:ia,selectedMetric:D||nt.selectedMetric})),(re==="grid"||re==="adaptive")&&C(re),X){const nt=Number(X);!isNaN(nt)&&nt>=80&&nt<=500&&T(nt)}(K==="0"||K==="false")&&I(!1),(se==="0"||se==="false")&&z(!1)}catch{}},[]),f.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia("(max-width: 900px)"),L=()=>{x.matches&&(I(!1),z(!1))};return L(),"addEventListener"in x?(x.addEventListener("change",L),()=>x.removeEventListener("change",L)):(x.addListener(L),()=>x.removeListener(L))},[]),f.useEffect(()=>{if(typeof window>"u")return;const x=[1,1.25,1.5,1.75,2,3,4],L=$=>x.reduce((D,re)=>Math.abs(re-$)<Math.abs(D-$)?re:D,x[0]),_=()=>{var Be;const $=window.devicePixelRatio||1,D=L($),re=((Be=window.visualViewport)==null?void 0:Be.scale)??1,X=$*re/D;if(!Number.isFinite(X)){E(null);return}const K=Math.round(X*100),se=Math.min(500,Math.max(25,K));E(se)};_(),window.addEventListener("resize",_),window.addEventListener("orientationchange",_);const H=window.visualViewport;return H&&H.addEventListener("resize",_),()=>{window.removeEventListener("resize",_),window.removeEventListener("orientationchange",_),H&&H.removeEventListener("resize",_)}},[]),f.useEffect(()=>{try{localStorage.setItem(De.sortKey,b.sort.kind==="builtin"?b.sort.key:"added"),localStorage.setItem(De.sortDir,b.sort.dir),localStorage.setItem(De.sortSpec,JSON.stringify(b.sort));const x=Lh(b.filters);localStorage.setItem(De.starFilters,JSON.stringify(x)),localStorage.setItem(De.filterAst,JSON.stringify(b.filters)),b.selectedMetric?localStorage.setItem(De.selectedMetric,b.selectedMetric):localStorage.removeItem(De.selectedMetric),localStorage.setItem(De.viewMode,d),localStorage.setItem(De.gridItemSize,String(M)),localStorage.setItem(De.leftOpen,j?"1":"0"),localStorage.setItem(De.rightOpen,N?"1":"0")}catch{}},[b,d,M,j,N]),f.useEffect(()=>{const x=le.current;if(!x)return;const L=H=>Math.min(500,Math.max(80,H)),_=H=>{H.ctrlKey&&(H.preventDefault(),T($=>L($+(H.deltaY<0?20:-20))))};return x.addEventListener("wheel",_,{passive:!1}),()=>x.removeEventListener("wheel",_)},[]),f.useEffect(()=>{if(o)return;const x=le.current;if(!x)return;const L=X=>Math.min(500,Math.max(80,X));let _=null;const H=X=>{if(X.length<2)return 0;const[K,se]=[X[0],X[1]];return Math.hypot(K.clientX-se.clientX,K.clientY-se.clientY)},$=X=>{if(X.touches.length!==2)return;const K=H(X.touches);K&&(_={dist:K,size:M})},D=X=>{if(!_||X.touches.length!==2)return;const K=H(X.touches);if(!K)return;X.preventDefault();const se=L(_.size*(K/_.dist));T(se)},re=()=>{_=null};return x.addEventListener("touchstart",$,{passive:!0}),x.addEventListener("touchmove",D,{passive:!1}),x.addEventListener("touchend",re),x.addEventListener("touchcancel",re),()=>{x.removeEventListener("touchstart",$),x.removeEventListener("touchmove",D),x.removeEventListener("touchend",re),x.removeEventListener("touchcancel",re)}},[o,M]),f.useEffect(()=>{if(!o)return;const x=Nt.indexOf(o);if(x===-1)return;const L=[Nt[x-2],Nt[x-1],Nt[x+1],Nt[x+2]].filter(_=>!!_);for(const _ of L)me.prefetchFile(_),me.prefetchThumb(_)},[o,Nt]),f.useEffect(()=>{var L;if(!((L=ze==null?void 0:ze.items)!=null&&L.length))return;const x=ze.items.slice(0,5);for(const _ of x)me.prefetchFile(_.path)},[ze==null?void 0:ze.path,ze==null?void 0:ze.items]);const Ji=f.useCallback(x=>{l(null),tt.current=!1;const L=Xt(x);t(L),Mh(L)},[]),_v=f.useCallback(async()=>{const x=window.prompt("Save Smart Folder as:","New Smart Folder");if(!x)return;const L=WS(x,V),_={id:L,name:x,pool:{kind:"folder",path:e},view:JSON.parse(JSON.stringify(b))},H=[...V.filter($=>$.id!==L),_];be(H),he(L);try{await me.saveViews({version:1,views:H})}catch($){if($ instanceof ur&&$.status===403){const D=new Blob([JSON.stringify({version:1,views:H},null,2)],{type:"application/json"});Uo(D,`lenslet-smart-folder-${L}.json`),alert("No-write mode: exported Smart Folder JSON instead of saving.");return}console.error("Failed to save Smart Folder:",$)}},[e,b,V]);f.useEffect(()=>{if(!je)return;const x=V.find(H=>H.id===je);if(!x){he(null);return}const L=x.pool.path===e,_=JSON.stringify(x.view)===JSON.stringify(b);(!L||!_)&&he(null)},[je,V,e,b]);const Pv=f.useCallback(x=>{l(x),tt.current=!0,Mh(x)},[]),_d=f.useCallback(()=>{l(null),tt.current?(tt.current=!1,window.history.back()):Aa(e);const x=Re.current;if(x){const L=document.getElementById(`cell-${encodeURIComponent(x)}`);L==null||L.focus()}},[e]);f.useEffect(()=>{const x=q.current;if(!x)return;const L=$=>{$.dataTransfer&&Array.from($.dataTransfer.types).includes("Files")&&($.preventDefault(),A(!0))},_=$=>{const D=$.relatedTarget;D&&x.contains(D)||A(!1)},H=async $=>{var X,K;$.preventDefault(),A(!1);const D=Array.from(((X=$.dataTransfer)==null?void 0:X.files)??[]);if(!D.length)return;if(!((((K=ze==null?void 0:ze.dirs)==null?void 0:K.length)??0)===0)){alert("Uploads are only allowed into folders without subdirectories.");return}for(const se of D)try{await me.uploadFile(e,se)}catch(Be){console.error(`Failed to upload ${se.name}:`,Be)}Ql()};return x.addEventListener("dragover",L),x.addEventListener("dragleave",_),x.addEventListener("drop",H),()=>{x.removeEventListener("dragover",L),x.removeEventListener("dragleave",_),x.removeEventListener("drop",H)}},[e,(Od=ze==null?void 0:ze.dirs)==null?void 0:Od.length,Ql]),f.useEffect(()=>{const x=()=>te(null),L=_=>{_.key==="Escape"&&te(null)};return window.addEventListener("click",x),window.addEventListener("keydown",L),()=>{window.removeEventListener("click",x),window.removeEventListener("keydown",L)}},[]),f.useEffect(()=>{const x=L=>{if(!Qg(L.target)){if((L.ctrlKey||L.metaKey)&&L.key.toLowerCase()==="b"){L.preventDefault(),L.altKey?z(_=>!_):I(_=>!_);return}if(!o){if(L.key==="Backspace"||L.key==="Delete")L.preventDefault(),Ji(Rh(e));else if((L.ctrlKey||L.metaKey)&&L.key.toLowerCase()==="a")L.preventDefault(),i(Ke.map(_=>_.path));else if(L.key==="Escape")s.length&&(L.preventDefault(),i([]));else if(L.key==="/"){L.preventDefault();const _=document.querySelector(".toolbar-right .input");_==null||_.focus()}}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,Ke,s,o,Ji]);const Ov=j?`${Bt}px`:"0px",Fv=N?`${mr}px`:"0px",Pd=o??s[0]??null,na=Pd?Nt.indexOf(Pd):-1,zv=na>0,Dv=na>=0&&na<Nt.length-1,ra=f.useCallback(x=>{if(!Nt.length)return;const L=o??s[0];if(!L)return;const _=Nt.indexOf(L);if(_===-1)return;const H=Math.min(Nt.length-1,Math.max(0,_+x)),$=Nt[H];!$||$===L||(o&&(l($),Aa($)),i([$]))},[Nt,o,s]);return u.jsxs("div",{className:"app-shell grid h-full grid-cols-[var(--left)_1fr_var(--right)]",ref:q,style:{"--left":Ov,"--right":Fv},children:[u.jsx(Zx,{rootRef:de,onSearch:r,viewerActive:!!o,onBack:_d,zoomPercent:o?y:void 0,onZoomPercentChange:x=>h(x),currentLabel:Iv,itemCount:bv,totalCount:jv,sortSpec:b.sort,metricKeys:On,onSortChange:Tv,filterCount:jd,onOpenFilters:Lv,starFilters:Kl,onToggleStar:Rv,onClearStars:Xi,onClearFilters:Ld,starCounts:hv,viewMode:d,onViewMode:C,gridItemSize:M,onGridItemSize:T,leftOpen:j,rightOpen:N,onToggleLeft:()=>I(x=>!x),onToggleRight:()=>z(x=>!x),onPrevImage:()=>ra(-1),onNextImage:()=>ra(1),canPrevImage:zv,canNextImage:Dv,syncIndicator:{state:kv,presence:qi,syncLabel:mv,connectionLabel:gv,lastEditedLabel:vv,hasEdits:Zl,recentTouches:Nv}}),j&&u.jsx(_S,{leftTool:J,onToolChange:U,views:V,activeViewId:je,onActivateView:x=>{var _;he(x.id);const L=ac((_=x.view)==null?void 0:_.filters)??{and:[]};v({...x.view,filters:L}),Ji(x.pool.path),U("metrics")},onSaveView:_v,current:e,data:ze,onOpenFolder:x=>{he(null),Ji(x)},onContextMenu:(x,L)=>{x.preventDefault(),te({x:x.clientX,y:x.clientY,kind:"tree",payload:{path:L}})},items:nn,filteredItems:Ke,metricKeys:On,selectedItems:fv,selectedMetric:b.selectedMetric,onSelectMetric:x=>v(L=>({...L,selectedMetric:x})),filters:b.filters,onChangeRange:ta,onChangeFilters:Mv,onResize:pn}),u.jsxs("div",{className:"grid-shell col-start-2 row-start-2 relative overflow-hidden flex flex-col",ref:le,children:[u.jsx("div",{"aria-live":"polite",className:"sr-only",children:s.length?`${s.length} selected`:""}),u.jsx(PS,{persistenceEnabled:av,recentSummary:Ev,onDismissRecent:()=>Ul(!0),onCloseRecent:()=>yr(ea??Date.now()),browserZoomPercent:k}),Td.length>0&&u.jsx("div",{className:"sticky top-0 z-10 px-3 py-2 bg-panel border-b border-border",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsx("span",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Filters"}),Td.map(x=>u.jsxs("span",{className:"filter-chip",children:[u.jsx("span",{className:"truncate max-w-[240px]",title:x.label,children:x.label}),u.jsx("button",{className:"filter-chip-remove","aria-label":`Clear filter ${x.label}`,onClick:x.onRemove,children:""})]},x.id)),u.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:Ld,children:"Clear all"})]})}),!1,u.jsxs("div",{className:"flex-1 min-h-0 relative",children:[u.jsx(Kw,{items:Ke,selected:s,restoreToSelectionToken:a,onSelectionChange:i,onOpenViewer:x=>{try{Re.current=x}catch{}Pv(x),i([x])},highlight:xr?Cd:"",recentlyUpdated:Bl,suppressSelectionHighlight:!!o,viewMode:d,targetCellSize:M,onContextMenuItem:(x,L)=>{x.preventDefault();const _=s.length?s:[L];te({x:x.clientX,y:x.clientY,kind:"grid",payload:{paths:_}})},scrollRef:oe,hideScrollbar:Nd}),Nd&&Qs&&u.jsx(qw,{items:Ke,metricKey:Qs,scrollRef:oe,sortDir:b.sort.dir})]})]}),N&&u.jsx(I1,{path:s[0]??null,selectedPaths:s,items:Ke,sortSpec:b.sort,onResize:tn,onStarChanged:(x,L)=>{Me(_=>{const H={..._};for(const $ of x)H[$]=L;return H})}}),o&&u.jsx(i1,{path:o,onClose:_d,onZoomChange:x=>S(Math.round(x)),requestedZoomPercent:m,onZoomRequestConsumed:()=>h(null),onNavigate:ra}),gr&&u.jsx("div",{className:"toolbar-offset fixed inset-0 left-[var(--left)] right-[var(--right)] bg-accent/10 border-2 border-dashed border-accent text-text flex items-center justify-center text-lg z-overlay pointer-events-none",children:"Drop images to upload"}),ee&&u.jsx(YS,{ctx:ee,current:e,items:Ke,refetch:Ql,setCtx:te})]})}function WS(e,t){const n=HS(e)||"view",r=new Set(t.map(i=>i.id));if(!r.has(n))return n;let s=2;for(;r.has(`${n}-${s}`);)s+=1;return`${n}-${s}`}function HS(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function Ha(e){const t=e.filter(s=>s>0).sort((s,i)=>i-s),n=e.includes(0),r=[...t.map(s=>String(s))];return n&&r.push("None"),r.join(", ")}function VS(e,t){return e&&t?`${e} to ${t}`:e?`from ${e}`:t?`to ${t}`:""}function QS(e){if(e==="/"||e==="")return"Root";const t=e.split("/").filter(Boolean);return t.length?t.length<=2?`/${t.join("/")}`:`.../${t.slice(-2).join("/")}`:"Root"}function KS(e,t){return`${Zh(e)}${Zh(t)}`}function Zh(e){const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Uo(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function YS({ctx:e,current:t,items:n,refetch:r,setCtx:s}){const i=U1(t),o=(p,d)=>p==="/"?`/${d}`:`${p}/${d}`,l=Gr(),[a,c]=Bo.useState(!1),[m,h]=Bo.useState(null),y=()=>new Date().toISOString().replace(/[:.]/g,"-"),S=p=>{const d=C=>p==="/"?!0:C===p||C.startsWith(`${p}/`);l.invalidateQueries({predicate:({queryKey:C})=>{if(!Array.isArray(C)||C[0]!=="folder")return!1;const M=typeof C[1]=="string"?C[1]:"";return d(M)}})},k=p=>{const d=Xt(p);return d===""?"/":d},E=async()=>{const p=k(e.payload.path||"/");c(!0);try{await me.refreshFolder(p),S(p),(t===p||t.startsWith(p==="/"?"/":`${p}/`))&&await r(),Xu.evictPrefix(p),es.evictPrefix(p)}catch(d){console.error("Failed to refresh folder:",d)}finally{c(!1),s(null)}},b=async p=>{const d=[p],C=new Set,M=[];for(;d.length;){const T=d.pop();if(!C.has(T)){C.add(T);try{const j=await me.getFolder(T);M.push(...j.items);for(const I of j.dirs)I.kind==="branch"&&d.push(o(T,I.name))}catch(j){console.error(`Failed to fetch folder ${T}:`,j)}}}return M},v=p=>async()=>{h(p);const d=e.payload.path||t;try{const C=await b(d),M=Ua(C),T=p==="csv"?Ah(M):Dh(M),j=p==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8",I=d==="/"?"root":(d.replace(/^\/+/,"")||"root").replace(/\//g,"_");Uo(new Blob([T],{type:j}),`metadata_${I}_${y()}.${p}`)}catch(C){console.error("Failed to export folder:",C),alert("Failed to export folder. See console for details.")}finally{h(null),s(null)}},g=e.kind==="tree"?[{label:a?"Refreshing":"Refresh",disabled:a,onClick:E},{label:m==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!m||a,onClick:v("csv")},{label:m==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!m||a,onClick:v("json")}]:(()=>{const p=e.payload.paths??[],d=[];return d.push({label:"Move to trash",disabled:i,onClick:async()=>{if(!i){for(const C of p)try{await me.moveFile(C,"/_trash_")}catch(M){console.error(`Failed to trash ${C}:`,M)}r(),s(null)}}}),i&&(d.push({label:"Permanent delete",danger:!0,onClick:async()=>{if(confirm(`Delete ${p.length} file(s) permanently? This cannot be undone.`)){try{await me.deleteFiles(p)}catch(C){console.error("Failed to delete files:",C)}r(),s(null)}}}),d.push({label:"Recover",onClick:async()=>{for(const C of p)try{const T=(await me.getSidecar(C)).original_position,j=T&&T.split("/").slice(0,-1).join("/")||"/";await me.moveFile(C,j)}catch(M){console.error(`Failed to recover ${C}:`,M)}r(),s(null)}})),p.length&&(d.push({label:m==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!m,onClick:async()=>{h("csv");try{const C=new Set(p),M=n.filter(I=>C.has(I.path)),T=Ua(M),j=Ah(T);Uo(new Blob([j],{type:"text/csv;charset=utf-8"}),`metadata_selection_${y()}.csv`)}finally{h(null),s(null)}}}),d.push({label:m==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!m,onClick:async()=>{h("json");try{const C=new Set(p),M=n.filter(I=>C.has(I.path)),T=Ua(M),j=Dh(T);Uo(new Blob([j],{type:"application/json;charset=utf-8"}),`metadata_selection_${y()}.json`)}finally{h(null),s(null)}}})),d})();return u.jsx(gS,{x:e.x,y:e.y,items:g})}const GS=new zx({defaultOptions:{queries:{staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always"},mutations:{retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),5e3)}}});function qS(){return u.jsx(Dx,{client:GS,children:u.jsx(BS,{})})}Cg(document.getElementById("root")).render(u.jsx(qS,{}));
