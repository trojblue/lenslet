var Tv=Object.defineProperty;var Od=e=>{throw TypeError(e)};var Iv=(e,t,n)=>t in e?Tv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var mn=(e,t,n)=>Iv(e,typeof t!="symbol"?t+"":t,n),oa=(e,t,n)=>t.has(e)||Od("Cannot "+n);var w=(e,t,n)=>(oa(e,t,"read from private field"),n?n.call(e):t.get(e)),ne=(e,t,n)=>t.has(e)?Od("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Q=(e,t,n,r)=>(oa(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ae=(e,t,n)=>(oa(e,t,"access private method"),n);var Zi=(e,t,n,r)=>({set _(s){Q(e,t,s,n)},get _(){return w(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function _v(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var np={exports:{}},wl={},rp={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hi=Symbol.for("react.element"),Pv=Symbol.for("react.portal"),Ov=Symbol.for("react.fragment"),Fv=Symbol.for("react.strict_mode"),Dv=Symbol.for("react.profiler"),zv=Symbol.for("react.provider"),Av=Symbol.for("react.context"),$v=Symbol.for("react.forward_ref"),Uv=Symbol.for("react.suspense"),Bv=Symbol.for("react.memo"),Wv=Symbol.for("react.lazy"),Fd=Symbol.iterator;function Hv(e){return e===null||typeof e!="object"?null:(e=Fd&&e[Fd]||e["@@iterator"],typeof e=="function"?e:null)}var sp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ip=Object.assign,op={};function $s(e,t,n){this.props=e,this.context=t,this.refs=op,this.updater=n||sp}$s.prototype.isReactComponent={};$s.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$s.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function lp(){}lp.prototype=$s.prototype;function dc(e,t,n){this.props=e,this.context=t,this.refs=op,this.updater=n||sp}var fc=dc.prototype=new lp;fc.constructor=dc;ip(fc,$s.prototype);fc.isPureReactComponent=!0;var Dd=Array.isArray,ap=Object.prototype.hasOwnProperty,hc={current:null},up={key:!0,ref:!0,__self:!0,__source:!0};function cp(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)ap.call(t,r)&&!up.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Hi,type:e,key:i,ref:o,props:s,_owner:hc.current}}function Vv(e,t){return{$$typeof:Hi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hi}function Qv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var zd=/\/+/g;function la(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Qv(""+e.key):t.toString(36)}function ko(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Hi:case Pv:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+la(o,0):r,Dd(s)?(n="",e!=null&&(n=e.replace(zd,"$&/")+"/"),ko(s,t,n,"",function(c){return c})):s!=null&&(pc(s)&&(s=Vv(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(zd,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Dd(e))for(var l=0;l<e.length;l++){i=e[l];var a=r+la(i,l);o+=ko(i,t,n,a,s)}else if(a=Hv(e),typeof a=="function")for(e=a.call(e),l=0;!(i=e.next()).done;)i=i.value,a=r+la(i,l++),o+=ko(i,t,n,a,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function eo(e,t,n){if(e==null)return e;var r=[],s=0;return ko(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Kv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var mt={current:null},Co={transition:null},Gv={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:Co,ReactCurrentOwner:hc};function dp(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:eo,forEach:function(e,t,n){eo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return eo(e,function(){t++}),t},toArray:function(e){return eo(e,function(t){return t})||[]},only:function(e){if(!pc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ce.Component=$s;ce.Fragment=Ov;ce.Profiler=Dv;ce.PureComponent=dc;ce.StrictMode=Fv;ce.Suspense=Uv;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gv;ce.act=dp;ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ip({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=hc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)ap.call(t,a)&&!up.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Hi,type:e.type,key:s,ref:i,props:r,_owner:o}};ce.createContext=function(e){return e={$$typeof:Av,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:zv,_context:e},e.Consumer=e};ce.createElement=cp;ce.createFactory=function(e){var t=cp.bind(null,e);return t.type=e,t};ce.createRef=function(){return{current:null}};ce.forwardRef=function(e){return{$$typeof:$v,render:e}};ce.isValidElement=pc;ce.lazy=function(e){return{$$typeof:Wv,_payload:{_status:-1,_result:e},_init:Kv}};ce.memo=function(e,t){return{$$typeof:Bv,type:e,compare:t===void 0?null:t}};ce.startTransition=function(e){var t=Co.transition;Co.transition={};try{e()}finally{Co.transition=t}};ce.unstable_act=dp;ce.useCallback=function(e,t){return mt.current.useCallback(e,t)};ce.useContext=function(e){return mt.current.useContext(e)};ce.useDebugValue=function(){};ce.useDeferredValue=function(e){return mt.current.useDeferredValue(e)};ce.useEffect=function(e,t){return mt.current.useEffect(e,t)};ce.useId=function(){return mt.current.useId()};ce.useImperativeHandle=function(e,t,n){return mt.current.useImperativeHandle(e,t,n)};ce.useInsertionEffect=function(e,t){return mt.current.useInsertionEffect(e,t)};ce.useLayoutEffect=function(e,t){return mt.current.useLayoutEffect(e,t)};ce.useMemo=function(e,t){return mt.current.useMemo(e,t)};ce.useReducer=function(e,t,n){return mt.current.useReducer(e,t,n)};ce.useRef=function(e){return mt.current.useRef(e)};ce.useState=function(e){return mt.current.useState(e)};ce.useSyncExternalStore=function(e,t,n){return mt.current.useSyncExternalStore(e,t,n)};ce.useTransition=function(){return mt.current.useTransition()};ce.version="18.3.1";rp.exports=ce;var f=rp.exports;const Bo=_v(f);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv=f,qv=Symbol.for("react.element"),Xv=Symbol.for("react.fragment"),Jv=Object.prototype.hasOwnProperty,Zv=Yv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ey={key:!0,ref:!0,__self:!0,__source:!0};function fp(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Jv.call(t,r)&&!ey.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:qv,type:e,key:i,ref:o,props:s,_owner:Zv.current}}wl.Fragment=Xv;wl.jsx=fp;wl.jsxs=fp;np.exports=wl;var u=np.exports,hp={exports:{}},Tt={},pp={exports:{}},mp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,B){var Z=P.length;P.push(B);e:for(;0<Z;){var pe=Z-1>>>1,ue=P[pe];if(0<s(ue,B))P[pe]=B,P[Z]=ue,Z=pe;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var B=P[0],Z=P.pop();if(Z!==B){P[0]=Z;e:for(var pe=0,ue=P.length,Me=ue>>>1;pe<Me;){var q=2*(pe+1)-1,le=P[q],oe=q+1,de=P[oe];if(0>s(le,Z))oe<ue&&0>s(de,le)?(P[pe]=de,P[oe]=Z,pe=oe):(P[pe]=le,P[q]=Z,pe=q);else if(oe<ue&&0>s(de,Z))P[pe]=de,P[oe]=Z,pe=oe;else break e}}return B}function s(P,B){var Z=P.sortIndex-B.sortIndex;return Z!==0?Z:P.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],c=[],p=1,d=null,v=3,S=!1,k=!1,E=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(P){for(var B=n(c);B!==null;){if(B.callback===null)r(c);else if(B.startTime<=P)r(c),B.sortIndex=B.expirationTime,t(a,B);else break;B=n(c)}}function h(P){if(E=!1,m(P),!k)if(n(a)!==null)k=!0,je(C);else{var B=n(c);B!==null&&he(h,B.startTime-P)}}function C(P,B){k=!1,E&&(E=!1,y(M),M=-1),S=!0;var Z=v;try{for(m(B),d=n(a);d!==null&&(!(d.expirationTime>B)||P&&!D());){var pe=d.callback;if(typeof pe=="function"){d.callback=null,v=d.priorityLevel;var ue=pe(d.expirationTime<=B);B=e.unstable_now(),typeof ue=="function"?d.callback=ue:d===n(a)&&r(a),m(B)}else r(a);d=n(a)}if(d!==null)var Me=!0;else{var q=n(c);q!==null&&he(h,q.startTime-B),Me=!1}return Me}finally{d=null,v=Z,S=!1}}var L=!1,T=null,M=-1,I=5,N=-1;function D(){return!(e.unstable_now()-N<I)}function J(){if(T!==null){var P=e.unstable_now();N=P;var B=!0;try{B=T(!0,P)}finally{B?U():(L=!1,T=null)}}else L=!1}var U;if(typeof g=="function")U=function(){g(J)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,be=V.port2;V.port1.onmessage=J,U=function(){be.postMessage(null)}}else U=function(){b(J,0)};function je(P){T=P,L||(L=!0,U())}function he(P,B){M=b(function(){P(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){k||S||(k=!0,je(C))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(P){switch(v){case 1:case 2:case 3:var B=3;break;default:B=v}var Z=v;v=B;try{return P()}finally{v=Z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var Z=v;v=P;try{return B()}finally{v=Z}},e.unstable_scheduleCallback=function(P,B,Z){var pe=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?pe+Z:pe):Z=pe,P){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Z+ue,P={id:p++,callback:B,priorityLevel:P,startTime:Z,expirationTime:ue,sortIndex:-1},Z>pe?(P.sortIndex=Z,t(c,P),n(a)===null&&P===n(c)&&(E?(y(M),M=-1):E=!0,he(h,Z-pe))):(P.sortIndex=ue,t(a,P),k||S||(k=!0,je(C))),P},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(P){var B=v;return function(){var Z=v;v=B;try{return P.apply(this,arguments)}finally{v=Z}}}})(mp);pp.exports=mp;var ty=pp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ny=f,Lt=ty;function F(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gp=new Set,yi={};function Kr(e,t){_s(e,t),_s(e+"Capture",t)}function _s(e,t){for(yi[e]=t,e=0;e<t.length;e++)gp.add(t[e])}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ha=Object.prototype.hasOwnProperty,ry=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ad={},$d={};function sy(e){return Ha.call($d,e)?!0:Ha.call(Ad,e)?!1:ry.test(e)?$d[e]=!0:(Ad[e]=!0,!1)}function iy(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function oy(e,t,n,r){if(t===null||typeof t>"u"||iy(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gt(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){et[e]=new gt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];et[t]=new gt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){et[e]=new gt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){et[e]=new gt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){et[e]=new gt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){et[e]=new gt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){et[e]=new gt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){et[e]=new gt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){et[e]=new gt(e,5,!1,e.toLowerCase(),null,!1,!1)});var mc=/[\-:]([a-z])/g;function gc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mc,gc);et[t]=new gt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mc,gc);et[t]=new gt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mc,gc);et[t]=new gt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){et[e]=new gt(e,1,!1,e.toLowerCase(),null,!1,!1)});et.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){et[e]=new gt(e,1,!1,e.toLowerCase(),null,!0,!0)});function vc(e,t,n,r){var s=et.hasOwnProperty(t)?et[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(oy(t,n,s,r)&&(n=null),r||s===null?sy(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var _n=ny.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,to=Symbol.for("react.element"),es=Symbol.for("react.portal"),ts=Symbol.for("react.fragment"),yc=Symbol.for("react.strict_mode"),Va=Symbol.for("react.profiler"),vp=Symbol.for("react.provider"),yp=Symbol.for("react.context"),xc=Symbol.for("react.forward_ref"),Qa=Symbol.for("react.suspense"),Ka=Symbol.for("react.suspense_list"),wc=Symbol.for("react.memo"),An=Symbol.for("react.lazy"),xp=Symbol.for("react.offscreen"),Ud=Symbol.iterator;function Qs(e){return e===null||typeof e!="object"?null:(e=Ud&&e[Ud]||e["@@iterator"],typeof e=="function"?e:null)}var Ie=Object.assign,aa;function ni(e){if(aa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);aa=t&&t[1]||""}return`
`+aa+e}var ua=!1;function ca(e,t){if(!e||ua)return"";ua=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var a=`
`+s[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{ua=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ni(e):""}function ly(e){switch(e.tag){case 5:return ni(e.type);case 16:return ni("Lazy");case 13:return ni("Suspense");case 19:return ni("SuspenseList");case 0:case 2:case 15:return e=ca(e.type,!1),e;case 11:return e=ca(e.type.render,!1),e;case 1:return e=ca(e.type,!0),e;default:return""}}function Ga(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ts:return"Fragment";case es:return"Portal";case Va:return"Profiler";case yc:return"StrictMode";case Qa:return"Suspense";case Ka:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yp:return(e.displayName||"Context")+".Consumer";case vp:return(e._context.displayName||"Context")+".Provider";case xc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wc:return t=e.displayName||null,t!==null?t:Ga(e.type)||"Memo";case An:t=e._payload,e=e._init;try{return Ga(e(t))}catch{}}return null}function ay(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ga(t);case 8:return t===yc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function uy(e){var t=wp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function no(e){e._valueTracker||(e._valueTracker=uy(e))}function Sp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=wp(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Wo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya(e,t){var n=t.checked;return Ie({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Bd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=cr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function kp(e,t){t=t.checked,t!=null&&vc(e,"checked",t,!1)}function qa(e,t){kp(e,t);var n=cr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xa(e,t.type,cr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Wd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Xa(e,t,n){(t!=="number"||Wo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ri=Array.isArray;function fs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+cr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ja(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ie({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Hd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(F(92));if(ri(n)){if(1<n.length)throw Error(F(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:cr(n)}}function Cp(e,t){var n=cr(t.value),r=cr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Vd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ep(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Za(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ep(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ro,Np=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ro=ro||document.createElement("div"),ro.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ro.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ai={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cy=["Webkit","ms","Moz","O"];Object.keys(ai).forEach(function(e){cy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ai[t]=ai[e]})});function bp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ai.hasOwnProperty(e)&&ai[e]?(""+t).trim():t+"px"}function jp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=bp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var dy=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eu(e,t){if(t){if(dy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(F(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(F(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(F(61))}if(t.style!=null&&typeof t.style!="object")throw Error(F(62))}}function tu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nu=null;function Sc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ru=null,hs=null,ps=null;function Qd(e){if(e=Ki(e)){if(typeof ru!="function")throw Error(F(280));var t=e.stateNode;t&&(t=Nl(t),ru(e.stateNode,e.type,t))}}function Mp(e){hs?ps?ps.push(e):ps=[e]:hs=e}function Rp(){if(hs){var e=hs,t=ps;if(ps=hs=null,Qd(e),t)for(e=0;e<t.length;e++)Qd(t[e])}}function Lp(e,t){return e(t)}function Tp(){}var da=!1;function Ip(e,t,n){if(da)return e(t,n);da=!0;try{return Lp(e,t,n)}finally{da=!1,(hs!==null||ps!==null)&&(Tp(),Rp())}}function wi(e,t){var n=e.stateNode;if(n===null)return null;var r=Nl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(F(231,t,typeof n));return n}var su=!1;if(Rn)try{var Ks={};Object.defineProperty(Ks,"passive",{get:function(){su=!0}}),window.addEventListener("test",Ks,Ks),window.removeEventListener("test",Ks,Ks)}catch{su=!1}function fy(e,t,n,r,s,i,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(p){this.onError(p)}}var ui=!1,Ho=null,Vo=!1,iu=null,hy={onError:function(e){ui=!0,Ho=e}};function py(e,t,n,r,s,i,o,l,a){ui=!1,Ho=null,fy.apply(hy,arguments)}function my(e,t,n,r,s,i,o,l,a){if(py.apply(this,arguments),ui){if(ui){var c=Ho;ui=!1,Ho=null}else throw Error(F(198));Vo||(Vo=!0,iu=c)}}function Gr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function _p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Kd(e){if(Gr(e)!==e)throw Error(F(188))}function gy(e){var t=e.alternate;if(!t){if(t=Gr(e),t===null)throw Error(F(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Kd(s),e;if(i===r)return Kd(s),t;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?e:t}function Pp(e){return e=gy(e),e!==null?Op(e):null}function Op(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Op(e);if(t!==null)return t;e=e.sibling}return null}var Fp=Lt.unstable_scheduleCallback,Gd=Lt.unstable_cancelCallback,vy=Lt.unstable_shouldYield,yy=Lt.unstable_requestPaint,$e=Lt.unstable_now,xy=Lt.unstable_getCurrentPriorityLevel,kc=Lt.unstable_ImmediatePriority,Dp=Lt.unstable_UserBlockingPriority,Qo=Lt.unstable_NormalPriority,wy=Lt.unstable_LowPriority,zp=Lt.unstable_IdlePriority,Sl=null,cn=null;function Sy(e){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Sl,e,void 0,(e.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:Ey,ky=Math.log,Cy=Math.LN2;function Ey(e){return e>>>=0,e===0?32:31-(ky(e)/Cy|0)|0}var so=64,io=4194304;function si(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ko(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=si(l):(i&=o,i!==0&&(r=si(i)))}else o=n&~s,o!==0?r=si(o):i!==0&&(r=si(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Xt(t),s=1<<n,r|=e[n],t&=~s;return r}function Ny(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function by(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Xt(i),l=1<<o,a=s[o];a===-1?(!(l&n)||l&r)&&(s[o]=Ny(l,t)):a<=t&&(e.expiredLanes|=l),i&=~l}}function ou(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ap(){var e=so;return so<<=1,!(so&4194240)&&(so=64),e}function fa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xt(t),e[t]=n}function jy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Xt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Cc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Xt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var xe=0;function $p(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Up,Ec,Bp,Wp,Hp,lu=!1,oo=[],er=null,tr=null,nr=null,Si=new Map,ki=new Map,Un=[],My="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yd(e,t){switch(e){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Si.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ki.delete(t.pointerId)}}function Gs(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ki(t),t!==null&&Ec(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Ry(e,t,n,r,s){switch(t){case"focusin":return er=Gs(er,e,t,n,r,s),!0;case"dragenter":return tr=Gs(tr,e,t,n,r,s),!0;case"mouseover":return nr=Gs(nr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Si.set(i,Gs(Si.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ki.set(i,Gs(ki.get(i)||null,e,t,n,r,s)),!0}return!1}function Vp(e){var t=Cr(e.target);if(t!==null){var n=Gr(t);if(n!==null){if(t=n.tag,t===13){if(t=_p(n),t!==null){e.blockedOn=t,Hp(e.priority,function(){Bp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Eo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=au(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);nu=r,n.target.dispatchEvent(r),nu=null}else return t=Ki(n),t!==null&&Ec(t),e.blockedOn=n,!1;t.shift()}return!0}function qd(e,t,n){Eo(e)&&n.delete(t)}function Ly(){lu=!1,er!==null&&Eo(er)&&(er=null),tr!==null&&Eo(tr)&&(tr=null),nr!==null&&Eo(nr)&&(nr=null),Si.forEach(qd),ki.forEach(qd)}function Ys(e,t){e.blockedOn===t&&(e.blockedOn=null,lu||(lu=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,Ly)))}function Ci(e){function t(s){return Ys(s,e)}if(0<oo.length){Ys(oo[0],e);for(var n=1;n<oo.length;n++){var r=oo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(er!==null&&Ys(er,e),tr!==null&&Ys(tr,e),nr!==null&&Ys(nr,e),Si.forEach(t),ki.forEach(t),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)Vp(n),n.blockedOn===null&&Un.shift()}var ms=_n.ReactCurrentBatchConfig,Go=!0;function Ty(e,t,n,r){var s=xe,i=ms.transition;ms.transition=null;try{xe=1,Nc(e,t,n,r)}finally{xe=s,ms.transition=i}}function Iy(e,t,n,r){var s=xe,i=ms.transition;ms.transition=null;try{xe=4,Nc(e,t,n,r)}finally{xe=s,ms.transition=i}}function Nc(e,t,n,r){if(Go){var s=au(e,t,n,r);if(s===null)ka(e,t,r,Yo,n),Yd(e,r);else if(Ry(s,e,t,n,r))r.stopPropagation();else if(Yd(e,r),t&4&&-1<My.indexOf(e)){for(;s!==null;){var i=Ki(s);if(i!==null&&Up(i),i=au(e,t,n,r),i===null&&ka(e,t,r,Yo,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ka(e,t,r,null,n)}}var Yo=null;function au(e,t,n,r){if(Yo=null,e=Sc(r),e=Cr(e),e!==null)if(t=Gr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=_p(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yo=e,null}function Qp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xy()){case kc:return 1;case Dp:return 4;case Qo:case wy:return 16;case zp:return 536870912;default:return 16}default:return 16}}var Jn=null,bc=null,No=null;function Kp(){if(No)return No;var e,t=bc,n=t.length,r,s="value"in Jn?Jn.value:Jn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return No=s.slice(e,1<r?1-r:void 0)}function bo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lo(){return!0}function Xd(){return!1}function It(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?lo:Xd,this.isPropagationStopped=Xd,this}return Ie(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lo)},persist:function(){},isPersistent:lo}),t}var Us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jc=It(Us),Qi=Ie({},Us,{view:0,detail:0}),_y=It(Qi),ha,pa,qs,kl=Ie({},Qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qs&&(qs&&e.type==="mousemove"?(ha=e.screenX-qs.screenX,pa=e.screenY-qs.screenY):pa=ha=0,qs=e),ha)},movementY:function(e){return"movementY"in e?e.movementY:pa}}),Jd=It(kl),Py=Ie({},kl,{dataTransfer:0}),Oy=It(Py),Fy=Ie({},Qi,{relatedTarget:0}),ma=It(Fy),Dy=Ie({},Us,{animationName:0,elapsedTime:0,pseudoElement:0}),zy=It(Dy),Ay=Ie({},Us,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$y=It(Ay),Uy=Ie({},Us,{data:0}),Zd=It(Uy),By={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Hy[e])?!!t[e]:!1}function Mc(){return Vy}var Qy=Ie({},Qi,{key:function(e){if(e.key){var t=By[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mc,charCode:function(e){return e.type==="keypress"?bo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ky=It(Qy),Gy=Ie({},kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ef=It(Gy),Yy=Ie({},Qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mc}),qy=It(Yy),Xy=Ie({},Us,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jy=It(Xy),Zy=Ie({},kl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),e0=It(Zy),t0=[9,13,27,32],Rc=Rn&&"CompositionEvent"in window,ci=null;Rn&&"documentMode"in document&&(ci=document.documentMode);var n0=Rn&&"TextEvent"in window&&!ci,Gp=Rn&&(!Rc||ci&&8<ci&&11>=ci),tf=" ",nf=!1;function Yp(e,t){switch(e){case"keyup":return t0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ns=!1;function r0(e,t){switch(e){case"compositionend":return qp(t);case"keypress":return t.which!==32?null:(nf=!0,tf);case"textInput":return e=t.data,e===tf&&nf?null:e;default:return null}}function s0(e,t){if(ns)return e==="compositionend"||!Rc&&Yp(e,t)?(e=Kp(),No=bc=Jn=null,ns=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gp&&t.locale!=="ko"?null:t.data;default:return null}}var i0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!i0[e.type]:t==="textarea"}function Xp(e,t,n,r){Mp(r),t=qo(t,"onChange"),0<t.length&&(n=new jc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var di=null,Ei=null;function o0(e){am(e,0)}function Cl(e){var t=is(e);if(Sp(t))return e}function l0(e,t){if(e==="change")return t}var Jp=!1;if(Rn){var ga;if(Rn){var va="oninput"in document;if(!va){var sf=document.createElement("div");sf.setAttribute("oninput","return;"),va=typeof sf.oninput=="function"}ga=va}else ga=!1;Jp=ga&&(!document.documentMode||9<document.documentMode)}function of(){di&&(di.detachEvent("onpropertychange",Zp),Ei=di=null)}function Zp(e){if(e.propertyName==="value"&&Cl(Ei)){var t=[];Xp(t,Ei,e,Sc(e)),Ip(o0,t)}}function a0(e,t,n){e==="focusin"?(of(),di=t,Ei=n,di.attachEvent("onpropertychange",Zp)):e==="focusout"&&of()}function u0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Cl(Ei)}function c0(e,t){if(e==="click")return Cl(t)}function d0(e,t){if(e==="input"||e==="change")return Cl(t)}function f0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zt=typeof Object.is=="function"?Object.is:f0;function Ni(e,t){if(Zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ha.call(t,s)||!Zt(e[s],t[s]))return!1}return!0}function lf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function af(e,t){var n=lf(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lf(n)}}function em(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?em(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function tm(){for(var e=window,t=Wo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wo(e.document)}return t}function Lc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function h0(e){var t=tm(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&em(n.ownerDocument.documentElement,n)){if(r!==null&&Lc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=af(n,i);var o=af(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var p0=Rn&&"documentMode"in document&&11>=document.documentMode,rs=null,uu=null,fi=null,cu=!1;function uf(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cu||rs==null||rs!==Wo(r)||(r=rs,"selectionStart"in r&&Lc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fi&&Ni(fi,r)||(fi=r,r=qo(uu,"onSelect"),0<r.length&&(t=new jc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rs)))}function ao(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ss={animationend:ao("Animation","AnimationEnd"),animationiteration:ao("Animation","AnimationIteration"),animationstart:ao("Animation","AnimationStart"),transitionend:ao("Transition","TransitionEnd")},ya={},nm={};Rn&&(nm=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function El(e){if(ya[e])return ya[e];if(!ss[e])return e;var t=ss[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in nm)return ya[e]=t[n];return e}var rm=El("animationend"),sm=El("animationiteration"),im=El("animationstart"),om=El("transitionend"),lm=new Map,cf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fr(e,t){lm.set(e,t),Kr(t,[e])}for(var xa=0;xa<cf.length;xa++){var wa=cf[xa],m0=wa.toLowerCase(),g0=wa[0].toUpperCase()+wa.slice(1);fr(m0,"on"+g0)}fr(rm,"onAnimationEnd");fr(sm,"onAnimationIteration");fr(im,"onAnimationStart");fr("dblclick","onDoubleClick");fr("focusin","onFocus");fr("focusout","onBlur");fr(om,"onTransitionEnd");_s("onMouseEnter",["mouseout","mouseover"]);_s("onMouseLeave",["mouseout","mouseover"]);_s("onPointerEnter",["pointerout","pointerover"]);_s("onPointerLeave",["pointerout","pointerover"]);Kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ii));function df(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,my(r,t,void 0,e),e.currentTarget=null}function am(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==i&&s.isPropagationStopped())break e;df(s,l,c),i=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==i&&s.isPropagationStopped())break e;df(s,l,c),i=a}}}if(Vo)throw e=iu,Vo=!1,iu=null,e}function ke(e,t){var n=t[mu];n===void 0&&(n=t[mu]=new Set);var r=e+"__bubble";n.has(r)||(um(t,e,2,!1),n.add(r))}function Sa(e,t,n){var r=0;t&&(r|=4),um(n,e,r,t)}var uo="_reactListening"+Math.random().toString(36).slice(2);function bi(e){if(!e[uo]){e[uo]=!0,gp.forEach(function(n){n!=="selectionchange"&&(v0.has(n)||Sa(n,!1,e),Sa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[uo]||(t[uo]=!0,Sa("selectionchange",!1,t))}}function um(e,t,n,r){switch(Qp(t)){case 1:var s=Ty;break;case 4:s=Iy;break;default:s=Nc}n=s.bind(null,t,n,e),s=void 0,!su||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ka(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Cr(l),o===null)return;if(a=o.tag,a===5||a===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Ip(function(){var c=i,p=Sc(n),d=[];e:{var v=lm.get(e);if(v!==void 0){var S=jc,k=e;switch(e){case"keypress":if(bo(n)===0)break e;case"keydown":case"keyup":S=Ky;break;case"focusin":k="focus",S=ma;break;case"focusout":k="blur",S=ma;break;case"beforeblur":case"afterblur":S=ma;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Oy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=qy;break;case rm:case sm:case im:S=zy;break;case om:S=Jy;break;case"scroll":S=_y;break;case"wheel":S=e0;break;case"copy":case"cut":case"paste":S=$y;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=ef}var E=(t&4)!==0,b=!E&&e==="scroll",y=E?v!==null?v+"Capture":null:v;E=[];for(var g=c,m;g!==null;){m=g;var h=m.stateNode;if(m.tag===5&&h!==null&&(m=h,y!==null&&(h=wi(g,y),h!=null&&E.push(ji(g,h,m)))),b)break;g=g.return}0<E.length&&(v=new S(v,k,null,n,p),d.push({event:v,listeners:E}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",v&&n!==nu&&(k=n.relatedTarget||n.fromElement)&&(Cr(k)||k[Ln]))break e;if((S||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,S?(k=n.relatedTarget||n.toElement,S=c,k=k?Cr(k):null,k!==null&&(b=Gr(k),k!==b||k.tag!==5&&k.tag!==6)&&(k=null)):(S=null,k=c),S!==k)){if(E=Jd,h="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(E=ef,h="onPointerLeave",y="onPointerEnter",g="pointer"),b=S==null?v:is(S),m=k==null?v:is(k),v=new E(h,g+"leave",S,n,p),v.target=b,v.relatedTarget=m,h=null,Cr(p)===c&&(E=new E(y,g+"enter",k,n,p),E.target=m,E.relatedTarget=b,h=E),b=h,S&&k)t:{for(E=S,y=k,g=0,m=E;m;m=qr(m))g++;for(m=0,h=y;h;h=qr(h))m++;for(;0<g-m;)E=qr(E),g--;for(;0<m-g;)y=qr(y),m--;for(;g--;){if(E===y||y!==null&&E===y.alternate)break t;E=qr(E),y=qr(y)}E=null}else E=null;S!==null&&ff(d,v,S,E,!1),k!==null&&b!==null&&ff(d,b,k,E,!0)}}e:{if(v=c?is(c):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var C=l0;else if(rf(v))if(Jp)C=d0;else{C=u0;var L=a0}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(C=c0);if(C&&(C=C(e,c))){Xp(d,C,n,p);break e}L&&L(e,v,c),e==="focusout"&&(L=v._wrapperState)&&L.controlled&&v.type==="number"&&Xa(v,"number",v.value)}switch(L=c?is(c):window,e){case"focusin":(rf(L)||L.contentEditable==="true")&&(rs=L,uu=c,fi=null);break;case"focusout":fi=uu=rs=null;break;case"mousedown":cu=!0;break;case"contextmenu":case"mouseup":case"dragend":cu=!1,uf(d,n,p);break;case"selectionchange":if(p0)break;case"keydown":case"keyup":uf(d,n,p)}var T;if(Rc)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else ns?Yp(e,n)&&(M="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(Gp&&n.locale!=="ko"&&(ns||M!=="onCompositionStart"?M==="onCompositionEnd"&&ns&&(T=Kp()):(Jn=p,bc="value"in Jn?Jn.value:Jn.textContent,ns=!0)),L=qo(c,M),0<L.length&&(M=new Zd(M,e,null,n,p),d.push({event:M,listeners:L}),T?M.data=T:(T=qp(n),T!==null&&(M.data=T)))),(T=n0?r0(e,n):s0(e,n))&&(c=qo(c,"onBeforeInput"),0<c.length&&(p=new Zd("onBeforeInput","beforeinput",null,n,p),d.push({event:p,listeners:c}),p.data=T))}am(d,t)})}function ji(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=wi(e,n),i!=null&&r.unshift(ji(e,i,s)),i=wi(e,t),i!=null&&r.push(ji(e,i,s))),e=e.return}return r}function qr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ff(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,s?(a=wi(n,i),a!=null&&o.unshift(ji(n,a,l))):s||(a=wi(n,i),a!=null&&o.push(ji(n,a,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var y0=/\r\n?/g,x0=/\u0000|\uFFFD/g;function hf(e){return(typeof e=="string"?e:""+e).replace(y0,`
`).replace(x0,"")}function co(e,t,n){if(t=hf(t),hf(e)!==t&&n)throw Error(F(425))}function Xo(){}var du=null,fu=null;function hu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pu=typeof setTimeout=="function"?setTimeout:void 0,w0=typeof clearTimeout=="function"?clearTimeout:void 0,pf=typeof Promise=="function"?Promise:void 0,S0=typeof queueMicrotask=="function"?queueMicrotask:typeof pf<"u"?function(e){return pf.resolve(null).then(e).catch(k0)}:pu;function k0(e){setTimeout(function(){throw e})}function Ca(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ci(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ci(t)}function rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function mf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Bs=Math.random().toString(36).slice(2),un="__reactFiber$"+Bs,Mi="__reactProps$"+Bs,Ln="__reactContainer$"+Bs,mu="__reactEvents$"+Bs,C0="__reactListeners$"+Bs,E0="__reactHandles$"+Bs;function Cr(e){var t=e[un];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ln]||n[un]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=mf(e);e!==null;){if(n=e[un])return n;e=mf(e)}return t}e=n,n=e.parentNode}return null}function Ki(e){return e=e[un]||e[Ln],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function is(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(F(33))}function Nl(e){return e[Mi]||null}var gu=[],os=-1;function hr(e){return{current:e}}function Ce(e){0>os||(e.current=gu[os],gu[os]=null,os--)}function Se(e,t){os++,gu[os]=e.current,e.current=t}var dr={},it=hr(dr),St=hr(!1),$r=dr;function Ps(e,t){var n=e.type.contextTypes;if(!n)return dr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function kt(e){return e=e.childContextTypes,e!=null}function Jo(){Ce(St),Ce(it)}function gf(e,t,n){if(it.current!==dr)throw Error(F(168));Se(it,t),Se(St,n)}function cm(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(F(108,ay(e)||"Unknown",s));return Ie({},n,r)}function Zo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dr,$r=it.current,Se(it,e),Se(St,St.current),!0}function vf(e,t,n){var r=e.stateNode;if(!r)throw Error(F(169));n?(e=cm(e,t,$r),r.__reactInternalMemoizedMergedChildContext=e,Ce(St),Ce(it),Se(it,e)):Ce(St),Se(St,n)}var xn=null,bl=!1,Ea=!1;function dm(e){xn===null?xn=[e]:xn.push(e)}function N0(e){bl=!0,dm(e)}function pr(){if(!Ea&&xn!==null){Ea=!0;var e=0,t=xe;try{var n=xn;for(xe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}xn=null,bl=!1}catch(s){throw xn!==null&&(xn=xn.slice(e+1)),Fp(kc,pr),s}finally{xe=t,Ea=!1}}return null}var ls=[],as=0,el=null,tl=0,Ot=[],Ft=0,Ur=null,En=1,Nn="";function Sr(e,t){ls[as++]=tl,ls[as++]=el,el=e,tl=t}function fm(e,t,n){Ot[Ft++]=En,Ot[Ft++]=Nn,Ot[Ft++]=Ur,Ur=e;var r=En;e=Nn;var s=32-Xt(r)-1;r&=~(1<<s),n+=1;var i=32-Xt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,En=1<<32-Xt(t)+s|n<<s|r,Nn=i+e}else En=1<<i|n<<s|r,Nn=e}function Tc(e){e.return!==null&&(Sr(e,1),fm(e,1,0))}function Ic(e){for(;e===el;)el=ls[--as],ls[as]=null,tl=ls[--as],ls[as]=null;for(;e===Ur;)Ur=Ot[--Ft],Ot[Ft]=null,Nn=Ot[--Ft],Ot[Ft]=null,En=Ot[--Ft],Ot[Ft]=null}var Rt=null,Mt=null,Ne=!1,qt=null;function hm(e,t){var n=zt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function yf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rt=e,Mt=rr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rt=e,Mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ur!==null?{id:En,overflow:Nn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=zt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Rt=e,Mt=null,!0):!1;default:return!1}}function vu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function yu(e){if(Ne){var t=Mt;if(t){var n=t;if(!yf(e,t)){if(vu(e))throw Error(F(418));t=rr(n.nextSibling);var r=Rt;t&&yf(e,t)?hm(r,n):(e.flags=e.flags&-4097|2,Ne=!1,Rt=e)}}else{if(vu(e))throw Error(F(418));e.flags=e.flags&-4097|2,Ne=!1,Rt=e}}}function xf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rt=e}function fo(e){if(e!==Rt)return!1;if(!Ne)return xf(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!hu(e.type,e.memoizedProps)),t&&(t=Mt)){if(vu(e))throw pm(),Error(F(418));for(;t;)hm(e,t),t=rr(t.nextSibling)}if(xf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(F(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Mt=rr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Mt=null}}else Mt=Rt?rr(e.stateNode.nextSibling):null;return!0}function pm(){for(var e=Mt;e;)e=rr(e.nextSibling)}function Os(){Mt=Rt=null,Ne=!1}function _c(e){qt===null?qt=[e]:qt.push(e)}var b0=_n.ReactCurrentBatchConfig;function Xs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,e))}return e}function ho(e,t){throw e=Object.prototype.toString.call(t),Error(F(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wf(e){var t=e._init;return t(e._payload)}function mm(e){function t(y,g){if(e){var m=y.deletions;m===null?(y.deletions=[g],y.flags|=16):m.push(g)}}function n(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function s(y,g){return y=lr(y,g),y.index=0,y.sibling=null,y}function i(y,g,m){return y.index=m,e?(m=y.alternate,m!==null?(m=m.index,m<g?(y.flags|=2,g):m):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,g,m,h){return g===null||g.tag!==6?(g=Ta(m,y.mode,h),g.return=y,g):(g=s(g,m),g.return=y,g)}function a(y,g,m,h){var C=m.type;return C===ts?p(y,g,m.props.children,h,m.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===An&&wf(C)===g.type)?(h=s(g,m.props),h.ref=Xs(y,g,m),h.return=y,h):(h=_o(m.type,m.key,m.props,null,y.mode,h),h.ref=Xs(y,g,m),h.return=y,h)}function c(y,g,m,h){return g===null||g.tag!==4||g.stateNode.containerInfo!==m.containerInfo||g.stateNode.implementation!==m.implementation?(g=Ia(m,y.mode,h),g.return=y,g):(g=s(g,m.children||[]),g.return=y,g)}function p(y,g,m,h,C){return g===null||g.tag!==7?(g=Ar(m,y.mode,h,C),g.return=y,g):(g=s(g,m),g.return=y,g)}function d(y,g,m){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Ta(""+g,y.mode,m),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case to:return m=_o(g.type,g.key,g.props,null,y.mode,m),m.ref=Xs(y,null,g),m.return=y,m;case es:return g=Ia(g,y.mode,m),g.return=y,g;case An:var h=g._init;return d(y,h(g._payload),m)}if(ri(g)||Qs(g))return g=Ar(g,y.mode,m,null),g.return=y,g;ho(y,g)}return null}function v(y,g,m,h){var C=g!==null?g.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return C!==null?null:l(y,g,""+m,h);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case to:return m.key===C?a(y,g,m,h):null;case es:return m.key===C?c(y,g,m,h):null;case An:return C=m._init,v(y,g,C(m._payload),h)}if(ri(m)||Qs(m))return C!==null?null:p(y,g,m,h,null);ho(y,m)}return null}function S(y,g,m,h,C){if(typeof h=="string"&&h!==""||typeof h=="number")return y=y.get(m)||null,l(g,y,""+h,C);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case to:return y=y.get(h.key===null?m:h.key)||null,a(g,y,h,C);case es:return y=y.get(h.key===null?m:h.key)||null,c(g,y,h,C);case An:var L=h._init;return S(y,g,m,L(h._payload),C)}if(ri(h)||Qs(h))return y=y.get(m)||null,p(g,y,h,C,null);ho(g,h)}return null}function k(y,g,m,h){for(var C=null,L=null,T=g,M=g=0,I=null;T!==null&&M<m.length;M++){T.index>M?(I=T,T=null):I=T.sibling;var N=v(y,T,m[M],h);if(N===null){T===null&&(T=I);break}e&&T&&N.alternate===null&&t(y,T),g=i(N,g,M),L===null?C=N:L.sibling=N,L=N,T=I}if(M===m.length)return n(y,T),Ne&&Sr(y,M),C;if(T===null){for(;M<m.length;M++)T=d(y,m[M],h),T!==null&&(g=i(T,g,M),L===null?C=T:L.sibling=T,L=T);return Ne&&Sr(y,M),C}for(T=r(y,T);M<m.length;M++)I=S(T,y,M,m[M],h),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?M:I.key),g=i(I,g,M),L===null?C=I:L.sibling=I,L=I);return e&&T.forEach(function(D){return t(y,D)}),Ne&&Sr(y,M),C}function E(y,g,m,h){var C=Qs(m);if(typeof C!="function")throw Error(F(150));if(m=C.call(m),m==null)throw Error(F(151));for(var L=C=null,T=g,M=g=0,I=null,N=m.next();T!==null&&!N.done;M++,N=m.next()){T.index>M?(I=T,T=null):I=T.sibling;var D=v(y,T,N.value,h);if(D===null){T===null&&(T=I);break}e&&T&&D.alternate===null&&t(y,T),g=i(D,g,M),L===null?C=D:L.sibling=D,L=D,T=I}if(N.done)return n(y,T),Ne&&Sr(y,M),C;if(T===null){for(;!N.done;M++,N=m.next())N=d(y,N.value,h),N!==null&&(g=i(N,g,M),L===null?C=N:L.sibling=N,L=N);return Ne&&Sr(y,M),C}for(T=r(y,T);!N.done;M++,N=m.next())N=S(T,y,M,N.value,h),N!==null&&(e&&N.alternate!==null&&T.delete(N.key===null?M:N.key),g=i(N,g,M),L===null?C=N:L.sibling=N,L=N);return e&&T.forEach(function(J){return t(y,J)}),Ne&&Sr(y,M),C}function b(y,g,m,h){if(typeof m=="object"&&m!==null&&m.type===ts&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case to:e:{for(var C=m.key,L=g;L!==null;){if(L.key===C){if(C=m.type,C===ts){if(L.tag===7){n(y,L.sibling),g=s(L,m.props.children),g.return=y,y=g;break e}}else if(L.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===An&&wf(C)===L.type){n(y,L.sibling),g=s(L,m.props),g.ref=Xs(y,L,m),g.return=y,y=g;break e}n(y,L);break}else t(y,L);L=L.sibling}m.type===ts?(g=Ar(m.props.children,y.mode,h,m.key),g.return=y,y=g):(h=_o(m.type,m.key,m.props,null,y.mode,h),h.ref=Xs(y,g,m),h.return=y,y=h)}return o(y);case es:e:{for(L=m.key;g!==null;){if(g.key===L)if(g.tag===4&&g.stateNode.containerInfo===m.containerInfo&&g.stateNode.implementation===m.implementation){n(y,g.sibling),g=s(g,m.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else t(y,g);g=g.sibling}g=Ia(m,y.mode,h),g.return=y,y=g}return o(y);case An:return L=m._init,b(y,g,L(m._payload),h)}if(ri(m))return k(y,g,m,h);if(Qs(m))return E(y,g,m,h);ho(y,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,g!==null&&g.tag===6?(n(y,g.sibling),g=s(g,m),g.return=y,y=g):(n(y,g),g=Ta(m,y.mode,h),g.return=y,y=g),o(y)):n(y,g)}return b}var Fs=mm(!0),gm=mm(!1),nl=hr(null),rl=null,us=null,Pc=null;function Oc(){Pc=us=rl=null}function Fc(e){var t=nl.current;Ce(nl),e._currentValue=t}function xu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function gs(e,t){rl=e,Pc=us=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wt=!0),e.firstContext=null)}function $t(e){var t=e._currentValue;if(Pc!==e)if(e={context:e,memoizedValue:t,next:null},us===null){if(rl===null)throw Error(F(308));us=e,rl.dependencies={lanes:0,firstContext:e}}else us=us.next=e;return t}var Er=null;function Dc(e){Er===null?Er=[e]:Er.push(e)}function vm(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Dc(t)):(n.next=s.next,s.next=n),t.interleaved=n,Tn(e,r)}function Tn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var $n=!1;function zc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ym(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Tn(e,n)}return s=r.interleaved,s===null?(t.next=t,Dc(r)):(t.next=s.next,s.next=t),r.interleaved=t,Tn(e,n)}function jo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cc(e,n)}}function Sf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sl(e,t,n,r){var s=e.updateQueue;$n=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?i=c:o.next=c,o=a;var p=e.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=c:l.next=c,p.lastBaseUpdate=a))}if(i!==null){var d=s.baseState;o=0,p=c=a=null,l=i;do{var v=l.lane,S=l.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=e,E=l;switch(v=t,S=n,E.tag){case 1:if(k=E.payload,typeof k=="function"){d=k.call(S,d,v);break e}d=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=E.payload,v=typeof k=="function"?k.call(S,d,v):k,v==null)break e;d=Ie({},d,v);break e;case 2:$n=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else S={eventTime:S,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(c=p=S,a=d):p=p.next=S,o|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(p===null&&(a=d),s.baseState=a,s.firstBaseUpdate=c,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Wr|=o,e.lanes=o,e.memoizedState=d}}function kf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var Gi={},dn=hr(Gi),Ri=hr(Gi),Li=hr(Gi);function Nr(e){if(e===Gi)throw Error(F(174));return e}function Ac(e,t){switch(Se(Li,t),Se(Ri,e),Se(dn,Gi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Za(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Za(t,e)}Ce(dn),Se(dn,t)}function Ds(){Ce(dn),Ce(Ri),Ce(Li)}function xm(e){Nr(Li.current);var t=Nr(dn.current),n=Za(t,e.type);t!==n&&(Se(Ri,e),Se(dn,n))}function $c(e){Ri.current===e&&(Ce(dn),Ce(Ri))}var Le=hr(0);function il(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Na=[];function Uc(){for(var e=0;e<Na.length;e++)Na[e]._workInProgressVersionPrimary=null;Na.length=0}var Mo=_n.ReactCurrentDispatcher,ba=_n.ReactCurrentBatchConfig,Br=0,Te=null,He=null,Ye=null,ol=!1,hi=!1,Ti=0,j0=0;function nt(){throw Error(F(321))}function Bc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zt(e[n],t[n]))return!1;return!0}function Wc(e,t,n,r,s,i){if(Br=i,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Mo.current=e===null||e.memoizedState===null?T0:I0,e=n(r,s),hi){i=0;do{if(hi=!1,Ti=0,25<=i)throw Error(F(301));i+=1,Ye=He=null,t.updateQueue=null,Mo.current=_0,e=n(r,s)}while(hi)}if(Mo.current=ll,t=He!==null&&He.next!==null,Br=0,Ye=He=Te=null,ol=!1,t)throw Error(F(300));return e}function Hc(){var e=Ti!==0;return Ti=0,e}function rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Te.memoizedState=Ye=e:Ye=Ye.next=e,Ye}function Ut(){if(He===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=Ye===null?Te.memoizedState:Ye.next;if(t!==null)Ye=t,He=e;else{if(e===null)throw Error(F(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ye===null?Te.memoizedState=Ye=e:Ye=Ye.next=e}return Ye}function Ii(e,t){return typeof t=="function"?t(e):t}function ja(e){var t=Ut(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var r=He,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,a=null,c=i;do{var p=c.lane;if((Br&p)===p)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:p,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,Te.lanes|=p,Wr|=p}c=c.next}while(c!==null&&c!==i);a===null?o=r:a.next=l,Zt(r,t.memoizedState)||(wt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Te.lanes|=i,Wr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ma(e){var t=Ut(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Zt(i,t.memoizedState)||(wt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function wm(){}function Sm(e,t){var n=Te,r=Ut(),s=t(),i=!Zt(r.memoizedState,s);if(i&&(r.memoizedState=s,wt=!0),r=r.queue,Vc(Em.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,_i(9,Cm.bind(null,n,r,s,t),void 0,null),qe===null)throw Error(F(349));Br&30||km(n,t,s)}return s}function km(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Cm(e,t,n,r){t.value=n,t.getSnapshot=r,Nm(t)&&bm(e)}function Em(e,t,n){return n(function(){Nm(t)&&bm(e)})}function Nm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zt(e,n)}catch{return!0}}function bm(e){var t=Tn(e,1);t!==null&&Jt(t,e,1,-1)}function Cf(e){var t=rn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:e},t.queue=e,e=e.dispatch=L0.bind(null,Te,e),[t.memoizedState,e]}function _i(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function jm(){return Ut().memoizedState}function Ro(e,t,n,r){var s=rn();Te.flags|=e,s.memoizedState=_i(1|t,n,void 0,r===void 0?null:r)}function jl(e,t,n,r){var s=Ut();r=r===void 0?null:r;var i=void 0;if(He!==null){var o=He.memoizedState;if(i=o.destroy,r!==null&&Bc(r,o.deps)){s.memoizedState=_i(t,n,i,r);return}}Te.flags|=e,s.memoizedState=_i(1|t,n,i,r)}function Ef(e,t){return Ro(8390656,8,e,t)}function Vc(e,t){return jl(2048,8,e,t)}function Mm(e,t){return jl(4,2,e,t)}function Rm(e,t){return jl(4,4,e,t)}function Lm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Tm(e,t,n){return n=n!=null?n.concat([e]):null,jl(4,4,Lm.bind(null,t,e),n)}function Qc(){}function Im(e,t){var n=Ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Bc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _m(e,t){var n=Ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Bc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Pm(e,t,n){return Br&21?(Zt(n,t)||(n=Ap(),Te.lanes|=n,Wr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wt=!0),e.memoizedState=n)}function M0(e,t){var n=xe;xe=n!==0&&4>n?n:4,e(!0);var r=ba.transition;ba.transition={};try{e(!1),t()}finally{xe=n,ba.transition=r}}function Om(){return Ut().memoizedState}function R0(e,t,n){var r=or(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fm(e))Dm(t,n);else if(n=vm(e,t,n,r),n!==null){var s=pt();Jt(n,e,r,s),zm(n,t,r)}}function L0(e,t,n){var r=or(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fm(e))Dm(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Zt(l,o)){var a=t.interleaved;a===null?(s.next=s,Dc(t)):(s.next=a.next,a.next=s),t.interleaved=s;return}}catch{}finally{}n=vm(e,t,s,r),n!==null&&(s=pt(),Jt(n,e,r,s),zm(n,t,r))}}function Fm(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function Dm(e,t){hi=ol=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function zm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cc(e,n)}}var ll={readContext:$t,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},T0={readContext:$t,useCallback:function(e,t){return rn().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:Ef,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ro(4194308,4,Lm.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ro(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ro(4,2,e,t)},useMemo:function(e,t){var n=rn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=rn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=R0.bind(null,Te,e),[r.memoizedState,e]},useRef:function(e){var t=rn();return e={current:e},t.memoizedState=e},useState:Cf,useDebugValue:Qc,useDeferredValue:function(e){return rn().memoizedState=e},useTransition:function(){var e=Cf(!1),t=e[0];return e=M0.bind(null,e[1]),rn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Te,s=rn();if(Ne){if(n===void 0)throw Error(F(407));n=n()}else{if(n=t(),qe===null)throw Error(F(349));Br&30||km(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Ef(Em.bind(null,r,i,e),[e]),r.flags|=2048,_i(9,Cm.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=rn(),t=qe.identifierPrefix;if(Ne){var n=Nn,r=En;n=(r&~(1<<32-Xt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ti++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=j0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},I0={readContext:$t,useCallback:Im,useContext:$t,useEffect:Vc,useImperativeHandle:Tm,useInsertionEffect:Mm,useLayoutEffect:Rm,useMemo:_m,useReducer:ja,useRef:jm,useState:function(){return ja(Ii)},useDebugValue:Qc,useDeferredValue:function(e){var t=Ut();return Pm(t,He.memoizedState,e)},useTransition:function(){var e=ja(Ii)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:wm,useSyncExternalStore:Sm,useId:Om,unstable_isNewReconciler:!1},_0={readContext:$t,useCallback:Im,useContext:$t,useEffect:Vc,useImperativeHandle:Tm,useInsertionEffect:Mm,useLayoutEffect:Rm,useMemo:_m,useReducer:Ma,useRef:jm,useState:function(){return Ma(Ii)},useDebugValue:Qc,useDeferredValue:function(e){var t=Ut();return He===null?t.memoizedState=e:Pm(t,He.memoizedState,e)},useTransition:function(){var e=Ma(Ii)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:wm,useSyncExternalStore:Sm,useId:Om,unstable_isNewReconciler:!1};function Vt(e,t){if(e&&e.defaultProps){t=Ie({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function wu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ie({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ml={isMounted:function(e){return(e=e._reactInternals)?Gr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=pt(),s=or(e),i=bn(r,s);i.payload=t,n!=null&&(i.callback=n),t=sr(e,i,s),t!==null&&(Jt(t,e,s,r),jo(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=pt(),s=or(e),i=bn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=sr(e,i,s),t!==null&&(Jt(t,e,s,r),jo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=pt(),r=or(e),s=bn(n,r);s.tag=2,t!=null&&(s.callback=t),t=sr(e,s,r),t!==null&&(Jt(t,e,r,n),jo(t,e,r))}};function Nf(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ni(n,r)||!Ni(s,i):!0}function Am(e,t,n){var r=!1,s=dr,i=t.contextType;return typeof i=="object"&&i!==null?i=$t(i):(s=kt(t)?$r:it.current,r=t.contextTypes,i=(r=r!=null)?Ps(e,s):dr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ml,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function bf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ml.enqueueReplaceState(t,t.state,null)}function Su(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},zc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=$t(i):(i=kt(t)?$r:it.current,s.context=Ps(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(wu(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ml.enqueueReplaceState(s,s.state,null),sl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function zs(e,t){try{var n="",r=t;do n+=ly(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Ra(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ku(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var P0=typeof WeakMap=="function"?WeakMap:Map;function $m(e,t,n){n=bn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ul||(ul=!0,Iu=r),ku(e,t)},n}function Um(e,t,n){n=bn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ku(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ku(e,t),typeof r!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function jf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new P0;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=G0.bind(null,e,t,n),t.then(e,e))}function Mf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Rf(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bn(-1,1),t.tag=2,sr(n,t,1))),n.lanes|=1),e)}var O0=_n.ReactCurrentOwner,wt=!1;function ft(e,t,n,r){t.child=e===null?gm(t,null,n,r):Fs(t,e.child,n,r)}function Lf(e,t,n,r,s){n=n.render;var i=t.ref;return gs(t,s),r=Wc(e,t,n,r,i,s),n=Hc(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,In(e,t,s)):(Ne&&n&&Tc(t),t.flags|=1,ft(e,t,r,s),t.child)}function Tf(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!ed(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Bm(e,t,i,r,s)):(e=_o(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ni,n(o,r)&&e.ref===t.ref)return In(e,t,s)}return t.flags|=1,e=lr(i,r),e.ref=t.ref,e.return=t,t.child=e}function Bm(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ni(i,r)&&e.ref===t.ref)if(wt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(wt=!0);else return t.lanes=e.lanes,In(e,t,s)}return Cu(e,t,n,r,s)}function Wm(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(ds,jt),jt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Se(ds,jt),jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Se(ds,jt),jt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Se(ds,jt),jt|=r;return ft(e,t,s,n),t.child}function Hm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cu(e,t,n,r,s){var i=kt(n)?$r:it.current;return i=Ps(t,i),gs(t,s),n=Wc(e,t,n,r,i,s),r=Hc(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,In(e,t,s)):(Ne&&r&&Tc(t),t.flags|=1,ft(e,t,n,s),t.child)}function If(e,t,n,r,s){if(kt(n)){var i=!0;Zo(t)}else i=!1;if(gs(t,s),t.stateNode===null)Lo(e,t),Am(t,n,r),Su(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=$t(c):(c=kt(n)?$r:it.current,c=Ps(t,c));var p=n.getDerivedStateFromProps,d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&bf(t,o,r,c),$n=!1;var v=t.memoizedState;o.state=v,sl(t,r,o,s),a=t.memoizedState,l!==r||v!==a||St.current||$n?(typeof p=="function"&&(wu(t,n,p,r),a=t.memoizedState),(l=$n||Nf(t,n,l,r,v,a,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ym(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Vt(t.type,l),o.props=c,d=t.pendingProps,v=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=$t(a):(a=kt(n)?$r:it.current,a=Ps(t,a));var S=n.getDerivedStateFromProps;(p=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||v!==a)&&bf(t,o,r,a),$n=!1,v=t.memoizedState,o.state=v,sl(t,r,o,s);var k=t.memoizedState;l!==d||v!==k||St.current||$n?(typeof S=="function"&&(wu(t,n,S,r),k=t.memoizedState),(c=$n||Nf(t,n,c,r,v,k,a)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),o.props=r,o.state=k,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return Eu(e,t,n,r,i,s)}function Eu(e,t,n,r,s,i){Hm(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&vf(t,n,!1),In(e,t,i);r=t.stateNode,O0.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Fs(t,e.child,null,i),t.child=Fs(t,null,l,i)):ft(e,t,l,i),t.memoizedState=r.state,s&&vf(t,n,!0),t.child}function Vm(e){var t=e.stateNode;t.pendingContext?gf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gf(e,t.context,!1),Ac(e,t.containerInfo)}function _f(e,t,n,r,s){return Os(),_c(s),t.flags|=256,ft(e,t,n,r),t.child}var Nu={dehydrated:null,treeContext:null,retryLane:0};function bu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qm(e,t,n){var r=t.pendingProps,s=Le.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Se(Le,s&1),e===null)return yu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Tl(o,r,0,null),e=Ar(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=bu(n),t.memoizedState=Nu,e):Kc(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return F0(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=lr(s,a),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=lr(l,i):(i=Ar(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?bu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Nu,r}return i=e.child,e=i.sibling,r=lr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Kc(e,t){return t=Tl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function po(e,t,n,r){return r!==null&&_c(r),Fs(t,e.child,null,n),e=Kc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function F0(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Ra(Error(F(422))),po(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Tl({mode:"visible",children:r.children},s,0,null),i=Ar(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Fs(t,e.child,null,o),t.child.memoizedState=bu(o),t.memoizedState=Nu,i);if(!(t.mode&1))return po(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=Ra(i,r,void 0),po(e,t,o,r)}if(l=(o&e.childLanes)!==0,wt||l){if(r=qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tn(e,s),Jt(r,e,s,-1))}return Zc(),r=Ra(Error(F(421))),po(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Y0.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Mt=rr(s.nextSibling),Rt=t,Ne=!0,qt=null,e!==null&&(Ot[Ft++]=En,Ot[Ft++]=Nn,Ot[Ft++]=Ur,En=e.id,Nn=e.overflow,Ur=t),t=Kc(t,r.children),t.flags|=4096,t)}function Pf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),xu(e.return,t,n)}function La(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Km(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(ft(e,t,r.children,n),r=Le.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pf(e,n,t);else if(e.tag===19)Pf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Se(Le,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&il(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),La(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&il(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}La(t,!0,n,null,i);break;case"together":La(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Lo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function In(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Wr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(F(153));if(t.child!==null){for(e=t.child,n=lr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=lr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function D0(e,t,n){switch(t.tag){case 3:Vm(t),Os();break;case 5:xm(t);break;case 1:kt(t.type)&&Zo(t);break;case 4:Ac(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Se(nl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Se(Le,Le.current&1),t.flags|=128,null):n&t.child.childLanes?Qm(e,t,n):(Se(Le,Le.current&1),e=In(e,t,n),e!==null?e.sibling:null);Se(Le,Le.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Km(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Se(Le,Le.current),r)break;return null;case 22:case 23:return t.lanes=0,Wm(e,t,n)}return In(e,t,n)}var Gm,ju,Ym,qm;Gm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ju=function(){};Ym=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Nr(dn.current);var i=null;switch(n){case"input":s=Ya(e,s),r=Ya(e,r),i=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),i=[];break;case"textarea":s=Ja(e,s),r=Ja(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Xo)}eu(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(yi.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var a=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(i||(i=[]),i.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(yi.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&ke("scroll",e),i||l===a||(i=[])):(i=i||[]).push(c,a))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};qm=function(e,t,n,r){n!==r&&(t.flags|=4)};function Js(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function z0(e,t,n){var r=t.pendingProps;switch(Ic(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(t),null;case 1:return kt(t.type)&&Jo(),rt(t),null;case 3:return r=t.stateNode,Ds(),Ce(St),Ce(it),Uc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(fo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qt!==null&&(Ou(qt),qt=null))),ju(e,t),rt(t),null;case 5:$c(t);var s=Nr(Li.current);if(n=t.type,e!==null&&t.stateNode!=null)Ym(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(F(166));return rt(t),null}if(e=Nr(dn.current),fo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[un]=t,r[Mi]=i,e=(t.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<ii.length;s++)ke(ii[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":Bd(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":Hd(r,i),ke("invalid",r)}eu(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&co(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&co(r.textContent,l,e),s=["children",""+l]):yi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":no(r),Wd(r,i,!0);break;case"textarea":no(r),Vd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Xo)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ep(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[un]=t,e[Mi]=r,Gm(e,t,!1,!1),t.stateNode=e;e:{switch(o=tu(n,r),n){case"dialog":ke("cancel",e),ke("close",e),s=r;break;case"iframe":case"object":case"embed":ke("load",e),s=r;break;case"video":case"audio":for(s=0;s<ii.length;s++)ke(ii[s],e);s=r;break;case"source":ke("error",e),s=r;break;case"img":case"image":case"link":ke("error",e),ke("load",e),s=r;break;case"details":ke("toggle",e),s=r;break;case"input":Bd(e,r),s=Ya(e,r),ke("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),ke("invalid",e);break;case"textarea":Hd(e,r),s=Ja(e,r),ke("invalid",e);break;default:s=r}eu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?jp(e,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Np(e,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&xi(e,a):typeof a=="number"&&xi(e,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(yi.hasOwnProperty(i)?a!=null&&i==="onScroll"&&ke("scroll",e):a!=null&&vc(e,i,a,o))}switch(n){case"input":no(e),Wd(e,r,!1);break;case"textarea":no(e),Vd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+cr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?fs(e,!!r.multiple,i,!1):r.defaultValue!=null&&fs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Xo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return rt(t),null;case 6:if(e&&t.stateNode!=null)qm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(F(166));if(n=Nr(Li.current),Nr(dn.current),fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[un]=t,(i=r.nodeValue!==n)&&(e=Rt,e!==null))switch(e.tag){case 3:co(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&co(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=t,t.stateNode=r}return rt(t),null;case 13:if(Ce(Le),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&Mt!==null&&t.mode&1&&!(t.flags&128))pm(),Os(),t.flags|=98560,i=!1;else if(i=fo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(F(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[un]=t}else Os(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;rt(t),i=!1}else qt!==null&&(Ou(qt),qt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?Qe===0&&(Qe=3):Zc())),t.updateQueue!==null&&(t.flags|=4),rt(t),null);case 4:return Ds(),ju(e,t),e===null&&bi(t.stateNode.containerInfo),rt(t),null;case 10:return Fc(t.type._context),rt(t),null;case 17:return kt(t.type)&&Jo(),rt(t),null;case 19:if(Ce(Le),i=t.memoizedState,i===null)return rt(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Js(i,!1);else{if(Qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=il(e),o!==null){for(t.flags|=128,Js(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Se(Le,Le.current&1|2),t.child}e=e.sibling}i.tail!==null&&$e()>As&&(t.flags|=128,r=!0,Js(i,!1),t.lanes=4194304)}else{if(!r)if(e=il(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Js(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ne)return rt(t),null}else 2*$e()-i.renderingStartTime>As&&n!==1073741824&&(t.flags|=128,r=!0,Js(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=$e(),t.sibling=null,n=Le.current,Se(Le,r?n&1|2:n&1),t):(rt(t),null);case 22:case 23:return Jc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?jt&1073741824&&(rt(t),t.subtreeFlags&6&&(t.flags|=8192)):rt(t),null;case 24:return null;case 25:return null}throw Error(F(156,t.tag))}function A0(e,t){switch(Ic(t),t.tag){case 1:return kt(t.type)&&Jo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ds(),Ce(St),Ce(it),Uc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $c(t),null;case 13:if(Ce(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(F(340));Os()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(Le),null;case 4:return Ds(),null;case 10:return Fc(t.type._context),null;case 22:case 23:return Jc(),null;case 24:return null;default:return null}}var mo=!1,st=!1,$0=typeof WeakSet=="function"?WeakSet:Set,Y=null;function cs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(e,t,r)}else n.current=null}function Mu(e,t,n){try{n()}catch(r){Fe(e,t,r)}}var Of=!1;function U0(e,t){if(du=Go,e=tm(),Lc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,p=0,d=e,v=null;t:for(;;){for(var S;d!==n||s!==0&&d.nodeType!==3||(l=o+s),d!==i||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(S=d.firstChild)!==null;)v=d,d=S;for(;;){if(d===e)break t;if(v===n&&++c===s&&(l=o),v===i&&++p===r&&(a=o),(S=d.nextSibling)!==null)break;d=v,v=d.parentNode}d=S}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(fu={focusedElem:e,selectionRange:n},Go=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var E=k.memoizedProps,b=k.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?E:Vt(t.type,E),b);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(h){Fe(t,t.return,h)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return k=Of,Of=!1,k}function pi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Mu(t,n,i)}s=s.next}while(s!==r)}}function Rl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ru(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Xm(e){var t=e.alternate;t!==null&&(e.alternate=null,Xm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[un],delete t[Mi],delete t[mu],delete t[C0],delete t[E0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jm(e){return e.tag===5||e.tag===3||e.tag===4}function Ff(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Xo));else if(r!==4&&(e=e.child,e!==null))for(Lu(e,t,n),e=e.sibling;e!==null;)Lu(e,t,n),e=e.sibling}function Tu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Tu(e,t,n),e=e.sibling;e!==null;)Tu(e,t,n),e=e.sibling}var Je=null,Yt=!1;function Fn(e,t,n){for(n=n.child;n!==null;)Zm(e,t,n),n=n.sibling}function Zm(e,t,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Sl,n)}catch{}switch(n.tag){case 5:st||cs(n,t);case 6:var r=Je,s=Yt;Je=null,Fn(e,t,n),Je=r,Yt=s,Je!==null&&(Yt?(e=Je,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(Yt?(e=Je,n=n.stateNode,e.nodeType===8?Ca(e.parentNode,n):e.nodeType===1&&Ca(e,n),Ci(e)):Ca(Je,n.stateNode));break;case 4:r=Je,s=Yt,Je=n.stateNode.containerInfo,Yt=!0,Fn(e,t,n),Je=r,Yt=s;break;case 0:case 11:case 14:case 15:if(!st&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Mu(n,t,o),s=s.next}while(s!==r)}Fn(e,t,n);break;case 1:if(!st&&(cs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Fe(n,t,l)}Fn(e,t,n);break;case 21:Fn(e,t,n);break;case 22:n.mode&1?(st=(r=st)||n.memoizedState!==null,Fn(e,t,n),st=r):Fn(e,t,n);break;default:Fn(e,t,n)}}function Df(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new $0),t.forEach(function(r){var s=q0.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Wt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Je=l.stateNode,Yt=!1;break e;case 3:Je=l.stateNode.containerInfo,Yt=!0;break e;case 4:Je=l.stateNode.containerInfo,Yt=!0;break e}l=l.return}if(Je===null)throw Error(F(160));Zm(i,o,s),Je=null,Yt=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(c){Fe(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eg(t,e),t=t.sibling}function eg(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Wt(t,e),nn(e),r&4){try{pi(3,e,e.return),Rl(3,e)}catch(E){Fe(e,e.return,E)}try{pi(5,e,e.return)}catch(E){Fe(e,e.return,E)}}break;case 1:Wt(t,e),nn(e),r&512&&n!==null&&cs(n,n.return);break;case 5:if(Wt(t,e),nn(e),r&512&&n!==null&&cs(n,n.return),e.flags&32){var s=e.stateNode;try{xi(s,"")}catch(E){Fe(e,e.return,E)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&kp(s,i),tu(l,o);var c=tu(l,i);for(o=0;o<a.length;o+=2){var p=a[o],d=a[o+1];p==="style"?jp(s,d):p==="dangerouslySetInnerHTML"?Np(s,d):p==="children"?xi(s,d):vc(s,p,d,c)}switch(l){case"input":qa(s,i);break;case"textarea":Cp(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?fs(s,!!i.multiple,S,!1):v!==!!i.multiple&&(i.defaultValue!=null?fs(s,!!i.multiple,i.defaultValue,!0):fs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Mi]=i}catch(E){Fe(e,e.return,E)}}break;case 6:if(Wt(t,e),nn(e),r&4){if(e.stateNode===null)throw Error(F(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(E){Fe(e,e.return,E)}}break;case 3:if(Wt(t,e),nn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ci(t.containerInfo)}catch(E){Fe(e,e.return,E)}break;case 4:Wt(t,e),nn(e);break;case 13:Wt(t,e),nn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(qc=$e())),r&4&&Df(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(st=(c=st)||p,Wt(t,e),st=c):Wt(t,e),nn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!p&&e.mode&1)for(Y=e,p=e.child;p!==null;){for(d=Y=p;Y!==null;){switch(v=Y,S=v.child,v.tag){case 0:case 11:case 14:case 15:pi(4,v,v.return);break;case 1:cs(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(E){Fe(r,n,E)}}break;case 5:cs(v,v.return);break;case 22:if(v.memoizedState!==null){Af(d);continue}}S!==null?(S.return=v,Y=S):Af(d)}p=p.sibling}e:for(p=null,d=e;;){if(d.tag===5){if(p===null){p=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=bp("display",o))}catch(E){Fe(e,e.return,E)}}}else if(d.tag===6){if(p===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(E){Fe(e,e.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Wt(t,e),nn(e),r&4&&Df(e);break;case 21:break;default:Wt(t,e),nn(e)}}function nn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Jm(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(xi(s,""),r.flags&=-33);var i=Ff(e);Tu(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Ff(e);Lu(e,l,o);break;default:throw Error(F(161))}}catch(a){Fe(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function B0(e,t,n){Y=e,tg(e)}function tg(e,t,n){for(var r=(e.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||mo;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||st;l=mo;var c=st;if(mo=o,(st=a)&&!c)for(Y=s;Y!==null;)o=Y,a=o.child,o.tag===22&&o.memoizedState!==null?$f(s):a!==null?(a.return=o,Y=a):$f(s);for(;i!==null;)Y=i,tg(i),i=i.sibling;Y=s,mo=l,st=c}zf(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):zf(e)}}function zf(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:st||Rl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!st)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Vt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&kf(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}kf(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var p=c.memoizedState;if(p!==null){var d=p.dehydrated;d!==null&&Ci(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}st||t.flags&512&&Ru(t)}catch(v){Fe(t,t.return,v)}}if(t===e){Y=null;break}if(n=t.sibling,n!==null){n.return=t.return,Y=n;break}Y=t.return}}function Af(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Y=n;break}Y=t.return}}function $f(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Rl(4,t)}catch(a){Fe(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(a){Fe(t,s,a)}}var i=t.return;try{Ru(t)}catch(a){Fe(t,i,a)}break;case 5:var o=t.return;try{Ru(t)}catch(a){Fe(t,o,a)}}}catch(a){Fe(t,t.return,a)}if(t===e){Y=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Y=l;break}Y=t.return}}var W0=Math.ceil,al=_n.ReactCurrentDispatcher,Gc=_n.ReactCurrentOwner,At=_n.ReactCurrentBatchConfig,ge=0,qe=null,Ue=null,Ze=0,jt=0,ds=hr(0),Qe=0,Pi=null,Wr=0,Ll=0,Yc=0,mi=null,xt=null,qc=0,As=1/0,yn=null,ul=!1,Iu=null,ir=null,go=!1,Zn=null,cl=0,gi=0,_u=null,To=-1,Io=0;function pt(){return ge&6?$e():To!==-1?To:To=$e()}function or(e){return e.mode&1?ge&2&&Ze!==0?Ze&-Ze:b0.transition!==null?(Io===0&&(Io=Ap()),Io):(e=xe,e!==0||(e=window.event,e=e===void 0?16:Qp(e.type)),e):1}function Jt(e,t,n,r){if(50<gi)throw gi=0,_u=null,Error(F(185));Vi(e,n,r),(!(ge&2)||e!==qe)&&(e===qe&&(!(ge&2)&&(Ll|=n),Qe===4&&Bn(e,Ze)),Ct(e,r),n===1&&ge===0&&!(t.mode&1)&&(As=$e()+500,bl&&pr()))}function Ct(e,t){var n=e.callbackNode;by(e,t);var r=Ko(e,e===qe?Ze:0);if(r===0)n!==null&&Gd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Gd(n),t===1)e.tag===0?N0(Uf.bind(null,e)):dm(Uf.bind(null,e)),S0(function(){!(ge&6)&&pr()}),n=null;else{switch($p(r)){case 1:n=kc;break;case 4:n=Dp;break;case 16:n=Qo;break;case 536870912:n=zp;break;default:n=Qo}n=ug(n,ng.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ng(e,t){if(To=-1,Io=0,ge&6)throw Error(F(327));var n=e.callbackNode;if(vs()&&e.callbackNode!==n)return null;var r=Ko(e,e===qe?Ze:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=dl(e,r);else{t=r;var s=ge;ge|=2;var i=sg();(qe!==e||Ze!==t)&&(yn=null,As=$e()+500,zr(e,t));do try{Q0();break}catch(l){rg(e,l)}while(!0);Oc(),al.current=i,ge=s,Ue!==null?t=0:(qe=null,Ze=0,t=Qe)}if(t!==0){if(t===2&&(s=ou(e),s!==0&&(r=s,t=Pu(e,s))),t===1)throw n=Pi,zr(e,0),Bn(e,r),Ct(e,$e()),n;if(t===6)Bn(e,r);else{if(s=e.current.alternate,!(r&30)&&!H0(s)&&(t=dl(e,r),t===2&&(i=ou(e),i!==0&&(r=i,t=Pu(e,i))),t===1))throw n=Pi,zr(e,0),Bn(e,r),Ct(e,$e()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(F(345));case 2:kr(e,xt,yn);break;case 3:if(Bn(e,r),(r&130023424)===r&&(t=qc+500-$e(),10<t)){if(Ko(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){pt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=pu(kr.bind(null,e,xt,yn),t);break}kr(e,xt,yn);break;case 4:if(Bn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Xt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*W0(r/1960))-r,10<r){e.timeoutHandle=pu(kr.bind(null,e,xt,yn),r);break}kr(e,xt,yn);break;case 5:kr(e,xt,yn);break;default:throw Error(F(329))}}}return Ct(e,$e()),e.callbackNode===n?ng.bind(null,e):null}function Pu(e,t){var n=mi;return e.current.memoizedState.isDehydrated&&(zr(e,t).flags|=256),e=dl(e,t),e!==2&&(t=xt,xt=n,t!==null&&Ou(t)),e}function Ou(e){xt===null?xt=e:xt.push.apply(xt,e)}function H0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Zt(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bn(e,t){for(t&=~Yc,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Xt(t),r=1<<n;e[n]=-1,t&=~r}}function Uf(e){if(ge&6)throw Error(F(327));vs();var t=Ko(e,0);if(!(t&1))return Ct(e,$e()),null;var n=dl(e,t);if(e.tag!==0&&n===2){var r=ou(e);r!==0&&(t=r,n=Pu(e,r))}if(n===1)throw n=Pi,zr(e,0),Bn(e,t),Ct(e,$e()),n;if(n===6)throw Error(F(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kr(e,xt,yn),Ct(e,$e()),null}function Xc(e,t){var n=ge;ge|=1;try{return e(t)}finally{ge=n,ge===0&&(As=$e()+500,bl&&pr())}}function Hr(e){Zn!==null&&Zn.tag===0&&!(ge&6)&&vs();var t=ge;ge|=1;var n=At.transition,r=xe;try{if(At.transition=null,xe=1,e)return e()}finally{xe=r,At.transition=n,ge=t,!(ge&6)&&pr()}}function Jc(){jt=ds.current,Ce(ds)}function zr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,w0(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(Ic(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jo();break;case 3:Ds(),Ce(St),Ce(it),Uc();break;case 5:$c(r);break;case 4:Ds();break;case 13:Ce(Le);break;case 19:Ce(Le);break;case 10:Fc(r.type._context);break;case 22:case 23:Jc()}n=n.return}if(qe=e,Ue=e=lr(e.current,null),Ze=jt=t,Qe=0,Pi=null,Yc=Ll=Wr=0,xt=mi=null,Er!==null){for(t=0;t<Er.length;t++)if(n=Er[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Er=null}return e}function rg(e,t){do{var n=Ue;try{if(Oc(),Mo.current=ll,ol){for(var r=Te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ol=!1}if(Br=0,Ye=He=Te=null,hi=!1,Ti=0,Gc.current=null,n===null||n.return===null){Qe=1,Pi=t,Ue=null;break}e:{var i=e,o=n.return,l=n,a=t;if(t=Ze,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,p=l,d=p.tag;if(!(p.mode&1)&&(d===0||d===11||d===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var S=Mf(o);if(S!==null){S.flags&=-257,Rf(S,o,l,i,t),S.mode&1&&jf(i,c,t),t=S,a=c;var k=t.updateQueue;if(k===null){var E=new Set;E.add(a),t.updateQueue=E}else k.add(a);break e}else{if(!(t&1)){jf(i,c,t),Zc();break e}a=Error(F(426))}}else if(Ne&&l.mode&1){var b=Mf(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Rf(b,o,l,i,t),_c(zs(a,l));break e}}i=a=zs(a,l),Qe!==4&&(Qe=2),mi===null?mi=[i]:mi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=$m(i,a,t);Sf(i,y);break e;case 1:l=a;var g=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ir===null||!ir.has(m)))){i.flags|=65536,t&=-t,i.lanes|=t;var h=Um(i,l,t);Sf(i,h);break e}}i=i.return}while(i!==null)}og(n)}catch(C){t=C,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function sg(){var e=al.current;return al.current=ll,e===null?ll:e}function Zc(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),qe===null||!(Wr&268435455)&&!(Ll&268435455)||Bn(qe,Ze)}function dl(e,t){var n=ge;ge|=2;var r=sg();(qe!==e||Ze!==t)&&(yn=null,zr(e,t));do try{V0();break}catch(s){rg(e,s)}while(!0);if(Oc(),ge=n,al.current=r,Ue!==null)throw Error(F(261));return qe=null,Ze=0,Qe}function V0(){for(;Ue!==null;)ig(Ue)}function Q0(){for(;Ue!==null&&!vy();)ig(Ue)}function ig(e){var t=ag(e.alternate,e,jt);e.memoizedProps=e.pendingProps,t===null?og(e):Ue=t,Gc.current=null}function og(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=A0(n,t),n!==null){n.flags&=32767,Ue=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qe=6,Ue=null;return}}else if(n=z0(n,t,jt),n!==null){Ue=n;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);Qe===0&&(Qe=5)}function kr(e,t,n){var r=xe,s=At.transition;try{At.transition=null,xe=1,K0(e,t,n,r)}finally{At.transition=s,xe=r}return null}function K0(e,t,n,r){do vs();while(Zn!==null);if(ge&6)throw Error(F(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(F(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(jy(e,i),e===qe&&(Ue=qe=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||go||(go=!0,ug(Qo,function(){return vs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=At.transition,At.transition=null;var o=xe;xe=1;var l=ge;ge|=4,Gc.current=null,U0(e,n),eg(n,e),h0(fu),Go=!!du,fu=du=null,e.current=n,B0(n),yy(),ge=l,xe=o,At.transition=i}else e.current=n;if(go&&(go=!1,Zn=e,cl=s),i=e.pendingLanes,i===0&&(ir=null),Sy(n.stateNode),Ct(e,$e()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ul)throw ul=!1,e=Iu,Iu=null,e;return cl&1&&e.tag!==0&&vs(),i=e.pendingLanes,i&1?e===_u?gi++:(gi=0,_u=e):gi=0,pr(),null}function vs(){if(Zn!==null){var e=$p(cl),t=At.transition,n=xe;try{if(At.transition=null,xe=16>e?16:e,Zn===null)var r=!1;else{if(e=Zn,Zn=null,cl=0,ge&6)throw Error(F(331));var s=ge;for(ge|=4,Y=e.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(Y=c;Y!==null;){var p=Y;switch(p.tag){case 0:case 11:case 15:pi(8,p,i)}var d=p.child;if(d!==null)d.return=p,Y=d;else for(;Y!==null;){p=Y;var v=p.sibling,S=p.return;if(Xm(p),p===c){Y=null;break}if(v!==null){v.return=S,Y=v;break}Y=S}}}var k=i.alternate;if(k!==null){var E=k.child;if(E!==null){k.child=null;do{var b=E.sibling;E.sibling=null,E=b}while(E!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:pi(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Y=y;break e}Y=i.return}}var g=e.current;for(Y=g;Y!==null;){o=Y;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,Y=m;else e:for(o=g;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Rl(9,l)}}catch(C){Fe(l,l.return,C)}if(l===o){Y=null;break e}var h=l.sibling;if(h!==null){h.return=l.return,Y=h;break e}Y=l.return}}if(ge=s,pr(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Sl,e)}catch{}r=!0}return r}finally{xe=n,At.transition=t}}return!1}function Bf(e,t,n){t=zs(n,t),t=$m(e,t,1),e=sr(e,t,1),t=pt(),e!==null&&(Vi(e,1,t),Ct(e,t))}function Fe(e,t,n){if(e.tag===3)Bf(e,e,n);else for(;t!==null;){if(t.tag===3){Bf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ir===null||!ir.has(r))){e=zs(n,e),e=Um(t,e,1),t=sr(t,e,1),e=pt(),t!==null&&(Vi(t,1,e),Ct(t,e));break}}t=t.return}}function G0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=pt(),e.pingedLanes|=e.suspendedLanes&n,qe===e&&(Ze&n)===n&&(Qe===4||Qe===3&&(Ze&130023424)===Ze&&500>$e()-qc?zr(e,0):Yc|=n),Ct(e,t)}function lg(e,t){t===0&&(e.mode&1?(t=io,io<<=1,!(io&130023424)&&(io=4194304)):t=1);var n=pt();e=Tn(e,t),e!==null&&(Vi(e,t,n),Ct(e,n))}function Y0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),lg(e,n)}function q0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(t),lg(e,n)}var ag;ag=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||St.current)wt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return wt=!1,D0(e,t,n);wt=!!(e.flags&131072)}else wt=!1,Ne&&t.flags&1048576&&fm(t,tl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Lo(e,t),e=t.pendingProps;var s=Ps(t,it.current);gs(t,n),s=Wc(null,t,r,e,s,n);var i=Hc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,kt(r)?(i=!0,Zo(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zc(t),s.updater=Ml,t.stateNode=s,s._reactInternals=t,Su(t,r,e,n),t=Eu(null,t,r,!0,i,n)):(t.tag=0,Ne&&i&&Tc(t),ft(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Lo(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=J0(r),e=Vt(r,e),s){case 0:t=Cu(null,t,r,e,n);break e;case 1:t=If(null,t,r,e,n);break e;case 11:t=Lf(null,t,r,e,n);break e;case 14:t=Tf(null,t,r,Vt(r.type,e),n);break e}throw Error(F(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vt(r,s),Cu(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vt(r,s),If(e,t,r,s,n);case 3:e:{if(Vm(t),e===null)throw Error(F(387));r=t.pendingProps,i=t.memoizedState,s=i.element,ym(e,t),sl(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=zs(Error(F(423)),t),t=_f(e,t,r,n,s);break e}else if(r!==s){s=zs(Error(F(424)),t),t=_f(e,t,r,n,s);break e}else for(Mt=rr(t.stateNode.containerInfo.firstChild),Rt=t,Ne=!0,qt=null,n=gm(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Os(),r===s){t=In(e,t,n);break e}ft(e,t,r,n)}t=t.child}return t;case 5:return xm(t),e===null&&yu(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,hu(r,s)?o=null:i!==null&&hu(r,i)&&(t.flags|=32),Hm(e,t),ft(e,t,o,n),t.child;case 6:return e===null&&yu(t),null;case 13:return Qm(e,t,n);case 4:return Ac(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fs(t,null,r,n):ft(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vt(r,s),Lf(e,t,r,s,n);case 7:return ft(e,t,t.pendingProps,n),t.child;case 8:return ft(e,t,t.pendingProps.children,n),t.child;case 12:return ft(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Se(nl,r._currentValue),r._currentValue=o,i!==null)if(Zt(i.value,o)){if(i.children===s.children&&!St.current){t=In(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=bn(-1,n&-n),a.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var p=c.pending;p===null?a.next=a:(a.next=p.next,p.next=a),c.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),xu(i.return,n,t),l.lanes|=n;break}a=a.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),xu(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ft(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,gs(t,n),s=$t(s),r=r(s),t.flags|=1,ft(e,t,r,n),t.child;case 14:return r=t.type,s=Vt(r,t.pendingProps),s=Vt(r.type,s),Tf(e,t,r,s,n);case 15:return Bm(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vt(r,s),Lo(e,t),t.tag=1,kt(r)?(e=!0,Zo(t)):e=!1,gs(t,n),Am(t,r,s),Su(t,r,s,n),Eu(null,t,r,!0,e,n);case 19:return Km(e,t,n);case 22:return Wm(e,t,n)}throw Error(F(156,t.tag))};function ug(e,t){return Fp(e,t)}function X0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,t,n,r){return new X0(e,t,n,r)}function ed(e){return e=e.prototype,!(!e||!e.isReactComponent)}function J0(e){if(typeof e=="function")return ed(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xc)return 11;if(e===wc)return 14}return 2}function lr(e,t){var n=e.alternate;return n===null?(n=zt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _o(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")ed(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ts:return Ar(n.children,s,i,t);case yc:o=8,s|=8;break;case Va:return e=zt(12,n,t,s|2),e.elementType=Va,e.lanes=i,e;case Qa:return e=zt(13,n,t,s),e.elementType=Qa,e.lanes=i,e;case Ka:return e=zt(19,n,t,s),e.elementType=Ka,e.lanes=i,e;case xp:return Tl(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vp:o=10;break e;case yp:o=9;break e;case xc:o=11;break e;case wc:o=14;break e;case An:o=16,r=null;break e}throw Error(F(130,e==null?e:typeof e,""))}return t=zt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Ar(e,t,n,r){return e=zt(7,e,r,t),e.lanes=n,e}function Tl(e,t,n,r){return e=zt(22,e,r,t),e.elementType=xp,e.lanes=n,e.stateNode={isHidden:!1},e}function Ta(e,t,n){return e=zt(6,e,null,t),e.lanes=n,e}function Ia(e,t,n){return t=zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Z0(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fa(0),this.expirationTimes=fa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fa(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function td(e,t,n,r,s,i,o,l,a){return e=new Z0(e,t,n,l,a),t===1?(t=1,i===!0&&(t|=8)):t=0,i=zt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zc(i),e}function ex(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:es,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function cg(e){if(!e)return dr;e=e._reactInternals;e:{if(Gr(e)!==e||e.tag!==1)throw Error(F(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(kt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(F(171))}if(e.tag===1){var n=e.type;if(kt(n))return cm(e,n,t)}return t}function dg(e,t,n,r,s,i,o,l,a){return e=td(n,r,!0,e,s,i,o,l,a),e.context=cg(null),n=e.current,r=pt(),s=or(n),i=bn(r,s),i.callback=t??null,sr(n,i,s),e.current.lanes=s,Vi(e,s,r),Ct(e,r),e}function Il(e,t,n,r){var s=t.current,i=pt(),o=or(s);return n=cg(n),t.context===null?t.context=n:t.pendingContext=n,t=bn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=sr(s,t,o),e!==null&&(Jt(e,s,o,i),jo(e,s,o)),o}function fl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Wf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function nd(e,t){Wf(e,t),(e=e.alternate)&&Wf(e,t)}function tx(){return null}var fg=typeof reportError=="function"?reportError:function(e){console.error(e)};function rd(e){this._internalRoot=e}_l.prototype.render=rd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(F(409));Il(e,t,null,null)};_l.prototype.unmount=rd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hr(function(){Il(null,e,null,null)}),t[Ln]=null}};function _l(e){this._internalRoot=e}_l.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Un.length&&t!==0&&t<Un[n].priority;n++);Un.splice(n,0,e),n===0&&Vp(e)}};function sd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hf(){}function nx(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=fl(o);i.call(c)}}var o=dg(t,r,e,0,null,!1,!1,"",Hf);return e._reactRootContainer=o,e[Ln]=o.current,bi(e.nodeType===8?e.parentNode:e),Hr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=fl(a);l.call(c)}}var a=td(e,0,!1,null,null,!1,!1,"",Hf);return e._reactRootContainer=a,e[Ln]=a.current,bi(e.nodeType===8?e.parentNode:e),Hr(function(){Il(t,a,n,r)}),a}function Ol(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var a=fl(o);l.call(a)}}Il(t,o,e,s)}else o=nx(n,t,e,s,r);return fl(o)}Up=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=si(t.pendingLanes);n!==0&&(Cc(t,n|1),Ct(t,$e()),!(ge&6)&&(As=$e()+500,pr()))}break;case 13:Hr(function(){var r=Tn(e,1);if(r!==null){var s=pt();Jt(r,e,1,s)}}),nd(e,1)}};Ec=function(e){if(e.tag===13){var t=Tn(e,134217728);if(t!==null){var n=pt();Jt(t,e,134217728,n)}nd(e,134217728)}};Bp=function(e){if(e.tag===13){var t=or(e),n=Tn(e,t);if(n!==null){var r=pt();Jt(n,e,t,r)}nd(e,t)}};Wp=function(){return xe};Hp=function(e,t){var n=xe;try{return xe=e,t()}finally{xe=n}};ru=function(e,t,n){switch(t){case"input":if(qa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Nl(r);if(!s)throw Error(F(90));Sp(r),qa(r,s)}}}break;case"textarea":Cp(e,n);break;case"select":t=n.value,t!=null&&fs(e,!!n.multiple,t,!1)}};Lp=Xc;Tp=Hr;var rx={usingClientEntryPoint:!1,Events:[Ki,is,Nl,Mp,Rp,Xc]},Zs={findFiberByHostInstance:Cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sx={bundleType:Zs.bundleType,version:Zs.version,rendererPackageName:Zs.rendererPackageName,rendererConfig:Zs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Pp(e),e===null?null:e.stateNode},findFiberByHostInstance:Zs.findFiberByHostInstance||tx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vo.isDisabled&&vo.supportsFiber)try{Sl=vo.inject(sx),cn=vo}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rx;Tt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sd(t))throw Error(F(200));return ex(e,t,null,n)};Tt.createRoot=function(e,t){if(!sd(e))throw Error(F(299));var n=!1,r="",s=fg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=td(e,1,!1,null,null,n,!1,r,s),e[Ln]=t.current,bi(e.nodeType===8?e.parentNode:e),new rd(t)};Tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(F(188)):(e=Object.keys(e).join(","),Error(F(268,e)));return e=Pp(t),e=e===null?null:e.stateNode,e};Tt.flushSync=function(e){return Hr(e)};Tt.hydrate=function(e,t,n){if(!Pl(t))throw Error(F(200));return Ol(null,e,t,!0,n)};Tt.hydrateRoot=function(e,t,n){if(!sd(e))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=fg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=dg(t,null,e,1,n??null,s,!1,i,o),e[Ln]=t.current,bi(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new _l(t)};Tt.render=function(e,t,n){if(!Pl(t))throw Error(F(200));return Ol(null,e,t,!1,n)};Tt.unmountComponentAtNode=function(e){if(!Pl(e))throw Error(F(40));return e._reactRootContainer?(Hr(function(){Ol(null,null,e,!1,function(){e._reactRootContainer=null,e[Ln]=null})}),!0):!1};Tt.unstable_batchedUpdates=Xc;Tt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Pl(n))throw Error(F(200));if(e==null||e._reactInternals===void 0)throw Error(F(38));return Ol(e,t,n,!1,r)};Tt.version="18.3.1-next-f1338f8080-20240426";function hg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hg)}catch(e){console.error(e)}}hg(),hp.exports=Tt;var id=hp.exports,pg,Vf=id;pg=Vf.createRoot,Vf.hydrateRoot;var Ws=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ix={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Wn,cc,Vh,ox=(Vh=class{constructor(){ne(this,Wn,ix);ne(this,cc,!1)}setTimeoutProvider(e){Q(this,Wn,e)}setTimeout(e,t){return w(this,Wn).setTimeout(e,t)}clearTimeout(e){w(this,Wn).clearTimeout(e)}setInterval(e,t){return w(this,Wn).setInterval(e,t)}clearInterval(e){w(this,Wn).clearInterval(e)}},Wn=new WeakMap,cc=new WeakMap,Vh),br=new ox;function lx(e){setTimeout(e,0)}var Vr=typeof window>"u"||"Deno"in globalThis;function ht(){}function ax(e,t){return typeof e=="function"?e(t):e}function Fu(e){return typeof e=="number"&&e>=0&&e!==1/0}function mg(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ar(e,t){return typeof e=="function"?e(t):e}function Pt(e,t){return typeof e=="function"?e(t):e}function Qf(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==od(o,t.options))return!1}else if(!Oi(t.queryKey,o))return!1}if(n!=="all"){const a=t.isActive();if(n==="active"&&!a||n==="inactive"&&a)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function Kf(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Qr(t.options.mutationKey)!==Qr(i))return!1}else if(!Oi(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function od(e,t){return((t==null?void 0:t.queryKeyHashFn)||Qr)(e)}function Qr(e){return JSON.stringify(e,(t,n)=>Du(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Oi(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Oi(e[n],t[n])):!1}var ux=Object.prototype.hasOwnProperty;function gg(e,t){if(e===t)return e;const n=Gf(e)&&Gf(t);if(!n&&!(Du(e)&&Du(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let a=0;for(let c=0;c<o;c++){const p=n?c:i[c],d=e[p],v=t[p];if(d===v){l[p]=d,(n?c<s:ux.call(e,p))&&a++;continue}if(d===null||v===null||typeof d!="object"||typeof v!="object"){l[p]=v;continue}const S=gg(d,v);l[p]=S,S===d&&a++}return s===o&&a===s?e:l}function hl(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Gf(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Du(e){if(!Yf(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Yf(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Yf(e){return Object.prototype.toString.call(e)==="[object Object]"}function cx(e){return new Promise(t=>{br.setTimeout(t,e)})}function zu(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?gg(e,t):t}function dx(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function fx(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var ld=Symbol();function vg(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===ld?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function yg(e,t){return typeof e=="function"?e(...t):!!e}function hx(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var Rr,Hn,Ss,Qh,px=(Qh=class extends Ws{constructor(){super();ne(this,Rr);ne(this,Hn);ne(this,Ss);Q(this,Ss,t=>{if(!Vr&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){w(this,Hn)||this.setEventListener(w(this,Ss))}onUnsubscribe(){var t;this.hasListeners()||((t=w(this,Hn))==null||t.call(this),Q(this,Hn,void 0))}setEventListener(t){var n;Q(this,Ss,t),(n=w(this,Hn))==null||n.call(this),Q(this,Hn,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){w(this,Rr)!==t&&(Q(this,Rr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof w(this,Rr)=="boolean"?w(this,Rr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Rr=new WeakMap,Hn=new WeakMap,Ss=new WeakMap,Qh),ad=new px;function Au(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var mx=lx;function gx(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=mx;const i=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(a=>{n(a)})})})};return{batch:l=>{let a;t++;try{a=l()}finally{t--,t||o()}return a},batchCalls:l=>(...a)=>{i(()=>{l(...a)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Ve=gx(),ks,Vn,Cs,Kh,vx=(Kh=class extends Ws{constructor(){super();ne(this,ks,!0);ne(this,Vn);ne(this,Cs);Q(this,Cs,t=>{if(!Vr&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){w(this,Vn)||this.setEventListener(w(this,Cs))}onUnsubscribe(){var t;this.hasListeners()||((t=w(this,Vn))==null||t.call(this),Q(this,Vn,void 0))}setEventListener(t){var n;Q(this,Cs,t),(n=w(this,Vn))==null||n.call(this),Q(this,Vn,t(this.setOnline.bind(this)))}setOnline(t){w(this,ks)!==t&&(Q(this,ks,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return w(this,ks)}},ks=new WeakMap,Vn=new WeakMap,Cs=new WeakMap,Kh),pl=new vx;function yx(e){return Math.min(1e3*2**e,3e4)}function xg(e){return(e??"online")==="online"?pl.isOnline():!0}var $u=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function wg(e){let t=!1,n=0,r;const s=Au(),i=()=>s.status!=="pending",o=E=>{var b;if(!i()){const y=new $u(E);v(y),(b=e.onCancel)==null||b.call(e,y)}},l=()=>{t=!0},a=()=>{t=!1},c=()=>ad.isFocused()&&(e.networkMode==="always"||pl.isOnline())&&e.canRun(),p=()=>xg(e.networkMode)&&e.canRun(),d=E=>{i()||(r==null||r(),s.resolve(E))},v=E=>{i()||(r==null||r(),s.reject(E))},S=()=>new Promise(E=>{var b;r=y=>{(i()||c())&&E(y)},(b=e.onPause)==null||b.call(e)}).then(()=>{var E;r=void 0,i()||(E=e.onContinue)==null||E.call(e)}),k=()=>{if(i())return;let E;const b=n===0?e.initialPromise:void 0;try{E=b??e.fn()}catch(y){E=Promise.reject(y)}Promise.resolve(E).then(d).catch(y=>{var L;if(i())return;const g=e.retry??(Vr?0:3),m=e.retryDelay??yx,h=typeof m=="function"?m(n,y):m,C=g===!0||typeof g=="number"&&n<g||typeof g=="function"&&g(n,y);if(t||!C){v(y);return}n++,(L=e.onFail)==null||L.call(e,n,y),cx(h).then(()=>c()?void 0:S()).then(()=>{t?v(y):k()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:a,canStart:p,start:()=>(p()?k():S().then(k),s)}}var Lr,Gh,Sg=(Gh=class{constructor(){ne(this,Lr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Fu(this.gcTime)&&Q(this,Lr,br.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Vr?1/0:5*60*1e3))}clearGcTimeout(){w(this,Lr)&&(br.clearTimeout(w(this,Lr)),Q(this,Lr,void 0))}},Lr=new WeakMap,Gh),Tr,Es,_t,Ir,Ge,Ai,_r,Kt,vn,Yh,xx=(Yh=class extends Sg{constructor(t){super();ne(this,Kt);ne(this,Tr);ne(this,Es);ne(this,_t);ne(this,Ir);ne(this,Ge);ne(this,Ai);ne(this,_r);Q(this,_r,!1),Q(this,Ai,t.defaultOptions),this.setOptions(t.options),this.observers=[],Q(this,Ir,t.client),Q(this,_t,w(this,Ir).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Q(this,Tr,Xf(this.options)),this.state=t.state??w(this,Tr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=w(this,Ge))==null?void 0:t.promise}setOptions(t){if(this.options={...w(this,Ai),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Xf(this.options);n.data!==void 0&&(this.setState(qf(n.data,n.dataUpdatedAt)),Q(this,Tr,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&w(this,_t).remove(this)}setData(t,n){const r=zu(this.state.data,t,this.options);return ae(this,Kt,vn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ae(this,Kt,vn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=w(this,Ge))==null?void 0:r.promise;return(s=w(this,Ge))==null||s.cancel(t),n?n.then(ht).catch(ht):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(w(this,Tr))}isActive(){return this.observers.some(t=>Pt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ld||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ar(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!mg(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=w(this,Ge))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=w(this,Ge))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),w(this,_t).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(w(this,Ge)&&(w(this,_r)?w(this,Ge).cancel({revert:!0}):w(this,Ge).cancelRetry()),this.scheduleGc()),w(this,_t).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ae(this,Kt,vn).call(this,{type:"invalidate"})}async fetch(t,n){var a,c,p,d,v,S,k,E,b,y,g,m;if(this.state.fetchStatus!=="idle"&&((a=w(this,Ge))==null?void 0:a.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(w(this,Ge))return w(this,Ge).continueRetry(),w(this,Ge).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(C=>C.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(Q(this,_r,!0),r.signal)})},i=()=>{const h=vg(this.options,n),L=(()=>{const T={client:w(this,Ir),queryKey:this.queryKey,meta:this.meta};return s(T),T})();return Q(this,_r,!1),this.options.persister?this.options.persister(h,L,this):h(L)},l=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:w(this,Ir),state:this.state,fetchFn:i};return s(h),h})();(c=this.options.behavior)==null||c.onFetch(l,this),Q(this,Es,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=l.fetchOptions)==null?void 0:p.meta))&&ae(this,Kt,vn).call(this,{type:"fetch",meta:(d=l.fetchOptions)==null?void 0:d.meta}),Q(this,Ge,wg({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:h=>{h instanceof $u&&h.revert&&this.setState({...w(this,Es),fetchStatus:"idle"}),r.abort()},onFail:(h,C)=>{ae(this,Kt,vn).call(this,{type:"failed",failureCount:h,error:C})},onPause:()=>{ae(this,Kt,vn).call(this,{type:"pause"})},onContinue:()=>{ae(this,Kt,vn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const h=await w(this,Ge).start();if(h===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(h),(S=(v=w(this,_t).config).onSuccess)==null||S.call(v,h,this),(E=(k=w(this,_t).config).onSettled)==null||E.call(k,h,this.state.error,this),h}catch(h){if(h instanceof $u){if(h.silent)return w(this,Ge).promise;if(h.revert){if(this.state.data===void 0)throw h;return this.state.data}}throw ae(this,Kt,vn).call(this,{type:"error",error:h}),(y=(b=w(this,_t).config).onError)==null||y.call(b,h,this),(m=(g=w(this,_t).config).onSettled)==null||m.call(g,this.state.data,h,this),h}finally{this.scheduleGc()}}},Tr=new WeakMap,Es=new WeakMap,_t=new WeakMap,Ir=new WeakMap,Ge=new WeakMap,Ai=new WeakMap,_r=new WeakMap,Kt=new WeakSet,vn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...kg(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...qf(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Q(this,Es,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Ve.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),w(this,_t).notify({query:this,type:"updated",action:t})})},Yh);function kg(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:xg(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function qf(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Xf(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var vt,fe,$i,ct,Pr,Ns,wn,Qn,Ui,bs,js,Or,Fr,Kn,Ms,ye,oi,Uu,Bu,Wu,Hu,Vu,Qu,Ku,Cg,qh,wx=(qh=class extends Ws{constructor(t,n){super();ne(this,ye);ne(this,vt);ne(this,fe);ne(this,$i);ne(this,ct);ne(this,Pr);ne(this,Ns);ne(this,wn);ne(this,Qn);ne(this,Ui);ne(this,bs);ne(this,js);ne(this,Or);ne(this,Fr);ne(this,Kn);ne(this,Ms,new Set);this.options=n,Q(this,vt,t),Q(this,Qn,null),Q(this,wn,Au()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(w(this,fe).addObserver(this),Jf(w(this,fe),this.options)?ae(this,ye,oi).call(this):this.updateResult(),ae(this,ye,Hu).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gu(w(this,fe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gu(w(this,fe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ae(this,ye,Vu).call(this),ae(this,ye,Qu).call(this),w(this,fe).removeObserver(this)}setOptions(t){const n=this.options,r=w(this,fe);if(this.options=w(this,vt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Pt(this.options.enabled,w(this,fe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ae(this,ye,Ku).call(this),w(this,fe).setOptions(this.options),n._defaulted&&!hl(this.options,n)&&w(this,vt).getQueryCache().notify({type:"observerOptionsUpdated",query:w(this,fe),observer:this});const s=this.hasListeners();s&&Zf(w(this,fe),r,this.options,n)&&ae(this,ye,oi).call(this),this.updateResult(),s&&(w(this,fe)!==r||Pt(this.options.enabled,w(this,fe))!==Pt(n.enabled,w(this,fe))||ar(this.options.staleTime,w(this,fe))!==ar(n.staleTime,w(this,fe)))&&ae(this,ye,Uu).call(this);const i=ae(this,ye,Bu).call(this);s&&(w(this,fe)!==r||Pt(this.options.enabled,w(this,fe))!==Pt(n.enabled,w(this,fe))||i!==w(this,Kn))&&ae(this,ye,Wu).call(this,i)}getOptimisticResult(t){const n=w(this,vt).getQueryCache().build(w(this,vt),t),r=this.createResult(n,t);return kx(this,r)&&(Q(this,ct,r),Q(this,Ns,this.options),Q(this,Pr,w(this,fe).state)),r}getCurrentResult(){return w(this,ct)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&w(this,wn).status==="pending"&&w(this,wn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){w(this,Ms).add(t)}getCurrentQuery(){return w(this,fe)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=w(this,vt).defaultQueryOptions(t),r=w(this,vt).getQueryCache().build(w(this,vt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ae(this,ye,oi).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),w(this,ct)))}createResult(t,n){var I;const r=w(this,fe),s=this.options,i=w(this,ct),o=w(this,Pr),l=w(this,Ns),c=t!==r?t.state:w(this,$i),{state:p}=t;let d={...p},v=!1,S;if(n._optimisticResults){const N=this.hasListeners(),D=!N&&Jf(t,n),J=N&&Zf(t,r,n,s);(D||J)&&(d={...d,...kg(p.data,t.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:k,errorUpdatedAt:E,status:b}=d;S=d.data;let y=!1;if(n.placeholderData!==void 0&&S===void 0&&b==="pending"){let N;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(N=i.data,y=!0):N=typeof n.placeholderData=="function"?n.placeholderData((I=w(this,js))==null?void 0:I.state.data,w(this,js)):n.placeholderData,N!==void 0&&(b="success",S=zu(i==null?void 0:i.data,N,n),v=!0)}if(n.select&&S!==void 0&&!y)if(i&&S===(o==null?void 0:o.data)&&n.select===w(this,Ui))S=w(this,bs);else try{Q(this,Ui,n.select),S=n.select(S),S=zu(i==null?void 0:i.data,S,n),Q(this,bs,S),Q(this,Qn,null)}catch(N){Q(this,Qn,N)}w(this,Qn)&&(k=w(this,Qn),S=w(this,bs),E=Date.now(),b="error");const g=d.fetchStatus==="fetching",m=b==="pending",h=b==="error",C=m&&g,L=S!==void 0,M={status:b,fetchStatus:d.fetchStatus,isPending:m,isSuccess:b==="success",isError:h,isInitialLoading:C,isLoading:C,data:S,dataUpdatedAt:d.dataUpdatedAt,error:k,errorUpdatedAt:E,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:g,isRefetching:g&&!m,isLoadingError:h&&!L,isPaused:d.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:h&&L,isStale:ud(t,n),refetch:this.refetch,promise:w(this,wn),isEnabled:Pt(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const N=U=>{M.status==="error"?U.reject(M.error):M.data!==void 0&&U.resolve(M.data)},D=()=>{const U=Q(this,wn,M.promise=Au());N(U)},J=w(this,wn);switch(J.status){case"pending":t.queryHash===r.queryHash&&N(J);break;case"fulfilled":(M.status==="error"||M.data!==J.value)&&D();break;case"rejected":(M.status!=="error"||M.error!==J.reason)&&D();break}}return M}updateResult(){const t=w(this,ct),n=this.createResult(w(this,fe),this.options);if(Q(this,Pr,w(this,fe).state),Q(this,Ns,this.options),w(this,Pr).data!==void 0&&Q(this,js,w(this,fe)),hl(n,t))return;Q(this,ct,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!w(this,Ms).size)return!0;const o=new Set(i??w(this,Ms));return this.options.throwOnError&&o.add("error"),Object.keys(w(this,ct)).some(l=>{const a=l;return w(this,ct)[a]!==t[a]&&o.has(a)})};ae(this,ye,Cg).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ae(this,ye,Hu).call(this)}},vt=new WeakMap,fe=new WeakMap,$i=new WeakMap,ct=new WeakMap,Pr=new WeakMap,Ns=new WeakMap,wn=new WeakMap,Qn=new WeakMap,Ui=new WeakMap,bs=new WeakMap,js=new WeakMap,Or=new WeakMap,Fr=new WeakMap,Kn=new WeakMap,Ms=new WeakMap,ye=new WeakSet,oi=function(t){ae(this,ye,Ku).call(this);let n=w(this,fe).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(ht)),n},Uu=function(){ae(this,ye,Vu).call(this);const t=ar(this.options.staleTime,w(this,fe));if(Vr||w(this,ct).isStale||!Fu(t))return;const r=mg(w(this,ct).dataUpdatedAt,t)+1;Q(this,Or,br.setTimeout(()=>{w(this,ct).isStale||this.updateResult()},r))},Bu=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(w(this,fe)):this.options.refetchInterval)??!1},Wu=function(t){ae(this,ye,Qu).call(this),Q(this,Kn,t),!(Vr||Pt(this.options.enabled,w(this,fe))===!1||!Fu(w(this,Kn))||w(this,Kn)===0)&&Q(this,Fr,br.setInterval(()=>{(this.options.refetchIntervalInBackground||ad.isFocused())&&ae(this,ye,oi).call(this)},w(this,Kn)))},Hu=function(){ae(this,ye,Uu).call(this),ae(this,ye,Wu).call(this,ae(this,ye,Bu).call(this))},Vu=function(){w(this,Or)&&(br.clearTimeout(w(this,Or)),Q(this,Or,void 0))},Qu=function(){w(this,Fr)&&(br.clearInterval(w(this,Fr)),Q(this,Fr,void 0))},Ku=function(){const t=w(this,vt).getQueryCache().build(w(this,vt),this.options);if(t===w(this,fe))return;const n=w(this,fe);Q(this,fe,t),Q(this,$i,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},Cg=function(t){Ve.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(w(this,ct))}),w(this,vt).getQueryCache().notify({query:w(this,fe),type:"observerResultsUpdated"})})},qh);function Sx(e,t){return Pt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Jf(e,t){return Sx(e,t)||e.state.data!==void 0&&Gu(e,t,t.refetchOnMount)}function Gu(e,t,n){if(Pt(t.enabled,e)!==!1&&ar(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&ud(e,t)}return!1}function Zf(e,t,n,r){return(e!==t||Pt(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&ud(e,n)}function ud(e,t){return Pt(t.enabled,e)!==!1&&e.isStaleByTime(ar(t.staleTime,e))}function kx(e,t){return!hl(e.getCurrentResult(),t)}function eh(e){return{onFetch:(t,n)=>{var p,d,v,S,k;const r=t.options,s=(v=(d=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:d.fetchMore)==null?void 0:v.direction,i=((S=t.state.data)==null?void 0:S.pages)||[],o=((k=t.state.data)==null?void 0:k.pageParams)||[];let l={pages:[],pageParams:[]},a=0;const c=async()=>{let E=!1;const b=m=>{hx(m,()=>t.signal,()=>E=!0)},y=vg(t.options,t.fetchOptions),g=async(m,h,C)=>{if(E)return Promise.reject();if(h==null&&m.pages.length)return Promise.resolve(m);const T=(()=>{const D={client:t.client,queryKey:t.queryKey,pageParam:h,direction:C?"backward":"forward",meta:t.options.meta};return b(D),D})(),M=await y(T),{maxPages:I}=t.options,N=C?fx:dx;return{pages:N(m.pages,M,I),pageParams:N(m.pageParams,h,I)}};if(s&&i.length){const m=s==="backward",h=m?Cx:th,C={pages:i,pageParams:o},L=h(r,C);l=await g(C,L,m)}else{const m=e??i.length;do{const h=a===0?o[0]??r.initialPageParam:th(r,l);if(a>0&&h==null)break;l=await g(l,h),a++}while(a<m)}return l};t.options.persister?t.fetchFn=()=>{var E,b;return(b=(E=t.options).persister)==null?void 0:b.call(E,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function th(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Cx(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Bi,sn,dt,Dr,on,zn,Xh,Ex=(Xh=class extends Sg{constructor(t){super();ne(this,on);ne(this,Bi);ne(this,sn);ne(this,dt);ne(this,Dr);Q(this,Bi,t.client),this.mutationId=t.mutationId,Q(this,dt,t.mutationCache),Q(this,sn,[]),this.state=t.state||Eg(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){w(this,sn).includes(t)||(w(this,sn).push(t),this.clearGcTimeout(),w(this,dt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Q(this,sn,w(this,sn).filter(n=>n!==t)),this.scheduleGc(),w(this,dt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){w(this,sn).length||(this.state.status==="pending"?this.scheduleGc():w(this,dt).remove(this))}continue(){var t;return((t=w(this,Dr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,a,c,p,d,v,S,k,E,b,y,g,m,h,C,L,T,M,I;const n=()=>{ae(this,on,zn).call(this,{type:"continue"})},r={client:w(this,Bi),meta:this.options.meta,mutationKey:this.options.mutationKey};Q(this,Dr,wg({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(N,D)=>{ae(this,on,zn).call(this,{type:"failed",failureCount:N,error:D})},onPause:()=>{ae(this,on,zn).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>w(this,dt).canRun(this)}));const s=this.state.status==="pending",i=!w(this,Dr).canStart();try{if(s)n();else{ae(this,on,zn).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=w(this,dt).config).onMutate)==null?void 0:l.call(o,t,this,r));const D=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,t,r));D!==this.state.context&&ae(this,on,zn).call(this,{type:"pending",context:D,variables:t,isPaused:i})}const N=await w(this,Dr).start();return await((d=(p=w(this,dt).config).onSuccess)==null?void 0:d.call(p,N,t,this.state.context,this,r)),await((S=(v=this.options).onSuccess)==null?void 0:S.call(v,N,t,this.state.context,r)),await((E=(k=w(this,dt).config).onSettled)==null?void 0:E.call(k,N,null,this.state.variables,this.state.context,this,r)),await((y=(b=this.options).onSettled)==null?void 0:y.call(b,N,null,t,this.state.context,r)),ae(this,on,zn).call(this,{type:"success",data:N}),N}catch(N){try{await((m=(g=w(this,dt).config).onError)==null?void 0:m.call(g,N,t,this.state.context,this,r))}catch(D){Promise.reject(D)}try{await((C=(h=this.options).onError)==null?void 0:C.call(h,N,t,this.state.context,r))}catch(D){Promise.reject(D)}try{await((T=(L=w(this,dt).config).onSettled)==null?void 0:T.call(L,void 0,N,this.state.variables,this.state.context,this,r))}catch(D){Promise.reject(D)}try{await((I=(M=this.options).onSettled)==null?void 0:I.call(M,void 0,N,t,this.state.context,r))}catch(D){Promise.reject(D)}throw ae(this,on,zn).call(this,{type:"error",error:N}),N}finally{w(this,dt).runNext(this)}}},Bi=new WeakMap,sn=new WeakMap,dt=new WeakMap,Dr=new WeakMap,on=new WeakSet,zn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ve.batch(()=>{w(this,sn).forEach(r=>{r.onMutationUpdate(t)}),w(this,dt).notify({mutation:this,type:"updated",action:t})})},Xh);function Eg(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Sn,Gt,Wi,Jh,Nx=(Jh=class extends Ws{constructor(t={}){super();ne(this,Sn);ne(this,Gt);ne(this,Wi);this.config=t,Q(this,Sn,new Set),Q(this,Gt,new Map),Q(this,Wi,0)}build(t,n,r){const s=new Ex({client:t,mutationCache:this,mutationId:++Zi(this,Wi)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){w(this,Sn).add(t);const n=yo(t);if(typeof n=="string"){const r=w(this,Gt).get(n);r?r.push(t):w(this,Gt).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(w(this,Sn).delete(t)){const n=yo(t);if(typeof n=="string"){const r=w(this,Gt).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&w(this,Gt).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=yo(t);if(typeof n=="string"){const r=w(this,Gt).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=yo(t);if(typeof n=="string"){const s=(r=w(this,Gt).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ve.batch(()=>{w(this,Sn).forEach(t=>{this.notify({type:"removed",mutation:t})}),w(this,Sn).clear(),w(this,Gt).clear()})}getAll(){return Array.from(w(this,Sn))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Kf(n,r))}findAll(t={}){return this.getAll().filter(n=>Kf(t,n))}notify(t){Ve.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Ve.batch(()=>Promise.all(t.map(n=>n.continue().catch(ht))))}},Sn=new WeakMap,Gt=new WeakMap,Wi=new WeakMap,Jh);function yo(e){var t;return(t=e.options.scope)==null?void 0:t.id}var kn,Gn,yt,Cn,Mn,Po,Yu,Zh,bx=(Zh=class extends Ws{constructor(n,r){super();ne(this,Mn);ne(this,kn);ne(this,Gn);ne(this,yt);ne(this,Cn);Q(this,kn,n),this.setOptions(r),this.bindMethods(),ae(this,Mn,Po).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=w(this,kn).defaultMutationOptions(n),hl(this.options,r)||w(this,kn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:w(this,yt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Qr(r.mutationKey)!==Qr(this.options.mutationKey)?this.reset():((s=w(this,yt))==null?void 0:s.state.status)==="pending"&&w(this,yt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=w(this,yt))==null||n.removeObserver(this)}onMutationUpdate(n){ae(this,Mn,Po).call(this),ae(this,Mn,Yu).call(this,n)}getCurrentResult(){return w(this,Gn)}reset(){var n;(n=w(this,yt))==null||n.removeObserver(this),Q(this,yt,void 0),ae(this,Mn,Po).call(this),ae(this,Mn,Yu).call(this)}mutate(n,r){var s;return Q(this,Cn,r),(s=w(this,yt))==null||s.removeObserver(this),Q(this,yt,w(this,kn).getMutationCache().build(w(this,kn),this.options)),w(this,yt).addObserver(this),w(this,yt).execute(n)}},kn=new WeakMap,Gn=new WeakMap,yt=new WeakMap,Cn=new WeakMap,Mn=new WeakSet,Po=function(){var r;const n=((r=w(this,yt))==null?void 0:r.state)??Eg();Q(this,Gn,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Yu=function(n){Ve.batch(()=>{var r,s,i,o,l,a,c,p;if(w(this,Cn)&&this.hasListeners()){const d=w(this,Gn).variables,v=w(this,Gn).context,S={client:w(this,kn),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=w(this,Cn)).onSuccess)==null||s.call(r,n.data,d,v,S)}catch(k){Promise.reject(k)}try{(o=(i=w(this,Cn)).onSettled)==null||o.call(i,n.data,null,d,v,S)}catch(k){Promise.reject(k)}}else if((n==null?void 0:n.type)==="error"){try{(a=(l=w(this,Cn)).onError)==null||a.call(l,n.error,d,v,S)}catch(k){Promise.reject(k)}try{(p=(c=w(this,Cn)).onSettled)==null||p.call(c,void 0,n.error,d,v,S)}catch(k){Promise.reject(k)}}}this.listeners.forEach(d=>{d(w(this,Gn))})})},Zh),ln,ep,jx=(ep=class extends Ws{constructor(t={}){super();ne(this,ln);this.config=t,Q(this,ln,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??od(s,n);let o=this.get(i);return o||(o=new xx({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){w(this,ln).has(t.queryHash)||(w(this,ln).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=w(this,ln).get(t.queryHash);n&&(t.destroy(),n===t&&w(this,ln).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ve.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return w(this,ln).get(t)}getAll(){return[...w(this,ln).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Qf(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Qf(t,r)):n}notify(t){Ve.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Ve.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ve.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ln=new WeakMap,ep),Oe,Yn,qn,Rs,Ls,Xn,Ts,Is,tp,Mx=(tp=class{constructor(e={}){ne(this,Oe);ne(this,Yn);ne(this,qn);ne(this,Rs);ne(this,Ls);ne(this,Xn);ne(this,Ts);ne(this,Is);Q(this,Oe,e.queryCache||new jx),Q(this,Yn,e.mutationCache||new Nx),Q(this,qn,e.defaultOptions||{}),Q(this,Rs,new Map),Q(this,Ls,new Map),Q(this,Xn,0)}mount(){Zi(this,Xn)._++,w(this,Xn)===1&&(Q(this,Ts,ad.subscribe(async e=>{e&&(await this.resumePausedMutations(),w(this,Oe).onFocus())})),Q(this,Is,pl.subscribe(async e=>{e&&(await this.resumePausedMutations(),w(this,Oe).onOnline())})))}unmount(){var e,t;Zi(this,Xn)._--,w(this,Xn)===0&&((e=w(this,Ts))==null||e.call(this),Q(this,Ts,void 0),(t=w(this,Is))==null||t.call(this),Q(this,Is,void 0))}isFetching(e){return w(this,Oe).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return w(this,Yn).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=w(this,Oe).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=w(this,Oe).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(ar(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return w(this,Oe).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=w(this,Oe).get(r.queryHash),i=s==null?void 0:s.state.data,o=ax(t,i);if(o!==void 0)return w(this,Oe).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Ve.batch(()=>w(this,Oe).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=w(this,Oe).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=w(this,Oe);Ve.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=w(this,Oe);return Ve.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Ve.batch(()=>w(this,Oe).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(ht).catch(ht)}invalidateQueries(e,t={}){return Ve.batch(()=>(w(this,Oe).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Ve.batch(()=>w(this,Oe).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(ht)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ht)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=w(this,Oe).build(this,t);return n.isStaleByTime(ar(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ht).catch(ht)}fetchInfiniteQuery(e){return e.behavior=eh(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ht).catch(ht)}ensureInfiniteQueryData(e){return e.behavior=eh(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return pl.isOnline()?w(this,Yn).resumePausedMutations():Promise.resolve()}getQueryCache(){return w(this,Oe)}getMutationCache(){return w(this,Yn)}getDefaultOptions(){return w(this,qn)}setDefaultOptions(e){Q(this,qn,e)}setQueryDefaults(e,t){w(this,Rs).set(Qr(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...w(this,Rs).values()],n={};return t.forEach(r=>{Oi(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){w(this,Ls).set(Qr(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...w(this,Ls).values()],n={};return t.forEach(r=>{Oi(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...w(this,qn).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=od(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ld&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...w(this,qn).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){w(this,Oe).clear(),w(this,Yn).clear()}},Oe=new WeakMap,Yn=new WeakMap,qn=new WeakMap,Rs=new WeakMap,Ls=new WeakMap,Xn=new WeakMap,Ts=new WeakMap,Is=new WeakMap,tp),Ng=f.createContext(void 0),Yr=e=>{const t=f.useContext(Ng);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Rx=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),u.jsx(Ng.Provider,{value:e,children:t})),bg=f.createContext(!1),Lx=()=>f.useContext(bg);bg.Provider;function Tx(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Ix=f.createContext(Tx()),_x=()=>f.useContext(Ix),Px=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Ox=e=>{f.useEffect(()=>{e.clearReset()},[e])},Fx=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||yg(n,[e.error,r])),Dx=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},zx=(e,t)=>e.isLoading&&e.isFetching&&!t,Ax=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,nh=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function $x(e,t,n){var d,v,S,k,E;const r=Lx(),s=_x(),i=Yr(),o=i.defaultQueryOptions(e);(v=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||v.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",Dx(o),Px(o,s),Ox(s);const l=!i.getQueryCache().get(o.queryHash),[a]=f.useState(()=>new t(i,o)),c=a.getOptimisticResult(o),p=!r&&e.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(b=>{const y=p?a.subscribe(Ve.batchCalls(b)):ht;return a.updateResult(),y},[a,p]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),f.useEffect(()=>{a.setOptions(o)},[o,a]),Ax(o,c))throw nh(o,a,s);if(Fx({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((k=(S=i.getDefaultOptions().queries)==null?void 0:S._experimental_afterQuery)==null||k.call(S,o,c),o.experimental_prefetchInRender&&!Vr&&zx(c,r)){const b=l?nh(o,a,s):(E=i.getQueryCache().get(o.queryHash))==null?void 0:E.promise;b==null||b.catch(ht).finally(()=>{a.updateResult()})}return o.notifyOnChangeProps?c:a.trackResult(c)}function cd(e,t){return $x(e,wx)}function Ux(e,t){const n=Yr(),[r]=f.useState(()=>new bx(n,e));f.useEffect(()=>{r.setOptions(e)},[r,e]);const s=f.useSyncExternalStore(f.useCallback(o=>r.subscribe(Ve.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=f.useCallback((o,l)=>{r.mutate(o,l).catch(ht)},[r]);if(s.error&&yg(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function rh(e){return e.length>0&&"options"in e[0]}function sh({value:e,onChange:t,options:n,placeholder:r="Select...",trigger:s,triggerClassName:i="",panelClassName:o="",align:l="left",width:a="auto",showChevron:c=!0,title:p,disabled:d=!1,"aria-label":v}){var M;const[S,k]=f.useState(!1),E=f.useRef(null),b=f.useRef(null),g=f.useCallback(()=>{const I=N=>{const D=N.find(J=>J.value===e);return D?D.label:null};if(rh(n))for(const N of n){const D=I(N.options);if(D)return D}else{const N=I(n);if(N)return N}return r},[e,n,r])();f.useEffect(()=>{if(!S)return;const I=D=>{E.current&&!E.current.contains(D.target)&&k(!1)},N=D=>{var J;D.key==="Escape"&&(k(!1),(J=b.current)==null||J.focus())};return window.addEventListener("click",I),window.addEventListener("keydown",N),()=>{window.removeEventListener("click",I),window.removeEventListener("keydown",N)}},[S]);const m=I=>{var N;t(I),k(!1),(N=b.current)==null||N.focus()},h=I=>I.map(N=>u.jsxs("button",{className:"dropdown-item","data-active":N.value===e,disabled:N.disabled,onClick:()=>!N.disabled&&m(N.value),role:"menuitem",children:[N.icon&&u.jsx("span",{className:"shrink-0",children:N.icon}),u.jsx("span",{className:"flex-1 truncate",children:N.label}),N.value===e&&u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 text-accent",children:u.jsx("polyline",{points:"20 6 9 17 4 12"})})]},N.value)),C=((M=b.current)==null?void 0:M.offsetWidth)??0,L=a==="trigger"?C:a==="auto"?void 0:a,T={...L?{width:L,minWidth:L}:{},...l==="right"?{right:0}:{left:0}};return u.jsxs("div",{ref:E,className:"relative",children:[s?u.jsx("div",{onClick:()=>!d&&k(I=>!I),children:s}):u.jsxs("button",{ref:b,type:"button",className:`dropdown-trigger ${i}`,onClick:()=>k(I=>!I),disabled:d,title:p,"aria-label":v,"aria-haspopup":"listbox","aria-expanded":S,children:[u.jsx("span",{className:"truncate",children:g}),c&&u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`shrink-0 opacity-60 transition-transform ${S?"rotate-180":""}`,children:u.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),S&&u.jsx("div",{className:`dropdown-panel ${o}`,style:T,role:"listbox","aria-label":v,children:rh(n)?n.map((I,N)=>u.jsxs("div",{children:[I.label&&u.jsx("div",{className:"dropdown-label",children:I.label}),h(I.options),N<n.length-1&&u.jsx("div",{className:"dropdown-divider"})]},I.label||N)):h(n)})]})}const Bx={offline:"sync-dot-offline",unstable:"sync-dot-unstable",recent:"sync-dot-recent",editing:"sync-dot-editing",live:"sync-dot-live"};function Wx({state:e,presence:t,syncLabel:n,connectionLabel:r,lastEditedLabel:s,hasEdits:i,recentTouches:o,isNarrow:l}){const[a,c]=f.useState(!1),[p,d]=f.useState(null),v=f.useRef(null),S=f.useRef(null),k=f.useRef(null),E=t?`${t.viewing} viewing  ${t.editing} editing`:"- viewing  - editing",b=t?String(t.viewing):"-",y=f.useCallback(()=>{k.current&&(window.clearTimeout(k.current),k.current=null)},[]),g=f.useCallback((h,C)=>{var L;C&&((L=navigator.clipboard)==null||L.writeText(C).then(()=>{d(h),y(),k.current=window.setTimeout(()=>{d(T=>T===h?null:T)},1e3)}).catch(()=>{}))},[y]),m=f.useCallback(()=>{c(!1),window.requestAnimationFrame(()=>{var h;return(h=S.current)==null?void 0:h.focus()})},[]);return f.useEffect(()=>{if(!a)return;const h=L=>{!v.current||v.current.contains(L.target)||m()},C=L=>{L.key==="Escape"&&m()};return window.addEventListener("mousedown",h),window.addEventListener("keydown",C),()=>{window.removeEventListener("mousedown",h),window.removeEventListener("keydown",C)}},[a,m]),f.useEffect(()=>()=>{y()},[y]),u.jsxs("div",{ref:v,className:"sync-indicator",children:[u.jsxs("button",{ref:S,type:"button",className:"sync-indicator-button",onClick:()=>a?m():c(!0),"aria-haspopup":"dialog","aria-expanded":a,"aria-label":"Sync status",title:E,children:[u.jsx("span",{className:`sync-indicator-dot ${Bx[e]}`,"aria-hidden":"true"}),!l&&u.jsx("span",{className:"sync-indicator-count tabular-nums",children:b})]}),a&&u.jsxs("div",{role:"dialog","aria-label":"Sync status",className:"sync-indicator-card select-text",children:[u.jsx("div",{className:"sync-indicator-line sync-indicator-primary",children:n}),u.jsx("div",{className:"sync-indicator-line",children:r}),u.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:E}),u.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:i?`Last edited: ${s}`:"No edits yet."}),u.jsxs("div",{className:"sync-indicator-section",children:[u.jsx("div",{className:"sync-indicator-section-title",children:"Recently touched files"}),o.length>0?u.jsx("div",{className:"sync-indicator-list",children:o.map(h=>u.jsxs("div",{className:"sync-indicator-item",children:[u.jsx("button",{type:"button",className:"sync-indicator-item-name",title:`Copy filename: ${h.label}`,onClick:()=>g(h.path,h.label),children:h.label}),u.jsx("span",{className:"sync-indicator-item-time tabular-nums",children:p===h.path?"Copied":h.timeLabel})]},h.path))}):u.jsx("div",{className:"sync-indicator-empty",children:"No recent touches."})]})]})]})}function Hx({rootRef:e,onSearch:t,viewerActive:n,onBack:r,zoomPercent:s,onZoomPercentChange:i,currentLabel:o,itemCount:l,totalCount:a,sortSpec:c,metricKeys:p,onSortChange:d,filterCount:v,onOpenFilters:S,starFilters:k,onToggleStar:E,onClearStars:b,onClearFilters:y,starCounts:g,viewMode:m,onViewMode:h,gridItemSize:C,onGridItemSize:L,leftOpen:T,rightOpen:M,onToggleLeft:I,onToggleRight:N,onPrevImage:D,onNextImage:J,canPrevImage:U,canNextImage:V,syncIndicator:be}){const[je,he]=f.useState(!1),[P,B]=f.useState(!1),[Z,pe]=f.useState(!1),ue=f.useRef(null),Me=f.useRef(null);f.useEffect(()=>{if(!je)return;const j=O=>{ue.current&&!ue.current.contains(O.target)&&he(!1)};return window.addEventListener("click",j),()=>window.removeEventListener("click",j)},[je]),f.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const j=window.matchMedia("(max-width: 900px)"),O=G=>B(G.matches);return B(j.matches),"addEventListener"in j?(j.addEventListener("change",O),()=>j.removeEventListener("change",O)):(j.addListener(O),()=>j.removeListener(O))},[]),f.useEffect(()=>{if(!P||n){pe(!1);return}if(!Z)return;const j=window.requestAnimationFrame(()=>{var O;return(O=Me.current)==null?void 0:O.focus()});return()=>window.cancelAnimationFrame(j)},[P,Z,n]);const q=c??{kind:"builtin",key:"added",dir:"desc"},le=q.dir,oe=q.kind==="builtin"&&q.key==="random",de=p!=null&&p.length?p.map(j=>({value:`metric:${j}`,label:j})):[],ot=[{value:"builtin:added",label:"Date added"},{value:"builtin:name",label:"Filename"},{value:"builtin:random",label:"Random"},...de],Re=[{label:"Layout",options:[{value:"layout:grid",label:"Grid"},{value:"layout:masonry",label:"Masonry"}]},{label:"Sort by",options:ot}],Et=q.kind==="metric"?`metric:${q.key}`:`builtin:${q.key}`,hn=[{label:"Sort by",options:ot}],Bt=P&&!n,mr=j=>{if(j.startsWith("layout:")){const O=j==="layout:masonry"?"adaptive":"grid";h==null||h(O)}else d==null||d(ih(j,q))},pn=()=>{d&&d(oe?q:{...q,dir:le==="desc"?"asc":"desc"})},en=k??[],gr=en.length,z=Qx(v,gr),ee=Vx(l,a),te=o||"Root";return u.jsxs("div",{ref:e,className:"toolbar-shell fixed top-0 left-0 right-0 h-12 grid grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] items-center px-3 gap-3 bg-panel border-b border-border z-[var(--z-toolbar)] col-span-full row-start-1 select-none",children:[u.jsxs("div",{className:"toolbar-left flex items-center gap-4 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[u.jsxs("div",{className:"flex flex-col min-w-0 leading-tight",children:[u.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted",children:"Scope"}),u.jsx("span",{className:"text-sm font-medium text-text truncate",title:te,children:te})]}),ee&&u.jsx("span",{className:"toolbar-count text-xs text-muted whitespace-nowrap tabular-nums",children:ee})]}),u.jsxs("div",{className:"toolbar-sort flex items-center gap-2",children:[u.jsxs("div",{className:`toolbar-sort-controls flex items-center gap-2 ${n?"opacity-40 pointer-events-none":""}`,children:[u.jsx(sh,{value:Et,onChange:mr,options:Re,title:"Sort and layout options","aria-label":"Sort and layout",triggerClassName:"min-w-[110px]"}),u.jsx("button",{className:"toolbar-sort-dir btn btn-icon",onClick:pn,title:oe?"Shuffle":`Sort ${le==="desc"?"descending":"ascending"}`,"aria-label":oe?"Shuffle":"Toggle sort direction","aria-disabled":n,children:oe?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),u.jsx("path",{d:"M21 3v5h-5"})]}):le==="desc"?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 5v14"}),u.jsx("path",{d:"M19 12l-7 7-7-7"})]}):u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 19V5"}),u.jsx("path",{d:"M5 12l7-7 7 7"})]})})]}),u.jsxs("div",{ref:ue,className:`toolbar-filter relative ${n?"opacity-40 pointer-events-none":""}`,children:[u.jsxs("button",{className:`btn ${z>0?"btn-active":""}`,onClick:()=>he(j=>!j),"aria-haspopup":"dialog","aria-expanded":je,title:"Filters","aria-disabled":n,children:[u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),u.jsx("span",{className:"toolbar-filters-label",children:"Filters"}),z>0&&u.jsx("span",{className:"toolbar-filters-count px-1.5 py-0.5 text-[11px] rounded-full bg-accent-strong text-text",children:z})]}),je&&u.jsxs("div",{role:"dialog","aria-label":"Filters",className:"dropdown-panel w-[240px]",style:{top:"38px",left:0},children:[u.jsx("div",{className:"dropdown-label",children:"Rating"}),u.jsxs("div",{className:"px-1",children:[[5,4,3,2,1].map(j=>{const O=en.includes(j),G=(g==null?void 0:g[String(j)])??0;return u.jsxs("button",{onClick:()=>E==null?void 0:E(j),className:`dropdown-item justify-between ${O?"bg-accent-muted":""}`,children:[u.jsxs("span",{className:O?"text-star-active":"text-text",children:["".repeat(j),"".repeat(5-j)]}),u.jsx("span",{className:"text-xs text-muted",children:G})]},j)}),u.jsxs("button",{onClick:()=>E==null?void 0:E(0),className:`dropdown-item justify-between ${en.includes(0)?"bg-accent-muted":""}`,children:[u.jsx("span",{className:"text-text",children:"Unrated"}),u.jsx("span",{className:"text-xs text-muted",children:(g==null?void 0:g["0"])??0})]})]}),u.jsx("div",{className:"dropdown-divider"}),u.jsx("div",{className:"dropdown-label",children:"Metrics"}),u.jsxs("button",{className:"dropdown-item",onClick:()=>{he(!1),S==null||S()},children:[u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M4 19V9"}),u.jsx("path",{d:"M10 19V5"}),u.jsx("path",{d:"M16 19v-7"}),u.jsx("path",{d:"M3 19h18"})]}),u.jsx("span",{children:"Open Metrics Panel"}),(v||0)>0&&u.jsxs("span",{className:"ml-auto text-xs text-muted",children:[v," active"]})]}),u.jsx("div",{className:"dropdown-divider"}),u.jsx("button",{className:"dropdown-item text-muted hover:text-text",onClick:()=>{y?y():b==null||b()},disabled:z===0,children:"Clear all filters"})]})]}),n&&u.jsxs("button",{className:"btn btn-sm",onClick:r,title:"Back to grid",children:[u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})]})]}),u.jsx("div",{className:"toolbar-center flex items-center gap-3 justify-center min-w-0",children:n?u.jsxs(u.Fragment,{children:[u.jsx("input",{type:"range",min:5,max:800,step:1,value:Math.round(Math.max(5,Math.min(800,s??100))),onChange:j=>i==null?void 0:i(Number(j.target.value)),className:"zoom-slider","aria-label":"Zoom level"}),u.jsxs("span",{className:"text-xs text-muted min-w-[42px] text-right",children:[Math.round(s??100),"%"]})]}):L&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs text-muted",children:"Size"}),u.jsx("input",{type:"range",min:80,max:500,step:10,value:C??220,onChange:j=>L(Number(j.target.value)),className:"w-28 h-1.5 bg-border rounded-full appearance-none cursor-pointer hover:bg-hover transition-colors [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-text [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-text [&::-moz-range-thumb]:border-0","aria-label":"Thumbnail size"})]})}),u.jsxs("div",{className:"toolbar-right flex items-center gap-2 justify-end",children:[u.jsxs("div",{className:`toolbar-nav flex items-center gap-1 mr-1 ${n?"":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,children:[u.jsx("button",{className:`btn btn-icon ${U?"":"opacity-40 cursor-not-allowed"}`,title:"Previous image (A / )",onClick:()=>U&&(D==null?void 0:D()),"aria-label":"Previous image","aria-disabled":!U,children:u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M15 18l-6-6 6-6"})})}),u.jsx("button",{className:`btn btn-icon ${V?"":"opacity-40 cursor-not-allowed"}`,title:"Next image (D / )",onClick:()=>V&&(J==null?void 0:J()),"aria-label":"Next image","aria-disabled":!V,children:u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M9 6l6 6-6 6"})})})]}),u.jsxs("div",{className:"toolbar-panels flex items-center gap-1",children:[u.jsx("button",{className:`btn btn-icon ${T?"":"opacity-50"}`,title:T?"Hide left panel (Ctrl+B)":"Show left panel (Ctrl+B)",onClick:I,"aria-pressed":T,"aria-label":"Toggle left panel",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"3",y:"5",width:"6",height:"14",rx:"1.5"}),u.jsx("rect",{x:"11",y:"5",width:"10",height:"14",rx:"1.5"})]})}),u.jsx("button",{className:`btn btn-icon ${M?"":"opacity-50"}`,title:M?"Hide right panel (Ctrl+Alt+B)":"Show right panel (Ctrl+Alt+B)",onClick:N,"aria-pressed":M,"aria-label":"Toggle right panel",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"15",y:"5",width:"6",height:"14",rx:"1.5"}),u.jsx("rect",{x:"3",y:"5",width:"10",height:"14",rx:"1.5"})]})})]}),be&&u.jsx(Wx,{...be,isNarrow:P}),!n&&P&&u.jsx("button",{className:`btn btn-icon ${Z?"btn-active":""}`,"aria-label":Z?"Close search":"Open search",title:Z?"Close search":"Search",onClick:()=>pe(j=>!j),children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[u.jsx("circle",{cx:"11",cy:"11",r:"7"}),u.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),!n&&!P?u.jsx("div",{className:"toolbar-search w-[240px]",children:u.jsx("input",{ref:Me,"aria-label":"Search filename, tags, notes",placeholder:"Search...",onChange:j=>t(j.target.value),className:"toolbar-search-input input w-full focus:w-full transition-all duration-200 select-text"})}):n?u.jsx("div",{className:"toolbar-search w-[240px]","aria-hidden":"true"}):null]}),!n&&P&&Z&&u.jsx("div",{className:"toolbar-search-row",children:u.jsx("input",{ref:Me,"aria-label":"Search filename, tags, notes",placeholder:"Search...",onChange:j=>t(j.target.value),className:"toolbar-search-input-mobile input input-lg w-full select-text"})}),Bt&&u.jsx("div",{className:"mobile-drawer",children:u.jsxs("div",{className:"mobile-drawer-row",children:[u.jsxs("div",{className:"mobile-pill-group",children:[u.jsx("button",{className:`mobile-pill ${m==="grid"?"is-active":""}`,onClick:()=>h==null?void 0:h("grid"),"aria-pressed":m==="grid",children:"Grid"}),u.jsx("button",{className:`mobile-pill ${m==="adaptive"?"is-active":""}`,onClick:()=>h==null?void 0:h("adaptive"),"aria-pressed":m==="adaptive",children:"Masonry"})]}),u.jsx(sh,{value:Et,onChange:j=>d==null?void 0:d(ih(j,q)),options:hn,"aria-label":"Sort",triggerClassName:"mobile-pill mobile-pill-dropdown",panelClassName:"mobile-drawer-panel"}),u.jsx("button",{className:"mobile-pill mobile-pill-icon",onClick:pn,title:oe?"Shuffle":`Sort ${le==="desc"?"descending":"ascending"}`,"aria-label":oe?"Shuffle":"Toggle sort direction",children:oe?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),u.jsx("path",{d:"M21 3v5h-5"})]}):le==="desc"?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 5v14"}),u.jsx("path",{d:"M19 12l-7 7-7-7"})]}):u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 19V5"}),u.jsx("path",{d:"M5 12l7-7 7 7"})]})})]})})]})}function Vx(e,t){if(typeof e!="number")return null;const n=e.toLocaleString();if(typeof t!="number")return`${n} items`;const r=t.toLocaleString();return t===e?`${n} items`:`${n} / ${r} items`}function Qx(e,t){return typeof e=="number"?e:t>0?1:0}function ih(e,t){if(e.startsWith("metric:")){const n=e.slice(7);return n?{kind:"metric",key:n,dir:t.dir}:t}if(e.startsWith("builtin:")){const n=e.slice(8);if(n==="name"||n==="added"||n==="random")return{kind:"builtin",key:n,dir:t.dir}}return t}class ur extends Error{constructor(n,r,s,i){super(r);mn(this,"status");mn(this,"url");mn(this,"body");this.name="FetchError",this.status=n,this.url=s,this.body=i}}function Kx(e){const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function jg(e,t,n){if(t&&typeof t=="object"){const r=t,s=typeof r.error=="string"?r.error:null,i=typeof r.message=="string"?r.message:null;if(s&&i)return`${s}: ${i}`;if(s)return s;if(i)return i}return typeof t=="string"&&t?t:`HTTP ${e} for ${n}`}function ut(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{let a=null;const c=await l.text().catch(()=>"");if(c)if((l.headers.get("content-type")||"").includes("application/json")||Kx(c))try{a=JSON.parse(c)}catch{a=c}else a=c;if(!l.ok)throw new ur(l.status,jg(l.status,a,e),e,a);return a}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}function xo(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{if(!l.ok){const a=await l.text().catch(()=>""),c=a||null;throw new ur(l.status,jg(l.status,c,e),e,c)}return l.blob()}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}class Mg{constructor(t){mn(this,"store",new Map);mn(this,"inflight",new Map);mn(this,"totalBytes",0);this.maxBytes=t}getMaxBytes(){return this.maxBytes}getTotalBytes(){return this.totalBytes}getSize(){return this.store.size}has(t){return this.store.has(t)}isInflight(t){return this.inflight.has(t)}get(t){const n=this.store.get(t);if(n)return this.store.delete(t),this.store.set(t,n),n.blob}evictIfNeeded(t){for(;this.totalBytes+t>this.maxBytes&&this.store.size>0;){const n=this.store.keys().next().value;if(n==null)break;const r=this.store.get(n);r&&(this.totalBytes-=r.size),this.store.delete(n)}}set(t,n){const r=n.size||0;if(!(r>this.maxBytes)){if(this.store.has(t)){const s=this.store.get(t);this.totalBytes-=s.size,this.store.delete(t)}this.evictIfNeeded(r),this.store.set(t,{blob:n,size:r}),this.totalBytes+=r}}async getOrFetch(t,n){const r=this.get(t);if(r)return r;const s=this.inflight.get(t);if(s)return s.promise;const i=n(),o=typeof i=="object"&&"promise"in i,l=o?i.promise:i,a=o?i.abort:void 0,c=l.then(p=>(this.set(t,p),p)).finally(()=>{this.inflight.delete(t)});return this.inflight.set(t,{promise:c,abort:a}),c}prefetch(t,n){if(this.store.has(t)||this.inflight.has(t))return;const r=n(),s=typeof r=="object"&&"promise"in r,i=s?r.promise:r,o=s?r.abort:void 0,l=i.then(a=>(this.set(t,a),a)).catch(()=>new Blob).finally(()=>{this.inflight.delete(t)});this.inflight.set(t,{promise:l,abort:o})}cancelPrefetch(t){const n=this.inflight.get(t);if(n!=null&&n.abort)try{n.abort()}catch{}this.inflight.delete(t)}clear(){for(const[t,n]of this.inflight)if(n.abort)try{n.abort()}catch{}this.inflight.clear(),this.store.clear(),this.totalBytes=0}evictPrefix(t){const n=(()=>{const s=t?`/${t.replace(/^\/+/,"")}`:"/";return s==="/"?"/":s.replace(/\/+$/,"")})(),r=s=>{const i=s.startsWith("/")?s.replace(/\/+$/,""):`/${s.replace(/\/+$/,"")}`;return n==="/"?!0:i===n||i.startsWith(`${n}/`)};for(const[s,i]of Array.from(this.store.entries()))r(s)&&(this.totalBytes-=i.size,this.store.delete(s));for(const[s,i]of Array.from(this.inflight.entries()))if(r(s)){if(i.abort)try{i.abort()}catch{}this.inflight.delete(s)}this.totalBytes<0&&(this.totalBytes=0)}}const Zr=new Mg(60*1024*1024),qu=new Mg(20*1024*1024),_a={};function Gx(){const e=_a==null?void 0:_a.VITE_API_BASE,t=typeof window<"u",n=t?window.location.origin:"http://localhost",r=t?window.location.hostname:"localhost",s=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\]|.+\.localhost)$/i.test(r);if(!e)return"";let i;try{i=new URL(e,n)}catch{return""}const o=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\])$/i.test(i.hostname);return s?i.origin:o?"":i.origin}const Ae=Gx();const Yx=40*1024*1024,oh="lenslet.client_id",Rg="lenslet.last_event_id",qx=1e3,Xx=3e4,Jx=5;let ei=null,Oo=null,lh=0,ys=null,xs=0,Fl=!0,ml=!1;function Lg(){return typeof window<"u"&&typeof EventSource<"u"}function Fo(){if(ei)return ei;try{const e=window.localStorage.getItem(oh);if(e)return ei=e,e;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`;return window.localStorage.setItem(oh,t),ei=t,t}catch{const e=`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`;return ei=e,e}}function Fi(e="lenslet"){lh+=1;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`nonce_${Math.random().toString(36).slice(2,10)}_${Date.now()}_${lh}`;return`${e}:${Fo()}:${t}`}function Zx(){if(Oo!=null)return Oo;if(typeof window>"u")return null;try{const e=window.localStorage.getItem(Rg);if(!e)return null;const t=Number(e);return!Number.isFinite(t)||t<=0?null:(Oo=t,t)}catch{return null}}function ew(e){if(!(!Number.isFinite(e)||e<=0)&&(Oo=e,!(typeof window>"u")))try{window.localStorage.setItem(Rg,String(e))}catch{}}function tw(){if(typeof window>"u")return`${Ae}/events`;const e=new URL(`${Ae}/events`,window.location.origin),t=Zx();return t!=null&&Number.isFinite(t)&&e.searchParams.set("last_event_id",String(t)),e.toString()}function nw(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}let Qt=null,Tg="idle";const Xu=new Set,Ju=new Set,Zu=new Set;function ws(e){Tg=e;for(const t of Ju)t(e)}function dd(e){if(ml!==e){ml=e;for(const t of Zu)t(e)}}function fd(){ys!=null&&(window.clearTimeout(ys),ys=null)}function rw(){xs=0,fd()}function sw(){if(!Fl||ys!=null)return;xs+=1;const e=Math.min(qx*Math.pow(2,xs-1),Xx);xs>=Jx?(ws("offline"),dd(!0)):ws("reconnecting"),ys=window.setTimeout(()=>{ys=null,Ig()},e)}function Ig(){if(!Fl||!Lg()||(Qt&&Qt.readyState===EventSource.CLOSED&&(Qt.close(),Qt=null),Qt))return;xs>0?ws("reconnecting"):ws("connecting");const e=new EventSource(tw());Qt=e;const t=n=>r=>{const s=nw(r.data);if(!s)return;const i=r.lastEventId?Number(r.lastEventId):null,o=i!=null&&Number.isFinite(i)?i:null;o!=null&&ew(o);for(const l of Xu)l({type:n,id:o,data:s})};e.addEventListener("item-updated",t("item-updated")),e.addEventListener("metrics-updated",t("metrics-updated")),e.addEventListener("presence",t("presence")),e.onopen=()=>{rw(),dd(!1),ws("live")},e.onerror=()=>{Qt===e&&(e.close(),Qt=null,sw())}}function iw(){Fl=!0,Lg()&&(fd(),Ig())}function ow(){Fl=!1,fd(),xs=0,Qt&&(Qt.close(),Qt=null),dd(!1),ws("offline")}function lw(e){return Xu.add(e),()=>{Xu.delete(e)}}function aw(e){return Ju.add(e),e(Tg),()=>{Ju.delete(e)}}function uw(e){return Zu.add(e),e(ml),()=>{Zu.delete(e)}}function cw(){return ml}const me={getFolder:(e,t)=>{const n=new URLSearchParams({path:e});return t!=null&&n.set("page",String(t)),ut(`${Ae}/folders?${n}`).promise},search:(e,t)=>{const n=new URLSearchParams;return e&&n.set("q",e),t&&n.set("path",t),ut(`${Ae}/search?${n}`).promise},refreshFolder:e=>{const t=new URLSearchParams({path:e});return ut(`${Ae}/refresh?${t}`,{method:"POST"}).promise},getSidecar:e=>ut(`${Ae}/item?path=${encodeURIComponent(e)}`).promise,patchSidecar:(e,t,n)=>{const s={"Content-Type":"application/json","Idempotency-Key":(n==null?void 0:n.idempotencyKey)??Fi("patch"),"x-client-id":Fo(),"x-updated-by":"web"};return(n==null?void 0:n.ifMatch)!=null&&(s["If-Match"]=String(n.ifMatch)),ut(`${Ae}/item?path=${encodeURIComponent(e)}`,{method:"PATCH",headers:s,body:JSON.stringify(t)}).promise},getMetadata:e=>ut(`${Ae}/metadata?path=${encodeURIComponent(e)}`).promise,putSidecar:(e,t)=>ut(`${Ae}/item?path=${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-client-id":Fo(),"x-updated-by":"web"},body:JSON.stringify(t)}).promise,getHealth:()=>ut(`${Ae}/health`).promise,postPresence:(e,t)=>ut(`${Ae}/presence`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gallery_id:e,client_id:t??Fo()})}).promise,getThumb:e=>qu.getOrFetch(e,()=>xo(`${Ae}/thumb?path=${encodeURIComponent(e)}`)),prefetchThumb:e=>{qu.prefetch(e,()=>xo(`${Ae}/thumb?path=${encodeURIComponent(e)}`))},getFile:e=>Zr.getOrFetch(e,()=>xo(`${Ae}/file?path=${encodeURIComponent(e)}`)),prefetchFile:async e=>{if(!(Zr.has(e)||Zr.isInflight(e)))try{const t=await xo(`${Ae}/file?path=${encodeURIComponent(e)}`).promise;t.size<=Yx&&Zr.set(e,t)}catch{}},cancelPrefetch:e=>{Zr.cancelPrefetch(e)},uploadFile:async(e,t)=>{const n=new FormData;return n.append("dest",e),n.append("file",t),ut(`${Ae}/file`,{method:"POST",body:n,timeoutMs:6e4}).promise},moveFile:async(e,t)=>{const n=new FormData;return n.append("src",e),n.append("dest",t),ut(`${Ae}/move`,{method:"POST",body:n}).promise},deleteFiles:async e=>ut(`${Ae}/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:e})}).promise,exportIntent:async e=>{const t=new FormData;return t.append("path",e),ut(`${Ae}/export-intent`,{method:"POST",body:t}).promise},getViews:()=>ut(`${Ae}/views`).promise,saveViews:e=>ut(`${Ae}/views`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise};class dw{constructor(t=400){mn(this,"cache",new Map);mn(this,"maxSize");this.maxSize=t,typeof window<"u"&&window.addEventListener("beforeunload",()=>this.clear(),{once:!0})}get(t){const n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){for(this.cache.has(t)&&this.cache.delete(t);this.cache.size>=this.maxSize;){const r=this.cache.keys().next().value;if(r===void 0)break;const s=this.cache.get(r);if(this.cache.delete(r),s)try{URL.revokeObjectURL(s)}catch{}}this.cache.set(t,n)}clear(){for(const t of this.cache.values())try{URL.revokeObjectURL(t)}catch{}this.cache.clear()}}const Pa=new dw(400);function fw({path:e,name:t,onClick:n,selected:r,highlighted:s,displayW:i,displayH:o,ioRoot:l,isScrolling:a,priority:c}){const p=f.useRef(null),[d,v]=f.useState(()=>Pa.get(e)??null),[S,k]=f.useState(!1),[E,b]=f.useState(()=>!!d);return f.useEffect(()=>{const y=p.current;if(!y)return;const g=new IntersectionObserver(m=>{for(const h of m)h.target===y&&k(h.isIntersecting||h.intersectionRatio>0)},{root:l??null,rootMargin:"200px 0px",threshold:.01});return g.observe(y),()=>{g.unobserve(y),g.disconnect()}},[l]),f.useEffect(()=>{if(d||!(S&&!a||c))return;let y=!0;return me.getThumb(e).then(g=>{if(!y)return;const m=URL.createObjectURL(g);Pa.set(e,m),v(m)}).catch(()=>{}),()=>{y=!1}},[e,d,S,a,c]),f.useEffect(()=>{var g;if(!d){b(!1);return}const y=(g=p.current)==null?void 0:g.querySelector("img");y&&y.complete&&y.naturalWidth>0?b(!0):b(!1)},[d]),f.useEffect(()=>{v(Pa.get(e)??null)},[e]),u.jsx("div",{ref:p,className:`absolute inset-0 relative bg-hover border border-border rounded-lg overflow-hidden select-none ${r?"outline-2 outline-accent":""} ${s?"ring-2 ring-accent/60 animate-pulse":""} hover:outline hover:outline-1 hover:outline-accent`,onClick:n,children:d?u.jsx("img",{className:`w-full h-full object-cover block pointer-events-none select-none opacity-0 transition-opacity duration-[160ms] ${E?"opacity-100":""}`,src:d,alt:t,loading:"lazy",decoding:"async",onLoad:()=>b(!0),width:i?Math.round(i):void 0,height:o?Math.round(o):void 0}):null})}function Xr(e,t,n){let r=n.initialDeps??[],s,i=!0;function o(){var l,a,c;let p;n.key&&((l=n.debug)!=null&&l.call(n))&&(p=Date.now());const d=e();if(!(d.length!==r.length||d.some((k,E)=>r[E]!==k)))return s;r=d;let S;if(n.key&&((a=n.debug)!=null&&a.call(n))&&(S=Date.now()),s=t(...d),n.key&&((c=n.debug)!=null&&c.call(n))){const k=Math.round((Date.now()-p)*100)/100,E=Math.round((Date.now()-S)*100)/100,b=E/16,y=(g,m)=>{for(g=String(g);g.length<m;)g=" "+g;return g};console.info(`%c ${y(E,5)} /${y(k,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*b,120))}deg 100% 31%);`,n==null?void 0:n.key)}return n!=null&&n.onChange&&!(i&&n.skipInitialOnChange)&&n.onChange(s),i=!1,s}return o.updateDeps=l=>{r=l},o}function ah(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const hw=(e,t)=>Math.abs(e-t)<1.01,pw=(e,t,n)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,s),n)}},uh=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},mw=e=>e,gw=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},vw=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const s=o=>{const{width:l,height:a}=o;t({width:Math.round(l),height:Math.round(a)})};if(s(uh(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const a=o[0];if(a!=null&&a.borderBoxSize){const c=a.borderBoxSize[0];if(c){s({width:c.inlineSize,height:c.blockSize});return}}s(uh(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},ch={passive:!0},dh=typeof window>"u"?!0:"onscrollend"in window,yw=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&dh?()=>{}:pw(r,()=>{t(s,!1)},e.options.isScrollingResetDelay),o=p=>()=>{const{horizontal:d,isRtl:v}=e.options;s=d?n.scrollLeft*(v&&-1||1):n.scrollTop,i(),t(s,p)},l=o(!0),a=o(!1);a(),n.addEventListener("scroll",l,ch);const c=e.options.useScrollendEvent&&dh;return c&&n.addEventListener("scrollend",a,ch),()=>{n.removeEventListener("scroll",l),c&&n.removeEventListener("scrollend",a)}},xw=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},ww=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const o=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class Sw{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:mw,rangeExtractor:gw,onChange:()=>{},measureElement:xw,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=Xr(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=n[o];if(s.has(l.lane))continue;const a=i.get(l.lane);if(a==null||l.end>a.end?i.set(l.lane,l):l.end<a.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=Xr(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,s,i,o,l)=>(this.prevLanes!==void 0&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=Xr(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l},a)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const v of this.laneAssignments.keys())v>=n&&this.laneAssignments.delete(v);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(v=>{this.itemSizeCache.set(v.key,v.size)}));const c=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const p=this.measurementsCache.slice(0,c),d=new Array(l).fill(void 0);for(let v=0;v<c;v++){const S=p[v];S&&(d[S.lane]=v)}for(let v=c;v<n;v++){const S=i(v),k=this.laneAssignments.get(v);let E,b;if(k!==void 0&&this.options.lanes>1){E=k;const h=d[E],C=h!==void 0?p[h]:void 0;b=C?C.end+this.options.gap:r+s}else{const h=this.options.lanes===1?p[v-1]:this.getFurthestMeasurement(p,v);b=h?h.end+this.options.gap:r+s,E=h?h.lane:v%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(v,E)}const y=a.get(S),g=typeof y=="number"?y:this.options.estimateSize(v),m=b+g;p[v]={index:v,start:b,size:g,end:m,key:S,lane:E},d[E]=v}return this.measurementsCache=p,p},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Xr(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?kw({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Xr(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,o)=>i===null||o===null?[]:n({startIndex:i,endIndex:o,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=Xr(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,o=n.length;i<o;i++){const l=n[i],a=r[l];s.push(a)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return ah(r[_g(0,r.length-1,s=>ah(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(s.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const o=10,l=c=>{if(!this.targetWindow)return;const p=this.getOffsetForIndex(n,c);if(!p){console.warn("Failed to get offset for index:",n);return}const[d,v]=p;this._scrollToOffset(d,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const S=this.getScrollOffset(),k=this.getOffsetForIndex(n,v);if(!k){console.warn("Failed to get offset for index:",n);return}hw(k[0],S)||a(v)})},a=c=>{this.targetWindow&&(i++,i<o?this.targetWindow.requestAnimationFrame(()=>l(c)):console.warn(`Failed to scroll to index ${n} after ${o} attempts.`))};l(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}s=Math.max(...i.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const _g=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function kw({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const s=e.length-1,i=a=>e[a].start;if(e.length<=r)return{startIndex:0,endIndex:s};let o=_g(0,s,i,n),l=o;if(r===1)for(;l<s&&e[l].end<n+t;)l++;else if(r>1){const a=Array(r).fill(0);for(;l<s&&a.some(p=>p<n+t);){const p=e[l];a[p.lane]=p.end,l++}const c=Array(r).fill(n+t);for(;o>=0&&c.some(p=>p>=n);){const p=e[o];c[p.lane]=p.start,o--}o=Math.max(0,o-o%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const fh=typeof document<"u"?f.useLayoutEffect:f.useEffect;function Cw(e){const t=f.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var o;i?id.flushSync(t):t(),(o=e.onChange)==null||o.call(e,s,i)}},[r]=f.useState(()=>new Sw(n));return r.setOptions(n),fh(()=>r._didMount(),[]),fh(()=>r._willUpdate()),r}function Ew(e){return Cw({observeElementRect:vw,observeElementOffset:yw,scrollToFn:ww,...e})}function Nw({containerW:e,gap:t,targetCell:n,aspect:r,captionH:s}){const i=Math.max(1,Math.floor((e+t)/(n+t))),o=(e-t*(i-1))/i,l=o*r.h/r.w,a=l+s+t;return{columns:i,cellW:o,mediaH:l,rowH:a}}const bw=1.333;function jw({items:e,containerWidth:t,targetHeight:n,gap:r,captionH:s}){if(t<=0)return[];const i=[];let o=[],l=0;const a=(c,p)=>({index:i.length,height:p+s+r,imageH:p,items:c.map(d=>({item:d.item,displayW:d.aspect*p,displayH:p,originalIndex:d.originalIndex}))});for(let c=0;c<e.length;c++){const p=e[c],d=p.w>0&&p.h>0?p.w/p.h:bw;o.push({item:p,aspect:d,originalIndex:c}),l+=d;const v=(o.length-1)*r;if(l*n+v>=t){const k=(t-v)/l;i.push(a(o,k)),o=[],l=0}}return o.length>0&&i.push(a(o,n)),i}function Mw(e,t,n){return{mode:"adaptive",rows:jw({items:t,containerWidth:e,targetHeight:n.targetCell,gap:n.gap,captionH:n.captionH})}}function Rw(e,t,n){const{columns:r,cellW:s,mediaH:i,rowH:o}=Nw({containerW:e,gap:n.gap,targetCell:n.targetCell,aspect:n.aspect,captionH:n.captionH}),l=Math.ceil(t.length/Math.max(1,r));return{mode:"grid",columns:r,cellW:s,mediaH:i,rowH:o,rowCount:l}}function Lw(e,t,n){const[r,s]=f.useState(0);f.useLayoutEffect(()=>{const a=e.current;if(!a)return;const c=()=>{const d=getComputedStyle(a),v=a.clientWidth-parseFloat(d.paddingLeft)-parseFloat(d.paddingRight);s(v)},p=new ResizeObserver(c);return p.observe(a),c(),()=>p.disconnect()},[]);const i=f.useMemo(()=>n.viewMode==="adaptive"?Mw(r,t,n):Rw(r,t,n),[r,t,n.viewMode,n.gap,n.targetCell,n.aspect.w,n.aspect.h,n.captionH]),o=Ew({count:i.mode==="adaptive"?i.rows.length:i.rowCount,getScrollElement:()=>e.current,estimateSize:a=>i.mode==="adaptive"?i.rows[a].height:i.rowH,overscan:8}),l=o.getVirtualItems();return f.useEffect(()=>{o.measure()},[i,o]),{width:r,layout:i,rowVirtualizer:o,virtualRows:l}}function Tw(e,t,n,r){if(!e.length)return null;const s=n?e.findIndex(l=>l.path===n):0,i=Math.max(1,t);let o=s;if(r.key==="ArrowRight"||r.key==="d")o=Math.min(e.length-1,s+1);else if(r.key==="ArrowLeft"||r.key==="a")o=Math.max(0,s-1);else if(r.key==="ArrowDown"||r.key==="s")o=Math.min(e.length-1,s+i);else if(r.key==="ArrowUp"||r.key==="w")o=Math.max(0,s-i);else return r.key==="Enter"&&n?"open":null;return o}const gn=12,Iw=44,_w={w:4,h:3},Pw=350,Ow=120;function Fw({items:e,selected:t,restoreToSelectionToken:n,onSelectionChange:r,onOpenViewer:s,onContextMenuItem:i,highlight:o,recentlyUpdated:l,suppressSelectionHighlight:a=!1,viewMode:c="grid",targetCellSize:p=220,scrollRef:d,hideScrollbar:v=!1}){const[S,k]=f.useState(null),[E,b]=f.useState(null),[y,g]=f.useState(!1),[m,h]=f.useState(null),[C,L]=f.useState(null),T=f.useRef(null),M=f.useRef(null),I=f.useRef(null),N=d??I,D=f.useRef(null),J=p,{width:U,layout:V,rowVirtualizer:be,virtualRows:je}=Lw(N,e,{gap:gn,targetCell:J,aspect:_w,captionH:Iw,viewMode:c}),he=f.useMemo(()=>{const z=new Map;for(let ee=0;ee<e.length;ee++)z.set(e[ee].path,ee);return z},[e]),P=f.useMemo(()=>{if(V.mode!=="adaptive")return null;const z=new Map;return V.rows.forEach((ee,te)=>{let j=0;ee.items.forEach((O,G)=>{const W=j+O.displayW/2;z.set(O.item.path,{row:te,center:W,order:G}),j+=O.displayW+gn})}),z},[V]);f.useEffect(()=>{if(!t.length)return;const z=t[0];m!==z&&h(z)},[t,m]);const B=f.useMemo(()=>{if(V.mode!=="adaptive")return null;let z=0;return V.rows.map(ee=>{const te=z;return z+=ee.height,{start:te,height:ee.height}})},[V]),Z=f.useRef(null),pe=(z,ee)=>{try{if(Z.current!=null){try{cancelAnimationFrame(Z.current)}catch{}Z.current=null}const te=z.scrollTop,j=ee-te;if(Math.abs(j)<1){z.scrollTop=ee;return}const O=140,G=performance.now(),W=ve=>1-Math.pow(1-ve,3),ie=ve=>{const _e=Math.min(1,(ve-G)/O),we=W(_e);z.scrollTop=te+j*we,_e<1?Z.current=requestAnimationFrame(ie):Z.current=null};Z.current=requestAnimationFrame(ie)}catch{z.scrollTop=ee}},[ue,Me]=f.useState(!1);f.useEffect(()=>{const z=N.current;if(!z)return;let ee=0;const te=()=>{Me(!0),window.clearTimeout(ee),ee=window.setTimeout(()=>Me(!1),Ow)};return z.addEventListener("scroll",te,{passive:!0}),()=>z.removeEventListener("scroll",te)},[]);const q=()=>{M.current!=null&&(window.clearTimeout(M.current),M.current=null)},le=()=>{if(q(),g(!1),k(null),T.current){try{URL.revokeObjectURL(T.current)}catch{}T.current=null}b(null)},oe=z=>{ue||(q(),k(z),g(!1),M.current=window.setTimeout(async()=>{M.current=null;try{const ee=await me.getFile(z),te=URL.createObjectURL(ee);if(T.current)try{URL.revokeObjectURL(T.current)}catch{}T.current=te,b(te),g(!0)}catch{}},Pw))},de=V.mode==="grid"?V.columns:Math.max(1,Math.floor(U/(J+gn))),ot=(z,ee)=>{if(V.mode!=="adaptive")return null;const te=V.rows[z];if(!te)return null;let j=0,O=null;for(const G of te.items){const W=j+G.displayW/2,ie=Math.abs(W-ee);(!O||ie<O.dist)&&(O={path:G.item.path,dist:ie}),j+=G.displayW+gn}return O?O.path:null},Re=(z,ee)=>{var we,Xe,Ee,lt;if(!e.length)return null;const te=z??e[0].path;if(V.mode!=="adaptive"){const Pe=Tw(e,de,te,ee);return Pe==="open"||Pe==null?Pe:((we=e[Pe])==null?void 0:we.path)??null}const j=P==null?void 0:P.get(te);if(!j)return te;const O=he.get(te)??0,G=ee.key;if(G==="Enter")return"open";if(G==="ArrowRight"||G==="d")return((Xe=e[Math.min(e.length-1,O+1)])==null?void 0:Xe.path)??te;if(G==="ArrowLeft"||G==="a")return((Ee=e[Math.max(0,O-1)])==null?void 0:Ee.path)??te;const W=G==="ArrowDown"||G==="s"?1:G==="ArrowUp"||G==="w"?-1:0;if(W===0)return null;const ie=j.row+W;if(ie<0||ie>=(((lt=V.rows)==null?void 0:lt.length)??0))return te;const ve=j.center;return ot(ie,ve)??te},Et=z=>{var ee;try{(ee=document.getElementById(`cell-${encodeURIComponent(z)}`))==null||ee.focus()}catch{}},hn=z=>{try{me.prefetchFile(z),me.prefetchThumb(z)}catch{}},Bt=(z,ee)=>{h(z),L(z);const te=!!ee.shiftKey,j=!!(ee.ctrlKey||ee.metaKey);if(te){const O=D.current??m??t[0]??z,G=he.get(O)??e.findIndex(ie=>ie.path===O),W=he.get(z)??e.findIndex(ie=>ie.path===z);if(G!==-1&&W!==-1){const ie=Math.min(G,W),ve=Math.max(G,W),_e=e.slice(ie,ve+1).map(we=>we.path);if(j){const we=new Set(t);for(const Xe of _e)we.add(Xe);r(Array.from(we))}else r(_e)}else r([z])}else if(j){const O=new Set(t);O.has(z)?O.delete(z):O.add(z),r(Array.from(O)),D.current=z}else r([z]),D.current=z;ue||hn(z),Et(z)},mr=(z,ee)=>{var te,j;try{const O=pn.has(z)&&t.length>0?t:[z];(te=ee.dataTransfer)==null||te.setData("application/x-lenslet-paths",JSON.stringify(O)),ee.dataTransfer&&(ee.dataTransfer.effectAllowed="copyMove");try{document.body.classList.add("drag-active")}catch{}const W=ee.currentTarget.querySelector(".cell-content img"),ie=document.createElement("div");ie.className="drag-ghost";const ve=document.createElement("img");ve.draggable=!1,ve.alt="drag",W&&W.src&&(ve.src=W.src),ie.appendChild(ve),document.body.appendChild(ie);const _e=ie.getBoundingClientRect().width||150;(j=ee.dataTransfer)==null||j.setDragImage(ie,Math.round(_e/2),0);const we=()=>{try{ie.remove()}catch{}try{document.body.classList.remove("drag-active")}catch{}window.removeEventListener("dragend",we),window.removeEventListener("pointerup",we),document.removeEventListener("visibilitychange",we)};window.addEventListener("dragend",we),window.addEventListener("pointerup",we),document.addEventListener("visibilitychange",we)}catch{}};f.useEffect(()=>{const z=N.current;if(!z)return;const ee=te=>{var we,Xe,Ee;const j=Re(C,te);if(j==null)return;if(te.preventDefault(),j==="open"){C&&s(C);return}const O=e.find(lt=>lt.path===j);if(!O)return;L(O.path),h(O.path),r([O.path]);try{D.current=O.path}catch{}const G=V.mode==="grid"?Math.floor((he.get(O.path)??0)/Math.max(1,V.columns)):((we=P==null?void 0:P.get(O.path))==null?void 0:we.row)??0,W=z.scrollTop,ie=W+z.clientHeight,ve=V.mode==="adaptive"?((Xe=B==null?void 0:B[G])==null?void 0:Xe.start)??0:G*V.rowH,_e=V.mode==="adaptive"?ve+(((Ee=B==null?void 0:B[G])==null?void 0:Ee.height)??0):ve+V.rowH;(ve<W||_e>ie)&&pe(z,ve),Et(O.path)};return z.addEventListener("keydown",ee),()=>{z.removeEventListener("keydown",ee)}},[e,C,de,s,V,P,B,he]),f.useLayoutEffect(()=>{var G;const z=N.current;if(!z||!n||!t||t.length===0)return;const ee=t[0],te=he.get(ee);if(te==null||te<0)return;let j=0;if(V.mode==="grid")j=Math.floor(te/Math.max(1,V.columns));else{let W=0,ie=V.rows.length-1;for(;W<=ie;){const ve=W+ie>>1,_e=V.rows[ve];if(te>=_e.items[0].originalIndex&&te<=_e.items[_e.items.length-1].originalIndex){j=ve;break}te<_e.items[0].originalIndex?ie=ve-1:W=ve+1}}const O=V.mode==="adaptive"?((G=B==null?void 0:B[j])==null?void 0:G.start)??0:j*V.rowH;try{z.scrollTop=O}catch{}},[n,V,B]);const pn=f.useMemo(()=>new Set(t),[t]),en=!!(S&&E&&y);f.useEffect(()=>{var z;(z=N.current)==null||z.focus()},[]),f.useEffect(()=>{var z;if(a){try{(z=N.current)==null||z.blur()}catch{}try{L(null)}catch{}}},[a]);const gr=C?`cell-${encodeURIComponent(C)}`:void 0;return u.jsx("div",{role:"grid","aria-label":"Gallery",className:`relative h-full overflow-auto p-3 outline-none ${v?"scrollbar-hidden pr-4":"scrollbar-thin"} ${en?"cursor-zoom-in":""}`,ref:N,tabIndex:0,"aria-activedescendant":gr,onMouseDown:()=>{var z;return(z=N.current)==null?void 0:z.focus()},style:{"--gap":`${gn}px`},children:u.jsxs("div",{className:"relative w-full",style:{height:be.getTotalSize()},children:[je.map(z=>{var G;let ee=[],te={},j="";if(V.mode==="adaptive"){const W=V.rows[z.index];if(!W)return null;ee=W.items,te={height:W.height,transform:`translate3d(0, ${z.start}px, 0)`,display:"flex",gap:gn,paddingBottom:gn},j="absolute top-0 left-0 right-0 w-full will-change-transform"}else{const W=z.index*V.columns;ee=e.slice(W,W+V.columns).map(ve=>({item:ve,displayW:V.cellW,displayH:V.mediaH})),te={transform:`translate3d(0, ${z.start}px, 0)`,gridTemplateColumns:`repeat(${V.columns}, minmax(0, 1fr))`,gap:gn,paddingBottom:gn},j="absolute top-0 left-0 right-0 w-full grid will-change-transform"}const O=z.index===((G=je[0])==null?void 0:G.index);try{if(!ue)for(const{item:W}of ee)try{me.prefetchThumb(W.path)}catch{}}catch{}return u.jsx("div",{className:j,role:"row",style:te,children:ee.map(({item:W,displayW:ie,displayH:ve})=>{const _e=!a&&(m===W.path||pn.has(W.path)),we=(l==null?void 0:l.has(W.path))??!1,Xe=V.mode==="adaptive"?{width:ie}:{},Ee=V.mode==="adaptive"?{height:ve}:{},lt=V.mode==="adaptive"?"relative rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group shrink-0":"relative aspect-[4/3] rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group";return u.jsxs("div",{id:`cell-${encodeURIComponent(W.path)}`,className:`relative min-w-0 ${_e?"outline outline-2 outline-accent outline-offset-2 rounded-[10px]":""}`,role:"gridcell","aria-selected":_e,tabIndex:C===W.path?0:-1,onFocus:()=>L(W.path),draggable:!0,style:Xe,onDragStart:Pe=>mr(W.path,Pe),onDragEnd:()=>{},onContextMenu:Pe=>{Pe.preventDefault(),Pe.stopPropagation(),i&&i(Pe,W.path)},children:[u.jsxs("div",{className:lt,style:Ee,onMouseEnter:()=>{try{me.prefetchFile(W.path)}catch{}},onDoubleClick:()=>s(W.path),onMouseLeave:le,children:[u.jsx("div",{className:"cell-content absolute inset-0",children:u.jsx(fw,{path:W.path,name:W.name,selected:_e,highlighted:we,displayW:ie,displayH:ve,ioRoot:N.current,isScrolling:ue,priority:O,onClick:Pe=>Bt(W.path,Pe)})}),u.jsx("div",{className:"absolute right-0 bottom-0 w-7 h-7 cursor-zoom-in",onMouseEnter:()=>oe(W.path),onMouseLeave:le,children:u.jsx("div",{className:"absolute right-0 bottom-0 h-[18px] w-[18px] flex items-center justify-center text-text select-none opacity-0 group-hover:opacity-50 hover:opacity-100 transition-all duration-[140ms]",style:{clipPath:'path("M0 9C0 4.02944 4.02944 0 9 0H18V18H0V9Z")',background:"linear-gradient(135deg, rgba(18,18,18,0.9) 0%, rgba(34,34,34,0.9) 60%, rgba(22,22,22,0.9) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",borderLeft:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 1px 2px rgba(0,0,0,0.45)",backdropFilter:"blur(1px)"},children:u.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#d9dce2]","aria-hidden":"true",style:{transform:"translate(0px,0px)"},children:[u.jsx("circle",{cx:"11",cy:"11",r:"5.4"}),u.jsx("path",{d:"M15.5 15.5 L19 19"})]})})})]}),u.jsxs("div",{className:"flex flex-col items-center text-center gap-0 mt-1 px-0.5 text-white/90",children:[u.jsx("div",{className:"text-sm leading-[18px] thumb-filename line-clamp-2 break-words hyphens-auto text-center",title:W.name,children:(()=>{const Pe=(o||"").trim();if(!Pe)return W.name;const vr=W.name,yr=vr.toLowerCase().indexOf(Pe.toLowerCase());if(yr===-1)return W.name;const $l=vr.slice(0,yr),Ul=vr.slice(yr,yr+Pe.length),Bl=vr.slice(yr+Pe.length);return u.jsxs(u.Fragment,{children:[$l,u.jsx("mark",{className:"bg-accent/20 text-inherit rounded px-0.5",children:Ul}),Bl]})})()}),u.jsxs("div",{className:"text-[11px] leading-[15px] opacity-70",children:[W.w,"  ",W.h]})]})]},W.path)})},z.key)}),S&&E&&y&&id.createPortal(u.jsx("div",{className:"toolbar-offset fixed inset-0 z-[999] flex items-center justify-center pointer-events-none bg-black/20 opacity-100",children:u.jsx("img",{src:E,alt:"preview",className:"max-w-[80vw] max-h-[80vh] object-contain opacity-[0.98]"})}),document.body)]},`${c}-${de}`)})}const Dw=48,zw=[.1,.24,.5,.74,.9];function Aw({items:e,metricKey:t,scrollRef:n,sortDir:r}){const{orderedValues:s,numericValues:i}=f.useMemo(()=>{var N;const M=[],I=[];for(const D of e){const J=(N=D.metrics)==null?void 0:N[t],U=J==null||Number.isNaN(J)?null:J;M.push(U),U!=null&&I.push(U)}return{orderedValues:M,numericValues:I}},[e,t]),o=f.useMemo(()=>$w(i,Dw),[i]),l=f.useMemo(()=>Uw(i,zw),[i]),[a,c]=f.useState(0),[p,d]=f.useState(null),[v,S]=f.useState(!1),k=f.useRef(null);if(f.useEffect(()=>{const M=n.current;if(!M)return;const I=()=>{const N=Math.max(1,M.scrollHeight-M.clientHeight),D=jr(N>0?M.scrollTop/N:0);c(D)};return I(),M.addEventListener("scroll",I,{passive:!0}),window.addEventListener("resize",I),()=>{M.removeEventListener("scroll",I),window.removeEventListener("resize",I)}},[n,e.length]),f.useEffect(()=>{d(null)},[t,e.length]),!o)return null;const E={min:o.min,max:o.max},b=p!=null?ph(p):null,y=ph(a),g=r==="desc",m=f.useMemo(()=>p==null?null:Hw(s,p),[s,p]);function h(M){d(jr(M))}function C(){d(null)}function L(M){const I=n.current;if(!I)return;const N=Math.max(0,I.scrollHeight-I.clientHeight);I.scrollTop=jr(M)*N}function T(M){var N;const I=(N=k.current)==null?void 0:N.getBoundingClientRect();return I?jr((M.clientY-I.top)/I.height):null}return u.jsxs("div",{className:"absolute right-0 top-3 bottom-3 w-[14px] flex items-stretch pointer-events-auto",children:[u.jsxs("svg",{ref:k,viewBox:"0 0 10 100",preserveAspectRatio:"none",className:"w-full h-full rounded bg-surface-inset border border-border/60 cursor-ns-resize",onPointerDown:M=>{var N;M.preventDefault();const I=T(M);I!=null&&(S(!0),h(I),L(I),(N=k.current)==null||N.setPointerCapture(M.pointerId))},onPointerMove:M=>{const I=T(M);if(I==null){v||C();return}h(I),v&&L(I)},onPointerUp:M=>{var I;S(!1),(I=k.current)==null||I.releasePointerCapture(M.pointerId)},onPointerLeave:()=>{v||C()},children:[Bw(o.bins,"var(--border-strong)",{flip:g}),Ww(l,E,{flip:g,color:"var(--muted)"}),hh(y,{color:"var(--highlight)",strokeWidth:.8}),b!=null&&hh(b,{color:"var(--text-secondary)",strokeWidth:.6,dashed:!0})]}),m!=null&&p!=null&&u.jsx("div",{className:"pointer-events-none absolute right-full mr-2 px-1.5 py-0.5 rounded border border-border bg-surface text-[10px] text-text shadow",style:{top:`calc(${(p*100).toFixed(2)}% - 8px)`},children:Qw(m)})]})}function $w(e,t){if(!e.length)return null;const n=Math.min(...e);let r=Math.max(...e);n===r&&(r=n+1);const s=new Array(t).fill(0),i=t/(r-n);for(const o of e){const l=Math.max(0,Math.min(t-1,Math.floor((o-n)*i)));s[l]+=1}return{bins:s,min:n,max:r}}function Uw(e,t){if(!e.length)return[];const n=[...e].sort((s,i)=>s-i),r=n.length-1;return t.map(s=>{const i=r*s,o=Math.floor(i),l=Math.ceil(i);if(o===l)return n[o];const a=i-o;return n[o]+(n[l]-n[o])*a})}function Bw(e,t,n){const r=Math.max(1,...e),s=100/e.length,i=(n==null?void 0:n.flip)??!1;return e.map((o,l)=>{const a=Math.max(.8,o/r*10),c=(i?e.length-1-l:l)*s;return u.jsx("rect",{x:10-a,y:c,width:a,height:Math.max(.2,s-.2),fill:t,opacity:.9},`sb-${l}`)})}function Ww(e,t,n){const r=(n==null?void 0:n.flip)??!1,s=n==null?void 0:n.color;return e.map((i,o)=>{const l=Vw(i,t,r),a=o===2;return u.jsx("line",{x1:0,y1:l,x2:10,y2:l,stroke:s,strokeWidth:a?.8:.5,opacity:a?.9:.6,vectorEffect:"non-scaling-stroke"},`qt-${o}-${i}`)})}function hh(e,t){return u.jsx("line",{x1:0,y1:e,x2:10,y2:e,stroke:t.color,strokeWidth:t.strokeWidth??.6,strokeDasharray:t.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function Hw(e,t){if(!e.length)return null;const n=Math.round(jr(t)*(e.length-1)),r=e[n];if(r!=null)return r;for(let s=1;s<e.length;s++){const i=n-s;if(i>=0&&e[i]!=null)return e[i];const o=n+s;if(o<e.length&&e[o]!=null)return e[o]}return null}function Vw(e,t,n){const r=t.max-t.min;if(r===0)return 0;const s=jr((e-t.min)/r);return(n?1-s:s)*100}function ph(e){return jr(e)*100}function jr(e){return e<0?0:e>1?1:e}function Qw(e){if(e==null||Number.isNaN(e))return"-";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function ec(e,t){const[n,r]=f.useState(null),s=f.useRef(null);return f.useEffect(()=>{if(!e){if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}r(null);return}let i=!0;return e().then(o=>{if(!i)return;const l=URL.createObjectURL(o);if(s.current)try{URL.revokeObjectURL(s.current)}catch{}s.current=l,r(l)}).catch(()=>{}),()=>{i=!1}},t),f.useEffect(()=>()=>{if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}},[]),n}function Kw(){const[e,t]=f.useState(1),[n,r]=f.useState(0),[s,i]=f.useState(0),[o,l]=f.useState(1),[a,c]=f.useState(!1),[p,d]=f.useState(!1),[v,S]=f.useState(!1),k=f.useRef(null),E=f.useRef(null),b=()=>{const m=k.current,h=E.current;if(!m||!h||!h.naturalWidth||!h.naturalHeight)return;const C=m.getBoundingClientRect(),L=C.width/h.naturalWidth,T=C.height/h.naturalHeight,M=Math.min(1,Math.min(L,T));l(M);const I=h.naturalWidth*M,N=h.naturalHeight*M;r((C.width-I)/2),i((C.height-N)/2)};return f.useEffect(()=>{const m=k.current;if(!m)return;const h=new ResizeObserver(()=>{try{requestAnimationFrame(()=>b())}catch{b()}});return h.observe(m),()=>h.disconnect()},[]),{scale:e,setScale:t,tx:n,setTx:r,ty:s,setTy:i,base:o,setBase:l,ready:a,setReady:c,dragging:p,setDragging:d,visible:v,setVisible:S,containerRef:k,imgRef:E,fitAndCenter:b,handleWheel:m=>{m.preventDefault();const h=m.deltaY>0?-1:1,C=1.2,L=.05,T=8,M=k.current;if(!M)return;const I=M.getBoundingClientRect(),N=m.clientX-I.left,D=m.clientY-I.top;t(J=>{const U=Math.min(T,Math.max(L,J*Math.pow(C,h))),V=U/J;return r(be=>N-V*(N-be)),i(be=>D-V*(D-be)),Number(U.toFixed(4))})},handleMouseDown:m=>{const h=k.current,C=E.current;if(!h||!C||m.target!==C)return;const T=h.getBoundingClientRect();if(m.clientX<T.left||m.clientX>T.right||m.clientY<T.top||m.clientY>T.bottom)return;m.preventDefault(),m.stopPropagation(),d(!0);const M=m.clientX,I=m.clientY,N=n,D=s,J=V=>{r(N+(V.clientX-M)),i(D+(V.clientY-I))},U=()=>{window.removeEventListener("mousemove",J),window.removeEventListener("mouseup",U),d(!1)};window.addEventListener("mousemove",J),window.addEventListener("mouseup",U)}}}function Gw({path:e,onClose:t,onNavigate:n,onZoomChange:r,requestedZoomPercent:s,onZoomRequestConsumed:i}){const{scale:o,setScale:l,tx:a,setTx:c,ty:p,setTy:d,base:v,ready:S,setReady:k,dragging:E,visible:b,setVisible:y,containerRef:g,imgRef:m,fitAndCenter:h,handleWheel:C,handleMouseDown:L}=Kw(),T=ec(()=>me.getFile(e),[e]),M=ec(()=>me.getThumb(e),[e]),I=f.useCallback(()=>{y(!1),window.setTimeout(t,110)},[t,y]);return f.useEffect(()=>{requestAnimationFrame(()=>{var N;y(!0),(N=g.current)==null||N.focus()})},[e]),f.useEffect(()=>{const N=D=>{D.key==="Escape"?I():(D.key==="ArrowRight"||D.key==="d")&&n?n(1):(D.key==="ArrowLeft"||D.key==="a")&&n&&n(-1)};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[t,n]),f.useEffect(()=>{k(!1)},[T]),f.useEffect(()=>{r&&r(v*o*100)},[v,o,r]),f.useEffect(()=>{if(s==null)return;const N=g.current;if(!N){i&&i();return}const D=Math.max(.05,Math.min(8,s/100/Math.max(1e-6,v))),J=N.getBoundingClientRect(),U=J.width/2,V=J.height/2;l(be=>{const je=D/be;return c(he=>U-je*(U-he)),d(he=>V-je*(V-he)),Number(D.toFixed(4))}),i&&i()},[s,v,i]),u.jsxs("div",{ref:g,role:"dialog","aria-modal":!0,"aria-label":"Image viewer",tabIndex:-1,className:`toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] flex items-start justify-start bg-panel z-viewer overflow-hidden transition-opacity duration-[110ms] ease-out cursor-grab focus:outline-none focus-visible:outline-none ${E?"cursor-grabbing select-none":""} ${b?"opacity-100":"opacity-0"}`,style:{outline:"none"},onClick:I,onWheel:C,onMouseDown:L,onKeyDown:N=>{N.key==="Tab"&&N.preventDefault()},children:[u.jsxs("button",{"aria-label":"Close",onClick:N=>{N.stopPropagation(),I()},className:"btn btn-sm absolute top-3 right-3 z-10",title:"Close (Esc)",children:[u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"M6 6l12 12"})]}),"Close"]}),M&&u.jsx("img",{src:M,alt:"thumb",className:"absolute top-0 left-0 max-w-none max-h-none object-contain pointer-events-none transition-opacity duration-[110ms] ease-out",draggable:!1,onDragStart:N=>N.preventDefault(),style:{transform:`translate(${a}px, ${p}px) scale(${v})`,transformOrigin:"0 0",opacity:S?0:.5,filter:"blur(0.25px)"}}),T&&u.jsx("img",{ref:m,src:T,alt:"viewer",className:"max-w-none max-h-none object-contain transition-opacity duration-[110ms] ease-out will-change-transform select-none",draggable:!1,onDragStart:N=>{N.preventDefault()},onLoad:N=>{h(),l(1);try{requestAnimationFrame(()=>k(!0))}catch{k(!0)}},onClick:N=>N.stopPropagation(),style:{transform:`translate(${a}px, ${p}px) scale(${v*o})`,transformOrigin:"0 0",opacity:S?.99:0,WebkitUserDrag:"none"}})]})}function Dl(){const[e,t]=f.useState(cw());return f.useEffect(()=>uw(t),[]),e}const Di=e=>["item",e],Yw={v:1,tags:[],notes:"",version:1,updated_at:"",updated_by:"web"},Ht=new Map,Do=new Map,tc=new Map,hd=new Map;let mh=0;const fn=new Map,li=new Map,qw=12e3,nc=new Set,rc=new Set;let pd={state:"idle"},zi=null,sc=0;function wo(e){pd=e;for(const t of nc)t(e)}function jn(){const e=fn.size>0,t=Ht.size+Do.size+sc;if(e){wo({state:"error",message:"Conflict detected"});return}if(zi){wo({state:"error",message:zi});return}if(t>0){wo({state:"syncing"});return}wo({state:"idle"})}function md(){let e=null;for(const t of tc.values())e=e==null?t:Math.min(e,t);for(const t of hd.values())e=e==null?t:Math.min(e,t);return e}function gl(){const e=md();for(const t of rc)t(e)}function vl(e){zi=e,jn()}function Pg(){zi&&(zi=null,jn())}function gh(e){sc=Math.max(0,sc+e),jn()}function Xw(){mh+=1;const e=mh;return hd.set(e,Date.now()),gl(),e}function Jw(e){e!=null&&hd.delete(e)&&gl()}function zl(e){const t=li.get(e);if(!t||!t.size)return;const n=fn.get(e)??null;for(const r of t)r(n)}function vh(e){return fn.get(e)??null}function Al(e){fn.delete(e)&&(zl(e),jn())}function Zw(e,t){fn.set(e,t),zl(e),jn()}function e1(e,t){const n=li.get(e)??new Set;return n.add(t),li.set(e,n),t(fn.get(e)??null),()=>{const r=li.get(e);r&&(r.delete(t),r.size||li.delete(e))}}function t1(e){const[t,n]=f.useState(()=>e?vh(e):null);return f.useEffect(()=>{if(!e){n(null);return}return n(vh(e)),e1(e,n)},[e]),t}function n1(e){return nc.add(e),e(pd),()=>{nc.delete(e)}}function r1(){const[e,t]=f.useState(pd);return f.useEffect(()=>n1(t),[]),e}function s1(e){return rc.add(e),e(md()),()=>{rc.delete(e)}}function i1(){const[e,t]=f.useState(()=>md()),[n,r]=f.useState(()=>e==null?null:Date.now()-e);return f.useEffect(()=>s1(t),[]),f.useEffect(()=>{if(e==null){r(null);return}r(Date.now()-e);const s=window.setInterval(()=>{r(Date.now()-e)},1e3);return()=>window.clearInterval(s)},[e]),n}function ic(e){const t={};return Object.prototype.hasOwnProperty.call(e,"star")&&(t.set_star=e.star??null),Object.prototype.hasOwnProperty.call(e,"notes")&&(t.set_notes=e.notes??""),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.set_tags=Array.isArray(e.tags)?e.tags:[]),t}function oc(e){var t,n;return e.set_star!==void 0||e.set_notes!==void 0||e.set_tags!==void 0||(((t=e.add_tags)==null?void 0:t.length)??0)>0||(((n=e.remove_tags)==null?void 0:n.length)??0)>0}function ti(e){const t=[],n=new Set;for(const r of e??[]){if(typeof r!="string")continue;const s=r.trim();!s||n.has(s)||(n.add(s),t.push(s))}return t}function o1(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}function l1(e,t){if(e.set_star!==void 0&&(t.star??null)!==e.set_star||e.set_notes!==void 0&&(t.notes??"")!==(e.set_notes??""))return!1;if(e.set_tags!==void 0){const r=ti(e.set_tags),s=ti(t.tags);return o1(r,s)}const n=ti(t.tags);for(const r of ti(e.add_tags))if(!n.includes(r))return!1;for(const r of ti(e.remove_tags))if(n.includes(r))return!1;return!0}function Og(e,t,n){if(n instanceof ur&&n.status===409){const r=n.body;if(r!=null&&r.current)return Zw(e,{path:e,current:r.current,pending:t,receivedAt:new Date().toISOString()}),!0}return!1}function a1(e,t){const n=fn.get(e);if(n){if(l1(n.pending,t)){Al(e);return}fn.set(e,{...n,current:t}),zl(e),jn()}}function u1(e){const t=Dl();return cd({queryKey:Di(e),queryFn:()=>me.getSidecar(e),enabled:!!e,staleTime:3e4,gcTime:5*6e4,retry:2,refetchInterval:t?qw:!1,refetchIntervalInBackground:t})}function c1(e){const t=Yr();return Ux({mutationFn:async({patch:n,baseVersion:r,idempotencyKey:s})=>{const i=ic(n);if(!oc(i))return t.getQueryData(Di(e))??Yw;const o={...i,base_version:r};try{return await me.patchSidecar(e,o,{idempotencyKey:s??Fi("patch"),ifMatch:r})}catch(l){throw Og(e,i,l),l}},retry:(n,r)=>r instanceof ur&&r.status===409?!1:n<2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),4e3),onMutate:()=>(Pg(),gh(1),{inflightId:Xw()}),onSuccess:n=>{Al(e),t.setQueryData(Di(e),n)},onError:n=>{n instanceof ur&&n.status===409||(n instanceof ur?vl(n.message):vl("Failed to save"))},onSettled:(n,r,s,i)=>{gh(-1),Jw(i==null?void 0:i.inflightId)}})}const d1=6;async function yh(e,t){if(!e.length)return;let n=0;const r=[],s=async()=>{for(;n<e.length;){const o=n++,l=e[o];try{await Fg(l,t)}catch(a){r.push({path:l,error:a}),console.error(`[bulkUpdateSidecars] Failed for ${l}:`,a)}}},i=Array.from({length:Math.min(d1,e.length)},()=>s());if(await Promise.all(i),r.length===e.length)throw new Error(`All ${e.length} sidecar updates failed`)}async function Fg(e,t){const n=Ht.get(e)||{};Ht.set(e,{...n,...t}),Pg(),jn();const r=Do.get(e);if(r)return r;tc.set(e,Date.now()),gl();const s=(async()=>{try{for(;Ht.has(e);){const i=Ht.get(e);if(!i)break;const o=ic(i);if(!oc(o)){Ht.get(e)===i&&Ht.delete(e);continue}let l=1;try{l=(await me.getSidecar(e)).version??1}catch{l=1}const a={...o,base_version:l};try{await me.patchSidecar(e,a,{idempotencyKey:Fi("patch"),ifMatch:l}),Al(e),Ht.get(e)===i&&Ht.delete(e)}catch(c){if(Og(e,o,c)){const d=Ht.get(e);if(d&&d!==i){const v=ic(d);if(oc(v)){const S=fn.get(e);S&&(fn.set(e,{...S,pending:v}),zl(e))}}Ht.delete(e)}else c instanceof ur?vl(c.message):vl("Failed to save");throw c}}}finally{Do.delete(e),tc.delete(e),gl(),jn()}})();return Do.set(e,s),jn(),s}function Oa(e){const t=["B","KB","MB","GB","TB"];let n=0,r=e;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${r.toFixed(1)} ${t[n]}`}function Fa(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function f1(e,t=28){if(e.length<=t)return e;const n=Math.max(4,Math.floor((t-1)/2));return`${e.slice(0,n)}${e.slice(-n)}`}const h1=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});function p1(e){const t=e.trim();return!t||/[zZ]|[+-]\d{2}:?\d{2}$/.test(t)?t:`${t.includes("T")?t:t.replace(" ","T")}Z`}function xh(e){if(!e)return null;const t=Date.parse(p1(e));return Number.isFinite(t)?t:null}function m1(e,t=Date.now()){const n=Math.max(0,t-e),r=Math.max(1,Math.floor(n/1e3));if(r<60)return`${r} second${r===1?"":"s"} ago`;const s=Math.floor(r/60);if(s<60)return`${s} minute${s===1?"":"s"} ago`;const i=Math.floor(s/60);return`${i} hour${i===1?"":"s"} ago`}function g1(e){return h1.format(new Date(e))}function Dg(e){return!e||!(e instanceof HTMLElement)?!1:e.closest('input, textarea, [contenteditable="true"]')!==null}function zo(e){if(Array.isArray(e))return e.map(zo);if(e&&typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,zo(n)]));if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")||t.startsWith('"')&&t.endsWith('"'))try{const r=JSON.parse(t);return zo(r)}catch{return e}}return e}function Da(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function v1(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function wh(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}function y1(e){const t=/(\"(\\u[a-fA-F0-9]{4}|\\[^u]|[^\\"])*\"(?:\s*:)?|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\btrue\b|\bfalse\b|\bnull\b)/g;let n="",r=0;for(const s of e.matchAll(t)){const i=s.index??0,o=s[0];n+=Da(e.slice(r,i));let l="var(--json-fallback)";o.startsWith('"')&&o.trimEnd().endsWith(":")?l="var(--json-key)":o.startsWith('"')?l="var(--json-string)":/true|false|null/.test(o)?l="var(--json-literal)":l="var(--json-number)",n+=`<span style="color:${l}">${Da(o)}</span>`,r=i+o.length}return n+=Da(e.slice(r)),n}const x1=["overview","basics","metadata","notes"],Sh="lenslet.inspector.sections",kh="lenslet.inspector.metricsExpanded",za=12,w1={overview:!0,metadata:!0,basics:!0,notes:!0};function So({title:e,open:t,onToggle:n,actions:r,children:s,contentClassName:i}){const[o,l]=f.useState(t),[a,c]=f.useState(t?"open":"closed");return f.useEffect(()=>{if(t){l(!0);const d=window.requestAnimationFrame(()=>c("open"));return()=>window.cancelAnimationFrame(d)}c("closing");const p=window.setTimeout(()=>{l(!1),c("closed")},140);return()=>window.clearTimeout(p)},[t]),u.jsxs("div",{className:"border-b border-border",children:[u.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[u.jsxs("button",{type:"button",onClick:n,"aria-expanded":t,className:"flex items-center gap-2 ui-section-title hover:text-text transition-colors",children:[u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform ${t?"rotate-90":""}`,"aria-hidden":"true",children:u.jsx("path",{d:"m9 18 6-6-6-6"})}),u.jsx("span",{children:e})]}),r]}),o&&u.jsx("div",{className:"inspector-section-body","data-state":a,"aria-hidden":!t,children:u.jsx("div",{className:i??"px-3 pb-3",children:s})})]})}function S1({path:e,selectedPaths:t=[],items:n=[],onResize:r,onStarChanged:s,sortSpec:i}){const o=!!e,{data:l,isLoading:a}=u1(e??""),c=c1(e??""),p=Yr(),[d,v]=f.useState(w1),S=f.useCallback(j=>{v(O=>({...O,[j]:!O[j]}))},[]),[k,E]=f.useState(!1),[b,y]=f.useState(""),[g,m]=f.useState(""),[h,C]=f.useState(""),[L,T]=f.useState(null),[M,I]=f.useState("idle"),[N,D]=f.useState(!1),[J,U]=f.useState(null),[V,be]=f.useState({}),he=f.useMemo(()=>{const j=n.find(O=>O.path===e);return j&&j.star!==void 0?j.star:null},[n,e])??(l==null?void 0:l.star)??null,P=t.length>1,B=t1(P?null:e),Z={tags:!!(B!=null&&B.pending.set_tags),notes:(B==null?void 0:B.pending.set_notes)!==void 0,star:(B==null?void 0:B.pending.set_star)!==void 0},pe=f.useMemo(()=>{const j=new Set(t);return n.filter(O=>j.has(O.path))},[n,t]),ue=f.useMemo(()=>pe.reduce((j,O)=>j+(O.size||0),0),[pe]);f.useEffect(()=>{l&&(y((l.tags||[]).join(", ")),m(l.notes||"")),C(""),T(null),I("idle"),D(!1)},[l==null?void 0:l.updated_at,e]);const Me=f.useCallback(j=>{if(P&&t.length){yh(t,j);return}if(!e)return;const O=(l==null?void 0:l.version)??1;c.mutate({patch:j,baseVersion:O,idempotencyKey:Fi("patch")})},[P,t,e,l==null?void 0:l.version,c]),q=f.useCallback(()=>{if(!B||!e)return;const j={};B.pending.set_tags!==void 0&&(j.tags=wh(b)),B.pending.set_notes!==void 0&&(j.notes=g),B.pending.set_star!==void 0&&(j.star=he??null);const O=B.current.version??1;c.mutate({patch:j,baseVersion:O,idempotencyKey:Fi("patch")})},[B,e,b,g,he,c]),le=f.useCallback(()=>{if(!B||!e)return;const j=B.current;y((j.tags||[]).join(", ")),m(j.notes||""),p.setQueryData(Di(e),j),Al(e),s==null||s([e],j.star??null)},[B,e,p,s]);f.useEffect(()=>{if(!e)return;const j=O=>{if(Dg(O.target))return;const G=O.key;if(!/^[0-5]$/.test(G))return;O.preventDefault();const W=G==="0"?null:Number(G);if(P&&t.length){Me({star:W}),s==null||s(t,W);return}Me({star:W}),s==null||s([e],W)};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[e,P,t,Me,s]);const oe=ec(e?()=>me.getThumb(e):null,[e]),de=e?e.split("/").pop()||e:"",ot=f.useMemo(()=>{var O;if(de.includes("."))return de.slice(de.lastIndexOf(".")+1).toUpperCase();const j=n.find(G=>G.path===e);return(O=j==null?void 0:j.type)!=null&&O.includes("/")?j.type.split("/")[1].toUpperCase():""},[de,n,e]),Re=f.useMemo(()=>n.find(j=>j.path===e),[n,e]),Et=f.useMemo(()=>e?(Re==null?void 0:Re.source)??e:"",[Re,e]),hn=f.useCallback(async()=>{if(e){I("loading"),T(null);try{const j=await me.getMetadata(e),O=zo(j.meta),G=JSON.stringify(O,null,2);C(G),I("loaded")}catch(j){const O=j instanceof Error?j.message:"Failed to load metadata";C(O),T(O),I("error")}}},[e]),Bt=f.useCallback(()=>{var j;h&&((j=navigator.clipboard)==null||j.writeText(h).then(()=>{D(!0),setTimeout(()=>D(!1),1200)}).catch(O=>{const G=O instanceof Error?O.message:"Copy failed";T(G)}))},[h]),mr=f.useMemo(()=>h?y1(h):"",[h]),pn=M==="loading"?"Loading metadata":h||"PNG metadata not loaded yet.",en=M==="loaded"&&!!h,gr=en?"h-48":"h-24",z=P?null:u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[h&&u.jsx("button",{className:"text-muted underline underline-offset-2 hover:text-text disabled:opacity-60 min-w-[48px] text-center",onClick:Bt,disabled:!h,title:"Copy metadata",children:N?"Copied":"Copy"}),u.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[78px]",onClick:hn,disabled:!e||M==="loading",children:M==="loading"?"Loading":"Load meta"})]});f.useEffect(()=>{try{const j=localStorage.getItem(Sh);if(!j)return;const O=JSON.parse(j);if(!O||typeof O!="object")return;const G={};for(const W of x1)typeof O[W]=="boolean"&&(G[W]=O[W]);Object.keys(G).length>0&&v(W=>({...W,...G}))}catch{}},[]),f.useEffect(()=>{try{localStorage.setItem(Sh,JSON.stringify(d))}catch{}},[d]),f.useEffect(()=>{try{const j=localStorage.getItem(kh);j==="1"||j==="true"?E(!0):(j==="0"||j==="false")&&E(!1)}catch{}},[]),f.useEffect(()=>{try{localStorage.setItem(kh,k?"1":"0")}catch{}},[k]);const ee=f.useCallback((j,O)=>{var G;O&&((G=navigator.clipboard)==null||G.writeText(O).then(()=>{U(j),setTimeout(()=>U(W=>W===j?null:W),1e3)}).catch(()=>{}))},[]),te=f.useCallback((j,O)=>{if(O&&!V[j]){const G=O.offsetHeight;G&&be(W=>W[j]?W:{...W,[j]:G})}},[V]);return o?u.jsxs("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:[!P&&u.jsx("div",{className:"p-3 border-b border-border flex justify-center",children:u.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border w-[220px] h-[160px] bg-panel select-none",children:[oe&&u.jsx("img",{src:oe,alt:"thumb",className:"block w-full h-full object-contain"}),!!ot&&u.jsx("div",{className:"absolute top-1.5 left-1.5 bg-surface border border-border text-text text-xs px-1.5 py-0.5 rounded-md select-none",children:ot})]})}),u.jsx(So,{title:P?"Selection":"Item",open:d.overview,onToggle:()=>S("overview"),children:P?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"font-mono text-muted break-all",children:[t.length," files selected"]}),u.jsxs("div",{className:"font-mono text-muted break-all",children:["Total size: ",Oa(ue)]})]}):u.jsx("div",{className:"font-mono text-text break-all",title:de,children:de})}),u.jsxs(So,{title:"Basics",open:d.basics,onToggle:()=>S("basics"),children:[u.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",role:"radiogroup","aria-label":"Star rating",children:[u.jsx("span",{className:"ui-kv-label w-16 shrink-0",children:P?"Rating (all)":"Rating"}),u.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(j=>{const O=(he??0)>=j;return u.jsx("button",{className:`w-6 h-6 flex items-center justify-center rounded-lg border border-border/60 bg-transparent text-[13px] ${O?"text-star-active":"text-star-inactive"} hover:border-border hover:text-star-hover transition-colors`,onClick:()=>{const G=he===j&&!P?null:j;P&&t.length?(s==null||s(t,G),yh(t,{star:G})):e&&(s==null||s([e],G),Fg(e,{star:G}))},title:`${j} star${j>1?"s":""} (key ${j})`,"aria-label":`${j} star${j>1?"s":""}`,"aria-pressed":he===j,children:O?"":""},j)})})]}),!P&&B&&Z.star&&u.jsxs("div",{className:"ui-banner ui-banner-danger mt-2 text-[11px] flex items-center justify-between gap-2",children:[u.jsx("span",{children:"Rating conflict."}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{className:"btn btn-sm",onClick:q,children:"Apply again"}),u.jsx("button",{className:"btn btn-sm btn-ghost",onClick:le,children:"Keep theirs"})]})]}),!P&&Re&&u.jsxs("div",{className:"text-[12px] space-y-1",children:[u.jsxs("div",{className:"ui-kv-row",children:[u.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ee("dimensions",`${Re.w}${Re.h}`),children:"Dimensions"}),u.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:j=>te("dimensions",j),style:V.dimensions?{minHeight:V.dimensions}:void 0,children:J==="dimensions"?"Copied":`${Re.w}${Re.h}`})]}),u.jsxs("div",{className:"ui-kv-row",children:[u.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ee("size",Oa(Re.size)),children:"Size"}),u.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:j=>te("size",j),style:V.size?{minHeight:V.size}:void 0,children:J==="size"?"Copied":Oa(Re.size)})]}),u.jsxs("div",{className:"ui-kv-row",children:[u.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ee("type",Re.type),children:"Type"}),u.jsx("span",{className:"ui-kv-value break-all text-right inline-block min-w-[80px]",ref:j=>te("type",j),style:V.type?{minHeight:V.type}:void 0,children:J==="type"?"Copied":Re.type})]}),u.jsxs("div",{className:"ui-kv-row",children:[u.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Et&&ee("source",Et),children:"Source"}),u.jsx("span",{className:"ui-kv-value break-all text-right max-w-[70%] inline-block min-w-[80px]",ref:j=>te("source",j),style:V.source?{minHeight:V.source}:void 0,children:J==="source"?"Copied":Et})]}),(()=>{const j=Re.metrics||null;if(!j)return null;const O=Object.entries(j).filter(([,Ee])=>Ee!=null);if(!O.length)return null;const G=(i==null?void 0:i.kind)==="metric"?i.key:null,W=[...O].sort(([Ee],[lt])=>Ee.localeCompare(lt));let ie=W;if(G){const Ee=W.findIndex(([lt])=>lt===G);Ee>0&&(ie=[W[Ee],...W.slice(0,Ee),...W.slice(Ee+1)])}const ve=ie.length>za,we=k||!ve?ie:ie.slice(0,za),Xe=ie.length-za;return u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"ui-subsection-title mb-1",children:"Metrics"}),u.jsxs("div",{className:"space-y-1",children:[we.map(([Ee,lt])=>{const Pe=G===Ee;return u.jsxs("div",{className:"ui-kv-row",children:[u.jsx("span",{className:`w-24 shrink-0 ${Pe?"text-accent font-medium":"ui-kv-label"}`,children:Ee}),u.jsx("span",{className:`ui-kv-value text-right ${Pe?"text-accent font-medium":""}`,children:v1(lt)})]},Ee)}),ve&&u.jsx("button",{type:"button",className:"text-[11px] text-muted underline underline-offset-2 hover:text-text",onClick:()=>E(Ee=>!Ee),"aria-expanded":k,children:k?"Show less":`+${Xe} more`})]})]})})()]})]}),!P&&u.jsxs(So,{title:"Metadata",open:d.metadata,onToggle:()=>S("metadata"),actions:z,children:[u.jsx("pre",{className:`ui-code-block ${gr} overflow-auto whitespace-pre-wrap`,children:en?u.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:mr}}):pn}),L&&u.jsx("div",{className:"text-[11px] text-danger mt-1 break-words",children:L})]}),u.jsxs(So,{title:"Notes & Tags",open:d.notes,onToggle:()=>S("notes"),contentClassName:"px-3 pb-3 space-y-2",children:[!P&&B&&(Z.tags||Z.notes)&&u.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[u.jsx("div",{className:"font-semibold",children:"Conflicting edits detected."}),u.jsx("div",{className:"text-[11px] text-muted mt-0.5",children:"Your changes were not saved because this item was updated elsewhere."}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsx("button",{className:"btn btn-sm",onClick:q,children:"Apply my changes again"}),u.jsx("button",{className:"btn btn-sm btn-ghost",onClick:le,children:"Keep theirs"})]})]}),u.jsx("textarea",{className:"ui-textarea w-full scrollbar-thin",placeholder:"Add notes",value:g,onChange:j=>m(j.target.value),onBlur:()=>{Me({notes:g})},"aria-label":P?"Notes for selected items":"Notes"}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-label",children:P?"Tags (apply to all, comma-separated)":"Tags (comma-separated)"}),u.jsx("input",{className:"ui-input w-full",placeholder:"tag1, tag2",value:b,onChange:j=>y(j.target.value),onBlur:()=>{Me({tags:wh(b)})},"aria-label":P?"Tags for selected items":"Tags"})]})]}),u.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 right-[calc(var(--right)-3px)] hover:bg-accent/20",onMouseDown:r})]}):u.jsx("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:u.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 right-[calc(var(--right)-3px)] hover:bg-accent/20",onMouseDown:r})})}const k1=e=>["folder",e],C1=15e3;function zg(e){const t=Dl();return cd({queryKey:k1(e),queryFn:()=>me.getFolder(e),staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),5e3),refetchOnWindowFocus:!1,refetchInterval:t?C1:!1,refetchIntervalInBackground:t})}const E1=(e,t)=>["search",e,t],N1=2e4;function b1(e,t){const n=Dl();return cd({enabled:!!e.trim(),queryKey:E1(e,t),queryFn:()=>me.search(e,t),staleTime:3e3,gcTime:6e4,placeholderData:r=>r,retry:1,refetchInterval:n?N1:!1,refetchIntervalInBackground:n})}const j1=/^[\/@a-zA-Z0-9._\-\/]{1,512}$/;function an(e){try{const t=decodeURI(e||""),r=(t.startsWith("/")?t:`/${t}`).replace(/\/{2,}/g,"/"),s=r.length>1?r.replace(/\/$/,""):r;return j1.test(s)?s:"/"}catch{return"/"}}function Ch(){return(window.location.hash||"").replace(/^#/,"")}function M1(e){const t=an(e),n=`#${encodeURI(t)}`;window.location.hash!==n&&(window.location.hash=n)}function gd(e,t){const n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,""),s=[n,r].filter(Boolean).join("/");return s.startsWith("/")?s:`/${s}`}function R1(e){const n=an(e).split("/").filter(Boolean);return n.length<=1?"/":"/"+n.slice(0,-1).join("/")}function L1(e){return e.endsWith("/_trash_")}const T1=new Set([0,1,2,3,4,5]),vd=new Set(["<","<=",">",">="]),I1=/^\d{4}-\d{2}-\d{2}$/;function _1(e,t){return!t||!t.and.length?e:e.filter(n=>P1(n,t.and))}function P1(e,t){for(const n of t)if(!O1(e,n))return!1;return!0}function O1(e,t){var n,r,s,i,o,l,a;if("stars"in t){const c=t.stars;if(!c||!c.length)return!0;const p=e.star??0;return c.includes(p)}if("starsIn"in t){const c=t.starsIn.values;if(!c||!c.length)return!0;const p=e.star??0;return c.includes(p)}if("starsNotIn"in t){const c=t.starsNotIn.values;if(!c||!c.length)return!0;const p=e.star??0;return!c.includes(p)}if("nameContains"in t){const c=(n=t.nameContains.value)==null?void 0:n.trim();return c?(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("nameNotContains"in t){const c=(r=t.nameNotContains.value)==null?void 0:r.trim();return c?!(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("commentsContains"in t){const c=(s=t.commentsContains.value)==null?void 0:s.trim();if(!c)return!0;const p=e.comments??"";return p?p.toLowerCase().includes(c.toLowerCase()):!1}if("commentsNotContains"in t){const c=(i=t.commentsNotContains.value)==null?void 0:i.trim();if(!c)return!0;const p=e.comments??"";return p?!p.toLowerCase().includes(c.toLowerCase()):!1}if("urlContains"in t){const c=(o=t.urlContains.value)==null?void 0:o.trim();if(!c)return!0;const p=e.source??e.url??"";return p?p.toLowerCase().includes(c.toLowerCase()):!1}if("urlNotContains"in t){const c=(l=t.urlNotContains.value)==null?void 0:l.trim();if(!c)return!0;const p=e.source??e.url??"";return p?!p.toLowerCase().includes(c.toLowerCase()):!1}if("dateRange"in t){const{from:c,to:p}=t.dateRange;if(!c&&!p)return!0;if(!e.addedAt)return!1;const d=Date.parse(e.addedAt);if(Number.isNaN(d))return!1;const v=bh(c,!1),S=bh(p,!0);return!(v!=null&&d<v||S!=null&&d>S)}if("widthCompare"in t){const{op:c,value:p}=t.widthCompare;if(!Number.isFinite(p))return!0;const d=e.w;return!Number.isFinite(d)||d<=0?!1:jh(d,c,p)}if("heightCompare"in t){const{op:c,value:p}=t.heightCompare;if(!Number.isFinite(p))return!0;const d=e.h;return!Number.isFinite(d)||d<=0?!1:jh(d,c,p)}if("metricRange"in t){const{key:c,min:p,max:d}=t.metricRange,v=(a=e.metrics)==null?void 0:a[c];return!(v==null||v<p||v>d)}return!0}function lc(e){if(!e||typeof e!="object")return null;const t=e.and;if(!Array.isArray(t))return null;const n=[];for(const r of t){const s=q1(r);s&&n.push(s)}return{and:n}}function Eh(e){var r;const t=e.and.find(s=>"stars"in s),n=e.and.find(s=>"starsIn"in s);return(r=n==null?void 0:n.starsIn)!=null&&r.values?n.starsIn.values:(t==null?void 0:t.stars)??[]}function Aa(e,t){return Ag(e,t)}function F1(e){var n;const t=e.and.find(r=>"starsIn"in r);return((n=t==null?void 0:t.starsIn)==null?void 0:n.values)??[]}function Ag(e,t){const n=vi(t),r=e.and.filter(s=>!("starsIn"in s)&&!("stars"in s));return n.length?{and:[{starsIn:{values:n}},...r]}:{and:r}}function D1(e){var n;const t=e.and.find(r=>"starsNotIn"in r);return((n=t==null?void 0:t.starsNotIn)==null?void 0:n.values)??[]}function $g(e,t){const n=vi(t),r=e.and.filter(s=>!("starsNotIn"in s));return n.length?{and:[{starsNotIn:{values:n}},...r]}:{and:r}}function z1(e){var n;const t=e.and.find(r=>"nameContains"in r);return((n=t==null?void 0:t.nameContains)==null?void 0:n.value)??null}function Ug(e,t){const n=Dt(t),r=e.and.filter(s=>!("nameContains"in s));return n?{and:[{nameContains:{value:n}},...r]}:{and:r}}function A1(e){var n;const t=e.and.find(r=>"nameNotContains"in r);return((n=t==null?void 0:t.nameNotContains)==null?void 0:n.value)??null}function Bg(e,t){const n=Dt(t),r=e.and.filter(s=>!("nameNotContains"in s));return n?{and:[{nameNotContains:{value:n}},...r]}:{and:r}}function $1(e){var n;const t=e.and.find(r=>"commentsContains"in r);return((n=t==null?void 0:t.commentsContains)==null?void 0:n.value)??null}function Wg(e,t){const n=Dt(t),r=e.and.filter(s=>!("commentsContains"in s));return n?{and:[{commentsContains:{value:n}},...r]}:{and:r}}function U1(e){var n;const t=e.and.find(r=>"commentsNotContains"in r);return((n=t==null?void 0:t.commentsNotContains)==null?void 0:n.value)??null}function Hg(e,t){const n=Dt(t),r=e.and.filter(s=>!("commentsNotContains"in s));return n?{and:[{commentsNotContains:{value:n}},...r]}:{and:r}}function B1(e){var n;const t=e.and.find(r=>"urlContains"in r);return((n=t==null?void 0:t.urlContains)==null?void 0:n.value)??null}function Vg(e,t){const n=Dt(t),r=e.and.filter(s=>!("urlContains"in s));return n?{and:[{urlContains:{value:n}},...r]}:{and:r}}function W1(e){var n;const t=e.and.find(r=>"urlNotContains"in r);return((n=t==null?void 0:t.urlNotContains)==null?void 0:n.value)??null}function Qg(e,t){const n=Dt(t),r=e.and.filter(s=>!("urlNotContains"in s));return n?{and:[{urlNotContains:{value:n}},...r]}:{and:r}}function H1(e){const t=e.and.find(n=>"dateRange"in n);return(t==null?void 0:t.dateRange)??null}function ac(e,t){const n=yl((t==null?void 0:t.from)??null),r=yl((t==null?void 0:t.to)??null),s=e.and.filter(i=>!("dateRange"in i));return!n&&!r?{and:s}:{and:[{dateRange:{...n?{from:n}:{},...r?{to:r}:{}}},...s]}}function V1(e){const t=e.and.find(n=>"widthCompare"in n);return(t==null?void 0:t.widthCompare)??null}function Ao(e,t){const n=e.and.filter(r=>!("widthCompare"in r));return!t||!Number.isFinite(t.value)||!vd.has(t.op)?{and:n}:{and:[{widthCompare:{op:t.op,value:t.value}},...n]}}function Q1(e){const t=e.and.find(n=>"heightCompare"in n);return(t==null?void 0:t.heightCompare)??null}function $o(e,t){const n=e.and.filter(r=>!("heightCompare"in r));return!t||!Number.isFinite(t.value)||!vd.has(t.op)?{and:n}:{and:[{heightCompare:{op:t.op,value:t.value}},...n]}}function K1(e,t){const n=e.and.find(r=>"metricRange"in r&&r.metricRange.key===t);return(n==null?void 0:n.metricRange)??null}function G1(e,t,n){const r=e.and.filter(s=>!("metricRange"in s&&s.metricRange.key===t));return n?{and:[{metricRange:{key:t,min:n.min,max:n.max}},...r]}:{and:r}}function Y1(e){const t=lc(e);return t?t.and.length:0}function q1(e){var t,n,r,s,i,o,l,a;if(!e||typeof e!="object")return null;if("stars"in e){const c=vi(e.stars);return c.length?{starsIn:{values:c}}:null}if("starsIn"in e){const c=vi((t=e.starsIn)==null?void 0:t.values);return c.length?{starsIn:{values:c}}:null}if("starsNotIn"in e){const c=vi((n=e.starsNotIn)==null?void 0:n.values);return c.length?{starsNotIn:{values:c}}:null}if("nameContains"in e){const c=Dt((r=e.nameContains)==null?void 0:r.value);return c?{nameContains:{value:c}}:null}if("nameNotContains"in e){const c=Dt((s=e.nameNotContains)==null?void 0:s.value);return c?{nameNotContains:{value:c}}:null}if("commentsContains"in e){const c=Dt((i=e.commentsContains)==null?void 0:i.value);return c?{commentsContains:{value:c}}:null}if("commentsNotContains"in e){const c=Dt((o=e.commentsNotContains)==null?void 0:o.value);return c?{commentsNotContains:{value:c}}:null}if("urlContains"in e){const c=Dt((l=e.urlContains)==null?void 0:l.value);return c?{urlContains:{value:c}}:null}if("urlNotContains"in e){const c=Dt((a=e.urlNotContains)==null?void 0:a.value);return c?{urlNotContains:{value:c}}:null}if("dateRange"in e){const c=e.dateRange,p=yl((c==null?void 0:c.from)??null),d=yl((c==null?void 0:c.to)??null);return!p&&!d?null:{dateRange:{...p?{from:p}:{},...d?{to:d}:{}}}}if("widthCompare"in e){const c=e.widthCompare,p=Nh(c==null?void 0:c.op,c==null?void 0:c.value);return p?{widthCompare:p}:null}if("heightCompare"in e){const c=e.heightCompare,p=Nh(c==null?void 0:c.op,c==null?void 0:c.value);return p?{heightCompare:p}:null}if("metricRange"in e){const c=e.metricRange;if(!c||typeof c!="object")return null;const p=typeof c.key=="string"?c.key:"",d=uc(c.min),v=uc(c.max);return!p||d==null||v==null||d>v?null:{metricRange:{key:p,min:d,max:v}}}return null}function vi(e){if(!Array.isArray(e))return[];const t=[],n=new Set;for(const r of e){const s=typeof r=="number"?r:typeof r=="string"?Number(r):NaN;!Number.isInteger(s)||!T1.has(s)||n.has(s)||(n.add(s),t.push(s))}return t}function Dt(e){if(typeof e!="string")return null;const t=e.trim();return t||null}function yl(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=Date.parse(t);return Number.isNaN(n)?null:t}function Nh(e,t){if(typeof e!="string"||!vd.has(e))return null;const n=uc(t);return n==null?null:{op:e,value:n}}function bh(e,t){if(!e)return null;const n=e.trim();if(!n)return null;const r=Date.parse(n);return Number.isNaN(r)?null:t&&I1.test(n)?r+24*60*60*1e3-1:r}function jh(e,t,n){switch(t){case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;default:return!0}}function uc(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function Mh(e){return e.addedAt?Date.parse(e.addedAt):0}function xl(e,t){return e.name.localeCompare(t.name)}function X1(e,t){const n=Mh(e),r=Mh(t);return n===r?xl(e,t):n-r}function J1(e){return(t,n)=>{var i,o;const r=(i=t.metrics)==null?void 0:i[e],s=(o=n.metrics)==null?void 0:o[e];return r==null&&s==null?xl(t,n):r==null?1:s==null?-1:r===s?xl(t,n):r-s}}function Z1(e,t){return _1(e,t)}function eS(e){let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function tS(e,t){const n=eS(t||1),r=[...e];for(let s=r.length-1;s>0;s-=1){const i=Math.floor(n()*(s+1));[r[s],r[i]]=[r[i],r[s]]}return r}function nS(e,t,n){if(t.kind==="builtin"&&t.key==="random"){const i=n??Date.now();return tS(e,i)}let r=X1;t.kind==="metric"?r=J1(t.key):t.key==="name"&&(r=xl);const s=[...e].sort(r);return t.dir==="desc"?s.reverse():s}function rS(e){const[t,n]=f.useState(250),[r,s]=f.useState(240),i=f.useRef(t),o=f.useRef(r);return f.useEffect(()=>{i.current=t},[t]),f.useEffect(()=>{o.current=r},[r]),f.useEffect(()=>{try{const c=window.localStorage,p=Number(c.getItem("leftW"));Number.isFinite(p)&&p>0&&n(p);const d=Number(c.getItem("rightW"));Number.isFinite(d)&&d>0&&s(d)}catch{}},[]),{leftW:t,rightW:r,onResizeLeft:c=>{c.preventDefault();const p=e.current;if(!p)return;const d=p.getBoundingClientRect(),v=k=>{const E=k.clientX-d.left,b=200,y=Math.max(b,d.width-o.current-200),g=Math.min(Math.max(E,b),y);n(g)},S=()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",S);try{window.localStorage.setItem("leftW",String(i.current))}catch{}};window.addEventListener("mousemove",v),window.addEventListener("mouseup",S)},onResizeRight:c=>{c.preventDefault();const p=e.current;if(!p)return;const d=p.getBoundingClientRect(),v=k=>{const E=k.clientX-d.left,b=d.width-E,y=240,g=Math.max(y,d.width-i.current-200),m=Math.min(Math.max(b,y),g);s(m)},S=()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",S);try{window.localStorage.setItem("rightW",String(o.current))}catch{}};window.addEventListener("mousemove",v),window.addEventListener("mouseup",S)}}}function sS({x:e,y:t,items:n}){return u.jsx("div",{className:"dropdown-panel fixed",role:"menu",style:{left:e,top:t,minWidth:180},onClick:r=>r.stopPropagation(),children:n.map((r,s)=>u.jsxs("button",{className:`dropdown-item w-full ${r.danger?"text-danger hover:text-danger":""}`,role:"menuitem","aria-disabled":r.disabled,disabled:r.disabled,onClick:i=>{i.stopPropagation(),r.disabled||r.onClick()},children:[r.icon&&u.jsx("span",{className:"shrink-0",children:r.icon}),u.jsx("span",{children:r.label})]},s))})}function Rh(e){return JSON.stringify(e,null,2)}function Lh(e){const t=s=>'"'+s.replaceAll('"','""')+'"',n="path,folder,name,star,type,size,width,height,tags,notes",r=e.map(s=>{const i=(s.tags||[]).join(" "),o=s.notes||"";return[s.path,s.folder,s.name,String(s.star??""),s.type??"",s.size??"",s.width??"",s.height??"",i,o].map(l=>t(String(l))).join(",")});return[n,...r].join(`
`)}function $a(e){return e.map(t=>{const n=t.path.split("/").filter(Boolean);n.pop();const r=n.length?`/${n.join("/")}`:"/";return{path:t.path,folder:r,name:t.name,star:t.star??null,type:t.type,size:t.size,width:t.w,height:t.h}})}function iS(e,t=250){const[n,r]=Bo.useState(e);return Bo.useEffect(()=>{const s=window.setTimeout(()=>r(e),Math.max(0,t));return()=>window.clearTimeout(s)},[e,t]),n}const Kg="application/x-lenslet-paths",oS='[role="treeitem"].drop-target';function Th(e){var n;return Array.from(((n=e.dataTransfer)==null?void 0:n.types)||[]).includes(Kg)}function lS(e){document.querySelectorAll(oS).forEach(t=>{t!==e&&t.classList.remove("drop-target")})}function Ih(e){lS(e),e.classList.add("drop-target")}function _h(e){return e.startsWith("/")?e:`/${e}`}function aS({path:e,isLeaf:t}){const n=Yr(),r=f.useCallback(l=>{Th(l)&&(l.preventDefault(),t&&Ih(l.currentTarget))},[t]),s=f.useCallback(l=>{!t||!Th(l)||(l.preventDefault(),Ih(l.currentTarget))},[t]),i=f.useCallback(l=>{const a=l.currentTarget,c=document.elementFromPoint(l.clientX,l.clientY);c&&a.contains(c)||a.classList.remove("drop-target")},[]),o=f.useCallback(async l=>{const a=l.dataTransfer;if(!a)return;l.preventDefault(),l.currentTarget.classList.remove("drop-target");const c=a.getData(Kg),d=(c?JSON.parse(c):[]).filter(Boolean);if(!d.length)return;let v=d[0].split("/").slice(0,-1).join("/")||"/";v=_h(v);const S=_h(e);try{for(const k of d)await me.moveFile(k,S);n.invalidateQueries({queryKey:["folder",v]}),n.invalidateQueries({queryKey:["folder",S]}),n.setQueryData(["folder",v],k=>!k||!Array.isArray(k.items)?k:{...k,items:k.items.filter(E=>!d.includes(E.path))})}catch{}},[e,n]);return{onDragOver:r,onDragEnter:s,onDragLeave:i,onDrop:o}}const uS='[role="tree"] [role="treeitem"]';function cS(){return Array.from(document.querySelectorAll(uS))}function dS(e,t){var i;const n=cS(),r=n.findIndex(o=>o===e);if(r===-1)return;let s=r;t==="ArrowDown"?s=Math.min(n.length-1,r+1):t==="ArrowUp"?s=Math.max(0,r-1):t==="Home"?s=0:t==="End"&&(s=n.length-1),(i=n[s])==null||i.focus()}function fS({path:e,isLeaf:t,isExpanded:n,setExpanded:r,onOpen:s}){return f.useCallback(i=>{if(i.key==="Enter"){i.preventDefault(),s(e);return}if(i.key==="ArrowRight"){!t&&!n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.add(e),l}));return}if(i.key==="ArrowLeft"){!t&&n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.delete(e),l}));return}(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="Home"||i.key==="End")&&(i.preventDefault(),dS(i.currentTarget,i.key))},[e,t,n,r,s])}function hS({current:e,roots:t,data:n,onOpen:r,onResize:s,onContextMenu:i,className:o,showResizeHandle:l=!0}){const[a,c]=f.useState(new Set(["/"])),p=f.useRef(new Map),d=f.useRef(new Map),v=f.useCallback(async(k,E)=>{const b=an(k||"/"),y=p.current,g=d.current,m=y.get(b);if(m!==void 0)return m;const h=g.get(b);if(h)return h;const C=(async()=>{let L=0;const T=new Set,M=[{path:b,index:E}];for(;M.length;){const I=M.pop(),{path:N,index:D}=I;if(T.has(N))continue;T.add(N);let J=D;if(!J)try{J=await me.getFolder(N)}catch(U){console.warn(`Failed to count folder ${N}:`,U);continue}L+=J.items.length;for(const U of J.dirs)U.kind==="branch"&&M.push({path:gd(N,U.name)})}return y.set(b,L),g.delete(b),L})();return g.set(b,C),C},[]);f.useEffect(()=>{const k=e.split("/").filter(Boolean),E=["/"];let b="";for(const y of k)b=b?`${b}/${y}`:`/${y}`,E.push(b);c(y=>{const g=new Set(y);for(const m of E)g.add(m);return g})},[e]);const S=o??"h-full overflow-auto bg-panel scrollbar-thin";return u.jsxs("div",{className:S,children:[u.jsx("div",{className:"p-1",role:"tree","aria-label":"Folders",children:t.map(k=>u.jsx(Gg,{path:k.path,label:k.label,depth:0,current:e,expanded:a,setExpanded:c,onOpen:r,onContextMenu:i,initial:n,getSubtreeCount:v},k.path))}),l&&u.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 left-[calc(var(--left)-3px)] hover:bg-accent/20",onMouseDown:s})]})}function Gg({path:e,label:t,depth:n,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,initial:a,getSubtreeCount:c}){var T,M;const p=s.has(e),{data:d}=zg(e),v=a&&e===a.path?a:d,S=r===e,k=(((T=v==null?void 0:v.dirs)==null?void 0:T.length)??0)===0,[E,b]=f.useState(v?v.items.length:null),y=fS({path:e,isLeaf:k,isExpanded:p,setExpanded:i,onOpen:o}),{onDragOver:g,onDragEnter:m,onDragLeave:h,onDrop:C}=aS({path:e,isLeaf:k}),L=I=>{I.stopPropagation(),i(N=>{const D=new Set(N);return D.has(e)?D.delete(e):D.add(e),D})};return f.useEffect(()=>{let I=!1;if(!v){b(null);return}return b(v.items.length),c(e,v).then(N=>{I||b(N)}).catch(N=>{I||console.warn(`Failed to compute subtree count for ${e}:`,N)}),()=>{I=!0}},[v,e,c]),u.jsxs("div",{children:[u.jsxs("div",{className:`flex items-center gap-1.5 py-0.5 px-2 rounded-md cursor-pointer min-h-[28px] outline-none transition-colors duration-75 ${S?"bg-accent/20 text-accent font-medium":"hover:bg-white/5 text-text"}`,role:"treeitem","aria-level":n+1,"aria-expanded":k?void 0:p,"aria-selected":S,tabIndex:S?0:-1,style:{paddingLeft:8+n*14},onClick:()=>o(e),onContextMenu:I=>{I.preventDefault(),I.stopPropagation(),l&&l(I,e)},onKeyDown:y,onDragOver:g,onDragEnter:m,onDragLeave:h,onDrop:C,children:[u.jsx("span",{className:"w-4 text-center opacity-60 hover:opacity-100 text-[10px]",onClick:L,children:p?"":""}),u.jsx("span",{className:"flex-1 overflow-hidden truncate text-sm",title:t,children:f1(t,28)}),E!==null&&u.jsx("span",{className:"text-[10px] opacity-50 bg-white/5 border border-white/5 rounded px-1.5 min-w-[24px] text-center",children:E})]}),p&&((M=v==null?void 0:v.dirs)==null?void 0:M.map(I=>u.jsx(Gg,{path:gd(e,I.name),label:I.name,depth:n+1,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,getSubtreeCount:c},I.name)))]})}const Mr=40,pS=12,Ph=[5,4,3,2,1],Oh=["<","<=",">",">="];function mS({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l,onChangeFilters:a}){const c=r&&r.length?u.jsx(gS,{selectedItems:r,metricKeys:n}):null,p=u.jsx(vS,{filters:o,onChangeFilters:a});return n.length?u.jsxs("div",{className:"h-full flex flex-col gap-2 px-3 py-2 overflow-auto scrollbar-thin",children:[c,u.jsx(yS,{items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}),p]}):u.jsxs("div",{className:"h-full flex flex-col gap-2 px-3 py-2 overflow-auto scrollbar-thin",children:[c,p,u.jsx("div",{className:"p-4 text-sm text-muted",children:"No metrics found in this dataset."})]})}function gS({selectedItems:e,metricKeys:t}){const n=f.useMemo(()=>{if(!e.length)return null;const a=new Map;for(const d of e){const v=d.metrics;if(v)for(const[S,k]of Object.entries(v)){if(k==null||Number.isNaN(k))continue;const E=a.get(S);E?E.push(k):a.set(S,[k])}}return a.size?{entries:(t.length?t.filter(d=>a.has(d)):Array.from(a.keys()).sort()).map(d=>{const v=a.get(d)??[],S=Math.min(...v),k=Math.max(...v),E=v.reduce((b,y)=>b+y,0)/Math.max(1,v.length);return{key:d,value:v[0],min:S,max:k,avg:E,count:v.length}}),totalItems:e.length}:null},[e,t]);if(!n)return null;const{entries:r,totalItems:s}=n,i=r.slice(0,pS),o=r.length-i.length,l=s>1;return u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"ui-section-title",children:"Selected metrics"}),u.jsxs("div",{className:"text-[11px] text-muted",children:[s," item",s===1?"":"s"]})]}),u.jsxs("div",{className:"space-y-1 text-[12px]",children:[i.map(a=>u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsx("span",{className:"text-muted w-28 shrink-0 truncate",title:a.key,children:a.key}),u.jsxs("span",{className:"font-mono text-text text-right tabular-nums",children:[l?`${bt(a.min)}  ${bt(a.max)}`:bt(a.value),l&&u.jsxs("span",{className:"text-[11px] text-muted ml-2",children:["avg ",bt(a.avg),a.count!==s?`  ${a.count}/${s}`:""]})]})]},a.key)),o>0&&u.jsxs("div",{className:"text-[11px] text-muted",children:["+",o," more"]})]})]})}function vS({filters:e,onChangeFilters:t}){const n=f.useMemo(()=>F1(e),[e]),r=f.useMemo(()=>D1(e),[e]),s=f.useMemo(()=>z1(e)??"",[e]),i=f.useMemo(()=>A1(e)??"",[e]),o=f.useMemo(()=>$1(e)??"",[e]),l=f.useMemo(()=>U1(e)??"",[e]),a=f.useMemo(()=>B1(e)??"",[e]),c=f.useMemo(()=>W1(e)??"",[e]),p=f.useMemo(()=>H1(e)??{},[e]),d=f.useMemo(()=>Bh(p.from),[p.from]),v=f.useMemo(()=>Bh(p.to),[p.to]),S=f.useMemo(()=>V1(e),[e]),k=f.useMemo(()=>Q1(e),[e]),[E,b]=f.useState((S==null?void 0:S.op)??">="),[y,g]=f.useState((k==null?void 0:k.op)??">=");f.useEffect(()=>{S!=null&&S.op&&b(S.op)},[S==null?void 0:S.op]),f.useEffect(()=>{k!=null&&k.op&&g(k.op)},[k==null?void 0:k.op]);const m=(h,C)=>{const L=new Set(n),T=new Set(r);h==="include"?L.has(C)?L.delete(C):(L.add(C),T.delete(C)):T.has(C)?T.delete(C):(T.add(C),L.delete(C));let M=Ag(e,Array.from(L));M=$g(M,Array.from(T)),t(M)};return u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"ui-section-title",children:"Attributes"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-1.5",children:"Rating"}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("div",{children:[u.jsx("div",{className:"ui-label",children:"Include"}),u.jsxs("div",{className:"flex flex-wrap gap-1",children:[Ph.map(h=>{const C=n.includes(h);return u.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${C?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>m("include",h),"aria-pressed":C,title:`Include ${h} star${h>1?"s":""}`,children:[h,""]},`stars-in-${h}`)}),u.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${n.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>m("include",0),"aria-pressed":n.includes(0),title:"Include unrated",children:"None"})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-label",children:"Exclude"}),u.jsxs("div",{className:"flex flex-wrap gap-1",children:[Ph.map(h=>{const C=r.includes(h);return u.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${C?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>m("exclude",h),"aria-pressed":C,title:`Exclude ${h} star${h>1?"s":""}`,children:[h,""]},`stars-out-${h}`)}),u.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${r.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>m("exclude",0),"aria-pressed":r.includes(0),title:"Exclude unrated",children:"None"})]})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-1.5",children:"Filename"}),u.jsxs("div",{className:"grid grid-cols-1 gap-1.5",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Contains"}),u.jsx("input",{className:"ui-input w-full",value:s,placeholder:"e.g. draft",onChange:h=>t(Ug(e,h.target.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Does not contain"}),u.jsx("input",{className:"ui-input w-full",value:i,placeholder:"e.g. v1",onChange:h=>t(Bg(e,h.target.value))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-1.5",children:"Comments"}),u.jsxs("div",{className:"grid grid-cols-1 gap-1.5",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Contains"}),u.jsx("input",{className:"ui-input w-full",value:o,placeholder:"e.g. hero",onChange:h=>t(Wg(e,h.target.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Does not contain"}),u.jsx("input",{className:"ui-input w-full",value:l,placeholder:"e.g. todo",onChange:h=>t(Hg(e,h.target.value))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-1.5",children:"URL"}),u.jsxs("div",{className:"grid grid-cols-1 gap-1.5",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Contains"}),u.jsx("input",{className:"ui-input w-full",value:a,placeholder:"e.g. s3://bucket",onChange:h=>t(Vg(e,h.target.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Does not contain"}),u.jsx("input",{className:"ui-input w-full",value:c,placeholder:"e.g. http://",onChange:h=>t(Qg(e,h.target.value))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-1.5",children:"Date Added"}),u.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"From"}),u.jsx("input",{type:"date",className:"ui-input w-full",value:d,onChange:h=>t(ac(e,{from:h.target.value||null,to:p.to??null}))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"To"}),u.jsx("input",{type:"date",className:"ui-input w-full",value:v,onChange:h=>t(ac(e,{from:p.from??null,to:h.target.value||null}))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-1.5",children:"Dimensions"}),u.jsxs("div",{className:"grid grid-cols-1 gap-1.5",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Width"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("select",{className:"ui-select ui-select-compact w-16",value:E,onChange:h=>{const C=h.target.value;b(C),S&&t(Ao(e,{op:C,value:S.value}))},children:Oh.map(h=>u.jsx("option",{value:h,children:h},`w-${h}`))}),u.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:S?String(S.value):"",min:0,placeholder:"px",onChange:h=>{const C=h.target.value;if(!C){t(Ao(e,null));return}const L=Number(C);Number.isFinite(L)&&t(Ao(e,{op:E,value:L}))}})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Height"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("select",{className:"ui-select ui-select-compact w-16",value:y,onChange:h=>{const C=h.target.value;g(C),k&&t($o(e,{op:C,value:k.value}))},children:Oh.map(h=>u.jsx("option",{value:h,children:h},`h-${h}`))}),u.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:k?String(k.value):"",min:0,placeholder:"px",onChange:h=>{const C=h.target.value;if(!C){t($o(e,null));return}const L=Number(C);Number.isFinite(L)&&t($o(e,{op:y,value:L}))}})]})]})]})]})]})]})}function yS({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}){const[a,c]=f.useState(!1),p=s&&n.includes(s)?s:n[0];return u.jsxs("div",{className:"space-y-2",children:[u.jsx("div",{className:"ui-section-title",children:"Metrics"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsx("label",{className:"ui-label",children:"Metric"}),u.jsx("button",{className:"btn btn-sm btn-ghost text-[11px]",onClick:()=>c(d=>!d),"aria-pressed":a,children:a?"Show one":"Show all"})]}),a?u.jsx("div",{className:"ui-input ui-input-readonly w-full flex items-center text-xs",children:"All metrics"}):u.jsx("select",{className:"ui-select w-full",value:p,onChange:d=>i(d.target.value),children:n.map(d=>u.jsx("option",{value:d,children:d},d))})]}),a?u.jsx("div",{className:"space-y-3",children:n.map(d=>u.jsx(Fh,{metricKey:d,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l,showTitle:!0},d))}):p?u.jsx(Fh,{metricKey:p,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l}):u.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]})}function Fh({items:e,filteredItems:t,metricKey:n,selectedItems:r,filters:s,onChangeRange:i,showTitle:o=!1}){const l=f.useMemo(()=>Dh(e,n),[e,n]),a=f.useMemo(()=>Ua(l,Mr),[l]),c=f.useMemo(()=>Dh(t,n),[t,n]),p=f.useMemo(()=>a?Ua(c,Mr,a):null,[c,a]),d=K1(s,n),[v,S]=f.useState(null),[k,E]=f.useState(!1),b=f.useRef(null),y=f.useRef(null),g=f.useRef(!1),m=f.useRef(null),[h,C]=f.useState(null),[L,T]=f.useState(""),[M,I]=f.useState(""),[N,D]=f.useState(null),J=v??d,U=a?{min:a.min,max:a.max}:null,V=f.useMemo(()=>{var le;if(!(r!=null&&r.length))return[];const q=[];for(const oe of r){const de=(le=oe.metrics)==null?void 0:le[n];de==null||Number.isNaN(de)||q.push(de)}return q},[r,n]),be=V.length===1?V[0]:null,je=f.useMemo(()=>!a||V.length<2?null:Ua(V,Mr,a),[V,a]);f.useEffect(()=>{if(!d||!U){N!=="min"&&T(d?Dn(d.min):""),N!=="max"&&I(d?Dn(d.max):"");return}if(N!=="min"){const q=Jr(d.min,U.min)?"":Dn(d.min);T(q)}if(N!=="max"){const q=Jr(d.max,U.max)?"":Dn(d.max);I(q)}},[d,U,N]),f.useEffect(()=>{C(null)},[n,U==null?void 0:U.min,U==null?void 0:U.max]);const he=q=>{var de;if(!U)return null;const le=(de=m.current)==null?void 0:de.getBoundingClientRect();if(!le)return null;const oe=yd((q.clientX-le.left)/le.width);return U.min+(U.max-U.min)*oe},P=(q,le)=>{if(!U)return;const oe=b.current??q,de=Ah(oe,q);S(de),le&&i(n,de)},B=q=>{var oe;if(!U)return;q.preventDefault();const le=he(q);le!=null&&(E(!0),S(null),b.current=le,y.current=q.clientX,g.current=!1,C(le),(oe=m.current)==null||oe.setPointerCapture(q.pointerId))},Z=q=>{const le=he(q);if(le==null){k||C(null);return}if(C(le),k){const oe=y.current;if(!g.current&&oe!=null){if(Math.abs(q.clientX-oe)<4)return;g.current=!0}g.current&&P(le,!1)}},pe=q=>{var oe;if(!k)return;E(!1),(oe=m.current)==null||oe.releasePointerCapture(q.pointerId);const le=he(q);g.current&&le!=null?(C(le),P(le,!0)):d&&i(n,null),b.current=null,y.current=null,g.current=!1,setTimeout(()=>S(null),0)},ue=(q,le)=>{if(!U)return;const oe=$h(q),de=$h(le);if(!oe.valid||!de.valid){oe.valid||T(d?Dn(d.min):""),de.valid||I(d?Dn(d.max):"");return}if(oe.value==null&&de.value==null){i(n,null);return}const ot=oe.value??U.min,Re=de.value??U.max,Et=Uh(ot,U.min,U.max),hn=Uh(Re,U.min,U.max),Bt=Ah(Et,hn);if(Jr(Bt.min,U.min)&&Jr(Bt.max,U.max)){i(n,null);return}i(n,Bt)};if(!a||!U)return u.jsxs("div",{className:"space-y-1",children:[o&&u.jsx("div",{className:"ui-subsection-title",children:n}),u.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]});const Me=V.length;return u.jsxs("div",{className:"space-y-2",children:[o&&u.jsx("div",{className:"ui-subsection-title",children:n}),u.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mb-2 tabular-nums",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{children:["Population: ",a.count]}),u.jsxs("span",{children:["Filtered: ",(p==null?void 0:p.count)??0]}),Me>1&&u.jsxs("span",{className:"text-text",children:["Selected: ",Me]})]}),be!=null&&u.jsxs("span",{className:"text-text",children:["Selected: ",bt(be)]})]}),u.jsxs("svg",{ref:m,viewBox:`0 0 ${Mr} 100`,preserveAspectRatio:"none",className:"w-full h-28 cursor-crosshair rounded-md bg-surface-inset",onPointerDown:B,onPointerMove:Z,onPointerUp:pe,onPointerLeave:()=>C(null),children:[Ba(a.bins,"var(--border-strong)"),p&&Ba(p.bins,"var(--accent)"),je&&Ba(je.bins,"var(--highlight)",{opacity:.55}),J&&xS(J,U),be!=null&&zh(be,U,{color:"var(--highlight)",strokeWidth:.7}),h!=null&&zh(h,U,{color:"var(--text-secondary)",strokeWidth:.5,dashed:!0})]}),u.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mt-2 tabular-nums",children:[u.jsx("span",{children:bt(U==null?void 0:U.min)}),u.jsxs("div",{className:"flex flex-col items-center text-center leading-tight",children:[J?u.jsx("span",{className:"text-text",children:Jr(J.min,U.min)?` ${bt(J.max)}`:Jr(J.max,U.max)?` ${bt(J.min)}`:`${bt(J.min)}  ${bt(J.max)}`}):h!=null?u.jsxs("span",{className:"text-text",children:["Cursor: ",bt(h)]}):u.jsx("span",{children:"Drag to filter"}),J&&h!=null&&u.jsxs("span",{className:"text-[11px] text-muted",children:["Cursor: ",bt(h)]})]}),u.jsx("span",{children:bt(U==null?void 0:U.max)})]}),u.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-2 mt-3 items-end",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Min"}),u.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:L,placeholder:Dn(U.min),onFocus:()=>D("min"),onBlur:()=>{D(null),ue(L,M)},onChange:q=>T(q.target.value),onKeyDown:q=>{q.key==="Enter"&&q.currentTarget.blur()}})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Max"}),u.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:M,placeholder:Dn(U.max),onFocus:()=>D("max"),onBlur:()=>{D(null),ue(L,M)},onChange:q=>I(q.target.value),onKeyDown:q=>{q.key==="Enter"&&q.currentTarget.blur()}})]}),u.jsx("button",{className:"btn btn-xs btn-ghost text-muted hover:text-text",onClick:()=>i(n,null),children:"Clear"})]})]})}function Ua(e,t,n){if(!e.length)return null;const r=n?n.min:Math.min(...e);let s=n?n.max:Math.max(...e);r===s&&(s=r+1);const i=new Array(t).fill(0),o=t/(s-r);for(const l of e){const a=Math.max(0,Math.min(t-1,Math.floor((l-r)*o)));i[a]+=1}return{bins:i,min:r,max:s,count:e.length}}function Dh(e,t){var r;const n=[];for(const s of e){const i=(r=s.metrics)==null?void 0:r[t];i==null||Number.isNaN(i)||n.push(i)}return n}function Ba(e,t,n){const r=Math.max(1,...e),s=(n==null?void 0:n.opacity)??.9;return e.map((i,o)=>{const l=i/r*100;return u.jsx("rect",{x:o+.05,y:100-l,width:.9,height:l,fill:t,opacity:s},`${t}-${o}`)})}function xS(e,t){const n=(e.min-t.min)/(t.max-t.min),r=(e.max-t.min)/(t.max-t.min),s=Mr*yd(Math.min(n,r)),i=Mr*Math.abs(r-n);return u.jsx("rect",{x:s,y:0,width:Math.max(.5,i),height:100,fill:"var(--border-subtle)",stroke:"var(--text-secondary)",strokeWidth:.4})}function zh(e,t,n){const r=yd((e-t.min)/(t.max-t.min)),s=Mr*r;return u.jsx("line",{x1:s,y1:0,x2:s,y2:100,stroke:n.color,strokeWidth:n.strokeWidth??.5,strokeDasharray:n.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function Ah(e,t){return e<t?{min:e,max:t}:{min:t,max:e}}function yd(e){return e<0?0:e>1?1:e}function bt(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Dn(e){if(!Number.isFinite(e))return"";const t=e.toString();return t.includes("e")?e.toFixed(6):t}function $h(e){const t=e.trim();if(!t)return{value:null,valid:!0};const n=Number(t);return Number.isFinite(n)?{value:n,valid:!0}:{value:null,valid:!1}}function Uh(e,t,n){return e<t?t:e>n?n:e}function Jr(e,t){const n=Math.max(1,Math.abs(e),Math.abs(t));return Math.abs(e-t)<=1e-6*n}function Bh(e){return e?e.length>=10?e.slice(0,10):e:""}const wS=[{label:"Root",path:"/"}];function SS({leftTool:e,onToolChange:t,views:n,activeViewId:r,onActivateView:s,onSaveView:i,current:o,data:l,onOpenFolder:a,onContextMenu:c,items:p,filteredItems:d,metricKeys:v,selectedItems:S,selectedMetric:k,onSelectMetric:E,filters:b,onChangeRange:y,onChangeFilters:g,onResize:m}){const h=e==="folders"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",C=e==="metrics"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover";return u.jsxs("div",{className:"app-left-panel col-start-1 row-start-2 relative border-r border-border bg-panel overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-y-0 left-0 w-10 border-r border-border flex flex-col items-center gap-2 py-3 bg-surface-overlay",children:[u.jsx("button",{className:h,title:"Folders","aria-label":"Folders","aria-pressed":e==="folders",onClick:()=>t("folders"),children:u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:u.jsx("path",{d:"M3 7.5h6l2-2h10a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2z"})})}),u.jsx("button",{className:C,title:"Metrics / Filters","aria-label":"Metrics and Filters","aria-pressed":e==="metrics",onClick:()=>t("metrics"),children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[u.jsx("path",{d:"M4 19V9"}),u.jsx("path",{d:"M10 19V5"}),u.jsx("path",{d:"M16 19v-7"}),u.jsx("path",{d:"M3 19h18"})]})})]}),u.jsx("div",{className:"ml-10 h-full",children:e==="folders"?u.jsxs("div",{className:"h-full flex flex-col",children:[u.jsxs("div",{className:"px-2 py-2 border-b border-border",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Smart Folders"}),u.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:i,title:"Save current view as Smart Folder",children:"+ New"})]}),n.length?u.jsx("div",{className:"flex flex-col gap-1",children:n.map(L=>{const T=L.id===r;return u.jsx("button",{className:`text-left px-2 py-1.5 rounded-md text-sm ${T?"bg-accent-muted text-accent":"hover:bg-hover text-text"}`,onClick:()=>s(L),children:L.name},L.id)})}):u.jsx("div",{className:"text-xs text-muted px-1 py-1.5",children:"No saved Smart Folders yet."})]}),u.jsx(hS,{current:o,roots:wS,data:l,onOpen:a,onContextMenu:c,className:"flex-1 min-h-0 overflow-auto scrollbar-thin",showResizeHandle:!1})]}):u.jsx(mS,{items:p,filteredItems:d,metricKeys:v,selectedItems:S,selectedMetric:k,onSelectMetric:E,filters:b,onChangeRange:y,onChangeFilters:g})}),u.jsx("div",{className:"toolbar-offset absolute bottom-0 right-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20",onMouseDown:m})]})}function kS({persistenceEnabled:e,recentSummary:t,onDismissRecent:n,onCloseRecent:r,browserZoomPercent:s}){const i=t?` (${t.names.join(", ")}${t.extra?` +${t.extra}`:""})`:"",o=!!(t!=null&&t.names.length),l=typeof s=="number"?s:null,a=l!==null&&Math.abs(l-100)>=2;return!e||a||!!t?u.jsx("div",{className:"border-b border-border bg-panel",children:u.jsxs("div",{className:"px-3 py-2 flex flex-col gap-2",children:[!e&&u.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[u.jsx("span",{className:"font-semibold",children:"Not persisted."})," Workspace is read-only; edits stay in memory until restart."]}),a&&u.jsxs("div",{className:"ui-banner ui-banner-accent text-xs",children:[u.jsxs("span",{className:"font-semibold",children:["Browser zoom ",Math.round(l),"%."]})," For best results, set it to 100% so UI elements stay in correct proportions."]}),t&&u.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex items-center justify-between gap-3",children:[u.jsxs("span",{children:["Recent updates: ",t.count," item",t.count===1?"":"s",o?i:""]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{className:"text-muted hover:text-text transition-colors",onClick:n,"aria-label":"Hide recent activity until refresh",children:"Hide until refresh"}),u.jsx("button",{className:"text-muted hover:text-text transition-colors text-base leading-none",onClick:r,"aria-label":"Close recent activity",children:""})]})]})]})}):u.jsx(u.Fragment,{})}const Wh=6e3,CS=15*6e4,ES=1e4,NS=24*60*6e4,ze={sortKey:"sortKey",sortDir:"sortDir",sortSpec:"sortSpec",starFilters:"starFilters",filterAst:"filterAst",selectedMetric:"selectedMetric",viewMode:"viewMode",gridItemSize:"gridItemSize",leftOpen:"leftOpen",rightOpen:"rightOpen"};function bS(e){switch(e){case"live":return"Live";case"reconnecting":return"Reconnecting";case"offline":return"Offline";case"connecting":case"idle":default:return"Connecting"}}function jS(e){return e.isOffline?"offline":e.isUnstable?"unstable":e.recentEditActive?"recent":e.editingActive?"editing":"live"}function Yg(e,t){return t-e<NS?m1(e,t):g1(e)}function MS(e,t){if(!e.length)return null;const n=new Set,r=[];for(const i of e)n.has(i.path)||(n.add(i.path),r.push(i.path));const s=r.slice(0,2).map(i=>{const o=t.find(l=>l.path===i);return(o==null?void 0:o.name)??i.split("/").pop()??i});return{count:r.length,names:s,extra:Math.max(0,r.length-s.length)}}function RS(e,t,n){return e.length?e.map(r=>{const s=t.find(l=>l.path===r.path),i=(s==null?void 0:s.name)??r.path.split("/").pop()??r.path,o=Yg(r.ts,n);return{path:r.path,label:i,timeLabel:o}}):[]}function LS(){var Pd;const[e,t]=f.useState("/"),[n,r]=f.useState(""),[s,i]=f.useState([]),[o,l]=f.useState(null),[a,c]=f.useState(0),[p,d]=f.useState(null),[v,S]=f.useState(100),[k,E]=f.useState(null),[b,y]=f.useState(()=>({filters:{and:[]},sort:{kind:"builtin",key:"added",dir:"desc"},selectedMetric:void 0})),[g,m]=f.useState(()=>Date.now()),[h,C]=f.useState("adaptive"),[L,T]=f.useState(220),[M,I]=f.useState(!0),[N,D]=f.useState(!0),[J,U]=f.useState("folders"),[V,be]=f.useState([]),[je,he]=f.useState(null),[P,B]=f.useState(null),[Z,pe]=f.useState(null),[ue,Me]=f.useState({}),q=f.useRef(null),le=f.useRef(null),oe=f.useRef(null),de=f.useRef(null),ot=f.useRef(!1),Re=f.useRef(null),Et=f.useRef(new Map),hn=f.useRef(new Map),{leftW:Bt,rightW:mr,onResizeLeft:pn,onResizeRight:en}=rS(q),[gr,z]=f.useState(!1),[ee,te]=f.useState(null),j=Yr(),O=r1(),G=Dl(),W=i1(),[ie,ve]=f.useState("idle"),[_e,we]=f.useState({}),[Xe,Ee]=f.useState([]),[lt,Pe]=f.useState([]),[vr,yr]=f.useState(null),[$l,Ul]=f.useState(!1),[Bl,xd]=f.useState(new Set),Wl=f.useRef(new Map),[Pn,qg]=f.useState(null),[wd,Xg]=f.useState(null),[Jg,Hl]=f.useState(!1),[Hs,Vl]=f.useState(()=>Date.now()),[Zg,ev]=f.useState(!0);f.useEffect(()=>{const x=an(Ch());t(x);const R=()=>{const _=an(Ch());l(null),t(H=>H===_?H:(c($=>$+1),_))};return window.addEventListener("hashchange",R),()=>window.removeEventListener("hashchange",R)},[]),f.useEffect(()=>()=>{for(const x of Wl.current.values())window.clearTimeout(x);Wl.current.clear()},[]),f.useEffect(()=>{if(wd==null){Hl(!1);return}Hl(!0);const x=window.setTimeout(()=>Hl(!1),Wh);return()=>window.clearTimeout(x)},[wd]),f.useEffect(()=>{if(Pn==null)return;Vl(Date.now());const x=window.setInterval(()=>Vl(Date.now()),1e4);return()=>window.clearInterval(x)},[Pn]);const{data:De,refetch:Ql,isLoading:AS,isError:$S}=zg(e),xr=n.trim().length>0,Sd=iS(n,250),kd=f.useMemo(()=>Sd.trim().replace(/\s+/g," "),[Sd]),Cd=b1(xr?kd:"",e),Kl=f.useMemo(()=>Eh(b.filters),[b.filters]),tn=f.useMemo(()=>{var R;return(xr?((R=Cd.data)==null?void 0:R.items)??[]:(De==null?void 0:De.items)??[]).map(_=>({..._,star:ue[_.path]!==void 0?ue[_.path]:_.star}))},[xr,Cd.data,De,ue]),Ke=f.useMemo(()=>{const x=Z1(tn,b.filters);return nS(x,b.sort,g)},[tn,b.filters,b.sort,g]),tv=tn.length,nv=Ke.length,Nt=f.useMemo(()=>Ke.map(x=>x.path),[Ke]),rv=f.useMemo(()=>{if(!s.length)return[];const x=new Map(tn.map(_=>[_.path,_])),R=new Map(Ke.map(_=>[_.path,_]));return s.map(_=>x.get(_)??R.get(_)).filter(_=>!!_)},[s,tn,Ke]),Vs=b.sort.kind==="metric"?b.sort.key:null,Ed=f.useMemo(()=>Vs?Ke.some(x=>{var _;const R=(_=x.metrics)==null?void 0:_[Vs];return R!=null&&!Number.isNaN(R)}):!1,[Ke,Vs]),Nd=f.useCallback(x=>{xd($=>{if($.has(x))return $;const A=new Set($);return A.add(x),A});const R=Wl.current,_=R.get(x);_&&window.clearTimeout(_);const H=window.setTimeout(()=>{xd($=>{if(!$.has(x))return $;const A=new Set($);return A.delete(x),A}),R.delete(x)},Wh);R.set(x,H)},[]),Gl=f.useCallback(x=>{const R=Date.now(),H=xh(x)??R,$=H>R?R:H;qg(A=>A==null?$:A>$?A:$),Xg(R),Vl(R)},[]),Yl=f.useCallback((x,R,_)=>{const H=Date.now(),$=xh(_)??H;Pe(A=>{const re=A.filter(K=>K.path!==x);return[{path:x,ts:$,kind:R},...re].slice(0,10)})},[]),ql=f.useCallback((x,R)=>{const _=Date.now();Ee(H=>{const $=H.filter(re=>re.path!==x);return[{path:x,ts:_,kind:R},...$].slice(0,6)}),Nd(x)},[Nd]),Xl=f.useCallback(x=>{const R=Object.prototype.hasOwnProperty.call(x,"star"),_=x.metrics!==void 0,H=x.comments!==void 0;if(!R&&!_&&!H)return;const $=A=>{if(A.path!==x.path)return A;let re=A;return R&&A.star!==x.star&&(re={...re,star:x.star??null}),_&&(re={...re,metrics:x.metrics??null}),H&&A.comments!==x.comments&&(re={...re,comments:x.comments??""}),re};j.setQueriesData({predicate:({queryKey:A})=>Array.isArray(A)&&A[0]==="folder"},A=>{if(!A)return A;let re=!1;const X=A.items.map(K=>{const se=$(K);return se!==K&&(re=!0),se});return re?{...A,items:X}:A}),j.setQueriesData({predicate:({queryKey:A})=>Array.isArray(A)&&A[0]==="search"},A=>{if(!A)return A;let re=!1;const X=A.items.map(K=>{const se=$(K);return se!==K&&(re=!0),se});return re?{...A,items:X}:A})},[j]),Jl=f.useCallback(async x=>{const R=an(x||"/"),_=Et.current,H=hn.current,$=_.get(R);if($!==void 0)return $;const A=H.get(R);if(A)return A;const re=(async()=>{const X=[R],K=new Set;let se=0;for(;X.length;){const Be=X.pop();if(!K.has(Be)){K.add(Be);try{const wr=await me.getFolder(Be);se+=wr.items.length;for(const sa of wr.dirs)sa.kind==="branch"&&X.push(gd(Be,sa.name))}catch(wr){console.warn(`Failed to count folder ${Be}:`,wr)}}}return _.set(R,se),H.delete(R),se})();return H.set(R,re),re},[]);f.useEffect(()=>{let x=!1;const R=an(e||"/");return(async()=>{const H=Jl("/"),$=R==="/"?H:Jl(R),[A,re]=await Promise.all([H,$]);x||(pe(A),B(re))})().catch(H=>console.warn("Failed to compute folder counts:",H)),()=>{x=!0}},[e,Jl]),f.useEffect(()=>{iw();const x=lw(_=>{if(_.type==="presence"){const A=_.data;if(!(A!=null&&A.gallery_id))return;we(re=>({...re,[A.gallery_id]:A}));return}const H=_.data;if(!(H!=null&&H.path))return;const $=H.path;if(_.type==="item-updated"){const A=_.data,re={v:1,tags:A.tags??[],notes:A.notes??"",star:A.star??null,version:A.version??1,updated_at:A.updated_at??"",updated_by:A.updated_by??"server"};j.setQueryData(Di($),re),Xl({path:$,star:A.star??null,metrics:A.metrics,comments:A.notes??""}),a1($,re),ql($,"item-updated"),Yl($,"item-updated",A.updated_at),Gl(A.updated_at),Me(X=>{if(X[$]===void 0)return X;const K={...X};return delete K[$],K})}else if(_.type==="metrics-updated"){const A=_.data;Xl({path:$,metrics:A.metrics}),ql($,"metrics-updated"),Yl($,"metrics-updated",A.updated_at),Gl(A.updated_at)}}),R=aw(ve);return()=>{x(),R(),ow()}},[ql,Yl,j,Xl,Gl]),f.useEffect(()=>{let x=!1;const R=an(e||"/"),_=async()=>{try{const $=await me.postPresence(R);!x&&($!=null&&$.gallery_id)&&we(A=>({...A,[$.gallery_id]:$}))}catch{}};_();const H=window.setInterval(_,3e4);return()=>{x=!0,window.clearInterval(H)}},[e]),f.useEffect(()=>{let x=!1;return me.getHealth().then(R=>{var H;if(x)return;const _=((H=R==null?void 0:R.labels)==null?void 0:H.enabled)??!0;ev(_)}).catch(()=>{}),()=>{x=!0}},[]);const sv=f.useMemo(()=>{const x=tn,R={0:0,1:0,2:0,3:0,4:0,5:0};for(const _ of x){const H=ue[_.path]??_.star??0;R[String(H)]=(R[String(H)]||0)+1}return R},[tn,ue]),On=f.useMemo(()=>{const x=new Set;let R=0;for(const _ of tn){const H=_.metrics;if(H)for(const $ of Object.keys(H))x.add($);if(R+=1,R>=250&&x.size>0)break}return Array.from(x).sort()},[tn]);f.useEffect(()=>{On.length&&y(x=>{const R=x.selectedMetric&&On.includes(x.selectedMetric)?x.selectedMetric:On[0];return R===x.selectedMetric?x:{...x,selectedMetric:R}})},[On]),f.useEffect(()=>{b.sort.kind==="metric"&&(On.includes(b.sort.key)||y(x=>({...x,sort:{kind:"builtin",key:"added",dir:x.sort.dir}})))},[On,b.sort]);const bd=f.useMemo(()=>Y1(b.filters),[b.filters]),Yi=P??tv,iv=Z??Yi,jd=xr||bd>0,qi=_e[e],ov=O.state==="syncing"?"Syncing":O.state==="error"?O.message?`Not saved  ${O.message}`:"Not saved  retry":"All changes saved",lv=bS(ie),Zl=Pn!=null,av=f.useMemo(()=>!Zl||Pn==null?"No edits yet.":Yg(Pn,Hs),[Zl,Pn,Hs]),Md=Pn==null?null:Math.max(0,Hs-Pn),uv=((qi==null?void 0:qi.editing)??0)>0||Md!=null&&Md<CS,cv=W!=null&&W>ES,dv=ie==="offline"||ie==="connecting"||ie==="idle",fv=ie==="reconnecting"||G||O.state==="error"||cv,hv=jS({isOffline:dv,isUnstable:fv,recentEditActive:Jg,editingActive:uv}),pv=f.useMemo(()=>MS(Xe,Ke),[Xe,Ke]),ea=f.useMemo(()=>Xe.length?Xe.reduce((x,R)=>Math.max(x,R.ts),0):null,[Xe]),mv=$l||vr!=null&&ea!=null&&ea<=vr?null:pv,gv=f.useMemo(()=>RS(lt,Ke,Hs),[Ke,Hs,lt]),vv=jd?nv:Yi,yv=jd||e==="/"?Yi:iv,at=f.useCallback(x=>{y(R=>({...R,filters:x(R.filters)}))},[]),xv=f.useCallback(x=>{y(R=>({...R,filters:x}))},[]),Xi=f.useCallback(()=>{at(x=>Aa(x,[]))},[at]),Rd=f.useCallback(()=>{y(x=>({...x,filters:{and:[]}}))},[]),ta=f.useCallback((x,R)=>{at(_=>G1(_,x,R))},[at]),Ld=f.useMemo(()=>{var R,_,H,$,A,re;const x=[];for(const X of b.filters.and)if("stars"in X){const K=X.stars||[];if(!K.length)continue;x.push({id:"stars",label:`Rating in: ${Wa(K)}`,onRemove:()=>Xi()})}else if("starsIn"in X){const K=X.starsIn.values||[];if(!K.length)continue;x.push({id:"stars-in",label:`Rating in: ${Wa(K)}`,onRemove:()=>Xi()})}else if("starsNotIn"in X){const K=X.starsNotIn.values||[];if(!K.length)continue;x.push({id:"stars-not-in",label:`Rating not in: ${Wa(K)}`,onRemove:()=>at(se=>$g(se,[]))})}else if("nameContains"in X){const K=(R=X.nameContains.value)==null?void 0:R.trim();if(!K)continue;x.push({id:"name-contains",label:`Filename contains: ${K}`,onRemove:()=>at(se=>Ug(se,""))})}else if("nameNotContains"in X){const K=(_=X.nameNotContains.value)==null?void 0:_.trim();if(!K)continue;x.push({id:"name-not-contains",label:`Filename not: ${K}`,onRemove:()=>at(se=>Bg(se,""))})}else if("commentsContains"in X){const K=(H=X.commentsContains.value)==null?void 0:H.trim();if(!K)continue;x.push({id:"comments-contains",label:`Comments contain: ${K}`,onRemove:()=>at(se=>Wg(se,""))})}else if("commentsNotContains"in X){const K=($=X.commentsNotContains.value)==null?void 0:$.trim();if(!K)continue;x.push({id:"comments-not-contains",label:`Comments not: ${K}`,onRemove:()=>at(se=>Hg(se,""))})}else if("urlContains"in X){const K=(A=X.urlContains.value)==null?void 0:A.trim();if(!K)continue;x.push({id:"url-contains",label:`URL contains: ${K}`,onRemove:()=>at(se=>Vg(se,""))})}else if("urlNotContains"in X){const K=(re=X.urlNotContains.value)==null?void 0:re.trim();if(!K)continue;x.push({id:"url-not-contains",label:`URL not: ${K}`,onRemove:()=>at(se=>Qg(se,""))})}else if("dateRange"in X){const{from:K,to:se}=X.dateRange;if(!K&&!se)continue;x.push({id:"date-range",label:`Date: ${_S(K,se)}`,onRemove:()=>at(Be=>ac(Be,null))})}else if("widthCompare"in X){const{op:K,value:se}=X.widthCompare;x.push({id:"width-compare",label:`Width ${K} ${se}`,onRemove:()=>at(Be=>Ao(Be,null))})}else if("heightCompare"in X){const{op:K,value:se}=X.heightCompare;x.push({id:"height-compare",label:`Height ${K} ${se}`,onRemove:()=>at(Be=>$o(Be,null))})}else if("metricRange"in X){const{key:K,min:se,max:Be}=X.metricRange;x.push({id:`metric:${K}`,label:`${K}: ${OS(se,Be)}`,onRemove:()=>ta(K,null)})}return x},[b.filters,Xi,ta,at]),wv=f.useCallback(x=>{const R=new Set(Kl);R.has(x)?R.delete(x):R.add(x),y(_=>({..._,filters:Aa(_.filters,Array.from(R))}))},[Kl]),Sv=f.useCallback(()=>{I(!0),U("metrics")},[]),kv=f.useCallback(x=>{y(R=>({...R,sort:x})),x.kind==="builtin"&&x.key==="random"&&m(Date.now())},[]),Td=f.useCallback(x=>{if(x==="/"||x==="")return"Lenslet | Root";const R=x.split("/").filter(Boolean);if(!R.length)return"Lenslet";const _=R.slice(-2).join("/");return`Lenslet | ${R.length>2?`.../${_}`:`/${_}`}`},[]),Cv=f.useMemo(()=>PS(e),[e]);f.useEffect(()=>{document.title=Td(e)},[e,Td]),f.useEffect(()=>{let x=!0;return me.getViews().then(R=>{x&&be(R.views||[])}).catch(()=>{x&&be([])}),()=>{x=!1}},[]),f.useEffect(()=>{xr&&(i([]),l(null))},[xr]),f.useEffect(()=>{const x=q.current,R=de.current;if(!x||!R)return;const _=()=>{const H=Math.max(48,Math.round(R.getBoundingClientRect().height));x.style.setProperty("--toolbar-h",`${H}px`)};if(_(),"ResizeObserver"in window){const H=new ResizeObserver(_);return H.observe(R),()=>H.disconnect()}return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]),f.useEffect(()=>{try{const x=localStorage.getItem(ze.sortKey),R=localStorage.getItem(ze.sortDir),_=localStorage.getItem(ze.sortSpec),H=localStorage.getItem(ze.starFilters),$=localStorage.getItem(ze.filterAst),A=localStorage.getItem(ze.selectedMetric),re=localStorage.getItem(ze.viewMode),X=localStorage.getItem(ze.gridItemSize),K=localStorage.getItem(ze.leftOpen),se=localStorage.getItem(ze.rightOpen),wr=(tt=>{if(!tt)return null;const We=Fa(tt);return!We||typeof We!="object"?null:We.kind==="builtin"&&(We.key==="name"||We.key==="added"||We.key==="random")&&(We.dir==="asc"||We.dir==="desc")||We.kind==="metric"&&typeof We.key=="string"&&We.key.length>0&&(We.dir==="asc"||We.dir==="desc")?We:null})(_)??{kind:"builtin",key:x==="name"||x==="added"||x==="random"?x:"added",dir:R==="asc"||R==="desc"?R:"desc"};wr.key==="random"&&m(Date.now());let ia=(tt=>{if(!tt)return null;const We=Fa(tt);return lc(We)})($)??{and:[]};if(H){const tt=Fa(H);if(Array.isArray(tt)){const We=tt.filter(Lv=>[0,1,2,3,4,5].includes(Lv));ia=Aa(ia,We)}}if(y(tt=>({...tt,sort:wr,filters:ia,selectedMetric:A||tt.selectedMetric})),(re==="grid"||re==="adaptive")&&C(re),X){const tt=Number(X);!isNaN(tt)&&tt>=80&&tt<=500&&T(tt)}(K==="0"||K==="false")&&I(!1),(se==="0"||se==="false")&&D(!1)}catch{}},[]),f.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia("(max-width: 900px)"),R=()=>{x.matches&&(I(!1),D(!1))};return R(),"addEventListener"in x?(x.addEventListener("change",R),()=>x.removeEventListener("change",R)):(x.addListener(R),()=>x.removeListener(R))},[]),f.useEffect(()=>{if(typeof window>"u")return;const x=[1,1.25,1.5,1.75,2,3,4],R=$=>x.reduce((A,re)=>Math.abs(re-$)<Math.abs(A-$)?re:A,x[0]),_=()=>{var Be;const $=window.devicePixelRatio||1,A=R($),re=((Be=window.visualViewport)==null?void 0:Be.scale)??1,X=$*re/A;if(!Number.isFinite(X)){E(null);return}const K=Math.round(X*100),se=Math.min(500,Math.max(25,K));E(se)};_(),window.addEventListener("resize",_),window.addEventListener("orientationchange",_);const H=window.visualViewport;return H&&H.addEventListener("resize",_),()=>{window.removeEventListener("resize",_),window.removeEventListener("orientationchange",_),H&&H.removeEventListener("resize",_)}},[]),f.useEffect(()=>{try{localStorage.setItem(ze.sortKey,b.sort.kind==="builtin"?b.sort.key:"added"),localStorage.setItem(ze.sortDir,b.sort.dir),localStorage.setItem(ze.sortSpec,JSON.stringify(b.sort));const x=Eh(b.filters);localStorage.setItem(ze.starFilters,JSON.stringify(x)),localStorage.setItem(ze.filterAst,JSON.stringify(b.filters)),b.selectedMetric?localStorage.setItem(ze.selectedMetric,b.selectedMetric):localStorage.removeItem(ze.selectedMetric),localStorage.setItem(ze.viewMode,h),localStorage.setItem(ze.gridItemSize,String(L)),localStorage.setItem(ze.leftOpen,M?"1":"0"),localStorage.setItem(ze.rightOpen,N?"1":"0")}catch{}},[b,h,L,M,N]),f.useEffect(()=>{const x=le.current;if(!x)return;const R=H=>Math.min(500,Math.max(80,H)),_=H=>{H.ctrlKey&&(H.preventDefault(),T($=>R($+(H.deltaY<0?20:-20))))};return x.addEventListener("wheel",_,{passive:!1}),()=>x.removeEventListener("wheel",_)},[]),f.useEffect(()=>{if(o)return;const x=le.current;if(!x)return;const R=X=>Math.min(500,Math.max(80,X));let _=null;const H=X=>{if(X.length<2)return 0;const[K,se]=[X[0],X[1]];return Math.hypot(K.clientX-se.clientX,K.clientY-se.clientY)},$=X=>{if(X.touches.length!==2)return;const K=H(X.touches);K&&(_={dist:K,size:L})},A=X=>{if(!_||X.touches.length!==2)return;const K=H(X.touches);if(!K)return;X.preventDefault();const se=R(_.size*(K/_.dist));T(se)},re=()=>{_=null};return x.addEventListener("touchstart",$,{passive:!0}),x.addEventListener("touchmove",A,{passive:!1}),x.addEventListener("touchend",re),x.addEventListener("touchcancel",re),()=>{x.removeEventListener("touchstart",$),x.removeEventListener("touchmove",A),x.removeEventListener("touchend",re),x.removeEventListener("touchcancel",re)}},[o,L]),f.useEffect(()=>{if(!o)return;const x=Nt.indexOf(o);if(x===-1)return;const R=[Nt[x-2],Nt[x-1],Nt[x+1],Nt[x+2]].filter(_=>!!_);for(const _ of R)me.prefetchFile(_),me.prefetchThumb(_)},[o,Nt]),f.useEffect(()=>{var R;if(!((R=De==null?void 0:De.items)!=null&&R.length))return;const x=De.items.slice(0,5);for(const _ of x)me.prefetchFile(_.path)},[De==null?void 0:De.path,De==null?void 0:De.items]);const Ji=f.useCallback(x=>{l(null);const R=an(x);t(R),M1(R)},[]),Ev=f.useCallback(async()=>{const x=window.prompt("Save Smart Folder as:","New Smart Folder");if(!x)return;const R=TS(x,V),_={id:R,name:x,pool:{kind:"folder",path:e},view:JSON.parse(JSON.stringify(b))},H=[...V.filter($=>$.id!==R),_];be(H),he(R);try{await me.saveViews({version:1,views:H})}catch($){if($ instanceof ur&&$.status===403){const A=new Blob([JSON.stringify({version:1,views:H},null,2)],{type:"application/json"});Uo(A,`lenslet-smart-folder-${R}.json`),alert("No-write mode: exported Smart Folder JSON instead of saving.");return}console.error("Failed to save Smart Folder:",$)}},[e,b,V]);f.useEffect(()=>{if(!je)return;const x=V.find(H=>H.id===je);if(!x){he(null);return}const R=x.pool.path===e,_=JSON.stringify(x.view)===JSON.stringify(b);(!R||!_)&&he(null)},[je,V,e,b]);const Nv=f.useCallback(x=>{l(x),ot.current||(window.history.pushState({viewer:!0},"",window.location.href),ot.current=!0)},[]),Id=f.useCallback(()=>{l(null),ot.current&&(ot.current=!1,window.history.back());const x=Re.current;if(x){const R=document.getElementById(`cell-${encodeURIComponent(x)}`);R==null||R.focus()}},[]);f.useEffect(()=>{const x=()=>{o&&(ot.current=!1,l(null))};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[o]),f.useEffect(()=>{const x=q.current;if(!x)return;const R=$=>{$.dataTransfer&&Array.from($.dataTransfer.types).includes("Files")&&($.preventDefault(),z(!0))},_=$=>{const A=$.relatedTarget;A&&x.contains(A)||z(!1)},H=async $=>{var X,K;$.preventDefault(),z(!1);const A=Array.from(((X=$.dataTransfer)==null?void 0:X.files)??[]);if(!A.length)return;if(!((((K=De==null?void 0:De.dirs)==null?void 0:K.length)??0)===0)){alert("Uploads are only allowed into folders without subdirectories.");return}for(const se of A)try{await me.uploadFile(e,se)}catch(Be){console.error(`Failed to upload ${se.name}:`,Be)}Ql()};return x.addEventListener("dragover",R),x.addEventListener("dragleave",_),x.addEventListener("drop",H),()=>{x.removeEventListener("dragover",R),x.removeEventListener("dragleave",_),x.removeEventListener("drop",H)}},[e,(Pd=De==null?void 0:De.dirs)==null?void 0:Pd.length,Ql]),f.useEffect(()=>{const x=()=>te(null),R=_=>{_.key==="Escape"&&te(null)};return window.addEventListener("click",x),window.addEventListener("keydown",R),()=>{window.removeEventListener("click",x),window.removeEventListener("keydown",R)}},[]),f.useEffect(()=>{const x=R=>{if(!Dg(R.target)){if((R.ctrlKey||R.metaKey)&&R.key.toLowerCase()==="b"){R.preventDefault(),R.altKey?D(_=>!_):I(_=>!_);return}if(!o){if(R.key==="Backspace"||R.key==="Delete")R.preventDefault(),Ji(R1(e));else if((R.ctrlKey||R.metaKey)&&R.key.toLowerCase()==="a")R.preventDefault(),i(Ke.map(_=>_.path));else if(R.key==="Escape")s.length&&(R.preventDefault(),i([]));else if(R.key==="/"){R.preventDefault();const _=document.querySelector(".toolbar-right .input");_==null||_.focus()}}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,Ke,s,o,Ji]);const bv=M?`${Bt}px`:"0px",jv=N?`${mr}px`:"0px",_d=o??s[0]??null,na=_d?Nt.indexOf(_d):-1,Mv=na>0,Rv=na>=0&&na<Nt.length-1,ra=f.useCallback(x=>{if(!Nt.length)return;const R=o??s[0];if(!R)return;const _=Nt.indexOf(R);if(_===-1)return;const H=Math.min(Nt.length-1,Math.max(0,_+x)),$=Nt[H];!$||$===R||(o&&l($),i([$]))},[Nt,o,s]);return u.jsxs("div",{className:"app-shell grid h-full grid-cols-[var(--left)_1fr_var(--right)]",ref:q,style:{"--left":bv,"--right":jv},children:[u.jsx(Hx,{rootRef:de,onSearch:r,viewerActive:!!o,onBack:Id,zoomPercent:o?v:void 0,onZoomPercentChange:x=>d(x),currentLabel:Cv,itemCount:vv,totalCount:yv,sortSpec:b.sort,metricKeys:On,onSortChange:kv,filterCount:bd,onOpenFilters:Sv,starFilters:Kl,onToggleStar:wv,onClearStars:Xi,onClearFilters:Rd,starCounts:sv,viewMode:h,onViewMode:C,gridItemSize:L,onGridItemSize:T,leftOpen:M,rightOpen:N,onToggleLeft:()=>I(x=>!x),onToggleRight:()=>D(x=>!x),onPrevImage:()=>ra(-1),onNextImage:()=>ra(1),canPrevImage:Mv,canNextImage:Rv,syncIndicator:{state:hv,presence:qi,syncLabel:ov,connectionLabel:lv,lastEditedLabel:av,hasEdits:Zl,recentTouches:gv}}),M&&u.jsx(SS,{leftTool:J,onToolChange:U,views:V,activeViewId:je,onActivateView:x=>{var _;he(x.id);const R=lc((_=x.view)==null?void 0:_.filters)??{and:[]};y({...x.view,filters:R}),Ji(x.pool.path),U("metrics")},onSaveView:Ev,current:e,data:De,onOpenFolder:x=>{he(null),Ji(x)},onContextMenu:(x,R)=>{x.preventDefault(),te({x:x.clientX,y:x.clientY,kind:"tree",payload:{path:R}})},items:tn,filteredItems:Ke,metricKeys:On,selectedItems:rv,selectedMetric:b.selectedMetric,onSelectMetric:x=>y(R=>({...R,selectedMetric:x})),filters:b.filters,onChangeRange:ta,onChangeFilters:xv,onResize:pn}),u.jsxs("div",{className:"grid-shell col-start-2 row-start-2 relative overflow-hidden flex flex-col",ref:le,children:[u.jsx("div",{"aria-live":"polite",className:"sr-only",children:s.length?`${s.length} selected`:""}),u.jsx(kS,{persistenceEnabled:Zg,recentSummary:mv,onDismissRecent:()=>Ul(!0),onCloseRecent:()=>yr(ea??Date.now()),browserZoomPercent:k}),Ld.length>0&&u.jsx("div",{className:"sticky top-0 z-10 px-3 py-2 bg-panel border-b border-border",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsx("span",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Filters"}),Ld.map(x=>u.jsxs("span",{className:"filter-chip",children:[u.jsx("span",{className:"truncate max-w-[240px]",title:x.label,children:x.label}),u.jsx("button",{className:"filter-chip-remove","aria-label":`Clear filter ${x.label}`,onClick:x.onRemove,children:""})]},x.id)),u.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:Rd,children:"Clear all"})]})}),!1,u.jsxs("div",{className:"flex-1 min-h-0 relative",children:[u.jsx(Fw,{items:Ke,selected:s,restoreToSelectionToken:a,onSelectionChange:i,onOpenViewer:x=>{try{Re.current=x}catch{}Nv(x),i([x])},highlight:xr?kd:"",recentlyUpdated:Bl,suppressSelectionHighlight:!!o,viewMode:h,targetCellSize:L,onContextMenuItem:(x,R)=>{x.preventDefault();const _=s.length?s:[R];te({x:x.clientX,y:x.clientY,kind:"grid",payload:{paths:_}})},scrollRef:oe,hideScrollbar:Ed}),Ed&&Vs&&u.jsx(Aw,{items:Ke,metricKey:Vs,scrollRef:oe,sortDir:b.sort.dir})]})]}),N&&u.jsx(S1,{path:s[0]??null,selectedPaths:s,items:Ke,sortSpec:b.sort,onResize:en,onStarChanged:(x,R)=>{Me(_=>{const H={..._};for(const $ of x)H[$]=R;return H})}}),o&&u.jsx(Gw,{path:o,onClose:Id,onZoomChange:x=>S(Math.round(x)),requestedZoomPercent:p,onZoomRequestConsumed:()=>d(null),onNavigate:ra}),gr&&u.jsx("div",{className:"toolbar-offset fixed inset-0 left-[var(--left)] right-[var(--right)] bg-accent/10 border-2 border-dashed border-accent text-text flex items-center justify-center text-lg z-overlay pointer-events-none",children:"Drop images to upload"}),ee&&u.jsx(FS,{ctx:ee,current:e,items:Ke,refetch:Ql,setCtx:te})]})}function TS(e,t){const n=IS(e)||"view",r=new Set(t.map(i=>i.id));if(!r.has(n))return n;let s=2;for(;r.has(`${n}-${s}`);)s+=1;return`${n}-${s}`}function IS(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function Wa(e){const t=e.filter(s=>s>0).sort((s,i)=>i-s),n=e.includes(0),r=[...t.map(s=>String(s))];return n&&r.push("None"),r.join(", ")}function _S(e,t){return e&&t?`${e} to ${t}`:e?`from ${e}`:t?`to ${t}`:""}function PS(e){if(e==="/"||e==="")return"Root";const t=e.split("/").filter(Boolean);return t.length?t.length<=2?`/${t.join("/")}`:`.../${t.slice(-2).join("/")}`:"Root"}function OS(e,t){return`${Hh(e)}${Hh(t)}`}function Hh(e){const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Uo(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function FS({ctx:e,current:t,items:n,refetch:r,setCtx:s}){const i=L1(t),o=(m,h)=>m==="/"?`/${h}`:`${m}/${h}`,l=Yr(),[a,c]=Bo.useState(!1),[p,d]=Bo.useState(null),v=()=>new Date().toISOString().replace(/[:.]/g,"-"),S=m=>{const h=C=>m==="/"?!0:C===m||C.startsWith(`${m}/`);l.invalidateQueries({predicate:({queryKey:C})=>{if(!Array.isArray(C)||C[0]!=="folder")return!1;const L=typeof C[1]=="string"?C[1]:"";return h(L)}})},k=m=>{const h=an(m);return h===""?"/":h},E=async()=>{const m=k(e.payload.path||"/");c(!0);try{await me.refreshFolder(m),S(m),(t===m||t.startsWith(m==="/"?"/":`${m}/`))&&await r(),qu.evictPrefix(m),Zr.evictPrefix(m)}catch(h){console.error("Failed to refresh folder:",h)}finally{c(!1),s(null)}},b=async m=>{const h=[m],C=new Set,L=[];for(;h.length;){const T=h.pop();if(!C.has(T)){C.add(T);try{const M=await me.getFolder(T);L.push(...M.items);for(const I of M.dirs)I.kind==="branch"&&h.push(o(T,I.name))}catch(M){console.error(`Failed to fetch folder ${T}:`,M)}}}return L},y=m=>async()=>{d(m);const h=e.payload.path||t;try{const C=await b(h),L=$a(C),T=m==="csv"?Lh(L):Rh(L),M=m==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8",I=h==="/"?"root":(h.replace(/^\/+/,"")||"root").replace(/\//g,"_");Uo(new Blob([T],{type:M}),`metadata_${I}_${v()}.${m}`)}catch(C){console.error("Failed to export folder:",C),alert("Failed to export folder. See console for details.")}finally{d(null),s(null)}},g=e.kind==="tree"?[{label:a?"Refreshing":"Refresh",disabled:a,onClick:E},{label:p==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!p||a,onClick:y("csv")},{label:p==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!p||a,onClick:y("json")}]:(()=>{const m=e.payload.paths??[],h=[];return h.push({label:"Move to trash",disabled:i,onClick:async()=>{if(!i){for(const C of m)try{await me.moveFile(C,"/_trash_")}catch(L){console.error(`Failed to trash ${C}:`,L)}r(),s(null)}}}),i&&(h.push({label:"Permanent delete",danger:!0,onClick:async()=>{if(confirm(`Delete ${m.length} file(s) permanently? This cannot be undone.`)){try{await me.deleteFiles(m)}catch(C){console.error("Failed to delete files:",C)}r(),s(null)}}}),h.push({label:"Recover",onClick:async()=>{for(const C of m)try{const T=(await me.getSidecar(C)).original_position,M=T&&T.split("/").slice(0,-1).join("/")||"/";await me.moveFile(C,M)}catch(L){console.error(`Failed to recover ${C}:`,L)}r(),s(null)}})),m.length&&(h.push({label:p==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!p,onClick:async()=>{d("csv");try{const C=new Set(m),L=n.filter(I=>C.has(I.path)),T=$a(L),M=Lh(T);Uo(new Blob([M],{type:"text/csv;charset=utf-8"}),`metadata_selection_${v()}.csv`)}finally{d(null),s(null)}}}),h.push({label:p==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!p,onClick:async()=>{d("json");try{const C=new Set(m),L=n.filter(I=>C.has(I.path)),T=$a(L),M=Rh(T);Uo(new Blob([M],{type:"application/json;charset=utf-8"}),`metadata_selection_${v()}.json`)}finally{d(null),s(null)}}})),h})();return u.jsx(sS,{x:e.x,y:e.y,items:g})}const DS=new Mx({defaultOptions:{queries:{staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always"},mutations:{retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),5e3)}}});function zS(){return u.jsx(Rx,{client:DS,children:u.jsx(LS,{})})}pg(document.getElementById("root")).render(u.jsx(zS,{}));
