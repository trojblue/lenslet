var jv=Object.defineProperty;var Td=e=>{throw TypeError(e)};var Mv=(e,t,n)=>t in e?jv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var pn=(e,t,n)=>Mv(e,typeof t!="symbol"?t+"":t,n),ra=(e,t,n)=>t.has(e)||Td("Cannot "+n);var w=(e,t,n)=>(ra(e,t,"read from private field"),n?n.call(e):t.get(e)),te=(e,t,n)=>t.has(e)?Td("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),V=(e,t,n,r)=>(ra(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ae=(e,t,n)=>(ra(e,t,"access private method"),n);var eo=(e,t,n,r)=>({set _(s){V(e,t,s,n)},get _(){return w(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Rv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tp={exports:{}},Sl={},np={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vi=Symbol.for("react.element"),Lv=Symbol.for("react.portal"),Tv=Symbol.for("react.fragment"),Iv=Symbol.for("react.strict_mode"),_v=Symbol.for("react.profiler"),Pv=Symbol.for("react.provider"),Ov=Symbol.for("react.context"),Fv=Symbol.for("react.forward_ref"),Dv=Symbol.for("react.suspense"),zv=Symbol.for("react.memo"),Av=Symbol.for("react.lazy"),Id=Symbol.iterator;function $v(e){return e===null||typeof e!="object"?null:(e=Id&&e[Id]||e["@@iterator"],typeof e=="function"?e:null)}var rp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sp=Object.assign,ip={};function Us(e,t,n){this.props=e,this.context=t,this.refs=ip,this.updater=n||rp}Us.prototype.isReactComponent={};Us.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Us.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function op(){}op.prototype=Us.prototype;function ac(e,t,n){this.props=e,this.context=t,this.refs=ip,this.updater=n||rp}var uc=ac.prototype=new op;uc.constructor=ac;sp(uc,Us.prototype);uc.isPureReactComponent=!0;var _d=Array.isArray,lp=Object.prototype.hasOwnProperty,cc={current:null},ap={key:!0,ref:!0,__self:!0,__source:!0};function up(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)lp.call(t,r)&&!ap.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Vi,type:e,key:i,ref:o,props:s,_owner:cc.current}}function Uv(e,t){return{$$typeof:Vi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function dc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vi}function Bv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Pd=/\/+/g;function sa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Bv(""+e.key):t.toString(36)}function Co(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Vi:case Lv:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+sa(o,0):r,_d(s)?(n="",e!=null&&(n=e.replace(Pd,"$&/")+"/"),Co(s,t,n,"",function(c){return c})):s!=null&&(dc(s)&&(s=Uv(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Pd,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",_d(e))for(var l=0;l<e.length;l++){i=e[l];var a=r+sa(i,l);o+=Co(i,t,n,a,s)}else if(a=$v(e),typeof a=="function")for(e=a.call(e),l=0;!(i=e.next()).done;)i=i.value,a=r+sa(i,l++),o+=Co(i,t,n,a,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function to(e,t,n){if(e==null)return e;var r=[],s=0;return Co(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Wv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gt={current:null},Eo={transition:null},Hv={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:Eo,ReactCurrentOwner:cc};function cp(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:to,forEach:function(e,t,n){to(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return to(e,function(){t++}),t},toArray:function(e){return to(e,function(t){return t})||[]},only:function(e){if(!dc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ue.Component=Us;ue.Fragment=Tv;ue.Profiler=_v;ue.PureComponent=ac;ue.StrictMode=Iv;ue.Suspense=Dv;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hv;ue.act=cp;ue.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=sp({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=cc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)lp.call(t,a)&&!ap.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Vi,type:e.type,key:s,ref:i,props:r,_owner:o}};ue.createContext=function(e){return e={$$typeof:Ov,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Pv,_context:e},e.Consumer=e};ue.createElement=up;ue.createFactory=function(e){var t=up.bind(null,e);return t.type=e,t};ue.createRef=function(){return{current:null}};ue.forwardRef=function(e){return{$$typeof:Fv,render:e}};ue.isValidElement=dc;ue.lazy=function(e){return{$$typeof:Av,_payload:{_status:-1,_result:e},_init:Wv}};ue.memo=function(e,t){return{$$typeof:zv,type:e,compare:t===void 0?null:t}};ue.startTransition=function(e){var t=Eo.transition;Eo.transition={};try{e()}finally{Eo.transition=t}};ue.unstable_act=cp;ue.useCallback=function(e,t){return gt.current.useCallback(e,t)};ue.useContext=function(e){return gt.current.useContext(e)};ue.useDebugValue=function(){};ue.useDeferredValue=function(e){return gt.current.useDeferredValue(e)};ue.useEffect=function(e,t){return gt.current.useEffect(e,t)};ue.useId=function(){return gt.current.useId()};ue.useImperativeHandle=function(e,t,n){return gt.current.useImperativeHandle(e,t,n)};ue.useInsertionEffect=function(e,t){return gt.current.useInsertionEffect(e,t)};ue.useLayoutEffect=function(e,t){return gt.current.useLayoutEffect(e,t)};ue.useMemo=function(e,t){return gt.current.useMemo(e,t)};ue.useReducer=function(e,t,n){return gt.current.useReducer(e,t,n)};ue.useRef=function(e){return gt.current.useRef(e)};ue.useState=function(e){return gt.current.useState(e)};ue.useSyncExternalStore=function(e,t,n){return gt.current.useSyncExternalStore(e,t,n)};ue.useTransition=function(){return gt.current.useTransition()};ue.version="18.3.1";np.exports=ue;var f=np.exports;const Wo=Rv(f);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv=f,Qv=Symbol.for("react.element"),Kv=Symbol.for("react.fragment"),Gv=Object.prototype.hasOwnProperty,Yv=Vv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qv={key:!0,ref:!0,__self:!0,__source:!0};function dp(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Gv.call(t,r)&&!qv.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Qv,type:e,key:i,ref:o,props:s,_owner:Yv.current}}Sl.Fragment=Kv;Sl.jsx=dp;Sl.jsxs=dp;tp.exports=Sl;var u=tp.exports,fp={exports:{}},Tt={},hp={exports:{}},pp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,B){var q=O.length;O.push(B);e:for(;0<q;){var de=q-1>>>1,Q=O[de];if(0<s(Q,B))O[de]=B,O[q]=Q,q=de;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var B=O[0],q=O.pop();if(q!==B){O[0]=q;e:for(var de=0,Q=O.length,le=Q>>>1;de<le;){var se=2*(de+1)-1,fe=O[se],ke=se+1,Ie=O[ke];if(0>s(fe,q))ke<Q&&0>s(Ie,fe)?(O[de]=Ie,O[ke]=q,de=ke):(O[de]=fe,O[se]=q,de=se);else if(ke<Q&&0>s(Ie,q))O[de]=Ie,O[ke]=q,de=ke;else break e}}return B}function s(O,B){var q=O.sortIndex-B.sortIndex;return q!==0?q:O.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],c=[],h=1,d=null,v=3,S=!1,k=!1,E=!1,j=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(O){for(var B=n(c);B!==null;){if(B.callback===null)r(c);else if(B.startTime<=O)r(c),B.sortIndex=B.expirationTime,t(a,B);else break;B=n(c)}}function m(O){if(E=!1,p(O),!k)if(n(a)!==null)k=!0,be(C);else{var B=n(c);B!==null&&me(m,B.startTime-O)}}function C(O,B){k=!1,E&&(E=!1,y(R),R=-1),S=!0;var q=v;try{for(p(B),d=n(a);d!==null&&(!(d.expirationTime>B)||O&&!P());){var de=d.callback;if(typeof de=="function"){d.callback=null,v=d.priorityLevel;var Q=de(d.expirationTime<=B);B=e.unstable_now(),typeof Q=="function"?d.callback=Q:d===n(a)&&r(a),p(B)}else r(a);d=n(a)}if(d!==null)var le=!0;else{var se=n(c);se!==null&&me(m,se.startTime-B),le=!1}return le}finally{d=null,v=q,S=!1}}var L=!1,T=null,R=-1,_=5,b=-1;function P(){return!(e.unstable_now()-b<_)}function ee(){if(T!==null){var O=e.unstable_now();b=O;var B=!0;try{B=T(!0,O)}finally{B?re():(L=!1,T=null)}}else L=!1}var re;if(typeof g=="function")re=function(){g(ee)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Te=H.port2;H.port1.onmessage=ee,re=function(){Te.postMessage(null)}}else re=function(){j(ee,0)};function be(O){T=O,L||(L=!0,re())}function me(O,B){R=j(function(){O(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){k||S||(k=!0,be(C))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(O){switch(v){case 1:case 2:case 3:var B=3;break;default:B=v}var q=v;v=B;try{return O()}finally{v=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var q=v;v=O;try{return B()}finally{v=q}},e.unstable_scheduleCallback=function(O,B,q){var de=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?de+q:de):q=de,O){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=q+Q,O={id:h++,callback:B,priorityLevel:O,startTime:q,expirationTime:Q,sortIndex:-1},q>de?(O.sortIndex=q,t(c,O),n(a)===null&&O===n(c)&&(E?(y(R),R=-1):E=!0,me(m,q-de))):(O.sortIndex=Q,t(a,O),k||S||(k=!0,be(C))),O},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(O){var B=v;return function(){var q=v;v=B;try{return O.apply(this,arguments)}finally{v=q}}}})(pp);hp.exports=pp;var Xv=hp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv=f,Lt=Xv;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mp=new Set,xi={};function Qr(e,t){Ps(e,t),Ps(e+"Capture",t)}function Ps(e,t){for(xi[e]=t,e=0;e<t.length;e++)mp.add(t[e])}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ua=Object.prototype.hasOwnProperty,Zv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Od={},Fd={};function ey(e){return Ua.call(Fd,e)?!0:Ua.call(Od,e)?!1:Zv.test(e)?Fd[e]=!0:(Od[e]=!0,!1)}function ty(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ny(e,t,n,r){if(t===null||typeof t>"u"||ty(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function vt(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ze[e]=new vt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ze[t]=new vt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ze[e]=new vt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ze[e]=new vt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ze[e]=new vt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ze[e]=new vt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ze[e]=new vt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ze[e]=new vt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ze[e]=new vt(e,5,!1,e.toLowerCase(),null,!1,!1)});var fc=/[\-:]([a-z])/g;function hc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fc,hc);Ze[t]=new vt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fc,hc);Ze[t]=new vt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fc,hc);Ze[t]=new vt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ze[e]=new vt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ze[e]=new vt(e,1,!1,e.toLowerCase(),null,!0,!0)});function pc(e,t,n,r){var s=Ze.hasOwnProperty(t)?Ze[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ny(t,n,s,r)&&(n=null),r||s===null?ey(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var In=Jv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,no=Symbol.for("react.element"),ts=Symbol.for("react.portal"),ns=Symbol.for("react.fragment"),mc=Symbol.for("react.strict_mode"),Ba=Symbol.for("react.profiler"),gp=Symbol.for("react.provider"),vp=Symbol.for("react.context"),gc=Symbol.for("react.forward_ref"),Wa=Symbol.for("react.suspense"),Ha=Symbol.for("react.suspense_list"),vc=Symbol.for("react.memo"),zn=Symbol.for("react.lazy"),yp=Symbol.for("react.offscreen"),Dd=Symbol.iterator;function Ks(e){return e===null||typeof e!="object"?null:(e=Dd&&e[Dd]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,ia;function ri(e){if(ia===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ia=t&&t[1]||""}return`
`+ia+e}var oa=!1;function la(e,t){if(!e||oa)return"";oa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var a=`
`+s[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{oa=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ri(e):""}function ry(e){switch(e.tag){case 5:return ri(e.type);case 16:return ri("Lazy");case 13:return ri("Suspense");case 19:return ri("SuspenseList");case 0:case 2:case 15:return e=la(e.type,!1),e;case 11:return e=la(e.type.render,!1),e;case 1:return e=la(e.type,!0),e;default:return""}}function Va(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ns:return"Fragment";case ts:return"Portal";case Ba:return"Profiler";case mc:return"StrictMode";case Wa:return"Suspense";case Ha:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vp:return(e.displayName||"Context")+".Consumer";case gp:return(e._context.displayName||"Context")+".Provider";case gc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vc:return t=e.displayName||null,t!==null?t:Va(e.type)||"Memo";case zn:t=e._payload,e=e._init;try{return Va(e(t))}catch{}}return null}function sy(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Va(t);case 8:return t===mc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ur(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function iy(e){var t=xp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ro(e){e._valueTracker||(e._valueTracker=iy(e))}function wp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=xp(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ho(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qa(e,t){var n=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function zd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ur(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Sp(e,t){t=t.checked,t!=null&&pc(e,"checked",t,!1)}function Ka(e,t){Sp(e,t);var n=ur(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ga(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ga(e,t.type,ur(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ad(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ga(e,t,n){(t!=="number"||Ho(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var si=Array.isArray;function hs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ur(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ya(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $d(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(si(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ur(n)}}function kp(e,t){var n=ur(t.value),r=ur(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ud(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Cp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Cp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var so,Ep=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(so=so||document.createElement("div"),so.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=so.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oy=["Webkit","ms","Moz","O"];Object.keys(ui).forEach(function(e){oy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ui[t]=ui[e]})});function bp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ui.hasOwnProperty(e)&&ui[e]?(""+t).trim():t+"px"}function Np(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=bp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var ly=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xa(e,t){if(t){if(ly[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Ja(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Za=null;function yc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var eu=null,ps=null,ms=null;function Bd(e){if(e=Gi(e)){if(typeof eu!="function")throw Error(D(280));var t=e.stateNode;t&&(t=Nl(t),eu(e.stateNode,e.type,t))}}function jp(e){ps?ms?ms.push(e):ms=[e]:ps=e}function Mp(){if(ps){var e=ps,t=ms;if(ms=ps=null,Bd(e),t)for(e=0;e<t.length;e++)Bd(t[e])}}function Rp(e,t){return e(t)}function Lp(){}var aa=!1;function Tp(e,t,n){if(aa)return e(t,n);aa=!0;try{return Rp(e,t,n)}finally{aa=!1,(ps!==null||ms!==null)&&(Lp(),Mp())}}function Si(e,t){var n=e.stateNode;if(n===null)return null;var r=Nl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var tu=!1;if(Mn)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){tu=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{tu=!1}function ay(e,t,n,r,s,i,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(h){this.onError(h)}}var ci=!1,Vo=null,Qo=!1,nu=null,uy={onError:function(e){ci=!0,Vo=e}};function cy(e,t,n,r,s,i,o,l,a){ci=!1,Vo=null,ay.apply(uy,arguments)}function dy(e,t,n,r,s,i,o,l,a){if(cy.apply(this,arguments),ci){if(ci){var c=Vo;ci=!1,Vo=null}else throw Error(D(198));Qo||(Qo=!0,nu=c)}}function Kr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ip(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Wd(e){if(Kr(e)!==e)throw Error(D(188))}function fy(e){var t=e.alternate;if(!t){if(t=Kr(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Wd(s),e;if(i===r)return Wd(s),t;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function _p(e){return e=fy(e),e!==null?Pp(e):null}function Pp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Pp(e);if(t!==null)return t;e=e.sibling}return null}var Op=Lt.unstable_scheduleCallback,Hd=Lt.unstable_cancelCallback,hy=Lt.unstable_shouldYield,py=Lt.unstable_requestPaint,$e=Lt.unstable_now,my=Lt.unstable_getCurrentPriorityLevel,xc=Lt.unstable_ImmediatePriority,Fp=Lt.unstable_UserBlockingPriority,Ko=Lt.unstable_NormalPriority,gy=Lt.unstable_LowPriority,Dp=Lt.unstable_IdlePriority,kl=null,cn=null;function vy(e){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(kl,e,void 0,(e.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:wy,yy=Math.log,xy=Math.LN2;function wy(e){return e>>>=0,e===0?32:31-(yy(e)/xy|0)|0}var io=64,oo=4194304;function ii(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Go(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=ii(l):(i&=o,i!==0&&(r=ii(i)))}else o=n&~s,o!==0?r=ii(o):i!==0&&(r=ii(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Xt(t),s=1<<n,r|=e[n],t&=~s;return r}function Sy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ky(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Xt(i),l=1<<o,a=s[o];a===-1?(!(l&n)||l&r)&&(s[o]=Sy(l,t)):a<=t&&(e.expiredLanes|=l),i&=~l}}function ru(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zp(){var e=io;return io<<=1,!(io&4194240)&&(io=64),e}function ua(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Qi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xt(t),e[t]=n}function Cy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Xt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function wc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Xt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ye=0;function Ap(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $p,Sc,Up,Bp,Wp,su=!1,lo=[],Zn=null,er=null,tr=null,ki=new Map,Ci=new Map,$n=[],Ey="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vd(e,t){switch(e){case"focusin":case"focusout":Zn=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":ki.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ci.delete(t.pointerId)}}function Ys(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Gi(t),t!==null&&Sc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function by(e,t,n,r,s){switch(t){case"focusin":return Zn=Ys(Zn,e,t,n,r,s),!0;case"dragenter":return er=Ys(er,e,t,n,r,s),!0;case"mouseover":return tr=Ys(tr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return ki.set(i,Ys(ki.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ci.set(i,Ys(Ci.get(i)||null,e,t,n,r,s)),!0}return!1}function Hp(e){var t=kr(e.target);if(t!==null){var n=Kr(t);if(n!==null){if(t=n.tag,t===13){if(t=Ip(n),t!==null){e.blockedOn=t,Wp(e.priority,function(){Up(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=iu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Za=r,n.target.dispatchEvent(r),Za=null}else return t=Gi(n),t!==null&&Sc(t),e.blockedOn=n,!1;t.shift()}return!0}function Qd(e,t,n){bo(e)&&n.delete(t)}function Ny(){su=!1,Zn!==null&&bo(Zn)&&(Zn=null),er!==null&&bo(er)&&(er=null),tr!==null&&bo(tr)&&(tr=null),ki.forEach(Qd),Ci.forEach(Qd)}function qs(e,t){e.blockedOn===t&&(e.blockedOn=null,su||(su=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,Ny)))}function Ei(e){function t(s){return qs(s,e)}if(0<lo.length){qs(lo[0],e);for(var n=1;n<lo.length;n++){var r=lo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Zn!==null&&qs(Zn,e),er!==null&&qs(er,e),tr!==null&&qs(tr,e),ki.forEach(t),Ci.forEach(t),n=0;n<$n.length;n++)r=$n[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<$n.length&&(n=$n[0],n.blockedOn===null);)Hp(n),n.blockedOn===null&&$n.shift()}var gs=In.ReactCurrentBatchConfig,Yo=!0;function jy(e,t,n,r){var s=ye,i=gs.transition;gs.transition=null;try{ye=1,kc(e,t,n,r)}finally{ye=s,gs.transition=i}}function My(e,t,n,r){var s=ye,i=gs.transition;gs.transition=null;try{ye=4,kc(e,t,n,r)}finally{ye=s,gs.transition=i}}function kc(e,t,n,r){if(Yo){var s=iu(e,t,n,r);if(s===null)xa(e,t,r,qo,n),Vd(e,r);else if(by(s,e,t,n,r))r.stopPropagation();else if(Vd(e,r),t&4&&-1<Ey.indexOf(e)){for(;s!==null;){var i=Gi(s);if(i!==null&&$p(i),i=iu(e,t,n,r),i===null&&xa(e,t,r,qo,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else xa(e,t,r,null,n)}}var qo=null;function iu(e,t,n,r){if(qo=null,e=yc(r),e=kr(e),e!==null)if(t=Kr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ip(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qo=e,null}function Vp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(my()){case xc:return 1;case Fp:return 4;case Ko:case gy:return 16;case Dp:return 536870912;default:return 16}default:return 16}}var Xn=null,Cc=null,No=null;function Qp(){if(No)return No;var e,t=Cc,n=t.length,r,s="value"in Xn?Xn.value:Xn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return No=s.slice(e,1<r?1-r:void 0)}function jo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ao(){return!0}function Kd(){return!1}function It(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ao:Kd,this.isPropagationStopped=Kd,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ao)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ao)},persist:function(){},isPersistent:ao}),t}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ec=It(Bs),Ki=Le({},Bs,{view:0,detail:0}),Ry=It(Ki),ca,da,Xs,Cl=Le({},Ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xs&&(Xs&&e.type==="mousemove"?(ca=e.screenX-Xs.screenX,da=e.screenY-Xs.screenY):da=ca=0,Xs=e),ca)},movementY:function(e){return"movementY"in e?e.movementY:da}}),Gd=It(Cl),Ly=Le({},Cl,{dataTransfer:0}),Ty=It(Ly),Iy=Le({},Ki,{relatedTarget:0}),fa=It(Iy),_y=Le({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Py=It(_y),Oy=Le({},Bs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fy=It(Oy),Dy=Le({},Bs,{data:0}),Yd=It(Dy),zy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ay={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$y[e])?!!t[e]:!1}function bc(){return Uy}var By=Le({},Ki,{key:function(e){if(e.key){var t=zy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=jo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ay[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bc,charCode:function(e){return e.type==="keypress"?jo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?jo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Wy=It(By),Hy=Le({},Cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qd=It(Hy),Vy=Le({},Ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bc}),Qy=It(Vy),Ky=Le({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gy=It(Ky),Yy=Le({},Cl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qy=It(Yy),Xy=[9,13,27,32],Nc=Mn&&"CompositionEvent"in window,di=null;Mn&&"documentMode"in document&&(di=document.documentMode);var Jy=Mn&&"TextEvent"in window&&!di,Kp=Mn&&(!Nc||di&&8<di&&11>=di),Xd=" ",Jd=!1;function Gp(e,t){switch(e){case"keyup":return Xy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rs=!1;function Zy(e,t){switch(e){case"compositionend":return Yp(t);case"keypress":return t.which!==32?null:(Jd=!0,Xd);case"textInput":return e=t.data,e===Xd&&Jd?null:e;default:return null}}function e0(e,t){if(rs)return e==="compositionend"||!Nc&&Gp(e,t)?(e=Qp(),No=Cc=Xn=null,rs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Kp&&t.locale!=="ko"?null:t.data;default:return null}}var t0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!t0[e.type]:t==="textarea"}function qp(e,t,n,r){jp(r),t=Xo(t,"onChange"),0<t.length&&(n=new Ec("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var fi=null,bi=null;function n0(e){lm(e,0)}function El(e){var t=os(e);if(wp(t))return e}function r0(e,t){if(e==="change")return t}var Xp=!1;if(Mn){var ha;if(Mn){var pa="oninput"in document;if(!pa){var ef=document.createElement("div");ef.setAttribute("oninput","return;"),pa=typeof ef.oninput=="function"}ha=pa}else ha=!1;Xp=ha&&(!document.documentMode||9<document.documentMode)}function tf(){fi&&(fi.detachEvent("onpropertychange",Jp),bi=fi=null)}function Jp(e){if(e.propertyName==="value"&&El(bi)){var t=[];qp(t,bi,e,yc(e)),Tp(n0,t)}}function s0(e,t,n){e==="focusin"?(tf(),fi=t,bi=n,fi.attachEvent("onpropertychange",Jp)):e==="focusout"&&tf()}function i0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return El(bi)}function o0(e,t){if(e==="click")return El(t)}function l0(e,t){if(e==="input"||e==="change")return El(t)}function a0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zt=typeof Object.is=="function"?Object.is:a0;function Ni(e,t){if(Zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ua.call(t,s)||!Zt(e[s],t[s]))return!1}return!0}function nf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rf(e,t){var n=nf(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nf(n)}}function Zp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function em(){for(var e=window,t=Ho();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ho(e.document)}return t}function jc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function u0(e){var t=em(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Zp(n.ownerDocument.documentElement,n)){if(r!==null&&jc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=rf(n,i);var o=rf(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var c0=Mn&&"documentMode"in document&&11>=document.documentMode,ss=null,ou=null,hi=null,lu=!1;function sf(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lu||ss==null||ss!==Ho(r)||(r=ss,"selectionStart"in r&&jc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hi&&Ni(hi,r)||(hi=r,r=Xo(ou,"onSelect"),0<r.length&&(t=new Ec("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ss)))}function uo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var is={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionend:uo("Transition","TransitionEnd")},ma={},tm={};Mn&&(tm=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function bl(e){if(ma[e])return ma[e];if(!is[e])return e;var t=is[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in tm)return ma[e]=t[n];return e}var nm=bl("animationend"),rm=bl("animationiteration"),sm=bl("animationstart"),im=bl("transitionend"),om=new Map,of="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dr(e,t){om.set(e,t),Qr(t,[e])}for(var ga=0;ga<of.length;ga++){var va=of[ga],d0=va.toLowerCase(),f0=va[0].toUpperCase()+va.slice(1);dr(d0,"on"+f0)}dr(nm,"onAnimationEnd");dr(rm,"onAnimationIteration");dr(sm,"onAnimationStart");dr("dblclick","onDoubleClick");dr("focusin","onFocus");dr("focusout","onBlur");dr(im,"onTransitionEnd");Ps("onMouseEnter",["mouseout","mouseover"]);Ps("onMouseLeave",["mouseout","mouseover"]);Ps("onPointerEnter",["pointerout","pointerover"]);Ps("onPointerLeave",["pointerout","pointerover"]);Qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h0=new Set("cancel close invalid load scroll toggle".split(" ").concat(oi));function lf(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,dy(r,t,void 0,e),e.currentTarget=null}function lm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==i&&s.isPropagationStopped())break e;lf(s,l,c),i=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==i&&s.isPropagationStopped())break e;lf(s,l,c),i=a}}}if(Qo)throw e=nu,Qo=!1,nu=null,e}function Ce(e,t){var n=t[fu];n===void 0&&(n=t[fu]=new Set);var r=e+"__bubble";n.has(r)||(am(t,e,2,!1),n.add(r))}function ya(e,t,n){var r=0;t&&(r|=4),am(n,e,r,t)}var co="_reactListening"+Math.random().toString(36).slice(2);function ji(e){if(!e[co]){e[co]=!0,mp.forEach(function(n){n!=="selectionchange"&&(h0.has(n)||ya(n,!1,e),ya(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[co]||(t[co]=!0,ya("selectionchange",!1,t))}}function am(e,t,n,r){switch(Vp(t)){case 1:var s=jy;break;case 4:s=My;break;default:s=kc}n=s.bind(null,t,n,e),s=void 0,!tu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function xa(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=kr(l),o===null)return;if(a=o.tag,a===5||a===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Tp(function(){var c=i,h=yc(n),d=[];e:{var v=om.get(e);if(v!==void 0){var S=Ec,k=e;switch(e){case"keypress":if(jo(n)===0)break e;case"keydown":case"keyup":S=Wy;break;case"focusin":k="focus",S=fa;break;case"focusout":k="blur",S=fa;break;case"beforeblur":case"afterblur":S=fa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Gd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Ty;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Qy;break;case nm:case rm:case sm:S=Py;break;case im:S=Gy;break;case"scroll":S=Ry;break;case"wheel":S=qy;break;case"copy":case"cut":case"paste":S=Fy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=qd}var E=(t&4)!==0,j=!E&&e==="scroll",y=E?v!==null?v+"Capture":null:v;E=[];for(var g=c,p;g!==null;){p=g;var m=p.stateNode;if(p.tag===5&&m!==null&&(p=m,y!==null&&(m=Si(g,y),m!=null&&E.push(Mi(g,m,p)))),j)break;g=g.return}0<E.length&&(v=new S(v,k,null,n,h),d.push({event:v,listeners:E}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",v&&n!==Za&&(k=n.relatedTarget||n.fromElement)&&(kr(k)||k[Rn]))break e;if((S||v)&&(v=h.window===h?h:(v=h.ownerDocument)?v.defaultView||v.parentWindow:window,S?(k=n.relatedTarget||n.toElement,S=c,k=k?kr(k):null,k!==null&&(j=Kr(k),k!==j||k.tag!==5&&k.tag!==6)&&(k=null)):(S=null,k=c),S!==k)){if(E=Gd,m="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(E=qd,m="onPointerLeave",y="onPointerEnter",g="pointer"),j=S==null?v:os(S),p=k==null?v:os(k),v=new E(m,g+"leave",S,n,h),v.target=j,v.relatedTarget=p,m=null,kr(h)===c&&(E=new E(y,g+"enter",k,n,h),E.target=p,E.relatedTarget=j,m=E),j=m,S&&k)t:{for(E=S,y=k,g=0,p=E;p;p=Xr(p))g++;for(p=0,m=y;m;m=Xr(m))p++;for(;0<g-p;)E=Xr(E),g--;for(;0<p-g;)y=Xr(y),p--;for(;g--;){if(E===y||y!==null&&E===y.alternate)break t;E=Xr(E),y=Xr(y)}E=null}else E=null;S!==null&&af(d,v,S,E,!1),k!==null&&j!==null&&af(d,j,k,E,!0)}}e:{if(v=c?os(c):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var C=r0;else if(Zd(v))if(Xp)C=l0;else{C=i0;var L=s0}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(C=o0);if(C&&(C=C(e,c))){qp(d,C,n,h);break e}L&&L(e,v,c),e==="focusout"&&(L=v._wrapperState)&&L.controlled&&v.type==="number"&&Ga(v,"number",v.value)}switch(L=c?os(c):window,e){case"focusin":(Zd(L)||L.contentEditable==="true")&&(ss=L,ou=c,hi=null);break;case"focusout":hi=ou=ss=null;break;case"mousedown":lu=!0;break;case"contextmenu":case"mouseup":case"dragend":lu=!1,sf(d,n,h);break;case"selectionchange":if(c0)break;case"keydown":case"keyup":sf(d,n,h)}var T;if(Nc)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else rs?Gp(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Kp&&n.locale!=="ko"&&(rs||R!=="onCompositionStart"?R==="onCompositionEnd"&&rs&&(T=Qp()):(Xn=h,Cc="value"in Xn?Xn.value:Xn.textContent,rs=!0)),L=Xo(c,R),0<L.length&&(R=new Yd(R,e,null,n,h),d.push({event:R,listeners:L}),T?R.data=T:(T=Yp(n),T!==null&&(R.data=T)))),(T=Jy?Zy(e,n):e0(e,n))&&(c=Xo(c,"onBeforeInput"),0<c.length&&(h=new Yd("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=T))}lm(d,t)})}function Mi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Si(e,n),i!=null&&r.unshift(Mi(e,i,s)),i=Si(e,t),i!=null&&r.push(Mi(e,i,s))),e=e.return}return r}function Xr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function af(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,s?(a=Si(n,i),a!=null&&o.unshift(Mi(n,a,l))):s||(a=Si(n,i),a!=null&&o.push(Mi(n,a,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var p0=/\r\n?/g,m0=/\u0000|\uFFFD/g;function uf(e){return(typeof e=="string"?e:""+e).replace(p0,`
`).replace(m0,"")}function fo(e,t,n){if(t=uf(t),uf(e)!==t&&n)throw Error(D(425))}function Jo(){}var au=null,uu=null;function cu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var du=typeof setTimeout=="function"?setTimeout:void 0,g0=typeof clearTimeout=="function"?clearTimeout:void 0,cf=typeof Promise=="function"?Promise:void 0,v0=typeof queueMicrotask=="function"?queueMicrotask:typeof cf<"u"?function(e){return cf.resolve(null).then(e).catch(y0)}:du;function y0(e){setTimeout(function(){throw e})}function wa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ei(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ei(t)}function nr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function df(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ws=Math.random().toString(36).slice(2),un="__reactFiber$"+Ws,Ri="__reactProps$"+Ws,Rn="__reactContainer$"+Ws,fu="__reactEvents$"+Ws,x0="__reactListeners$"+Ws,w0="__reactHandles$"+Ws;function kr(e){var t=e[un];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Rn]||n[un]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=df(e);e!==null;){if(n=e[un])return n;e=df(e)}return t}e=n,n=e.parentNode}return null}function Gi(e){return e=e[un]||e[Rn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function os(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function Nl(e){return e[Ri]||null}var hu=[],ls=-1;function fr(e){return{current:e}}function Ee(e){0>ls||(e.current=hu[ls],hu[ls]=null,ls--)}function Se(e,t){ls++,hu[ls]=e.current,e.current=t}var cr={},it=fr(cr),kt=fr(!1),Ar=cr;function Os(e,t){var n=e.type.contextTypes;if(!n)return cr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ct(e){return e=e.childContextTypes,e!=null}function Zo(){Ee(kt),Ee(it)}function ff(e,t,n){if(it.current!==cr)throw Error(D(168));Se(it,t),Se(kt,n)}function um(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(D(108,sy(e)||"Unknown",s));return Le({},n,r)}function el(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cr,Ar=it.current,Se(it,e),Se(kt,kt.current),!0}function hf(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=um(e,t,Ar),r.__reactInternalMemoizedMergedChildContext=e,Ee(kt),Ee(it),Se(it,e)):Ee(kt),Se(kt,n)}var yn=null,jl=!1,Sa=!1;function cm(e){yn===null?yn=[e]:yn.push(e)}function S0(e){jl=!0,cm(e)}function hr(){if(!Sa&&yn!==null){Sa=!0;var e=0,t=ye;try{var n=yn;for(ye=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}yn=null,jl=!1}catch(s){throw yn!==null&&(yn=yn.slice(e+1)),Op(xc,hr),s}finally{ye=t,Sa=!1}}return null}var as=[],us=0,tl=null,nl=0,Ft=[],Dt=0,$r=null,Cn=1,En="";function wr(e,t){as[us++]=nl,as[us++]=tl,tl=e,nl=t}function dm(e,t,n){Ft[Dt++]=Cn,Ft[Dt++]=En,Ft[Dt++]=$r,$r=e;var r=Cn;e=En;var s=32-Xt(r)-1;r&=~(1<<s),n+=1;var i=32-Xt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Cn=1<<32-Xt(t)+s|n<<s|r,En=i+e}else Cn=1<<i|n<<s|r,En=e}function Mc(e){e.return!==null&&(wr(e,1),dm(e,1,0))}function Rc(e){for(;e===tl;)tl=as[--us],as[us]=null,nl=as[--us],as[us]=null;for(;e===$r;)$r=Ft[--Dt],Ft[Dt]=null,En=Ft[--Dt],Ft[Dt]=null,Cn=Ft[--Dt],Ft[Dt]=null}var Rt=null,Mt=null,Ne=!1,qt=null;function fm(e,t){var n=At(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function pf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rt=e,Mt=nr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rt=e,Mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=$r!==null?{id:Cn,overflow:En}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=At(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Rt=e,Mt=null,!0):!1;default:return!1}}function pu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mu(e){if(Ne){var t=Mt;if(t){var n=t;if(!pf(e,t)){if(pu(e))throw Error(D(418));t=nr(n.nextSibling);var r=Rt;t&&pf(e,t)?fm(r,n):(e.flags=e.flags&-4097|2,Ne=!1,Rt=e)}}else{if(pu(e))throw Error(D(418));e.flags=e.flags&-4097|2,Ne=!1,Rt=e}}}function mf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rt=e}function ho(e){if(e!==Rt)return!1;if(!Ne)return mf(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!cu(e.type,e.memoizedProps)),t&&(t=Mt)){if(pu(e))throw hm(),Error(D(418));for(;t;)fm(e,t),t=nr(t.nextSibling)}if(mf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Mt=nr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Mt=null}}else Mt=Rt?nr(e.stateNode.nextSibling):null;return!0}function hm(){for(var e=Mt;e;)e=nr(e.nextSibling)}function Fs(){Mt=Rt=null,Ne=!1}function Lc(e){qt===null?qt=[e]:qt.push(e)}var k0=In.ReactCurrentBatchConfig;function Js(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function po(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function gf(e){var t=e._init;return t(e._payload)}function pm(e){function t(y,g){if(e){var p=y.deletions;p===null?(y.deletions=[g],y.flags|=16):p.push(g)}}function n(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function s(y,g){return y=or(y,g),y.index=0,y.sibling=null,y}function i(y,g,p){return y.index=p,e?(p=y.alternate,p!==null?(p=p.index,p<g?(y.flags|=2,g):p):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,g,p,m){return g===null||g.tag!==6?(g=Ma(p,y.mode,m),g.return=y,g):(g=s(g,p),g.return=y,g)}function a(y,g,p,m){var C=p.type;return C===ns?h(y,g,p.props.children,m,p.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===zn&&gf(C)===g.type)?(m=s(g,p.props),m.ref=Js(y,g,p),m.return=y,m):(m=Po(p.type,p.key,p.props,null,y.mode,m),m.ref=Js(y,g,p),m.return=y,m)}function c(y,g,p,m){return g===null||g.tag!==4||g.stateNode.containerInfo!==p.containerInfo||g.stateNode.implementation!==p.implementation?(g=Ra(p,y.mode,m),g.return=y,g):(g=s(g,p.children||[]),g.return=y,g)}function h(y,g,p,m,C){return g===null||g.tag!==7?(g=zr(p,y.mode,m,C),g.return=y,g):(g=s(g,p),g.return=y,g)}function d(y,g,p){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Ma(""+g,y.mode,p),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case no:return p=Po(g.type,g.key,g.props,null,y.mode,p),p.ref=Js(y,null,g),p.return=y,p;case ts:return g=Ra(g,y.mode,p),g.return=y,g;case zn:var m=g._init;return d(y,m(g._payload),p)}if(si(g)||Ks(g))return g=zr(g,y.mode,p,null),g.return=y,g;po(y,g)}return null}function v(y,g,p,m){var C=g!==null?g.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return C!==null?null:l(y,g,""+p,m);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case no:return p.key===C?a(y,g,p,m):null;case ts:return p.key===C?c(y,g,p,m):null;case zn:return C=p._init,v(y,g,C(p._payload),m)}if(si(p)||Ks(p))return C!==null?null:h(y,g,p,m,null);po(y,p)}return null}function S(y,g,p,m,C){if(typeof m=="string"&&m!==""||typeof m=="number")return y=y.get(p)||null,l(g,y,""+m,C);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case no:return y=y.get(m.key===null?p:m.key)||null,a(g,y,m,C);case ts:return y=y.get(m.key===null?p:m.key)||null,c(g,y,m,C);case zn:var L=m._init;return S(y,g,p,L(m._payload),C)}if(si(m)||Ks(m))return y=y.get(p)||null,h(g,y,m,C,null);po(g,m)}return null}function k(y,g,p,m){for(var C=null,L=null,T=g,R=g=0,_=null;T!==null&&R<p.length;R++){T.index>R?(_=T,T=null):_=T.sibling;var b=v(y,T,p[R],m);if(b===null){T===null&&(T=_);break}e&&T&&b.alternate===null&&t(y,T),g=i(b,g,R),L===null?C=b:L.sibling=b,L=b,T=_}if(R===p.length)return n(y,T),Ne&&wr(y,R),C;if(T===null){for(;R<p.length;R++)T=d(y,p[R],m),T!==null&&(g=i(T,g,R),L===null?C=T:L.sibling=T,L=T);return Ne&&wr(y,R),C}for(T=r(y,T);R<p.length;R++)_=S(T,y,R,p[R],m),_!==null&&(e&&_.alternate!==null&&T.delete(_.key===null?R:_.key),g=i(_,g,R),L===null?C=_:L.sibling=_,L=_);return e&&T.forEach(function(P){return t(y,P)}),Ne&&wr(y,R),C}function E(y,g,p,m){var C=Ks(p);if(typeof C!="function")throw Error(D(150));if(p=C.call(p),p==null)throw Error(D(151));for(var L=C=null,T=g,R=g=0,_=null,b=p.next();T!==null&&!b.done;R++,b=p.next()){T.index>R?(_=T,T=null):_=T.sibling;var P=v(y,T,b.value,m);if(P===null){T===null&&(T=_);break}e&&T&&P.alternate===null&&t(y,T),g=i(P,g,R),L===null?C=P:L.sibling=P,L=P,T=_}if(b.done)return n(y,T),Ne&&wr(y,R),C;if(T===null){for(;!b.done;R++,b=p.next())b=d(y,b.value,m),b!==null&&(g=i(b,g,R),L===null?C=b:L.sibling=b,L=b);return Ne&&wr(y,R),C}for(T=r(y,T);!b.done;R++,b=p.next())b=S(T,y,R,b.value,m),b!==null&&(e&&b.alternate!==null&&T.delete(b.key===null?R:b.key),g=i(b,g,R),L===null?C=b:L.sibling=b,L=b);return e&&T.forEach(function(ee){return t(y,ee)}),Ne&&wr(y,R),C}function j(y,g,p,m){if(typeof p=="object"&&p!==null&&p.type===ns&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case no:e:{for(var C=p.key,L=g;L!==null;){if(L.key===C){if(C=p.type,C===ns){if(L.tag===7){n(y,L.sibling),g=s(L,p.props.children),g.return=y,y=g;break e}}else if(L.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===zn&&gf(C)===L.type){n(y,L.sibling),g=s(L,p.props),g.ref=Js(y,L,p),g.return=y,y=g;break e}n(y,L);break}else t(y,L);L=L.sibling}p.type===ns?(g=zr(p.props.children,y.mode,m,p.key),g.return=y,y=g):(m=Po(p.type,p.key,p.props,null,y.mode,m),m.ref=Js(y,g,p),m.return=y,y=m)}return o(y);case ts:e:{for(L=p.key;g!==null;){if(g.key===L)if(g.tag===4&&g.stateNode.containerInfo===p.containerInfo&&g.stateNode.implementation===p.implementation){n(y,g.sibling),g=s(g,p.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else t(y,g);g=g.sibling}g=Ra(p,y.mode,m),g.return=y,y=g}return o(y);case zn:return L=p._init,j(y,g,L(p._payload),m)}if(si(p))return k(y,g,p,m);if(Ks(p))return E(y,g,p,m);po(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,g!==null&&g.tag===6?(n(y,g.sibling),g=s(g,p),g.return=y,y=g):(n(y,g),g=Ma(p,y.mode,m),g.return=y,y=g),o(y)):n(y,g)}return j}var Ds=pm(!0),mm=pm(!1),rl=fr(null),sl=null,cs=null,Tc=null;function Ic(){Tc=cs=sl=null}function _c(e){var t=rl.current;Ee(rl),e._currentValue=t}function gu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function vs(e,t){sl=e,Tc=cs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(St=!0),e.firstContext=null)}function Ut(e){var t=e._currentValue;if(Tc!==e)if(e={context:e,memoizedValue:t,next:null},cs===null){if(sl===null)throw Error(D(308));cs=e,sl.dependencies={lanes:0,firstContext:e}}else cs=cs.next=e;return t}var Cr=null;function Pc(e){Cr===null?Cr=[e]:Cr.push(e)}function gm(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Pc(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ln(e,r)}function Ln(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var An=!1;function Oc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ln(e,n)}return s=r.interleaved,s===null?(t.next=t,Pc(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ln(e,n)}function Mo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,wc(e,n)}}function vf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function il(e,t,n,r){var s=e.updateQueue;An=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?i=c:o.next=c,o=a;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=a))}if(i!==null){var d=s.baseState;o=0,h=c=a=null,l=i;do{var v=l.lane,S=l.eventTime;if((r&v)===v){h!==null&&(h=h.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=e,E=l;switch(v=t,S=n,E.tag){case 1:if(k=E.payload,typeof k=="function"){d=k.call(S,d,v);break e}d=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=E.payload,v=typeof k=="function"?k.call(S,d,v):k,v==null)break e;d=Le({},d,v);break e;case 2:An=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else S={eventTime:S,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=S,a=d):h=h.next=S,o|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(h===null&&(a=d),s.baseState=a,s.firstBaseUpdate=c,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Br|=o,e.lanes=o,e.memoizedState=d}}function yf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var Yi={},dn=fr(Yi),Li=fr(Yi),Ti=fr(Yi);function Er(e){if(e===Yi)throw Error(D(174));return e}function Fc(e,t){switch(Se(Ti,t),Se(Li,e),Se(dn,Yi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:qa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=qa(t,e)}Ee(dn),Se(dn,t)}function zs(){Ee(dn),Ee(Li),Ee(Ti)}function ym(e){Er(Ti.current);var t=Er(dn.current),n=qa(t,e.type);t!==n&&(Se(Li,e),Se(dn,n))}function Dc(e){Li.current===e&&(Ee(dn),Ee(Li))}var Me=fr(0);function ol(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ka=[];function zc(){for(var e=0;e<ka.length;e++)ka[e]._workInProgressVersionPrimary=null;ka.length=0}var Ro=In.ReactCurrentDispatcher,Ca=In.ReactCurrentBatchConfig,Ur=0,Re=null,He=null,Ye=null,ll=!1,pi=!1,Ii=0,C0=0;function nt(){throw Error(D(321))}function Ac(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zt(e[n],t[n]))return!1;return!0}function $c(e,t,n,r,s,i){if(Ur=i,Re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ro.current=e===null||e.memoizedState===null?j0:M0,e=n(r,s),pi){i=0;do{if(pi=!1,Ii=0,25<=i)throw Error(D(301));i+=1,Ye=He=null,t.updateQueue=null,Ro.current=R0,e=n(r,s)}while(pi)}if(Ro.current=al,t=He!==null&&He.next!==null,Ur=0,Ye=He=Re=null,ll=!1,t)throw Error(D(300));return e}function Uc(){var e=Ii!==0;return Ii=0,e}function rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Re.memoizedState=Ye=e:Ye=Ye.next=e,Ye}function Bt(){if(He===null){var e=Re.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=Ye===null?Re.memoizedState:Ye.next;if(t!==null)Ye=t,He=e;else{if(e===null)throw Error(D(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ye===null?Re.memoizedState=Ye=e:Ye=Ye.next=e}return Ye}function _i(e,t){return typeof t=="function"?t(e):t}function Ea(e){var t=Bt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=He,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,a=null,c=i;do{var h=c.lane;if((Ur&h)===h)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,Re.lanes|=h,Br|=h}c=c.next}while(c!==null&&c!==i);a===null?o=r:a.next=l,Zt(r,t.memoizedState)||(St=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Re.lanes|=i,Br|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ba(e){var t=Bt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Zt(i,t.memoizedState)||(St=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function xm(){}function wm(e,t){var n=Re,r=Bt(),s=t(),i=!Zt(r.memoizedState,s);if(i&&(r.memoizedState=s,St=!0),r=r.queue,Bc(Cm.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,Pi(9,km.bind(null,n,r,s,t),void 0,null),qe===null)throw Error(D(349));Ur&30||Sm(n,t,s)}return s}function Sm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function km(e,t,n,r){t.value=n,t.getSnapshot=r,Em(t)&&bm(e)}function Cm(e,t,n){return n(function(){Em(t)&&bm(e)})}function Em(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zt(e,n)}catch{return!0}}function bm(e){var t=Ln(e,1);t!==null&&Jt(t,e,1,-1)}function xf(e){var t=rn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:e},t.queue=e,e=e.dispatch=N0.bind(null,Re,e),[t.memoizedState,e]}function Pi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Nm(){return Bt().memoizedState}function Lo(e,t,n,r){var s=rn();Re.flags|=e,s.memoizedState=Pi(1|t,n,void 0,r===void 0?null:r)}function Ml(e,t,n,r){var s=Bt();r=r===void 0?null:r;var i=void 0;if(He!==null){var o=He.memoizedState;if(i=o.destroy,r!==null&&Ac(r,o.deps)){s.memoizedState=Pi(t,n,i,r);return}}Re.flags|=e,s.memoizedState=Pi(1|t,n,i,r)}function wf(e,t){return Lo(8390656,8,e,t)}function Bc(e,t){return Ml(2048,8,e,t)}function jm(e,t){return Ml(4,2,e,t)}function Mm(e,t){return Ml(4,4,e,t)}function Rm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Lm(e,t,n){return n=n!=null?n.concat([e]):null,Ml(4,4,Rm.bind(null,t,e),n)}function Wc(){}function Tm(e,t){var n=Bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ac(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Im(e,t){var n=Bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ac(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function _m(e,t,n){return Ur&21?(Zt(n,t)||(n=zp(),Re.lanes|=n,Br|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,St=!0),e.memoizedState=n)}function E0(e,t){var n=ye;ye=n!==0&&4>n?n:4,e(!0);var r=Ca.transition;Ca.transition={};try{e(!1),t()}finally{ye=n,Ca.transition=r}}function Pm(){return Bt().memoizedState}function b0(e,t,n){var r=ir(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Om(e))Fm(t,n);else if(n=gm(e,t,n,r),n!==null){var s=mt();Jt(n,e,r,s),Dm(n,t,r)}}function N0(e,t,n){var r=ir(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Om(e))Fm(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Zt(l,o)){var a=t.interleaved;a===null?(s.next=s,Pc(t)):(s.next=a.next,a.next=s),t.interleaved=s;return}}catch{}finally{}n=gm(e,t,s,r),n!==null&&(s=mt(),Jt(n,e,r,s),Dm(n,t,r))}}function Om(e){var t=e.alternate;return e===Re||t!==null&&t===Re}function Fm(e,t){pi=ll=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Dm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,wc(e,n)}}var al={readContext:Ut,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},j0={readContext:Ut,useCallback:function(e,t){return rn().memoizedState=[e,t===void 0?null:t],e},useContext:Ut,useEffect:wf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Lo(4194308,4,Rm.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Lo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lo(4,2,e,t)},useMemo:function(e,t){var n=rn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=rn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=b0.bind(null,Re,e),[r.memoizedState,e]},useRef:function(e){var t=rn();return e={current:e},t.memoizedState=e},useState:xf,useDebugValue:Wc,useDeferredValue:function(e){return rn().memoizedState=e},useTransition:function(){var e=xf(!1),t=e[0];return e=E0.bind(null,e[1]),rn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Re,s=rn();if(Ne){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),qe===null)throw Error(D(349));Ur&30||Sm(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,wf(Cm.bind(null,r,i,e),[e]),r.flags|=2048,Pi(9,km.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=rn(),t=qe.identifierPrefix;if(Ne){var n=En,r=Cn;n=(r&~(1<<32-Xt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ii++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=C0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},M0={readContext:Ut,useCallback:Tm,useContext:Ut,useEffect:Bc,useImperativeHandle:Lm,useInsertionEffect:jm,useLayoutEffect:Mm,useMemo:Im,useReducer:Ea,useRef:Nm,useState:function(){return Ea(_i)},useDebugValue:Wc,useDeferredValue:function(e){var t=Bt();return _m(t,He.memoizedState,e)},useTransition:function(){var e=Ea(_i)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:xm,useSyncExternalStore:wm,useId:Pm,unstable_isNewReconciler:!1},R0={readContext:Ut,useCallback:Tm,useContext:Ut,useEffect:Bc,useImperativeHandle:Lm,useInsertionEffect:jm,useLayoutEffect:Mm,useMemo:Im,useReducer:ba,useRef:Nm,useState:function(){return ba(_i)},useDebugValue:Wc,useDeferredValue:function(e){var t=Bt();return He===null?t.memoizedState=e:_m(t,He.memoizedState,e)},useTransition:function(){var e=ba(_i)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:xm,useSyncExternalStore:wm,useId:Pm,unstable_isNewReconciler:!1};function Vt(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function vu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Le({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Rl={isMounted:function(e){return(e=e._reactInternals)?Kr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=mt(),s=ir(e),i=bn(r,s);i.payload=t,n!=null&&(i.callback=n),t=rr(e,i,s),t!==null&&(Jt(t,e,s,r),Mo(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=mt(),s=ir(e),i=bn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=rr(e,i,s),t!==null&&(Jt(t,e,s,r),Mo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mt(),r=ir(e),s=bn(n,r);s.tag=2,t!=null&&(s.callback=t),t=rr(e,s,r),t!==null&&(Jt(t,e,r,n),Mo(t,e,r))}};function Sf(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ni(n,r)||!Ni(s,i):!0}function zm(e,t,n){var r=!1,s=cr,i=t.contextType;return typeof i=="object"&&i!==null?i=Ut(i):(s=Ct(t)?Ar:it.current,r=t.contextTypes,i=(r=r!=null)?Os(e,s):cr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Rl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function kf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Rl.enqueueReplaceState(t,t.state,null)}function yu(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Oc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Ut(i):(i=Ct(t)?Ar:it.current,s.context=Os(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(vu(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Rl.enqueueReplaceState(s,s.state,null),il(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function As(e,t){try{var n="",r=t;do n+=ry(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Na(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function xu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var L0=typeof WeakMap=="function"?WeakMap:Map;function Am(e,t,n){n=bn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){cl||(cl=!0,Ru=r),xu(e,t)},n}function $m(e,t,n){n=bn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){xu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){xu(e,t),typeof r!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Cf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new L0;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=H0.bind(null,e,t,n),t.then(e,e))}function Ef(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function bf(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bn(-1,1),t.tag=2,rr(n,t,1))),n.lanes|=1),e)}var T0=In.ReactCurrentOwner,St=!1;function ht(e,t,n,r){t.child=e===null?mm(t,null,n,r):Ds(t,e.child,n,r)}function Nf(e,t,n,r,s){n=n.render;var i=t.ref;return vs(t,s),r=$c(e,t,n,r,i,s),n=Uc(),e!==null&&!St?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tn(e,t,s)):(Ne&&n&&Mc(t),t.flags|=1,ht(e,t,r,s),t.child)}function jf(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Xc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Um(e,t,i,r,s)):(e=Po(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ni,n(o,r)&&e.ref===t.ref)return Tn(e,t,s)}return t.flags|=1,e=or(i,r),e.ref=t.ref,e.return=t,t.child=e}function Um(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ni(i,r)&&e.ref===t.ref)if(St=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(St=!0);else return t.lanes=e.lanes,Tn(e,t,s)}return wu(e,t,n,r,s)}function Bm(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(fs,jt),jt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Se(fs,jt),jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Se(fs,jt),jt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Se(fs,jt),jt|=r;return ht(e,t,s,n),t.child}function Wm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function wu(e,t,n,r,s){var i=Ct(n)?Ar:it.current;return i=Os(t,i),vs(t,s),n=$c(e,t,n,r,i,s),r=Uc(),e!==null&&!St?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tn(e,t,s)):(Ne&&r&&Mc(t),t.flags|=1,ht(e,t,n,s),t.child)}function Mf(e,t,n,r,s){if(Ct(n)){var i=!0;el(t)}else i=!1;if(vs(t,s),t.stateNode===null)To(e,t),zm(t,n,r),yu(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ut(c):(c=Ct(n)?Ar:it.current,c=Os(t,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&kf(t,o,r,c),An=!1;var v=t.memoizedState;o.state=v,il(t,r,o,s),a=t.memoizedState,l!==r||v!==a||kt.current||An?(typeof h=="function"&&(vu(t,n,h,r),a=t.memoizedState),(l=An||Sf(t,n,l,r,v,a,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,vm(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Vt(t.type,l),o.props=c,d=t.pendingProps,v=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Ut(a):(a=Ct(n)?Ar:it.current,a=Os(t,a));var S=n.getDerivedStateFromProps;(h=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||v!==a)&&kf(t,o,r,a),An=!1,v=t.memoizedState,o.state=v,il(t,r,o,s);var k=t.memoizedState;l!==d||v!==k||kt.current||An?(typeof S=="function"&&(vu(t,n,S,r),k=t.memoizedState),(c=An||Sf(t,n,c,r,v,k,a)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),o.props=r,o.state=k,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return Su(e,t,n,r,i,s)}function Su(e,t,n,r,s,i){Wm(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&hf(t,n,!1),Tn(e,t,i);r=t.stateNode,T0.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ds(t,e.child,null,i),t.child=Ds(t,null,l,i)):ht(e,t,l,i),t.memoizedState=r.state,s&&hf(t,n,!0),t.child}function Hm(e){var t=e.stateNode;t.pendingContext?ff(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ff(e,t.context,!1),Fc(e,t.containerInfo)}function Rf(e,t,n,r,s){return Fs(),Lc(s),t.flags|=256,ht(e,t,n,r),t.child}var ku={dehydrated:null,treeContext:null,retryLane:0};function Cu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vm(e,t,n){var r=t.pendingProps,s=Me.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Se(Me,s&1),e===null)return mu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Il(o,r,0,null),e=zr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Cu(n),t.memoizedState=ku,e):Hc(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return I0(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=or(s,a),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=or(l,i):(i=zr(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Cu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=ku,r}return i=e.child,e=i.sibling,r=or(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Hc(e,t){return t=Il({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mo(e,t,n,r){return r!==null&&Lc(r),Ds(t,e.child,null,n),e=Hc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function I0(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Na(Error(D(422))),mo(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Il({mode:"visible",children:r.children},s,0,null),i=zr(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ds(t,e.child,null,o),t.child.memoizedState=Cu(o),t.memoizedState=ku,i);if(!(t.mode&1))return mo(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(D(419)),r=Na(i,r,void 0),mo(e,t,o,r)}if(l=(o&e.childLanes)!==0,St||l){if(r=qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ln(e,s),Jt(r,e,s,-1))}return qc(),r=Na(Error(D(421))),mo(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=V0.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Mt=nr(s.nextSibling),Rt=t,Ne=!0,qt=null,e!==null&&(Ft[Dt++]=Cn,Ft[Dt++]=En,Ft[Dt++]=$r,Cn=e.id,En=e.overflow,$r=t),t=Hc(t,r.children),t.flags|=4096,t)}function Lf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),gu(e.return,t,n)}function ja(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Qm(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(ht(e,t,r.children,n),r=Me.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lf(e,n,t);else if(e.tag===19)Lf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Se(Me,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&ol(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ja(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ol(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ja(t,!0,n,null,i);break;case"together":ja(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function To(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Br|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=or(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=or(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _0(e,t,n){switch(t.tag){case 3:Hm(t),Fs();break;case 5:ym(t);break;case 1:Ct(t.type)&&el(t);break;case 4:Fc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Se(rl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Se(Me,Me.current&1),t.flags|=128,null):n&t.child.childLanes?Vm(e,t,n):(Se(Me,Me.current&1),e=Tn(e,t,n),e!==null?e.sibling:null);Se(Me,Me.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Qm(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Se(Me,Me.current),r)break;return null;case 22:case 23:return t.lanes=0,Bm(e,t,n)}return Tn(e,t,n)}var Km,Eu,Gm,Ym;Km=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Eu=function(){};Gm=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Er(dn.current);var i=null;switch(n){case"input":s=Qa(e,s),r=Qa(e,r),i=[];break;case"select":s=Le({},s,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":s=Ya(e,s),r=Ya(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Jo)}Xa(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xi.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var a=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(i||(i=[]),i.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xi.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Ce("scroll",e),i||l===a||(i=[])):(i=i||[]).push(c,a))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Ym=function(e,t,n,r){n!==r&&(t.flags|=4)};function Zs(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function P0(e,t,n){var r=t.pendingProps;switch(Rc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(t),null;case 1:return Ct(t.type)&&Zo(),rt(t),null;case 3:return r=t.stateNode,zs(),Ee(kt),Ee(it),zc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ho(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qt!==null&&(Iu(qt),qt=null))),Eu(e,t),rt(t),null;case 5:Dc(t);var s=Er(Ti.current);if(n=t.type,e!==null&&t.stateNode!=null)Gm(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return rt(t),null}if(e=Er(dn.current),ho(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[un]=t,r[Ri]=i,e=(t.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(s=0;s<oi.length;s++)Ce(oi[s],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":zd(r,i),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ce("invalid",r);break;case"textarea":$d(r,i),Ce("invalid",r)}Xa(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&fo(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&fo(r.textContent,l,e),s=["children",""+l]):xi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":ro(r),Ad(r,i,!0);break;case"textarea":ro(r),Ud(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Jo)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Cp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[un]=t,e[Ri]=r,Km(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ja(n,r),n){case"dialog":Ce("cancel",e),Ce("close",e),s=r;break;case"iframe":case"object":case"embed":Ce("load",e),s=r;break;case"video":case"audio":for(s=0;s<oi.length;s++)Ce(oi[s],e);s=r;break;case"source":Ce("error",e),s=r;break;case"img":case"image":case"link":Ce("error",e),Ce("load",e),s=r;break;case"details":Ce("toggle",e),s=r;break;case"input":zd(e,r),s=Qa(e,r),Ce("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Le({},r,{value:void 0}),Ce("invalid",e);break;case"textarea":$d(e,r),s=Ya(e,r),Ce("invalid",e);break;default:s=r}Xa(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?Np(e,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Ep(e,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&wi(e,a):typeof a=="number"&&wi(e,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xi.hasOwnProperty(i)?a!=null&&i==="onScroll"&&Ce("scroll",e):a!=null&&pc(e,i,a,o))}switch(n){case"input":ro(e),Ad(e,r,!1);break;case"textarea":ro(e),Ud(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ur(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?hs(e,!!r.multiple,i,!1):r.defaultValue!=null&&hs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Jo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return rt(t),null;case 6:if(e&&t.stateNode!=null)Ym(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=Er(Ti.current),Er(dn.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[un]=t,(i=r.nodeValue!==n)&&(e=Rt,e!==null))switch(e.tag){case 3:fo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fo(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=t,t.stateNode=r}return rt(t),null;case 13:if(Ee(Me),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&Mt!==null&&t.mode&1&&!(t.flags&128))hm(),Fs(),t.flags|=98560,i=!1;else if(i=ho(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(D(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[un]=t}else Fs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;rt(t),i=!1}else qt!==null&&(Iu(qt),qt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Me.current&1?Qe===0&&(Qe=3):qc())),t.updateQueue!==null&&(t.flags|=4),rt(t),null);case 4:return zs(),Eu(e,t),e===null&&ji(t.stateNode.containerInfo),rt(t),null;case 10:return _c(t.type._context),rt(t),null;case 17:return Ct(t.type)&&Zo(),rt(t),null;case 19:if(Ee(Me),i=t.memoizedState,i===null)return rt(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Zs(i,!1);else{if(Qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ol(e),o!==null){for(t.flags|=128,Zs(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Se(Me,Me.current&1|2),t.child}e=e.sibling}i.tail!==null&&$e()>$s&&(t.flags|=128,r=!0,Zs(i,!1),t.lanes=4194304)}else{if(!r)if(e=ol(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Zs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ne)return rt(t),null}else 2*$e()-i.renderingStartTime>$s&&n!==1073741824&&(t.flags|=128,r=!0,Zs(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=$e(),t.sibling=null,n=Me.current,Se(Me,r?n&1|2:n&1),t):(rt(t),null);case 22:case 23:return Yc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?jt&1073741824&&(rt(t),t.subtreeFlags&6&&(t.flags|=8192)):rt(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function O0(e,t){switch(Rc(t),t.tag){case 1:return Ct(t.type)&&Zo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zs(),Ee(kt),Ee(it),zc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Dc(t),null;case 13:if(Ee(Me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Fs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ee(Me),null;case 4:return zs(),null;case 10:return _c(t.type._context),null;case 22:case 23:return Yc(),null;case 24:return null;default:return null}}var go=!1,st=!1,F0=typeof WeakSet=="function"?WeakSet:Set,Y=null;function ds(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(e,t,r)}else n.current=null}function bu(e,t,n){try{n()}catch(r){Fe(e,t,r)}}var Tf=!1;function D0(e,t){if(au=Yo,e=em(),jc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,h=0,d=e,v=null;t:for(;;){for(var S;d!==n||s!==0&&d.nodeType!==3||(l=o+s),d!==i||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(S=d.firstChild)!==null;)v=d,d=S;for(;;){if(d===e)break t;if(v===n&&++c===s&&(l=o),v===i&&++h===r&&(a=o),(S=d.nextSibling)!==null)break;d=v,v=d.parentNode}d=S}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(uu={focusedElem:e,selectionRange:n},Yo=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var E=k.memoizedProps,j=k.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?E:Vt(t.type,E),j);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(m){Fe(t,t.return,m)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return k=Tf,Tf=!1,k}function mi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&bu(t,n,i)}s=s.next}while(s!==r)}}function Ll(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Nu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function qm(e){var t=e.alternate;t!==null&&(e.alternate=null,qm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[un],delete t[Ri],delete t[fu],delete t[x0],delete t[w0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Xm(e){return e.tag===5||e.tag===3||e.tag===4}function If(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ju(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Jo));else if(r!==4&&(e=e.child,e!==null))for(ju(e,t,n),e=e.sibling;e!==null;)ju(e,t,n),e=e.sibling}function Mu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Mu(e,t,n),e=e.sibling;e!==null;)Mu(e,t,n),e=e.sibling}var Xe=null,Yt=!1;function On(e,t,n){for(n=n.child;n!==null;)Jm(e,t,n),n=n.sibling}function Jm(e,t,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(kl,n)}catch{}switch(n.tag){case 5:st||ds(n,t);case 6:var r=Xe,s=Yt;Xe=null,On(e,t,n),Xe=r,Yt=s,Xe!==null&&(Yt?(e=Xe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(Yt?(e=Xe,n=n.stateNode,e.nodeType===8?wa(e.parentNode,n):e.nodeType===1&&wa(e,n),Ei(e)):wa(Xe,n.stateNode));break;case 4:r=Xe,s=Yt,Xe=n.stateNode.containerInfo,Yt=!0,On(e,t,n),Xe=r,Yt=s;break;case 0:case 11:case 14:case 15:if(!st&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&bu(n,t,o),s=s.next}while(s!==r)}On(e,t,n);break;case 1:if(!st&&(ds(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Fe(n,t,l)}On(e,t,n);break;case 21:On(e,t,n);break;case 22:n.mode&1?(st=(r=st)||n.memoizedState!==null,On(e,t,n),st=r):On(e,t,n);break;default:On(e,t,n)}}function _f(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new F0),t.forEach(function(r){var s=Q0.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Wt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Xe=l.stateNode,Yt=!1;break e;case 3:Xe=l.stateNode.containerInfo,Yt=!0;break e;case 4:Xe=l.stateNode.containerInfo,Yt=!0;break e}l=l.return}if(Xe===null)throw Error(D(160));Jm(i,o,s),Xe=null,Yt=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(c){Fe(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Zm(t,e),t=t.sibling}function Zm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Wt(t,e),nn(e),r&4){try{mi(3,e,e.return),Ll(3,e)}catch(E){Fe(e,e.return,E)}try{mi(5,e,e.return)}catch(E){Fe(e,e.return,E)}}break;case 1:Wt(t,e),nn(e),r&512&&n!==null&&ds(n,n.return);break;case 5:if(Wt(t,e),nn(e),r&512&&n!==null&&ds(n,n.return),e.flags&32){var s=e.stateNode;try{wi(s,"")}catch(E){Fe(e,e.return,E)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Sp(s,i),Ja(l,o);var c=Ja(l,i);for(o=0;o<a.length;o+=2){var h=a[o],d=a[o+1];h==="style"?Np(s,d):h==="dangerouslySetInnerHTML"?Ep(s,d):h==="children"?wi(s,d):pc(s,h,d,c)}switch(l){case"input":Ka(s,i);break;case"textarea":kp(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?hs(s,!!i.multiple,S,!1):v!==!!i.multiple&&(i.defaultValue!=null?hs(s,!!i.multiple,i.defaultValue,!0):hs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ri]=i}catch(E){Fe(e,e.return,E)}}break;case 6:if(Wt(t,e),nn(e),r&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(E){Fe(e,e.return,E)}}break;case 3:if(Wt(t,e),nn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ei(t.containerInfo)}catch(E){Fe(e,e.return,E)}break;case 4:Wt(t,e),nn(e);break;case 13:Wt(t,e),nn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Kc=$e())),r&4&&_f(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(st=(c=st)||h,Wt(t,e),st=c):Wt(t,e),nn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!h&&e.mode&1)for(Y=e,h=e.child;h!==null;){for(d=Y=h;Y!==null;){switch(v=Y,S=v.child,v.tag){case 0:case 11:case 14:case 15:mi(4,v,v.return);break;case 1:ds(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(E){Fe(r,n,E)}}break;case 5:ds(v,v.return);break;case 22:if(v.memoizedState!==null){Of(d);continue}}S!==null?(S.return=v,Y=S):Of(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=bp("display",o))}catch(E){Fe(e,e.return,E)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(E){Fe(e,e.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Wt(t,e),nn(e),r&4&&_f(e);break;case 21:break;default:Wt(t,e),nn(e)}}function nn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Xm(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(wi(s,""),r.flags&=-33);var i=If(e);Mu(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=If(e);ju(e,l,o);break;default:throw Error(D(161))}}catch(a){Fe(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function z0(e,t,n){Y=e,eg(e)}function eg(e,t,n){for(var r=(e.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||go;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||st;l=go;var c=st;if(go=o,(st=a)&&!c)for(Y=s;Y!==null;)o=Y,a=o.child,o.tag===22&&o.memoizedState!==null?Ff(s):a!==null?(a.return=o,Y=a):Ff(s);for(;i!==null;)Y=i,eg(i),i=i.sibling;Y=s,go=l,st=c}Pf(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):Pf(e)}}function Pf(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:st||Ll(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!st)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Vt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&yf(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}yf(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ei(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}st||t.flags&512&&Nu(t)}catch(v){Fe(t,t.return,v)}}if(t===e){Y=null;break}if(n=t.sibling,n!==null){n.return=t.return,Y=n;break}Y=t.return}}function Of(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Y=n;break}Y=t.return}}function Ff(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ll(4,t)}catch(a){Fe(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(a){Fe(t,s,a)}}var i=t.return;try{Nu(t)}catch(a){Fe(t,i,a)}break;case 5:var o=t.return;try{Nu(t)}catch(a){Fe(t,o,a)}}}catch(a){Fe(t,t.return,a)}if(t===e){Y=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Y=l;break}Y=t.return}}var A0=Math.ceil,ul=In.ReactCurrentDispatcher,Vc=In.ReactCurrentOwner,$t=In.ReactCurrentBatchConfig,pe=0,qe=null,Ue=null,Je=0,jt=0,fs=fr(0),Qe=0,Oi=null,Br=0,Tl=0,Qc=0,gi=null,wt=null,Kc=0,$s=1/0,vn=null,cl=!1,Ru=null,sr=null,vo=!1,Jn=null,dl=0,vi=0,Lu=null,Io=-1,_o=0;function mt(){return pe&6?$e():Io!==-1?Io:Io=$e()}function ir(e){return e.mode&1?pe&2&&Je!==0?Je&-Je:k0.transition!==null?(_o===0&&(_o=zp()),_o):(e=ye,e!==0||(e=window.event,e=e===void 0?16:Vp(e.type)),e):1}function Jt(e,t,n,r){if(50<vi)throw vi=0,Lu=null,Error(D(185));Qi(e,n,r),(!(pe&2)||e!==qe)&&(e===qe&&(!(pe&2)&&(Tl|=n),Qe===4&&Un(e,Je)),Et(e,r),n===1&&pe===0&&!(t.mode&1)&&($s=$e()+500,jl&&hr()))}function Et(e,t){var n=e.callbackNode;ky(e,t);var r=Go(e,e===qe?Je:0);if(r===0)n!==null&&Hd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Hd(n),t===1)e.tag===0?S0(Df.bind(null,e)):cm(Df.bind(null,e)),v0(function(){!(pe&6)&&hr()}),n=null;else{switch(Ap(r)){case 1:n=xc;break;case 4:n=Fp;break;case 16:n=Ko;break;case 536870912:n=Dp;break;default:n=Ko}n=ag(n,tg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tg(e,t){if(Io=-1,_o=0,pe&6)throw Error(D(327));var n=e.callbackNode;if(ys()&&e.callbackNode!==n)return null;var r=Go(e,e===qe?Je:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=fl(e,r);else{t=r;var s=pe;pe|=2;var i=rg();(qe!==e||Je!==t)&&(vn=null,$s=$e()+500,Dr(e,t));do try{B0();break}catch(l){ng(e,l)}while(!0);Ic(),ul.current=i,pe=s,Ue!==null?t=0:(qe=null,Je=0,t=Qe)}if(t!==0){if(t===2&&(s=ru(e),s!==0&&(r=s,t=Tu(e,s))),t===1)throw n=Oi,Dr(e,0),Un(e,r),Et(e,$e()),n;if(t===6)Un(e,r);else{if(s=e.current.alternate,!(r&30)&&!$0(s)&&(t=fl(e,r),t===2&&(i=ru(e),i!==0&&(r=i,t=Tu(e,i))),t===1))throw n=Oi,Dr(e,0),Un(e,r),Et(e,$e()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:Sr(e,wt,vn);break;case 3:if(Un(e,r),(r&130023424)===r&&(t=Kc+500-$e(),10<t)){if(Go(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){mt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=du(Sr.bind(null,e,wt,vn),t);break}Sr(e,wt,vn);break;case 4:if(Un(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Xt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*A0(r/1960))-r,10<r){e.timeoutHandle=du(Sr.bind(null,e,wt,vn),r);break}Sr(e,wt,vn);break;case 5:Sr(e,wt,vn);break;default:throw Error(D(329))}}}return Et(e,$e()),e.callbackNode===n?tg.bind(null,e):null}function Tu(e,t){var n=gi;return e.current.memoizedState.isDehydrated&&(Dr(e,t).flags|=256),e=fl(e,t),e!==2&&(t=wt,wt=n,t!==null&&Iu(t)),e}function Iu(e){wt===null?wt=e:wt.push.apply(wt,e)}function $0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Zt(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Un(e,t){for(t&=~Qc,t&=~Tl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Xt(t),r=1<<n;e[n]=-1,t&=~r}}function Df(e){if(pe&6)throw Error(D(327));ys();var t=Go(e,0);if(!(t&1))return Et(e,$e()),null;var n=fl(e,t);if(e.tag!==0&&n===2){var r=ru(e);r!==0&&(t=r,n=Tu(e,r))}if(n===1)throw n=Oi,Dr(e,0),Un(e,t),Et(e,$e()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sr(e,wt,vn),Et(e,$e()),null}function Gc(e,t){var n=pe;pe|=1;try{return e(t)}finally{pe=n,pe===0&&($s=$e()+500,jl&&hr())}}function Wr(e){Jn!==null&&Jn.tag===0&&!(pe&6)&&ys();var t=pe;pe|=1;var n=$t.transition,r=ye;try{if($t.transition=null,ye=1,e)return e()}finally{ye=r,$t.transition=n,pe=t,!(pe&6)&&hr()}}function Yc(){jt=fs.current,Ee(fs)}function Dr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,g0(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(Rc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zo();break;case 3:zs(),Ee(kt),Ee(it),zc();break;case 5:Dc(r);break;case 4:zs();break;case 13:Ee(Me);break;case 19:Ee(Me);break;case 10:_c(r.type._context);break;case 22:case 23:Yc()}n=n.return}if(qe=e,Ue=e=or(e.current,null),Je=jt=t,Qe=0,Oi=null,Qc=Tl=Br=0,wt=gi=null,Cr!==null){for(t=0;t<Cr.length;t++)if(n=Cr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Cr=null}return e}function ng(e,t){do{var n=Ue;try{if(Ic(),Ro.current=al,ll){for(var r=Re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ll=!1}if(Ur=0,Ye=He=Re=null,pi=!1,Ii=0,Vc.current=null,n===null||n.return===null){Qe=1,Oi=t,Ue=null;break}e:{var i=e,o=n.return,l=n,a=t;if(t=Je,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var v=h.alternate;v?(h.updateQueue=v.updateQueue,h.memoizedState=v.memoizedState,h.lanes=v.lanes):(h.updateQueue=null,h.memoizedState=null)}var S=Ef(o);if(S!==null){S.flags&=-257,bf(S,o,l,i,t),S.mode&1&&Cf(i,c,t),t=S,a=c;var k=t.updateQueue;if(k===null){var E=new Set;E.add(a),t.updateQueue=E}else k.add(a);break e}else{if(!(t&1)){Cf(i,c,t),qc();break e}a=Error(D(426))}}else if(Ne&&l.mode&1){var j=Ef(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),bf(j,o,l,i,t),Lc(As(a,l));break e}}i=a=As(a,l),Qe!==4&&(Qe=2),gi===null?gi=[i]:gi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=Am(i,a,t);vf(i,y);break e;case 1:l=a;var g=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(sr===null||!sr.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var m=$m(i,l,t);vf(i,m);break e}}i=i.return}while(i!==null)}ig(n)}catch(C){t=C,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function rg(){var e=ul.current;return ul.current=al,e===null?al:e}function qc(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),qe===null||!(Br&268435455)&&!(Tl&268435455)||Un(qe,Je)}function fl(e,t){var n=pe;pe|=2;var r=rg();(qe!==e||Je!==t)&&(vn=null,Dr(e,t));do try{U0();break}catch(s){ng(e,s)}while(!0);if(Ic(),pe=n,ul.current=r,Ue!==null)throw Error(D(261));return qe=null,Je=0,Qe}function U0(){for(;Ue!==null;)sg(Ue)}function B0(){for(;Ue!==null&&!hy();)sg(Ue)}function sg(e){var t=lg(e.alternate,e,jt);e.memoizedProps=e.pendingProps,t===null?ig(e):Ue=t,Vc.current=null}function ig(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=O0(n,t),n!==null){n.flags&=32767,Ue=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qe=6,Ue=null;return}}else if(n=P0(n,t,jt),n!==null){Ue=n;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);Qe===0&&(Qe=5)}function Sr(e,t,n){var r=ye,s=$t.transition;try{$t.transition=null,ye=1,W0(e,t,n,r)}finally{$t.transition=s,ye=r}return null}function W0(e,t,n,r){do ys();while(Jn!==null);if(pe&6)throw Error(D(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Cy(e,i),e===qe&&(Ue=qe=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vo||(vo=!0,ag(Ko,function(){return ys(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=$t.transition,$t.transition=null;var o=ye;ye=1;var l=pe;pe|=4,Vc.current=null,D0(e,n),Zm(n,e),u0(uu),Yo=!!au,uu=au=null,e.current=n,z0(n),py(),pe=l,ye=o,$t.transition=i}else e.current=n;if(vo&&(vo=!1,Jn=e,dl=s),i=e.pendingLanes,i===0&&(sr=null),vy(n.stateNode),Et(e,$e()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(cl)throw cl=!1,e=Ru,Ru=null,e;return dl&1&&e.tag!==0&&ys(),i=e.pendingLanes,i&1?e===Lu?vi++:(vi=0,Lu=e):vi=0,hr(),null}function ys(){if(Jn!==null){var e=Ap(dl),t=$t.transition,n=ye;try{if($t.transition=null,ye=16>e?16:e,Jn===null)var r=!1;else{if(e=Jn,Jn=null,dl=0,pe&6)throw Error(D(331));var s=pe;for(pe|=4,Y=e.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(Y=c;Y!==null;){var h=Y;switch(h.tag){case 0:case 11:case 15:mi(8,h,i)}var d=h.child;if(d!==null)d.return=h,Y=d;else for(;Y!==null;){h=Y;var v=h.sibling,S=h.return;if(qm(h),h===c){Y=null;break}if(v!==null){v.return=S,Y=v;break}Y=S}}}var k=i.alternate;if(k!==null){var E=k.child;if(E!==null){k.child=null;do{var j=E.sibling;E.sibling=null,E=j}while(E!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:mi(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Y=y;break e}Y=i.return}}var g=e.current;for(Y=g;Y!==null;){o=Y;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,Y=p;else e:for(o=g;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ll(9,l)}}catch(C){Fe(l,l.return,C)}if(l===o){Y=null;break e}var m=l.sibling;if(m!==null){m.return=l.return,Y=m;break e}Y=l.return}}if(pe=s,hr(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(kl,e)}catch{}r=!0}return r}finally{ye=n,$t.transition=t}}return!1}function zf(e,t,n){t=As(n,t),t=Am(e,t,1),e=rr(e,t,1),t=mt(),e!==null&&(Qi(e,1,t),Et(e,t))}function Fe(e,t,n){if(e.tag===3)zf(e,e,n);else for(;t!==null;){if(t.tag===3){zf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sr===null||!sr.has(r))){e=As(n,e),e=$m(t,e,1),t=rr(t,e,1),e=mt(),t!==null&&(Qi(t,1,e),Et(t,e));break}}t=t.return}}function H0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=mt(),e.pingedLanes|=e.suspendedLanes&n,qe===e&&(Je&n)===n&&(Qe===4||Qe===3&&(Je&130023424)===Je&&500>$e()-Kc?Dr(e,0):Qc|=n),Et(e,t)}function og(e,t){t===0&&(e.mode&1?(t=oo,oo<<=1,!(oo&130023424)&&(oo=4194304)):t=1);var n=mt();e=Ln(e,t),e!==null&&(Qi(e,t,n),Et(e,n))}function V0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),og(e,n)}function Q0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),og(e,n)}var lg;lg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||kt.current)St=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return St=!1,_0(e,t,n);St=!!(e.flags&131072)}else St=!1,Ne&&t.flags&1048576&&dm(t,nl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;To(e,t),e=t.pendingProps;var s=Os(t,it.current);vs(t,n),s=$c(null,t,r,e,s,n);var i=Uc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ct(r)?(i=!0,el(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Oc(t),s.updater=Rl,t.stateNode=s,s._reactInternals=t,yu(t,r,e,n),t=Su(null,t,r,!0,i,n)):(t.tag=0,Ne&&i&&Mc(t),ht(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(To(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=G0(r),e=Vt(r,e),s){case 0:t=wu(null,t,r,e,n);break e;case 1:t=Mf(null,t,r,e,n);break e;case 11:t=Nf(null,t,r,e,n);break e;case 14:t=jf(null,t,r,Vt(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vt(r,s),wu(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vt(r,s),Mf(e,t,r,s,n);case 3:e:{if(Hm(t),e===null)throw Error(D(387));r=t.pendingProps,i=t.memoizedState,s=i.element,vm(e,t),il(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=As(Error(D(423)),t),t=Rf(e,t,r,n,s);break e}else if(r!==s){s=As(Error(D(424)),t),t=Rf(e,t,r,n,s);break e}else for(Mt=nr(t.stateNode.containerInfo.firstChild),Rt=t,Ne=!0,qt=null,n=mm(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fs(),r===s){t=Tn(e,t,n);break e}ht(e,t,r,n)}t=t.child}return t;case 5:return ym(t),e===null&&mu(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,cu(r,s)?o=null:i!==null&&cu(r,i)&&(t.flags|=32),Wm(e,t),ht(e,t,o,n),t.child;case 6:return e===null&&mu(t),null;case 13:return Vm(e,t,n);case 4:return Fc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ds(t,null,r,n):ht(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vt(r,s),Nf(e,t,r,s,n);case 7:return ht(e,t,t.pendingProps,n),t.child;case 8:return ht(e,t,t.pendingProps.children,n),t.child;case 12:return ht(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Se(rl,r._currentValue),r._currentValue=o,i!==null)if(Zt(i.value,o)){if(i.children===s.children&&!kt.current){t=Tn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=bn(-1,n&-n),a.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?a.next=a:(a.next=h.next,h.next=a),c.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),gu(i.return,n,t),l.lanes|=n;break}a=a.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(D(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),gu(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ht(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,vs(t,n),s=Ut(s),r=r(s),t.flags|=1,ht(e,t,r,n),t.child;case 14:return r=t.type,s=Vt(r,t.pendingProps),s=Vt(r.type,s),jf(e,t,r,s,n);case 15:return Um(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vt(r,s),To(e,t),t.tag=1,Ct(r)?(e=!0,el(t)):e=!1,vs(t,n),zm(t,r,s),yu(t,r,s,n),Su(null,t,r,!0,e,n);case 19:return Qm(e,t,n);case 22:return Bm(e,t,n)}throw Error(D(156,t.tag))};function ag(e,t){return Op(e,t)}function K0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(e,t,n,r){return new K0(e,t,n,r)}function Xc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function G0(e){if(typeof e=="function")return Xc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gc)return 11;if(e===vc)return 14}return 2}function or(e,t){var n=e.alternate;return n===null?(n=At(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Po(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")Xc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ns:return zr(n.children,s,i,t);case mc:o=8,s|=8;break;case Ba:return e=At(12,n,t,s|2),e.elementType=Ba,e.lanes=i,e;case Wa:return e=At(13,n,t,s),e.elementType=Wa,e.lanes=i,e;case Ha:return e=At(19,n,t,s),e.elementType=Ha,e.lanes=i,e;case yp:return Il(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gp:o=10;break e;case vp:o=9;break e;case gc:o=11;break e;case vc:o=14;break e;case zn:o=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=At(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function zr(e,t,n,r){return e=At(7,e,r,t),e.lanes=n,e}function Il(e,t,n,r){return e=At(22,e,r,t),e.elementType=yp,e.lanes=n,e.stateNode={isHidden:!1},e}function Ma(e,t,n){return e=At(6,e,null,t),e.lanes=n,e}function Ra(e,t,n){return t=At(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Y0(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ua(0),this.expirationTimes=ua(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ua(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Jc(e,t,n,r,s,i,o,l,a){return e=new Y0(e,t,n,l,a),t===1?(t=1,i===!0&&(t|=8)):t=0,i=At(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oc(i),e}function q0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ts,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ug(e){if(!e)return cr;e=e._reactInternals;e:{if(Kr(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(Ct(n))return um(e,n,t)}return t}function cg(e,t,n,r,s,i,o,l,a){return e=Jc(n,r,!0,e,s,i,o,l,a),e.context=ug(null),n=e.current,r=mt(),s=ir(n),i=bn(r,s),i.callback=t??null,rr(n,i,s),e.current.lanes=s,Qi(e,s,r),Et(e,r),e}function _l(e,t,n,r){var s=t.current,i=mt(),o=ir(s);return n=ug(n),t.context===null?t.context=n:t.pendingContext=n,t=bn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=rr(s,t,o),e!==null&&(Jt(e,s,o,i),Mo(e,s,o)),o}function hl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Af(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Zc(e,t){Af(e,t),(e=e.alternate)&&Af(e,t)}function X0(){return null}var dg=typeof reportError=="function"?reportError:function(e){console.error(e)};function ed(e){this._internalRoot=e}Pl.prototype.render=ed.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));_l(e,t,null,null)};Pl.prototype.unmount=ed.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wr(function(){_l(null,e,null,null)}),t[Rn]=null}};function Pl(e){this._internalRoot=e}Pl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$n.length&&t!==0&&t<$n[n].priority;n++);$n.splice(n,0,e),n===0&&Hp(e)}};function td(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $f(){}function J0(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=hl(o);i.call(c)}}var o=cg(t,r,e,0,null,!1,!1,"",$f);return e._reactRootContainer=o,e[Rn]=o.current,ji(e.nodeType===8?e.parentNode:e),Wr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=hl(a);l.call(c)}}var a=Jc(e,0,!1,null,null,!1,!1,"",$f);return e._reactRootContainer=a,e[Rn]=a.current,ji(e.nodeType===8?e.parentNode:e),Wr(function(){_l(t,a,n,r)}),a}function Fl(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var a=hl(o);l.call(a)}}_l(t,o,e,s)}else o=J0(n,t,e,s,r);return hl(o)}$p=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ii(t.pendingLanes);n!==0&&(wc(t,n|1),Et(t,$e()),!(pe&6)&&($s=$e()+500,hr()))}break;case 13:Wr(function(){var r=Ln(e,1);if(r!==null){var s=mt();Jt(r,e,1,s)}}),Zc(e,1)}};Sc=function(e){if(e.tag===13){var t=Ln(e,134217728);if(t!==null){var n=mt();Jt(t,e,134217728,n)}Zc(e,134217728)}};Up=function(e){if(e.tag===13){var t=ir(e),n=Ln(e,t);if(n!==null){var r=mt();Jt(n,e,t,r)}Zc(e,t)}};Bp=function(){return ye};Wp=function(e,t){var n=ye;try{return ye=e,t()}finally{ye=n}};eu=function(e,t,n){switch(t){case"input":if(Ka(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Nl(r);if(!s)throw Error(D(90));wp(r),Ka(r,s)}}}break;case"textarea":kp(e,n);break;case"select":t=n.value,t!=null&&hs(e,!!n.multiple,t,!1)}};Rp=Gc;Lp=Wr;var Z0={usingClientEntryPoint:!1,Events:[Gi,os,Nl,jp,Mp,Gc]},ei={findFiberByHostInstance:kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ex={bundleType:ei.bundleType,version:ei.version,rendererPackageName:ei.rendererPackageName,rendererConfig:ei.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:In.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_p(e),e===null?null:e.stateNode},findFiberByHostInstance:ei.findFiberByHostInstance||X0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yo.isDisabled&&yo.supportsFiber)try{kl=yo.inject(ex),cn=yo}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z0;Tt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!td(t))throw Error(D(200));return q0(e,t,null,n)};Tt.createRoot=function(e,t){if(!td(e))throw Error(D(299));var n=!1,r="",s=dg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Jc(e,1,!1,null,null,n,!1,r,s),e[Rn]=t.current,ji(e.nodeType===8?e.parentNode:e),new ed(t)};Tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=_p(t),e=e===null?null:e.stateNode,e};Tt.flushSync=function(e){return Wr(e)};Tt.hydrate=function(e,t,n){if(!Ol(t))throw Error(D(200));return Fl(null,e,t,!0,n)};Tt.hydrateRoot=function(e,t,n){if(!td(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=dg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=cg(t,null,e,1,n??null,s,!1,i,o),e[Rn]=t.current,ji(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Pl(t)};Tt.render=function(e,t,n){if(!Ol(t))throw Error(D(200));return Fl(null,e,t,!1,n)};Tt.unmountComponentAtNode=function(e){if(!Ol(e))throw Error(D(40));return e._reactRootContainer?(Wr(function(){Fl(null,null,e,!1,function(){e._reactRootContainer=null,e[Rn]=null})}),!0):!1};Tt.unstable_batchedUpdates=Gc;Tt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ol(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return Fl(e,t,n,!1,r)};Tt.version="18.3.1-next-f1338f8080-20240426";function fg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fg)}catch(e){console.error(e)}}fg(),fp.exports=Tt;var nd=fp.exports,hg,Uf=nd;hg=Uf.createRoot,Uf.hydrateRoot;var Hs=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},tx={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Bn,lc,Hh,nx=(Hh=class{constructor(){te(this,Bn,tx);te(this,lc,!1)}setTimeoutProvider(e){V(this,Bn,e)}setTimeout(e,t){return w(this,Bn).setTimeout(e,t)}clearTimeout(e){w(this,Bn).clearTimeout(e)}setInterval(e,t){return w(this,Bn).setInterval(e,t)}clearInterval(e){w(this,Bn).clearInterval(e)}},Bn=new WeakMap,lc=new WeakMap,Hh),br=new nx;function rx(e){setTimeout(e,0)}var Hr=typeof window>"u"||"Deno"in globalThis;function pt(){}function sx(e,t){return typeof e=="function"?e(t):e}function _u(e){return typeof e=="number"&&e>=0&&e!==1/0}function pg(e,t){return Math.max(e+(t||0)-Date.now(),0)}function lr(e,t){return typeof e=="function"?e(t):e}function Ot(e,t){return typeof e=="function"?e(t):e}function Bf(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==rd(o,t.options))return!1}else if(!Fi(t.queryKey,o))return!1}if(n!=="all"){const a=t.isActive();if(n==="active"&&!a||n==="inactive"&&a)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function Wf(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Vr(t.options.mutationKey)!==Vr(i))return!1}else if(!Fi(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function rd(e,t){return((t==null?void 0:t.queryKeyHashFn)||Vr)(e)}function Vr(e){return JSON.stringify(e,(t,n)=>Pu(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Fi(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Fi(e[n],t[n])):!1}var ix=Object.prototype.hasOwnProperty;function mg(e,t){if(e===t)return e;const n=Hf(e)&&Hf(t);if(!n&&!(Pu(e)&&Pu(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let a=0;for(let c=0;c<o;c++){const h=n?c:i[c],d=e[h],v=t[h];if(d===v){l[h]=d,(n?c<s:ix.call(e,h))&&a++;continue}if(d===null||v===null||typeof d!="object"||typeof v!="object"){l[h]=v;continue}const S=mg(d,v);l[h]=S,S===d&&a++}return s===o&&a===s?e:l}function pl(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Hf(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Pu(e){if(!Vf(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Vf(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Vf(e){return Object.prototype.toString.call(e)==="[object Object]"}function ox(e){return new Promise(t=>{br.setTimeout(t,e)})}function Ou(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?mg(e,t):t}function lx(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function ax(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var sd=Symbol();function gg(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===sd?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function vg(e,t){return typeof e=="function"?e(...t):!!e}function ux(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var Mr,Wn,ks,Vh,cx=(Vh=class extends Hs{constructor(){super();te(this,Mr);te(this,Wn);te(this,ks);V(this,ks,t=>{if(!Hr&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){w(this,Wn)||this.setEventListener(w(this,ks))}onUnsubscribe(){var t;this.hasListeners()||((t=w(this,Wn))==null||t.call(this),V(this,Wn,void 0))}setEventListener(t){var n;V(this,ks,t),(n=w(this,Wn))==null||n.call(this),V(this,Wn,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){w(this,Mr)!==t&&(V(this,Mr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof w(this,Mr)=="boolean"?w(this,Mr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Mr=new WeakMap,Wn=new WeakMap,ks=new WeakMap,Vh),id=new cx;function Fu(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var dx=rx;function fx(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=dx;const i=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(a=>{n(a)})})})};return{batch:l=>{let a;t++;try{a=l()}finally{t--,t||o()}return a},batchCalls:l=>(...a)=>{i(()=>{l(...a)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Ve=fx(),Cs,Hn,Es,Qh,hx=(Qh=class extends Hs{constructor(){super();te(this,Cs,!0);te(this,Hn);te(this,Es);V(this,Es,t=>{if(!Hr&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){w(this,Hn)||this.setEventListener(w(this,Es))}onUnsubscribe(){var t;this.hasListeners()||((t=w(this,Hn))==null||t.call(this),V(this,Hn,void 0))}setEventListener(t){var n;V(this,Es,t),(n=w(this,Hn))==null||n.call(this),V(this,Hn,t(this.setOnline.bind(this)))}setOnline(t){w(this,Cs)!==t&&(V(this,Cs,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return w(this,Cs)}},Cs=new WeakMap,Hn=new WeakMap,Es=new WeakMap,Qh),ml=new hx;function px(e){return Math.min(1e3*2**e,3e4)}function yg(e){return(e??"online")==="online"?ml.isOnline():!0}var Du=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function xg(e){let t=!1,n=0,r;const s=Fu(),i=()=>s.status!=="pending",o=E=>{var j;if(!i()){const y=new Du(E);v(y),(j=e.onCancel)==null||j.call(e,y)}},l=()=>{t=!0},a=()=>{t=!1},c=()=>id.isFocused()&&(e.networkMode==="always"||ml.isOnline())&&e.canRun(),h=()=>yg(e.networkMode)&&e.canRun(),d=E=>{i()||(r==null||r(),s.resolve(E))},v=E=>{i()||(r==null||r(),s.reject(E))},S=()=>new Promise(E=>{var j;r=y=>{(i()||c())&&E(y)},(j=e.onPause)==null||j.call(e)}).then(()=>{var E;r=void 0,i()||(E=e.onContinue)==null||E.call(e)}),k=()=>{if(i())return;let E;const j=n===0?e.initialPromise:void 0;try{E=j??e.fn()}catch(y){E=Promise.reject(y)}Promise.resolve(E).then(d).catch(y=>{var L;if(i())return;const g=e.retry??(Hr?0:3),p=e.retryDelay??px,m=typeof p=="function"?p(n,y):p,C=g===!0||typeof g=="number"&&n<g||typeof g=="function"&&g(n,y);if(t||!C){v(y);return}n++,(L=e.onFail)==null||L.call(e,n,y),ox(m).then(()=>c()?void 0:S()).then(()=>{t?v(y):k()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:a,canStart:h,start:()=>(h()?k():S().then(k),s)}}var Rr,Kh,wg=(Kh=class{constructor(){te(this,Rr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),_u(this.gcTime)&&V(this,Rr,br.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Hr?1/0:5*60*1e3))}clearGcTimeout(){w(this,Rr)&&(br.clearTimeout(w(this,Rr)),V(this,Rr,void 0))}},Rr=new WeakMap,Kh),Lr,bs,Pt,Tr,Ge,$i,Ir,Kt,gn,Gh,mx=(Gh=class extends wg{constructor(t){super();te(this,Kt);te(this,Lr);te(this,bs);te(this,Pt);te(this,Tr);te(this,Ge);te(this,$i);te(this,Ir);V(this,Ir,!1),V(this,$i,t.defaultOptions),this.setOptions(t.options),this.observers=[],V(this,Tr,t.client),V(this,Pt,w(this,Tr).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,V(this,Lr,Kf(this.options)),this.state=t.state??w(this,Lr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=w(this,Ge))==null?void 0:t.promise}setOptions(t){if(this.options={...w(this,$i),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Kf(this.options);n.data!==void 0&&(this.setState(Qf(n.data,n.dataUpdatedAt)),V(this,Lr,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&w(this,Pt).remove(this)}setData(t,n){const r=Ou(this.state.data,t,this.options);return ae(this,Kt,gn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ae(this,Kt,gn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=w(this,Ge))==null?void 0:r.promise;return(s=w(this,Ge))==null||s.cancel(t),n?n.then(pt).catch(pt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(w(this,Lr))}isActive(){return this.observers.some(t=>Ot(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===sd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>lr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!pg(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=w(this,Ge))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=w(this,Ge))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),w(this,Pt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(w(this,Ge)&&(w(this,Ir)?w(this,Ge).cancel({revert:!0}):w(this,Ge).cancelRetry()),this.scheduleGc()),w(this,Pt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ae(this,Kt,gn).call(this,{type:"invalidate"})}async fetch(t,n){var a,c,h,d,v,S,k,E,j,y,g,p;if(this.state.fetchStatus!=="idle"&&((a=w(this,Ge))==null?void 0:a.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(w(this,Ge))return w(this,Ge).continueRetry(),w(this,Ge).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(C=>C.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(V(this,Ir,!0),r.signal)})},i=()=>{const m=gg(this.options,n),L=(()=>{const T={client:w(this,Tr),queryKey:this.queryKey,meta:this.meta};return s(T),T})();return V(this,Ir,!1),this.options.persister?this.options.persister(m,L,this):m(L)},l=(()=>{const m={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:w(this,Tr),state:this.state,fetchFn:i};return s(m),m})();(c=this.options.behavior)==null||c.onFetch(l,this),V(this,bs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&ae(this,Kt,gn).call(this,{type:"fetch",meta:(d=l.fetchOptions)==null?void 0:d.meta}),V(this,Ge,xg({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:m=>{m instanceof Du&&m.revert&&this.setState({...w(this,bs),fetchStatus:"idle"}),r.abort()},onFail:(m,C)=>{ae(this,Kt,gn).call(this,{type:"failed",failureCount:m,error:C})},onPause:()=>{ae(this,Kt,gn).call(this,{type:"pause"})},onContinue:()=>{ae(this,Kt,gn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const m=await w(this,Ge).start();if(m===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(m),(S=(v=w(this,Pt).config).onSuccess)==null||S.call(v,m,this),(E=(k=w(this,Pt).config).onSettled)==null||E.call(k,m,this.state.error,this),m}catch(m){if(m instanceof Du){if(m.silent)return w(this,Ge).promise;if(m.revert){if(this.state.data===void 0)throw m;return this.state.data}}throw ae(this,Kt,gn).call(this,{type:"error",error:m}),(y=(j=w(this,Pt).config).onError)==null||y.call(j,m,this),(p=(g=w(this,Pt).config).onSettled)==null||p.call(g,this.state.data,m,this),m}finally{this.scheduleGc()}}},Lr=new WeakMap,bs=new WeakMap,Pt=new WeakMap,Tr=new WeakMap,Ge=new WeakMap,$i=new WeakMap,Ir=new WeakMap,Kt=new WeakSet,gn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Sg(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...Qf(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return V(this,bs,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Ve.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),w(this,Pt).notify({query:this,type:"updated",action:t})})},Gh);function Sg(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:yg(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Qf(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Kf(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var yt,ce,Ui,dt,_r,Ns,xn,Vn,Bi,js,Ms,Pr,Or,Qn,Rs,ve,li,zu,Au,$u,Uu,Bu,Wu,Hu,kg,Yh,gx=(Yh=class extends Hs{constructor(t,n){super();te(this,ve);te(this,yt);te(this,ce);te(this,Ui);te(this,dt);te(this,_r);te(this,Ns);te(this,xn);te(this,Vn);te(this,Bi);te(this,js);te(this,Ms);te(this,Pr);te(this,Or);te(this,Qn);te(this,Rs,new Set);this.options=n,V(this,yt,t),V(this,Vn,null),V(this,xn,Fu()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(w(this,ce).addObserver(this),Gf(w(this,ce),this.options)?ae(this,ve,li).call(this):this.updateResult(),ae(this,ve,Uu).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Vu(w(this,ce),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Vu(w(this,ce),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ae(this,ve,Bu).call(this),ae(this,ve,Wu).call(this),w(this,ce).removeObserver(this)}setOptions(t){const n=this.options,r=w(this,ce);if(this.options=w(this,yt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ot(this.options.enabled,w(this,ce))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ae(this,ve,Hu).call(this),w(this,ce).setOptions(this.options),n._defaulted&&!pl(this.options,n)&&w(this,yt).getQueryCache().notify({type:"observerOptionsUpdated",query:w(this,ce),observer:this});const s=this.hasListeners();s&&Yf(w(this,ce),r,this.options,n)&&ae(this,ve,li).call(this),this.updateResult(),s&&(w(this,ce)!==r||Ot(this.options.enabled,w(this,ce))!==Ot(n.enabled,w(this,ce))||lr(this.options.staleTime,w(this,ce))!==lr(n.staleTime,w(this,ce)))&&ae(this,ve,zu).call(this);const i=ae(this,ve,Au).call(this);s&&(w(this,ce)!==r||Ot(this.options.enabled,w(this,ce))!==Ot(n.enabled,w(this,ce))||i!==w(this,Qn))&&ae(this,ve,$u).call(this,i)}getOptimisticResult(t){const n=w(this,yt).getQueryCache().build(w(this,yt),t),r=this.createResult(n,t);return yx(this,r)&&(V(this,dt,r),V(this,Ns,this.options),V(this,_r,w(this,ce).state)),r}getCurrentResult(){return w(this,dt)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&w(this,xn).status==="pending"&&w(this,xn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){w(this,Rs).add(t)}getCurrentQuery(){return w(this,ce)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=w(this,yt).defaultQueryOptions(t),r=w(this,yt).getQueryCache().build(w(this,yt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ae(this,ve,li).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),w(this,dt)))}createResult(t,n){var _;const r=w(this,ce),s=this.options,i=w(this,dt),o=w(this,_r),l=w(this,Ns),c=t!==r?t.state:w(this,Ui),{state:h}=t;let d={...h},v=!1,S;if(n._optimisticResults){const b=this.hasListeners(),P=!b&&Gf(t,n),ee=b&&Yf(t,r,n,s);(P||ee)&&(d={...d,...Sg(h.data,t.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:k,errorUpdatedAt:E,status:j}=d;S=d.data;let y=!1;if(n.placeholderData!==void 0&&S===void 0&&j==="pending"){let b;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(b=i.data,y=!0):b=typeof n.placeholderData=="function"?n.placeholderData((_=w(this,Ms))==null?void 0:_.state.data,w(this,Ms)):n.placeholderData,b!==void 0&&(j="success",S=Ou(i==null?void 0:i.data,b,n),v=!0)}if(n.select&&S!==void 0&&!y)if(i&&S===(o==null?void 0:o.data)&&n.select===w(this,Bi))S=w(this,js);else try{V(this,Bi,n.select),S=n.select(S),S=Ou(i==null?void 0:i.data,S,n),V(this,js,S),V(this,Vn,null)}catch(b){V(this,Vn,b)}w(this,Vn)&&(k=w(this,Vn),S=w(this,js),E=Date.now(),j="error");const g=d.fetchStatus==="fetching",p=j==="pending",m=j==="error",C=p&&g,L=S!==void 0,R={status:j,fetchStatus:d.fetchStatus,isPending:p,isSuccess:j==="success",isError:m,isInitialLoading:C,isLoading:C,data:S,dataUpdatedAt:d.dataUpdatedAt,error:k,errorUpdatedAt:E,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:g,isRefetching:g&&!p,isLoadingError:m&&!L,isPaused:d.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:m&&L,isStale:od(t,n),refetch:this.refetch,promise:w(this,xn),isEnabled:Ot(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const b=re=>{R.status==="error"?re.reject(R.error):R.data!==void 0&&re.resolve(R.data)},P=()=>{const re=V(this,xn,R.promise=Fu());b(re)},ee=w(this,xn);switch(ee.status){case"pending":t.queryHash===r.queryHash&&b(ee);break;case"fulfilled":(R.status==="error"||R.data!==ee.value)&&P();break;case"rejected":(R.status!=="error"||R.error!==ee.reason)&&P();break}}return R}updateResult(){const t=w(this,dt),n=this.createResult(w(this,ce),this.options);if(V(this,_r,w(this,ce).state),V(this,Ns,this.options),w(this,_r).data!==void 0&&V(this,Ms,w(this,ce)),pl(n,t))return;V(this,dt,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!w(this,Rs).size)return!0;const o=new Set(i??w(this,Rs));return this.options.throwOnError&&o.add("error"),Object.keys(w(this,dt)).some(l=>{const a=l;return w(this,dt)[a]!==t[a]&&o.has(a)})};ae(this,ve,kg).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ae(this,ve,Uu).call(this)}},yt=new WeakMap,ce=new WeakMap,Ui=new WeakMap,dt=new WeakMap,_r=new WeakMap,Ns=new WeakMap,xn=new WeakMap,Vn=new WeakMap,Bi=new WeakMap,js=new WeakMap,Ms=new WeakMap,Pr=new WeakMap,Or=new WeakMap,Qn=new WeakMap,Rs=new WeakMap,ve=new WeakSet,li=function(t){ae(this,ve,Hu).call(this);let n=w(this,ce).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(pt)),n},zu=function(){ae(this,ve,Bu).call(this);const t=lr(this.options.staleTime,w(this,ce));if(Hr||w(this,dt).isStale||!_u(t))return;const r=pg(w(this,dt).dataUpdatedAt,t)+1;V(this,Pr,br.setTimeout(()=>{w(this,dt).isStale||this.updateResult()},r))},Au=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(w(this,ce)):this.options.refetchInterval)??!1},$u=function(t){ae(this,ve,Wu).call(this),V(this,Qn,t),!(Hr||Ot(this.options.enabled,w(this,ce))===!1||!_u(w(this,Qn))||w(this,Qn)===0)&&V(this,Or,br.setInterval(()=>{(this.options.refetchIntervalInBackground||id.isFocused())&&ae(this,ve,li).call(this)},w(this,Qn)))},Uu=function(){ae(this,ve,zu).call(this),ae(this,ve,$u).call(this,ae(this,ve,Au).call(this))},Bu=function(){w(this,Pr)&&(br.clearTimeout(w(this,Pr)),V(this,Pr,void 0))},Wu=function(){w(this,Or)&&(br.clearInterval(w(this,Or)),V(this,Or,void 0))},Hu=function(){const t=w(this,yt).getQueryCache().build(w(this,yt),this.options);if(t===w(this,ce))return;const n=w(this,ce);V(this,ce,t),V(this,Ui,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},kg=function(t){Ve.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(w(this,dt))}),w(this,yt).getQueryCache().notify({query:w(this,ce),type:"observerResultsUpdated"})})},Yh);function vx(e,t){return Ot(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Gf(e,t){return vx(e,t)||e.state.data!==void 0&&Vu(e,t,t.refetchOnMount)}function Vu(e,t,n){if(Ot(t.enabled,e)!==!1&&lr(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&od(e,t)}return!1}function Yf(e,t,n,r){return(e!==t||Ot(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&od(e,n)}function od(e,t){return Ot(t.enabled,e)!==!1&&e.isStaleByTime(lr(t.staleTime,e))}function yx(e,t){return!pl(e.getCurrentResult(),t)}function qf(e){return{onFetch:(t,n)=>{var h,d,v,S,k;const r=t.options,s=(v=(d=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:d.fetchMore)==null?void 0:v.direction,i=((S=t.state.data)==null?void 0:S.pages)||[],o=((k=t.state.data)==null?void 0:k.pageParams)||[];let l={pages:[],pageParams:[]},a=0;const c=async()=>{let E=!1;const j=p=>{ux(p,()=>t.signal,()=>E=!0)},y=gg(t.options,t.fetchOptions),g=async(p,m,C)=>{if(E)return Promise.reject();if(m==null&&p.pages.length)return Promise.resolve(p);const T=(()=>{const P={client:t.client,queryKey:t.queryKey,pageParam:m,direction:C?"backward":"forward",meta:t.options.meta};return j(P),P})(),R=await y(T),{maxPages:_}=t.options,b=C?ax:lx;return{pages:b(p.pages,R,_),pageParams:b(p.pageParams,m,_)}};if(s&&i.length){const p=s==="backward",m=p?xx:Xf,C={pages:i,pageParams:o},L=m(r,C);l=await g(C,L,p)}else{const p=e??i.length;do{const m=a===0?o[0]??r.initialPageParam:Xf(r,l);if(a>0&&m==null)break;l=await g(l,m),a++}while(a<p)}return l};t.options.persister?t.fetchFn=()=>{var E,j;return(j=(E=t.options).persister)==null?void 0:j.call(E,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function Xf(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function xx(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Wi,sn,ft,Fr,on,Dn,qh,wx=(qh=class extends wg{constructor(t){super();te(this,on);te(this,Wi);te(this,sn);te(this,ft);te(this,Fr);V(this,Wi,t.client),this.mutationId=t.mutationId,V(this,ft,t.mutationCache),V(this,sn,[]),this.state=t.state||Cg(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){w(this,sn).includes(t)||(w(this,sn).push(t),this.clearGcTimeout(),w(this,ft).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){V(this,sn,w(this,sn).filter(n=>n!==t)),this.scheduleGc(),w(this,ft).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){w(this,sn).length||(this.state.status==="pending"?this.scheduleGc():w(this,ft).remove(this))}continue(){var t;return((t=w(this,Fr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,a,c,h,d,v,S,k,E,j,y,g,p,m,C,L,T,R,_;const n=()=>{ae(this,on,Dn).call(this,{type:"continue"})},r={client:w(this,Wi),meta:this.options.meta,mutationKey:this.options.mutationKey};V(this,Fr,xg({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(b,P)=>{ae(this,on,Dn).call(this,{type:"failed",failureCount:b,error:P})},onPause:()=>{ae(this,on,Dn).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>w(this,ft).canRun(this)}));const s=this.state.status==="pending",i=!w(this,Fr).canStart();try{if(s)n();else{ae(this,on,Dn).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=w(this,ft).config).onMutate)==null?void 0:l.call(o,t,this,r));const P=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,t,r));P!==this.state.context&&ae(this,on,Dn).call(this,{type:"pending",context:P,variables:t,isPaused:i})}const b=await w(this,Fr).start();return await((d=(h=w(this,ft).config).onSuccess)==null?void 0:d.call(h,b,t,this.state.context,this,r)),await((S=(v=this.options).onSuccess)==null?void 0:S.call(v,b,t,this.state.context,r)),await((E=(k=w(this,ft).config).onSettled)==null?void 0:E.call(k,b,null,this.state.variables,this.state.context,this,r)),await((y=(j=this.options).onSettled)==null?void 0:y.call(j,b,null,t,this.state.context,r)),ae(this,on,Dn).call(this,{type:"success",data:b}),b}catch(b){try{await((p=(g=w(this,ft).config).onError)==null?void 0:p.call(g,b,t,this.state.context,this,r))}catch(P){Promise.reject(P)}try{await((C=(m=this.options).onError)==null?void 0:C.call(m,b,t,this.state.context,r))}catch(P){Promise.reject(P)}try{await((T=(L=w(this,ft).config).onSettled)==null?void 0:T.call(L,void 0,b,this.state.variables,this.state.context,this,r))}catch(P){Promise.reject(P)}try{await((_=(R=this.options).onSettled)==null?void 0:_.call(R,void 0,b,t,this.state.context,r))}catch(P){Promise.reject(P)}throw ae(this,on,Dn).call(this,{type:"error",error:b}),b}finally{w(this,ft).runNext(this)}}},Wi=new WeakMap,sn=new WeakMap,ft=new WeakMap,Fr=new WeakMap,on=new WeakSet,Dn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ve.batch(()=>{w(this,sn).forEach(r=>{r.onMutationUpdate(t)}),w(this,ft).notify({mutation:this,type:"updated",action:t})})},qh);function Cg(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var wn,Gt,Hi,Xh,Sx=(Xh=class extends Hs{constructor(t={}){super();te(this,wn);te(this,Gt);te(this,Hi);this.config=t,V(this,wn,new Set),V(this,Gt,new Map),V(this,Hi,0)}build(t,n,r){const s=new wx({client:t,mutationCache:this,mutationId:++eo(this,Hi)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){w(this,wn).add(t);const n=xo(t);if(typeof n=="string"){const r=w(this,Gt).get(n);r?r.push(t):w(this,Gt).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(w(this,wn).delete(t)){const n=xo(t);if(typeof n=="string"){const r=w(this,Gt).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&w(this,Gt).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=xo(t);if(typeof n=="string"){const r=w(this,Gt).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=xo(t);if(typeof n=="string"){const s=(r=w(this,Gt).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ve.batch(()=>{w(this,wn).forEach(t=>{this.notify({type:"removed",mutation:t})}),w(this,wn).clear(),w(this,Gt).clear()})}getAll(){return Array.from(w(this,wn))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Wf(n,r))}findAll(t={}){return this.getAll().filter(n=>Wf(t,n))}notify(t){Ve.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Ve.batch(()=>Promise.all(t.map(n=>n.continue().catch(pt))))}},wn=new WeakMap,Gt=new WeakMap,Hi=new WeakMap,Xh);function xo(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Sn,Kn,xt,kn,jn,Oo,Qu,Jh,kx=(Jh=class extends Hs{constructor(n,r){super();te(this,jn);te(this,Sn);te(this,Kn);te(this,xt);te(this,kn);V(this,Sn,n),this.setOptions(r),this.bindMethods(),ae(this,jn,Oo).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=w(this,Sn).defaultMutationOptions(n),pl(this.options,r)||w(this,Sn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:w(this,xt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Vr(r.mutationKey)!==Vr(this.options.mutationKey)?this.reset():((s=w(this,xt))==null?void 0:s.state.status)==="pending"&&w(this,xt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=w(this,xt))==null||n.removeObserver(this)}onMutationUpdate(n){ae(this,jn,Oo).call(this),ae(this,jn,Qu).call(this,n)}getCurrentResult(){return w(this,Kn)}reset(){var n;(n=w(this,xt))==null||n.removeObserver(this),V(this,xt,void 0),ae(this,jn,Oo).call(this),ae(this,jn,Qu).call(this)}mutate(n,r){var s;return V(this,kn,r),(s=w(this,xt))==null||s.removeObserver(this),V(this,xt,w(this,Sn).getMutationCache().build(w(this,Sn),this.options)),w(this,xt).addObserver(this),w(this,xt).execute(n)}},Sn=new WeakMap,Kn=new WeakMap,xt=new WeakMap,kn=new WeakMap,jn=new WeakSet,Oo=function(){var r;const n=((r=w(this,xt))==null?void 0:r.state)??Cg();V(this,Kn,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Qu=function(n){Ve.batch(()=>{var r,s,i,o,l,a,c,h;if(w(this,kn)&&this.hasListeners()){const d=w(this,Kn).variables,v=w(this,Kn).context,S={client:w(this,Sn),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=w(this,kn)).onSuccess)==null||s.call(r,n.data,d,v,S)}catch(k){Promise.reject(k)}try{(o=(i=w(this,kn)).onSettled)==null||o.call(i,n.data,null,d,v,S)}catch(k){Promise.reject(k)}}else if((n==null?void 0:n.type)==="error"){try{(a=(l=w(this,kn)).onError)==null||a.call(l,n.error,d,v,S)}catch(k){Promise.reject(k)}try{(h=(c=w(this,kn)).onSettled)==null||h.call(c,void 0,n.error,d,v,S)}catch(k){Promise.reject(k)}}}this.listeners.forEach(d=>{d(w(this,Kn))})})},Jh),ln,Zh,Cx=(Zh=class extends Hs{constructor(t={}){super();te(this,ln);this.config=t,V(this,ln,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??rd(s,n);let o=this.get(i);return o||(o=new mx({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){w(this,ln).has(t.queryHash)||(w(this,ln).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=w(this,ln).get(t.queryHash);n&&(t.destroy(),n===t&&w(this,ln).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ve.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return w(this,ln).get(t)}getAll(){return[...w(this,ln).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Bf(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Bf(t,r)):n}notify(t){Ve.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Ve.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ve.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ln=new WeakMap,Zh),Oe,Gn,Yn,Ls,Ts,qn,Is,_s,ep,Ex=(ep=class{constructor(e={}){te(this,Oe);te(this,Gn);te(this,Yn);te(this,Ls);te(this,Ts);te(this,qn);te(this,Is);te(this,_s);V(this,Oe,e.queryCache||new Cx),V(this,Gn,e.mutationCache||new Sx),V(this,Yn,e.defaultOptions||{}),V(this,Ls,new Map),V(this,Ts,new Map),V(this,qn,0)}mount(){eo(this,qn)._++,w(this,qn)===1&&(V(this,Is,id.subscribe(async e=>{e&&(await this.resumePausedMutations(),w(this,Oe).onFocus())})),V(this,_s,ml.subscribe(async e=>{e&&(await this.resumePausedMutations(),w(this,Oe).onOnline())})))}unmount(){var e,t;eo(this,qn)._--,w(this,qn)===0&&((e=w(this,Is))==null||e.call(this),V(this,Is,void 0),(t=w(this,_s))==null||t.call(this),V(this,_s,void 0))}isFetching(e){return w(this,Oe).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return w(this,Gn).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=w(this,Oe).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=w(this,Oe).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(lr(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return w(this,Oe).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=w(this,Oe).get(r.queryHash),i=s==null?void 0:s.state.data,o=sx(t,i);if(o!==void 0)return w(this,Oe).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Ve.batch(()=>w(this,Oe).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=w(this,Oe).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=w(this,Oe);Ve.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=w(this,Oe);return Ve.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Ve.batch(()=>w(this,Oe).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(pt).catch(pt)}invalidateQueries(e,t={}){return Ve.batch(()=>(w(this,Oe).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Ve.batch(()=>w(this,Oe).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(pt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(pt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=w(this,Oe).build(this,t);return n.isStaleByTime(lr(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(pt).catch(pt)}fetchInfiniteQuery(e){return e.behavior=qf(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(pt).catch(pt)}ensureInfiniteQueryData(e){return e.behavior=qf(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ml.isOnline()?w(this,Gn).resumePausedMutations():Promise.resolve()}getQueryCache(){return w(this,Oe)}getMutationCache(){return w(this,Gn)}getDefaultOptions(){return w(this,Yn)}setDefaultOptions(e){V(this,Yn,e)}setQueryDefaults(e,t){w(this,Ls).set(Vr(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...w(this,Ls).values()],n={};return t.forEach(r=>{Fi(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){w(this,Ts).set(Vr(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...w(this,Ts).values()],n={};return t.forEach(r=>{Fi(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...w(this,Yn).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=rd(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===sd&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...w(this,Yn).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){w(this,Oe).clear(),w(this,Gn).clear()}},Oe=new WeakMap,Gn=new WeakMap,Yn=new WeakMap,Ls=new WeakMap,Ts=new WeakMap,qn=new WeakMap,Is=new WeakMap,_s=new WeakMap,ep),Eg=f.createContext(void 0),Gr=e=>{const t=f.useContext(Eg);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},bx=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),u.jsx(Eg.Provider,{value:e,children:t})),bg=f.createContext(!1),Nx=()=>f.useContext(bg);bg.Provider;function jx(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Mx=f.createContext(jx()),Rx=()=>f.useContext(Mx),Lx=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Tx=e=>{f.useEffect(()=>{e.clearReset()},[e])},Ix=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||vg(n,[e.error,r])),_x=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Px=(e,t)=>e.isLoading&&e.isFetching&&!t,Ox=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Jf=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Fx(e,t,n){var d,v,S,k,E;const r=Nx(),s=Rx(),i=Gr(),o=i.defaultQueryOptions(e);(v=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||v.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",_x(o),Lx(o,s),Tx(s);const l=!i.getQueryCache().get(o.queryHash),[a]=f.useState(()=>new t(i,o)),c=a.getOptimisticResult(o),h=!r&&e.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(j=>{const y=h?a.subscribe(Ve.batchCalls(j)):pt;return a.updateResult(),y},[a,h]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),f.useEffect(()=>{a.setOptions(o)},[o,a]),Ox(o,c))throw Jf(o,a,s);if(Ix({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((k=(S=i.getDefaultOptions().queries)==null?void 0:S._experimental_afterQuery)==null||k.call(S,o,c),o.experimental_prefetchInRender&&!Hr&&Px(c,r)){const j=l?Jf(o,a,s):(E=i.getQueryCache().get(o.queryHash))==null?void 0:E.promise;j==null||j.catch(pt).finally(()=>{a.updateResult()})}return o.notifyOnChangeProps?c:a.trackResult(c)}function ld(e,t){return Fx(e,gx)}function Dx(e,t){const n=Gr(),[r]=f.useState(()=>new kx(n,e));f.useEffect(()=>{r.setOptions(e)},[r,e]);const s=f.useSyncExternalStore(f.useCallback(o=>r.subscribe(Ve.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=f.useCallback((o,l)=>{r.mutate(o,l).catch(pt)},[r]);if(s.error&&vg(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function Zf(e){return e.length>0&&"options"in e[0]}function eh({value:e,onChange:t,options:n,placeholder:r="Select...",trigger:s,triggerClassName:i="",panelClassName:o="",align:l="left",width:a="auto",showChevron:c=!0,title:h,disabled:d=!1,"aria-label":v}){var R;const[S,k]=f.useState(!1),E=f.useRef(null),j=f.useRef(null),g=f.useCallback(()=>{const _=b=>{const P=b.find(ee=>ee.value===e);return P?P.label:null};if(Zf(n))for(const b of n){const P=_(b.options);if(P)return P}else{const b=_(n);if(b)return b}return r},[e,n,r])();f.useEffect(()=>{if(!S)return;const _=P=>{E.current&&!E.current.contains(P.target)&&k(!1)},b=P=>{var ee;P.key==="Escape"&&(k(!1),(ee=j.current)==null||ee.focus())};return window.addEventListener("click",_),window.addEventListener("keydown",b),()=>{window.removeEventListener("click",_),window.removeEventListener("keydown",b)}},[S]);const p=_=>{var b;t(_),k(!1),(b=j.current)==null||b.focus()},m=_=>_.map(b=>u.jsxs("button",{className:"dropdown-item","data-active":b.value===e,disabled:b.disabled,onClick:()=>!b.disabled&&p(b.value),role:"menuitem",children:[b.icon&&u.jsx("span",{className:"shrink-0",children:b.icon}),u.jsx("span",{className:"flex-1 truncate",children:b.label}),b.value===e&&u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 text-accent",children:u.jsx("polyline",{points:"20 6 9 17 4 12"})})]},b.value)),C=((R=j.current)==null?void 0:R.offsetWidth)??0,L=a==="trigger"?C:a==="auto"?void 0:a,T={...L?{width:L,minWidth:L}:{},...l==="right"?{right:0}:{left:0}};return u.jsxs("div",{ref:E,className:"relative",children:[s?u.jsx("div",{onClick:()=>!d&&k(_=>!_),children:s}):u.jsxs("button",{ref:j,type:"button",className:`dropdown-trigger ${i}`,onClick:()=>k(_=>!_),disabled:d,title:h,"aria-label":v,"aria-haspopup":"listbox","aria-expanded":S,children:[u.jsx("span",{className:"truncate",children:g}),c&&u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`shrink-0 opacity-60 transition-transform ${S?"rotate-180":""}`,children:u.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),S&&u.jsx("div",{className:`dropdown-panel ${o}`,style:T,role:"listbox","aria-label":v,children:Zf(n)?n.map((_,b)=>u.jsxs("div",{children:[_.label&&u.jsx("div",{className:"dropdown-label",children:_.label}),m(_.options),b<n.length-1&&u.jsx("div",{className:"dropdown-divider"})]},_.label||b)):m(n)})]})}const zx={offline:"sync-dot-offline",unstable:"sync-dot-unstable",recent:"sync-dot-recent",editing:"sync-dot-editing",live:"sync-dot-live"};function Ax({state:e,presence:t,syncLabel:n,connectionLabel:r,lastEditedLabel:s,hasEdits:i,recentTouches:o,isNarrow:l}){const[a,c]=f.useState(!1),h=f.useRef(null),d=f.useRef(null),v=f.useMemo(()=>t?`${t.viewing} viewing  ${t.editing} editing`:"- viewing  - editing",[t]),S=t?String(t.viewing):"-",k=f.useCallback(()=>{c(!1),window.requestAnimationFrame(()=>{var E;return(E=d.current)==null?void 0:E.focus()})},[]);return f.useEffect(()=>{if(!a)return;const E=y=>{!h.current||h.current.contains(y.target)||k()},j=y=>{y.key==="Escape"&&k()};return window.addEventListener("mousedown",E),window.addEventListener("keydown",j),()=>{window.removeEventListener("mousedown",E),window.removeEventListener("keydown",j)}},[a,k]),u.jsxs("div",{ref:h,className:"sync-indicator",children:[u.jsxs("button",{ref:d,type:"button",className:"sync-indicator-button",onClick:()=>a?k():c(!0),"aria-haspopup":"dialog","aria-expanded":a,"aria-label":"Sync status",title:v,children:[u.jsx("span",{className:`sync-indicator-dot ${zx[e]}`,"aria-hidden":"true"}),!l&&u.jsx("span",{className:"sync-indicator-count tabular-nums",children:S})]}),a&&u.jsxs("div",{role:"dialog","aria-label":"Sync status",className:"sync-indicator-card select-text",children:[u.jsx("div",{className:"sync-indicator-line sync-indicator-primary",children:n}),u.jsx("div",{className:"sync-indicator-line",children:r}),u.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:v}),u.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:i?`Last edited: ${s}`:"No edits yet."}),u.jsxs("div",{className:"sync-indicator-section",children:[u.jsx("div",{className:"sync-indicator-section-title",children:"Recently touched files"}),o.length>0?u.jsx("div",{className:"sync-indicator-list",children:o.map(E=>u.jsxs("div",{className:"sync-indicator-item",children:[u.jsx("span",{className:"sync-indicator-item-name",title:E.path,children:E.label}),u.jsx("span",{className:"sync-indicator-item-time tabular-nums",children:E.timeLabel})]},E.path))}):u.jsx("div",{className:"sync-indicator-empty",children:"No recent touches."})]})]})]})}function $x({rootRef:e,onSearch:t,viewerActive:n,onBack:r,zoomPercent:s,onZoomPercentChange:i,currentLabel:o,itemCount:l,totalCount:a,sortSpec:c,metricKeys:h,onSortChange:d,filterCount:v,onOpenFilters:S,starFilters:k,onToggleStar:E,onClearStars:j,onClearFilters:y,starCounts:g,viewMode:p,onViewMode:m,gridItemSize:C,onGridItemSize:L,leftOpen:T,rightOpen:R,onToggleLeft:_,onToggleRight:b,onPrevImage:P,onNextImage:ee,canPrevImage:re,canNextImage:H,syncIndicator:Te}){const[be,me]=f.useState(!1),[O,B]=f.useState(!1),[q,de]=f.useState(!1),Q=f.useRef(null),le=f.useRef(null);f.useEffect(()=>{if(!be)return;const M=F=>{Q.current&&!Q.current.contains(F.target)&&me(!1)};return window.addEventListener("click",M),()=>window.removeEventListener("click",M)},[be]),f.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const M=window.matchMedia("(max-width: 900px)"),F=G=>B(G.matches);return B(M.matches),"addEventListener"in M?(M.addEventListener("change",F),()=>M.removeEventListener("change",F)):(M.addListener(F),()=>M.removeListener(F))},[]),f.useEffect(()=>{if(!O||n){de(!1);return}if(!q)return;const M=window.requestAnimationFrame(()=>{var F;return(F=le.current)==null?void 0:F.focus()});return()=>window.cancelAnimationFrame(M)},[O,q,n]);const se=c??{kind:"builtin",key:"added",dir:"desc"},fe=se.dir,ke=se.kind==="builtin"&&se.key==="random",Ie=h!=null&&h.length?h.map(M=>({value:`metric:${M}`,label:M})):[],ot=[{value:"builtin:added",label:"Date added"},{value:"builtin:name",label:"Filename"},{value:"builtin:random",label:"Random"},...Ie],je=[{label:"Layout",options:[{value:"layout:grid",label:"Grid"},{value:"layout:masonry",label:"Masonry"}]},{label:"Sort by",options:ot}],lt=se.kind==="metric"?`metric:${se.key}`:`builtin:${se.key}`,pr=[{label:"Sort by",options:ot}],mr=O&&!n,gr=M=>{if(M.startsWith("layout:")){const F=M==="layout:masonry"?"adaptive":"grid";m==null||m(F)}else d==null||d(th(M,se))},hn=()=>{d&&d(ke?se:{...se,dir:fe==="desc"?"asc":"desc"})},en=k??[],vr=en.length,A=Bx(v,vr),J=Ux(l,a),Z=o||"Root";return u.jsxs("div",{ref:e,className:"toolbar-shell fixed top-0 left-0 right-0 h-12 grid grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] items-center px-3 gap-3 bg-panel border-b border-border z-[var(--z-toolbar)] col-span-full row-start-1 select-none",children:[u.jsxs("div",{className:"toolbar-left flex items-center gap-4 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[u.jsxs("div",{className:"flex flex-col min-w-0 leading-tight",children:[u.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted",children:"Scope"}),u.jsx("span",{className:"text-sm font-medium text-text truncate",title:Z,children:Z})]}),J&&u.jsx("span",{className:"toolbar-count text-xs text-muted whitespace-nowrap tabular-nums",children:J}),n&&u.jsxs("button",{className:"btn btn-sm",onClick:r,title:"Back to grid",children:[u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})]}),u.jsxs("div",{className:`toolbar-sort flex items-center gap-2 ${n?"opacity-40 pointer-events-none":""}`,children:[u.jsxs("div",{className:"toolbar-sort-controls flex items-center gap-2",children:[u.jsx(eh,{value:lt,onChange:gr,options:je,title:"Sort and layout options","aria-label":"Sort and layout",triggerClassName:"min-w-[110px]"}),u.jsx("button",{className:"toolbar-sort-dir btn btn-icon",onClick:hn,title:ke?"Shuffle":`Sort ${fe==="desc"?"descending":"ascending"}`,"aria-label":ke?"Shuffle":"Toggle sort direction","aria-disabled":n,children:ke?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),u.jsx("path",{d:"M21 3v5h-5"})]}):fe==="desc"?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 5v14"}),u.jsx("path",{d:"M19 12l-7 7-7-7"})]}):u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 19V5"}),u.jsx("path",{d:"M5 12l7-7 7 7"})]})})]}),u.jsxs("div",{ref:Q,className:"toolbar-filter relative",children:[u.jsxs("button",{className:`btn ${A>0?"btn-active":""}`,onClick:()=>me(M=>!M),"aria-haspopup":"dialog","aria-expanded":be,title:"Filters","aria-disabled":n,children:[u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),u.jsx("span",{className:"toolbar-filters-label",children:"Filters"}),A>0&&u.jsx("span",{className:"toolbar-filters-count px-1.5 py-0.5 text-[11px] rounded-full bg-accent-strong text-text",children:A})]}),be&&u.jsxs("div",{role:"dialog","aria-label":"Filters",className:"dropdown-panel w-[240px]",style:{top:"38px",left:0},children:[u.jsx("div",{className:"dropdown-label",children:"Rating"}),u.jsxs("div",{className:"px-1",children:[[5,4,3,2,1].map(M=>{const F=en.includes(M),G=(g==null?void 0:g[String(M)])??0;return u.jsxs("button",{onClick:()=>E==null?void 0:E(M),className:`dropdown-item justify-between ${F?"bg-accent-muted":""}`,children:[u.jsxs("span",{className:F?"text-star-active":"text-text",children:["".repeat(M),"".repeat(5-M)]}),u.jsx("span",{className:"text-xs text-muted",children:G})]},M)}),u.jsxs("button",{onClick:()=>E==null?void 0:E(0),className:`dropdown-item justify-between ${en.includes(0)?"bg-accent-muted":""}`,children:[u.jsx("span",{className:"text-text",children:"Unrated"}),u.jsx("span",{className:"text-xs text-muted",children:(g==null?void 0:g["0"])??0})]})]}),u.jsx("div",{className:"dropdown-divider"}),u.jsx("div",{className:"dropdown-label",children:"Metrics"}),u.jsxs("button",{className:"dropdown-item",onClick:()=>{me(!1),S==null||S()},children:[u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M4 19V9"}),u.jsx("path",{d:"M10 19V5"}),u.jsx("path",{d:"M16 19v-7"}),u.jsx("path",{d:"M3 19h18"})]}),u.jsx("span",{children:"Open Metrics Panel"}),(v||0)>0&&u.jsxs("span",{className:"ml-auto text-xs text-muted",children:[v," active"]})]}),u.jsx("div",{className:"dropdown-divider"}),u.jsx("button",{className:"dropdown-item text-muted hover:text-text",onClick:()=>{y?y():j==null||j()},disabled:A===0,children:"Clear all filters"})]})]})]})]}),u.jsx("div",{className:"toolbar-center flex items-center gap-3 justify-center min-w-0",children:n?u.jsxs(u.Fragment,{children:[u.jsx("input",{type:"range",min:5,max:800,step:1,value:Math.round(Math.max(5,Math.min(800,s??100))),onChange:M=>i==null?void 0:i(Number(M.target.value)),className:"zoom-slider","aria-label":"Zoom level"}),u.jsxs("span",{className:"text-xs text-muted min-w-[42px] text-right",children:[Math.round(s??100),"%"]})]}):L&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs text-muted",children:"Size"}),u.jsx("input",{type:"range",min:80,max:500,step:10,value:C??220,onChange:M=>L(Number(M.target.value)),className:"w-28 h-1.5 bg-border rounded-full appearance-none cursor-pointer hover:bg-hover transition-colors [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-text [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-text [&::-moz-range-thumb]:border-0","aria-label":"Thumbnail size"})]})}),u.jsxs("div",{className:"toolbar-right flex items-center gap-2 justify-end",children:[u.jsxs("div",{className:`toolbar-nav flex items-center gap-1 mr-1 ${n?"":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,children:[u.jsx("button",{className:`btn btn-icon ${re?"":"opacity-40 cursor-not-allowed"}`,title:"Previous image (A / )",onClick:()=>re&&(P==null?void 0:P()),"aria-label":"Previous image","aria-disabled":!re,children:u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M15 18l-6-6 6-6"})})}),u.jsx("button",{className:`btn btn-icon ${H?"":"opacity-40 cursor-not-allowed"}`,title:"Next image (D / )",onClick:()=>H&&(ee==null?void 0:ee()),"aria-label":"Next image","aria-disabled":!H,children:u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M9 6l6 6-6 6"})})})]}),u.jsxs("div",{className:"toolbar-panels flex items-center gap-1",children:[u.jsx("button",{className:`btn btn-icon ${T?"":"opacity-50"}`,title:T?"Hide left panel (Ctrl+B)":"Show left panel (Ctrl+B)",onClick:_,"aria-pressed":T,"aria-label":"Toggle left panel",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"3",y:"5",width:"6",height:"14",rx:"1.5"}),u.jsx("rect",{x:"11",y:"5",width:"10",height:"14",rx:"1.5"})]})}),u.jsx("button",{className:`btn btn-icon ${R?"":"opacity-50"}`,title:R?"Hide right panel (Ctrl+Alt+B)":"Show right panel (Ctrl+Alt+B)",onClick:b,"aria-pressed":R,"aria-label":"Toggle right panel",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"15",y:"5",width:"6",height:"14",rx:"1.5"}),u.jsx("rect",{x:"3",y:"5",width:"10",height:"14",rx:"1.5"})]})})]}),Te&&u.jsx(Ax,{...Te,isNarrow:O}),!n&&O&&u.jsx("button",{className:`btn btn-icon ${q?"btn-active":""}`,"aria-label":q?"Close search":"Open search",title:q?"Close search":"Search",onClick:()=>de(M=>!M),children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[u.jsx("circle",{cx:"11",cy:"11",r:"7"}),u.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),!n&&!O?u.jsx("div",{className:"toolbar-search w-[240px]",children:u.jsx("input",{ref:le,"aria-label":"Search filename, tags, notes",placeholder:"Search...",onChange:M=>t(M.target.value),className:"toolbar-search-input input h-8 w-full focus:w-full transition-all duration-200 rounded-lg px-3 border border-border bg-surface text-text placeholder:text-muted select-text"})}):n?u.jsx("div",{className:"toolbar-search w-[240px]","aria-hidden":"true"}):null]}),!n&&O&&q&&u.jsx("div",{className:"toolbar-search-row",children:u.jsx("input",{ref:le,"aria-label":"Search filename, tags, notes",placeholder:"Search...",onChange:M=>t(M.target.value),className:"toolbar-search-input-mobile h-9 w-full rounded-lg px-3 border border-border bg-surface text-text placeholder:text-muted select-text"})}),mr&&u.jsx("div",{className:"mobile-drawer",children:u.jsxs("div",{className:"mobile-drawer-row",children:[u.jsxs("div",{className:"mobile-pill-group",children:[u.jsx("button",{className:`mobile-pill ${p==="grid"?"is-active":""}`,onClick:()=>m==null?void 0:m("grid"),"aria-pressed":p==="grid",children:"Grid"}),u.jsx("button",{className:`mobile-pill ${p==="adaptive"?"is-active":""}`,onClick:()=>m==null?void 0:m("adaptive"),"aria-pressed":p==="adaptive",children:"Masonry"})]}),u.jsx(eh,{value:lt,onChange:M=>d==null?void 0:d(th(M,se)),options:pr,"aria-label":"Sort",triggerClassName:"mobile-pill mobile-pill-dropdown",panelClassName:"mobile-drawer-panel"}),u.jsx("button",{className:"mobile-pill mobile-pill-icon",onClick:hn,title:ke?"Shuffle":`Sort ${fe==="desc"?"descending":"ascending"}`,"aria-label":ke?"Shuffle":"Toggle sort direction",children:ke?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),u.jsx("path",{d:"M21 3v5h-5"})]}):fe==="desc"?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 5v14"}),u.jsx("path",{d:"M19 12l-7 7-7-7"})]}):u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 19V5"}),u.jsx("path",{d:"M5 12l7-7 7 7"})]})})]})})]})}function Ux(e,t){if(typeof e!="number")return null;const n=e.toLocaleString();if(typeof t!="number")return`${n} items`;const r=t.toLocaleString();return t===e?`${n} items`:`${n} / ${r} items`}function Bx(e,t){return typeof e=="number"?e:t>0?1:0}function th(e,t){if(e.startsWith("metric:")){const n=e.slice(7);return n?{kind:"metric",key:n,dir:t.dir}:t}if(e.startsWith("builtin:")){const n=e.slice(8);if(n==="name"||n==="added"||n==="random")return{kind:"builtin",key:n,dir:t.dir}}return t}class ar extends Error{constructor(n,r,s,i){super(r);pn(this,"status");pn(this,"url");pn(this,"body");this.name="FetchError",this.status=n,this.url=s,this.body=i}}function Wx(e){const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function Ng(e,t,n){if(t&&typeof t=="object"){const r=t,s=typeof r.error=="string"?r.error:null,i=typeof r.message=="string"?r.message:null;if(s&&i)return`${s}: ${i}`;if(s)return s;if(i)return i}return typeof t=="string"&&t?t:`HTTP ${e} for ${n}`}function ct(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{let a=null;const c=await l.text().catch(()=>"");if(c)if((l.headers.get("content-type")||"").includes("application/json")||Wx(c))try{a=JSON.parse(c)}catch{a=c}else a=c;if(!l.ok)throw new ar(l.status,Ng(l.status,a,e),e,a);return a}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}function wo(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{if(!l.ok){const a=await l.text().catch(()=>""),c=a||null;throw new ar(l.status,Ng(l.status,c,e),e,c)}return l.blob()}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}class jg{constructor(t){pn(this,"store",new Map);pn(this,"inflight",new Map);pn(this,"totalBytes",0);this.maxBytes=t}getMaxBytes(){return this.maxBytes}getTotalBytes(){return this.totalBytes}getSize(){return this.store.size}has(t){return this.store.has(t)}isInflight(t){return this.inflight.has(t)}get(t){const n=this.store.get(t);if(n)return this.store.delete(t),this.store.set(t,n),n.blob}evictIfNeeded(t){for(;this.totalBytes+t>this.maxBytes&&this.store.size>0;){const n=this.store.keys().next().value;if(n==null)break;const r=this.store.get(n);r&&(this.totalBytes-=r.size),this.store.delete(n)}}set(t,n){const r=n.size||0;if(!(r>this.maxBytes)){if(this.store.has(t)){const s=this.store.get(t);this.totalBytes-=s.size,this.store.delete(t)}this.evictIfNeeded(r),this.store.set(t,{blob:n,size:r}),this.totalBytes+=r}}async getOrFetch(t,n){const r=this.get(t);if(r)return r;const s=this.inflight.get(t);if(s)return s.promise;const i=n(),o=typeof i=="object"&&"promise"in i,l=o?i.promise:i,a=o?i.abort:void 0,c=l.then(h=>(this.set(t,h),h)).finally(()=>{this.inflight.delete(t)});return this.inflight.set(t,{promise:c,abort:a}),c}prefetch(t,n){if(this.store.has(t)||this.inflight.has(t))return;const r=n(),s=typeof r=="object"&&"promise"in r,i=s?r.promise:r,o=s?r.abort:void 0,l=i.then(a=>(this.set(t,a),a)).catch(()=>new Blob).finally(()=>{this.inflight.delete(t)});this.inflight.set(t,{promise:l,abort:o})}cancelPrefetch(t){const n=this.inflight.get(t);if(n!=null&&n.abort)try{n.abort()}catch{}this.inflight.delete(t)}clear(){for(const[t,n]of this.inflight)if(n.abort)try{n.abort()}catch{}this.inflight.clear(),this.store.clear(),this.totalBytes=0}evictPrefix(t){const n=(()=>{const s=t?`/${t.replace(/^\/+/,"")}`:"/";return s==="/"?"/":s.replace(/\/+$/,"")})(),r=s=>{const i=s.startsWith("/")?s.replace(/\/+$/,""):`/${s.replace(/\/+$/,"")}`;return n==="/"?!0:i===n||i.startsWith(`${n}/`)};for(const[s,i]of Array.from(this.store.entries()))r(s)&&(this.totalBytes-=i.size,this.store.delete(s));for(const[s,i]of Array.from(this.inflight.entries()))if(r(s)){if(i.abort)try{i.abort()}catch{}this.inflight.delete(s)}this.totalBytes<0&&(this.totalBytes=0)}}const es=new jg(60*1024*1024),Ku=new jg(20*1024*1024),La={};function Hx(){const e=La==null?void 0:La.VITE_API_BASE,t=typeof window<"u",n=t?window.location.origin:"http://localhost",r=t?window.location.hostname:"localhost",s=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\]|.+\.localhost)$/i.test(r);if(!e)return"";let i;try{i=new URL(e,n)}catch{return""}const o=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\])$/i.test(i.hostname);return s?i.origin:o?"":i.origin}const Ae=Hx();const Vx=40*1024*1024,nh="lenslet.client_id",Mg="lenslet.last_event_id",Qx=1e3,Kx=3e4,Gx=5;let ti=null,Fo=null,rh=0,xs=null,ws=0,Dl=!0,gl=!1;function Rg(){return typeof window<"u"&&typeof EventSource<"u"}function Do(){if(ti)return ti;try{const e=window.localStorage.getItem(nh);if(e)return ti=e,e;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`;return window.localStorage.setItem(nh,t),ti=t,t}catch{const e=`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`;return ti=e,e}}function Di(e="lenslet"){rh+=1;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`nonce_${Math.random().toString(36).slice(2,10)}_${Date.now()}_${rh}`;return`${e}:${Do()}:${t}`}function Yx(){if(Fo!=null)return Fo;if(typeof window>"u")return null;try{const e=window.localStorage.getItem(Mg);if(!e)return null;const t=Number(e);return!Number.isFinite(t)||t<=0?null:(Fo=t,t)}catch{return null}}function qx(e){if(!(!Number.isFinite(e)||e<=0)&&(Fo=e,!(typeof window>"u")))try{window.localStorage.setItem(Mg,String(e))}catch{}}function Xx(){if(typeof window>"u")return`${Ae}/events`;const e=new URL(`${Ae}/events`,window.location.origin),t=Yx();return t!=null&&Number.isFinite(t)&&e.searchParams.set("last_event_id",String(t)),e.toString()}function Jx(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}let Qt=null,Lg="idle";const Gu=new Set,Yu=new Set,qu=new Set;function Ss(e){Lg=e;for(const t of Yu)t(e)}function ad(e){if(gl!==e){gl=e;for(const t of qu)t(e)}}function ud(){xs!=null&&(window.clearTimeout(xs),xs=null)}function Zx(){ws=0,ud()}function ew(){if(!Dl||xs!=null)return;ws+=1;const e=Math.min(Qx*Math.pow(2,ws-1),Kx);ws>=Gx?(Ss("offline"),ad(!0)):Ss("reconnecting"),xs=window.setTimeout(()=>{xs=null,Tg()},e)}function Tg(){if(!Dl||!Rg()||(Qt&&Qt.readyState===EventSource.CLOSED&&(Qt.close(),Qt=null),Qt))return;ws>0?Ss("reconnecting"):Ss("connecting");const e=new EventSource(Xx());Qt=e;const t=n=>r=>{const s=Jx(r.data);if(!s)return;const i=r.lastEventId?Number(r.lastEventId):null,o=i!=null&&Number.isFinite(i)?i:null;o!=null&&qx(o);for(const l of Gu)l({type:n,id:o,data:s})};e.addEventListener("item-updated",t("item-updated")),e.addEventListener("metrics-updated",t("metrics-updated")),e.addEventListener("presence",t("presence")),e.onopen=()=>{Zx(),ad(!1),Ss("live")},e.onerror=()=>{Qt===e&&(e.close(),Qt=null,ew())}}function tw(){Dl=!0,Rg()&&(ud(),Tg())}function nw(){Dl=!1,ud(),ws=0,Qt&&(Qt.close(),Qt=null),ad(!1),Ss("offline")}function rw(e){return Gu.add(e),()=>{Gu.delete(e)}}function sw(e){return Yu.add(e),e(Lg),()=>{Yu.delete(e)}}function iw(e){return qu.add(e),e(gl),()=>{qu.delete(e)}}function ow(){return gl}const he={getFolder:(e,t)=>{const n=new URLSearchParams({path:e});return t!=null&&n.set("page",String(t)),ct(`${Ae}/folders?${n}`).promise},search:(e,t)=>{const n=new URLSearchParams;return e&&n.set("q",e),t&&n.set("path",t),ct(`${Ae}/search?${n}`).promise},refreshFolder:e=>{const t=new URLSearchParams({path:e});return ct(`${Ae}/refresh?${t}`,{method:"POST"}).promise},getSidecar:e=>ct(`${Ae}/item?path=${encodeURIComponent(e)}`).promise,patchSidecar:(e,t,n)=>{const s={"Content-Type":"application/json","Idempotency-Key":(n==null?void 0:n.idempotencyKey)??Di("patch"),"x-client-id":Do(),"x-updated-by":"web"};return(n==null?void 0:n.ifMatch)!=null&&(s["If-Match"]=String(n.ifMatch)),ct(`${Ae}/item?path=${encodeURIComponent(e)}`,{method:"PATCH",headers:s,body:JSON.stringify(t)}).promise},getMetadata:e=>ct(`${Ae}/metadata?path=${encodeURIComponent(e)}`).promise,putSidecar:(e,t)=>ct(`${Ae}/item?path=${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-client-id":Do(),"x-updated-by":"web"},body:JSON.stringify(t)}).promise,getHealth:()=>ct(`${Ae}/health`).promise,postPresence:(e,t)=>ct(`${Ae}/presence`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gallery_id:e,client_id:t??Do()})}).promise,getThumb:e=>Ku.getOrFetch(e,()=>wo(`${Ae}/thumb?path=${encodeURIComponent(e)}`)),prefetchThumb:e=>{Ku.prefetch(e,()=>wo(`${Ae}/thumb?path=${encodeURIComponent(e)}`))},getFile:e=>es.getOrFetch(e,()=>wo(`${Ae}/file?path=${encodeURIComponent(e)}`)),prefetchFile:async e=>{if(!(es.has(e)||es.isInflight(e)))try{const t=await wo(`${Ae}/file?path=${encodeURIComponent(e)}`).promise;t.size<=Vx&&es.set(e,t)}catch{}},cancelPrefetch:e=>{es.cancelPrefetch(e)},uploadFile:async(e,t)=>{const n=new FormData;return n.append("dest",e),n.append("file",t),ct(`${Ae}/file`,{method:"POST",body:n,timeoutMs:6e4}).promise},moveFile:async(e,t)=>{const n=new FormData;return n.append("src",e),n.append("dest",t),ct(`${Ae}/move`,{method:"POST",body:n}).promise},deleteFiles:async e=>ct(`${Ae}/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:e})}).promise,exportIntent:async e=>{const t=new FormData;return t.append("path",e),ct(`${Ae}/export-intent`,{method:"POST",body:t}).promise},getViews:()=>ct(`${Ae}/views`).promise,saveViews:e=>ct(`${Ae}/views`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise};class lw{constructor(t=400){pn(this,"cache",new Map);pn(this,"maxSize");this.maxSize=t,typeof window<"u"&&window.addEventListener("beforeunload",()=>this.clear(),{once:!0})}get(t){const n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){for(this.cache.has(t)&&this.cache.delete(t);this.cache.size>=this.maxSize;){const r=this.cache.keys().next().value;if(r===void 0)break;const s=this.cache.get(r);if(this.cache.delete(r),s)try{URL.revokeObjectURL(s)}catch{}}this.cache.set(t,n)}clear(){for(const t of this.cache.values())try{URL.revokeObjectURL(t)}catch{}this.cache.clear()}}const Ta=new lw(400);function aw({path:e,name:t,onClick:n,selected:r,highlighted:s,displayW:i,displayH:o,ioRoot:l,isScrolling:a,priority:c}){const h=f.useRef(null),[d,v]=f.useState(()=>Ta.get(e)??null),[S,k]=f.useState(!1),[E,j]=f.useState(()=>!!d);return f.useEffect(()=>{const y=h.current;if(!y)return;const g=new IntersectionObserver(p=>{for(const m of p)m.target===y&&k(m.isIntersecting||m.intersectionRatio>0)},{root:l??null,rootMargin:"200px 0px",threshold:.01});return g.observe(y),()=>{g.unobserve(y),g.disconnect()}},[l]),f.useEffect(()=>{if(d||!(S&&!a||c))return;let y=!0;return he.getThumb(e).then(g=>{if(!y)return;const p=URL.createObjectURL(g);Ta.set(e,p),v(p)}).catch(()=>{}),()=>{y=!1}},[e,d,S,a,c]),f.useEffect(()=>{var g;if(!d){j(!1);return}const y=(g=h.current)==null?void 0:g.querySelector("img");y&&y.complete&&y.naturalWidth>0?j(!0):j(!1)},[d]),f.useEffect(()=>{v(Ta.get(e)??null)},[e]),u.jsx("div",{ref:h,className:`absolute inset-0 relative bg-hover border border-border rounded-lg overflow-hidden select-none ${r?"outline-2 outline-accent":""} ${s?"ring-2 ring-accent/60 animate-pulse":""} hover:outline hover:outline-1 hover:outline-accent`,onClick:n,children:d?u.jsx("img",{className:`w-full h-full object-cover block pointer-events-none select-none opacity-0 transition-opacity duration-[160ms] ${E?"opacity-100":""}`,src:d,alt:t,loading:"lazy",decoding:"async",onLoad:()=>j(!0),width:i?Math.round(i):void 0,height:o?Math.round(o):void 0}):null})}function Jr(e,t,n){let r=n.initialDeps??[],s,i=!0;function o(){var l,a,c;let h;n.key&&((l=n.debug)!=null&&l.call(n))&&(h=Date.now());const d=e();if(!(d.length!==r.length||d.some((k,E)=>r[E]!==k)))return s;r=d;let S;if(n.key&&((a=n.debug)!=null&&a.call(n))&&(S=Date.now()),s=t(...d),n.key&&((c=n.debug)!=null&&c.call(n))){const k=Math.round((Date.now()-h)*100)/100,E=Math.round((Date.now()-S)*100)/100,j=E/16,y=(g,p)=>{for(g=String(g);g.length<p;)g=" "+g;return g};console.info(`%c ${y(E,5)} /${y(k,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*j,120))}deg 100% 31%);`,n==null?void 0:n.key)}return n!=null&&n.onChange&&!(i&&n.skipInitialOnChange)&&n.onChange(s),i=!1,s}return o.updateDeps=l=>{r=l},o}function sh(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const uw=(e,t)=>Math.abs(e-t)<1.01,cw=(e,t,n)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,s),n)}},ih=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},dw=e=>e,fw=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},hw=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const s=o=>{const{width:l,height:a}=o;t({width:Math.round(l),height:Math.round(a)})};if(s(ih(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const a=o[0];if(a!=null&&a.borderBoxSize){const c=a.borderBoxSize[0];if(c){s({width:c.inlineSize,height:c.blockSize});return}}s(ih(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},oh={passive:!0},lh=typeof window>"u"?!0:"onscrollend"in window,pw=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&lh?()=>{}:cw(r,()=>{t(s,!1)},e.options.isScrollingResetDelay),o=h=>()=>{const{horizontal:d,isRtl:v}=e.options;s=d?n.scrollLeft*(v&&-1||1):n.scrollTop,i(),t(s,h)},l=o(!0),a=o(!1);a(),n.addEventListener("scroll",l,oh);const c=e.options.useScrollendEvent&&lh;return c&&n.addEventListener("scrollend",a,oh),()=>{n.removeEventListener("scroll",l),c&&n.removeEventListener("scrollend",a)}},mw=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},gw=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const o=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class vw{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:dw,rangeExtractor:fw,onChange:()=>{},measureElement:mw,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=Jr(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=n[o];if(s.has(l.lane))continue;const a=i.get(l.lane);if(a==null||l.end>a.end?i.set(l.lane,l):l.end<a.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=Jr(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,s,i,o,l)=>(this.prevLanes!==void 0&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=Jr(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l},a)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const v of this.laneAssignments.keys())v>=n&&this.laneAssignments.delete(v);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(v=>{this.itemSizeCache.set(v.key,v.size)}));const c=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const h=this.measurementsCache.slice(0,c),d=new Array(l).fill(void 0);for(let v=0;v<c;v++){const S=h[v];S&&(d[S.lane]=v)}for(let v=c;v<n;v++){const S=i(v),k=this.laneAssignments.get(v);let E,j;if(k!==void 0&&this.options.lanes>1){E=k;const m=d[E],C=m!==void 0?h[m]:void 0;j=C?C.end+this.options.gap:r+s}else{const m=this.options.lanes===1?h[v-1]:this.getFurthestMeasurement(h,v);j=m?m.end+this.options.gap:r+s,E=m?m.lane:v%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(v,E)}const y=a.get(S),g=typeof y=="number"?y:this.options.estimateSize(v),p=j+g;h[v]={index:v,start:j,size:g,end:p,key:S,lane:E},d[E]=v}return this.measurementsCache=h,h},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Jr(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?yw({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Jr(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,o)=>i===null||o===null?[]:n({startIndex:i,endIndex:o,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=Jr(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,o=n.length;i<o;i++){const l=n[i],a=r[l];s.push(a)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return sh(r[Ig(0,r.length-1,s=>sh(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(s.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const o=10,l=c=>{if(!this.targetWindow)return;const h=this.getOffsetForIndex(n,c);if(!h){console.warn("Failed to get offset for index:",n);return}const[d,v]=h;this._scrollToOffset(d,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const S=this.getScrollOffset(),k=this.getOffsetForIndex(n,v);if(!k){console.warn("Failed to get offset for index:",n);return}uw(k[0],S)||a(v)})},a=c=>{this.targetWindow&&(i++,i<o?this.targetWindow.requestAnimationFrame(()=>l(c)):console.warn(`Failed to scroll to index ${n} after ${o} attempts.`))};l(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}s=Math.max(...i.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const Ig=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function yw({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const s=e.length-1,i=a=>e[a].start;if(e.length<=r)return{startIndex:0,endIndex:s};let o=Ig(0,s,i,n),l=o;if(r===1)for(;l<s&&e[l].end<n+t;)l++;else if(r>1){const a=Array(r).fill(0);for(;l<s&&a.some(h=>h<n+t);){const h=e[l];a[h.lane]=h.end,l++}const c=Array(r).fill(n+t);for(;o>=0&&c.some(h=>h>=n);){const h=e[o];c[h.lane]=h.start,o--}o=Math.max(0,o-o%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const ah=typeof document<"u"?f.useLayoutEffect:f.useEffect;function xw(e){const t=f.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var o;i?nd.flushSync(t):t(),(o=e.onChange)==null||o.call(e,s,i)}},[r]=f.useState(()=>new vw(n));return r.setOptions(n),ah(()=>r._didMount(),[]),ah(()=>r._willUpdate()),r}function ww(e){return xw({observeElementRect:hw,observeElementOffset:pw,scrollToFn:gw,...e})}function Sw({containerW:e,gap:t,targetCell:n,aspect:r,captionH:s}){const i=Math.max(1,Math.floor((e+t)/(n+t))),o=(e-t*(i-1))/i,l=o*r.h/r.w,a=l+s+t;return{columns:i,cellW:o,mediaH:l,rowH:a}}const kw=1.333;function Cw({items:e,containerWidth:t,targetHeight:n,gap:r,captionH:s}){if(t<=0)return[];const i=[];let o=[],l=0;const a=(c,h)=>({index:i.length,height:h+s+r,imageH:h,items:c.map(d=>({item:d.item,displayW:d.aspect*h,displayH:h,originalIndex:d.originalIndex}))});for(let c=0;c<e.length;c++){const h=e[c],d=h.w>0&&h.h>0?h.w/h.h:kw;o.push({item:h,aspect:d,originalIndex:c}),l+=d;const v=(o.length-1)*r;if(l*n+v>=t){const k=(t-v)/l;i.push(a(o,k)),o=[],l=0}}return o.length>0&&i.push(a(o,n)),i}function Ew(e,t,n){return{mode:"adaptive",rows:Cw({items:t,containerWidth:e,targetHeight:n.targetCell,gap:n.gap,captionH:n.captionH})}}function bw(e,t,n){const{columns:r,cellW:s,mediaH:i,rowH:o}=Sw({containerW:e,gap:n.gap,targetCell:n.targetCell,aspect:n.aspect,captionH:n.captionH}),l=Math.ceil(t.length/Math.max(1,r));return{mode:"grid",columns:r,cellW:s,mediaH:i,rowH:o,rowCount:l}}function Nw(e,t,n){const[r,s]=f.useState(0);f.useLayoutEffect(()=>{const a=e.current;if(!a)return;const c=()=>{const d=getComputedStyle(a),v=a.clientWidth-parseFloat(d.paddingLeft)-parseFloat(d.paddingRight);s(v)},h=new ResizeObserver(c);return h.observe(a),c(),()=>h.disconnect()},[]);const i=f.useMemo(()=>n.viewMode==="adaptive"?Ew(r,t,n):bw(r,t,n),[r,t,n.viewMode,n.gap,n.targetCell,n.aspect.w,n.aspect.h,n.captionH]),o=ww({count:i.mode==="adaptive"?i.rows.length:i.rowCount,getScrollElement:()=>e.current,estimateSize:a=>i.mode==="adaptive"?i.rows[a].height:i.rowH,overscan:8}),l=o.getVirtualItems();return f.useEffect(()=>{o.measure()},[i,o]),{width:r,layout:i,rowVirtualizer:o,virtualRows:l}}function jw(e,t,n,r){if(!e.length)return null;const s=n?e.findIndex(l=>l.path===n):0,i=Math.max(1,t);let o=s;if(r.key==="ArrowRight"||r.key==="d")o=Math.min(e.length-1,s+1);else if(r.key==="ArrowLeft"||r.key==="a")o=Math.max(0,s-1);else if(r.key==="ArrowDown"||r.key==="s")o=Math.min(e.length-1,s+i);else if(r.key==="ArrowUp"||r.key==="w")o=Math.max(0,s-i);else return r.key==="Enter"&&n?"open":null;return o}const mn=12,Mw=44,Rw={w:4,h:3},Lw=350,Tw=120;function Iw({items:e,selected:t,restoreToSelectionToken:n,onSelectionChange:r,onOpenViewer:s,onContextMenuItem:i,highlight:o,recentlyUpdated:l,suppressSelectionHighlight:a=!1,viewMode:c="grid",targetCellSize:h=220,scrollRef:d,hideScrollbar:v=!1}){const[S,k]=f.useState(null),[E,j]=f.useState(null),[y,g]=f.useState(!1),[p,m]=f.useState(null),[C,L]=f.useState(null),T=f.useRef(null),R=f.useRef(null),_=f.useRef(null),b=d??_,P=f.useRef(null),ee=h,{width:re,layout:H,rowVirtualizer:Te,virtualRows:be}=Nw(b,e,{gap:mn,targetCell:ee,aspect:Rw,captionH:Mw,viewMode:c}),me=f.useMemo(()=>{const A=new Map;for(let J=0;J<e.length;J++)A.set(e[J].path,J);return A},[e]),O=f.useMemo(()=>{if(H.mode!=="adaptive")return null;const A=new Map;return H.rows.forEach((J,Z)=>{let M=0;J.items.forEach((F,G)=>{const W=M+F.displayW/2;A.set(F.item.path,{row:Z,center:W,order:G}),M+=F.displayW+mn})}),A},[H]);f.useEffect(()=>{if(!t.length)return;const A=t[0];p!==A&&m(A)},[t,p]);const B=f.useMemo(()=>{if(H.mode!=="adaptive")return null;let A=0;return H.rows.map(J=>{const Z=A;return A+=J.height,{start:Z,height:J.height}})},[H]),q=f.useRef(null),de=(A,J)=>{try{if(q.current!=null){try{cancelAnimationFrame(q.current)}catch{}q.current=null}const Z=A.scrollTop,M=J-Z;if(Math.abs(M)<1){A.scrollTop=J;return}const F=140,G=performance.now(),W=ge=>1-Math.pow(1-ge,3),ie=ge=>{const _e=Math.min(1,(ge-G)/F),xe=W(_e);A.scrollTop=Z+M*xe,_e<1?q.current=requestAnimationFrame(ie):q.current=null};q.current=requestAnimationFrame(ie)}catch{A.scrollTop=J}},[Q,le]=f.useState(!1);f.useEffect(()=>{const A=b.current;if(!A)return;let J=0;const Z=()=>{le(!0),window.clearTimeout(J),J=window.setTimeout(()=>le(!1),Tw)};return A.addEventListener("scroll",Z,{passive:!0}),()=>A.removeEventListener("scroll",Z)},[]);const se=()=>{R.current!=null&&(window.clearTimeout(R.current),R.current=null)},fe=()=>{if(se(),g(!1),k(null),T.current){try{URL.revokeObjectURL(T.current)}catch{}T.current=null}j(null)},ke=A=>{Q||(se(),k(A),g(!1),R.current=window.setTimeout(async()=>{R.current=null;try{const J=await he.getFile(A),Z=URL.createObjectURL(J);if(T.current)try{URL.revokeObjectURL(T.current)}catch{}T.current=Z,j(Z),g(!0)}catch{}},Lw))},Ie=H.mode==="grid"?H.columns:Math.max(1,Math.floor(re/(ee+mn))),ot=(A,J)=>{if(H.mode!=="adaptive")return null;const Z=H.rows[A];if(!Z)return null;let M=0,F=null;for(const G of Z.items){const W=M+G.displayW/2,ie=Math.abs(W-J);(!F||ie<F.dist)&&(F={path:G.item.path,dist:ie}),M+=G.displayW+mn}return F?F.path:null},je=(A,J)=>{var xe,at,we,et;if(!e.length)return null;const Z=A??e[0].path;if(H.mode!=="adaptive"){const Pe=jw(e,Ie,Z,J);return Pe==="open"||Pe==null?Pe:((xe=e[Pe])==null?void 0:xe.path)??null}const M=O==null?void 0:O.get(Z);if(!M)return Z;const F=me.get(Z)??0,G=J.key;if(G==="Enter")return"open";if(G==="ArrowRight"||G==="d")return((at=e[Math.min(e.length-1,F+1)])==null?void 0:at.path)??Z;if(G==="ArrowLeft"||G==="a")return((we=e[Math.max(0,F-1)])==null?void 0:we.path)??Z;const W=G==="ArrowDown"||G==="s"?1:G==="ArrowUp"||G==="w"?-1:0;if(W===0)return null;const ie=M.row+W;if(ie<0||ie>=(((et=H.rows)==null?void 0:et.length)??0))return Z;const ge=M.center;return ot(ie,ge)??Z},lt=A=>{var J;try{(J=document.getElementById(`cell-${encodeURIComponent(A)}`))==null||J.focus()}catch{}},pr=A=>{try{he.prefetchFile(A),he.prefetchThumb(A)}catch{}},mr=(A,J)=>{m(A),L(A);const Z=!!J.shiftKey,M=!!(J.ctrlKey||J.metaKey);if(Z){const F=P.current??p??t[0]??A,G=me.get(F)??e.findIndex(ie=>ie.path===F),W=me.get(A)??e.findIndex(ie=>ie.path===A);if(G!==-1&&W!==-1){const ie=Math.min(G,W),ge=Math.max(G,W),_e=e.slice(ie,ge+1).map(xe=>xe.path);if(M){const xe=new Set(t);for(const at of _e)xe.add(at);r(Array.from(xe))}else r(_e)}else r([A])}else if(M){const F=new Set(t);F.has(A)?F.delete(A):F.add(A),r(Array.from(F)),P.current=A}else r([A]),P.current=A;Q||pr(A),lt(A)},gr=(A,J)=>{var Z,M;try{const F=hn.has(A)&&t.length>0?t:[A];(Z=J.dataTransfer)==null||Z.setData("application/x-lenslet-paths",JSON.stringify(F)),J.dataTransfer&&(J.dataTransfer.effectAllowed="copyMove");try{document.body.classList.add("drag-active")}catch{}const W=J.currentTarget.querySelector(".cell-content img"),ie=document.createElement("div");ie.className="drag-ghost";const ge=document.createElement("img");ge.draggable=!1,ge.alt="drag",W&&W.src&&(ge.src=W.src),ie.appendChild(ge),document.body.appendChild(ie);const _e=ie.getBoundingClientRect().width||150;(M=J.dataTransfer)==null||M.setDragImage(ie,Math.round(_e/2),0);const xe=()=>{try{ie.remove()}catch{}try{document.body.classList.remove("drag-active")}catch{}window.removeEventListener("dragend",xe),window.removeEventListener("pointerup",xe),document.removeEventListener("visibilitychange",xe)};window.addEventListener("dragend",xe),window.addEventListener("pointerup",xe),document.addEventListener("visibilitychange",xe)}catch{}};f.useEffect(()=>{const A=b.current;if(!A)return;const J=Z=>{var xe,at,we;const M=je(C,Z);if(M==null)return;if(Z.preventDefault(),M==="open"){C&&s(C);return}const F=e.find(et=>et.path===M);if(!F)return;L(F.path),m(F.path),r([F.path]);try{P.current=F.path}catch{}const G=H.mode==="grid"?Math.floor((me.get(F.path)??0)/Math.max(1,H.columns)):((xe=O==null?void 0:O.get(F.path))==null?void 0:xe.row)??0,W=A.scrollTop,ie=W+A.clientHeight,ge=H.mode==="adaptive"?((at=B==null?void 0:B[G])==null?void 0:at.start)??0:G*H.rowH,_e=H.mode==="adaptive"?ge+(((we=B==null?void 0:B[G])==null?void 0:we.height)??0):ge+H.rowH;(ge<W||_e>ie)&&de(A,ge),lt(F.path)};return A.addEventListener("keydown",J),()=>{A.removeEventListener("keydown",J)}},[e,C,Ie,s,H,O,B,me]),f.useLayoutEffect(()=>{var G;const A=b.current;if(!A||!n||!t||t.length===0)return;const J=t[0],Z=me.get(J);if(Z==null||Z<0)return;let M=0;if(H.mode==="grid")M=Math.floor(Z/Math.max(1,H.columns));else{let W=0,ie=H.rows.length-1;for(;W<=ie;){const ge=W+ie>>1,_e=H.rows[ge];if(Z>=_e.items[0].originalIndex&&Z<=_e.items[_e.items.length-1].originalIndex){M=ge;break}Z<_e.items[0].originalIndex?ie=ge-1:W=ge+1}}const F=H.mode==="adaptive"?((G=B==null?void 0:B[M])==null?void 0:G.start)??0:M*H.rowH;try{A.scrollTop=F}catch{}},[n,H,B]);const hn=f.useMemo(()=>new Set(t),[t]),en=!!(S&&E&&y);f.useEffect(()=>{var A;(A=b.current)==null||A.focus()},[]),f.useEffect(()=>{var A;if(a){try{(A=b.current)==null||A.blur()}catch{}try{L(null)}catch{}}},[a]);const vr=C?`cell-${encodeURIComponent(C)}`:void 0;return u.jsx("div",{role:"grid","aria-label":"Gallery",className:`relative h-full overflow-auto p-3 outline-none ${v?"scrollbar-hidden":"scrollbar-thin"} ${en?"cursor-zoom-in":""}`,ref:b,tabIndex:0,"aria-activedescendant":vr,onMouseDown:()=>{var A;return(A=b.current)==null?void 0:A.focus()},style:{"--gap":`${mn}px`},children:u.jsxs("div",{className:"relative w-full",style:{height:Te.getTotalSize()},children:[be.map(A=>{var G;let J=[],Z={},M="";if(H.mode==="adaptive"){const W=H.rows[A.index];if(!W)return null;J=W.items,Z={height:W.height,transform:`translate3d(0, ${A.start}px, 0)`,display:"flex",gap:mn,paddingBottom:mn},M="absolute top-0 left-0 right-0 w-full will-change-transform"}else{const W=A.index*H.columns;J=e.slice(W,W+H.columns).map(ge=>({item:ge,displayW:H.cellW,displayH:H.mediaH})),Z={transform:`translate3d(0, ${A.start}px, 0)`,gridTemplateColumns:`repeat(${H.columns}, minmax(0, 1fr))`,gap:mn,paddingBottom:mn},M="absolute top-0 left-0 right-0 w-full grid will-change-transform"}const F=A.index===((G=be[0])==null?void 0:G.index);try{if(!Q)for(const{item:W}of J)try{he.prefetchThumb(W.path)}catch{}}catch{}return u.jsx("div",{className:M,role:"row",style:Z,children:J.map(({item:W,displayW:ie,displayH:ge})=>{const _e=!a&&(p===W.path||hn.has(W.path)),xe=(l==null?void 0:l.has(W.path))??!1,at=H.mode==="adaptive"?{width:ie}:{},we=H.mode==="adaptive"?{height:ge}:{},et=H.mode==="adaptive"?"relative rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group shrink-0":"relative aspect-[4/3] rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group";return u.jsxs("div",{id:`cell-${encodeURIComponent(W.path)}`,className:`relative min-w-0 ${_e?"outline outline-2 outline-accent outline-offset-2 rounded-[10px]":""}`,role:"gridcell","aria-selected":_e,tabIndex:C===W.path?0:-1,onFocus:()=>L(W.path),draggable:!0,style:at,onDragStart:Pe=>gr(W.path,Pe),onDragEnd:()=>{},onContextMenu:Pe=>{Pe.preventDefault(),Pe.stopPropagation(),i&&i(Pe,W.path)},children:[u.jsxs("div",{className:et,style:we,onMouseEnter:()=>{try{he.prefetchFile(W.path)}catch{}},onDoubleClick:()=>s(W.path),onMouseLeave:fe,children:[u.jsx("div",{className:"cell-content absolute inset-0",children:u.jsx(aw,{path:W.path,name:W.name,selected:_e,highlighted:xe,displayW:ie,displayH:ge,ioRoot:b.current,isScrolling:Q,priority:F,onClick:Pe=>mr(W.path,Pe)})}),u.jsx("div",{className:"absolute right-0 bottom-0 w-7 h-7 cursor-zoom-in",onMouseEnter:()=>ke(W.path),onMouseLeave:fe,children:u.jsx("div",{className:"absolute right-0 bottom-0 h-[18px] w-[18px] flex items-center justify-center text-text select-none opacity-0 group-hover:opacity-50 hover:opacity-100 transition-all duration-[140ms]",style:{clipPath:'path("M0 9C0 4.02944 4.02944 0 9 0H18V18H0V9Z")',background:"linear-gradient(135deg, rgba(18,18,18,0.9) 0%, rgba(34,34,34,0.9) 60%, rgba(22,22,22,0.9) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",borderLeft:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 1px 2px rgba(0,0,0,0.45)",backdropFilter:"blur(1px)"},children:u.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#d9dce2]","aria-hidden":"true",style:{transform:"translate(0px,0px)"},children:[u.jsx("circle",{cx:"11",cy:"11",r:"5.4"}),u.jsx("path",{d:"M15.5 15.5 L19 19"})]})})})]}),u.jsxs("div",{className:"flex flex-col items-center text-center gap-0 mt-1 px-0.5 text-white/90",children:[u.jsx("div",{className:"text-sm leading-[18px] thumb-filename line-clamp-2 break-words hyphens-auto text-center",title:W.name,children:(()=>{const Pe=(o||"").trim();if(!Pe)return W.name;const Yr=W.name,_n=Yr.toLowerCase().indexOf(Pe.toLowerCase());if(_n===-1)return W.name;const Vs=Yr.slice(0,_n),_t=Yr.slice(_n,_n+Pe.length),Ul=Yr.slice(_n+Pe.length);return u.jsxs(u.Fragment,{children:[Vs,u.jsx("mark",{className:"bg-accent/20 text-inherit rounded px-0.5",children:_t}),Ul]})})()}),u.jsxs("div",{className:"text-[11px] leading-[15px] opacity-70",children:[W.w,"  ",W.h]})]})]},W.path)})},A.key)}),S&&E&&y&&nd.createPortal(u.jsx("div",{className:"toolbar-offset fixed inset-0 z-[999] flex items-center justify-center pointer-events-none bg-black/20 opacity-100",children:u.jsx("img",{src:E,alt:"preview",className:"max-w-[80vw] max-h-[80vh] object-contain opacity-[0.98]"})}),document.body)]},`${c}-${Ie}`)})}const _w=48,Pw=[.1,.24,.5,.74,.9];function Ow({items:e,metricKey:t,scrollRef:n,sortDir:r}){const{orderedValues:s,numericValues:i}=f.useMemo(()=>{var b;const R=[],_=[];for(const P of e){const ee=(b=P.metrics)==null?void 0:b[t],re=ee==null||Number.isNaN(ee)?null:ee;R.push(re),re!=null&&_.push(re)}return{orderedValues:R,numericValues:_}},[e,t]),o=f.useMemo(()=>Fw(i,_w),[i]),l=f.useMemo(()=>Dw(i,Pw),[i]),[a,c]=f.useState(0),[h,d]=f.useState(null),[v,S]=f.useState(!1),k=f.useRef(null);if(f.useEffect(()=>{const R=n.current;if(!R)return;const _=()=>{const b=Math.max(1,R.scrollHeight-R.clientHeight),P=Nr(b>0?R.scrollTop/b:0);c(P)};return _(),R.addEventListener("scroll",_,{passive:!0}),window.addEventListener("resize",_),()=>{R.removeEventListener("scroll",_),window.removeEventListener("resize",_)}},[n,e.length]),f.useEffect(()=>{d(null)},[t,e.length]),!o)return null;const E={min:o.min,max:o.max},j=h!=null?ch(h):null,y=ch(a),g=r==="desc",p=f.useMemo(()=>h==null?null:$w(s,h),[s,h]);function m(R){d(Nr(R))}function C(){d(null)}function L(R){const _=n.current;if(!_)return;const b=Math.max(0,_.scrollHeight-_.clientHeight);_.scrollTop=Nr(R)*b}function T(R){var b;const _=(b=k.current)==null?void 0:b.getBoundingClientRect();return _?Nr((R.clientY-_.top)/_.height):null}return u.jsxs("div",{className:"absolute right-3 top-3 bottom-3 w-3 flex items-stretch pointer-events-auto",children:[u.jsxs("svg",{ref:k,viewBox:"0 0 10 100",preserveAspectRatio:"none",className:"w-full h-full rounded bg-surface-inset border border-border/60 cursor-ns-resize",onPointerDown:R=>{var b;R.preventDefault();const _=T(R);_!=null&&(S(!0),m(_),L(_),(b=k.current)==null||b.setPointerCapture(R.pointerId))},onPointerMove:R=>{const _=T(R);if(_==null){v||C();return}m(_),v&&L(_)},onPointerUp:R=>{var _;S(!1),(_=k.current)==null||_.releasePointerCapture(R.pointerId)},onPointerLeave:()=>{v||C()},children:[zw(o.bins,"#2e3a4b",{flip:g}),Aw(l,E,{flip:g}),uh(y,{color:"var(--accent)",strokeWidth:.8}),j!=null&&uh(j,{color:"rgba(255,255,255,0.75)",strokeWidth:.6,dashed:!0})]}),p!=null&&h!=null&&u.jsx("div",{className:"pointer-events-none absolute right-full mr-2 px-1.5 py-0.5 rounded border border-border bg-surface text-[10px] text-text shadow",style:{top:`calc(${(h*100).toFixed(2)}% - 8px)`},children:Bw(p)})]})}function Fw(e,t){if(!e.length)return null;const n=Math.min(...e);let r=Math.max(...e);n===r&&(r=n+1);const s=new Array(t).fill(0),i=t/(r-n);for(const o of e){const l=Math.max(0,Math.min(t-1,Math.floor((o-n)*i)));s[l]+=1}return{bins:s,min:n,max:r}}function Dw(e,t){if(!e.length)return[];const n=[...e].sort((s,i)=>s-i),r=n.length-1;return t.map(s=>{const i=r*s,o=Math.floor(i),l=Math.ceil(i);if(o===l)return n[o];const a=i-o;return n[o]+(n[l]-n[o])*a})}function zw(e,t,n){const r=Math.max(1,...e),s=100/e.length,i=(n==null?void 0:n.flip)??!1;return e.map((o,l)=>{const a=Math.max(.8,o/r*10),c=(i?e.length-1-l:l)*s;return u.jsx("rect",{x:10-a,y:c,width:a,height:Math.max(.2,s-.2),fill:t,opacity:.9},`sb-${l}`)})}function Aw(e,t,n){const r=(n==null?void 0:n.flip)??!1;return e.map((s,i)=>{const o=Uw(s,t,r),l=i===2;return u.jsx("line",{x1:0,y1:o,x2:10,y2:o,stroke:"rgba(255,255,255,0.45)",strokeWidth:l?.8:.5,opacity:l?.9:.6,vectorEffect:"non-scaling-stroke"},`qt-${i}-${s}`)})}function uh(e,t){return u.jsx("line",{x1:0,y1:e,x2:10,y2:e,stroke:t.color,strokeWidth:t.strokeWidth??.6,strokeDasharray:t.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function $w(e,t){if(!e.length)return null;const n=Math.round(Nr(t)*(e.length-1)),r=e[n];if(r!=null)return r;for(let s=1;s<e.length;s++){const i=n-s;if(i>=0&&e[i]!=null)return e[i];const o=n+s;if(o<e.length&&e[o]!=null)return e[o]}return null}function Uw(e,t,n){const r=t.max-t.min;if(r===0)return 0;const s=Nr((e-t.min)/r);return(n?1-s:s)*100}function ch(e){return Nr(e)*100}function Nr(e){return e<0?0:e>1?1:e}function Bw(e){if(e==null||Number.isNaN(e))return"-";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Xu(e,t){const[n,r]=f.useState(null),s=f.useRef(null);return f.useEffect(()=>{if(!e){if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}r(null);return}let i=!0;return e().then(o=>{if(!i)return;const l=URL.createObjectURL(o);if(s.current)try{URL.revokeObjectURL(s.current)}catch{}s.current=l,r(l)}).catch(()=>{}),()=>{i=!1}},t),f.useEffect(()=>()=>{if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}},[]),n}function Ww(){const[e,t]=f.useState(1),[n,r]=f.useState(0),[s,i]=f.useState(0),[o,l]=f.useState(1),[a,c]=f.useState(!1),[h,d]=f.useState(!1),[v,S]=f.useState(!1),k=f.useRef(null),E=f.useRef(null),j=()=>{const p=k.current,m=E.current;if(!p||!m||!m.naturalWidth||!m.naturalHeight)return;const C=p.getBoundingClientRect(),L=C.width/m.naturalWidth,T=C.height/m.naturalHeight,R=Math.min(1,Math.min(L,T));l(R);const _=m.naturalWidth*R,b=m.naturalHeight*R;r((C.width-_)/2),i((C.height-b)/2)};return f.useEffect(()=>{const p=k.current;if(!p)return;const m=new ResizeObserver(()=>{try{requestAnimationFrame(()=>j())}catch{j()}});return m.observe(p),()=>m.disconnect()},[]),{scale:e,setScale:t,tx:n,setTx:r,ty:s,setTy:i,base:o,setBase:l,ready:a,setReady:c,dragging:h,setDragging:d,visible:v,setVisible:S,containerRef:k,imgRef:E,fitAndCenter:j,handleWheel:p=>{p.preventDefault();const m=p.deltaY>0?-1:1,C=1.2,L=.05,T=8,R=k.current;if(!R)return;const _=R.getBoundingClientRect(),b=p.clientX-_.left,P=p.clientY-_.top;t(ee=>{const re=Math.min(T,Math.max(L,ee*Math.pow(C,m))),H=re/ee;return r(Te=>b-H*(b-Te)),i(Te=>P-H*(P-Te)),Number(re.toFixed(4))})},handleMouseDown:p=>{const m=k.current,C=E.current;if(!m||!C||p.target!==C)return;const T=m.getBoundingClientRect();if(p.clientX<T.left||p.clientX>T.right||p.clientY<T.top||p.clientY>T.bottom)return;p.preventDefault(),p.stopPropagation(),d(!0);const R=p.clientX,_=p.clientY,b=n,P=s,ee=H=>{r(b+(H.clientX-R)),i(P+(H.clientY-_))},re=()=>{window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",re),d(!1)};window.addEventListener("mousemove",ee),window.addEventListener("mouseup",re)}}}function Hw({path:e,onClose:t,onNavigate:n,onZoomChange:r,requestedZoomPercent:s,onZoomRequestConsumed:i}){const{scale:o,setScale:l,tx:a,setTx:c,ty:h,setTy:d,base:v,ready:S,setReady:k,dragging:E,visible:j,setVisible:y,containerRef:g,imgRef:p,fitAndCenter:m,handleWheel:C,handleMouseDown:L}=Ww(),T=Xu(()=>he.getFile(e),[e]),R=Xu(()=>he.getThumb(e),[e]),_=f.useCallback(()=>{y(!1),window.setTimeout(t,110)},[t,y]);return f.useEffect(()=>{requestAnimationFrame(()=>{var b;y(!0),(b=g.current)==null||b.focus()})},[e]),f.useEffect(()=>{const b=P=>{P.key==="Escape"?_():(P.key==="ArrowRight"||P.key==="d")&&n?n(1):(P.key==="ArrowLeft"||P.key==="a")&&n&&n(-1)};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[t,n]),f.useEffect(()=>{k(!1)},[T]),f.useEffect(()=>{r&&r(v*o*100)},[v,o,r]),f.useEffect(()=>{if(s==null)return;const b=g.current;if(!b){i&&i();return}const P=Math.max(.05,Math.min(8,s/100/Math.max(1e-6,v))),ee=b.getBoundingClientRect(),re=ee.width/2,H=ee.height/2;l(Te=>{const be=P/Te;return c(me=>re-be*(re-me)),d(me=>H-be*(H-me)),Number(P.toFixed(4))}),i&&i()},[s,v,i]),u.jsxs("div",{ref:g,role:"dialog","aria-modal":!0,"aria-label":"Image viewer",tabIndex:-1,className:`toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] flex items-start justify-start bg-panel z-viewer overflow-hidden transition-opacity duration-[110ms] ease-out cursor-grab focus:outline-none focus-visible:outline-none ${E?"cursor-grabbing select-none":""} ${j?"opacity-100":"opacity-0"}`,style:{outline:"none"},onClick:_,onWheel:C,onMouseDown:L,onKeyDown:b=>{b.key==="Tab"&&b.preventDefault()},children:[u.jsxs("button",{"aria-label":"Close",onClick:b=>{b.stopPropagation(),_()},className:"btn btn-sm absolute top-3 right-3 z-10",title:"Close (Esc)",children:[u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"M6 6l12 12"})]}),"Close"]}),R&&u.jsx("img",{src:R,alt:"thumb",className:"absolute top-0 left-0 max-w-none max-h-none object-contain pointer-events-none transition-opacity duration-[110ms] ease-out",draggable:!1,onDragStart:b=>b.preventDefault(),style:{transform:`translate(${a}px, ${h}px) scale(${v})`,transformOrigin:"0 0",opacity:S?0:.5,filter:"blur(0.25px)"}}),T&&u.jsx("img",{ref:p,src:T,alt:"viewer",className:"max-w-none max-h-none object-contain transition-opacity duration-[110ms] ease-out will-change-transform select-none",draggable:!1,onDragStart:b=>{b.preventDefault()},onLoad:b=>{m(),l(1);try{requestAnimationFrame(()=>k(!0))}catch{k(!0)}},onClick:b=>b.stopPropagation(),style:{transform:`translate(${a}px, ${h}px) scale(${v*o})`,transformOrigin:"0 0",opacity:S?.99:0,WebkitUserDrag:"none"}})]})}function zl(){const[e,t]=f.useState(ow());return f.useEffect(()=>iw(t),[]),e}const zi=e=>["item",e],Vw={v:1,tags:[],notes:"",version:1,updated_at:"",updated_by:"web"},Ht=new Map,zo=new Map,Ju=new Map,cd=new Map;let dh=0;const fn=new Map,ai=new Map,Qw=12e3,Zu=new Set,ec=new Set;let dd={state:"idle"},Ai=null,tc=0;function So(e){dd=e;for(const t of Zu)t(e)}function Nn(){const e=fn.size>0,t=Ht.size+zo.size+tc;if(e){So({state:"error",message:"Conflict detected"});return}if(Ai){So({state:"error",message:Ai});return}if(t>0){So({state:"syncing"});return}So({state:"idle"})}function fd(){let e=null;for(const t of Ju.values())e=e==null?t:Math.min(e,t);for(const t of cd.values())e=e==null?t:Math.min(e,t);return e}function vl(){const e=fd();for(const t of ec)t(e)}function yl(e){Ai=e,Nn()}function _g(){Ai&&(Ai=null,Nn())}function fh(e){tc=Math.max(0,tc+e),Nn()}function Kw(){dh+=1;const e=dh;return cd.set(e,Date.now()),vl(),e}function Gw(e){e!=null&&cd.delete(e)&&vl()}function Al(e){const t=ai.get(e);if(!t||!t.size)return;const n=fn.get(e)??null;for(const r of t)r(n)}function hh(e){return fn.get(e)??null}function $l(e){fn.delete(e)&&(Al(e),Nn())}function Yw(e,t){fn.set(e,t),Al(e),Nn()}function qw(e,t){const n=ai.get(e)??new Set;return n.add(t),ai.set(e,n),t(fn.get(e)??null),()=>{const r=ai.get(e);r&&(r.delete(t),r.size||ai.delete(e))}}function Xw(e){const[t,n]=f.useState(()=>e?hh(e):null);return f.useEffect(()=>{if(!e){n(null);return}return n(hh(e)),qw(e,n)},[e]),t}function Jw(e){return Zu.add(e),e(dd),()=>{Zu.delete(e)}}function Zw(){const[e,t]=f.useState(dd);return f.useEffect(()=>Jw(t),[]),e}function e1(e){return ec.add(e),e(fd()),()=>{ec.delete(e)}}function t1(){const[e,t]=f.useState(()=>fd()),[n,r]=f.useState(()=>e==null?null:Date.now()-e);return f.useEffect(()=>e1(t),[]),f.useEffect(()=>{if(e==null){r(null);return}r(Date.now()-e);const s=window.setInterval(()=>{r(Date.now()-e)},1e3);return()=>window.clearInterval(s)},[e]),n}function nc(e){const t={};return Object.prototype.hasOwnProperty.call(e,"star")&&(t.set_star=e.star??null),Object.prototype.hasOwnProperty.call(e,"notes")&&(t.set_notes=e.notes??""),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.set_tags=Array.isArray(e.tags)?e.tags:[]),t}function rc(e){var t,n;return e.set_star!==void 0||e.set_notes!==void 0||e.set_tags!==void 0||(((t=e.add_tags)==null?void 0:t.length)??0)>0||(((n=e.remove_tags)==null?void 0:n.length)??0)>0}function ni(e){const t=[],n=new Set;for(const r of e??[]){if(typeof r!="string")continue;const s=r.trim();!s||n.has(s)||(n.add(s),t.push(s))}return t}function n1(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}function r1(e,t){if(e.set_star!==void 0&&(t.star??null)!==e.set_star||e.set_notes!==void 0&&(t.notes??"")!==(e.set_notes??""))return!1;if(e.set_tags!==void 0){const r=ni(e.set_tags),s=ni(t.tags);return n1(r,s)}const n=ni(t.tags);for(const r of ni(e.add_tags))if(!n.includes(r))return!1;for(const r of ni(e.remove_tags))if(n.includes(r))return!1;return!0}function Pg(e,t,n){if(n instanceof ar&&n.status===409){const r=n.body;if(r!=null&&r.current)return Yw(e,{path:e,current:r.current,pending:t,receivedAt:new Date().toISOString()}),!0}return!1}function s1(e,t){const n=fn.get(e);if(n){if(r1(n.pending,t)){$l(e);return}fn.set(e,{...n,current:t}),Al(e),Nn()}}function i1(e){const t=zl();return ld({queryKey:zi(e),queryFn:()=>he.getSidecar(e),enabled:!!e,staleTime:3e4,gcTime:5*6e4,retry:2,refetchInterval:t?Qw:!1,refetchIntervalInBackground:t})}function o1(e){const t=Gr();return Dx({mutationFn:async({patch:n,baseVersion:r,idempotencyKey:s})=>{const i=nc(n);if(!rc(i))return t.getQueryData(zi(e))??Vw;const o={...i,base_version:r};try{return await he.patchSidecar(e,o,{idempotencyKey:s??Di("patch"),ifMatch:r})}catch(l){throw Pg(e,i,l),l}},retry:(n,r)=>r instanceof ar&&r.status===409?!1:n<2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),4e3),onMutate:()=>(_g(),fh(1),{inflightId:Kw()}),onSuccess:n=>{$l(e),t.setQueryData(zi(e),n)},onError:n=>{n instanceof ar&&n.status===409||(n instanceof ar?yl(n.message):yl("Failed to save"))},onSettled:(n,r,s,i)=>{fh(-1),Gw(i==null?void 0:i.inflightId)}})}const l1=6;async function ph(e,t){if(!e.length)return;let n=0;const r=[],s=async()=>{for(;n<e.length;){const o=n++,l=e[o];try{await Og(l,t)}catch(a){r.push({path:l,error:a}),console.error(`[bulkUpdateSidecars] Failed for ${l}:`,a)}}},i=Array.from({length:Math.min(l1,e.length)},()=>s());if(await Promise.all(i),r.length===e.length)throw new Error(`All ${e.length} sidecar updates failed`)}async function Og(e,t){const n=Ht.get(e)||{};Ht.set(e,{...n,...t}),_g(),Nn();const r=zo.get(e);if(r)return r;Ju.set(e,Date.now()),vl();const s=(async()=>{try{for(;Ht.has(e);){const i=Ht.get(e);if(!i)break;const o=nc(i);if(!rc(o)){Ht.get(e)===i&&Ht.delete(e);continue}let l=1;try{l=(await he.getSidecar(e)).version??1}catch{l=1}const a={...o,base_version:l};try{await he.patchSidecar(e,a,{idempotencyKey:Di("patch"),ifMatch:l}),$l(e),Ht.get(e)===i&&Ht.delete(e)}catch(c){if(Pg(e,o,c)){const d=Ht.get(e);if(d&&d!==i){const v=nc(d);if(rc(v)){const S=fn.get(e);S&&(fn.set(e,{...S,pending:v}),Al(e))}}Ht.delete(e)}else c instanceof ar?yl(c.message):yl("Failed to save");throw c}}}finally{zo.delete(e),Ju.delete(e),vl(),Nn()}})();return zo.set(e,s),Nn(),s}function Ia(e){const t=["B","KB","MB","GB","TB"];let n=0,r=e;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${r.toFixed(1)} ${t[n]}`}function _a(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function a1(e,t=28){if(e.length<=t)return e;const n=Math.max(4,Math.floor((t-1)/2));return`${e.slice(0,n)}${e.slice(-n)}`}const u1=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});function mh(e){if(!e)return null;const t=Date.parse(e);return Number.isFinite(t)?t:null}function gh(e,t=Date.now()){const n=Math.max(0,t-e),r=Math.max(1,Math.floor(n/1e3));if(r<60)return`${r} second${r===1?"":"s"} ago`;const s=Math.floor(r/60);if(s<60)return`${s} minute${s===1?"":"s"} ago`;const i=Math.floor(s/60);return`${i} hour${i===1?"":"s"} ago`}function vh(e){return u1.format(new Date(e))}function Fg(e){return!e||!(e instanceof HTMLElement)?!1:e.closest('input, textarea, [contenteditable="true"]')!==null}function Ao(e){if(Array.isArray(e))return e.map(Ao);if(e&&typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,Ao(n)]));if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")||t.startsWith('"')&&t.endsWith('"'))try{const r=JSON.parse(t);return Ao(r)}catch{return e}}return e}function Pa(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function c1(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function yh(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}function d1(e){const t=/(\"(\\u[a-fA-F0-9]{4}|\\[^u]|[^\\"])*\"(?:\s*:)?|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\btrue\b|\bfalse\b|\bnull\b)/g;let n="",r=0;for(const s of e.matchAll(t)){const i=s.index??0,o=s[0];n+=Pa(e.slice(r,i));let l="#cdd3dd";o.startsWith('"')&&o.trimEnd().endsWith(":")?l="#a7c4ff":o.startsWith('"')?l="#9ad4b5":/true|false|null/.test(o)?l="#c4b4f5":l="#d7c08c",n+=`<span style="color:${l}">${Pa(o)}</span>`,r=i+o.length}return n+=Pa(e.slice(r)),n}const f1=["overview","notes","metadata","basics"],xh="lenslet.inspector.sections",wh="lenslet.inspector.metricsExpanded",Oa=12,h1={overview:!0,notes:!0,metadata:!0,basics:!0};function ko({title:e,open:t,onToggle:n,actions:r,children:s,contentClassName:i}){const[o,l]=f.useState(t),[a,c]=f.useState(t?"open":"closed");return f.useEffect(()=>{if(t){l(!0);const d=window.requestAnimationFrame(()=>c("open"));return()=>window.cancelAnimationFrame(d)}c("closing");const h=window.setTimeout(()=>{l(!1),c("closed")},140);return()=>window.clearTimeout(h)},[t]),u.jsxs("div",{className:"border-b border-border",children:[u.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[u.jsxs("button",{type:"button",onClick:n,"aria-expanded":t,className:"flex items-center gap-2 text-xs uppercase tracking-wide text-muted hover:text-text transition-colors",children:[u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform ${t?"rotate-90":""}`,"aria-hidden":"true",children:u.jsx("path",{d:"m9 18 6-6-6-6"})}),u.jsx("span",{children:e})]}),r]}),o&&u.jsx("div",{className:"inspector-section-body","data-state":a,"aria-hidden":!t,children:u.jsx("div",{className:i??"px-3 pb-3",children:s})})]})}function p1({path:e,selectedPaths:t=[],items:n=[],onResize:r,onStarChanged:s,sortSpec:i}){const o=!!e,{data:l,isLoading:a}=i1(e??""),c=o1(e??""),h=Gr(),[d,v]=f.useState(h1),S=f.useCallback(M=>{v(F=>({...F,[M]:!F[M]}))},[]),[k,E]=f.useState(!1),[j,y]=f.useState(""),[g,p]=f.useState(""),[m,C]=f.useState(""),[L,T]=f.useState(null),[R,_]=f.useState("idle"),[b,P]=f.useState(!1),[ee,re]=f.useState(null),[H,Te]=f.useState({}),me=f.useMemo(()=>{const M=n.find(F=>F.path===e);return M&&M.star!==void 0?M.star:null},[n,e])??(l==null?void 0:l.star)??null,O=t.length>1,B=Xw(O?null:e),q={tags:!!(B!=null&&B.pending.set_tags),notes:(B==null?void 0:B.pending.set_notes)!==void 0,star:(B==null?void 0:B.pending.set_star)!==void 0},de=f.useMemo(()=>{const M=new Set(t);return n.filter(F=>M.has(F.path))},[n,t]),Q=f.useMemo(()=>de.reduce((M,F)=>M+(F.size||0),0),[de]);f.useEffect(()=>{l&&(y((l.tags||[]).join(", ")),p(l.notes||"")),C(""),T(null),_("idle"),P(!1)},[l==null?void 0:l.updated_at,e]);const le=f.useCallback(M=>{if(O&&t.length){ph(t,M);return}if(!e)return;const F=(l==null?void 0:l.version)??1;c.mutate({patch:M,baseVersion:F,idempotencyKey:Di("patch")})},[O,t,e,l==null?void 0:l.version,c]),se=f.useCallback(()=>{if(!B||!e)return;const M={};B.pending.set_tags!==void 0&&(M.tags=yh(j)),B.pending.set_notes!==void 0&&(M.notes=g),B.pending.set_star!==void 0&&(M.star=me??null);const F=B.current.version??1;c.mutate({patch:M,baseVersion:F,idempotencyKey:Di("patch")})},[B,e,j,g,me,c]),fe=f.useCallback(()=>{if(!B||!e)return;const M=B.current;y((M.tags||[]).join(", ")),p(M.notes||""),h.setQueryData(zi(e),M),$l(e),s==null||s([e],M.star??null)},[B,e,h,s]);f.useEffect(()=>{if(!e)return;const M=F=>{if(Fg(F.target))return;const G=F.key;if(!/^[0-5]$/.test(G))return;F.preventDefault();const W=G==="0"?null:Number(G);if(O&&t.length){le({star:W}),s==null||s(t,W);return}le({star:W}),s==null||s([e],W)};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[e,O,t,le,s]);const ke=Xu(e?()=>he.getThumb(e):null,[e]),Ie=e?e.split("/").pop()||e:"",ot=f.useMemo(()=>{var F;if(Ie.includes("."))return Ie.slice(Ie.lastIndexOf(".")+1).toUpperCase();const M=n.find(G=>G.path===e);return(F=M==null?void 0:M.type)!=null&&F.includes("/")?M.type.split("/")[1].toUpperCase():""},[Ie,n,e]),je=f.useMemo(()=>n.find(M=>M.path===e),[n,e]),lt=f.useMemo(()=>e?(je==null?void 0:je.source)??e:"",[je,e]),pr=f.useCallback(async()=>{if(e){_("loading"),T(null);try{const M=await he.getMetadata(e),F=Ao(M.meta),G=JSON.stringify(F,null,2);C(G),_("loaded")}catch(M){const F=M instanceof Error?M.message:"Failed to load metadata";C(F),T(F),_("error")}}},[e]),mr=f.useCallback(()=>{var M;m&&((M=navigator.clipboard)==null||M.writeText(m).then(()=>{P(!0),setTimeout(()=>P(!1),1200)}).catch(F=>{const G=F instanceof Error?F.message:"Copy failed";T(G)}))},[m]),gr=f.useMemo(()=>m?d1(m):"",[m]),hn=R==="loading"?"Loading metadata":m||"PNG metadata not loaded yet.",en=R==="loaded"&&!!m,vr=en?"h-48":"h-24",A=O?null:u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[m&&u.jsx("button",{className:"text-muted underline underline-offset-2 hover:text-text disabled:opacity-60 min-w-[48px] text-center",onClick:mr,disabled:!m,title:"Copy metadata",children:b?"Copied":"Copy"}),u.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[78px]",onClick:pr,disabled:!e||R==="loading",children:R==="loading"?"Loading":"Load meta"})]});f.useEffect(()=>{try{const M=localStorage.getItem(xh);if(!M)return;const F=JSON.parse(M);if(!F||typeof F!="object")return;const G={};for(const W of f1)typeof F[W]=="boolean"&&(G[W]=F[W]);Object.keys(G).length>0&&v(W=>({...W,...G}))}catch{}},[]),f.useEffect(()=>{try{localStorage.setItem(xh,JSON.stringify(d))}catch{}},[d]),f.useEffect(()=>{try{const M=localStorage.getItem(wh);M==="1"||M==="true"?E(!0):(M==="0"||M==="false")&&E(!1)}catch{}},[]),f.useEffect(()=>{try{localStorage.setItem(wh,k?"1":"0")}catch{}},[k]);const J=f.useCallback((M,F)=>{var G;F&&((G=navigator.clipboard)==null||G.writeText(F).then(()=>{re(M),setTimeout(()=>re(W=>W===M?null:W),1e3)}).catch(()=>{}))},[]),Z=f.useCallback((M,F)=>{if(F&&!H[M]){const G=F.offsetHeight;G&&Te(W=>W[M]?W:{...W,[M]:G})}},[H]);return o?u.jsxs("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:[!O&&u.jsx("div",{className:"p-3 border-b border-border flex justify-center",children:u.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border w-[220px] h-[160px] bg-panel select-none",children:[ke&&u.jsx("img",{src:ke,alt:"thumb",className:"block w-full h-full object-contain"}),!!ot&&u.jsx("div",{className:"absolute top-1.5 left-1.5 bg-surface border border-border text-text text-xs px-1.5 py-0.5 rounded-md select-none",children:ot})]})}),u.jsx(ko,{title:O?"Selection":"Item",open:d.overview,onToggle:()=>S("overview"),children:O?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"font-mono text-muted break-all",children:[t.length," files selected"]}),u.jsxs("div",{className:"font-mono text-muted break-all",children:["Total size: ",Ia(Q)]})]}):u.jsx("div",{className:"font-mono text-text break-all",title:Ie,children:Ie})}),u.jsxs(ko,{title:"Notes & Tags",open:d.notes,onToggle:()=>S("notes"),contentClassName:"px-3 pb-3 space-y-1.5",children:[!O&&B&&(q.tags||q.notes)&&u.jsxs("div",{className:"rounded-md border border-danger/40 bg-danger/10 text-danger text-xs px-2.5 py-2",children:[u.jsx("div",{className:"font-semibold",children:"Conflicting edits detected."}),u.jsx("div",{className:"text-[11px] text-muted mt-0.5",children:"Your changes were not saved because this item was updated elsewhere."}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsx("button",{className:"btn btn-sm",onClick:se,children:"Apply my changes again"}),u.jsx("button",{className:"btn btn-sm btn-ghost",onClick:fe,children:"Keep theirs"})]})]}),u.jsx("textarea",{className:"w-full bg-transparent text-text border border-border/60 rounded-md px-2 py-1 min-h-[32px] resize-y scrollbar-thin placeholder:text-muted focus:border-border",placeholder:"Add notes",value:g,onChange:M=>p(M.target.value),onBlur:()=>{le({notes:g})},"aria-label":O?"Notes for selected items":"Notes"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[11px] text-muted mb-1",children:O?"Tags (apply to all, comma-separated)":"Tags (comma-separated)"}),u.jsx("input",{className:"w-full h-9 bg-transparent text-text border border-border/60 rounded-md px-2 placeholder:text-muted focus:border-border",placeholder:"tag1, tag2",value:j,onChange:M=>y(M.target.value),onBlur:()=>{le({tags:yh(j)})},"aria-label":O?"Tags for selected items":"Tags"})]})]}),!O&&u.jsxs(ko,{title:"Metadata",open:d.metadata,onToggle:()=>S("metadata"),actions:A,children:[u.jsx("pre",{className:`bg-surface-inset text-[11px] font-mono text-muted border border-border rounded-lg p-2 ${vr} overflow-auto whitespace-pre-wrap leading-[1.3]`,children:en?u.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:gr}}):hn}),L&&u.jsx("div",{className:"text-[11px] text-danger mt-1 break-words",children:L})]}),u.jsxs(ko,{title:"Basics",open:d.basics,onToggle:()=>S("basics"),children:[u.jsxs("div",{className:"flex items-center gap-2 text-[12px] mb-1",role:"radiogroup","aria-label":"Star rating",children:[u.jsx("span",{className:"text-muted w-16 shrink-0",children:O?"Rating (all)":"Rating"}),u.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(M=>{const F=(me??0)>=M;return u.jsx("button",{className:`w-6 h-6 flex items-center justify-center rounded border border-border/60 bg-transparent text-[13px] ${F?"text-star-active":"text-star-inactive"} hover:border-border hover:text-star-hover transition-colors`,onClick:()=>{const G=me===M&&!O?null:M;O&&t.length?(s==null||s(t,G),ph(t,{star:G})):e&&(s==null||s([e],G),Og(e,{star:G}))},title:`${M} star${M>1?"s":""} (key ${M})`,"aria-label":`${M} star${M>1?"s":""}`,"aria-pressed":me===M,children:F?"":""},M)})})]}),!O&&B&&q.star&&u.jsxs("div",{className:"mt-2 rounded-md border border-danger/40 bg-danger/10 text-danger text-[11px] px-2 py-1 flex items-center justify-between gap-2",children:[u.jsx("span",{children:"Rating conflict."}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{className:"btn btn-sm",onClick:se,children:"Apply again"}),u.jsx("button",{className:"btn btn-sm btn-ghost",onClick:fe,children:"Keep theirs"})]})]}),!O&&je&&u.jsxs("div",{className:"text-[12px] space-y-1",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted w-20 shrink-0 cursor-pointer",onClick:()=>J("dimensions",`${je.w}${je.h}`),children:"Dimensions"}),u.jsx("span",{className:"font-mono text-text inline-block text-right min-w-[80px]",ref:M=>Z("dimensions",M),style:H.dimensions?{minHeight:H.dimensions}:void 0,children:ee==="dimensions"?"Copied":`${je.w}${je.h}`})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted w-20 shrink-0 cursor-pointer",onClick:()=>J("size",Ia(je.size)),children:"Size"}),u.jsx("span",{className:"font-mono text-text inline-block text-right min-w-[80px]",ref:M=>Z("size",M),style:H.size?{minHeight:H.size}:void 0,children:ee==="size"?"Copied":Ia(je.size)})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted w-20 shrink-0 cursor-pointer",onClick:()=>J("type",je.type),children:"Type"}),u.jsx("span",{className:"font-mono text-text break-all text-right inline-block min-w-[80px]",ref:M=>Z("type",M),style:H.type?{minHeight:H.type}:void 0,children:ee==="type"?"Copied":je.type})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted w-20 shrink-0 cursor-pointer",onClick:()=>lt&&J("source",lt),children:"Source"}),u.jsx("span",{className:"font-mono text-text break-all text-right max-w-[70%] inline-block min-w-[80px]",ref:M=>Z("source",M),style:H.source?{minHeight:H.source}:void 0,children:ee==="source"?"Copied":lt})]}),(()=>{const M=je.metrics||null;if(!M)return null;const F=Object.entries(M).filter(([,we])=>we!=null);if(!F.length)return null;const G=(i==null?void 0:i.kind)==="metric"?i.key:null,W=[...F].sort(([we],[et])=>we.localeCompare(et));let ie=W;if(G){const we=W.findIndex(([et])=>et===G);we>0&&(ie=[W[we],...W.slice(0,we),...W.slice(we+1)])}const ge=ie.length>Oa,xe=k||!ge?ie:ie.slice(0,Oa),at=ie.length-Oa;return u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"text-muted text-xs uppercase tracking-wide mb-1",children:"Metrics"}),u.jsxs("div",{className:"space-y-1",children:[xe.map(([we,et])=>{const Pe=G===we;return u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:`w-24 shrink-0 ${Pe?"text-accent font-medium":"text-muted"}`,children:we}),u.jsx("span",{className:`font-mono text-right ${Pe?"text-accent font-medium":"text-text"}`,children:c1(et)})]},we)}),ge&&u.jsx("button",{type:"button",className:"text-[11px] text-muted underline underline-offset-2 hover:text-text",onClick:()=>E(we=>!we),"aria-expanded":k,children:k?"Show less":`+${at} more`})]})]})})()]})]}),u.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 right-[calc(var(--right)-3px)] hover:bg-accent/20",onMouseDown:r})]}):u.jsx("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:u.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 right-[calc(var(--right)-3px)] hover:bg-accent/20",onMouseDown:r})})}const m1=e=>["folder",e],g1=15e3;function Dg(e){const t=zl();return ld({queryKey:m1(e),queryFn:()=>he.getFolder(e),staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),5e3),refetchOnWindowFocus:!1,refetchInterval:t?g1:!1,refetchIntervalInBackground:t})}const v1=(e,t)=>["search",e,t],y1=2e4;function x1(e,t){const n=zl();return ld({enabled:!!e.trim(),queryKey:v1(e,t),queryFn:()=>he.search(e,t),staleTime:3e3,gcTime:6e4,placeholderData:r=>r,retry:1,refetchInterval:n?y1:!1,refetchIntervalInBackground:n})}const w1=/^[\/@a-zA-Z0-9._\-\/]{1,512}$/;function an(e){try{const t=decodeURI(e||""),r=(t.startsWith("/")?t:`/${t}`).replace(/\/{2,}/g,"/"),s=r.length>1?r.replace(/\/$/,""):r;return w1.test(s)?s:"/"}catch{return"/"}}function Sh(){return(window.location.hash||"").replace(/^#/,"")}function S1(e){const t=an(e),n=`#${encodeURI(t)}`;window.location.hash!==n&&(window.location.hash=n)}function hd(e,t){const n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,""),s=[n,r].filter(Boolean).join("/");return s.startsWith("/")?s:`/${s}`}function k1(e){const n=an(e).split("/").filter(Boolean);return n.length<=1?"/":"/"+n.slice(0,-1).join("/")}function C1(e){return e.endsWith("/_trash_")}const E1=new Set([0,1,2,3,4,5]),pd=new Set(["<","<=",">",">="]),b1=/^\d{4}-\d{2}-\d{2}$/;function N1(e,t){return!t||!t.and.length?e:e.filter(n=>j1(n,t.and))}function j1(e,t){for(const n of t)if(!M1(e,n))return!1;return!0}function M1(e,t){var n,r,s,i,o,l,a;if("stars"in t){const c=t.stars;if(!c||!c.length)return!0;const h=e.star??0;return c.includes(h)}if("starsIn"in t){const c=t.starsIn.values;if(!c||!c.length)return!0;const h=e.star??0;return c.includes(h)}if("starsNotIn"in t){const c=t.starsNotIn.values;if(!c||!c.length)return!0;const h=e.star??0;return!c.includes(h)}if("nameContains"in t){const c=(n=t.nameContains.value)==null?void 0:n.trim();return c?(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("nameNotContains"in t){const c=(r=t.nameNotContains.value)==null?void 0:r.trim();return c?!(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("commentsContains"in t){const c=(s=t.commentsContains.value)==null?void 0:s.trim();if(!c)return!0;const h=e.comments??"";return h?h.toLowerCase().includes(c.toLowerCase()):!1}if("commentsNotContains"in t){const c=(i=t.commentsNotContains.value)==null?void 0:i.trim();if(!c)return!0;const h=e.comments??"";return h?!h.toLowerCase().includes(c.toLowerCase()):!1}if("urlContains"in t){const c=(o=t.urlContains.value)==null?void 0:o.trim();if(!c)return!0;const h=e.source??e.url??"";return h?h.toLowerCase().includes(c.toLowerCase()):!1}if("urlNotContains"in t){const c=(l=t.urlNotContains.value)==null?void 0:l.trim();if(!c)return!0;const h=e.source??e.url??"";return h?!h.toLowerCase().includes(c.toLowerCase()):!1}if("dateRange"in t){const{from:c,to:h}=t.dateRange;if(!c&&!h)return!0;if(!e.addedAt)return!1;const d=Date.parse(e.addedAt);if(Number.isNaN(d))return!1;const v=Eh(c,!1),S=Eh(h,!0);return!(v!=null&&d<v||S!=null&&d>S)}if("widthCompare"in t){const{op:c,value:h}=t.widthCompare;if(!Number.isFinite(h))return!0;const d=e.w;return!Number.isFinite(d)||d<=0?!1:bh(d,c,h)}if("heightCompare"in t){const{op:c,value:h}=t.heightCompare;if(!Number.isFinite(h))return!0;const d=e.h;return!Number.isFinite(d)||d<=0?!1:bh(d,c,h)}if("metricRange"in t){const{key:c,min:h,max:d}=t.metricRange,v=(a=e.metrics)==null?void 0:a[c];return!(v==null||v<h||v>d)}return!0}function sc(e){if(!e||typeof e!="object")return null;const t=e.and;if(!Array.isArray(t))return null;const n=[];for(const r of t){const s=W1(r);s&&n.push(s)}return{and:n}}function kh(e){var r;const t=e.and.find(s=>"stars"in s),n=e.and.find(s=>"starsIn"in s);return(r=n==null?void 0:n.starsIn)!=null&&r.values?n.starsIn.values:(t==null?void 0:t.stars)??[]}function Fa(e,t){return zg(e,t)}function R1(e){var n;const t=e.and.find(r=>"starsIn"in r);return((n=t==null?void 0:t.starsIn)==null?void 0:n.values)??[]}function zg(e,t){const n=yi(t),r=e.and.filter(s=>!("starsIn"in s)&&!("stars"in s));return n.length?{and:[{starsIn:{values:n}},...r]}:{and:r}}function L1(e){var n;const t=e.and.find(r=>"starsNotIn"in r);return((n=t==null?void 0:t.starsNotIn)==null?void 0:n.values)??[]}function Ag(e,t){const n=yi(t),r=e.and.filter(s=>!("starsNotIn"in s));return n.length?{and:[{starsNotIn:{values:n}},...r]}:{and:r}}function T1(e){var n;const t=e.and.find(r=>"nameContains"in r);return((n=t==null?void 0:t.nameContains)==null?void 0:n.value)??null}function $g(e,t){const n=zt(t),r=e.and.filter(s=>!("nameContains"in s));return n?{and:[{nameContains:{value:n}},...r]}:{and:r}}function I1(e){var n;const t=e.and.find(r=>"nameNotContains"in r);return((n=t==null?void 0:t.nameNotContains)==null?void 0:n.value)??null}function Ug(e,t){const n=zt(t),r=e.and.filter(s=>!("nameNotContains"in s));return n?{and:[{nameNotContains:{value:n}},...r]}:{and:r}}function _1(e){var n;const t=e.and.find(r=>"commentsContains"in r);return((n=t==null?void 0:t.commentsContains)==null?void 0:n.value)??null}function Bg(e,t){const n=zt(t),r=e.and.filter(s=>!("commentsContains"in s));return n?{and:[{commentsContains:{value:n}},...r]}:{and:r}}function P1(e){var n;const t=e.and.find(r=>"commentsNotContains"in r);return((n=t==null?void 0:t.commentsNotContains)==null?void 0:n.value)??null}function Wg(e,t){const n=zt(t),r=e.and.filter(s=>!("commentsNotContains"in s));return n?{and:[{commentsNotContains:{value:n}},...r]}:{and:r}}function O1(e){var n;const t=e.and.find(r=>"urlContains"in r);return((n=t==null?void 0:t.urlContains)==null?void 0:n.value)??null}function Hg(e,t){const n=zt(t),r=e.and.filter(s=>!("urlContains"in s));return n?{and:[{urlContains:{value:n}},...r]}:{and:r}}function F1(e){var n;const t=e.and.find(r=>"urlNotContains"in r);return((n=t==null?void 0:t.urlNotContains)==null?void 0:n.value)??null}function Vg(e,t){const n=zt(t),r=e.and.filter(s=>!("urlNotContains"in s));return n?{and:[{urlNotContains:{value:n}},...r]}:{and:r}}function D1(e){const t=e.and.find(n=>"dateRange"in n);return(t==null?void 0:t.dateRange)??null}function ic(e,t){const n=xl((t==null?void 0:t.from)??null),r=xl((t==null?void 0:t.to)??null),s=e.and.filter(i=>!("dateRange"in i));return!n&&!r?{and:s}:{and:[{dateRange:{...n?{from:n}:{},...r?{to:r}:{}}},...s]}}function z1(e){const t=e.and.find(n=>"widthCompare"in n);return(t==null?void 0:t.widthCompare)??null}function $o(e,t){const n=e.and.filter(r=>!("widthCompare"in r));return!t||!Number.isFinite(t.value)||!pd.has(t.op)?{and:n}:{and:[{widthCompare:{op:t.op,value:t.value}},...n]}}function A1(e){const t=e.and.find(n=>"heightCompare"in n);return(t==null?void 0:t.heightCompare)??null}function Uo(e,t){const n=e.and.filter(r=>!("heightCompare"in r));return!t||!Number.isFinite(t.value)||!pd.has(t.op)?{and:n}:{and:[{heightCompare:{op:t.op,value:t.value}},...n]}}function $1(e,t){const n=e.and.find(r=>"metricRange"in r&&r.metricRange.key===t);return(n==null?void 0:n.metricRange)??null}function U1(e,t,n){const r=e.and.filter(s=>!("metricRange"in s&&s.metricRange.key===t));return n?{and:[{metricRange:{key:t,min:n.min,max:n.max}},...r]}:{and:r}}function B1(e){const t=sc(e);return t?t.and.length:0}function W1(e){var t,n,r,s,i,o,l,a;if(!e||typeof e!="object")return null;if("stars"in e){const c=yi(e.stars);return c.length?{starsIn:{values:c}}:null}if("starsIn"in e){const c=yi((t=e.starsIn)==null?void 0:t.values);return c.length?{starsIn:{values:c}}:null}if("starsNotIn"in e){const c=yi((n=e.starsNotIn)==null?void 0:n.values);return c.length?{starsNotIn:{values:c}}:null}if("nameContains"in e){const c=zt((r=e.nameContains)==null?void 0:r.value);return c?{nameContains:{value:c}}:null}if("nameNotContains"in e){const c=zt((s=e.nameNotContains)==null?void 0:s.value);return c?{nameNotContains:{value:c}}:null}if("commentsContains"in e){const c=zt((i=e.commentsContains)==null?void 0:i.value);return c?{commentsContains:{value:c}}:null}if("commentsNotContains"in e){const c=zt((o=e.commentsNotContains)==null?void 0:o.value);return c?{commentsNotContains:{value:c}}:null}if("urlContains"in e){const c=zt((l=e.urlContains)==null?void 0:l.value);return c?{urlContains:{value:c}}:null}if("urlNotContains"in e){const c=zt((a=e.urlNotContains)==null?void 0:a.value);return c?{urlNotContains:{value:c}}:null}if("dateRange"in e){const c=e.dateRange,h=xl((c==null?void 0:c.from)??null),d=xl((c==null?void 0:c.to)??null);return!h&&!d?null:{dateRange:{...h?{from:h}:{},...d?{to:d}:{}}}}if("widthCompare"in e){const c=e.widthCompare,h=Ch(c==null?void 0:c.op,c==null?void 0:c.value);return h?{widthCompare:h}:null}if("heightCompare"in e){const c=e.heightCompare,h=Ch(c==null?void 0:c.op,c==null?void 0:c.value);return h?{heightCompare:h}:null}if("metricRange"in e){const c=e.metricRange;if(!c||typeof c!="object")return null;const h=typeof c.key=="string"?c.key:"",d=oc(c.min),v=oc(c.max);return!h||d==null||v==null||d>v?null:{metricRange:{key:h,min:d,max:v}}}return null}function yi(e){if(!Array.isArray(e))return[];const t=[],n=new Set;for(const r of e){const s=typeof r=="number"?r:typeof r=="string"?Number(r):NaN;!Number.isInteger(s)||!E1.has(s)||n.has(s)||(n.add(s),t.push(s))}return t}function zt(e){if(typeof e!="string")return null;const t=e.trim();return t||null}function xl(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=Date.parse(t);return Number.isNaN(n)?null:t}function Ch(e,t){if(typeof e!="string"||!pd.has(e))return null;const n=oc(t);return n==null?null:{op:e,value:n}}function Eh(e,t){if(!e)return null;const n=e.trim();if(!n)return null;const r=Date.parse(n);return Number.isNaN(r)?null:t&&b1.test(n)?r+24*60*60*1e3-1:r}function bh(e,t,n){switch(t){case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;default:return!0}}function oc(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function Nh(e){return e.addedAt?Date.parse(e.addedAt):0}function wl(e,t){return e.name.localeCompare(t.name)}function H1(e,t){const n=Nh(e),r=Nh(t);return n===r?wl(e,t):n-r}function V1(e){return(t,n)=>{var i,o;const r=(i=t.metrics)==null?void 0:i[e],s=(o=n.metrics)==null?void 0:o[e];return r==null&&s==null?wl(t,n):r==null?1:s==null?-1:r===s?wl(t,n):r-s}}function Q1(e,t){return N1(e,t)}function K1(e){let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function G1(e,t){const n=K1(t||1),r=[...e];for(let s=r.length-1;s>0;s-=1){const i=Math.floor(n()*(s+1));[r[s],r[i]]=[r[i],r[s]]}return r}function Y1(e,t,n){if(t.kind==="builtin"&&t.key==="random"){const i=n??Date.now();return G1(e,i)}let r=H1;t.kind==="metric"?r=V1(t.key):t.key==="name"&&(r=wl);const s=[...e].sort(r);return t.dir==="desc"?s.reverse():s}function q1(e){const[t,n]=f.useState(250),[r,s]=f.useState(240),i=f.useRef(t),o=f.useRef(r);return f.useEffect(()=>{i.current=t},[t]),f.useEffect(()=>{o.current=r},[r]),f.useEffect(()=>{try{const c=window.localStorage,h=Number(c.getItem("leftW"));Number.isFinite(h)&&h>0&&n(h);const d=Number(c.getItem("rightW"));Number.isFinite(d)&&d>0&&s(d)}catch{}},[]),{leftW:t,rightW:r,onResizeLeft:c=>{c.preventDefault();const h=e.current;if(!h)return;const d=h.getBoundingClientRect(),v=k=>{const E=k.clientX-d.left,j=200,y=Math.max(j,d.width-o.current-200),g=Math.min(Math.max(E,j),y);n(g)},S=()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",S);try{window.localStorage.setItem("leftW",String(i.current))}catch{}};window.addEventListener("mousemove",v),window.addEventListener("mouseup",S)},onResizeRight:c=>{c.preventDefault();const h=e.current;if(!h)return;const d=h.getBoundingClientRect(),v=k=>{const E=k.clientX-d.left,j=d.width-E,y=240,g=Math.max(y,d.width-i.current-200),p=Math.min(Math.max(j,y),g);s(p)},S=()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",S);try{window.localStorage.setItem("rightW",String(o.current))}catch{}};window.addEventListener("mousemove",v),window.addEventListener("mouseup",S)}}}function X1({x:e,y:t,items:n}){return u.jsx("div",{className:"dropdown-panel fixed",role:"menu",style:{left:e,top:t,minWidth:180},onClick:r=>r.stopPropagation(),children:n.map((r,s)=>u.jsxs("button",{className:`dropdown-item w-full ${r.danger?"text-danger hover:text-danger":""}`,role:"menuitem","aria-disabled":r.disabled,disabled:r.disabled,onClick:i=>{i.stopPropagation(),r.disabled||r.onClick()},children:[r.icon&&u.jsx("span",{className:"shrink-0",children:r.icon}),u.jsx("span",{children:r.label})]},s))})}function jh(e){return JSON.stringify(e,null,2)}function Mh(e){const t=s=>'"'+s.replaceAll('"','""')+'"',n="path,folder,name,star,type,size,width,height,tags,notes",r=e.map(s=>{const i=(s.tags||[]).join(" "),o=s.notes||"";return[s.path,s.folder,s.name,String(s.star??""),s.type??"",s.size??"",s.width??"",s.height??"",i,o].map(l=>t(String(l))).join(",")});return[n,...r].join(`
`)}function Da(e){return e.map(t=>{const n=t.path.split("/").filter(Boolean);n.pop();const r=n.length?`/${n.join("/")}`:"/";return{path:t.path,folder:r,name:t.name,star:t.star??null,type:t.type,size:t.size,width:t.w,height:t.h}})}function J1(e,t=250){const[n,r]=Wo.useState(e);return Wo.useEffect(()=>{const s=window.setTimeout(()=>r(e),Math.max(0,t));return()=>window.clearTimeout(s)},[e,t]),n}const Qg="application/x-lenslet-paths",Z1='[role="treeitem"].drop-target';function Rh(e){var n;return Array.from(((n=e.dataTransfer)==null?void 0:n.types)||[]).includes(Qg)}function eS(e){document.querySelectorAll(Z1).forEach(t=>{t!==e&&t.classList.remove("drop-target")})}function Lh(e){eS(e),e.classList.add("drop-target")}function Th(e){return e.startsWith("/")?e:`/${e}`}function tS({path:e,isLeaf:t}){const n=Gr(),r=f.useCallback(l=>{Rh(l)&&(l.preventDefault(),t&&Lh(l.currentTarget))},[t]),s=f.useCallback(l=>{!t||!Rh(l)||(l.preventDefault(),Lh(l.currentTarget))},[t]),i=f.useCallback(l=>{const a=l.currentTarget,c=document.elementFromPoint(l.clientX,l.clientY);c&&a.contains(c)||a.classList.remove("drop-target")},[]),o=f.useCallback(async l=>{const a=l.dataTransfer;if(!a)return;l.preventDefault(),l.currentTarget.classList.remove("drop-target");const c=a.getData(Qg),d=(c?JSON.parse(c):[]).filter(Boolean);if(!d.length)return;let v=d[0].split("/").slice(0,-1).join("/")||"/";v=Th(v);const S=Th(e);try{for(const k of d)await he.moveFile(k,S);n.invalidateQueries({queryKey:["folder",v]}),n.invalidateQueries({queryKey:["folder",S]}),n.setQueryData(["folder",v],k=>!k||!Array.isArray(k.items)?k:{...k,items:k.items.filter(E=>!d.includes(E.path))})}catch{}},[e,n]);return{onDragOver:r,onDragEnter:s,onDragLeave:i,onDrop:o}}const nS='[role="tree"] [role="treeitem"]';function rS(){return Array.from(document.querySelectorAll(nS))}function sS(e,t){var i;const n=rS(),r=n.findIndex(o=>o===e);if(r===-1)return;let s=r;t==="ArrowDown"?s=Math.min(n.length-1,r+1):t==="ArrowUp"?s=Math.max(0,r-1):t==="Home"?s=0:t==="End"&&(s=n.length-1),(i=n[s])==null||i.focus()}function iS({path:e,isLeaf:t,isExpanded:n,setExpanded:r,onOpen:s}){return f.useCallback(i=>{if(i.key==="Enter"){i.preventDefault(),s(e);return}if(i.key==="ArrowRight"){!t&&!n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.add(e),l}));return}if(i.key==="ArrowLeft"){!t&&n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.delete(e),l}));return}(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="Home"||i.key==="End")&&(i.preventDefault(),sS(i.currentTarget,i.key))},[e,t,n,r,s])}function oS({current:e,roots:t,data:n,onOpen:r,onResize:s,onContextMenu:i,className:o,showResizeHandle:l=!0}){const[a,c]=f.useState(new Set(["/"])),h=f.useRef(new Map),d=f.useRef(new Map),v=f.useCallback(async(k,E)=>{const j=an(k||"/"),y=h.current,g=d.current,p=y.get(j);if(p!==void 0)return p;const m=g.get(j);if(m)return m;const C=(async()=>{let L=0;const T=new Set,R=[{path:j,index:E}];for(;R.length;){const _=R.pop(),{path:b,index:P}=_;if(T.has(b))continue;T.add(b);let ee=P;if(!ee)try{ee=await he.getFolder(b)}catch(re){console.warn(`Failed to count folder ${b}:`,re);continue}L+=ee.items.length;for(const re of ee.dirs)re.kind==="branch"&&R.push({path:hd(b,re.name)})}return y.set(j,L),g.delete(j),L})();return g.set(j,C),C},[]);f.useEffect(()=>{const k=e.split("/").filter(Boolean),E=["/"];let j="";for(const y of k)j=j?`${j}/${y}`:`/${y}`,E.push(j);c(y=>{const g=new Set(y);for(const p of E)g.add(p);return g})},[e]);const S=o??"h-full overflow-auto bg-panel scrollbar-thin";return u.jsxs("div",{className:S,children:[u.jsx("div",{className:"p-1",role:"tree","aria-label":"Folders",children:t.map(k=>u.jsx(Kg,{path:k.path,label:k.label,depth:0,current:e,expanded:a,setExpanded:c,onOpen:r,onContextMenu:i,initial:n,getSubtreeCount:v},k.path))}),l&&u.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 left-[calc(var(--left)-3px)] hover:bg-accent/20",onMouseDown:s})]})}function Kg({path:e,label:t,depth:n,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,initial:a,getSubtreeCount:c}){var T,R;const h=s.has(e),{data:d}=Dg(e),v=a&&e===a.path?a:d,S=r===e,k=(((T=v==null?void 0:v.dirs)==null?void 0:T.length)??0)===0,[E,j]=f.useState(v?v.items.length:null),y=iS({path:e,isLeaf:k,isExpanded:h,setExpanded:i,onOpen:o}),{onDragOver:g,onDragEnter:p,onDragLeave:m,onDrop:C}=tS({path:e,isLeaf:k}),L=_=>{_.stopPropagation(),i(b=>{const P=new Set(b);return P.has(e)?P.delete(e):P.add(e),P})};return f.useEffect(()=>{let _=!1;if(!v){j(null);return}return j(v.items.length),c(e,v).then(b=>{_||j(b)}).catch(b=>{_||console.warn(`Failed to compute subtree count for ${e}:`,b)}),()=>{_=!0}},[v,e,c]),u.jsxs("div",{children:[u.jsxs("div",{className:`flex items-center gap-1.5 py-0.5 px-2 rounded-md cursor-pointer min-h-[28px] outline-none transition-colors duration-75 ${S?"bg-accent/20 text-accent font-medium":"hover:bg-white/5 text-text"}`,role:"treeitem","aria-level":n+1,"aria-expanded":k?void 0:h,"aria-selected":S,tabIndex:S?0:-1,style:{paddingLeft:8+n*14},onClick:()=>o(e),onContextMenu:_=>{_.preventDefault(),_.stopPropagation(),l&&l(_,e)},onKeyDown:y,onDragOver:g,onDragEnter:p,onDragLeave:m,onDrop:C,children:[u.jsx("span",{className:"w-4 text-center opacity-60 hover:opacity-100 text-[10px]",onClick:L,children:h?"":""}),u.jsx("span",{className:"flex-1 overflow-hidden truncate text-sm",title:t,children:a1(t,28)}),E!==null&&u.jsx("span",{className:"text-[10px] opacity-50 bg-white/5 border border-white/5 rounded px-1.5 min-w-[24px] text-center",children:E})]}),h&&((R=v==null?void 0:v.dirs)==null?void 0:R.map(_=>u.jsx(Kg,{path:hd(e,_.name),label:_.name,depth:n+1,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,getSubtreeCount:c},_.name)))]})}const jr=40,lS=12,Ih=[5,4,3,2,1],_h=["<","<=",">",">="];function aS({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l,onChangeFilters:a}){const c=r&&r.length?u.jsx(uS,{selectedItems:r,metricKeys:n}):null,h=u.jsx(cS,{filters:o,onChangeFilters:a});return n.length?u.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,u.jsx(dS,{items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}),h]}):u.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,h,u.jsx("div",{className:"p-4 text-sm text-muted",children:"No metrics found in this dataset."})]})}function uS({selectedItems:e,metricKeys:t}){const n=f.useMemo(()=>{if(!e.length)return null;const a=new Map;for(const d of e){const v=d.metrics;if(v)for(const[S,k]of Object.entries(v)){if(k==null||Number.isNaN(k))continue;const E=a.get(S);E?E.push(k):a.set(S,[k])}}return a.size?{entries:(t.length?t.filter(d=>a.has(d)):Array.from(a.keys()).sort()).map(d=>{const v=a.get(d)??[],S=Math.min(...v),k=Math.max(...v),E=v.reduce((j,y)=>j+y,0)/Math.max(1,v.length);return{key:d,value:v[0],min:S,max:k,avg:E,count:v.length}}),totalItems:e.length}:null},[e,t]);if(!n)return null;const{entries:r,totalItems:s}=n,i=r.slice(0,lS),o=r.length-i.length,l=s>1;return u.jsxs("div",{className:"rounded-xl border border-border bg-panel p-3",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Selected metrics"}),u.jsxs("div",{className:"text-[11px] text-muted",children:[s," item",s===1?"":"s"]})]}),u.jsxs("div",{className:"space-y-1",children:[i.map(a=>u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsx("span",{className:"text-muted w-28 shrink-0 truncate",title:a.key,children:a.key}),u.jsxs("span",{className:"font-mono text-text text-right",children:[l?`${Nt(a.min)}  ${Nt(a.max)}`:Nt(a.value),l&&u.jsxs("span",{className:"text-[10px] text-muted ml-2",children:["avg ",Nt(a.avg),a.count!==s?`  ${a.count}/${s}`:""]})]})]},a.key)),o>0&&u.jsxs("div",{className:"text-[11px] text-muted",children:["+",o," more"]})]})]})}function cS({filters:e,onChangeFilters:t}){const n=f.useMemo(()=>R1(e),[e]),r=f.useMemo(()=>L1(e),[e]),s=f.useMemo(()=>T1(e)??"",[e]),i=f.useMemo(()=>I1(e)??"",[e]),o=f.useMemo(()=>_1(e)??"",[e]),l=f.useMemo(()=>P1(e)??"",[e]),a=f.useMemo(()=>O1(e)??"",[e]),c=f.useMemo(()=>F1(e)??"",[e]),h=f.useMemo(()=>D1(e)??{},[e]),d=f.useMemo(()=>$h(h.from),[h.from]),v=f.useMemo(()=>$h(h.to),[h.to]),S=f.useMemo(()=>z1(e),[e]),k=f.useMemo(()=>A1(e),[e]),[E,j]=f.useState((S==null?void 0:S.op)??">="),[y,g]=f.useState((k==null?void 0:k.op)??">=");f.useEffect(()=>{S!=null&&S.op&&j(S.op)},[S==null?void 0:S.op]),f.useEffect(()=>{k!=null&&k.op&&g(k.op)},[k==null?void 0:k.op]);const p=(m,C)=>{const L=new Set(n),T=new Set(r);m==="include"?L.has(C)?L.delete(C):(L.add(C),T.delete(C)):T.has(C)?T.delete(C):(T.add(C),L.delete(C));let R=zg(e,Array.from(L));R=Ag(R,Array.from(T)),t(R)};return u.jsxs("div",{className:"rounded-xl border border-border bg-panel p-3",children:[u.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted mb-3",children:"Attributes"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-muted mb-2",children:"Rating"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-[11px] text-muted mb-1",children:"Include"}),u.jsxs("div",{className:"flex flex-wrap gap-1",children:[Ih.map(m=>{const C=n.includes(m);return u.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded border text-[11px] flex items-center justify-center transition-colors ${C?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",m),"aria-pressed":C,title:`Include ${m} star${m>1?"s":""}`,children:[m,""]},`stars-in-${m}`)}),u.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded border text-[11px] flex items-center justify-center transition-colors ${n.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",0),"aria-pressed":n.includes(0),title:"Include unrated",children:"None"})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[11px] text-muted mb-1",children:"Exclude"}),u.jsxs("div",{className:"flex flex-wrap gap-1",children:[Ih.map(m=>{const C=r.includes(m);return u.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded border text-[11px] flex items-center justify-center transition-colors ${C?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",m),"aria-pressed":C,title:`Exclude ${m} star${m>1?"s":""}`,children:[m,""]},`stars-out-${m}`)}),u.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded border text-[11px] flex items-center justify-center transition-colors ${r.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",0),"aria-pressed":r.includes(0),title:"Exclude unrated",children:"None"})]})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-muted mb-2",children:"Filename"}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Contains"}),u.jsx("input",{className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:s,placeholder:"e.g. draft",onChange:m=>t($g(e,m.target.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Does not contain"}),u.jsx("input",{className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:i,placeholder:"e.g. v1",onChange:m=>t(Ug(e,m.target.value))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-muted mb-2",children:"Comments"}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Contains"}),u.jsx("input",{className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:o,placeholder:"e.g. hero",onChange:m=>t(Bg(e,m.target.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Does not contain"}),u.jsx("input",{className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:l,placeholder:"e.g. todo",onChange:m=>t(Wg(e,m.target.value))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-muted mb-2",children:"URL"}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Contains"}),u.jsx("input",{className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:a,placeholder:"e.g. s3://bucket",onChange:m=>t(Hg(e,m.target.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Does not contain"}),u.jsx("input",{className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:c,placeholder:"e.g. http://",onChange:m=>t(Vg(e,m.target.value))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-muted mb-2",children:"Date Added"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"From"}),u.jsx("input",{type:"date",className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:d,onChange:m=>t(ic(e,{from:m.target.value||null,to:h.to??null}))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"To"}),u.jsx("input",{type:"date",className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:v,onChange:m=>t(ic(e,{from:h.from??null,to:m.target.value||null}))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-muted mb-2",children:"Dimensions"}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Width"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("select",{className:"h-8 w-16 rounded-lg px-1 border border-border bg-surface text-text",value:E,onChange:m=>{const C=m.target.value;j(C),S&&t($o(e,{op:C,value:S.value}))},children:_h.map(m=>u.jsx("option",{value:m,children:m},`w-${m}`))}),u.jsx("input",{type:"number",className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:S?String(S.value):"",min:0,placeholder:"px",onChange:m=>{const C=m.target.value;if(!C){t($o(e,null));return}const L=Number(C);Number.isFinite(L)&&t($o(e,{op:E,value:L}))}})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Height"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("select",{className:"h-8 w-16 rounded-lg px-1 border border-border bg-surface text-text",value:y,onChange:m=>{const C=m.target.value;g(C),k&&t(Uo(e,{op:C,value:k.value}))},children:_h.map(m=>u.jsx("option",{value:m,children:m},`h-${m}`))}),u.jsx("input",{type:"number",className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:k?String(k.value):"",min:0,placeholder:"px",onChange:m=>{const C=m.target.value;if(!C){t(Uo(e,null));return}const L=Number(C);Number.isFinite(L)&&t(Uo(e,{op:y,value:L}))}})]})]})]})]})]})]})}function dS({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}){const[a,c]=f.useState(!1),h=s&&n.includes(s)?s:n[0];return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-end justify-between gap-2",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"block text-xs uppercase tracking-wide text-muted mb-1",children:"Metric"}),a?u.jsx("div",{className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-[12px] text-muted flex items-center",children:"All metrics"}):u.jsx("select",{className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:h,onChange:d=>i(d.target.value),children:n.map(d=>u.jsx("option",{value:d,children:d},d))})]}),u.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:()=>c(d=>!d),"aria-pressed":a,children:a?"Show one":"Show all"})]}),a?u.jsx("div",{className:"space-y-3",children:n.map(d=>u.jsx(Ph,{metricKey:d,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l,showTitle:!0},d))}):h?u.jsx(Ph,{metricKey:h,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l}):u.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]})}function Ph({items:e,filteredItems:t,metricKey:n,selectedItems:r,filters:s,onChangeRange:i,showTitle:o=!1}){const l=f.useMemo(()=>Oh(e,n),[e,n]),a=f.useMemo(()=>za(l,jr),[l]),c=f.useMemo(()=>Oh(t,n),[t,n]),h=f.useMemo(()=>a?za(c,jr,a):null,[c,a]),d=$1(s,n),[v,S]=f.useState(null),[k,E]=f.useState(!1),j=f.useRef(null),y=f.useRef(null),[g,p]=f.useState(null),[m,C]=f.useState(""),[L,T]=f.useState(""),[R,_]=f.useState(null),b=v??d,P=a?{min:a.min,max:a.max}:null,ee=f.useMemo(()=>{var le;if(!(r!=null&&r.length))return[];const Q=[];for(const se of r){const fe=(le=se.metrics)==null?void 0:le[n];fe==null||Number.isNaN(fe)||Q.push(fe)}return Q},[r,n]),re=ee.length===1?ee[0]:null,H=f.useMemo(()=>!a||ee.length<2?null:za(ee,jr,a),[ee,a]);f.useEffect(()=>{if(!d||!P){R!=="min"&&C(d?Fn(d.min):""),R!=="max"&&T(d?Fn(d.max):"");return}if(R!=="min"){const Q=Zr(d.min,P.min)?"":Fn(d.min);C(Q)}if(R!=="max"){const Q=Zr(d.max,P.max)?"":Fn(d.max);T(Q)}},[d,P,R]),f.useEffect(()=>{p(null)},[n,P==null?void 0:P.min,P==null?void 0:P.max]);const Te=Q=>{var fe;if(!P)return null;const le=(fe=y.current)==null?void 0:fe.getBoundingClientRect();if(!le)return null;const se=md((Q.clientX-le.left)/le.width);return P.min+(P.max-P.min)*se},be=(Q,le)=>{if(!P)return;const se=j.current??Q,fe=Dh(se,Q);S(fe),le&&i(n,fe)},me=Q=>{var se;if(!P)return;Q.preventDefault();const le=Te(Q);le!=null&&(E(!0),S(null),j.current=le,p(le),(se=y.current)==null||se.setPointerCapture(Q.pointerId),be(le,!1))},O=Q=>{const le=Te(Q);if(le==null){k||p(null);return}p(le),k&&be(le,!1)},B=Q=>{var se;if(!k)return;E(!1),(se=y.current)==null||se.releasePointerCapture(Q.pointerId);const le=Te(Q);le!=null&&(p(le),be(le,!0)),j.current=null,setTimeout(()=>S(null),0)},q=(Q,le)=>{if(!P)return;const se=zh(Q),fe=zh(le);if(!se.valid||!fe.valid){se.valid||C(d?Fn(d.min):""),fe.valid||T(d?Fn(d.max):"");return}if(se.value==null&&fe.value==null){i(n,null);return}const ke=se.value??P.min,Ie=fe.value??P.max,ot=Ah(ke,P.min,P.max),je=Ah(Ie,P.min,P.max),lt=Dh(ot,je);if(Zr(lt.min,P.min)&&Zr(lt.max,P.max)){i(n,null);return}i(n,lt)};if(!a||!P)return u.jsxs("div",{className:"rounded-xl border border-border bg-panel p-3",children:[o&&u.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted mb-2",children:n}),u.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]});const de=ee.length;return u.jsxs("div",{className:"rounded-xl border border-border bg-panel p-3",children:[o&&u.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted mb-2",children:n}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-muted mb-2",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{children:["Population: ",a.count]}),u.jsxs("span",{children:["Filtered: ",(h==null?void 0:h.count)??0]}),de>1&&u.jsxs("span",{className:"text-text",children:["Selected: ",de]})]}),re!=null&&u.jsxs("span",{className:"text-text",children:["Selected: ",Nt(re)]})]}),u.jsxs("svg",{ref:y,viewBox:`0 0 ${jr} 100`,preserveAspectRatio:"none",className:"w-full h-28 cursor-crosshair rounded-md bg-surface-inset",onPointerDown:me,onPointerMove:O,onPointerUp:B,onPointerLeave:()=>p(null),children:[Aa(a.bins,"#2e3a4b"),h&&Aa(h.bins,"#3a8fff"),H&&Aa(H.bins,"#f59e0b",{opacity:.55}),b&&fS(b,P),re!=null&&Fh(re,P,{color:"var(--highlight)",strokeWidth:.7}),g!=null&&Fh(g,P,{color:"rgba(255,255,255,0.75)",strokeWidth:.5,dashed:!0})]}),u.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mt-2",children:[u.jsx("span",{children:Nt(P==null?void 0:P.min)}),u.jsxs("div",{className:"flex flex-col items-center text-center leading-tight",children:[b?u.jsx("span",{className:"text-text",children:Zr(b.min,P.min)?` ${Nt(b.max)}`:Zr(b.max,P.max)?` ${Nt(b.min)}`:`${Nt(b.min)}  ${Nt(b.max)}`}):g!=null?u.jsxs("span",{className:"text-text",children:["Cursor: ",Nt(g)]}):u.jsx("span",{children:"Drag to filter"}),b&&g!=null&&u.jsxs("span",{className:"text-[10px] text-muted",children:["Cursor: ",Nt(g)]})]}),u.jsx("span",{children:Nt(P==null?void 0:P.max)})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Min"}),u.jsx("input",{type:"number",step:"any",className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:m,placeholder:Fn(P.min),onFocus:()=>_("min"),onBlur:()=>{_(null),q(m,L)},onChange:Q=>C(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&Q.currentTarget.blur()}})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Max"}),u.jsx("input",{type:"number",step:"any",className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:L,placeholder:Fn(P.max),onFocus:()=>_("max"),onBlur:()=>{_(null),q(m,L)},onChange:Q=>T(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&Q.currentTarget.blur()}})]})]}),u.jsx("div",{className:"flex items-center gap-2 mt-2",children:u.jsx("button",{className:"btn btn-sm",onClick:()=>i(n,null),children:"Clear"})})]})}function za(e,t,n){if(!e.length)return null;const r=n?n.min:Math.min(...e);let s=n?n.max:Math.max(...e);r===s&&(s=r+1);const i=new Array(t).fill(0),o=t/(s-r);for(const l of e){const a=Math.max(0,Math.min(t-1,Math.floor((l-r)*o)));i[a]+=1}return{bins:i,min:r,max:s,count:e.length}}function Oh(e,t){var r;const n=[];for(const s of e){const i=(r=s.metrics)==null?void 0:r[t];i==null||Number.isNaN(i)||n.push(i)}return n}function Aa(e,t,n){const r=Math.max(1,...e),s=(n==null?void 0:n.opacity)??.9;return e.map((i,o)=>{const l=i/r*100;return u.jsx("rect",{x:o+.05,y:100-l,width:.9,height:l,fill:t,opacity:s},`${t}-${o}`)})}function fS(e,t){const n=(e.min-t.min)/(t.max-t.min),r=(e.max-t.min)/(t.max-t.min),s=jr*md(Math.min(n,r)),i=jr*Math.abs(r-n);return u.jsx("rect",{x:s,y:0,width:Math.max(.5,i),height:100,fill:"rgba(255,255,255,0.08)",stroke:"rgba(255,255,255,0.4)",strokeWidth:.4})}function Fh(e,t,n){const r=md((e-t.min)/(t.max-t.min)),s=jr*r;return u.jsx("line",{x1:s,y1:0,x2:s,y2:100,stroke:n.color,strokeWidth:n.strokeWidth??.5,strokeDasharray:n.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function Dh(e,t){return e<t?{min:e,max:t}:{min:t,max:e}}function md(e){return e<0?0:e>1?1:e}function Nt(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Fn(e){if(!Number.isFinite(e))return"";const t=e.toString();return t.includes("e")?e.toFixed(6):t}function zh(e){const t=e.trim();if(!t)return{value:null,valid:!0};const n=Number(t);return Number.isFinite(n)?{value:n,valid:!0}:{value:null,valid:!1}}function Ah(e,t,n){return e<t?t:e>n?n:e}function Zr(e,t){const n=Math.max(1,Math.abs(e),Math.abs(t));return Math.abs(e-t)<=1e-6*n}function $h(e){return e?e.length>=10?e.slice(0,10):e:""}const hS=[{label:"Root",path:"/"}];function pS({leftTool:e,onToolChange:t,views:n,activeViewId:r,onActivateView:s,onSaveView:i,current:o,data:l,onOpenFolder:a,onContextMenu:c,items:h,filteredItems:d,metricKeys:v,selectedItems:S,selectedMetric:k,onSelectMetric:E,filters:j,onChangeRange:y,onChangeFilters:g,onResize:p}){const m=e==="folders"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",C=e==="metrics"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover";return u.jsxs("div",{className:"app-left-panel col-start-1 row-start-2 relative border-r border-border bg-panel overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-y-0 left-0 w-10 border-r border-border flex flex-col items-center gap-2 py-3 bg-surface-overlay",children:[u.jsx("button",{className:m,title:"Folders","aria-label":"Folders","aria-pressed":e==="folders",onClick:()=>t("folders"),children:u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:u.jsx("path",{d:"M3 7.5h6l2-2h10a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2z"})})}),u.jsx("button",{className:C,title:"Metrics / Filters","aria-label":"Metrics and Filters","aria-pressed":e==="metrics",onClick:()=>t("metrics"),children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[u.jsx("path",{d:"M4 19V9"}),u.jsx("path",{d:"M10 19V5"}),u.jsx("path",{d:"M16 19v-7"}),u.jsx("path",{d:"M3 19h18"})]})})]}),u.jsx("div",{className:"ml-10 h-full",children:e==="folders"?u.jsxs("div",{className:"h-full flex flex-col",children:[u.jsxs("div",{className:"px-2 py-2 border-b border-border",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Smart Folders"}),u.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:i,title:"Save current view as Smart Folder",children:"+ New"})]}),n.length?u.jsx("div",{className:"flex flex-col gap-1",children:n.map(L=>{const T=L.id===r;return u.jsx("button",{className:`text-left px-2 py-1.5 rounded-md text-sm ${T?"bg-accent-muted text-accent":"hover:bg-hover text-text"}`,onClick:()=>s(L),children:L.name},L.id)})}):u.jsx("div",{className:"text-xs text-muted px-1 py-1.5",children:"No saved Smart Folders yet."})]}),u.jsx(oS,{current:o,roots:hS,data:l,onOpen:a,onContextMenu:c,className:"flex-1 min-h-0 overflow-auto scrollbar-thin",showResizeHandle:!1})]}):u.jsx(aS,{items:h,filteredItems:d,metricKeys:v,selectedItems:S,selectedMetric:k,onSelectMetric:E,filters:j,onChangeRange:y,onChangeFilters:g})}),u.jsx("div",{className:"toolbar-offset absolute bottom-0 right-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20",onMouseDown:p})]})}function mS({persistenceEnabled:e,recentSummary:t,onDismissRecent:n,browserZoomPercent:r}){const s=t?` (${t.names.join(", ")}${t.extra?` +${t.extra}`:""})`:"",i=!!(t!=null&&t.names.length),o=typeof r=="number"?r:null,l=o!==null&&Math.abs(o-100)>=2;return!e||l||!!t?u.jsx("div",{className:"border-b border-border bg-panel",children:u.jsxs("div",{className:"px-3 py-2 flex flex-col gap-2",children:[!e&&u.jsxs("div",{className:"rounded-md border border-danger/40 bg-danger/10 text-danger text-xs px-2.5 py-1.5",children:[u.jsx("span",{className:"font-semibold",children:"Not persisted."})," Workspace is read-only; edits stay in memory until restart."]}),l&&u.jsxs("div",{className:"rounded-md border border-accent/30 bg-accent/10 text-text text-xs px-2.5 py-1.5",children:[u.jsxs("span",{className:"font-semibold",children:["Browser zoom ",Math.round(o),"%."]})," For best results, set it to 100% so UI elements stay in correct proportions."]}),t&&u.jsxs("div",{className:"rounded-md border border-accent/30 bg-accent/10 text-text text-xs px-2.5 py-1.5 flex items-center justify-between gap-3",children:[u.jsxs("span",{children:["Recent updates: ",t.count," item",t.count===1?"":"s",i?s:""]}),u.jsx("button",{className:"text-muted hover:text-text transition-colors",onClick:n,"aria-label":"Dismiss recent activity",children:"Dismiss"})]})]})}):u.jsx(u.Fragment,{})}const Uh=6e3,gS=15*6e4,vS=1e4,Bh=24*60*6e4,ze={sortKey:"sortKey",sortDir:"sortDir",sortSpec:"sortSpec",starFilters:"starFilters",filterAst:"filterAst",selectedMetric:"selectedMetric",viewMode:"viewMode",gridItemSize:"gridItemSize",leftOpen:"leftOpen",rightOpen:"rightOpen"};function yS(){var Ld;const[e,t]=f.useState("/"),[n,r]=f.useState(""),[s,i]=f.useState([]),[o,l]=f.useState(null),[a,c]=f.useState(0),[h,d]=f.useState(null),[v,S]=f.useState(100),[k,E]=f.useState(null),[j,y]=f.useState(()=>({filters:{and:[]},sort:{kind:"builtin",key:"added",dir:"desc"},selectedMetric:void 0})),[g,p]=f.useState(()=>Date.now()),[m,C]=f.useState("adaptive"),[L,T]=f.useState(220),[R,_]=f.useState(!0),[b,P]=f.useState(!0),[ee,re]=f.useState("folders"),[H,Te]=f.useState([]),[be,me]=f.useState(null),[O,B]=f.useState(null),[q,de]=f.useState(null),[Q,le]=f.useState({}),se=f.useRef(null),fe=f.useRef(null),ke=f.useRef(null),Ie=f.useRef(null),ot=f.useRef(!1),je=f.useRef(null),lt=f.useRef(new Map),pr=f.useRef(new Map),{leftW:mr,rightW:gr,onResizeLeft:hn,onResizeRight:en}=q1(se),[vr,A]=f.useState(!1),[J,Z]=f.useState(null),M=Gr(),F=Zw(),G=zl(),W=t1(),[ie,ge]=f.useState("idle"),[_e,xe]=f.useState({}),[at,we]=f.useState([]),[et,Pe]=f.useState([]),[Yr,_n]=f.useState(new Set),Vs=f.useRef(new Map),[_t,Ul]=f.useState(null),[gd,Gg]=f.useState(null),[Yg,Bl]=f.useState(!1),[qr,Wl]=f.useState(()=>Date.now()),[qg,Xg]=f.useState(!0);f.useEffect(()=>{const x=an(Sh());t(x);const N=()=>{const I=an(Sh());l(null),t(z=>z===I?z:(c($=>$+1),I))};return window.addEventListener("hashchange",N),()=>window.removeEventListener("hashchange",N)},[]),f.useEffect(()=>()=>{for(const x of Vs.current.values())window.clearTimeout(x);Vs.current.clear()},[]),f.useEffect(()=>{if(gd==null){Bl(!1);return}Bl(!0);const x=window.setTimeout(()=>Bl(!1),Uh);return()=>window.clearTimeout(x)},[gd]),f.useEffect(()=>{if(_t==null)return;Wl(Date.now());const x=window.setInterval(()=>Wl(Date.now()),1e4);return()=>window.clearInterval(x)},[_t]),f.useEffect(()=>{const x=window.setInterval(()=>{const N=Date.now();we(I=>I.filter(z=>N-z.ts<3e4))},5e3);return()=>window.clearInterval(x)},[]);const{data:De,refetch:Hl,isLoading:jS,isError:MS}=Dg(e),yr=n.trim().length>0,vd=J1(n,250),yd=f.useMemo(()=>vd.trim().replace(/\s+/g," "),[vd]),xd=x1(yr?yd:"",e),Vl=f.useMemo(()=>kh(j.filters),[j.filters]),tn=f.useMemo(()=>{var N;return(yr?((N=xd.data)==null?void 0:N.items)??[]:(De==null?void 0:De.items)??[]).map(I=>({...I,star:Q[I.path]!==void 0?Q[I.path]:I.star}))},[yr,xd.data,De,Q]),Ke=f.useMemo(()=>{const x=Q1(tn,j.filters);return Y1(x,j.sort,g)},[tn,j.filters,j.sort,g]),Jg=tn.length,Zg=Ke.length,bt=f.useMemo(()=>Ke.map(x=>x.path),[Ke]),ev=f.useMemo(()=>{if(!s.length)return[];const x=new Map(tn.map(I=>[I.path,I])),N=new Map(Ke.map(I=>[I.path,I]));return s.map(I=>x.get(I)??N.get(I)).filter(I=>!!I)},[s,tn,Ke]),Qs=j.sort.kind==="metric"?j.sort.key:null,wd=f.useMemo(()=>Qs?Ke.some(x=>{var I;const N=(I=x.metrics)==null?void 0:I[Qs];return N!=null&&!Number.isNaN(N)}):!1,[Ke,Qs]),Sd=f.useCallback(x=>{_n($=>{if($.has(x))return $;const U=new Set($);return U.add(x),U});const N=Vs.current,I=N.get(x);I&&window.clearTimeout(I);const z=window.setTimeout(()=>{_n($=>{if(!$.has(x))return $;const U=new Set($);return U.delete(x),U}),N.delete(x)},Uh);N.set(x,z)},[]),Ql=f.useCallback(x=>{const N=Date.now(),z=mh(x)??N;Ul($=>$==null?z:$>z?$:z),Gg(N),Wl(N)},[]),Kl=f.useCallback((x,N,I)=>{const z=Date.now(),$=mh(I)??z;Pe(U=>{const ne=U.filter(K=>K.path!==x);return[{path:x,ts:$,kind:N},...ne].slice(0,10)})},[]),Gl=f.useCallback((x,N)=>{const I=Date.now();we(z=>{const $=z.filter(ne=>I-ne.ts<3e4&&ne.path!==x);return[{path:x,ts:I,kind:N},...$].slice(0,6)}),Sd(x)},[Sd]),Yl=f.useCallback(x=>{const N=Object.prototype.hasOwnProperty.call(x,"star"),I=x.metrics!==void 0,z=x.comments!==void 0;if(!N&&!I&&!z)return;const $=U=>{if(U.path!==x.path)return U;let ne=U;return N&&U.star!==x.star&&(ne={...ne,star:x.star??null}),I&&(ne={...ne,metrics:x.metrics??null}),z&&U.comments!==x.comments&&(ne={...ne,comments:x.comments??""}),ne};M.setQueriesData({predicate:({queryKey:U})=>Array.isArray(U)&&U[0]==="folder"},U=>{if(!U)return U;let ne=!1;const X=U.items.map(K=>{const oe=$(K);return oe!==K&&(ne=!0),oe});return ne?{...U,items:X}:U}),M.setQueriesData({predicate:({queryKey:U})=>Array.isArray(U)&&U[0]==="search"},U=>{if(!U)return U;let ne=!1;const X=U.items.map(K=>{const oe=$(K);return oe!==K&&(ne=!0),oe});return ne?{...U,items:X}:U})},[M]),ql=f.useCallback(async x=>{const N=an(x||"/"),I=lt.current,z=pr.current,$=I.get(N);if($!==void 0)return $;const U=z.get(N);if(U)return U;const ne=(async()=>{const X=[N],K=new Set;let oe=0;for(;X.length;){const Be=X.pop();if(!K.has(Be)){K.add(Be);try{const xr=await he.getFolder(Be);oe+=xr.items.length;for(const ta of xr.dirs)ta.kind==="branch"&&X.push(hd(Be,ta.name))}catch(xr){console.warn(`Failed to count folder ${Be}:`,xr)}}}return I.set(N,oe),z.delete(N),oe})();return z.set(N,ne),ne},[]);f.useEffect(()=>{let x=!1;const N=an(e||"/");return(async()=>{const z=ql("/"),$=N==="/"?z:ql(N),[U,ne]=await Promise.all([z,$]);x||(de(U),B(ne))})().catch(z=>console.warn("Failed to compute folder counts:",z)),()=>{x=!0}},[e,ql]),f.useEffect(()=>{tw();const x=rw(I=>{if(I.type==="presence"){const U=I.data;if(!(U!=null&&U.gallery_id))return;xe(ne=>({...ne,[U.gallery_id]:U}));return}const z=I.data;if(!(z!=null&&z.path))return;const $=z.path;if(I.type==="item-updated"){const U=I.data,ne={v:1,tags:U.tags??[],notes:U.notes??"",star:U.star??null,version:U.version??1,updated_at:U.updated_at??"",updated_by:U.updated_by??"server"};M.setQueryData(zi($),ne),Yl({path:$,star:U.star??null,metrics:U.metrics,comments:U.notes??""}),s1($,ne),Gl($,"item-updated"),Kl($,"item-updated",U.updated_at),Ql(U.updated_at),le(X=>{if(X[$]===void 0)return X;const K={...X};return delete K[$],K})}else if(I.type==="metrics-updated"){const U=I.data;Yl({path:$,metrics:U.metrics}),Gl($,"metrics-updated"),Kl($,"metrics-updated",U.updated_at),Ql(U.updated_at)}}),N=sw(ge);return()=>{x(),N(),nw()}},[Gl,Kl,M,Yl,Ql]),f.useEffect(()=>{let x=!1;const N=an(e||"/"),I=async()=>{try{const $=await he.postPresence(N);!x&&($!=null&&$.gallery_id)&&xe(U=>({...U,[$.gallery_id]:$}))}catch{}};I();const z=window.setInterval(I,3e4);return()=>{x=!0,window.clearInterval(z)}},[e]),f.useEffect(()=>{let x=!1;return he.getHealth().then(N=>{var z;if(x)return;const I=((z=N==null?void 0:N.labels)==null?void 0:z.enabled)??!0;Xg(I)}).catch(()=>{}),()=>{x=!0}},[]);const tv=f.useMemo(()=>{const x=tn,N={0:0,1:0,2:0,3:0,4:0,5:0};for(const I of x){const z=Q[I.path]??I.star??0;N[String(z)]=(N[String(z)]||0)+1}return N},[tn,Q]),Pn=f.useMemo(()=>{const x=new Set;let N=0;for(const I of tn){const z=I.metrics;if(z)for(const $ of Object.keys(z))x.add($);if(N+=1,N>=250&&x.size>0)break}return Array.from(x).sort()},[tn]);f.useEffect(()=>{Pn.length&&y(x=>{const N=x.selectedMetric&&Pn.includes(x.selectedMetric)?x.selectedMetric:Pn[0];return N===x.selectedMetric?x:{...x,selectedMetric:N}})},[Pn]),f.useEffect(()=>{j.sort.kind==="metric"&&(Pn.includes(j.sort.key)||y(x=>({...x,sort:{kind:"builtin",key:"added",dir:x.sort.dir}})))},[Pn,j.sort]);const kd=f.useMemo(()=>B1(j.filters),[j.filters]),qi=O??Jg,nv=q??qi,Cd=yr||kd>0,Xi=_e[e],rv=F.state==="syncing"?"Syncing":F.state==="error"?F.message?`Not saved  ${F.message}`:"Not saved  retry":"All changes saved",sv=ie==="live"?"Live":ie==="reconnecting"?"Reconnecting":ie==="offline"?"Offline":"Connecting",Xl=_t!=null,iv=f.useMemo(()=>!Xl||_t==null?"No edits yet.":qr-_t<Bh?gh(_t,qr):vh(_t),[Xl,_t,qr]),Ed=_t==null?null:Math.max(0,qr-_t),ov=((Xi==null?void 0:Xi.editing)??0)>0||Ed!=null&&Ed<gS,lv=W!=null&&W>vS,av=ie==="offline"||ie==="connecting"||ie==="idle",uv=ie==="reconnecting"||G||F.state==="error"||lv,cv=av?"offline":uv?"unstable":Yg?"recent":ov?"editing":"live",dv=f.useMemo(()=>{if(!at.length)return null;const x=new Set,N=[];for(const z of at)x.has(z.path)||(x.add(z.path),N.push(z.path));const I=N.slice(0,2).map(z=>{const $=Ke.find(U=>U.path===z);return($==null?void 0:$.name)??z.split("/").pop()??z});return{count:N.length,names:I,extra:Math.max(0,N.length-I.length)}},[at,Ke]),fv=f.useMemo(()=>{if(!et.length)return[];const x=qr??Date.now();return et.map(N=>{const I=Ke.find(ne=>ne.path===N.path),z=(I==null?void 0:I.name)??N.path.split("/").pop()??N.path,U=x-N.ts<Bh?gh(N.ts,x):vh(N.ts);return{path:N.path,label:z,timeLabel:U}})},[Ke,qr,et]),hv=Cd?Zg:qi,pv=Cd||e==="/"?qi:nv,ut=f.useCallback(x=>{y(N=>({...N,filters:x(N.filters)}))},[]),mv=f.useCallback(x=>{y(N=>({...N,filters:x}))},[]),Ji=f.useCallback(()=>{ut(x=>Fa(x,[]))},[ut]),bd=f.useCallback(()=>{y(x=>({...x,filters:{and:[]}}))},[]),Jl=f.useCallback((x,N)=>{ut(I=>U1(I,x,N))},[ut]),Nd=f.useMemo(()=>{var N,I,z,$,U,ne;const x=[];for(const X of j.filters.and)if("stars"in X){const K=X.stars||[];if(!K.length)continue;x.push({id:"stars",label:`Rating in: ${$a(K)}`,onRemove:()=>Ji()})}else if("starsIn"in X){const K=X.starsIn.values||[];if(!K.length)continue;x.push({id:"stars-in",label:`Rating in: ${$a(K)}`,onRemove:()=>Ji()})}else if("starsNotIn"in X){const K=X.starsNotIn.values||[];if(!K.length)continue;x.push({id:"stars-not-in",label:`Rating not in: ${$a(K)}`,onRemove:()=>ut(oe=>Ag(oe,[]))})}else if("nameContains"in X){const K=(N=X.nameContains.value)==null?void 0:N.trim();if(!K)continue;x.push({id:"name-contains",label:`Filename contains: ${K}`,onRemove:()=>ut(oe=>$g(oe,""))})}else if("nameNotContains"in X){const K=(I=X.nameNotContains.value)==null?void 0:I.trim();if(!K)continue;x.push({id:"name-not-contains",label:`Filename not: ${K}`,onRemove:()=>ut(oe=>Ug(oe,""))})}else if("commentsContains"in X){const K=(z=X.commentsContains.value)==null?void 0:z.trim();if(!K)continue;x.push({id:"comments-contains",label:`Comments contain: ${K}`,onRemove:()=>ut(oe=>Bg(oe,""))})}else if("commentsNotContains"in X){const K=($=X.commentsNotContains.value)==null?void 0:$.trim();if(!K)continue;x.push({id:"comments-not-contains",label:`Comments not: ${K}`,onRemove:()=>ut(oe=>Wg(oe,""))})}else if("urlContains"in X){const K=(U=X.urlContains.value)==null?void 0:U.trim();if(!K)continue;x.push({id:"url-contains",label:`URL contains: ${K}`,onRemove:()=>ut(oe=>Hg(oe,""))})}else if("urlNotContains"in X){const K=(ne=X.urlNotContains.value)==null?void 0:ne.trim();if(!K)continue;x.push({id:"url-not-contains",label:`URL not: ${K}`,onRemove:()=>ut(oe=>Vg(oe,""))})}else if("dateRange"in X){const{from:K,to:oe}=X.dateRange;if(!K&&!oe)continue;x.push({id:"date-range",label:`Date: ${SS(K,oe)}`,onRemove:()=>ut(Be=>ic(Be,null))})}else if("widthCompare"in X){const{op:K,value:oe}=X.widthCompare;x.push({id:"width-compare",label:`Width ${K} ${oe}`,onRemove:()=>ut(Be=>$o(Be,null))})}else if("heightCompare"in X){const{op:K,value:oe}=X.heightCompare;x.push({id:"height-compare",label:`Height ${K} ${oe}`,onRemove:()=>ut(Be=>Uo(Be,null))})}else if("metricRange"in X){const{key:K,min:oe,max:Be}=X.metricRange;x.push({id:`metric:${K}`,label:`${K}: ${CS(oe,Be)}`,onRemove:()=>Jl(K,null)})}return x},[j.filters,Ji,Jl,ut]),gv=f.useCallback(x=>{const N=new Set(Vl);N.has(x)?N.delete(x):N.add(x),y(I=>({...I,filters:Fa(I.filters,Array.from(N))}))},[Vl]),vv=f.useCallback(()=>{_(!0),re("metrics")},[]),yv=f.useCallback(x=>{y(N=>({...N,sort:x})),x.kind==="builtin"&&x.key==="random"&&p(Date.now())},[]),jd=f.useCallback(x=>{if(x==="/"||x==="")return"Lenslet | Root";const N=x.split("/").filter(Boolean);if(!N.length)return"Lenslet";const I=N.slice(-2).join("/");return`Lenslet | ${N.length>2?`.../${I}`:`/${I}`}`},[]),xv=f.useMemo(()=>kS(e),[e]);f.useEffect(()=>{document.title=jd(e)},[e,jd]),f.useEffect(()=>{let x=!0;return he.getViews().then(N=>{x&&Te(N.views||[])}).catch(()=>{x&&Te([])}),()=>{x=!1}},[]),f.useEffect(()=>{yr&&(i([]),l(null))},[yr]),f.useEffect(()=>{const x=se.current,N=Ie.current;if(!x||!N)return;const I=()=>{const z=Math.max(48,Math.round(N.getBoundingClientRect().height));x.style.setProperty("--toolbar-h",`${z}px`)};if(I(),"ResizeObserver"in window){const z=new ResizeObserver(I);return z.observe(N),()=>z.disconnect()}return window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]),f.useEffect(()=>{try{const x=localStorage.getItem(ze.sortKey),N=localStorage.getItem(ze.sortDir),I=localStorage.getItem(ze.sortSpec),z=localStorage.getItem(ze.starFilters),$=localStorage.getItem(ze.filterAst),U=localStorage.getItem(ze.selectedMetric),ne=localStorage.getItem(ze.viewMode),X=localStorage.getItem(ze.gridItemSize),K=localStorage.getItem(ze.leftOpen),oe=localStorage.getItem(ze.rightOpen),xr=(tt=>{if(!tt)return null;const We=_a(tt);return!We||typeof We!="object"?null:We.kind==="builtin"&&(We.key==="name"||We.key==="added"||We.key==="random")&&(We.dir==="asc"||We.dir==="desc")||We.kind==="metric"&&typeof We.key=="string"&&We.key.length>0&&(We.dir==="asc"||We.dir==="desc")?We:null})(I)??{kind:"builtin",key:x==="name"||x==="added"||x==="random"?x:"added",dir:N==="asc"||N==="desc"?N:"desc"};xr.key==="random"&&p(Date.now());let na=(tt=>{if(!tt)return null;const We=_a(tt);return sc(We)})($)??{and:[]};if(z){const tt=_a(z);if(Array.isArray(tt)){const We=tt.filter(Nv=>[0,1,2,3,4,5].includes(Nv));na=Fa(na,We)}}if(y(tt=>({...tt,sort:xr,filters:na,selectedMetric:U||tt.selectedMetric})),(ne==="grid"||ne==="adaptive")&&C(ne),X){const tt=Number(X);!isNaN(tt)&&tt>=80&&tt<=500&&T(tt)}(K==="0"||K==="false")&&_(!1),(oe==="0"||oe==="false")&&P(!1)}catch{}},[]),f.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia("(max-width: 900px)"),N=()=>{x.matches&&(_(!1),P(!1))};return N(),"addEventListener"in x?(x.addEventListener("change",N),()=>x.removeEventListener("change",N)):(x.addListener(N),()=>x.removeListener(N))},[]),f.useEffect(()=>{if(typeof window>"u")return;const x=[1,1.25,1.5,1.75,2,3,4],N=$=>x.reduce((U,ne)=>Math.abs(ne-$)<Math.abs(U-$)?ne:U,x[0]),I=()=>{var Be;const $=window.devicePixelRatio||1,U=N($),ne=((Be=window.visualViewport)==null?void 0:Be.scale)??1,X=$*ne/U;if(!Number.isFinite(X)){E(null);return}const K=Math.round(X*100),oe=Math.min(500,Math.max(25,K));E(oe)};I(),window.addEventListener("resize",I),window.addEventListener("orientationchange",I);const z=window.visualViewport;return z&&z.addEventListener("resize",I),()=>{window.removeEventListener("resize",I),window.removeEventListener("orientationchange",I),z&&z.removeEventListener("resize",I)}},[]),f.useEffect(()=>{try{localStorage.setItem(ze.sortKey,j.sort.kind==="builtin"?j.sort.key:"added"),localStorage.setItem(ze.sortDir,j.sort.dir),localStorage.setItem(ze.sortSpec,JSON.stringify(j.sort));const x=kh(j.filters);localStorage.setItem(ze.starFilters,JSON.stringify(x)),localStorage.setItem(ze.filterAst,JSON.stringify(j.filters)),j.selectedMetric?localStorage.setItem(ze.selectedMetric,j.selectedMetric):localStorage.removeItem(ze.selectedMetric),localStorage.setItem(ze.viewMode,m),localStorage.setItem(ze.gridItemSize,String(L)),localStorage.setItem(ze.leftOpen,R?"1":"0"),localStorage.setItem(ze.rightOpen,b?"1":"0")}catch{}},[j,m,L,R,b]),f.useEffect(()=>{const x=fe.current;if(!x)return;const N=z=>Math.min(500,Math.max(80,z)),I=z=>{z.ctrlKey&&(z.preventDefault(),T($=>N($+(z.deltaY<0?20:-20))))};return x.addEventListener("wheel",I,{passive:!1}),()=>x.removeEventListener("wheel",I)},[]),f.useEffect(()=>{if(o)return;const x=fe.current;if(!x)return;const N=X=>Math.min(500,Math.max(80,X));let I=null;const z=X=>{if(X.length<2)return 0;const[K,oe]=[X[0],X[1]];return Math.hypot(K.clientX-oe.clientX,K.clientY-oe.clientY)},$=X=>{if(X.touches.length!==2)return;const K=z(X.touches);K&&(I={dist:K,size:L})},U=X=>{if(!I||X.touches.length!==2)return;const K=z(X.touches);if(!K)return;X.preventDefault();const oe=N(I.size*(K/I.dist));T(oe)},ne=()=>{I=null};return x.addEventListener("touchstart",$,{passive:!0}),x.addEventListener("touchmove",U,{passive:!1}),x.addEventListener("touchend",ne),x.addEventListener("touchcancel",ne),()=>{x.removeEventListener("touchstart",$),x.removeEventListener("touchmove",U),x.removeEventListener("touchend",ne),x.removeEventListener("touchcancel",ne)}},[o,L]),f.useEffect(()=>{if(!o)return;const x=bt.indexOf(o);if(x===-1)return;const N=[bt[x-2],bt[x-1],bt[x+1],bt[x+2]].filter(I=>!!I);for(const I of N)he.prefetchFile(I),he.prefetchThumb(I)},[o,bt]),f.useEffect(()=>{var N;if(!((N=De==null?void 0:De.items)!=null&&N.length))return;const x=De.items.slice(0,5);for(const I of x)he.prefetchFile(I.path)},[De==null?void 0:De.path,De==null?void 0:De.items]);const Zi=f.useCallback(x=>{l(null);const N=an(x);t(N),S1(N)},[]),wv=f.useCallback(async()=>{const x=window.prompt("Save Smart Folder as:","New Smart Folder");if(!x)return;const N=xS(x,H),I={id:N,name:x,pool:{kind:"folder",path:e},view:JSON.parse(JSON.stringify(j))},z=[...H.filter($=>$.id!==N),I];Te(z),me(N);try{await he.saveViews({version:1,views:z})}catch($){if($ instanceof ar&&$.status===403){const U=new Blob([JSON.stringify({version:1,views:z},null,2)],{type:"application/json"});Bo(U,`lenslet-smart-folder-${N}.json`),alert("No-write mode: exported Smart Folder JSON instead of saving.");return}console.error("Failed to save Smart Folder:",$)}},[e,j,H]);f.useEffect(()=>{if(!be)return;const x=H.find(z=>z.id===be);if(!x){me(null);return}const N=x.pool.path===e,I=JSON.stringify(x.view)===JSON.stringify(j);(!N||!I)&&me(null)},[be,H,e,j]);const Sv=f.useCallback(x=>{l(x),ot.current||(window.history.pushState({viewer:!0},"",window.location.href),ot.current=!0)},[]),Md=f.useCallback(()=>{l(null),ot.current&&(ot.current=!1,window.history.back());const x=je.current;if(x){const N=document.getElementById(`cell-${encodeURIComponent(x)}`);N==null||N.focus()}},[]);f.useEffect(()=>{const x=()=>{o&&(ot.current=!1,l(null))};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[o]),f.useEffect(()=>{const x=se.current;if(!x)return;const N=$=>{$.dataTransfer&&Array.from($.dataTransfer.types).includes("Files")&&($.preventDefault(),A(!0))},I=$=>{const U=$.relatedTarget;U&&x.contains(U)||A(!1)},z=async $=>{var X,K;$.preventDefault(),A(!1);const U=Array.from(((X=$.dataTransfer)==null?void 0:X.files)??[]);if(!U.length)return;if(!((((K=De==null?void 0:De.dirs)==null?void 0:K.length)??0)===0)){alert("Uploads are only allowed into folders without subdirectories.");return}for(const oe of U)try{await he.uploadFile(e,oe)}catch(Be){console.error(`Failed to upload ${oe.name}:`,Be)}Hl()};return x.addEventListener("dragover",N),x.addEventListener("dragleave",I),x.addEventListener("drop",z),()=>{x.removeEventListener("dragover",N),x.removeEventListener("dragleave",I),x.removeEventListener("drop",z)}},[e,(Ld=De==null?void 0:De.dirs)==null?void 0:Ld.length,Hl]),f.useEffect(()=>{const x=()=>Z(null),N=I=>{I.key==="Escape"&&Z(null)};return window.addEventListener("click",x),window.addEventListener("keydown",N),()=>{window.removeEventListener("click",x),window.removeEventListener("keydown",N)}},[]),f.useEffect(()=>{const x=N=>{if(!Fg(N.target)){if((N.ctrlKey||N.metaKey)&&N.key.toLowerCase()==="b"){N.preventDefault(),N.altKey?P(I=>!I):_(I=>!I);return}if(!o){if(N.key==="Backspace"||N.key==="Delete")N.preventDefault(),Zi(k1(e));else if((N.ctrlKey||N.metaKey)&&N.key.toLowerCase()==="a")N.preventDefault(),i(Ke.map(I=>I.path));else if(N.key==="Escape")s.length&&(N.preventDefault(),i([]));else if(N.key==="/"){N.preventDefault();const I=document.querySelector(".toolbar-right .input");I==null||I.focus()}}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,Ke,s,o,Zi]);const kv=R?`${mr}px`:"0px",Cv=b?`${gr}px`:"0px",Rd=o??s[0]??null,Zl=Rd?bt.indexOf(Rd):-1,Ev=Zl>0,bv=Zl>=0&&Zl<bt.length-1,ea=f.useCallback(x=>{if(!bt.length)return;const N=o??s[0];if(!N)return;const I=bt.indexOf(N);if(I===-1)return;const z=Math.min(bt.length-1,Math.max(0,I+x)),$=bt[z];!$||$===N||(o&&l($),i([$]))},[bt,o,s]);return u.jsxs("div",{className:"app-shell grid h-full grid-cols-[var(--left)_1fr_var(--right)]",ref:se,style:{"--left":kv,"--right":Cv},children:[u.jsx($x,{rootRef:Ie,onSearch:r,viewerActive:!!o,onBack:Md,zoomPercent:o?v:void 0,onZoomPercentChange:x=>d(x),currentLabel:xv,itemCount:hv,totalCount:pv,sortSpec:j.sort,metricKeys:Pn,onSortChange:yv,filterCount:kd,onOpenFilters:vv,starFilters:Vl,onToggleStar:gv,onClearStars:Ji,onClearFilters:bd,starCounts:tv,viewMode:m,onViewMode:C,gridItemSize:L,onGridItemSize:T,leftOpen:R,rightOpen:b,onToggleLeft:()=>_(x=>!x),onToggleRight:()=>P(x=>!x),onPrevImage:()=>ea(-1),onNextImage:()=>ea(1),canPrevImage:Ev,canNextImage:bv,syncIndicator:{state:cv,presence:Xi,syncLabel:rv,connectionLabel:sv,lastEditedLabel:iv,hasEdits:Xl,recentTouches:fv}}),R&&u.jsx(pS,{leftTool:ee,onToolChange:re,views:H,activeViewId:be,onActivateView:x=>{var I;me(x.id);const N=sc((I=x.view)==null?void 0:I.filters)??{and:[]};y({...x.view,filters:N}),Zi(x.pool.path),re("metrics")},onSaveView:wv,current:e,data:De,onOpenFolder:x=>{me(null),Zi(x)},onContextMenu:(x,N)=>{x.preventDefault(),Z({x:x.clientX,y:x.clientY,kind:"tree",payload:{path:N}})},items:tn,filteredItems:Ke,metricKeys:Pn,selectedItems:ev,selectedMetric:j.selectedMetric,onSelectMetric:x=>y(N=>({...N,selectedMetric:x})),filters:j.filters,onChangeRange:Jl,onChangeFilters:mv,onResize:hn}),u.jsxs("div",{className:"grid-shell col-start-2 row-start-2 relative overflow-hidden flex flex-col",ref:fe,children:[u.jsx("div",{"aria-live":"polite",className:"sr-only",children:s.length?`${s.length} selected`:""}),u.jsx(mS,{persistenceEnabled:qg,recentSummary:dv,onDismissRecent:()=>we([]),browserZoomPercent:k}),Nd.length>0&&u.jsx("div",{className:"sticky top-0 z-10 px-3 py-2 bg-panel border-b border-border",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsx("span",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Filters"}),Nd.map(x=>u.jsxs("span",{className:"filter-chip",children:[u.jsx("span",{className:"truncate max-w-[240px]",title:x.label,children:x.label}),u.jsx("button",{className:"filter-chip-remove","aria-label":`Clear filter ${x.label}`,onClick:x.onRemove,children:""})]},x.id)),u.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:bd,children:"Clear all"})]})}),!1,u.jsxs("div",{className:"flex-1 min-h-0 relative",children:[u.jsx(Iw,{items:Ke,selected:s,restoreToSelectionToken:a,onSelectionChange:i,onOpenViewer:x=>{try{je.current=x}catch{}Sv(x),i([x])},highlight:yr?yd:"",recentlyUpdated:Yr,suppressSelectionHighlight:!!o,viewMode:m,targetCellSize:L,onContextMenuItem:(x,N)=>{x.preventDefault();const I=s.length?s:[N];Z({x:x.clientX,y:x.clientY,kind:"grid",payload:{paths:I}})},scrollRef:ke,hideScrollbar:wd}),wd&&Qs&&u.jsx(Ow,{items:Ke,metricKey:Qs,scrollRef:ke,sortDir:j.sort.dir})]})]}),b&&u.jsx(p1,{path:s[0]??null,selectedPaths:s,items:Ke,sortSpec:j.sort,onResize:en,onStarChanged:(x,N)=>{le(I=>{const z={...I};for(const $ of x)z[$]=N;return z})}}),o&&u.jsx(Hw,{path:o,onClose:Md,onZoomChange:x=>S(Math.round(x)),requestedZoomPercent:h,onZoomRequestConsumed:()=>d(null),onNavigate:ea}),vr&&u.jsx("div",{className:"toolbar-offset fixed inset-0 left-[var(--left)] right-[var(--right)] bg-accent/10 border-2 border-dashed border-accent text-text flex items-center justify-center text-lg z-overlay pointer-events-none",children:"Drop images to upload"}),J&&u.jsx(ES,{ctx:J,current:e,items:Ke,refetch:Hl,setCtx:Z})]})}function xS(e,t){const n=wS(e)||"view",r=new Set(t.map(i=>i.id));if(!r.has(n))return n;let s=2;for(;r.has(`${n}-${s}`);)s+=1;return`${n}-${s}`}function wS(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function $a(e){const t=e.filter(s=>s>0).sort((s,i)=>i-s),n=e.includes(0),r=[...t.map(s=>String(s))];return n&&r.push("None"),r.join(", ")}function SS(e,t){return e&&t?`${e} to ${t}`:e?`from ${e}`:t?`to ${t}`:""}function kS(e){if(e==="/"||e==="")return"Root";const t=e.split("/").filter(Boolean);return t.length?t.length<=2?`/${t.join("/")}`:`.../${t.slice(-2).join("/")}`:"Root"}function CS(e,t){return`${Wh(e)}${Wh(t)}`}function Wh(e){const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Bo(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function ES({ctx:e,current:t,items:n,refetch:r,setCtx:s}){const i=C1(t),o=(p,m)=>p==="/"?`/${m}`:`${p}/${m}`,l=Gr(),[a,c]=Wo.useState(!1),[h,d]=Wo.useState(null),v=()=>new Date().toISOString().replace(/[:.]/g,"-"),S=p=>{const m=C=>p==="/"?!0:C===p||C.startsWith(`${p}/`);l.invalidateQueries({predicate:({queryKey:C})=>{if(!Array.isArray(C)||C[0]!=="folder")return!1;const L=typeof C[1]=="string"?C[1]:"";return m(L)}})},k=p=>{const m=an(p);return m===""?"/":m},E=async()=>{const p=k(e.payload.path||"/");c(!0);try{await he.refreshFolder(p),S(p),(t===p||t.startsWith(p==="/"?"/":`${p}/`))&&await r(),Ku.evictPrefix(p),es.evictPrefix(p)}catch(m){console.error("Failed to refresh folder:",m)}finally{c(!1),s(null)}},j=async p=>{const m=[p],C=new Set,L=[];for(;m.length;){const T=m.pop();if(!C.has(T)){C.add(T);try{const R=await he.getFolder(T);L.push(...R.items);for(const _ of R.dirs)_.kind==="branch"&&m.push(o(T,_.name))}catch(R){console.error(`Failed to fetch folder ${T}:`,R)}}}return L},y=p=>async()=>{d(p);const m=e.payload.path||t;try{const C=await j(m),L=Da(C),T=p==="csv"?Mh(L):jh(L),R=p==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8",_=m==="/"?"root":(m.replace(/^\/+/,"")||"root").replace(/\//g,"_");Bo(new Blob([T],{type:R}),`metadata_${_}_${v()}.${p}`)}catch(C){console.error("Failed to export folder:",C),alert("Failed to export folder. See console for details.")}finally{d(null),s(null)}},g=e.kind==="tree"?[{label:a?"Refreshing":"Refresh",disabled:a,onClick:E},{label:h==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!h||a,onClick:y("csv")},{label:h==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!h||a,onClick:y("json")}]:(()=>{const p=e.payload.paths??[],m=[];return m.push({label:"Move to trash",disabled:i,onClick:async()=>{if(!i){for(const C of p)try{await he.moveFile(C,"/_trash_")}catch(L){console.error(`Failed to trash ${C}:`,L)}r(),s(null)}}}),i&&(m.push({label:"Permanent delete",danger:!0,onClick:async()=>{if(confirm(`Delete ${p.length} file(s) permanently? This cannot be undone.`)){try{await he.deleteFiles(p)}catch(C){console.error("Failed to delete files:",C)}r(),s(null)}}}),m.push({label:"Recover",onClick:async()=>{for(const C of p)try{const T=(await he.getSidecar(C)).original_position,R=T&&T.split("/").slice(0,-1).join("/")||"/";await he.moveFile(C,R)}catch(L){console.error(`Failed to recover ${C}:`,L)}r(),s(null)}})),p.length&&(m.push({label:h==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!h,onClick:async()=>{d("csv");try{const C=new Set(p),L=n.filter(_=>C.has(_.path)),T=Da(L),R=Mh(T);Bo(new Blob([R],{type:"text/csv;charset=utf-8"}),`metadata_selection_${v()}.csv`)}finally{d(null),s(null)}}}),m.push({label:h==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!h,onClick:async()=>{d("json");try{const C=new Set(p),L=n.filter(_=>C.has(_.path)),T=Da(L),R=jh(T);Bo(new Blob([R],{type:"application/json;charset=utf-8"}),`metadata_selection_${v()}.json`)}finally{d(null),s(null)}}})),m})();return u.jsx(X1,{x:e.x,y:e.y,items:g})}const bS=new Ex({defaultOptions:{queries:{staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always"},mutations:{retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),5e3)}}});function NS(){return u.jsx(bx,{client:bS,children:u.jsx(yS,{})})}hg(document.getElementById("root")).render(u.jsx(NS,{}));
