var by=Object.defineProperty;var sf=e=>{throw TypeError(e)};var Ey=(e,t,n)=>t in e?by(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var En=(e,t,n)=>Ey(e,typeof t!="symbol"?t+"":t,n),Ca=(e,t,n)=>t.has(e)||sf("Cannot "+n);var k=(e,t,n)=>(Ca(e,t,"read from private field"),n?n.call(e):t.get(e)),se=(e,t,n)=>t.has(e)?sf("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),K=(e,t,n,r)=>(Ca(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ge=(e,t,n)=>(Ca(e,t,"access private method"),n);var vo=(e,t,n,r)=>({set _(s){K(e,t,s,n)},get _(){return k(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Ny(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Im={exports:{}},Dl={},Fm={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var no=Symbol.for("react.element"),jy=Symbol.for("react.portal"),My=Symbol.for("react.fragment"),Ry=Symbol.for("react.strict_mode"),Ly=Symbol.for("react.profiler"),Ty=Symbol.for("react.provider"),_y=Symbol.for("react.context"),Py=Symbol.for("react.forward_ref"),Iy=Symbol.for("react.suspense"),Fy=Symbol.for("react.memo"),Oy=Symbol.for("react.lazy"),of=Symbol.iterator;function Dy(e){return e===null||typeof e!="object"?null:(e=of&&e[of]||e["@@iterator"],typeof e=="function"?e:null)}var Om={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dm=Object.assign,zm={};function Ys(e,t,n){this.props=e,this.context=t,this.refs=zm,this.updater=n||Om}Ys.prototype.isReactComponent={};Ys.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ys.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Am(){}Am.prototype=Ys.prototype;function Mc(e,t,n){this.props=e,this.context=t,this.refs=zm,this.updater=n||Om}var Rc=Mc.prototype=new Am;Rc.constructor=Mc;Dm(Rc,Ys.prototype);Rc.isPureReactComponent=!0;var lf=Array.isArray,$m=Object.prototype.hasOwnProperty,Lc={current:null},Um={key:!0,ref:!0,__self:!0,__source:!0};function Bm(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)$m.call(t,r)&&!Um.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:no,type:e,key:i,ref:o,props:s,_owner:Lc.current}}function zy(e,t){return{$$typeof:no,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Tc(e){return typeof e=="object"&&e!==null&&e.$$typeof===no}function Ay(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var af=/\/+/g;function ba(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ay(""+e.key):t.toString(36)}function $o(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case no:case jy:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+ba(o,0):r,lf(s)?(n="",e!=null&&(n=e.replace(af,"$&/")+"/"),$o(s,t,n,"",function(c){return c})):s!=null&&(Tc(s)&&(s=zy(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(af,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",lf(e))for(var l=0;l<e.length;l++){i=e[l];var u=r+ba(i,l);o+=$o(i,t,n,u,s)}else if(u=Dy(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=r+ba(i,l++),o+=$o(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function yo(e,t,n){if(e==null)return e;var r=[],s=0;return $o(e,r,"","",function(i){return t.call(n,i,s++)}),r}function $y(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kt={current:null},Uo={transition:null},Uy={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Uo,ReactCurrentOwner:Lc};function Wm(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:yo,forEach:function(e,t,n){yo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return yo(e,function(){t++}),t},toArray:function(e){return yo(e,function(t){return t})||[]},only:function(e){if(!Tc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=Ys;we.Fragment=My;we.Profiler=Ly;we.PureComponent=Mc;we.StrictMode=Ry;we.Suspense=Iy;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uy;we.act=Wm;we.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Dm({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Lc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)$m.call(t,u)&&!Um.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:no,type:e.type,key:s,ref:i,props:r,_owner:o}};we.createContext=function(e){return e={$$typeof:_y,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ty,_context:e},e.Consumer=e};we.createElement=Bm;we.createFactory=function(e){var t=Bm.bind(null,e);return t.type=e,t};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:Py,render:e}};we.isValidElement=Tc;we.lazy=function(e){return{$$typeof:Oy,_payload:{_status:-1,_result:e},_init:$y}};we.memo=function(e,t){return{$$typeof:Fy,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=Uo.transition;Uo.transition={};try{e()}finally{Uo.transition=t}};we.unstable_act=Wm;we.useCallback=function(e,t){return kt.current.useCallback(e,t)};we.useContext=function(e){return kt.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return kt.current.useDeferredValue(e)};we.useEffect=function(e,t){return kt.current.useEffect(e,t)};we.useId=function(){return kt.current.useId()};we.useImperativeHandle=function(e,t,n){return kt.current.useImperativeHandle(e,t,n)};we.useInsertionEffect=function(e,t){return kt.current.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return kt.current.useLayoutEffect(e,t)};we.useMemo=function(e,t){return kt.current.useMemo(e,t)};we.useReducer=function(e,t,n){return kt.current.useReducer(e,t,n)};we.useRef=function(e){return kt.current.useRef(e)};we.useState=function(e){return kt.current.useState(e)};we.useSyncExternalStore=function(e,t,n){return kt.current.useSyncExternalStore(e,t,n)};we.useTransition=function(){return kt.current.useTransition()};we.version="18.3.1";Fm.exports=we;var d=Fm.exports;const il=Ny(d);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var By=d,Wy=Symbol.for("react.element"),Hy=Symbol.for("react.fragment"),Vy=Object.prototype.hasOwnProperty,Qy=By.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ky={key:!0,ref:!0,__self:!0,__source:!0};function Hm(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Vy.call(t,r)&&!Ky.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Wy,type:e,key:i,ref:o,props:s,_owner:Qy.current}}Dl.Fragment=Hy;Dl.jsx=Hm;Dl.jsxs=Hm;Im.exports=Dl;var a=Im.exports,Vm={exports:{}},At={},Qm={exports:{}},Km={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,H){var q=F.length;F.push(H);e:for(;0<q;){var he=q-1>>>1,fe=F[he];if(0<s(fe,H))F[he]=H,F[q]=fe,q=he;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var H=F[0],q=F.pop();if(q!==H){F[0]=q;e:for(var he=0,fe=F.length,je=fe>>>1;he<je;){var W=2*(he+1)-1,Y=F[W],te=W+1,me=F[te];if(0>s(Y,q))te<fe&&0>s(me,Y)?(F[he]=me,F[te]=q,he=te):(F[he]=Y,F[W]=q,he=W);else if(te<fe&&0>s(me,q))F[he]=me,F[te]=q,he=te;else break e}}return H}function s(F,H){var q=F.sortIndex-H.sortIndex;return q!==0?q:F.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,h=null,g=3,S=!1,w=!1,N=!1,R=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(F){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=F)r(c),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(c)}}function y(F){if(N=!1,p(F),!w)if(n(u)!==null)w=!0,B(b);else{var H=n(c);H!==null&&ce(y,H.startTime-F)}}function b(F,H){w=!1,N&&(N=!1,v(E),E=-1),S=!0;var q=g;try{for(p(H),h=n(u);h!==null&&(!(h.expirationTime>H)||F&&!I());){var he=h.callback;if(typeof he=="function"){h.callback=null,g=h.priorityLevel;var fe=he(h.expirationTime<=H);H=e.unstable_now(),typeof fe=="function"?h.callback=fe:h===n(u)&&r(u),p(H)}else r(u);h=n(u)}if(h!==null)var je=!0;else{var W=n(c);W!==null&&ce(y,W.startTime-H),je=!1}return je}finally{h=null,g=q,S=!1}}var L=!1,M=null,E=-1,T=5,C=-1;function I(){return!(e.unstable_now()-C<T)}function Q(){if(M!==null){var F=e.unstable_now();C=F;var H=!0;try{H=M(!0,F)}finally{H?z():(L=!1,M=null)}}else L=!1}var z;if(typeof m=="function")z=function(){m(Q)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ie=$.port2;$.port1.onmessage=Q,z=function(){ie.postMessage(null)}}else z=function(){R(Q,0)};function B(F){M=F,L||(L=!0,z())}function ce(F,H){E=R(function(){F(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){w||S||(w=!0,B(b))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(F){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var q=g;g=H;try{return F()}finally{g=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,H){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var q=g;g=F;try{return H()}finally{g=q}},e.unstable_scheduleCallback=function(F,H,q){var he=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?he+q:he):q=he,F){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=q+fe,F={id:f++,callback:H,priorityLevel:F,startTime:q,expirationTime:fe,sortIndex:-1},q>he?(F.sortIndex=q,t(c,F),n(u)===null&&F===n(c)&&(N?(v(E),E=-1):N=!0,ce(y,q-he))):(F.sortIndex=fe,t(u,F),w||S||(w=!0,B(b))),F},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(F){var H=g;return function(){var q=g;g=H;try{return F.apply(this,arguments)}finally{g=q}}}})(Km);Qm.exports=Km;var qy=Qm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy=d,zt=qy;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qm=new Set,Li={};function es(e,t){Bs(e,t),Bs(e+"Capture",t)}function Bs(e,t){for(Li[e]=t,e=0;e<t.length;e++)qm.add(t[e])}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ou=Object.prototype.hasOwnProperty,Gy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uf={},cf={};function Xy(e){return ou.call(cf,e)?!0:ou.call(uf,e)?!1:Gy.test(e)?cf[e]=!0:(uf[e]=!0,!1)}function Jy(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Zy(e,t,n,r){if(t===null||typeof t>"u"||Jy(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ct(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ot[e]=new Ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ot[t]=new Ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ot[e]=new Ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ot[e]=new Ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ot[e]=new Ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ot[e]=new Ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ot[e]=new Ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ot[e]=new Ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ot[e]=new Ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var _c=/[\-:]([a-z])/g;function Pc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_c,Pc);ot[t]=new Ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_c,Pc);ot[t]=new Ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_c,Pc);ot[t]=new Ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ot[e]=new Ct(e,1,!1,e.toLowerCase(),null,!1,!1)});ot.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ot[e]=new Ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ic(e,t,n,r){var s=ot.hasOwnProperty(t)?ot[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Zy(t,n,s,r)&&(n=null),r||s===null?Xy(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Wn=Yy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xo=Symbol.for("react.element"),us=Symbol.for("react.portal"),cs=Symbol.for("react.fragment"),Fc=Symbol.for("react.strict_mode"),lu=Symbol.for("react.profiler"),Ym=Symbol.for("react.provider"),Gm=Symbol.for("react.context"),Oc=Symbol.for("react.forward_ref"),au=Symbol.for("react.suspense"),uu=Symbol.for("react.suspense_list"),Dc=Symbol.for("react.memo"),Yn=Symbol.for("react.lazy"),Xm=Symbol.for("react.offscreen"),df=Symbol.iterator;function ii(e){return e===null||typeof e!="object"?null:(e=df&&e[df]||e["@@iterator"],typeof e=="function"?e:null)}var ze=Object.assign,Ea;function mi(e){if(Ea===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ea=t&&t[1]||""}return`
`+Ea+e}var Na=!1;function ja(e,t){if(!e||Na)return"";Na=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{Na=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?mi(e):""}function e0(e){switch(e.tag){case 5:return mi(e.type);case 16:return mi("Lazy");case 13:return mi("Suspense");case 19:return mi("SuspenseList");case 0:case 2:case 15:return e=ja(e.type,!1),e;case 11:return e=ja(e.type.render,!1),e;case 1:return e=ja(e.type,!0),e;default:return""}}function cu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cs:return"Fragment";case us:return"Portal";case lu:return"Profiler";case Fc:return"StrictMode";case au:return"Suspense";case uu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Gm:return(e.displayName||"Context")+".Consumer";case Ym:return(e._context.displayName||"Context")+".Provider";case Oc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Dc:return t=e.displayName||null,t!==null?t:cu(e.type)||"Memo";case Yn:t=e._payload,e=e._init;try{return cu(e(t))}catch{}}return null}function t0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cu(t);case 8:return t===Fc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function n0(e){var t=Jm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wo(e){e._valueTracker||(e._valueTracker=n0(e))}function Zm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Jm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ol(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function du(e,t){var n=t.checked;return ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ff(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=xr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ep(e,t){t=t.checked,t!=null&&Ic(e,"checked",t,!1)}function fu(e,t){ep(e,t);var n=xr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?hu(e,t.type,n):t.hasOwnProperty("defaultValue")&&hu(e,t.type,xr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function hf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function hu(e,t,n){(t!=="number"||ol(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var pi=Array.isArray;function Ss(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+xr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function mu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function mf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(A(92));if(pi(n)){if(1<n.length)throw Error(A(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:xr(n)}}function tp(e,t){var n=xr(t.value),r=xr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function pf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function np(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?np(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var So,rp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(So=So||document.createElement("div"),So.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=So.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ti(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},r0=["Webkit","ms","Moz","O"];Object.keys(wi).forEach(function(e){r0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wi[t]=wi[e]})});function sp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||wi.hasOwnProperty(e)&&wi[e]?(""+t).trim():t+"px"}function ip(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=sp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var s0=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gu(e,t){if(t){if(s0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function vu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yu=null;function zc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xu=null,ks=null,Cs=null;function gf(e){if(e=io(e)){if(typeof xu!="function")throw Error(A(280));var t=e.stateNode;t&&(t=Bl(t),xu(e.stateNode,e.type,t))}}function op(e){ks?Cs?Cs.push(e):Cs=[e]:ks=e}function lp(){if(ks){var e=ks,t=Cs;if(Cs=ks=null,gf(e),t)for(e=0;e<t.length;e++)gf(t[e])}}function ap(e,t){return e(t)}function up(){}var Ma=!1;function cp(e,t,n){if(Ma)return e(t,n);Ma=!0;try{return ap(e,t,n)}finally{Ma=!1,(ks!==null||Cs!==null)&&(up(),lp())}}function _i(e,t){var n=e.stateNode;if(n===null)return null;var r=Bl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(A(231,t,typeof n));return n}var wu=!1;if(An)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){wu=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{wu=!1}function i0(e,t,n,r,s,i,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var Si=!1,ll=null,al=!1,Su=null,o0={onError:function(e){Si=!0,ll=e}};function l0(e,t,n,r,s,i,o,l,u){Si=!1,ll=null,i0.apply(o0,arguments)}function a0(e,t,n,r,s,i,o,l,u){if(l0.apply(this,arguments),Si){if(Si){var c=ll;Si=!1,ll=null}else throw Error(A(198));al||(al=!0,Su=c)}}function ts(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function dp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vf(e){if(ts(e)!==e)throw Error(A(188))}function u0(e){var t=e.alternate;if(!t){if(t=ts(e),t===null)throw Error(A(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return vf(s),e;if(i===r)return vf(s),t;i=i.sibling}throw Error(A(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?e:t}function fp(e){return e=u0(e),e!==null?hp(e):null}function hp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=hp(e);if(t!==null)return t;e=e.sibling}return null}var mp=zt.unstable_scheduleCallback,yf=zt.unstable_cancelCallback,c0=zt.unstable_shouldYield,d0=zt.unstable_requestPaint,He=zt.unstable_now,f0=zt.unstable_getCurrentPriorityLevel,Ac=zt.unstable_ImmediatePriority,pp=zt.unstable_UserBlockingPriority,ul=zt.unstable_NormalPriority,h0=zt.unstable_LowPriority,gp=zt.unstable_IdlePriority,zl=null,Sn=null;function m0(e){if(Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(zl,e,void 0,(e.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:v0,p0=Math.log,g0=Math.LN2;function v0(e){return e>>>=0,e===0?32:31-(p0(e)/g0|0)|0}var ko=64,Co=4194304;function gi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function cl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=gi(l):(i&=o,i!==0&&(r=gi(i)))}else o=n&~s,o!==0?r=gi(o):i!==0&&(r=gi(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-un(t),s=1<<n,r|=e[n],t&=~s;return r}function y0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-un(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=y0(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function ku(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vp(){var e=ko;return ko<<=1,!(ko&4194240)&&(ko=64),e}function Ra(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ro(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-un(t),e[t]=n}function w0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-un(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function $c(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-un(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Me=0;function yp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var xp,Uc,wp,Sp,kp,Cu=!1,bo=[],cr=null,dr=null,fr=null,Pi=new Map,Ii=new Map,Xn=[],S0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xf(e,t){switch(e){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Pi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ii.delete(t.pointerId)}}function li(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=io(t),t!==null&&Uc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function k0(e,t,n,r,s){switch(t){case"focusin":return cr=li(cr,e,t,n,r,s),!0;case"dragenter":return dr=li(dr,e,t,n,r,s),!0;case"mouseover":return fr=li(fr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Pi.set(i,li(Pi.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ii.set(i,li(Ii.get(i)||null,e,t,n,r,s)),!0}return!1}function Cp(e){var t=Rr(e.target);if(t!==null){var n=ts(t);if(n!==null){if(t=n.tag,t===13){if(t=dp(n),t!==null){e.blockedOn=t,kp(e.priority,function(){wp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=bu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);yu=r,n.target.dispatchEvent(r),yu=null}else return t=io(n),t!==null&&Uc(t),e.blockedOn=n,!1;t.shift()}return!0}function wf(e,t,n){Bo(e)&&n.delete(t)}function C0(){Cu=!1,cr!==null&&Bo(cr)&&(cr=null),dr!==null&&Bo(dr)&&(dr=null),fr!==null&&Bo(fr)&&(fr=null),Pi.forEach(wf),Ii.forEach(wf)}function ai(e,t){e.blockedOn===t&&(e.blockedOn=null,Cu||(Cu=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,C0)))}function Fi(e){function t(s){return ai(s,e)}if(0<bo.length){ai(bo[0],e);for(var n=1;n<bo.length;n++){var r=bo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(cr!==null&&ai(cr,e),dr!==null&&ai(dr,e),fr!==null&&ai(fr,e),Pi.forEach(t),Ii.forEach(t),n=0;n<Xn.length;n++)r=Xn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Xn.length&&(n=Xn[0],n.blockedOn===null);)Cp(n),n.blockedOn===null&&Xn.shift()}var bs=Wn.ReactCurrentBatchConfig,dl=!0;function b0(e,t,n,r){var s=Me,i=bs.transition;bs.transition=null;try{Me=1,Bc(e,t,n,r)}finally{Me=s,bs.transition=i}}function E0(e,t,n,r){var s=Me,i=bs.transition;bs.transition=null;try{Me=4,Bc(e,t,n,r)}finally{Me=s,bs.transition=i}}function Bc(e,t,n,r){if(dl){var s=bu(e,t,n,r);if(s===null)Aa(e,t,r,fl,n),xf(e,r);else if(k0(s,e,t,n,r))r.stopPropagation();else if(xf(e,r),t&4&&-1<S0.indexOf(e)){for(;s!==null;){var i=io(s);if(i!==null&&xp(i),i=bu(e,t,n,r),i===null&&Aa(e,t,r,fl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Aa(e,t,r,null,n)}}var fl=null;function bu(e,t,n,r){if(fl=null,e=zc(r),e=Rr(e),e!==null)if(t=ts(e),t===null)e=null;else if(n=t.tag,n===13){if(e=dp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fl=e,null}function bp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(f0()){case Ac:return 1;case pp:return 4;case ul:case h0:return 16;case gp:return 536870912;default:return 16}default:return 16}}var ar=null,Wc=null,Wo=null;function Ep(){if(Wo)return Wo;var e,t=Wc,n=t.length,r,s="value"in ar?ar.value:ar.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Wo=s.slice(e,1<r?1-r:void 0)}function Ho(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Eo(){return!0}function Sf(){return!1}function $t(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Eo:Sf,this.isPropagationStopped=Sf,this}return ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Eo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Eo)},persist:function(){},isPersistent:Eo}),t}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hc=$t(Gs),so=ze({},Gs,{view:0,detail:0}),N0=$t(so),La,Ta,ui,Al=ze({},so,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ui&&(ui&&e.type==="mousemove"?(La=e.screenX-ui.screenX,Ta=e.screenY-ui.screenY):Ta=La=0,ui=e),La)},movementY:function(e){return"movementY"in e?e.movementY:Ta}}),kf=$t(Al),j0=ze({},Al,{dataTransfer:0}),M0=$t(j0),R0=ze({},so,{relatedTarget:0}),_a=$t(R0),L0=ze({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),T0=$t(L0),_0=ze({},Gs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),P0=$t(_0),I0=ze({},Gs,{data:0}),Cf=$t(I0),F0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},O0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},D0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=D0[e])?!!t[e]:!1}function Vc(){return z0}var A0=ze({},so,{key:function(e){if(e.key){var t=F0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ho(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?O0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vc,charCode:function(e){return e.type==="keypress"?Ho(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ho(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$0=$t(A0),U0=ze({},Al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bf=$t(U0),B0=ze({},so,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vc}),W0=$t(B0),H0=ze({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),V0=$t(H0),Q0=ze({},Al,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),K0=$t(Q0),q0=[9,13,27,32],Qc=An&&"CompositionEvent"in window,ki=null;An&&"documentMode"in document&&(ki=document.documentMode);var Y0=An&&"TextEvent"in window&&!ki,Np=An&&(!Qc||ki&&8<ki&&11>=ki),Ef=" ",Nf=!1;function jp(e,t){switch(e){case"keyup":return q0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ds=!1;function G0(e,t){switch(e){case"compositionend":return Mp(t);case"keypress":return t.which!==32?null:(Nf=!0,Ef);case"textInput":return e=t.data,e===Ef&&Nf?null:e;default:return null}}function X0(e,t){if(ds)return e==="compositionend"||!Qc&&jp(e,t)?(e=Ep(),Wo=Wc=ar=null,ds=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Np&&t.locale!=="ko"?null:t.data;default:return null}}var J0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!J0[e.type]:t==="textarea"}function Rp(e,t,n,r){op(r),t=hl(t,"onChange"),0<t.length&&(n=new Hc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ci=null,Oi=null;function Z0(e){$p(e,0)}function $l(e){var t=ms(e);if(Zm(t))return e}function ex(e,t){if(e==="change")return t}var Lp=!1;if(An){var Pa;if(An){var Ia="oninput"in document;if(!Ia){var Mf=document.createElement("div");Mf.setAttribute("oninput","return;"),Ia=typeof Mf.oninput=="function"}Pa=Ia}else Pa=!1;Lp=Pa&&(!document.documentMode||9<document.documentMode)}function Rf(){Ci&&(Ci.detachEvent("onpropertychange",Tp),Oi=Ci=null)}function Tp(e){if(e.propertyName==="value"&&$l(Oi)){var t=[];Rp(t,Oi,e,zc(e)),cp(Z0,t)}}function tx(e,t,n){e==="focusin"?(Rf(),Ci=t,Oi=n,Ci.attachEvent("onpropertychange",Tp)):e==="focusout"&&Rf()}function nx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $l(Oi)}function rx(e,t){if(e==="click")return $l(t)}function sx(e,t){if(e==="input"||e==="change")return $l(t)}function ix(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dn=typeof Object.is=="function"?Object.is:ix;function Di(e,t){if(dn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ou.call(t,s)||!dn(e[s],t[s]))return!1}return!0}function Lf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tf(e,t){var n=Lf(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lf(n)}}function _p(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_p(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pp(){for(var e=window,t=ol();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ol(e.document)}return t}function Kc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ox(e){var t=Pp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&_p(n.ownerDocument.documentElement,n)){if(r!==null&&Kc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Tf(n,i);var o=Tf(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lx=An&&"documentMode"in document&&11>=document.documentMode,fs=null,Eu=null,bi=null,Nu=!1;function _f(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nu||fs==null||fs!==ol(r)||(r=fs,"selectionStart"in r&&Kc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bi&&Di(bi,r)||(bi=r,r=hl(Eu,"onSelect"),0<r.length&&(t=new Hc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fs)))}function No(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hs={animationend:No("Animation","AnimationEnd"),animationiteration:No("Animation","AnimationIteration"),animationstart:No("Animation","AnimationStart"),transitionend:No("Transition","TransitionEnd")},Fa={},Ip={};An&&(Ip=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function Ul(e){if(Fa[e])return Fa[e];if(!hs[e])return e;var t=hs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ip)return Fa[e]=t[n];return e}var Fp=Ul("animationend"),Op=Ul("animationiteration"),Dp=Ul("animationstart"),zp=Ul("transitionend"),Ap=new Map,Pf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){Ap.set(e,t),es(t,[e])}for(var Oa=0;Oa<Pf.length;Oa++){var Da=Pf[Oa],ax=Da.toLowerCase(),ux=Da[0].toUpperCase()+Da.slice(1);Sr(ax,"on"+ux)}Sr(Fp,"onAnimationEnd");Sr(Op,"onAnimationIteration");Sr(Dp,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(zp,"onTransitionEnd");Bs("onMouseEnter",["mouseout","mouseover"]);Bs("onMouseLeave",["mouseout","mouseover"]);Bs("onPointerEnter",["pointerout","pointerover"]);Bs("onPointerLeave",["pointerout","pointerover"]);es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));es("onBeforeInput",["compositionend","keypress","textInput","paste"]);es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cx=new Set("cancel close invalid load scroll toggle".split(" ").concat(vi));function If(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,a0(r,t,void 0,e),e.currentTarget=null}function $p(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;If(s,l,c),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;If(s,l,c),i=u}}}if(al)throw e=Su,al=!1,Su=null,e}function Te(e,t){var n=t[Tu];n===void 0&&(n=t[Tu]=new Set);var r=e+"__bubble";n.has(r)||(Up(t,e,2,!1),n.add(r))}function za(e,t,n){var r=0;t&&(r|=4),Up(n,e,r,t)}var jo="_reactListening"+Math.random().toString(36).slice(2);function zi(e){if(!e[jo]){e[jo]=!0,qm.forEach(function(n){n!=="selectionchange"&&(cx.has(n)||za(n,!1,e),za(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[jo]||(t[jo]=!0,za("selectionchange",!1,t))}}function Up(e,t,n,r){switch(bp(t)){case 1:var s=b0;break;case 4:s=E0;break;default:s=Bc}n=s.bind(null,t,n,e),s=void 0,!wu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Aa(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Rr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}cp(function(){var c=i,f=zc(n),h=[];e:{var g=Ap.get(e);if(g!==void 0){var S=Hc,w=e;switch(e){case"keypress":if(Ho(n)===0)break e;case"keydown":case"keyup":S=$0;break;case"focusin":w="focus",S=_a;break;case"focusout":w="blur",S=_a;break;case"beforeblur":case"afterblur":S=_a;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=kf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=M0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=W0;break;case Fp:case Op:case Dp:S=T0;break;case zp:S=V0;break;case"scroll":S=N0;break;case"wheel":S=K0;break;case"copy":case"cut":case"paste":S=P0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=bf}var N=(t&4)!==0,R=!N&&e==="scroll",v=N?g!==null?g+"Capture":null:g;N=[];for(var m=c,p;m!==null;){p=m;var y=p.stateNode;if(p.tag===5&&y!==null&&(p=y,v!==null&&(y=_i(m,v),y!=null&&N.push(Ai(m,y,p)))),R)break;m=m.return}0<N.length&&(g=new S(g,w,null,n,f),h.push({event:g,listeners:N}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",g&&n!==yu&&(w=n.relatedTarget||n.fromElement)&&(Rr(w)||w[$n]))break e;if((S||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,S?(w=n.relatedTarget||n.toElement,S=c,w=w?Rr(w):null,w!==null&&(R=ts(w),w!==R||w.tag!==5&&w.tag!==6)&&(w=null)):(S=null,w=c),S!==w)){if(N=kf,y="onMouseLeave",v="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(N=bf,y="onPointerLeave",v="onPointerEnter",m="pointer"),R=S==null?g:ms(S),p=w==null?g:ms(w),g=new N(y,m+"leave",S,n,f),g.target=R,g.relatedTarget=p,y=null,Rr(f)===c&&(N=new N(v,m+"enter",w,n,f),N.target=p,N.relatedTarget=R,y=N),R=y,S&&w)t:{for(N=S,v=w,m=0,p=N;p;p=ss(p))m++;for(p=0,y=v;y;y=ss(y))p++;for(;0<m-p;)N=ss(N),m--;for(;0<p-m;)v=ss(v),p--;for(;m--;){if(N===v||v!==null&&N===v.alternate)break t;N=ss(N),v=ss(v)}N=null}else N=null;S!==null&&Ff(h,g,S,N,!1),w!==null&&R!==null&&Ff(h,R,w,N,!0)}}e:{if(g=c?ms(c):window,S=g.nodeName&&g.nodeName.toLowerCase(),S==="select"||S==="input"&&g.type==="file")var b=ex;else if(jf(g))if(Lp)b=sx;else{b=nx;var L=tx}else(S=g.nodeName)&&S.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(b=rx);if(b&&(b=b(e,c))){Rp(h,b,n,f);break e}L&&L(e,g,c),e==="focusout"&&(L=g._wrapperState)&&L.controlled&&g.type==="number"&&hu(g,"number",g.value)}switch(L=c?ms(c):window,e){case"focusin":(jf(L)||L.contentEditable==="true")&&(fs=L,Eu=c,bi=null);break;case"focusout":bi=Eu=fs=null;break;case"mousedown":Nu=!0;break;case"contextmenu":case"mouseup":case"dragend":Nu=!1,_f(h,n,f);break;case"selectionchange":if(lx)break;case"keydown":case"keyup":_f(h,n,f)}var M;if(Qc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ds?jp(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Np&&n.locale!=="ko"&&(ds||E!=="onCompositionStart"?E==="onCompositionEnd"&&ds&&(M=Ep()):(ar=f,Wc="value"in ar?ar.value:ar.textContent,ds=!0)),L=hl(c,E),0<L.length&&(E=new Cf(E,e,null,n,f),h.push({event:E,listeners:L}),M?E.data=M:(M=Mp(n),M!==null&&(E.data=M)))),(M=Y0?G0(e,n):X0(e,n))&&(c=hl(c,"onBeforeInput"),0<c.length&&(f=new Cf("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:c}),f.data=M))}$p(h,t)})}function Ai(e,t,n){return{instance:e,listener:t,currentTarget:n}}function hl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_i(e,n),i!=null&&r.unshift(Ai(e,i,s)),i=_i(e,t),i!=null&&r.push(Ai(e,i,s))),e=e.return}return r}function ss(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ff(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,s?(u=_i(n,i),u!=null&&o.unshift(Ai(n,u,l))):s||(u=_i(n,i),u!=null&&o.push(Ai(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var dx=/\r\n?/g,fx=/\u0000|\uFFFD/g;function Of(e){return(typeof e=="string"?e:""+e).replace(dx,`
`).replace(fx,"")}function Mo(e,t,n){if(t=Of(t),Of(e)!==t&&n)throw Error(A(425))}function ml(){}var ju=null,Mu=null;function Ru(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Lu=typeof setTimeout=="function"?setTimeout:void 0,hx=typeof clearTimeout=="function"?clearTimeout:void 0,Df=typeof Promise=="function"?Promise:void 0,mx=typeof queueMicrotask=="function"?queueMicrotask:typeof Df<"u"?function(e){return Df.resolve(null).then(e).catch(px)}:Lu;function px(e){setTimeout(function(){throw e})}function $a(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Fi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Fi(t)}function hr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function zf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Xs=Math.random().toString(36).slice(2),wn="__reactFiber$"+Xs,$i="__reactProps$"+Xs,$n="__reactContainer$"+Xs,Tu="__reactEvents$"+Xs,gx="__reactListeners$"+Xs,vx="__reactHandles$"+Xs;function Rr(e){var t=e[wn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$n]||n[wn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=zf(e);e!==null;){if(n=e[wn])return n;e=zf(e)}return t}e=n,n=e.parentNode}return null}function io(e){return e=e[wn]||e[$n],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ms(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function Bl(e){return e[$i]||null}var _u=[],ps=-1;function kr(e){return{current:e}}function _e(e){0>ps||(e.current=_u[ps],_u[ps]=null,ps--)}function Le(e,t){ps++,_u[ps]=e.current,e.current=t}var wr={},ft=kr(wr),Rt=kr(!1),Kr=wr;function Ws(e,t){var n=e.type.contextTypes;if(!n)return wr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Lt(e){return e=e.childContextTypes,e!=null}function pl(){_e(Rt),_e(ft)}function Af(e,t,n){if(ft.current!==wr)throw Error(A(168));Le(ft,t),Le(Rt,n)}function Bp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(A(108,t0(e)||"Unknown",s));return ze({},n,r)}function gl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wr,Kr=ft.current,Le(ft,e),Le(Rt,Rt.current),!0}function $f(e,t,n){var r=e.stateNode;if(!r)throw Error(A(169));n?(e=Bp(e,t,Kr),r.__reactInternalMemoizedMergedChildContext=e,_e(Rt),_e(ft),Le(ft,e)):_e(Rt),Le(Rt,n)}var Rn=null,Wl=!1,Ua=!1;function Wp(e){Rn===null?Rn=[e]:Rn.push(e)}function yx(e){Wl=!0,Wp(e)}function Cr(){if(!Ua&&Rn!==null){Ua=!0;var e=0,t=Me;try{var n=Rn;for(Me=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Rn=null,Wl=!1}catch(s){throw Rn!==null&&(Rn=Rn.slice(e+1)),mp(Ac,Cr),s}finally{Me=t,Ua=!1}}return null}var gs=[],vs=0,vl=null,yl=0,Ht=[],Vt=0,qr=null,In=1,Fn="";function jr(e,t){gs[vs++]=yl,gs[vs++]=vl,vl=e,yl=t}function Hp(e,t,n){Ht[Vt++]=In,Ht[Vt++]=Fn,Ht[Vt++]=qr,qr=e;var r=In;e=Fn;var s=32-un(r)-1;r&=~(1<<s),n+=1;var i=32-un(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,In=1<<32-un(t)+s|n<<s|r,Fn=i+e}else In=1<<i|n<<s|r,Fn=e}function qc(e){e.return!==null&&(jr(e,1),Hp(e,1,0))}function Yc(e){for(;e===vl;)vl=gs[--vs],gs[vs]=null,yl=gs[--vs],gs[vs]=null;for(;e===qr;)qr=Ht[--Vt],Ht[Vt]=null,Fn=Ht[--Vt],Ht[Vt]=null,In=Ht[--Vt],Ht[Vt]=null}var Dt=null,Ot=null,Pe=!1,ln=null;function Vp(e,t){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Uf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dt=e,Ot=hr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dt=e,Ot=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=qr!==null?{id:In,overflow:Fn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Dt=e,Ot=null,!0):!1;default:return!1}}function Pu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Iu(e){if(Pe){var t=Ot;if(t){var n=t;if(!Uf(e,t)){if(Pu(e))throw Error(A(418));t=hr(n.nextSibling);var r=Dt;t&&Uf(e,t)?Vp(r,n):(e.flags=e.flags&-4097|2,Pe=!1,Dt=e)}}else{if(Pu(e))throw Error(A(418));e.flags=e.flags&-4097|2,Pe=!1,Dt=e}}}function Bf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dt=e}function Ro(e){if(e!==Dt)return!1;if(!Pe)return Bf(e),Pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ru(e.type,e.memoizedProps)),t&&(t=Ot)){if(Pu(e))throw Qp(),Error(A(418));for(;t;)Vp(e,t),t=hr(t.nextSibling)}if(Bf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ot=hr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ot=null}}else Ot=Dt?hr(e.stateNode.nextSibling):null;return!0}function Qp(){for(var e=Ot;e;)e=hr(e.nextSibling)}function Hs(){Ot=Dt=null,Pe=!1}function Gc(e){ln===null?ln=[e]:ln.push(e)}var xx=Wn.ReactCurrentBatchConfig;function ci(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,e))}return e}function Lo(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wf(e){var t=e._init;return t(e._payload)}function Kp(e){function t(v,m){if(e){var p=v.deletions;p===null?(v.deletions=[m],v.flags|=16):p.push(m)}}function n(v,m){if(!e)return null;for(;m!==null;)t(v,m),m=m.sibling;return null}function r(v,m){for(v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function s(v,m){return v=vr(v,m),v.index=0,v.sibling=null,v}function i(v,m,p){return v.index=p,e?(p=v.alternate,p!==null?(p=p.index,p<m?(v.flags|=2,m):p):(v.flags|=2,m)):(v.flags|=1048576,m)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,m,p,y){return m===null||m.tag!==6?(m=qa(p,v.mode,y),m.return=v,m):(m=s(m,p),m.return=v,m)}function u(v,m,p,y){var b=p.type;return b===cs?f(v,m,p.props.children,y,p.key):m!==null&&(m.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Yn&&Wf(b)===m.type)?(y=s(m,p.props),y.ref=ci(v,m,p),y.return=v,y):(y=Xo(p.type,p.key,p.props,null,v.mode,y),y.ref=ci(v,m,p),y.return=v,y)}function c(v,m,p,y){return m===null||m.tag!==4||m.stateNode.containerInfo!==p.containerInfo||m.stateNode.implementation!==p.implementation?(m=Ya(p,v.mode,y),m.return=v,m):(m=s(m,p.children||[]),m.return=v,m)}function f(v,m,p,y,b){return m===null||m.tag!==7?(m=Qr(p,v.mode,y,b),m.return=v,m):(m=s(m,p),m.return=v,m)}function h(v,m,p){if(typeof m=="string"&&m!==""||typeof m=="number")return m=qa(""+m,v.mode,p),m.return=v,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case xo:return p=Xo(m.type,m.key,m.props,null,v.mode,p),p.ref=ci(v,null,m),p.return=v,p;case us:return m=Ya(m,v.mode,p),m.return=v,m;case Yn:var y=m._init;return h(v,y(m._payload),p)}if(pi(m)||ii(m))return m=Qr(m,v.mode,p,null),m.return=v,m;Lo(v,m)}return null}function g(v,m,p,y){var b=m!==null?m.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return b!==null?null:l(v,m,""+p,y);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case xo:return p.key===b?u(v,m,p,y):null;case us:return p.key===b?c(v,m,p,y):null;case Yn:return b=p._init,g(v,m,b(p._payload),y)}if(pi(p)||ii(p))return b!==null?null:f(v,m,p,y,null);Lo(v,p)}return null}function S(v,m,p,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return v=v.get(p)||null,l(m,v,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case xo:return v=v.get(y.key===null?p:y.key)||null,u(m,v,y,b);case us:return v=v.get(y.key===null?p:y.key)||null,c(m,v,y,b);case Yn:var L=y._init;return S(v,m,p,L(y._payload),b)}if(pi(y)||ii(y))return v=v.get(p)||null,f(m,v,y,b,null);Lo(m,y)}return null}function w(v,m,p,y){for(var b=null,L=null,M=m,E=m=0,T=null;M!==null&&E<p.length;E++){M.index>E?(T=M,M=null):T=M.sibling;var C=g(v,M,p[E],y);if(C===null){M===null&&(M=T);break}e&&M&&C.alternate===null&&t(v,M),m=i(C,m,E),L===null?b=C:L.sibling=C,L=C,M=T}if(E===p.length)return n(v,M),Pe&&jr(v,E),b;if(M===null){for(;E<p.length;E++)M=h(v,p[E],y),M!==null&&(m=i(M,m,E),L===null?b=M:L.sibling=M,L=M);return Pe&&jr(v,E),b}for(M=r(v,M);E<p.length;E++)T=S(M,v,E,p[E],y),T!==null&&(e&&T.alternate!==null&&M.delete(T.key===null?E:T.key),m=i(T,m,E),L===null?b=T:L.sibling=T,L=T);return e&&M.forEach(function(I){return t(v,I)}),Pe&&jr(v,E),b}function N(v,m,p,y){var b=ii(p);if(typeof b!="function")throw Error(A(150));if(p=b.call(p),p==null)throw Error(A(151));for(var L=b=null,M=m,E=m=0,T=null,C=p.next();M!==null&&!C.done;E++,C=p.next()){M.index>E?(T=M,M=null):T=M.sibling;var I=g(v,M,C.value,y);if(I===null){M===null&&(M=T);break}e&&M&&I.alternate===null&&t(v,M),m=i(I,m,E),L===null?b=I:L.sibling=I,L=I,M=T}if(C.done)return n(v,M),Pe&&jr(v,E),b;if(M===null){for(;!C.done;E++,C=p.next())C=h(v,C.value,y),C!==null&&(m=i(C,m,E),L===null?b=C:L.sibling=C,L=C);return Pe&&jr(v,E),b}for(M=r(v,M);!C.done;E++,C=p.next())C=S(M,v,E,C.value,y),C!==null&&(e&&C.alternate!==null&&M.delete(C.key===null?E:C.key),m=i(C,m,E),L===null?b=C:L.sibling=C,L=C);return e&&M.forEach(function(Q){return t(v,Q)}),Pe&&jr(v,E),b}function R(v,m,p,y){if(typeof p=="object"&&p!==null&&p.type===cs&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case xo:e:{for(var b=p.key,L=m;L!==null;){if(L.key===b){if(b=p.type,b===cs){if(L.tag===7){n(v,L.sibling),m=s(L,p.props.children),m.return=v,v=m;break e}}else if(L.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Yn&&Wf(b)===L.type){n(v,L.sibling),m=s(L,p.props),m.ref=ci(v,L,p),m.return=v,v=m;break e}n(v,L);break}else t(v,L);L=L.sibling}p.type===cs?(m=Qr(p.props.children,v.mode,y,p.key),m.return=v,v=m):(y=Xo(p.type,p.key,p.props,null,v.mode,y),y.ref=ci(v,m,p),y.return=v,v=y)}return o(v);case us:e:{for(L=p.key;m!==null;){if(m.key===L)if(m.tag===4&&m.stateNode.containerInfo===p.containerInfo&&m.stateNode.implementation===p.implementation){n(v,m.sibling),m=s(m,p.children||[]),m.return=v,v=m;break e}else{n(v,m);break}else t(v,m);m=m.sibling}m=Ya(p,v.mode,y),m.return=v,v=m}return o(v);case Yn:return L=p._init,R(v,m,L(p._payload),y)}if(pi(p))return w(v,m,p,y);if(ii(p))return N(v,m,p,y);Lo(v,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,m!==null&&m.tag===6?(n(v,m.sibling),m=s(m,p),m.return=v,v=m):(n(v,m),m=qa(p,v.mode,y),m.return=v,v=m),o(v)):n(v,m)}return R}var Vs=Kp(!0),qp=Kp(!1),xl=kr(null),wl=null,ys=null,Xc=null;function Jc(){Xc=ys=wl=null}function Zc(e){var t=xl.current;_e(xl),e._currentValue=t}function Fu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){wl=e,Xc=ys=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mt=!0),e.firstContext=null)}function Yt(e){var t=e._currentValue;if(Xc!==e)if(e={context:e,memoizedValue:t,next:null},ys===null){if(wl===null)throw Error(A(308));ys=e,wl.dependencies={lanes:0,firstContext:e}}else ys=ys.next=e;return t}var Lr=null;function ed(e){Lr===null?Lr=[e]:Lr.push(e)}function Yp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ed(t)):(n.next=s.next,s.next=n),t.interleaved=n,Un(e,r)}function Un(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Gn=!1;function td(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function On(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Un(e,n)}return s=r.interleaved,s===null?(t.next=t,ed(r)):(t.next=s.next,s.next=t),r.interleaved=t,Un(e,n)}function Vo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$c(e,n)}}function Hf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Sl(e,t,n,r){var s=e.updateQueue;Gn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(i!==null){var h=s.baseState;o=0,f=c=u=null,l=i;do{var g=l.lane,S=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,N=l;switch(g=t,S=n,N.tag){case 1:if(w=N.payload,typeof w=="function"){h=w.call(S,h,g);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=N.payload,g=typeof w=="function"?w.call(S,h,g):w,g==null)break e;h=ze({},h,g);break e;case 2:Gn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else S={eventTime:S,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=S,u=h):f=f.next=S,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Gr|=o,e.lanes=o,e.memoizedState=h}}function Vf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(A(191,s));s.call(r)}}}var oo={},kn=kr(oo),Ui=kr(oo),Bi=kr(oo);function Tr(e){if(e===oo)throw Error(A(174));return e}function nd(e,t){switch(Le(Bi,t),Le(Ui,e),Le(kn,oo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pu(t,e)}_e(kn),Le(kn,t)}function Qs(){_e(kn),_e(Ui),_e(Bi)}function Xp(e){Tr(Bi.current);var t=Tr(kn.current),n=pu(t,e.type);t!==n&&(Le(Ui,e),Le(kn,n))}function rd(e){Ui.current===e&&(_e(kn),_e(Ui))}var Oe=kr(0);function kl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ba=[];function sd(){for(var e=0;e<Ba.length;e++)Ba[e]._workInProgressVersionPrimary=null;Ba.length=0}var Qo=Wn.ReactCurrentDispatcher,Wa=Wn.ReactCurrentBatchConfig,Yr=0,De=null,Xe=null,tt=null,Cl=!1,Ei=!1,Wi=0,wx=0;function ut(){throw Error(A(321))}function id(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!dn(e[n],t[n]))return!1;return!0}function od(e,t,n,r,s,i){if(Yr=i,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qo.current=e===null||e.memoizedState===null?bx:Ex,e=n(r,s),Ei){i=0;do{if(Ei=!1,Wi=0,25<=i)throw Error(A(301));i+=1,tt=Xe=null,t.updateQueue=null,Qo.current=Nx,e=n(r,s)}while(Ei)}if(Qo.current=bl,t=Xe!==null&&Xe.next!==null,Yr=0,tt=Xe=De=null,Cl=!1,t)throw Error(A(300));return e}function ld(){var e=Wi!==0;return Wi=0,e}function gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?De.memoizedState=tt=e:tt=tt.next=e,tt}function Gt(){if(Xe===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=tt===null?De.memoizedState:tt.next;if(t!==null)tt=t,Xe=e;else{if(e===null)throw Error(A(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},tt===null?De.memoizedState=tt=e:tt=tt.next=e}return tt}function Hi(e,t){return typeof t=="function"?t(e):t}function Ha(e){var t=Gt(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=Xe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,c=i;do{var f=c.lane;if((Yr&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,o=r):u=u.next=h,De.lanes|=f,Gr|=f}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=l,dn(r,t.memoizedState)||(Mt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,De.lanes|=i,Gr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Va(e){var t=Gt(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);dn(i,t.memoizedState)||(Mt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Jp(){}function Zp(e,t){var n=De,r=Gt(),s=t(),i=!dn(r.memoizedState,s);if(i&&(r.memoizedState=s,Mt=!0),r=r.queue,ad(ng.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,Vi(9,tg.bind(null,n,r,s,t),void 0,null),nt===null)throw Error(A(349));Yr&30||eg(n,t,s)}return s}function eg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function tg(e,t,n,r){t.value=n,t.getSnapshot=r,rg(t)&&sg(e)}function ng(e,t,n){return n(function(){rg(t)&&sg(e)})}function rg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!dn(e,n)}catch{return!0}}function sg(e){var t=Un(e,1);t!==null&&cn(t,e,1,-1)}function Qf(e){var t=gn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:e},t.queue=e,e=e.dispatch=Cx.bind(null,De,e),[t.memoizedState,e]}function Vi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ig(){return Gt().memoizedState}function Ko(e,t,n,r){var s=gn();De.flags|=e,s.memoizedState=Vi(1|t,n,void 0,r===void 0?null:r)}function Hl(e,t,n,r){var s=Gt();r=r===void 0?null:r;var i=void 0;if(Xe!==null){var o=Xe.memoizedState;if(i=o.destroy,r!==null&&id(r,o.deps)){s.memoizedState=Vi(t,n,i,r);return}}De.flags|=e,s.memoizedState=Vi(1|t,n,i,r)}function Kf(e,t){return Ko(8390656,8,e,t)}function ad(e,t){return Hl(2048,8,e,t)}function og(e,t){return Hl(4,2,e,t)}function lg(e,t){return Hl(4,4,e,t)}function ag(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ug(e,t,n){return n=n!=null?n.concat([e]):null,Hl(4,4,ag.bind(null,t,e),n)}function ud(){}function cg(e,t){var n=Gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&id(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function dg(e,t){var n=Gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&id(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function fg(e,t,n){return Yr&21?(dn(n,t)||(n=vp(),De.lanes|=n,Gr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mt=!0),e.memoizedState=n)}function Sx(e,t){var n=Me;Me=n!==0&&4>n?n:4,e(!0);var r=Wa.transition;Wa.transition={};try{e(!1),t()}finally{Me=n,Wa.transition=r}}function hg(){return Gt().memoizedState}function kx(e,t,n){var r=gr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},mg(e))pg(t,n);else if(n=Yp(e,t,n,r),n!==null){var s=St();cn(n,e,r,s),gg(n,t,r)}}function Cx(e,t,n){var r=gr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(mg(e))pg(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,dn(l,o)){var u=t.interleaved;u===null?(s.next=s,ed(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=Yp(e,t,s,r),n!==null&&(s=St(),cn(n,e,r,s),gg(n,t,r))}}function mg(e){var t=e.alternate;return e===De||t!==null&&t===De}function pg(e,t){Ei=Cl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gg(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$c(e,n)}}var bl={readContext:Yt,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},bx={readContext:Yt,useCallback:function(e,t){return gn().memoizedState=[e,t===void 0?null:t],e},useContext:Yt,useEffect:Kf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ko(4194308,4,ag.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ko(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ko(4,2,e,t)},useMemo:function(e,t){var n=gn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=gn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=kx.bind(null,De,e),[r.memoizedState,e]},useRef:function(e){var t=gn();return e={current:e},t.memoizedState=e},useState:Qf,useDebugValue:ud,useDeferredValue:function(e){return gn().memoizedState=e},useTransition:function(){var e=Qf(!1),t=e[0];return e=Sx.bind(null,e[1]),gn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=De,s=gn();if(Pe){if(n===void 0)throw Error(A(407));n=n()}else{if(n=t(),nt===null)throw Error(A(349));Yr&30||eg(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Kf(ng.bind(null,r,i,e),[e]),r.flags|=2048,Vi(9,tg.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=gn(),t=nt.identifierPrefix;if(Pe){var n=Fn,r=In;n=(r&~(1<<32-un(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Wi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=wx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ex={readContext:Yt,useCallback:cg,useContext:Yt,useEffect:ad,useImperativeHandle:ug,useInsertionEffect:og,useLayoutEffect:lg,useMemo:dg,useReducer:Ha,useRef:ig,useState:function(){return Ha(Hi)},useDebugValue:ud,useDeferredValue:function(e){var t=Gt();return fg(t,Xe.memoizedState,e)},useTransition:function(){var e=Ha(Hi)[0],t=Gt().memoizedState;return[e,t]},useMutableSource:Jp,useSyncExternalStore:Zp,useId:hg,unstable_isNewReconciler:!1},Nx={readContext:Yt,useCallback:cg,useContext:Yt,useEffect:ad,useImperativeHandle:ug,useInsertionEffect:og,useLayoutEffect:lg,useMemo:dg,useReducer:Va,useRef:ig,useState:function(){return Va(Hi)},useDebugValue:ud,useDeferredValue:function(e){var t=Gt();return Xe===null?t.memoizedState=e:fg(t,Xe.memoizedState,e)},useTransition:function(){var e=Va(Hi)[0],t=Gt().memoizedState;return[e,t]},useMutableSource:Jp,useSyncExternalStore:Zp,useId:hg,unstable_isNewReconciler:!1};function tn(e,t){if(e&&e.defaultProps){t=ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ou(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Vl={isMounted:function(e){return(e=e._reactInternals)?ts(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=St(),s=gr(e),i=On(r,s);i.payload=t,n!=null&&(i.callback=n),t=mr(e,i,s),t!==null&&(cn(t,e,s,r),Vo(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=St(),s=gr(e),i=On(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=mr(e,i,s),t!==null&&(cn(t,e,s,r),Vo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=St(),r=gr(e),s=On(n,r);s.tag=2,t!=null&&(s.callback=t),t=mr(e,s,r),t!==null&&(cn(t,e,r,n),Vo(t,e,r))}};function qf(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Di(n,r)||!Di(s,i):!0}function vg(e,t,n){var r=!1,s=wr,i=t.contextType;return typeof i=="object"&&i!==null?i=Yt(i):(s=Lt(t)?Kr:ft.current,r=t.contextTypes,i=(r=r!=null)?Ws(e,s):wr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Yf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vl.enqueueReplaceState(t,t.state,null)}function Du(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},td(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Yt(i):(i=Lt(t)?Kr:ft.current,s.context=Ws(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ou(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Vl.enqueueReplaceState(s,s.state,null),Sl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ks(e,t){try{var n="",r=t;do n+=e0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Qa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function zu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var jx=typeof WeakMap=="function"?WeakMap:Map;function yg(e,t,n){n=On(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Nl||(Nl=!0,qu=r),zu(e,t)},n}function xg(e,t,n){n=On(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){zu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){zu(e,t),typeof r!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Gf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new jx;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Ux.bind(null,e,t,n),t.then(e,e))}function Xf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Jf(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=On(-1,1),t.tag=2,mr(n,t,1))),n.lanes|=1),e)}var Mx=Wn.ReactCurrentOwner,Mt=!1;function xt(e,t,n,r){t.child=e===null?qp(t,null,n,r):Vs(t,e.child,n,r)}function Zf(e,t,n,r,s){n=n.render;var i=t.ref;return Es(t,s),r=od(e,t,n,r,i,s),n=ld(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bn(e,t,s)):(Pe&&n&&qc(t),t.flags|=1,xt(e,t,r,s),t.child)}function eh(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!vd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,wg(e,t,i,r,s)):(e=Xo(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Di,n(o,r)&&e.ref===t.ref)return Bn(e,t,s)}return t.flags|=1,e=vr(i,r),e.ref=t.ref,e.return=t,t.child=e}function wg(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Di(i,r)&&e.ref===t.ref)if(Mt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Mt=!0);else return t.lanes=e.lanes,Bn(e,t,s)}return Au(e,t,n,r,s)}function Sg(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(ws,Ft),Ft|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Le(ws,Ft),Ft|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Le(ws,Ft),Ft|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Le(ws,Ft),Ft|=r;return xt(e,t,s,n),t.child}function kg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Au(e,t,n,r,s){var i=Lt(n)?Kr:ft.current;return i=Ws(t,i),Es(t,s),n=od(e,t,n,r,i,s),r=ld(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bn(e,t,s)):(Pe&&r&&qc(t),t.flags|=1,xt(e,t,n,s),t.child)}function th(e,t,n,r,s){if(Lt(n)){var i=!0;gl(t)}else i=!1;if(Es(t,s),t.stateNode===null)qo(e,t),vg(t,n,r),Du(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Yt(c):(c=Lt(n)?Kr:ft.current,c=Ws(t,c));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&Yf(t,o,r,c),Gn=!1;var g=t.memoizedState;o.state=g,Sl(t,r,o,s),u=t.memoizedState,l!==r||g!==u||Rt.current||Gn?(typeof f=="function"&&(Ou(t,n,f,r),u=t.memoizedState),(l=Gn||qf(t,n,l,r,g,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Gp(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:tn(t.type,l),o.props=c,h=t.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Yt(u):(u=Lt(n)?Kr:ft.current,u=Ws(t,u));var S=n.getDerivedStateFromProps;(f=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||g!==u)&&Yf(t,o,r,u),Gn=!1,g=t.memoizedState,o.state=g,Sl(t,r,o,s);var w=t.memoizedState;l!==h||g!==w||Rt.current||Gn?(typeof S=="function"&&(Ou(t,n,S,r),w=t.memoizedState),(c=Gn||qf(t,n,c,r,g,w,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return $u(e,t,n,r,i,s)}function $u(e,t,n,r,s,i){kg(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&$f(t,n,!1),Bn(e,t,i);r=t.stateNode,Mx.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Vs(t,e.child,null,i),t.child=Vs(t,null,l,i)):xt(e,t,l,i),t.memoizedState=r.state,s&&$f(t,n,!0),t.child}function Cg(e){var t=e.stateNode;t.pendingContext?Af(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Af(e,t.context,!1),nd(e,t.containerInfo)}function nh(e,t,n,r,s){return Hs(),Gc(s),t.flags|=256,xt(e,t,n,r),t.child}var Uu={dehydrated:null,treeContext:null,retryLane:0};function Bu(e){return{baseLanes:e,cachePool:null,transitions:null}}function bg(e,t,n){var r=t.pendingProps,s=Oe.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Le(Oe,s&1),e===null)return Iu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ql(o,r,0,null),e=Qr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Bu(n),t.memoizedState=Uu,e):cd(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Rx(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=vr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=vr(l,i):(i=Qr(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Bu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Uu,r}return i=e.child,e=i.sibling,r=vr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function cd(e,t){return t=ql({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function To(e,t,n,r){return r!==null&&Gc(r),Vs(t,e.child,null,n),e=cd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rx(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Qa(Error(A(422))),To(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=ql({mode:"visible",children:r.children},s,0,null),i=Qr(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Vs(t,e.child,null,o),t.child.memoizedState=Bu(o),t.memoizedState=Uu,i);if(!(t.mode&1))return To(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(A(419)),r=Qa(i,r,void 0),To(e,t,o,r)}if(l=(o&e.childLanes)!==0,Mt||l){if(r=nt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Un(e,s),cn(r,e,s,-1))}return gd(),r=Qa(Error(A(421))),To(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Bx.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ot=hr(s.nextSibling),Dt=t,Pe=!0,ln=null,e!==null&&(Ht[Vt++]=In,Ht[Vt++]=Fn,Ht[Vt++]=qr,In=e.id,Fn=e.overflow,qr=t),t=cd(t,r.children),t.flags|=4096,t)}function rh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Fu(e.return,t,n)}function Ka(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Eg(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(xt(e,t,r.children,n),r=Oe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rh(e,n,t);else if(e.tag===19)rh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Le(Oe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&kl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ka(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&kl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ka(t,!0,n,null,i);break;case"together":Ka(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Gr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,n=vr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=vr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Lx(e,t,n){switch(t.tag){case 3:Cg(t),Hs();break;case 5:Xp(t);break;case 1:Lt(t.type)&&gl(t);break;case 4:nd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Le(xl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Le(Oe,Oe.current&1),t.flags|=128,null):n&t.child.childLanes?bg(e,t,n):(Le(Oe,Oe.current&1),e=Bn(e,t,n),e!==null?e.sibling:null);Le(Oe,Oe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Eg(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Le(Oe,Oe.current),r)break;return null;case 22:case 23:return t.lanes=0,Sg(e,t,n)}return Bn(e,t,n)}var Ng,Wu,jg,Mg;Ng=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wu=function(){};jg=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Tr(kn.current);var i=null;switch(n){case"input":s=du(e,s),r=du(e,r),i=[];break;case"select":s=ze({},s,{value:void 0}),r=ze({},r,{value:void 0}),i=[];break;case"textarea":s=mu(e,s),r=mu(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ml)}gu(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Li.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Li.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Te("scroll",e),i||l===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Mg=function(e,t,n,r){n!==r&&(t.flags|=4)};function di(e,t){if(!Pe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ct(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Tx(e,t,n){var r=t.pendingProps;switch(Yc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(t),null;case 1:return Lt(t.type)&&pl(),ct(t),null;case 3:return r=t.stateNode,Qs(),_e(Rt),_e(ft),sd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ro(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ln!==null&&(Xu(ln),ln=null))),Wu(e,t),ct(t),null;case 5:rd(t);var s=Tr(Bi.current);if(n=t.type,e!==null&&t.stateNode!=null)jg(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(A(166));return ct(t),null}if(e=Tr(kn.current),Ro(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[wn]=t,r[$i]=i,e=(t.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(s=0;s<vi.length;s++)Te(vi[s],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":ff(r,i),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Te("invalid",r);break;case"textarea":mf(r,i),Te("invalid",r)}gu(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Mo(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Mo(r.textContent,l,e),s=["children",""+l]):Li.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Te("scroll",r)}switch(n){case"input":wo(r),hf(r,i,!0);break;case"textarea":wo(r),pf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ml)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=np(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[wn]=t,e[$i]=r,Ng(e,t,!1,!1),t.stateNode=e;e:{switch(o=vu(n,r),n){case"dialog":Te("cancel",e),Te("close",e),s=r;break;case"iframe":case"object":case"embed":Te("load",e),s=r;break;case"video":case"audio":for(s=0;s<vi.length;s++)Te(vi[s],e);s=r;break;case"source":Te("error",e),s=r;break;case"img":case"image":case"link":Te("error",e),Te("load",e),s=r;break;case"details":Te("toggle",e),s=r;break;case"input":ff(e,r),s=du(e,r),Te("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ze({},r,{value:void 0}),Te("invalid",e);break;case"textarea":mf(e,r),s=mu(e,r),Te("invalid",e);break;default:s=r}gu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?ip(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&rp(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ti(e,u):typeof u=="number"&&Ti(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Li.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Te("scroll",e):u!=null&&Ic(e,i,u,o))}switch(n){case"input":wo(e),hf(e,r,!1);break;case"textarea":wo(e),pf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+xr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Ss(e,!!r.multiple,i,!1):r.defaultValue!=null&&Ss(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ml)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ct(t),null;case 6:if(e&&t.stateNode!=null)Mg(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(A(166));if(n=Tr(Bi.current),Tr(kn.current),Ro(t)){if(r=t.stateNode,n=t.memoizedProps,r[wn]=t,(i=r.nodeValue!==n)&&(e=Dt,e!==null))switch(e.tag){case 3:Mo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Mo(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wn]=t,t.stateNode=r}return ct(t),null;case 13:if(_e(Oe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pe&&Ot!==null&&t.mode&1&&!(t.flags&128))Qp(),Hs(),t.flags|=98560,i=!1;else if(i=Ro(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(A(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(A(317));i[wn]=t}else Hs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ct(t),i=!1}else ln!==null&&(Xu(ln),ln=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Oe.current&1?Ze===0&&(Ze=3):gd())),t.updateQueue!==null&&(t.flags|=4),ct(t),null);case 4:return Qs(),Wu(e,t),e===null&&zi(t.stateNode.containerInfo),ct(t),null;case 10:return Zc(t.type._context),ct(t),null;case 17:return Lt(t.type)&&pl(),ct(t),null;case 19:if(_e(Oe),i=t.memoizedState,i===null)return ct(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)di(i,!1);else{if(Ze!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=kl(e),o!==null){for(t.flags|=128,di(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Le(Oe,Oe.current&1|2),t.child}e=e.sibling}i.tail!==null&&He()>qs&&(t.flags|=128,r=!0,di(i,!1),t.lanes=4194304)}else{if(!r)if(e=kl(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),di(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Pe)return ct(t),null}else 2*He()-i.renderingStartTime>qs&&n!==1073741824&&(t.flags|=128,r=!0,di(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=He(),t.sibling=null,n=Oe.current,Le(Oe,r?n&1|2:n&1),t):(ct(t),null);case 22:case 23:return pd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ft&1073741824&&(ct(t),t.subtreeFlags&6&&(t.flags|=8192)):ct(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function _x(e,t){switch(Yc(t),t.tag){case 1:return Lt(t.type)&&pl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qs(),_e(Rt),_e(ft),sd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return rd(t),null;case 13:if(_e(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));Hs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _e(Oe),null;case 4:return Qs(),null;case 10:return Zc(t.type._context),null;case 22:case 23:return pd(),null;case 24:return null;default:return null}}var _o=!1,dt=!1,Px=typeof WeakSet=="function"?WeakSet:Set,J=null;function xs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(e,t,r)}else n.current=null}function Hu(e,t,n){try{n()}catch(r){Ue(e,t,r)}}var sh=!1;function Ix(e,t){if(ju=dl,e=Pp(),Kc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,h=e,g=null;t:for(;;){for(var S;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(S=h.firstChild)!==null;)g=h,h=S;for(;;){if(h===e)break t;if(g===n&&++c===s&&(l=o),g===i&&++f===r&&(u=o),(S=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mu={focusedElem:e,selectionRange:n},dl=!1,J=t;J!==null;)if(t=J,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,J=e;else for(;J!==null;){t=J;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var N=w.memoizedProps,R=w.memoizedState,v=t.stateNode,m=v.getSnapshotBeforeUpdate(t.elementType===t.type?N:tn(t.type,N),R);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(y){Ue(t,t.return,y)}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}return w=sh,sh=!1,w}function Ni(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Hu(t,n,i)}s=s.next}while(s!==r)}}function Ql(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Vu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Rg(e){var t=e.alternate;t!==null&&(e.alternate=null,Rg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wn],delete t[$i],delete t[Tu],delete t[gx],delete t[vx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Lg(e){return e.tag===5||e.tag===3||e.tag===4}function ih(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Lg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ml));else if(r!==4&&(e=e.child,e!==null))for(Qu(e,t,n),e=e.sibling;e!==null;)Qu(e,t,n),e=e.sibling}function Ku(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ku(e,t,n),e=e.sibling;e!==null;)Ku(e,t,n),e=e.sibling}var st=null,on=!1;function Qn(e,t,n){for(n=n.child;n!==null;)Tg(e,t,n),n=n.sibling}function Tg(e,t,n){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(zl,n)}catch{}switch(n.tag){case 5:dt||xs(n,t);case 6:var r=st,s=on;st=null,Qn(e,t,n),st=r,on=s,st!==null&&(on?(e=st,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(on?(e=st,n=n.stateNode,e.nodeType===8?$a(e.parentNode,n):e.nodeType===1&&$a(e,n),Fi(e)):$a(st,n.stateNode));break;case 4:r=st,s=on,st=n.stateNode.containerInfo,on=!0,Qn(e,t,n),st=r,on=s;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Hu(n,t,o),s=s.next}while(s!==r)}Qn(e,t,n);break;case 1:if(!dt&&(xs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ue(n,t,l)}Qn(e,t,n);break;case 21:Qn(e,t,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,Qn(e,t,n),dt=r):Qn(e,t,n);break;default:Qn(e,t,n)}}function oh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Px),t.forEach(function(r){var s=Wx.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Zt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:st=l.stateNode,on=!1;break e;case 3:st=l.stateNode.containerInfo,on=!0;break e;case 4:st=l.stateNode.containerInfo,on=!0;break e}l=l.return}if(st===null)throw Error(A(160));Tg(i,o,s),st=null,on=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Ue(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)_g(t,e),t=t.sibling}function _g(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zt(t,e),pn(e),r&4){try{Ni(3,e,e.return),Ql(3,e)}catch(N){Ue(e,e.return,N)}try{Ni(5,e,e.return)}catch(N){Ue(e,e.return,N)}}break;case 1:Zt(t,e),pn(e),r&512&&n!==null&&xs(n,n.return);break;case 5:if(Zt(t,e),pn(e),r&512&&n!==null&&xs(n,n.return),e.flags&32){var s=e.stateNode;try{Ti(s,"")}catch(N){Ue(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ep(s,i),vu(l,o);var c=vu(l,i);for(o=0;o<u.length;o+=2){var f=u[o],h=u[o+1];f==="style"?ip(s,h):f==="dangerouslySetInnerHTML"?rp(s,h):f==="children"?Ti(s,h):Ic(s,f,h,c)}switch(l){case"input":fu(s,i);break;case"textarea":tp(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?Ss(s,!!i.multiple,S,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ss(s,!!i.multiple,i.defaultValue,!0):Ss(s,!!i.multiple,i.multiple?[]:"",!1))}s[$i]=i}catch(N){Ue(e,e.return,N)}}break;case 6:if(Zt(t,e),pn(e),r&4){if(e.stateNode===null)throw Error(A(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(N){Ue(e,e.return,N)}}break;case 3:if(Zt(t,e),pn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fi(t.containerInfo)}catch(N){Ue(e,e.return,N)}break;case 4:Zt(t,e),pn(e);break;case 13:Zt(t,e),pn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hd=He())),r&4&&oh(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(dt=(c=dt)||f,Zt(t,e),dt=c):Zt(t,e),pn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(J=e,f=e.child;f!==null;){for(h=J=f;J!==null;){switch(g=J,S=g.child,g.tag){case 0:case 11:case 14:case 15:Ni(4,g,g.return);break;case 1:xs(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(N){Ue(r,n,N)}}break;case 5:xs(g,g.return);break;case 22:if(g.memoizedState!==null){ah(h);continue}}S!==null?(S.return=g,J=S):ah(h)}f=f.sibling}e:for(f=null,h=e;;){if(h.tag===5){if(f===null){f=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=sp("display",o))}catch(N){Ue(e,e.return,N)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(N){Ue(e,e.return,N)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Zt(t,e),pn(e),r&4&&oh(e);break;case 21:break;default:Zt(t,e),pn(e)}}function pn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Lg(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ti(s,""),r.flags&=-33);var i=ih(e);Ku(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ih(e);Qu(e,l,o);break;default:throw Error(A(161))}}catch(u){Ue(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fx(e,t,n){J=e,Pg(e)}function Pg(e,t,n){for(var r=(e.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||_o;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||dt;l=_o;var c=dt;if(_o=o,(dt=u)&&!c)for(J=s;J!==null;)o=J,u=o.child,o.tag===22&&o.memoizedState!==null?uh(s):u!==null?(u.return=o,J=u):uh(s);for(;i!==null;)J=i,Pg(i),i=i.sibling;J=s,_o=l,dt=c}lh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):lh(e)}}function lh(e){for(;J!==null;){var t=J;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dt||Ql(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!dt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:tn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Vf(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Vf(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Fi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}dt||t.flags&512&&Vu(t)}catch(g){Ue(t,t.return,g)}}if(t===e){J=null;break}if(n=t.sibling,n!==null){n.return=t.return,J=n;break}J=t.return}}function ah(e){for(;J!==null;){var t=J;if(t===e){J=null;break}var n=t.sibling;if(n!==null){n.return=t.return,J=n;break}J=t.return}}function uh(e){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ql(4,t)}catch(u){Ue(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){Ue(t,s,u)}}var i=t.return;try{Vu(t)}catch(u){Ue(t,i,u)}break;case 5:var o=t.return;try{Vu(t)}catch(u){Ue(t,o,u)}}}catch(u){Ue(t,t.return,u)}if(t===e){J=null;break}var l=t.sibling;if(l!==null){l.return=t.return,J=l;break}J=t.return}}var Ox=Math.ceil,El=Wn.ReactCurrentDispatcher,dd=Wn.ReactCurrentOwner,qt=Wn.ReactCurrentBatchConfig,ke=0,nt=null,qe=null,it=0,Ft=0,ws=kr(0),Ze=0,Qi=null,Gr=0,Kl=0,fd=0,ji=null,jt=null,hd=0,qs=1/0,Mn=null,Nl=!1,qu=null,pr=null,Po=!1,ur=null,jl=0,Mi=0,Yu=null,Yo=-1,Go=0;function St(){return ke&6?He():Yo!==-1?Yo:Yo=He()}function gr(e){return e.mode&1?ke&2&&it!==0?it&-it:xx.transition!==null?(Go===0&&(Go=vp()),Go):(e=Me,e!==0||(e=window.event,e=e===void 0?16:bp(e.type)),e):1}function cn(e,t,n,r){if(50<Mi)throw Mi=0,Yu=null,Error(A(185));ro(e,n,r),(!(ke&2)||e!==nt)&&(e===nt&&(!(ke&2)&&(Kl|=n),Ze===4&&Jn(e,it)),Tt(e,r),n===1&&ke===0&&!(t.mode&1)&&(qs=He()+500,Wl&&Cr()))}function Tt(e,t){var n=e.callbackNode;x0(e,t);var r=cl(e,e===nt?it:0);if(r===0)n!==null&&yf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&yf(n),t===1)e.tag===0?yx(ch.bind(null,e)):Wp(ch.bind(null,e)),mx(function(){!(ke&6)&&Cr()}),n=null;else{switch(yp(r)){case 1:n=Ac;break;case 4:n=pp;break;case 16:n=ul;break;case 536870912:n=gp;break;default:n=ul}n=Ug(n,Ig.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ig(e,t){if(Yo=-1,Go=0,ke&6)throw Error(A(327));var n=e.callbackNode;if(Ns()&&e.callbackNode!==n)return null;var r=cl(e,e===nt?it:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ml(e,r);else{t=r;var s=ke;ke|=2;var i=Og();(nt!==e||it!==t)&&(Mn=null,qs=He()+500,Vr(e,t));do try{Ax();break}catch(l){Fg(e,l)}while(!0);Jc(),El.current=i,ke=s,qe!==null?t=0:(nt=null,it=0,t=Ze)}if(t!==0){if(t===2&&(s=ku(e),s!==0&&(r=s,t=Gu(e,s))),t===1)throw n=Qi,Vr(e,0),Jn(e,r),Tt(e,He()),n;if(t===6)Jn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Dx(s)&&(t=Ml(e,r),t===2&&(i=ku(e),i!==0&&(r=i,t=Gu(e,i))),t===1))throw n=Qi,Vr(e,0),Jn(e,r),Tt(e,He()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(A(345));case 2:Mr(e,jt,Mn);break;case 3:if(Jn(e,r),(r&130023424)===r&&(t=hd+500-He(),10<t)){if(cl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){St(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Lu(Mr.bind(null,e,jt,Mn),t);break}Mr(e,jt,Mn);break;case 4:if(Jn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-un(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ox(r/1960))-r,10<r){e.timeoutHandle=Lu(Mr.bind(null,e,jt,Mn),r);break}Mr(e,jt,Mn);break;case 5:Mr(e,jt,Mn);break;default:throw Error(A(329))}}}return Tt(e,He()),e.callbackNode===n?Ig.bind(null,e):null}function Gu(e,t){var n=ji;return e.current.memoizedState.isDehydrated&&(Vr(e,t).flags|=256),e=Ml(e,t),e!==2&&(t=jt,jt=n,t!==null&&Xu(t)),e}function Xu(e){jt===null?jt=e:jt.push.apply(jt,e)}function Dx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!dn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jn(e,t){for(t&=~fd,t&=~Kl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-un(t),r=1<<n;e[n]=-1,t&=~r}}function ch(e){if(ke&6)throw Error(A(327));Ns();var t=cl(e,0);if(!(t&1))return Tt(e,He()),null;var n=Ml(e,t);if(e.tag!==0&&n===2){var r=ku(e);r!==0&&(t=r,n=Gu(e,r))}if(n===1)throw n=Qi,Vr(e,0),Jn(e,t),Tt(e,He()),n;if(n===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mr(e,jt,Mn),Tt(e,He()),null}function md(e,t){var n=ke;ke|=1;try{return e(t)}finally{ke=n,ke===0&&(qs=He()+500,Wl&&Cr())}}function Xr(e){ur!==null&&ur.tag===0&&!(ke&6)&&Ns();var t=ke;ke|=1;var n=qt.transition,r=Me;try{if(qt.transition=null,Me=1,e)return e()}finally{Me=r,qt.transition=n,ke=t,!(ke&6)&&Cr()}}function pd(){Ft=ws.current,_e(ws)}function Vr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,hx(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(Yc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pl();break;case 3:Qs(),_e(Rt),_e(ft),sd();break;case 5:rd(r);break;case 4:Qs();break;case 13:_e(Oe);break;case 19:_e(Oe);break;case 10:Zc(r.type._context);break;case 22:case 23:pd()}n=n.return}if(nt=e,qe=e=vr(e.current,null),it=Ft=t,Ze=0,Qi=null,fd=Kl=Gr=0,jt=ji=null,Lr!==null){for(t=0;t<Lr.length;t++)if(n=Lr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Lr=null}return e}function Fg(e,t){do{var n=qe;try{if(Jc(),Qo.current=bl,Cl){for(var r=De.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Cl=!1}if(Yr=0,tt=Xe=De=null,Ei=!1,Wi=0,dd.current=null,n===null||n.return===null){Ze=1,Qi=t,qe=null;break}e:{var i=e,o=n.return,l=n,u=t;if(t=it,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var S=Xf(o);if(S!==null){S.flags&=-257,Jf(S,o,l,i,t),S.mode&1&&Gf(i,c,t),t=S,u=c;var w=t.updateQueue;if(w===null){var N=new Set;N.add(u),t.updateQueue=N}else w.add(u);break e}else{if(!(t&1)){Gf(i,c,t),gd();break e}u=Error(A(426))}}else if(Pe&&l.mode&1){var R=Xf(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Jf(R,o,l,i,t),Gc(Ks(u,l));break e}}i=u=Ks(u,l),Ze!==4&&(Ze=2),ji===null?ji=[i]:ji.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=yg(i,u,t);Hf(i,v);break e;case 1:l=u;var m=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(pr===null||!pr.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var y=xg(i,l,t);Hf(i,y);break e}}i=i.return}while(i!==null)}zg(n)}catch(b){t=b,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function Og(){var e=El.current;return El.current=bl,e===null?bl:e}function gd(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),nt===null||!(Gr&268435455)&&!(Kl&268435455)||Jn(nt,it)}function Ml(e,t){var n=ke;ke|=2;var r=Og();(nt!==e||it!==t)&&(Mn=null,Vr(e,t));do try{zx();break}catch(s){Fg(e,s)}while(!0);if(Jc(),ke=n,El.current=r,qe!==null)throw Error(A(261));return nt=null,it=0,Ze}function zx(){for(;qe!==null;)Dg(qe)}function Ax(){for(;qe!==null&&!c0();)Dg(qe)}function Dg(e){var t=$g(e.alternate,e,Ft);e.memoizedProps=e.pendingProps,t===null?zg(e):qe=t,dd.current=null}function zg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=_x(n,t),n!==null){n.flags&=32767,qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ze=6,qe=null;return}}else if(n=Tx(n,t,Ft),n!==null){qe=n;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);Ze===0&&(Ze=5)}function Mr(e,t,n){var r=Me,s=qt.transition;try{qt.transition=null,Me=1,$x(e,t,n,r)}finally{qt.transition=s,Me=r}return null}function $x(e,t,n,r){do Ns();while(ur!==null);if(ke&6)throw Error(A(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(w0(e,i),e===nt&&(qe=nt=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Po||(Po=!0,Ug(ul,function(){return Ns(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=qt.transition,qt.transition=null;var o=Me;Me=1;var l=ke;ke|=4,dd.current=null,Ix(e,n),_g(n,e),ox(Mu),dl=!!ju,Mu=ju=null,e.current=n,Fx(n),d0(),ke=l,Me=o,qt.transition=i}else e.current=n;if(Po&&(Po=!1,ur=e,jl=s),i=e.pendingLanes,i===0&&(pr=null),m0(n.stateNode),Tt(e,He()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Nl)throw Nl=!1,e=qu,qu=null,e;return jl&1&&e.tag!==0&&Ns(),i=e.pendingLanes,i&1?e===Yu?Mi++:(Mi=0,Yu=e):Mi=0,Cr(),null}function Ns(){if(ur!==null){var e=yp(jl),t=qt.transition,n=Me;try{if(qt.transition=null,Me=16>e?16:e,ur===null)var r=!1;else{if(e=ur,ur=null,jl=0,ke&6)throw Error(A(331));var s=ke;for(ke|=4,J=e.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(J=c;J!==null;){var f=J;switch(f.tag){case 0:case 11:case 15:Ni(8,f,i)}var h=f.child;if(h!==null)h.return=f,J=h;else for(;J!==null;){f=J;var g=f.sibling,S=f.return;if(Rg(f),f===c){J=null;break}if(g!==null){g.return=S,J=g;break}J=S}}}var w=i.alternate;if(w!==null){var N=w.child;if(N!==null){w.child=null;do{var R=N.sibling;N.sibling=null,N=R}while(N!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ni(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,J=v;break e}J=i.return}}var m=e.current;for(J=m;J!==null;){o=J;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,J=p;else e:for(o=m;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ql(9,l)}}catch(b){Ue(l,l.return,b)}if(l===o){J=null;break e}var y=l.sibling;if(y!==null){y.return=l.return,J=y;break e}J=l.return}}if(ke=s,Cr(),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(zl,e)}catch{}r=!0}return r}finally{Me=n,qt.transition=t}}return!1}function dh(e,t,n){t=Ks(n,t),t=yg(e,t,1),e=mr(e,t,1),t=St(),e!==null&&(ro(e,1,t),Tt(e,t))}function Ue(e,t,n){if(e.tag===3)dh(e,e,n);else for(;t!==null;){if(t.tag===3){dh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pr===null||!pr.has(r))){e=Ks(n,e),e=xg(t,e,1),t=mr(t,e,1),e=St(),t!==null&&(ro(t,1,e),Tt(t,e));break}}t=t.return}}function Ux(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=St(),e.pingedLanes|=e.suspendedLanes&n,nt===e&&(it&n)===n&&(Ze===4||Ze===3&&(it&130023424)===it&&500>He()-hd?Vr(e,0):fd|=n),Tt(e,t)}function Ag(e,t){t===0&&(e.mode&1?(t=Co,Co<<=1,!(Co&130023424)&&(Co=4194304)):t=1);var n=St();e=Un(e,t),e!==null&&(ro(e,t,n),Tt(e,n))}function Bx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ag(e,n)}function Wx(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(t),Ag(e,n)}var $g;$g=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rt.current)Mt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Mt=!1,Lx(e,t,n);Mt=!!(e.flags&131072)}else Mt=!1,Pe&&t.flags&1048576&&Hp(t,yl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var s=Ws(t,ft.current);Es(t,n),s=od(null,t,r,e,s,n);var i=ld();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lt(r)?(i=!0,gl(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,td(t),s.updater=Vl,t.stateNode=s,s._reactInternals=t,Du(t,r,e,n),t=$u(null,t,r,!0,i,n)):(t.tag=0,Pe&&i&&qc(t),xt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Vx(r),e=tn(r,e),s){case 0:t=Au(null,t,r,e,n);break e;case 1:t=th(null,t,r,e,n);break e;case 11:t=Zf(null,t,r,e,n);break e;case 14:t=eh(null,t,r,tn(r.type,e),n);break e}throw Error(A(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:tn(r,s),Au(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:tn(r,s),th(e,t,r,s,n);case 3:e:{if(Cg(t),e===null)throw Error(A(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Gp(e,t),Sl(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ks(Error(A(423)),t),t=nh(e,t,r,n,s);break e}else if(r!==s){s=Ks(Error(A(424)),t),t=nh(e,t,r,n,s);break e}else for(Ot=hr(t.stateNode.containerInfo.firstChild),Dt=t,Pe=!0,ln=null,n=qp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Hs(),r===s){t=Bn(e,t,n);break e}xt(e,t,r,n)}t=t.child}return t;case 5:return Xp(t),e===null&&Iu(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ru(r,s)?o=null:i!==null&&Ru(r,i)&&(t.flags|=32),kg(e,t),xt(e,t,o,n),t.child;case 6:return e===null&&Iu(t),null;case 13:return bg(e,t,n);case 4:return nd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Vs(t,null,r,n):xt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:tn(r,s),Zf(e,t,r,s,n);case 7:return xt(e,t,t.pendingProps,n),t.child;case 8:return xt(e,t,t.pendingProps.children,n),t.child;case 12:return xt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Le(xl,r._currentValue),r._currentValue=o,i!==null)if(dn(i.value,o)){if(i.children===s.children&&!Rt.current){t=Bn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=On(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Fu(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(A(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Fu(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}xt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Es(t,n),s=Yt(s),r=r(s),t.flags|=1,xt(e,t,r,n),t.child;case 14:return r=t.type,s=tn(r,t.pendingProps),s=tn(r.type,s),eh(e,t,r,s,n);case 15:return wg(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:tn(r,s),qo(e,t),t.tag=1,Lt(r)?(e=!0,gl(t)):e=!1,Es(t,n),vg(t,r,s),Du(t,r,s,n),$u(null,t,r,!0,e,n);case 19:return Eg(e,t,n);case 22:return Sg(e,t,n)}throw Error(A(156,t.tag))};function Ug(e,t){return mp(e,t)}function Hx(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(e,t,n,r){return new Hx(e,t,n,r)}function vd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vx(e){if(typeof e=="function")return vd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Oc)return 11;if(e===Dc)return 14}return 2}function vr(e,t){var n=e.alternate;return n===null?(n=Kt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Xo(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")vd(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case cs:return Qr(n.children,s,i,t);case Fc:o=8,s|=8;break;case lu:return e=Kt(12,n,t,s|2),e.elementType=lu,e.lanes=i,e;case au:return e=Kt(13,n,t,s),e.elementType=au,e.lanes=i,e;case uu:return e=Kt(19,n,t,s),e.elementType=uu,e.lanes=i,e;case Xm:return ql(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ym:o=10;break e;case Gm:o=9;break e;case Oc:o=11;break e;case Dc:o=14;break e;case Yn:o=16,r=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=Kt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Qr(e,t,n,r){return e=Kt(7,e,r,t),e.lanes=n,e}function ql(e,t,n,r){return e=Kt(22,e,r,t),e.elementType=Xm,e.lanes=n,e.stateNode={isHidden:!1},e}function qa(e,t,n){return e=Kt(6,e,null,t),e.lanes=n,e}function Ya(e,t,n){return t=Kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qx(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ra(0),this.expirationTimes=Ra(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ra(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yd(e,t,n,r,s,i,o,l,u){return e=new Qx(e,t,n,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Kt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},td(i),e}function Kx(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:us,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Bg(e){if(!e)return wr;e=e._reactInternals;e:{if(ts(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var n=e.type;if(Lt(n))return Bp(e,n,t)}return t}function Wg(e,t,n,r,s,i,o,l,u){return e=yd(n,r,!0,e,s,i,o,l,u),e.context=Bg(null),n=e.current,r=St(),s=gr(n),i=On(r,s),i.callback=t??null,mr(n,i,s),e.current.lanes=s,ro(e,s,r),Tt(e,r),e}function Yl(e,t,n,r){var s=t.current,i=St(),o=gr(s);return n=Bg(n),t.context===null?t.context=n:t.pendingContext=n,t=On(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=mr(s,t,o),e!==null&&(cn(e,s,o,i),Vo(e,s,o)),o}function Rl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function xd(e,t){fh(e,t),(e=e.alternate)&&fh(e,t)}function qx(){return null}var Hg=typeof reportError=="function"?reportError:function(e){console.error(e)};function wd(e){this._internalRoot=e}Gl.prototype.render=wd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));Yl(e,t,null,null)};Gl.prototype.unmount=wd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xr(function(){Yl(null,e,null,null)}),t[$n]=null}};function Gl(e){this._internalRoot=e}Gl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xn.length&&t!==0&&t<Xn[n].priority;n++);Xn.splice(n,0,e),n===0&&Cp(e)}};function Sd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hh(){}function Yx(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Rl(o);i.call(c)}}var o=Wg(t,r,e,0,null,!1,!1,"",hh);return e._reactRootContainer=o,e[$n]=o.current,zi(e.nodeType===8?e.parentNode:e),Xr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=Rl(u);l.call(c)}}var u=yd(e,0,!1,null,null,!1,!1,"",hh);return e._reactRootContainer=u,e[$n]=u.current,zi(e.nodeType===8?e.parentNode:e),Xr(function(){Yl(t,u,n,r)}),u}function Jl(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Rl(o);l.call(u)}}Yl(t,o,e,s)}else o=Yx(n,t,e,s,r);return Rl(o)}xp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gi(t.pendingLanes);n!==0&&($c(t,n|1),Tt(t,He()),!(ke&6)&&(qs=He()+500,Cr()))}break;case 13:Xr(function(){var r=Un(e,1);if(r!==null){var s=St();cn(r,e,1,s)}}),xd(e,1)}};Uc=function(e){if(e.tag===13){var t=Un(e,134217728);if(t!==null){var n=St();cn(t,e,134217728,n)}xd(e,134217728)}};wp=function(e){if(e.tag===13){var t=gr(e),n=Un(e,t);if(n!==null){var r=St();cn(n,e,t,r)}xd(e,t)}};Sp=function(){return Me};kp=function(e,t){var n=Me;try{return Me=e,t()}finally{Me=n}};xu=function(e,t,n){switch(t){case"input":if(fu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Bl(r);if(!s)throw Error(A(90));Zm(r),fu(r,s)}}}break;case"textarea":tp(e,n);break;case"select":t=n.value,t!=null&&Ss(e,!!n.multiple,t,!1)}};ap=md;up=Xr;var Gx={usingClientEntryPoint:!1,Events:[io,ms,Bl,op,lp,md]},fi={findFiberByHostInstance:Rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xx={bundleType:fi.bundleType,version:fi.version,rendererPackageName:fi.rendererPackageName,rendererConfig:fi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fp(e),e===null?null:e.stateNode},findFiberByHostInstance:fi.findFiberByHostInstance||qx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Io=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Io.isDisabled&&Io.supportsFiber)try{zl=Io.inject(Xx),Sn=Io}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gx;At.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sd(t))throw Error(A(200));return Kx(e,t,null,n)};At.createRoot=function(e,t){if(!Sd(e))throw Error(A(299));var n=!1,r="",s=Hg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=yd(e,1,!1,null,null,n,!1,r,s),e[$n]=t.current,zi(e.nodeType===8?e.parentNode:e),new wd(t)};At.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=fp(t),e=e===null?null:e.stateNode,e};At.flushSync=function(e){return Xr(e)};At.hydrate=function(e,t,n){if(!Xl(t))throw Error(A(200));return Jl(null,e,t,!0,n)};At.hydrateRoot=function(e,t,n){if(!Sd(e))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Hg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Wg(t,null,e,1,n??null,s,!1,i,o),e[$n]=t.current,zi(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Gl(t)};At.render=function(e,t,n){if(!Xl(t))throw Error(A(200));return Jl(null,e,t,!1,n)};At.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(A(40));return e._reactRootContainer?(Xr(function(){Jl(null,null,e,!1,function(){e._reactRootContainer=null,e[$n]=null})}),!0):!1};At.unstable_batchedUpdates=md;At.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return Jl(e,t,n,!1,r)};At.version="18.3.1-next-f1338f8080-20240426";function Vg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vg)}catch(e){console.error(e)}}Vg(),Vm.exports=At;var kd=Vm.exports,Qg,mh=kd;Qg=mh.createRoot,mh.hydrateRoot;var Js=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Jx={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Zn,jc,Cm,Zx=(Cm=class{constructor(){se(this,Zn,Jx);se(this,jc,!1)}setTimeoutProvider(e){K(this,Zn,e)}setTimeout(e,t){return k(this,Zn).setTimeout(e,t)}clearTimeout(e){k(this,Zn).clearTimeout(e)}setInterval(e,t){return k(this,Zn).setInterval(e,t)}clearInterval(e){k(this,Zn).clearInterval(e)}},Zn=new WeakMap,jc=new WeakMap,Cm),_r=new Zx;function ew(e){setTimeout(e,0)}var Jr=typeof window>"u"||"Deno"in globalThis;function wt(){}function tw(e,t){return typeof e=="function"?e(t):e}function Ju(e){return typeof e=="number"&&e>=0&&e!==1/0}function Kg(e,t){return Math.max(e+(t||0)-Date.now(),0)}function yr(e,t){return typeof e=="function"?e(t):e}function Wt(e,t){return typeof e=="function"?e(t):e}function ph(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==Cd(o,t.options))return!1}else if(!Ki(t.queryKey,o))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function gh(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Zr(t.options.mutationKey)!==Zr(i))return!1}else if(!Ki(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Cd(e,t){return((t==null?void 0:t.queryKeyHashFn)||Zr)(e)}function Zr(e){return JSON.stringify(e,(t,n)=>Zu(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ki(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Ki(e[n],t[n])):!1}var nw=Object.prototype.hasOwnProperty;function qg(e,t){if(e===t)return e;const n=vh(e)&&vh(t);if(!n&&!(Zu(e)&&Zu(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let u=0;for(let c=0;c<o;c++){const f=n?c:i[c],h=e[f],g=t[f];if(h===g){l[f]=h,(n?c<s:nw.call(e,f))&&u++;continue}if(h===null||g===null||typeof h!="object"||typeof g!="object"){l[f]=g;continue}const S=qg(h,g);l[f]=S,S===h&&u++}return s===o&&u===s?e:l}function Ll(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function vh(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Zu(e){if(!yh(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!yh(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function yh(e){return Object.prototype.toString.call(e)==="[object Object]"}function rw(e){return new Promise(t=>{_r.setTimeout(t,e)})}function ec(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?qg(e,t):t}function sw(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function iw(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var bd=Symbol();function Yg(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===bd?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Gg(e,t){return typeof e=="function"?e(...t):!!e}function ow(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var Or,er,Ls,bm,lw=(bm=class extends Js{constructor(){super();se(this,Or);se(this,er);se(this,Ls);K(this,Ls,t=>{if(!Jr&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){k(this,er)||this.setEventListener(k(this,Ls))}onUnsubscribe(){var t;this.hasListeners()||((t=k(this,er))==null||t.call(this),K(this,er,void 0))}setEventListener(t){var n;K(this,Ls,t),(n=k(this,er))==null||n.call(this),K(this,er,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){k(this,Or)!==t&&(K(this,Or,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof k(this,Or)=="boolean"?k(this,Or):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Or=new WeakMap,er=new WeakMap,Ls=new WeakMap,bm),Ed=new lw;function tc(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var aw=ew;function uw(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=aw;const i=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;t++;try{u=l()}finally{t--,t||o()}return u},batchCalls:l=>(...u)=>{i(()=>{l(...u)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Je=uw(),Ts,tr,_s,Em,cw=(Em=class extends Js{constructor(){super();se(this,Ts,!0);se(this,tr);se(this,_s);K(this,_s,t=>{if(!Jr&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){k(this,tr)||this.setEventListener(k(this,_s))}onUnsubscribe(){var t;this.hasListeners()||((t=k(this,tr))==null||t.call(this),K(this,tr,void 0))}setEventListener(t){var n;K(this,_s,t),(n=k(this,tr))==null||n.call(this),K(this,tr,t(this.setOnline.bind(this)))}setOnline(t){k(this,Ts)!==t&&(K(this,Ts,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return k(this,Ts)}},Ts=new WeakMap,tr=new WeakMap,_s=new WeakMap,Em),Tl=new cw;function dw(e){return Math.min(1e3*2**e,3e4)}function Xg(e){return(e??"online")==="online"?Tl.isOnline():!0}var nc=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Jg(e){let t=!1,n=0,r;const s=tc(),i=()=>s.status!=="pending",o=N=>{var R;if(!i()){const v=new nc(N);g(v),(R=e.onCancel)==null||R.call(e,v)}},l=()=>{t=!0},u=()=>{t=!1},c=()=>Ed.isFocused()&&(e.networkMode==="always"||Tl.isOnline())&&e.canRun(),f=()=>Xg(e.networkMode)&&e.canRun(),h=N=>{i()||(r==null||r(),s.resolve(N))},g=N=>{i()||(r==null||r(),s.reject(N))},S=()=>new Promise(N=>{var R;r=v=>{(i()||c())&&N(v)},(R=e.onPause)==null||R.call(e)}).then(()=>{var N;r=void 0,i()||(N=e.onContinue)==null||N.call(e)}),w=()=>{if(i())return;let N;const R=n===0?e.initialPromise:void 0;try{N=R??e.fn()}catch(v){N=Promise.reject(v)}Promise.resolve(N).then(h).catch(v=>{var L;if(i())return;const m=e.retry??(Jr?0:3),p=e.retryDelay??dw,y=typeof p=="function"?p(n,v):p,b=m===!0||typeof m=="number"&&n<m||typeof m=="function"&&m(n,v);if(t||!b){g(v);return}n++,(L=e.onFail)==null||L.call(e,n,v),rw(y).then(()=>c()?void 0:S()).then(()=>{t?g(v):w()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:u,canStart:f,start:()=>(f()?w():S().then(w),s)}}var Dr,Nm,Zg=(Nm=class{constructor(){se(this,Dr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ju(this.gcTime)&&K(this,Dr,_r.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Jr?1/0:5*60*1e3))}clearGcTimeout(){k(this,Dr)&&(_r.clearTimeout(k(this,Dr)),K(this,Dr,void 0))}},Dr=new WeakMap,Nm),zr,Ps,Bt,Ar,et,Xi,$r,rn,jn,jm,fw=(jm=class extends Zg{constructor(t){super();se(this,rn);se(this,zr);se(this,Ps);se(this,Bt);se(this,Ar);se(this,et);se(this,Xi);se(this,$r);K(this,$r,!1),K(this,Xi,t.defaultOptions),this.setOptions(t.options),this.observers=[],K(this,Ar,t.client),K(this,Bt,k(this,Ar).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,K(this,zr,wh(this.options)),this.state=t.state??k(this,zr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=k(this,et))==null?void 0:t.promise}setOptions(t){if(this.options={...k(this,Xi),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=wh(this.options);n.data!==void 0&&(this.setState(xh(n.data,n.dataUpdatedAt)),K(this,zr,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&k(this,Bt).remove(this)}setData(t,n){const r=ec(this.state.data,t,this.options);return ge(this,rn,jn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ge(this,rn,jn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=k(this,et))==null?void 0:r.promise;return(s=k(this,et))==null||s.cancel(t),n?n.then(wt).catch(wt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(k(this,zr))}isActive(){return this.observers.some(t=>Wt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===bd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>yr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Kg(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=k(this,et))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=k(this,et))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),k(this,Bt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(k(this,et)&&(k(this,$r)?k(this,et).cancel({revert:!0}):k(this,et).cancelRetry()),this.scheduleGc()),k(this,Bt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ge(this,rn,jn).call(this,{type:"invalidate"})}async fetch(t,n){var u,c,f,h,g,S,w,N,R,v,m,p;if(this.state.fetchStatus!=="idle"&&((u=k(this,et))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(k(this,et))return k(this,et).continueRetry(),k(this,et).promise}if(t&&this.setOptions(t),!this.options.queryFn){const y=this.observers.find(b=>b.options.queryFn);y&&this.setOptions(y.options)}const r=new AbortController,s=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(K(this,$r,!0),r.signal)})},i=()=>{const y=Yg(this.options,n),L=(()=>{const M={client:k(this,Ar),queryKey:this.queryKey,meta:this.meta};return s(M),M})();return K(this,$r,!1),this.options.persister?this.options.persister(y,L,this):y(L)},l=(()=>{const y={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:k(this,Ar),state:this.state,fetchFn:i};return s(y),y})();(c=this.options.behavior)==null||c.onFetch(l,this),K(this,Ps,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&ge(this,rn,jn).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),K(this,et,Jg({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:y=>{y instanceof nc&&y.revert&&this.setState({...k(this,Ps),fetchStatus:"idle"}),r.abort()},onFail:(y,b)=>{ge(this,rn,jn).call(this,{type:"failed",failureCount:y,error:b})},onPause:()=>{ge(this,rn,jn).call(this,{type:"pause"})},onContinue:()=>{ge(this,rn,jn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const y=await k(this,et).start();if(y===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(y),(S=(g=k(this,Bt).config).onSuccess)==null||S.call(g,y,this),(N=(w=k(this,Bt).config).onSettled)==null||N.call(w,y,this.state.error,this),y}catch(y){if(y instanceof nc){if(y.silent)return k(this,et).promise;if(y.revert){if(this.state.data===void 0)throw y;return this.state.data}}throw ge(this,rn,jn).call(this,{type:"error",error:y}),(v=(R=k(this,Bt).config).onError)==null||v.call(R,y,this),(p=(m=k(this,Bt).config).onSettled)==null||p.call(m,this.state.data,y,this),y}finally{this.scheduleGc()}}},zr=new WeakMap,Ps=new WeakMap,Bt=new WeakMap,Ar=new WeakMap,et=new WeakMap,Xi=new WeakMap,$r=new WeakMap,rn=new WeakSet,jn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...ev(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...xh(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return K(this,Ps,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Je.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),k(this,Bt).notify({query:this,type:"updated",action:t})})},jm);function ev(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Xg(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function xh(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function wh(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Et,Se,Ji,vt,Ur,Is,Ln,nr,Zi,Fs,Os,Br,Wr,rr,Ds,Ne,yi,rc,sc,ic,oc,lc,ac,uc,tv,Mm,hw=(Mm=class extends Js{constructor(t,n){super();se(this,Ne);se(this,Et);se(this,Se);se(this,Ji);se(this,vt);se(this,Ur);se(this,Is);se(this,Ln);se(this,nr);se(this,Zi);se(this,Fs);se(this,Os);se(this,Br);se(this,Wr);se(this,rr);se(this,Ds,new Set);this.options=n,K(this,Et,t),K(this,nr,null),K(this,Ln,tc()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(k(this,Se).addObserver(this),Sh(k(this,Se),this.options)?ge(this,Ne,yi).call(this):this.updateResult(),ge(this,Ne,oc).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return cc(k(this,Se),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return cc(k(this,Se),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ge(this,Ne,lc).call(this),ge(this,Ne,ac).call(this),k(this,Se).removeObserver(this)}setOptions(t){const n=this.options,r=k(this,Se);if(this.options=k(this,Et).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Wt(this.options.enabled,k(this,Se))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ge(this,Ne,uc).call(this),k(this,Se).setOptions(this.options),n._defaulted&&!Ll(this.options,n)&&k(this,Et).getQueryCache().notify({type:"observerOptionsUpdated",query:k(this,Se),observer:this});const s=this.hasListeners();s&&kh(k(this,Se),r,this.options,n)&&ge(this,Ne,yi).call(this),this.updateResult(),s&&(k(this,Se)!==r||Wt(this.options.enabled,k(this,Se))!==Wt(n.enabled,k(this,Se))||yr(this.options.staleTime,k(this,Se))!==yr(n.staleTime,k(this,Se)))&&ge(this,Ne,rc).call(this);const i=ge(this,Ne,sc).call(this);s&&(k(this,Se)!==r||Wt(this.options.enabled,k(this,Se))!==Wt(n.enabled,k(this,Se))||i!==k(this,rr))&&ge(this,Ne,ic).call(this,i)}getOptimisticResult(t){const n=k(this,Et).getQueryCache().build(k(this,Et),t),r=this.createResult(n,t);return pw(this,r)&&(K(this,vt,r),K(this,Is,this.options),K(this,Ur,k(this,Se).state)),r}getCurrentResult(){return k(this,vt)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&k(this,Ln).status==="pending"&&k(this,Ln).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){k(this,Ds).add(t)}getCurrentQuery(){return k(this,Se)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=k(this,Et).defaultQueryOptions(t),r=k(this,Et).getQueryCache().build(k(this,Et),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ge(this,Ne,yi).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),k(this,vt)))}createResult(t,n){var T;const r=k(this,Se),s=this.options,i=k(this,vt),o=k(this,Ur),l=k(this,Is),c=t!==r?t.state:k(this,Ji),{state:f}=t;let h={...f},g=!1,S;if(n._optimisticResults){const C=this.hasListeners(),I=!C&&Sh(t,n),Q=C&&kh(t,r,n,s);(I||Q)&&(h={...h,...ev(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:w,errorUpdatedAt:N,status:R}=h;S=h.data;let v=!1;if(n.placeholderData!==void 0&&S===void 0&&R==="pending"){let C;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(C=i.data,v=!0):C=typeof n.placeholderData=="function"?n.placeholderData((T=k(this,Os))==null?void 0:T.state.data,k(this,Os)):n.placeholderData,C!==void 0&&(R="success",S=ec(i==null?void 0:i.data,C,n),g=!0)}if(n.select&&S!==void 0&&!v)if(i&&S===(o==null?void 0:o.data)&&n.select===k(this,Zi))S=k(this,Fs);else try{K(this,Zi,n.select),S=n.select(S),S=ec(i==null?void 0:i.data,S,n),K(this,Fs,S),K(this,nr,null)}catch(C){K(this,nr,C)}k(this,nr)&&(w=k(this,nr),S=k(this,Fs),N=Date.now(),R="error");const m=h.fetchStatus==="fetching",p=R==="pending",y=R==="error",b=p&&m,L=S!==void 0,E={status:R,fetchStatus:h.fetchStatus,isPending:p,isSuccess:R==="success",isError:y,isInitialLoading:b,isLoading:b,data:S,dataUpdatedAt:h.dataUpdatedAt,error:w,errorUpdatedAt:N,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:m,isRefetching:m&&!p,isLoadingError:y&&!L,isPaused:h.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:y&&L,isStale:Nd(t,n),refetch:this.refetch,promise:k(this,Ln),isEnabled:Wt(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const C=z=>{E.status==="error"?z.reject(E.error):E.data!==void 0&&z.resolve(E.data)},I=()=>{const z=K(this,Ln,E.promise=tc());C(z)},Q=k(this,Ln);switch(Q.status){case"pending":t.queryHash===r.queryHash&&C(Q);break;case"fulfilled":(E.status==="error"||E.data!==Q.value)&&I();break;case"rejected":(E.status!=="error"||E.error!==Q.reason)&&I();break}}return E}updateResult(){const t=k(this,vt),n=this.createResult(k(this,Se),this.options);if(K(this,Ur,k(this,Se).state),K(this,Is,this.options),k(this,Ur).data!==void 0&&K(this,Os,k(this,Se)),Ll(n,t))return;K(this,vt,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!k(this,Ds).size)return!0;const o=new Set(i??k(this,Ds));return this.options.throwOnError&&o.add("error"),Object.keys(k(this,vt)).some(l=>{const u=l;return k(this,vt)[u]!==t[u]&&o.has(u)})};ge(this,Ne,tv).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ge(this,Ne,oc).call(this)}},Et=new WeakMap,Se=new WeakMap,Ji=new WeakMap,vt=new WeakMap,Ur=new WeakMap,Is=new WeakMap,Ln=new WeakMap,nr=new WeakMap,Zi=new WeakMap,Fs=new WeakMap,Os=new WeakMap,Br=new WeakMap,Wr=new WeakMap,rr=new WeakMap,Ds=new WeakMap,Ne=new WeakSet,yi=function(t){ge(this,Ne,uc).call(this);let n=k(this,Se).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(wt)),n},rc=function(){ge(this,Ne,lc).call(this);const t=yr(this.options.staleTime,k(this,Se));if(Jr||k(this,vt).isStale||!Ju(t))return;const r=Kg(k(this,vt).dataUpdatedAt,t)+1;K(this,Br,_r.setTimeout(()=>{k(this,vt).isStale||this.updateResult()},r))},sc=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(k(this,Se)):this.options.refetchInterval)??!1},ic=function(t){ge(this,Ne,ac).call(this),K(this,rr,t),!(Jr||Wt(this.options.enabled,k(this,Se))===!1||!Ju(k(this,rr))||k(this,rr)===0)&&K(this,Wr,_r.setInterval(()=>{(this.options.refetchIntervalInBackground||Ed.isFocused())&&ge(this,Ne,yi).call(this)},k(this,rr)))},oc=function(){ge(this,Ne,rc).call(this),ge(this,Ne,ic).call(this,ge(this,Ne,sc).call(this))},lc=function(){k(this,Br)&&(_r.clearTimeout(k(this,Br)),K(this,Br,void 0))},ac=function(){k(this,Wr)&&(_r.clearInterval(k(this,Wr)),K(this,Wr,void 0))},uc=function(){const t=k(this,Et).getQueryCache().build(k(this,Et),this.options);if(t===k(this,Se))return;const n=k(this,Se);K(this,Se,t),K(this,Ji,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},tv=function(t){Je.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(k(this,vt))}),k(this,Et).getQueryCache().notify({query:k(this,Se),type:"observerResultsUpdated"})})},Mm);function mw(e,t){return Wt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Sh(e,t){return mw(e,t)||e.state.data!==void 0&&cc(e,t,t.refetchOnMount)}function cc(e,t,n){if(Wt(t.enabled,e)!==!1&&yr(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Nd(e,t)}return!1}function kh(e,t,n,r){return(e!==t||Wt(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Nd(e,n)}function Nd(e,t){return Wt(t.enabled,e)!==!1&&e.isStaleByTime(yr(t.staleTime,e))}function pw(e,t){return!Ll(e.getCurrentResult(),t)}function Ch(e){return{onFetch:(t,n)=>{var f,h,g,S,w;const r=t.options,s=(g=(h=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:h.fetchMore)==null?void 0:g.direction,i=((S=t.state.data)==null?void 0:S.pages)||[],o=((w=t.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const c=async()=>{let N=!1;const R=p=>{ow(p,()=>t.signal,()=>N=!0)},v=Yg(t.options,t.fetchOptions),m=async(p,y,b)=>{if(N)return Promise.reject();if(y==null&&p.pages.length)return Promise.resolve(p);const M=(()=>{const I={client:t.client,queryKey:t.queryKey,pageParam:y,direction:b?"backward":"forward",meta:t.options.meta};return R(I),I})(),E=await v(M),{maxPages:T}=t.options,C=b?iw:sw;return{pages:C(p.pages,E,T),pageParams:C(p.pageParams,y,T)}};if(s&&i.length){const p=s==="backward",y=p?gw:bh,b={pages:i,pageParams:o},L=y(r,b);l=await m(b,L,p)}else{const p=e??i.length;do{const y=u===0?o[0]??r.initialPageParam:bh(r,l);if(u>0&&y==null)break;l=await m(l,y),u++}while(u<p)}return l};t.options.persister?t.fetchFn=()=>{var N,R;return(R=(N=t.options).persister)==null?void 0:R.call(N,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function bh(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function gw(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var eo,vn,yt,Hr,yn,qn,Rm,vw=(Rm=class extends Zg{constructor(t){super();se(this,yn);se(this,eo);se(this,vn);se(this,yt);se(this,Hr);K(this,eo,t.client),this.mutationId=t.mutationId,K(this,yt,t.mutationCache),K(this,vn,[]),this.state=t.state||nv(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){k(this,vn).includes(t)||(k(this,vn).push(t),this.clearGcTimeout(),k(this,yt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){K(this,vn,k(this,vn).filter(n=>n!==t)),this.scheduleGc(),k(this,yt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){k(this,vn).length||(this.state.status==="pending"?this.scheduleGc():k(this,yt).remove(this))}continue(){var t;return((t=k(this,Hr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,u,c,f,h,g,S,w,N,R,v,m,p,y,b,L,M,E,T;const n=()=>{ge(this,yn,qn).call(this,{type:"continue"})},r={client:k(this,eo),meta:this.options.meta,mutationKey:this.options.mutationKey};K(this,Hr,Jg({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(C,I)=>{ge(this,yn,qn).call(this,{type:"failed",failureCount:C,error:I})},onPause:()=>{ge(this,yn,qn).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>k(this,yt).canRun(this)}));const s=this.state.status==="pending",i=!k(this,Hr).canStart();try{if(s)n();else{ge(this,yn,qn).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=k(this,yt).config).onMutate)==null?void 0:l.call(o,t,this,r));const I=await((c=(u=this.options).onMutate)==null?void 0:c.call(u,t,r));I!==this.state.context&&ge(this,yn,qn).call(this,{type:"pending",context:I,variables:t,isPaused:i})}const C=await k(this,Hr).start();return await((h=(f=k(this,yt).config).onSuccess)==null?void 0:h.call(f,C,t,this.state.context,this,r)),await((S=(g=this.options).onSuccess)==null?void 0:S.call(g,C,t,this.state.context,r)),await((N=(w=k(this,yt).config).onSettled)==null?void 0:N.call(w,C,null,this.state.variables,this.state.context,this,r)),await((v=(R=this.options).onSettled)==null?void 0:v.call(R,C,null,t,this.state.context,r)),ge(this,yn,qn).call(this,{type:"success",data:C}),C}catch(C){try{await((p=(m=k(this,yt).config).onError)==null?void 0:p.call(m,C,t,this.state.context,this,r))}catch(I){Promise.reject(I)}try{await((b=(y=this.options).onError)==null?void 0:b.call(y,C,t,this.state.context,r))}catch(I){Promise.reject(I)}try{await((M=(L=k(this,yt).config).onSettled)==null?void 0:M.call(L,void 0,C,this.state.variables,this.state.context,this,r))}catch(I){Promise.reject(I)}try{await((T=(E=this.options).onSettled)==null?void 0:T.call(E,void 0,C,t,this.state.context,r))}catch(I){Promise.reject(I)}throw ge(this,yn,qn).call(this,{type:"error",error:C}),C}finally{k(this,yt).runNext(this)}}},eo=new WeakMap,vn=new WeakMap,yt=new WeakMap,Hr=new WeakMap,yn=new WeakSet,qn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Je.batch(()=>{k(this,vn).forEach(r=>{r.onMutationUpdate(t)}),k(this,yt).notify({mutation:this,type:"updated",action:t})})},Rm);function nv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Tn,sn,to,Lm,yw=(Lm=class extends Js{constructor(t={}){super();se(this,Tn);se(this,sn);se(this,to);this.config=t,K(this,Tn,new Set),K(this,sn,new Map),K(this,to,0)}build(t,n,r){const s=new vw({client:t,mutationCache:this,mutationId:++vo(this,to)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){k(this,Tn).add(t);const n=Fo(t);if(typeof n=="string"){const r=k(this,sn).get(n);r?r.push(t):k(this,sn).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(k(this,Tn).delete(t)){const n=Fo(t);if(typeof n=="string"){const r=k(this,sn).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&k(this,sn).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Fo(t);if(typeof n=="string"){const r=k(this,sn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Fo(t);if(typeof n=="string"){const s=(r=k(this,sn).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Je.batch(()=>{k(this,Tn).forEach(t=>{this.notify({type:"removed",mutation:t})}),k(this,Tn).clear(),k(this,sn).clear()})}getAll(){return Array.from(k(this,Tn))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>gh(n,r))}findAll(t={}){return this.getAll().filter(n=>gh(t,n))}notify(t){Je.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Je.batch(()=>Promise.all(t.map(n=>n.continue().catch(wt))))}},Tn=new WeakMap,sn=new WeakMap,to=new WeakMap,Lm);function Fo(e){var t;return(t=e.options.scope)==null?void 0:t.id}var _n,sr,Nt,Pn,zn,Jo,dc,Tm,xw=(Tm=class extends Js{constructor(n,r){super();se(this,zn);se(this,_n);se(this,sr);se(this,Nt);se(this,Pn);K(this,_n,n),this.setOptions(r),this.bindMethods(),ge(this,zn,Jo).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=k(this,_n).defaultMutationOptions(n),Ll(this.options,r)||k(this,_n).getMutationCache().notify({type:"observerOptionsUpdated",mutation:k(this,Nt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Zr(r.mutationKey)!==Zr(this.options.mutationKey)?this.reset():((s=k(this,Nt))==null?void 0:s.state.status)==="pending"&&k(this,Nt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=k(this,Nt))==null||n.removeObserver(this)}onMutationUpdate(n){ge(this,zn,Jo).call(this),ge(this,zn,dc).call(this,n)}getCurrentResult(){return k(this,sr)}reset(){var n;(n=k(this,Nt))==null||n.removeObserver(this),K(this,Nt,void 0),ge(this,zn,Jo).call(this),ge(this,zn,dc).call(this)}mutate(n,r){var s;return K(this,Pn,r),(s=k(this,Nt))==null||s.removeObserver(this),K(this,Nt,k(this,_n).getMutationCache().build(k(this,_n),this.options)),k(this,Nt).addObserver(this),k(this,Nt).execute(n)}},_n=new WeakMap,sr=new WeakMap,Nt=new WeakMap,Pn=new WeakMap,zn=new WeakSet,Jo=function(){var r;const n=((r=k(this,Nt))==null?void 0:r.state)??nv();K(this,sr,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},dc=function(n){Je.batch(()=>{var r,s,i,o,l,u,c,f;if(k(this,Pn)&&this.hasListeners()){const h=k(this,sr).variables,g=k(this,sr).context,S={client:k(this,_n),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=k(this,Pn)).onSuccess)==null||s.call(r,n.data,h,g,S)}catch(w){Promise.reject(w)}try{(o=(i=k(this,Pn)).onSettled)==null||o.call(i,n.data,null,h,g,S)}catch(w){Promise.reject(w)}}else if((n==null?void 0:n.type)==="error"){try{(u=(l=k(this,Pn)).onError)==null||u.call(l,n.error,h,g,S)}catch(w){Promise.reject(w)}try{(f=(c=k(this,Pn)).onSettled)==null||f.call(c,void 0,n.error,h,g,S)}catch(w){Promise.reject(w)}}}this.listeners.forEach(h=>{h(k(this,sr))})})},Tm),xn,_m,ww=(_m=class extends Js{constructor(t={}){super();se(this,xn);this.config=t,K(this,xn,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??Cd(s,n);let o=this.get(i);return o||(o=new fw({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){k(this,xn).has(t.queryHash)||(k(this,xn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=k(this,xn).get(t.queryHash);n&&(t.destroy(),n===t&&k(this,xn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Je.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return k(this,xn).get(t)}getAll(){return[...k(this,xn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>ph(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>ph(t,r)):n}notify(t){Je.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Je.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Je.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},xn=new WeakMap,_m),$e,ir,or,zs,As,lr,$s,Us,Pm,Sw=(Pm=class{constructor(e={}){se(this,$e);se(this,ir);se(this,or);se(this,zs);se(this,As);se(this,lr);se(this,$s);se(this,Us);K(this,$e,e.queryCache||new ww),K(this,ir,e.mutationCache||new yw),K(this,or,e.defaultOptions||{}),K(this,zs,new Map),K(this,As,new Map),K(this,lr,0)}mount(){vo(this,lr)._++,k(this,lr)===1&&(K(this,$s,Ed.subscribe(async e=>{e&&(await this.resumePausedMutations(),k(this,$e).onFocus())})),K(this,Us,Tl.subscribe(async e=>{e&&(await this.resumePausedMutations(),k(this,$e).onOnline())})))}unmount(){var e,t;vo(this,lr)._--,k(this,lr)===0&&((e=k(this,$s))==null||e.call(this),K(this,$s,void 0),(t=k(this,Us))==null||t.call(this),K(this,Us,void 0))}isFetching(e){return k(this,$e).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return k(this,ir).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=k(this,$e).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=k(this,$e).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(yr(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return k(this,$e).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=k(this,$e).get(r.queryHash),i=s==null?void 0:s.state.data,o=tw(t,i);if(o!==void 0)return k(this,$e).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Je.batch(()=>k(this,$e).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=k(this,$e).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=k(this,$e);Je.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=k(this,$e);return Je.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Je.batch(()=>k(this,$e).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(wt).catch(wt)}invalidateQueries(e,t={}){return Je.batch(()=>(k(this,$e).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Je.batch(()=>k(this,$e).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(wt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(wt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=k(this,$e).build(this,t);return n.isStaleByTime(yr(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(wt).catch(wt)}fetchInfiniteQuery(e){return e.behavior=Ch(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(wt).catch(wt)}ensureInfiniteQueryData(e){return e.behavior=Ch(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Tl.isOnline()?k(this,ir).resumePausedMutations():Promise.resolve()}getQueryCache(){return k(this,$e)}getMutationCache(){return k(this,ir)}getDefaultOptions(){return k(this,or)}setDefaultOptions(e){K(this,or,e)}setQueryDefaults(e,t){k(this,zs).set(Zr(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...k(this,zs).values()],n={};return t.forEach(r=>{Ki(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){k(this,As).set(Zr(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...k(this,As).values()],n={};return t.forEach(r=>{Ki(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...k(this,or).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Cd(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===bd&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...k(this,or).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){k(this,$e).clear(),k(this,ir).clear()}},$e=new WeakMap,ir=new WeakMap,or=new WeakMap,zs=new WeakMap,As=new WeakMap,lr=new WeakMap,$s=new WeakMap,Us=new WeakMap,Pm),rv=d.createContext(void 0),ns=e=>{const t=d.useContext(rv);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},kw=({client:e,children:t})=>(d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(rv.Provider,{value:e,children:t})),sv=d.createContext(!1),Cw=()=>d.useContext(sv);sv.Provider;function bw(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Ew=d.createContext(bw()),Nw=()=>d.useContext(Ew),jw=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Mw=e=>{d.useEffect(()=>{e.clearReset()},[e])},Rw=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||Gg(n,[e.error,r])),Lw=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Tw=(e,t)=>e.isLoading&&e.isFetching&&!t,_w=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Eh=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Pw(e,t,n){var h,g,S,w,N;const r=Cw(),s=Nw(),i=ns(),o=i.defaultQueryOptions(e);(g=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||g.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",Lw(o),jw(o,s),Mw(s);const l=!i.getQueryCache().get(o.queryHash),[u]=d.useState(()=>new t(i,o)),c=u.getOptimisticResult(o),f=!r&&e.subscribed!==!1;if(d.useSyncExternalStore(d.useCallback(R=>{const v=f?u.subscribe(Je.batchCalls(R)):wt;return u.updateResult(),v},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),d.useEffect(()=>{u.setOptions(o)},[o,u]),_w(o,c))throw Eh(o,u,s);if(Rw({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((w=(S=i.getDefaultOptions().queries)==null?void 0:S._experimental_afterQuery)==null||w.call(S,o,c),o.experimental_prefetchInRender&&!Jr&&Tw(c,r)){const R=l?Eh(o,u,s):(N=i.getQueryCache().get(o.queryHash))==null?void 0:N.promise;R==null||R.catch(wt).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?c:u.trackResult(c)}function Zl(e,t){return Pw(e,hw)}function Iw(e,t){const n=ns(),[r]=d.useState(()=>new xw(n,e));d.useEffect(()=>{r.setOptions(e)},[r,e]);const s=d.useSyncExternalStore(d.useCallback(o=>r.subscribe(Je.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=d.useCallback((o,l)=>{r.mutate(o,l).catch(wt)},[r]);if(s.error&&Gg(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function Nh(e){return e.length>0&&"options"in e[0]}function fc({value:e,onChange:t,options:n,placeholder:r="Select...",trigger:s,triggerClassName:i="",panelClassName:o="",align:l="left",width:u="auto",showChevron:c=!0,title:f,disabled:h=!1,"aria-label":g}){var E;const[S,w]=d.useState(!1),N=d.useRef(null),R=d.useRef(null),m=d.useCallback(()=>{const T=C=>{const I=C.find(Q=>Q.value===e);return I?I.label:null};if(Nh(n))for(const C of n){const I=T(C.options);if(I)return I}else{const C=T(n);if(C)return C}return r},[e,n,r])();d.useEffect(()=>{if(!S)return;const T=I=>{N.current&&!N.current.contains(I.target)&&w(!1)},C=I=>{var Q;I.key==="Escape"&&(w(!1),(Q=R.current)==null||Q.focus())};return window.addEventListener("click",T),window.addEventListener("keydown",C),()=>{window.removeEventListener("click",T),window.removeEventListener("keydown",C)}},[S]);const p=T=>{var C;t(T),w(!1),(C=R.current)==null||C.focus()},y=T=>T.map(C=>a.jsxs("button",{className:"dropdown-item","data-active":C.value===e,disabled:C.disabled,onClick:()=>!C.disabled&&p(C.value),role:"menuitem",children:[C.icon&&a.jsx("span",{className:"shrink-0",children:C.icon}),a.jsx("span",{className:"flex-1 truncate",children:C.label}),C.value===e&&a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 text-accent",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})]},C.value)),b=((E=R.current)==null?void 0:E.offsetWidth)??0,L=u==="trigger"?b:u==="auto"?void 0:u,M={...L?{width:L,minWidth:L}:{},...l==="right"?{right:0}:{left:0}};return a.jsxs("div",{ref:N,className:"relative",children:[s?a.jsx("div",{onClick:()=>!h&&w(T=>!T),children:s}):a.jsxs("button",{ref:R,type:"button",className:`dropdown-trigger ${i}`,onClick:()=>w(T=>!T),disabled:h,title:f,"aria-label":g,"aria-haspopup":"listbox","aria-expanded":S,children:[a.jsx("span",{className:"truncate",children:m}),c&&a.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`shrink-0 opacity-60 transition-transform ${S?"rotate-180":""}`,children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),S&&a.jsx("div",{className:`dropdown-panel ${o}`,style:M,role:"listbox","aria-label":g,children:Nh(n)?n.map((T,C)=>a.jsxs("div",{children:[T.label&&a.jsx("div",{className:"dropdown-label",children:T.label}),y(T.options),C<n.length-1&&a.jsx("div",{className:"dropdown-divider"})]},T.label||C)):y(n)})]})}const Fw={offline:"sync-dot-offline",unstable:"sync-dot-unstable",recent:"sync-dot-recent",editing:"sync-dot-editing",live:"sync-dot-live"};function Ow({state:e,presence:t,syncLabel:n,connectionLabel:r,lastEditedLabel:s,hasEdits:i,recentTouches:o,isNarrow:l}){const[u,c]=d.useState(!1),[f,h]=d.useState(null),g=d.useRef(null),S=d.useRef(null),w=d.useRef(null),N=t?`${t.viewing} viewing  ${t.editing} editing`:"- viewing  - editing",R=t?String(t.viewing):"-",v=d.useCallback(()=>{w.current&&(window.clearTimeout(w.current),w.current=null)},[]),m=d.useCallback((y,b)=>{var L;b&&((L=navigator.clipboard)==null||L.writeText(b).then(()=>{h(y),v(),w.current=window.setTimeout(()=>{h(M=>M===y?null:M)},1e3)}).catch(()=>{}))},[v]),p=d.useCallback(()=>{c(!1),window.requestAnimationFrame(()=>{var y;return(y=S.current)==null?void 0:y.focus()})},[]);return d.useEffect(()=>{if(!u)return;const y=L=>{!g.current||g.current.contains(L.target)||p()},b=L=>{L.key==="Escape"&&p()};return window.addEventListener("mousedown",y),window.addEventListener("keydown",b),()=>{window.removeEventListener("mousedown",y),window.removeEventListener("keydown",b)}},[u,p]),d.useEffect(()=>()=>{v()},[v]),a.jsxs("div",{ref:g,className:"sync-indicator",children:[a.jsxs("button",{ref:S,type:"button",className:"sync-indicator-button",onClick:()=>u?p():c(!0),"aria-haspopup":"dialog","aria-expanded":u,"aria-label":"Sync status",title:N,children:[a.jsx("span",{className:`sync-indicator-dot ${Fw[e]}`,"aria-hidden":"true"}),!l&&a.jsx("span",{className:"sync-indicator-count tabular-nums",children:R})]}),u&&a.jsxs("div",{role:"dialog","aria-label":"Sync status",className:"sync-indicator-card select-text",children:[a.jsx("div",{className:"sync-indicator-line sync-indicator-primary",children:n}),a.jsx("div",{className:"sync-indicator-line",children:r}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:N}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:i?`Last edited: ${s}`:"No edits yet."}),a.jsxs("div",{className:"sync-indicator-section",children:[a.jsx("div",{className:"sync-indicator-section-title",children:"Recently touched files"}),o.length>0?a.jsx("div",{className:"sync-indicator-list",children:o.map(y=>a.jsxs("div",{className:"sync-indicator-item",children:[a.jsx("button",{type:"button",className:"sync-indicator-item-name",title:`Copy filename: ${y.label}`,onClick:()=>m(y.path,y.label),children:y.label}),a.jsx("span",{className:"sync-indicator-item-time tabular-nums",children:f===y.path?"Copied":y.timeLabel})]},y.path))}):a.jsx("div",{className:"sync-indicator-empty",children:"No recent touches."})]})]})]})}function Dw({rootRef:e,onSearch:t,viewerActive:n,onBack:r,zoomPercent:s,onZoomPercentChange:i,currentLabel:o,itemCount:l,totalCount:u,sortSpec:c,metricKeys:f,onSortChange:h,sortDisabled:g=!1,filterCount:S,onOpenFilters:w,starFilters:N,onToggleStar:R,onClearStars:v,onClearFilters:m,starCounts:p,viewMode:y,onViewMode:b,gridItemSize:L,onGridItemSize:M,leftOpen:E,rightOpen:T,onToggleLeft:C,onToggleRight:I,onPrevImage:Q,onNextImage:z,canPrevImage:$,canNextImage:ie,searchDisabled:B=!1,searchPlaceholder:ce,syncIndicator:F}){const[H,q]=d.useState(!1),[he,fe]=d.useState(!1),[je,W]=d.useState(!1),Y=d.useRef(null),te=d.useRef(null);d.useEffect(()=>{if(!H)return;const V=de=>{Y.current&&!Y.current.contains(de.target)&&q(!1)};return window.addEventListener("click",V),()=>window.removeEventListener("click",V)},[H]),d.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const V=window.matchMedia("(max-width: 900px)"),de=Ce=>fe(Ce.matches);return fe(V.matches),"addEventListener"in V?(V.addEventListener("change",de),()=>V.removeEventListener("change",de)):(V.addListener(de),()=>V.removeListener(de))},[]),d.useEffect(()=>{if(B){W(!1);return}if(!he||n){W(!1);return}if(!je)return;const V=window.requestAnimationFrame(()=>{var de;return(de=te.current)==null?void 0:de.focus()});return()=>window.cancelAnimationFrame(V)},[he,je,n,B]);const me=c??{kind:"builtin",key:"added",dir:"desc"},Ve=me.dir,Ye=me.kind==="builtin"&&me.key==="random",Re=n||g,ht=f!=null&&f.length?f.map(V=>({value:`metric:${V}`,label:V,disabled:g})):[],Ae=[{value:"builtin:added",label:"Date added",disabled:g},{value:"builtin:name",label:"Filename",disabled:g},{value:"builtin:random",label:"Random",disabled:g},...ht],fn=[{label:"Layout",options:[{value:"layout:grid",label:"Grid"},{value:"layout:masonry",label:"Masonry"}]},{label:"Sort by",options:Ae}],Ie=me.kind==="metric"?`metric:${me.key}`:`builtin:${me.key}`,Xt=[{label:"Sort by",options:Ae}],mt=he&&!n,U=V=>{if(V.startsWith("layout:")){const de=V==="layout:masonry"?"adaptive":"grid";b==null||b(de)}else{if(g)return;h==null||h(jh(V,me))}},re=()=>{!h||g||h(Ye?me:{...me,dir:Ve==="desc"?"asc":"desc"})},ue=N??[],ye=ue.length,oe=Aw(S,ye),ve=zw(l,u),ee=o||"Root";return a.jsxs("div",{ref:e,className:"toolbar-shell fixed top-0 left-0 right-0 h-12 grid grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] items-center px-3 gap-3 bg-panel border-b border-border z-[var(--z-toolbar)] col-span-full row-start-1 select-none",children:[a.jsxs("div",{className:"toolbar-left flex items-center gap-4 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsxs("div",{className:"flex flex-col min-w-0 leading-tight",children:[a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted",children:"Scope"}),a.jsx("span",{className:"text-sm font-medium text-text truncate",title:ee,children:ee})]}),ve&&a.jsx("span",{className:"toolbar-count text-xs text-muted whitespace-nowrap tabular-nums",children:ve})]}),a.jsxs("div",{className:"toolbar-sort flex items-center gap-2",children:[a.jsxs("div",{className:`toolbar-sort-controls flex items-center gap-2 ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsx(fc,{value:Ie,onChange:U,options:fn,title:"Sort and layout options","aria-label":"Sort and layout",triggerClassName:"min-w-[110px]"}),a.jsx("button",{className:"toolbar-sort-dir btn btn-icon",onClick:re,title:g?"Sorting disabled":Ye?"Shuffle":`Sort ${Ve==="desc"?"descending":"ascending"}`,"aria-label":Ye?"Shuffle":"Toggle sort direction","aria-disabled":Re,disabled:Re,children:Ye?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Ve==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]}),a.jsxs("div",{ref:Y,className:`toolbar-filter relative ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsxs("button",{className:`btn ${oe>0?"btn-active":""}`,onClick:()=>q(V=>!V),"aria-haspopup":"dialog","aria-expanded":H,title:"Filters","aria-disabled":n,children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),a.jsx("span",{className:"toolbar-filters-label",children:"Filters"}),oe>0&&a.jsx("span",{className:"toolbar-filters-count px-1.5 py-0.5 text-[11px] rounded-full bg-accent-strong text-text",children:oe})]}),H&&a.jsxs("div",{role:"dialog","aria-label":"Filters",className:"dropdown-panel w-[240px]",style:{top:"38px",left:0},children:[a.jsx("div",{className:"dropdown-label",children:"Rating"}),a.jsxs("div",{className:"px-1",children:[[5,4,3,2,1].map(V=>{const de=ue.includes(V),Ce=(p==null?void 0:p[String(V)])??0;return a.jsxs("button",{onClick:()=>R==null?void 0:R(V),className:`dropdown-item justify-between ${de?"bg-accent-muted":""}`,children:[a.jsxs("span",{className:de?"text-star-active":"text-text",children:["".repeat(V),"".repeat(5-V)]}),a.jsx("span",{className:"text-xs text-muted",children:Ce})]},V)}),a.jsxs("button",{onClick:()=>R==null?void 0:R(0),className:`dropdown-item justify-between ${ue.includes(0)?"bg-accent-muted":""}`,children:[a.jsx("span",{className:"text-text",children:"Unrated"}),a.jsx("span",{className:"text-xs text-muted",children:(p==null?void 0:p["0"])??0})]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("div",{className:"dropdown-label",children:"Metrics"}),a.jsxs("button",{className:"dropdown-item",onClick:()=>{q(!1),w==null||w()},children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]}),a.jsx("span",{children:"Open Metrics Panel"}),(S||0)>0&&a.jsxs("span",{className:"ml-auto text-xs text-muted",children:[S," active"]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("button",{className:"dropdown-item text-muted hover:text-text",onClick:()=>{m?m():v==null||v()},disabled:oe===0,children:"Clear all filters"})]})]}),n&&a.jsxs("button",{className:"btn btn-sm",onClick:r,title:"Back to grid",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})]})]}),a.jsx("div",{className:"toolbar-center flex items-center gap-3 justify-center min-w-0",children:n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"range",min:5,max:800,step:1,value:Math.round(Math.max(5,Math.min(800,s??100))),onChange:V=>i==null?void 0:i(Number(V.target.value)),className:"zoom-slider","aria-label":"Zoom level"}),a.jsxs("span",{className:"text-xs text-muted min-w-[42px] text-right",children:[Math.round(s??100),"%"]})]}):M&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted",children:"Size"}),a.jsx("input",{type:"range",min:80,max:500,step:10,value:L??220,onChange:V=>M(Number(V.target.value)),className:"w-28 h-1.5 bg-border rounded-full appearance-none cursor-pointer hover:bg-hover transition-colors [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-text [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-text [&::-moz-range-thumb]:border-0","aria-label":"Thumbnail size"})]})}),a.jsxs("div",{className:"toolbar-right flex items-center gap-2 justify-end",children:[a.jsxs("div",{className:`toolbar-nav flex items-center gap-1 mr-1 ${n?"":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,children:[a.jsx("button",{className:`btn btn-icon ${$?"":"opacity-40 cursor-not-allowed"}`,title:"Previous image (A / )",onClick:()=>$&&(Q==null?void 0:Q()),"aria-label":"Previous image","aria-disabled":!$,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("button",{className:`btn btn-icon ${ie?"":"opacity-40 cursor-not-allowed"}`,title:"Next image (D / )",onClick:()=>ie&&(z==null?void 0:z()),"aria-label":"Next image","aria-disabled":!ie,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 6l6 6-6 6"})})})]}),a.jsxs("div",{className:"toolbar-panels flex items-center gap-1",children:[a.jsx("button",{className:`btn btn-icon ${E?"":"opacity-50"}`,title:E?"Hide left panel (Ctrl+B)":"Show left panel (Ctrl+B)",onClick:C,"aria-pressed":E,"aria-label":"Toggle left panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"11",y:"5",width:"10",height:"14",rx:"1.5"})]})}),a.jsx("button",{className:`btn btn-icon ${T?"":"opacity-50"}`,title:T?"Hide right panel (Ctrl+Alt+B)":"Show right panel (Ctrl+Alt+B)",onClick:I,"aria-pressed":T,"aria-label":"Toggle right panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"15",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"3",y:"5",width:"10",height:"14",rx:"1.5"})]})})]}),F&&a.jsx(Ow,{...F,isNarrow:he}),!n&&he&&a.jsx("button",{className:`btn btn-icon ${je?"btn-active":""} ${B?"opacity-50 cursor-not-allowed":""}`,"aria-label":je?"Close search":"Open search",title:B?"Search disabled":je?"Close search":"Search",onClick:()=>!B&&W(V=>!V),disabled:B,children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("circle",{cx:"11",cy:"11",r:"7"}),a.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),!n&&!he?a.jsx("div",{className:"toolbar-search w-[240px]",children:a.jsx("input",{ref:te,"aria-label":"Search filename, tags, notes",placeholder:B?ce??"Search disabled":"Search...",onChange:V=>t(V.target.value),className:"toolbar-search-input input w-full focus:w-full transition-all duration-200 select-text",disabled:B})}):n?a.jsx("div",{className:"toolbar-search w-[240px]","aria-hidden":"true"}):null]}),!n&&he&&je&&!B&&a.jsx("div",{className:"toolbar-search-row",children:a.jsx("input",{ref:te,"aria-label":"Search filename, tags, notes",placeholder:ce??"Search...",onChange:V=>t(V.target.value),className:"toolbar-search-input-mobile input input-lg w-full select-text"})}),mt&&a.jsx("div",{className:"mobile-drawer",children:a.jsxs("div",{className:"mobile-drawer-row",children:[a.jsxs("div",{className:"mobile-pill-group",children:[a.jsx("button",{className:`mobile-pill ${y==="grid"?"is-active":""}`,onClick:()=>b==null?void 0:b("grid"),"aria-pressed":y==="grid",children:"Grid"}),a.jsx("button",{className:`mobile-pill ${y==="adaptive"?"is-active":""}`,onClick:()=>b==null?void 0:b("adaptive"),"aria-pressed":y==="adaptive",children:"Masonry"})]}),a.jsx(fc,{value:Ie,onChange:V=>h==null?void 0:h(jh(V,me)),options:Xt,"aria-label":"Sort",triggerClassName:"mobile-pill mobile-pill-dropdown",panelClassName:"mobile-drawer-panel",disabled:g}),a.jsx("button",{className:`mobile-pill mobile-pill-icon ${Re?"opacity-50 cursor-not-allowed":""}`,onClick:re,title:g?"Sorting disabled":Ye?"Shuffle":`Sort ${Ve==="desc"?"descending":"ascending"}`,"aria-label":Ye?"Shuffle":"Toggle sort direction","aria-disabled":Re,disabled:Re,children:Ye?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Ve==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]})})]})}function zw(e,t){if(typeof e!="number")return null;const n=e.toLocaleString();if(typeof t!="number")return`${n} items`;const r=t.toLocaleString();return t===e?`${n} items`:`${n} / ${r} items`}function Aw(e,t){return typeof e=="number"?e:t>0?1:0}function jh(e,t){if(e.startsWith("metric:")){const n=e.slice(7);return n?{kind:"metric",key:n,dir:t.dir}:t}if(e.startsWith("builtin:")){const n=e.slice(8);if(n==="name"||n==="added"||n==="random")return{kind:"builtin",key:n,dir:t.dir}}return t}class Cn extends Error{constructor(n,r,s,i){super(r);En(this,"status");En(this,"url");En(this,"body");this.name="FetchError",this.status=n,this.url=s,this.body=i}}function $w(e){const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function iv(e,t,n){if(t&&typeof t=="object"){const r=t,s=typeof r.error=="string"?r.error:null,i=typeof r.message=="string"?r.message:null;if(s&&i)return`${s}: ${i}`;if(s)return s;if(i)return i}return typeof t=="string"&&t?t:`HTTP ${e} for ${n}`}function rt(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{let u=null;const c=await l.text().catch(()=>"");if(c)if((l.headers.get("content-type")||"").includes("application/json")||$w(c))try{u=JSON.parse(c)}catch{u=c}else u=c;if(!l.ok)throw new Cn(l.status,iv(l.status,u,e),e,u);return u}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}function Oo(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{if(!l.ok){const u=await l.text().catch(()=>""),c=u||null;throw new Cn(l.status,iv(l.status,c,e),e,c)}return l.blob()}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}class ov{constructor(t){En(this,"store",new Map);En(this,"inflight",new Map);En(this,"totalBytes",0);this.maxBytes=t}getMaxBytes(){return this.maxBytes}getTotalBytes(){return this.totalBytes}getSize(){return this.store.size}has(t){return this.store.has(t)}isInflight(t){return this.inflight.has(t)}get(t){const n=this.store.get(t);if(n)return this.store.delete(t),this.store.set(t,n),n.blob}evictIfNeeded(t){for(;this.totalBytes+t>this.maxBytes&&this.store.size>0;){const n=this.store.keys().next().value;if(n==null)break;const r=this.store.get(n);r&&(this.totalBytes-=r.size),this.store.delete(n)}}set(t,n){const r=n.size||0;if(!(r>this.maxBytes)){if(this.store.has(t)){const s=this.store.get(t);this.totalBytes-=s.size,this.store.delete(t)}this.evictIfNeeded(r),this.store.set(t,{blob:n,size:r}),this.totalBytes+=r}}async getOrFetch(t,n){const r=this.get(t);if(r)return r;const s=this.inflight.get(t);if(s)return s.promise;const i=n(),o=typeof i=="object"&&"promise"in i,l=o?i.promise:i,u=o?i.abort:void 0,c=l.then(f=>(this.set(t,f),f)).finally(()=>{this.inflight.delete(t)});return this.inflight.set(t,{promise:c,abort:u}),c}prefetch(t,n){if(this.store.has(t)||this.inflight.has(t))return;const r=n(),s=typeof r=="object"&&"promise"in r,i=s?r.promise:r,o=s?r.abort:void 0,l=i.then(u=>(this.set(t,u),u)).catch(()=>new Blob).finally(()=>{this.inflight.delete(t)});this.inflight.set(t,{promise:l,abort:o})}cancelPrefetch(t){const n=this.inflight.get(t);if(n!=null&&n.abort)try{n.abort()}catch{}this.inflight.delete(t)}clear(){for(const[t,n]of this.inflight)if(n.abort)try{n.abort()}catch{}this.inflight.clear(),this.store.clear(),this.totalBytes=0}evictPrefix(t){const n=(()=>{const s=t?`/${t.replace(/^\/+/,"")}`:"/";return s==="/"?"/":s.replace(/\/+$/,"")})(),r=s=>{const i=s.startsWith("/")?s.replace(/\/+$/,""):`/${s.replace(/\/+$/,"")}`;return n==="/"?!0:i===n||i.startsWith(`${n}/`)};for(const[s,i]of Array.from(this.store.entries()))r(s)&&(this.totalBytes-=i.size,this.store.delete(s));for(const[s,i]of Array.from(this.inflight.entries()))if(r(s)){if(i.abort)try{i.abort()}catch{}this.inflight.delete(s)}this.totalBytes<0&&(this.totalBytes=0)}}const as=new ov(60*1024*1024),hc=new ov(20*1024*1024),Ga={};function Uw(){const e=Ga==null?void 0:Ga.VITE_API_BASE,t=typeof window<"u",n=t?window.location.origin:"http://localhost",r=t?window.location.hostname:"localhost",s=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\]|.+\.localhost)$/i.test(r);if(!e)return"";let i;try{i=new URL(e,n)}catch{return""}const o=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\])$/i.test(i.hostname);return s?i.origin:o?"":i.origin}const Fe=Uw();const Bw=40*1024*1024,Mh="lenslet.client_id",Rh="lenslet.client_id.session",lv="lenslet.last_event_id",Ww=1e3,Hw=3e4,Vw=5;let is=null,Zo=null,Lh=0,js=null,Ms=0,ea=!0,_l=!1;function av(){return typeof window<"u"&&typeof EventSource<"u"}function Th(e,t){if(!e)return null;try{return e.getItem(t)}catch{return null}}function _h(e,t,n){if(e)try{e.setItem(t,n)}catch{}}function Qw(){if(typeof navigator>"u")return"server";const e=navigator.userAgent||"",t=navigator.language||"",n=navigator.platform||"",r=typeof Intl<"u"&&Intl.DateTimeFormat().resolvedOptions().timeZone||"",s=typeof screen<"u"?`${screen.width}x${screen.height}x${screen.colorDepth}`:"";return[e,t,n,r,s].join("|")}function Kw(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=t*16777619>>>0;return t.toString(16).padStart(8,"0")}function el(){if(is)return is;const e=typeof window<"u"?window.localStorage:null,t=typeof window<"u"?window.sessionStorage:null,n=Th(e,Mh)||Th(t,Rh);if(n)return is=n,n;const r=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`;if(e)return _h(e,Mh,r),is=r,r;if(t)return _h(t,Rh,r),is=r,r;const s=`fp_${Kw(Qw())}`;return is=s,s}function qi(e="lenslet"){Lh+=1;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`nonce_${Math.random().toString(36).slice(2,10)}_${Date.now()}_${Lh}`;return`${e}:${el()}:${t}`}function qw(){if(Zo!=null)return Zo;if(typeof window>"u")return null;try{const e=window.localStorage.getItem(lv);if(!e)return null;const t=Number(e);return!Number.isFinite(t)||t<=0?null:(Zo=t,t)}catch{return null}}function Yw(e){if(!(!Number.isFinite(e)||e<=0)&&(Zo=e,!(typeof window>"u")))try{window.localStorage.setItem(lv,String(e))}catch{}}function Gw(){if(typeof window>"u")return`${Fe}/events`;const e=new URL(`${Fe}/events`,window.location.origin),t=qw();return t!=null&&Number.isFinite(t)&&e.searchParams.set("last_event_id",String(t)),e.toString()}function Xw(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}let nn=null,uv="idle";const mc=new Set,pc=new Set,gc=new Set;function Rs(e){uv=e;for(const t of pc)t(e)}function jd(e){if(_l!==e){_l=e;for(const t of gc)t(e)}}function Md(){js!=null&&(window.clearTimeout(js),js=null)}function Jw(){Ms=0,Md()}function Zw(){if(!ea||js!=null)return;Ms+=1;const e=Math.min(Ww*Math.pow(2,Ms-1),Hw);Ms>=Vw?(Rs("offline"),jd(!0)):Rs("reconnecting"),js=window.setTimeout(()=>{js=null,cv()},e)}function cv(){if(!ea||!av()||(nn&&nn.readyState===EventSource.CLOSED&&(nn.close(),nn=null),nn))return;Ms>0?Rs("reconnecting"):Rs("connecting");const e=new EventSource(Gw());nn=e;const t=n=>r=>{const s=Xw(r.data);if(!s)return;const i=r.lastEventId?Number(r.lastEventId):null,o=i!=null&&Number.isFinite(i)?i:null;o!=null&&Yw(o);for(const l of mc)l({type:n,id:o,data:s})};e.addEventListener("item-updated",t("item-updated")),e.addEventListener("metrics-updated",t("metrics-updated")),e.addEventListener("presence",t("presence")),e.onopen=()=>{Jw(),jd(!1),Rs("live")},e.onerror=()=>{nn===e&&(e.close(),nn=null,Zw())}}function e1(){ea=!0,av()&&(Md(),cv())}function t1(){ea=!1,Md(),Ms=0,nn&&(nn.close(),nn=null),jd(!1),Rs("offline")}function n1(e){return mc.add(e),()=>{mc.delete(e)}}function r1(e){return pc.add(e),e(uv),()=>{pc.delete(e)}}function s1(e){return gc.add(e),e(_l),()=>{gc.delete(e)}}function i1(){return _l}const pe={getFolder:(e,t,n)=>{const r=new URLSearchParams({path:e});return t!=null&&r.set("page",String(t)),n&&r.set("recursive","1"),rt(`${Fe}/folders?${r}`).promise},search:(e,t)=>{const n=new URLSearchParams;return e&&n.set("q",e),t&&n.set("path",t),rt(`${Fe}/search?${n}`).promise},getEmbeddings:()=>rt(`${Fe}/embeddings`).promise,searchEmbeddings:e=>rt(`${Fe}/embeddings/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise,refreshFolder:e=>{const t=new URLSearchParams({path:e});return rt(`${Fe}/refresh?${t}`,{method:"POST"}).promise},getSidecar:e=>rt(`${Fe}/item?path=${encodeURIComponent(e)}`).promise,patchSidecar:(e,t,n)=>{const s={"Content-Type":"application/json","Idempotency-Key":(n==null?void 0:n.idempotencyKey)??qi("patch"),"x-client-id":el(),"x-updated-by":"web"};return(n==null?void 0:n.ifMatch)!=null&&(s["If-Match"]=String(n.ifMatch)),rt(`${Fe}/item?path=${encodeURIComponent(e)}`,{method:"PATCH",headers:s,body:JSON.stringify(t)}).promise},getMetadata:e=>rt(`${Fe}/metadata?path=${encodeURIComponent(e)}`).promise,putSidecar:(e,t)=>rt(`${Fe}/item?path=${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-client-id":el(),"x-updated-by":"web"},body:JSON.stringify(t)}).promise,getHealth:()=>rt(`${Fe}/health`).promise,postPresence:(e,t)=>rt(`${Fe}/presence`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gallery_id:e,client_id:t??el()})}).promise,getThumb:e=>hc.getOrFetch(e,()=>Oo(`${Fe}/thumb?path=${encodeURIComponent(e)}`)),prefetchThumb:e=>{hc.prefetch(e,()=>Oo(`${Fe}/thumb?path=${encodeURIComponent(e)}`))},getFile:e=>as.getOrFetch(e,()=>Oo(`${Fe}/file?path=${encodeURIComponent(e)}`)),prefetchFile:async e=>{if(!(as.has(e)||as.isInflight(e)))try{const t=await Oo(`${Fe}/file?path=${encodeURIComponent(e)}`).promise;t.size<=Bw&&as.set(e,t)}catch{}},cancelPrefetch:e=>{as.cancelPrefetch(e)},uploadFile:async(e,t)=>{const n=new FormData;return n.append("dest",e),n.append("file",t),rt(`${Fe}/file`,{method:"POST",body:n,timeoutMs:6e4}).promise},moveFile:async(e,t)=>{const n=new FormData;return n.append("src",e),n.append("dest",t),rt(`${Fe}/move`,{method:"POST",body:n}).promise},deleteFiles:async e=>rt(`${Fe}/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:e})}).promise,exportIntent:async e=>{const t=new FormData;return t.append("path",e),rt(`${Fe}/export-intent`,{method:"POST",body:t}).promise},getViews:()=>rt(`${Fe}/views`).promise,saveViews:e=>rt(`${Fe}/views`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise};class o1{constructor(t=400){En(this,"cache",new Map);En(this,"maxSize");this.maxSize=t,typeof window<"u"&&window.addEventListener("beforeunload",()=>this.clear(),{once:!0})}get(t){const n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){for(this.cache.has(t)&&this.cache.delete(t);this.cache.size>=this.maxSize;){const r=this.cache.keys().next().value;if(r===void 0)break;const s=this.cache.get(r);if(this.cache.delete(r),s)try{URL.revokeObjectURL(s)}catch{}}this.cache.set(t,n)}clear(){for(const t of this.cache.values())try{URL.revokeObjectURL(t)}catch{}this.cache.clear()}}const Xa=new o1(400);function l1({path:e,name:t,onClick:n,selected:r,highlighted:s,displayW:i,displayH:o,ioRoot:l,isScrolling:u,priority:c}){const f=d.useRef(null),[h,g]=d.useState(()=>Xa.get(e)??null),[S,w]=d.useState(!1),[N,R]=d.useState(()=>!!h);return d.useEffect(()=>{const v=f.current;if(!v)return;const m=new IntersectionObserver(p=>{for(const y of p)y.target===v&&w(y.isIntersecting||y.intersectionRatio>0)},{root:l??null,rootMargin:"200px 0px",threshold:.01});return m.observe(v),()=>{m.unobserve(v),m.disconnect()}},[l]),d.useEffect(()=>{if(h||!(S&&!u||c))return;let v=!0;return pe.getThumb(e).then(m=>{if(!v)return;const p=URL.createObjectURL(m);Xa.set(e,p),g(p)}).catch(()=>{}),()=>{v=!1}},[e,h,S,u,c]),d.useEffect(()=>{var m;if(!h){R(!1);return}const v=(m=f.current)==null?void 0:m.querySelector("img");v&&v.complete&&v.naturalWidth>0?R(!0):R(!1)},[h]),d.useEffect(()=>{g(Xa.get(e)??null)},[e]),a.jsx("div",{ref:f,className:`absolute inset-0 relative bg-hover border border-border rounded-lg overflow-hidden select-none ${r?"outline-2 outline-accent":""} ${s?"ring-2 ring-accent/60 animate-pulse":""} hover:outline hover:outline-1 hover:outline-accent`,onClick:n,children:h?a.jsx("img",{className:`w-full h-full object-cover block pointer-events-none select-none opacity-0 transition-opacity duration-[160ms] ${N?"opacity-100":""}`,src:h,alt:t,loading:"lazy",decoding:"async",onLoad:()=>R(!0),width:i?Math.round(i):void 0,height:o?Math.round(o):void 0}):null})}function os(e,t,n){let r=n.initialDeps??[],s,i=!0;function o(){var l,u,c;let f;n.key&&((l=n.debug)!=null&&l.call(n))&&(f=Date.now());const h=e();if(!(h.length!==r.length||h.some((w,N)=>r[N]!==w)))return s;r=h;let S;if(n.key&&((u=n.debug)!=null&&u.call(n))&&(S=Date.now()),s=t(...h),n.key&&((c=n.debug)!=null&&c.call(n))){const w=Math.round((Date.now()-f)*100)/100,N=Math.round((Date.now()-S)*100)/100,R=N/16,v=(m,p)=>{for(m=String(m);m.length<p;)m=" "+m;return m};console.info(`%c ${v(N,5)} /${v(w,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*R,120))}deg 100% 31%);`,n==null?void 0:n.key)}return n!=null&&n.onChange&&!(i&&n.skipInitialOnChange)&&n.onChange(s),i=!1,s}return o.updateDeps=l=>{r=l},o}function Ph(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const a1=(e,t)=>Math.abs(e-t)<1.01,u1=(e,t,n)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,s),n)}},Ih=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},c1=e=>e,d1=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},f1=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const s=o=>{const{width:l,height:u}=o;t({width:Math.round(l),height:Math.round(u)})};if(s(Ih(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const u=o[0];if(u!=null&&u.borderBoxSize){const c=u.borderBoxSize[0];if(c){s({width:c.inlineSize,height:c.blockSize});return}}s(Ih(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},Fh={passive:!0},Oh=typeof window>"u"?!0:"onscrollend"in window,h1=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&Oh?()=>{}:u1(r,()=>{t(s,!1)},e.options.isScrollingResetDelay),o=f=>()=>{const{horizontal:h,isRtl:g}=e.options;s=h?n.scrollLeft*(g&&-1||1):n.scrollTop,i(),t(s,f)},l=o(!0),u=o(!1);u(),n.addEventListener("scroll",l,Fh);const c=e.options.useScrollendEvent&&Oh;return c&&n.addEventListener("scrollend",u,Fh),()=>{n.removeEventListener("scroll",l),c&&n.removeEventListener("scrollend",u)}},m1=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},p1=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const o=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class g1{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:c1,rangeExtractor:d1,onChange:()=>{},measureElement:m1,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=os(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=n[o];if(s.has(l.lane))continue;const u=i.get(l.lane);if(u==null||l.end>u.end?i.set(l.lane,l):l.end<u.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=os(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,s,i,o,l)=>(this.prevLanes!==void 0&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=os(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l},u)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const g of this.laneAssignments.keys())g>=n&&this.laneAssignments.delete(g);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(g=>{this.itemSizeCache.set(g.key,g.size)}));const c=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const f=this.measurementsCache.slice(0,c),h=new Array(l).fill(void 0);for(let g=0;g<c;g++){const S=f[g];S&&(h[S.lane]=g)}for(let g=c;g<n;g++){const S=i(g),w=this.laneAssignments.get(g);let N,R;if(w!==void 0&&this.options.lanes>1){N=w;const y=h[N],b=y!==void 0?f[y]:void 0;R=b?b.end+this.options.gap:r+s}else{const y=this.options.lanes===1?f[g-1]:this.getFurthestMeasurement(f,g);R=y?y.end+this.options.gap:r+s,N=y?y.lane:g%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(g,N)}const v=u.get(S),m=typeof v=="number"?v:this.options.estimateSize(g),p=R+m;f[g]={index:g,start:R,size:m,end:p,key:S,lane:N},h[N]=g}return this.measurementsCache=f,f},{key:!1,debug:()=>this.options.debug}),this.calculateRange=os(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?v1({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=os(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,o)=>i===null||o===null?[]:n({startIndex:i,endIndex:o,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=os(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,o=n.length;i<o;i++){const l=n[i],u=r[l];s.push(u)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return Ph(r[dv(0,r.length-1,s=>Ph(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(s.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const o=10,l=c=>{if(!this.targetWindow)return;const f=this.getOffsetForIndex(n,c);if(!f){console.warn("Failed to get offset for index:",n);return}const[h,g]=f;this._scrollToOffset(h,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const S=this.getScrollOffset(),w=this.getOffsetForIndex(n,g);if(!w){console.warn("Failed to get offset for index:",n);return}a1(w[0],S)||u(g)})},u=c=>{this.targetWindow&&(i++,i<o?this.targetWindow.requestAnimationFrame(()=>l(c)):console.warn(`Failed to scroll to index ${n} after ${o} attempts.`))};l(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}s=Math.max(...i.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const dv=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function v1({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const s=e.length-1,i=u=>e[u].start;if(e.length<=r)return{startIndex:0,endIndex:s};let o=dv(0,s,i,n),l=o;if(r===1)for(;l<s&&e[l].end<n+t;)l++;else if(r>1){const u=Array(r).fill(0);for(;l<s&&u.some(f=>f<n+t);){const f=e[l];u[f.lane]=f.end,l++}const c=Array(r).fill(n+t);for(;o>=0&&c.some(f=>f>=n);){const f=e[o];c[f.lane]=f.start,o--}o=Math.max(0,o-o%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const Dh=typeof document<"u"?d.useLayoutEffect:d.useEffect;function y1(e){const t=d.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var o;i?kd.flushSync(t):t(),(o=e.onChange)==null||o.call(e,s,i)}},[r]=d.useState(()=>new g1(n));return r.setOptions(n),Dh(()=>r._didMount(),[]),Dh(()=>r._willUpdate()),r}function x1(e){return y1({observeElementRect:f1,observeElementOffset:h1,scrollToFn:p1,...e})}function w1({containerW:e,gap:t,targetCell:n,aspect:r,captionH:s}){const i=Math.max(1,Math.floor((e+t)/(n+t))),o=(e-t*(i-1))/i,l=o*r.h/r.w,u=l+s+t;return{columns:i,cellW:o,mediaH:l,rowH:u}}const S1=1.333;function k1({items:e,containerWidth:t,targetHeight:n,gap:r,captionH:s}){if(t<=0)return[];const i=[];let o=[],l=0;const u=(c,f)=>({index:i.length,height:f+s+r,imageH:f,items:c.map(h=>({item:h.item,displayW:h.aspect*f,displayH:f,originalIndex:h.originalIndex}))});for(let c=0;c<e.length;c++){const f=e[c],h=f.w>0&&f.h>0?f.w/f.h:S1;o.push({item:f,aspect:h,originalIndex:c}),l+=h;const g=(o.length-1)*r;if(l*n+g>=t){const w=(t-g)/l;i.push(u(o,w)),o=[],l=0}}return o.length>0&&i.push(u(o,n)),i}function C1(e,t,n){return{mode:"adaptive",rows:k1({items:t,containerWidth:e,targetHeight:n.targetCell,gap:n.gap,captionH:n.captionH})}}function b1(e,t,n){const{columns:r,cellW:s,mediaH:i,rowH:o}=w1({containerW:e,gap:n.gap,targetCell:n.targetCell,aspect:n.aspect,captionH:n.captionH}),l=Math.ceil(t.length/Math.max(1,r));return{mode:"grid",columns:r,cellW:s,mediaH:i,rowH:o,rowCount:l}}function E1(e,t,n){const[r,s]=d.useState(0);d.useLayoutEffect(()=>{const u=e.current;if(!u)return;const c=()=>{const h=getComputedStyle(u),g=u.clientWidth-parseFloat(h.paddingLeft)-parseFloat(h.paddingRight);s(g)},f=new ResizeObserver(c);return f.observe(u),c(),()=>f.disconnect()},[]);const i=d.useMemo(()=>n.viewMode==="adaptive"?C1(r,t,n):b1(r,t,n),[r,t,n.viewMode,n.gap,n.targetCell,n.aspect.w,n.aspect.h,n.captionH]),o=x1({count:i.mode==="adaptive"?i.rows.length:i.rowCount,getScrollElement:()=>e.current,estimateSize:u=>i.mode==="adaptive"?i.rows[u].height:i.rowH,overscan:8}),l=o.getVirtualItems();return d.useEffect(()=>{o.measure()},[i,o]),{width:r,layout:i,rowVirtualizer:o,virtualRows:l}}function N1(e,t,n,r){if(!e.length)return null;const s=n?e.findIndex(l=>l.path===n):0,i=Math.max(1,t);let o=s;if(r.key==="ArrowRight"||r.key==="d")o=Math.min(e.length-1,s+1);else if(r.key==="ArrowLeft"||r.key==="a")o=Math.max(0,s-1);else if(r.key==="ArrowDown"||r.key==="s")o=Math.min(e.length-1,s+i);else if(r.key==="ArrowUp"||r.key==="w")o=Math.max(0,s-i);else return r.key==="Enter"&&n?"open":null;return o}const Nn=12,j1=44,M1={w:4,h:3},R1=350,L1=120;function T1({items:e,selected:t,restoreToSelectionToken:n,onSelectionChange:r,onOpenViewer:s,onContextMenuItem:i,highlight:o,recentlyUpdated:l,suppressSelectionHighlight:u=!1,viewMode:c="grid",targetCellSize:f=220,scrollRef:h,hideScrollbar:g=!1}){const[S,w]=d.useState(null),[N,R]=d.useState(null),[v,m]=d.useState(!1),[p,y]=d.useState(null),[b,L]=d.useState(null),M=d.useRef(null),E=d.useRef(null),T=d.useRef(null),C=h??T,I=d.useRef(null),Q=f,{width:z,layout:$,rowVirtualizer:ie,virtualRows:B}=E1(C,e,{gap:Nn,targetCell:Q,aspect:M1,captionH:j1,viewMode:c}),ce=d.useMemo(()=>{const U=new Map;for(let re=0;re<e.length;re++)U.set(e[re].path,re);return U},[e]),F=d.useMemo(()=>{if($.mode!=="adaptive")return null;const U=new Map;return $.rows.forEach((re,ue)=>{let ye=0;re.items.forEach((oe,ve)=>{const ee=ye+oe.displayW/2;U.set(oe.item.path,{row:ue,center:ee,order:ve}),ye+=oe.displayW+Nn})}),U},[$]);d.useEffect(()=>{if(!t.length)return;const U=t[0];p!==U&&y(U)},[t,p]);const H=d.useMemo(()=>{if($.mode!=="adaptive")return null;let U=0;return $.rows.map(re=>{const ue=U;return U+=re.height,{start:ue,height:re.height}})},[$]),q=d.useRef(null),he=(U,re)=>{try{if(q.current!=null){try{cancelAnimationFrame(q.current)}catch{}q.current=null}const ue=U.scrollTop,ye=re-ue;if(Math.abs(ye)<1){U.scrollTop=re;return}const oe=140,ve=performance.now(),ee=de=>1-Math.pow(1-de,3),V=de=>{const Ce=Math.min(1,(de-ve)/oe),be=ee(Ce);U.scrollTop=ue+ye*be,Ce<1?q.current=requestAnimationFrame(V):q.current=null};q.current=requestAnimationFrame(V)}catch{U.scrollTop=re}},[fe,je]=d.useState(!1);d.useEffect(()=>{const U=C.current;if(!U)return;let re=0;const ue=()=>{je(!0),window.clearTimeout(re),re=window.setTimeout(()=>je(!1),L1)};return U.addEventListener("scroll",ue,{passive:!0}),()=>U.removeEventListener("scroll",ue)},[]);const W=()=>{E.current!=null&&(window.clearTimeout(E.current),E.current=null)},Y=()=>{if(W(),m(!1),w(null),M.current){try{URL.revokeObjectURL(M.current)}catch{}M.current=null}R(null)},te=U=>{fe||(W(),w(U),m(!1),E.current=window.setTimeout(async()=>{E.current=null;try{const re=await pe.getFile(U),ue=URL.createObjectURL(re);if(M.current)try{URL.revokeObjectURL(M.current)}catch{}M.current=ue,R(ue),m(!0)}catch{}},R1))},me=$.mode==="grid"?$.columns:Math.max(1,Math.floor(z/(Q+Nn))),Ve=(U,re)=>{if($.mode!=="adaptive")return null;const ue=$.rows[U];if(!ue)return null;let ye=0,oe=null;for(const ve of ue.items){const ee=ye+ve.displayW/2,V=Math.abs(ee-re);(!oe||V<oe.dist)&&(oe={path:ve.item.path,dist:V}),ye+=ve.displayW+Nn}return oe?oe.path:null},Ye=(U,re)=>{var be,pt,O,ne;if(!e.length)return null;const ue=U??e[0].path;if($.mode!=="adaptive"){const le=N1(e,me,ue,re);return le==="open"||le==null?le:((be=e[le])==null?void 0:be.path)??null}const ye=F==null?void 0:F.get(ue);if(!ye)return ue;const oe=ce.get(ue)??0,ve=re.key;if(ve==="Enter")return"open";if(ve==="ArrowRight"||ve==="d")return((pt=e[Math.min(e.length-1,oe+1)])==null?void 0:pt.path)??ue;if(ve==="ArrowLeft"||ve==="a")return((O=e[Math.max(0,oe-1)])==null?void 0:O.path)??ue;const ee=ve==="ArrowDown"||ve==="s"?1:ve==="ArrowUp"||ve==="w"?-1:0;if(ee===0)return null;const V=ye.row+ee;if(V<0||V>=(((ne=$.rows)==null?void 0:ne.length)??0))return ue;const de=ye.center;return Ve(V,de)??ue},Re=U=>{var re;try{(re=document.getElementById(`cell-${encodeURIComponent(U)}`))==null||re.focus()}catch{}},ht=U=>{try{pe.prefetchFile(U),pe.prefetchThumb(U)}catch{}},Ae=(U,re)=>{y(U),L(U);const ue=!!re.shiftKey,ye=!!(re.ctrlKey||re.metaKey);if(ue){const oe=I.current??p??t[0]??U,ve=ce.get(oe)??e.findIndex(V=>V.path===oe),ee=ce.get(U)??e.findIndex(V=>V.path===U);if(ve!==-1&&ee!==-1){const V=Math.min(ve,ee),de=Math.max(ve,ee),Ce=e.slice(V,de+1).map(be=>be.path);if(ye){const be=new Set(t);for(const pt of Ce)be.add(pt);r(Array.from(be))}else r(Ce)}else r([U])}else if(ye){const oe=new Set(t);oe.has(U)?oe.delete(U):oe.add(U),r(Array.from(oe)),I.current=U}else r([U]),I.current=U;fe||ht(U),Re(U)},fn=(U,re)=>{var ue,ye;try{const oe=Ie.has(U)&&t.length>0?t:[U];(ue=re.dataTransfer)==null||ue.setData("application/x-lenslet-paths",JSON.stringify(oe)),re.dataTransfer&&(re.dataTransfer.effectAllowed="copyMove");try{document.body.classList.add("drag-active")}catch{}const ee=re.currentTarget.querySelector(".cell-content img"),V=document.createElement("div");V.className="drag-ghost";const de=document.createElement("img");de.draggable=!1,de.alt="drag",ee&&ee.src&&(de.src=ee.src),V.appendChild(de),document.body.appendChild(V);const Ce=V.getBoundingClientRect().width||150;(ye=re.dataTransfer)==null||ye.setDragImage(V,Math.round(Ce/2),0);const be=()=>{try{V.remove()}catch{}try{document.body.classList.remove("drag-active")}catch{}window.removeEventListener("dragend",be),window.removeEventListener("pointerup",be),document.removeEventListener("visibilitychange",be)};window.addEventListener("dragend",be),window.addEventListener("pointerup",be),document.addEventListener("visibilitychange",be)}catch{}};d.useEffect(()=>{const U=C.current;if(!U)return;const re=ue=>{var be,pt,O;const ye=Ye(b,ue);if(ye==null)return;if(ue.preventDefault(),ye==="open"){b&&s(b);return}const oe=e.find(ne=>ne.path===ye);if(!oe)return;L(oe.path),y(oe.path),r([oe.path]);try{I.current=oe.path}catch{}const ve=$.mode==="grid"?Math.floor((ce.get(oe.path)??0)/Math.max(1,$.columns)):((be=F==null?void 0:F.get(oe.path))==null?void 0:be.row)??0,ee=U.scrollTop,V=ee+U.clientHeight,de=$.mode==="adaptive"?((pt=H==null?void 0:H[ve])==null?void 0:pt.start)??0:ve*$.rowH,Ce=$.mode==="adaptive"?de+(((O=H==null?void 0:H[ve])==null?void 0:O.height)??0):de+$.rowH;(de<ee||Ce>V)&&he(U,de),Re(oe.path)};return U.addEventListener("keydown",re),()=>{U.removeEventListener("keydown",re)}},[e,b,me,s,$,F,H,ce]),d.useLayoutEffect(()=>{var ve;const U=C.current;if(!U||!n||!t||t.length===0)return;const re=t[0],ue=ce.get(re);if(ue==null||ue<0)return;let ye=0;if($.mode==="grid")ye=Math.floor(ue/Math.max(1,$.columns));else{let ee=0,V=$.rows.length-1;for(;ee<=V;){const de=ee+V>>1,Ce=$.rows[de];if(ue>=Ce.items[0].originalIndex&&ue<=Ce.items[Ce.items.length-1].originalIndex){ye=de;break}ue<Ce.items[0].originalIndex?V=de-1:ee=de+1}}const oe=$.mode==="adaptive"?((ve=H==null?void 0:H[ye])==null?void 0:ve.start)??0:ye*$.rowH;try{U.scrollTop=oe}catch{}},[n,$,H]);const Ie=d.useMemo(()=>new Set(t),[t]),Xt=!!(S&&N&&v);d.useEffect(()=>{var U;(U=C.current)==null||U.focus()},[]),d.useEffect(()=>{var U;if(u){try{(U=C.current)==null||U.blur()}catch{}try{L(null)}catch{}}},[u]);const mt=b?`cell-${encodeURIComponent(b)}`:void 0;return a.jsx("div",{role:"grid","aria-label":"Gallery",className:`relative h-full overflow-auto p-3 outline-none ${g?"scrollbar-hidden pr-4":"scrollbar-thin"} ${Xt?"cursor-zoom-in":""}`,ref:C,tabIndex:0,"aria-activedescendant":mt,onMouseDown:()=>{var U;return(U=C.current)==null?void 0:U.focus()},style:{"--gap":`${Nn}px`},children:a.jsxs("div",{className:"relative w-full",style:{height:ie.getTotalSize()},children:[B.map(U=>{var ve;let re=[],ue={},ye="";if($.mode==="adaptive"){const ee=$.rows[U.index];if(!ee)return null;re=ee.items,ue={height:ee.height,transform:`translate3d(0, ${U.start}px, 0)`,display:"flex",gap:Nn,paddingBottom:Nn},ye="absolute top-0 left-0 right-0 w-full will-change-transform"}else{const ee=U.index*$.columns;re=e.slice(ee,ee+$.columns).map(de=>({item:de,displayW:$.cellW,displayH:$.mediaH})),ue={transform:`translate3d(0, ${U.start}px, 0)`,gridTemplateColumns:`repeat(${$.columns}, minmax(0, 1fr))`,gap:Nn,paddingBottom:Nn},ye="absolute top-0 left-0 right-0 w-full grid will-change-transform"}const oe=U.index===((ve=B[0])==null?void 0:ve.index);try{if(!fe)for(const{item:ee}of re)try{pe.prefetchThumb(ee.path)}catch{}}catch{}return a.jsx("div",{className:ye,role:"row",style:ue,children:re.map(({item:ee,displayW:V,displayH:de})=>{const Ce=!u&&(p===ee.path||Ie.has(ee.path)),be=(l==null?void 0:l.has(ee.path))??!1,pt=$.mode==="adaptive"?{width:V}:{},O=$.mode==="adaptive"?{height:de}:{},ne=$.mode==="adaptive"?"relative rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group shrink-0":"relative aspect-[4/3] rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group";return a.jsxs("div",{id:`cell-${encodeURIComponent(ee.path)}`,className:`relative min-w-0 ${Ce?"outline outline-2 outline-accent outline-offset-2 rounded-[10px]":""}`,role:"gridcell","aria-selected":Ce,tabIndex:b===ee.path?0:-1,onFocus:()=>L(ee.path),draggable:!0,style:pt,onDragStart:le=>fn(ee.path,le),onDragEnd:()=>{},onContextMenu:le=>{le.preventDefault(),le.stopPropagation(),i&&i(le,ee.path)},children:[a.jsxs("div",{className:ne,style:O,onMouseEnter:()=>{try{pe.prefetchFile(ee.path)}catch{}},onDoubleClick:()=>s(ee.path),onMouseLeave:Y,children:[a.jsx("div",{className:"cell-content absolute inset-0",children:a.jsx(l1,{path:ee.path,name:ee.name,selected:Ce,highlighted:be,displayW:V,displayH:de,ioRoot:C.current,isScrolling:fe,priority:oe,onClick:le=>Ae(ee.path,le)})}),a.jsx("div",{className:"absolute right-0 bottom-0 w-7 h-7 cursor-zoom-in",onMouseEnter:()=>te(ee.path),onMouseLeave:Y,children:a.jsx("div",{className:"absolute right-0 bottom-0 h-[18px] w-[18px] flex items-center justify-center text-text select-none opacity-0 group-hover:opacity-50 hover:opacity-100 transition-all duration-[140ms]",style:{clipPath:'path("M0 9C0 4.02944 4.02944 0 9 0H18V18H0V9Z")',background:"linear-gradient(135deg, rgba(18,18,18,0.9) 0%, rgba(34,34,34,0.9) 60%, rgba(22,22,22,0.9) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",borderLeft:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 1px 2px rgba(0,0,0,0.45)",backdropFilter:"blur(1px)"},children:a.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#d9dce2]","aria-hidden":"true",style:{transform:"translate(0px,0px)"},children:[a.jsx("circle",{cx:"11",cy:"11",r:"5.4"}),a.jsx("path",{d:"M15.5 15.5 L19 19"})]})})})]}),a.jsxs("div",{className:"flex flex-col items-center text-center gap-0 mt-1 px-0.5 text-white/90",children:[a.jsx("div",{className:"text-sm leading-[18px] thumb-filename line-clamp-2 break-words hyphens-auto text-center",title:ee.name,children:(()=>{const le=(o||"").trim();if(!le)return ee.name;const Ee=ee.name,bt=Ee.toLowerCase().indexOf(le.toLowerCase());if(bt===-1)return ee.name;const hn=Ee.slice(0,bt),lo=Ee.slice(bt,bt+le.length),Zs=Ee.slice(bt+le.length);return a.jsxs(a.Fragment,{children:[hn,a.jsx("mark",{className:"bg-accent/20 text-inherit rounded px-0.5",children:lo}),Zs]})})()}),a.jsxs("div",{className:"text-[11px] leading-[15px] opacity-70",children:[ee.w,"  ",ee.h]})]})]},ee.path)})},U.key)}),S&&N&&v&&kd.createPortal(a.jsx("div",{className:"toolbar-offset fixed inset-0 z-[999] flex items-center justify-center pointer-events-none bg-black/20 opacity-100",children:a.jsx("img",{src:N,alt:"preview",className:"max-w-[80vw] max-h-[80vh] object-contain opacity-[0.98]"})}),document.body)]},`${c}-${me}`)})}const _1=48,P1=[.1,.24,.5,.74,.9];function I1({items:e,metricKey:t,scrollRef:n,sortDir:r}){const{orderedValues:s,numericValues:i}=d.useMemo(()=>{var C;const E=[],T=[];for(const I of e){const Q=(C=I.metrics)==null?void 0:C[t],z=Q==null||Number.isNaN(Q)?null:Q;E.push(z),z!=null&&T.push(z)}return{orderedValues:E,numericValues:T}},[e,t]),o=d.useMemo(()=>F1(i,_1),[i]),l=d.useMemo(()=>O1(i,P1),[i]),[u,c]=d.useState(0),[f,h]=d.useState(null),[g,S]=d.useState(!1),w=d.useRef(null);if(d.useEffect(()=>{const E=n.current;if(!E)return;const T=()=>{const C=Math.max(1,E.scrollHeight-E.clientHeight),I=Pr(C>0?E.scrollTop/C:0);c(I)};return T(),E.addEventListener("scroll",T,{passive:!0}),window.addEventListener("resize",T),()=>{E.removeEventListener("scroll",T),window.removeEventListener("resize",T)}},[n,e.length]),d.useEffect(()=>{h(null)},[t,e.length]),!o)return null;const N={min:o.min,max:o.max},R=f!=null?Ah(f):null,v=Ah(u),m=r==="desc",p=d.useMemo(()=>f==null?null:A1(s,f),[s,f]);function y(E){h(Pr(E))}function b(){h(null)}function L(E){const T=n.current;if(!T)return;const C=Math.max(0,T.scrollHeight-T.clientHeight);T.scrollTop=Pr(E)*C}function M(E){var C;const T=(C=w.current)==null?void 0:C.getBoundingClientRect();return T?Pr((E.clientY-T.top)/T.height):null}return a.jsxs("div",{className:"absolute right-0 top-3 bottom-3 w-[14px] flex items-stretch pointer-events-auto",children:[a.jsxs("svg",{ref:w,viewBox:"0 0 10 100",preserveAspectRatio:"none",className:"w-full h-full rounded bg-surface-inset border border-border/60 cursor-ns-resize",onPointerDown:E=>{var C;E.preventDefault();const T=M(E);T!=null&&(S(!0),y(T),L(T),(C=w.current)==null||C.setPointerCapture(E.pointerId))},onPointerMove:E=>{const T=M(E);if(T==null){g||b();return}y(T),g&&L(T)},onPointerUp:E=>{var T;S(!1),(T=w.current)==null||T.releasePointerCapture(E.pointerId)},onPointerLeave:()=>{g||b()},children:[D1(o.bins,"var(--border-strong)",{flip:m}),z1(l,N,{flip:m,color:"var(--muted)"}),zh(v,{color:"var(--highlight)",strokeWidth:.8}),R!=null&&zh(R,{color:"var(--text-secondary)",strokeWidth:.6,dashed:!0})]}),p!=null&&f!=null&&a.jsx("div",{className:"pointer-events-none absolute right-full mr-2 px-1.5 py-0.5 rounded border border-border bg-surface text-[10px] text-text shadow",style:{top:`calc(${(f*100).toFixed(2)}% - 8px)`},children:U1(p)})]})}function F1(e,t){if(!e.length)return null;const n=Math.min(...e);let r=Math.max(...e);n===r&&(r=n+1);const s=new Array(t).fill(0),i=t/(r-n);for(const o of e){const l=Math.max(0,Math.min(t-1,Math.floor((o-n)*i)));s[l]+=1}return{bins:s,min:n,max:r}}function O1(e,t){if(!e.length)return[];const n=[...e].sort((s,i)=>s-i),r=n.length-1;return t.map(s=>{const i=r*s,o=Math.floor(i),l=Math.ceil(i);if(o===l)return n[o];const u=i-o;return n[o]+(n[l]-n[o])*u})}function D1(e,t,n){const r=Math.max(1,...e),s=100/e.length,i=(n==null?void 0:n.flip)??!1;return e.map((o,l)=>{const u=Math.max(.8,o/r*10),c=(i?e.length-1-l:l)*s;return a.jsx("rect",{x:10-u,y:c,width:u,height:Math.max(.2,s-.2),fill:t,opacity:.9},`sb-${l}`)})}function z1(e,t,n){const r=(n==null?void 0:n.flip)??!1,s=n==null?void 0:n.color;return e.map((i,o)=>{const l=$1(i,t,r),u=o===2;return a.jsx("line",{x1:0,y1:l,x2:10,y2:l,stroke:s,strokeWidth:u?.8:.5,opacity:u?.9:.6,vectorEffect:"non-scaling-stroke"},`qt-${o}-${i}`)})}function zh(e,t){return a.jsx("line",{x1:0,y1:e,x2:10,y2:e,stroke:t.color,strokeWidth:t.strokeWidth??.6,strokeDasharray:t.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function A1(e,t){if(!e.length)return null;const n=Math.round(Pr(t)*(e.length-1)),r=e[n];if(r!=null)return r;for(let s=1;s<e.length;s++){const i=n-s;if(i>=0&&e[i]!=null)return e[i];const o=n+s;if(o<e.length&&e[o]!=null)return e[o]}return null}function $1(e,t,n){const r=t.max-t.min;if(r===0)return 0;const s=Pr((e-t.min)/r);return(n?1-s:s)*100}function Ah(e){return Pr(e)*100}function Pr(e){return e<0?0:e>1?1:e}function U1(e){if(e==null||Number.isNaN(e))return"-";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Ir(e,t){const[n,r]=d.useState(null),s=d.useRef(null);return d.useEffect(()=>{if(!e){if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}r(null);return}let i=!0;return e().then(o=>{if(!i)return;const l=URL.createObjectURL(o);if(s.current)try{URL.revokeObjectURL(s.current)}catch{}s.current=l,r(l)}).catch(()=>{}),()=>{i=!1}},t),d.useEffect(()=>()=>{if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}},[]),n}function B1(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[o,l]=d.useState(1),[u,c]=d.useState(!1),[f,h]=d.useState(!1),[g,S]=d.useState(!1),w=d.useRef(null),N=d.useRef(null),R=()=>{const p=w.current,y=N.current;if(!p||!y||!y.naturalWidth||!y.naturalHeight)return;const b=p.getBoundingClientRect(),L=b.width/y.naturalWidth,M=b.height/y.naturalHeight,E=Math.min(1,Math.min(L,M));l(E);const T=y.naturalWidth*E,C=y.naturalHeight*E;r((b.width-T)/2),i((b.height-C)/2)};return d.useEffect(()=>{const p=w.current;if(!p)return;const y=new ResizeObserver(()=>{try{requestAnimationFrame(()=>R())}catch{R()}});return y.observe(p),()=>y.disconnect()},[]),{scale:e,setScale:t,tx:n,setTx:r,ty:s,setTy:i,base:o,setBase:l,ready:u,setReady:c,dragging:f,setDragging:h,visible:g,setVisible:S,containerRef:w,imgRef:N,fitAndCenter:R,handleWheel:p=>{p.preventDefault();const y=p.deltaY>0?-1:1,b=1.2,L=.05,M=8,E=w.current;if(!E)return;const T=E.getBoundingClientRect(),C=p.clientX-T.left,I=p.clientY-T.top;t(Q=>{const z=Math.min(M,Math.max(L,Q*Math.pow(b,y))),$=z/Q;return r(ie=>C-$*(C-ie)),i(ie=>I-$*(I-ie)),Number(z.toFixed(4))})},handleMouseDown:p=>{const y=w.current,b=N.current;if(!y||!b||p.target!==b)return;const M=y.getBoundingClientRect();if(p.clientX<M.left||p.clientX>M.right||p.clientY<M.top||p.clientY>M.bottom)return;p.preventDefault(),p.stopPropagation(),h(!0);const E=p.clientX,T=p.clientY,C=n,I=s,Q=$=>{r(C+($.clientX-E)),i(I+($.clientY-T))},z=()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",z),h(!1)};window.addEventListener("mousemove",Q),window.addEventListener("mouseup",z)}}}function W1({path:e,onClose:t,onNavigate:n,onZoomChange:r,requestedZoomPercent:s,onZoomRequestConsumed:i}){const{scale:o,setScale:l,tx:u,setTx:c,ty:f,setTy:h,base:g,ready:S,setReady:w,dragging:N,visible:R,setVisible:v,containerRef:m,imgRef:p,fitAndCenter:y,handleWheel:b,handleMouseDown:L}=B1(),M=Ir(()=>pe.getFile(e),[e]),E=Ir(()=>pe.getThumb(e),[e]),T=d.useCallback(()=>{v(!1),window.setTimeout(t,110)},[t,v]);return d.useEffect(()=>{requestAnimationFrame(()=>{var C;v(!0),(C=m.current)==null||C.focus()})},[e]),d.useEffect(()=>{const C=I=>{I.key==="Escape"?T():(I.key==="ArrowRight"||I.key==="d")&&n?n(1):(I.key==="ArrowLeft"||I.key==="a")&&n&&n(-1)};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[t,n]),d.useEffect(()=>{w(!1)},[M]),d.useEffect(()=>{r&&r(g*o*100)},[g,o,r]),d.useEffect(()=>{if(s==null)return;const C=m.current;if(!C){i&&i();return}const I=Math.max(.05,Math.min(8,s/100/Math.max(1e-6,g))),Q=C.getBoundingClientRect(),z=Q.width/2,$=Q.height/2;l(ie=>{const B=I/ie;return c(ce=>z-B*(z-ce)),h(ce=>$-B*($-ce)),Number(I.toFixed(4))}),i&&i()},[s,g,i]),a.jsxs("div",{ref:m,role:"dialog","aria-modal":!0,"aria-label":"Image viewer",tabIndex:-1,className:`toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] flex items-start justify-start bg-panel z-viewer overflow-hidden transition-opacity duration-[110ms] ease-out cursor-grab focus:outline-none focus-visible:outline-none ${N?"cursor-grabbing select-none":""} ${R?"opacity-100":"opacity-0"}`,style:{outline:"none"},onClick:T,onWheel:b,onMouseDown:L,onKeyDown:C=>{C.key==="Tab"&&C.preventDefault()},children:[a.jsxs("button",{"aria-label":"Close",onClick:C=>{C.stopPropagation(),T()},className:"btn btn-sm absolute top-3 right-3 z-10",title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]}),E&&a.jsx("img",{src:E,alt:"thumb",className:"absolute top-0 left-0 max-w-none max-h-none object-contain pointer-events-none transition-opacity duration-[110ms] ease-out",draggable:!1,onDragStart:C=>C.preventDefault(),style:{transform:`translate(${u}px, ${f}px) scale(${g})`,transformOrigin:"0 0",opacity:S?0:.5,filter:"blur(0.25px)"}}),M&&a.jsx("img",{ref:p,src:M,alt:"viewer",className:"max-w-none max-h-none object-contain transition-opacity duration-[110ms] ease-out will-change-transform select-none",draggable:!1,onDragStart:C=>{C.preventDefault()},onLoad:C=>{y(),l(1);try{requestAnimationFrame(()=>w(!0))}catch{w(!0)}},onClick:C=>C.stopPropagation(),style:{transform:`translate(${u}px, ${f}px) scale(${g*o})`,transformOrigin:"0 0",opacity:S?.99:0,WebkitUserDrag:"none"}})]})}function Rd(e){return!e||!(e instanceof HTMLElement)?!1:e.closest('input, textarea, [contenteditable="true"]')!==null}const H1=1.2,V1=.05,Q1=8;function K1(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[o,l]=d.useState(0),[u,c]=d.useState(0),[f,h]=d.useState(1),[g,S]=d.useState(1),[w,N]=d.useState(!1),R=d.useRef(null),v=d.useRef(null),m=d.useRef(null),p=d.useCallback(()=>{const M=R.current;if(!M)return;const E=M.getBoundingClientRect(),T=(C,I,Q,z)=>{if(!C||!C.naturalWidth||!C.naturalHeight)return;const $=E.width/C.naturalWidth,ie=E.height/C.naturalHeight,B=Math.min(1,Math.min($,ie)),ce=C.naturalWidth*B,F=C.naturalHeight*B;I(B),Q((E.width-ce)/2),z((E.height-F)/2)};T(v.current,h,r,i),T(m.current,S,l,c)},[]);d.useEffect(()=>{const M=R.current;if(!M)return;const E=new ResizeObserver(()=>{try{requestAnimationFrame(()=>p())}catch{p()}});return E.observe(M),()=>E.disconnect()},[p]);const y=d.useCallback(()=>{t(1),p()},[p]),b=d.useCallback(M=>{M.preventDefault();const E=M.deltaY>0?-1:1,T=R.current;if(!T)return;const C=T.getBoundingClientRect(),I=M.clientX-C.left,Q=M.clientY-C.top;t(z=>{const $=Math.min(Q1,Math.max(V1,z*Math.pow(H1,E))),ie=$/z;return r(B=>I-ie*(I-B)),i(B=>Q-ie*(Q-B)),l(B=>I-ie*(I-B)),c(B=>Q-ie*(Q-B)),Number($.toFixed(4))})},[]),L=d.useCallback(M=>{if(M.button!==0||!R.current)return;M.preventDefault(),N(!0);const T=M.clientX,C=M.clientY,I=n,Q=s,z=o,$=u,ie=ce=>{const F=ce.clientX-T,H=ce.clientY-C;r(I+F),i(Q+H),l(z+F),c($+H)},B=()=>{window.removeEventListener("pointermove",ie),window.removeEventListener("pointerup",B),N(!1)};window.addEventListener("pointermove",ie),window.addEventListener("pointerup",B)},[n,s,o,u]);return{scale:e,baseA:f,baseB:g,txA:n,tyA:s,txB:o,tyB:u,dragging:w,containerRef:R,imgARef:v,imgBRef:m,fitAndCenter:p,resetView:y,handleWheel:b,handlePointerDown:L}}function q1({aItem:e,bItem:t,index:n,total:r,canPrev:s,canNext:i,onNavigate:o,onClose:l}){const u=d.useRef(null),[c,f]=d.useState(50),[h,g]=d.useState(!1),[S,w]=d.useState(!1),{scale:N,baseA:R,baseB:v,txA:m,tyA:p,txB:y,tyB:b,dragging:L,containerRef:M,imgARef:E,imgBRef:T,fitAndCenter:C,resetView:I,handleWheel:Q,handlePointerDown:z}=K1(),$=(e==null?void 0:e.path)??null,ie=(t==null?void 0:t.path)??null,B=(e==null?void 0:e.name)??$??"Select an image",ce=(t==null?void 0:t.name)??ie??"Select another image";d.useEffect(()=>{requestAnimationFrame(()=>{var Y;return(Y=u.current)==null?void 0:Y.focus()})},[$,ie]),d.useEffect(()=>{I(),g(!1),w(!1)},[$,ie,I]),d.useEffect(()=>{const Y=te=>{if(!Rd(te.target)){if(te.key==="Escape"){te.preventDefault(),l();return}if((te.key==="ArrowRight"||te.key==="d")&&i){te.preventDefault(),o(1);return}(te.key==="ArrowLeft"||te.key==="a")&&s&&(te.preventDefault(),o(-1))}};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[l,o,s,i]);const F=Ir($?()=>pe.getFile($):null,[$]),H=Ir(ie?()=>pe.getFile(ie):null,[ie]),q=Ir($?()=>pe.getThumb($):null,[$]),he=Ir(ie?()=>pe.getThumb(ie):null,[ie]),fe=d.useCallback(Y=>Math.min(95,Math.max(5,Y)),[]),je=d.useCallback(Y=>{const te=Y.target;te!=null&&te.closest(".compare-label")||te!=null&&te.closest(".compare-divider-hit")||z(Y)},[z]),W=d.useCallback(Y=>{const te=M.current;if(!te)return;Y.preventDefault(),Y.stopPropagation();const me=te.getBoundingClientRect(),Ve=Y.currentTarget;Ve.setPointerCapture(Y.pointerId);const Ye=ht=>{const Ae=(ht.clientX-me.left)/me.width*100;f(fe(Ae))},Re=ht=>{Ve.releasePointerCapture(ht.pointerId),window.removeEventListener("pointermove",Ye),window.removeEventListener("pointerup",Re)};window.addEventListener("pointermove",Ye),window.addEventListener("pointerup",Re)},[fe]);return a.jsxs("div",{ref:u,role:"dialog","aria-modal":!0,"aria-label":"Compare images",tabIndex:-1,className:"toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] bg-panel z-viewer flex flex-col overflow-hidden focus:outline-none",onKeyDown:Y=>{Y.key==="Tab"&&Y.preventDefault()},children:[a.jsxs("div",{className:"compare-header flex items-center gap-3 px-3 py-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Compare"}),a.jsx("div",{className:"text-xs text-muted",children:r>=2?`${n+1}-${Math.min(n+2,r)} of ${r}`:"Select 2 images"}),a.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(-1),disabled:!s,title:"Previous (Left Arrow or A)",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Prev"]}),a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(1),disabled:!i,title:"Next (Right Arrow or D)",children:["Next",a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"btn btn-sm",onClick:l,title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]})]})]}),a.jsx("div",{className:"flex-1 min-h-0 p-3 bg-panel",children:a.jsx("div",{ref:M,className:`compare-stage ${L?"is-dragging":""}`,onWheel:Q,onPointerDown:je,children:!e||!t?a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-sm text-muted",children:"Select 2 images to compare."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"compare-label left-3",children:[a.jsx("span",{className:"compare-label-tag",children:"A"}),a.jsx("span",{className:"truncate",title:e.path,children:B})]}),a.jsxs("div",{className:"compare-label right-3",children:[a.jsx("span",{className:"compare-label-tag",children:"B"}),a.jsx("span",{className:"truncate",title:t.path,children:ce})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 ${100-c}% 0 0)`},children:[q&&a.jsx("img",{src:q,alt:"thumb A",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:Y=>Y.preventDefault(),style:{transform:`translate(${m}px, ${p}px) scale(${R})`,transformOrigin:"0 0",opacity:h?0:.5}}),F&&a.jsx("img",{ref:E,src:F,alt:"compare A",className:"compare-image",draggable:!1,onDragStart:Y=>Y.preventDefault(),onLoad:()=>{C();try{requestAnimationFrame(()=>g(!0))}catch{g(!0)}},style:{transform:`translate(${m}px, ${p}px) scale(${R*N})`,transformOrigin:"0 0",opacity:h?.99:0}})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 0 0 ${c}%)`},children:[he&&a.jsx("img",{src:he,alt:"thumb B",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:Y=>Y.preventDefault(),style:{transform:`translate(${y}px, ${b}px) scale(${v})`,transformOrigin:"0 0",opacity:S?0:.5}}),H&&a.jsx("img",{ref:T,src:H,alt:"compare B",className:"compare-image",draggable:!1,onDragStart:Y=>Y.preventDefault(),onLoad:()=>{C();try{requestAnimationFrame(()=>w(!0))}catch{w(!0)}},style:{transform:`translate(${y}px, ${b}px) scale(${v*N})`,transformOrigin:"0 0",opacity:S?.99:0}})]}),a.jsxs("div",{className:"compare-divider-hit",style:{left:`${c}%`},onPointerDown:W,children:[a.jsx("div",{className:"compare-divider-line"}),a.jsx("div",{className:"compare-divider-handle"})]})]})})})]})}function ta(){const[e,t]=d.useState(i1());return d.useEffect(()=>s1(t),[]),e}const Yi=e=>["item",e],Y1={v:1,tags:[],notes:"",version:1,updated_at:"",updated_by:"web"},en=new Map,tl=new Map,vc=new Map,Ld=new Map;let $h=0;const bn=new Map,xi=new Map,G1=12e3,yc=new Set,xc=new Set;let Td={state:"idle"},Gi=null,wc=0;function Do(e){Td=e;for(const t of yc)t(e)}function Dn(){const e=bn.size>0,t=en.size+tl.size+wc;if(e){Do({state:"error",message:"Conflict detected"});return}if(Gi){Do({state:"error",message:Gi});return}if(t>0){Do({state:"syncing"});return}Do({state:"idle"})}function _d(){let e=null;for(const t of vc.values())e=e==null?t:Math.min(e,t);for(const t of Ld.values())e=e==null?t:Math.min(e,t);return e}function Pl(){const e=_d();for(const t of xc)t(e)}function Il(e){Gi=e,Dn()}function fv(){Gi&&(Gi=null,Dn())}function Uh(e){wc=Math.max(0,wc+e),Dn()}function X1(){$h+=1;const e=$h;return Ld.set(e,Date.now()),Pl(),e}function J1(e){e!=null&&Ld.delete(e)&&Pl()}function na(e){const t=xi.get(e);if(!t||!t.size)return;const n=bn.get(e)??null;for(const r of t)r(n)}function Bh(e){return bn.get(e)??null}function ra(e){bn.delete(e)&&(na(e),Dn())}function Z1(e,t){bn.set(e,t),na(e),Dn()}function eS(e,t){const n=xi.get(e)??new Set;return n.add(t),xi.set(e,n),t(bn.get(e)??null),()=>{const r=xi.get(e);r&&(r.delete(t),r.size||xi.delete(e))}}function tS(e){const[t,n]=d.useState(()=>e?Bh(e):null);return d.useEffect(()=>{if(!e){n(null);return}return n(Bh(e)),eS(e,n)},[e]),t}function nS(e){return yc.add(e),e(Td),()=>{yc.delete(e)}}function rS(){const[e,t]=d.useState(Td);return d.useEffect(()=>nS(t),[]),e}function sS(e){return xc.add(e),e(_d()),()=>{xc.delete(e)}}function iS(){const[e,t]=d.useState(()=>_d()),[n,r]=d.useState(()=>e==null?null:Date.now()-e);return d.useEffect(()=>sS(t),[]),d.useEffect(()=>{if(e==null){r(null);return}r(Date.now()-e);const s=window.setInterval(()=>{r(Date.now()-e)},1e3);return()=>window.clearInterval(s)},[e]),n}function Sc(e){const t={};return Object.prototype.hasOwnProperty.call(e,"star")&&(t.set_star=e.star??null),Object.prototype.hasOwnProperty.call(e,"notes")&&(t.set_notes=e.notes??""),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.set_tags=Array.isArray(e.tags)?e.tags:[]),t}function kc(e){var t,n;return e.set_star!==void 0||e.set_notes!==void 0||e.set_tags!==void 0||(((t=e.add_tags)==null?void 0:t.length)??0)>0||(((n=e.remove_tags)==null?void 0:n.length)??0)>0}function hi(e){const t=[],n=new Set;for(const r of e??[]){if(typeof r!="string")continue;const s=r.trim();!s||n.has(s)||(n.add(s),t.push(s))}return t}function oS(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}function lS(e,t){if(e.set_star!==void 0&&(t.star??null)!==e.set_star||e.set_notes!==void 0&&(t.notes??"")!==(e.set_notes??""))return!1;if(e.set_tags!==void 0){const r=hi(e.set_tags),s=hi(t.tags);return oS(r,s)}const n=hi(t.tags);for(const r of hi(e.add_tags))if(!n.includes(r))return!1;for(const r of hi(e.remove_tags))if(n.includes(r))return!1;return!0}function hv(e,t,n){if(n instanceof Cn&&n.status===409){const r=n.body;if(r!=null&&r.current)return Z1(e,{path:e,current:r.current,pending:t,receivedAt:new Date().toISOString()}),!0}return!1}function aS(e,t){const n=bn.get(e);if(n){if(lS(n.pending,t)){ra(e);return}bn.set(e,{...n,current:t}),na(e),Dn()}}function uS(e){const t=ta();return Zl({queryKey:Yi(e),queryFn:()=>pe.getSidecar(e),enabled:!!e,staleTime:3e4,gcTime:5*6e4,retry:2,refetchInterval:t?G1:!1,refetchIntervalInBackground:t})}function cS(e){const t=ns();return Iw({mutationFn:async({patch:n,baseVersion:r,idempotencyKey:s})=>{const i=Sc(n);if(!kc(i))return t.getQueryData(Yi(e))??Y1;const o={...i,base_version:r};try{return await pe.patchSidecar(e,o,{idempotencyKey:s??qi("patch"),ifMatch:r})}catch(l){throw hv(e,i,l),l}},retry:(n,r)=>r instanceof Cn&&r.status===409?!1:n<2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),4e3),onMutate:()=>(fv(),Uh(1),{inflightId:X1()}),onSuccess:n=>{ra(e),t.setQueryData(Yi(e),n)},onError:n=>{n instanceof Cn&&n.status===409||(n instanceof Cn?Il(n.message):Il("Failed to save"))},onSettled:(n,r,s,i)=>{Uh(-1),J1(i==null?void 0:i.inflightId)}})}const dS=6;async function Wh(e,t){if(!e.length)return;let n=0;const r=[],s=async()=>{for(;n<e.length;){const o=n++,l=e[o];try{await mv(l,t)}catch(u){r.push({path:l,error:u}),console.error(`[bulkUpdateSidecars] Failed for ${l}:`,u)}}},i=Array.from({length:Math.min(dS,e.length)},()=>s());if(await Promise.all(i),r.length===e.length)throw new Error(`All ${e.length} sidecar updates failed`)}async function mv(e,t){const n=en.get(e)||{};en.set(e,{...n,...t}),fv(),Dn();const r=tl.get(e);if(r)return r;vc.set(e,Date.now()),Pl();const s=(async()=>{try{for(;en.has(e);){const i=en.get(e);if(!i)break;const o=Sc(i);if(!kc(o)){en.get(e)===i&&en.delete(e);continue}let l=1;try{l=(await pe.getSidecar(e)).version??1}catch{l=1}const u={...o,base_version:l};try{await pe.patchSidecar(e,u,{idempotencyKey:qi("patch"),ifMatch:l}),ra(e),en.get(e)===i&&en.delete(e)}catch(c){if(hv(e,o,c)){const h=en.get(e);if(h&&h!==i){const g=Sc(h);if(kc(g)){const S=bn.get(e);S&&(bn.set(e,{...S,pending:g}),na(e))}}en.delete(e)}else c instanceof Cn?Il(c.message):Il("Failed to save");throw c}}}finally{tl.delete(e),vc.delete(e),Pl(),Dn()}})();return tl.set(e,s),Dn(),s}function Ja(e){const t=["B","KB","MB","GB","TB"];let n=0,r=e;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${r.toFixed(1)} ${t[n]}`}function Za(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function fS(e,t=28){if(e.length<=t)return e;const n=Math.max(4,Math.floor((t-1)/2));return`${e.slice(0,n)}${e.slice(-n)}`}const hS=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});function mS(e){const t=e.trim();return!t||/[zZ]|[+-]\d{2}:?\d{2}$/.test(t)?t:`${t.includes("T")?t:t.replace(" ","T")}Z`}function Hh(e){if(!e)return null;const t=Date.parse(mS(e));return Number.isFinite(t)?t:null}function pS(e,t=Date.now()){const n=Math.max(0,t-e),r=Math.max(1,Math.floor(n/1e3));if(r<60)return`${r} second${r===1?"":"s"} ago`;const s=Math.floor(r/60);if(s<60)return`${s} minute${s===1?"":"s"} ago`;const i=Math.floor(s/60);return`${i} hour${i===1?"":"s"} ago`}function gS(e){return hS.format(new Date(e))}function nl(e){if(Array.isArray(e))return e.map(nl);if(e&&typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,nl(n)]));if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")||t.startsWith('"')&&t.endsWith('"'))try{const r=JSON.parse(t);return nl(r)}catch{return e}}return e}function eu(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function vS(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Vh(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}function yS(e){const t=/(\"(\\u[a-fA-F0-9]{4}|\\[^u]|[^\\"])*\"(?:\s*:)?|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\btrue\b|\bfalse\b|\bnull\b)/g;let n="",r=0;for(const s of e.matchAll(t)){const i=s.index??0,o=s[0];n+=eu(e.slice(r,i));let l="var(--json-fallback)";o.startsWith('"')&&o.trimEnd().endsWith(":")?l="var(--json-key)":o.startsWith('"')?l="var(--json-string)":/true|false|null/.test(o)?l="var(--json-literal)":l="var(--json-number)",n+=`<span style="color:${l}">${eu(o)}</span>`,r=i+o.length}return n+=eu(e.slice(r)),n}const xS=["overview","basics","metadata","notes"],Qh="lenslet.inspector.sections",Kh="lenslet.inspector.metricsExpanded",tu=12,wS={overview:!0,metadata:!0,basics:!0,notes:!0};function zo({title:e,open:t,onToggle:n,actions:r,children:s,contentClassName:i}){const[o,l]=d.useState(t),[u,c]=d.useState(t?"open":"closed");return d.useEffect(()=>{if(t){l(!0);const h=window.requestAnimationFrame(()=>c("open"));return()=>window.cancelAnimationFrame(h)}c("closing");const f=window.setTimeout(()=>{l(!1),c("closed")},140);return()=>window.clearTimeout(f)},[t]),a.jsxs("div",{className:"border-b border-border/60",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[a.jsxs("button",{type:"button",onClick:n,"aria-expanded":t,className:"flex items-center gap-2 inspector-section-title hover:text-text transition-colors",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform ${t?"rotate-90":""}`,"aria-hidden":"true",children:a.jsx("path",{d:"m9 18 6-6-6-6"})}),a.jsx("span",{children:e})]}),r]}),o&&a.jsx("div",{className:"inspector-section-body","data-state":u,"aria-hidden":!t,children:a.jsx("div",{className:i??"px-3 pb-3",children:s})})]})}function SS({path:e,selectedPaths:t=[],items:n=[],onResize:r,onStarChanged:s,sortSpec:i,onFindSimilar:o,embeddingsAvailable:l=!1,embeddingsLoading:u=!1}){const c=!!e,{data:f,isLoading:h}=uS(e??""),g=cS(e??""),S=ns(),[w,N]=d.useState(wS),R=d.useCallback(O=>{N(ne=>({...ne,[O]:!ne[O]}))},[]),[v,m]=d.useState(!1),p=t.length>1,y=!!o&&l&&!p,b=o?l?p?"Select a single image to search.":null:u?"Loading embeddings...":"No embeddings detected.":null,[L,M]=d.useState(""),[E,T]=d.useState(""),[C,I]=d.useState(""),[Q,z]=d.useState(null),[$,ie]=d.useState("idle"),[B,ce]=d.useState(!1),[F,H]=d.useState(null),[q,he]=d.useState({}),je=d.useMemo(()=>{const O=n.find(ne=>ne.path===e);return O&&O.star!==void 0?O.star:null},[n,e])??(f==null?void 0:f.star)??null,W=tS(p?null:e),Y={tags:!!(W!=null&&W.pending.set_tags),notes:(W==null?void 0:W.pending.set_notes)!==void 0,star:(W==null?void 0:W.pending.set_star)!==void 0},te=d.useMemo(()=>{const O=new Set(t);return n.filter(ne=>O.has(ne.path))},[n,t]),me=d.useMemo(()=>te.reduce((O,ne)=>O+(ne.size||0),0),[te]);d.useEffect(()=>{f&&(M((f.tags||[]).join(", ")),T(f.notes||"")),I(""),z(null),ie("idle"),ce(!1)},[f==null?void 0:f.updated_at,e]);const Ve=d.useCallback(O=>{if(p&&t.length){Wh(t,O);return}if(!e)return;const ne=(f==null?void 0:f.version)??1;g.mutate({patch:O,baseVersion:ne,idempotencyKey:qi("patch")})},[p,t,e,f==null?void 0:f.version,g]),Ye=d.useCallback(()=>{if(!W||!e)return;const O={};W.pending.set_tags!==void 0&&(O.tags=Vh(L)),W.pending.set_notes!==void 0&&(O.notes=E),W.pending.set_star!==void 0&&(O.star=je??null);const ne=W.current.version??1;g.mutate({patch:O,baseVersion:ne,idempotencyKey:qi("patch")})},[W,e,L,E,je,g]),Re=d.useCallback(()=>{if(!W||!e)return;const O=W.current;M((O.tags||[]).join(", ")),T(O.notes||""),S.setQueryData(Yi(e),O),ra(e),s==null||s([e],O.star??null)},[W,e,S,s]);d.useEffect(()=>{if(!e)return;const O=ne=>{if(Rd(ne.target))return;const le=ne.key;if(!/^[0-5]$/.test(le))return;ne.preventDefault();const Ee=le==="0"?null:Number(le);if(p&&t.length){Ve({star:Ee}),s==null||s(t,Ee);return}Ve({star:Ee}),s==null||s([e],Ee)};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[e,p,t,Ve,s]);const ht=Ir(e?()=>pe.getThumb(e):null,[e]),Ae=e?e.split("/").pop()||e:"",fn=d.useMemo(()=>{var ne;if(Ae.includes("."))return Ae.slice(Ae.lastIndexOf(".")+1).toUpperCase();const O=n.find(le=>le.path===e);return(ne=O==null?void 0:O.type)!=null&&ne.includes("/")?O.type.split("/")[1].toUpperCase():""},[Ae,n,e]),Ie=d.useMemo(()=>n.find(O=>O.path===e),[n,e]),Xt=d.useMemo(()=>e?(Ie==null?void 0:Ie.source)??e:"",[Ie,e]),mt=d.useCallback(async()=>{if(e){ie("loading"),z(null);try{const O=await pe.getMetadata(e),ne=nl(O.meta),le=JSON.stringify(ne,null,1);I(le),ie("loaded")}catch(O){const ne=O instanceof Error?O.message:"Failed to load metadata";I(ne),z(ne),ie("error")}}},[e]),U=d.useCallback(()=>{var O;C&&((O=navigator.clipboard)==null||O.writeText(C).then(()=>{ce(!0),setTimeout(()=>ce(!1),1200)}).catch(ne=>{const le=ne instanceof Error?ne.message:"Copy failed";z(le)}))},[C]),re=d.useMemo(()=>C?yS(C):"",[C]),ue=$==="loading"?"Loading metadata":C||"PNG metadata not loaded yet.",ye=$==="loading",oe=$==="loaded"&&!!C,ve=oe?"h-48":"h-24",ee=ye?"Loading":oe?B?"Copied":"Copy":"Load meta",V=oe?U:mt,de=p?null:a.jsx("div",{className:"flex items-center gap-2 text-xs",children:a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[78px]",onClick:V,disabled:!e||ye,children:ee})});d.useEffect(()=>{try{const O=localStorage.getItem(Qh);if(!O)return;const ne=JSON.parse(O);if(!ne||typeof ne!="object")return;const le={};for(const Ee of xS)typeof ne[Ee]=="boolean"&&(le[Ee]=ne[Ee]);Object.keys(le).length>0&&N(Ee=>({...Ee,...le}))}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(Qh,JSON.stringify(w))}catch{}},[w]),d.useEffect(()=>{try{const O=localStorage.getItem(Kh);O==="1"||O==="true"?m(!0):(O==="0"||O==="false")&&m(!1)}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(Kh,v?"1":"0")}catch{}},[v]);const Ce=d.useCallback((O,ne)=>{var le;ne&&((le=navigator.clipboard)==null||le.writeText(ne).then(()=>{H(O),setTimeout(()=>H(Ee=>Ee===O?null:Ee),1e3)}).catch(()=>{}))},[]),be=d.useCallback((O,ne)=>{if(ne&&!q[O]){const le=ne.offsetHeight;le&&he(Ee=>Ee[O]?Ee:{...Ee,[O]:le})}},[q]),pt="toolbar-offset absolute bottom-0 left-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20";return c?a.jsxs("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:[!p&&a.jsx("div",{className:"p-3 border-b border-border flex justify-center",children:a.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border w-[220px] h-[160px] bg-panel select-none",children:[ht&&a.jsx("img",{src:ht,alt:"thumb",className:"block w-full h-full object-contain"}),!!fn&&a.jsx("div",{className:"absolute top-1.5 left-1.5 bg-surface border border-border text-text text-xs px-1.5 py-0.5 rounded-md select-none",children:fn})]})}),a.jsxs(zo,{title:p?"Selection":"Item",open:w.overview,onToggle:()=>R("overview"),contentClassName:"px-3 pb-3 space-y-2",actions:o&&a.jsx("button",{type:"button",className:"btn btn-sm",onClick:o,disabled:!y,title:b??"Find similar",children:"Find similar"}),children:[p?a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Selected"}),a.jsxs("div",{className:"inspector-field-value",children:[t.length," files"]})]}),a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Total size"}),a.jsx("div",{className:"inspector-field-value",children:Ja(me)})]})]}):a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Filename"}),a.jsx("div",{className:"inspector-field-value break-all",title:Ae,children:Ae})]}),b&&a.jsx("div",{className:"text-[11px] text-muted",children:b})]}),a.jsxs(zo,{title:"Basics",open:w.basics,onToggle:()=>R("basics"),children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",role:"radiogroup","aria-label":"Star rating",children:[a.jsx("span",{className:"ui-kv-label w-16 shrink-0",children:p?"Rating (all)":"Rating"}),a.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(O=>{const ne=(je??0)>=O;return a.jsx("button",{className:`w-6 h-6 flex items-center justify-center rounded-lg border border-border/60 bg-transparent text-[13px] ${ne?"text-star-active":"text-star-inactive"} hover:border-border hover:text-star-hover transition-colors`,onClick:()=>{const le=je===O&&!p?null:O;p&&t.length?(s==null||s(t,le),Wh(t,{star:le})):e&&(s==null||s([e],le),mv(e,{star:le}))},title:`${O} star${O>1?"s":""} (key ${O})`,"aria-label":`${O} star${O>1?"s":""}`,"aria-pressed":je===O,children:ne?"":""},O)})})]}),!p&&W&&Y.star&&a.jsxs("div",{className:"ui-banner ui-banner-danger mt-2 text-[11px] flex items-center justify-between gap-2",children:[a.jsx("span",{children:"Rating conflict."}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:Ye,children:"Apply again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:Re,children:"Keep theirs"})]})]}),!p&&Ie&&a.jsxs("div",{className:"text-[12px] space-y-1.5 leading-relaxed",children:[a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Ce("dimensions",`${Ie.w}${Ie.h}`),children:"Dimensions"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:O=>be("dimensions",O),style:q.dimensions?{minHeight:q.dimensions}:void 0,children:F==="dimensions"?"Copied":`${Ie.w}${Ie.h}`})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Ce("size",Ja(Ie.size)),children:"Size"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:O=>be("size",O),style:q.size?{minHeight:q.size}:void 0,children:F==="size"?"Copied":Ja(Ie.size)})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Ce("type",Ie.type),children:"Type"}),a.jsx("span",{className:"ui-kv-value break-all text-right inline-block min-w-[80px]",ref:O=>be("type",O),style:q.type?{minHeight:q.type}:void 0,children:F==="type"?"Copied":Ie.type})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Xt&&Ce("source",Xt),children:"Source"}),a.jsx("span",{className:"ui-kv-value inspector-value-clamp break-words text-right max-w-[70%] inline-block min-w-[80px]",ref:O=>be("source",O),style:q.source?{minHeight:q.source}:void 0,title:Xt,children:F==="source"?"Copied":Xt})]}),(()=>{const O=Ie.metrics||null;if(!O)return null;const ne=Object.entries(O).filter(([,Qe])=>Qe!=null);if(!ne.length)return null;const le=(i==null?void 0:i.kind)==="metric"?i.key:null,Ee=[...ne].sort(([Qe],[br])=>Qe.localeCompare(br));let bt=Ee;if(le){const Qe=Ee.findIndex(([br])=>br===le);Qe>0&&(bt=[Ee[Qe],...Ee.slice(0,Qe),...Ee.slice(Qe+1)])}const hn=bt.length>tu,Zs=v||!hn?bt:bt.slice(0,tu),ao=bt.length-tu;return a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"ui-subsection-title mb-1",children:"Metrics"}),a.jsxs("div",{className:"space-y-1",children:[Zs.map(([Qe,br])=>{const ei=le===Qe;return a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:`w-24 shrink-0 ${ei?"text-accent font-medium":"ui-kv-label"}`,children:Qe}),a.jsx("span",{className:`ui-kv-value text-right ${ei?"text-accent font-medium":""}`,children:vS(br)})]},Qe)}),hn&&a.jsx("button",{type:"button",className:"text-[11px] text-muted underline underline-offset-2 hover:text-text",onClick:()=>m(Qe=>!Qe),"aria-expanded":v,children:v?"Show less":`+${ao} more`})]})]})})()]})]}),!p&&a.jsxs(zo,{title:"Metadata",open:w.metadata,onToggle:()=>R("metadata"),actions:de,children:[a.jsx("pre",{className:`ui-code-block ${ve} overflow-auto whitespace-pre-wrap`,children:oe?a.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:re}}):ue}),Q&&a.jsx("div",{className:"text-[11px] text-danger mt-1 break-words",children:Q})]}),a.jsxs(zo,{title:"Notes & Tags",open:w.notes,onToggle:()=>R("notes"),contentClassName:"px-3 pb-3 space-y-2",children:[!p&&W&&(Y.tags||Y.notes)&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Conflicting edits detected."}),a.jsx("div",{className:"text-[11px] text-muted mt-0.5",children:"Your changes were not saved because this item was updated elsewhere."}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:Ye,children:"Apply my changes again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:Re,children:"Keep theirs"})]})]}),a.jsx("textarea",{className:"ui-textarea inspector-input w-full scrollbar-thin",placeholder:"Add notes",value:E,onChange:O=>T(O.target.value),onBlur:()=>{Ve({notes:E})},"aria-label":p?"Notes for selected items":"Notes"}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:p?"Tags (apply to all, comma-separated)":"Tags (comma-separated)"}),a.jsx("input",{className:"ui-input inspector-input w-full",placeholder:"tag1, tag2",value:L,onChange:O=>M(O.target.value),onBlur:()=>{Ve({tags:Vh(L)})},"aria-label":p?"Tags for selected items":"Tags"})]})]}),a.jsx("div",{className:pt,onMouseDown:r})]}):a.jsx("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:a.jsx("div",{className:pt,onMouseDown:r})})}function kS({open:e,embeddings:t,rejected:n=[],selectedPath:r,embeddingsLoading:s=!1,embeddingsError:i,onClose:o,onSearch:l}){const[u,c]=d.useState(""),[f,h]=d.useState("path"),[g,S]=d.useState(""),[w,N]=d.useState(""),[R,v]=d.useState("50"),[m,p]=d.useState(""),[y,b]=d.useState(null),[L,M]=d.useState(!1),E=d.useRef(null),T=d.useRef(null),C=d.useMemo(()=>t.find(B=>B.name===u)??t[0]??null,[t,u]);d.useEffect(()=>{e&&(b(null),t.length>0&&!t.some(B=>B.name===u)&&c(t[0].name),r?(h("path"),S(r)):(h("vector"),S("")))},[e,t,u,r]),d.useEffect(()=>{if(!e)return;const B=f==="vector"?T.current:E.current,ce=window.requestAnimationFrame(()=>B==null?void 0:B.focus());return()=>window.cancelAnimationFrame(ce)},[e,f]);const I=d.useCallback(async()=>{if(b(null),!t.length){b("No embeddings available for similarity search.");return}if(!C){b("Select an embedding to search.");return}const B=g.trim(),ce=w.trim(),F=Number(R);if(!Number.isFinite(F)||F<=0){b("Top K must be a positive number.");return}const H=Math.min(1e3,Math.max(1,Math.floor(F))),q=m.trim()===""?null:Number(m);if(q!=null&&!Number.isFinite(q)){b("Min score must be a valid number.");return}if(f==="path"&&!B){b("Select an image path for the query.");return}if(f==="vector"&&!ce){b("Paste a base64 vector for the query.");return}const he={embedding:C.name,query_path:f==="path"?B:null,query_vector_b64:f==="vector"?ce:null,top_k:H,min_score:q};M(!0);try{await l(he),o()}catch(fe){fe instanceof Cn||fe instanceof Error?b(fe.message):b("Failed to run similarity search.")}finally{M(!1)}},[t.length,C,g,w,R,m,f,l,o]);d.useEffect(()=>{if(!e)return;const B=ce=>{if(ce.key==="Escape"){ce.preventDefault(),o();return}(ce.ctrlKey||ce.metaKey)&&ce.key==="Enter"&&(ce.preventDefault(),I())};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[e,o,I]);const Q=d.useCallback(()=>{var B;r&&(h("path"),S(r),(B=E.current)==null||B.focus())},[r]);if(!e)return null;const z=t.map(B=>({value:B.name,label:B.name})),$=n.length>0,ie=n.slice(0,3);return a.jsx("div",{className:"fixed inset-0 z-[var(--z-overlay)] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",onClick:B=>{B.target===B.currentTarget&&o()},children:a.jsxs("div",{className:"w-full max-w-2xl rounded-lg border border-border bg-panel shadow-[0_20px_50px_rgba(0,0,0,0.55)]",onClick:B=>B.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Find similar",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-text",children:"Find similar"}),a.jsx("div",{className:"text-xs text-muted",children:"Search with embeddings"})]}),a.jsx("button",{className:"btn btn-sm",onClick:o,"aria-label":"Close",children:"Close"})]}),a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[i&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:i}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Embedding"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fc,{value:(C==null?void 0:C.name)??"",onChange:c,options:z,placeholder:s?"Loading embeddings...":"Select embedding",disabled:!t.length,triggerClassName:"min-w-[180px]"}),C&&a.jsxs("span",{className:"text-xs text-muted",children:[C.dimension," dims, ",C.metric,", ",C.dtype]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Query mode"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",className:`btn btn-sm ${f==="path"?"btn-active":""}`,onClick:()=>h("path"),"aria-pressed":f==="path",children:"Selected image"}),a.jsx("button",{type:"button",className:`btn btn-sm ${f==="vector"?"btn-active":""}`,onClick:()=>h("vector"),"aria-pressed":f==="vector",children:"Vector input"})]})]}),f==="path"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Image path"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:E,type:"text",className:"input w-full",value:g,onChange:B=>S(B.target.value),placeholder:r?"Selected image path":"Select an image first"}),a.jsx("button",{type:"button",className:"btn btn-sm",onClick:Q,disabled:!r,title:r?"Use selected image":"Select an image first",children:"Use selected"})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Vector (base64 float32)"}),a.jsx("textarea",{ref:T,className:"ui-textarea w-full font-mono text-[11px]",rows:5,value:w,onChange:B=>N(B.target.value),placeholder:"Paste base64-encoded float32 vector"}),a.jsx("div",{className:"text-[11px] text-muted",children:"Base64 of little-endian float32. Length must match embedding dimension."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Top K"}),a.jsx("input",{type:"number",min:1,max:1e3,step:1,className:"input ui-number w-full",value:R,onChange:B=>v(B.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Min score"}),a.jsx("input",{type:"number",step:.01,className:"input ui-number w-full",value:m,onChange:B=>p(B.target.value),placeholder:"Optional"})]})]}),$&&a.jsxs("div",{className:"ui-banner text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Skipped columns"}),a.jsxs("div",{className:"mt-1 space-y-1 text-muted",children:[ie.map(B=>a.jsxs("div",{children:[B.name,": ",B.reason]},B.name)),n.length>ie.length&&a.jsxs("div",{children:["+",n.length-ie.length," more"]})]})]}),y&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:y})]}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-border",children:[a.jsx("div",{className:"text-xs text-muted",children:C?`Metric: ${C.metric}`:"Metric: cosine"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:o,disabled:L,children:"Cancel"}),a.jsx("button",{className:"btn btn-sm btn-active",onClick:I,disabled:L||!t.length,children:L?"Searching...":"Find similar"})]})]})]})})}const CS=(e,t=!1)=>t?["folder",e,"recursive"]:["folder",e],bS=15e3;function ES(e,t=!1){return pe.getFolder(e,void 0,t)}function pv(e,t=!1){const n=ta();return Zl({queryKey:CS(e,t),queryFn:()=>ES(e,t),staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:r=>Math.min(1e3*Math.pow(2,r),5e3),refetchOnWindowFocus:!1,refetchInterval:n?bS:!1,refetchIntervalInBackground:n})}const NS=(e,t)=>["search",e,t],jS=2e4;function MS(e,t){const n=ta();return Zl({enabled:!!e.trim(),queryKey:NS(e,t),queryFn:()=>pe.search(e,t),staleTime:3e3,gcTime:6e4,placeholderData:r=>r,retry:1,refetchInterval:n?jS:!1,refetchIntervalInBackground:n})}const RS=()=>["embeddings"];function LS(){return Zl({queryKey:RS(),queryFn:pe.getEmbeddings,staleTime:6e4,gcTime:5*6e4,retry:1,refetchOnWindowFocus:!1})}const TS=/^[\/@a-zA-Z0-9._\-\/]{1,512}$/,_S=[".jpg",".jpeg",".png",".webp"];function an(e){try{const t=decodeURI(e||""),r=(t.startsWith("/")?t:`/${t}`).replace(/\/{2,}/g,"/"),s=r.length>1?r.replace(/\/$/,""):r;return TS.test(s)?s:"/"}catch{return"/"}}function qh(){return(window.location.hash||"").replace(/^#/,"")}function Yh(e){const t=an(e),n=`#${encodeURI(t)}`;window.location.hash!==n&&(window.location.hash=n)}function Ao(e){const t=an(e),n=`#${encodeURI(t)}`;if(window.location.hash!==n){const r=`${window.location.pathname}${window.location.search}${n}`;window.history.replaceState(window.history.state,"",r)}}function PS(e){const n=an(e).toLowerCase();return _S.some(r=>n.endsWith(r))}function gv(e,t){const n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,""),s=[n,r].filter(Boolean).join("/");return s.startsWith("/")?s:`/${s}`}function Gh(e){const n=an(e).split("/").filter(Boolean);return n.length<=1?"/":"/"+n.slice(0,-1).join("/")}function IS(e){return e.endsWith("/_trash_")}const FS=new Set([0,1,2,3,4,5]),Pd=new Set(["<","<=",">",">="]),OS=/^\d{4}-\d{2}-\d{2}$/;function DS(e,t){return!t||!t.and.length?e:e.filter(n=>zS(n,t.and))}function zS(e,t){for(const n of t)if(!AS(e,n))return!1;return!0}function AS(e,t){var n,r,s,i,o,l,u;if("stars"in t){const c=t.stars;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsIn"in t){const c=t.starsIn.values;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsNotIn"in t){const c=t.starsNotIn.values;if(!c||!c.length)return!0;const f=e.star??0;return!c.includes(f)}if("nameContains"in t){const c=(n=t.nameContains.value)==null?void 0:n.trim();return c?(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("nameNotContains"in t){const c=(r=t.nameNotContains.value)==null?void 0:r.trim();return c?!(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("commentsContains"in t){const c=(s=t.commentsContains.value)==null?void 0:s.trim();if(!c)return!0;const f=e.comments??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("commentsNotContains"in t){const c=(i=t.commentsNotContains.value)==null?void 0:i.trim();if(!c)return!0;const f=e.comments??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("urlContains"in t){const c=(o=t.urlContains.value)==null?void 0:o.trim();if(!c)return!0;const f=e.source??e.url??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("urlNotContains"in t){const c=(l=t.urlNotContains.value)==null?void 0:l.trim();if(!c)return!0;const f=e.source??e.url??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("dateRange"in t){const{from:c,to:f}=t.dateRange;if(!c&&!f)return!0;if(!e.addedAt)return!1;const h=Date.parse(e.addedAt);if(Number.isNaN(h))return!1;const g=Zh(c,!1),S=Zh(f,!0);return!(g!=null&&h<g||S!=null&&h>S)}if("widthCompare"in t){const{op:c,value:f}=t.widthCompare;if(!Number.isFinite(f))return!0;const h=e.w;return!Number.isFinite(h)||h<=0?!1:em(h,c,f)}if("heightCompare"in t){const{op:c,value:f}=t.heightCompare;if(!Number.isFinite(f))return!0;const h=e.h;return!Number.isFinite(h)||h<=0?!1:em(h,c,f)}if("metricRange"in t){const{key:c,min:f,max:h}=t.metricRange,g=(u=e.metrics)==null?void 0:u[c];return!(g==null||g<f||g>h)}return!0}function Cc(e){if(!e||typeof e!="object")return null;const t=e.and;if(!Array.isArray(t))return null;const n=[];for(const r of t){const s=ek(r);s&&n.push(s)}return{and:n}}function Xh(e){var r;const t=e.and.find(s=>"stars"in s),n=e.and.find(s=>"starsIn"in s);return(r=n==null?void 0:n.starsIn)!=null&&r.values?n.starsIn.values:(t==null?void 0:t.stars)??[]}function nu(e,t){return vv(e,t)}function $S(e){var n;const t=e.and.find(r=>"starsIn"in r);return((n=t==null?void 0:t.starsIn)==null?void 0:n.values)??[]}function vv(e,t){const n=Ri(t),r=e.and.filter(s=>!("starsIn"in s)&&!("stars"in s));return n.length?{and:[{starsIn:{values:n}},...r]}:{and:r}}function US(e){var n;const t=e.and.find(r=>"starsNotIn"in r);return((n=t==null?void 0:t.starsNotIn)==null?void 0:n.values)??[]}function yv(e,t){const n=Ri(t),r=e.and.filter(s=>!("starsNotIn"in s));return n.length?{and:[{starsNotIn:{values:n}},...r]}:{and:r}}function BS(e){var n;const t=e.and.find(r=>"nameContains"in r);return((n=t==null?void 0:t.nameContains)==null?void 0:n.value)??null}function xv(e,t){const n=Qt(t),r=e.and.filter(s=>!("nameContains"in s));return n?{and:[{nameContains:{value:n}},...r]}:{and:r}}function WS(e){var n;const t=e.and.find(r=>"nameNotContains"in r);return((n=t==null?void 0:t.nameNotContains)==null?void 0:n.value)??null}function wv(e,t){const n=Qt(t),r=e.and.filter(s=>!("nameNotContains"in s));return n?{and:[{nameNotContains:{value:n}},...r]}:{and:r}}function HS(e){var n;const t=e.and.find(r=>"commentsContains"in r);return((n=t==null?void 0:t.commentsContains)==null?void 0:n.value)??null}function Sv(e,t){const n=Qt(t),r=e.and.filter(s=>!("commentsContains"in s));return n?{and:[{commentsContains:{value:n}},...r]}:{and:r}}function VS(e){var n;const t=e.and.find(r=>"commentsNotContains"in r);return((n=t==null?void 0:t.commentsNotContains)==null?void 0:n.value)??null}function kv(e,t){const n=Qt(t),r=e.and.filter(s=>!("commentsNotContains"in s));return n?{and:[{commentsNotContains:{value:n}},...r]}:{and:r}}function QS(e){var n;const t=e.and.find(r=>"urlContains"in r);return((n=t==null?void 0:t.urlContains)==null?void 0:n.value)??null}function Cv(e,t){const n=Qt(t),r=e.and.filter(s=>!("urlContains"in s));return n?{and:[{urlContains:{value:n}},...r]}:{and:r}}function KS(e){var n;const t=e.and.find(r=>"urlNotContains"in r);return((n=t==null?void 0:t.urlNotContains)==null?void 0:n.value)??null}function bv(e,t){const n=Qt(t),r=e.and.filter(s=>!("urlNotContains"in s));return n?{and:[{urlNotContains:{value:n}},...r]}:{and:r}}function qS(e){const t=e.and.find(n=>"dateRange"in n);return(t==null?void 0:t.dateRange)??null}function bc(e,t){const n=Fl((t==null?void 0:t.from)??null),r=Fl((t==null?void 0:t.to)??null),s=e.and.filter(i=>!("dateRange"in i));return!n&&!r?{and:s}:{and:[{dateRange:{...n?{from:n}:{},...r?{to:r}:{}}},...s]}}function YS(e){const t=e.and.find(n=>"widthCompare"in n);return(t==null?void 0:t.widthCompare)??null}function rl(e,t){const n=e.and.filter(r=>!("widthCompare"in r));return!t||!Number.isFinite(t.value)||!Pd.has(t.op)?{and:n}:{and:[{widthCompare:{op:t.op,value:t.value}},...n]}}function GS(e){const t=e.and.find(n=>"heightCompare"in n);return(t==null?void 0:t.heightCompare)??null}function sl(e,t){const n=e.and.filter(r=>!("heightCompare"in r));return!t||!Number.isFinite(t.value)||!Pd.has(t.op)?{and:n}:{and:[{heightCompare:{op:t.op,value:t.value}},...n]}}function XS(e,t){const n=e.and.find(r=>"metricRange"in r&&r.metricRange.key===t);return(n==null?void 0:n.metricRange)??null}function JS(e,t,n){const r=e.and.filter(s=>!("metricRange"in s&&s.metricRange.key===t));return n?{and:[{metricRange:{key:t,min:n.min,max:n.max}},...r]}:{and:r}}function ZS(e){const t=Cc(e);return t?t.and.length:0}function ek(e){var t,n,r,s,i,o,l,u;if(!e||typeof e!="object")return null;if("stars"in e){const c=Ri(e.stars);return c.length?{starsIn:{values:c}}:null}if("starsIn"in e){const c=Ri((t=e.starsIn)==null?void 0:t.values);return c.length?{starsIn:{values:c}}:null}if("starsNotIn"in e){const c=Ri((n=e.starsNotIn)==null?void 0:n.values);return c.length?{starsNotIn:{values:c}}:null}if("nameContains"in e){const c=Qt((r=e.nameContains)==null?void 0:r.value);return c?{nameContains:{value:c}}:null}if("nameNotContains"in e){const c=Qt((s=e.nameNotContains)==null?void 0:s.value);return c?{nameNotContains:{value:c}}:null}if("commentsContains"in e){const c=Qt((i=e.commentsContains)==null?void 0:i.value);return c?{commentsContains:{value:c}}:null}if("commentsNotContains"in e){const c=Qt((o=e.commentsNotContains)==null?void 0:o.value);return c?{commentsNotContains:{value:c}}:null}if("urlContains"in e){const c=Qt((l=e.urlContains)==null?void 0:l.value);return c?{urlContains:{value:c}}:null}if("urlNotContains"in e){const c=Qt((u=e.urlNotContains)==null?void 0:u.value);return c?{urlNotContains:{value:c}}:null}if("dateRange"in e){const c=e.dateRange,f=Fl((c==null?void 0:c.from)??null),h=Fl((c==null?void 0:c.to)??null);return!f&&!h?null:{dateRange:{...f?{from:f}:{},...h?{to:h}:{}}}}if("widthCompare"in e){const c=e.widthCompare,f=Jh(c==null?void 0:c.op,c==null?void 0:c.value);return f?{widthCompare:f}:null}if("heightCompare"in e){const c=e.heightCompare,f=Jh(c==null?void 0:c.op,c==null?void 0:c.value);return f?{heightCompare:f}:null}if("metricRange"in e){const c=e.metricRange;if(!c||typeof c!="object")return null;const f=typeof c.key=="string"?c.key:"",h=Ec(c.min),g=Ec(c.max);return!f||h==null||g==null||h>g?null:{metricRange:{key:f,min:h,max:g}}}return null}function Ri(e){if(!Array.isArray(e))return[];const t=[],n=new Set;for(const r of e){const s=typeof r=="number"?r:typeof r=="string"?Number(r):NaN;!Number.isInteger(s)||!FS.has(s)||n.has(s)||(n.add(s),t.push(s))}return t}function Qt(e){if(typeof e!="string")return null;const t=e.trim();return t||null}function Fl(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=Date.parse(t);return Number.isNaN(n)?null:t}function Jh(e,t){if(typeof e!="string"||!Pd.has(e))return null;const n=Ec(t);return n==null?null:{op:e,value:n}}function Zh(e,t){if(!e)return null;const n=e.trim();if(!n)return null;const r=Date.parse(n);return Number.isNaN(r)?null:t&&OS.test(n)?r+24*60*60*1e3-1:r}function em(e,t,n){switch(t){case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;default:return!0}}function Ec(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function tm(e){return e.addedAt?Date.parse(e.addedAt):0}function Ol(e,t){return e.name.localeCompare(t.name)}function tk(e,t){const n=tm(e),r=tm(t);return n===r?Ol(e,t):n-r}function nk(e){return(t,n)=>{var i,o;const r=(i=t.metrics)==null?void 0:i[e],s=(o=n.metrics)==null?void 0:o[e];return r==null&&s==null?Ol(t,n):r==null?1:s==null?-1:r===s?Ol(t,n):r-s}}function nm(e,t){return DS(e,t)}function rk(e){let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function sk(e,t){const n=rk(t||1),r=[...e];for(let s=r.length-1;s>0;s-=1){const i=Math.floor(n()*(s+1));[r[s],r[i]]=[r[i],r[s]]}return r}function ik(e,t,n){if(t.kind==="builtin"&&t.key==="random"){const i=n??Date.now();return sk(e,i)}let r=tk;t.kind==="metric"?r=nk(t.key):t.key==="name"&&(r=Ol);const s=[...e].sort(r);return t.dir==="desc"?s.reverse():s}const rm="leftW.folders",sm="leftW.metrics",ok="leftW",im="rightW";function lk(e,t){const[n,r]=d.useState(240),[s,i]=d.useState(320),[o,l]=d.useState(240),u=t==="metrics"?s:n,c=d.useRef(u),f=d.useRef(o);return d.useEffect(()=>{c.current=u},[u]),d.useEffect(()=>{f.current=o},[o]),d.useEffect(()=>{try{const S=window.localStorage,w=Number(S.getItem(rm)??S.getItem(ok));Number.isFinite(w)&&w>0&&r(w);const N=Number(S.getItem(sm));Number.isFinite(N)&&N>0&&i(N);const R=Number(S.getItem(im));Number.isFinite(R)&&R>0&&l(R)}catch{}},[]),{leftW:u,rightW:o,onResizeLeft:S=>{S.preventDefault();const w=e.current;if(!w)return;const N=w.getBoundingClientRect(),R=t==="metrics"?sm:rm;let v=c.current;const m=y=>{const b=y.clientX-N.left,L=200,M=Math.max(L,N.width-f.current-200),E=Math.min(Math.max(b,L),M);v=E,t==="metrics"?i(E):r(E)},p=()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",p);try{window.localStorage.setItem(R,String(v))}catch{}};window.addEventListener("mousemove",m),window.addEventListener("mouseup",p)},onResizeRight:S=>{S.preventDefault();const w=e.current;if(!w)return;const N=w.getBoundingClientRect();let R=f.current;const v=p=>{const y=p.clientX-N.left,b=N.width-y,L=240,M=Math.max(L,N.width-c.current-200),E=Math.min(Math.max(b,L),M);R=E,f.current=E,l(E)},m=()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",m);try{window.localStorage.setItem(im,String(R))}catch{}};window.addEventListener("mousemove",v),window.addEventListener("mouseup",m)}}}function ak({x:e,y:t,items:n}){return a.jsx("div",{className:"dropdown-panel fixed",role:"menu",style:{left:e,top:t,minWidth:180},onClick:r=>r.stopPropagation(),children:n.map((r,s)=>a.jsxs("button",{className:`dropdown-item w-full ${r.danger?"text-danger hover:text-danger":""}`,role:"menuitem","aria-disabled":r.disabled,disabled:r.disabled,onClick:i=>{i.stopPropagation(),r.disabled||r.onClick()},children:[r.icon&&a.jsx("span",{className:"shrink-0",children:r.icon}),a.jsx("span",{children:r.label})]},s))})}function om(e){return JSON.stringify(e,null,2)}function lm(e){const t=s=>'"'+s.replaceAll('"','""')+'"',n="path,folder,name,star,type,size,width,height,tags,notes",r=e.map(s=>{const i=(s.tags||[]).join(" "),o=s.notes||"";return[s.path,s.folder,s.name,String(s.star??""),s.type??"",s.size??"",s.width??"",s.height??"",i,o].map(l=>t(String(l))).join(",")});return[n,...r].join(`
`)}function am(e){return e.map(t=>{const n=t.path.split("/").filter(Boolean);n.pop();const r=n.length?`/${n.join("/")}`:"/";return{path:t.path,folder:r,name:t.name,star:t.star??null,type:t.type,size:t.size,width:t.w,height:t.h}})}function uk(e,t=250){const[n,r]=il.useState(e);return il.useEffect(()=>{const s=window.setTimeout(()=>r(e),Math.max(0,t));return()=>window.clearTimeout(s)},[e,t]),n}const Ev="application/x-lenslet-paths",ck='[role="treeitem"].drop-target';function um(e){var n;return Array.from(((n=e.dataTransfer)==null?void 0:n.types)||[]).includes(Ev)}function dk(e){document.querySelectorAll(ck).forEach(t=>{t!==e&&t.classList.remove("drop-target")})}function cm(e){dk(e),e.classList.add("drop-target")}function dm(e){return e.startsWith("/")?e:`/${e}`}function fk({path:e,isLeaf:t}){const n=ns(),r=d.useCallback(l=>{um(l)&&(l.preventDefault(),t&&cm(l.currentTarget))},[t]),s=d.useCallback(l=>{!t||!um(l)||(l.preventDefault(),cm(l.currentTarget))},[t]),i=d.useCallback(l=>{const u=l.currentTarget,c=document.elementFromPoint(l.clientX,l.clientY);c&&u.contains(c)||u.classList.remove("drop-target")},[]),o=d.useCallback(async l=>{const u=l.dataTransfer;if(!u)return;l.preventDefault(),l.currentTarget.classList.remove("drop-target");const c=u.getData(Ev),h=(c?JSON.parse(c):[]).filter(Boolean);if(!h.length)return;let g=h[0].split("/").slice(0,-1).join("/")||"/";g=dm(g);const S=dm(e);try{for(const w of h)await pe.moveFile(w,S);n.invalidateQueries({queryKey:["folder",g]}),n.invalidateQueries({queryKey:["folder",S]}),n.setQueryData(["folder",g],w=>!w||!Array.isArray(w.items)?w:{...w,items:w.items.filter(N=>!h.includes(N.path))})}catch{}},[e,n]);return{onDragOver:r,onDragEnter:s,onDragLeave:i,onDrop:o}}const hk='[role="tree"] [role="treeitem"]';function mk(){return Array.from(document.querySelectorAll(hk))}function pk(e,t){var i;const n=mk(),r=n.findIndex(o=>o===e);if(r===-1)return;let s=r;t==="ArrowDown"?s=Math.min(n.length-1,r+1):t==="ArrowUp"?s=Math.max(0,r-1):t==="Home"?s=0:t==="End"&&(s=n.length-1),(i=n[s])==null||i.focus()}function gk({path:e,isLeaf:t,isExpanded:n,setExpanded:r,onOpen:s}){return d.useCallback(i=>{if(i.key==="Enter"){i.preventDefault(),s(e);return}if(i.key==="ArrowRight"){!t&&!n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.add(e),l}));return}if(i.key==="ArrowLeft"){!t&&n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.delete(e),l}));return}(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="Home"||i.key==="End")&&(i.preventDefault(),pk(i.currentTarget,i.key))},[e,t,n,r,s])}function vk({current:e,roots:t,data:n,onOpen:r,onResize:s,onContextMenu:i,className:o,showResizeHandle:l=!0}){const[u,c]=d.useState(new Set(["/"])),f=d.useRef(new Map),h=d.useRef(new Map),g=d.useCallback(async(w,N)=>{const R=an(w||"/"),v=f.current,m=h.current,p=v.get(R);if(p!==void 0)return p;const y=m.get(R);if(y)return y;const b=(async()=>{let L=0;const M=new Set,E=[{path:R,index:N}];for(;E.length;){const T=E.pop(),{path:C,index:I}=T;if(M.has(C))continue;M.add(C);let Q=I;if(!Q)try{Q=await pe.getFolder(C)}catch(z){console.warn(`Failed to count folder ${C}:`,z);continue}L+=Q.items.length;for(const z of Q.dirs)z.kind==="branch"&&E.push({path:gv(C,z.name)})}return v.set(R,L),m.delete(R),L})();return m.set(R,b),b},[]);d.useEffect(()=>{const w=e.split("/").filter(Boolean),N=["/"];let R="";for(const v of w)R=R?`${R}/${v}`:`/${v}`,N.push(R);c(v=>{const m=new Set(v);for(const p of N)m.add(p);return m})},[e]);const S=o??"h-full overflow-auto bg-panel scrollbar-thin";return a.jsxs("div",{className:S,children:[a.jsx("div",{className:"p-1",role:"tree","aria-label":"Folders",children:t.map(w=>a.jsx(Nv,{path:w.path,label:w.label,depth:0,current:e,expanded:u,setExpanded:c,onOpen:r,onContextMenu:i,initial:n,getSubtreeCount:g},w.path))}),l&&a.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 left-[calc(var(--left)-3px)] hover:bg-accent/20",onMouseDown:s})]})}function Nv({path:e,label:t,depth:n,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,initial:u,getSubtreeCount:c}){var M,E;const f=s.has(e),{data:h}=pv(e),g=u&&e===u.path?u:h,S=r===e,w=(((M=g==null?void 0:g.dirs)==null?void 0:M.length)??0)===0,[N,R]=d.useState(g?g.items.length:null),v=gk({path:e,isLeaf:w,isExpanded:f,setExpanded:i,onOpen:o}),{onDragOver:m,onDragEnter:p,onDragLeave:y,onDrop:b}=fk({path:e,isLeaf:w}),L=T=>{T.stopPropagation(),i(C=>{const I=new Set(C);return I.has(e)?I.delete(e):I.add(e),I})};return d.useEffect(()=>{let T=!1;if(!g){R(null);return}return R(g.items.length),c(e,g).then(C=>{T||R(C)}).catch(C=>{T||console.warn(`Failed to compute subtree count for ${e}:`,C)}),()=>{T=!0}},[g,e,c]),a.jsxs("div",{children:[a.jsxs("div",{className:`flex items-center gap-1.5 py-0.5 px-2 rounded-md cursor-pointer min-h-[28px] outline-none transition-colors duration-75 ${S?"bg-accent/20 text-accent font-medium":"hover:bg-white/5 text-text"}`,role:"treeitem","aria-level":n+1,"aria-expanded":w?void 0:f,"aria-selected":S,tabIndex:S?0:-1,style:{paddingLeft:8+n*14},onClick:()=>o(e),onContextMenu:T=>{T.preventDefault(),T.stopPropagation(),l&&l(T,e)},onKeyDown:v,onDragOver:m,onDragEnter:p,onDragLeave:y,onDrop:b,children:[a.jsx("span",{className:"w-4 text-center opacity-60 hover:opacity-100 text-[10px]",onClick:L,children:f?"":""}),a.jsx("span",{className:"flex-1 overflow-hidden truncate text-sm",title:t,children:fS(t,28)}),N!==null&&a.jsx("span",{className:"text-[10px] opacity-50 bg-white/5 border border-white/5 rounded px-1.5 min-w-[24px] text-center",children:N})]}),f&&((E=g==null?void 0:g.dirs)==null?void 0:E.map(T=>a.jsx(Nv,{path:gv(e,T.name),label:T.name,depth:n+1,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,getSubtreeCount:c},T.name)))]})}const Fr=40,yk=12,fm=[5,4,3,2,1],hm=["<","<=",">",">="];function xk({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l,onChangeFilters:u}){const c=r&&r.length?a.jsx(wk,{selectedItems:r,metricKeys:n}):null,f=a.jsx(Sk,{filters:o,onChangeFilters:u});return n.length?a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,a.jsx(kk,{items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}),f]}):a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,f,a.jsx("div",{className:"p-4 text-sm text-muted",children:"No metrics found in this dataset."})]})}function wk({selectedItems:e,metricKeys:t}){const n=d.useMemo(()=>{if(!e.length)return null;const u=new Map;for(const h of e){const g=h.metrics;if(g)for(const[S,w]of Object.entries(g)){if(w==null||Number.isNaN(w))continue;const N=u.get(S);N?N.push(w):u.set(S,[w])}}return u.size?{entries:(t.length?t.filter(h=>u.has(h)):Array.from(u.keys()).sort()).map(h=>{const g=u.get(h)??[],S=Math.min(...g),w=Math.max(...g),N=g.reduce((R,v)=>R+v,0)/Math.max(1,g.length);return{key:h,value:g[0],min:S,max:w,avg:N,count:g.length}}),totalItems:e.length}:null},[e,t]);if(!n)return null;const{entries:r,totalItems:s}=n,i=r.slice(0,yk),o=r.length-i.length,l=s>1;return a.jsxs("div",{className:"ui-card",children:[a.jsxs("div",{className:"ui-card-header",children:[a.jsx("div",{className:"ui-section-title",children:"Selected metrics"}),a.jsxs("div",{className:"text-[11px] text-muted",children:[s," item",s===1?"":"s"]})]}),a.jsxs("div",{className:"space-y-1 text-[12px]",children:[i.map(u=>a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-muted w-28 shrink-0 truncate",title:u.key,children:u.key}),a.jsxs("span",{className:"font-mono text-text text-right tabular-nums",children:[l?`${It(u.min)}  ${It(u.max)}`:It(u.value),l&&a.jsxs("span",{className:"text-[11px] text-muted ml-2",children:["avg ",It(u.avg),u.count!==s?`  ${u.count}/${s}`:""]})]})]},u.key)),o>0&&a.jsxs("div",{className:"text-[11px] text-muted",children:["+",o," more"]})]})]})}function Sk({filters:e,onChangeFilters:t}){const n=d.useMemo(()=>$S(e),[e]),r=d.useMemo(()=>US(e),[e]),s=d.useMemo(()=>BS(e)??"",[e]),i=d.useMemo(()=>WS(e)??"",[e]),o=d.useMemo(()=>HS(e)??"",[e]),l=d.useMemo(()=>VS(e)??"",[e]),u=d.useMemo(()=>QS(e)??"",[e]),c=d.useMemo(()=>KS(e)??"",[e]),f=d.useMemo(()=>qS(e)??{},[e]),h=d.useMemo(()=>wm(f.from),[f.from]),g=d.useMemo(()=>wm(f.to),[f.to]),S=d.useMemo(()=>YS(e),[e]),w=d.useMemo(()=>GS(e),[e]),[N,R]=d.useState((S==null?void 0:S.op)??">="),[v,m]=d.useState((w==null?void 0:w.op)??">=");d.useEffect(()=>{S!=null&&S.op&&R(S.op)},[S==null?void 0:S.op]),d.useEffect(()=>{w!=null&&w.op&&m(w.op)},[w==null?void 0:w.op]);const p=(y,b)=>{const L=new Set(n),M=new Set(r);y==="include"?L.has(b)?L.delete(b):(L.add(b),M.delete(b)):M.has(b)?M.delete(b):(M.add(b),L.delete(b));let E=vv(e,Array.from(L));E=yv(E,Array.from(M)),t(E)};return a.jsxs("div",{className:"ui-card",children:[a.jsx("div",{className:"ui-section-title mb-3",children:"Attributes"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Rating"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Include"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[fm.map(y=>{const b=n.includes(y);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${b?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",y),"aria-pressed":b,title:`Include ${y} star${y>1?"s":""}`,children:[y,""]},`stars-in-${y}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${n.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",0),"aria-pressed":n.includes(0),title:"Include unrated",children:"None"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Exclude"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[fm.map(y=>{const b=r.includes(y);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${b?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",y),"aria-pressed":b,title:`Exclude ${y} star${y>1?"s":""}`,children:[y,""]},`stars-out-${y}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${r.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",0),"aria-pressed":r.includes(0),title:"Exclude unrated",children:"None"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Filename"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:s,placeholder:"e.g. draft",onChange:y=>t(xv(e,y.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:i,placeholder:"e.g. v1",onChange:y=>t(wv(e,y.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Comments"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:o,placeholder:"e.g. hero",onChange:y=>t(Sv(e,y.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:l,placeholder:"e.g. todo",onChange:y=>t(kv(e,y.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"URL"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:u,placeholder:"e.g. s3://bucket",onChange:y=>t(Cv(e,y.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:c,placeholder:"e.g. http://",onChange:y=>t(bv(e,y.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Date Added"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"From"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:h,onChange:y=>t(bc(e,{from:y.target.value||null,to:f.to??null}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"To"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:g,onChange:y=>t(bc(e,{from:f.from??null,to:y.target.value||null}))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Dimensions"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Width"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:N,onChange:y=>{const b=y.target.value;R(b),S&&t(rl(e,{op:b,value:S.value}))},children:hm.map(y=>a.jsx("option",{value:y,children:y},`w-${y}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:S?String(S.value):"",min:0,placeholder:"px",onChange:y=>{const b=y.target.value;if(!b){t(rl(e,null));return}const L=Number(b);Number.isFinite(L)&&t(rl(e,{op:N,value:L}))}})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Height"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:v,onChange:y=>{const b=y.target.value;m(b),w&&t(sl(e,{op:b,value:w.value}))},children:hm.map(y=>a.jsx("option",{value:y,children:y},`h-${y}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:w?String(w.value):"",min:0,placeholder:"px",onChange:y=>{const b=y.target.value;if(!b){t(sl(e,null));return}const L=Number(b);Number.isFinite(L)&&t(sl(e,{op:v,value:L}))}})]})]})]})]})]})]})}function kk({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}){const[u,c]=d.useState(!1),f=s&&n.includes(s)?s:n[0];return a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("label",{className:"ui-label",children:"Metric"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-[11px]",onClick:()=>c(h=>!h),"aria-pressed":u,children:u?"Show one":"Show all"})]}),u?a.jsx("div",{className:"ui-input ui-input-readonly w-full flex items-center text-xs",children:"All metrics"}):a.jsx("select",{className:"ui-select w-full",value:f,onChange:h=>i(h.target.value),children:n.map(h=>a.jsx("option",{value:h,children:h},h))})]}),u?a.jsx("div",{className:"space-y-3",children:n.map(h=>a.jsx(mm,{metricKey:h,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l,showTitle:!0},h))}):f?a.jsx(mm,{metricKey:f,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l}):a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]})}function mm({items:e,filteredItems:t,metricKey:n,selectedItems:r,filters:s,onChangeRange:i,showTitle:o=!1}){const l=d.useMemo(()=>pm(e,n),[e,n]),u=d.useMemo(()=>ru(l,Fr),[l]),c=d.useMemo(()=>pm(t,n),[t,n]),f=d.useMemo(()=>u?ru(c,Fr,u):null,[c,u]),h=XS(s,n),[g,S]=d.useState(null),[w,N]=d.useState(!1),R=d.useRef(null),v=d.useRef(null),m=d.useRef(!1),p=d.useRef(null),[y,b]=d.useState(null),[L,M]=d.useState(""),[E,T]=d.useState(""),[C,I]=d.useState(null),Q=g??h,z=u?{min:u.min,max:u.max}:null,$=d.useMemo(()=>{var Y;if(!(r!=null&&r.length))return[];const W=[];for(const te of r){const me=(Y=te.metrics)==null?void 0:Y[n];me==null||Number.isNaN(me)||W.push(me)}return W},[r,n]),ie=$.length===1?$[0]:null,B=d.useMemo(()=>!u||$.length<2?null:ru($,Fr,u),[$,u]);d.useEffect(()=>{if(!h||!z){C!=="min"&&M(h?Kn(h.min):""),C!=="max"&&T(h?Kn(h.max):"");return}if(C!=="min"){const W=ls(h.min,z.min)?"":Kn(h.min);M(W)}if(C!=="max"){const W=ls(h.max,z.max)?"":Kn(h.max);T(W)}},[h,z,C]),d.useEffect(()=>{b(null)},[n,z==null?void 0:z.min,z==null?void 0:z.max]);const ce=W=>{var me;if(!z)return null;const Y=(me=p.current)==null?void 0:me.getBoundingClientRect();if(!Y)return null;const te=Id((W.clientX-Y.left)/Y.width);return z.min+(z.max-z.min)*te},F=(W,Y)=>{if(!z)return;const te=R.current??W,me=vm(te,W);S(me),Y&&i(n,me)},H=W=>{var te;if(!z)return;W.preventDefault();const Y=ce(W);Y!=null&&(N(!0),S(null),R.current=Y,v.current=W.clientX,m.current=!1,b(Y),(te=p.current)==null||te.setPointerCapture(W.pointerId))},q=W=>{const Y=ce(W);if(Y==null){w||b(null);return}if(b(Y),w){const te=v.current;if(!m.current&&te!=null){if(Math.abs(W.clientX-te)<4)return;m.current=!0}m.current&&F(Y,!1)}},he=W=>{var te;if(!w)return;N(!1),(te=p.current)==null||te.releasePointerCapture(W.pointerId);const Y=ce(W);m.current&&Y!=null?(b(Y),F(Y,!0)):h&&i(n,null),R.current=null,v.current=null,m.current=!1,setTimeout(()=>S(null),0)},fe=(W,Y)=>{if(!z)return;const te=ym(W),me=ym(Y);if(!te.valid||!me.valid){te.valid||M(h?Kn(h.min):""),me.valid||T(h?Kn(h.max):"");return}if(te.value==null&&me.value==null){i(n,null);return}const Ve=te.value??z.min,Ye=me.value??z.max,Re=xm(Ve,z.min,z.max),ht=xm(Ye,z.min,z.max),Ae=vm(Re,ht);if(ls(Ae.min,z.min)&&ls(Ae.max,z.max)){i(n,null);return}i(n,Ae)};if(!u||!z)return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]});const je=$.length;return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mb-2 tabular-nums",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{children:["Population: ",u.count]}),a.jsxs("span",{children:["Filtered: ",(f==null?void 0:f.count)??0]}),je>1&&a.jsxs("span",{className:"text-text",children:["Selected: ",je]})]}),ie!=null&&a.jsxs("span",{className:"text-text",children:["Selected: ",It(ie)]})]}),a.jsxs("svg",{ref:p,viewBox:`0 0 ${Fr} 100`,preserveAspectRatio:"none",className:"w-full h-28 cursor-crosshair rounded-md bg-surface-inset",onPointerDown:H,onPointerMove:q,onPointerUp:he,onPointerLeave:()=>b(null),children:[su(u.bins,"#2e3a4b"),f&&su(f.bins,"#3a8fff"),B&&su(B.bins,"#f59e0b",{opacity:.55}),Q&&Ck(Q,z),ie!=null&&gm(ie,z,{color:"var(--highlight)",strokeWidth:.7}),y!=null&&gm(y,z,{color:"rgba(255,255,255,0.75)",strokeWidth:.5,dashed:!0})]}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mt-2 tabular-nums",children:[a.jsx("span",{children:It(z==null?void 0:z.min)}),a.jsxs("div",{className:"flex flex-col items-center text-center leading-tight",children:[Q?a.jsx("span",{className:"text-text",children:ls(Q.min,z.min)?` ${It(Q.max)}`:ls(Q.max,z.max)?` ${It(Q.min)}`:`${It(Q.min)}  ${It(Q.max)}`}):y!=null?a.jsxs("span",{className:"text-text",children:["Cursor: ",It(y)]}):a.jsx("span",{children:"Drag to filter"}),Q&&y!=null&&a.jsxs("span",{className:"text-[11px] text-muted",children:["Cursor: ",It(y)]})]}),a.jsx("span",{children:It(z==null?void 0:z.max)})]}),a.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-2 mt-3 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Min"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:L,placeholder:Kn(z.min),onFocus:()=>I("min"),onBlur:()=>{I(null),fe(L,E)},onChange:W=>M(W.target.value),onKeyDown:W=>{W.key==="Enter"&&W.currentTarget.blur()}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Max"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:E,placeholder:Kn(z.max),onFocus:()=>I("max"),onBlur:()=>{I(null),fe(L,E)},onChange:W=>T(W.target.value),onKeyDown:W=>{W.key==="Enter"&&W.currentTarget.blur()}})]}),a.jsx("button",{className:"btn btn-xs btn-ghost text-muted hover:text-text",onClick:()=>i(n,null),children:"Clear"})]})]})}function ru(e,t,n){if(!e.length)return null;const r=n?n.min:Math.min(...e);let s=n?n.max:Math.max(...e);r===s&&(s=r+1);const i=new Array(t).fill(0),o=t/(s-r);for(const l of e){const u=Math.max(0,Math.min(t-1,Math.floor((l-r)*o)));i[u]+=1}return{bins:i,min:r,max:s,count:e.length}}function pm(e,t){var r;const n=[];for(const s of e){const i=(r=s.metrics)==null?void 0:r[t];i==null||Number.isNaN(i)||n.push(i)}return n}function su(e,t,n){const r=Math.max(1,...e),s=(n==null?void 0:n.opacity)??.9;return e.map((i,o)=>{const l=i/r*100;return a.jsx("rect",{x:o+.05,y:100-l,width:.9,height:l,fill:t,opacity:s},`${t}-${o}`)})}function Ck(e,t){const n=(e.min-t.min)/(t.max-t.min),r=(e.max-t.min)/(t.max-t.min),s=Fr*Id(Math.min(n,r)),i=Fr*Math.abs(r-n);return a.jsx("rect",{x:s,y:0,width:Math.max(.5,i),height:100,fill:"rgba(255,255,255,0.08)",stroke:"rgba(255,255,255,0.4)",strokeWidth:.4})}function gm(e,t,n){const r=Id((e-t.min)/(t.max-t.min)),s=Fr*r;return a.jsx("line",{x1:s,y1:0,x2:s,y2:100,stroke:n.color,strokeWidth:n.strokeWidth??.5,strokeDasharray:n.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function vm(e,t){return e<t?{min:e,max:t}:{min:t,max:e}}function Id(e){return e<0?0:e>1?1:e}function It(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Kn(e){if(!Number.isFinite(e))return"";const t=e.toString();return t.includes("e")?e.toFixed(6):t}function ym(e){const t=e.trim();if(!t)return{value:null,valid:!0};const n=Number(t);return Number.isFinite(n)?{value:n,valid:!0}:{value:null,valid:!1}}function xm(e,t,n){return e<t?t:e>n?n:e}function ls(e,t){const n=Math.max(1,Math.abs(e),Math.abs(t));return Math.abs(e-t)<=1e-6*n}function wm(e){return e?e.length>=10?e.slice(0,10):e:""}const bk=[{label:"Root",path:"/"}];function Ek({leftTool:e,onToolChange:t,compareEnabled:n,compareActive:r,onOpenCompare:s,views:i,activeViewId:o,onActivateView:l,onSaveView:u,current:c,data:f,onOpenFolder:h,onContextMenu:g,items:S,filteredItems:w,metricKeys:N,selectedItems:R,selectedMetric:v,onSelectMetric:m,filters:p,onChangeRange:y,onChangeFilters:b,onResize:L}){const M=e==="folders"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",E=e==="metrics"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",T=r?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover";return a.jsxs("div",{className:"app-left-panel col-start-1 row-start-2 relative border-r border-border bg-panel overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-y-0 left-0 w-10 border-r border-border flex flex-col items-center gap-2 py-3 bg-surface-overlay",children:[a.jsx("button",{className:M,title:"Folders","aria-label":"Folders","aria-pressed":e==="folders",onClick:()=>t("folders"),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M3 7.5h6l2-2h10a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2z"})})}),a.jsx("button",{className:E,title:"Metrics / Filters","aria-label":"Metrics and Filters","aria-pressed":e==="metrics",onClick:()=>t("metrics"),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]})}),a.jsx("div",{className:"w-6 h-px bg-border/70 my-1"}),a.jsx("button",{className:`${T} ${n?"":"opacity-40 cursor-not-allowed"}`,title:n?"Compare selected images":"Compare (select 2+)","aria-label":"Compare selected images","aria-pressed":r,"aria-disabled":!n,disabled:!n,onClick:()=>{n&&s()},children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("rect",{x:"3",y:"4",width:"8",height:"16",rx:"1"}),a.jsx("rect",{x:"13",y:"4",width:"8",height:"16",rx:"1"})]})})]}),a.jsx("div",{className:"ml-10 h-full",children:e==="folders"?a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"px-2 py-2 border-b border-border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Smart Folders"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:u,title:"Save current view as Smart Folder",children:"+ New"})]}),i.length?a.jsx("div",{className:"flex flex-col gap-1",children:i.map(C=>{const I=C.id===o;return a.jsx("button",{className:`text-left px-2 py-1.5 rounded-md text-sm ${I?"bg-accent-muted text-accent":"hover:bg-hover text-text"}`,onClick:()=>l(C),children:C.name},C.id)})}):a.jsx("div",{className:"text-xs text-muted px-1 py-1.5",children:"No saved Smart Folders yet."})]}),a.jsx(vk,{current:c,roots:bk,data:f,onOpen:h,onContextMenu:g,className:"flex-1 min-h-0 overflow-auto scrollbar-thin",showResizeHandle:!1})]}):a.jsx(xk,{items:S,filteredItems:w,metricKeys:N,selectedItems:R,selectedMetric:v,onSelectMetric:m,filters:p,onChangeRange:y,onChangeFilters:b})}),a.jsx("div",{className:"toolbar-offset absolute bottom-0 right-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20",onMouseDown:L})]})}function Nk({persistenceEnabled:e,recentSummary:t,onDismissRecent:n,onCloseRecent:r,browserZoomPercent:s}){const i=t?` (${t.names.join(", ")}${t.extra?` +${t.extra}`:""})`:"",o=!!(t!=null&&t.names.length),l=typeof s=="number"?s:null,u=l!==null&&Math.abs(l-100)>=2;return!e||u||!!t?a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-col gap-2",children:[!e&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("span",{className:"font-semibold",children:"Not persisted."})," Workspace is read-only; edits stay in memory until restart."]}),u&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs",children:[a.jsxs("span",{className:"font-semibold",children:["Browser zoom ",Math.round(l),"%."]})," For best results, set it to 100% so UI elements stay in correct proportions."]}),t&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex items-center justify-between gap-3",children:[a.jsxs("span",{children:["Recent updates: ",t.count," item",t.count===1?"":"s",o?i:""]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"text-muted hover:text-text transition-colors",onClick:n,"aria-label":"Hide recent activity until refresh",children:"Hide until refresh"}),a.jsx("button",{className:"text-muted hover:text-text transition-colors text-base leading-none",onClick:r,"aria-label":"Close recent activity",children:""})]})]})]})}):a.jsx(a.Fragment,{})}const Sm=6e3,jk=15*6e4,Mk=1e4,Rk=24*60*6e4,We={sortKey:"sortKey",sortDir:"sortDir",sortSpec:"sortSpec",starFilters:"starFilters",filterAst:"filterAst",selectedMetric:"selectedMetric",viewMode:"viewMode",gridItemSize:"gridItemSize",leftOpen:"leftOpen",rightOpen:"rightOpen"};function Lk(e){switch(e){case"live":return"Live";case"reconnecting":return"Reconnecting";case"offline":return"Offline";case"connecting":case"idle":default:return"Connecting"}}function Tk(e){return e.isOffline?"offline":e.isUnstable?"unstable":e.recentEditActive?"recent":e.editingActive?"editing":"live"}function jv(e,t){return t-e<Rk?pS(e,t):gS(e)}function _k(e,t){if(!e.length)return null;const n=new Set,r=[];for(const i of e)n.has(i.path)||(n.add(i.path),r.push(i.path));const s=r.slice(0,2).map(i=>{const o=t.find(l=>l.path===i);return(o==null?void 0:o.name)??i.split("/").pop()??i});return{count:r.length,names:s,extra:Math.max(0,r.length-s.length)}}function Pk(e,t,n){return e.length?e.map(r=>{const s=t.find(l=>l.path===r.path),i=(s==null?void 0:s.name)??r.path.split("/").pop()??r.path,o=jv(r.ts,n);return{path:r.path,label:i,timeLabel:o}}):[]}function Ik(e,t){return e?t instanceof Cn||t instanceof Error?t.message:"Failed to load embeddings.":null}function Fk(e,t,n,r){return e||t?n:r}function Ok(e,t,n,r,s,i){return e?n:t||i==="/"?r:s}function Dk(){var ef,tf,nf;const[e,t]=d.useState("/"),[n,r]=d.useState(""),[s,i]=d.useState([]),[o,l]=d.useState(!1),[u,c]=d.useState(null),[f,h]=d.useState(null),[g,S]=d.useState(!1),[w,N]=d.useState(0),[R,v]=d.useState(0),[m,p]=d.useState(null),[y,b]=d.useState(100),[L,M]=d.useState(null),[E,T]=d.useState(()=>({filters:{and:[]},sort:{kind:"builtin",key:"added",dir:"desc"},selectedMetric:void 0})),[C,I]=d.useState(()=>Date.now()),[Q,z]=d.useState("adaptive"),[$,ie]=d.useState(220),[B,ce]=d.useState(!0),[F,H]=d.useState(!0),[q,he]=d.useState("folders"),[fe,je]=d.useState([]),[W,Y]=d.useState(null),[te,me]=d.useState(null),[Ve,Ye]=d.useState(null),[Re,ht]=d.useState({}),Ae=d.useRef(null),fn=d.useRef(null),Ie=d.useRef(null),Xt=d.useRef(null),mt=d.useRef(!1),U=d.useRef(!1),re=d.useRef(null),ue=d.useRef(new Map),ye=d.useRef(new Map),oe=d.useRef(null),{leftW:ve,rightW:ee,onResizeLeft:V,onResizeRight:de}=lk(Ae,q),[Ce,be]=d.useState(!1),[pt,O]=d.useState(null),ne=ns(),le=rS(),Ee=ta(),bt=iS(),[hn,lo]=d.useState("idle"),[Zs,ao]=d.useState({}),[Qe,br]=d.useState([]),[ei,Mv]=d.useState([]),[Fd,Rv]=d.useState(null),[Lv,Tv]=d.useState(!1),[_v,Od]=d.useState(new Set),sa=d.useRef(new Map),[Hn,Pv]=d.useState(null),[Dd,Iv]=d.useState(null),[Fv,ia]=d.useState(!1),[ti,oa]=d.useState(()=>Date.now()),[Ov,Dv]=d.useState(!0);d.useEffect(()=>{const x=_=>{const P=an(_),D=PS(P)?P:null,G=D?Gh(P):P;D?(h(D),i([D])):(h(null),mt.current=!1),t(ae=>ae===G?ae:(v(X=>X+1),G))};x(qh());const j=()=>x(qh());return window.addEventListener("hashchange",j),()=>window.removeEventListener("hashchange",j)},[]),d.useEffect(()=>()=>{for(const x of sa.current.values())window.clearTimeout(x);sa.current.clear()},[]),d.useEffect(()=>{if(Dd==null){ia(!1);return}ia(!0);const x=window.setTimeout(()=>ia(!1),Sm);return()=>window.clearTimeout(x)},[Dd]),d.useEffect(()=>{if(Hn==null)return;oa(Date.now());const x=window.setInterval(()=>oa(Date.now()),1e4);return()=>window.clearInterval(x)},[Hn]);const{data:Be,refetch:la,isLoading:qk,isError:Yk}=pv(e,!0),Jt=u!==null,Er=!Jt&&n.trim().length>0,zd=uk(n,250),Ad=d.useMemo(()=>zd.trim().replace(/\s+/g," "),[zd]),uo=MS(Er?Ad:"",e),rs=LS(),$d=((ef=rs.data)==null?void 0:ef.embeddings)??[],zv=((tf=rs.data)==null?void 0:tf.rejected)??[],Av=$d.length>0,$v=Ik(rs.isError,rs.error),aa=d.useMemo(()=>Xh(E.filters),[E.filters]),Ut=d.useMemo(()=>{var j;return(Er?((j=uo.data)==null?void 0:j.items)??[]:(Be==null?void 0:Be.items)??[]).map(_=>({..._,star:Re[_.path]!==void 0?Re[_.path]:_.star}))},[Er,uo.data,Be,Re]),Ud=d.useMemo(()=>{var _;const x=new Map;for(const P of Ut)x.set(P.path,P);const j=((_=uo.data)==null?void 0:_.items)??[];for(const P of j){if(x.has(P.path))continue;const D=Re[P.path]!==void 0?Re[P.path]:P.star;x.set(P.path,{...P,star:D})}return x},[Ut,uo.data,Re]),mn=d.useMemo(()=>u?u.items.map(x=>{const j=Ud.get(x.path);return j||Hk(x.path,Re[x.path])}):[],[u,Ud,Re]),Ke=d.useMemo(()=>{if(u)return nm(mn,E.filters);const x=nm(Ut,E.filters);return ik(x,E.sort,C)},[u,mn,Ut,E.filters,E.sort,C]),ni=u?mn.length:Ut.length,ua=Ke.length,_t=d.useMemo(()=>Ke.map(x=>x.path),[Ke]),Bd=d.useMemo(()=>new Set(s),[s]),Uv=d.useMemo(()=>{if(!s.length)return[];const x=u?mn:Ut,j=new Map(x.map(P=>[P.path,P])),_=new Map(Ke.map(P=>[P.path,P]));return s.map(P=>j.get(P)??_.get(P)).filter(P=>!!P)},[s,u,mn,Ut,Ke]),Pt=d.useMemo(()=>Ke.filter(x=>Bd.has(x.path)),[Ke,Bd]),co=Math.max(0,Pt.length-2),Nr=Math.min(w,co),Bv=Pt[Nr]??null,Wv=Pt[Nr+1]??null,Hv=Nr>0,Vv=Nr<Pt.length-2,ri=Pt.length>=2,Qv=u?mn:Ut,si=u?null:E.sort.kind==="metric"?E.sort.key:null,Wd=d.useMemo(()=>si?Ke.some(x=>{var _;const j=(_=x.metrics)==null?void 0:_[si];return j!=null&&!Number.isNaN(j)}):!1,[Ke,si]);d.useEffect(()=>{N(x=>x>co?co:x)},[co]);const Hd=d.useCallback(x=>{Od(D=>{if(D.has(x))return D;const G=new Set(D);return G.add(x),G});const j=sa.current,_=j.get(x);_&&window.clearTimeout(_);const P=window.setTimeout(()=>{Od(D=>{if(!D.has(x))return D;const G=new Set(D);return G.delete(x),G}),j.delete(x)},Sm);j.set(x,P)},[]),ca=d.useCallback(x=>{const j=Date.now(),P=Hh(x)??j,D=P>j?j:P;Pv(G=>G==null?D:G>D?G:D),Iv(j),oa(j)},[]),da=d.useCallback((x,j,_)=>{const P=Date.now(),D=Hh(_)??P;Mv(G=>{const ae=G.filter(Z=>Z.path!==x);return[{path:x,ts:D,kind:j},...ae].slice(0,10)})},[]),fa=d.useCallback((x,j)=>{const _=Date.now();br(P=>{const D=P.filter(ae=>ae.path!==x);return[{path:x,ts:_,kind:j},...D].slice(0,6)}),Hd(x)},[Hd]),ha=d.useCallback(x=>{const j=Object.prototype.hasOwnProperty.call(x,"star"),_=x.metrics!==void 0,P=x.comments!==void 0;if(!j&&!_&&!P)return;const D=ae=>{if(ae.path!==x.path)return ae;let X=ae;return j&&ae.star!==x.star&&(X={...X,star:x.star??null}),_&&(X={...X,metrics:x.metrics??null}),P&&ae.comments!==x.comments&&(X={...X,comments:x.comments??""}),X},G=ae=>{if(!ae)return ae;let X=!1;const Z=ae.items.map(xe=>{const lt=D(xe);return lt!==xe&&(X=!0),lt});return X?{...ae,items:Z}:ae};ne.setQueriesData({predicate:({queryKey:ae})=>Array.isArray(ae)&&ae[0]==="folder"},G),ne.setQueriesData({predicate:({queryKey:ae})=>Array.isArray(ae)&&ae[0]==="search"},G)},[ne]),ma=d.useCallback(async x=>{const j=an(x||"/"),_=ue.current,P=ye.current,D=_.get(j);if(D!==void 0)return D;const G=P.get(j);if(G)return G;const ae=(async()=>{try{const Z=(await pe.getFolder(j,void 0,!0)).items.length;return _.set(j,Z),Z}finally{P.delete(j)}})();return P.set(j,ae),ae},[]);d.useEffect(()=>{let x=!1;const j=an(e||"/");return(async()=>{const P=ma("/"),D=j==="/"?P:ma(j),[G,ae]=await Promise.all([P,D]);x||(Ye(G),me(ae))})().catch(P=>console.warn("Failed to compute folder counts:",P)),()=>{x=!0}},[e,ma]),d.useEffect(()=>{e1();const x=n1(_=>{if(_.type==="presence"){const G=_.data;if(!(G!=null&&G.gallery_id))return;ao(ae=>({...ae,[G.gallery_id]:G}));return}const P=_.data;if(!(P!=null&&P.path))return;const D=P.path;if(_.type==="item-updated"){const G=_.data,ae={v:1,tags:G.tags??[],notes:G.notes??"",star:G.star??null,version:G.version??1,updated_at:G.updated_at??"",updated_by:G.updated_by??"server"};ne.setQueryData(Yi(D),ae),ha({path:D,star:G.star??null,metrics:G.metrics,comments:G.notes??""}),aS(D,ae),fa(D,"item-updated"),da(D,"item-updated",G.updated_at),ca(G.updated_at),ht(X=>{if(X[D]===void 0)return X;const Z={...X};return delete Z[D],Z})}else if(_.type==="metrics-updated"){const G=_.data;ha({path:D,metrics:G.metrics}),fa(D,"metrics-updated"),da(D,"metrics-updated",G.updated_at),ca(G.updated_at)}}),j=r1(lo);return()=>{x(),j(),t1()}},[fa,da,ne,ha,ca]),d.useEffect(()=>{let x=!1;const j=an(e||"/"),_=async()=>{try{const D=await pe.postPresence(j);!x&&(D!=null&&D.gallery_id)&&ao(G=>({...G,[D.gallery_id]:D}))}catch{}};_();const P=window.setInterval(_,3e4);return()=>{x=!0,window.clearInterval(P)}},[e]),d.useEffect(()=>{let x=!1;return pe.getHealth().then(j=>{var P;if(x)return;const _=((P=j==null?void 0:j.labels)==null?void 0:P.enabled)??!0;Dv(_)}).catch(()=>{}),()=>{x=!0}},[]);const Kv=d.useMemo(()=>{const x=u?mn:Ut,j={0:0,1:0,2:0,3:0,4:0,5:0};for(const _ of x){const P=Re[_.path]??_.star??0;j[String(P)]=(j[String(P)]||0)+1}return j},[u,mn,Ut,Re]),Vn=d.useMemo(()=>{const x=new Set;let j=0;const _=u?mn:Ut;for(const P of _){const D=P.metrics;if(D)for(const G of Object.keys(D))x.add(G);if(j+=1,j>=250&&x.size>0)break}return Array.from(x).sort()},[u,mn,Ut]);d.useEffect(()=>{Jt||Vn.length&&T(x=>{const j=x.selectedMetric&&Vn.includes(x.selectedMetric)?x.selectedMetric:Vn[0];return j===x.selectedMetric?x:{...x,selectedMetric:j}})},[Vn,Jt]),d.useEffect(()=>{Jt||E.sort.kind==="metric"&&(Vn.includes(E.sort.key)||T(x=>({...x,sort:{kind:"builtin",key:"added",dir:x.sort.dir}})))},[Vn,E.sort,Jt]);const fo=d.useMemo(()=>ZS(E.filters),[E.filters]),pa=te??ni,qv=Ve??pa,Vd=Jt||Er||fo>0,ho=Zs[e],Yv=le.state==="syncing"?"Syncing":le.state==="error"?le.message?`Not saved  ${le.message}`:"Not saved  retry":"All changes saved",Gv=Lk(hn),ga=Hn!=null,Xv=d.useMemo(()=>!ga||Hn==null?"No edits yet.":jv(Hn,ti),[ga,Hn,ti]),Qd=Hn==null?null:Math.max(0,ti-Hn),Jv=((ho==null?void 0:ho.editing)??0)>0||Qd!=null&&Qd<jk,Zv=bt!=null&&bt>Mk,ey=hn==="offline"||hn==="connecting"||hn==="idle",ty=hn==="reconnecting"||Ee||le.state==="error"||Zv,ny=Tk({isOffline:ey,isUnstable:ty,recentEditActive:Fv,editingActive:Jv}),ry=d.useMemo(()=>_k(Qe,Ke),[Qe,Ke]),va=d.useMemo(()=>Qe.length?Qe.reduce((x,j)=>Math.max(x,j.ts),0):null,[Qe]),sy=Lv||Fd!=null&&va!=null&&va<=Fd?null:ry,iy=d.useMemo(()=>Pk(ei,Ke,ti),[Ke,ti,ei]),oy=Fk(Jt,Vd,ua,pa),ly=Ok(Jt,Vd,ni,pa,qv,e),Kd=d.useMemo(()=>{if(!u)return null;if(u.queryPath){const x=u.queryPath.split("/").filter(Boolean);return x.length?x[x.length-1]:u.queryPath}return u.queryVector?"Vector query":null},[u]),qd=d.useMemo(()=>u?fo>0?`${ua} of ${ni}`:`${ni}`:null,[u,fo,ua,ni]),gt=d.useCallback(x=>{T(j=>({...j,filters:x(j.filters)}))},[]),ay=d.useCallback(x=>{T(j=>({...j,filters:x}))},[]),mo=d.useCallback(()=>{gt(x=>nu(x,[]))},[gt]),Yd=d.useCallback(()=>{T(x=>({...x,filters:{and:[]}}))},[]),uy=d.useCallback(()=>{c(null);const x=oe.current;oe.current=null,x&&x.length?(i(x),v(j=>j+1)):i([])},[]),cy=d.useCallback(async x=>{!u&&oe.current===null&&(oe.current=s);const j=await pe.searchEmbeddings(x);if(c({embedding:j.embedding,queryPath:x.query_path??null,queryVector:x.query_vector_b64??null,topK:x.top_k??50,minScore:x.min_score??null,items:j.items,createdAt:Date.now()}),j.items.length){const _=x.query_path&&j.items.some(P=>P.path===x.query_path)?x.query_path:j.items[0].path;i([_]),v(P=>P+1)}else i([])},[u,s]),ya=d.useCallback((x,j)=>{gt(_=>JS(_,x,j))},[gt]),Gd=d.useMemo(()=>{var j,_,P,D,G,ae;const x=[];for(const X of E.filters.and)if("stars"in X){const Z=X.stars||[];if(!Z.length)continue;x.push({id:"stars",label:`Rating in: ${iu(Z)}`,onRemove:()=>mo()})}else if("starsIn"in X){const Z=X.starsIn.values||[];if(!Z.length)continue;x.push({id:"stars-in",label:`Rating in: ${iu(Z)}`,onRemove:()=>mo()})}else if("starsNotIn"in X){const Z=X.starsNotIn.values||[];if(!Z.length)continue;x.push({id:"stars-not-in",label:`Rating not in: ${iu(Z)}`,onRemove:()=>gt(xe=>yv(xe,[]))})}else if("nameContains"in X){const Z=(j=X.nameContains.value)==null?void 0:j.trim();if(!Z)continue;x.push({id:"name-contains",label:`Filename contains: ${Z}`,onRemove:()=>gt(xe=>xv(xe,""))})}else if("nameNotContains"in X){const Z=(_=X.nameNotContains.value)==null?void 0:_.trim();if(!Z)continue;x.push({id:"name-not-contains",label:`Filename not: ${Z}`,onRemove:()=>gt(xe=>wv(xe,""))})}else if("commentsContains"in X){const Z=(P=X.commentsContains.value)==null?void 0:P.trim();if(!Z)continue;x.push({id:"comments-contains",label:`Comments contain: ${Z}`,onRemove:()=>gt(xe=>Sv(xe,""))})}else if("commentsNotContains"in X){const Z=(D=X.commentsNotContains.value)==null?void 0:D.trim();if(!Z)continue;x.push({id:"comments-not-contains",label:`Comments not: ${Z}`,onRemove:()=>gt(xe=>kv(xe,""))})}else if("urlContains"in X){const Z=(G=X.urlContains.value)==null?void 0:G.trim();if(!Z)continue;x.push({id:"url-contains",label:`URL contains: ${Z}`,onRemove:()=>gt(xe=>Cv(xe,""))})}else if("urlNotContains"in X){const Z=(ae=X.urlNotContains.value)==null?void 0:ae.trim();if(!Z)continue;x.push({id:"url-not-contains",label:`URL not: ${Z}`,onRemove:()=>gt(xe=>bv(xe,""))})}else if("dateRange"in X){const{from:Z,to:xe}=X.dateRange;if(!Z&&!xe)continue;x.push({id:"date-range",label:`Date: ${$k(Z,xe)}`,onRemove:()=>gt(lt=>bc(lt,null))})}else if("widthCompare"in X){const{op:Z,value:xe}=X.widthCompare;x.push({id:"width-compare",label:`Width ${Z} ${xe}`,onRemove:()=>gt(lt=>rl(lt,null))})}else if("heightCompare"in X){const{op:Z,value:xe}=X.heightCompare;x.push({id:"height-compare",label:`Height ${Z} ${xe}`,onRemove:()=>gt(lt=>sl(lt,null))})}else if("metricRange"in X){const{key:Z,min:xe,max:lt}=X.metricRange;x.push({id:`metric:${Z}`,label:`${Z}: ${Bk(xe,lt)}`,onRemove:()=>ya(Z,null)})}return x},[E.filters,mo,ya,gt]),dy=d.useCallback(x=>{const j=new Set(aa);j.has(x)?j.delete(x):j.add(x),T(_=>({..._,filters:nu(_.filters,Array.from(j))}))},[aa]),fy=d.useCallback(()=>{ce(!0),he("metrics")},[]),hy=d.useCallback(x=>{T(j=>({...j,sort:x})),x.kind==="builtin"&&x.key==="random"&&I(Date.now())},[]),Xd=d.useCallback(x=>{if(x==="/"||x==="")return"Lenslet | Root";const j=x.split("/").filter(Boolean);if(!j.length)return"Lenslet";const _=j.slice(-2).join("/");return`Lenslet | ${j.length>2?`.../${_}`:`/${_}`}`},[]),my=d.useMemo(()=>Uk(e),[e]);d.useEffect(()=>{document.title=Xd(e)},[e,Xd]),d.useEffect(()=>{let x=!0;return pe.getViews().then(j=>{x&&je(j.views||[])}).catch(()=>{x&&je([])}),()=>{x=!1}},[]),d.useEffect(()=>{Er&&(i([]),f&&(h(null),mt.current=!1,Ao(e)))},[Er,f,e]),d.useEffect(()=>{const x=Ae.current,j=Xt.current;if(!x||!j)return;const _=()=>{const P=Math.max(48,Math.round(j.getBoundingClientRect().height));x.style.setProperty("--toolbar-h",`${P}px`)};if(_(),"ResizeObserver"in window){const P=new ResizeObserver(_);return P.observe(j),()=>P.disconnect()}return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]),d.useEffect(()=>{try{const x=localStorage.getItem(We.sortKey),j=localStorage.getItem(We.sortDir),_=localStorage.getItem(We.sortSpec),P=localStorage.getItem(We.starFilters),D=localStorage.getItem(We.filterAst),G=localStorage.getItem(We.selectedMetric),ae=localStorage.getItem(We.viewMode),X=localStorage.getItem(We.gridItemSize),Z=localStorage.getItem(We.leftOpen),xe=localStorage.getItem(We.rightOpen),rf=(at=>{if(!at)return null;const Ge=Za(at);return!Ge||typeof Ge!="object"?null:Ge.kind==="builtin"&&(Ge.key==="name"||Ge.key==="added"||Ge.key==="random")&&(Ge.dir==="asc"||Ge.dir==="desc")||Ge.kind==="metric"&&typeof Ge.key=="string"&&Ge.key.length>0&&(Ge.dir==="asc"||Ge.dir==="desc")?Ge:null})(_)??{kind:"builtin",key:x==="name"||x==="added"||x==="random"?x:"added",dir:j==="asc"||j==="desc"?j:"desc"};rf.key==="random"&&I(Date.now());let ka=(at=>{if(!at)return null;const Ge=Za(at);return Cc(Ge)})(D)??{and:[]};if(P){const at=Za(P);if(Array.isArray(at)){const Ge=at.filter(Cy=>[0,1,2,3,4,5].includes(Cy));ka=nu(ka,Ge)}}if(T(at=>({...at,sort:rf,filters:ka,selectedMetric:G||at.selectedMetric})),(ae==="grid"||ae==="adaptive")&&z(ae),X){const at=Number(X);!isNaN(at)&&at>=80&&at<=500&&ie(at)}(Z==="0"||Z==="false")&&ce(!1),(xe==="0"||xe==="false")&&H(!1)}catch{}},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia("(max-width: 900px)"),j=()=>{x.matches&&(ce(!1),H(!1))};return j(),"addEventListener"in x?(x.addEventListener("change",j),()=>x.removeEventListener("change",j)):(x.addListener(j),()=>x.removeListener(j))},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=[1,1.25,1.5,1.75,2,3,4],j=D=>x.reduce((G,ae)=>Math.abs(ae-D)<Math.abs(G-D)?ae:G,x[0]),_=()=>{var lt;const D=window.devicePixelRatio||1,G=j(D),ae=((lt=window.visualViewport)==null?void 0:lt.scale)??1,X=D*ae/G;if(!Number.isFinite(X)){M(null);return}const Z=Math.round(X*100),xe=Math.min(500,Math.max(25,Z));M(xe)};_(),window.addEventListener("resize",_),window.addEventListener("orientationchange",_);const P=window.visualViewport;return P&&P.addEventListener("resize",_),()=>{window.removeEventListener("resize",_),window.removeEventListener("orientationchange",_),P&&P.removeEventListener("resize",_)}},[]),d.useEffect(()=>{try{localStorage.setItem(We.sortKey,E.sort.kind==="builtin"?E.sort.key:"added"),localStorage.setItem(We.sortDir,E.sort.dir),localStorage.setItem(We.sortSpec,JSON.stringify(E.sort));const x=Xh(E.filters);localStorage.setItem(We.starFilters,JSON.stringify(x)),localStorage.setItem(We.filterAst,JSON.stringify(E.filters)),E.selectedMetric?localStorage.setItem(We.selectedMetric,E.selectedMetric):localStorage.removeItem(We.selectedMetric),localStorage.setItem(We.viewMode,Q),localStorage.setItem(We.gridItemSize,String($)),localStorage.setItem(We.leftOpen,B?"1":"0"),localStorage.setItem(We.rightOpen,F?"1":"0")}catch{}},[E,Q,$,B,F]),d.useEffect(()=>{const x=fn.current;if(!x)return;const j=P=>Math.min(500,Math.max(80,P)),_=P=>{P.ctrlKey&&(f||g||(P.preventDefault(),ie(D=>j(D+(P.deltaY<0?20:-20)))))};return x.addEventListener("wheel",_,{passive:!1}),()=>x.removeEventListener("wheel",_)},[f,g]),d.useEffect(()=>{if(f||g)return;const x=fn.current;if(!x)return;const j=X=>Math.min(500,Math.max(80,X));let _=null;const P=X=>{if(X.length<2)return 0;const[Z,xe]=[X[0],X[1]];return Math.hypot(Z.clientX-xe.clientX,Z.clientY-xe.clientY)},D=X=>{if(X.touches.length!==2)return;const Z=P(X.touches);Z&&(_={dist:Z,size:$})},G=X=>{if(!_||X.touches.length!==2)return;const Z=P(X.touches);if(!Z)return;X.preventDefault();const xe=j(_.size*(Z/_.dist));ie(xe)},ae=()=>{_=null};return x.addEventListener("touchstart",D,{passive:!0}),x.addEventListener("touchmove",G,{passive:!1}),x.addEventListener("touchend",ae),x.addEventListener("touchcancel",ae),()=>{x.removeEventListener("touchstart",D),x.removeEventListener("touchmove",G),x.removeEventListener("touchend",ae),x.removeEventListener("touchcancel",ae)}},[f,g,$]),d.useEffect(()=>{if(!f)return;const x=_t.indexOf(f);if(x===-1)return;const j=[_t[x-2],_t[x-1],_t[x+1],_t[x+2]].filter(_=>!!_);for(const _ of j)pe.prefetchFile(_),pe.prefetchThumb(_)},[f,_t]),d.useEffect(()=>{var _;if(!g||Pt.length<2)return;const x=Nr,j=new Set;for(const P of[-2,-1,0,1,2,3]){const D=x+P;D>=0&&D<Pt.length&&j.add(D)}for(const P of j){const D=(_=Pt[P])==null?void 0:_.path;D&&(pe.prefetchFile(D),pe.prefetchThumb(D))}},[g,Pt,Nr]),d.useEffect(()=>{var j;if(!((j=Be==null?void 0:Be.items)!=null&&j.length))return;const x=Be.items.slice(0,5);for(const _ of x)pe.prefetchFile(_.path)},[Be==null?void 0:Be.path,Be==null?void 0:Be.items]);const po=d.useCallback(x=>{h(null),mt.current=!1;const j=an(x);t(j),Yh(j)},[]),py=d.useCallback(async()=>{const x=window.prompt("Save Smart Folder as:","New Smart Folder");if(!x)return;const j=zk(x,fe),_={id:j,name:x,pool:{kind:"folder",path:e},view:JSON.parse(JSON.stringify(E))},P=[...fe.filter(D=>D.id!==j),_];je(P),Y(j);try{await pe.saveViews({version:1,views:P})}catch(D){if(D instanceof Cn&&D.status===403){const G=new Blob([JSON.stringify({version:1,views:P},null,2)],{type:"application/json"});Nc(G,`lenslet-smart-folder-${j}.json`),alert("No-write mode: exported Smart Folder JSON instead of saving.");return}console.error("Failed to save Smart Folder:",D)}},[e,E,fe]);d.useEffect(()=>{if(!W)return;const x=fe.find(P=>P.id===W);if(!x){Y(null);return}const j=x.pool.path===e,_=JSON.stringify(x.view)===JSON.stringify(E);(!j||!_)&&Y(null)},[W,fe,e,E]);const go=d.useCallback(x=>{if(!x)return;const j=document.getElementById(`cell-${encodeURIComponent(x)}`);j==null||j.focus()},[]),gy=d.useCallback(x=>{h(x),mt.current=!0,Yh(x)},[]),Jd=d.useCallback(()=>{h(null),mt.current?(mt.current=!1,window.history.back()):Ao(e),go(re.current)},[go]),vy=d.useCallback(()=>{g||!ri||(s[0]&&(re.current=s[0]),N(0),S(!0),f&&(h(null),mt.current&&(mt.current=!1),Ao(e)),U.current||(window.history.pushState({compare:!0},"",window.location.href),U.current=!0))},[g,ri,s,f,e]),xa=d.useCallback(()=>{S(!1),U.current&&(U.current=!1,window.history.back()),go(re.current??s[0])},[go,s]),yy=d.useCallback(x=>{Pt.length<2||N(j=>{const _=Math.max(0,Pt.length-2);return Math.min(_,Math.max(0,j+x))})},[Pt.length]);d.useEffect(()=>{g&&(ri||xa())},[g,ri,xa]),d.useEffect(()=>{const x=()=>{f&&(mt.current=!1,h(null)),g&&(U.current=!1,S(!1))};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[f,g]),d.useEffect(()=>{const x=Ae.current;if(!x)return;const j=D=>{D.dataTransfer&&Array.from(D.dataTransfer.types).includes("Files")&&(D.preventDefault(),be(!0))},_=D=>{const G=D.relatedTarget;G&&x.contains(G)||be(!1)},P=async D=>{var X,Z;D.preventDefault(),be(!1);const G=Array.from(((X=D.dataTransfer)==null?void 0:X.files)??[]);if(!G.length)return;if(!((((Z=Be==null?void 0:Be.dirs)==null?void 0:Z.length)??0)===0)){alert("Uploads are only allowed into folders without subdirectories.");return}for(const xe of G)try{await pe.uploadFile(e,xe)}catch(lt){console.error(`Failed to upload ${xe.name}:`,lt)}la()};return x.addEventListener("dragover",j),x.addEventListener("dragleave",_),x.addEventListener("drop",P),()=>{x.removeEventListener("dragover",j),x.removeEventListener("dragleave",_),x.removeEventListener("drop",P)}},[e,(nf=Be==null?void 0:Be.dirs)==null?void 0:nf.length,la]),d.useEffect(()=>{const x=()=>O(null),j=_=>{_.key==="Escape"&&O(null)};return window.addEventListener("click",x),window.addEventListener("keydown",j),()=>{window.removeEventListener("click",x),window.removeEventListener("keydown",j)}},[]),d.useEffect(()=>{const x=j=>{if(!Rd(j.target)){if((j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="b"){j.preventDefault(),j.altKey?H(_=>!_):ce(_=>!_);return}if(!(f||g)){if(j.key==="Backspace"||j.key==="Delete")j.preventDefault(),po(Gh(e));else if((j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="a")j.preventDefault(),i(Ke.map(_=>_.path));else if(j.key==="Escape")s.length&&(j.preventDefault(),i([]));else if(j.key==="/"){j.preventDefault();const _=document.querySelector(".toolbar-right .input");_==null||_.focus()}}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,Ke,s,f,g,po]);const xy=B?`${ve}px`:"0px",wy=F?`${ee}px`:"0px",Zd=f??s[0]??null,wa=Zd?_t.indexOf(Zd):-1,Sy=wa>0,ky=wa>=0&&wa<_t.length-1,Sa=d.useCallback(x=>{if(!_t.length)return;const j=f??s[0];if(!j)return;const _=_t.indexOf(j);if(_===-1)return;const P=Math.min(_t.length-1,Math.max(0,_+x)),D=_t[P];!D||D===j||(f&&(h(D),Ao(D)),i([D]))},[_t,f,s]);return a.jsxs("div",{className:"app-shell grid h-full grid-cols-[var(--left)_1fr_var(--right)]",ref:Ae,style:{"--left":xy,"--right":wy},children:[a.jsx(Dw,{rootRef:Xt,onSearch:r,viewerActive:!!f,onBack:Jd,zoomPercent:f?y:void 0,onZoomPercentChange:x=>p(x),currentLabel:my,itemCount:oy,totalCount:ly,sortSpec:E.sort,metricKeys:Vn,onSortChange:hy,sortDisabled:Jt,filterCount:fo,onOpenFilters:fy,starFilters:aa,onToggleStar:dy,onClearStars:mo,onClearFilters:Yd,starCounts:Kv,viewMode:Q,onViewMode:z,gridItemSize:$,onGridItemSize:ie,leftOpen:B,rightOpen:F,onToggleLeft:()=>ce(x=>!x),onToggleRight:()=>H(x=>!x),onPrevImage:()=>Sa(-1),onNextImage:()=>Sa(1),canPrevImage:Sy,canNextImage:ky,searchDisabled:Jt,searchPlaceholder:Jt?"Exit similarity to search":void 0,syncIndicator:{state:ny,presence:ho,syncLabel:Yv,connectionLabel:Gv,lastEditedLabel:Xv,hasEdits:ga,recentTouches:iy}}),B&&a.jsx(Ek,{leftTool:q,onToolChange:he,compareEnabled:ri,compareActive:g,onOpenCompare:vy,views:fe,activeViewId:W,onActivateView:x=>{var _;Y(x.id);const j=Cc((_=x.view)==null?void 0:_.filters)??{and:[]};T({...x.view,filters:j}),po(x.pool.path)},onSaveView:py,current:e,data:Be,onOpenFolder:x=>{Y(null),po(x)},onContextMenu:(x,j)=>{x.preventDefault(),O({x:x.clientX,y:x.clientY,kind:"tree",payload:{path:j}})},items:Qv,filteredItems:Ke,metricKeys:Vn,selectedItems:Uv,selectedMetric:E.selectedMetric,onSelectMetric:x=>T(j=>({...j,selectedMetric:x})),filters:E.filters,onChangeRange:ya,onChangeFilters:ay,onResize:V}),a.jsxs("div",{className:"grid-shell col-start-2 row-start-2 relative overflow-hidden flex flex-col",ref:fn,children:[a.jsx("div",{"aria-live":"polite",className:"sr-only",children:s.length?`${s.length} selected`:""}),a.jsx(Nk,{persistenceEnabled:Ov,recentSummary:sy,onDismissRecent:()=>Tv(!0),onCloseRecent:()=>Rv(va??Date.now()),browserZoomPercent:L}),u&&a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"font-semibold",children:"Similarity mode"}),a.jsxs("span",{className:"text-muted",children:["Embedding: ",u.embedding]}),Kd&&a.jsxs("span",{className:"text-muted",children:["Query: ",Kd]}),qd&&a.jsxs("span",{className:"text-muted",children:["Results: ",qd]}),a.jsxs("span",{className:"text-muted",children:["Top K: ",u.topK]}),u.minScore!=null&&a.jsxs("span",{className:"text-muted",children:["Min score: ",u.minScore]})]}),a.jsx("button",{className:"btn btn-sm",onClick:uy,children:"Exit similarity"})]})}),Gd.length>0&&a.jsx("div",{className:"sticky top-0 z-10 px-3 py-2 bg-panel border-b border-border",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Filters"}),Gd.map(x=>a.jsxs("span",{className:"filter-chip",children:[a.jsx("span",{className:"truncate max-w-[240px]",title:x.label,children:x.label}),a.jsx("button",{className:"filter-chip-remove","aria-label":`Clear filter ${x.label}`,onClick:x.onRemove,children:""})]},x.id)),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:Yd,children:"Clear all"})]})}),!1,a.jsxs("div",{className:"flex-1 min-h-0 relative",children:[a.jsx(T1,{items:Ke,selected:s,restoreToSelectionToken:R,onSelectionChange:i,onOpenViewer:x=>{try{re.current=x}catch{}gy(x),i([x])},highlight:Er?Ad:"",recentlyUpdated:_v,suppressSelectionHighlight:!!f||g,viewMode:Q,targetCellSize:$,onContextMenuItem:(x,j)=>{x.preventDefault();const _=s.length?s:[j];O({x:x.clientX,y:x.clientY,kind:"grid",payload:{paths:_}})},scrollRef:Ie,hideScrollbar:Wd}),Wd&&si&&a.jsx(I1,{items:Ke,metricKey:si,scrollRef:Ie,sortDir:E.sort.dir})]})]}),F&&a.jsx(SS,{path:s[0]??null,selectedPaths:s,items:Ke,sortSpec:E.sort,onResize:de,onStarChanged:(x,j)=>{ht(_=>{const P={..._};for(const D of x)P[D]=j;return P})},onFindSimilar:()=>l(!0),embeddingsAvailable:Av,embeddingsLoading:rs.isLoading}),a.jsx(kS,{open:o,embeddings:$d,rejected:zv,selectedPath:s[0]??null,embeddingsLoading:rs.isLoading,embeddingsError:$v,onClose:()=>l(!1),onSearch:cy}),f&&a.jsx(W1,{path:f,onClose:Jd,onZoomChange:x=>b(Math.round(x)),requestedZoomPercent:m,onZoomRequestConsumed:()=>p(null),onNavigate:Sa}),g&&a.jsx(q1,{aItem:Bv,bItem:Wv,index:Nr,total:Pt.length,canPrev:Hv,canNext:Vv,onNavigate:yy,onClose:xa}),Ce&&a.jsx("div",{className:"toolbar-offset fixed inset-0 left-[var(--left)] right-[var(--right)] bg-accent/10 border-2 border-dashed border-accent text-text flex items-center justify-center text-lg z-overlay pointer-events-none",children:"Drop images to upload"}),pt&&a.jsx(Vk,{ctx:pt,current:e,items:Ke,refetch:la,setCtx:O})]})}function zk(e,t){const n=Ak(e)||"view",r=new Set(t.map(i=>i.id));if(!r.has(n))return n;let s=2;for(;r.has(`${n}-${s}`);)s+=1;return`${n}-${s}`}function Ak(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function iu(e){const t=e.filter(s=>s>0).sort((s,i)=>i-s),n=e.includes(0),r=[...t.map(s=>String(s))];return n&&r.push("None"),r.join(", ")}function $k(e,t){return e&&t?`${e} to ${t}`:e?`from ${e}`:t?`to ${t}`:""}function Uk(e){if(e==="/"||e==="")return"Root";const t=e.split("/").filter(Boolean);return t.length?t.length<=2?`/${t.join("/")}`:`.../${t.slice(-2).join("/")}`:"Root"}function Bk(e,t){return`${km(e)}${km(t)}`}function km(e){const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Wk(e){const t=e.toLowerCase();return t.endsWith(".png")?"image/png":t.endsWith(".webp")?"image/webp":"image/jpeg"}function Hk(e,t){const n=e.split("/").pop()??e;return{path:e,name:n,type:Wk(e),w:0,h:0,size:0,hasThumb:!0,hasMeta:!1,star:t??null}}function Nc(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function Vk({ctx:e,current:t,items:n,refetch:r,setCtx:s}){const i=IS(t),o=ns(),[l,u]=il.useState(!1),[c,f]=il.useState(null),h=()=>new Date().toISOString().replace(/[:.]/g,"-"),g=v=>{const m=p=>v==="/"?!0:p===v||p.startsWith(`${v}/`);o.invalidateQueries({predicate:({queryKey:p})=>{if(!Array.isArray(p)||p[0]!=="folder")return!1;const y=typeof p[1]=="string"?p[1]:"";return m(y)}})},S=v=>{const m=an(v);return m===""?"/":m},w=async()=>{const v=S(e.payload.path||"/");u(!0);try{await pe.refreshFolder(v),g(v),(t===v||t.startsWith(v==="/"?"/":`${v}/`))&&await r(),hc.evictPrefix(v),as.evictPrefix(v)}catch(m){console.error("Failed to refresh folder:",m)}finally{u(!1),s(null)}},N=v=>async()=>{f(v);const m=e.payload.path||t;try{const y=(await pe.getFolder(m,void 0,!0)).items,b=am(y),L=v==="csv"?lm(b):om(b),M=v==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8",E=m==="/"?"root":(m.replace(/^\/+/,"")||"root").replace(/\//g,"_");Nc(new Blob([L],{type:M}),`metadata_${E}_${h()}.${v}`)}catch(p){console.error("Failed to export folder:",p),alert("Failed to export folder. See console for details.")}finally{f(null),s(null)}},R=e.kind==="tree"?[{label:l?"Refreshing":"Refresh",disabled:l,onClick:w},{label:c==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!c||l,onClick:N("csv")},{label:c==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!c||l,onClick:N("json")}]:(()=>{const v=e.payload.paths??[],m=[],p=y=>async()=>{f(y);try{const b=new Set(v),L=n.filter(C=>b.has(C.path)),M=am(L),E=y==="csv"?lm(M):om(M),T=y==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8";Nc(new Blob([E],{type:T}),`metadata_selection_${h()}.${y}`)}finally{f(null),s(null)}};return m.push({label:"Move to trash",disabled:i,onClick:async()=>{if(!i){for(const y of v)try{await pe.moveFile(y,"/_trash_")}catch(b){console.error(`Failed to trash ${y}:`,b)}r(),s(null)}}}),i&&(m.push({label:"Permanent delete",danger:!0,onClick:async()=>{if(confirm(`Delete ${v.length} file(s) permanently? This cannot be undone.`)){try{await pe.deleteFiles(v)}catch(y){console.error("Failed to delete files:",y)}r(),s(null)}}}),m.push({label:"Recover",onClick:async()=>{for(const y of v)try{const L=(await pe.getSidecar(y)).original_position,M=L&&L.split("/").slice(0,-1).join("/")||"/";await pe.moveFile(y,M)}catch(b){console.error(`Failed to recover ${y}:`,b)}r(),s(null)}})),v.length&&(m.push({label:c==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!c,onClick:p("csv")}),m.push({label:c==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!c,onClick:p("json")})),m})();return a.jsx(ak,{x:e.x,y:e.y,items:R})}const Qk=new Sw({defaultOptions:{queries:{staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always"},mutations:{retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),5e3)}}});function Kk(){return a.jsx(kw,{client:Qk,children:a.jsx(Dk,{})})}Qg(document.getElementById("root")).render(a.jsx(Kk,{}));
