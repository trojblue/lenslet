var Dy=Object.defineProperty;var df=e=>{throw TypeError(e)};var zy=(e,t,n)=>t in e?Dy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var bn=(e,t,n)=>zy(e,typeof t!="symbol"?t+"":t,n),Na=(e,t,n)=>t.has(e)||df("Cannot "+n);var S=(e,t,n)=>(Na(e,t,"read from private field"),n?n.call(e):t.get(e)),ne=(e,t,n)=>t.has(e)?df("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),K=(e,t,n,r)=>(Na(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ve=(e,t,n)=>(Na(e,t,"access private method"),n);var xl=(e,t,n,r)=>({set _(s){K(e,t,s,n)},get _(){return S(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Ay(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wm={exports:{}},Uo={},Hm={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rl=Symbol.for("react.element"),$y=Symbol.for("react.portal"),Uy=Symbol.for("react.fragment"),By=Symbol.for("react.strict_mode"),Wy=Symbol.for("react.profiler"),Hy=Symbol.for("react.provider"),Vy=Symbol.for("react.context"),Qy=Symbol.for("react.forward_ref"),Ky=Symbol.for("react.suspense"),qy=Symbol.for("react.memo"),Yy=Symbol.for("react.lazy"),ff=Symbol.iterator;function Gy(e){return e===null||typeof e!="object"?null:(e=ff&&e[ff]||e["@@iterator"],typeof e=="function"?e:null)}var Vm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qm=Object.assign,Km={};function Xs(e,t,n){this.props=e,this.context=t,this.refs=Km,this.updater=n||Vm}Xs.prototype.isReactComponent={};Xs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qm(){}qm.prototype=Xs.prototype;function _c(e,t,n){this.props=e,this.context=t,this.refs=Km,this.updater=n||Vm}var Pc=_c.prototype=new qm;Pc.constructor=_c;Qm(Pc,Xs.prototype);Pc.isPureReactComponent=!0;var hf=Array.isArray,Ym=Object.prototype.hasOwnProperty,Ic={current:null},Gm={key:!0,ref:!0,__self:!0,__source:!0};function Xm(e,t,n){var r,s={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)Ym.call(t,r)&&!Gm.hasOwnProperty(r)&&(s[r]=t[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var u=Array(o),c=0;c<o;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:rl,type:e,key:i,ref:l,props:s,_owner:Ic.current}}function Xy(e,t){return{$$typeof:rl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fc(e){return typeof e=="object"&&e!==null&&e.$$typeof===rl}function Jy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var mf=/\/+/g;function ja(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Jy(""+e.key):t.toString(36)}function Bl(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case rl:case $y:l=!0}}if(l)return l=e,s=s(l),e=r===""?"."+ja(l,0):r,hf(s)?(n="",e!=null&&(n=e.replace(mf,"$&/")+"/"),Bl(s,t,n,"",function(c){return c})):s!=null&&(Fc(s)&&(s=Xy(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(mf,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=r===""?".":r+":",hf(e))for(var o=0;o<e.length;o++){i=e[o];var u=r+ja(i,o);l+=Bl(i,t,n,u,s)}else if(u=Gy(e),typeof u=="function")for(e=u.call(e),o=0;!(i=e.next()).done;)i=i.value,u=r+ja(i,o++),l+=Bl(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function wl(e,t,n){if(e==null)return e;var r=[],s=0;return Bl(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Zy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wt={current:null},Wl={transition:null},e0={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:Wl,ReactCurrentOwner:Ic};function Jm(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:wl,forEach:function(e,t,n){wl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return wl(e,function(){t++}),t},toArray:function(e){return wl(e,function(t){return t})||[]},only:function(e){if(!Fc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=Xs;we.Fragment=Uy;we.Profiler=Wy;we.PureComponent=_c;we.StrictMode=By;we.Suspense=Ky;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e0;we.act=Jm;we.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Qm({},e.props),s=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Ic.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(u in t)Ym.call(t,u)&&!Gm.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&o!==void 0?o[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){o=Array(u);for(var c=0;c<u;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:rl,type:e.type,key:s,ref:i,props:r,_owner:l}};we.createContext=function(e){return e={$$typeof:Vy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Hy,_context:e},e.Consumer=e};we.createElement=Xm;we.createFactory=function(e){var t=Xm.bind(null,e);return t.type=e,t};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:Qy,render:e}};we.isValidElement=Fc;we.lazy=function(e){return{$$typeof:Yy,_payload:{_status:-1,_result:e},_init:Zy}};we.memo=function(e,t){return{$$typeof:qy,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=Wl.transition;Wl.transition={};try{e()}finally{Wl.transition=t}};we.unstable_act=Jm;we.useCallback=function(e,t){return wt.current.useCallback(e,t)};we.useContext=function(e){return wt.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return wt.current.useDeferredValue(e)};we.useEffect=function(e,t){return wt.current.useEffect(e,t)};we.useId=function(){return wt.current.useId()};we.useImperativeHandle=function(e,t,n){return wt.current.useImperativeHandle(e,t,n)};we.useInsertionEffect=function(e,t){return wt.current.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return wt.current.useLayoutEffect(e,t)};we.useMemo=function(e,t){return wt.current.useMemo(e,t)};we.useReducer=function(e,t,n){return wt.current.useReducer(e,t,n)};we.useRef=function(e){return wt.current.useRef(e)};we.useState=function(e){return wt.current.useState(e)};we.useSyncExternalStore=function(e,t,n){return wt.current.useSyncExternalStore(e,t,n)};we.useTransition=function(){return wt.current.useTransition()};we.version="18.3.1";Hm.exports=we;var d=Hm.exports;const ao=Ay(d);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0=d,n0=Symbol.for("react.element"),r0=Symbol.for("react.fragment"),s0=Object.prototype.hasOwnProperty,i0=t0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l0={key:!0,ref:!0,__self:!0,__source:!0};function Zm(e,t,n){var r,s={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)s0.call(t,r)&&!l0.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:n0,type:e,key:i,ref:l,props:s,_owner:i0.current}}Uo.Fragment=r0;Uo.jsx=Zm;Uo.jsxs=Zm;Wm.exports=Uo;var a=Wm.exports,ep={exports:{}},Dt={},tp={exports:{}},np={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,V){var q=I.length;I.push(V);e:for(;0<q;){var fe=q-1>>>1,ue=I[fe];if(0<s(ue,V))I[fe]=V,I[q]=ue,q=fe;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var V=I[0],q=I.pop();if(q!==V){I[0]=q;e:for(var fe=0,ue=I.length,je=ue>>>1;fe<je;){var H=2*(fe+1)-1,Y=I[H],ee=H+1,pe=I[ee];if(0>s(Y,q))ee<ue&&0>s(pe,Y)?(I[fe]=pe,I[ee]=q,fe=ee):(I[fe]=Y,I[H]=q,fe=H);else if(ee<ue&&0>s(pe,q))I[fe]=pe,I[ee]=q,fe=ee;else break e}}return V}function s(I,V){var q=I.sortIndex-V.sortIndex;return q!==0?q:I.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var u=[],c=[],f=1,h=null,g=3,w=!1,k=!1,N=!1,L=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(I){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=I)r(c),V.sortIndex=V.expirationTime,t(u,V);else break;V=n(c)}}function v(I){if(N=!1,p(I),!k)if(n(u)!==null)k=!0,U(C);else{var V=n(c);V!==null&&le(v,V.startTime-I)}}function C(I,V){k=!1,N&&(N=!1,y(b),b=-1),w=!0;var q=g;try{for(p(V),h=n(u);h!==null&&(!(h.expirationTime>V)||I&&!_());){var fe=h.callback;if(typeof fe=="function"){h.callback=null,g=h.priorityLevel;var ue=fe(h.expirationTime<=V);V=e.unstable_now(),typeof ue=="function"?h.callback=ue:h===n(u)&&r(u),p(V)}else r(u);h=n(u)}if(h!==null)var je=!0;else{var H=n(c);H!==null&&le(v,H.startTime-V),je=!1}return je}finally{h=null,g=q,w=!1}}var R=!1,M=null,b=-1,T=5,E=-1;function _(){return!(e.unstable_now()-E<T)}function Q(){if(M!==null){var I=e.unstable_now();E=I;var V=!0;try{V=M(!0,I)}finally{V?F():(R=!1,M=null)}}else R=!1}var F;if(typeof m=="function")F=function(){m(Q)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ie=$.port2;$.port1.onmessage=Q,F=function(){ie.postMessage(null)}}else F=function(){L(Q,0)};function U(I){M=I,R||(R=!0,F())}function le(I,V){b=L(function(){I(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){k||w||(k=!0,U(C))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(I){switch(g){case 1:case 2:case 3:var V=3;break;default:V=g}var q=g;g=V;try{return I()}finally{g=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,V){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var q=g;g=I;try{return V()}finally{g=q}},e.unstable_scheduleCallback=function(I,V,q){var fe=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?fe+q:fe):q=fe,I){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=q+ue,I={id:f++,callback:V,priorityLevel:I,startTime:q,expirationTime:ue,sortIndex:-1},q>fe?(I.sortIndex=q,t(c,I),n(u)===null&&I===n(c)&&(N?(y(b),b=-1):N=!0,le(v,q-fe))):(I.sortIndex=ue,t(u,I),k||w||(k=!0,U(C))),I},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(I){var V=g;return function(){var q=g;g=V;try{return I.apply(this,arguments)}finally{g=q}}}})(np);tp.exports=np;var o0=tp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0=d,Ot=o0;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rp=new Set,Ti={};function ts(e,t){Hs(e,t),Hs(e+"Capture",t)}function Hs(e,t){for(Ti[e]=t,e=0;e<t.length;e++)rp.add(t[e])}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uu=Object.prototype.hasOwnProperty,u0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pf={},gf={};function c0(e){return uu.call(gf,e)?!0:uu.call(pf,e)?!1:u0.test(e)?gf[e]=!0:(pf[e]=!0,!1)}function d0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function f0(e,t,n,r){if(t===null||typeof t>"u"||d0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function St(e,t,n,r,s,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ot[e]=new St(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ot[t]=new St(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ot[e]=new St(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ot[e]=new St(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ot[e]=new St(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ot[e]=new St(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ot[e]=new St(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ot[e]=new St(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ot[e]=new St(e,5,!1,e.toLowerCase(),null,!1,!1)});var Oc=/[\-:]([a-z])/g;function Dc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Oc,Dc);ot[t]=new St(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Oc,Dc);ot[t]=new St(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Oc,Dc);ot[t]=new St(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ot[e]=new St(e,1,!1,e.toLowerCase(),null,!1,!1)});ot.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ot[e]=new St(e,1,!1,e.toLowerCase(),null,!0,!0)});function zc(e,t,n,r){var s=ot.hasOwnProperty(t)?ot[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(f0(t,n,s,r)&&(n=null),r||s===null?c0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Wn=a0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sl=Symbol.for("react.element"),ds=Symbol.for("react.portal"),fs=Symbol.for("react.fragment"),Ac=Symbol.for("react.strict_mode"),cu=Symbol.for("react.profiler"),sp=Symbol.for("react.provider"),ip=Symbol.for("react.context"),$c=Symbol.for("react.forward_ref"),du=Symbol.for("react.suspense"),fu=Symbol.for("react.suspense_list"),Uc=Symbol.for("react.memo"),Yn=Symbol.for("react.lazy"),lp=Symbol.for("react.offscreen"),vf=Symbol.iterator;function li(e){return e===null||typeof e!="object"?null:(e=vf&&e[vf]||e["@@iterator"],typeof e=="function"?e:null)}var De=Object.assign,Ma;function pi(e){if(Ma===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ma=t&&t[1]||""}return`
`+Ma+e}var Ra=!1;function La(e,t){if(!e||Ra)return"";Ra=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),l=s.length-1,o=i.length-1;1<=l&&0<=o&&s[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(s[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||s[l]!==i[o]){var u=`
`+s[l].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=l&&0<=o);break}}}finally{Ra=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?pi(e):""}function h0(e){switch(e.tag){case 5:return pi(e.type);case 16:return pi("Lazy");case 13:return pi("Suspense");case 19:return pi("SuspenseList");case 0:case 2:case 15:return e=La(e.type,!1),e;case 11:return e=La(e.type.render,!1),e;case 1:return e=La(e.type,!0),e;default:return""}}function hu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fs:return"Fragment";case ds:return"Portal";case cu:return"Profiler";case Ac:return"StrictMode";case du:return"Suspense";case fu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ip:return(e.displayName||"Context")+".Consumer";case sp:return(e._context.displayName||"Context")+".Provider";case $c:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Uc:return t=e.displayName||null,t!==null?t:hu(e.type)||"Memo";case Yn:t=e._payload,e=e._init;try{return hu(e(t))}catch{}}return null}function m0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hu(t);case 8:return t===Ac?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function op(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function p0(e){var t=op(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function kl(e){e._valueTracker||(e._valueTracker=p0(e))}function ap(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=op(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function uo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function mu(e,t){var n=t.checked;return De({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function yf(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=xr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function up(e,t){t=t.checked,t!=null&&zc(e,"checked",t,!1)}function pu(e,t){up(e,t);var n=xr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?gu(e,t.type,n):t.hasOwnProperty("defaultValue")&&gu(e,t.type,xr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function xf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function gu(e,t,n){(t!=="number"||uo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var gi=Array.isArray;function Cs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+xr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function vu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return De({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(A(92));if(gi(n)){if(1<n.length)throw Error(A(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:xr(n)}}function cp(e,t){var n=xr(t.value),r=xr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Sf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Cl,fp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Cl=Cl||document.createElement("div"),Cl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Cl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _i(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g0=["Webkit","ms","Moz","O"];Object.keys(Si).forEach(function(e){g0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Si[t]=Si[e]})});function hp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Si.hasOwnProperty(e)&&Si[e]?(""+t).trim():t+"px"}function mp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=hp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var v0=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xu(e,t){if(t){if(v0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function wu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Su=null;function Bc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ku=null,bs=null,Es=null;function kf(e){if(e=ll(e)){if(typeof ku!="function")throw Error(A(280));var t=e.stateNode;t&&(t=Qo(t),ku(e.stateNode,e.type,t))}}function pp(e){bs?Es?Es.push(e):Es=[e]:bs=e}function gp(){if(bs){var e=bs,t=Es;if(Es=bs=null,kf(e),t)for(e=0;e<t.length;e++)kf(t[e])}}function vp(e,t){return e(t)}function yp(){}var Ta=!1;function xp(e,t,n){if(Ta)return e(t,n);Ta=!0;try{return vp(e,t,n)}finally{Ta=!1,(bs!==null||Es!==null)&&(yp(),gp())}}function Pi(e,t){var n=e.stateNode;if(n===null)return null;var r=Qo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(A(231,t,typeof n));return n}var Cu=!1;if(An)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){Cu=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{Cu=!1}function y0(e,t,n,r,s,i,l,o,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var ki=!1,co=null,fo=!1,bu=null,x0={onError:function(e){ki=!0,co=e}};function w0(e,t,n,r,s,i,l,o,u){ki=!1,co=null,y0.apply(x0,arguments)}function S0(e,t,n,r,s,i,l,o,u){if(w0.apply(this,arguments),ki){if(ki){var c=co;ki=!1,co=null}else throw Error(A(198));fo||(fo=!0,bu=c)}}function ns(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function wp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Cf(e){if(ns(e)!==e)throw Error(A(188))}function k0(e){var t=e.alternate;if(!t){if(t=ns(e),t===null)throw Error(A(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Cf(s),e;if(i===r)return Cf(s),t;i=i.sibling}throw Error(A(188))}if(n.return!==r.return)n=s,r=i;else{for(var l=!1,o=s.child;o;){if(o===n){l=!0,n=s,r=i;break}if(o===r){l=!0,r=s,n=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===n){l=!0,n=i,r=s;break}if(o===r){l=!0,r=i,n=s;break}o=o.sibling}if(!l)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?e:t}function Sp(e){return e=k0(e),e!==null?kp(e):null}function kp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=kp(e);if(t!==null)return t;e=e.sibling}return null}var Cp=Ot.unstable_scheduleCallback,bf=Ot.unstable_cancelCallback,C0=Ot.unstable_shouldYield,b0=Ot.unstable_requestPaint,We=Ot.unstable_now,E0=Ot.unstable_getCurrentPriorityLevel,Wc=Ot.unstable_ImmediatePriority,bp=Ot.unstable_UserBlockingPriority,ho=Ot.unstable_NormalPriority,N0=Ot.unstable_LowPriority,Ep=Ot.unstable_IdlePriority,Bo=null,yn=null;function j0(e){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Bo,e,void 0,(e.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:L0,M0=Math.log,R0=Math.LN2;function L0(e){return e>>>=0,e===0?32:31-(M0(e)/R0|0)|0}var bl=64,El=4194304;function vi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var o=l&~s;o!==0?r=vi(o):(i&=l,i!==0&&(r=vi(i)))}else l=n&~s,l!==0?r=vi(l):i!==0&&(r=vi(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-on(t),s=1<<n,r|=e[n],t&=~s;return r}function T0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-on(i),o=1<<l,u=s[l];u===-1?(!(o&n)||o&r)&&(s[l]=T0(o,t)):u<=t&&(e.expiredLanes|=o),i&=~o}}function Eu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Np(){var e=bl;return bl<<=1,!(bl&4194240)&&(bl=64),e}function _a(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function sl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-on(t),e[t]=n}function P0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-on(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Hc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-on(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Re=0;function jp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Mp,Vc,Rp,Lp,Tp,Nu=!1,Nl=[],cr=null,dr=null,fr=null,Ii=new Map,Fi=new Map,Xn=[],I0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ef(e,t){switch(e){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Ii.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fi.delete(t.pointerId)}}function ai(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=ll(t),t!==null&&Vc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function F0(e,t,n,r,s){switch(t){case"focusin":return cr=ai(cr,e,t,n,r,s),!0;case"dragenter":return dr=ai(dr,e,t,n,r,s),!0;case"mouseover":return fr=ai(fr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ii.set(i,ai(Ii.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Fi.set(i,ai(Fi.get(i)||null,e,t,n,r,s)),!0}return!1}function _p(e){var t=Lr(e.target);if(t!==null){var n=ns(t);if(n!==null){if(t=n.tag,t===13){if(t=wp(n),t!==null){e.blockedOn=t,Tp(e.priority,function(){Rp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ju(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Su=r,n.target.dispatchEvent(r),Su=null}else return t=ll(n),t!==null&&Vc(t),e.blockedOn=n,!1;t.shift()}return!0}function Nf(e,t,n){Hl(e)&&n.delete(t)}function O0(){Nu=!1,cr!==null&&Hl(cr)&&(cr=null),dr!==null&&Hl(dr)&&(dr=null),fr!==null&&Hl(fr)&&(fr=null),Ii.forEach(Nf),Fi.forEach(Nf)}function ui(e,t){e.blockedOn===t&&(e.blockedOn=null,Nu||(Nu=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,O0)))}function Oi(e){function t(s){return ui(s,e)}if(0<Nl.length){ui(Nl[0],e);for(var n=1;n<Nl.length;n++){var r=Nl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(cr!==null&&ui(cr,e),dr!==null&&ui(dr,e),fr!==null&&ui(fr,e),Ii.forEach(t),Fi.forEach(t),n=0;n<Xn.length;n++)r=Xn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Xn.length&&(n=Xn[0],n.blockedOn===null);)_p(n),n.blockedOn===null&&Xn.shift()}var Ns=Wn.ReactCurrentBatchConfig,po=!0;function D0(e,t,n,r){var s=Re,i=Ns.transition;Ns.transition=null;try{Re=1,Qc(e,t,n,r)}finally{Re=s,Ns.transition=i}}function z0(e,t,n,r){var s=Re,i=Ns.transition;Ns.transition=null;try{Re=4,Qc(e,t,n,r)}finally{Re=s,Ns.transition=i}}function Qc(e,t,n,r){if(po){var s=ju(e,t,n,r);if(s===null)Ba(e,t,r,go,n),Ef(e,r);else if(F0(s,e,t,n,r))r.stopPropagation();else if(Ef(e,r),t&4&&-1<I0.indexOf(e)){for(;s!==null;){var i=ll(s);if(i!==null&&Mp(i),i=ju(e,t,n,r),i===null&&Ba(e,t,r,go,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ba(e,t,r,null,n)}}var go=null;function ju(e,t,n,r){if(go=null,e=Bc(r),e=Lr(e),e!==null)if(t=ns(e),t===null)e=null;else if(n=t.tag,n===13){if(e=wp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return go=e,null}function Pp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(E0()){case Wc:return 1;case bp:return 4;case ho:case N0:return 16;case Ep:return 536870912;default:return 16}default:return 16}}var ar=null,Kc=null,Vl=null;function Ip(){if(Vl)return Vl;var e,t=Kc,n=t.length,r,s="value"in ar?ar.value:ar.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===s[i-r];r++);return Vl=s.slice(e,1<r?1-r:void 0)}function Ql(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function jl(){return!0}function jf(){return!1}function zt(e){function t(n,r,s,i,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jl:jf,this.isPropagationStopped=jf,this}return De(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),t}var Js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qc=zt(Js),il=De({},Js,{view:0,detail:0}),A0=zt(il),Pa,Ia,ci,Wo=De({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ci&&(ci&&e.type==="mousemove"?(Pa=e.screenX-ci.screenX,Ia=e.screenY-ci.screenY):Ia=Pa=0,ci=e),Pa)},movementY:function(e){return"movementY"in e?e.movementY:Ia}}),Mf=zt(Wo),$0=De({},Wo,{dataTransfer:0}),U0=zt($0),B0=De({},il,{relatedTarget:0}),Fa=zt(B0),W0=De({},Js,{animationName:0,elapsedTime:0,pseudoElement:0}),H0=zt(W0),V0=De({},Js,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Q0=zt(V0),K0=De({},Js,{data:0}),Rf=zt(K0),q0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=G0[e])?!!t[e]:!1}function Yc(){return X0}var J0=De({},il,{key:function(e){if(e.key){var t=q0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ql(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Y0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yc,charCode:function(e){return e.type==="keypress"?Ql(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ql(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Z0=zt(J0),ex=De({},Wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lf=zt(ex),tx=De({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yc}),nx=zt(tx),rx=De({},Js,{propertyName:0,elapsedTime:0,pseudoElement:0}),sx=zt(rx),ix=De({},Wo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),lx=zt(ix),ox=[9,13,27,32],Gc=An&&"CompositionEvent"in window,Ci=null;An&&"documentMode"in document&&(Ci=document.documentMode);var ax=An&&"TextEvent"in window&&!Ci,Fp=An&&(!Gc||Ci&&8<Ci&&11>=Ci),Tf=" ",_f=!1;function Op(e,t){switch(e){case"keyup":return ox.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hs=!1;function ux(e,t){switch(e){case"compositionend":return Dp(t);case"keypress":return t.which!==32?null:(_f=!0,Tf);case"textInput":return e=t.data,e===Tf&&_f?null:e;default:return null}}function cx(e,t){if(hs)return e==="compositionend"||!Gc&&Op(e,t)?(e=Ip(),Vl=Kc=ar=null,hs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fp&&t.locale!=="ko"?null:t.data;default:return null}}var dx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dx[e.type]:t==="textarea"}function zp(e,t,n,r){pp(r),t=vo(t,"onChange"),0<t.length&&(n=new qc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var bi=null,Di=null;function fx(e){Yp(e,0)}function Ho(e){var t=gs(e);if(ap(t))return e}function hx(e,t){if(e==="change")return t}var Ap=!1;if(An){var Oa;if(An){var Da="oninput"in document;if(!Da){var If=document.createElement("div");If.setAttribute("oninput","return;"),Da=typeof If.oninput=="function"}Oa=Da}else Oa=!1;Ap=Oa&&(!document.documentMode||9<document.documentMode)}function Ff(){bi&&(bi.detachEvent("onpropertychange",$p),Di=bi=null)}function $p(e){if(e.propertyName==="value"&&Ho(Di)){var t=[];zp(t,Di,e,Bc(e)),xp(fx,t)}}function mx(e,t,n){e==="focusin"?(Ff(),bi=t,Di=n,bi.attachEvent("onpropertychange",$p)):e==="focusout"&&Ff()}function px(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ho(Di)}function gx(e,t){if(e==="click")return Ho(t)}function vx(e,t){if(e==="input"||e==="change")return Ho(t)}function yx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var un=typeof Object.is=="function"?Object.is:yx;function zi(e,t){if(un(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!uu.call(t,s)||!un(e[s],t[s]))return!1}return!0}function Of(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Df(e,t){var n=Of(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Of(n)}}function Up(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Up(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Bp(){for(var e=window,t=uo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=uo(e.document)}return t}function Xc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function xx(e){var t=Bp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Up(n.ownerDocument.documentElement,n)){if(r!==null&&Xc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Df(n,i);var l=Df(n,r);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var wx=An&&"documentMode"in document&&11>=document.documentMode,ms=null,Mu=null,Ei=null,Ru=!1;function zf(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ru||ms==null||ms!==uo(r)||(r=ms,"selectionStart"in r&&Xc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ei&&zi(Ei,r)||(Ei=r,r=vo(Mu,"onSelect"),0<r.length&&(t=new qc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ms)))}function Ml(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ps={animationend:Ml("Animation","AnimationEnd"),animationiteration:Ml("Animation","AnimationIteration"),animationstart:Ml("Animation","AnimationStart"),transitionend:Ml("Transition","TransitionEnd")},za={},Wp={};An&&(Wp=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function Vo(e){if(za[e])return za[e];if(!ps[e])return e;var t=ps[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Wp)return za[e]=t[n];return e}var Hp=Vo("animationend"),Vp=Vo("animationiteration"),Qp=Vo("animationstart"),Kp=Vo("transitionend"),qp=new Map,Af="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){qp.set(e,t),ts(t,[e])}for(var Aa=0;Aa<Af.length;Aa++){var $a=Af[Aa],Sx=$a.toLowerCase(),kx=$a[0].toUpperCase()+$a.slice(1);Sr(Sx,"on"+kx)}Sr(Hp,"onAnimationEnd");Sr(Vp,"onAnimationIteration");Sr(Qp,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(Kp,"onTransitionEnd");Hs("onMouseEnter",["mouseout","mouseover"]);Hs("onMouseLeave",["mouseout","mouseover"]);Hs("onPointerEnter",["pointerout","pointerover"]);Hs("onPointerLeave",["pointerout","pointerover"]);ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cx=new Set("cancel close invalid load scroll toggle".split(" ").concat(yi));function $f(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,S0(r,t,void 0,e),e.currentTarget=null}function Yp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var o=r[l],u=o.instance,c=o.currentTarget;if(o=o.listener,u!==i&&s.isPropagationStopped())break e;$f(s,o,c),i=u}else for(l=0;l<r.length;l++){if(o=r[l],u=o.instance,c=o.currentTarget,o=o.listener,u!==i&&s.isPropagationStopped())break e;$f(s,o,c),i=u}}}if(fo)throw e=bu,fo=!1,bu=null,e}function _e(e,t){var n=t[Iu];n===void 0&&(n=t[Iu]=new Set);var r=e+"__bubble";n.has(r)||(Gp(t,e,2,!1),n.add(r))}function Ua(e,t,n){var r=0;t&&(r|=4),Gp(n,e,r,t)}var Rl="_reactListening"+Math.random().toString(36).slice(2);function Ai(e){if(!e[Rl]){e[Rl]=!0,rp.forEach(function(n){n!=="selectionchange"&&(Cx.has(n)||Ua(n,!1,e),Ua(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rl]||(t[Rl]=!0,Ua("selectionchange",!1,t))}}function Gp(e,t,n,r){switch(Pp(t)){case 1:var s=D0;break;case 4:s=z0;break;default:s=Qc}n=s.bind(null,t,n,e),s=void 0,!Cu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Ba(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var u=l.tag;if((u===3||u===4)&&(u=l.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;l=l.return}for(;o!==null;){if(l=Lr(o),l===null)return;if(u=l.tag,u===5||u===6){r=i=l;continue e}o=o.parentNode}}r=r.return}xp(function(){var c=i,f=Bc(n),h=[];e:{var g=qp.get(e);if(g!==void 0){var w=qc,k=e;switch(e){case"keypress":if(Ql(n)===0)break e;case"keydown":case"keyup":w=Z0;break;case"focusin":k="focus",w=Fa;break;case"focusout":k="blur",w=Fa;break;case"beforeblur":case"afterblur":w=Fa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Mf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=U0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=nx;break;case Hp:case Vp:case Qp:w=H0;break;case Kp:w=sx;break;case"scroll":w=A0;break;case"wheel":w=lx;break;case"copy":case"cut":case"paste":w=Q0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Lf}var N=(t&4)!==0,L=!N&&e==="scroll",y=N?g!==null?g+"Capture":null:g;N=[];for(var m=c,p;m!==null;){p=m;var v=p.stateNode;if(p.tag===5&&v!==null&&(p=v,y!==null&&(v=Pi(m,y),v!=null&&N.push($i(m,v,p)))),L)break;m=m.return}0<N.length&&(g=new w(g,k,null,n,f),h.push({event:g,listeners:N}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",g&&n!==Su&&(k=n.relatedTarget||n.fromElement)&&(Lr(k)||k[$n]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(k=n.relatedTarget||n.toElement,w=c,k=k?Lr(k):null,k!==null&&(L=ns(k),k!==L||k.tag!==5&&k.tag!==6)&&(k=null)):(w=null,k=c),w!==k)){if(N=Mf,v="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(N=Lf,v="onPointerLeave",y="onPointerEnter",m="pointer"),L=w==null?g:gs(w),p=k==null?g:gs(k),g=new N(v,m+"leave",w,n,f),g.target=L,g.relatedTarget=p,v=null,Lr(f)===c&&(N=new N(y,m+"enter",k,n,f),N.target=p,N.relatedTarget=L,v=N),L=v,w&&k)t:{for(N=w,y=k,m=0,p=N;p;p=ls(p))m++;for(p=0,v=y;v;v=ls(v))p++;for(;0<m-p;)N=ls(N),m--;for(;0<p-m;)y=ls(y),p--;for(;m--;){if(N===y||y!==null&&N===y.alternate)break t;N=ls(N),y=ls(y)}N=null}else N=null;w!==null&&Uf(h,g,w,N,!1),k!==null&&L!==null&&Uf(h,L,k,N,!0)}}e:{if(g=c?gs(c):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var C=hx;else if(Pf(g))if(Ap)C=vx;else{C=px;var R=mx}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(C=gx);if(C&&(C=C(e,c))){zp(h,C,n,f);break e}R&&R(e,g,c),e==="focusout"&&(R=g._wrapperState)&&R.controlled&&g.type==="number"&&gu(g,"number",g.value)}switch(R=c?gs(c):window,e){case"focusin":(Pf(R)||R.contentEditable==="true")&&(ms=R,Mu=c,Ei=null);break;case"focusout":Ei=Mu=ms=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,zf(h,n,f);break;case"selectionchange":if(wx)break;case"keydown":case"keyup":zf(h,n,f)}var M;if(Gc)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else hs?Op(e,n)&&(b="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(Fp&&n.locale!=="ko"&&(hs||b!=="onCompositionStart"?b==="onCompositionEnd"&&hs&&(M=Ip()):(ar=f,Kc="value"in ar?ar.value:ar.textContent,hs=!0)),R=vo(c,b),0<R.length&&(b=new Rf(b,e,null,n,f),h.push({event:b,listeners:R}),M?b.data=M:(M=Dp(n),M!==null&&(b.data=M)))),(M=ax?ux(e,n):cx(e,n))&&(c=vo(c,"onBeforeInput"),0<c.length&&(f=new Rf("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:c}),f.data=M))}Yp(h,t)})}function $i(e,t,n){return{instance:e,listener:t,currentTarget:n}}function vo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Pi(e,n),i!=null&&r.unshift($i(e,i,s)),i=Pi(e,t),i!=null&&r.push($i(e,i,s))),e=e.return}return r}function ls(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Uf(e,t,n,r,s){for(var i=t._reactName,l=[];n!==null&&n!==r;){var o=n,u=o.alternate,c=o.stateNode;if(u!==null&&u===r)break;o.tag===5&&c!==null&&(o=c,s?(u=Pi(n,i),u!=null&&l.unshift($i(n,u,o))):s||(u=Pi(n,i),u!=null&&l.push($i(n,u,o)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var bx=/\r\n?/g,Ex=/\u0000|\uFFFD/g;function Bf(e){return(typeof e=="string"?e:""+e).replace(bx,`
`).replace(Ex,"")}function Ll(e,t,n){if(t=Bf(t),Bf(e)!==t&&n)throw Error(A(425))}function yo(){}var Lu=null,Tu=null;function _u(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pu=typeof setTimeout=="function"?setTimeout:void 0,Nx=typeof clearTimeout=="function"?clearTimeout:void 0,Wf=typeof Promise=="function"?Promise:void 0,jx=typeof queueMicrotask=="function"?queueMicrotask:typeof Wf<"u"?function(e){return Wf.resolve(null).then(e).catch(Mx)}:Pu;function Mx(e){setTimeout(function(){throw e})}function Wa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Oi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Oi(t)}function hr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Hf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Zs=Math.random().toString(36).slice(2),vn="__reactFiber$"+Zs,Ui="__reactProps$"+Zs,$n="__reactContainer$"+Zs,Iu="__reactEvents$"+Zs,Rx="__reactListeners$"+Zs,Lx="__reactHandles$"+Zs;function Lr(e){var t=e[vn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$n]||n[vn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Hf(e);e!==null;){if(n=e[vn])return n;e=Hf(e)}return t}e=n,n=e.parentNode}return null}function ll(e){return e=e[vn]||e[$n],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function Qo(e){return e[Ui]||null}var Fu=[],vs=-1;function kr(e){return{current:e}}function Pe(e){0>vs||(e.current=Fu[vs],Fu[vs]=null,vs--)}function Te(e,t){vs++,Fu[vs]=e.current,e.current=t}var wr={},ht=kr(wr),Mt=kr(!1),qr=wr;function Vs(e,t){var n=e.type.contextTypes;if(!n)return wr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Rt(e){return e=e.childContextTypes,e!=null}function xo(){Pe(Mt),Pe(ht)}function Vf(e,t,n){if(ht.current!==wr)throw Error(A(168));Te(ht,t),Te(Mt,n)}function Xp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(A(108,m0(e)||"Unknown",s));return De({},n,r)}function wo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wr,qr=ht.current,Te(ht,e),Te(Mt,Mt.current),!0}function Qf(e,t,n){var r=e.stateNode;if(!r)throw Error(A(169));n?(e=Xp(e,t,qr),r.__reactInternalMemoizedMergedChildContext=e,Pe(Mt),Pe(ht),Te(ht,e)):Pe(Mt),Te(Mt,n)}var Mn=null,Ko=!1,Ha=!1;function Jp(e){Mn===null?Mn=[e]:Mn.push(e)}function Tx(e){Ko=!0,Jp(e)}function Cr(){if(!Ha&&Mn!==null){Ha=!0;var e=0,t=Re;try{var n=Mn;for(Re=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Mn=null,Ko=!1}catch(s){throw Mn!==null&&(Mn=Mn.slice(e+1)),Cp(Wc,Cr),s}finally{Re=t,Ha=!1}}return null}var ys=[],xs=0,So=null,ko=0,Wt=[],Ht=0,Yr=null,Pn=1,In="";function Mr(e,t){ys[xs++]=ko,ys[xs++]=So,So=e,ko=t}function Zp(e,t,n){Wt[Ht++]=Pn,Wt[Ht++]=In,Wt[Ht++]=Yr,Yr=e;var r=Pn;e=In;var s=32-on(r)-1;r&=~(1<<s),n+=1;var i=32-on(t)+s;if(30<i){var l=s-s%5;i=(r&(1<<l)-1).toString(32),r>>=l,s-=l,Pn=1<<32-on(t)+s|n<<s|r,In=i+e}else Pn=1<<i|n<<s|r,In=e}function Jc(e){e.return!==null&&(Mr(e,1),Zp(e,1,0))}function Zc(e){for(;e===So;)So=ys[--xs],ys[xs]=null,ko=ys[--xs],ys[xs]=null;for(;e===Yr;)Yr=Wt[--Ht],Wt[Ht]=null,In=Wt[--Ht],Wt[Ht]=null,Pn=Wt[--Ht],Wt[Ht]=null}var Ft=null,It=null,Ie=!1,ln=null;function eg(e,t){var n=Qt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Kf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ft=e,It=hr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ft=e,It=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Yr!==null?{id:Pn,overflow:In}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Qt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ft=e,It=null,!0):!1;default:return!1}}function Ou(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Du(e){if(Ie){var t=It;if(t){var n=t;if(!Kf(e,t)){if(Ou(e))throw Error(A(418));t=hr(n.nextSibling);var r=Ft;t&&Kf(e,t)?eg(r,n):(e.flags=e.flags&-4097|2,Ie=!1,Ft=e)}}else{if(Ou(e))throw Error(A(418));e.flags=e.flags&-4097|2,Ie=!1,Ft=e}}}function qf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ft=e}function Tl(e){if(e!==Ft)return!1;if(!Ie)return qf(e),Ie=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_u(e.type,e.memoizedProps)),t&&(t=It)){if(Ou(e))throw tg(),Error(A(418));for(;t;)eg(e,t),t=hr(t.nextSibling)}if(qf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){It=hr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}It=null}}else It=Ft?hr(e.stateNode.nextSibling):null;return!0}function tg(){for(var e=It;e;)e=hr(e.nextSibling)}function Qs(){It=Ft=null,Ie=!1}function ed(e){ln===null?ln=[e]:ln.push(e)}var _x=Wn.ReactCurrentBatchConfig;function di(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=s.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,e))}return e}function _l(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yf(e){var t=e._init;return t(e._payload)}function ng(e){function t(y,m){if(e){var p=y.deletions;p===null?(y.deletions=[m],y.flags|=16):p.push(m)}}function n(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function s(y,m){return y=vr(y,m),y.index=0,y.sibling=null,y}function i(y,m,p){return y.index=p,e?(p=y.alternate,p!==null?(p=p.index,p<m?(y.flags|=2,m):p):(y.flags|=2,m)):(y.flags|=1048576,m)}function l(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,m,p,v){return m===null||m.tag!==6?(m=Xa(p,y.mode,v),m.return=y,m):(m=s(m,p),m.return=y,m)}function u(y,m,p,v){var C=p.type;return C===fs?f(y,m,p.props.children,v,p.key):m!==null&&(m.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Yn&&Yf(C)===m.type)?(v=s(m,p.props),v.ref=di(y,m,p),v.return=y,v):(v=Zl(p.type,p.key,p.props,null,y.mode,v),v.ref=di(y,m,p),v.return=y,v)}function c(y,m,p,v){return m===null||m.tag!==4||m.stateNode.containerInfo!==p.containerInfo||m.stateNode.implementation!==p.implementation?(m=Ja(p,y.mode,v),m.return=y,m):(m=s(m,p.children||[]),m.return=y,m)}function f(y,m,p,v,C){return m===null||m.tag!==7?(m=Kr(p,y.mode,v,C),m.return=y,m):(m=s(m,p),m.return=y,m)}function h(y,m,p){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Xa(""+m,y.mode,p),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Sl:return p=Zl(m.type,m.key,m.props,null,y.mode,p),p.ref=di(y,null,m),p.return=y,p;case ds:return m=Ja(m,y.mode,p),m.return=y,m;case Yn:var v=m._init;return h(y,v(m._payload),p)}if(gi(m)||li(m))return m=Kr(m,y.mode,p,null),m.return=y,m;_l(y,m)}return null}function g(y,m,p,v){var C=m!==null?m.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return C!==null?null:o(y,m,""+p,v);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Sl:return p.key===C?u(y,m,p,v):null;case ds:return p.key===C?c(y,m,p,v):null;case Yn:return C=p._init,g(y,m,C(p._payload),v)}if(gi(p)||li(p))return C!==null?null:f(y,m,p,v,null);_l(y,p)}return null}function w(y,m,p,v,C){if(typeof v=="string"&&v!==""||typeof v=="number")return y=y.get(p)||null,o(m,y,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Sl:return y=y.get(v.key===null?p:v.key)||null,u(m,y,v,C);case ds:return y=y.get(v.key===null?p:v.key)||null,c(m,y,v,C);case Yn:var R=v._init;return w(y,m,p,R(v._payload),C)}if(gi(v)||li(v))return y=y.get(p)||null,f(m,y,v,C,null);_l(m,v)}return null}function k(y,m,p,v){for(var C=null,R=null,M=m,b=m=0,T=null;M!==null&&b<p.length;b++){M.index>b?(T=M,M=null):T=M.sibling;var E=g(y,M,p[b],v);if(E===null){M===null&&(M=T);break}e&&M&&E.alternate===null&&t(y,M),m=i(E,m,b),R===null?C=E:R.sibling=E,R=E,M=T}if(b===p.length)return n(y,M),Ie&&Mr(y,b),C;if(M===null){for(;b<p.length;b++)M=h(y,p[b],v),M!==null&&(m=i(M,m,b),R===null?C=M:R.sibling=M,R=M);return Ie&&Mr(y,b),C}for(M=r(y,M);b<p.length;b++)T=w(M,y,b,p[b],v),T!==null&&(e&&T.alternate!==null&&M.delete(T.key===null?b:T.key),m=i(T,m,b),R===null?C=T:R.sibling=T,R=T);return e&&M.forEach(function(_){return t(y,_)}),Ie&&Mr(y,b),C}function N(y,m,p,v){var C=li(p);if(typeof C!="function")throw Error(A(150));if(p=C.call(p),p==null)throw Error(A(151));for(var R=C=null,M=m,b=m=0,T=null,E=p.next();M!==null&&!E.done;b++,E=p.next()){M.index>b?(T=M,M=null):T=M.sibling;var _=g(y,M,E.value,v);if(_===null){M===null&&(M=T);break}e&&M&&_.alternate===null&&t(y,M),m=i(_,m,b),R===null?C=_:R.sibling=_,R=_,M=T}if(E.done)return n(y,M),Ie&&Mr(y,b),C;if(M===null){for(;!E.done;b++,E=p.next())E=h(y,E.value,v),E!==null&&(m=i(E,m,b),R===null?C=E:R.sibling=E,R=E);return Ie&&Mr(y,b),C}for(M=r(y,M);!E.done;b++,E=p.next())E=w(M,y,b,E.value,v),E!==null&&(e&&E.alternate!==null&&M.delete(E.key===null?b:E.key),m=i(E,m,b),R===null?C=E:R.sibling=E,R=E);return e&&M.forEach(function(Q){return t(y,Q)}),Ie&&Mr(y,b),C}function L(y,m,p,v){if(typeof p=="object"&&p!==null&&p.type===fs&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Sl:e:{for(var C=p.key,R=m;R!==null;){if(R.key===C){if(C=p.type,C===fs){if(R.tag===7){n(y,R.sibling),m=s(R,p.props.children),m.return=y,y=m;break e}}else if(R.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Yn&&Yf(C)===R.type){n(y,R.sibling),m=s(R,p.props),m.ref=di(y,R,p),m.return=y,y=m;break e}n(y,R);break}else t(y,R);R=R.sibling}p.type===fs?(m=Kr(p.props.children,y.mode,v,p.key),m.return=y,y=m):(v=Zl(p.type,p.key,p.props,null,y.mode,v),v.ref=di(y,m,p),v.return=y,y=v)}return l(y);case ds:e:{for(R=p.key;m!==null;){if(m.key===R)if(m.tag===4&&m.stateNode.containerInfo===p.containerInfo&&m.stateNode.implementation===p.implementation){n(y,m.sibling),m=s(m,p.children||[]),m.return=y,y=m;break e}else{n(y,m);break}else t(y,m);m=m.sibling}m=Ja(p,y.mode,v),m.return=y,y=m}return l(y);case Yn:return R=p._init,L(y,m,R(p._payload),v)}if(gi(p))return k(y,m,p,v);if(li(p))return N(y,m,p,v);_l(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,m!==null&&m.tag===6?(n(y,m.sibling),m=s(m,p),m.return=y,y=m):(n(y,m),m=Xa(p,y.mode,v),m.return=y,y=m),l(y)):n(y,m)}return L}var Ks=ng(!0),rg=ng(!1),Co=kr(null),bo=null,ws=null,td=null;function nd(){td=ws=bo=null}function rd(e){var t=Co.current;Pe(Co),e._currentValue=t}function zu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function js(e,t){bo=e,td=ws=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(jt=!0),e.firstContext=null)}function qt(e){var t=e._currentValue;if(td!==e)if(e={context:e,memoizedValue:t,next:null},ws===null){if(bo===null)throw Error(A(308));ws=e,bo.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var Tr=null;function sd(e){Tr===null?Tr=[e]:Tr.push(e)}function sg(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,sd(t)):(n.next=s.next,s.next=n),t.interleaved=n,Un(e,r)}function Un(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Gn=!1;function id(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ig(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Un(e,n)}return s=r.interleaved,s===null?(t.next=t,sd(r)):(t.next=s.next,s.next=t),r.interleaved=t,Un(e,n)}function Kl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Hc(e,n)}}function Gf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Eo(e,t,n,r){var s=e.updateQueue;Gn=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var u=o,c=u.next;u.next=null,l===null?i=c:l.next=c,l=u;var f=e.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==l&&(o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=u))}if(i!==null){var h=s.baseState;l=0,f=c=u=null,o=i;do{var g=o.lane,w=o.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var k=e,N=o;switch(g=t,w=n,N.tag){case 1:if(k=N.payload,typeof k=="function"){h=k.call(w,h,g);break e}h=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=N.payload,g=typeof k=="function"?k.call(w,h,g):k,g==null)break e;h=De({},h,g);break e;case 2:Gn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[o]:g.push(o))}else w={eventTime:w,lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(c=f=w,u=h):f=f.next=w,l|=g;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;g=o,o=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Xr|=l,e.lanes=l,e.memoizedState=h}}function Xf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(A(191,s));s.call(r)}}}var ol={},xn=kr(ol),Bi=kr(ol),Wi=kr(ol);function _r(e){if(e===ol)throw Error(A(174));return e}function ld(e,t){switch(Te(Wi,t),Te(Bi,e),Te(xn,ol),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:yu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=yu(t,e)}Pe(xn),Te(xn,t)}function qs(){Pe(xn),Pe(Bi),Pe(Wi)}function lg(e){_r(Wi.current);var t=_r(xn.current),n=yu(t,e.type);t!==n&&(Te(Bi,e),Te(xn,n))}function od(e){Bi.current===e&&(Pe(xn),Pe(Bi))}var Fe=kr(0);function No(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Va=[];function ad(){for(var e=0;e<Va.length;e++)Va[e]._workInProgressVersionPrimary=null;Va.length=0}var ql=Wn.ReactCurrentDispatcher,Qa=Wn.ReactCurrentBatchConfig,Gr=0,Oe=null,Ye=null,et=null,jo=!1,Ni=!1,Hi=0,Px=0;function ct(){throw Error(A(321))}function ud(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!un(e[n],t[n]))return!1;return!0}function cd(e,t,n,r,s,i){if(Gr=i,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ql.current=e===null||e.memoizedState===null?Dx:zx,e=n(r,s),Ni){i=0;do{if(Ni=!1,Hi=0,25<=i)throw Error(A(301));i+=1,et=Ye=null,t.updateQueue=null,ql.current=Ax,e=n(r,s)}while(Ni)}if(ql.current=Mo,t=Ye!==null&&Ye.next!==null,Gr=0,et=Ye=Oe=null,jo=!1,t)throw Error(A(300));return e}function dd(){var e=Hi!==0;return Hi=0,e}function hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Oe.memoizedState=et=e:et=et.next=e,et}function Yt(){if(Ye===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=et===null?Oe.memoizedState:et.next;if(t!==null)et=t,Ye=e;else{if(e===null)throw Error(A(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},et===null?Oe.memoizedState=et=e:et=et.next=e}return et}function Vi(e,t){return typeof t=="function"?t(e):t}function Ka(e){var t=Yt(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=Ye,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=l=null,u=null,c=i;do{var f=c.lane;if((Gr&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(o=u=h,l=r):u=u.next=h,Oe.lanes|=f,Xr|=f}c=c.next}while(c!==null&&c!==i);u===null?l=r:u.next=o,un(r,t.memoizedState)||(jt=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Oe.lanes|=i,Xr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function qa(e){var t=Yt(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do i=e(i,l.action),l=l.next;while(l!==s);un(i,t.memoizedState)||(jt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function og(){}function ag(e,t){var n=Oe,r=Yt(),s=t(),i=!un(r.memoizedState,s);if(i&&(r.memoizedState=s,jt=!0),r=r.queue,fd(dg.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,Qi(9,cg.bind(null,n,r,s,t),void 0,null),tt===null)throw Error(A(349));Gr&30||ug(n,t,s)}return s}function ug(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function cg(e,t,n,r){t.value=n,t.getSnapshot=r,fg(t)&&hg(e)}function dg(e,t,n){return n(function(){fg(t)&&hg(e)})}function fg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!un(e,n)}catch{return!0}}function hg(e){var t=Un(e,1);t!==null&&an(t,e,1,-1)}function Jf(e){var t=hn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ox.bind(null,Oe,e),[t.memoizedState,e]}function Qi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function mg(){return Yt().memoizedState}function Yl(e,t,n,r){var s=hn();Oe.flags|=e,s.memoizedState=Qi(1|t,n,void 0,r===void 0?null:r)}function qo(e,t,n,r){var s=Yt();r=r===void 0?null:r;var i=void 0;if(Ye!==null){var l=Ye.memoizedState;if(i=l.destroy,r!==null&&ud(r,l.deps)){s.memoizedState=Qi(t,n,i,r);return}}Oe.flags|=e,s.memoizedState=Qi(1|t,n,i,r)}function Zf(e,t){return Yl(8390656,8,e,t)}function fd(e,t){return qo(2048,8,e,t)}function pg(e,t){return qo(4,2,e,t)}function gg(e,t){return qo(4,4,e,t)}function vg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yg(e,t,n){return n=n!=null?n.concat([e]):null,qo(4,4,vg.bind(null,t,e),n)}function hd(){}function xg(e,t){var n=Yt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ud(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function wg(e,t){var n=Yt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ud(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Sg(e,t,n){return Gr&21?(un(n,t)||(n=Np(),Oe.lanes|=n,Xr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,jt=!0),e.memoizedState=n)}function Ix(e,t){var n=Re;Re=n!==0&&4>n?n:4,e(!0);var r=Qa.transition;Qa.transition={};try{e(!1),t()}finally{Re=n,Qa.transition=r}}function kg(){return Yt().memoizedState}function Fx(e,t,n){var r=gr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Cg(e))bg(t,n);else if(n=sg(e,t,n,r),n!==null){var s=xt();an(n,e,r,s),Eg(n,t,r)}}function Ox(e,t,n){var r=gr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cg(e))bg(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,n);if(s.hasEagerState=!0,s.eagerState=o,un(o,l)){var u=t.interleaved;u===null?(s.next=s,sd(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=sg(e,t,s,r),n!==null&&(s=xt(),an(n,e,r,s),Eg(n,t,r))}}function Cg(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function bg(e,t){Ni=jo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Eg(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Hc(e,n)}}var Mo={readContext:qt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},Dx={readContext:qt,useCallback:function(e,t){return hn().memoizedState=[e,t===void 0?null:t],e},useContext:qt,useEffect:Zf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Yl(4194308,4,vg.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yl(4,2,e,t)},useMemo:function(e,t){var n=hn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=hn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Fx.bind(null,Oe,e),[r.memoizedState,e]},useRef:function(e){var t=hn();return e={current:e},t.memoizedState=e},useState:Jf,useDebugValue:hd,useDeferredValue:function(e){return hn().memoizedState=e},useTransition:function(){var e=Jf(!1),t=e[0];return e=Ix.bind(null,e[1]),hn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Oe,s=hn();if(Ie){if(n===void 0)throw Error(A(407));n=n()}else{if(n=t(),tt===null)throw Error(A(349));Gr&30||ug(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Zf(dg.bind(null,r,i,e),[e]),r.flags|=2048,Qi(9,cg.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=hn(),t=tt.identifierPrefix;if(Ie){var n=In,r=Pn;n=(r&~(1<<32-on(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Hi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Px++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},zx={readContext:qt,useCallback:xg,useContext:qt,useEffect:fd,useImperativeHandle:yg,useInsertionEffect:pg,useLayoutEffect:gg,useMemo:wg,useReducer:Ka,useRef:mg,useState:function(){return Ka(Vi)},useDebugValue:hd,useDeferredValue:function(e){var t=Yt();return Sg(t,Ye.memoizedState,e)},useTransition:function(){var e=Ka(Vi)[0],t=Yt().memoizedState;return[e,t]},useMutableSource:og,useSyncExternalStore:ag,useId:kg,unstable_isNewReconciler:!1},Ax={readContext:qt,useCallback:xg,useContext:qt,useEffect:fd,useImperativeHandle:yg,useInsertionEffect:pg,useLayoutEffect:gg,useMemo:wg,useReducer:qa,useRef:mg,useState:function(){return qa(Vi)},useDebugValue:hd,useDeferredValue:function(e){var t=Yt();return Ye===null?t.memoizedState=e:Sg(t,Ye.memoizedState,e)},useTransition:function(){var e=qa(Vi)[0],t=Yt().memoizedState;return[e,t]},useMutableSource:og,useSyncExternalStore:ag,useId:kg,unstable_isNewReconciler:!1};function en(e,t){if(e&&e.defaultProps){t=De({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Au(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:De({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Yo={isMounted:function(e){return(e=e._reactInternals)?ns(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xt(),s=gr(e),i=Fn(r,s);i.payload=t,n!=null&&(i.callback=n),t=mr(e,i,s),t!==null&&(an(t,e,s,r),Kl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xt(),s=gr(e),i=Fn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=mr(e,i,s),t!==null&&(an(t,e,s,r),Kl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xt(),r=gr(e),s=Fn(n,r);s.tag=2,t!=null&&(s.callback=t),t=mr(e,s,r),t!==null&&(an(t,e,r,n),Kl(t,e,r))}};function eh(e,t,n,r,s,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!zi(n,r)||!zi(s,i):!0}function Ng(e,t,n){var r=!1,s=wr,i=t.contextType;return typeof i=="object"&&i!==null?i=qt(i):(s=Rt(t)?qr:ht.current,r=t.contextTypes,i=(r=r!=null)?Vs(e,s):wr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Yo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function th(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Yo.enqueueReplaceState(t,t.state,null)}function $u(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},id(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=qt(i):(i=Rt(t)?qr:ht.current,s.context=Vs(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Au(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Yo.enqueueReplaceState(s,s.state,null),Eo(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ys(e,t){try{var n="",r=t;do n+=h0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Ya(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Uu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var $x=typeof WeakMap=="function"?WeakMap:Map;function jg(e,t,n){n=Fn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Lo||(Lo=!0,Xu=r),Uu(e,t)},n}function Mg(e,t,n){n=Fn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Uu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Uu(e,t),typeof r!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function nh(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new $x;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=ew.bind(null,e,t,n),t.then(e,e))}function rh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sh(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Fn(-1,1),t.tag=2,mr(n,t,1))),n.lanes|=1),e)}var Ux=Wn.ReactCurrentOwner,jt=!1;function vt(e,t,n,r){t.child=e===null?rg(t,null,n,r):Ks(t,e.child,n,r)}function ih(e,t,n,r,s){n=n.render;var i=t.ref;return js(t,s),r=cd(e,t,n,r,i,s),n=dd(),e!==null&&!jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bn(e,t,s)):(Ie&&n&&Jc(t),t.flags|=1,vt(e,t,r,s),t.child)}function lh(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Sd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Rg(e,t,i,r,s)):(e=Zl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:zi,n(l,r)&&e.ref===t.ref)return Bn(e,t,s)}return t.flags|=1,e=vr(i,r),e.ref=t.ref,e.return=t,t.child=e}function Rg(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(zi(i,r)&&e.ref===t.ref)if(jt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(jt=!0);else return t.lanes=e.lanes,Bn(e,t,s)}return Bu(e,t,n,r,s)}function Lg(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(ks,Pt),Pt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Te(ks,Pt),Pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(ks,Pt),Pt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Te(ks,Pt),Pt|=r;return vt(e,t,s,n),t.child}function Tg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Bu(e,t,n,r,s){var i=Rt(n)?qr:ht.current;return i=Vs(t,i),js(t,s),n=cd(e,t,n,r,i,s),r=dd(),e!==null&&!jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bn(e,t,s)):(Ie&&r&&Jc(t),t.flags|=1,vt(e,t,n,s),t.child)}function oh(e,t,n,r,s){if(Rt(n)){var i=!0;wo(t)}else i=!1;if(js(t,s),t.stateNode===null)Gl(e,t),Ng(t,n,r),$u(t,n,r,s),r=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var u=l.context,c=n.contextType;typeof c=="object"&&c!==null?c=qt(c):(c=Rt(n)?qr:ht.current,c=Vs(t,c));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||u!==c)&&th(t,l,r,c),Gn=!1;var g=t.memoizedState;l.state=g,Eo(t,r,l,s),u=t.memoizedState,o!==r||g!==u||Mt.current||Gn?(typeof f=="function"&&(Au(t,n,f,r),u=t.memoizedState),(o=Gn||eh(t,n,o,r,g,u,c))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),l.props=r,l.state=u,l.context=c,r=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,ig(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:en(t.type,o),l.props=c,h=t.pendingProps,g=l.context,u=n.contextType,typeof u=="object"&&u!==null?u=qt(u):(u=Rt(n)?qr:ht.current,u=Vs(t,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||g!==u)&&th(t,l,r,u),Gn=!1,g=t.memoizedState,l.state=g,Eo(t,r,l,s);var k=t.memoizedState;o!==h||g!==k||Mt.current||Gn?(typeof w=="function"&&(Au(t,n,w,r),k=t.memoizedState),(c=Gn||eh(t,n,c,r,g,k,u)||!1)?(f||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,k,u),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,k,u)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),l.props=r,l.state=k,l.context=u,r=c):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Wu(e,t,n,r,i,s)}function Wu(e,t,n,r,s,i){Tg(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return s&&Qf(t,n,!1),Bn(e,t,i);r=t.stateNode,Ux.current=t;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Ks(t,e.child,null,i),t.child=Ks(t,null,o,i)):vt(e,t,o,i),t.memoizedState=r.state,s&&Qf(t,n,!0),t.child}function _g(e){var t=e.stateNode;t.pendingContext?Vf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vf(e,t.context,!1),ld(e,t.containerInfo)}function ah(e,t,n,r,s){return Qs(),ed(s),t.flags|=256,vt(e,t,n,r),t.child}var Hu={dehydrated:null,treeContext:null,retryLane:0};function Vu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Pg(e,t,n){var r=t.pendingProps,s=Fe.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(s&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Te(Fe,s&1),e===null)return Du(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Jo(l,r,0,null),e=Kr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Vu(n),t.memoizedState=Hu,e):md(t,l));if(s=e.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return Bx(e,t,l,r,o,s,n);if(i){i=r.fallback,l=t.mode,s=e.child,o=s.sibling;var u={mode:"hidden",children:r.children};return!(l&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=vr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=vr(o,i):(i=Kr(i,l,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=e.child.memoizedState,l=l===null?Vu(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=Hu,r}return i=e.child,e=i.sibling,r=vr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function md(e,t){return t=Jo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Pl(e,t,n,r){return r!==null&&ed(r),Ks(t,e.child,null,n),e=md(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bx(e,t,n,r,s,i,l){if(n)return t.flags&256?(t.flags&=-257,r=Ya(Error(A(422))),Pl(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Jo({mode:"visible",children:r.children},s,0,null),i=Kr(i,s,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ks(t,e.child,null,l),t.child.memoizedState=Vu(l),t.memoizedState=Hu,i);if(!(t.mode&1))return Pl(e,t,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(A(419)),r=Ya(i,r,void 0),Pl(e,t,l,r)}if(o=(l&e.childLanes)!==0,jt||o){if(r=tt,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Un(e,s),an(r,e,s,-1))}return wd(),r=Ya(Error(A(421))),Pl(e,t,l,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=tw.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,It=hr(s.nextSibling),Ft=t,Ie=!0,ln=null,e!==null&&(Wt[Ht++]=Pn,Wt[Ht++]=In,Wt[Ht++]=Yr,Pn=e.id,In=e.overflow,Yr=t),t=md(t,r.children),t.flags|=4096,t)}function uh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),zu(e.return,t,n)}function Ga(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ig(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(vt(e,t,r.children,n),r=Fe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uh(e,n,t);else if(e.tag===19)uh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Te(Fe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&No(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ga(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&No(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ga(t,!0,n,null,i);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Xr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,n=vr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=vr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Wx(e,t,n){switch(t.tag){case 3:_g(t),Qs();break;case 5:lg(t);break;case 1:Rt(t.type)&&wo(t);break;case 4:ld(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Te(Co,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Te(Fe,Fe.current&1),t.flags|=128,null):n&t.child.childLanes?Pg(e,t,n):(Te(Fe,Fe.current&1),e=Bn(e,t,n),e!==null?e.sibling:null);Te(Fe,Fe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Ig(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Fe,Fe.current),r)break;return null;case 22:case 23:return t.lanes=0,Lg(e,t,n)}return Bn(e,t,n)}var Fg,Qu,Og,Dg;Fg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qu=function(){};Og=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,_r(xn.current);var i=null;switch(n){case"input":s=mu(e,s),r=mu(e,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=vu(e,s),r=vu(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=yo)}xu(n,r);var l;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ti.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(o=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==o&&(u!=null||o!=null))if(c==="style")if(o){for(l in o)!o.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&o[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ti.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&_e("scroll",e),i||o===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Dg=function(e,t,n,r){n!==r&&(t.flags|=4)};function fi(e,t){if(!Ie)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hx(e,t,n){var r=t.pendingProps;switch(Zc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return Rt(t.type)&&xo(),dt(t),null;case 3:return r=t.stateNode,qs(),Pe(Mt),Pe(ht),ad(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Tl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ln!==null&&(ec(ln),ln=null))),Qu(e,t),dt(t),null;case 5:od(t);var s=_r(Wi.current);if(n=t.type,e!==null&&t.stateNode!=null)Og(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(A(166));return dt(t),null}if(e=_r(xn.current),Tl(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[vn]=t,r[Ui]=i,e=(t.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<yi.length;s++)_e(yi[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":yf(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":wf(r,i),_e("invalid",r)}xu(n,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Ll(r.textContent,o,e),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Ll(r.textContent,o,e),s=["children",""+o]):Ti.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&_e("scroll",r)}switch(n){case"input":kl(r),xf(r,i,!0);break;case"textarea":kl(r),Sf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=yo)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[vn]=t,e[Ui]=r,Fg(e,t,!1,!1),t.stateNode=e;e:{switch(l=wu(n,r),n){case"dialog":_e("cancel",e),_e("close",e),s=r;break;case"iframe":case"object":case"embed":_e("load",e),s=r;break;case"video":case"audio":for(s=0;s<yi.length;s++)_e(yi[s],e);s=r;break;case"source":_e("error",e),s=r;break;case"img":case"image":case"link":_e("error",e),_e("load",e),s=r;break;case"details":_e("toggle",e),s=r;break;case"input":yf(e,r),s=mu(e,r),_e("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),_e("invalid",e);break;case"textarea":wf(e,r),s=vu(e,r),_e("invalid",e);break;default:s=r}xu(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var u=o[i];i==="style"?mp(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&fp(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&_i(e,u):typeof u=="number"&&_i(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ti.hasOwnProperty(i)?u!=null&&i==="onScroll"&&_e("scroll",e):u!=null&&zc(e,i,u,l))}switch(n){case"input":kl(e),xf(e,r,!1);break;case"textarea":kl(e),Sf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+xr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Cs(e,!!r.multiple,i,!1):r.defaultValue!=null&&Cs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=yo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dt(t),null;case 6:if(e&&t.stateNode!=null)Dg(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(A(166));if(n=_r(Wi.current),_r(xn.current),Tl(t)){if(r=t.stateNode,n=t.memoizedProps,r[vn]=t,(i=r.nodeValue!==n)&&(e=Ft,e!==null))switch(e.tag){case 3:Ll(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ll(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vn]=t,t.stateNode=r}return dt(t),null;case 13:if(Pe(Fe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ie&&It!==null&&t.mode&1&&!(t.flags&128))tg(),Qs(),t.flags|=98560,i=!1;else if(i=Tl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(A(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(A(317));i[vn]=t}else Qs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dt(t),i=!1}else ln!==null&&(ec(ln),ln=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Fe.current&1?Xe===0&&(Xe=3):wd())),t.updateQueue!==null&&(t.flags|=4),dt(t),null);case 4:return qs(),Qu(e,t),e===null&&Ai(t.stateNode.containerInfo),dt(t),null;case 10:return rd(t.type._context),dt(t),null;case 17:return Rt(t.type)&&xo(),dt(t),null;case 19:if(Pe(Fe),i=t.memoizedState,i===null)return dt(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)fi(i,!1);else{if(Xe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=No(e),l!==null){for(t.flags|=128,fi(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Te(Fe,Fe.current&1|2),t.child}e=e.sibling}i.tail!==null&&We()>Gs&&(t.flags|=128,r=!0,fi(i,!1),t.lanes=4194304)}else{if(!r)if(e=No(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),fi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Ie)return dt(t),null}else 2*We()-i.renderingStartTime>Gs&&n!==1073741824&&(t.flags|=128,r=!0,fi(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=We(),t.sibling=null,n=Fe.current,Te(Fe,r?n&1|2:n&1),t):(dt(t),null);case 22:case 23:return xd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Pt&1073741824&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function Vx(e,t){switch(Zc(t),t.tag){case 1:return Rt(t.type)&&xo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qs(),Pe(Mt),Pe(ht),ad(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return od(t),null;case 13:if(Pe(Fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));Qs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe(Fe),null;case 4:return qs(),null;case 10:return rd(t.type._context),null;case 22:case 23:return xd(),null;case 24:return null;default:return null}}var Il=!1,ft=!1,Qx=typeof WeakSet=="function"?WeakSet:Set,X=null;function Ss(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(e,t,r)}else n.current=null}function Ku(e,t,n){try{n()}catch(r){Ae(e,t,r)}}var ch=!1;function Kx(e,t){if(Lu=po,e=Bp(),Xc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,o=-1,u=-1,c=0,f=0,h=e,g=null;t:for(;;){for(var w;h!==n||s!==0&&h.nodeType!==3||(o=l+s),h!==i||r!==0&&h.nodeType!==3||(u=l+r),h.nodeType===3&&(l+=h.nodeValue.length),(w=h.firstChild)!==null;)g=h,h=w;for(;;){if(h===e)break t;if(g===n&&++c===s&&(o=l),g===i&&++f===r&&(u=l),(w=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=w}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tu={focusedElem:e,selectionRange:n},po=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var N=k.memoizedProps,L=k.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?N:en(t.type,N),L);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(v){Ae(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return k=ch,ch=!1,k}function ji(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ku(t,n,i)}s=s.next}while(s!==r)}}function Go(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function qu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function zg(e){var t=e.alternate;t!==null&&(e.alternate=null,zg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vn],delete t[Ui],delete t[Iu],delete t[Rx],delete t[Lx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ag(e){return e.tag===5||e.tag===3||e.tag===4}function dh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ag(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=yo));else if(r!==4&&(e=e.child,e!==null))for(Yu(e,t,n),e=e.sibling;e!==null;)Yu(e,t,n),e=e.sibling}function Gu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Gu(e,t,n),e=e.sibling;e!==null;)Gu(e,t,n),e=e.sibling}var it=null,sn=!1;function Qn(e,t,n){for(n=n.child;n!==null;)$g(e,t,n),n=n.sibling}function $g(e,t,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Bo,n)}catch{}switch(n.tag){case 5:ft||Ss(n,t);case 6:var r=it,s=sn;it=null,Qn(e,t,n),it=r,sn=s,it!==null&&(sn?(e=it,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):it.removeChild(n.stateNode));break;case 18:it!==null&&(sn?(e=it,n=n.stateNode,e.nodeType===8?Wa(e.parentNode,n):e.nodeType===1&&Wa(e,n),Oi(e)):Wa(it,n.stateNode));break;case 4:r=it,s=sn,it=n.stateNode.containerInfo,sn=!0,Qn(e,t,n),it=r,sn=s;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Ku(n,t,l),s=s.next}while(s!==r)}Qn(e,t,n);break;case 1:if(!ft&&(Ss(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ae(n,t,o)}Qn(e,t,n);break;case 21:Qn(e,t,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,Qn(e,t,n),ft=r):Qn(e,t,n);break;default:Qn(e,t,n)}}function fh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Qx),t.forEach(function(r){var s=nw.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:it=o.stateNode,sn=!1;break e;case 3:it=o.stateNode.containerInfo,sn=!0;break e;case 4:it=o.stateNode.containerInfo,sn=!0;break e}o=o.return}if(it===null)throw Error(A(160));$g(i,l,s),it=null,sn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Ae(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ug(t,e),t=t.sibling}function Ug(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jt(t,e),fn(e),r&4){try{ji(3,e,e.return),Go(3,e)}catch(N){Ae(e,e.return,N)}try{ji(5,e,e.return)}catch(N){Ae(e,e.return,N)}}break;case 1:Jt(t,e),fn(e),r&512&&n!==null&&Ss(n,n.return);break;case 5:if(Jt(t,e),fn(e),r&512&&n!==null&&Ss(n,n.return),e.flags&32){var s=e.stateNode;try{_i(s,"")}catch(N){Ae(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,o=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&up(s,i),wu(o,l);var c=wu(o,i);for(l=0;l<u.length;l+=2){var f=u[l],h=u[l+1];f==="style"?mp(s,h):f==="dangerouslySetInnerHTML"?fp(s,h):f==="children"?_i(s,h):zc(s,f,h,c)}switch(o){case"input":pu(s,i);break;case"textarea":cp(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Cs(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?Cs(s,!!i.multiple,i.defaultValue,!0):Cs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ui]=i}catch(N){Ae(e,e.return,N)}}break;case 6:if(Jt(t,e),fn(e),r&4){if(e.stateNode===null)throw Error(A(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(N){Ae(e,e.return,N)}}break;case 3:if(Jt(t,e),fn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Oi(t.containerInfo)}catch(N){Ae(e,e.return,N)}break;case 4:Jt(t,e),fn(e);break;case 13:Jt(t,e),fn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(vd=We())),r&4&&fh(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(ft=(c=ft)||f,Jt(t,e),ft=c):Jt(t,e),fn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(X=e,f=e.child;f!==null;){for(h=X=f;X!==null;){switch(g=X,w=g.child,g.tag){case 0:case 11:case 14:case 15:ji(4,g,g.return);break;case 1:Ss(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(N){Ae(r,n,N)}}break;case 5:Ss(g,g.return);break;case 22:if(g.memoizedState!==null){mh(h);continue}}w!==null?(w.return=g,X=w):mh(h)}f=f.sibling}e:for(f=null,h=e;;){if(h.tag===5){if(f===null){f=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,u=h.memoizedProps.style,l=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=hp("display",l))}catch(N){Ae(e,e.return,N)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(N){Ae(e,e.return,N)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Jt(t,e),fn(e),r&4&&fh(e);break;case 21:break;default:Jt(t,e),fn(e)}}function fn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ag(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(_i(s,""),r.flags&=-33);var i=dh(e);Gu(e,i,s);break;case 3:case 4:var l=r.stateNode.containerInfo,o=dh(e);Yu(e,o,l);break;default:throw Error(A(161))}}catch(u){Ae(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qx(e,t,n){X=e,Bg(e)}function Bg(e,t,n){for(var r=(e.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||Il;if(!l){var o=s.alternate,u=o!==null&&o.memoizedState!==null||ft;o=Il;var c=ft;if(Il=l,(ft=u)&&!c)for(X=s;X!==null;)l=X,u=l.child,l.tag===22&&l.memoizedState!==null?ph(s):u!==null?(u.return=l,X=u):ph(s);for(;i!==null;)X=i,Bg(i),i=i.sibling;X=s,Il=o,ft=c}hh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):hh(e)}}function hh(e){for(;X!==null;){var t=X;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ft||Go(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ft)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Xf(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Xf(t,l,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Oi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}ft||t.flags&512&&qu(t)}catch(g){Ae(t,t.return,g)}}if(t===e){X=null;break}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}}function mh(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}function ph(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Go(4,t)}catch(u){Ae(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){Ae(t,s,u)}}var i=t.return;try{qu(t)}catch(u){Ae(t,i,u)}break;case 5:var l=t.return;try{qu(t)}catch(u){Ae(t,l,u)}}}catch(u){Ae(t,t.return,u)}if(t===e){X=null;break}var o=t.sibling;if(o!==null){o.return=t.return,X=o;break}X=t.return}}var Yx=Math.ceil,Ro=Wn.ReactCurrentDispatcher,pd=Wn.ReactCurrentOwner,Kt=Wn.ReactCurrentBatchConfig,Ce=0,tt=null,Ke=null,lt=0,Pt=0,ks=kr(0),Xe=0,Ki=null,Xr=0,Xo=0,gd=0,Mi=null,Nt=null,vd=0,Gs=1/0,jn=null,Lo=!1,Xu=null,pr=null,Fl=!1,ur=null,To=0,Ri=0,Ju=null,Xl=-1,Jl=0;function xt(){return Ce&6?We():Xl!==-1?Xl:Xl=We()}function gr(e){return e.mode&1?Ce&2&&lt!==0?lt&-lt:_x.transition!==null?(Jl===0&&(Jl=Np()),Jl):(e=Re,e!==0||(e=window.event,e=e===void 0?16:Pp(e.type)),e):1}function an(e,t,n,r){if(50<Ri)throw Ri=0,Ju=null,Error(A(185));sl(e,n,r),(!(Ce&2)||e!==tt)&&(e===tt&&(!(Ce&2)&&(Xo|=n),Xe===4&&Jn(e,lt)),Lt(e,r),n===1&&Ce===0&&!(t.mode&1)&&(Gs=We()+500,Ko&&Cr()))}function Lt(e,t){var n=e.callbackNode;_0(e,t);var r=mo(e,e===tt?lt:0);if(r===0)n!==null&&bf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&bf(n),t===1)e.tag===0?Tx(gh.bind(null,e)):Jp(gh.bind(null,e)),jx(function(){!(Ce&6)&&Cr()}),n=null;else{switch(jp(r)){case 1:n=Wc;break;case 4:n=bp;break;case 16:n=ho;break;case 536870912:n=Ep;break;default:n=ho}n=Gg(n,Wg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Wg(e,t){if(Xl=-1,Jl=0,Ce&6)throw Error(A(327));var n=e.callbackNode;if(Ms()&&e.callbackNode!==n)return null;var r=mo(e,e===tt?lt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=_o(e,r);else{t=r;var s=Ce;Ce|=2;var i=Vg();(tt!==e||lt!==t)&&(jn=null,Gs=We()+500,Qr(e,t));do try{Jx();break}catch(o){Hg(e,o)}while(!0);nd(),Ro.current=i,Ce=s,Ke!==null?t=0:(tt=null,lt=0,t=Xe)}if(t!==0){if(t===2&&(s=Eu(e),s!==0&&(r=s,t=Zu(e,s))),t===1)throw n=Ki,Qr(e,0),Jn(e,r),Lt(e,We()),n;if(t===6)Jn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Gx(s)&&(t=_o(e,r),t===2&&(i=Eu(e),i!==0&&(r=i,t=Zu(e,i))),t===1))throw n=Ki,Qr(e,0),Jn(e,r),Lt(e,We()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(A(345));case 2:Rr(e,Nt,jn);break;case 3:if(Jn(e,r),(r&130023424)===r&&(t=vd+500-We(),10<t)){if(mo(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){xt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Pu(Rr.bind(null,e,Nt,jn),t);break}Rr(e,Nt,jn);break;case 4:if(Jn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var l=31-on(r);i=1<<l,l=t[l],l>s&&(s=l),r&=~i}if(r=s,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Yx(r/1960))-r,10<r){e.timeoutHandle=Pu(Rr.bind(null,e,Nt,jn),r);break}Rr(e,Nt,jn);break;case 5:Rr(e,Nt,jn);break;default:throw Error(A(329))}}}return Lt(e,We()),e.callbackNode===n?Wg.bind(null,e):null}function Zu(e,t){var n=Mi;return e.current.memoizedState.isDehydrated&&(Qr(e,t).flags|=256),e=_o(e,t),e!==2&&(t=Nt,Nt=n,t!==null&&ec(t)),e}function ec(e){Nt===null?Nt=e:Nt.push.apply(Nt,e)}function Gx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!un(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jn(e,t){for(t&=~gd,t&=~Xo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-on(t),r=1<<n;e[n]=-1,t&=~r}}function gh(e){if(Ce&6)throw Error(A(327));Ms();var t=mo(e,0);if(!(t&1))return Lt(e,We()),null;var n=_o(e,t);if(e.tag!==0&&n===2){var r=Eu(e);r!==0&&(t=r,n=Zu(e,r))}if(n===1)throw n=Ki,Qr(e,0),Jn(e,t),Lt(e,We()),n;if(n===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rr(e,Nt,jn),Lt(e,We()),null}function yd(e,t){var n=Ce;Ce|=1;try{return e(t)}finally{Ce=n,Ce===0&&(Gs=We()+500,Ko&&Cr())}}function Jr(e){ur!==null&&ur.tag===0&&!(Ce&6)&&Ms();var t=Ce;Ce|=1;var n=Kt.transition,r=Re;try{if(Kt.transition=null,Re=1,e)return e()}finally{Re=r,Kt.transition=n,Ce=t,!(Ce&6)&&Cr()}}function xd(){Pt=ks.current,Pe(ks)}function Qr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Nx(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(Zc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xo();break;case 3:qs(),Pe(Mt),Pe(ht),ad();break;case 5:od(r);break;case 4:qs();break;case 13:Pe(Fe);break;case 19:Pe(Fe);break;case 10:rd(r.type._context);break;case 22:case 23:xd()}n=n.return}if(tt=e,Ke=e=vr(e.current,null),lt=Pt=t,Xe=0,Ki=null,gd=Xo=Xr=0,Nt=Mi=null,Tr!==null){for(t=0;t<Tr.length;t++)if(n=Tr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=s,r.next=l}n.pending=r}Tr=null}return e}function Hg(e,t){do{var n=Ke;try{if(nd(),ql.current=Mo,jo){for(var r=Oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}jo=!1}if(Gr=0,et=Ye=Oe=null,Ni=!1,Hi=0,pd.current=null,n===null||n.return===null){Xe=1,Ki=t,Ke=null;break}e:{var i=e,l=n.return,o=n,u=t;if(t=lt,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=o,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=rh(l);if(w!==null){w.flags&=-257,sh(w,l,o,i,t),w.mode&1&&nh(i,c,t),t=w,u=c;var k=t.updateQueue;if(k===null){var N=new Set;N.add(u),t.updateQueue=N}else k.add(u);break e}else{if(!(t&1)){nh(i,c,t),wd();break e}u=Error(A(426))}}else if(Ie&&o.mode&1){var L=rh(l);if(L!==null){!(L.flags&65536)&&(L.flags|=256),sh(L,l,o,i,t),ed(Ys(u,o));break e}}i=u=Ys(u,o),Xe!==4&&(Xe=2),Mi===null?Mi=[i]:Mi.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=jg(i,u,t);Gf(i,y);break e;case 1:o=u;var m=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(pr===null||!pr.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var v=Mg(i,o,t);Gf(i,v);break e}}i=i.return}while(i!==null)}Kg(n)}catch(C){t=C,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function Vg(){var e=Ro.current;return Ro.current=Mo,e===null?Mo:e}function wd(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),tt===null||!(Xr&268435455)&&!(Xo&268435455)||Jn(tt,lt)}function _o(e,t){var n=Ce;Ce|=2;var r=Vg();(tt!==e||lt!==t)&&(jn=null,Qr(e,t));do try{Xx();break}catch(s){Hg(e,s)}while(!0);if(nd(),Ce=n,Ro.current=r,Ke!==null)throw Error(A(261));return tt=null,lt=0,Xe}function Xx(){for(;Ke!==null;)Qg(Ke)}function Jx(){for(;Ke!==null&&!C0();)Qg(Ke)}function Qg(e){var t=Yg(e.alternate,e,Pt);e.memoizedProps=e.pendingProps,t===null?Kg(e):Ke=t,pd.current=null}function Kg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Vx(n,t),n!==null){n.flags&=32767,Ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Xe=6,Ke=null;return}}else if(n=Hx(n,t,Pt),n!==null){Ke=n;return}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);Xe===0&&(Xe=5)}function Rr(e,t,n){var r=Re,s=Kt.transition;try{Kt.transition=null,Re=1,Zx(e,t,n,r)}finally{Kt.transition=s,Re=r}return null}function Zx(e,t,n,r){do Ms();while(ur!==null);if(Ce&6)throw Error(A(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(P0(e,i),e===tt&&(Ke=tt=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fl||(Fl=!0,Gg(ho,function(){return Ms(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Kt.transition,Kt.transition=null;var l=Re;Re=1;var o=Ce;Ce|=4,pd.current=null,Kx(e,n),Ug(n,e),xx(Tu),po=!!Lu,Tu=Lu=null,e.current=n,qx(n),b0(),Ce=o,Re=l,Kt.transition=i}else e.current=n;if(Fl&&(Fl=!1,ur=e,To=s),i=e.pendingLanes,i===0&&(pr=null),j0(n.stateNode),Lt(e,We()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Lo)throw Lo=!1,e=Xu,Xu=null,e;return To&1&&e.tag!==0&&Ms(),i=e.pendingLanes,i&1?e===Ju?Ri++:(Ri=0,Ju=e):Ri=0,Cr(),null}function Ms(){if(ur!==null){var e=jp(To),t=Kt.transition,n=Re;try{if(Kt.transition=null,Re=16>e?16:e,ur===null)var r=!1;else{if(e=ur,ur=null,To=0,Ce&6)throw Error(A(331));var s=Ce;for(Ce|=4,X=e.current;X!==null;){var i=X,l=i.child;if(X.flags&16){var o=i.deletions;if(o!==null){for(var u=0;u<o.length;u++){var c=o[u];for(X=c;X!==null;){var f=X;switch(f.tag){case 0:case 11:case 15:ji(8,f,i)}var h=f.child;if(h!==null)h.return=f,X=h;else for(;X!==null;){f=X;var g=f.sibling,w=f.return;if(zg(f),f===c){X=null;break}if(g!==null){g.return=w,X=g;break}X=w}}}var k=i.alternate;if(k!==null){var N=k.child;if(N!==null){k.child=null;do{var L=N.sibling;N.sibling=null,N=L}while(N!==null)}}X=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,X=l;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ji(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,X=y;break e}X=i.return}}var m=e.current;for(X=m;X!==null;){l=X;var p=l.child;if(l.subtreeFlags&2064&&p!==null)p.return=l,X=p;else e:for(l=m;X!==null;){if(o=X,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Go(9,o)}}catch(C){Ae(o,o.return,C)}if(o===l){X=null;break e}var v=o.sibling;if(v!==null){v.return=o.return,X=v;break e}X=o.return}}if(Ce=s,Cr(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Bo,e)}catch{}r=!0}return r}finally{Re=n,Kt.transition=t}}return!1}function vh(e,t,n){t=Ys(n,t),t=jg(e,t,1),e=mr(e,t,1),t=xt(),e!==null&&(sl(e,1,t),Lt(e,t))}function Ae(e,t,n){if(e.tag===3)vh(e,e,n);else for(;t!==null;){if(t.tag===3){vh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pr===null||!pr.has(r))){e=Ys(n,e),e=Mg(t,e,1),t=mr(t,e,1),e=xt(),t!==null&&(sl(t,1,e),Lt(t,e));break}}t=t.return}}function ew(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=xt(),e.pingedLanes|=e.suspendedLanes&n,tt===e&&(lt&n)===n&&(Xe===4||Xe===3&&(lt&130023424)===lt&&500>We()-vd?Qr(e,0):gd|=n),Lt(e,t)}function qg(e,t){t===0&&(e.mode&1?(t=El,El<<=1,!(El&130023424)&&(El=4194304)):t=1);var n=xt();e=Un(e,t),e!==null&&(sl(e,t,n),Lt(e,n))}function tw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),qg(e,n)}function nw(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(t),qg(e,n)}var Yg;Yg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mt.current)jt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return jt=!1,Wx(e,t,n);jt=!!(e.flags&131072)}else jt=!1,Ie&&t.flags&1048576&&Zp(t,ko,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gl(e,t),e=t.pendingProps;var s=Vs(t,ht.current);js(t,n),s=cd(null,t,r,e,s,n);var i=dd();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rt(r)?(i=!0,wo(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,id(t),s.updater=Yo,t.stateNode=s,s._reactInternals=t,$u(t,r,e,n),t=Wu(null,t,r,!0,i,n)):(t.tag=0,Ie&&i&&Jc(t),vt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=sw(r),e=en(r,e),s){case 0:t=Bu(null,t,r,e,n);break e;case 1:t=oh(null,t,r,e,n);break e;case 11:t=ih(null,t,r,e,n);break e;case 14:t=lh(null,t,r,en(r.type,e),n);break e}throw Error(A(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:en(r,s),Bu(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:en(r,s),oh(e,t,r,s,n);case 3:e:{if(_g(t),e===null)throw Error(A(387));r=t.pendingProps,i=t.memoizedState,s=i.element,ig(e,t),Eo(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ys(Error(A(423)),t),t=ah(e,t,r,n,s);break e}else if(r!==s){s=Ys(Error(A(424)),t),t=ah(e,t,r,n,s);break e}else for(It=hr(t.stateNode.containerInfo.firstChild),Ft=t,Ie=!0,ln=null,n=rg(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qs(),r===s){t=Bn(e,t,n);break e}vt(e,t,r,n)}t=t.child}return t;case 5:return lg(t),e===null&&Du(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,l=s.children,_u(r,s)?l=null:i!==null&&_u(r,i)&&(t.flags|=32),Tg(e,t),vt(e,t,l,n),t.child;case 6:return e===null&&Du(t),null;case 13:return Pg(e,t,n);case 4:return ld(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ks(t,null,r,n):vt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:en(r,s),ih(e,t,r,s,n);case 7:return vt(e,t,t.pendingProps,n),t.child;case 8:return vt(e,t,t.pendingProps.children,n),t.child;case 12:return vt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,l=s.value,Te(Co,r._currentValue),r._currentValue=l,i!==null)if(un(i.value,l)){if(i.children===s.children&&!Mt.current){t=Bn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var u=o.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Fn(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),zu(i.return,n,t),o.lanes|=n;break}u=u.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(A(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),zu(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}vt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,js(t,n),s=qt(s),r=r(s),t.flags|=1,vt(e,t,r,n),t.child;case 14:return r=t.type,s=en(r,t.pendingProps),s=en(r.type,s),lh(e,t,r,s,n);case 15:return Rg(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:en(r,s),Gl(e,t),t.tag=1,Rt(r)?(e=!0,wo(t)):e=!1,js(t,n),Ng(t,r,s),$u(t,r,s,n),Wu(null,t,r,!0,e,n);case 19:return Ig(e,t,n);case 22:return Lg(e,t,n)}throw Error(A(156,t.tag))};function Gg(e,t){return Cp(e,t)}function rw(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(e,t,n,r){return new rw(e,t,n,r)}function Sd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sw(e){if(typeof e=="function")return Sd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$c)return 11;if(e===Uc)return 14}return 2}function vr(e,t){var n=e.alternate;return n===null?(n=Qt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Zl(e,t,n,r,s,i){var l=2;if(r=e,typeof e=="function")Sd(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case fs:return Kr(n.children,s,i,t);case Ac:l=8,s|=8;break;case cu:return e=Qt(12,n,t,s|2),e.elementType=cu,e.lanes=i,e;case du:return e=Qt(13,n,t,s),e.elementType=du,e.lanes=i,e;case fu:return e=Qt(19,n,t,s),e.elementType=fu,e.lanes=i,e;case lp:return Jo(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sp:l=10;break e;case ip:l=9;break e;case $c:l=11;break e;case Uc:l=14;break e;case Yn:l=16,r=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=Qt(l,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Kr(e,t,n,r){return e=Qt(7,e,r,t),e.lanes=n,e}function Jo(e,t,n,r){return e=Qt(22,e,r,t),e.elementType=lp,e.lanes=n,e.stateNode={isHidden:!1},e}function Xa(e,t,n){return e=Qt(6,e,null,t),e.lanes=n,e}function Ja(e,t,n){return t=Qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function iw(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_a(0),this.expirationTimes=_a(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_a(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function kd(e,t,n,r,s,i,l,o,u){return e=new iw(e,t,n,o,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Qt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},id(i),e}function lw(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ds,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Xg(e){if(!e)return wr;e=e._reactInternals;e:{if(ns(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var n=e.type;if(Rt(n))return Xp(e,n,t)}return t}function Jg(e,t,n,r,s,i,l,o,u){return e=kd(n,r,!0,e,s,i,l,o,u),e.context=Xg(null),n=e.current,r=xt(),s=gr(n),i=Fn(r,s),i.callback=t??null,mr(n,i,s),e.current.lanes=s,sl(e,s,r),Lt(e,r),e}function Zo(e,t,n,r){var s=t.current,i=xt(),l=gr(s);return n=Xg(n),t.context===null?t.context=n:t.pendingContext=n,t=Fn(i,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=mr(s,t,l),e!==null&&(an(e,s,l,i),Kl(e,s,l)),l}function Po(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Cd(e,t){yh(e,t),(e=e.alternate)&&yh(e,t)}function ow(){return null}var Zg=typeof reportError=="function"?reportError:function(e){console.error(e)};function bd(e){this._internalRoot=e}ea.prototype.render=bd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));Zo(e,t,null,null)};ea.prototype.unmount=bd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jr(function(){Zo(null,e,null,null)}),t[$n]=null}};function ea(e){this._internalRoot=e}ea.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xn.length&&t!==0&&t<Xn[n].priority;n++);Xn.splice(n,0,e),n===0&&_p(e)}};function Ed(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ta(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function xh(){}function aw(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Po(l);i.call(c)}}var l=Jg(t,r,e,0,null,!1,!1,"",xh);return e._reactRootContainer=l,e[$n]=l.current,Ai(e.nodeType===8?e.parentNode:e),Jr(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var c=Po(u);o.call(c)}}var u=kd(e,0,!1,null,null,!1,!1,"",xh);return e._reactRootContainer=u,e[$n]=u.current,Ai(e.nodeType===8?e.parentNode:e),Jr(function(){Zo(t,u,n,r)}),u}function na(e,t,n,r,s){var i=n._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var o=s;s=function(){var u=Po(l);o.call(u)}}Zo(t,l,e,s)}else l=aw(n,t,e,s,r);return Po(l)}Mp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=vi(t.pendingLanes);n!==0&&(Hc(t,n|1),Lt(t,We()),!(Ce&6)&&(Gs=We()+500,Cr()))}break;case 13:Jr(function(){var r=Un(e,1);if(r!==null){var s=xt();an(r,e,1,s)}}),Cd(e,1)}};Vc=function(e){if(e.tag===13){var t=Un(e,134217728);if(t!==null){var n=xt();an(t,e,134217728,n)}Cd(e,134217728)}};Rp=function(e){if(e.tag===13){var t=gr(e),n=Un(e,t);if(n!==null){var r=xt();an(n,e,t,r)}Cd(e,t)}};Lp=function(){return Re};Tp=function(e,t){var n=Re;try{return Re=e,t()}finally{Re=n}};ku=function(e,t,n){switch(t){case"input":if(pu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Qo(r);if(!s)throw Error(A(90));ap(r),pu(r,s)}}}break;case"textarea":cp(e,n);break;case"select":t=n.value,t!=null&&Cs(e,!!n.multiple,t,!1)}};vp=yd;yp=Jr;var uw={usingClientEntryPoint:!1,Events:[ll,gs,Qo,pp,gp,yd]},hi={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cw={bundleType:hi.bundleType,version:hi.version,rendererPackageName:hi.rendererPackageName,rendererConfig:hi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Sp(e),e===null?null:e.stateNode},findFiberByHostInstance:hi.findFiberByHostInstance||ow,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ol.isDisabled&&Ol.supportsFiber)try{Bo=Ol.inject(cw),yn=Ol}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uw;Dt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ed(t))throw Error(A(200));return lw(e,t,null,n)};Dt.createRoot=function(e,t){if(!Ed(e))throw Error(A(299));var n=!1,r="",s=Zg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=kd(e,1,!1,null,null,n,!1,r,s),e[$n]=t.current,Ai(e.nodeType===8?e.parentNode:e),new bd(t)};Dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=Sp(t),e=e===null?null:e.stateNode,e};Dt.flushSync=function(e){return Jr(e)};Dt.hydrate=function(e,t,n){if(!ta(t))throw Error(A(200));return na(null,e,t,!0,n)};Dt.hydrateRoot=function(e,t,n){if(!Ed(e))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",l=Zg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Jg(t,null,e,1,n??null,s,!1,i,l),e[$n]=t.current,Ai(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new ea(t)};Dt.render=function(e,t,n){if(!ta(t))throw Error(A(200));return na(null,e,t,!1,n)};Dt.unmountComponentAtNode=function(e){if(!ta(e))throw Error(A(40));return e._reactRootContainer?(Jr(function(){na(null,null,e,!1,function(){e._reactRootContainer=null,e[$n]=null})}),!0):!1};Dt.unstable_batchedUpdates=yd;Dt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ta(n))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return na(e,t,n,!1,r)};Dt.version="18.3.1-next-f1338f8080-20240426";function ev(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ev)}catch(e){console.error(e)}}ev(),ep.exports=Dt;var Nd=ep.exports,tv,wh=Nd;tv=wh.createRoot,wh.hydrateRoot;var ei=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},dw={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Zn,Tc,_m,fw=(_m=class{constructor(){ne(this,Zn,dw);ne(this,Tc,!1)}setTimeoutProvider(e){K(this,Zn,e)}setTimeout(e,t){return S(this,Zn).setTimeout(e,t)}clearTimeout(e){S(this,Zn).clearTimeout(e)}setInterval(e,t){return S(this,Zn).setInterval(e,t)}clearInterval(e){S(this,Zn).clearInterval(e)}},Zn=new WeakMap,Tc=new WeakMap,_m),Pr=new fw;function hw(e){setTimeout(e,0)}var Zr=typeof window>"u"||"Deno"in globalThis;function yt(){}function mw(e,t){return typeof e=="function"?e(t):e}function tc(e){return typeof e=="number"&&e>=0&&e!==1/0}function nv(e,t){return Math.max(e+(t||0)-Date.now(),0)}function yr(e,t){return typeof e=="function"?e(t):e}function Bt(e,t){return typeof e=="function"?e(t):e}function Sh(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:l,stale:o}=e;if(l){if(r){if(t.queryHash!==jd(l,t.options))return!1}else if(!qi(t.queryKey,l))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||s&&s!==t.state.fetchStatus||i&&!i(t))}function kh(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(es(t.options.mutationKey)!==es(i))return!1}else if(!qi(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function jd(e,t){return((t==null?void 0:t.queryKeyHashFn)||es)(e)}function es(e){return JSON.stringify(e,(t,n)=>nc(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function qi(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>qi(e[n],t[n])):!1}var pw=Object.prototype.hasOwnProperty;function rv(e,t){if(e===t)return e;const n=Ch(e)&&Ch(t);if(!n&&!(nc(e)&&nc(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),l=i.length,o=n?new Array(l):{};let u=0;for(let c=0;c<l;c++){const f=n?c:i[c],h=e[f],g=t[f];if(h===g){o[f]=h,(n?c<s:pw.call(e,f))&&u++;continue}if(h===null||g===null||typeof h!="object"||typeof g!="object"){o[f]=g;continue}const w=rv(h,g);o[f]=w,w===h&&u++}return s===l&&u===s?e:o}function Io(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Ch(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function nc(e){if(!bh(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!bh(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function bh(e){return Object.prototype.toString.call(e)==="[object Object]"}function gw(e){return new Promise(t=>{Pr.setTimeout(t,e)})}function rc(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?rv(e,t):t}function vw(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function yw(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Md=Symbol();function sv(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Md?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function iv(e,t){return typeof e=="function"?e(...t):!!e}function xw(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var Dr,er,_s,Pm,ww=(Pm=class extends ei{constructor(){super();ne(this,Dr);ne(this,er);ne(this,_s);K(this,_s,t=>{if(!Zr&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){S(this,er)||this.setEventListener(S(this,_s))}onUnsubscribe(){var t;this.hasListeners()||((t=S(this,er))==null||t.call(this),K(this,er,void 0))}setEventListener(t){var n;K(this,_s,t),(n=S(this,er))==null||n.call(this),K(this,er,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){S(this,Dr)!==t&&(K(this,Dr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof S(this,Dr)=="boolean"?S(this,Dr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Dr=new WeakMap,er=new WeakMap,_s=new WeakMap,Pm),Rd=new ww;function sc(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var Sw=hw;function kw(){let e=[],t=0,n=o=>{o()},r=o=>{o()},s=Sw;const i=o=>{t?e.push(o):s(()=>{n(o)})},l=()=>{const o=e;e=[],o.length&&s(()=>{r(()=>{o.forEach(u=>{n(u)})})})};return{batch:o=>{let u;t++;try{u=o()}finally{t--,t||l()}return u},batchCalls:o=>(...u)=>{i(()=>{o(...u)})},schedule:i,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{s=o}}}var Ge=kw(),Ps,tr,Is,Im,Cw=(Im=class extends ei{constructor(){super();ne(this,Ps,!0);ne(this,tr);ne(this,Is);K(this,Is,t=>{if(!Zr&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){S(this,tr)||this.setEventListener(S(this,Is))}onUnsubscribe(){var t;this.hasListeners()||((t=S(this,tr))==null||t.call(this),K(this,tr,void 0))}setEventListener(t){var n;K(this,Is,t),(n=S(this,tr))==null||n.call(this),K(this,tr,t(this.setOnline.bind(this)))}setOnline(t){S(this,Ps)!==t&&(K(this,Ps,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return S(this,Ps)}},Ps=new WeakMap,tr=new WeakMap,Is=new WeakMap,Im),Fo=new Cw;function bw(e){return Math.min(1e3*2**e,3e4)}function lv(e){return(e??"online")==="online"?Fo.isOnline():!0}var ic=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function ov(e){let t=!1,n=0,r;const s=sc(),i=()=>s.status!=="pending",l=N=>{var L;if(!i()){const y=new ic(N);g(y),(L=e.onCancel)==null||L.call(e,y)}},o=()=>{t=!0},u=()=>{t=!1},c=()=>Rd.isFocused()&&(e.networkMode==="always"||Fo.isOnline())&&e.canRun(),f=()=>lv(e.networkMode)&&e.canRun(),h=N=>{i()||(r==null||r(),s.resolve(N))},g=N=>{i()||(r==null||r(),s.reject(N))},w=()=>new Promise(N=>{var L;r=y=>{(i()||c())&&N(y)},(L=e.onPause)==null||L.call(e)}).then(()=>{var N;r=void 0,i()||(N=e.onContinue)==null||N.call(e)}),k=()=>{if(i())return;let N;const L=n===0?e.initialPromise:void 0;try{N=L??e.fn()}catch(y){N=Promise.reject(y)}Promise.resolve(N).then(h).catch(y=>{var R;if(i())return;const m=e.retry??(Zr?0:3),p=e.retryDelay??bw,v=typeof p=="function"?p(n,y):p,C=m===!0||typeof m=="number"&&n<m||typeof m=="function"&&m(n,y);if(t||!C){g(y);return}n++,(R=e.onFail)==null||R.call(e,n,y),gw(v).then(()=>c()?void 0:w()).then(()=>{t?g(y):k()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r==null||r(),s),cancelRetry:o,continueRetry:u,canStart:f,start:()=>(f()?k():w().then(k),s)}}var zr,Fm,av=(Fm=class{constructor(){ne(this,zr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),tc(this.gcTime)&&K(this,zr,Pr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Zr?1/0:5*60*1e3))}clearGcTimeout(){S(this,zr)&&(Pr.clearTimeout(S(this,zr)),K(this,zr,void 0))}},zr=new WeakMap,Fm),Ar,Fs,Ut,$r,Ze,Ji,Ur,nn,Nn,Om,Ew=(Om=class extends av{constructor(t){super();ne(this,nn);ne(this,Ar);ne(this,Fs);ne(this,Ut);ne(this,$r);ne(this,Ze);ne(this,Ji);ne(this,Ur);K(this,Ur,!1),K(this,Ji,t.defaultOptions),this.setOptions(t.options),this.observers=[],K(this,$r,t.client),K(this,Ut,S(this,$r).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,K(this,Ar,Nh(this.options)),this.state=t.state??S(this,Ar),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=S(this,Ze))==null?void 0:t.promise}setOptions(t){if(this.options={...S(this,Ji),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Nh(this.options);n.data!==void 0&&(this.setState(Eh(n.data,n.dataUpdatedAt)),K(this,Ar,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&S(this,Ut).remove(this)}setData(t,n){const r=rc(this.state.data,t,this.options);return ve(this,nn,Nn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ve(this,nn,Nn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=S(this,Ze))==null?void 0:r.promise;return(s=S(this,Ze))==null||s.cancel(t),n?n.then(yt).catch(yt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(S(this,Ar))}isActive(){return this.observers.some(t=>Bt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Md||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>yr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!nv(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=S(this,Ze))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=S(this,Ze))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),S(this,Ut).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(S(this,Ze)&&(S(this,Ur)?S(this,Ze).cancel({revert:!0}):S(this,Ze).cancelRetry()),this.scheduleGc()),S(this,Ut).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ve(this,nn,Nn).call(this,{type:"invalidate"})}async fetch(t,n){var u,c,f,h,g,w,k,N,L,y,m,p;if(this.state.fetchStatus!=="idle"&&((u=S(this,Ze))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(S(this,Ze))return S(this,Ze).continueRetry(),S(this,Ze).promise}if(t&&this.setOptions(t),!this.options.queryFn){const v=this.observers.find(C=>C.options.queryFn);v&&this.setOptions(v.options)}const r=new AbortController,s=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(K(this,Ur,!0),r.signal)})},i=()=>{const v=sv(this.options,n),R=(()=>{const M={client:S(this,$r),queryKey:this.queryKey,meta:this.meta};return s(M),M})();return K(this,Ur,!1),this.options.persister?this.options.persister(v,R,this):v(R)},o=(()=>{const v={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:S(this,$r),state:this.state,fetchFn:i};return s(v),v})();(c=this.options.behavior)==null||c.onFetch(o,this),K(this,Fs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=o.fetchOptions)==null?void 0:f.meta))&&ve(this,nn,Nn).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta}),K(this,Ze,ov({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,onCancel:v=>{v instanceof ic&&v.revert&&this.setState({...S(this,Fs),fetchStatus:"idle"}),r.abort()},onFail:(v,C)=>{ve(this,nn,Nn).call(this,{type:"failed",failureCount:v,error:C})},onPause:()=>{ve(this,nn,Nn).call(this,{type:"pause"})},onContinue:()=>{ve(this,nn,Nn).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const v=await S(this,Ze).start();if(v===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(v),(w=(g=S(this,Ut).config).onSuccess)==null||w.call(g,v,this),(N=(k=S(this,Ut).config).onSettled)==null||N.call(k,v,this.state.error,this),v}catch(v){if(v instanceof ic){if(v.silent)return S(this,Ze).promise;if(v.revert){if(this.state.data===void 0)throw v;return this.state.data}}throw ve(this,nn,Nn).call(this,{type:"error",error:v}),(y=(L=S(this,Ut).config).onError)==null||y.call(L,v,this),(p=(m=S(this,Ut).config).onSettled)==null||p.call(m,this.state.data,v,this),v}finally{this.scheduleGc()}}},Ar=new WeakMap,Fs=new WeakMap,Ut=new WeakMap,$r=new WeakMap,Ze=new WeakMap,Ji=new WeakMap,Ur=new WeakMap,nn=new WeakSet,Nn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...uv(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...Eh(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return K(this,Fs,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Ge.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),S(this,Ut).notify({query:this,type:"updated",action:t})})},Om);function uv(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:lv(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Eh(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Nh(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var bt,Se,Zi,pt,Br,Os,Rn,nr,el,Ds,zs,Wr,Hr,rr,As,Ne,xi,lc,oc,ac,uc,cc,dc,fc,cv,Dm,Nw=(Dm=class extends ei{constructor(t,n){super();ne(this,Ne);ne(this,bt);ne(this,Se);ne(this,Zi);ne(this,pt);ne(this,Br);ne(this,Os);ne(this,Rn);ne(this,nr);ne(this,el);ne(this,Ds);ne(this,zs);ne(this,Wr);ne(this,Hr);ne(this,rr);ne(this,As,new Set);this.options=n,K(this,bt,t),K(this,nr,null),K(this,Rn,sc()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(S(this,Se).addObserver(this),jh(S(this,Se),this.options)?ve(this,Ne,xi).call(this):this.updateResult(),ve(this,Ne,uc).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return hc(S(this,Se),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return hc(S(this,Se),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ve(this,Ne,cc).call(this),ve(this,Ne,dc).call(this),S(this,Se).removeObserver(this)}setOptions(t){const n=this.options,r=S(this,Se);if(this.options=S(this,bt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Bt(this.options.enabled,S(this,Se))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ve(this,Ne,fc).call(this),S(this,Se).setOptions(this.options),n._defaulted&&!Io(this.options,n)&&S(this,bt).getQueryCache().notify({type:"observerOptionsUpdated",query:S(this,Se),observer:this});const s=this.hasListeners();s&&Mh(S(this,Se),r,this.options,n)&&ve(this,Ne,xi).call(this),this.updateResult(),s&&(S(this,Se)!==r||Bt(this.options.enabled,S(this,Se))!==Bt(n.enabled,S(this,Se))||yr(this.options.staleTime,S(this,Se))!==yr(n.staleTime,S(this,Se)))&&ve(this,Ne,lc).call(this);const i=ve(this,Ne,oc).call(this);s&&(S(this,Se)!==r||Bt(this.options.enabled,S(this,Se))!==Bt(n.enabled,S(this,Se))||i!==S(this,rr))&&ve(this,Ne,ac).call(this,i)}getOptimisticResult(t){const n=S(this,bt).getQueryCache().build(S(this,bt),t),r=this.createResult(n,t);return Mw(this,r)&&(K(this,pt,r),K(this,Os,this.options),K(this,Br,S(this,Se).state)),r}getCurrentResult(){return S(this,pt)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&S(this,Rn).status==="pending"&&S(this,Rn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){S(this,As).add(t)}getCurrentQuery(){return S(this,Se)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=S(this,bt).defaultQueryOptions(t),r=S(this,bt).getQueryCache().build(S(this,bt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ve(this,Ne,xi).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),S(this,pt)))}createResult(t,n){var T;const r=S(this,Se),s=this.options,i=S(this,pt),l=S(this,Br),o=S(this,Os),c=t!==r?t.state:S(this,Zi),{state:f}=t;let h={...f},g=!1,w;if(n._optimisticResults){const E=this.hasListeners(),_=!E&&jh(t,n),Q=E&&Mh(t,r,n,s);(_||Q)&&(h={...h,...uv(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:k,errorUpdatedAt:N,status:L}=h;w=h.data;let y=!1;if(n.placeholderData!==void 0&&w===void 0&&L==="pending"){let E;i!=null&&i.isPlaceholderData&&n.placeholderData===(o==null?void 0:o.placeholderData)?(E=i.data,y=!0):E=typeof n.placeholderData=="function"?n.placeholderData((T=S(this,zs))==null?void 0:T.state.data,S(this,zs)):n.placeholderData,E!==void 0&&(L="success",w=rc(i==null?void 0:i.data,E,n),g=!0)}if(n.select&&w!==void 0&&!y)if(i&&w===(l==null?void 0:l.data)&&n.select===S(this,el))w=S(this,Ds);else try{K(this,el,n.select),w=n.select(w),w=rc(i==null?void 0:i.data,w,n),K(this,Ds,w),K(this,nr,null)}catch(E){K(this,nr,E)}S(this,nr)&&(k=S(this,nr),w=S(this,Ds),N=Date.now(),L="error");const m=h.fetchStatus==="fetching",p=L==="pending",v=L==="error",C=p&&m,R=w!==void 0,b={status:L,fetchStatus:h.fetchStatus,isPending:p,isSuccess:L==="success",isError:v,isInitialLoading:C,isLoading:C,data:w,dataUpdatedAt:h.dataUpdatedAt,error:k,errorUpdatedAt:N,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:m,isRefetching:m&&!p,isLoadingError:v&&!R,isPaused:h.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:v&&R,isStale:Ld(t,n),refetch:this.refetch,promise:S(this,Rn),isEnabled:Bt(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const E=F=>{b.status==="error"?F.reject(b.error):b.data!==void 0&&F.resolve(b.data)},_=()=>{const F=K(this,Rn,b.promise=sc());E(F)},Q=S(this,Rn);switch(Q.status){case"pending":t.queryHash===r.queryHash&&E(Q);break;case"fulfilled":(b.status==="error"||b.data!==Q.value)&&_();break;case"rejected":(b.status!=="error"||b.error!==Q.reason)&&_();break}}return b}updateResult(){const t=S(this,pt),n=this.createResult(S(this,Se),this.options);if(K(this,Br,S(this,Se).state),K(this,Os,this.options),S(this,Br).data!==void 0&&K(this,zs,S(this,Se)),Io(n,t))return;K(this,pt,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!S(this,As).size)return!0;const l=new Set(i??S(this,As));return this.options.throwOnError&&l.add("error"),Object.keys(S(this,pt)).some(o=>{const u=o;return S(this,pt)[u]!==t[u]&&l.has(u)})};ve(this,Ne,cv).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ve(this,Ne,uc).call(this)}},bt=new WeakMap,Se=new WeakMap,Zi=new WeakMap,pt=new WeakMap,Br=new WeakMap,Os=new WeakMap,Rn=new WeakMap,nr=new WeakMap,el=new WeakMap,Ds=new WeakMap,zs=new WeakMap,Wr=new WeakMap,Hr=new WeakMap,rr=new WeakMap,As=new WeakMap,Ne=new WeakSet,xi=function(t){ve(this,Ne,fc).call(this);let n=S(this,Se).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(yt)),n},lc=function(){ve(this,Ne,cc).call(this);const t=yr(this.options.staleTime,S(this,Se));if(Zr||S(this,pt).isStale||!tc(t))return;const r=nv(S(this,pt).dataUpdatedAt,t)+1;K(this,Wr,Pr.setTimeout(()=>{S(this,pt).isStale||this.updateResult()},r))},oc=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(S(this,Se)):this.options.refetchInterval)??!1},ac=function(t){ve(this,Ne,dc).call(this),K(this,rr,t),!(Zr||Bt(this.options.enabled,S(this,Se))===!1||!tc(S(this,rr))||S(this,rr)===0)&&K(this,Hr,Pr.setInterval(()=>{(this.options.refetchIntervalInBackground||Rd.isFocused())&&ve(this,Ne,xi).call(this)},S(this,rr)))},uc=function(){ve(this,Ne,lc).call(this),ve(this,Ne,ac).call(this,ve(this,Ne,oc).call(this))},cc=function(){S(this,Wr)&&(Pr.clearTimeout(S(this,Wr)),K(this,Wr,void 0))},dc=function(){S(this,Hr)&&(Pr.clearInterval(S(this,Hr)),K(this,Hr,void 0))},fc=function(){const t=S(this,bt).getQueryCache().build(S(this,bt),this.options);if(t===S(this,Se))return;const n=S(this,Se);K(this,Se,t),K(this,Zi,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},cv=function(t){Ge.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(S(this,pt))}),S(this,bt).getQueryCache().notify({query:S(this,Se),type:"observerResultsUpdated"})})},Dm);function jw(e,t){return Bt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function jh(e,t){return jw(e,t)||e.state.data!==void 0&&hc(e,t,t.refetchOnMount)}function hc(e,t,n){if(Bt(t.enabled,e)!==!1&&yr(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Ld(e,t)}return!1}function Mh(e,t,n,r){return(e!==t||Bt(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Ld(e,n)}function Ld(e,t){return Bt(t.enabled,e)!==!1&&e.isStaleByTime(yr(t.staleTime,e))}function Mw(e,t){return!Io(e.getCurrentResult(),t)}function Rh(e){return{onFetch:(t,n)=>{var f,h,g,w,k;const r=t.options,s=(g=(h=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:h.fetchMore)==null?void 0:g.direction,i=((w=t.state.data)==null?void 0:w.pages)||[],l=((k=t.state.data)==null?void 0:k.pageParams)||[];let o={pages:[],pageParams:[]},u=0;const c=async()=>{let N=!1;const L=p=>{xw(p,()=>t.signal,()=>N=!0)},y=sv(t.options,t.fetchOptions),m=async(p,v,C)=>{if(N)return Promise.reject();if(v==null&&p.pages.length)return Promise.resolve(p);const M=(()=>{const _={client:t.client,queryKey:t.queryKey,pageParam:v,direction:C?"backward":"forward",meta:t.options.meta};return L(_),_})(),b=await y(M),{maxPages:T}=t.options,E=C?yw:vw;return{pages:E(p.pages,b,T),pageParams:E(p.pageParams,v,T)}};if(s&&i.length){const p=s==="backward",v=p?Rw:Lh,C={pages:i,pageParams:l},R=v(r,C);o=await m(C,R,p)}else{const p=e??i.length;do{const v=u===0?l[0]??r.initialPageParam:Lh(r,o);if(u>0&&v==null)break;o=await m(o,v),u++}while(u<p)}return o};t.options.persister?t.fetchFn=()=>{var N,L;return(L=(N=t.options).persister)==null?void 0:L.call(N,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function Lh(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Rw(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var tl,mn,gt,Vr,pn,qn,zm,Lw=(zm=class extends av{constructor(t){super();ne(this,pn);ne(this,tl);ne(this,mn);ne(this,gt);ne(this,Vr);K(this,tl,t.client),this.mutationId=t.mutationId,K(this,gt,t.mutationCache),K(this,mn,[]),this.state=t.state||dv(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){S(this,mn).includes(t)||(S(this,mn).push(t),this.clearGcTimeout(),S(this,gt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){K(this,mn,S(this,mn).filter(n=>n!==t)),this.scheduleGc(),S(this,gt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){S(this,mn).length||(this.state.status==="pending"?this.scheduleGc():S(this,gt).remove(this))}continue(){var t;return((t=S(this,Vr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,o,u,c,f,h,g,w,k,N,L,y,m,p,v,C,R,M,b,T;const n=()=>{ve(this,pn,qn).call(this,{type:"continue"})},r={client:S(this,tl),meta:this.options.meta,mutationKey:this.options.mutationKey};K(this,Vr,ov({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(E,_)=>{ve(this,pn,qn).call(this,{type:"failed",failureCount:E,error:_})},onPause:()=>{ve(this,pn,qn).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>S(this,gt).canRun(this)}));const s=this.state.status==="pending",i=!S(this,Vr).canStart();try{if(s)n();else{ve(this,pn,qn).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(l=S(this,gt).config).onMutate)==null?void 0:o.call(l,t,this,r));const _=await((c=(u=this.options).onMutate)==null?void 0:c.call(u,t,r));_!==this.state.context&&ve(this,pn,qn).call(this,{type:"pending",context:_,variables:t,isPaused:i})}const E=await S(this,Vr).start();return await((h=(f=S(this,gt).config).onSuccess)==null?void 0:h.call(f,E,t,this.state.context,this,r)),await((w=(g=this.options).onSuccess)==null?void 0:w.call(g,E,t,this.state.context,r)),await((N=(k=S(this,gt).config).onSettled)==null?void 0:N.call(k,E,null,this.state.variables,this.state.context,this,r)),await((y=(L=this.options).onSettled)==null?void 0:y.call(L,E,null,t,this.state.context,r)),ve(this,pn,qn).call(this,{type:"success",data:E}),E}catch(E){try{await((p=(m=S(this,gt).config).onError)==null?void 0:p.call(m,E,t,this.state.context,this,r))}catch(_){Promise.reject(_)}try{await((C=(v=this.options).onError)==null?void 0:C.call(v,E,t,this.state.context,r))}catch(_){Promise.reject(_)}try{await((M=(R=S(this,gt).config).onSettled)==null?void 0:M.call(R,void 0,E,this.state.variables,this.state.context,this,r))}catch(_){Promise.reject(_)}try{await((T=(b=this.options).onSettled)==null?void 0:T.call(b,void 0,E,t,this.state.context,r))}catch(_){Promise.reject(_)}throw ve(this,pn,qn).call(this,{type:"error",error:E}),E}finally{S(this,gt).runNext(this)}}},tl=new WeakMap,mn=new WeakMap,gt=new WeakMap,Vr=new WeakMap,pn=new WeakSet,qn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ge.batch(()=>{S(this,mn).forEach(r=>{r.onMutationUpdate(t)}),S(this,gt).notify({mutation:this,type:"updated",action:t})})},zm);function dv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ln,rn,nl,Am,Tw=(Am=class extends ei{constructor(t={}){super();ne(this,Ln);ne(this,rn);ne(this,nl);this.config=t,K(this,Ln,new Set),K(this,rn,new Map),K(this,nl,0)}build(t,n,r){const s=new Lw({client:t,mutationCache:this,mutationId:++xl(this,nl)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){S(this,Ln).add(t);const n=Dl(t);if(typeof n=="string"){const r=S(this,rn).get(n);r?r.push(t):S(this,rn).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(S(this,Ln).delete(t)){const n=Dl(t);if(typeof n=="string"){const r=S(this,rn).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&S(this,rn).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Dl(t);if(typeof n=="string"){const r=S(this,rn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Dl(t);if(typeof n=="string"){const s=(r=S(this,rn).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ge.batch(()=>{S(this,Ln).forEach(t=>{this.notify({type:"removed",mutation:t})}),S(this,Ln).clear(),S(this,rn).clear()})}getAll(){return Array.from(S(this,Ln))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>kh(n,r))}findAll(t={}){return this.getAll().filter(n=>kh(t,n))}notify(t){Ge.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Ge.batch(()=>Promise.all(t.map(n=>n.continue().catch(yt))))}},Ln=new WeakMap,rn=new WeakMap,nl=new WeakMap,Am);function Dl(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Tn,sr,Et,_n,zn,eo,mc,$m,_w=($m=class extends ei{constructor(n,r){super();ne(this,zn);ne(this,Tn);ne(this,sr);ne(this,Et);ne(this,_n);K(this,Tn,n),this.setOptions(r),this.bindMethods(),ve(this,zn,eo).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=S(this,Tn).defaultMutationOptions(n),Io(this.options,r)||S(this,Tn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:S(this,Et),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&es(r.mutationKey)!==es(this.options.mutationKey)?this.reset():((s=S(this,Et))==null?void 0:s.state.status)==="pending"&&S(this,Et).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=S(this,Et))==null||n.removeObserver(this)}onMutationUpdate(n){ve(this,zn,eo).call(this),ve(this,zn,mc).call(this,n)}getCurrentResult(){return S(this,sr)}reset(){var n;(n=S(this,Et))==null||n.removeObserver(this),K(this,Et,void 0),ve(this,zn,eo).call(this),ve(this,zn,mc).call(this)}mutate(n,r){var s;return K(this,_n,r),(s=S(this,Et))==null||s.removeObserver(this),K(this,Et,S(this,Tn).getMutationCache().build(S(this,Tn),this.options)),S(this,Et).addObserver(this),S(this,Et).execute(n)}},Tn=new WeakMap,sr=new WeakMap,Et=new WeakMap,_n=new WeakMap,zn=new WeakSet,eo=function(){var r;const n=((r=S(this,Et))==null?void 0:r.state)??dv();K(this,sr,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},mc=function(n){Ge.batch(()=>{var r,s,i,l,o,u,c,f;if(S(this,_n)&&this.hasListeners()){const h=S(this,sr).variables,g=S(this,sr).context,w={client:S(this,Tn),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=S(this,_n)).onSuccess)==null||s.call(r,n.data,h,g,w)}catch(k){Promise.reject(k)}try{(l=(i=S(this,_n)).onSettled)==null||l.call(i,n.data,null,h,g,w)}catch(k){Promise.reject(k)}}else if((n==null?void 0:n.type)==="error"){try{(u=(o=S(this,_n)).onError)==null||u.call(o,n.error,h,g,w)}catch(k){Promise.reject(k)}try{(f=(c=S(this,_n)).onSettled)==null||f.call(c,void 0,n.error,h,g,w)}catch(k){Promise.reject(k)}}}this.listeners.forEach(h=>{h(S(this,sr))})})},$m),gn,Um,Pw=(Um=class extends ei{constructor(t={}){super();ne(this,gn);this.config=t,K(this,gn,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??jd(s,n);let l=this.get(i);return l||(l=new Ew({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(l)),l}add(t){S(this,gn).has(t.queryHash)||(S(this,gn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=S(this,gn).get(t.queryHash);n&&(t.destroy(),n===t&&S(this,gn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ge.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return S(this,gn).get(t)}getAll(){return[...S(this,gn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Sh(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Sh(t,r)):n}notify(t){Ge.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Ge.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ge.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},gn=new WeakMap,Um),ze,ir,lr,$s,Us,or,Bs,Ws,Bm,Iw=(Bm=class{constructor(e={}){ne(this,ze);ne(this,ir);ne(this,lr);ne(this,$s);ne(this,Us);ne(this,or);ne(this,Bs);ne(this,Ws);K(this,ze,e.queryCache||new Pw),K(this,ir,e.mutationCache||new Tw),K(this,lr,e.defaultOptions||{}),K(this,$s,new Map),K(this,Us,new Map),K(this,or,0)}mount(){xl(this,or)._++,S(this,or)===1&&(K(this,Bs,Rd.subscribe(async e=>{e&&(await this.resumePausedMutations(),S(this,ze).onFocus())})),K(this,Ws,Fo.subscribe(async e=>{e&&(await this.resumePausedMutations(),S(this,ze).onOnline())})))}unmount(){var e,t;xl(this,or)._--,S(this,or)===0&&((e=S(this,Bs))==null||e.call(this),K(this,Bs,void 0),(t=S(this,Ws))==null||t.call(this),K(this,Ws,void 0))}isFetching(e){return S(this,ze).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return S(this,ir).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=S(this,ze).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=S(this,ze).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(yr(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return S(this,ze).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=S(this,ze).get(r.queryHash),i=s==null?void 0:s.state.data,l=mw(t,i);if(l!==void 0)return S(this,ze).build(this,r).setData(l,{...n,manual:!0})}setQueriesData(e,t,n){return Ge.batch(()=>S(this,ze).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=S(this,ze).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=S(this,ze);Ge.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=S(this,ze);return Ge.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Ge.batch(()=>S(this,ze).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(yt).catch(yt)}invalidateQueries(e,t={}){return Ge.batch(()=>(S(this,ze).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Ge.batch(()=>S(this,ze).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(yt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(yt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=S(this,ze).build(this,t);return n.isStaleByTime(yr(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(yt).catch(yt)}fetchInfiniteQuery(e){return e.behavior=Rh(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(yt).catch(yt)}ensureInfiniteQueryData(e){return e.behavior=Rh(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Fo.isOnline()?S(this,ir).resumePausedMutations():Promise.resolve()}getQueryCache(){return S(this,ze)}getMutationCache(){return S(this,ir)}getDefaultOptions(){return S(this,lr)}setDefaultOptions(e){K(this,lr,e)}setQueryDefaults(e,t){S(this,$s).set(es(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...S(this,$s).values()],n={};return t.forEach(r=>{qi(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){S(this,Us).set(es(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...S(this,Us).values()],n={};return t.forEach(r=>{qi(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...S(this,lr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=jd(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Md&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...S(this,lr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){S(this,ze).clear(),S(this,ir).clear()}},ze=new WeakMap,ir=new WeakMap,lr=new WeakMap,$s=new WeakMap,Us=new WeakMap,or=new WeakMap,Bs=new WeakMap,Ws=new WeakMap,Bm),fv=d.createContext(void 0),br=e=>{const t=d.useContext(fv);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Fw=({client:e,children:t})=>(d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(fv.Provider,{value:e,children:t})),hv=d.createContext(!1),Ow=()=>d.useContext(hv);hv.Provider;function Dw(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var zw=d.createContext(Dw()),Aw=()=>d.useContext(zw),$w=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Uw=e=>{d.useEffect(()=>{e.clearReset()},[e])},Bw=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||iv(n,[e.error,r])),Ww=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Hw=(e,t)=>e.isLoading&&e.isFetching&&!t,Vw=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Th=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Qw(e,t,n){var h,g,w,k,N;const r=Ow(),s=Aw(),i=br(),l=i.defaultQueryOptions(e);(g=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||g.call(h,l),l._optimisticResults=r?"isRestoring":"optimistic",Ww(l),$w(l,s),Uw(s);const o=!i.getQueryCache().get(l.queryHash),[u]=d.useState(()=>new t(i,l)),c=u.getOptimisticResult(l),f=!r&&e.subscribed!==!1;if(d.useSyncExternalStore(d.useCallback(L=>{const y=f?u.subscribe(Ge.batchCalls(L)):yt;return u.updateResult(),y},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),d.useEffect(()=>{u.setOptions(l)},[l,u]),Vw(l,c))throw Th(l,u,s);if(Bw({result:c,errorResetBoundary:s,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw c.error;if((k=(w=i.getDefaultOptions().queries)==null?void 0:w._experimental_afterQuery)==null||k.call(w,l,c),l.experimental_prefetchInRender&&!Zr&&Hw(c,r)){const L=o?Th(l,u,s):(N=i.getQueryCache().get(l.queryHash))==null?void 0:N.promise;L==null||L.catch(yt).finally(()=>{u.updateResult()})}return l.notifyOnChangeProps?c:u.trackResult(c)}function ra(e,t){return Qw(e,Nw)}function Kw(e,t){const n=br(),[r]=d.useState(()=>new _w(n,e));d.useEffect(()=>{r.setOptions(e)},[r,e]);const s=d.useSyncExternalStore(d.useCallback(l=>r.subscribe(Ge.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=d.useCallback((l,o)=>{r.mutate(l,o).catch(yt)},[r]);if(s.error&&iv(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function _h(e){return e.length>0&&"options"in e[0]}function pc({value:e,onChange:t,options:n,placeholder:r="Select...",trigger:s,triggerClassName:i="",panelClassName:l="",align:o="left",width:u="auto",showChevron:c=!0,title:f,disabled:h=!1,"aria-label":g}){var b;const[w,k]=d.useState(!1),N=d.useRef(null),L=d.useRef(null),m=d.useCallback(()=>{const T=E=>{const _=E.find(Q=>Q.value===e);return _?_.label:null};if(_h(n))for(const E of n){const _=T(E.options);if(_)return _}else{const E=T(n);if(E)return E}return r},[e,n,r])();d.useEffect(()=>{if(!w)return;const T=_=>{N.current&&!N.current.contains(_.target)&&k(!1)},E=_=>{var Q;_.key==="Escape"&&(k(!1),(Q=L.current)==null||Q.focus())};return window.addEventListener("click",T),window.addEventListener("keydown",E),()=>{window.removeEventListener("click",T),window.removeEventListener("keydown",E)}},[w]);const p=T=>{var E;t(T),k(!1),(E=L.current)==null||E.focus()},v=T=>T.map(E=>a.jsxs("button",{className:"dropdown-item","data-active":E.value===e,disabled:E.disabled,onClick:()=>!E.disabled&&p(E.value),role:"menuitem",children:[E.icon&&a.jsx("span",{className:"shrink-0",children:E.icon}),a.jsx("span",{className:"flex-1 truncate",children:E.label}),E.value===e&&a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 text-accent",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})]},E.value)),C=((b=L.current)==null?void 0:b.offsetWidth)??0,R=u==="trigger"?C:u==="auto"?void 0:u,M={...R?{width:R,minWidth:R}:{},...o==="right"?{right:0}:{left:0}};return a.jsxs("div",{ref:N,className:"relative",children:[s?a.jsx("div",{onClick:()=>!h&&k(T=>!T),children:s}):a.jsxs("button",{ref:L,type:"button",className:`dropdown-trigger ${i}`,onClick:()=>k(T=>!T),disabled:h,title:f,"aria-label":g,"aria-haspopup":"listbox","aria-expanded":w,children:[a.jsx("span",{className:"truncate",children:m}),c&&a.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`shrink-0 opacity-60 transition-transform ${w?"rotate-180":""}`,children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),w&&a.jsx("div",{className:`dropdown-panel ${l}`,style:M,role:"listbox","aria-label":g,children:_h(n)?n.map((T,E)=>a.jsxs("div",{children:[T.label&&a.jsx("div",{className:"dropdown-label",children:T.label}),v(T.options),E<n.length-1&&a.jsx("div",{className:"dropdown-divider"})]},T.label||E)):v(n)})]})}const qw={offline:"sync-dot-offline",unstable:"sync-dot-unstable",recent:"sync-dot-recent",editing:"sync-dot-editing",live:"sync-dot-live"};function Yw({state:e,presence:t,syncLabel:n,connectionLabel:r,lastEditedLabel:s,hasEdits:i,recentTouches:l,isNarrow:o}){const[u,c]=d.useState(!1),[f,h]=d.useState(null),g=d.useRef(null),w=d.useRef(null),k=d.useRef(null),N=t?`${t.viewing} viewing  ${t.editing} editing`:"- viewing  - editing",L=t?String(t.viewing):"-",y=d.useCallback(()=>{k.current&&(window.clearTimeout(k.current),k.current=null)},[]),m=d.useCallback((v,C)=>{var R;C&&((R=navigator.clipboard)==null||R.writeText(C).then(()=>{h(v),y(),k.current=window.setTimeout(()=>{h(M=>M===v?null:M)},1e3)}).catch(()=>{}))},[y]),p=d.useCallback(()=>{c(!1),window.requestAnimationFrame(()=>{var v;return(v=w.current)==null?void 0:v.focus()})},[]);return d.useEffect(()=>{if(!u)return;const v=R=>{!g.current||g.current.contains(R.target)||p()},C=R=>{R.key==="Escape"&&p()};return window.addEventListener("mousedown",v),window.addEventListener("keydown",C),()=>{window.removeEventListener("mousedown",v),window.removeEventListener("keydown",C)}},[u,p]),d.useEffect(()=>()=>{y()},[y]),a.jsxs("div",{ref:g,className:"sync-indicator",children:[a.jsxs("button",{ref:w,type:"button",className:"sync-indicator-button",onClick:()=>u?p():c(!0),"aria-haspopup":"dialog","aria-expanded":u,"aria-label":"Sync status",title:N,children:[a.jsx("span",{className:`sync-indicator-dot ${qw[e]}`,"aria-hidden":"true"}),!o&&a.jsx("span",{className:"sync-indicator-count tabular-nums",children:L})]}),u&&a.jsxs("div",{role:"dialog","aria-label":"Sync status",className:"sync-indicator-card select-text",children:[a.jsx("div",{className:"sync-indicator-line sync-indicator-primary",children:n}),a.jsx("div",{className:"sync-indicator-line",children:r}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:N}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:i?`Last edited: ${s}`:"No edits yet."}),a.jsxs("div",{className:"sync-indicator-section",children:[a.jsx("div",{className:"sync-indicator-section-title",children:"Recently touched files"}),l.length>0?a.jsx("div",{className:"sync-indicator-list",children:l.map(v=>a.jsxs("div",{className:"sync-indicator-item",children:[a.jsx("button",{type:"button",className:"sync-indicator-item-name",title:`Copy filename: ${v.label}`,onClick:()=>m(v.path,v.label),children:v.label}),a.jsx("span",{className:"sync-indicator-item-time tabular-nums",children:f===v.path?"Copied":v.timeLabel})]},v.path))}):a.jsx("div",{className:"sync-indicator-empty",children:"No recent touches."})]})]})]})}function Gw({rootRef:e,onSearch:t,viewerActive:n,onBack:r,zoomPercent:s,onZoomPercentChange:i,currentLabel:l,itemCount:o,totalCount:u,sortSpec:c,metricKeys:f,onSortChange:h,sortDisabled:g=!1,filterCount:w,onOpenFilters:k,starFilters:N,onToggleStar:L,onClearStars:y,onClearFilters:m,starCounts:p,viewMode:v,onViewMode:C,gridItemSize:R,onGridItemSize:M,leftOpen:b,rightOpen:T,onToggleLeft:E,onToggleRight:_,onPrevImage:Q,onNextImage:F,canPrevImage:$,canNextImage:ie,searchDisabled:U=!1,searchPlaceholder:le,syncIndicator:I}){const[V,q]=d.useState(!1),[fe,ue]=d.useState(!1),[je,H]=d.useState(!1),Y=d.useRef(null),ee=d.useRef(null);d.useEffect(()=>{if(!V)return;const D=re=>{Y.current&&!Y.current.contains(re.target)&&q(!1)};return window.addEventListener("click",D),()=>window.removeEventListener("click",D)},[V]),d.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const D=window.matchMedia("(max-width: 900px)"),re=de=>ue(de.matches);return ue(D.matches),"addEventListener"in D?(D.addEventListener("change",re),()=>D.removeEventListener("change",re)):(D.addListener(re),()=>D.removeListener(re))},[]),d.useEffect(()=>{if(U){H(!1);return}if(!fe||n){H(!1);return}if(!je)return;const D=window.requestAnimationFrame(()=>{var re;return(re=ee.current)==null?void 0:re.focus()});return()=>window.cancelAnimationFrame(D)},[fe,je,n,U]);const pe=c??{kind:"builtin",key:"added",dir:"desc"},Me=pe.dir,He=pe.kind==="builtin"&&pe.key==="random",$e=n||g,Je=f!=null&&f.length?f.map(D=>({value:`metric:${D}`,label:D,disabled:g})):[],Ve=[{value:"builtin:added",label:"Date added",disabled:g},{value:"builtin:name",label:"Filename",disabled:g},{value:"builtin:random",label:"Random",disabled:g},...Je],kn=[{label:"Layout",options:[{value:"layout:grid",label:"Grid"},{value:"layout:masonry",label:"Masonry"}]},{label:"Sort by",options:Ve}],be=pe.kind==="metric"?`metric:${pe.key}`:`builtin:${pe.key}`,kt=[{label:"Sort by",options:Ve}],At=fe&&!n,cn=D=>{if(D.startsWith("layout:")){const re=D==="layout:masonry"?"adaptive":"grid";C==null||C(re)}else{if(g)return;h==null||h(Ph(D,pe))}},B=()=>{!h||g||h(He?pe:{...pe,dir:Me==="desc"?"asc":"desc"})},se=N??[],oe=se.length,he=Jw(w,oe),ce=Xw(o,u),ge=l||"Root";return a.jsxs("div",{ref:e,className:"toolbar-shell fixed top-0 left-0 right-0 h-12 grid grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] items-center px-3 gap-3 bg-panel border-b border-border z-[var(--z-toolbar)] col-span-full row-start-1 select-none",children:[a.jsxs("div",{className:"toolbar-left flex items-center gap-4 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsxs("div",{className:"flex flex-col min-w-0 leading-tight",children:[a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted",children:"Scope"}),a.jsx("span",{className:"text-sm font-medium text-text truncate",title:ge,children:ge})]}),ce&&a.jsx("span",{className:"toolbar-count text-xs text-muted whitespace-nowrap tabular-nums",children:ce})]}),a.jsxs("div",{className:"toolbar-sort flex items-center gap-2",children:[a.jsxs("div",{className:`toolbar-sort-controls flex items-center gap-2 ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsx(pc,{value:be,onChange:cn,options:kn,title:"Sort and layout options","aria-label":"Sort and layout",triggerClassName:"min-w-[110px]"}),a.jsx("button",{className:"toolbar-sort-dir btn btn-icon",onClick:B,title:g?"Sorting disabled":He?"Shuffle":`Sort ${Me==="desc"?"descending":"ascending"}`,"aria-label":He?"Shuffle":"Toggle sort direction","aria-disabled":$e,disabled:$e,children:He?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Me==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]}),a.jsxs("div",{ref:Y,className:`toolbar-filter relative ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsxs("button",{className:`btn ${he>0?"btn-active":""}`,onClick:()=>q(D=>!D),"aria-haspopup":"dialog","aria-expanded":V,title:"Filters","aria-disabled":n,children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),a.jsx("span",{className:"toolbar-filters-label",children:"Filters"}),he>0&&a.jsx("span",{className:"toolbar-filters-count px-1.5 py-0.5 text-[11px] rounded-full bg-accent-strong text-text",children:he})]}),V&&a.jsxs("div",{role:"dialog","aria-label":"Filters",className:"dropdown-panel w-[240px]",style:{top:"38px",left:0},children:[a.jsx("div",{className:"dropdown-label",children:"Rating"}),a.jsxs("div",{className:"px-1",children:[[5,4,3,2,1].map(D=>{const re=se.includes(D),de=(p==null?void 0:p[String(D)])??0;return a.jsxs("button",{onClick:()=>L==null?void 0:L(D),className:`dropdown-item justify-between ${re?"bg-accent-muted":""}`,children:[a.jsxs("span",{className:re?"text-star-active":"text-text",children:["".repeat(D),"".repeat(5-D)]}),a.jsx("span",{className:"text-xs text-muted",children:de})]},D)}),a.jsxs("button",{onClick:()=>L==null?void 0:L(0),className:`dropdown-item justify-between ${se.includes(0)?"bg-accent-muted":""}`,children:[a.jsx("span",{className:"text-text",children:"Unrated"}),a.jsx("span",{className:"text-xs text-muted",children:(p==null?void 0:p["0"])??0})]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("div",{className:"dropdown-label",children:"Metrics"}),a.jsxs("button",{className:"dropdown-item",onClick:()=>{q(!1),k==null||k()},children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]}),a.jsx("span",{children:"Open Metrics Panel"}),(w||0)>0&&a.jsxs("span",{className:"ml-auto text-xs text-muted",children:[w," active"]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("button",{className:"dropdown-item text-muted hover:text-text",onClick:()=>{m?m():y==null||y()},disabled:he===0,children:"Clear all filters"})]})]}),n&&a.jsxs("button",{className:"btn btn-sm",onClick:r,title:"Back to grid",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})]})]}),a.jsx("div",{className:"toolbar-center flex items-center gap-3 justify-center min-w-0",children:n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"range",min:5,max:800,step:1,value:Math.round(Math.max(5,Math.min(800,s??100))),onChange:D=>i==null?void 0:i(Number(D.target.value)),className:"zoom-slider","aria-label":"Zoom level"}),a.jsxs("span",{className:"text-xs text-muted min-w-[42px] text-right",children:[Math.round(s??100),"%"]})]}):M&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted",children:"Size"}),a.jsx("input",{type:"range",min:80,max:500,step:10,value:R??220,onChange:D=>M(Number(D.target.value)),className:"w-28 h-1.5 bg-border rounded-full appearance-none cursor-pointer hover:bg-hover transition-colors [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-text [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-text [&::-moz-range-thumb]:border-0","aria-label":"Thumbnail size"})]})}),a.jsxs("div",{className:"toolbar-right flex items-center gap-2 justify-end",children:[a.jsxs("div",{className:`toolbar-nav flex items-center gap-1 mr-1 ${n?"":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,children:[a.jsx("button",{className:`btn btn-icon ${$?"":"opacity-40 cursor-not-allowed"}`,title:"Previous image (A / )",onClick:()=>$&&(Q==null?void 0:Q()),"aria-label":"Previous image","aria-disabled":!$,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("button",{className:`btn btn-icon ${ie?"":"opacity-40 cursor-not-allowed"}`,title:"Next image (D / )",onClick:()=>ie&&(F==null?void 0:F()),"aria-label":"Next image","aria-disabled":!ie,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 6l6 6-6 6"})})})]}),a.jsxs("div",{className:"toolbar-panels flex items-center gap-1",children:[a.jsx("button",{className:`btn btn-icon ${b?"":"opacity-50"}`,title:b?"Hide left panel (Ctrl+B)":"Show left panel (Ctrl+B)",onClick:E,"aria-pressed":b,"aria-label":"Toggle left panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"11",y:"5",width:"10",height:"14",rx:"1.5"})]})}),a.jsx("button",{className:`btn btn-icon ${T?"":"opacity-50"}`,title:T?"Hide right panel (Ctrl+Alt+B)":"Show right panel (Ctrl+Alt+B)",onClick:_,"aria-pressed":T,"aria-label":"Toggle right panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"15",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"3",y:"5",width:"10",height:"14",rx:"1.5"})]})})]}),I&&a.jsx(Yw,{...I,isNarrow:fe}),!n&&fe&&a.jsx("button",{className:`btn btn-icon ${je?"btn-active":""} ${U?"opacity-50 cursor-not-allowed":""}`,"aria-label":je?"Close search":"Open search",title:U?"Search disabled":je?"Close search":"Search",onClick:()=>!U&&H(D=>!D),disabled:U,children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("circle",{cx:"11",cy:"11",r:"7"}),a.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),!n&&!fe?a.jsx("div",{className:"toolbar-search w-[240px]",children:a.jsx("input",{ref:ee,"aria-label":"Search filename, tags, notes",placeholder:U?le??"Search disabled":"Search...",onChange:D=>t(D.target.value),className:"toolbar-search-input input w-full focus:w-full transition-all duration-200 select-text",disabled:U})}):n?a.jsx("div",{className:"toolbar-search w-[240px]","aria-hidden":"true"}):null]}),!n&&fe&&je&&!U&&a.jsx("div",{className:"toolbar-search-row",children:a.jsx("input",{ref:ee,"aria-label":"Search filename, tags, notes",placeholder:le??"Search...",onChange:D=>t(D.target.value),className:"toolbar-search-input-mobile input input-lg w-full select-text"})}),At&&a.jsx("div",{className:"mobile-drawer",children:a.jsxs("div",{className:"mobile-drawer-row",children:[a.jsxs("div",{className:"mobile-pill-group",children:[a.jsx("button",{className:`mobile-pill ${v==="grid"?"is-active":""}`,onClick:()=>C==null?void 0:C("grid"),"aria-pressed":v==="grid",children:"Grid"}),a.jsx("button",{className:`mobile-pill ${v==="adaptive"?"is-active":""}`,onClick:()=>C==null?void 0:C("adaptive"),"aria-pressed":v==="adaptive",children:"Masonry"})]}),a.jsx(pc,{value:be,onChange:D=>h==null?void 0:h(Ph(D,pe)),options:kt,"aria-label":"Sort",triggerClassName:"mobile-pill mobile-pill-dropdown",panelClassName:"mobile-drawer-panel",disabled:g}),a.jsx("button",{className:`mobile-pill mobile-pill-icon ${$e?"opacity-50 cursor-not-allowed":""}`,onClick:B,title:g?"Sorting disabled":He?"Shuffle":`Sort ${Me==="desc"?"descending":"ascending"}`,"aria-label":He?"Shuffle":"Toggle sort direction","aria-disabled":$e,disabled:$e,children:He?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Me==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]})})]})}function Xw(e,t){if(typeof e!="number")return null;const n=e.toLocaleString();if(typeof t!="number")return`${n} items`;const r=t.toLocaleString();return t===e?`${n} items`:`${n} / ${r} items`}function Jw(e,t){return typeof e=="number"?e:t>0?1:0}function Ph(e,t){if(e.startsWith("metric:")){const n=e.slice(7);return n?{kind:"metric",key:n,dir:t.dir}:t}if(e.startsWith("builtin:")){const n=e.slice(8);if(n==="name"||n==="added"||n==="random")return{kind:"builtin",key:n,dir:t.dir}}return t}class wn extends Error{constructor(n,r,s,i){super(r);bn(this,"status");bn(this,"url");bn(this,"body");this.name="FetchError",this.status=n,this.url=s,this.body=i}}function Zw(e){const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function mv(e,t,n){if(t&&typeof t=="object"){const r=t,s=typeof r.error=="string"?r.error:null,i=typeof r.message=="string"?r.message:null;if(s&&i)return`${s}: ${i}`;if(s)return s;if(i)return i}return typeof t=="string"&&t?t:`HTTP ${e} for ${n}`}function st(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async o=>{let u=null;const c=await o.text().catch(()=>"");if(c)if((o.headers.get("content-type")||"").includes("application/json")||Zw(c))try{u=JSON.parse(c)}catch{u=c}else u=c;if(!o.ok)throw new wn(o.status,mv(o.status,u,e),e,u);return u}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}function zl(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async o=>{if(!o.ok){const u=await o.text().catch(()=>""),c=u||null;throw new wn(o.status,mv(o.status,c,e),e,c)}return o.blob()}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}class pv{constructor(t){bn(this,"store",new Map);bn(this,"inflight",new Map);bn(this,"totalBytes",0);this.maxBytes=t}getMaxBytes(){return this.maxBytes}getTotalBytes(){return this.totalBytes}getSize(){return this.store.size}has(t){return this.store.has(t)}isInflight(t){return this.inflight.has(t)}get(t){const n=this.store.get(t);if(n)return this.store.delete(t),this.store.set(t,n),n.blob}evictIfNeeded(t){for(;this.totalBytes+t>this.maxBytes&&this.store.size>0;){const n=this.store.keys().next().value;if(n==null)break;const r=this.store.get(n);r&&(this.totalBytes-=r.size),this.store.delete(n)}}set(t,n){const r=n.size||0;if(!(r>this.maxBytes)){if(this.store.has(t)){const s=this.store.get(t);this.totalBytes-=s.size,this.store.delete(t)}this.evictIfNeeded(r),this.store.set(t,{blob:n,size:r}),this.totalBytes+=r}}async getOrFetch(t,n){const r=this.get(t);if(r)return r;const s=this.inflight.get(t);if(s)return s.promise;const i=n(),l=typeof i=="object"&&"promise"in i,o=l?i.promise:i,u=l?i.abort:void 0,c=o.then(f=>(this.set(t,f),f)).finally(()=>{this.inflight.delete(t)});return this.inflight.set(t,{promise:c,abort:u}),c}prefetch(t,n){if(this.store.has(t)||this.inflight.has(t))return;const r=n(),s=typeof r=="object"&&"promise"in r,i=s?r.promise:r,l=s?r.abort:void 0,o=i.then(u=>(this.set(t,u),u)).catch(()=>new Blob).finally(()=>{this.inflight.delete(t)});this.inflight.set(t,{promise:o,abort:l})}cancelPrefetch(t){const n=this.inflight.get(t);if(n!=null&&n.abort)try{n.abort()}catch{}this.inflight.delete(t)}clear(){for(const[t,n]of this.inflight)if(n.abort)try{n.abort()}catch{}this.inflight.clear(),this.store.clear(),this.totalBytes=0}evictPrefix(t){const n=(()=>{const s=t?`/${t.replace(/^\/+/,"")}`:"/";return s==="/"?"/":s.replace(/\/+$/,"")})(),r=s=>{const i=s.startsWith("/")?s.replace(/\/+$/,""):`/${s.replace(/\/+$/,"")}`;return n==="/"?!0:i===n||i.startsWith(`${n}/`)};for(const[s,i]of Array.from(this.store.entries()))r(s)&&(this.totalBytes-=i.size,this.store.delete(s));for(const[s,i]of Array.from(this.inflight.entries()))if(r(s)){if(i.abort)try{i.abort()}catch{}this.inflight.delete(s)}this.totalBytes<0&&(this.totalBytes=0)}}const cs=new pv(60*1024*1024),gc=new pv(20*1024*1024),Za={};function e1(){const e=Za==null?void 0:Za.VITE_API_BASE,t=typeof window<"u",n=t?window.location.origin:"http://localhost",r=t?window.location.hostname:"localhost",s=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\]|.+\.localhost)$/i.test(r);if(!e)return"";let i;try{i=new URL(e,n)}catch{return""}const l=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\])$/i.test(i.hostname);return s?i.origin:l?"":i.origin}const Be=e1();const t1=40*1024*1024;function n1(e){return e==="viewer"||e==="compare"}function Ih(e){return`${Be}/thumb?path=${encodeURIComponent(e)}`}function Fh(e){return`${Be}/file?path=${encodeURIComponent(e)}`}const Oh="lenslet.client_id",Dh="lenslet.client_id.session",gv="lenslet.last_event_id",r1=1e3,s1=3e4,i1=5;let os=null,to=null,zh=0,Rs=null,Ls=0,sa=!0,Oo=!1;function vv(){return typeof window<"u"&&typeof EventSource<"u"}function Ah(e,t){if(!e)return null;try{return e.getItem(t)}catch{return null}}function $h(e,t,n){if(e)try{e.setItem(t,n)}catch{}}function l1(){if(typeof navigator>"u")return"server";const e=navigator.userAgent||"",t=navigator.language||"",n=navigator.platform||"",r=typeof Intl<"u"&&Intl.DateTimeFormat().resolvedOptions().timeZone||"",s=typeof screen<"u"?`${screen.width}x${screen.height}x${screen.colorDepth}`:"";return[e,t,n,r,s].join("|")}function o1(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=t*16777619>>>0;return t.toString(16).padStart(8,"0")}function no(){if(os)return os;const e=typeof window<"u"?window.localStorage:null,t=typeof window<"u"?window.sessionStorage:null,n=Ah(e,Oh)||Ah(t,Dh);if(n)return os=n,n;const r=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`;if(e)return $h(e,Oh,r),os=r,r;if(t)return $h(t,Dh,r),os=r,r;const s=`fp_${o1(l1())}`;return os=s,s}function Yi(e="lenslet"){zh+=1;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`nonce_${Math.random().toString(36).slice(2,10)}_${Date.now()}_${zh}`;return`${e}:${no()}:${t}`}function a1(){if(to!=null)return to;if(typeof window>"u")return null;try{const e=window.localStorage.getItem(gv);if(!e)return null;const t=Number(e);return!Number.isFinite(t)||t<=0?null:(to=t,t)}catch{return null}}function u1(e){if(!(!Number.isFinite(e)||e<=0)&&(to=e,!(typeof window>"u")))try{window.localStorage.setItem(gv,String(e))}catch{}}function c1(){if(typeof window>"u")return`${Be}/events`;const e=new URL(`${Be}/events`,window.location.origin),t=a1();return t!=null&&Number.isFinite(t)&&e.searchParams.set("last_event_id",String(t)),e.toString()}function d1(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}let tn=null,yv="idle";const vc=new Set,yc=new Set,xc=new Set;function Ts(e){yv=e;for(const t of yc)t(e)}function Td(e){if(Oo!==e){Oo=e;for(const t of xc)t(e)}}function _d(){Rs!=null&&(window.clearTimeout(Rs),Rs=null)}function f1(){Ls=0,_d()}function h1(){if(!sa||Rs!=null)return;Ls+=1;const e=Math.min(r1*Math.pow(2,Ls-1),s1);Ls>=i1?(Ts("offline"),Td(!0)):Ts("reconnecting"),Rs=window.setTimeout(()=>{Rs=null,xv()},e)}function xv(){if(!sa||!vv()||(tn&&tn.readyState===EventSource.CLOSED&&(tn.close(),tn=null),tn))return;Ls>0?Ts("reconnecting"):Ts("connecting");const e=new EventSource(c1());tn=e;const t=n=>r=>{const s=d1(r.data);if(!s)return;const i=r.lastEventId?Number(r.lastEventId):null,l=i!=null&&Number.isFinite(i)?i:null;l!=null&&u1(l);for(const o of vc)o({type:n,id:l,data:s})};e.addEventListener("item-updated",t("item-updated")),e.addEventListener("metrics-updated",t("metrics-updated")),e.addEventListener("presence",t("presence")),e.onopen=()=>{f1(),Td(!1),Ts("live")},e.onerror=()=>{tn===e&&(e.close(),tn=null,h1())}}function m1(){sa=!0,vv()&&(_d(),xv())}function p1(){sa=!1,_d(),Ls=0,tn&&(tn.close(),tn=null),Td(!1),Ts("offline")}function g1(e){return vc.add(e),()=>{vc.delete(e)}}function v1(e){return yc.add(e),e(yv),()=>{yc.delete(e)}}function y1(e){return xc.add(e),e(Oo),()=>{xc.delete(e)}}function x1(){return Oo}function w1(e,t){const n=new URLSearchParams({path:e});return(t==null?void 0:t.page)!=null&&n.set("page",String(t.page)),(t==null?void 0:t.pageSize)!=null&&n.set("page_size",String(t.pageSize)),t!=null&&t.recursive&&n.set("recursive","1"),t!=null&&t.legacyRecursive&&n.set("legacy_recursive","1"),n.toString()}const ke={getFolder:(e,t)=>st(`${Be}/folders?${w1(e,t)}`).promise,search:(e,t)=>{const n=new URLSearchParams;return e&&n.set("q",e),t&&n.set("path",t),st(`${Be}/search?${n}`).promise},getEmbeddings:()=>st(`${Be}/embeddings`).promise,searchEmbeddings:e=>st(`${Be}/embeddings/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise,refreshFolder:e=>{const t=new URLSearchParams({path:e});return st(`${Be}/refresh?${t}`,{method:"POST"}).promise},getSidecar:e=>st(`${Be}/item?path=${encodeURIComponent(e)}`).promise,patchSidecar:(e,t,n)=>{const s={"Content-Type":"application/json","Idempotency-Key":(n==null?void 0:n.idempotencyKey)??Yi("patch"),"x-client-id":no(),"x-updated-by":"web"};return(n==null?void 0:n.ifMatch)!=null&&(s["If-Match"]=String(n.ifMatch)),st(`${Be}/item?path=${encodeURIComponent(e)}`,{method:"PATCH",headers:s,body:JSON.stringify(t)}).promise},getMetadata:e=>st(`${Be}/metadata?path=${encodeURIComponent(e)}`).promise,putSidecar:(e,t)=>st(`${Be}/item?path=${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-client-id":no(),"x-updated-by":"web"},body:JSON.stringify(t)}).promise,getHealth:()=>st(`${Be}/health`).promise,postPresence:(e,t)=>st(`${Be}/presence`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gallery_id:e,client_id:t??no()})}).promise,getThumb:e=>gc.getOrFetch(e,()=>zl(Ih(e))),prefetchThumb:e=>{gc.prefetch(e,()=>zl(Ih(e)))},getFile:e=>cs.getOrFetch(e,()=>zl(Fh(e))),prefetchFile:async(e,t)=>{if(n1(t)&&!(cs.has(e)||cs.isInflight(e)))try{const n=await zl(Fh(e),{headers:{"x-lenslet-prefetch":t}}).promise;n.size<=t1&&cs.set(e,n)}catch{}},cancelPrefetch:e=>{cs.cancelPrefetch(e)},uploadFile:async(e,t)=>{const n=new FormData;return n.append("dest",e),n.append("file",t),st(`${Be}/file`,{method:"POST",body:n,timeoutMs:6e4}).promise},moveFile:async(e,t)=>{const n=new FormData;return n.append("src",e),n.append("dest",t),st(`${Be}/move`,{method:"POST",body:n}).promise},deleteFiles:async e=>st(`${Be}/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:e})}).promise,exportIntent:async e=>{const t=new FormData;return t.append("path",e),st(`${Be}/export-intent`,{method:"POST",body:t}).promise},getViews:()=>st(`${Be}/views`).promise,saveViews:e=>st(`${Be}/views`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise};class S1{constructor(t=400){bn(this,"cache",new Map);bn(this,"maxSize");this.maxSize=t,typeof window<"u"&&window.addEventListener("beforeunload",()=>this.clear(),{once:!0})}get(t){const n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){for(this.cache.has(t)&&this.cache.delete(t);this.cache.size>=this.maxSize;){const r=this.cache.keys().next().value;if(r===void 0)break;const s=this.cache.get(r);if(this.cache.delete(r),s)try{URL.revokeObjectURL(s)}catch{}}this.cache.set(t,n)}clear(){for(const t of this.cache.values())try{URL.revokeObjectURL(t)}catch{}this.cache.clear()}}const eu=new S1(400);function k1({path:e,name:t,onClick:n,selected:r,highlighted:s,displayW:i,displayH:l,ioRoot:o,isScrolling:u,priority:c}){const f=d.useRef(null),[h,g]=d.useState(()=>eu.get(e)??null),[w,k]=d.useState(!1),[N,L]=d.useState(()=>!!h);return d.useEffect(()=>{const y=f.current;if(!y)return;const m=new IntersectionObserver(p=>{for(const v of p)v.target===y&&k(v.isIntersecting||v.intersectionRatio>0)},{root:o??null,rootMargin:"200px 0px",threshold:.01});return m.observe(y),()=>{m.unobserve(y),m.disconnect()}},[o]),d.useEffect(()=>{if(h||!(w&&!u||c))return;let y=!0;return ke.getThumb(e).then(m=>{if(!y)return;const p=URL.createObjectURL(m);eu.set(e,p),g(p)}).catch(()=>{}),()=>{y=!1}},[e,h,w,u,c]),d.useEffect(()=>{var m;if(!h){L(!1);return}const y=(m=f.current)==null?void 0:m.querySelector("img");y&&y.complete&&y.naturalWidth>0?L(!0):L(!1)},[h]),d.useEffect(()=>{g(eu.get(e)??null)},[e]),a.jsx("div",{ref:f,className:`absolute inset-0 relative bg-hover border border-border rounded-lg overflow-hidden select-none ${r?"outline-2 outline-accent":""} ${s?"ring-2 ring-accent/60 animate-pulse":""} hover:outline hover:outline-1 hover:outline-accent`,onClick:n,children:h?a.jsx("img",{className:`w-full h-full object-cover block pointer-events-none select-none opacity-0 transition-opacity duration-[160ms] ${N?"opacity-100":""}`,src:h,alt:t,loading:"lazy",decoding:"async",onLoad:()=>L(!0),width:i?Math.round(i):void 0,height:l?Math.round(l):void 0}):null})}function as(e,t,n){let r=n.initialDeps??[],s,i=!0;function l(){var o,u,c;let f;n.key&&((o=n.debug)!=null&&o.call(n))&&(f=Date.now());const h=e();if(!(h.length!==r.length||h.some((k,N)=>r[N]!==k)))return s;r=h;let w;if(n.key&&((u=n.debug)!=null&&u.call(n))&&(w=Date.now()),s=t(...h),n.key&&((c=n.debug)!=null&&c.call(n))){const k=Math.round((Date.now()-f)*100)/100,N=Math.round((Date.now()-w)*100)/100,L=N/16,y=(m,p)=>{for(m=String(m);m.length<p;)m=" "+m;return m};console.info(`%c ${y(N,5)} /${y(k,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*L,120))}deg 100% 31%);`,n==null?void 0:n.key)}return n!=null&&n.onChange&&!(i&&n.skipInitialOnChange)&&n.onChange(s),i=!1,s}return l.updateDeps=o=>{r=o},l}function Uh(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const C1=(e,t)=>Math.abs(e-t)<1.01,b1=(e,t,n)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,s),n)}},Bh=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},E1=e=>e,N1=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},j1=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const s=l=>{const{width:o,height:u}=l;t({width:Math.round(o),height:Math.round(u)})};if(s(Bh(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(l=>{const o=()=>{const u=l[0];if(u!=null&&u.borderBoxSize){const c=u.borderBoxSize[0];if(c){s({width:c.inlineSize,height:c.blockSize});return}}s(Bh(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},Wh={passive:!0},Hh=typeof window>"u"?!0:"onscrollend"in window,M1=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&Hh?()=>{}:b1(r,()=>{t(s,!1)},e.options.isScrollingResetDelay),l=f=>()=>{const{horizontal:h,isRtl:g}=e.options;s=h?n.scrollLeft*(g&&-1||1):n.scrollTop,i(),t(s,f)},o=l(!0),u=l(!1);u(),n.addEventListener("scroll",o,Wh);const c=e.options.useScrollendEvent&&Hh;return c&&n.addEventListener("scrollend",u,Wh),()=>{n.removeEventListener("scroll",o),c&&n.removeEventListener("scrollend",u)}},R1=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},L1=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const l=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:l,behavior:n})};class T1{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const l=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:E1,rangeExtractor:N1,onChange:()=>{},measureElement:R1,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=as(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let l=r-1;l>=0;l--){const o=n[l];if(s.has(o.lane))continue;const u=i.get(o.lane);if(u==null||o.end>u.end?i.set(o.lane,o):o.end<u.end&&s.set(o.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((l,o)=>l.end===o.end?l.index-o.index:l.end-o.end)[0]:void 0},this.getMeasurementOptions=as(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,s,i,l,o)=>(this.prevLanes!==void 0&&this.prevLanes!==o&&(this.lanesChangedFlag=!0),this.prevLanes=o,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:l,lanes:o}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=as(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:l,lanes:o},u)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const g of this.laneAssignments.keys())g>=n&&this.laneAssignments.delete(g);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(g=>{this.itemSizeCache.set(g.key,g.size)}));const c=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const f=this.measurementsCache.slice(0,c),h=new Array(o).fill(void 0);for(let g=0;g<c;g++){const w=f[g];w&&(h[w.lane]=g)}for(let g=c;g<n;g++){const w=i(g),k=this.laneAssignments.get(g);let N,L;if(k!==void 0&&this.options.lanes>1){N=k;const v=h[N],C=v!==void 0?f[v]:void 0;L=C?C.end+this.options.gap:r+s}else{const v=this.options.lanes===1?f[g-1]:this.getFurthestMeasurement(f,g);L=v?v.end+this.options.gap:r+s,N=v?v.lane:g%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(g,N)}const y=u.get(w),m=typeof y=="number"?y:this.options.estimateSize(g),p=L+m;f[g]={index:g,start:L,size:m,end:p,key:w,lane:N},h[N]=g}return this.measurementsCache=f,f},{key:!1,debug:()=>this.options.debug}),this.calculateRange=as(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?_1({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=as(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,l)=>i===null||l===null?[]:n({startIndex:i,endIndex:l,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const l=i.key,o=this.elementsCache.get(l);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(l,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,l=r-i;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,l,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=as(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,l=n.length;i<l;i++){const o=n[i],u=r[o];s.push(u)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return Uh(r[wv(0,r.length-1,s=>Uh(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),l=this.getScrollOffset();r==="auto"&&(r=n>=l+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const o=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),l=this.getScrollOffset();if(r==="auto")if(s.end>=l+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=l+this.options.scrollPaddingStart)r="start";else return[l,r];const o=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const l=10,o=c=>{if(!this.targetWindow)return;const f=this.getOffsetForIndex(n,c);if(!f){console.warn("Failed to get offset for index:",n);return}const[h,g]=f;this._scrollToOffset(h,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const w=this.getScrollOffset(),k=this.getOffsetForIndex(n,g);if(!k){console.warn("Failed to get offset for index:",n);return}C1(k[0],w)||u(g)})},u=c=>{this.targetWindow&&(i++,i<l?this.targetWindow.requestAnimationFrame(()=>o(c)):console.warn(`Failed to scroll to index ${n} after ${l} attempts.`))};o(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let l=r.length-1;for(;l>=0&&i.some(o=>o===null);){const o=r[l];i[o.lane]===null&&(i[o.lane]=o.end),l--}s=Math.max(...i.filter(o=>o!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const wv=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function _1({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const s=e.length-1,i=u=>e[u].start;if(e.length<=r)return{startIndex:0,endIndex:s};let l=wv(0,s,i,n),o=l;if(r===1)for(;o<s&&e[o].end<n+t;)o++;else if(r>1){const u=Array(r).fill(0);for(;o<s&&u.some(f=>f<n+t);){const f=e[o];u[f.lane]=f.end,o++}const c=Array(r).fill(n+t);for(;l>=0&&c.some(f=>f>=n);){const f=e[l];c[f.lane]=f.start,l--}l=Math.max(0,l-l%r),o=Math.min(s,o+(r-1-o%r))}return{startIndex:l,endIndex:o}}const Vh=typeof document<"u"?d.useLayoutEffect:d.useEffect;function P1(e){const t=d.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var l;i?Nd.flushSync(t):t(),(l=e.onChange)==null||l.call(e,s,i)}},[r]=d.useState(()=>new T1(n));return r.setOptions(n),Vh(()=>r._didMount(),[]),Vh(()=>r._willUpdate()),r}function I1(e){return P1({observeElementRect:j1,observeElementOffset:M1,scrollToFn:L1,...e})}function F1({containerW:e,gap:t,targetCell:n,aspect:r,captionH:s}){const i=Math.max(1,Math.floor((e+t)/(n+t))),l=(e-t*(i-1))/i,o=l*r.h/r.w,u=o+s+t;return{columns:i,cellW:l,mediaH:o,rowH:u}}const O1=1.333;function D1({items:e,containerWidth:t,targetHeight:n,gap:r,captionH:s}){if(t<=0)return[];const i=[];let l=[],o=0;const u=(c,f)=>({index:i.length,height:f+s+r,imageH:f,items:c.map(h=>({item:h.item,displayW:h.aspect*f,displayH:f,originalIndex:h.originalIndex}))});for(let c=0;c<e.length;c++){const f=e[c],h=f.w>0&&f.h>0?f.w/f.h:O1;l.push({item:f,aspect:h,originalIndex:c}),o+=h;const g=(l.length-1)*r;if(o*n+g>=t){const k=(t-g)/o;i.push(u(l,k)),l=[],o=0}}return l.length>0&&i.push(u(l,n)),i}function z1(e,t,n){return{mode:"adaptive",rows:D1({items:t,containerWidth:e,targetHeight:n.targetCell,gap:n.gap,captionH:n.captionH})}}function A1(e,t,n){const{columns:r,cellW:s,mediaH:i,rowH:l}=F1({containerW:e,gap:n.gap,targetCell:n.targetCell,aspect:n.aspect,captionH:n.captionH}),o=Math.ceil(t.length/Math.max(1,r));return{mode:"grid",columns:r,cellW:s,mediaH:i,rowH:l,rowCount:o}}function $1(e,t,n){const[r,s]=d.useState(0);d.useLayoutEffect(()=>{const u=e.current;if(!u)return;const c=()=>{const h=getComputedStyle(u),g=u.clientWidth-parseFloat(h.paddingLeft)-parseFloat(h.paddingRight);s(g)},f=new ResizeObserver(c);return f.observe(u),c(),()=>f.disconnect()},[]);const i=d.useMemo(()=>n.viewMode==="adaptive"?z1(r,t,n):A1(r,t,n),[r,t,n.viewMode,n.gap,n.targetCell,n.aspect.w,n.aspect.h,n.captionH]),l=I1({count:i.mode==="adaptive"?i.rows.length:i.rowCount,getScrollElement:()=>e.current,estimateSize:u=>i.mode==="adaptive"?i.rows[u].height:i.rowH,overscan:8}),o=l.getVirtualItems();return d.useEffect(()=>{l.measure()},[i,l]),{width:r,layout:i,rowVirtualizer:l,virtualRows:o}}function U1(e,t,n,r){if(!e.length)return null;const s=n?e.findIndex(o=>o.path===n):0,i=Math.max(1,t);let l=s;if(r.key==="ArrowRight"||r.key==="d")l=Math.min(e.length-1,s+1);else if(r.key==="ArrowLeft"||r.key==="a")l=Math.max(0,s-1);else if(r.key==="ArrowDown"||r.key==="s")l=Math.min(e.length-1,s+i);else if(r.key==="ArrowUp"||r.key==="w")l=Math.max(0,s-i);else return r.key==="Enter"&&n?"open":null;return l}function B1(e,t,n){const r=[];for(const s of e){if(t.mode==="adaptive"){const o=t.rows[s.index];if(!o)continue;for(const u of o.items)r.push(u.item.path);continue}const i=s.index*t.columns,l=n.slice(i,i+t.columns);for(const o of l)r.push(o.path)}return Array.from(new Set(r))}const En=12,W1=44,H1={w:4,h:3},V1=350,Q1=120;function K1({items:e,selected:t,restoreToSelectionToken:n,onSelectionChange:r,onOpenViewer:s,onContextMenuItem:i,highlight:l,recentlyUpdated:o,suppressSelectionHighlight:u=!1,viewMode:c="grid",targetCellSize:f=220,scrollRef:h,hideScrollbar:g=!1}){const[w,k]=d.useState(null),[N,L]=d.useState(null),[y,m]=d.useState(!1),[p,v]=d.useState(null),[C,R]=d.useState(null),M=d.useRef(null),b=d.useRef(null),T=d.useRef(null),E=h??T,_=d.useRef(null),Q=f,{width:F,layout:$,rowVirtualizer:ie,virtualRows:U}=$1(E,e,{gap:En,targetCell:Q,aspect:H1,captionH:W1,viewMode:c}),le=d.useMemo(()=>{const B=new Map;for(let se=0;se<e.length;se++)B.set(e[se].path,se);return B},[e]),I=d.useMemo(()=>{if($.mode!=="adaptive")return null;const B=new Map;return $.rows.forEach((se,oe)=>{let he=0;se.items.forEach((ce,ge)=>{const D=he+ce.displayW/2;B.set(ce.item.path,{row:oe,center:D,order:ge}),he+=ce.displayW+En})}),B},[$]);d.useEffect(()=>{if(!t.length)return;const B=t[0];p!==B&&v(B)},[t,p]);const V=d.useMemo(()=>{if($.mode!=="adaptive")return null;let B=0;return $.rows.map(se=>{const oe=B;return B+=se.height,{start:oe,height:se.height}})},[$]),q=d.useRef(null),fe=(B,se)=>{try{if(q.current!=null){try{cancelAnimationFrame(q.current)}catch{}q.current=null}const oe=B.scrollTop,he=se-oe;if(Math.abs(he)<1){B.scrollTop=se;return}const ce=140,ge=performance.now(),D=de=>1-Math.pow(1-de,3),re=de=>{const Ee=Math.min(1,(de-ge)/ce),Le=D(Ee);B.scrollTop=oe+he*Le,Ee<1?q.current=requestAnimationFrame(re):q.current=null};q.current=requestAnimationFrame(re)}catch{B.scrollTop=se}},[ue,je]=d.useState(!1);d.useEffect(()=>{const B=E.current;if(!B)return;let se=0;const oe=()=>{je(!0),window.clearTimeout(se),se=window.setTimeout(()=>je(!1),Q1)};return B.addEventListener("scroll",oe,{passive:!0}),()=>B.removeEventListener("scroll",oe)},[]);const H=()=>{b.current!=null&&(window.clearTimeout(b.current),b.current=null)},Y=()=>{if(H(),m(!1),k(null),M.current){try{URL.revokeObjectURL(M.current)}catch{}M.current=null}L(null)},ee=B=>{ue||(H(),k(B),m(!1),b.current=window.setTimeout(async()=>{b.current=null;try{const se=await ke.getFile(B),oe=URL.createObjectURL(se);if(M.current)try{URL.revokeObjectURL(M.current)}catch{}M.current=oe,L(oe),m(!0)}catch{}},V1))},pe=$.mode==="grid"?$.columns:Math.max(1,Math.floor(F/(Q+En))),Me=(B,se)=>{if($.mode!=="adaptive")return null;const oe=$.rows[B];if(!oe)return null;let he=0,ce=null;for(const ge of oe.items){const D=he+ge.displayW/2,re=Math.abs(D-se);(!ce||re<ce.dist)&&(ce={path:ge.item.path,dist:re}),he+=ge.displayW+En}return ce?ce.path:null},He=(B,se)=>{var Le,z,te,xe;if(!e.length)return null;const oe=B??e[0].path;if($.mode!=="adaptive"){const me=U1(e,pe,oe,se);return me==="open"||me==null?me:((Le=e[me])==null?void 0:Le.path)??null}const he=I==null?void 0:I.get(oe);if(!he)return oe;const ce=le.get(oe)??0,ge=se.key;if(ge==="Enter")return"open";if(ge==="ArrowRight"||ge==="d")return((z=e[Math.min(e.length-1,ce+1)])==null?void 0:z.path)??oe;if(ge==="ArrowLeft"||ge==="a")return((te=e[Math.max(0,ce-1)])==null?void 0:te.path)??oe;const D=ge==="ArrowDown"||ge==="s"?1:ge==="ArrowUp"||ge==="w"?-1:0;if(D===0)return null;const re=he.row+D;if(re<0||re>=(((xe=$.rows)==null?void 0:xe.length)??0))return oe;const de=he.center;return Me(re,de)??oe},$e=B=>{var se;try{(se=document.getElementById(`cell-${encodeURIComponent(B)}`))==null||se.focus()}catch{}},Je=d.useCallback(B=>{try{ke.prefetchThumb(B)}catch{}},[]),Ve=(B,se)=>{v(B),R(B);const oe=!!se.shiftKey,he=!!(se.ctrlKey||se.metaKey);if(oe){const ce=_.current??p??t[0]??B,ge=le.get(ce)??e.findIndex(re=>re.path===ce),D=le.get(B)??e.findIndex(re=>re.path===B);if(ge!==-1&&D!==-1){const re=Math.min(ge,D),de=Math.max(ge,D),Ee=e.slice(re,de+1).map(Le=>Le.path);if(he){const Le=new Set(t);for(const z of Ee)Le.add(z);r(Array.from(Le))}else r(Ee)}else r([B])}else if(he){const ce=new Set(t);ce.has(B)?ce.delete(B):ce.add(B),r(Array.from(ce)),_.current=B}else r([B]),_.current=B;ue||Je(B),$e(B)},kn=(B,se)=>{var oe,he;try{const ce=be.has(B)&&t.length>0?t:[B];(oe=se.dataTransfer)==null||oe.setData("application/x-lenslet-paths",JSON.stringify(ce)),se.dataTransfer&&(se.dataTransfer.effectAllowed="copyMove");try{document.body.classList.add("drag-active")}catch{}const D=se.currentTarget.querySelector(".cell-content img"),re=document.createElement("div");re.className="drag-ghost";const de=document.createElement("img");de.draggable=!1,de.alt="drag",D&&D.src&&(de.src=D.src),re.appendChild(de),document.body.appendChild(re);const Ee=re.getBoundingClientRect().width||150;(he=se.dataTransfer)==null||he.setDragImage(re,Math.round(Ee/2),0);const Le=()=>{try{re.remove()}catch{}try{document.body.classList.remove("drag-active")}catch{}window.removeEventListener("dragend",Le),window.removeEventListener("pointerup",Le),document.removeEventListener("visibilitychange",Le)};window.addEventListener("dragend",Le),window.addEventListener("pointerup",Le),document.addEventListener("visibilitychange",Le)}catch{}};d.useEffect(()=>{const B=E.current;if(!B)return;const se=oe=>{var Le,z,te;const he=He(C,oe);if(he==null)return;if(oe.preventDefault(),he==="open"){C&&s(C);return}const ce=e.find(xe=>xe.path===he);if(!ce)return;R(ce.path),v(ce.path),r([ce.path]);try{_.current=ce.path}catch{}const ge=$.mode==="grid"?Math.floor((le.get(ce.path)??0)/Math.max(1,$.columns)):((Le=I==null?void 0:I.get(ce.path))==null?void 0:Le.row)??0,D=B.scrollTop,re=D+B.clientHeight,de=$.mode==="adaptive"?((z=V==null?void 0:V[ge])==null?void 0:z.start)??0:ge*$.rowH,Ee=$.mode==="adaptive"?de+(((te=V==null?void 0:V[ge])==null?void 0:te.height)??0):de+$.rowH;(de<D||Ee>re)&&fe(B,de),$e(ce.path)};return B.addEventListener("keydown",se),()=>{B.removeEventListener("keydown",se)}},[e,C,pe,s,$,I,V,le]),d.useLayoutEffect(()=>{var ge;const B=E.current;if(!B||!n||!t||t.length===0)return;const se=t[0],oe=le.get(se);if(oe==null||oe<0)return;let he=0;if($.mode==="grid")he=Math.floor(oe/Math.max(1,$.columns));else{let D=0,re=$.rows.length-1;for(;D<=re;){const de=D+re>>1,Ee=$.rows[de];if(oe>=Ee.items[0].originalIndex&&oe<=Ee.items[Ee.items.length-1].originalIndex){he=de;break}oe<Ee.items[0].originalIndex?re=de-1:D=de+1}}const ce=$.mode==="adaptive"?((ge=V==null?void 0:V[he])==null?void 0:ge.start)??0:he*$.rowH;try{B.scrollTop=ce}catch{}},[n,$,V]);const be=d.useMemo(()=>new Set(t),[t]),kt=!!(w&&N&&y),At=d.useMemo(()=>B1(U,$,e),[e,$,U]);d.useEffect(()=>{if(!(ue||At.length===0))for(const B of At)Je(B)},[ue,At,Je]),d.useEffect(()=>{var B;(B=E.current)==null||B.focus()},[]),d.useEffect(()=>{var B;if(u){try{(B=E.current)==null||B.blur()}catch{}try{R(null)}catch{}}},[u]);const cn=C?`cell-${encodeURIComponent(C)}`:void 0;return a.jsx("div",{role:"grid","aria-label":"Gallery",className:`relative h-full overflow-auto p-3 outline-none ${g?"scrollbar-hidden pr-4":"scrollbar-thin"} ${kt?"cursor-zoom-in":""}`,ref:E,tabIndex:0,"aria-activedescendant":cn,onMouseDown:()=>{var B;return(B=E.current)==null?void 0:B.focus()},style:{"--gap":`${En}px`},children:a.jsxs("div",{className:"relative w-full",style:{height:ie.getTotalSize()},children:[U.map(B=>{var ge;let se=[],oe={},he="";if($.mode==="adaptive"){const D=$.rows[B.index];if(!D)return null;se=D.items,oe={height:D.height,transform:`translate3d(0, ${B.start}px, 0)`,display:"flex",gap:En,paddingBottom:En},he="absolute top-0 left-0 right-0 w-full will-change-transform"}else{const D=B.index*$.columns;se=e.slice(D,D+$.columns).map(de=>({item:de,displayW:$.cellW,displayH:$.mediaH})),oe={transform:`translate3d(0, ${B.start}px, 0)`,gridTemplateColumns:`repeat(${$.columns}, minmax(0, 1fr))`,gap:En,paddingBottom:En},he="absolute top-0 left-0 right-0 w-full grid will-change-transform"}const ce=B.index===((ge=U[0])==null?void 0:ge.index);return a.jsx("div",{className:he,role:"row",style:oe,children:se.map(({item:D,displayW:re,displayH:de})=>{const Ee=!u&&(p===D.path||be.has(D.path)),Le=(o==null?void 0:o.has(D.path))??!1,z=$.mode==="adaptive"?{width:re}:{},te=$.mode==="adaptive"?{height:de}:{},xe=$.mode==="adaptive"?"relative rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group shrink-0":"relative aspect-[4/3] rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group";return a.jsxs("div",{id:`cell-${encodeURIComponent(D.path)}`,className:`relative min-w-0 ${Ee?"outline outline-2 outline-accent outline-offset-2 rounded-[10px]":""}`,role:"gridcell","aria-selected":Ee,tabIndex:C===D.path?0:-1,onFocus:()=>R(D.path),draggable:!0,style:z,onDragStart:me=>kn(D.path,me),onDragEnd:()=>{},onContextMenu:me=>{me.preventDefault(),me.stopPropagation(),i&&i(me,D.path)},children:[a.jsxs("div",{className:xe,style:te,onDoubleClick:()=>s(D.path),onMouseLeave:Y,children:[a.jsx("div",{className:"cell-content absolute inset-0",children:a.jsx(k1,{path:D.path,name:D.name,selected:Ee,highlighted:Le,displayW:re,displayH:de,ioRoot:E.current,isScrolling:ue,priority:ce,onClick:me=>Ve(D.path,me)})}),a.jsx("div",{className:"absolute right-0 bottom-0 w-7 h-7 cursor-zoom-in",onMouseEnter:()=>ee(D.path),onMouseLeave:Y,children:a.jsx("div",{className:"absolute right-0 bottom-0 h-[18px] w-[18px] flex items-center justify-center text-text select-none opacity-0 group-hover:opacity-50 hover:opacity-100 transition-all duration-[140ms]",style:{clipPath:'path("M0 9C0 4.02944 4.02944 0 9 0H18V18H0V9Z")',background:"linear-gradient(135deg, rgba(18,18,18,0.9) 0%, rgba(34,34,34,0.9) 60%, rgba(22,22,22,0.9) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",borderLeft:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 1px 2px rgba(0,0,0,0.45)",backdropFilter:"blur(1px)"},children:a.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#d9dce2]","aria-hidden":"true",style:{transform:"translate(0px,0px)"},children:[a.jsx("circle",{cx:"11",cy:"11",r:"5.4"}),a.jsx("path",{d:"M15.5 15.5 L19 19"})]})})})]}),a.jsxs("div",{className:"flex flex-col items-center text-center gap-0 mt-1 px-0.5 text-white/90",children:[a.jsx("div",{className:"text-sm leading-[18px] thumb-filename line-clamp-2 break-words hyphens-auto text-center",title:D.name,children:(()=>{const me=(l||"").trim();if(!me)return D.name;const Tt=D.name,Ct=Tt.toLowerCase().indexOf(me.toLowerCase());if(Ct===-1)return D.name;const al=Tt.slice(0,Ct),rs=Tt.slice(Ct,Ct+me.length),ti=Tt.slice(Ct+me.length);return a.jsxs(a.Fragment,{children:[al,a.jsx("mark",{className:"bg-accent/20 text-inherit rounded px-0.5",children:rs}),ti]})})()}),a.jsxs("div",{className:"text-[11px] leading-[15px] opacity-70",children:[D.w,"  ",D.h]})]})]},D.path)})},B.key)}),w&&N&&y&&Nd.createPortal(a.jsx("div",{className:"toolbar-offset fixed inset-0 z-[999] flex items-center justify-center pointer-events-none bg-black/20 opacity-100",children:a.jsx("img",{src:N,alt:"preview",className:"max-w-[80vw] max-h-[80vh] object-contain opacity-[0.98]"})}),document.body)]},`${c}-${pe}`)})}const q1=48,Y1=[.1,.24,.5,.74,.9];function G1({items:e,metricKey:t,scrollRef:n,sortDir:r}){const{orderedValues:s,numericValues:i}=d.useMemo(()=>{var E;const b=[],T=[];for(const _ of e){const Q=(E=_.metrics)==null?void 0:E[t],F=Q==null||Number.isNaN(Q)?null:Q;b.push(F),F!=null&&T.push(F)}return{orderedValues:b,numericValues:T}},[e,t]),l=d.useMemo(()=>X1(i,q1),[i]),o=d.useMemo(()=>J1(i,Y1),[i]),[u,c]=d.useState(0),[f,h]=d.useState(null),[g,w]=d.useState(!1),k=d.useRef(null);if(d.useEffect(()=>{const b=n.current;if(!b)return;const T=()=>{const E=Math.max(1,b.scrollHeight-b.clientHeight),_=Ir(E>0?b.scrollTop/E:0);c(_)};return T(),b.addEventListener("scroll",T,{passive:!0}),window.addEventListener("resize",T),()=>{b.removeEventListener("scroll",T),window.removeEventListener("resize",T)}},[n,e.length]),d.useEffect(()=>{h(null)},[t,e.length]),!l)return null;const N={min:l.min,max:l.max},L=f!=null?Kh(f):null,y=Kh(u),m=r==="desc",p=d.useMemo(()=>f==null?null:tS(s,f),[s,f]);function v(b){h(Ir(b))}function C(){h(null)}function R(b){const T=n.current;if(!T)return;const E=Math.max(0,T.scrollHeight-T.clientHeight);T.scrollTop=Ir(b)*E}function M(b){var E;const T=(E=k.current)==null?void 0:E.getBoundingClientRect();return T?Ir((b.clientY-T.top)/T.height):null}return a.jsxs("div",{className:"absolute right-0 top-3 bottom-3 w-[14px] flex items-stretch pointer-events-auto",children:[a.jsxs("svg",{ref:k,viewBox:"0 0 10 100",preserveAspectRatio:"none",className:"w-full h-full rounded bg-surface-inset border border-border/60 cursor-ns-resize",onPointerDown:b=>{var E;b.preventDefault();const T=M(b);T!=null&&(w(!0),v(T),R(T),(E=k.current)==null||E.setPointerCapture(b.pointerId))},onPointerMove:b=>{const T=M(b);if(T==null){g||C();return}v(T),g&&R(T)},onPointerUp:b=>{var T;w(!1),(T=k.current)==null||T.releasePointerCapture(b.pointerId)},onPointerLeave:()=>{g||C()},children:[Z1(l.bins,"var(--border-strong)",{flip:m}),eS(o,N,{flip:m,color:"var(--muted)"}),Qh(y,{color:"var(--highlight)",strokeWidth:.8}),L!=null&&Qh(L,{color:"var(--text-secondary)",strokeWidth:.6,dashed:!0})]}),p!=null&&f!=null&&a.jsx("div",{className:"pointer-events-none absolute right-full mr-2 px-1.5 py-0.5 rounded border border-border bg-surface text-[10px] text-text shadow",style:{top:`calc(${(f*100).toFixed(2)}% - 8px)`},children:rS(p)})]})}function X1(e,t){if(!e.length)return null;const n=Math.min(...e);let r=Math.max(...e);n===r&&(r=n+1);const s=new Array(t).fill(0),i=t/(r-n);for(const l of e){const o=Math.max(0,Math.min(t-1,Math.floor((l-n)*i)));s[o]+=1}return{bins:s,min:n,max:r}}function J1(e,t){if(!e.length)return[];const n=[...e].sort((s,i)=>s-i),r=n.length-1;return t.map(s=>{const i=r*s,l=Math.floor(i),o=Math.ceil(i);if(l===o)return n[l];const u=i-l;return n[l]+(n[o]-n[l])*u})}function Z1(e,t,n){const r=Math.max(1,...e),s=100/e.length,i=(n==null?void 0:n.flip)??!1;return e.map((l,o)=>{const u=Math.max(.8,l/r*10),c=(i?e.length-1-o:o)*s;return a.jsx("rect",{x:10-u,y:c,width:u,height:Math.max(.2,s-.2),fill:t,opacity:.9},`sb-${o}`)})}function eS(e,t,n){const r=(n==null?void 0:n.flip)??!1,s=n==null?void 0:n.color;return e.map((i,l)=>{const o=nS(i,t,r),u=l===2;return a.jsx("line",{x1:0,y1:o,x2:10,y2:o,stroke:s,strokeWidth:u?.8:.5,opacity:u?.9:.6,vectorEffect:"non-scaling-stroke"},`qt-${l}-${i}`)})}function Qh(e,t){return a.jsx("line",{x1:0,y1:e,x2:10,y2:e,stroke:t.color,strokeWidth:t.strokeWidth??.6,strokeDasharray:t.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function tS(e,t){if(!e.length)return null;const n=Math.round(Ir(t)*(e.length-1)),r=e[n];if(r!=null)return r;for(let s=1;s<e.length;s++){const i=n-s;if(i>=0&&e[i]!=null)return e[i];const l=n+s;if(l<e.length&&e[l]!=null)return e[l]}return null}function nS(e,t,n){const r=t.max-t.min;if(r===0)return 0;const s=Ir((e-t.min)/r);return(n?1-s:s)*100}function Kh(e){return Ir(e)*100}function Ir(e){return e<0?0:e>1?1:e}function rS(e){if(e==null||Number.isNaN(e))return"-";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Fr(e,t){const[n,r]=d.useState(null),s=d.useRef(null);return d.useEffect(()=>{if(!e){if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}r(null);return}let i=!0;return e().then(l=>{if(!i)return;const o=URL.createObjectURL(l);if(s.current)try{URL.revokeObjectURL(s.current)}catch{}s.current=o,r(o)}).catch(()=>{}),()=>{i=!1}},t),d.useEffect(()=>()=>{if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}},[]),n}function sS(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[l,o]=d.useState(1),[u,c]=d.useState(!1),[f,h]=d.useState(!1),[g,w]=d.useState(!1),k=d.useRef(null),N=d.useRef(null),L=()=>{const p=k.current,v=N.current;if(!p||!v||!v.naturalWidth||!v.naturalHeight)return;const C=p.getBoundingClientRect(),R=C.width/v.naturalWidth,M=C.height/v.naturalHeight,b=Math.min(1,Math.min(R,M));o(b);const T=v.naturalWidth*b,E=v.naturalHeight*b;r((C.width-T)/2),i((C.height-E)/2)};return d.useEffect(()=>{const p=k.current;if(!p)return;const v=new ResizeObserver(()=>{try{requestAnimationFrame(()=>L())}catch{L()}});return v.observe(p),()=>v.disconnect()},[]),{scale:e,setScale:t,tx:n,setTx:r,ty:s,setTy:i,base:l,setBase:o,ready:u,setReady:c,dragging:f,setDragging:h,visible:g,setVisible:w,containerRef:k,imgRef:N,fitAndCenter:L,handleWheel:p=>{p.preventDefault();const v=p.deltaY>0?-1:1,C=1.2,R=.05,M=8,b=k.current;if(!b)return;const T=b.getBoundingClientRect(),E=p.clientX-T.left,_=p.clientY-T.top;t(Q=>{const F=Math.min(M,Math.max(R,Q*Math.pow(C,v))),$=F/Q;return r(ie=>E-$*(E-ie)),i(ie=>_-$*(_-ie)),Number(F.toFixed(4))})},handleMouseDown:p=>{const v=k.current,C=N.current;if(!v||!C||p.target!==C)return;const M=v.getBoundingClientRect();if(p.clientX<M.left||p.clientX>M.right||p.clientY<M.top||p.clientY>M.bottom)return;p.preventDefault(),p.stopPropagation(),h(!0);const b=p.clientX,T=p.clientY,E=n,_=s,Q=$=>{r(E+($.clientX-b)),i(_+($.clientY-T))},F=()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",F),h(!1)};window.addEventListener("mousemove",Q),window.addEventListener("mouseup",F)}}}function iS({path:e,onClose:t,onNavigate:n,onZoomChange:r,requestedZoomPercent:s,onZoomRequestConsumed:i}){const{scale:l,setScale:o,tx:u,setTx:c,ty:f,setTy:h,base:g,ready:w,setReady:k,dragging:N,visible:L,setVisible:y,containerRef:m,imgRef:p,fitAndCenter:v,handleWheel:C,handleMouseDown:R}=sS(),M=Fr(()=>ke.getFile(e),[e]),b=Fr(()=>ke.getThumb(e),[e]),T=d.useCallback(()=>{y(!1),window.setTimeout(t,110)},[t,y]);return d.useEffect(()=>{requestAnimationFrame(()=>{var E;y(!0),(E=m.current)==null||E.focus()})},[e]),d.useEffect(()=>{const E=_=>{_.key==="Escape"?T():(_.key==="ArrowRight"||_.key==="d")&&n?n(1):(_.key==="ArrowLeft"||_.key==="a")&&n&&n(-1)};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[t,n]),d.useEffect(()=>{k(!1)},[M]),d.useEffect(()=>{r&&r(g*l*100)},[g,l,r]),d.useEffect(()=>{if(s==null)return;const E=m.current;if(!E){i&&i();return}const _=Math.max(.05,Math.min(8,s/100/Math.max(1e-6,g))),Q=E.getBoundingClientRect(),F=Q.width/2,$=Q.height/2;o(ie=>{const U=_/ie;return c(le=>F-U*(F-le)),h(le=>$-U*($-le)),Number(_.toFixed(4))}),i&&i()},[s,g,i]),a.jsxs("div",{ref:m,role:"dialog","aria-modal":!0,"aria-label":"Image viewer",tabIndex:-1,className:`toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] flex items-start justify-start bg-panel z-viewer overflow-hidden transition-opacity duration-[110ms] ease-out cursor-grab focus:outline-none focus-visible:outline-none ${N?"cursor-grabbing select-none":""} ${L?"opacity-100":"opacity-0"}`,style:{outline:"none"},onClick:T,onWheel:C,onMouseDown:R,onKeyDown:E=>{E.key==="Tab"&&E.preventDefault()},children:[a.jsxs("button",{"aria-label":"Close",onClick:E=>{E.stopPropagation(),T()},className:"btn btn-sm absolute top-3 right-3 z-10",title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]}),b&&a.jsx("img",{src:b,alt:"thumb",className:"absolute top-0 left-0 max-w-none max-h-none object-contain pointer-events-none transition-opacity duration-[110ms] ease-out",draggable:!1,onDragStart:E=>E.preventDefault(),style:{transform:`translate(${u}px, ${f}px) scale(${g})`,transformOrigin:"0 0",opacity:w?0:.5,filter:"blur(0.25px)"}}),M&&a.jsx("img",{ref:p,src:M,alt:"viewer",className:"max-w-none max-h-none object-contain transition-opacity duration-[110ms] ease-out will-change-transform select-none",draggable:!1,onDragStart:E=>{E.preventDefault()},onLoad:E=>{v(),o(1);try{requestAnimationFrame(()=>k(!0))}catch{k(!0)}},onClick:E=>E.stopPropagation(),style:{transform:`translate(${u}px, ${f}px) scale(${g*l})`,transformOrigin:"0 0",opacity:w?.99:0,WebkitUserDrag:"none"}})]})}function Pd(e){return!e||!(e instanceof HTMLElement)?!1:e.closest('input, textarea, [contenteditable="true"]')!==null}const lS=1.2,oS=.05,aS=8;function uS(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[l,o]=d.useState(0),[u,c]=d.useState(0),[f,h]=d.useState(1),[g,w]=d.useState(1),[k,N]=d.useState(!1),L=d.useRef(null),y=d.useRef(null),m=d.useRef(null),p=d.useCallback(()=>{const M=L.current;if(!M)return;const b=M.getBoundingClientRect(),T=(E,_,Q,F)=>{if(!E||!E.naturalWidth||!E.naturalHeight)return;const $=b.width/E.naturalWidth,ie=b.height/E.naturalHeight,U=Math.min(1,Math.min($,ie)),le=E.naturalWidth*U,I=E.naturalHeight*U;_(U),Q((b.width-le)/2),F((b.height-I)/2)};T(y.current,h,r,i),T(m.current,w,o,c)},[]);d.useEffect(()=>{const M=L.current;if(!M)return;const b=new ResizeObserver(()=>{try{requestAnimationFrame(()=>p())}catch{p()}});return b.observe(M),()=>b.disconnect()},[p]);const v=d.useCallback(()=>{t(1),p()},[p]),C=d.useCallback(M=>{M.preventDefault();const b=M.deltaY>0?-1:1,T=L.current;if(!T)return;const E=T.getBoundingClientRect(),_=M.clientX-E.left,Q=M.clientY-E.top;t(F=>{const $=Math.min(aS,Math.max(oS,F*Math.pow(lS,b))),ie=$/F;return r(U=>_-ie*(_-U)),i(U=>Q-ie*(Q-U)),o(U=>_-ie*(_-U)),c(U=>Q-ie*(Q-U)),Number($.toFixed(4))})},[]),R=d.useCallback(M=>{if(M.button!==0||!L.current)return;M.preventDefault(),N(!0);const T=M.clientX,E=M.clientY,_=n,Q=s,F=l,$=u,ie=le=>{const I=le.clientX-T,V=le.clientY-E;r(_+I),i(Q+V),o(F+I),c($+V)},U=()=>{window.removeEventListener("pointermove",ie),window.removeEventListener("pointerup",U),N(!1)};window.addEventListener("pointermove",ie),window.addEventListener("pointerup",U)},[n,s,l,u]);return{scale:e,baseA:f,baseB:g,txA:n,tyA:s,txB:l,tyB:u,dragging:k,containerRef:L,imgARef:y,imgBRef:m,fitAndCenter:p,resetView:v,handleWheel:C,handlePointerDown:R}}function cS({aItem:e,bItem:t,index:n,total:r,canPrev:s,canNext:i,onNavigate:l,onClose:o}){const u=d.useRef(null),[c,f]=d.useState(50),[h,g]=d.useState(!1),[w,k]=d.useState(!1),{scale:N,baseA:L,baseB:y,txA:m,tyA:p,txB:v,tyB:C,dragging:R,containerRef:M,imgARef:b,imgBRef:T,fitAndCenter:E,resetView:_,handleWheel:Q,handlePointerDown:F}=uS(),$=(e==null?void 0:e.path)??null,ie=(t==null?void 0:t.path)??null,U=(e==null?void 0:e.name)??$??"Select an image",le=(t==null?void 0:t.name)??ie??"Select another image";d.useEffect(()=>{requestAnimationFrame(()=>{var Y;return(Y=u.current)==null?void 0:Y.focus()})},[$,ie]),d.useEffect(()=>{_(),g(!1),k(!1)},[$,ie,_]),d.useEffect(()=>{const Y=ee=>{if(!Pd(ee.target)){if(ee.key==="Escape"){ee.preventDefault(),o();return}if((ee.key==="ArrowRight"||ee.key==="d")&&i){ee.preventDefault(),l(1);return}(ee.key==="ArrowLeft"||ee.key==="a")&&s&&(ee.preventDefault(),l(-1))}};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[o,l,s,i]);const I=Fr($?()=>ke.getFile($):null,[$]),V=Fr(ie?()=>ke.getFile(ie):null,[ie]),q=Fr($?()=>ke.getThumb($):null,[$]),fe=Fr(ie?()=>ke.getThumb(ie):null,[ie]),ue=d.useCallback(Y=>Math.min(95,Math.max(5,Y)),[]),je=d.useCallback(Y=>{const ee=Y.target;ee!=null&&ee.closest(".compare-label")||ee!=null&&ee.closest(".compare-divider-hit")||F(Y)},[F]),H=d.useCallback(Y=>{const ee=M.current;if(!ee)return;Y.preventDefault(),Y.stopPropagation();const pe=ee.getBoundingClientRect(),Me=Y.currentTarget;Me.setPointerCapture(Y.pointerId);const He=Je=>{const Ve=(Je.clientX-pe.left)/pe.width*100;f(ue(Ve))},$e=Je=>{Me.releasePointerCapture(Je.pointerId),window.removeEventListener("pointermove",He),window.removeEventListener("pointerup",$e)};window.addEventListener("pointermove",He),window.addEventListener("pointerup",$e)},[ue]);return a.jsxs("div",{ref:u,role:"dialog","aria-modal":!0,"aria-label":"Compare images",tabIndex:-1,className:"toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] bg-panel z-viewer flex flex-col overflow-hidden focus:outline-none",onKeyDown:Y=>{Y.key==="Tab"&&Y.preventDefault()},children:[a.jsxs("div",{className:"compare-header flex items-center gap-3 px-3 py-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Compare"}),a.jsx("div",{className:"text-xs text-muted",children:r>=2?`${n+1}-${Math.min(n+2,r)} of ${r}`:"Select 2 images"}),a.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[a.jsxs("button",{className:"btn btn-sm",onClick:()=>l(-1),disabled:!s,title:"Previous (Left Arrow or A)",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Prev"]}),a.jsxs("button",{className:"btn btn-sm",onClick:()=>l(1),disabled:!i,title:"Next (Right Arrow or D)",children:["Next",a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"btn btn-sm",onClick:o,title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]})]})]}),a.jsx("div",{className:"flex-1 min-h-0 p-3 bg-panel",children:a.jsx("div",{ref:M,className:`compare-stage ${R?"is-dragging":""}`,onWheel:Q,onPointerDown:je,children:!e||!t?a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-sm text-muted",children:"Select 2 images to compare."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"compare-label left-3",children:[a.jsx("span",{className:"compare-label-tag",children:"A"}),a.jsx("span",{className:"truncate",title:e.path,children:U})]}),a.jsxs("div",{className:"compare-label right-3",children:[a.jsx("span",{className:"compare-label-tag",children:"B"}),a.jsx("span",{className:"truncate",title:t.path,children:le})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 ${100-c}% 0 0)`},children:[q&&a.jsx("img",{src:q,alt:"thumb A",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:Y=>Y.preventDefault(),style:{transform:`translate(${m}px, ${p}px) scale(${L})`,transformOrigin:"0 0",opacity:h?0:.5}}),I&&a.jsx("img",{ref:b,src:I,alt:"compare A",className:"compare-image",draggable:!1,onDragStart:Y=>Y.preventDefault(),onLoad:()=>{E();try{requestAnimationFrame(()=>g(!0))}catch{g(!0)}},style:{transform:`translate(${m}px, ${p}px) scale(${L*N})`,transformOrigin:"0 0",opacity:h?.99:0}})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 0 0 ${c}%)`},children:[fe&&a.jsx("img",{src:fe,alt:"thumb B",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:Y=>Y.preventDefault(),style:{transform:`translate(${v}px, ${C}px) scale(${y})`,transformOrigin:"0 0",opacity:w?0:.5}}),V&&a.jsx("img",{ref:T,src:V,alt:"compare B",className:"compare-image",draggable:!1,onDragStart:Y=>Y.preventDefault(),onLoad:()=>{E();try{requestAnimationFrame(()=>k(!0))}catch{k(!0)}},style:{transform:`translate(${v}px, ${C}px) scale(${y*N})`,transformOrigin:"0 0",opacity:w?.99:0}})]}),a.jsxs("div",{className:"compare-divider-hit",style:{left:`${c}%`},onPointerDown:H,children:[a.jsx("div",{className:"compare-divider-line"}),a.jsx("div",{className:"compare-divider-handle"})]})]})})})]})}function ia(){const[e,t]=d.useState(x1());return d.useEffect(()=>y1(t),[]),e}const Gi=e=>["item",e],dS={v:1,tags:[],notes:"",version:1,updated_at:"",updated_by:"web"},Zt=new Map,ro=new Map,wc=new Map,Id=new Map;let qh=0;const Sn=new Map,wi=new Map,fS=12e3,Sc=new Set,kc=new Set;let Fd={state:"idle"},Xi=null,Cc=0;function Al(e){Fd=e;for(const t of Sc)t(e)}function On(){const e=Sn.size>0,t=Zt.size+ro.size+Cc;if(e){Al({state:"error",message:"Conflict detected"});return}if(Xi){Al({state:"error",message:Xi});return}if(t>0){Al({state:"syncing"});return}Al({state:"idle"})}function Od(){let e=null;for(const t of wc.values())e=e==null?t:Math.min(e,t);for(const t of Id.values())e=e==null?t:Math.min(e,t);return e}function Do(){const e=Od();for(const t of kc)t(e)}function zo(e){Xi=e,On()}function Sv(){Xi&&(Xi=null,On())}function Yh(e){Cc=Math.max(0,Cc+e),On()}function hS(){qh+=1;const e=qh;return Id.set(e,Date.now()),Do(),e}function mS(e){e!=null&&Id.delete(e)&&Do()}function la(e){const t=wi.get(e);if(!t||!t.size)return;const n=Sn.get(e)??null;for(const r of t)r(n)}function Gh(e){return Sn.get(e)??null}function oa(e){Sn.delete(e)&&(la(e),On())}function pS(e,t){Sn.set(e,t),la(e),On()}function gS(e,t){const n=wi.get(e)??new Set;return n.add(t),wi.set(e,n),t(Sn.get(e)??null),()=>{const r=wi.get(e);r&&(r.delete(t),r.size||wi.delete(e))}}function vS(e){const[t,n]=d.useState(()=>e?Gh(e):null);return d.useEffect(()=>{if(!e){n(null);return}return n(Gh(e)),gS(e,n)},[e]),t}function yS(e){return Sc.add(e),e(Fd),()=>{Sc.delete(e)}}function xS(){const[e,t]=d.useState(Fd);return d.useEffect(()=>yS(t),[]),e}function wS(e){return kc.add(e),e(Od()),()=>{kc.delete(e)}}function SS(){const[e,t]=d.useState(()=>Od()),[n,r]=d.useState(()=>e==null?null:Date.now()-e);return d.useEffect(()=>wS(t),[]),d.useEffect(()=>{if(e==null){r(null);return}r(Date.now()-e);const s=window.setInterval(()=>{r(Date.now()-e)},1e3);return()=>window.clearInterval(s)},[e]),n}function bc(e){const t={};return Object.prototype.hasOwnProperty.call(e,"star")&&(t.set_star=e.star??null),Object.prototype.hasOwnProperty.call(e,"notes")&&(t.set_notes=e.notes??""),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.set_tags=Array.isArray(e.tags)?e.tags:[]),t}function Ec(e){var t,n;return e.set_star!==void 0||e.set_notes!==void 0||e.set_tags!==void 0||(((t=e.add_tags)==null?void 0:t.length)??0)>0||(((n=e.remove_tags)==null?void 0:n.length)??0)>0}function mi(e){const t=[],n=new Set;for(const r of e??[]){if(typeof r!="string")continue;const s=r.trim();!s||n.has(s)||(n.add(s),t.push(s))}return t}function kS(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}function CS(e,t){if(e.set_star!==void 0&&(t.star??null)!==e.set_star||e.set_notes!==void 0&&(t.notes??"")!==(e.set_notes??""))return!1;if(e.set_tags!==void 0){const r=mi(e.set_tags),s=mi(t.tags);return kS(r,s)}const n=mi(t.tags);for(const r of mi(e.add_tags))if(!n.includes(r))return!1;for(const r of mi(e.remove_tags))if(n.includes(r))return!1;return!0}function kv(e,t,n){if(n instanceof wn&&n.status===409){const r=n.body;if(r!=null&&r.current)return pS(e,{path:e,current:r.current,pending:t,receivedAt:new Date().toISOString()}),!0}return!1}function bS(e,t){const n=Sn.get(e);if(n){if(CS(n.pending,t)){oa(e);return}Sn.set(e,{...n,current:t}),la(e),On()}}function ES(e){const t=ia();return ra({queryKey:Gi(e),queryFn:()=>ke.getSidecar(e),enabled:!!e,staleTime:3e4,gcTime:5*6e4,retry:2,refetchInterval:t?fS:!1,refetchIntervalInBackground:t})}function NS(e){const t=br();return Kw({mutationFn:async({patch:n,baseVersion:r,idempotencyKey:s})=>{const i=bc(n);if(!Ec(i))return t.getQueryData(Gi(e))??dS;const l={...i,base_version:r};try{return await ke.patchSidecar(e,l,{idempotencyKey:s??Yi("patch"),ifMatch:r})}catch(o){throw kv(e,i,o),o}},retry:(n,r)=>r instanceof wn&&r.status===409?!1:n<2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),4e3),onMutate:()=>(Sv(),Yh(1),{inflightId:hS()}),onSuccess:n=>{oa(e),t.setQueryData(Gi(e),n)},onError:n=>{n instanceof wn&&n.status===409||(n instanceof wn?zo(n.message):zo("Failed to save"))},onSettled:(n,r,s,i)=>{Yh(-1),mS(i==null?void 0:i.inflightId)}})}const jS=6;async function Xh(e,t){if(!e.length)return;let n=0;const r=[],s=async()=>{for(;n<e.length;){const l=n++,o=e[l];try{await Cv(o,t)}catch(u){r.push({path:o,error:u}),console.error(`[bulkUpdateSidecars] Failed for ${o}:`,u)}}},i=Array.from({length:Math.min(jS,e.length)},()=>s());if(await Promise.all(i),r.length===e.length)throw new Error(`All ${e.length} sidecar updates failed`)}async function Cv(e,t){const n=Zt.get(e)||{};Zt.set(e,{...n,...t}),Sv(),On();const r=ro.get(e);if(r)return r;wc.set(e,Date.now()),Do();const s=(async()=>{try{for(;Zt.has(e);){const i=Zt.get(e);if(!i)break;const l=bc(i);if(!Ec(l)){Zt.get(e)===i&&Zt.delete(e);continue}let o=1;try{o=(await ke.getSidecar(e)).version??1}catch{o=1}const u={...l,base_version:o};try{await ke.patchSidecar(e,u,{idempotencyKey:Yi("patch"),ifMatch:o}),oa(e),Zt.get(e)===i&&Zt.delete(e)}catch(c){if(kv(e,l,c)){const h=Zt.get(e);if(h&&h!==i){const g=bc(h);if(Ec(g)){const w=Sn.get(e);w&&(Sn.set(e,{...w,pending:g}),la(e))}}Zt.delete(e)}else c instanceof wn?zo(c.message):zo("Failed to save");throw c}}}finally{ro.delete(e),wc.delete(e),Do(),On()}})();return ro.set(e,s),On(),s}function tu(e){const t=["B","KB","MB","GB","TB"];let n=0,r=e;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${r.toFixed(1)} ${t[n]}`}function nu(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function MS(e,t=28){if(e.length<=t)return e;const n=Math.max(4,Math.floor((t-1)/2));return`${e.slice(0,n)}${e.slice(-n)}`}const RS=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});function LS(e){const t=e.trim();return!t||/[zZ]|[+-]\d{2}:?\d{2}$/.test(t)?t:`${t.includes("T")?t:t.replace(" ","T")}Z`}function Jh(e){if(!e)return null;const t=Date.parse(LS(e));return Number.isFinite(t)?t:null}function TS(e,t=Date.now()){const n=Math.max(0,t-e),r=Math.max(1,Math.floor(n/1e3));if(r<60)return`${r} second${r===1?"":"s"} ago`;const s=Math.floor(r/60);if(s<60)return`${s} minute${s===1?"":"s"} ago`;const i=Math.floor(s/60);return`${i} hour${i===1?"":"s"} ago`}function _S(e){return RS.format(new Date(e))}function so(e){if(Array.isArray(e))return e.map(so);if(e&&typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,so(n)]));if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")||t.startsWith('"')&&t.endsWith('"'))try{const r=JSON.parse(t);return so(r)}catch{return e}}return e}function ru(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function PS(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Zh(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}function IS(e){const t=/(\"(\\u[a-fA-F0-9]{4}|\\[^u]|[^\\"])*\"(?:\s*:)?|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\btrue\b|\bfalse\b|\bnull\b)/g;let n="",r=0;for(const s of e.matchAll(t)){const i=s.index??0,l=s[0];n+=ru(e.slice(r,i));let o="var(--json-fallback)";l.startsWith('"')&&l.trimEnd().endsWith(":")?o="var(--json-key)":l.startsWith('"')?o="var(--json-string)":/true|false|null/.test(l)?o="var(--json-literal)":o="var(--json-number)",n+=`<span style="color:${o}">${ru(l)}</span>`,r=i+l.length}return n+=ru(e.slice(r)),n}const FS=["overview","basics","metadata","notes"],em="lenslet.inspector.sections",tm="lenslet.inspector.metricsExpanded",su=12,OS={overview:!0,metadata:!0,basics:!0,notes:!0};function $l({title:e,open:t,onToggle:n,actions:r,children:s,contentClassName:i}){const[l,o]=d.useState(t),[u,c]=d.useState(t?"open":"closed");return d.useEffect(()=>{if(t){o(!0);const h=window.requestAnimationFrame(()=>c("open"));return()=>window.cancelAnimationFrame(h)}c("closing");const f=window.setTimeout(()=>{o(!1),c("closed")},140);return()=>window.clearTimeout(f)},[t]),a.jsxs("div",{className:"border-b border-border/60",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[a.jsxs("button",{type:"button",onClick:n,"aria-expanded":t,className:"flex items-center gap-2 inspector-section-title hover:text-text transition-colors",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform ${t?"rotate-90":""}`,"aria-hidden":"true",children:a.jsx("path",{d:"m9 18 6-6-6-6"})}),a.jsx("span",{children:e})]}),r]}),l&&a.jsx("div",{className:"inspector-section-body","data-state":u,"aria-hidden":!t,children:a.jsx("div",{className:i??"px-3 pb-3",children:s})})]})}function DS({path:e,selectedPaths:t=[],items:n=[],onResize:r,onStarChanged:s,sortSpec:i,onFindSimilar:l,embeddingsAvailable:o=!1,embeddingsLoading:u=!1}){const c=!!e,{data:f,isLoading:h}=ES(e??""),g=NS(e??""),w=br(),[k,N]=d.useState(OS),L=d.useCallback(z=>{N(te=>({...te,[z]:!te[z]}))},[]),[y,m]=d.useState(!1),p=t.length>1,v=!!l&&o&&!p,C=l?o?p?"Select a single image to search.":null:u?"Loading embeddings...":"No embeddings detected.":null,[R,M]=d.useState(""),[b,T]=d.useState(""),[E,_]=d.useState(""),[Q,F]=d.useState(null),[$,ie]=d.useState("idle"),[U,le]=d.useState(!1),[I,V]=d.useState(null),[q,fe]=d.useState({}),je=d.useMemo(()=>{const z=n.find(te=>te.path===e);return z&&z.star!==void 0?z.star:null},[n,e])??(f==null?void 0:f.star)??null,H=vS(p?null:e),Y={tags:!!(H!=null&&H.pending.set_tags),notes:(H==null?void 0:H.pending.set_notes)!==void 0,star:(H==null?void 0:H.pending.set_star)!==void 0},ee=d.useMemo(()=>{const z=new Set(t);return n.filter(te=>z.has(te.path))},[n,t]),pe=d.useMemo(()=>ee.reduce((z,te)=>z+(te.size||0),0),[ee]);d.useEffect(()=>{f&&(M((f.tags||[]).join(", ")),T(f.notes||"")),_(""),F(null),ie("idle"),le(!1)},[f==null?void 0:f.updated_at,e]);const Me=d.useCallback(z=>{if(p&&t.length){Xh(t,z);return}if(!e)return;const te=(f==null?void 0:f.version)??1;g.mutate({patch:z,baseVersion:te,idempotencyKey:Yi("patch")})},[p,t,e,f==null?void 0:f.version,g]),He=d.useCallback(()=>{if(!H||!e)return;const z={};H.pending.set_tags!==void 0&&(z.tags=Zh(R)),H.pending.set_notes!==void 0&&(z.notes=b),H.pending.set_star!==void 0&&(z.star=je??null);const te=H.current.version??1;g.mutate({patch:z,baseVersion:te,idempotencyKey:Yi("patch")})},[H,e,R,b,je,g]),$e=d.useCallback(()=>{if(!H||!e)return;const z=H.current;M((z.tags||[]).join(", ")),T(z.notes||""),w.setQueryData(Gi(e),z),oa(e),s==null||s([e],z.star??null)},[H,e,w,s]);d.useEffect(()=>{if(!e)return;const z=te=>{if(Pd(te.target))return;const xe=te.key;if(!/^[0-5]$/.test(xe))return;te.preventDefault();const me=xe==="0"?null:Number(xe);if(p&&t.length){Me({star:me}),s==null||s(t,me);return}Me({star:me}),s==null||s([e],me)};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[e,p,t,Me,s]);const Je=Fr(e?()=>ke.getThumb(e):null,[e]),Ve=e?e.split("/").pop()||e:"",kn=d.useMemo(()=>{var te;if(Ve.includes("."))return Ve.slice(Ve.lastIndexOf(".")+1).toUpperCase();const z=n.find(xe=>xe.path===e);return(te=z==null?void 0:z.type)!=null&&te.includes("/")?z.type.split("/")[1].toUpperCase():""},[Ve,n,e]),be=d.useMemo(()=>n.find(z=>z.path===e),[n,e]),kt=d.useMemo(()=>e?(be==null?void 0:be.source)??e:"",[be,e]),At=d.useCallback(async()=>{if(e){ie("loading"),F(null);try{const z=await ke.getMetadata(e),te=so(z.meta),xe=JSON.stringify(te,null,1);_(xe),ie("loaded")}catch(z){const te=z instanceof Error?z.message:"Failed to load metadata";_(te),F(te),ie("error")}}},[e]),cn=d.useCallback(()=>{var z;E&&((z=navigator.clipboard)==null||z.writeText(E).then(()=>{le(!0),setTimeout(()=>le(!1),1200)}).catch(te=>{const xe=te instanceof Error?te.message:"Copy failed";F(xe)}))},[E]),B=d.useMemo(()=>E?IS(E):"",[E]),se=$==="loading"?"Loading metadata":E||"PNG metadata not loaded yet.",oe=$==="loading",he=$==="loaded"&&!!E,ce=he?"h-48":"h-24",ge=oe?"Loading":he?U?"Copied":"Copy":"Load meta",D=he?cn:At,re=p?null:a.jsx("div",{className:"flex items-center gap-2 text-xs",children:a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[78px]",onClick:D,disabled:!e||oe,children:ge})});d.useEffect(()=>{try{const z=localStorage.getItem(em);if(!z)return;const te=JSON.parse(z);if(!te||typeof te!="object")return;const xe={};for(const me of FS)typeof te[me]=="boolean"&&(xe[me]=te[me]);Object.keys(xe).length>0&&N(me=>({...me,...xe}))}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(em,JSON.stringify(k))}catch{}},[k]),d.useEffect(()=>{try{const z=localStorage.getItem(tm);z==="1"||z==="true"?m(!0):(z==="0"||z==="false")&&m(!1)}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(tm,y?"1":"0")}catch{}},[y]);const de=d.useCallback((z,te)=>{var xe;te&&((xe=navigator.clipboard)==null||xe.writeText(te).then(()=>{V(z),setTimeout(()=>V(me=>me===z?null:me),1e3)}).catch(()=>{}))},[]),Ee=d.useCallback((z,te)=>{if(te&&!q[z]){const xe=te.offsetHeight;xe&&fe(me=>me[z]?me:{...me,[z]:xe})}},[q]),Le="toolbar-offset absolute bottom-0 left-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20";return c?a.jsxs("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:[!p&&a.jsx("div",{className:"p-3 border-b border-border flex justify-center",children:a.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border w-[220px] h-[160px] bg-panel select-none",children:[Je&&a.jsx("img",{src:Je,alt:"thumb",className:"block w-full h-full object-contain"}),!!kn&&a.jsx("div",{className:"absolute top-1.5 left-1.5 bg-surface border border-border text-text text-xs px-1.5 py-0.5 rounded-md select-none",children:kn})]})}),a.jsxs($l,{title:p?"Selection":"Item",open:k.overview,onToggle:()=>L("overview"),contentClassName:"px-3 pb-3 space-y-2",actions:l&&a.jsx("button",{type:"button",className:"btn btn-sm",onClick:l,disabled:!v,title:C??"Find similar",children:"Find similar"}),children:[p?a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Selected"}),a.jsxs("div",{className:"inspector-field-value",children:[t.length," files"]})]}),a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Total size"}),a.jsx("div",{className:"inspector-field-value",children:tu(pe)})]})]}):a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Filename"}),a.jsx("div",{className:"inspector-field-value break-all",title:Ve,children:Ve})]}),C&&a.jsx("div",{className:"text-[11px] text-muted",children:C})]}),a.jsxs($l,{title:"Basics",open:k.basics,onToggle:()=>L("basics"),children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",role:"radiogroup","aria-label":"Star rating",children:[a.jsx("span",{className:"ui-kv-label w-16 shrink-0",children:p?"Rating (all)":"Rating"}),a.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(z=>{const te=(je??0)>=z;return a.jsx("button",{className:`w-6 h-6 flex items-center justify-center rounded-lg border border-border/60 bg-transparent text-[13px] ${te?"text-star-active":"text-star-inactive"} hover:border-border hover:text-star-hover transition-colors`,onClick:()=>{const xe=je===z&&!p?null:z;p&&t.length?(s==null||s(t,xe),Xh(t,{star:xe})):e&&(s==null||s([e],xe),Cv(e,{star:xe}))},title:`${z} star${z>1?"s":""} (key ${z})`,"aria-label":`${z} star${z>1?"s":""}`,"aria-pressed":je===z,children:te?"":""},z)})})]}),!p&&H&&Y.star&&a.jsxs("div",{className:"ui-banner ui-banner-danger mt-2 text-[11px] flex items-center justify-between gap-2",children:[a.jsx("span",{children:"Rating conflict."}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:He,children:"Apply again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:$e,children:"Keep theirs"})]})]}),!p&&be&&a.jsxs("div",{className:"text-[12px] space-y-1.5 leading-relaxed",children:[a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>de("dimensions",`${be.w}${be.h}`),children:"Dimensions"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:z=>Ee("dimensions",z),style:q.dimensions?{minHeight:q.dimensions}:void 0,children:I==="dimensions"?"Copied":`${be.w}${be.h}`})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>de("size",tu(be.size)),children:"Size"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:z=>Ee("size",z),style:q.size?{minHeight:q.size}:void 0,children:I==="size"?"Copied":tu(be.size)})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>de("type",be.type),children:"Type"}),a.jsx("span",{className:"ui-kv-value break-all text-right inline-block min-w-[80px]",ref:z=>Ee("type",z),style:q.type?{minHeight:q.type}:void 0,children:I==="type"?"Copied":be.type})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>kt&&de("source",kt),children:"Source"}),a.jsx("span",{className:"ui-kv-value inspector-value-clamp break-words text-right max-w-[70%] inline-block min-w-[80px]",ref:z=>Ee("source",z),style:q.source?{minHeight:q.source}:void 0,title:kt,children:I==="source"?"Copied":kt})]}),(()=>{const z=be.metrics||null;if(!z)return null;const te=Object.entries(z).filter(([,nt])=>nt!=null);if(!te.length)return null;const xe=(i==null?void 0:i.kind)==="metric"?i.key:null,me=[...te].sort(([nt],[Er])=>nt.localeCompare(Er));let Tt=me;if(xe){const nt=me.findIndex(([Er])=>Er===xe);nt>0&&(Tt=[me[nt],...me.slice(0,nt),...me.slice(nt+1)])}const Ct=Tt.length>su,rs=y||!Ct?Tt:Tt.slice(0,su),ti=Tt.length-su;return a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"ui-subsection-title mb-1",children:"Metrics"}),a.jsxs("div",{className:"space-y-1",children:[rs.map(([nt,Er])=>{const ul=xe===nt;return a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:`w-24 shrink-0 ${ul?"text-accent font-medium":"ui-kv-label"}`,children:nt}),a.jsx("span",{className:`ui-kv-value text-right ${ul?"text-accent font-medium":""}`,children:PS(Er)})]},nt)}),Ct&&a.jsx("button",{type:"button",className:"text-[11px] text-muted underline underline-offset-2 hover:text-text",onClick:()=>m(nt=>!nt),"aria-expanded":y,children:y?"Show less":`+${ti} more`})]})]})})()]})]}),!p&&a.jsxs($l,{title:"Metadata",open:k.metadata,onToggle:()=>L("metadata"),actions:re,children:[a.jsx("pre",{className:`ui-code-block ${ce} overflow-auto whitespace-pre-wrap`,children:he?a.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:B}}):se}),Q&&a.jsx("div",{className:"text-[11px] text-danger mt-1 break-words",children:Q})]}),a.jsxs($l,{title:"Notes & Tags",open:k.notes,onToggle:()=>L("notes"),contentClassName:"px-3 pb-3 space-y-2",children:[!p&&H&&(Y.tags||Y.notes)&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Conflicting edits detected."}),a.jsx("div",{className:"text-[11px] text-muted mt-0.5",children:"Your changes were not saved because this item was updated elsewhere."}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:He,children:"Apply my changes again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:$e,children:"Keep theirs"})]})]}),a.jsx("textarea",{className:"ui-textarea inspector-input w-full scrollbar-thin",placeholder:"Add notes",value:b,onChange:z=>T(z.target.value),onBlur:()=>{Me({notes:b})},"aria-label":p?"Notes for selected items":"Notes"}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:p?"Tags (apply to all, comma-separated)":"Tags (comma-separated)"}),a.jsx("input",{className:"ui-input inspector-input w-full",placeholder:"tag1, tag2",value:R,onChange:z=>M(z.target.value),onBlur:()=>{Me({tags:Zh(R)})},"aria-label":p?"Tags for selected items":"Tags"})]})]}),a.jsx("div",{className:Le,onMouseDown:r})]}):a.jsx("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:a.jsx("div",{className:Le,onMouseDown:r})})}function zS({open:e,embeddings:t,rejected:n=[],selectedPath:r,embeddingsLoading:s=!1,embeddingsError:i,onClose:l,onSearch:o}){const[u,c]=d.useState(""),[f,h]=d.useState("path"),[g,w]=d.useState(""),[k,N]=d.useState(""),[L,y]=d.useState("50"),[m,p]=d.useState(""),[v,C]=d.useState(null),[R,M]=d.useState(!1),b=d.useRef(null),T=d.useRef(null),E=d.useMemo(()=>t.find(U=>U.name===u)??t[0]??null,[t,u]);d.useEffect(()=>{e&&(C(null),t.length>0&&!t.some(U=>U.name===u)&&c(t[0].name),r?(h("path"),w(r)):(h("vector"),w("")))},[e,t,u,r]),d.useEffect(()=>{if(!e)return;const U=f==="vector"?T.current:b.current,le=window.requestAnimationFrame(()=>U==null?void 0:U.focus());return()=>window.cancelAnimationFrame(le)},[e,f]);const _=d.useCallback(async()=>{if(C(null),!t.length){C("No embeddings available for similarity search.");return}if(!E){C("Select an embedding to search.");return}const U=g.trim(),le=k.trim(),I=Number(L);if(!Number.isFinite(I)||I<=0){C("Top K must be a positive number.");return}const V=Math.min(1e3,Math.max(1,Math.floor(I))),q=m.trim()===""?null:Number(m);if(q!=null&&!Number.isFinite(q)){C("Min score must be a valid number.");return}if(f==="path"&&!U){C("Select an image path for the query.");return}if(f==="vector"&&!le){C("Paste a base64 vector for the query.");return}const fe={embedding:E.name,query_path:f==="path"?U:null,query_vector_b64:f==="vector"?le:null,top_k:V,min_score:q};M(!0);try{await o(fe),l()}catch(ue){ue instanceof wn||ue instanceof Error?C(ue.message):C("Failed to run similarity search.")}finally{M(!1)}},[t.length,E,g,k,L,m,f,o,l]);d.useEffect(()=>{if(!e)return;const U=le=>{if(le.key==="Escape"){le.preventDefault(),l();return}(le.ctrlKey||le.metaKey)&&le.key==="Enter"&&(le.preventDefault(),_())};return window.addEventListener("keydown",U),()=>window.removeEventListener("keydown",U)},[e,l,_]);const Q=d.useCallback(()=>{var U;r&&(h("path"),w(r),(U=b.current)==null||U.focus())},[r]);if(!e)return null;const F=t.map(U=>({value:U.name,label:U.name})),$=n.length>0,ie=n.slice(0,3);return a.jsx("div",{className:"fixed inset-0 z-[var(--z-overlay)] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",onClick:U=>{U.target===U.currentTarget&&l()},children:a.jsxs("div",{className:"w-full max-w-2xl rounded-lg border border-border bg-panel shadow-[0_20px_50px_rgba(0,0,0,0.55)]",onClick:U=>U.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Find similar",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-text",children:"Find similar"}),a.jsx("div",{className:"text-xs text-muted",children:"Search with embeddings"})]}),a.jsx("button",{className:"btn btn-sm",onClick:l,"aria-label":"Close",children:"Close"})]}),a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[i&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:i}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Embedding"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pc,{value:(E==null?void 0:E.name)??"",onChange:c,options:F,placeholder:s?"Loading embeddings...":"Select embedding",disabled:!t.length,triggerClassName:"min-w-[180px]"}),E&&a.jsxs("span",{className:"text-xs text-muted",children:[E.dimension," dims, ",E.metric,", ",E.dtype]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Query mode"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",className:`btn btn-sm ${f==="path"?"btn-active":""}`,onClick:()=>h("path"),"aria-pressed":f==="path",children:"Selected image"}),a.jsx("button",{type:"button",className:`btn btn-sm ${f==="vector"?"btn-active":""}`,onClick:()=>h("vector"),"aria-pressed":f==="vector",children:"Vector input"})]})]}),f==="path"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Image path"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:b,type:"text",className:"input w-full",value:g,onChange:U=>w(U.target.value),placeholder:r?"Selected image path":"Select an image first"}),a.jsx("button",{type:"button",className:"btn btn-sm",onClick:Q,disabled:!r,title:r?"Use selected image":"Select an image first",children:"Use selected"})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Vector (base64 float32)"}),a.jsx("textarea",{ref:T,className:"ui-textarea w-full font-mono text-[11px]",rows:5,value:k,onChange:U=>N(U.target.value),placeholder:"Paste base64-encoded float32 vector"}),a.jsx("div",{className:"text-[11px] text-muted",children:"Base64 of little-endian float32. Length must match embedding dimension."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Top K"}),a.jsx("input",{type:"number",min:1,max:1e3,step:1,className:"input ui-number w-full",value:L,onChange:U=>y(U.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Min score"}),a.jsx("input",{type:"number",step:.01,className:"input ui-number w-full",value:m,onChange:U=>p(U.target.value),placeholder:"Optional"})]})]}),$&&a.jsxs("div",{className:"ui-banner text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Skipped columns"}),a.jsxs("div",{className:"mt-1 space-y-1 text-muted",children:[ie.map(U=>a.jsxs("div",{children:[U.name,": ",U.reason]},U.name)),n.length>ie.length&&a.jsxs("div",{children:["+",n.length-ie.length," more"]})]})]}),v&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:v})]}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-border",children:[a.jsx("div",{className:"text-xs text-muted",children:E?`Metric: ${E.metric}`:"Metric: cosine"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:l,disabled:R,children:"Cancel"}),a.jsx("button",{className:"btn btn-sm btn-active",onClick:_,disabled:R||!t.length,children:R?"Searching...":"Find similar"})]})]})]})})}const bv=1,io=200,AS=5*6e4,$S=6e4,Ev=(e,t)=>t!=null&&t.recursive?["folder",e,"recursive",t.page??bv,t.pageSize??io]:["folder",e];function Nv(e){return e[0]!=="folder"||e[2]!=="recursive"||typeof e[1]!="string"||typeof e[3]!="number"||typeof e[4]!="number"?null:e}function US(e){return Nv(e)!==null}function BS(e,t,n=!0){if(!US(e))return!0;const r=Nv(e);if(r==null)return!1;const[,s,,i]=r;return i!==bv?!1:!!(s===t||n&&s==="/")}function WS(e,t,n=!0){return!Array.isArray(e)||e[0]!=="folder"?!1:!BS(e,t,n)}const HS=15e3;function VS(e,t){return ke.getFolder(e,t)}function Nc(e,t=!1,n){const r=ia(),s={recursive:t,page:n==null?void 0:n.page,pageSize:n==null?void 0:n.pageSize,legacyRecursive:n==null?void 0:n.legacyRecursive},i=!!s.recursive;return ra({queryKey:Ev(e,s),queryFn:()=>VS(e,s),enabled:(n==null?void 0:n.enabled)??!0,staleTime:1e4,gcTime:i?$S:AS,retry:2,retryDelay:l=>Math.min(1e3*Math.pow(2,l),5e3),refetchOnWindowFocus:!1,refetchInterval:r?HS:!1,refetchIntervalInBackground:r})}const QS=(e,t)=>["search",e,t],KS=2e4;function qS(e,t){const n=ia();return ra({enabled:!!e.trim(),queryKey:QS(e,t),queryFn:()=>ke.search(e,t),staleTime:3e3,gcTime:6e4,placeholderData:r=>r,retry:1,refetchInterval:n?KS:!1,refetchIntervalInBackground:n})}const YS=()=>["embeddings"];function GS(){return ra({queryKey:YS(),queryFn:ke.getEmbeddings,staleTime:6e4,gcTime:5*6e4,retry:1,refetchOnWindowFocus:!1})}const XS=/^[\/@a-zA-Z0-9._\-\/]{1,512}$/,JS=[".jpg",".jpeg",".png",".webp"];function Dn(e){try{const t=decodeURI(e||""),r=(t.startsWith("/")?t:`/${t}`).replace(/\/{2,}/g,"/"),s=r.length>1?r.replace(/\/$/,""):r;return XS.test(s)?s:"/"}catch{return"/"}}function nm(){return(window.location.hash||"").replace(/^#/,"")}function rm(e){const t=Dn(e),n=`#${encodeURI(t)}`;window.location.hash!==n&&(window.location.hash=n)}function Ul(e){const t=Dn(e),n=`#${encodeURI(t)}`;if(window.location.hash!==n){const r=`${window.location.pathname}${window.location.search}${n}`;window.history.replaceState(window.history.state,"",r)}}function ZS(e){const n=Dn(e).toLowerCase();return JS.some(r=>n.endsWith(r))}function ek(e,t){const n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,""),s=[n,r].filter(Boolean).join("/");return s.startsWith("/")?s:`/${s}`}function sm(e){const n=Dn(e).split("/").filter(Boolean);return n.length<=1?"/":"/"+n.slice(0,-1).join("/")}function tk(e){return e.endsWith("/_trash_")}const nk=new Set([0,1,2,3,4,5]),Dd=new Set(["<","<=",">",">="]),rk=/^\d{4}-\d{2}-\d{2}$/;function sk(e,t){return!t||!t.and.length?e:e.filter(n=>ik(n,t.and))}function ik(e,t){for(const n of t)if(!lk(e,n))return!1;return!0}function lk(e,t){var n,r,s,i,l,o,u;if("stars"in t){const c=t.stars;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsIn"in t){const c=t.starsIn.values;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsNotIn"in t){const c=t.starsNotIn.values;if(!c||!c.length)return!0;const f=e.star??0;return!c.includes(f)}if("nameContains"in t){const c=(n=t.nameContains.value)==null?void 0:n.trim();return c?(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("nameNotContains"in t){const c=(r=t.nameNotContains.value)==null?void 0:r.trim();return c?!(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("commentsContains"in t){const c=(s=t.commentsContains.value)==null?void 0:s.trim();if(!c)return!0;const f=e.comments??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("commentsNotContains"in t){const c=(i=t.commentsNotContains.value)==null?void 0:i.trim();if(!c)return!0;const f=e.comments??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("urlContains"in t){const c=(l=t.urlContains.value)==null?void 0:l.trim();if(!c)return!0;const f=e.source??e.url??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("urlNotContains"in t){const c=(o=t.urlNotContains.value)==null?void 0:o.trim();if(!c)return!0;const f=e.source??e.url??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("dateRange"in t){const{from:c,to:f}=t.dateRange;if(!c&&!f)return!0;if(!e.addedAt)return!1;const h=Date.parse(e.addedAt);if(Number.isNaN(h))return!1;const g=om(c,!1),w=om(f,!0);return!(g!=null&&h<g||w!=null&&h>w)}if("widthCompare"in t){const{op:c,value:f}=t.widthCompare;if(!Number.isFinite(f))return!0;const h=e.w;return!Number.isFinite(h)||h<=0?!1:am(h,c,f)}if("heightCompare"in t){const{op:c,value:f}=t.heightCompare;if(!Number.isFinite(f))return!0;const h=e.h;return!Number.isFinite(h)||h<=0?!1:am(h,c,f)}if("metricRange"in t){const{key:c,min:f,max:h}=t.metricRange,g=(u=e.metrics)==null?void 0:u[c];return!(g==null||g<f||g>h)}return!0}function jc(e){if(!e||typeof e!="object")return null;const t=e.and;if(!Array.isArray(t))return null;const n=[];for(const r of t){const s=Sk(r);s&&n.push(s)}return{and:n}}function im(e){var r;const t=e.and.find(s=>"stars"in s),n=e.and.find(s=>"starsIn"in s);return(r=n==null?void 0:n.starsIn)!=null&&r.values?n.starsIn.values:(t==null?void 0:t.stars)??[]}function iu(e,t){return jv(e,t)}function ok(e){var n;const t=e.and.find(r=>"starsIn"in r);return((n=t==null?void 0:t.starsIn)==null?void 0:n.values)??[]}function jv(e,t){const n=Li(t),r=e.and.filter(s=>!("starsIn"in s)&&!("stars"in s));return n.length?{and:[{starsIn:{values:n}},...r]}:{and:r}}function ak(e){var n;const t=e.and.find(r=>"starsNotIn"in r);return((n=t==null?void 0:t.starsNotIn)==null?void 0:n.values)??[]}function Mv(e,t){const n=Li(t),r=e.and.filter(s=>!("starsNotIn"in s));return n.length?{and:[{starsNotIn:{values:n}},...r]}:{and:r}}function uk(e){var n;const t=e.and.find(r=>"nameContains"in r);return((n=t==null?void 0:t.nameContains)==null?void 0:n.value)??null}function Rv(e,t){const n=Vt(t),r=e.and.filter(s=>!("nameContains"in s));return n?{and:[{nameContains:{value:n}},...r]}:{and:r}}function ck(e){var n;const t=e.and.find(r=>"nameNotContains"in r);return((n=t==null?void 0:t.nameNotContains)==null?void 0:n.value)??null}function Lv(e,t){const n=Vt(t),r=e.and.filter(s=>!("nameNotContains"in s));return n?{and:[{nameNotContains:{value:n}},...r]}:{and:r}}function dk(e){var n;const t=e.and.find(r=>"commentsContains"in r);return((n=t==null?void 0:t.commentsContains)==null?void 0:n.value)??null}function Tv(e,t){const n=Vt(t),r=e.and.filter(s=>!("commentsContains"in s));return n?{and:[{commentsContains:{value:n}},...r]}:{and:r}}function fk(e){var n;const t=e.and.find(r=>"commentsNotContains"in r);return((n=t==null?void 0:t.commentsNotContains)==null?void 0:n.value)??null}function _v(e,t){const n=Vt(t),r=e.and.filter(s=>!("commentsNotContains"in s));return n?{and:[{commentsNotContains:{value:n}},...r]}:{and:r}}function hk(e){var n;const t=e.and.find(r=>"urlContains"in r);return((n=t==null?void 0:t.urlContains)==null?void 0:n.value)??null}function Pv(e,t){const n=Vt(t),r=e.and.filter(s=>!("urlContains"in s));return n?{and:[{urlContains:{value:n}},...r]}:{and:r}}function mk(e){var n;const t=e.and.find(r=>"urlNotContains"in r);return((n=t==null?void 0:t.urlNotContains)==null?void 0:n.value)??null}function Iv(e,t){const n=Vt(t),r=e.and.filter(s=>!("urlNotContains"in s));return n?{and:[{urlNotContains:{value:n}},...r]}:{and:r}}function pk(e){const t=e.and.find(n=>"dateRange"in n);return(t==null?void 0:t.dateRange)??null}function Mc(e,t){const n=Ao((t==null?void 0:t.from)??null),r=Ao((t==null?void 0:t.to)??null),s=e.and.filter(i=>!("dateRange"in i));return!n&&!r?{and:s}:{and:[{dateRange:{...n?{from:n}:{},...r?{to:r}:{}}},...s]}}function gk(e){const t=e.and.find(n=>"widthCompare"in n);return(t==null?void 0:t.widthCompare)??null}function lo(e,t){const n=e.and.filter(r=>!("widthCompare"in r));return!t||!Number.isFinite(t.value)||!Dd.has(t.op)?{and:n}:{and:[{widthCompare:{op:t.op,value:t.value}},...n]}}function vk(e){const t=e.and.find(n=>"heightCompare"in n);return(t==null?void 0:t.heightCompare)??null}function oo(e,t){const n=e.and.filter(r=>!("heightCompare"in r));return!t||!Number.isFinite(t.value)||!Dd.has(t.op)?{and:n}:{and:[{heightCompare:{op:t.op,value:t.value}},...n]}}function yk(e,t){const n=e.and.find(r=>"metricRange"in r&&r.metricRange.key===t);return(n==null?void 0:n.metricRange)??null}function xk(e,t,n){const r=e.and.filter(s=>!("metricRange"in s&&s.metricRange.key===t));return n?{and:[{metricRange:{key:t,min:n.min,max:n.max}},...r]}:{and:r}}function wk(e){const t=jc(e);return t?t.and.length:0}function Sk(e){var t,n,r,s,i,l,o,u;if(!e||typeof e!="object")return null;if("stars"in e){const c=Li(e.stars);return c.length?{starsIn:{values:c}}:null}if("starsIn"in e){const c=Li((t=e.starsIn)==null?void 0:t.values);return c.length?{starsIn:{values:c}}:null}if("starsNotIn"in e){const c=Li((n=e.starsNotIn)==null?void 0:n.values);return c.length?{starsNotIn:{values:c}}:null}if("nameContains"in e){const c=Vt((r=e.nameContains)==null?void 0:r.value);return c?{nameContains:{value:c}}:null}if("nameNotContains"in e){const c=Vt((s=e.nameNotContains)==null?void 0:s.value);return c?{nameNotContains:{value:c}}:null}if("commentsContains"in e){const c=Vt((i=e.commentsContains)==null?void 0:i.value);return c?{commentsContains:{value:c}}:null}if("commentsNotContains"in e){const c=Vt((l=e.commentsNotContains)==null?void 0:l.value);return c?{commentsNotContains:{value:c}}:null}if("urlContains"in e){const c=Vt((o=e.urlContains)==null?void 0:o.value);return c?{urlContains:{value:c}}:null}if("urlNotContains"in e){const c=Vt((u=e.urlNotContains)==null?void 0:u.value);return c?{urlNotContains:{value:c}}:null}if("dateRange"in e){const c=e.dateRange,f=Ao((c==null?void 0:c.from)??null),h=Ao((c==null?void 0:c.to)??null);return!f&&!h?null:{dateRange:{...f?{from:f}:{},...h?{to:h}:{}}}}if("widthCompare"in e){const c=e.widthCompare,f=lm(c==null?void 0:c.op,c==null?void 0:c.value);return f?{widthCompare:f}:null}if("heightCompare"in e){const c=e.heightCompare,f=lm(c==null?void 0:c.op,c==null?void 0:c.value);return f?{heightCompare:f}:null}if("metricRange"in e){const c=e.metricRange;if(!c||typeof c!="object")return null;const f=typeof c.key=="string"?c.key:"",h=Rc(c.min),g=Rc(c.max);return!f||h==null||g==null||h>g?null:{metricRange:{key:f,min:h,max:g}}}return null}function Li(e){if(!Array.isArray(e))return[];const t=[],n=new Set;for(const r of e){const s=typeof r=="number"?r:typeof r=="string"?Number(r):NaN;!Number.isInteger(s)||!nk.has(s)||n.has(s)||(n.add(s),t.push(s))}return t}function Vt(e){if(typeof e!="string")return null;const t=e.trim();return t||null}function Ao(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=Date.parse(t);return Number.isNaN(n)?null:t}function lm(e,t){if(typeof e!="string"||!Dd.has(e))return null;const n=Rc(t);return n==null?null:{op:e,value:n}}function om(e,t){if(!e)return null;const n=e.trim();if(!n)return null;const r=Date.parse(n);return Number.isNaN(r)?null:t&&rk.test(n)?r+24*60*60*1e3-1:r}function am(e,t,n){switch(t){case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;default:return!0}}function Rc(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function um(e){return e.addedAt?Date.parse(e.addedAt):0}function $o(e,t){return e.name.localeCompare(t.name)}function kk(e,t){const n=um(e),r=um(t);return n===r?$o(e,t):n-r}function Ck(e){return(t,n)=>{var i,l;const r=(i=t.metrics)==null?void 0:i[e],s=(l=n.metrics)==null?void 0:l[e];return r==null&&s==null?$o(t,n):r==null?1:s==null?-1:r===s?$o(t,n):r-s}}function cm(e,t){return sk(e,t)}function bk(e){let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function Ek(e,t){const n=bk(t||1),r=[...e];for(let s=r.length-1;s>0;s-=1){const i=Math.floor(n()*(s+1));[r[s],r[i]]=[r[i],r[s]]}return r}function Nk(e,t,n){if(t.kind==="builtin"&&t.key==="random"){const i=n??Date.now();return Ek(e,i)}let r=kk;t.kind==="metric"?r=Ck(t.key):t.key==="name"&&(r=$o);const s=[...e].sort(r);return t.dir==="desc"?s.reverse():s}const dm="leftW.folders",fm="leftW.metrics",jk="leftW",hm="rightW";function Mk(e,t){const[n,r]=d.useState(240),[s,i]=d.useState(320),[l,o]=d.useState(240),u=t==="metrics"?s:n,c=d.useRef(u),f=d.useRef(l);return d.useEffect(()=>{c.current=u},[u]),d.useEffect(()=>{f.current=l},[l]),d.useEffect(()=>{try{const w=window.localStorage,k=Number(w.getItem(dm)??w.getItem(jk));Number.isFinite(k)&&k>0&&r(k);const N=Number(w.getItem(fm));Number.isFinite(N)&&N>0&&i(N);const L=Number(w.getItem(hm));Number.isFinite(L)&&L>0&&o(L)}catch{}},[]),{leftW:u,rightW:l,onResizeLeft:w=>{w.preventDefault();const k=e.current;if(!k)return;const N=k.getBoundingClientRect(),L=t==="metrics"?fm:dm;let y=c.current;const m=v=>{const C=v.clientX-N.left,R=200,M=Math.max(R,N.width-f.current-200),b=Math.min(Math.max(C,R),M);y=b,t==="metrics"?i(b):r(b)},p=()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",p);try{window.localStorage.setItem(L,String(y))}catch{}};window.addEventListener("mousemove",m),window.addEventListener("mouseup",p)},onResizeRight:w=>{w.preventDefault();const k=e.current;if(!k)return;const N=k.getBoundingClientRect();let L=f.current;const y=p=>{const v=p.clientX-N.left,C=N.width-v,R=240,M=Math.max(R,N.width-c.current-200),b=Math.min(Math.max(C,R),M);L=b,f.current=b,o(b)},m=()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",m);try{window.localStorage.setItem(hm,String(L))}catch{}};window.addEventListener("mousemove",y),window.addEventListener("mouseup",m)}}}function Rk({x:e,y:t,items:n}){return a.jsx("div",{className:"dropdown-panel fixed",role:"menu",style:{left:e,top:t,minWidth:180},onClick:r=>r.stopPropagation(),children:n.map((r,s)=>a.jsxs("button",{className:`dropdown-item w-full ${r.danger?"text-danger hover:text-danger":""}`,role:"menuitem","aria-disabled":r.disabled,disabled:r.disabled,onClick:i=>{i.stopPropagation(),r.disabled||r.onClick()},children:[r.icon&&a.jsx("span",{className:"shrink-0",children:r.icon}),a.jsx("span",{children:r.label})]},s))})}function mm(e){return JSON.stringify(e,null,2)}function pm(e){const t=s=>'"'+s.replaceAll('"','""')+'"',n="path,folder,name,star,type,size,width,height,tags,notes",r=e.map(s=>{const i=(s.tags||[]).join(" "),l=s.notes||"";return[s.path,s.folder,s.name,String(s.star??""),s.type??"",s.size??"",s.width??"",s.height??"",i,l].map(o=>t(String(o))).join(",")});return[n,...r].join(`
`)}function gm(e){return e.map(t=>{const n=t.path.split("/").filter(Boolean);n.pop();const r=n.length?`/${n.join("/")}`:"/";return{path:t.path,folder:r,name:t.name,star:t.star??null,type:t.type,size:t.size,width:t.w,height:t.h}})}function Lk(e,t=250){const[n,r]=ao.useState(e);return ao.useEffect(()=>{const s=window.setTimeout(()=>r(e),Math.max(0,t));return()=>window.clearTimeout(s)},[e,t]),n}const Fv="application/x-lenslet-paths",Tk='[role="treeitem"].drop-target';function vm(e){var n;return Array.from(((n=e.dataTransfer)==null?void 0:n.types)||[]).includes(Fv)}function _k(e){document.querySelectorAll(Tk).forEach(t=>{t!==e&&t.classList.remove("drop-target")})}function ym(e){_k(e),e.classList.add("drop-target")}function xm(e){return e.startsWith("/")?e:`/${e}`}function Pk({path:e,isLeaf:t}){const n=br(),r=d.useCallback(o=>{vm(o)&&(o.preventDefault(),t&&ym(o.currentTarget))},[t]),s=d.useCallback(o=>{!t||!vm(o)||(o.preventDefault(),ym(o.currentTarget))},[t]),i=d.useCallback(o=>{const u=o.currentTarget,c=document.elementFromPoint(o.clientX,o.clientY);c&&u.contains(c)||u.classList.remove("drop-target")},[]),l=d.useCallback(async o=>{const u=o.dataTransfer;if(!u)return;o.preventDefault(),o.currentTarget.classList.remove("drop-target");const c=u.getData(Fv),h=(c?JSON.parse(c):[]).filter(Boolean);if(!h.length)return;let g=h[0].split("/").slice(0,-1).join("/")||"/";g=xm(g);const w=xm(e);try{for(const k of h)await ke.moveFile(k,w);n.invalidateQueries({queryKey:["folder",g]}),n.invalidateQueries({queryKey:["folder",w]}),n.setQueryData(["folder",g],k=>!k||!Array.isArray(k.items)?k:{...k,items:k.items.filter(N=>!h.includes(N.path))})}catch{}},[e,n]);return{onDragOver:r,onDragEnter:s,onDragLeave:i,onDrop:l}}const Ik='[role="tree"] [role="treeitem"]';function Fk(){return Array.from(document.querySelectorAll(Ik))}function Ok(e,t){var i;const n=Fk(),r=n.findIndex(l=>l===e);if(r===-1)return;let s=r;t==="ArrowDown"?s=Math.min(n.length-1,r+1):t==="ArrowUp"?s=Math.max(0,r-1):t==="Home"?s=0:t==="End"&&(s=n.length-1),(i=n[s])==null||i.focus()}function Dk({path:e,isLeaf:t,isExpanded:n,setExpanded:r,onOpen:s}){return d.useCallback(i=>{if(i.key==="Enter"){i.preventDefault(),s(e);return}if(i.key==="ArrowRight"){!t&&!n&&(i.preventDefault(),r(l=>{const o=new Set(l);return o.add(e),o}));return}if(i.key==="ArrowLeft"){!t&&n&&(i.preventDefault(),r(l=>{const o=new Set(l);return o.delete(e),o}));return}(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="Home"||i.key==="End")&&(i.preventDefault(),Ok(i.currentTarget,i.key))},[e,t,n,r,s])}function zk({current:e,roots:t,data:n,onOpen:r,onResize:s,onContextMenu:i,countVersion:l,className:o,showResizeHandle:u=!0}){const[c,f]=d.useState(new Set(["/"])),h=d.useRef(new Map),g=d.useRef(new Map),w=br(),k=d.useCallback(async L=>{const y=Dn(L||"/"),m=h.current,p=g.current,v=m.get(y);if(v!==void 0)return v;const C=w.getQueryData(Ev(y,{recursive:!0}));if(C){const b=C.totalItems??C.items.length;return m.set(y,b),b}const R=p.get(y);if(R)return R;const M=(async()=>{try{const b=await ke.getFolder(y,{recursive:!0}),T=b.totalItems??b.items.length;return m.set(y,T),T}finally{p.delete(y)}})();return p.set(y,M),M},[w]);d.useEffect(()=>{h.current.clear(),g.current.clear()},[l]),d.useEffect(()=>{const L=e.split("/").filter(Boolean),y=["/"];let m="";for(const p of L)m=m?`${m}/${p}`:`/${p}`,y.push(m);f(p=>{const v=new Set(p);for(const C of y)v.add(C);return v})},[e]);const N=o??"h-full overflow-auto bg-panel scrollbar-thin";return a.jsxs("div",{className:N,children:[a.jsx("div",{className:"p-1",role:"tree","aria-label":"Folders",children:t.map(L=>a.jsx(Ov,{path:L.path,label:L.label,depth:0,current:e,expanded:c,setExpanded:f,onOpen:r,onContextMenu:i,initial:n,getSubtreeCount:k,countVersion:l},L.path))}),u&&a.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 left-[calc(var(--left)-3px)] hover:bg-accent/20",onMouseDown:s})]})}function Ov({path:e,label:t,depth:n,current:r,expanded:s,setExpanded:i,onOpen:l,onContextMenu:o,initial:u,getSubtreeCount:c,countVersion:f}){var E;const h=s.has(e),g=r===e,w=e==="/"||h||g,{data:k}=Nc(e,!1,{enabled:w}),N=u&&e===u.path?u:k,y=!!N?N.dirs.length===0:!1,[m,p]=d.useState(N?N.items.length:null),v=Dk({path:e,isLeaf:y,isExpanded:h,setExpanded:i,onOpen:l}),{onDragOver:C,onDragEnter:R,onDragLeave:M,onDrop:b}=Pk({path:e,isLeaf:y}),T=_=>{_.stopPropagation(),i(Q=>{const F=new Set(Q);return F.has(e)?F.delete(e):F.add(e),F})};return d.useEffect(()=>{let _=!1;if(!N){p(null);return}if(p(N.items.length),!!(h&&(n>0||g)))return c(e).then(F=>{_||p(F)}).catch(F=>{_||console.warn(`Failed to compute subtree count for ${e}:`,F)}),()=>{_=!0}},[N,e,c,f,h,n,g]),a.jsxs("div",{children:[a.jsxs("div",{className:`flex items-center gap-1.5 py-0.5 px-2 rounded-md cursor-pointer min-h-[28px] outline-none transition-colors duration-75 ${g?"bg-accent/20 text-accent font-medium":"hover:bg-white/5 text-text"}`,role:"treeitem","aria-level":n+1,"aria-expanded":y?void 0:h,"aria-selected":g,tabIndex:g?0:-1,style:{paddingLeft:8+n*14},onClick:()=>l(e),onContextMenu:_=>{_.preventDefault(),_.stopPropagation(),o&&o(_,e)},onKeyDown:v,onDragOver:C,onDragEnter:R,onDragLeave:M,onDrop:b,children:[a.jsx("span",{className:"w-4 text-center opacity-60 hover:opacity-100 text-[10px]",onClick:T,children:h?"":""}),a.jsx("span",{className:"flex-1 overflow-hidden truncate text-sm",title:t,children:MS(t,28)}),m!==null&&a.jsx("span",{className:"text-[10px] opacity-50 bg-white/5 border border-white/5 rounded px-1.5 min-w-[24px] text-center",children:m})]}),h&&((E=N==null?void 0:N.dirs)==null?void 0:E.map(_=>a.jsx(Ov,{path:ek(e,_.name),label:_.name,depth:n+1,current:r,expanded:s,setExpanded:i,onOpen:l,onContextMenu:o,getSubtreeCount:c,countVersion:f},_.name)))]})}const Or=40,Ak=12,wm=[5,4,3,2,1],Sm=["<","<=",">",">="];function $k({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:l,onChangeRange:o,onChangeFilters:u}){const c=r&&r.length?a.jsx(Uk,{selectedItems:r,metricKeys:n}):null,f=a.jsx(Bk,{filters:l,onChangeFilters:u});return n.length?a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,a.jsx(Wk,{items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:l,onChangeRange:o}),f]}):a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,f,a.jsx("div",{className:"p-4 text-sm text-muted",children:"No metrics found in this dataset."})]})}function Uk({selectedItems:e,metricKeys:t}){const n=d.useMemo(()=>{if(!e.length)return null;const u=new Map;for(const h of e){const g=h.metrics;if(g)for(const[w,k]of Object.entries(g)){if(k==null||Number.isNaN(k))continue;const N=u.get(w);N?N.push(k):u.set(w,[k])}}return u.size?{entries:(t.length?t.filter(h=>u.has(h)):Array.from(u.keys()).sort()).map(h=>{const g=u.get(h)??[],w=Math.min(...g),k=Math.max(...g),N=g.reduce((L,y)=>L+y,0)/Math.max(1,g.length);return{key:h,value:g[0],min:w,max:k,avg:N,count:g.length}}),totalItems:e.length}:null},[e,t]);if(!n)return null;const{entries:r,totalItems:s}=n,i=r.slice(0,Ak),l=r.length-i.length,o=s>1;return a.jsxs("div",{className:"ui-card",children:[a.jsxs("div",{className:"ui-card-header",children:[a.jsx("div",{className:"ui-section-title",children:"Selected metrics"}),a.jsxs("div",{className:"text-[11px] text-muted",children:[s," item",s===1?"":"s"]})]}),a.jsxs("div",{className:"space-y-1 text-[12px]",children:[i.map(u=>a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-muted w-28 shrink-0 truncate",title:u.key,children:u.key}),a.jsxs("span",{className:"font-mono text-text text-right tabular-nums",children:[o?`${_t(u.min)}  ${_t(u.max)}`:_t(u.value),o&&a.jsxs("span",{className:"text-[11px] text-muted ml-2",children:["avg ",_t(u.avg),u.count!==s?`  ${u.count}/${s}`:""]})]})]},u.key)),l>0&&a.jsxs("div",{className:"text-[11px] text-muted",children:["+",l," more"]})]})]})}function Bk({filters:e,onChangeFilters:t}){const n=d.useMemo(()=>ok(e),[e]),r=d.useMemo(()=>ak(e),[e]),s=d.useMemo(()=>uk(e)??"",[e]),i=d.useMemo(()=>ck(e)??"",[e]),l=d.useMemo(()=>dk(e)??"",[e]),o=d.useMemo(()=>fk(e)??"",[e]),u=d.useMemo(()=>hk(e)??"",[e]),c=d.useMemo(()=>mk(e)??"",[e]),f=d.useMemo(()=>pk(e)??{},[e]),h=d.useMemo(()=>Mm(f.from),[f.from]),g=d.useMemo(()=>Mm(f.to),[f.to]),w=d.useMemo(()=>gk(e),[e]),k=d.useMemo(()=>vk(e),[e]),[N,L]=d.useState((w==null?void 0:w.op)??">="),[y,m]=d.useState((k==null?void 0:k.op)??">=");d.useEffect(()=>{w!=null&&w.op&&L(w.op)},[w==null?void 0:w.op]),d.useEffect(()=>{k!=null&&k.op&&m(k.op)},[k==null?void 0:k.op]);const p=(v,C)=>{const R=new Set(n),M=new Set(r);v==="include"?R.has(C)?R.delete(C):(R.add(C),M.delete(C)):M.has(C)?M.delete(C):(M.add(C),R.delete(C));let b=jv(e,Array.from(R));b=Mv(b,Array.from(M)),t(b)};return a.jsxs("div",{className:"ui-card",children:[a.jsx("div",{className:"ui-section-title mb-3",children:"Attributes"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Rating"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Include"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[wm.map(v=>{const C=n.includes(v);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${C?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",v),"aria-pressed":C,title:`Include ${v} star${v>1?"s":""}`,children:[v,""]},`stars-in-${v}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${n.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",0),"aria-pressed":n.includes(0),title:"Include unrated",children:"None"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Exclude"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[wm.map(v=>{const C=r.includes(v);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${C?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",v),"aria-pressed":C,title:`Exclude ${v} star${v>1?"s":""}`,children:[v,""]},`stars-out-${v}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${r.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",0),"aria-pressed":r.includes(0),title:"Exclude unrated",children:"None"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Filename"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:s,placeholder:"e.g. draft",onChange:v=>t(Rv(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:i,placeholder:"e.g. v1",onChange:v=>t(Lv(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Comments"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:l,placeholder:"e.g. hero",onChange:v=>t(Tv(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:o,placeholder:"e.g. todo",onChange:v=>t(_v(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"URL"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:u,placeholder:"e.g. s3://bucket",onChange:v=>t(Pv(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:c,placeholder:"e.g. http://",onChange:v=>t(Iv(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Date Added"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"From"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:h,onChange:v=>t(Mc(e,{from:v.target.value||null,to:f.to??null}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"To"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:g,onChange:v=>t(Mc(e,{from:f.from??null,to:v.target.value||null}))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Dimensions"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Width"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:N,onChange:v=>{const C=v.target.value;L(C),w&&t(lo(e,{op:C,value:w.value}))},children:Sm.map(v=>a.jsx("option",{value:v,children:v},`w-${v}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:w?String(w.value):"",min:0,placeholder:"px",onChange:v=>{const C=v.target.value;if(!C){t(lo(e,null));return}const R=Number(C);Number.isFinite(R)&&t(lo(e,{op:N,value:R}))}})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Height"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:y,onChange:v=>{const C=v.target.value;m(C),k&&t(oo(e,{op:C,value:k.value}))},children:Sm.map(v=>a.jsx("option",{value:v,children:v},`h-${v}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:k?String(k.value):"",min:0,placeholder:"px",onChange:v=>{const C=v.target.value;if(!C){t(oo(e,null));return}const R=Number(C);Number.isFinite(R)&&t(oo(e,{op:y,value:R}))}})]})]})]})]})]})]})}function Wk({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:l,onChangeRange:o}){const[u,c]=d.useState(!1),f=s&&n.includes(s)?s:n[0];return a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("label",{className:"ui-label",children:"Metric"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-[11px]",onClick:()=>c(h=>!h),"aria-pressed":u,children:u?"Show one":"Show all"})]}),u?a.jsx("div",{className:"ui-input ui-input-readonly w-full flex items-center text-xs",children:"All metrics"}):a.jsx("select",{className:"ui-select w-full",value:f,onChange:h=>i(h.target.value),children:n.map(h=>a.jsx("option",{value:h,children:h},h))})]}),u?a.jsx("div",{className:"space-y-3",children:n.map(h=>a.jsx(km,{metricKey:h,items:e,filteredItems:t,selectedItems:r,filters:l,onChangeRange:o,showTitle:!0},h))}):f?a.jsx(km,{metricKey:f,items:e,filteredItems:t,selectedItems:r,filters:l,onChangeRange:o}):a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]})}function km({items:e,filteredItems:t,metricKey:n,selectedItems:r,filters:s,onChangeRange:i,showTitle:l=!1}){const o=d.useMemo(()=>Cm(e,n),[e,n]),u=d.useMemo(()=>lu(o,Or),[o]),c=d.useMemo(()=>Cm(t,n),[t,n]),f=d.useMemo(()=>u?lu(c,Or,u):null,[c,u]),h=yk(s,n),[g,w]=d.useState(null),[k,N]=d.useState(!1),L=d.useRef(null),y=d.useRef(null),m=d.useRef(!1),p=d.useRef(null),[v,C]=d.useState(null),[R,M]=d.useState(""),[b,T]=d.useState(""),[E,_]=d.useState(null),Q=g??h,F=u?{min:u.min,max:u.max}:null,$=d.useMemo(()=>{var Y;if(!(r!=null&&r.length))return[];const H=[];for(const ee of r){const pe=(Y=ee.metrics)==null?void 0:Y[n];pe==null||Number.isNaN(pe)||H.push(pe)}return H},[r,n]),ie=$.length===1?$[0]:null,U=d.useMemo(()=>!u||$.length<2?null:lu($,Or,u),[$,u]);d.useEffect(()=>{if(!h||!F){E!=="min"&&M(h?Kn(h.min):""),E!=="max"&&T(h?Kn(h.max):"");return}if(E!=="min"){const H=us(h.min,F.min)?"":Kn(h.min);M(H)}if(E!=="max"){const H=us(h.max,F.max)?"":Kn(h.max);T(H)}},[h,F,E]),d.useEffect(()=>{C(null)},[n,F==null?void 0:F.min,F==null?void 0:F.max]);const le=H=>{var pe;if(!F)return null;const Y=(pe=p.current)==null?void 0:pe.getBoundingClientRect();if(!Y)return null;const ee=zd((H.clientX-Y.left)/Y.width);return F.min+(F.max-F.min)*ee},I=(H,Y)=>{if(!F)return;const ee=L.current??H,pe=Em(ee,H);w(pe),Y&&i(n,pe)},V=H=>{var ee;if(!F)return;H.preventDefault();const Y=le(H);Y!=null&&(N(!0),w(null),L.current=Y,y.current=H.clientX,m.current=!1,C(Y),(ee=p.current)==null||ee.setPointerCapture(H.pointerId))},q=H=>{const Y=le(H);if(Y==null){k||C(null);return}if(C(Y),k){const ee=y.current;if(!m.current&&ee!=null){if(Math.abs(H.clientX-ee)<4)return;m.current=!0}m.current&&I(Y,!1)}},fe=H=>{var ee;if(!k)return;N(!1),(ee=p.current)==null||ee.releasePointerCapture(H.pointerId);const Y=le(H);m.current&&Y!=null?(C(Y),I(Y,!0)):h&&i(n,null),L.current=null,y.current=null,m.current=!1,setTimeout(()=>w(null),0)},ue=(H,Y)=>{if(!F)return;const ee=Nm(H),pe=Nm(Y);if(!ee.valid||!pe.valid){ee.valid||M(h?Kn(h.min):""),pe.valid||T(h?Kn(h.max):"");return}if(ee.value==null&&pe.value==null){i(n,null);return}const Me=ee.value??F.min,He=pe.value??F.max,$e=jm(Me,F.min,F.max),Je=jm(He,F.min,F.max),Ve=Em($e,Je);if(us(Ve.min,F.min)&&us(Ve.max,F.max)){i(n,null);return}i(n,Ve)};if(!u||!F)return a.jsxs("div",{className:"ui-card",children:[l&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]});const je=$.length;return a.jsxs("div",{className:"ui-card",children:[l&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mb-2 tabular-nums",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{children:["Population: ",u.count]}),a.jsxs("span",{children:["Filtered: ",(f==null?void 0:f.count)??0]}),je>1&&a.jsxs("span",{className:"text-text",children:["Selected: ",je]})]}),ie!=null&&a.jsxs("span",{className:"text-text",children:["Selected: ",_t(ie)]})]}),a.jsxs("svg",{ref:p,viewBox:`0 0 ${Or} 100`,preserveAspectRatio:"none",className:"w-full h-28 cursor-crosshair rounded-md bg-surface-inset",onPointerDown:V,onPointerMove:q,onPointerUp:fe,onPointerLeave:()=>C(null),children:[ou(u.bins,"#2e3a4b"),f&&ou(f.bins,"#3a8fff"),U&&ou(U.bins,"#f59e0b",{opacity:.55}),Q&&Hk(Q,F),ie!=null&&bm(ie,F,{color:"var(--highlight)",strokeWidth:.7}),v!=null&&bm(v,F,{color:"rgba(255,255,255,0.75)",strokeWidth:.5,dashed:!0})]}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mt-2 tabular-nums",children:[a.jsx("span",{children:_t(F==null?void 0:F.min)}),a.jsxs("div",{className:"flex flex-col items-center text-center leading-tight",children:[Q?a.jsx("span",{className:"text-text",children:us(Q.min,F.min)?` ${_t(Q.max)}`:us(Q.max,F.max)?` ${_t(Q.min)}`:`${_t(Q.min)}  ${_t(Q.max)}`}):v!=null?a.jsxs("span",{className:"text-text",children:["Cursor: ",_t(v)]}):a.jsx("span",{children:"Drag to filter"}),Q&&v!=null&&a.jsxs("span",{className:"text-[11px] text-muted",children:["Cursor: ",_t(v)]})]}),a.jsx("span",{children:_t(F==null?void 0:F.max)})]}),a.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-2 mt-3 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Min"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:R,placeholder:Kn(F.min),onFocus:()=>_("min"),onBlur:()=>{_(null),ue(R,b)},onChange:H=>M(H.target.value),onKeyDown:H=>{H.key==="Enter"&&H.currentTarget.blur()}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Max"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:b,placeholder:Kn(F.max),onFocus:()=>_("max"),onBlur:()=>{_(null),ue(R,b)},onChange:H=>T(H.target.value),onKeyDown:H=>{H.key==="Enter"&&H.currentTarget.blur()}})]}),a.jsx("button",{className:"btn btn-xs btn-ghost text-muted hover:text-text",onClick:()=>i(n,null),children:"Clear"})]})]})}function lu(e,t,n){if(!e.length)return null;const r=n?n.min:Math.min(...e);let s=n?n.max:Math.max(...e);r===s&&(s=r+1);const i=new Array(t).fill(0),l=t/(s-r);for(const o of e){const u=Math.max(0,Math.min(t-1,Math.floor((o-r)*l)));i[u]+=1}return{bins:i,min:r,max:s,count:e.length}}function Cm(e,t){var r;const n=[];for(const s of e){const i=(r=s.metrics)==null?void 0:r[t];i==null||Number.isNaN(i)||n.push(i)}return n}function ou(e,t,n){const r=Math.max(1,...e),s=(n==null?void 0:n.opacity)??.9;return e.map((i,l)=>{const o=i/r*100;return a.jsx("rect",{x:l+.05,y:100-o,width:.9,height:o,fill:t,opacity:s},`${t}-${l}`)})}function Hk(e,t){const n=(e.min-t.min)/(t.max-t.min),r=(e.max-t.min)/(t.max-t.min),s=Or*zd(Math.min(n,r)),i=Or*Math.abs(r-n);return a.jsx("rect",{x:s,y:0,width:Math.max(.5,i),height:100,fill:"rgba(255,255,255,0.08)",stroke:"rgba(255,255,255,0.4)",strokeWidth:.4})}function bm(e,t,n){const r=zd((e-t.min)/(t.max-t.min)),s=Or*r;return a.jsx("line",{x1:s,y1:0,x2:s,y2:100,stroke:n.color,strokeWidth:n.strokeWidth??.5,strokeDasharray:n.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function Em(e,t){return e<t?{min:e,max:t}:{min:t,max:e}}function zd(e){return e<0?0:e>1?1:e}function _t(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Kn(e){if(!Number.isFinite(e))return"";const t=e.toString();return t.includes("e")?e.toFixed(6):t}function Nm(e){const t=e.trim();if(!t)return{value:null,valid:!0};const n=Number(t);return Number.isFinite(n)?{value:n,valid:!0}:{value:null,valid:!1}}function jm(e,t,n){return e<t?t:e>n?n:e}function us(e,t){const n=Math.max(1,Math.abs(e),Math.abs(t));return Math.abs(e-t)<=1e-6*n}function Mm(e){return e?e.length>=10?e.slice(0,10):e:""}const Vk=[{label:"Root",path:"/"}];function Qk({leftTool:e,onToolChange:t,compareEnabled:n,compareActive:r,onOpenCompare:s,views:i,activeViewId:l,onActivateView:o,onSaveView:u,current:c,data:f,onOpenFolder:h,onContextMenu:g,countVersion:w,items:k,filteredItems:N,metricKeys:L,selectedItems:y,selectedMetric:m,onSelectMetric:p,filters:v,onChangeRange:C,onChangeFilters:R,onResize:M}){const b=e==="folders"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",T=e==="metrics"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",E=r?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover";return a.jsxs("div",{className:"app-left-panel col-start-1 row-start-2 relative border-r border-border bg-panel overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-y-0 left-0 w-10 border-r border-border flex flex-col items-center gap-2 py-3 bg-surface-overlay",children:[a.jsx("button",{className:b,title:"Folders","aria-label":"Folders","aria-pressed":e==="folders",onClick:()=>t("folders"),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M3 7.5h6l2-2h10a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2z"})})}),a.jsx("button",{className:T,title:"Metrics / Filters","aria-label":"Metrics and Filters","aria-pressed":e==="metrics",onClick:()=>t("metrics"),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]})}),a.jsx("div",{className:"w-6 h-px bg-border/70 my-1"}),a.jsx("button",{className:`${E} ${n?"":"opacity-40 cursor-not-allowed"}`,title:n?"Compare selected images":"Compare (select 2+)","aria-label":"Compare selected images","aria-pressed":r,"aria-disabled":!n,disabled:!n,onClick:()=>{n&&s()},children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("rect",{x:"3",y:"4",width:"8",height:"16",rx:"1"}),a.jsx("rect",{x:"13",y:"4",width:"8",height:"16",rx:"1"})]})})]}),a.jsx("div",{className:"ml-10 h-full",children:e==="folders"?a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"px-2 py-2 border-b border-border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Smart Folders"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:u,title:"Save current view as Smart Folder",children:"+ New"})]}),i.length?a.jsx("div",{className:"flex flex-col gap-1",children:i.map(_=>{const Q=_.id===l;return a.jsx("button",{className:`text-left px-2 py-1.5 rounded-md text-sm ${Q?"bg-accent-muted text-accent":"hover:bg-hover text-text"}`,onClick:()=>o(_),children:_.name},_.id)})}):a.jsx("div",{className:"text-xs text-muted px-1 py-1.5",children:"No saved Smart Folders yet."})]}),a.jsx(zk,{current:c,roots:Vk,data:f,onOpen:h,onContextMenu:g,countVersion:w,className:"flex-1 min-h-0 overflow-auto scrollbar-thin",showResizeHandle:!1})]}):a.jsx($k,{items:k,filteredItems:N,metricKeys:L,selectedItems:y,selectedMetric:m,onSelectMetric:p,filters:v,onChangeRange:C,onChangeFilters:R})}),a.jsx("div",{className:"toolbar-offset absolute bottom-0 right-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20",onMouseDown:M})]})}function Kk({persistenceEnabled:e,recentSummary:t,onDismissRecent:n,onCloseRecent:r,browserZoomPercent:s}){const i=t?` (${t.names.join(", ")}${t.extra?` +${t.extra}`:""})`:"",l=!!(t!=null&&t.names.length),o=typeof s=="number"?s:null,u=o!==null&&Math.abs(o-100)>=2;return!e||u||!!t?a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-col gap-2",children:[!e&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("span",{className:"font-semibold",children:"Not persisted."})," Workspace is read-only; edits stay in memory until restart."]}),u&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs",children:[a.jsxs("span",{className:"font-semibold",children:["Browser zoom ",Math.round(o),"%."]})," For best results, set it to 100% so UI elements stay in correct proportions."]}),t&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex items-center justify-between gap-3",children:[a.jsxs("span",{children:["Recent updates: ",t.count," item",t.count===1?"":"s",l?i:""]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"text-muted hover:text-text transition-colors",onClick:n,"aria-label":"Hide recent activity until refresh",children:"Hide until refresh"}),a.jsx("button",{className:"text-muted hover:text-text transition-colors text-base leading-none",onClick:r,"aria-label":"Close recent activity",children:""})]})]})]})}):a.jsx(a.Fragment,{})}const Rm=6e3,qk=15*6e4,Yk=1e4,Gk=24*60*6e4;function Dv(e){if(!e.length)return e;const t=new Set,n=[];for(const r of e)t.has(r.path)||(t.add(r.path),n.push(r));return n}function zv(e){return{...e,items:Dv(e.items)}}function Xk(e,t){const n=e.pageCount??1,r=e.pageSize??t,s=(e.page??1)+1;return n<=1||s>n?null:{startPage:s,endPage:n,pageSize:r}}function Jk(e,t){if(e.path!==t.path)return zv(t);const n=Dv([...e.items,...t.items]);return{...e,generatedAt:t.generatedAt??e.generatedAt,dirs:e.dirs.length?e.dirs:t.dirs,items:n,page:t.page??e.page,pageSize:t.pageSize??e.pageSize,pageCount:t.pageCount??e.pageCount,totalItems:t.totalItems??e.totalItems}}async function Zk(e,t){const n=t.shouldContinue??(()=>!0);let r=zv(e);t.onUpdate(r);const s=Xk(e,t.defaultPageSize);if(s)for(let i=s.startPage;i<=s.endPage;i+=1){let l;try{l=await t.fetchPage(i,s.pageSize)}catch{return}if(!n())return;r=Jk(r,l),t.onUpdate(r)}}const Av=[-2,-1,1,2],$v=[-2,-1,0,1,2,3];Av.length;$v.length;function eC(e,t,n){return Math.min(Math.max(e,t),n)}function Uv(e,t,n){const r=new Set,s=[];for(const i of n){const l=t+i;if(l<0||l>=e.length)continue;const o=e[l];!o||r.has(o)||(r.add(o),s.push(o))}return s}function tC(e,t){if(!t)return[];const n=e.indexOf(t);return n<0?[]:Uv(e,n,Av)}function nC(e,t){if(e.length<2)return[];const n=Math.max(0,e.length-2),r=eC(t,0,n);return Uv(e,r,$v)}const Ue={sortKey:"sortKey",sortDir:"sortDir",sortSpec:"sortSpec",starFilters:"starFilters",filterAst:"filterAst",selectedMetric:"selectedMetric",viewMode:"viewMode",gridItemSize:"gridItemSize",leftOpen:"leftOpen",rightOpen:"rightOpen"};function rC(e){switch(e){case"live":return"Live";case"reconnecting":return"Reconnecting";case"offline":return"Offline";case"connecting":case"idle":default:return"Connecting"}}function sC(e){return e.isOffline?"offline":e.isUnstable?"unstable":e.recentEditActive?"recent":e.editingActive?"editing":"live"}function Lm(e,t){for(const n of e)ke.prefetchFile(n,t),ke.prefetchThumb(n)}function Bv(e,t){return t-e<Gk?TS(e,t):_S(e)}function iC(e,t){if(!e.length)return null;const n=new Set,r=[];for(const i of e)n.has(i.path)||(n.add(i.path),r.push(i.path));const s=r.slice(0,2).map(i=>{const l=t.find(o=>o.path===i);return(l==null?void 0:l.name)??i.split("/").pop()??i});return{count:r.length,names:s,extra:Math.max(0,r.length-s.length)}}function lC(e,t,n){return e.length?e.map(r=>{const s=t.find(o=>o.path===r.path),i=(s==null?void 0:s.name)??r.path.split("/").pop()??r.path,l=Bv(r.ts,n);return{path:r.path,label:i,timeLabel:l}}):[]}function oC(e,t){return e?t instanceof wn||t instanceof Error?t.message:"Failed to load embeddings.":null}function aC(e,t,n,r){return e||t?n:r}function uC(e,t,n,r,s,i){return e?n:t||i==="/"?r:s}function cC(){var of,af,uf;const[e,t]=d.useState("/"),[n,r]=d.useState(""),[s,i]=d.useState([]),[l,o]=d.useState(!1),[u,c]=d.useState(null),[f,h]=d.useState(null),[g,w]=d.useState(!1),[k,N]=d.useState(0),[L,y]=d.useState(0),[m,p]=d.useState(null),[v,C]=d.useState(100),[R,M]=d.useState(null),[b,T]=d.useState(()=>({filters:{and:[]},sort:{kind:"builtin",key:"added",dir:"desc"},selectedMetric:void 0})),[E,_]=d.useState(()=>Date.now()),[Q,F]=d.useState("adaptive"),[$,ie]=d.useState(220),[U,le]=d.useState(!0),[I,V]=d.useState(!0),[q,fe]=d.useState("folders"),[ue,je]=d.useState([]),[H,Y]=d.useState(null),[ee,pe]=d.useState(0),[Me,He]=d.useState({}),$e=d.useRef(null),Je=d.useRef(null),Ve=d.useRef(null),kn=d.useRef(null),be=d.useRef(!1),kt=d.useRef(!1),At=d.useRef(null),cn=d.useRef(null),{leftW:B,rightW:se,onResizeLeft:oe,onResizeRight:he}=Mk($e,q),[ce,ge]=d.useState(!1),[D,re]=d.useState(null),de=br(),Ee=xS(),Le=ia(),z=SS(),[te,xe]=d.useState("idle"),[me,Tt]=d.useState({}),[Ct,al]=d.useState([]),[rs,ti]=d.useState([]),[nt,Er]=d.useState(null),[ul,Wv]=d.useState(!1),[Hv,Ad]=d.useState(new Set),aa=d.useRef(new Map),[Hn,Vv]=d.useState(null),[$d,Qv]=d.useState(null),[Kv,ua]=d.useState(!1),[ni,ca]=d.useState(()=>Date.now()),[qv,Yv]=d.useState(!0);d.useEffect(()=>{const x=P=>{const O=Dn(P),W=ZS(O)?O:null,J=W?sm(O):O;W?(h(W),i([W])):(h(null),be.current=!1),t(ae=>ae===J?ae:(y(G=>G+1),J))};x(nm());const j=()=>x(nm());return window.addEventListener("hashchange",j),()=>window.removeEventListener("hashchange",j)},[]),d.useEffect(()=>()=>{for(const x of aa.current.values())window.clearTimeout(x);aa.current.clear()},[]),d.useEffect(()=>{if($d==null){ua(!1);return}ua(!0);const x=window.setTimeout(()=>ua(!1),Rm);return()=>window.clearTimeout(x)},[$d]),d.useEffect(()=>{if(Hn==null)return;ca(Date.now());const x=window.setInterval(()=>ca(Date.now()),1e4);return()=>window.clearInterval(x)},[Hn]);const{data:cl,refetch:Ud,isLoading:SC,isError:kC}=Nc(e,!0,{page:1,pageSize:io}),[rt,Bd]=d.useState(),da=d.useRef(0),fa=d.useCallback(()=>Ud(),[Ud]),{data:ss}=Nc("/",!0,{enabled:!1,page:1,pageSize:io});d.useEffect(()=>{de.removeQueries({predicate:({queryKey:x})=>WS(x,e,!0)})},[e,de]),d.useEffect(()=>{da.current+=1,Bd(void 0)},[e]),d.useEffect(()=>{if(!cl)return;const x=++da.current;let j=!1;return Zk(cl,{defaultPageSize:io,fetchPage:(P,O)=>ke.getFolder(cl.path,{recursive:!0,page:P,pageSize:O}),onUpdate:Bd,shouldContinue:()=>!j&&da.current===x}),()=>{j=!0}},[cl]);const Gt=u!==null,Nr=!Gt&&n.trim().length>0,Wd=Lk(n,250),Hd=d.useMemo(()=>Wd.trim().replace(/\s+/g," "),[Wd]),dl=qS(Nr?Hd:"",e),is=GS(),Vd=((of=is.data)==null?void 0:of.embeddings)??[],Gv=((af=is.data)==null?void 0:af.rejected)??[],Xv=Vd.length>0,Jv=oC(is.isError,is.error),ha=d.useMemo(()=>im(b.filters),[b.filters]),$t=d.useMemo(()=>{var j;return(Nr?((j=dl.data)==null?void 0:j.items)??[]:(rt==null?void 0:rt.items)??[]).map(P=>({...P,star:Me[P.path]!==void 0?Me[P.path]:P.star}))},[Nr,dl.data,rt,Me]),Qd=d.useMemo(()=>{var P;const x=new Map;for(const O of $t)x.set(O.path,O);const j=((P=dl.data)==null?void 0:P.items)??[];for(const O of j){if(x.has(O.path))continue;const W=Me[O.path]!==void 0?Me[O.path]:O.star;x.set(O.path,{...O,star:W})}return x},[$t,dl.data,Me]),dn=d.useMemo(()=>u?u.items.map(x=>{const j=Qd.get(x.path);return j||vC(x.path,Me[x.path])}):[],[u,Qd,Me]),Qe=d.useMemo(()=>{if(u)return cm(dn,b.filters);const x=cm($t,b.filters);return Nk(x,b.sort,E)},[u,dn,$t,b.filters,b.sort,E]),ri=u?dn.length:$t.length,ma=Qe.length,Cn=d.useMemo(()=>Qe.map(x=>x.path),[Qe]),Kd=d.useMemo(()=>new Set(s),[s]),Zv=d.useMemo(()=>{if(!s.length)return[];const x=u?dn:$t,j=new Map(x.map(O=>[O.path,O])),P=new Map(Qe.map(O=>[O.path,O]));return s.map(O=>j.get(O)??P.get(O)).filter(O=>!!O)},[s,u,dn,$t,Qe]),Xt=d.useMemo(()=>Qe.filter(x=>Kd.has(x.path)),[Qe,Kd]),qd=d.useMemo(()=>Xt.map(x=>x.path),[Xt]),fl=Math.max(0,Xt.length-2),jr=Math.min(k,fl),ey=Xt[jr]??null,ty=Xt[jr+1]??null,ny=jr>0,ry=jr<Xt.length-2,si=Xt.length>=2,sy=u?dn:$t,ii=u?null:b.sort.kind==="metric"?b.sort.key:null,Yd=d.useMemo(()=>ii?Qe.some(x=>{var P;const j=(P=x.metrics)==null?void 0:P[ii];return j!=null&&!Number.isNaN(j)}):!1,[Qe,ii]);d.useEffect(()=>{N(x=>x>fl?fl:x)},[fl]);const Gd=d.useCallback(x=>{Ad(W=>{if(W.has(x))return W;const J=new Set(W);return J.add(x),J});const j=aa.current,P=j.get(x);P&&window.clearTimeout(P);const O=window.setTimeout(()=>{Ad(W=>{if(!W.has(x))return W;const J=new Set(W);return J.delete(x),J}),j.delete(x)},Rm);j.set(x,O)},[]),pa=d.useCallback(x=>{const j=Date.now(),O=Jh(x)??j,W=O>j?j:O;Vv(J=>J==null?W:J>W?J:W),Qv(j),ca(j)},[]),ga=d.useCallback((x,j,P)=>{const O=Date.now(),W=Jh(P)??O;ti(J=>{const ae=J.filter(Z=>Z.path!==x);return[{path:x,ts:W,kind:j},...ae].slice(0,10)})},[]),va=d.useCallback((x,j)=>{const P=Date.now();al(O=>{const W=O.filter(ae=>ae.path!==x);return[{path:x,ts:P,kind:j},...W].slice(0,6)}),Gd(x)},[Gd]),ya=d.useCallback(x=>{const j=Object.prototype.hasOwnProperty.call(x,"star"),P=x.metrics!==void 0,O=x.comments!==void 0;if(!j&&!P&&!O)return;const W=ae=>{if(ae.path!==x.path)return ae;let G=ae;return j&&ae.star!==x.star&&(G={...G,star:x.star??null}),P&&(G={...G,metrics:x.metrics??null}),O&&ae.comments!==x.comments&&(G={...G,comments:x.comments??""}),G},J=ae=>{if(!ae)return ae;let G=!1;const Z=ae.items.map(ye=>{const at=W(ye);return at!==ye&&(G=!0),at});return G?{...ae,items:Z}:ae};de.setQueriesData({predicate:({queryKey:ae})=>Array.isArray(ae)&&ae[0]==="folder"},J),de.setQueriesData({predicate:({queryKey:ae})=>Array.isArray(ae)&&ae[0]==="search"},J)},[de]),iy=d.useCallback(()=>{pe(x=>x+1)},[]);d.useEffect(()=>{m1();const x=g1(P=>{if(P.type==="presence"){const J=P.data;if(!(J!=null&&J.gallery_id))return;Tt(ae=>({...ae,[J.gallery_id]:J}));return}const O=P.data;if(!(O!=null&&O.path))return;const W=O.path;if(P.type==="item-updated"){const J=P.data,ae={v:1,tags:J.tags??[],notes:J.notes??"",star:J.star??null,version:J.version??1,updated_at:J.updated_at??"",updated_by:J.updated_by??"server"};de.setQueryData(Gi(W),ae),ya({path:W,star:J.star??null,metrics:J.metrics,comments:J.notes??""}),bS(W,ae),va(W,"item-updated"),ga(W,"item-updated",J.updated_at),pa(J.updated_at),He(G=>{if(G[W]===void 0)return G;const Z={...G};return delete Z[W],Z})}else if(P.type==="metrics-updated"){const J=P.data;ya({path:W,metrics:J.metrics}),va(W,"metrics-updated"),ga(W,"metrics-updated",J.updated_at),pa(J.updated_at)}}),j=v1(xe);return()=>{x(),j(),p1()}},[va,ga,de,ya,pa]),d.useEffect(()=>{let x=!1;const j=Dn(e||"/"),P=async()=>{try{const W=await ke.postPresence(j);!x&&(W!=null&&W.gallery_id)&&Tt(J=>({...J,[W.gallery_id]:W}))}catch{}};P();const O=window.setInterval(P,3e4);return()=>{x=!0,window.clearInterval(O)}},[e]),d.useEffect(()=>{let x=!1;return ke.getHealth().then(j=>{var O;if(x)return;const P=((O=j==null?void 0:j.labels)==null?void 0:O.enabled)??!0;Yv(P)}).catch(()=>{}),()=>{x=!0}},[]);const ly=d.useMemo(()=>{const x=u?dn:$t,j={0:0,1:0,2:0,3:0,4:0,5:0};for(const P of x){const O=Me[P.path]??P.star??0;j[String(O)]=(j[String(O)]||0)+1}return j},[u,dn,$t,Me]),Vn=d.useMemo(()=>{const x=new Set;let j=0;const P=u?dn:$t;for(const O of P){const W=O.metrics;if(W)for(const J of Object.keys(W))x.add(J);if(j+=1,j>=250&&x.size>0)break}return Array.from(x).sort()},[u,dn,$t]);d.useEffect(()=>{Gt||Vn.length&&T(x=>{const j=x.selectedMetric&&Vn.includes(x.selectedMetric)?x.selectedMetric:Vn[0];return j===x.selectedMetric?x:{...x,selectedMetric:j}})},[Vn,Gt]),d.useEffect(()=>{Gt||b.sort.kind==="metric"&&(Vn.includes(b.sort.key)||T(x=>({...x,sort:{kind:"builtin",key:"added",dir:x.sort.dir}})))},[Vn,b.sort,Gt]);const hl=d.useMemo(()=>wk(b.filters),[b.filters]),ml=(rt==null?void 0:rt.totalItems)??(rt==null?void 0:rt.items.length)??ri,oy=e==="/"?ml:(ss==null?void 0:ss.totalItems)??(ss==null?void 0:ss.items.length)??ml,Xd=Gt||Nr||hl>0,pl=me[e],ay=Ee.state==="syncing"?"Syncing":Ee.state==="error"?Ee.message?`Not saved  ${Ee.message}`:"Not saved  retry":"All changes saved",uy=rC(te),xa=Hn!=null,cy=d.useMemo(()=>!xa||Hn==null?"No edits yet.":Bv(Hn,ni),[xa,Hn,ni]),Jd=Hn==null?null:Math.max(0,ni-Hn),dy=((pl==null?void 0:pl.editing)??0)>0||Jd!=null&&Jd<qk,fy=z!=null&&z>Yk,hy=te==="offline"||te==="connecting"||te==="idle",my=te==="reconnecting"||Le||Ee.state==="error"||fy,py=sC({isOffline:hy,isUnstable:my,recentEditActive:Kv,editingActive:dy}),gy=d.useMemo(()=>iC(Ct,Qe),[Ct,Qe]),wa=d.useMemo(()=>Ct.length?Ct.reduce((x,j)=>Math.max(x,j.ts),0):null,[Ct]),vy=ul||nt!=null&&wa!=null&&wa<=nt?null:gy,yy=d.useMemo(()=>lC(rs,Qe,ni),[Qe,ni,rs]),xy=aC(Gt,Xd,ma,ml),wy=uC(Gt,Xd,ri,ml,oy,e),Zd=d.useMemo(()=>{if(!u)return null;if(u.queryPath){const x=u.queryPath.split("/").filter(Boolean);return x.length?x[x.length-1]:u.queryPath}return u.queryVector?"Vector query":null},[u]),ef=d.useMemo(()=>u?hl>0?`${ma} of ${ri}`:`${ri}`:null,[u,hl,ma,ri]),mt=d.useCallback(x=>{T(j=>({...j,filters:x(j.filters)}))},[]),Sy=d.useCallback(x=>{T(j=>({...j,filters:x}))},[]),gl=d.useCallback(()=>{mt(x=>iu(x,[]))},[mt]),tf=d.useCallback(()=>{T(x=>({...x,filters:{and:[]}}))},[]),ky=d.useCallback(()=>{c(null);const x=cn.current;cn.current=null,x&&x.length?(i(x),y(j=>j+1)):i([])},[]),Cy=d.useCallback(async x=>{!u&&cn.current===null&&(cn.current=s);const j=await ke.searchEmbeddings(x);if(c({embedding:j.embedding,queryPath:x.query_path??null,queryVector:x.query_vector_b64??null,topK:x.top_k??50,minScore:x.min_score??null,items:j.items,createdAt:Date.now()}),j.items.length){const P=x.query_path&&j.items.some(O=>O.path===x.query_path)?x.query_path:j.items[0].path;i([P]),y(O=>O+1)}else i([])},[u,s]),Sa=d.useCallback((x,j)=>{mt(P=>xk(P,x,j))},[mt]),nf=d.useMemo(()=>{var j,P,O,W,J,ae;const x=[];for(const G of b.filters.and)if("stars"in G){const Z=G.stars||[];if(!Z.length)continue;x.push({id:"stars",label:`Rating in: ${au(Z)}`,onRemove:()=>gl()})}else if("starsIn"in G){const Z=G.starsIn.values||[];if(!Z.length)continue;x.push({id:"stars-in",label:`Rating in: ${au(Z)}`,onRemove:()=>gl()})}else if("starsNotIn"in G){const Z=G.starsNotIn.values||[];if(!Z.length)continue;x.push({id:"stars-not-in",label:`Rating not in: ${au(Z)}`,onRemove:()=>mt(ye=>Mv(ye,[]))})}else if("nameContains"in G){const Z=(j=G.nameContains.value)==null?void 0:j.trim();if(!Z)continue;x.push({id:"name-contains",label:`Filename contains: ${Z}`,onRemove:()=>mt(ye=>Rv(ye,""))})}else if("nameNotContains"in G){const Z=(P=G.nameNotContains.value)==null?void 0:P.trim();if(!Z)continue;x.push({id:"name-not-contains",label:`Filename not: ${Z}`,onRemove:()=>mt(ye=>Lv(ye,""))})}else if("commentsContains"in G){const Z=(O=G.commentsContains.value)==null?void 0:O.trim();if(!Z)continue;x.push({id:"comments-contains",label:`Comments contain: ${Z}`,onRemove:()=>mt(ye=>Tv(ye,""))})}else if("commentsNotContains"in G){const Z=(W=G.commentsNotContains.value)==null?void 0:W.trim();if(!Z)continue;x.push({id:"comments-not-contains",label:`Comments not: ${Z}`,onRemove:()=>mt(ye=>_v(ye,""))})}else if("urlContains"in G){const Z=(J=G.urlContains.value)==null?void 0:J.trim();if(!Z)continue;x.push({id:"url-contains",label:`URL contains: ${Z}`,onRemove:()=>mt(ye=>Pv(ye,""))})}else if("urlNotContains"in G){const Z=(ae=G.urlNotContains.value)==null?void 0:ae.trim();if(!Z)continue;x.push({id:"url-not-contains",label:`URL not: ${Z}`,onRemove:()=>mt(ye=>Iv(ye,""))})}else if("dateRange"in G){const{from:Z,to:ye}=G.dateRange;if(!Z&&!ye)continue;x.push({id:"date-range",label:`Date: ${hC(Z,ye)}`,onRemove:()=>mt(at=>Mc(at,null))})}else if("widthCompare"in G){const{op:Z,value:ye}=G.widthCompare;x.push({id:"width-compare",label:`Width ${Z} ${ye}`,onRemove:()=>mt(at=>lo(at,null))})}else if("heightCompare"in G){const{op:Z,value:ye}=G.heightCompare;x.push({id:"height-compare",label:`Height ${Z} ${ye}`,onRemove:()=>mt(at=>oo(at,null))})}else if("metricRange"in G){const{key:Z,min:ye,max:at}=G.metricRange;x.push({id:`metric:${Z}`,label:`${Z}: ${pC(ye,at)}`,onRemove:()=>Sa(Z,null)})}return x},[b.filters,gl,Sa,mt]),by=d.useCallback(x=>{const j=new Set(ha);j.has(x)?j.delete(x):j.add(x),T(P=>({...P,filters:iu(P.filters,Array.from(j))}))},[ha]),Ey=d.useCallback(()=>{le(!0),fe("metrics")},[]),Ny=d.useCallback(x=>{T(j=>({...j,sort:x})),x.kind==="builtin"&&x.key==="random"&&_(Date.now())},[]),rf=d.useCallback(x=>{if(x==="/"||x==="")return"Lenslet | Root";const j=x.split("/").filter(Boolean);if(!j.length)return"Lenslet";const P=j.slice(-2).join("/");return`Lenslet | ${j.length>2?`.../${P}`:`/${P}`}`},[]),jy=d.useMemo(()=>mC(e),[e]);d.useEffect(()=>{document.title=rf(e)},[e,rf]),d.useEffect(()=>{let x=!0;return ke.getViews().then(j=>{x&&je(j.views||[])}).catch(()=>{x&&je([])}),()=>{x=!1}},[]),d.useEffect(()=>{Nr&&(i([]),f&&(h(null),be.current=!1,Ul(e)))},[Nr,f,e]),d.useEffect(()=>{const x=$e.current,j=kn.current;if(!x||!j)return;const P=()=>{const O=Math.max(48,Math.round(j.getBoundingClientRect().height));x.style.setProperty("--toolbar-h",`${O}px`)};if(P(),"ResizeObserver"in window){const O=new ResizeObserver(P);return O.observe(j),()=>O.disconnect()}return window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]),d.useEffect(()=>{try{const x=localStorage.getItem(Ue.sortKey),j=localStorage.getItem(Ue.sortDir),P=localStorage.getItem(Ue.sortSpec),O=localStorage.getItem(Ue.starFilters),W=localStorage.getItem(Ue.filterAst),J=localStorage.getItem(Ue.selectedMetric),ae=localStorage.getItem(Ue.viewMode),G=localStorage.getItem(Ue.gridItemSize),Z=localStorage.getItem(Ue.leftOpen),ye=localStorage.getItem(Ue.rightOpen),cf=(ut=>{if(!ut)return null;const qe=nu(ut);return!qe||typeof qe!="object"?null:qe.kind==="builtin"&&(qe.key==="name"||qe.key==="added"||qe.key==="random")&&(qe.dir==="asc"||qe.dir==="desc")||qe.kind==="metric"&&typeof qe.key=="string"&&qe.key.length>0&&(qe.dir==="asc"||qe.dir==="desc")?qe:null})(P)??{kind:"builtin",key:x==="name"||x==="added"||x==="random"?x:"added",dir:j==="asc"||j==="desc"?j:"desc"};cf.key==="random"&&_(Date.now());let Ea=(ut=>{if(!ut)return null;const qe=nu(ut);return jc(qe)})(W)??{and:[]};if(O){const ut=nu(O);if(Array.isArray(ut)){const qe=ut.filter(Oy=>[0,1,2,3,4,5].includes(Oy));Ea=iu(Ea,qe)}}if(T(ut=>({...ut,sort:cf,filters:Ea,selectedMetric:J||ut.selectedMetric})),(ae==="grid"||ae==="adaptive")&&F(ae),G){const ut=Number(G);!isNaN(ut)&&ut>=80&&ut<=500&&ie(ut)}(Z==="0"||Z==="false")&&le(!1),(ye==="0"||ye==="false")&&V(!1)}catch{}},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia("(max-width: 900px)"),j=()=>{x.matches&&(le(!1),V(!1))};return j(),"addEventListener"in x?(x.addEventListener("change",j),()=>x.removeEventListener("change",j)):(x.addListener(j),()=>x.removeListener(j))},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=[1,1.25,1.5,1.75,2,3,4],j=W=>x.reduce((J,ae)=>Math.abs(ae-W)<Math.abs(J-W)?ae:J,x[0]),P=()=>{var at;const W=window.devicePixelRatio||1,J=j(W),ae=((at=window.visualViewport)==null?void 0:at.scale)??1,G=W*ae/J;if(!Number.isFinite(G)){M(null);return}const Z=Math.round(G*100),ye=Math.min(500,Math.max(25,Z));M(ye)};P(),window.addEventListener("resize",P),window.addEventListener("orientationchange",P);const O=window.visualViewport;return O&&O.addEventListener("resize",P),()=>{window.removeEventListener("resize",P),window.removeEventListener("orientationchange",P),O&&O.removeEventListener("resize",P)}},[]),d.useEffect(()=>{try{localStorage.setItem(Ue.sortKey,b.sort.kind==="builtin"?b.sort.key:"added"),localStorage.setItem(Ue.sortDir,b.sort.dir),localStorage.setItem(Ue.sortSpec,JSON.stringify(b.sort));const x=im(b.filters);localStorage.setItem(Ue.starFilters,JSON.stringify(x)),localStorage.setItem(Ue.filterAst,JSON.stringify(b.filters)),b.selectedMetric?localStorage.setItem(Ue.selectedMetric,b.selectedMetric):localStorage.removeItem(Ue.selectedMetric),localStorage.setItem(Ue.viewMode,Q),localStorage.setItem(Ue.gridItemSize,String($)),localStorage.setItem(Ue.leftOpen,U?"1":"0"),localStorage.setItem(Ue.rightOpen,I?"1":"0")}catch{}},[b,Q,$,U,I]),d.useEffect(()=>{const x=Je.current;if(!x)return;const j=O=>Math.min(500,Math.max(80,O)),P=O=>{O.ctrlKey&&(f||g||(O.preventDefault(),ie(W=>j(W+(O.deltaY<0?20:-20)))))};return x.addEventListener("wheel",P,{passive:!1}),()=>x.removeEventListener("wheel",P)},[f,g]),d.useEffect(()=>{if(f||g)return;const x=Je.current;if(!x)return;const j=G=>Math.min(500,Math.max(80,G));let P=null;const O=G=>{if(G.length<2)return 0;const[Z,ye]=[G[0],G[1]];return Math.hypot(Z.clientX-ye.clientX,Z.clientY-ye.clientY)},W=G=>{if(G.touches.length!==2)return;const Z=O(G.touches);Z&&(P={dist:Z,size:$})},J=G=>{if(!P||G.touches.length!==2)return;const Z=O(G.touches);if(!Z)return;G.preventDefault();const ye=j(P.size*(Z/P.dist));ie(ye)},ae=()=>{P=null};return x.addEventListener("touchstart",W,{passive:!0}),x.addEventListener("touchmove",J,{passive:!1}),x.addEventListener("touchend",ae),x.addEventListener("touchcancel",ae),()=>{x.removeEventListener("touchstart",W),x.removeEventListener("touchmove",J),x.removeEventListener("touchend",ae),x.removeEventListener("touchcancel",ae)}},[f,g,$]),d.useEffect(()=>{Lm(tC(Cn,f),"viewer")},[f,Cn]),d.useEffect(()=>{g&&Lm(nC(qd,jr),"compare")},[g,qd,jr]);const vl=d.useCallback(x=>{h(null),be.current=!1;const j=Dn(x);t(j),rm(j)},[]),My=d.useCallback(async()=>{const x=window.prompt("Save Smart Folder as:","New Smart Folder");if(!x)return;const j=dC(x,ue),P={id:j,name:x,pool:{kind:"folder",path:e},view:JSON.parse(JSON.stringify(b))},O=[...ue.filter(W=>W.id!==j),P];je(O),Y(j);try{await ke.saveViews({version:1,views:O})}catch(W){if(W instanceof wn&&W.status===403){const J=new Blob([JSON.stringify({version:1,views:O},null,2)],{type:"application/json"});Lc(J,`lenslet-smart-folder-${j}.json`),alert("No-write mode: exported Smart Folder JSON instead of saving.");return}console.error("Failed to save Smart Folder:",W)}},[e,b,ue]);d.useEffect(()=>{if(!H)return;const x=ue.find(O=>O.id===H);if(!x){Y(null);return}const j=x.pool.path===e,P=JSON.stringify(x.view)===JSON.stringify(b);(!j||!P)&&Y(null)},[H,ue,e,b]);const yl=d.useCallback(x=>{if(!x)return;const j=document.getElementById(`cell-${encodeURIComponent(x)}`);j==null||j.focus()},[]),Ry=d.useCallback(x=>{h(x),be.current=!0,rm(x)},[]),sf=d.useCallback(()=>{h(null),be.current?(be.current=!1,window.history.back()):Ul(e),yl(At.current)},[yl]),Ly=d.useCallback(()=>{g||!si||(s[0]&&(At.current=s[0]),N(0),w(!0),f&&(h(null),be.current&&(be.current=!1),Ul(e)),kt.current||(window.history.pushState({compare:!0},"",window.location.href),kt.current=!0))},[g,si,s,f,e]),ka=d.useCallback(()=>{w(!1),kt.current&&(kt.current=!1,window.history.back()),yl(At.current??s[0])},[yl,s]),Ty=d.useCallback(x=>{Xt.length<2||N(j=>{const P=Math.max(0,Xt.length-2);return Math.min(P,Math.max(0,j+x))})},[Xt.length]);d.useEffect(()=>{g&&(si||ka())},[g,si,ka]),d.useEffect(()=>{const x=()=>{f&&(be.current=!1,h(null)),g&&(kt.current=!1,w(!1))};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[f,g]),d.useEffect(()=>{const x=$e.current;if(!x)return;const j=W=>{W.dataTransfer&&Array.from(W.dataTransfer.types).includes("Files")&&(W.preventDefault(),ge(!0))},P=W=>{const J=W.relatedTarget;J&&x.contains(J)||ge(!1)},O=async W=>{var G,Z;W.preventDefault(),ge(!1);const J=Array.from(((G=W.dataTransfer)==null?void 0:G.files)??[]);if(!J.length)return;if(!((((Z=rt==null?void 0:rt.dirs)==null?void 0:Z.length)??0)===0)){alert("Uploads are only allowed into folders without subdirectories.");return}for(const ye of J)try{await ke.uploadFile(e,ye)}catch(at){console.error(`Failed to upload ${ye.name}:`,at)}fa()};return x.addEventListener("dragover",j),x.addEventListener("dragleave",P),x.addEventListener("drop",O),()=>{x.removeEventListener("dragover",j),x.removeEventListener("dragleave",P),x.removeEventListener("drop",O)}},[e,(uf=rt==null?void 0:rt.dirs)==null?void 0:uf.length,fa]),d.useEffect(()=>{const x=()=>re(null),j=P=>{P.key==="Escape"&&re(null)};return window.addEventListener("click",x),window.addEventListener("keydown",j),()=>{window.removeEventListener("click",x),window.removeEventListener("keydown",j)}},[]),d.useEffect(()=>{const x=j=>{if(!Pd(j.target)){if((j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="b"){j.preventDefault(),j.altKey?V(P=>!P):le(P=>!P);return}if(!(f||g)){if(j.key==="Backspace"||j.key==="Delete")j.preventDefault(),vl(sm(e));else if((j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="a")j.preventDefault(),i(Qe.map(P=>P.path));else if(j.key==="Escape")s.length&&(j.preventDefault(),i([]));else if(j.key==="/"){j.preventDefault();const P=document.querySelector(".toolbar-right .input");P==null||P.focus()}}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,Qe,s,f,g,vl]);const _y=U?`${B}px`:"0px",Py=I?`${se}px`:"0px",lf=f??s[0]??null,Ca=lf?Cn.indexOf(lf):-1,Iy=Ca>0,Fy=Ca>=0&&Ca<Cn.length-1,ba=d.useCallback(x=>{if(!Cn.length)return;const j=f??s[0];if(!j)return;const P=Cn.indexOf(j);if(P===-1)return;const O=Math.min(Cn.length-1,Math.max(0,P+x)),W=Cn[O];!W||W===j||(f&&(h(W),Ul(W)),i([W]))},[Cn,f,s]);return a.jsxs("div",{className:"app-shell grid h-full grid-cols-[var(--left)_1fr_var(--right)]",ref:$e,style:{"--left":_y,"--right":Py},children:[a.jsx(Gw,{rootRef:kn,onSearch:r,viewerActive:!!f,onBack:sf,zoomPercent:f?v:void 0,onZoomPercentChange:x=>p(x),currentLabel:jy,itemCount:xy,totalCount:wy,sortSpec:b.sort,metricKeys:Vn,onSortChange:Ny,sortDisabled:Gt,filterCount:hl,onOpenFilters:Ey,starFilters:ha,onToggleStar:by,onClearStars:gl,onClearFilters:tf,starCounts:ly,viewMode:Q,onViewMode:F,gridItemSize:$,onGridItemSize:ie,leftOpen:U,rightOpen:I,onToggleLeft:()=>le(x=>!x),onToggleRight:()=>V(x=>!x),onPrevImage:()=>ba(-1),onNextImage:()=>ba(1),canPrevImage:Iy,canNextImage:Fy,searchDisabled:Gt,searchPlaceholder:Gt?"Exit similarity to search":void 0,syncIndicator:{state:py,presence:pl,syncLabel:ay,connectionLabel:uy,lastEditedLabel:cy,hasEdits:xa,recentTouches:yy}}),U&&a.jsx(Qk,{leftTool:q,onToolChange:fe,compareEnabled:si,compareActive:g,onOpenCompare:Ly,views:ue,activeViewId:H,onActivateView:x=>{var P;Y(x.id);const j=jc((P=x.view)==null?void 0:P.filters)??{and:[]};T({...x.view,filters:j}),vl(x.pool.path)},onSaveView:My,current:e,data:rt,onOpenFolder:x=>{Y(null),vl(x)},onContextMenu:(x,j)=>{x.preventDefault(),re({x:x.clientX,y:x.clientY,kind:"tree",payload:{path:j}})},countVersion:ee,items:sy,filteredItems:Qe,metricKeys:Vn,selectedItems:Zv,selectedMetric:b.selectedMetric,onSelectMetric:x=>T(j=>({...j,selectedMetric:x})),filters:b.filters,onChangeRange:Sa,onChangeFilters:Sy,onResize:oe}),a.jsxs("div",{className:"grid-shell col-start-2 row-start-2 relative overflow-hidden flex flex-col",ref:Je,children:[a.jsx("div",{"aria-live":"polite",className:"sr-only",children:s.length?`${s.length} selected`:""}),a.jsx(Kk,{persistenceEnabled:qv,recentSummary:vy,onDismissRecent:()=>Wv(!0),onCloseRecent:()=>Er(wa??Date.now()),browserZoomPercent:R}),u&&a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"font-semibold",children:"Similarity mode"}),a.jsxs("span",{className:"text-muted",children:["Embedding: ",u.embedding]}),Zd&&a.jsxs("span",{className:"text-muted",children:["Query: ",Zd]}),ef&&a.jsxs("span",{className:"text-muted",children:["Results: ",ef]}),a.jsxs("span",{className:"text-muted",children:["Top K: ",u.topK]}),u.minScore!=null&&a.jsxs("span",{className:"text-muted",children:["Min score: ",u.minScore]})]}),a.jsx("button",{className:"btn btn-sm",onClick:ky,children:"Exit similarity"})]})}),nf.length>0&&a.jsx("div",{className:"sticky top-0 z-10 px-3 py-2 bg-panel border-b border-border",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Filters"}),nf.map(x=>a.jsxs("span",{className:"filter-chip",children:[a.jsx("span",{className:"truncate max-w-[240px]",title:x.label,children:x.label}),a.jsx("button",{className:"filter-chip-remove","aria-label":`Clear filter ${x.label}`,onClick:x.onRemove,children:""})]},x.id)),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:tf,children:"Clear all"})]})}),!1,a.jsxs("div",{className:"flex-1 min-h-0 relative",children:[a.jsx(K1,{items:Qe,selected:s,restoreToSelectionToken:L,onSelectionChange:i,onOpenViewer:x=>{try{At.current=x}catch{}Ry(x),i([x])},highlight:Nr?Hd:"",recentlyUpdated:Hv,suppressSelectionHighlight:!!f||g,viewMode:Q,targetCellSize:$,onContextMenuItem:(x,j)=>{x.preventDefault();const P=s.length?s:[j];re({x:x.clientX,y:x.clientY,kind:"grid",payload:{paths:P}})},scrollRef:Ve,hideScrollbar:Yd}),Yd&&ii&&a.jsx(G1,{items:Qe,metricKey:ii,scrollRef:Ve,sortDir:b.sort.dir})]})]}),I&&a.jsx(DS,{path:s[0]??null,selectedPaths:s,items:Qe,sortSpec:b.sort,onResize:he,onStarChanged:(x,j)=>{He(P=>{const O={...P};for(const W of x)O[W]=j;return O})},onFindSimilar:()=>o(!0),embeddingsAvailable:Xv,embeddingsLoading:is.isLoading}),a.jsx(zS,{open:l,embeddings:Vd,rejected:Gv,selectedPath:s[0]??null,embeddingsLoading:is.isLoading,embeddingsError:Jv,onClose:()=>o(!1),onSearch:Cy}),f&&a.jsx(iS,{path:f,onClose:sf,onZoomChange:x=>C(Math.round(x)),requestedZoomPercent:m,onZoomRequestConsumed:()=>p(null),onNavigate:ba}),g&&a.jsx(cS,{aItem:ey,bItem:ty,index:jr,total:Xt.length,canPrev:ny,canNext:ry,onNavigate:Ty,onClose:ka}),ce&&a.jsx("div",{className:"toolbar-offset fixed inset-0 left-[var(--left)] right-[var(--right)] bg-accent/10 border-2 border-dashed border-accent text-text flex items-center justify-center text-lg z-overlay pointer-events-none",children:"Drop images to upload"}),D&&a.jsx(yC,{ctx:D,current:e,items:Qe,refetch:fa,setCtx:re,onInvalidateCounts:iy})]})}function dC(e,t){const n=fC(e)||"view",r=new Set(t.map(i=>i.id));if(!r.has(n))return n;let s=2;for(;r.has(`${n}-${s}`);)s+=1;return`${n}-${s}`}function fC(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function au(e){const t=e.filter(s=>s>0).sort((s,i)=>i-s),n=e.includes(0),r=[...t.map(s=>String(s))];return n&&r.push("None"),r.join(", ")}function hC(e,t){return e&&t?`${e} to ${t}`:e?`from ${e}`:t?`to ${t}`:""}function mC(e){if(e==="/"||e==="")return"Root";const t=e.split("/").filter(Boolean);return t.length?t.length<=2?`/${t.join("/")}`:`.../${t.slice(-2).join("/")}`:"Root"}function pC(e,t){return`${Tm(e)}${Tm(t)}`}function Tm(e){const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function gC(e){const t=e.toLowerCase();return t.endsWith(".png")?"image/png":t.endsWith(".webp")?"image/webp":"image/jpeg"}function vC(e,t){const n=e.split("/").pop()??e;return{path:e,name:n,type:gC(e),w:0,h:0,size:0,hasThumb:!0,hasMeta:!1,star:t??null}}function Lc(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function yC({ctx:e,current:t,items:n,refetch:r,setCtx:s,onInvalidateCounts:i}){const l=tk(t),o=br(),[u,c]=ao.useState(!1),[f,h]=ao.useState(null),g=()=>new Date().toISOString().replace(/[:.]/g,"-"),w=m=>{const p=v=>m==="/"?!0:v===m||v.startsWith(`${m}/`);o.invalidateQueries({predicate:({queryKey:v})=>{if(!Array.isArray(v)||v[0]!=="folder")return!1;const C=typeof v[1]=="string"?v[1]:"";return p(C)}})},k=m=>{const p=Dn(m);return p===""?"/":p},N=async()=>{const m=k(e.payload.path||"/");c(!0);try{await ke.refreshFolder(m),w(m),i(),(t===m||t.startsWith(m==="/"?"/":`${m}/`))&&await r(),gc.evictPrefix(m),cs.evictPrefix(m)}catch(p){console.error("Failed to refresh folder:",p)}finally{c(!1),s(null)}},L=m=>async()=>{h(m);const p=e.payload.path||t;try{const C=(await ke.getFolder(p,{recursive:!0,legacyRecursive:!0})).items,R=gm(C),M=m==="csv"?pm(R):mm(R),b=m==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8",T=p==="/"?"root":(p.replace(/^\/+/,"")||"root").replace(/\//g,"_");Lc(new Blob([M],{type:b}),`metadata_${T}_${g()}.${m}`)}catch(v){console.error("Failed to export folder:",v),alert("Failed to export folder. See console for details.")}finally{h(null),s(null)}},y=e.kind==="tree"?[{label:u?"Refreshing":"Refresh",disabled:u,onClick:N},{label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f||u,onClick:L("csv")},{label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f||u,onClick:L("json")}]:(()=>{const m=e.payload.paths??[],p=[],v=C=>async()=>{h(C);try{const R=new Set(m),M=n.filter(_=>R.has(_.path)),b=gm(M),T=C==="csv"?pm(b):mm(b),E=C==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8";Lc(new Blob([T],{type:E}),`metadata_selection_${g()}.${C}`)}finally{h(null),s(null)}};return p.push({label:"Move to trash",disabled:l,onClick:async()=>{if(!l){for(const C of m)try{await ke.moveFile(C,"/_trash_")}catch(R){console.error(`Failed to trash ${C}:`,R)}r(),s(null)}}}),l&&(p.push({label:"Permanent delete",danger:!0,onClick:async()=>{if(confirm(`Delete ${m.length} file(s) permanently? This cannot be undone.`)){try{await ke.deleteFiles(m)}catch(C){console.error("Failed to delete files:",C)}r(),s(null)}}}),p.push({label:"Recover",onClick:async()=>{for(const C of m)try{const M=(await ke.getSidecar(C)).original_position,b=M&&M.split("/").slice(0,-1).join("/")||"/";await ke.moveFile(C,b)}catch(R){console.error(`Failed to recover ${C}:`,R)}r(),s(null)}})),m.length&&(p.push({label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f,onClick:v("csv")}),p.push({label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f,onClick:v("json")})),p})();return a.jsx(Rk,{x:e.x,y:e.y,items:y})}const xC=new Iw({defaultOptions:{queries:{staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always"},mutations:{retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),5e3)}}});function wC(){return a.jsx(Fw,{client:xC,children:a.jsx(cC,{})})}tv(document.getElementById("root")).render(a.jsx(wC,{}));
