var c0=Object.defineProperty;var Vf=e=>{throw TypeError(e)};var d0=(e,t,n)=>t in e?c0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Hn=(e,t,n)=>d0(e,typeof t!="symbol"?t+"":t,n),cu=(e,t,n)=>t.has(e)||Vf("Cannot "+n);var b=(e,t,n)=>(cu(e,t,"read from private field"),n?n.call(e):t.get(e)),le=(e,t,n)=>t.has(e)?Vf("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),V=(e,t,n,r)=>(cu(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ge=(e,t,n)=>(cu(e,t,"access private method"),n);var ol=(e,t,n,r)=>({set _(s){V(e,t,s,n)},get _(){return b(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function f0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Np={exports:{}},La={},jp={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zo=Symbol.for("react.element"),h0=Symbol.for("react.portal"),m0=Symbol.for("react.fragment"),p0=Symbol.for("react.strict_mode"),g0=Symbol.for("react.profiler"),v0=Symbol.for("react.provider"),y0=Symbol.for("react.context"),x0=Symbol.for("react.forward_ref"),w0=Symbol.for("react.suspense"),S0=Symbol.for("react.memo"),C0=Symbol.for("react.lazy"),Qf=Symbol.iterator;function b0(e){return e===null||typeof e!="object"?null:(e=Qf&&e[Qf]||e["@@iterator"],typeof e=="function"?e:null)}var Mp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rp=Object.assign,Lp={};function Ei(e,t,n){this.props=e,this.context=t,this.refs=Lp,this.updater=n||Mp}Ei.prototype.isReactComponent={};Ei.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ei.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _p(){}_p.prototype=Ei.prototype;function vd(e,t,n){this.props=e,this.context=t,this.refs=Lp,this.updater=n||Mp}var yd=vd.prototype=new _p;yd.constructor=vd;Rp(yd,Ei.prototype);yd.isPureReactComponent=!0;var Kf=Array.isArray,Tp=Object.prototype.hasOwnProperty,xd={current:null},Pp={key:!0,ref:!0,__self:!0,__source:!0};function Ip(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Tp.call(t,r)&&!Pp.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:zo,type:e,key:i,ref:o,props:s,_owner:xd.current}}function k0(e,t){return{$$typeof:zo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function wd(e){return typeof e=="object"&&e!==null&&e.$$typeof===zo}function E0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var qf=/\/+/g;function du(e,t){return typeof e=="object"&&e!==null&&e.key!=null?E0(""+e.key):t.toString(36)}function _l(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case zo:case h0:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+du(o,0):r,Kf(s)?(n="",e!=null&&(n=e.replace(qf,"$&/")+"/"),_l(s,t,n,"",function(d){return d})):s!=null&&(wd(s)&&(s=k0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(qf,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Kf(e))for(var l=0;l<e.length;l++){i=e[l];var u=r+du(i,l);o+=_l(i,t,n,u,s)}else if(u=b0(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=r+du(i,l++),o+=_l(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ll(e,t,n){if(e==null)return e;var r=[],s=0;return _l(e,r,"","",function(i){return t.call(n,i,s++)}),r}function N0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _t={current:null},Tl={transition:null},j0={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:Tl,ReactCurrentOwner:xd};function Fp(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:ll,forEach:function(e,t,n){ll(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ll(e,function(){t++}),t},toArray:function(e){return ll(e,function(t){return t})||[]},only:function(e){if(!wd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Se.Component=Ei;Se.Fragment=m0;Se.Profiler=g0;Se.PureComponent=vd;Se.StrictMode=p0;Se.Suspense=w0;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j0;Se.act=Fp;Se.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Rp({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=xd.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)Tp.call(t,u)&&!Pp.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:zo,type:e.type,key:s,ref:i,props:r,_owner:o}};Se.createContext=function(e){return e={$$typeof:y0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:v0,_context:e},e.Consumer=e};Se.createElement=Ip;Se.createFactory=function(e){var t=Ip.bind(null,e);return t.type=e,t};Se.createRef=function(){return{current:null}};Se.forwardRef=function(e){return{$$typeof:x0,render:e}};Se.isValidElement=wd;Se.lazy=function(e){return{$$typeof:C0,_payload:{_status:-1,_result:e},_init:N0}};Se.memo=function(e,t){return{$$typeof:S0,type:e,compare:t===void 0?null:t}};Se.startTransition=function(e){var t=Tl.transition;Tl.transition={};try{e()}finally{Tl.transition=t}};Se.unstable_act=Fp;Se.useCallback=function(e,t){return _t.current.useCallback(e,t)};Se.useContext=function(e){return _t.current.useContext(e)};Se.useDebugValue=function(){};Se.useDeferredValue=function(e){return _t.current.useDeferredValue(e)};Se.useEffect=function(e,t){return _t.current.useEffect(e,t)};Se.useId=function(){return _t.current.useId()};Se.useImperativeHandle=function(e,t,n){return _t.current.useImperativeHandle(e,t,n)};Se.useInsertionEffect=function(e,t){return _t.current.useInsertionEffect(e,t)};Se.useLayoutEffect=function(e,t){return _t.current.useLayoutEffect(e,t)};Se.useMemo=function(e,t){return _t.current.useMemo(e,t)};Se.useReducer=function(e,t,n){return _t.current.useReducer(e,t,n)};Se.useRef=function(e){return _t.current.useRef(e)};Se.useState=function(e){return _t.current.useState(e)};Se.useSyncExternalStore=function(e,t,n){return _t.current.useSyncExternalStore(e,t,n)};Se.useTransition=function(){return _t.current.useTransition()};Se.version="18.3.1";jp.exports=Se;var c=jp.exports;const Gl=f0(c);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0=c,R0=Symbol.for("react.element"),L0=Symbol.for("react.fragment"),_0=Object.prototype.hasOwnProperty,T0=M0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P0={key:!0,ref:!0,__self:!0,__source:!0};function Op(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)_0.call(t,r)&&!P0.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:R0,type:e,key:i,ref:o,props:s,_owner:T0.current}}La.Fragment=L0;La.jsx=Op;La.jsxs=Op;Np.exports=La;var a=Np.exports,Dp={exports:{}},Jt={},zp={exports:{}},Ap={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,H){var J=z.length;z.push(H);e:for(;0<J;){var ae=J-1>>>1,ce=z[ae];if(0<s(ce,H))z[ae]=H,z[J]=ce,J=ae;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var H=z[0],J=z.pop();if(J!==H){z[0]=J;e:for(var ae=0,ce=z.length,Le=ce>>>1;ae<Le;){var Q=2*(ae+1)-1,K=z[Q],ne=Q+1,fe=z[ne];if(0>s(K,J))ne<ce&&0>s(fe,K)?(z[ae]=fe,z[ne]=J,ae=ne):(z[ae]=K,z[Q]=J,ae=Q);else if(ne<ce&&0>s(fe,J))z[ae]=fe,z[ne]=J,ae=ne;else break e}}return H}function s(z,H){var J=z.sortIndex-H.sortIndex;return J!==0?J:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,m=null,g=3,C=!1,w=!1,E=!1,L=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(z){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=z)r(d),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(d)}}function v(z){if(E=!1,p(z),!w)if(n(u)!==null)w=!0,T(S);else{var H=n(d);H!==null&&de(v,H.startTime-z)}}function S(z,H){w=!1,E&&(E=!1,y(k),k=-1),C=!0;var J=g;try{for(p(H),m=n(u);m!==null&&(!(m.expirationTime>H)||z&&!F());){var ae=m.callback;if(typeof ae=="function"){m.callback=null,g=m.priorityLevel;var ce=ae(m.expirationTime<=H);H=e.unstable_now(),typeof ce=="function"?m.callback=ce:m===n(u)&&r(u),p(H)}else r(u);m=n(u)}if(m!==null)var Le=!0;else{var Q=n(d);Q!==null&&de(v,Q.startTime-H),Le=!1}return Le}finally{m=null,g=J,C=!1}}var R=!1,j=null,k=-1,_=5,N=-1;function F(){return!(e.unstable_now()-N<_)}function U(){if(j!==null){var z=e.unstable_now();N=z;var H=!0;try{H=j(!0,z)}finally{H?D():(R=!1,j=null)}}else R=!1}var D;if(typeof h=="function")D=function(){h(U)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ue=ee.port2;ee.port1.onmessage=U,D=function(){ue.postMessage(null)}}else D=function(){L(U,0)};function T(z){j=z,R||(R=!0,D())}function de(z,H){k=L(function(){z(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){w||C||(w=!0,T(S))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(z){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var J=g;g=H;try{return z()}finally{g=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var J=g;g=z;try{return H()}finally{g=J}},e.unstable_scheduleCallback=function(z,H,J){var ae=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ae+J:ae):J=ae,z){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=J+ce,z={id:f++,callback:H,priorityLevel:z,startTime:J,expirationTime:ce,sortIndex:-1},J>ae?(z.sortIndex=J,t(d,z),n(u)===null&&z===n(d)&&(E?(y(k),k=-1):E=!0,de(v,J-ae))):(z.sortIndex=ce,t(u,z),w||C||(w=!0,T(S))),z},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(z){var H=g;return function(){var J=g;g=H;try{return z.apply(this,arguments)}finally{g=J}}}})(Ap);zp.exports=Ap;var I0=zp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0=c,Xt=I0;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $p=new Set,fo={};function bs(e,t){vi(e,t),vi(e+"Capture",t)}function vi(e,t){for(fo[e]=t,e=0;e<t.length;e++)$p.add(t[e])}var sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qu=Object.prototype.hasOwnProperty,O0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yf={},Gf={};function D0(e){return qu.call(Gf,e)?!0:qu.call(Yf,e)?!1:O0.test(e)?Gf[e]=!0:(Yf[e]=!0,!1)}function z0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function A0(e,t,n,r){if(t===null||typeof t>"u"||z0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Tt(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){gt[e]=new Tt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];gt[t]=new Tt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){gt[e]=new Tt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){gt[e]=new Tt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){gt[e]=new Tt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){gt[e]=new Tt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){gt[e]=new Tt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){gt[e]=new Tt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){gt[e]=new Tt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Sd=/[\-:]([a-z])/g;function Cd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Sd,Cd);gt[t]=new Tt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Sd,Cd);gt[t]=new Tt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Sd,Cd);gt[t]=new Tt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){gt[e]=new Tt(e,1,!1,e.toLowerCase(),null,!1,!1)});gt.xlinkHref=new Tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){gt[e]=new Tt(e,1,!1,e.toLowerCase(),null,!0,!0)});function bd(e,t,n,r){var s=gt.hasOwnProperty(t)?gt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(A0(t,n,s,r)&&(n=null),r||s===null?D0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ar=F0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,al=Symbol.for("react.element"),Ds=Symbol.for("react.portal"),zs=Symbol.for("react.fragment"),kd=Symbol.for("react.strict_mode"),Yu=Symbol.for("react.profiler"),Up=Symbol.for("react.provider"),Bp=Symbol.for("react.context"),Ed=Symbol.for("react.forward_ref"),Gu=Symbol.for("react.suspense"),Xu=Symbol.for("react.suspense_list"),Nd=Symbol.for("react.memo"),gr=Symbol.for("react.lazy"),Wp=Symbol.for("react.offscreen"),Xf=Symbol.iterator;function Di(e){return e===null||typeof e!="object"?null:(e=Xf&&e[Xf]||e["@@iterator"],typeof e=="function"?e:null)}var $e=Object.assign,fu;function Yi(e){if(fu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);fu=t&&t[1]||""}return`
`+fu+e}var hu=!1;function mu(e,t){if(!e||hu)return"";hu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{hu=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Yi(e):""}function $0(e){switch(e.tag){case 5:return Yi(e.type);case 16:return Yi("Lazy");case 13:return Yi("Suspense");case 19:return Yi("SuspenseList");case 0:case 2:case 15:return e=mu(e.type,!1),e;case 11:return e=mu(e.type.render,!1),e;case 1:return e=mu(e.type,!0),e;default:return""}}function Ju(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zs:return"Fragment";case Ds:return"Portal";case Yu:return"Profiler";case kd:return"StrictMode";case Gu:return"Suspense";case Xu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Bp:return(e.displayName||"Context")+".Consumer";case Up:return(e._context.displayName||"Context")+".Provider";case Ed:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Nd:return t=e.displayName||null,t!==null?t:Ju(e.type)||"Memo";case gr:t=e._payload,e=e._init;try{return Ju(e(t))}catch{}}return null}function U0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ju(t);case 8:return t===kd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $r(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Hp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function B0(e){var t=Hp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ul(e){e._valueTracker||(e._valueTracker=B0(e))}function Vp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Hp(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Xl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Zu(e,t){var n=t.checked;return $e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Jf(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=$r(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Qp(e,t){t=t.checked,t!=null&&bd(e,"checked",t,!1)}function ec(e,t){Qp(e,t);var n=$r(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?tc(e,t.type,n):t.hasOwnProperty("defaultValue")&&tc(e,t.type,$r(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function tc(e,t,n){(t!=="number"||Xl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Gi=Array.isArray;function Ys(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$r(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function nc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return $e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function eh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($(92));if(Gi(n)){if(1<n.length)throw Error($(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:$r(n)}}function Kp(e,t){var n=$r(t.value),r=$r(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function th(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function qp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?qp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var cl,Yp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(cl=cl||document.createElement("div"),cl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=cl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ho(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var to={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},W0=["Webkit","ms","Moz","O"];Object.keys(to).forEach(function(e){W0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),to[t]=to[e]})});function Gp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||to.hasOwnProperty(e)&&to[e]?(""+t).trim():t+"px"}function Xp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Gp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var H0=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sc(e,t){if(t){if(H0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function ic(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oc=null;function jd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var lc=null,Gs=null,Xs=null;function nh(e){if(e=Uo(e)){if(typeof lc!="function")throw Error($(280));var t=e.stateNode;t&&(t=Fa(t),lc(e.stateNode,e.type,t))}}function Jp(e){Gs?Xs?Xs.push(e):Xs=[e]:Gs=e}function Zp(){if(Gs){var e=Gs,t=Xs;if(Xs=Gs=null,nh(e),t)for(e=0;e<t.length;e++)nh(t[e])}}function eg(e,t){return e(t)}function tg(){}var pu=!1;function ng(e,t,n){if(pu)return e(t,n);pu=!0;try{return eg(e,t,n)}finally{pu=!1,(Gs!==null||Xs!==null)&&(tg(),Zp())}}function mo(e,t){var n=e.stateNode;if(n===null)return null;var r=Fa(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,t,typeof n));return n}var ac=!1;if(sr)try{var zi={};Object.defineProperty(zi,"passive",{get:function(){ac=!0}}),window.addEventListener("test",zi,zi),window.removeEventListener("test",zi,zi)}catch{ac=!1}function V0(e,t,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(f){this.onError(f)}}var no=!1,Jl=null,Zl=!1,uc=null,Q0={onError:function(e){no=!0,Jl=e}};function K0(e,t,n,r,s,i,o,l,u){no=!1,Jl=null,V0.apply(Q0,arguments)}function q0(e,t,n,r,s,i,o,l,u){if(K0.apply(this,arguments),no){if(no){var d=Jl;no=!1,Jl=null}else throw Error($(198));Zl||(Zl=!0,uc=d)}}function ks(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function rg(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rh(e){if(ks(e)!==e)throw Error($(188))}function Y0(e){var t=e.alternate;if(!t){if(t=ks(e),t===null)throw Error($(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return rh(s),e;if(i===r)return rh(s),t;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:t}function sg(e){return e=Y0(e),e!==null?ig(e):null}function ig(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ig(e);if(t!==null)return t;e=e.sibling}return null}var og=Xt.unstable_scheduleCallback,sh=Xt.unstable_cancelCallback,G0=Xt.unstable_shouldYield,X0=Xt.unstable_requestPaint,qe=Xt.unstable_now,J0=Xt.unstable_getCurrentPriorityLevel,Md=Xt.unstable_ImmediatePriority,lg=Xt.unstable_UserBlockingPriority,ea=Xt.unstable_NormalPriority,Z0=Xt.unstable_LowPriority,ag=Xt.unstable_IdlePriority,_a=null,On=null;function ex(e){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(_a,e,void 0,(e.current.flags&128)===128)}catch{}}var kn=Math.clz32?Math.clz32:rx,tx=Math.log,nx=Math.LN2;function rx(e){return e>>>=0,e===0?32:31-(tx(e)/nx|0)|0}var dl=64,fl=4194304;function Xi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ta(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Xi(l):(i&=o,i!==0&&(r=Xi(i)))}else o=n&~s,o!==0?r=Xi(o):i!==0&&(r=Xi(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-kn(t),s=1<<n,r|=e[n],t&=~s;return r}function sx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ix(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-kn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=sx(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function cc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ug(){var e=dl;return dl<<=1,!(dl&4194240)&&(dl=64),e}function gu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ao(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-kn(t),e[t]=n}function ox(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-kn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Rd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-kn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var je=0;function cg(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var dg,Ld,fg,hg,mg,dc=!1,hl=[],_r=null,Tr=null,Pr=null,po=new Map,go=new Map,yr=[],lx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ih(e,t){switch(e){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":po.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":go.delete(t.pointerId)}}function Ai(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Uo(t),t!==null&&Ld(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function ax(e,t,n,r,s){switch(t){case"focusin":return _r=Ai(_r,e,t,n,r,s),!0;case"dragenter":return Tr=Ai(Tr,e,t,n,r,s),!0;case"mouseover":return Pr=Ai(Pr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return po.set(i,Ai(po.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,go.set(i,Ai(go.get(i)||null,e,t,n,r,s)),!0}return!1}function pg(e){var t=Jr(e.target);if(t!==null){var n=ks(t);if(n!==null){if(t=n.tag,t===13){if(t=rg(n),t!==null){e.blockedOn=t,mg(e.priority,function(){fg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=fc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);oc=r,n.target.dispatchEvent(r),oc=null}else return t=Uo(n),t!==null&&Ld(t),e.blockedOn=n,!1;t.shift()}return!0}function oh(e,t,n){Pl(e)&&n.delete(t)}function ux(){dc=!1,_r!==null&&Pl(_r)&&(_r=null),Tr!==null&&Pl(Tr)&&(Tr=null),Pr!==null&&Pl(Pr)&&(Pr=null),po.forEach(oh),go.forEach(oh)}function $i(e,t){e.blockedOn===t&&(e.blockedOn=null,dc||(dc=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,ux)))}function vo(e){function t(s){return $i(s,e)}if(0<hl.length){$i(hl[0],e);for(var n=1;n<hl.length;n++){var r=hl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_r!==null&&$i(_r,e),Tr!==null&&$i(Tr,e),Pr!==null&&$i(Pr,e),po.forEach(t),go.forEach(t),n=0;n<yr.length;n++)r=yr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<yr.length&&(n=yr[0],n.blockedOn===null);)pg(n),n.blockedOn===null&&yr.shift()}var Js=ar.ReactCurrentBatchConfig,na=!0;function cx(e,t,n,r){var s=je,i=Js.transition;Js.transition=null;try{je=1,_d(e,t,n,r)}finally{je=s,Js.transition=i}}function dx(e,t,n,r){var s=je,i=Js.transition;Js.transition=null;try{je=4,_d(e,t,n,r)}finally{je=s,Js.transition=i}}function _d(e,t,n,r){if(na){var s=fc(e,t,n,r);if(s===null)Nu(e,t,r,ra,n),ih(e,r);else if(ax(s,e,t,n,r))r.stopPropagation();else if(ih(e,r),t&4&&-1<lx.indexOf(e)){for(;s!==null;){var i=Uo(s);if(i!==null&&dg(i),i=fc(e,t,n,r),i===null&&Nu(e,t,r,ra,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Nu(e,t,r,null,n)}}var ra=null;function fc(e,t,n,r){if(ra=null,e=jd(r),e=Jr(e),e!==null)if(t=ks(e),t===null)e=null;else if(n=t.tag,n===13){if(e=rg(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ra=e,null}function gg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J0()){case Md:return 1;case lg:return 4;case ea:case Z0:return 16;case ag:return 536870912;default:return 16}default:return 16}}var Rr=null,Td=null,Il=null;function vg(){if(Il)return Il;var e,t=Td,n=t.length,r,s="value"in Rr?Rr.value:Rr.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Il=s.slice(e,1<r?1-r:void 0)}function Fl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ml(){return!0}function lh(){return!1}function Zt(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ml:lh,this.isPropagationStopped=lh,this}return $e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ml)},persist:function(){},isPersistent:ml}),t}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pd=Zt(Ni),$o=$e({},Ni,{view:0,detail:0}),fx=Zt($o),vu,yu,Ui,Ta=$e({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Id,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ui&&(Ui&&e.type==="mousemove"?(vu=e.screenX-Ui.screenX,yu=e.screenY-Ui.screenY):yu=vu=0,Ui=e),vu)},movementY:function(e){return"movementY"in e?e.movementY:yu}}),ah=Zt(Ta),hx=$e({},Ta,{dataTransfer:0}),mx=Zt(hx),px=$e({},$o,{relatedTarget:0}),xu=Zt(px),gx=$e({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),vx=Zt(gx),yx=$e({},Ni,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xx=Zt(yx),wx=$e({},Ni,{data:0}),uh=Zt(wx),Sx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bx[e])?!!t[e]:!1}function Id(){return kx}var Ex=$e({},$o,{key:function(e){if(e.key){var t=Sx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Id,charCode:function(e){return e.type==="keypress"?Fl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nx=Zt(Ex),jx=$e({},Ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ch=Zt(jx),Mx=$e({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Id}),Rx=Zt(Mx),Lx=$e({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),_x=Zt(Lx),Tx=$e({},Ta,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Px=Zt(Tx),Ix=[9,13,27,32],Fd=sr&&"CompositionEvent"in window,ro=null;sr&&"documentMode"in document&&(ro=document.documentMode);var Fx=sr&&"TextEvent"in window&&!ro,yg=sr&&(!Fd||ro&&8<ro&&11>=ro),dh=" ",fh=!1;function xg(e,t){switch(e){case"keyup":return Ix.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var As=!1;function Ox(e,t){switch(e){case"compositionend":return wg(t);case"keypress":return t.which!==32?null:(fh=!0,dh);case"textInput":return e=t.data,e===dh&&fh?null:e;default:return null}}function Dx(e,t){if(As)return e==="compositionend"||!Fd&&xg(e,t)?(e=vg(),Il=Td=Rr=null,As=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yg&&t.locale!=="ko"?null:t.data;default:return null}}var zx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zx[e.type]:t==="textarea"}function Sg(e,t,n,r){Jp(r),t=sa(t,"onChange"),0<t.length&&(n=new Pd("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var so=null,yo=null;function Ax(e){Tg(e,0)}function Pa(e){var t=Bs(e);if(Vp(t))return e}function $x(e,t){if(e==="change")return t}var Cg=!1;if(sr){var wu;if(sr){var Su="oninput"in document;if(!Su){var mh=document.createElement("div");mh.setAttribute("oninput","return;"),Su=typeof mh.oninput=="function"}wu=Su}else wu=!1;Cg=wu&&(!document.documentMode||9<document.documentMode)}function ph(){so&&(so.detachEvent("onpropertychange",bg),yo=so=null)}function bg(e){if(e.propertyName==="value"&&Pa(yo)){var t=[];Sg(t,yo,e,jd(e)),ng(Ax,t)}}function Ux(e,t,n){e==="focusin"?(ph(),so=t,yo=n,so.attachEvent("onpropertychange",bg)):e==="focusout"&&ph()}function Bx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pa(yo)}function Wx(e,t){if(e==="click")return Pa(t)}function Hx(e,t){if(e==="input"||e==="change")return Pa(t)}function Vx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jn=typeof Object.is=="function"?Object.is:Vx;function xo(e,t){if(jn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!qu.call(t,s)||!jn(e[s],t[s]))return!1}return!0}function gh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vh(e,t){var n=gh(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gh(n)}}function kg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Eg(){for(var e=window,t=Xl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Xl(e.document)}return t}function Od(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Qx(e){var t=Eg(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&kg(n.ownerDocument.documentElement,n)){if(r!==null&&Od(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=vh(n,i);var o=vh(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Kx=sr&&"documentMode"in document&&11>=document.documentMode,$s=null,hc=null,io=null,mc=!1;function yh(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mc||$s==null||$s!==Xl(r)||(r=$s,"selectionStart"in r&&Od(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),io&&xo(io,r)||(io=r,r=sa(hc,"onSelect"),0<r.length&&(t=new Pd("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=$s)))}function pl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Us={animationend:pl("Animation","AnimationEnd"),animationiteration:pl("Animation","AnimationIteration"),animationstart:pl("Animation","AnimationStart"),transitionend:pl("Transition","TransitionEnd")},Cu={},Ng={};sr&&(Ng=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function Ia(e){if(Cu[e])return Cu[e];if(!Us[e])return e;var t=Us[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ng)return Cu[e]=t[n];return e}var jg=Ia("animationend"),Mg=Ia("animationiteration"),Rg=Ia("animationstart"),Lg=Ia("transitionend"),_g=new Map,xh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(e,t){_g.set(e,t),bs(t,[e])}for(var bu=0;bu<xh.length;bu++){var ku=xh[bu],qx=ku.toLowerCase(),Yx=ku[0].toUpperCase()+ku.slice(1);Br(qx,"on"+Yx)}Br(jg,"onAnimationEnd");Br(Mg,"onAnimationIteration");Br(Rg,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(Lg,"onTransitionEnd");vi("onMouseEnter",["mouseout","mouseover"]);vi("onMouseLeave",["mouseout","mouseover"]);vi("onPointerEnter",["pointerout","pointerover"]);vi("onPointerLeave",["pointerout","pointerover"]);bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ji));function wh(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,q0(r,t,void 0,e),e.currentTarget=null}function Tg(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;wh(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;wh(s,l,d),i=u}}}if(Zl)throw e=uc,Zl=!1,uc=null,e}function Ie(e,t){var n=t[xc];n===void 0&&(n=t[xc]=new Set);var r=e+"__bubble";n.has(r)||(Pg(t,e,2,!1),n.add(r))}function Eu(e,t,n){var r=0;t&&(r|=4),Pg(n,e,r,t)}var gl="_reactListening"+Math.random().toString(36).slice(2);function wo(e){if(!e[gl]){e[gl]=!0,$p.forEach(function(n){n!=="selectionchange"&&(Gx.has(n)||Eu(n,!1,e),Eu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gl]||(t[gl]=!0,Eu("selectionchange",!1,t))}}function Pg(e,t,n,r){switch(gg(t)){case 1:var s=cx;break;case 4:s=dx;break;default:s=_d}n=s.bind(null,t,n,e),s=void 0,!ac||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Nu(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Jr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}ng(function(){var d=i,f=jd(n),m=[];e:{var g=_g.get(e);if(g!==void 0){var C=Pd,w=e;switch(e){case"keypress":if(Fl(n)===0)break e;case"keydown":case"keyup":C=Nx;break;case"focusin":w="focus",C=xu;break;case"focusout":w="blur",C=xu;break;case"beforeblur":case"afterblur":C=xu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=ah;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=mx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=Rx;break;case jg:case Mg:case Rg:C=vx;break;case Lg:C=_x;break;case"scroll":C=fx;break;case"wheel":C=Px;break;case"copy":case"cut":case"paste":C=xx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=ch}var E=(t&4)!==0,L=!E&&e==="scroll",y=E?g!==null?g+"Capture":null:g;E=[];for(var h=d,p;h!==null;){p=h;var v=p.stateNode;if(p.tag===5&&v!==null&&(p=v,y!==null&&(v=mo(h,y),v!=null&&E.push(So(h,v,p)))),L)break;h=h.return}0<E.length&&(g=new C(g,w,null,n,f),m.push({event:g,listeners:E}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",g&&n!==oc&&(w=n.relatedTarget||n.fromElement)&&(Jr(w)||w[ir]))break e;if((C||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,C?(w=n.relatedTarget||n.toElement,C=d,w=w?Jr(w):null,w!==null&&(L=ks(w),w!==L||w.tag!==5&&w.tag!==6)&&(w=null)):(C=null,w=d),C!==w)){if(E=ah,v="onMouseLeave",y="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(E=ch,v="onPointerLeave",y="onPointerEnter",h="pointer"),L=C==null?g:Bs(C),p=w==null?g:Bs(w),g=new E(v,h+"leave",C,n,f),g.target=L,g.relatedTarget=p,v=null,Jr(f)===d&&(E=new E(y,h+"enter",w,n,f),E.target=p,E.relatedTarget=L,v=E),L=v,C&&w)t:{for(E=C,y=w,h=0,p=E;p;p=Ps(p))h++;for(p=0,v=y;v;v=Ps(v))p++;for(;0<h-p;)E=Ps(E),h--;for(;0<p-h;)y=Ps(y),p--;for(;h--;){if(E===y||y!==null&&E===y.alternate)break t;E=Ps(E),y=Ps(y)}E=null}else E=null;C!==null&&Sh(m,g,C,E,!1),w!==null&&L!==null&&Sh(m,L,w,E,!0)}}e:{if(g=d?Bs(d):window,C=g.nodeName&&g.nodeName.toLowerCase(),C==="select"||C==="input"&&g.type==="file")var S=$x;else if(hh(g))if(Cg)S=Hx;else{S=Bx;var R=Ux}else(C=g.nodeName)&&C.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(S=Wx);if(S&&(S=S(e,d))){Sg(m,S,n,f);break e}R&&R(e,g,d),e==="focusout"&&(R=g._wrapperState)&&R.controlled&&g.type==="number"&&tc(g,"number",g.value)}switch(R=d?Bs(d):window,e){case"focusin":(hh(R)||R.contentEditable==="true")&&($s=R,hc=d,io=null);break;case"focusout":io=hc=$s=null;break;case"mousedown":mc=!0;break;case"contextmenu":case"mouseup":case"dragend":mc=!1,yh(m,n,f);break;case"selectionchange":if(Kx)break;case"keydown":case"keyup":yh(m,n,f)}var j;if(Fd)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else As?xg(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(yg&&n.locale!=="ko"&&(As||k!=="onCompositionStart"?k==="onCompositionEnd"&&As&&(j=vg()):(Rr=f,Td="value"in Rr?Rr.value:Rr.textContent,As=!0)),R=sa(d,k),0<R.length&&(k=new uh(k,e,null,n,f),m.push({event:k,listeners:R}),j?k.data=j:(j=wg(n),j!==null&&(k.data=j)))),(j=Fx?Ox(e,n):Dx(e,n))&&(d=sa(d,"onBeforeInput"),0<d.length&&(f=new uh("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=j))}Tg(m,t)})}function So(e,t,n){return{instance:e,listener:t,currentTarget:n}}function sa(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=mo(e,n),i!=null&&r.unshift(So(e,i,s)),i=mo(e,t),i!=null&&r.push(So(e,i,s))),e=e.return}return r}function Ps(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Sh(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=mo(n,i),u!=null&&o.unshift(So(n,u,l))):s||(u=mo(n,i),u!=null&&o.push(So(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Xx=/\r\n?/g,Jx=/\u0000|\uFFFD/g;function Ch(e){return(typeof e=="string"?e:""+e).replace(Xx,`
`).replace(Jx,"")}function vl(e,t,n){if(t=Ch(t),Ch(e)!==t&&n)throw Error($(425))}function ia(){}var pc=null,gc=null;function vc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var yc=typeof setTimeout=="function"?setTimeout:void 0,Zx=typeof clearTimeout=="function"?clearTimeout:void 0,bh=typeof Promise=="function"?Promise:void 0,ew=typeof queueMicrotask=="function"?queueMicrotask:typeof bh<"u"?function(e){return bh.resolve(null).then(e).catch(tw)}:yc;function tw(e){setTimeout(function(){throw e})}function ju(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),vo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);vo(t)}function Ir(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ji=Math.random().toString(36).slice(2),Fn="__reactFiber$"+ji,Co="__reactProps$"+ji,ir="__reactContainer$"+ji,xc="__reactEvents$"+ji,nw="__reactListeners$"+ji,rw="__reactHandles$"+ji;function Jr(e){var t=e[Fn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ir]||n[Fn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=kh(e);e!==null;){if(n=e[Fn])return n;e=kh(e)}return t}e=n,n=e.parentNode}return null}function Uo(e){return e=e[Fn]||e[ir],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Bs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function Fa(e){return e[Co]||null}var wc=[],Ws=-1;function Wr(e){return{current:e}}function Fe(e){0>Ws||(e.current=wc[Ws],wc[Ws]=null,Ws--)}function _e(e,t){Ws++,wc[Ws]=e.current,e.current=t}var Ur={},Ct=Wr(Ur),Ut=Wr(!1),gs=Ur;function yi(e,t){var n=e.type.contextTypes;if(!n)return Ur;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Bt(e){return e=e.childContextTypes,e!=null}function oa(){Fe(Ut),Fe(Ct)}function Eh(e,t,n){if(Ct.current!==Ur)throw Error($(168));_e(Ct,t),_e(Ut,n)}function Ig(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error($(108,U0(e)||"Unknown",s));return $e({},n,r)}function la(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ur,gs=Ct.current,_e(Ct,e),_e(Ut,Ut.current),!0}function Nh(e,t,n){var r=e.stateNode;if(!r)throw Error($(169));n?(e=Ig(e,t,gs),r.__reactInternalMemoizedMergedChildContext=e,Fe(Ut),Fe(Ct),_e(Ct,e)):Fe(Ut),_e(Ut,n)}var qn=null,Oa=!1,Mu=!1;function Fg(e){qn===null?qn=[e]:qn.push(e)}function sw(e){Oa=!0,Fg(e)}function Hr(){if(!Mu&&qn!==null){Mu=!0;var e=0,t=je;try{var n=qn;for(je=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}qn=null,Oa=!1}catch(s){throw qn!==null&&(qn=qn.slice(e+1)),og(Md,Hr),s}finally{je=t,Mu=!1}}return null}var Hs=[],Vs=0,aa=null,ua=0,sn=[],on=0,vs=null,Zn=1,er="";function Gr(e,t){Hs[Vs++]=ua,Hs[Vs++]=aa,aa=e,ua=t}function Og(e,t,n){sn[on++]=Zn,sn[on++]=er,sn[on++]=vs,vs=e;var r=Zn;e=er;var s=32-kn(r)-1;r&=~(1<<s),n+=1;var i=32-kn(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Zn=1<<32-kn(t)+s|n<<s|r,er=i+e}else Zn=1<<i|n<<s|r,er=e}function Dd(e){e.return!==null&&(Gr(e,1),Og(e,1,0))}function zd(e){for(;e===aa;)aa=Hs[--Vs],Hs[Vs]=null,ua=Hs[--Vs],Hs[Vs]=null;for(;e===vs;)vs=sn[--on],sn[on]=null,er=sn[--on],sn[on]=null,Zn=sn[--on],sn[on]=null}var Gt=null,Yt=null,De=!1,bn=null;function Dg(e,t){var n=an(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function jh(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Gt=e,Yt=Ir(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Gt=e,Yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=vs!==null?{id:Zn,overflow:er}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=an(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Gt=e,Yt=null,!0):!1;default:return!1}}function Sc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Cc(e){if(De){var t=Yt;if(t){var n=t;if(!jh(e,t)){if(Sc(e))throw Error($(418));t=Ir(n.nextSibling);var r=Gt;t&&jh(e,t)?Dg(r,n):(e.flags=e.flags&-4097|2,De=!1,Gt=e)}}else{if(Sc(e))throw Error($(418));e.flags=e.flags&-4097|2,De=!1,Gt=e}}}function Mh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Gt=e}function yl(e){if(e!==Gt)return!1;if(!De)return Mh(e),De=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vc(e.type,e.memoizedProps)),t&&(t=Yt)){if(Sc(e))throw zg(),Error($(418));for(;t;)Dg(e,t),t=Ir(t.nextSibling)}if(Mh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Yt=Ir(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Yt=null}}else Yt=Gt?Ir(e.stateNode.nextSibling):null;return!0}function zg(){for(var e=Yt;e;)e=Ir(e.nextSibling)}function xi(){Yt=Gt=null,De=!1}function Ad(e){bn===null?bn=[e]:bn.push(e)}var iw=ar.ReactCurrentBatchConfig;function Bi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function xl(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rh(e){var t=e._init;return t(e._payload)}function Ag(e){function t(y,h){if(e){var p=y.deletions;p===null?(y.deletions=[h],y.flags|=16):p.push(h)}}function n(y,h){if(!e)return null;for(;h!==null;)t(y,h),h=h.sibling;return null}function r(y,h){for(y=new Map;h!==null;)h.key!==null?y.set(h.key,h):y.set(h.index,h),h=h.sibling;return y}function s(y,h){return y=zr(y,h),y.index=0,y.sibling=null,y}function i(y,h,p){return y.index=p,e?(p=y.alternate,p!==null?(p=p.index,p<h?(y.flags|=2,h):p):(y.flags|=2,h)):(y.flags|=1048576,h)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,h,p,v){return h===null||h.tag!==6?(h=Fu(p,y.mode,v),h.return=y,h):(h=s(h,p),h.return=y,h)}function u(y,h,p,v){var S=p.type;return S===zs?f(y,h,p.props.children,v,p.key):h!==null&&(h.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===gr&&Rh(S)===h.type)?(v=s(h,p.props),v.ref=Bi(y,h,p),v.return=y,v):(v=Bl(p.type,p.key,p.props,null,y.mode,v),v.ref=Bi(y,h,p),v.return=y,v)}function d(y,h,p,v){return h===null||h.tag!==4||h.stateNode.containerInfo!==p.containerInfo||h.stateNode.implementation!==p.implementation?(h=Ou(p,y.mode,v),h.return=y,h):(h=s(h,p.children||[]),h.return=y,h)}function f(y,h,p,v,S){return h===null||h.tag!==7?(h=ps(p,y.mode,v,S),h.return=y,h):(h=s(h,p),h.return=y,h)}function m(y,h,p){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Fu(""+h,y.mode,p),h.return=y,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case al:return p=Bl(h.type,h.key,h.props,null,y.mode,p),p.ref=Bi(y,null,h),p.return=y,p;case Ds:return h=Ou(h,y.mode,p),h.return=y,h;case gr:var v=h._init;return m(y,v(h._payload),p)}if(Gi(h)||Di(h))return h=ps(h,y.mode,p,null),h.return=y,h;xl(y,h)}return null}function g(y,h,p,v){var S=h!==null?h.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return S!==null?null:l(y,h,""+p,v);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case al:return p.key===S?u(y,h,p,v):null;case Ds:return p.key===S?d(y,h,p,v):null;case gr:return S=p._init,g(y,h,S(p._payload),v)}if(Gi(p)||Di(p))return S!==null?null:f(y,h,p,v,null);xl(y,p)}return null}function C(y,h,p,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return y=y.get(p)||null,l(h,y,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case al:return y=y.get(v.key===null?p:v.key)||null,u(h,y,v,S);case Ds:return y=y.get(v.key===null?p:v.key)||null,d(h,y,v,S);case gr:var R=v._init;return C(y,h,p,R(v._payload),S)}if(Gi(v)||Di(v))return y=y.get(p)||null,f(h,y,v,S,null);xl(h,v)}return null}function w(y,h,p,v){for(var S=null,R=null,j=h,k=h=0,_=null;j!==null&&k<p.length;k++){j.index>k?(_=j,j=null):_=j.sibling;var N=g(y,j,p[k],v);if(N===null){j===null&&(j=_);break}e&&j&&N.alternate===null&&t(y,j),h=i(N,h,k),R===null?S=N:R.sibling=N,R=N,j=_}if(k===p.length)return n(y,j),De&&Gr(y,k),S;if(j===null){for(;k<p.length;k++)j=m(y,p[k],v),j!==null&&(h=i(j,h,k),R===null?S=j:R.sibling=j,R=j);return De&&Gr(y,k),S}for(j=r(y,j);k<p.length;k++)_=C(j,y,k,p[k],v),_!==null&&(e&&_.alternate!==null&&j.delete(_.key===null?k:_.key),h=i(_,h,k),R===null?S=_:R.sibling=_,R=_);return e&&j.forEach(function(F){return t(y,F)}),De&&Gr(y,k),S}function E(y,h,p,v){var S=Di(p);if(typeof S!="function")throw Error($(150));if(p=S.call(p),p==null)throw Error($(151));for(var R=S=null,j=h,k=h=0,_=null,N=p.next();j!==null&&!N.done;k++,N=p.next()){j.index>k?(_=j,j=null):_=j.sibling;var F=g(y,j,N.value,v);if(F===null){j===null&&(j=_);break}e&&j&&F.alternate===null&&t(y,j),h=i(F,h,k),R===null?S=F:R.sibling=F,R=F,j=_}if(N.done)return n(y,j),De&&Gr(y,k),S;if(j===null){for(;!N.done;k++,N=p.next())N=m(y,N.value,v),N!==null&&(h=i(N,h,k),R===null?S=N:R.sibling=N,R=N);return De&&Gr(y,k),S}for(j=r(y,j);!N.done;k++,N=p.next())N=C(j,y,k,N.value,v),N!==null&&(e&&N.alternate!==null&&j.delete(N.key===null?k:N.key),h=i(N,h,k),R===null?S=N:R.sibling=N,R=N);return e&&j.forEach(function(U){return t(y,U)}),De&&Gr(y,k),S}function L(y,h,p,v){if(typeof p=="object"&&p!==null&&p.type===zs&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case al:e:{for(var S=p.key,R=h;R!==null;){if(R.key===S){if(S=p.type,S===zs){if(R.tag===7){n(y,R.sibling),h=s(R,p.props.children),h.return=y,y=h;break e}}else if(R.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===gr&&Rh(S)===R.type){n(y,R.sibling),h=s(R,p.props),h.ref=Bi(y,R,p),h.return=y,y=h;break e}n(y,R);break}else t(y,R);R=R.sibling}p.type===zs?(h=ps(p.props.children,y.mode,v,p.key),h.return=y,y=h):(v=Bl(p.type,p.key,p.props,null,y.mode,v),v.ref=Bi(y,h,p),v.return=y,y=v)}return o(y);case Ds:e:{for(R=p.key;h!==null;){if(h.key===R)if(h.tag===4&&h.stateNode.containerInfo===p.containerInfo&&h.stateNode.implementation===p.implementation){n(y,h.sibling),h=s(h,p.children||[]),h.return=y,y=h;break e}else{n(y,h);break}else t(y,h);h=h.sibling}h=Ou(p,y.mode,v),h.return=y,y=h}return o(y);case gr:return R=p._init,L(y,h,R(p._payload),v)}if(Gi(p))return w(y,h,p,v);if(Di(p))return E(y,h,p,v);xl(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,h!==null&&h.tag===6?(n(y,h.sibling),h=s(h,p),h.return=y,y=h):(n(y,h),h=Fu(p,y.mode,v),h.return=y,y=h),o(y)):n(y,h)}return L}var wi=Ag(!0),$g=Ag(!1),ca=Wr(null),da=null,Qs=null,$d=null;function Ud(){$d=Qs=da=null}function Bd(e){var t=ca.current;Fe(ca),e._currentValue=t}function bc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Zs(e,t){da=e,$d=Qs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($t=!0),e.firstContext=null)}function cn(e){var t=e._currentValue;if($d!==e)if(e={context:e,memoizedValue:t,next:null},Qs===null){if(da===null)throw Error($(308));Qs=e,da.dependencies={lanes:0,firstContext:e}}else Qs=Qs.next=e;return t}var Zr=null;function Wd(e){Zr===null?Zr=[e]:Zr.push(e)}function Ug(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Wd(t)):(n.next=s.next,s.next=n),t.interleaved=n,or(e,r)}function or(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var vr=!1;function Hd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function tr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,be&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,or(e,n)}return s=r.interleaved,s===null?(t.next=t,Wd(r)):(t.next=s.next,s.next=t),r.interleaved=t,or(e,n)}function Ol(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rd(e,n)}}function Lh(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fa(e,t,n,r){var s=e.updateQueue;vr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=d=u=null,l=i;do{var g=l.lane,C=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:C,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,E=l;switch(g=t,C=n,E.tag){case 1:if(w=E.payload,typeof w=="function"){m=w.call(C,m,g);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=E.payload,g=typeof w=="function"?w.call(C,m,g):w,g==null)break e;m=$e({},m,g);break e;case 2:vr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else C={eventTime:C,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=C,u=m):f=f.next=C,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);xs|=o,e.lanes=o,e.memoizedState=m}}function _h(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Bo={},Dn=Wr(Bo),bo=Wr(Bo),ko=Wr(Bo);function es(e){if(e===Bo)throw Error($(174));return e}function Vd(e,t){switch(_e(ko,t),_e(bo,e),_e(Dn,Bo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:rc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=rc(t,e)}Fe(Dn),_e(Dn,t)}function Si(){Fe(Dn),Fe(bo),Fe(ko)}function Wg(e){es(ko.current);var t=es(Dn.current),n=rc(t,e.type);t!==n&&(_e(bo,e),_e(Dn,n))}function Qd(e){bo.current===e&&(Fe(Dn),Fe(bo))}var ze=Wr(0);function ha(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ru=[];function Kd(){for(var e=0;e<Ru.length;e++)Ru[e]._workInProgressVersionPrimary=null;Ru.length=0}var Dl=ar.ReactCurrentDispatcher,Lu=ar.ReactCurrentBatchConfig,ys=0,Ae=null,Ze=null,lt=null,ma=!1,oo=!1,Eo=0,ow=0;function xt(){throw Error($(321))}function qd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jn(e[n],t[n]))return!1;return!0}function Yd(e,t,n,r,s,i){if(ys=i,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Dl.current=e===null||e.memoizedState===null?cw:dw,e=n(r,s),oo){i=0;do{if(oo=!1,Eo=0,25<=i)throw Error($(301));i+=1,lt=Ze=null,t.updateQueue=null,Dl.current=fw,e=n(r,s)}while(oo)}if(Dl.current=pa,t=Ze!==null&&Ze.next!==null,ys=0,lt=Ze=Ae=null,ma=!1,t)throw Error($(300));return e}function Gd(){var e=Eo!==0;return Eo=0,e}function _n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?Ae.memoizedState=lt=e:lt=lt.next=e,lt}function dn(){if(Ze===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=lt===null?Ae.memoizedState:lt.next;if(t!==null)lt=t,Ze=e;else{if(e===null)throw Error($(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},lt===null?Ae.memoizedState=lt=e:lt=lt.next=e}return lt}function No(e,t){return typeof t=="function"?t(e):t}function _u(e){var t=dn(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=Ze,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var f=d.lane;if((ys&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ae.lanes|=f,xs|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,jn(r,t.memoizedState)||($t=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Ae.lanes|=i,xs|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Tu(e){var t=dn(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);jn(i,t.memoizedState)||($t=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Hg(){}function Vg(e,t){var n=Ae,r=dn(),s=t(),i=!jn(r.memoizedState,s);if(i&&(r.memoizedState=s,$t=!0),r=r.queue,Xd(qg.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||lt!==null&&lt.memoizedState.tag&1){if(n.flags|=2048,jo(9,Kg.bind(null,n,r,s,t),void 0,null),at===null)throw Error($(349));ys&30||Qg(n,t,s)}return s}function Qg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Kg(e,t,n,r){t.value=n,t.getSnapshot=r,Yg(t)&&Gg(e)}function qg(e,t,n){return n(function(){Yg(t)&&Gg(e)})}function Yg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jn(e,n)}catch{return!0}}function Gg(e){var t=or(e,1);t!==null&&En(t,e,1,-1)}function Th(e){var t=_n();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:e},t.queue=e,e=e.dispatch=uw.bind(null,Ae,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Xg(){return dn().memoizedState}function zl(e,t,n,r){var s=_n();Ae.flags|=e,s.memoizedState=jo(1|t,n,void 0,r===void 0?null:r)}function Da(e,t,n,r){var s=dn();r=r===void 0?null:r;var i=void 0;if(Ze!==null){var o=Ze.memoizedState;if(i=o.destroy,r!==null&&qd(r,o.deps)){s.memoizedState=jo(t,n,i,r);return}}Ae.flags|=e,s.memoizedState=jo(1|t,n,i,r)}function Ph(e,t){return zl(8390656,8,e,t)}function Xd(e,t){return Da(2048,8,e,t)}function Jg(e,t){return Da(4,2,e,t)}function Zg(e,t){return Da(4,4,e,t)}function ev(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tv(e,t,n){return n=n!=null?n.concat([e]):null,Da(4,4,ev.bind(null,t,e),n)}function Jd(){}function nv(e,t){var n=dn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function rv(e,t){var n=dn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function sv(e,t,n){return ys&21?(jn(n,t)||(n=ug(),Ae.lanes|=n,xs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$t=!0),e.memoizedState=n)}function lw(e,t){var n=je;je=n!==0&&4>n?n:4,e(!0);var r=Lu.transition;Lu.transition={};try{e(!1),t()}finally{je=n,Lu.transition=r}}function iv(){return dn().memoizedState}function aw(e,t,n){var r=Dr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ov(e))lv(t,n);else if(n=Ug(e,t,n,r),n!==null){var s=Lt();En(n,e,r,s),av(n,t,r)}}function uw(e,t,n){var r=Dr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ov(e))lv(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,jn(l,o)){var u=t.interleaved;u===null?(s.next=s,Wd(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=Ug(e,t,s,r),n!==null&&(s=Lt(),En(n,e,r,s),av(n,t,r))}}function ov(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function lv(e,t){oo=ma=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function av(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rd(e,n)}}var pa={readContext:cn,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},cw={readContext:cn,useCallback:function(e,t){return _n().memoizedState=[e,t===void 0?null:t],e},useContext:cn,useEffect:Ph,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,zl(4194308,4,ev.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zl(4194308,4,e,t)},useInsertionEffect:function(e,t){return zl(4,2,e,t)},useMemo:function(e,t){var n=_n();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_n();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=aw.bind(null,Ae,e),[r.memoizedState,e]},useRef:function(e){var t=_n();return e={current:e},t.memoizedState=e},useState:Th,useDebugValue:Jd,useDeferredValue:function(e){return _n().memoizedState=e},useTransition:function(){var e=Th(!1),t=e[0];return e=lw.bind(null,e[1]),_n().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ae,s=_n();if(De){if(n===void 0)throw Error($(407));n=n()}else{if(n=t(),at===null)throw Error($(349));ys&30||Qg(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Ph(qg.bind(null,r,i,e),[e]),r.flags|=2048,jo(9,Kg.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=_n(),t=at.identifierPrefix;if(De){var n=er,r=Zn;n=(r&~(1<<32-kn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Eo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ow++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},dw={readContext:cn,useCallback:nv,useContext:cn,useEffect:Xd,useImperativeHandle:tv,useInsertionEffect:Jg,useLayoutEffect:Zg,useMemo:rv,useReducer:_u,useRef:Xg,useState:function(){return _u(No)},useDebugValue:Jd,useDeferredValue:function(e){var t=dn();return sv(t,Ze.memoizedState,e)},useTransition:function(){var e=_u(No)[0],t=dn().memoizedState;return[e,t]},useMutableSource:Hg,useSyncExternalStore:Vg,useId:iv,unstable_isNewReconciler:!1},fw={readContext:cn,useCallback:nv,useContext:cn,useEffect:Xd,useImperativeHandle:tv,useInsertionEffect:Jg,useLayoutEffect:Zg,useMemo:rv,useReducer:Tu,useRef:Xg,useState:function(){return Tu(No)},useDebugValue:Jd,useDeferredValue:function(e){var t=dn();return Ze===null?t.memoizedState=e:sv(t,Ze.memoizedState,e)},useTransition:function(){var e=Tu(No)[0],t=dn().memoizedState;return[e,t]},useMutableSource:Hg,useSyncExternalStore:Vg,useId:iv,unstable_isNewReconciler:!1};function yn(e,t){if(e&&e.defaultProps){t=$e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function kc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:$e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return(e=e._reactInternals)?ks(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Lt(),s=Dr(e),i=tr(r,s);i.payload=t,n!=null&&(i.callback=n),t=Fr(e,i,s),t!==null&&(En(t,e,s,r),Ol(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Lt(),s=Dr(e),i=tr(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Fr(e,i,s),t!==null&&(En(t,e,s,r),Ol(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lt(),r=Dr(e),s=tr(n,r);s.tag=2,t!=null&&(s.callback=t),t=Fr(e,s,r),t!==null&&(En(t,e,r,n),Ol(t,e,r))}};function Ih(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!xo(n,r)||!xo(s,i):!0}function uv(e,t,n){var r=!1,s=Ur,i=t.contextType;return typeof i=="object"&&i!==null?i=cn(i):(s=Bt(t)?gs:Ct.current,r=t.contextTypes,i=(r=r!=null)?yi(e,s):Ur),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Fh(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ec(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Hd(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=cn(i):(i=Bt(t)?gs:Ct.current,s.context=yi(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(kc(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&za.enqueueReplaceState(s,s.state,null),fa(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ci(e,t){try{var n="",r=t;do n+=$0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Pu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Nc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hw=typeof WeakMap=="function"?WeakMap:Map;function cv(e,t,n){n=tr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){va||(va=!0,Oc=r),Nc(e,t)},n}function dv(e,t,n){n=tr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Nc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Nc(e,t),typeof r!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Oh(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new hw;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=jw.bind(null,e,t,n),t.then(e,e))}function Dh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function zh(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=tr(-1,1),t.tag=2,Fr(n,t,1))),n.lanes|=1),e)}var mw=ar.ReactCurrentOwner,$t=!1;function Mt(e,t,n,r){t.child=e===null?$g(t,null,n,r):wi(t,e.child,n,r)}function Ah(e,t,n,r,s){n=n.render;var i=t.ref;return Zs(t,s),r=Yd(e,t,n,r,i,s),n=Gd(),e!==null&&!$t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,lr(e,t,s)):(De&&n&&Dd(t),t.flags|=1,Mt(e,t,r,s),t.child)}function $h(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!lf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,fv(e,t,i,r,s)):(e=Bl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:xo,n(o,r)&&e.ref===t.ref)return lr(e,t,s)}return t.flags|=1,e=zr(i,r),e.ref=t.ref,e.return=t,t.child=e}function fv(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(xo(i,r)&&e.ref===t.ref)if($t=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&($t=!0);else return t.lanes=e.lanes,lr(e,t,s)}return jc(e,t,n,r,s)}function hv(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(qs,qt),qt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(qs,qt),qt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_e(qs,qt),qt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,_e(qs,qt),qt|=r;return Mt(e,t,s,n),t.child}function mv(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function jc(e,t,n,r,s){var i=Bt(n)?gs:Ct.current;return i=yi(t,i),Zs(t,s),n=Yd(e,t,n,r,i,s),r=Gd(),e!==null&&!$t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,lr(e,t,s)):(De&&r&&Dd(t),t.flags|=1,Mt(e,t,n,s),t.child)}function Uh(e,t,n,r,s){if(Bt(n)){var i=!0;la(t)}else i=!1;if(Zs(t,s),t.stateNode===null)Al(e,t),uv(t,n,r),Ec(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=cn(d):(d=Bt(n)?gs:Ct.current,d=yi(t,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Fh(t,o,r,d),vr=!1;var g=t.memoizedState;o.state=g,fa(t,r,o,s),u=t.memoizedState,l!==r||g!==u||Ut.current||vr?(typeof f=="function"&&(kc(t,n,f,r),u=t.memoizedState),(l=vr||Ih(t,n,l,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Bg(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:yn(t.type,l),o.props=d,m=t.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=cn(u):(u=Bt(n)?gs:Ct.current,u=yi(t,u));var C=n.getDerivedStateFromProps;(f=typeof C=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Fh(t,o,r,u),vr=!1,g=t.memoizedState,o.state=g,fa(t,r,o,s);var w=t.memoizedState;l!==m||g!==w||Ut.current||vr?(typeof C=="function"&&(kc(t,n,C,r),w=t.memoizedState),(d=vr||Ih(t,n,d,r,g,w,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Mc(e,t,n,r,i,s)}function Mc(e,t,n,r,s,i){mv(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Nh(t,n,!1),lr(e,t,i);r=t.stateNode,mw.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=wi(t,e.child,null,i),t.child=wi(t,null,l,i)):Mt(e,t,l,i),t.memoizedState=r.state,s&&Nh(t,n,!0),t.child}function pv(e){var t=e.stateNode;t.pendingContext?Eh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Eh(e,t.context,!1),Vd(e,t.containerInfo)}function Bh(e,t,n,r,s){return xi(),Ad(s),t.flags|=256,Mt(e,t,n,r),t.child}var Rc={dehydrated:null,treeContext:null,retryLane:0};function Lc(e){return{baseLanes:e,cachePool:null,transitions:null}}function gv(e,t,n){var r=t.pendingProps,s=ze.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),_e(ze,s&1),e===null)return Cc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ua(o,r,0,null),e=ps(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Lc(n),t.memoizedState=Rc,e):Zd(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return pw(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=zr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=zr(l,i):(i=ps(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Lc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Rc,r}return i=e.child,e=i.sibling,r=zr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Zd(e,t){return t=Ua({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wl(e,t,n,r){return r!==null&&Ad(r),wi(t,e.child,null,n),e=Zd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pw(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Pu(Error($(422))),wl(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Ua({mode:"visible",children:r.children},s,0,null),i=ps(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&wi(t,e.child,null,o),t.child.memoizedState=Lc(o),t.memoizedState=Rc,i);if(!(t.mode&1))return wl(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=Pu(i,r,void 0),wl(e,t,o,r)}if(l=(o&e.childLanes)!==0,$t||l){if(r=at,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,or(e,s),En(r,e,s,-1))}return of(),r=Pu(Error($(421))),wl(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Mw.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Yt=Ir(s.nextSibling),Gt=t,De=!0,bn=null,e!==null&&(sn[on++]=Zn,sn[on++]=er,sn[on++]=vs,Zn=e.id,er=e.overflow,vs=t),t=Zd(t,r.children),t.flags|=4096,t)}function Wh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),bc(e.return,t,n)}function Iu(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function vv(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Mt(e,t,r.children,n),r=ze.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wh(e,n,t);else if(e.tag===19)Wh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_e(ze,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&ha(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Iu(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ha(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Iu(t,!0,n,null,i);break;case"together":Iu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Al(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function lr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),xs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,n=zr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function gw(e,t,n){switch(t.tag){case 3:pv(t),xi();break;case 5:Wg(t);break;case 1:Bt(t.type)&&la(t);break;case 4:Vd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;_e(ca,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(_e(ze,ze.current&1),t.flags|=128,null):n&t.child.childLanes?gv(e,t,n):(_e(ze,ze.current&1),e=lr(e,t,n),e!==null?e.sibling:null);_e(ze,ze.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return vv(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(ze,ze.current),r)break;return null;case 22:case 23:return t.lanes=0,hv(e,t,n)}return lr(e,t,n)}var yv,_c,xv,wv;yv=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_c=function(){};xv=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,es(Dn.current);var i=null;switch(n){case"input":s=Zu(e,s),r=Zu(e,r),i=[];break;case"select":s=$e({},s,{value:void 0}),r=$e({},r,{value:void 0}),i=[];break;case"textarea":s=nc(e,s),r=nc(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ia)}sc(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(fo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(fo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ie("scroll",e),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};wv=function(e,t,n,r){n!==r&&(t.flags|=4)};function Wi(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function wt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vw(e,t,n){var r=t.pendingProps;switch(zd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(t),null;case 1:return Bt(t.type)&&oa(),wt(t),null;case 3:return r=t.stateNode,Si(),Fe(Ut),Fe(Ct),Kd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(yl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,bn!==null&&(Ac(bn),bn=null))),_c(e,t),wt(t),null;case 5:Qd(t);var s=es(ko.current);if(n=t.type,e!==null&&t.stateNode!=null)xv(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error($(166));return wt(t),null}if(e=es(Dn.current),yl(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Fn]=t,r[Co]=i,e=(t.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(s=0;s<Ji.length;s++)Ie(Ji[s],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":Jf(r,i),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ie("invalid",r);break;case"textarea":eh(r,i),Ie("invalid",r)}sc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&vl(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&vl(r.textContent,l,e),s=["children",""+l]):fo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ie("scroll",r)}switch(n){case"input":ul(r),Zf(r,i,!0);break;case"textarea":ul(r),th(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ia)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=qp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Fn]=t,e[Co]=r,yv(e,t,!1,!1),t.stateNode=e;e:{switch(o=ic(n,r),n){case"dialog":Ie("cancel",e),Ie("close",e),s=r;break;case"iframe":case"object":case"embed":Ie("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ji.length;s++)Ie(Ji[s],e);s=r;break;case"source":Ie("error",e),s=r;break;case"img":case"image":case"link":Ie("error",e),Ie("load",e),s=r;break;case"details":Ie("toggle",e),s=r;break;case"input":Jf(e,r),s=Zu(e,r),Ie("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=$e({},r,{value:void 0}),Ie("invalid",e);break;case"textarea":eh(e,r),s=nc(e,r),Ie("invalid",e);break;default:s=r}sc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Xp(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Yp(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ho(e,u):typeof u=="number"&&ho(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ie("scroll",e):u!=null&&bd(e,i,u,o))}switch(n){case"input":ul(e),Zf(e,r,!1);break;case"textarea":ul(e),th(e);break;case"option":r.value!=null&&e.setAttribute("value",""+$r(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Ys(e,!!r.multiple,i,!1):r.defaultValue!=null&&Ys(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ia)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return wt(t),null;case 6:if(e&&t.stateNode!=null)wv(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error($(166));if(n=es(ko.current),es(Dn.current),yl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Fn]=t,(i=r.nodeValue!==n)&&(e=Gt,e!==null))switch(e.tag){case 3:vl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vl(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fn]=t,t.stateNode=r}return wt(t),null;case 13:if(Fe(ze),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(De&&Yt!==null&&t.mode&1&&!(t.flags&128))zg(),xi(),t.flags|=98560,i=!1;else if(i=yl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error($(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Fn]=t}else xi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;wt(t),i=!1}else bn!==null&&(Ac(bn),bn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ze.current&1?tt===0&&(tt=3):of())),t.updateQueue!==null&&(t.flags|=4),wt(t),null);case 4:return Si(),_c(e,t),e===null&&wo(t.stateNode.containerInfo),wt(t),null;case 10:return Bd(t.type._context),wt(t),null;case 17:return Bt(t.type)&&oa(),wt(t),null;case 19:if(Fe(ze),i=t.memoizedState,i===null)return wt(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Wi(i,!1);else{if(tt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ha(e),o!==null){for(t.flags|=128,Wi(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _e(ze,ze.current&1|2),t.child}e=e.sibling}i.tail!==null&&qe()>bi&&(t.flags|=128,r=!0,Wi(i,!1),t.lanes=4194304)}else{if(!r)if(e=ha(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Wi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!De)return wt(t),null}else 2*qe()-i.renderingStartTime>bi&&n!==1073741824&&(t.flags|=128,r=!0,Wi(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=qe(),t.sibling=null,n=ze.current,_e(ze,r?n&1|2:n&1),t):(wt(t),null);case 22:case 23:return sf(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?qt&1073741824&&(wt(t),t.subtreeFlags&6&&(t.flags|=8192)):wt(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function yw(e,t){switch(zd(t),t.tag){case 1:return Bt(t.type)&&oa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Si(),Fe(Ut),Fe(Ct),Kd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qd(t),null;case 13:if(Fe(ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));xi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fe(ze),null;case 4:return Si(),null;case 10:return Bd(t.type._context),null;case 22:case 23:return sf(),null;case 24:return null;default:return null}}var Sl=!1,St=!1,xw=typeof WeakSet=="function"?WeakSet:Set,G=null;function Ks(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(e,t,r)}else n.current=null}function Tc(e,t,n){try{n()}catch(r){He(e,t,r)}}var Hh=!1;function ww(e,t){if(pc=na,e=Eg(),Od(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,m=e,g=null;t:for(;;){for(var C;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(C=m.firstChild)!==null;)g=m,m=C;for(;;){if(m===e)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(u=o),(C=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=C}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(gc={focusedElem:e,selectionRange:n},na=!1,G=t;G!==null;)if(t=G,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,G=e;else for(;G!==null;){t=G;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var E=w.memoizedProps,L=w.memoizedState,y=t.stateNode,h=y.getSnapshotBeforeUpdate(t.elementType===t.type?E:yn(t.type,E),L);y.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(v){He(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,G=e;break}G=t.return}return w=Hh,Hh=!1,w}function lo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Tc(t,n,i)}s=s.next}while(s!==r)}}function Aa(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Pc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Sv(e){var t=e.alternate;t!==null&&(e.alternate=null,Sv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Fn],delete t[Co],delete t[xc],delete t[nw],delete t[rw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Cv(e){return e.tag===5||e.tag===3||e.tag===4}function Vh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Cv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ic(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ia));else if(r!==4&&(e=e.child,e!==null))for(Ic(e,t,n),e=e.sibling;e!==null;)Ic(e,t,n),e=e.sibling}function Fc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Fc(e,t,n),e=e.sibling;e!==null;)Fc(e,t,n),e=e.sibling}var mt=null,Cn=!1;function hr(e,t,n){for(n=n.child;n!==null;)bv(e,t,n),n=n.sibling}function bv(e,t,n){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(_a,n)}catch{}switch(n.tag){case 5:St||Ks(n,t);case 6:var r=mt,s=Cn;mt=null,hr(e,t,n),mt=r,Cn=s,mt!==null&&(Cn?(e=mt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):mt.removeChild(n.stateNode));break;case 18:mt!==null&&(Cn?(e=mt,n=n.stateNode,e.nodeType===8?ju(e.parentNode,n):e.nodeType===1&&ju(e,n),vo(e)):ju(mt,n.stateNode));break;case 4:r=mt,s=Cn,mt=n.stateNode.containerInfo,Cn=!0,hr(e,t,n),mt=r,Cn=s;break;case 0:case 11:case 14:case 15:if(!St&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Tc(n,t,o),s=s.next}while(s!==r)}hr(e,t,n);break;case 1:if(!St&&(Ks(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){He(n,t,l)}hr(e,t,n);break;case 21:hr(e,t,n);break;case 22:n.mode&1?(St=(r=St)||n.memoizedState!==null,hr(e,t,n),St=r):hr(e,t,n);break;default:hr(e,t,n)}}function Qh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new xw),t.forEach(function(r){var s=Rw.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function gn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:mt=l.stateNode,Cn=!1;break e;case 3:mt=l.stateNode.containerInfo,Cn=!0;break e;case 4:mt=l.stateNode.containerInfo,Cn=!0;break e}l=l.return}if(mt===null)throw Error($(160));bv(i,o,s),mt=null,Cn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){He(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kv(t,e),t=t.sibling}function kv(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gn(t,e),Ln(e),r&4){try{lo(3,e,e.return),Aa(3,e)}catch(E){He(e,e.return,E)}try{lo(5,e,e.return)}catch(E){He(e,e.return,E)}}break;case 1:gn(t,e),Ln(e),r&512&&n!==null&&Ks(n,n.return);break;case 5:if(gn(t,e),Ln(e),r&512&&n!==null&&Ks(n,n.return),e.flags&32){var s=e.stateNode;try{ho(s,"")}catch(E){He(e,e.return,E)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Qp(s,i),ic(l,o);var d=ic(l,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?Xp(s,m):f==="dangerouslySetInnerHTML"?Yp(s,m):f==="children"?ho(s,m):bd(s,f,m,d)}switch(l){case"input":ec(s,i);break;case"textarea":Kp(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var C=i.value;C!=null?Ys(s,!!i.multiple,C,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ys(s,!!i.multiple,i.defaultValue,!0):Ys(s,!!i.multiple,i.multiple?[]:"",!1))}s[Co]=i}catch(E){He(e,e.return,E)}}break;case 6:if(gn(t,e),Ln(e),r&4){if(e.stateNode===null)throw Error($(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(E){He(e,e.return,E)}}break;case 3:if(gn(t,e),Ln(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vo(t.containerInfo)}catch(E){He(e,e.return,E)}break;case 4:gn(t,e),Ln(e);break;case 13:gn(t,e),Ln(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(nf=qe())),r&4&&Qh(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(St=(d=St)||f,gn(t,e),St=d):gn(t,e),Ln(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(G=e,f=e.child;f!==null;){for(m=G=f;G!==null;){switch(g=G,C=g.child,g.tag){case 0:case 11:case 14:case 15:lo(4,g,g.return);break;case 1:Ks(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(E){He(r,n,E)}}break;case 5:Ks(g,g.return);break;case 22:if(g.memoizedState!==null){qh(m);continue}}C!==null?(C.return=g,G=C):qh(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Gp("display",o))}catch(E){He(e,e.return,E)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(E){He(e,e.return,E)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:gn(t,e),Ln(e),r&4&&Qh(e);break;case 21:break;default:gn(t,e),Ln(e)}}function Ln(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Cv(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ho(s,""),r.flags&=-33);var i=Vh(e);Fc(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Vh(e);Ic(e,l,o);break;default:throw Error($(161))}}catch(u){He(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Sw(e,t,n){G=e,Ev(e)}function Ev(e,t,n){for(var r=(e.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Sl;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||St;l=Sl;var d=St;if(Sl=o,(St=u)&&!d)for(G=s;G!==null;)o=G,u=o.child,o.tag===22&&o.memoizedState!==null?Yh(s):u!==null?(u.return=o,G=u):Yh(s);for(;i!==null;)G=i,Ev(i),i=i.sibling;G=s,Sl=l,St=d}Kh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):Kh(e)}}function Kh(e){for(;G!==null;){var t=G;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:St||Aa(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!St)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:yn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&_h(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}_h(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&vo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}St||t.flags&512&&Pc(t)}catch(g){He(t,t.return,g)}}if(t===e){G=null;break}if(n=t.sibling,n!==null){n.return=t.return,G=n;break}G=t.return}}function qh(e){for(;G!==null;){var t=G;if(t===e){G=null;break}var n=t.sibling;if(n!==null){n.return=t.return,G=n;break}G=t.return}}function Yh(e){for(;G!==null;){var t=G;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Aa(4,t)}catch(u){He(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){He(t,s,u)}}var i=t.return;try{Pc(t)}catch(u){He(t,i,u)}break;case 5:var o=t.return;try{Pc(t)}catch(u){He(t,o,u)}}}catch(u){He(t,t.return,u)}if(t===e){G=null;break}var l=t.sibling;if(l!==null){l.return=t.return,G=l;break}G=t.return}}var Cw=Math.ceil,ga=ar.ReactCurrentDispatcher,ef=ar.ReactCurrentOwner,un=ar.ReactCurrentBatchConfig,be=0,at=null,Ge=null,pt=0,qt=0,qs=Wr(0),tt=0,Mo=null,xs=0,$a=0,tf=0,ao=null,At=null,nf=0,bi=1/0,Kn=null,va=!1,Oc=null,Or=null,Cl=!1,Lr=null,ya=0,uo=0,Dc=null,$l=-1,Ul=0;function Lt(){return be&6?qe():$l!==-1?$l:$l=qe()}function Dr(e){return e.mode&1?be&2&&pt!==0?pt&-pt:iw.transition!==null?(Ul===0&&(Ul=ug()),Ul):(e=je,e!==0||(e=window.event,e=e===void 0?16:gg(e.type)),e):1}function En(e,t,n,r){if(50<uo)throw uo=0,Dc=null,Error($(185));Ao(e,n,r),(!(be&2)||e!==at)&&(e===at&&(!(be&2)&&($a|=n),tt===4&&xr(e,pt)),Wt(e,r),n===1&&be===0&&!(t.mode&1)&&(bi=qe()+500,Oa&&Hr()))}function Wt(e,t){var n=e.callbackNode;ix(e,t);var r=ta(e,e===at?pt:0);if(r===0)n!==null&&sh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&sh(n),t===1)e.tag===0?sw(Gh.bind(null,e)):Fg(Gh.bind(null,e)),ew(function(){!(be&6)&&Hr()}),n=null;else{switch(cg(r)){case 1:n=Md;break;case 4:n=lg;break;case 16:n=ea;break;case 536870912:n=ag;break;default:n=ea}n=Pv(n,Nv.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Nv(e,t){if($l=-1,Ul=0,be&6)throw Error($(327));var n=e.callbackNode;if(ei()&&e.callbackNode!==n)return null;var r=ta(e,e===at?pt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=xa(e,r);else{t=r;var s=be;be|=2;var i=Mv();(at!==e||pt!==t)&&(Kn=null,bi=qe()+500,ms(e,t));do try{Ew();break}catch(l){jv(e,l)}while(!0);Ud(),ga.current=i,be=s,Ge!==null?t=0:(at=null,pt=0,t=tt)}if(t!==0){if(t===2&&(s=cc(e),s!==0&&(r=s,t=zc(e,s))),t===1)throw n=Mo,ms(e,0),xr(e,r),Wt(e,qe()),n;if(t===6)xr(e,r);else{if(s=e.current.alternate,!(r&30)&&!bw(s)&&(t=xa(e,r),t===2&&(i=cc(e),i!==0&&(r=i,t=zc(e,i))),t===1))throw n=Mo,ms(e,0),xr(e,r),Wt(e,qe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error($(345));case 2:Xr(e,At,Kn);break;case 3:if(xr(e,r),(r&130023424)===r&&(t=nf+500-qe(),10<t)){if(ta(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Lt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=yc(Xr.bind(null,e,At,Kn),t);break}Xr(e,At,Kn);break;case 4:if(xr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-kn(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cw(r/1960))-r,10<r){e.timeoutHandle=yc(Xr.bind(null,e,At,Kn),r);break}Xr(e,At,Kn);break;case 5:Xr(e,At,Kn);break;default:throw Error($(329))}}}return Wt(e,qe()),e.callbackNode===n?Nv.bind(null,e):null}function zc(e,t){var n=ao;return e.current.memoizedState.isDehydrated&&(ms(e,t).flags|=256),e=xa(e,t),e!==2&&(t=At,At=n,t!==null&&Ac(t)),e}function Ac(e){At===null?At=e:At.push.apply(At,e)}function bw(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!jn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xr(e,t){for(t&=~tf,t&=~$a,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-kn(t),r=1<<n;e[n]=-1,t&=~r}}function Gh(e){if(be&6)throw Error($(327));ei();var t=ta(e,0);if(!(t&1))return Wt(e,qe()),null;var n=xa(e,t);if(e.tag!==0&&n===2){var r=cc(e);r!==0&&(t=r,n=zc(e,r))}if(n===1)throw n=Mo,ms(e,0),xr(e,t),Wt(e,qe()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xr(e,At,Kn),Wt(e,qe()),null}function rf(e,t){var n=be;be|=1;try{return e(t)}finally{be=n,be===0&&(bi=qe()+500,Oa&&Hr())}}function ws(e){Lr!==null&&Lr.tag===0&&!(be&6)&&ei();var t=be;be|=1;var n=un.transition,r=je;try{if(un.transition=null,je=1,e)return e()}finally{je=r,un.transition=n,be=t,!(be&6)&&Hr()}}function sf(){qt=qs.current,Fe(qs)}function ms(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Zx(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch(zd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oa();break;case 3:Si(),Fe(Ut),Fe(Ct),Kd();break;case 5:Qd(r);break;case 4:Si();break;case 13:Fe(ze);break;case 19:Fe(ze);break;case 10:Bd(r.type._context);break;case 22:case 23:sf()}n=n.return}if(at=e,Ge=e=zr(e.current,null),pt=qt=t,tt=0,Mo=null,tf=$a=xs=0,At=ao=null,Zr!==null){for(t=0;t<Zr.length;t++)if(n=Zr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Zr=null}return e}function jv(e,t){do{var n=Ge;try{if(Ud(),Dl.current=pa,ma){for(var r=Ae.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ma=!1}if(ys=0,lt=Ze=Ae=null,oo=!1,Eo=0,ef.current=null,n===null||n.return===null){tt=1,Mo=t,Ge=null;break}e:{var i=e,o=n.return,l=n,u=t;if(t=pt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var C=Dh(o);if(C!==null){C.flags&=-257,zh(C,o,l,i,t),C.mode&1&&Oh(i,d,t),t=C,u=d;var w=t.updateQueue;if(w===null){var E=new Set;E.add(u),t.updateQueue=E}else w.add(u);break e}else{if(!(t&1)){Oh(i,d,t),of();break e}u=Error($(426))}}else if(De&&l.mode&1){var L=Dh(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),zh(L,o,l,i,t),Ad(Ci(u,l));break e}}i=u=Ci(u,l),tt!==4&&(tt=2),ao===null?ao=[i]:ao.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=cv(i,u,t);Lh(i,y);break e;case 1:l=u;var h=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof h.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Or===null||!Or.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var v=dv(i,l,t);Lh(i,v);break e}}i=i.return}while(i!==null)}Lv(n)}catch(S){t=S,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function Mv(){var e=ga.current;return ga.current=pa,e===null?pa:e}function of(){(tt===0||tt===3||tt===2)&&(tt=4),at===null||!(xs&268435455)&&!($a&268435455)||xr(at,pt)}function xa(e,t){var n=be;be|=2;var r=Mv();(at!==e||pt!==t)&&(Kn=null,ms(e,t));do try{kw();break}catch(s){jv(e,s)}while(!0);if(Ud(),be=n,ga.current=r,Ge!==null)throw Error($(261));return at=null,pt=0,tt}function kw(){for(;Ge!==null;)Rv(Ge)}function Ew(){for(;Ge!==null&&!G0();)Rv(Ge)}function Rv(e){var t=Tv(e.alternate,e,qt);e.memoizedProps=e.pendingProps,t===null?Lv(e):Ge=t,ef.current=null}function Lv(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=yw(n,t),n!==null){n.flags&=32767,Ge=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tt=6,Ge=null;return}}else if(n=vw(n,t,qt),n!==null){Ge=n;return}if(t=t.sibling,t!==null){Ge=t;return}Ge=t=e}while(t!==null);tt===0&&(tt=5)}function Xr(e,t,n){var r=je,s=un.transition;try{un.transition=null,je=1,Nw(e,t,n,r)}finally{un.transition=s,je=r}return null}function Nw(e,t,n,r){do ei();while(Lr!==null);if(be&6)throw Error($(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(ox(e,i),e===at&&(Ge=at=null,pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cl||(Cl=!0,Pv(ea,function(){return ei(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=un.transition,un.transition=null;var o=je;je=1;var l=be;be|=4,ef.current=null,ww(e,n),kv(n,e),Qx(gc),na=!!pc,gc=pc=null,e.current=n,Sw(n),X0(),be=l,je=o,un.transition=i}else e.current=n;if(Cl&&(Cl=!1,Lr=e,ya=s),i=e.pendingLanes,i===0&&(Or=null),ex(n.stateNode),Wt(e,qe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(va)throw va=!1,e=Oc,Oc=null,e;return ya&1&&e.tag!==0&&ei(),i=e.pendingLanes,i&1?e===Dc?uo++:(uo=0,Dc=e):uo=0,Hr(),null}function ei(){if(Lr!==null){var e=cg(ya),t=un.transition,n=je;try{if(un.transition=null,je=16>e?16:e,Lr===null)var r=!1;else{if(e=Lr,Lr=null,ya=0,be&6)throw Error($(331));var s=be;for(be|=4,G=e.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(G=d;G!==null;){var f=G;switch(f.tag){case 0:case 11:case 15:lo(8,f,i)}var m=f.child;if(m!==null)m.return=f,G=m;else for(;G!==null;){f=G;var g=f.sibling,C=f.return;if(Sv(f),f===d){G=null;break}if(g!==null){g.return=C,G=g;break}G=C}}}var w=i.alternate;if(w!==null){var E=w.child;if(E!==null){w.child=null;do{var L=E.sibling;E.sibling=null,E=L}while(E!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:lo(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,G=y;break e}G=i.return}}var h=e.current;for(G=h;G!==null;){o=G;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,G=p;else e:for(o=h;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Aa(9,l)}}catch(S){He(l,l.return,S)}if(l===o){G=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,G=v;break e}G=l.return}}if(be=s,Hr(),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(_a,e)}catch{}r=!0}return r}finally{je=n,un.transition=t}}return!1}function Xh(e,t,n){t=Ci(n,t),t=cv(e,t,1),e=Fr(e,t,1),t=Lt(),e!==null&&(Ao(e,1,t),Wt(e,t))}function He(e,t,n){if(e.tag===3)Xh(e,e,n);else for(;t!==null;){if(t.tag===3){Xh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Or===null||!Or.has(r))){e=Ci(n,e),e=dv(t,e,1),t=Fr(t,e,1),e=Lt(),t!==null&&(Ao(t,1,e),Wt(t,e));break}}t=t.return}}function jw(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Lt(),e.pingedLanes|=e.suspendedLanes&n,at===e&&(pt&n)===n&&(tt===4||tt===3&&(pt&130023424)===pt&&500>qe()-nf?ms(e,0):tf|=n),Wt(e,t)}function _v(e,t){t===0&&(e.mode&1?(t=fl,fl<<=1,!(fl&130023424)&&(fl=4194304)):t=1);var n=Lt();e=or(e,t),e!==null&&(Ao(e,t,n),Wt(e,n))}function Mw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_v(e,n)}function Rw(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(t),_v(e,n)}var Tv;Tv=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ut.current)$t=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return $t=!1,gw(e,t,n);$t=!!(e.flags&131072)}else $t=!1,De&&t.flags&1048576&&Og(t,ua,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Al(e,t),e=t.pendingProps;var s=yi(t,Ct.current);Zs(t,n),s=Yd(null,t,r,e,s,n);var i=Gd();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bt(r)?(i=!0,la(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Hd(t),s.updater=za,t.stateNode=s,s._reactInternals=t,Ec(t,r,e,n),t=Mc(null,t,r,!0,i,n)):(t.tag=0,De&&i&&Dd(t),Mt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Al(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=_w(r),e=yn(r,e),s){case 0:t=jc(null,t,r,e,n);break e;case 1:t=Uh(null,t,r,e,n);break e;case 11:t=Ah(null,t,r,e,n);break e;case 14:t=$h(null,t,r,yn(r.type,e),n);break e}throw Error($(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yn(r,s),jc(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yn(r,s),Uh(e,t,r,s,n);case 3:e:{if(pv(t),e===null)throw Error($(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Bg(e,t),fa(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ci(Error($(423)),t),t=Bh(e,t,r,n,s);break e}else if(r!==s){s=Ci(Error($(424)),t),t=Bh(e,t,r,n,s);break e}else for(Yt=Ir(t.stateNode.containerInfo.firstChild),Gt=t,De=!0,bn=null,n=$g(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xi(),r===s){t=lr(e,t,n);break e}Mt(e,t,r,n)}t=t.child}return t;case 5:return Wg(t),e===null&&Cc(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,vc(r,s)?o=null:i!==null&&vc(r,i)&&(t.flags|=32),mv(e,t),Mt(e,t,o,n),t.child;case 6:return e===null&&Cc(t),null;case 13:return gv(e,t,n);case 4:return Vd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=wi(t,null,r,n):Mt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yn(r,s),Ah(e,t,r,s,n);case 7:return Mt(e,t,t.pendingProps,n),t.child;case 8:return Mt(e,t,t.pendingProps.children,n),t.child;case 12:return Mt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,_e(ca,r._currentValue),r._currentValue=o,i!==null)if(jn(i.value,o)){if(i.children===s.children&&!Ut.current){t=lr(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=tr(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),bc(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),bc(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Mt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Zs(t,n),s=cn(s),r=r(s),t.flags|=1,Mt(e,t,r,n),t.child;case 14:return r=t.type,s=yn(r,t.pendingProps),s=yn(r.type,s),$h(e,t,r,s,n);case 15:return fv(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yn(r,s),Al(e,t),t.tag=1,Bt(r)?(e=!0,la(t)):e=!1,Zs(t,n),uv(t,r,s),Ec(t,r,s,n),Mc(null,t,r,!0,e,n);case 19:return vv(e,t,n);case 22:return hv(e,t,n)}throw Error($(156,t.tag))};function Pv(e,t){return og(e,t)}function Lw(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(e,t,n,r){return new Lw(e,t,n,r)}function lf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _w(e){if(typeof e=="function")return lf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ed)return 11;if(e===Nd)return 14}return 2}function zr(e,t){var n=e.alternate;return n===null?(n=an(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bl(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")lf(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case zs:return ps(n.children,s,i,t);case kd:o=8,s|=8;break;case Yu:return e=an(12,n,t,s|2),e.elementType=Yu,e.lanes=i,e;case Gu:return e=an(13,n,t,s),e.elementType=Gu,e.lanes=i,e;case Xu:return e=an(19,n,t,s),e.elementType=Xu,e.lanes=i,e;case Wp:return Ua(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Up:o=10;break e;case Bp:o=9;break e;case Ed:o=11;break e;case Nd:o=14;break e;case gr:o=16,r=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=an(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function ps(e,t,n,r){return e=an(7,e,r,t),e.lanes=n,e}function Ua(e,t,n,r){return e=an(22,e,r,t),e.elementType=Wp,e.lanes=n,e.stateNode={isHidden:!1},e}function Fu(e,t,n){return e=an(6,e,null,t),e.lanes=n,e}function Ou(e,t,n){return t=an(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Tw(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gu(0),this.expirationTimes=gu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function af(e,t,n,r,s,i,o,l,u){return e=new Tw(e,t,n,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=an(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hd(i),e}function Pw(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ds,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Iv(e){if(!e)return Ur;e=e._reactInternals;e:{if(ks(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(Bt(n))return Ig(e,n,t)}return t}function Fv(e,t,n,r,s,i,o,l,u){return e=af(n,r,!0,e,s,i,o,l,u),e.context=Iv(null),n=e.current,r=Lt(),s=Dr(n),i=tr(r,s),i.callback=t??null,Fr(n,i,s),e.current.lanes=s,Ao(e,s,r),Wt(e,r),e}function Ba(e,t,n,r){var s=t.current,i=Lt(),o=Dr(s);return n=Iv(n),t.context===null?t.context=n:t.pendingContext=n,t=tr(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Fr(s,t,o),e!==null&&(En(e,s,o,i),Ol(e,s,o)),o}function wa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Jh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function uf(e,t){Jh(e,t),(e=e.alternate)&&Jh(e,t)}function Iw(){return null}var Ov=typeof reportError=="function"?reportError:function(e){console.error(e)};function cf(e){this._internalRoot=e}Wa.prototype.render=cf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));Ba(e,t,null,null)};Wa.prototype.unmount=cf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ws(function(){Ba(null,e,null,null)}),t[ir]=null}};function Wa(e){this._internalRoot=e}Wa.prototype.unstable_scheduleHydration=function(e){if(e){var t=hg();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yr.length&&t!==0&&t<yr[n].priority;n++);yr.splice(n,0,e),n===0&&pg(e)}};function df(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ha(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zh(){}function Fw(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=wa(o);i.call(d)}}var o=Fv(t,r,e,0,null,!1,!1,"",Zh);return e._reactRootContainer=o,e[ir]=o.current,wo(e.nodeType===8?e.parentNode:e),ws(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=wa(u);l.call(d)}}var u=af(e,0,!1,null,null,!1,!1,"",Zh);return e._reactRootContainer=u,e[ir]=u.current,wo(e.nodeType===8?e.parentNode:e),ws(function(){Ba(t,u,n,r)}),u}function Va(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=wa(o);l.call(u)}}Ba(t,o,e,s)}else o=Fw(n,t,e,s,r);return wa(o)}dg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Xi(t.pendingLanes);n!==0&&(Rd(t,n|1),Wt(t,qe()),!(be&6)&&(bi=qe()+500,Hr()))}break;case 13:ws(function(){var r=or(e,1);if(r!==null){var s=Lt();En(r,e,1,s)}}),uf(e,1)}};Ld=function(e){if(e.tag===13){var t=or(e,134217728);if(t!==null){var n=Lt();En(t,e,134217728,n)}uf(e,134217728)}};fg=function(e){if(e.tag===13){var t=Dr(e),n=or(e,t);if(n!==null){var r=Lt();En(n,e,t,r)}uf(e,t)}};hg=function(){return je};mg=function(e,t){var n=je;try{return je=e,t()}finally{je=n}};lc=function(e,t,n){switch(t){case"input":if(ec(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Fa(r);if(!s)throw Error($(90));Vp(r),ec(r,s)}}}break;case"textarea":Kp(e,n);break;case"select":t=n.value,t!=null&&Ys(e,!!n.multiple,t,!1)}};eg=rf;tg=ws;var Ow={usingClientEntryPoint:!1,Events:[Uo,Bs,Fa,Jp,Zp,rf]},Hi={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dw={bundleType:Hi.bundleType,version:Hi.version,rendererPackageName:Hi.rendererPackageName,rendererConfig:Hi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sg(e),e===null?null:e.stateNode},findFiberByHostInstance:Hi.findFiberByHostInstance||Iw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bl.isDisabled&&bl.supportsFiber)try{_a=bl.inject(Dw),On=bl}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ow;Jt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!df(t))throw Error($(200));return Pw(e,t,null,n)};Jt.createRoot=function(e,t){if(!df(e))throw Error($(299));var n=!1,r="",s=Ov;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=af(e,1,!1,null,null,n,!1,r,s),e[ir]=t.current,wo(e.nodeType===8?e.parentNode:e),new cf(t)};Jt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=sg(t),e=e===null?null:e.stateNode,e};Jt.flushSync=function(e){return ws(e)};Jt.hydrate=function(e,t,n){if(!Ha(t))throw Error($(200));return Va(null,e,t,!0,n)};Jt.hydrateRoot=function(e,t,n){if(!df(e))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Ov;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Fv(t,null,e,1,n??null,s,!1,i,o),e[ir]=t.current,wo(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Wa(t)};Jt.render=function(e,t,n){if(!Ha(t))throw Error($(200));return Va(null,e,t,!1,n)};Jt.unmountComponentAtNode=function(e){if(!Ha(e))throw Error($(40));return e._reactRootContainer?(ws(function(){Va(null,null,e,!1,function(){e._reactRootContainer=null,e[ir]=null})}),!0):!1};Jt.unstable_batchedUpdates=rf;Jt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ha(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return Va(e,t,n,!1,r)};Jt.version="18.3.1-next-f1338f8080-20240426";function Dv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dv)}catch(e){console.error(e)}}Dv(),Dp.exports=Jt;var ff=Dp.exports,zv,em=ff;zv=em.createRoot,em.hydrateRoot;var Mi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},zw={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},wr,gd,pp,Aw=(pp=class{constructor(){le(this,wr,zw);le(this,gd,!1)}setTimeoutProvider(e){V(this,wr,e)}setTimeout(e,t){return b(this,wr).setTimeout(e,t)}clearTimeout(e){b(this,wr).clearTimeout(e)}setInterval(e,t){return b(this,wr).setInterval(e,t)}clearInterval(e){b(this,wr).clearInterval(e)}},wr=new WeakMap,gd=new WeakMap,pp),ts=new Aw;function $w(e){setTimeout(e,0)}var Ss=typeof window>"u"||"Deno"in globalThis;function Rt(){}function Uw(e,t){return typeof e=="function"?e(t):e}function $c(e){return typeof e=="number"&&e>=0&&e!==1/0}function Av(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ar(e,t){return typeof e=="function"?e(t):e}function rn(e,t){return typeof e=="function"?e(t):e}function tm(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==hf(o,t.options))return!1}else if(!Ro(t.queryKey,o))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function nm(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Cs(t.options.mutationKey)!==Cs(i))return!1}else if(!Ro(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function hf(e,t){return((t==null?void 0:t.queryKeyHashFn)||Cs)(e)}function Cs(e){return JSON.stringify(e,(t,n)=>Uc(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ro(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Ro(e[n],t[n])):!1}var Bw=Object.prototype.hasOwnProperty;function $v(e,t){if(e===t)return e;const n=rm(e)&&rm(t);if(!n&&!(Uc(e)&&Uc(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let u=0;for(let d=0;d<o;d++){const f=n?d:i[d],m=e[f],g=t[f];if(m===g){l[f]=m,(n?d<s:Bw.call(e,f))&&u++;continue}if(m===null||g===null||typeof m!="object"||typeof g!="object"){l[f]=g;continue}const C=$v(m,g);l[f]=C,C===m&&u++}return s===o&&u===s?e:l}function Sa(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function rm(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Uc(e){if(!sm(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!sm(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function sm(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ww(e){return new Promise(t=>{ts.setTimeout(t,e)})}function Bc(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?$v(e,t):t}function Hw(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function Vw(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var mf=Symbol();function Uv(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===mf?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Bv(e,t){return typeof e=="function"?e(...t):!!e}function Qw(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var is,Sr,ii,gp,Kw=(gp=class extends Mi{constructor(){super();le(this,is);le(this,Sr);le(this,ii);V(this,ii,t=>{if(!Ss&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){b(this,Sr)||this.setEventListener(b(this,ii))}onUnsubscribe(){var t;this.hasListeners()||((t=b(this,Sr))==null||t.call(this),V(this,Sr,void 0))}setEventListener(t){var n;V(this,ii,t),(n=b(this,Sr))==null||n.call(this),V(this,Sr,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){b(this,is)!==t&&(V(this,is,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof b(this,is)=="boolean"?b(this,is):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},is=new WeakMap,Sr=new WeakMap,ii=new WeakMap,gp),pf=new Kw;function Wc(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var qw=$w;function Yw(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=qw;const i=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;t++;try{u=l()}finally{t--,t||o()}return u},batchCalls:l=>(...u)=>{i(()=>{l(...u)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var et=Yw(),oi,Cr,li,vp,Gw=(vp=class extends Mi{constructor(){super();le(this,oi,!0);le(this,Cr);le(this,li);V(this,li,t=>{if(!Ss&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){b(this,Cr)||this.setEventListener(b(this,li))}onUnsubscribe(){var t;this.hasListeners()||((t=b(this,Cr))==null||t.call(this),V(this,Cr,void 0))}setEventListener(t){var n;V(this,li,t),(n=b(this,Cr))==null||n.call(this),V(this,Cr,t(this.setOnline.bind(this)))}setOnline(t){b(this,oi)!==t&&(V(this,oi,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return b(this,oi)}},oi=new WeakMap,Cr=new WeakMap,li=new WeakMap,vp),Ca=new Gw;function Xw(e){return Math.min(1e3*2**e,3e4)}function Wv(e){return(e??"online")==="online"?Ca.isOnline():!0}var Hc=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Hv(e){let t=!1,n=0,r;const s=Wc(),i=()=>s.status!=="pending",o=E=>{var L;if(!i()){const y=new Hc(E);g(y),(L=e.onCancel)==null||L.call(e,y)}},l=()=>{t=!0},u=()=>{t=!1},d=()=>pf.isFocused()&&(e.networkMode==="always"||Ca.isOnline())&&e.canRun(),f=()=>Wv(e.networkMode)&&e.canRun(),m=E=>{i()||(r==null||r(),s.resolve(E))},g=E=>{i()||(r==null||r(),s.reject(E))},C=()=>new Promise(E=>{var L;r=y=>{(i()||d())&&E(y)},(L=e.onPause)==null||L.call(e)}).then(()=>{var E;r=void 0,i()||(E=e.onContinue)==null||E.call(e)}),w=()=>{if(i())return;let E;const L=n===0?e.initialPromise:void 0;try{E=L??e.fn()}catch(y){E=Promise.reject(y)}Promise.resolve(E).then(m).catch(y=>{var R;if(i())return;const h=e.retry??(Ss?0:3),p=e.retryDelay??Xw,v=typeof p=="function"?p(n,y):p,S=h===!0||typeof h=="number"&&n<h||typeof h=="function"&&h(n,y);if(t||!S){g(y);return}n++,(R=e.onFail)==null||R.call(e,n,y),Ww(v).then(()=>d()?void 0:C()).then(()=>{t?g(y):w()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:u,canStart:f,start:()=>(f()?w():C().then(w),s)}}var os,yp,Vv=(yp=class{constructor(){le(this,os)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$c(this.gcTime)&&V(this,os,ts.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ss?1/0:5*60*1e3))}clearGcTimeout(){b(this,os)&&(ts.clearTimeout(b(this,os)),V(this,os,void 0))}},os=new WeakMap,yp),ls,ai,nn,as,ot,Po,us,wn,Qn,xp,Jw=(xp=class extends Vv{constructor(t){super();le(this,wn);le(this,ls);le(this,ai);le(this,nn);le(this,as);le(this,ot);le(this,Po);le(this,us);V(this,us,!1),V(this,Po,t.defaultOptions),this.setOptions(t.options),this.observers=[],V(this,as,t.client),V(this,nn,b(this,as).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,V(this,ls,om(this.options)),this.state=t.state??b(this,ls),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=b(this,ot))==null?void 0:t.promise}setOptions(t){if(this.options={...b(this,Po),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=om(this.options);n.data!==void 0&&(this.setState(im(n.data,n.dataUpdatedAt)),V(this,ls,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&b(this,nn).remove(this)}setData(t,n){const r=Bc(this.state.data,t,this.options);return ge(this,wn,Qn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ge(this,wn,Qn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=b(this,ot))==null?void 0:r.promise;return(s=b(this,ot))==null||s.cancel(t),n?n.then(Rt).catch(Rt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(b(this,ls))}isActive(){return this.observers.some(t=>rn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===mf||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ar(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Av(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=b(this,ot))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=b(this,ot))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),b(this,nn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(b(this,ot)&&(b(this,us)?b(this,ot).cancel({revert:!0}):b(this,ot).cancelRetry()),this.scheduleGc()),b(this,nn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ge(this,wn,Qn).call(this,{type:"invalidate"})}async fetch(t,n){var u,d,f,m,g,C,w,E,L,y,h,p;if(this.state.fetchStatus!=="idle"&&((u=b(this,ot))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(b(this,ot))return b(this,ot).continueRetry(),b(this,ot).promise}if(t&&this.setOptions(t),!this.options.queryFn){const v=this.observers.find(S=>S.options.queryFn);v&&this.setOptions(v.options)}const r=new AbortController,s=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(V(this,us,!0),r.signal)})},i=()=>{const v=Uv(this.options,n),R=(()=>{const j={client:b(this,as),queryKey:this.queryKey,meta:this.meta};return s(j),j})();return V(this,us,!1),this.options.persister?this.options.persister(v,R,this):v(R)},l=(()=>{const v={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:b(this,as),state:this.state,fetchFn:i};return s(v),v})();(d=this.options.behavior)==null||d.onFetch(l,this),V(this,ai,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&ge(this,wn,Qn).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),V(this,ot,Hv({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:v=>{v instanceof Hc&&v.revert&&this.setState({...b(this,ai),fetchStatus:"idle"}),r.abort()},onFail:(v,S)=>{ge(this,wn,Qn).call(this,{type:"failed",failureCount:v,error:S})},onPause:()=>{ge(this,wn,Qn).call(this,{type:"pause"})},onContinue:()=>{ge(this,wn,Qn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const v=await b(this,ot).start();if(v===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(v),(C=(g=b(this,nn).config).onSuccess)==null||C.call(g,v,this),(E=(w=b(this,nn).config).onSettled)==null||E.call(w,v,this.state.error,this),v}catch(v){if(v instanceof Hc){if(v.silent)return b(this,ot).promise;if(v.revert){if(this.state.data===void 0)throw v;return this.state.data}}throw ge(this,wn,Qn).call(this,{type:"error",error:v}),(y=(L=b(this,nn).config).onError)==null||y.call(L,v,this),(p=(h=b(this,nn).config).onSettled)==null||p.call(h,this.state.data,v,this),v}finally{this.scheduleGc()}}},ls=new WeakMap,ai=new WeakMap,nn=new WeakMap,as=new WeakMap,ot=new WeakMap,Po=new WeakMap,us=new WeakMap,wn=new WeakSet,Qn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Qv(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...im(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return V(this,ai,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),et.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),b(this,nn).notify({query:this,type:"updated",action:t})})},xp);function Qv(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Wv(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function im(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function om(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Dt,Ce,Io,Nt,cs,ui,Yn,br,Fo,ci,di,ds,fs,kr,fi,Ne,Zi,Vc,Qc,Kc,qc,Yc,Gc,Xc,Kv,wp,Zw=(wp=class extends Mi{constructor(t,n){super();le(this,Ne);le(this,Dt);le(this,Ce);le(this,Io);le(this,Nt);le(this,cs);le(this,ui);le(this,Yn);le(this,br);le(this,Fo);le(this,ci);le(this,di);le(this,ds);le(this,fs);le(this,kr);le(this,fi,new Set);this.options=n,V(this,Dt,t),V(this,br,null),V(this,Yn,Wc()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(b(this,Ce).addObserver(this),lm(b(this,Ce),this.options)?ge(this,Ne,Zi).call(this):this.updateResult(),ge(this,Ne,qc).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Jc(b(this,Ce),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Jc(b(this,Ce),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ge(this,Ne,Yc).call(this),ge(this,Ne,Gc).call(this),b(this,Ce).removeObserver(this)}setOptions(t){const n=this.options,r=b(this,Ce);if(this.options=b(this,Dt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof rn(this.options.enabled,b(this,Ce))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ge(this,Ne,Xc).call(this),b(this,Ce).setOptions(this.options),n._defaulted&&!Sa(this.options,n)&&b(this,Dt).getQueryCache().notify({type:"observerOptionsUpdated",query:b(this,Ce),observer:this});const s=this.hasListeners();s&&am(b(this,Ce),r,this.options,n)&&ge(this,Ne,Zi).call(this),this.updateResult(),s&&(b(this,Ce)!==r||rn(this.options.enabled,b(this,Ce))!==rn(n.enabled,b(this,Ce))||Ar(this.options.staleTime,b(this,Ce))!==Ar(n.staleTime,b(this,Ce)))&&ge(this,Ne,Vc).call(this);const i=ge(this,Ne,Qc).call(this);s&&(b(this,Ce)!==r||rn(this.options.enabled,b(this,Ce))!==rn(n.enabled,b(this,Ce))||i!==b(this,kr))&&ge(this,Ne,Kc).call(this,i)}getOptimisticResult(t){const n=b(this,Dt).getQueryCache().build(b(this,Dt),t),r=this.createResult(n,t);return t1(this,r)&&(V(this,Nt,r),V(this,ui,this.options),V(this,cs,b(this,Ce).state)),r}getCurrentResult(){return b(this,Nt)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&b(this,Yn).status==="pending"&&b(this,Yn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){b(this,fi).add(t)}getCurrentQuery(){return b(this,Ce)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=b(this,Dt).defaultQueryOptions(t),r=b(this,Dt).getQueryCache().build(b(this,Dt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ge(this,Ne,Zi).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),b(this,Nt)))}createResult(t,n){var _;const r=b(this,Ce),s=this.options,i=b(this,Nt),o=b(this,cs),l=b(this,ui),d=t!==r?t.state:b(this,Io),{state:f}=t;let m={...f},g=!1,C;if(n._optimisticResults){const N=this.hasListeners(),F=!N&&lm(t,n),U=N&&am(t,r,n,s);(F||U)&&(m={...m,...Qv(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:w,errorUpdatedAt:E,status:L}=m;C=m.data;let y=!1;if(n.placeholderData!==void 0&&C===void 0&&L==="pending"){let N;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(N=i.data,y=!0):N=typeof n.placeholderData=="function"?n.placeholderData((_=b(this,di))==null?void 0:_.state.data,b(this,di)):n.placeholderData,N!==void 0&&(L="success",C=Bc(i==null?void 0:i.data,N,n),g=!0)}if(n.select&&C!==void 0&&!y)if(i&&C===(o==null?void 0:o.data)&&n.select===b(this,Fo))C=b(this,ci);else try{V(this,Fo,n.select),C=n.select(C),C=Bc(i==null?void 0:i.data,C,n),V(this,ci,C),V(this,br,null)}catch(N){V(this,br,N)}b(this,br)&&(w=b(this,br),C=b(this,ci),E=Date.now(),L="error");const h=m.fetchStatus==="fetching",p=L==="pending",v=L==="error",S=p&&h,R=C!==void 0,k={status:L,fetchStatus:m.fetchStatus,isPending:p,isSuccess:L==="success",isError:v,isInitialLoading:S,isLoading:S,data:C,dataUpdatedAt:m.dataUpdatedAt,error:w,errorUpdatedAt:E,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:h,isRefetching:h&&!p,isLoadingError:v&&!R,isPaused:m.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:v&&R,isStale:gf(t,n),refetch:this.refetch,promise:b(this,Yn),isEnabled:rn(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const N=D=>{k.status==="error"?D.reject(k.error):k.data!==void 0&&D.resolve(k.data)},F=()=>{const D=V(this,Yn,k.promise=Wc());N(D)},U=b(this,Yn);switch(U.status){case"pending":t.queryHash===r.queryHash&&N(U);break;case"fulfilled":(k.status==="error"||k.data!==U.value)&&F();break;case"rejected":(k.status!=="error"||k.error!==U.reason)&&F();break}}return k}updateResult(){const t=b(this,Nt),n=this.createResult(b(this,Ce),this.options);if(V(this,cs,b(this,Ce).state),V(this,ui,this.options),b(this,cs).data!==void 0&&V(this,di,b(this,Ce)),Sa(n,t))return;V(this,Nt,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!b(this,fi).size)return!0;const o=new Set(i??b(this,fi));return this.options.throwOnError&&o.add("error"),Object.keys(b(this,Nt)).some(l=>{const u=l;return b(this,Nt)[u]!==t[u]&&o.has(u)})};ge(this,Ne,Kv).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ge(this,Ne,qc).call(this)}},Dt=new WeakMap,Ce=new WeakMap,Io=new WeakMap,Nt=new WeakMap,cs=new WeakMap,ui=new WeakMap,Yn=new WeakMap,br=new WeakMap,Fo=new WeakMap,ci=new WeakMap,di=new WeakMap,ds=new WeakMap,fs=new WeakMap,kr=new WeakMap,fi=new WeakMap,Ne=new WeakSet,Zi=function(t){ge(this,Ne,Xc).call(this);let n=b(this,Ce).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Rt)),n},Vc=function(){ge(this,Ne,Yc).call(this);const t=Ar(this.options.staleTime,b(this,Ce));if(Ss||b(this,Nt).isStale||!$c(t))return;const r=Av(b(this,Nt).dataUpdatedAt,t)+1;V(this,ds,ts.setTimeout(()=>{b(this,Nt).isStale||this.updateResult()},r))},Qc=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(b(this,Ce)):this.options.refetchInterval)??!1},Kc=function(t){ge(this,Ne,Gc).call(this),V(this,kr,t),!(Ss||rn(this.options.enabled,b(this,Ce))===!1||!$c(b(this,kr))||b(this,kr)===0)&&V(this,fs,ts.setInterval(()=>{(this.options.refetchIntervalInBackground||pf.isFocused())&&ge(this,Ne,Zi).call(this)},b(this,kr)))},qc=function(){ge(this,Ne,Vc).call(this),ge(this,Ne,Kc).call(this,ge(this,Ne,Qc).call(this))},Yc=function(){b(this,ds)&&(ts.clearTimeout(b(this,ds)),V(this,ds,void 0))},Gc=function(){b(this,fs)&&(ts.clearInterval(b(this,fs)),V(this,fs,void 0))},Xc=function(){const t=b(this,Dt).getQueryCache().build(b(this,Dt),this.options);if(t===b(this,Ce))return;const n=b(this,Ce);V(this,Ce,t),V(this,Io,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},Kv=function(t){et.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(b(this,Nt))}),b(this,Dt).getQueryCache().notify({query:b(this,Ce),type:"observerResultsUpdated"})})},wp);function e1(e,t){return rn(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function lm(e,t){return e1(e,t)||e.state.data!==void 0&&Jc(e,t,t.refetchOnMount)}function Jc(e,t,n){if(rn(t.enabled,e)!==!1&&Ar(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&gf(e,t)}return!1}function am(e,t,n,r){return(e!==t||rn(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&gf(e,n)}function gf(e,t){return rn(t.enabled,e)!==!1&&e.isStaleByTime(Ar(t.staleTime,e))}function t1(e,t){return!Sa(e.getCurrentResult(),t)}function um(e){return{onFetch:(t,n)=>{var f,m,g,C,w;const r=t.options,s=(g=(m=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:m.fetchMore)==null?void 0:g.direction,i=((C=t.state.data)==null?void 0:C.pages)||[],o=((w=t.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const d=async()=>{let E=!1;const L=p=>{Qw(p,()=>t.signal,()=>E=!0)},y=Uv(t.options,t.fetchOptions),h=async(p,v,S)=>{if(E)return Promise.reject();if(v==null&&p.pages.length)return Promise.resolve(p);const j=(()=>{const F={client:t.client,queryKey:t.queryKey,pageParam:v,direction:S?"backward":"forward",meta:t.options.meta};return L(F),F})(),k=await y(j),{maxPages:_}=t.options,N=S?Vw:Hw;return{pages:N(p.pages,k,_),pageParams:N(p.pageParams,v,_)}};if(s&&i.length){const p=s==="backward",v=p?n1:cm,S={pages:i,pageParams:o},R=v(r,S);l=await h(S,R,p)}else{const p=e??i.length;do{const v=u===0?o[0]??r.initialPageParam:cm(r,l);if(u>0&&v==null)break;l=await h(l,v),u++}while(u<p)}return l};t.options.persister?t.fetchFn=()=>{var E,L;return(L=(E=t.options).persister)==null?void 0:L.call(E,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function cm(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function n1(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Oo,Tn,jt,hs,Pn,pr,Sp,r1=(Sp=class extends Vv{constructor(t){super();le(this,Pn);le(this,Oo);le(this,Tn);le(this,jt);le(this,hs);V(this,Oo,t.client),this.mutationId=t.mutationId,V(this,jt,t.mutationCache),V(this,Tn,[]),this.state=t.state||qv(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){b(this,Tn).includes(t)||(b(this,Tn).push(t),this.clearGcTimeout(),b(this,jt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){V(this,Tn,b(this,Tn).filter(n=>n!==t)),this.scheduleGc(),b(this,jt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){b(this,Tn).length||(this.state.status==="pending"?this.scheduleGc():b(this,jt).remove(this))}continue(){var t;return((t=b(this,hs))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,u,d,f,m,g,C,w,E,L,y,h,p,v,S,R,j,k,_;const n=()=>{ge(this,Pn,pr).call(this,{type:"continue"})},r={client:b(this,Oo),meta:this.options.meta,mutationKey:this.options.mutationKey};V(this,hs,Hv({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(N,F)=>{ge(this,Pn,pr).call(this,{type:"failed",failureCount:N,error:F})},onPause:()=>{ge(this,Pn,pr).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>b(this,jt).canRun(this)}));const s=this.state.status==="pending",i=!b(this,hs).canStart();try{if(s)n();else{ge(this,Pn,pr).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=b(this,jt).config).onMutate)==null?void 0:l.call(o,t,this,r));const F=await((d=(u=this.options).onMutate)==null?void 0:d.call(u,t,r));F!==this.state.context&&ge(this,Pn,pr).call(this,{type:"pending",context:F,variables:t,isPaused:i})}const N=await b(this,hs).start();return await((m=(f=b(this,jt).config).onSuccess)==null?void 0:m.call(f,N,t,this.state.context,this,r)),await((C=(g=this.options).onSuccess)==null?void 0:C.call(g,N,t,this.state.context,r)),await((E=(w=b(this,jt).config).onSettled)==null?void 0:E.call(w,N,null,this.state.variables,this.state.context,this,r)),await((y=(L=this.options).onSettled)==null?void 0:y.call(L,N,null,t,this.state.context,r)),ge(this,Pn,pr).call(this,{type:"success",data:N}),N}catch(N){try{await((p=(h=b(this,jt).config).onError)==null?void 0:p.call(h,N,t,this.state.context,this,r))}catch(F){Promise.reject(F)}try{await((S=(v=this.options).onError)==null?void 0:S.call(v,N,t,this.state.context,r))}catch(F){Promise.reject(F)}try{await((j=(R=b(this,jt).config).onSettled)==null?void 0:j.call(R,void 0,N,this.state.variables,this.state.context,this,r))}catch(F){Promise.reject(F)}try{await((_=(k=this.options).onSettled)==null?void 0:_.call(k,void 0,N,t,this.state.context,r))}catch(F){Promise.reject(F)}throw ge(this,Pn,pr).call(this,{type:"error",error:N}),N}finally{b(this,jt).runNext(this)}}},Oo=new WeakMap,Tn=new WeakMap,jt=new WeakMap,hs=new WeakMap,Pn=new WeakSet,pr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),et.batch(()=>{b(this,Tn).forEach(r=>{r.onMutationUpdate(t)}),b(this,jt).notify({mutation:this,type:"updated",action:t})})},Sp);function qv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Gn,Sn,Do,Cp,s1=(Cp=class extends Mi{constructor(t={}){super();le(this,Gn);le(this,Sn);le(this,Do);this.config=t,V(this,Gn,new Set),V(this,Sn,new Map),V(this,Do,0)}build(t,n,r){const s=new r1({client:t,mutationCache:this,mutationId:++ol(this,Do)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){b(this,Gn).add(t);const n=kl(t);if(typeof n=="string"){const r=b(this,Sn).get(n);r?r.push(t):b(this,Sn).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(b(this,Gn).delete(t)){const n=kl(t);if(typeof n=="string"){const r=b(this,Sn).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&b(this,Sn).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=kl(t);if(typeof n=="string"){const r=b(this,Sn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=kl(t);if(typeof n=="string"){const s=(r=b(this,Sn).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){et.batch(()=>{b(this,Gn).forEach(t=>{this.notify({type:"removed",mutation:t})}),b(this,Gn).clear(),b(this,Sn).clear()})}getAll(){return Array.from(b(this,Gn))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>nm(n,r))}findAll(t={}){return this.getAll().filter(n=>nm(t,n))}notify(t){et.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return et.batch(()=>Promise.all(t.map(n=>n.continue().catch(Rt))))}},Gn=new WeakMap,Sn=new WeakMap,Do=new WeakMap,Cp);function kl(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Xn,Er,zt,Jn,rr,Wl,Zc,bp,i1=(bp=class extends Mi{constructor(n,r){super();le(this,rr);le(this,Xn);le(this,Er);le(this,zt);le(this,Jn);V(this,Xn,n),this.setOptions(r),this.bindMethods(),ge(this,rr,Wl).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=b(this,Xn).defaultMutationOptions(n),Sa(this.options,r)||b(this,Xn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:b(this,zt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Cs(r.mutationKey)!==Cs(this.options.mutationKey)?this.reset():((s=b(this,zt))==null?void 0:s.state.status)==="pending"&&b(this,zt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=b(this,zt))==null||n.removeObserver(this)}onMutationUpdate(n){ge(this,rr,Wl).call(this),ge(this,rr,Zc).call(this,n)}getCurrentResult(){return b(this,Er)}reset(){var n;(n=b(this,zt))==null||n.removeObserver(this),V(this,zt,void 0),ge(this,rr,Wl).call(this),ge(this,rr,Zc).call(this)}mutate(n,r){var s;return V(this,Jn,r),(s=b(this,zt))==null||s.removeObserver(this),V(this,zt,b(this,Xn).getMutationCache().build(b(this,Xn),this.options)),b(this,zt).addObserver(this),b(this,zt).execute(n)}},Xn=new WeakMap,Er=new WeakMap,zt=new WeakMap,Jn=new WeakMap,rr=new WeakSet,Wl=function(){var r;const n=((r=b(this,zt))==null?void 0:r.state)??qv();V(this,Er,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Zc=function(n){et.batch(()=>{var r,s,i,o,l,u,d,f;if(b(this,Jn)&&this.hasListeners()){const m=b(this,Er).variables,g=b(this,Er).context,C={client:b(this,Xn),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=b(this,Jn)).onSuccess)==null||s.call(r,n.data,m,g,C)}catch(w){Promise.reject(w)}try{(o=(i=b(this,Jn)).onSettled)==null||o.call(i,n.data,null,m,g,C)}catch(w){Promise.reject(w)}}else if((n==null?void 0:n.type)==="error"){try{(u=(l=b(this,Jn)).onError)==null||u.call(l,n.error,m,g,C)}catch(w){Promise.reject(w)}try{(f=(d=b(this,Jn)).onSettled)==null||f.call(d,void 0,n.error,m,g,C)}catch(w){Promise.reject(w)}}}this.listeners.forEach(m=>{m(b(this,Er))})})},bp),In,kp,o1=(kp=class extends Mi{constructor(t={}){super();le(this,In);this.config=t,V(this,In,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??hf(s,n);let o=this.get(i);return o||(o=new Jw({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){b(this,In).has(t.queryHash)||(b(this,In).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=b(this,In).get(t.queryHash);n&&(t.destroy(),n===t&&b(this,In).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){et.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return b(this,In).get(t)}getAll(){return[...b(this,In).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>tm(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>tm(t,r)):n}notify(t){et.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){et.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){et.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},In=new WeakMap,kp),Be,Nr,jr,hi,mi,Mr,pi,gi,Ep,l1=(Ep=class{constructor(e={}){le(this,Be);le(this,Nr);le(this,jr);le(this,hi);le(this,mi);le(this,Mr);le(this,pi);le(this,gi);V(this,Be,e.queryCache||new o1),V(this,Nr,e.mutationCache||new s1),V(this,jr,e.defaultOptions||{}),V(this,hi,new Map),V(this,mi,new Map),V(this,Mr,0)}mount(){ol(this,Mr)._++,b(this,Mr)===1&&(V(this,pi,pf.subscribe(async e=>{e&&(await this.resumePausedMutations(),b(this,Be).onFocus())})),V(this,gi,Ca.subscribe(async e=>{e&&(await this.resumePausedMutations(),b(this,Be).onOnline())})))}unmount(){var e,t;ol(this,Mr)._--,b(this,Mr)===0&&((e=b(this,pi))==null||e.call(this),V(this,pi,void 0),(t=b(this,gi))==null||t.call(this),V(this,gi,void 0))}isFetching(e){return b(this,Be).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return b(this,Nr).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=b(this,Be).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=b(this,Be).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Ar(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return b(this,Be).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=b(this,Be).get(r.queryHash),i=s==null?void 0:s.state.data,o=Uw(t,i);if(o!==void 0)return b(this,Be).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return et.batch(()=>b(this,Be).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=b(this,Be).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=b(this,Be);et.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=b(this,Be);return et.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=et.batch(()=>b(this,Be).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Rt).catch(Rt)}invalidateQueries(e,t={}){return et.batch(()=>(b(this,Be).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=et.batch(()=>b(this,Be).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Rt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Rt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=b(this,Be).build(this,t);return n.isStaleByTime(Ar(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Rt).catch(Rt)}fetchInfiniteQuery(e){return e.behavior=um(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Rt).catch(Rt)}ensureInfiniteQueryData(e){return e.behavior=um(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ca.isOnline()?b(this,Nr).resumePausedMutations():Promise.resolve()}getQueryCache(){return b(this,Be)}getMutationCache(){return b(this,Nr)}getDefaultOptions(){return b(this,jr)}setDefaultOptions(e){V(this,jr,e)}setQueryDefaults(e,t){b(this,hi).set(Cs(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...b(this,hi).values()],n={};return t.forEach(r=>{Ro(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){b(this,mi).set(Cs(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...b(this,mi).values()],n={};return t.forEach(r=>{Ro(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...b(this,jr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=hf(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===mf&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...b(this,jr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){b(this,Be).clear(),b(this,Nr).clear()}},Be=new WeakMap,Nr=new WeakMap,jr=new WeakMap,hi=new WeakMap,mi=new WeakMap,Mr=new WeakMap,pi=new WeakMap,gi=new WeakMap,Ep),Yv=c.createContext(void 0),Vr=e=>{const t=c.useContext(Yv);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},a1=({client:e,children:t})=>(c.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(Yv.Provider,{value:e,children:t})),Gv=c.createContext(!1),u1=()=>c.useContext(Gv);Gv.Provider;function c1(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var d1=c.createContext(c1()),f1=()=>c.useContext(d1),h1=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},m1=e=>{c.useEffect(()=>{e.clearReset()},[e])},p1=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||Bv(n,[e.error,r])),g1=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},v1=(e,t)=>e.isLoading&&e.isFetching&&!t,y1=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,dm=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function x1(e,t,n){var m,g,C,w,E;const r=u1(),s=f1(),i=Vr(),o=i.defaultQueryOptions(e);(g=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||g.call(m,o),o._optimisticResults=r?"isRestoring":"optimistic",g1(o),h1(o,s),m1(s);const l=!i.getQueryCache().get(o.queryHash),[u]=c.useState(()=>new t(i,o)),d=u.getOptimisticResult(o),f=!r&&e.subscribed!==!1;if(c.useSyncExternalStore(c.useCallback(L=>{const y=f?u.subscribe(et.batchCalls(L)):Rt;return u.updateResult(),y},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),c.useEffect(()=>{u.setOptions(o)},[o,u]),y1(o,d))throw dm(o,u,s);if(p1({result:d,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((w=(C=i.getDefaultOptions().queries)==null?void 0:C._experimental_afterQuery)==null||w.call(C,o,d),o.experimental_prefetchInRender&&!Ss&&v1(d,r)){const L=l?dm(o,u,s):(E=i.getQueryCache().get(o.queryHash))==null?void 0:E.promise;L==null||L.catch(Rt).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?d:u.trackResult(d)}function Qa(e,t){return x1(e,Zw)}function w1(e,t){const n=Vr(),[r]=c.useState(()=>new i1(n,e));c.useEffect(()=>{r.setOptions(e)},[r,e]);const s=c.useSyncExternalStore(c.useCallback(o=>r.subscribe(et.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=c.useCallback((o,l)=>{r.mutate(o,l).catch(Rt)},[r]);if(s.error&&Bv(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function fm(e){return e.length>0&&"options"in e[0]}function ed({value:e,onChange:t,options:n,placeholder:r="Select...",trigger:s,triggerClassName:i="",panelClassName:o="",align:l="left",width:u="auto",showChevron:d=!0,title:f,disabled:m=!1,"aria-label":g}){var k;const[C,w]=c.useState(!1),E=c.useRef(null),L=c.useRef(null),h=c.useCallback(()=>{const _=N=>{const F=N.find(U=>U.value===e);return F?F.label:null};if(fm(n))for(const N of n){const F=_(N.options);if(F)return F}else{const N=_(n);if(N)return N}return r},[e,n,r])();c.useEffect(()=>{if(!C)return;const _=F=>{E.current&&!E.current.contains(F.target)&&w(!1)},N=F=>{var U;F.key==="Escape"&&(w(!1),(U=L.current)==null||U.focus())};return window.addEventListener("click",_),window.addEventListener("keydown",N),()=>{window.removeEventListener("click",_),window.removeEventListener("keydown",N)}},[C]);const p=_=>{var N;t(_),w(!1),(N=L.current)==null||N.focus()},v=_=>_.map(N=>a.jsxs("button",{className:"dropdown-item","data-active":N.value===e,disabled:N.disabled,onClick:()=>!N.disabled&&p(N.value),role:"menuitem",children:[N.icon&&a.jsx("span",{className:"shrink-0",children:N.icon}),a.jsx("span",{className:"flex-1 truncate",children:N.label}),N.value===e&&a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 text-accent",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})]},N.value)),S=((k=L.current)==null?void 0:k.offsetWidth)??0,R=u==="trigger"?S:u==="auto"?void 0:u,j={...R?{width:R,minWidth:R}:{},...l==="right"?{right:0}:{left:0}};return a.jsxs("div",{ref:E,className:"relative",children:[s?a.jsx("div",{onClick:()=>!m&&w(_=>!_),children:s}):a.jsxs("button",{ref:L,type:"button",className:`dropdown-trigger ${i}`,onClick:()=>w(_=>!_),disabled:m,title:f,"aria-label":g,"aria-haspopup":"listbox","aria-expanded":C,children:[a.jsx("span",{className:"truncate",children:h}),d&&a.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`shrink-0 opacity-60 transition-transform ${C?"rotate-180":""}`,children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),C&&a.jsx("div",{className:`dropdown-panel ${o}`,style:j,role:"listbox","aria-label":g,children:fm(n)?n.map((_,N)=>a.jsxs("div",{children:[_.label&&a.jsx("div",{className:"dropdown-label",children:_.label}),v(_.options),N<n.length-1&&a.jsx("div",{className:"dropdown-divider"})]},_.label||N)):v(n)})]})}const S1={offline:"sync-dot-offline",unstable:"sync-dot-unstable",recent:"sync-dot-recent",editing:"sync-dot-editing",live:"sync-dot-live"};function C1({state:e,presence:t,syncLabel:n,connectionLabel:r,lastEditedLabel:s,hasEdits:i,localTypingActive:o,recentTouches:l,isNarrow:u}){const[d,f]=c.useState(!1),[m,g]=c.useState(null),C=c.useRef(null),w=c.useRef(null),E=c.useRef(null),L=t?`${t.viewing} viewing  ${t.editing} editing`:"- viewing  - editing",y=t?String(t.viewing):"-",h=c.useCallback(()=>{E.current&&(window.clearTimeout(E.current),E.current=null)},[]),p=c.useCallback((S,R)=>{var j;R&&((j=navigator.clipboard)==null||j.writeText(R).then(()=>{g(S),h(),E.current=window.setTimeout(()=>{g(k=>k===S?null:k)},1e3)}).catch(()=>{}))},[h]),v=c.useCallback(()=>{f(!1),window.requestAnimationFrame(()=>{var S;return(S=w.current)==null?void 0:S.focus()})},[]);return c.useEffect(()=>{if(!d)return;const S=j=>{!C.current||C.current.contains(j.target)||v()},R=j=>{j.key==="Escape"&&v()};return window.addEventListener("mousedown",S),window.addEventListener("keydown",R),()=>{window.removeEventListener("mousedown",S),window.removeEventListener("keydown",R)}},[d,v]),c.useEffect(()=>()=>{h()},[h]),a.jsxs("div",{ref:C,className:"sync-indicator",children:[a.jsxs("button",{ref:w,type:"button",className:"sync-indicator-button",onClick:()=>d?v():f(!0),"aria-haspopup":"dialog","aria-expanded":d,"aria-label":"Sync status",title:L,children:[a.jsx("span",{className:`sync-indicator-dot ${S1[e]}`,"aria-hidden":"true"}),!u&&a.jsx("span",{className:"sync-indicator-count tabular-nums",children:y}),!u&&o&&a.jsx("span",{className:"sync-indicator-local",children:"typing"})]}),d&&a.jsxs("div",{role:"dialog","aria-label":"Sync status",className:"sync-indicator-card select-text",children:[a.jsx("div",{className:"sync-indicator-line sync-indicator-primary",children:n}),a.jsx("div",{className:"sync-indicator-line",children:r}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:L}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:i?`Last edited: ${s}`:"No edits yet."}),o&&a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:"Local typing in progress (saved on blur)."}),a.jsxs("div",{className:"sync-indicator-section",children:[a.jsx("div",{className:"sync-indicator-section-title",children:"Recently touched files"}),l.length>0?a.jsx("div",{className:"sync-indicator-list",children:l.map(S=>a.jsxs("div",{className:"sync-indicator-item",children:[a.jsx("button",{type:"button",className:"sync-indicator-item-name",title:`Copy filename: ${S.label}`,onClick:()=>p(S.path,S.label),children:S.label}),a.jsx("span",{className:"sync-indicator-item-time tabular-nums",children:m===S.path?"Copied":S.timeLabel})]},S.path))}):a.jsx("div",{className:"sync-indicator-empty",children:"No recent touches."})]})]})]})}function b1({rootRef:e,onSearch:t,viewerActive:n,onBack:r,zoomPercent:s,onZoomPercentChange:i,currentLabel:o,itemCount:l,totalCount:u,sortSpec:d,metricKeys:f,onSortChange:m,sortDisabled:g=!1,filterCount:C,onOpenFilters:w,starFilters:E,onToggleStar:L,onClearStars:y,onClearFilters:h,starCounts:p,viewMode:v,onViewMode:S,gridItemSize:R,onGridItemSize:j,leftOpen:k,rightOpen:_,onToggleLeft:N,onToggleRight:F,onPrevImage:U,onNextImage:D,canPrevImage:ee,canNextImage:ue,searchDisabled:T=!1,searchPlaceholder:de,syncIndicator:z}){const[H,J]=c.useState(!1),[ae,ce]=c.useState(!1),[Le,Q]=c.useState(!1),K=c.useRef(null),ne=c.useRef(null);c.useEffect(()=>{if(!H)return;const B=Y=>{K.current&&!K.current.contains(Y.target)&&J(!1)};return window.addEventListener("click",B),()=>window.removeEventListener("click",B)},[H]),c.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const B=window.matchMedia("(max-width: 900px)"),Y=Z=>ce(Z.matches);return ce(B.matches),"addEventListener"in B?(B.addEventListener("change",Y),()=>B.removeEventListener("change",Y)):(B.addListener(Y),()=>B.removeListener(Y))},[]),c.useEffect(()=>{if(T){Q(!1);return}if(!ae||n){Q(!1);return}if(!Le)return;const B=window.requestAnimationFrame(()=>{var Y;return(Y=ne.current)==null?void 0:Y.focus()});return()=>window.cancelAnimationFrame(B)},[ae,Le,n,T]);const fe=d??{kind:"builtin",key:"added",dir:"desc"},Me=fe.dir,Ue=fe.kind==="builtin"&&fe.key==="random",Ve=n||g,ut=f!=null&&f.length?f.map(B=>({value:`metric:${B}`,label:B,disabled:g})):[],nt=[{value:"builtin:added",label:"Date added",disabled:g},{value:"builtin:name",label:"Filename",disabled:g},{value:"builtin:random",label:"Random",disabled:g},...ut],en=[{label:"Layout",options:[{value:"layout:grid",label:"Grid"},{value:"layout:masonry",label:"Masonry"}]},{label:"Sort by",options:nt}],rt=fe.kind==="metric"?`metric:${fe.key}`:`builtin:${fe.key}`,Pt=[{label:"Sort by",options:nt}],tn=ae&&!n,It=B=>{if(B.startsWith("layout:")){const Y=B==="layout:masonry"?"adaptive":"grid";S==null||S(Y)}else{if(g)return;m==null||m(hm(B,fe))}},bt=()=>{!m||g||m(Ue?fe:{...fe,dir:Me==="desc"?"asc":"desc"})},ct=E??[],Te=ct.length,A=E1(C,Te),se=k1(l,u),q=o||"Root";return a.jsxs("div",{ref:e,className:"toolbar-shell fixed top-0 left-0 right-0 h-12 grid grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] items-center px-3 gap-3 bg-panel border-b border-border z-[var(--z-toolbar)] col-span-full row-start-1 select-none",children:[a.jsxs("div",{className:"toolbar-left flex items-center gap-4 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsxs("div",{className:"flex flex-col min-w-0 leading-tight",children:[a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted",children:"Scope"}),a.jsx("span",{className:"text-sm font-medium text-text truncate",title:q,children:q})]}),se&&a.jsx("span",{className:"toolbar-count text-xs text-muted whitespace-nowrap tabular-nums",children:se})]}),a.jsxs("div",{className:"toolbar-sort flex items-center gap-2",children:[a.jsxs("div",{className:`toolbar-sort-controls flex items-center gap-2 ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsx(ed,{value:rt,onChange:It,options:en,title:"Sort and layout options","aria-label":"Sort and layout",triggerClassName:"min-w-[110px]"}),a.jsx("button",{className:"toolbar-sort-dir btn btn-icon",onClick:bt,title:g?"Sorting disabled":Ue?"Shuffle":`Sort ${Me==="desc"?"descending":"ascending"}`,"aria-label":Ue?"Shuffle":"Toggle sort direction","aria-disabled":Ve,disabled:Ve,children:Ue?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Me==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]}),a.jsxs("div",{ref:K,className:`toolbar-filter relative ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsxs("button",{className:`btn ${A>0?"btn-active":""}`,onClick:()=>J(B=>!B),"aria-haspopup":"dialog","aria-expanded":H,title:"Filters","aria-disabled":n,children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),a.jsx("span",{className:"toolbar-filters-label",children:"Filters"}),A>0&&a.jsx("span",{className:"toolbar-filters-count px-1.5 py-0.5 text-[11px] rounded-full bg-accent-strong text-text",children:A})]}),H&&a.jsxs("div",{role:"dialog","aria-label":"Filters",className:"dropdown-panel w-[240px]",style:{top:"38px",left:0},children:[a.jsx("div",{className:"dropdown-label",children:"Rating"}),a.jsxs("div",{className:"px-1",children:[[5,4,3,2,1].map(B=>{const Y=ct.includes(B),Z=(p==null?void 0:p[String(B)])??0;return a.jsxs("button",{onClick:()=>L==null?void 0:L(B),className:`dropdown-item justify-between ${Y?"bg-accent-muted":""}`,children:[a.jsxs("span",{className:Y?"text-star-active":"text-text",children:["".repeat(B),"".repeat(5-B)]}),a.jsx("span",{className:"text-xs text-muted",children:Z})]},B)}),a.jsxs("button",{onClick:()=>L==null?void 0:L(0),className:`dropdown-item justify-between ${ct.includes(0)?"bg-accent-muted":""}`,children:[a.jsx("span",{className:"text-text",children:"Unrated"}),a.jsx("span",{className:"text-xs text-muted",children:(p==null?void 0:p["0"])??0})]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("div",{className:"dropdown-label",children:"Metrics"}),a.jsxs("button",{className:"dropdown-item",onClick:()=>{J(!1),w==null||w()},children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]}),a.jsx("span",{children:"Open Metrics Panel"}),(C||0)>0&&a.jsxs("span",{className:"ml-auto text-xs text-muted",children:[C," active"]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("button",{className:"dropdown-item text-muted hover:text-text",onClick:()=>{h?h():y==null||y()},disabled:A===0,children:"Clear all filters"})]})]}),n&&a.jsxs("button",{className:"btn btn-sm",onClick:r,title:"Back to grid",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})]})]}),a.jsx("div",{className:"toolbar-center flex items-center gap-3 justify-center min-w-0",children:n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"range",min:5,max:800,step:1,value:Math.round(Math.max(5,Math.min(800,s??100))),onChange:B=>i==null?void 0:i(Number(B.target.value)),className:"zoom-slider","aria-label":"Zoom level"}),a.jsxs("span",{className:"text-xs text-muted min-w-[42px] text-right",children:[Math.round(s??100),"%"]})]}):j&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted",children:"Size"}),a.jsx("input",{type:"range",min:80,max:500,step:10,value:R??220,onChange:B=>j(Number(B.target.value)),className:"w-28 h-1.5 bg-border rounded-full appearance-none cursor-pointer hover:bg-hover transition-colors [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-text [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-text [&::-moz-range-thumb]:border-0","aria-label":"Thumbnail size"})]})}),a.jsxs("div",{className:"toolbar-right flex items-center gap-2 justify-end",children:[a.jsxs("div",{className:`toolbar-nav flex items-center gap-1 mr-1 ${n?"":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,children:[a.jsx("button",{className:`btn btn-icon ${ee?"":"opacity-40 cursor-not-allowed"}`,title:"Previous image (A / )",onClick:()=>ee&&(U==null?void 0:U()),"aria-label":"Previous image","aria-disabled":!ee,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("button",{className:`btn btn-icon ${ue?"":"opacity-40 cursor-not-allowed"}`,title:"Next image (D / )",onClick:()=>ue&&(D==null?void 0:D()),"aria-label":"Next image","aria-disabled":!ue,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 6l6 6-6 6"})})})]}),a.jsxs("div",{className:"toolbar-panels flex items-center gap-1",children:[a.jsx("button",{className:`btn btn-icon ${k?"":"opacity-50"}`,title:k?"Hide left panel (Ctrl+B)":"Show left panel (Ctrl+B)",onClick:N,"aria-pressed":k,"aria-label":"Toggle left panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"11",y:"5",width:"10",height:"14",rx:"1.5"})]})}),a.jsx("button",{className:`btn btn-icon ${_?"":"opacity-50"}`,title:_?"Hide right panel (Ctrl+Alt+B)":"Show right panel (Ctrl+Alt+B)",onClick:F,"aria-pressed":_,"aria-label":"Toggle right panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"15",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"3",y:"5",width:"10",height:"14",rx:"1.5"})]})})]}),z&&a.jsx(C1,{...z,isNarrow:ae}),!n&&ae&&a.jsx("button",{className:`btn btn-icon ${Le?"btn-active":""} ${T?"opacity-50 cursor-not-allowed":""}`,"aria-label":Le?"Close search":"Open search",title:T?"Search disabled":Le?"Close search":"Search",onClick:()=>!T&&Q(B=>!B),disabled:T,children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("circle",{cx:"11",cy:"11",r:"7"}),a.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),!n&&!ae?a.jsx("div",{className:"toolbar-search w-[240px]",children:a.jsx("input",{ref:ne,"aria-label":"Search filename, tags, notes",placeholder:T?de??"Search disabled":"Search...",onChange:B=>t(B.target.value),className:"toolbar-search-input input w-full focus:w-full transition-all duration-200 select-text",disabled:T})}):n?a.jsx("div",{className:"toolbar-search w-[240px]","aria-hidden":"true"}):null]}),!n&&ae&&Le&&!T&&a.jsx("div",{className:"toolbar-search-row",children:a.jsx("input",{ref:ne,"aria-label":"Search filename, tags, notes",placeholder:de??"Search...",onChange:B=>t(B.target.value),className:"toolbar-search-input-mobile input input-lg w-full select-text"})}),tn&&a.jsx("div",{className:"mobile-drawer",children:a.jsxs("div",{className:"mobile-drawer-row",children:[a.jsxs("div",{className:"mobile-pill-group",children:[a.jsx("button",{className:`mobile-pill ${v==="grid"?"is-active":""}`,onClick:()=>S==null?void 0:S("grid"),"aria-pressed":v==="grid",children:"Grid"}),a.jsx("button",{className:`mobile-pill ${v==="adaptive"?"is-active":""}`,onClick:()=>S==null?void 0:S("adaptive"),"aria-pressed":v==="adaptive",children:"Masonry"})]}),a.jsx(ed,{value:rt,onChange:B=>m==null?void 0:m(hm(B,fe)),options:Pt,"aria-label":"Sort",triggerClassName:"mobile-pill mobile-pill-dropdown",panelClassName:"mobile-drawer-panel",disabled:g}),a.jsx("button",{className:`mobile-pill mobile-pill-icon ${Ve?"opacity-50 cursor-not-allowed":""}`,onClick:bt,title:g?"Sorting disabled":Ue?"Shuffle":`Sort ${Me==="desc"?"descending":"ascending"}`,"aria-label":Ue?"Shuffle":"Toggle sort direction","aria-disabled":Ve,disabled:Ve,children:Ue?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Me==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]})})]})}function k1(e,t){if(typeof e!="number")return null;const n=e.toLocaleString();if(typeof t!="number")return`${n} items`;const r=t.toLocaleString();return t===e?`${n} items`:`${n} / ${r} items`}function E1(e,t){return typeof e=="number"?e:t>0?1:0}function hm(e,t){if(e.startsWith("metric:")){const n=e.slice(7);return n?{kind:"metric",key:n,dir:t.dir}:t}if(e.startsWith("builtin:")){const n=e.slice(8);if(n==="name"||n==="added"||n==="random")return{kind:"builtin",key:n,dir:t.dir}}return t}class Nn extends Error{constructor(n,r,s,i){super(r);Hn(this,"status");Hn(this,"url");Hn(this,"body");this.name="FetchError",this.status=n,this.url=s,this.body=i}}function N1(e){const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function Xv(e,t,n){if(t&&typeof t=="object"){const r=t,s=typeof r.error=="string"?r.error:null,i=typeof r.message=="string"?r.message:null;if(s&&i)return`${s}: ${i}`;if(s)return s;if(i)return i}return typeof t=="string"&&t?t:`HTTP ${e} for ${n}`}function ht(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{let u=null;const d=await l.text().catch(()=>"");if(d)if((l.headers.get("content-type")||"").includes("application/json")||N1(d))try{u=JSON.parse(d)}catch{u=d}else u=d;if(!l.ok)throw new Nn(l.status,Xv(l.status,u,e),e,u);return u}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}function El(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{if(!l.ok){const u=await l.text().catch(()=>""),d=u||null;throw new Nn(l.status,Xv(l.status,d,e),e,d)}return l.blob()}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}class Jv{constructor(t){Hn(this,"store",new Map);Hn(this,"inflight",new Map);Hn(this,"totalBytes",0);this.maxBytes=t}getMaxBytes(){return this.maxBytes}getTotalBytes(){return this.totalBytes}getSize(){return this.store.size}has(t){return this.store.has(t)}isInflight(t){return this.inflight.has(t)}get(t){const n=this.store.get(t);if(n)return this.store.delete(t),this.store.set(t,n),n.blob}evictIfNeeded(t){for(;this.totalBytes+t>this.maxBytes&&this.store.size>0;){const n=this.store.keys().next().value;if(n==null)break;const r=this.store.get(n);r&&(this.totalBytes-=r.size),this.store.delete(n)}}set(t,n){const r=n.size||0;if(!(r>this.maxBytes)){if(this.store.has(t)){const s=this.store.get(t);this.totalBytes-=s.size,this.store.delete(t)}this.evictIfNeeded(r),this.store.set(t,{blob:n,size:r}),this.totalBytes+=r}}async getOrFetch(t,n){const r=this.get(t);if(r)return r;const s=this.inflight.get(t);if(s)return s.promise;const i=n(),o=typeof i=="object"&&"promise"in i,l=o?i.promise:i,u=o?i.abort:void 0,d=l.then(f=>(this.set(t,f),f)).finally(()=>{this.inflight.delete(t)});return this.inflight.set(t,{promise:d,abort:u}),d}prefetch(t,n){if(this.store.has(t)||this.inflight.has(t))return;const r=n(),s=typeof r=="object"&&"promise"in r,i=s?r.promise:r,o=s?r.abort:void 0,l=i.then(u=>(this.set(t,u),u)).catch(()=>new Blob).finally(()=>{this.inflight.delete(t)});this.inflight.set(t,{promise:l,abort:o})}cancelPrefetch(t){const n=this.inflight.get(t);if(n!=null&&n.abort)try{n.abort()}catch{}this.inflight.delete(t)}clear(){for(const[t,n]of this.inflight)if(n.abort)try{n.abort()}catch{}this.inflight.clear(),this.store.clear(),this.totalBytes=0}evictPrefix(t){const n=(()=>{const s=t?`/${t.replace(/^\/+/,"")}`:"/";return s==="/"?"/":s.replace(/\/+$/,"")})(),r=s=>{const i=s.startsWith("/")?s.replace(/\/+$/,""):`/${s.replace(/\/+$/,"")}`;return n==="/"?!0:i===n||i.startsWith(`${n}/`)};for(const[s,i]of Array.from(this.store.entries()))r(s)&&(this.totalBytes-=i.size,this.store.delete(s));for(const[s,i]of Array.from(this.inflight.entries()))if(r(s)){if(i.abort)try{i.abort()}catch{}this.inflight.delete(s)}this.totalBytes<0&&(this.totalBytes=0)}}const Os=new Jv(60*1024*1024),td=new Jv(20*1024*1024),Du={};function j1(){const e=Du==null?void 0:Du.VITE_API_BASE,t=typeof window<"u",n=t?window.location.origin:"http://localhost",r=t?window.location.hostname:"localhost",s=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\]|.+\.localhost)$/i.test(r);if(!e)return"";let i;try{i=new URL(e,n)}catch{return""}const o=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\])$/i.test(i.hostname);return s?i.origin:o?"":i.origin}const We=j1();const M1=40*1024*1024;function R1(e){return e==="viewer"||e==="compare"}function mm(e){return`${We}/thumb?path=${encodeURIComponent(e)}`}function pm(e){return`${We}/file?path=${encodeURIComponent(e)}`}const zu="lenslet.client_id",gm="lenslet.client_id.session",Zv="lenslet.last_event_id",L1=1e3,_1=3e4,T1=5;let nd=null,Hl=null,vm=0,ti=null,ni=0,Ka=!0,ba=!1;function ey(){return typeof window<"u"&&typeof EventSource<"u"}function ym(e,t){if(!e)return null;try{return e.getItem(t)}catch{return null}}function xm(e,t,n){if(e)try{e.setItem(t,n)}catch{}}function P1(e,t){if(e)try{e.removeItem(t)}catch{}}function I1(){if(typeof navigator>"u")return"server";const e=navigator.userAgent||"",t=navigator.language||"",n=navigator.platform||"",r=typeof Intl<"u"&&Intl.DateTimeFormat().resolvedOptions().timeZone||"",s=typeof screen<"u"?`${screen.width}x${screen.height}x${screen.colorDepth}`:"";return[e,t,n,r,s].join("|")}function F1(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=t*16777619>>>0;return t.toString(16).padStart(8,"0")}function wm(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`}function Vi(e){return nd=e,e}function ki(){if(nd)return nd;const e=typeof window<"u"?window.localStorage:null,t=typeof window<"u"?window.sessionStorage:null,n=ym(t,gm);if(n)return Vi(n);const r=ym(e,zu);if(t){const i=wm();return xm(t,gm,i),r&&P1(e,zu),Vi(i)}if(r)return Vi(r);if(e){const i=wm();return xm(e,zu,i),Vi(i)}const s=`fp_${F1(I1())}_${Math.random().toString(36).slice(2,8)}`;return Vi(s)}function Lo(e="lenslet"){vm+=1;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`nonce_${Math.random().toString(36).slice(2,10)}_${Date.now()}_${vm}`;return`${e}:${ki()}:${t}`}function O1(){if(Hl!=null)return Hl;if(typeof window>"u")return null;try{const e=window.localStorage.getItem(Zv);if(!e)return null;const t=Number(e);return!Number.isFinite(t)||t<=0?null:(Hl=t,t)}catch{return null}}function D1(e){if(!(!Number.isFinite(e)||e<=0)&&(Hl=e,!(typeof window>"u")))try{window.localStorage.setItem(Zv,String(e))}catch{}}function z1(){if(typeof window>"u")return`${We}/events`;const e=new URL(`${We}/events`,window.location.origin),t=O1();return t!=null&&Number.isFinite(t)&&e.searchParams.set("last_event_id",String(t)),e.toString()}function A1(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}let xn=null,ty="idle";const rd=new Set,sd=new Set,id=new Set;function ri(e){ty=e;for(const t of sd)t(e)}function vf(e){if(ba!==e){ba=e;for(const t of id)t(e)}}function yf(){ti!=null&&(window.clearTimeout(ti),ti=null)}function $1(){ni=0,yf()}function U1(){if(!Ka||ti!=null)return;ni+=1;const e=Math.min(L1*Math.pow(2,ni-1),_1);ni>=T1?(ri("offline"),vf(!0)):ri("reconnecting"),ti=window.setTimeout(()=>{ti=null,ny()},e)}function ny(){if(!Ka||!ey()||(xn&&xn.readyState===EventSource.CLOSED&&(xn.close(),xn=null),xn))return;ni>0?ri("reconnecting"):ri("connecting");const e=new EventSource(z1());xn=e;const t=n=>r=>{const s=A1(r.data);if(!s)return;const i=r.lastEventId?Number(r.lastEventId):null,o=i!=null&&Number.isFinite(i)?i:null;o!=null&&D1(o);for(const l of rd)l({type:n,id:o,data:s})};e.addEventListener("item-updated",t("item-updated")),e.addEventListener("metrics-updated",t("metrics-updated")),e.addEventListener("presence",t("presence")),e.onopen=()=>{$1(),vf(!1),ri("live")},e.onerror=()=>{xn===e&&(e.close(),xn=null,U1())}}function B1(){Ka=!0,ey()&&(yf(),ny())}function W1(){Ka=!1,yf(),ni=0,xn&&(xn.close(),xn=null),vf(!1),ri("offline")}function H1(e){return rd.add(e),()=>{rd.delete(e)}}function V1(e){return sd.add(e),e(ty),()=>{sd.delete(e)}}function Q1(e){return id.add(e),e(ba),()=>{id.delete(e)}}function K1(){return ba}function q1(e,t){const n=JSON.stringify(t),r=`${We}${e}`;if(typeof navigator<"u"&&typeof navigator.sendBeacon=="function")try{if(navigator.sendBeacon(r,new Blob([n],{type:"application/json"})))return!0}catch{}if(typeof fetch!="function")return!1;try{return fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:n,keepalive:!0}),!0}catch{return!1}}function Y1(e,t,n){return q1("/presence/leave",{gallery_id:e,lease_id:t,client_id:n??ki()})}function Nl(e){return e??ki()}function jl(e,t){return ht(`${We}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).promise}function G1(e,t){const n=new URLSearchParams({path:e});return(t==null?void 0:t.page)!=null&&n.set("page",String(t.page)),(t==null?void 0:t.pageSize)!=null&&n.set("page_size",String(t.pageSize)),t!=null&&t.recursive&&n.set("recursive","1"),t!=null&&t.legacyRecursive&&n.set("legacy_recursive","1"),n.toString()}const ve={getFolder:(e,t)=>ht(`${We}/folders?${G1(e,t)}`).promise,search:(e,t)=>{const n=new URLSearchParams;return e&&n.set("q",e),t&&n.set("path",t),ht(`${We}/search?${n}`).promise},getEmbeddings:()=>ht(`${We}/embeddings`).promise,searchEmbeddings:e=>ht(`${We}/embeddings/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise,refreshFolder:e=>{const t=new URLSearchParams({path:e});return ht(`${We}/refresh?${t}`,{method:"POST"}).promise},getSidecar:e=>ht(`${We}/item?path=${encodeURIComponent(e)}`).promise,patchSidecar:(e,t,n)=>{const s={"Content-Type":"application/json","Idempotency-Key":(n==null?void 0:n.idempotencyKey)??Lo("patch"),"x-client-id":ki(),"x-updated-by":"web"};return(n==null?void 0:n.ifMatch)!=null&&(s["If-Match"]=String(n.ifMatch)),ht(`${We}/item?path=${encodeURIComponent(e)}`,{method:"PATCH",headers:s,body:JSON.stringify(t)}).promise},getMetadata:e=>ht(`${We}/metadata?path=${encodeURIComponent(e)}`).promise,putSidecar:(e,t)=>ht(`${We}/item?path=${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-client-id":ki(),"x-updated-by":"web"},body:JSON.stringify(t)}).promise,getHealth:()=>ht(`${We}/health`).promise,joinPresence:(e,t,n)=>jl("/presence/join",{gallery_id:e,client_id:Nl(n),lease_id:t}),movePresence:(e,t,n,r)=>jl("/presence/move",{from_gallery_id:e,to_gallery_id:t,client_id:Nl(r),lease_id:n}),leavePresence:(e,t,n)=>jl("/presence/leave",{gallery_id:e,client_id:Nl(n),lease_id:t}),postPresence:(e,t,n)=>jl("/presence",{gallery_id:e,client_id:Nl(n),lease_id:t}),getThumb:e=>td.getOrFetch(e,()=>El(mm(e))),prefetchThumb:e=>{td.prefetch(e,()=>El(mm(e)))},getFile:e=>Os.getOrFetch(e,()=>El(pm(e))),prefetchFile:async(e,t)=>{if(R1(t)&&!(Os.has(e)||Os.isInflight(e)))try{const n=await El(pm(e),{headers:{"x-lenslet-prefetch":t}}).promise;n.size<=M1&&Os.set(e,n)}catch{}},cancelPrefetch:e=>{Os.cancelPrefetch(e)},uploadFile:async(e,t)=>{const n=new FormData;return n.append("dest",e),n.append("file",t),ht(`${We}/file`,{method:"POST",body:n,timeoutMs:6e4}).promise},moveFile:async(e,t)=>{const n=new FormData;return n.append("src",e),n.append("dest",t),ht(`${We}/move`,{method:"POST",body:n}).promise},deleteFiles:async e=>ht(`${We}/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:e})}).promise,exportIntent:async e=>{const t=new FormData;return t.append("path",e),ht(`${We}/export-intent`,{method:"POST",body:t}).promise},getViews:()=>ht(`${We}/views`).promise,saveViews:e=>ht(`${We}/views`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise};class X1{constructor(t=400){Hn(this,"cache",new Map);Hn(this,"maxSize");this.maxSize=t,typeof window<"u"&&window.addEventListener("beforeunload",()=>this.clear(),{once:!0})}get(t){const n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){for(this.cache.has(t)&&this.cache.delete(t);this.cache.size>=this.maxSize;){const r=this.cache.keys().next().value;if(r===void 0)break;const s=this.cache.get(r);if(this.cache.delete(r),s)try{URL.revokeObjectURL(s)}catch{}}this.cache.set(t,n)}clear(){for(const t of this.cache.values())try{URL.revokeObjectURL(t)}catch{}this.cache.clear()}}const Au=new X1(400);function J1({path:e,name:t,onClick:n,selected:r,highlighted:s,highlightKey:i,displayW:o,displayH:l,ioRoot:u,isScrolling:d,priority:f}){const m=c.useRef(null),[g,C]=c.useState(()=>Au.get(e)??null),[w,E]=c.useState(!1),[L,y]=c.useState(()=>!!g);c.useEffect(()=>{const p=m.current;if(!p)return;const v=new IntersectionObserver(S=>{for(const R of S)R.target===p&&E(R.isIntersecting||R.intersectionRatio>0)},{root:u??null,rootMargin:"200px 0px",threshold:.01});return v.observe(p),()=>{v.unobserve(p),v.disconnect()}},[u]),c.useEffect(()=>{if(g||!(w&&!d||f))return;let p=!0;return ve.getThumb(e).then(v=>{if(!p)return;const S=URL.createObjectURL(v);Au.set(e,S),C(S)}).catch(()=>{}),()=>{p=!1}},[e,g,w,d,f]),c.useEffect(()=>{var v;if(!g){y(!1);return}const p=(v=m.current)==null?void 0:v.querySelector("img");p&&p.complete&&p.naturalWidth>0?y(!0):y(!1)},[g]),c.useEffect(()=>{C(Au.get(e)??null)},[e]);const h=["absolute inset-0 relative bg-hover border border-border rounded-lg overflow-hidden select-none",r?"outline-2 outline-accent":"",s?"thumb-updated-ring":"","hover:outline hover:outline-1 hover:outline-accent"].filter(Boolean).join(" ");return a.jsx("div",{ref:m,"data-highlight-key":i??void 0,className:h,onClick:n,children:g?a.jsx("img",{className:`w-full h-full object-cover block pointer-events-none select-none opacity-0 transition-opacity duration-[160ms] ${L?"opacity-100":""}`,src:g,alt:t,loading:"lazy",decoding:"async",onLoad:()=>y(!0),width:o?Math.round(o):void 0,height:l?Math.round(l):void 0}):null})}function Is(e,t,n){let r=n.initialDeps??[],s,i=!0;function o(){var l,u,d;let f;n.key&&((l=n.debug)!=null&&l.call(n))&&(f=Date.now());const m=e();if(!(m.length!==r.length||m.some((w,E)=>r[E]!==w)))return s;r=m;let C;if(n.key&&((u=n.debug)!=null&&u.call(n))&&(C=Date.now()),s=t(...m),n.key&&((d=n.debug)!=null&&d.call(n))){const w=Math.round((Date.now()-f)*100)/100,E=Math.round((Date.now()-C)*100)/100,L=E/16,y=(h,p)=>{for(h=String(h);h.length<p;)h=" "+h;return h};console.info(`%c ${y(E,5)} /${y(w,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*L,120))}deg 100% 31%);`,n==null?void 0:n.key)}return n!=null&&n.onChange&&!(i&&n.skipInitialOnChange)&&n.onChange(s),i=!1,s}return o.updateDeps=l=>{r=l},o}function Sm(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const Z1=(e,t)=>Math.abs(e-t)<1.01,eS=(e,t,n)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,s),n)}},Cm=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},tS=e=>e,nS=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},rS=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const s=o=>{const{width:l,height:u}=o;t({width:Math.round(l),height:Math.round(u)})};if(s(Cm(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const u=o[0];if(u!=null&&u.borderBoxSize){const d=u.borderBoxSize[0];if(d){s({width:d.inlineSize,height:d.blockSize});return}}s(Cm(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},bm={passive:!0},km=typeof window>"u"?!0:"onscrollend"in window,sS=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&km?()=>{}:eS(r,()=>{t(s,!1)},e.options.isScrollingResetDelay),o=f=>()=>{const{horizontal:m,isRtl:g}=e.options;s=m?n.scrollLeft*(g&&-1||1):n.scrollTop,i(),t(s,f)},l=o(!0),u=o(!1);u(),n.addEventListener("scroll",l,bm);const d=e.options.useScrollendEvent&&km;return d&&n.addEventListener("scrollend",u,bm),()=>{n.removeEventListener("scroll",l),d&&n.removeEventListener("scrollend",u)}},iS=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},oS=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const o=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class lS{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:tS,rangeExtractor:nS,onChange:()=>{},measureElement:iS,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=Is(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=n[o];if(s.has(l.lane))continue;const u=i.get(l.lane);if(u==null||l.end>u.end?i.set(l.lane,l):l.end<u.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=Is(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,s,i,o,l)=>(this.prevLanes!==void 0&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=Is(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l},u)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const g of this.laneAssignments.keys())g>=n&&this.laneAssignments.delete(g);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(g=>{this.itemSizeCache.set(g.key,g.size)}));const d=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const f=this.measurementsCache.slice(0,d),m=new Array(l).fill(void 0);for(let g=0;g<d;g++){const C=f[g];C&&(m[C.lane]=g)}for(let g=d;g<n;g++){const C=i(g),w=this.laneAssignments.get(g);let E,L;if(w!==void 0&&this.options.lanes>1){E=w;const v=m[E],S=v!==void 0?f[v]:void 0;L=S?S.end+this.options.gap:r+s}else{const v=this.options.lanes===1?f[g-1]:this.getFurthestMeasurement(f,g);L=v?v.end+this.options.gap:r+s,E=v?v.lane:g%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(g,E)}const y=u.get(C),h=typeof y=="number"?y:this.options.estimateSize(g),p=L+h;f[g]={index:g,start:L,size:h,end:p,key:C,lane:E},m[E]=g}return this.measurementsCache=f,f},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Is(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?aS({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Is(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,o)=>i===null||o===null?[]:n({startIndex:i,endIndex:o,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=Is(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,o=n.length;i<o;i++){const l=n[i],u=r[l];s.push(u)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return Sm(r[ry(0,r.length-1,s=>Sm(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(s.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const o=10,l=d=>{if(!this.targetWindow)return;const f=this.getOffsetForIndex(n,d);if(!f){console.warn("Failed to get offset for index:",n);return}const[m,g]=f;this._scrollToOffset(m,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const C=this.getScrollOffset(),w=this.getOffsetForIndex(n,g);if(!w){console.warn("Failed to get offset for index:",n);return}Z1(w[0],C)||u(g)})},u=d=>{this.targetWindow&&(i++,i<o?this.targetWindow.requestAnimationFrame(()=>l(d)):console.warn(`Failed to scroll to index ${n} after ${o} attempts.`))};l(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}s=Math.max(...i.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const ry=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function aS({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const s=e.length-1,i=u=>e[u].start;if(e.length<=r)return{startIndex:0,endIndex:s};let o=ry(0,s,i,n),l=o;if(r===1)for(;l<s&&e[l].end<n+t;)l++;else if(r>1){const u=Array(r).fill(0);for(;l<s&&u.some(f=>f<n+t);){const f=e[l];u[f.lane]=f.end,l++}const d=Array(r).fill(n+t);for(;o>=0&&d.some(f=>f>=n);){const f=e[o];d[f.lane]=f.start,o--}o=Math.max(0,o-o%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const Em=typeof document<"u"?c.useLayoutEffect:c.useEffect;function uS(e){const t=c.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var o;i?ff.flushSync(t):t(),(o=e.onChange)==null||o.call(e,s,i)}},[r]=c.useState(()=>new lS(n));return r.setOptions(n),Em(()=>r._didMount(),[]),Em(()=>r._willUpdate()),r}function cS(e){return uS({observeElementRect:rS,observeElementOffset:sS,scrollToFn:oS,...e})}function dS({containerW:e,gap:t,targetCell:n,aspect:r,captionH:s}){const i=Math.max(1,Math.floor((e+t)/(n+t))),o=(e-t*(i-1))/i,l=o*r.h/r.w,u=l+s+t;return{columns:i,cellW:o,mediaH:l,rowH:u}}const fS=1.333;function hS({items:e,containerWidth:t,targetHeight:n,gap:r,captionH:s}){if(t<=0)return[];const i=[];let o=[],l=0;const u=(d,f)=>({index:i.length,height:f+s+r,imageH:f,items:d.map(m=>({item:m.item,displayW:m.aspect*f,displayH:f,originalIndex:m.originalIndex}))});for(let d=0;d<e.length;d++){const f=e[d],m=f.w>0&&f.h>0?f.w/f.h:fS;o.push({item:f,aspect:m,originalIndex:d}),l+=m;const g=(o.length-1)*r;if(l*n+g>=t){const w=(t-g)/l;i.push(u(o,w)),o=[],l=0}}return o.length>0&&i.push(u(o,n)),i}function mS(e,t,n){return{mode:"adaptive",rows:hS({items:t,containerWidth:e,targetHeight:n.targetCell,gap:n.gap,captionH:n.captionH})}}function pS(e,t,n){const{columns:r,cellW:s,mediaH:i,rowH:o}=dS({containerW:e,gap:n.gap,targetCell:n.targetCell,aspect:n.aspect,captionH:n.captionH}),l=Math.ceil(t.length/Math.max(1,r));return{mode:"grid",columns:r,cellW:s,mediaH:i,rowH:o,rowCount:l}}function gS(e,t,n){const[r,s]=c.useState(0);c.useLayoutEffect(()=>{const u=e.current;if(!u)return;const d=()=>{const m=getComputedStyle(u),g=u.clientWidth-parseFloat(m.paddingLeft)-parseFloat(m.paddingRight);s(g)},f=new ResizeObserver(d);return f.observe(u),d(),()=>f.disconnect()},[]);const i=c.useMemo(()=>n.viewMode==="adaptive"?mS(r,t,n):pS(r,t,n),[r,t,n.viewMode,n.gap,n.targetCell,n.aspect.w,n.aspect.h,n.captionH]),o=cS({count:i.mode==="adaptive"?i.rows.length:i.rowCount,getScrollElement:()=>e.current,estimateSize:u=>i.mode==="adaptive"?i.rows[u].height:i.rowH,overscan:8}),l=o.getVirtualItems();return c.useEffect(()=>{o.measure()},[i,o]),{width:r,layout:i,rowVirtualizer:o,virtualRows:l}}function vS(e,t,n,r){if(!e.length)return null;const s=n?e.findIndex(l=>l.path===n):0,i=Math.max(1,t);let o=s;if(r.key==="ArrowRight"||r.key==="d")o=Math.min(e.length-1,s+1);else if(r.key==="ArrowLeft"||r.key==="a")o=Math.max(0,s-1);else if(r.key==="ArrowDown"||r.key==="s")o=Math.min(e.length-1,s+i);else if(r.key==="ArrowUp"||r.key==="w")o=Math.max(0,s-i);else return r.key==="Enter"&&n?"open":null;return o}function yS(e,t,n){const r=[];for(const s of e){if(t.mode==="adaptive"){const l=t.rows[s.index];if(!l)continue;for(const u of l.items)r.push(u.item.path);continue}const i=s.index*t.columns,o=n.slice(i,i+t.columns);for(const l of o)r.push(l.path)}return Array.from(new Set(r))}const Vn=12,xS=44,wS={w:4,h:3},SS=350,CS=120;function bS(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function kS({items:e,selected:t,restoreToSelectionToken:n,onSelectionChange:r,onOpenViewer:s,onContextMenuItem:i,highlight:o,recentlyUpdated:l,onVisiblePathsChange:u,suppressSelectionHighlight:d=!1,viewMode:f="grid",targetCellSize:m=220,scrollRef:g,hideScrollbar:C=!1}){const[w,E]=c.useState(null),[L,y]=c.useState(null),[h,p]=c.useState(!1),[v,S]=c.useState(null),[R,j]=c.useState(null),k=c.useRef(null),_=c.useRef(null),N=c.useRef(null),F=g??N,U=c.useRef(null),D=c.useRef(new Set),ee=m,{width:ue,layout:T,rowVirtualizer:de,virtualRows:z}=gS(F,e,{gap:Vn,targetCell:ee,aspect:wS,captionH:xS,viewMode:f}),H=c.useMemo(()=>{const A=new Map;for(let se=0;se<e.length;se++)A.set(e[se].path,se);return A},[e]),J=c.useMemo(()=>{if(T.mode!=="adaptive")return null;const A=new Map;return T.rows.forEach((se,q)=>{let B=0;se.items.forEach((Y,Z)=>{const ie=B+Y.displayW/2;A.set(Y.item.path,{row:q,center:ie,order:Z}),B+=Y.displayW+Vn})}),A},[T]);c.useEffect(()=>{if(!t.length)return;const A=t[0];v!==A&&S(A)},[t,v]);const ae=c.useMemo(()=>{if(T.mode!=="adaptive")return null;let A=0;return T.rows.map(se=>{const q=A;return A+=se.height,{start:q,height:se.height}})},[T]),ce=c.useRef(null),Le=(A,se)=>{try{if(ce.current!=null){try{cancelAnimationFrame(ce.current)}catch{}ce.current=null}const q=A.scrollTop,B=se-q;if(Math.abs(B)<1){A.scrollTop=se;return}const Y=140,Z=performance.now(),ie=ke=>1-Math.pow(1-ke,3),we=ke=>{const Ee=Math.min(1,(ke-Z)/Y),Re=ie(Ee);A.scrollTop=q+B*Re,Ee<1?ce.current=requestAnimationFrame(we):ce.current=null};ce.current=requestAnimationFrame(we)}catch{A.scrollTop=se}},[Q,K]=c.useState(!1);c.useEffect(()=>{const A=F.current;if(!A)return;let se=0;const q=()=>{K(!0),window.clearTimeout(se),se=window.setTimeout(()=>K(!1),CS)};return A.addEventListener("scroll",q,{passive:!0}),()=>A.removeEventListener("scroll",q)},[]);const ne=()=>{_.current!=null&&(window.clearTimeout(_.current),_.current=null)},fe=()=>{if(ne(),p(!1),E(null),k.current){try{URL.revokeObjectURL(k.current)}catch{}k.current=null}y(null)},Me=A=>{Q||(ne(),E(A),p(!1),_.current=window.setTimeout(async()=>{_.current=null;try{const se=await ve.getFile(A),q=URL.createObjectURL(se);if(k.current)try{URL.revokeObjectURL(k.current)}catch{}k.current=q,y(q),p(!0)}catch{}},SS))},Ue=T.mode==="grid"?T.columns:Math.max(1,Math.floor(ue/(ee+Vn))),Ve=(A,se)=>{if(T.mode!=="adaptive")return null;const q=T.rows[A];if(!q)return null;let B=0,Y=null;for(const Z of q.items){const ie=B+Z.displayW/2,we=Math.abs(ie-se);(!Y||we<Y.dist)&&(Y={path:Z.item.path,dist:we}),B+=Z.displayW+Vn}return Y?Y.path:null},ut=(A,se)=>{var Re,dt,ft,Ft;if(!e.length)return null;const q=A??e[0].path;if(T.mode!=="adaptive"){const fn=vS(e,Ue,q,se);return fn==="open"||fn==null?fn:((Re=e[fn])==null?void 0:Re.path)??null}const B=J==null?void 0:J.get(q);if(!B)return q;const Y=H.get(q)??0,Z=se.key;if(Z==="Enter")return"open";if(Z==="ArrowRight"||Z==="d")return((dt=e[Math.min(e.length-1,Y+1)])==null?void 0:dt.path)??q;if(Z==="ArrowLeft"||Z==="a")return((ft=e[Math.max(0,Y-1)])==null?void 0:ft.path)??q;const ie=Z==="ArrowDown"||Z==="s"?1:Z==="ArrowUp"||Z==="w"?-1:0;if(ie===0)return null;const we=B.row+ie;if(we<0||we>=(((Ft=T.rows)==null?void 0:Ft.length)??0))return q;const ke=B.center;return Ve(we,ke)??q},nt=A=>{var se;try{(se=document.getElementById(`cell-${encodeURIComponent(A)}`))==null||se.focus()}catch{}},en=c.useCallback(A=>{try{ve.prefetchThumb(A)}catch{}},[]),rt=(A,se)=>{S(A),j(A);const q=!!se.shiftKey,B=!!(se.ctrlKey||se.metaKey);if(q){const Y=U.current??v??t[0]??A,Z=H.get(Y)??e.findIndex(we=>we.path===Y),ie=H.get(A)??e.findIndex(we=>we.path===A);if(Z!==-1&&ie!==-1){const we=Math.min(Z,ie),ke=Math.max(Z,ie),Ee=e.slice(we,ke+1).map(Re=>Re.path);if(B){const Re=new Set(t);for(const dt of Ee)Re.add(dt);r(Array.from(Re))}else r(Ee)}else r([A])}else if(B){const Y=new Set(t);Y.has(A)?Y.delete(A):Y.add(A),r(Array.from(Y)),U.current=A}else r([A]),U.current=A;Q||en(A),nt(A)},Pt=(A,se)=>{var q,B;try{const Y=tn.has(A)&&t.length>0?t:[A];(q=se.dataTransfer)==null||q.setData("application/x-lenslet-paths",JSON.stringify(Y)),se.dataTransfer&&(se.dataTransfer.effectAllowed="copyMove");try{document.body.classList.add("drag-active")}catch{}const ie=se.currentTarget.querySelector(".cell-content img"),we=document.createElement("div");we.className="drag-ghost";const ke=document.createElement("img");ke.draggable=!1,ke.alt="drag",ie&&ie.src&&(ke.src=ie.src),we.appendChild(ke),document.body.appendChild(we);const Ee=we.getBoundingClientRect().width||150;(B=se.dataTransfer)==null||B.setDragImage(we,Math.round(Ee/2),0);const Re=()=>{try{we.remove()}catch{}try{document.body.classList.remove("drag-active")}catch{}window.removeEventListener("dragend",Re),window.removeEventListener("pointerup",Re),document.removeEventListener("visibilitychange",Re)};window.addEventListener("dragend",Re),window.addEventListener("pointerup",Re),document.addEventListener("visibilitychange",Re)}catch{}};c.useEffect(()=>{const A=F.current;if(!A)return;const se=q=>{var Re,dt,ft;const B=ut(R,q);if(B==null)return;if(q.preventDefault(),B==="open"){R&&s(R);return}const Y=e.find(Ft=>Ft.path===B);if(!Y)return;j(Y.path),S(Y.path),r([Y.path]);try{U.current=Y.path}catch{}const Z=T.mode==="grid"?Math.floor((H.get(Y.path)??0)/Math.max(1,T.columns)):((Re=J==null?void 0:J.get(Y.path))==null?void 0:Re.row)??0,ie=A.scrollTop,we=ie+A.clientHeight,ke=T.mode==="adaptive"?((dt=ae==null?void 0:ae[Z])==null?void 0:dt.start)??0:Z*T.rowH,Ee=T.mode==="adaptive"?ke+(((ft=ae==null?void 0:ae[Z])==null?void 0:ft.height)??0):ke+T.rowH;(ke<ie||Ee>we)&&Le(A,ke),nt(Y.path)};return A.addEventListener("keydown",se),()=>{A.removeEventListener("keydown",se)}},[e,R,Ue,s,T,J,ae,H]),c.useLayoutEffect(()=>{var Z;const A=F.current;if(!A||!n||!t||t.length===0)return;const se=t[0],q=H.get(se);if(q==null||q<0)return;let B=0;if(T.mode==="grid")B=Math.floor(q/Math.max(1,T.columns));else{let ie=0,we=T.rows.length-1;for(;ie<=we;){const ke=ie+we>>1,Ee=T.rows[ke];if(q>=Ee.items[0].originalIndex&&q<=Ee.items[Ee.items.length-1].originalIndex){B=ke;break}q<Ee.items[0].originalIndex?we=ke-1:ie=ke+1}}const Y=T.mode==="adaptive"?((Z=ae==null?void 0:ae[B])==null?void 0:Z.start)??0:B*T.rowH;try{A.scrollTop=Y}catch{}},[n,T,ae]);const tn=c.useMemo(()=>new Set(t),[t]),It=!!(w&&L&&h),bt=c.useMemo(()=>yS(z,T,e),[e,T,z]);c.useEffect(()=>{if(!(Q||bt.length===0))for(const A of bt)en(A)},[Q,bt,en]),c.useEffect(()=>{var A;(A=F.current)==null||A.focus()},[]),c.useEffect(()=>{var A;if(d){try{(A=F.current)==null||A.blur()}catch{}try{j(null)}catch{}}},[d]);const ct=c.useMemo(()=>{const A=new Set;for(const se of z){if(T.mode==="adaptive"){const Y=T.rows[se.index];if(!Y)continue;for(const Z of Y.items)A.add(Z.item.path);continue}const q=se.index*T.columns,B=Math.min(e.length,q+T.columns);for(let Y=q;Y<B;Y+=1){const Z=e[Y];Z&&A.add(Z.path)}}return A},[e,T,z]);c.useEffect(()=>{u&&(bS(D.current,ct)||(D.current=ct,u(ct)))},[u,ct]);const Te=R?`cell-${encodeURIComponent(R)}`:void 0;return a.jsx("div",{role:"grid","aria-label":"Gallery",className:`relative h-full overflow-auto p-3 outline-none ${C?"scrollbar-hidden pr-4":"scrollbar-thin"} ${It?"cursor-zoom-in":""}`,ref:F,tabIndex:0,"aria-activedescendant":Te,onMouseDown:()=>{var A;return(A=F.current)==null?void 0:A.focus()},style:{"--gap":`${Vn}px`},children:a.jsxs("div",{className:"relative w-full",style:{height:de.getTotalSize()},children:[z.map(A=>{var Z;let se=[],q={},B="";if(T.mode==="adaptive"){const ie=T.rows[A.index];if(!ie)return null;se=ie.items,q={height:ie.height,transform:`translate3d(0, ${A.start}px, 0)`,display:"flex",gap:Vn,paddingBottom:Vn},B="absolute top-0 left-0 right-0 w-full will-change-transform"}else{const ie=A.index*T.columns;se=e.slice(ie,ie+T.columns).map(ke=>({item:ke,displayW:T.cellW,displayH:T.mediaH})),q={transform:`translate3d(0, ${A.start}px, 0)`,gridTemplateColumns:`repeat(${T.columns}, minmax(0, 1fr))`,gap:Vn,paddingBottom:Vn},B="absolute top-0 left-0 right-0 w-full grid will-change-transform"}const Y=A.index===((Z=z[0])==null?void 0:Z.index);return a.jsx("div",{className:B,role:"row",style:q,children:se.map(({item:ie,displayW:we,displayH:ke})=>{const Ee=!d&&(v===ie.path||tn.has(ie.path)),Re=(l==null?void 0:l.get(ie.path))??null,dt=Re!=null,ft=T.mode==="adaptive"?{width:we}:{},Ft=T.mode==="adaptive"?{height:ke}:{},fn=T.mode==="adaptive"?"relative rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group shrink-0":"relative aspect-[4/3] rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group";return a.jsxs("div",{id:`cell-${encodeURIComponent(ie.path)}`,className:`relative min-w-0 ${Ee?"outline outline-2 outline-accent outline-offset-2 rounded-[10px]":""}`,role:"gridcell","aria-selected":Ee,tabIndex:R===ie.path?0:-1,onFocus:()=>j(ie.path),draggable:!0,style:ft,onDragStart:st=>Pt(ie.path,st),onDragEnd:()=>{},onContextMenu:st=>{st.preventDefault(),st.stopPropagation(),i&&i(st,ie.path)},children:[a.jsxs("div",{className:fn,style:Ft,onDoubleClick:()=>s(ie.path),onMouseLeave:fe,children:[a.jsx("div",{className:"cell-content absolute inset-0",children:a.jsx(J1,{path:ie.path,name:ie.name,selected:Ee,highlighted:dt,highlightKey:Re,displayW:we,displayH:ke,ioRoot:F.current,isScrolling:Q,priority:Y,onClick:st=>rt(ie.path,st)})}),a.jsx("div",{className:"absolute right-0 bottom-0 w-7 h-7 cursor-zoom-in",onMouseEnter:()=>Me(ie.path),onMouseLeave:fe,children:a.jsx("div",{className:"absolute right-0 bottom-0 h-[18px] w-[18px] flex items-center justify-center text-text select-none opacity-0 group-hover:opacity-50 hover:opacity-100 transition-all duration-[140ms]",style:{clipPath:'path("M0 9C0 4.02944 4.02944 0 9 0H18V18H0V9Z")',background:"linear-gradient(135deg, rgba(18,18,18,0.9) 0%, rgba(34,34,34,0.9) 60%, rgba(22,22,22,0.9) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",borderLeft:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 1px 2px rgba(0,0,0,0.45)",backdropFilter:"blur(1px)"},children:a.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#d9dce2]","aria-hidden":"true",style:{transform:"translate(0px,0px)"},children:[a.jsx("circle",{cx:"11",cy:"11",r:"5.4"}),a.jsx("path",{d:"M15.5 15.5 L19 19"})]})})})]}),a.jsxs("div",{className:"flex flex-col items-center text-center gap-0 mt-1 px-0.5 text-white/90",children:[a.jsx("div",{className:"text-sm leading-[18px] thumb-filename line-clamp-2 break-words hyphens-auto text-center",title:ie.name,children:(()=>{const st=(o||"").trim();if(!st)return ie.name;const it=ie.name,Ot=it.toLowerCase().indexOf(st.toLowerCase());if(Ot===-1)return ie.name;const Es=it.slice(0,Ot),Xe=it.slice(Ot,Ot+st.length),Ht=it.slice(Ot+st.length);return a.jsxs(a.Fragment,{children:[Es,a.jsx("mark",{className:"bg-accent/20 text-inherit rounded px-0.5",children:Xe}),Ht]})})()}),a.jsxs("div",{className:"text-[11px] leading-[15px] opacity-70",children:[ie.w,"  ",ie.h]})]})]},ie.path)})},A.key)}),w&&L&&h&&ff.createPortal(a.jsx("div",{className:"toolbar-offset fixed inset-0 z-[999] flex items-center justify-center pointer-events-none bg-black/20 opacity-100",children:a.jsx("img",{src:L,alt:"preview",className:"max-w-[80vw] max-h-[80vh] object-contain opacity-[0.98]"})}),document.body)]},`${f}-${Ue}`)})}const ES=48,NS=[.1,.24,.5,.74,.9];function jS({items:e,metricKey:t,scrollRef:n,sortDir:r}){const{orderedValues:s,numericValues:i}=c.useMemo(()=>{var N;const k=[],_=[];for(const F of e){const U=(N=F.metrics)==null?void 0:N[t],D=U==null||Number.isNaN(U)?null:U;k.push(D),D!=null&&_.push(D)}return{orderedValues:k,numericValues:_}},[e,t]),o=c.useMemo(()=>MS(i,ES),[i]),l=c.useMemo(()=>RS(i,NS),[i]),[u,d]=c.useState(0),[f,m]=c.useState(null),[g,C]=c.useState(!1),w=c.useRef(null);if(c.useEffect(()=>{const k=n.current;if(!k)return;const _=()=>{const N=Math.max(1,k.scrollHeight-k.clientHeight),F=ns(N>0?k.scrollTop/N:0);d(F)};return _(),k.addEventListener("scroll",_,{passive:!0}),window.addEventListener("resize",_),()=>{k.removeEventListener("scroll",_),window.removeEventListener("resize",_)}},[n,e.length]),c.useEffect(()=>{m(null)},[t,e.length]),!o)return null;const E={min:o.min,max:o.max},L=f!=null?jm(f):null,y=jm(u),h=r==="desc",p=c.useMemo(()=>f==null?null:TS(s,f),[s,f]);function v(k){m(ns(k))}function S(){m(null)}function R(k){const _=n.current;if(!_)return;const N=Math.max(0,_.scrollHeight-_.clientHeight);_.scrollTop=ns(k)*N}function j(k){var N;const _=(N=w.current)==null?void 0:N.getBoundingClientRect();return _?ns((k.clientY-_.top)/_.height):null}return a.jsxs("div",{className:"absolute right-0 top-3 bottom-3 w-[14px] flex items-stretch pointer-events-auto",children:[a.jsxs("svg",{ref:w,viewBox:"0 0 10 100",preserveAspectRatio:"none",className:"w-full h-full rounded bg-surface-inset border border-border/60 cursor-ns-resize",onPointerDown:k=>{var N;k.preventDefault();const _=j(k);_!=null&&(C(!0),v(_),R(_),(N=w.current)==null||N.setPointerCapture(k.pointerId))},onPointerMove:k=>{const _=j(k);if(_==null){g||S();return}v(_),g&&R(_)},onPointerUp:k=>{var _;C(!1),(_=w.current)==null||_.releasePointerCapture(k.pointerId)},onPointerLeave:()=>{g||S()},children:[LS(o.bins,"var(--border-strong)",{flip:h}),_S(l,E,{flip:h,color:"var(--muted)"}),Nm(y,{color:"var(--highlight)",strokeWidth:.8}),L!=null&&Nm(L,{color:"var(--text-secondary)",strokeWidth:.6,dashed:!0})]}),p!=null&&f!=null&&a.jsx("div",{className:"pointer-events-none absolute right-full mr-2 px-1.5 py-0.5 rounded border border-border bg-surface text-[10px] text-text shadow",style:{top:`calc(${(f*100).toFixed(2)}% - 8px)`},children:IS(p)})]})}function MS(e,t){if(!e.length)return null;const n=Math.min(...e);let r=Math.max(...e);n===r&&(r=n+1);const s=new Array(t).fill(0),i=t/(r-n);for(const o of e){const l=Math.max(0,Math.min(t-1,Math.floor((o-n)*i)));s[l]+=1}return{bins:s,min:n,max:r}}function RS(e,t){if(!e.length)return[];const n=[...e].sort((s,i)=>s-i),r=n.length-1;return t.map(s=>{const i=r*s,o=Math.floor(i),l=Math.ceil(i);if(o===l)return n[o];const u=i-o;return n[o]+(n[l]-n[o])*u})}function LS(e,t,n){const r=Math.max(1,...e),s=100/e.length,i=(n==null?void 0:n.flip)??!1;return e.map((o,l)=>{const u=Math.max(.8,o/r*10),d=(i?e.length-1-l:l)*s;return a.jsx("rect",{x:10-u,y:d,width:u,height:Math.max(.2,s-.2),fill:t,opacity:.9},`sb-${l}`)})}function _S(e,t,n){const r=(n==null?void 0:n.flip)??!1,s=n==null?void 0:n.color;return e.map((i,o)=>{const l=PS(i,t,r),u=o===2;return a.jsx("line",{x1:0,y1:l,x2:10,y2:l,stroke:s,strokeWidth:u?.8:.5,opacity:u?.9:.6,vectorEffect:"non-scaling-stroke"},`qt-${o}-${i}`)})}function Nm(e,t){return a.jsx("line",{x1:0,y1:e,x2:10,y2:e,stroke:t.color,strokeWidth:t.strokeWidth??.6,strokeDasharray:t.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function TS(e,t){if(!e.length)return null;const n=Math.round(ns(t)*(e.length-1)),r=e[n];if(r!=null)return r;for(let s=1;s<e.length;s++){const i=n-s;if(i>=0&&e[i]!=null)return e[i];const o=n+s;if(o<e.length&&e[o]!=null)return e[o]}return null}function PS(e,t,n){const r=t.max-t.min;if(r===0)return 0;const s=ns((e-t.min)/r);return(n?1-s:s)*100}function jm(e){return ns(e)*100}function ns(e){return e<0?0:e>1?1:e}function IS(e){if(e==null||Number.isNaN(e))return"-";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function rs(e,t){const[n,r]=c.useState(null),s=c.useRef(null);return c.useEffect(()=>{if(!e){if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}r(null);return}let i=!0;return e().then(o=>{if(!i)return;const l=URL.createObjectURL(o);if(s.current)try{URL.revokeObjectURL(s.current)}catch{}s.current=l,r(l)}).catch(()=>{}),()=>{i=!1}},t),c.useEffect(()=>()=>{if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}},[]),n}function FS(){const[e,t]=c.useState(1),[n,r]=c.useState(0),[s,i]=c.useState(0),[o,l]=c.useState(1),[u,d]=c.useState(!1),[f,m]=c.useState(!1),[g,C]=c.useState(!1),w=c.useRef(null),E=c.useRef(null),L=()=>{const p=w.current,v=E.current;if(!p||!v||!v.naturalWidth||!v.naturalHeight)return;const S=p.getBoundingClientRect(),R=S.width/v.naturalWidth,j=S.height/v.naturalHeight,k=Math.min(1,Math.min(R,j));l(k);const _=v.naturalWidth*k,N=v.naturalHeight*k;r((S.width-_)/2),i((S.height-N)/2)};return c.useEffect(()=>{const p=w.current;if(!p)return;const v=new ResizeObserver(()=>{try{requestAnimationFrame(()=>L())}catch{L()}});return v.observe(p),()=>v.disconnect()},[]),{scale:e,setScale:t,tx:n,setTx:r,ty:s,setTy:i,base:o,setBase:l,ready:u,setReady:d,dragging:f,setDragging:m,visible:g,setVisible:C,containerRef:w,imgRef:E,fitAndCenter:L,handleWheel:p=>{p.preventDefault();const v=p.deltaY>0?-1:1,S=1.2,R=.05,j=8,k=w.current;if(!k)return;const _=k.getBoundingClientRect(),N=p.clientX-_.left,F=p.clientY-_.top;t(U=>{const D=Math.min(j,Math.max(R,U*Math.pow(S,v))),ee=D/U;return r(ue=>N-ee*(N-ue)),i(ue=>F-ee*(F-ue)),Number(D.toFixed(4))})},handleMouseDown:p=>{const v=w.current,S=E.current;if(!v||!S||p.target!==S)return;const j=v.getBoundingClientRect();if(p.clientX<j.left||p.clientX>j.right||p.clientY<j.top||p.clientY>j.bottom)return;p.preventDefault(),p.stopPropagation(),m(!0);const k=p.clientX,_=p.clientY,N=n,F=s,U=ee=>{r(N+(ee.clientX-k)),i(F+(ee.clientY-_))},D=()=>{window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",D),m(!1)};window.addEventListener("mousemove",U),window.addEventListener("mouseup",D)}}}function OS({path:e,onClose:t,onNavigate:n,onZoomChange:r,requestedZoomPercent:s,onZoomRequestConsumed:i}){const{scale:o,setScale:l,tx:u,setTx:d,ty:f,setTy:m,base:g,ready:C,setReady:w,dragging:E,visible:L,setVisible:y,containerRef:h,imgRef:p,fitAndCenter:v,handleWheel:S,handleMouseDown:R}=FS(),j=rs(()=>ve.getFile(e),[e]),k=rs(()=>ve.getThumb(e),[e]),_=c.useCallback(()=>{y(!1),window.setTimeout(t,110)},[t,y]);return c.useEffect(()=>{requestAnimationFrame(()=>{var N;y(!0),(N=h.current)==null||N.focus()})},[e]),c.useEffect(()=>{const N=F=>{F.key==="Escape"?_():(F.key==="ArrowRight"||F.key==="d")&&n?n(1):(F.key==="ArrowLeft"||F.key==="a")&&n&&n(-1)};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[t,n]),c.useEffect(()=>{w(!1)},[j]),c.useEffect(()=>{r&&r(g*o*100)},[g,o,r]),c.useEffect(()=>{if(s==null)return;const N=h.current;if(!N){i&&i();return}const F=Math.max(.05,Math.min(8,s/100/Math.max(1e-6,g))),U=N.getBoundingClientRect(),D=U.width/2,ee=U.height/2;l(ue=>{const T=F/ue;return d(de=>D-T*(D-de)),m(de=>ee-T*(ee-de)),Number(F.toFixed(4))}),i&&i()},[s,g,i]),a.jsxs("div",{ref:h,role:"dialog","aria-modal":!0,"aria-label":"Image viewer",tabIndex:-1,className:`toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] flex items-start justify-start bg-panel z-viewer overflow-hidden transition-opacity duration-[110ms] ease-out cursor-grab focus:outline-none focus-visible:outline-none ${E?"cursor-grabbing select-none":""} ${L?"opacity-100":"opacity-0"}`,style:{outline:"none"},onClick:_,onWheel:S,onMouseDown:R,onKeyDown:N=>{N.key==="Tab"&&N.preventDefault()},children:[a.jsxs("button",{"aria-label":"Close",onClick:N=>{N.stopPropagation(),_()},className:"btn btn-sm absolute top-3 right-3 z-10",title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]}),k&&a.jsx("img",{src:k,alt:"thumb",className:"absolute top-0 left-0 max-w-none max-h-none object-contain pointer-events-none transition-opacity duration-[110ms] ease-out",draggable:!1,onDragStart:N=>N.preventDefault(),style:{transform:`translate(${u}px, ${f}px) scale(${g})`,transformOrigin:"0 0",opacity:C?0:.5,filter:"blur(0.25px)"}}),j&&a.jsx("img",{ref:p,src:j,alt:"viewer",className:"max-w-none max-h-none object-contain transition-opacity duration-[110ms] ease-out will-change-transform select-none",draggable:!1,onDragStart:N=>{N.preventDefault()},onLoad:N=>{v(),l(1);try{requestAnimationFrame(()=>w(!0))}catch{w(!0)}},onClick:N=>N.stopPropagation(),style:{transform:`translate(${u}px, ${f}px) scale(${g*o})`,transformOrigin:"0 0",opacity:C?.99:0,WebkitUserDrag:"none"}})]})}function xf(e){return!e||!(e instanceof HTMLElement)?!1:e.closest('input, textarea, [contenteditable="true"]')!==null}const DS=1.2,zS=.05,AS=8;function $S(){const[e,t]=c.useState(1),[n,r]=c.useState(0),[s,i]=c.useState(0),[o,l]=c.useState(0),[u,d]=c.useState(0),[f,m]=c.useState(1),[g,C]=c.useState(1),[w,E]=c.useState(!1),L=c.useRef(null),y=c.useRef(null),h=c.useRef(null),p=c.useCallback(()=>{const j=L.current;if(!j)return;const k=j.getBoundingClientRect(),_=(N,F,U,D)=>{if(!N||!N.naturalWidth||!N.naturalHeight)return;const ee=k.width/N.naturalWidth,ue=k.height/N.naturalHeight,T=Math.min(1,Math.min(ee,ue)),de=N.naturalWidth*T,z=N.naturalHeight*T;F(T),U((k.width-de)/2),D((k.height-z)/2)};_(y.current,m,r,i),_(h.current,C,l,d)},[]);c.useEffect(()=>{const j=L.current;if(!j)return;const k=new ResizeObserver(()=>{try{requestAnimationFrame(()=>p())}catch{p()}});return k.observe(j),()=>k.disconnect()},[p]);const v=c.useCallback(()=>{t(1),p()},[p]),S=c.useCallback(j=>{j.preventDefault();const k=j.deltaY>0?-1:1,_=L.current;if(!_)return;const N=_.getBoundingClientRect(),F=j.clientX-N.left,U=j.clientY-N.top;t(D=>{const ee=Math.min(AS,Math.max(zS,D*Math.pow(DS,k))),ue=ee/D;return r(T=>F-ue*(F-T)),i(T=>U-ue*(U-T)),l(T=>F-ue*(F-T)),d(T=>U-ue*(U-T)),Number(ee.toFixed(4))})},[]),R=c.useCallback(j=>{if(j.button!==0||!L.current)return;j.preventDefault(),E(!0);const _=j.clientX,N=j.clientY,F=n,U=s,D=o,ee=u,ue=de=>{const z=de.clientX-_,H=de.clientY-N;r(F+z),i(U+H),l(D+z),d(ee+H)},T=()=>{window.removeEventListener("pointermove",ue),window.removeEventListener("pointerup",T),E(!1)};window.addEventListener("pointermove",ue),window.addEventListener("pointerup",T)},[n,s,o,u]);return{scale:e,baseA:f,baseB:g,txA:n,tyA:s,txB:o,tyB:u,dragging:w,containerRef:L,imgARef:y,imgBRef:h,fitAndCenter:p,resetView:v,handleWheel:S,handlePointerDown:R}}function US({aItem:e,bItem:t,index:n,total:r,canPrev:s,canNext:i,onNavigate:o,onClose:l}){const u=c.useRef(null),[d,f]=c.useState(50),[m,g]=c.useState(!1),[C,w]=c.useState(!1),{scale:E,baseA:L,baseB:y,txA:h,tyA:p,txB:v,tyB:S,dragging:R,containerRef:j,imgARef:k,imgBRef:_,fitAndCenter:N,resetView:F,handleWheel:U,handlePointerDown:D}=$S(),ee=(e==null?void 0:e.path)??null,ue=(t==null?void 0:t.path)??null,T=(e==null?void 0:e.name)??ee??"Select an image",de=(t==null?void 0:t.name)??ue??"Select another image";c.useEffect(()=>{requestAnimationFrame(()=>{var K;return(K=u.current)==null?void 0:K.focus()})},[ee,ue]),c.useEffect(()=>{F(),g(!1),w(!1)},[ee,ue,F]),c.useEffect(()=>{const K=ne=>{if(!xf(ne.target)){if(ne.key==="Escape"){ne.preventDefault(),l();return}if((ne.key==="ArrowRight"||ne.key==="d")&&i){ne.preventDefault(),o(1);return}(ne.key==="ArrowLeft"||ne.key==="a")&&s&&(ne.preventDefault(),o(-1))}};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[l,o,s,i]);const z=rs(ee?()=>ve.getFile(ee):null,[ee]),H=rs(ue?()=>ve.getFile(ue):null,[ue]),J=rs(ee?()=>ve.getThumb(ee):null,[ee]),ae=rs(ue?()=>ve.getThumb(ue):null,[ue]),ce=c.useCallback(K=>Math.min(95,Math.max(5,K)),[]),Le=c.useCallback(K=>{const ne=K.target;ne!=null&&ne.closest(".compare-label")||ne!=null&&ne.closest(".compare-divider-hit")||D(K)},[D]),Q=c.useCallback(K=>{const ne=j.current;if(!ne)return;K.preventDefault(),K.stopPropagation();const fe=ne.getBoundingClientRect(),Me=K.currentTarget;Me.setPointerCapture(K.pointerId);const Ue=ut=>{const nt=(ut.clientX-fe.left)/fe.width*100;f(ce(nt))},Ve=ut=>{Me.releasePointerCapture(ut.pointerId),window.removeEventListener("pointermove",Ue),window.removeEventListener("pointerup",Ve)};window.addEventListener("pointermove",Ue),window.addEventListener("pointerup",Ve)},[ce]);return a.jsxs("div",{ref:u,role:"dialog","aria-modal":!0,"aria-label":"Compare images",tabIndex:-1,className:"toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] bg-panel z-viewer flex flex-col overflow-hidden focus:outline-none",onKeyDown:K=>{K.key==="Tab"&&K.preventDefault()},children:[a.jsxs("div",{className:"compare-header flex items-center gap-3 px-3 py-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Compare"}),a.jsx("div",{className:"text-xs text-muted",children:r>=2?`${n+1}-${Math.min(n+2,r)} of ${r}`:"Select 2 images"}),a.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(-1),disabled:!s,title:"Previous (Left Arrow or A)",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Prev"]}),a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(1),disabled:!i,title:"Next (Right Arrow or D)",children:["Next",a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"btn btn-sm",onClick:l,title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]})]})]}),a.jsx("div",{className:"flex-1 min-h-0 p-3 bg-panel",children:a.jsx("div",{ref:j,className:`compare-stage ${R?"is-dragging":""}`,onWheel:U,onPointerDown:Le,children:!e||!t?a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-sm text-muted",children:"Select 2 images to compare."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"compare-label left-3",children:[a.jsx("span",{className:"compare-label-tag",children:"A"}),a.jsx("span",{className:"truncate",title:e.path,children:T})]}),a.jsxs("div",{className:"compare-label right-3",children:[a.jsx("span",{className:"compare-label-tag",children:"B"}),a.jsx("span",{className:"truncate",title:t.path,children:de})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 ${100-d}% 0 0)`},children:[J&&a.jsx("img",{src:J,alt:"thumb A",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:K=>K.preventDefault(),style:{transform:`translate(${h}px, ${p}px) scale(${L})`,transformOrigin:"0 0",opacity:m?0:.5}}),z&&a.jsx("img",{ref:k,src:z,alt:"compare A",className:"compare-image",draggable:!1,onDragStart:K=>K.preventDefault(),onLoad:()=>{N();try{requestAnimationFrame(()=>g(!0))}catch{g(!0)}},style:{transform:`translate(${h}px, ${p}px) scale(${L*E})`,transformOrigin:"0 0",opacity:m?.99:0}})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 0 0 ${d}%)`},children:[ae&&a.jsx("img",{src:ae,alt:"thumb B",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:K=>K.preventDefault(),style:{transform:`translate(${v}px, ${S}px) scale(${y})`,transformOrigin:"0 0",opacity:C?0:.5}}),H&&a.jsx("img",{ref:_,src:H,alt:"compare B",className:"compare-image",draggable:!1,onDragStart:K=>K.preventDefault(),onLoad:()=>{N();try{requestAnimationFrame(()=>w(!0))}catch{w(!0)}},style:{transform:`translate(${v}px, ${S}px) scale(${y*E})`,transformOrigin:"0 0",opacity:C?.99:0}})]}),a.jsxs("div",{className:"compare-divider-hit",style:{left:`${d}%`},onPointerDown:Q,children:[a.jsx("div",{className:"compare-divider-line"}),a.jsx("div",{className:"compare-divider-handle"})]})]})})})]})}function qa(){const[e,t]=c.useState(K1());return c.useEffect(()=>Q1(t),[]),e}const _o=e=>["item",e],BS={v:1,tags:[],notes:"",version:1,updated_at:"",updated_by:"web"},vn=new Map,Vl=new Map,od=new Map,wf=new Map;let Mm=0;const An=new Map,eo=new Map,WS=12e3,ld=new Set,ad=new Set;let Sf={state:"idle"},To=null,ud=0;function Ml(e){Sf=e;for(const t of ld)t(e)}function nr(){const e=An.size>0,t=vn.size+Vl.size+ud;if(e){Ml({state:"error",message:"Conflict detected"});return}if(To){Ml({state:"error",message:To});return}if(t>0){Ml({state:"syncing"});return}Ml({state:"idle"})}function Cf(){let e=null;for(const t of od.values())e=e==null?t:Math.min(e,t);for(const t of wf.values())e=e==null?t:Math.min(e,t);return e}function ka(){const e=Cf();for(const t of ad)t(e)}function Ea(e){To=e,nr()}function sy(){To&&(To=null,nr())}function Rm(e){ud=Math.max(0,ud+e),nr()}function HS(){Mm+=1;const e=Mm;return wf.set(e,Date.now()),ka(),e}function VS(e){e!=null&&wf.delete(e)&&ka()}function Ya(e){const t=eo.get(e);if(!t||!t.size)return;const n=An.get(e)??null;for(const r of t)r(n)}function Lm(e){return An.get(e)??null}function Ga(e){An.delete(e)&&(Ya(e),nr())}function QS(e,t){An.set(e,t),Ya(e),nr()}function KS(e,t){const n=eo.get(e)??new Set;return n.add(t),eo.set(e,n),t(An.get(e)??null),()=>{const r=eo.get(e);r&&(r.delete(t),r.size||eo.delete(e))}}function qS(e){const[t,n]=c.useState(()=>e?Lm(e):null);return c.useEffect(()=>{if(!e){n(null);return}return n(Lm(e)),KS(e,n)},[e]),t}function YS(e){return ld.add(e),e(Sf),()=>{ld.delete(e)}}function GS(){const[e,t]=c.useState(Sf);return c.useEffect(()=>YS(t),[]),e}function XS(e){return ad.add(e),e(Cf()),()=>{ad.delete(e)}}function JS(){const[e,t]=c.useState(()=>Cf()),[n,r]=c.useState(()=>e==null?null:Date.now()-e);return c.useEffect(()=>XS(t),[]),c.useEffect(()=>{if(e==null){r(null);return}r(Date.now()-e);const s=window.setInterval(()=>{r(Date.now()-e)},1e3);return()=>window.clearInterval(s)},[e]),n}function cd(e){const t={};return Object.prototype.hasOwnProperty.call(e,"star")&&(t.set_star=e.star??null),Object.prototype.hasOwnProperty.call(e,"notes")&&(t.set_notes=e.notes??""),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.set_tags=Array.isArray(e.tags)?e.tags:[]),t}function dd(e){var t,n;return e.set_star!==void 0||e.set_notes!==void 0||e.set_tags!==void 0||(((t=e.add_tags)==null?void 0:t.length)??0)>0||(((n=e.remove_tags)==null?void 0:n.length)??0)>0}function Qi(e){const t=[],n=new Set;for(const r of e??[]){if(typeof r!="string")continue;const s=r.trim();!s||n.has(s)||(n.add(s),t.push(s))}return t}function ZS(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}function eC(e,t){if(e.set_star!==void 0&&(t.star??null)!==e.set_star||e.set_notes!==void 0&&(t.notes??"")!==(e.set_notes??""))return!1;if(e.set_tags!==void 0){const r=Qi(e.set_tags),s=Qi(t.tags);return ZS(r,s)}const n=Qi(t.tags);for(const r of Qi(e.add_tags))if(!n.includes(r))return!1;for(const r of Qi(e.remove_tags))if(n.includes(r))return!1;return!0}function iy(e,t,n){if(n instanceof Nn&&n.status===409){const r=n.body;if(r!=null&&r.current)return QS(e,{path:e,current:r.current,pending:t,receivedAt:new Date().toISOString()}),!0}return!1}function tC(e,t){const n=An.get(e);if(n){if(eC(n.pending,t)){Ga(e);return}An.set(e,{...n,current:t}),Ya(e),nr()}}function nC(e){const t=qa();return Qa({queryKey:_o(e),queryFn:()=>ve.getSidecar(e),enabled:!!e,staleTime:3e4,gcTime:5*6e4,retry:2,refetchInterval:t?WS:!1,refetchIntervalInBackground:t})}function rC(e){const t=Vr();return w1({mutationFn:async({patch:n,baseVersion:r,idempotencyKey:s})=>{const i=cd(n);if(!dd(i))return t.getQueryData(_o(e))??BS;const o={...i,base_version:r};try{return await ve.patchSidecar(e,o,{idempotencyKey:s??Lo("patch"),ifMatch:r})}catch(l){throw iy(e,i,l),l}},retry:(n,r)=>r instanceof Nn&&r.status===409?!1:n<2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),4e3),onMutate:()=>(sy(),Rm(1),{inflightId:HS()}),onSuccess:n=>{Ga(e),t.setQueryData(_o(e),n)},onError:n=>{n instanceof Nn&&n.status===409||(n instanceof Nn?Ea(n.message):Ea("Failed to save"))},onSettled:(n,r,s,i)=>{Rm(-1),VS(i==null?void 0:i.inflightId)}})}const sC=6;async function _m(e,t){if(!e.length)return;let n=0;const r=[],s=async()=>{for(;n<e.length;){const o=n++,l=e[o];try{await oy(l,t)}catch(u){r.push({path:l,error:u}),console.error(`[bulkUpdateSidecars] Failed for ${l}:`,u)}}},i=Array.from({length:Math.min(sC,e.length)},()=>s());if(await Promise.all(i),r.length===e.length)throw new Error(`All ${e.length} sidecar updates failed`)}async function oy(e,t){const n=vn.get(e)||{};vn.set(e,{...n,...t}),sy(),nr();const r=Vl.get(e);if(r)return r;od.set(e,Date.now()),ka();const s=(async()=>{try{for(;vn.has(e);){const i=vn.get(e);if(!i)break;const o=cd(i);if(!dd(o)){vn.get(e)===i&&vn.delete(e);continue}let l=1;try{l=(await ve.getSidecar(e)).version??1}catch{l=1}const u={...o,base_version:l};try{await ve.patchSidecar(e,u,{idempotencyKey:Lo("patch"),ifMatch:l}),Ga(e),vn.get(e)===i&&vn.delete(e)}catch(d){if(iy(e,o,d)){const m=vn.get(e);if(m&&m!==i){const g=cd(m);if(dd(g)){const C=An.get(e);C&&(An.set(e,{...C,pending:g}),Ya(e))}}vn.delete(e)}else d instanceof Nn?Ea(d.message):Ea("Failed to save");throw d}}}finally{Vl.delete(e),od.delete(e),ka(),nr()}})();return Vl.set(e,s),nr(),s}function $u(e){const t=["B","KB","MB","GB","TB"];let n=0,r=e;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${r.toFixed(1)} ${t[n]}`}function Uu(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function iC(e,t=28){if(e.length<=t)return e;const n=Math.max(4,Math.floor((t-1)/2));return`${e.slice(0,n)}${e.slice(-n)}`}const oC=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});function lC(e){const t=e.trim();return!t||/[zZ]|[+-]\d{2}:?\d{2}$/.test(t)?t:`${t.includes("T")?t:t.replace(" ","T")}Z`}function ly(e){if(!e)return null;const t=Date.parse(lC(e));return Number.isFinite(t)?t:null}function aC(e,t=Date.now()){const n=Math.max(0,t-e),r=Math.max(1,Math.floor(n/1e3));if(r<60)return`${r} second${r===1?"":"s"} ago`;const s=Math.floor(r/60);if(s<60)return`${s} minute${s===1?"":"s"} ago`;const i=Math.floor(s/60);return`${i} hour${i===1?"":"s"} ago`}function uC(e){return oC.format(new Date(e))}function si(e){if(Array.isArray(e))return e.map(si);if(e&&typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,si(n)]));if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")||t.startsWith('"')&&t.endsWith('"'))try{const r=JSON.parse(t);return si(r)}catch{return e}}return e}function Ki(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function cC(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Tm(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}function dC(e){const t=/(\"(\\u[a-fA-F0-9]{4}|\\[^u]|[^\\"])*\"(?:\s*:)?|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\btrue\b|\bfalse\b|\bnull\b)/g;let n="",r=0;for(const s of e.matchAll(t)){const i=s.index??0,o=s[0];n+=Ki(e.slice(r,i));let l="var(--json-fallback)",u=null;if(o.startsWith('"')&&o.trimEnd().endsWith(":")){l="var(--json-key)";const d=o.trim().replace(/:\s*$/,"");try{u=JSON.parse(d)}catch{u=null}}else o.startsWith('"')?l="var(--json-string)":/true|false|null/.test(o)?l="var(--json-literal)":l="var(--json-number)";u?n+=`<span class="ui-json-key" data-json-key="${Ki(u)}" style="color:${l}">${Ki(o)}</span>`:n+=`<span style="color:${l}">${Ki(o)}</span>`,r=i+o.length}return n+=Ki(e.slice(r)),n}function Na(e){return e==null?String(e):typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):Array.isArray(e)?`[${e.map(Na).join(",")}]`:typeof e=="object"?`{${Object.entries(e).sort(([n],[r])=>n.localeCompare(r)).map(([n,r])=>`${n}:${Na(r)}`).join(",")}}`:String(e)}function Rl(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);try{return JSON.stringify(e,null,1)}catch{return String(e)}}function fC(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function Pm(e,t){if(typeof t=="number")return e?`${e}[${t}]`:`[${t}]`;const n=/^[A-Za-z0-9_$-]+$/.test(t);return e?n?`${e}.${t}`:`${e}["${t}"]`:n?t:`["${t}"]`}function ja(e,t,n,r,s){if(!(s.skipPilInfo&&(t==="pil_info"||t.startsWith("pil_info.")||t.startsWith("pil_info[")))){if(r>=s.maxDepth){n.set(t||"(root)",e);return}if(Array.isArray(e)){if(!e.length){n.set(t||"(root)",[]);return}if(e.length>s.maxArray){n.set(t||"(root)",e);return}e.forEach((i,o)=>ja(i,Pm(t,o),n,r+1,s));return}if(fC(e)){const i=Object.keys(e).sort((o,l)=>o.localeCompare(l));if(!i.length){n.set(t||"(root)",{});return}for(const o of i)s.skipPilInfo&&!t&&o==="pil_info"||ja(e[o],Pm(t,o),n,r+1,s);return}n.set(t||"(root)",e)}}const hC=["overview","compare","basics","metadata","notes"],Im="lenslet.inspector.sections",Fm="lenslet.inspector.metricsExpanded",Bu=12,Wu=120,mC=8,pC=80,gC={overview:!0,compare:!0,metadata:!0,basics:!0,notes:!0};function qi({title:e,open:t,onToggle:n,actions:r,children:s,contentClassName:i}){const[o,l]=c.useState(t),[u,d]=c.useState(t?"open":"closed");return c.useEffect(()=>{if(t){l(!0);const m=window.requestAnimationFrame(()=>d("open"));return()=>window.cancelAnimationFrame(m)}d("closing");const f=window.setTimeout(()=>{l(!1),d("closed")},140);return()=>window.clearTimeout(f)},[t]),a.jsxs("div",{className:"border-b border-border/60",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[a.jsxs("button",{type:"button",onClick:n,"aria-expanded":t,className:"flex items-center gap-2 inspector-section-title hover:text-text transition-colors",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform ${t?"rotate-90":""}`,"aria-hidden":"true",children:a.jsx("path",{d:"m9 18 6-6-6-6"})}),a.jsx("span",{children:e})]}),r]}),o&&a.jsx("div",{className:"inspector-section-body","data-state":u,"aria-hidden":!t,children:a.jsx("div",{className:i??"px-3 pb-3",children:s})})]})}function vC({path:e,selectedPaths:t=[],items:n=[],compareActive:r=!1,compareA:s=null,compareB:i=null,onResize:o,onStarChanged:l,sortSpec:u,onFindSimilar:d,embeddingsAvailable:f=!1,embeddingsLoading:m=!1,onLocalTypingChange:g}){const C=!!e,{data:w,isLoading:E}=nC(e??""),L=rC(e??""),y=Vr(),[h,p]=c.useState(gC),v=c.useCallback(I=>{p(oe=>({...oe,[I]:!oe[I]}))},[]),[S,R]=c.useState(!1),j=t.length>1,k=!!d&&f&&!j,_=d?f?j?"Select a single image to search.":null:m?"Loading embeddings...":"No embeddings detected.":null,[N,F]=c.useState(""),[U,D]=c.useState(""),[ee,ue]=c.useState(null),[T,de]=c.useState(null),[z,H]=c.useState("idle"),[J,ae]=c.useState(!1),[ce,Le]=c.useState(null),Q=c.useRef(null),[K,ne]=c.useState(!1),[fe,Me]=c.useState("idle"),[Ue,Ve]=c.useState(null),[ut,nt]=c.useState(null),[en,rt]=c.useState(null),[Pt,tn]=c.useState(!1),It=c.useRef(0),[bt,ct]=c.useState(null),[Te,A]=c.useState({}),se=c.useRef(!1),q=c.useCallback(I=>{se.current!==I&&(se.current=I,g==null||g(I))},[g]),Y=c.useMemo(()=>{const I=n.find(oe=>oe.path===e);return I&&I.star!==void 0?I.star:null},[n,e])??(w==null?void 0:w.star)??null,Z=qS(j?null:e),ie={tags:!!(Z!=null&&Z.pending.set_tags),notes:(Z==null?void 0:Z.pending.set_notes)!==void 0,star:(Z==null?void 0:Z.pending.set_star)!==void 0},we=c.useMemo(()=>{const I=new Set(t);return n.filter(oe=>I.has(oe.path))},[n,t]),ke=c.useMemo(()=>we.reduce((I,oe)=>I+(oe.size||0),0),[we]);c.useEffect(()=>{w&&(F((w.tags||[]).join(", ")),D(w.notes||"")),ue(null),de(null),H("idle"),ae(!1),Le(null),Q.current&&(window.clearTimeout(Q.current),Q.current=null),ne(!1),q(!1)},[w==null?void 0:w.updated_at,q,e]),c.useEffect(()=>()=>{Q.current&&(window.clearTimeout(Q.current),Q.current=null),q(!1)},[q]);const Ee=c.useCallback(I=>{if(j&&t.length){_m(t,I);return}if(!e)return;const oe=(w==null?void 0:w.version)??1;L.mutate({patch:I,baseVersion:oe,idempotencyKey:Lo("patch")})},[j,t,e,w==null?void 0:w.version,L]),Re=c.useCallback(I=>{D(I),q(!0)},[q]),dt=c.useCallback(()=>{Ee({notes:U}),q(!1)},[Ee,U,q]),ft=c.useCallback(I=>{F(I),q(!0)},[q]),Ft=c.useCallback(()=>{Ee({tags:Tm(N)}),q(!1)},[Ee,q,N]),fn=c.useCallback(()=>{if(!Z||!e)return;const I={};Z.pending.set_tags!==void 0&&(I.tags=Tm(N)),Z.pending.set_notes!==void 0&&(I.notes=U),Z.pending.set_star!==void 0&&(I.star=Y??null);const oe=Z.current.version??1;L.mutate({patch:I,baseVersion:oe,idempotencyKey:Lo("patch")})},[Z,e,N,U,Y,L]),st=c.useCallback(()=>{if(!Z||!e)return;const I=Z.current;F((I.tags||[]).join(", ")),D(I.notes||""),y.setQueryData(_o(e),I),Ga(e),l==null||l([e],I.star??null)},[Z,e,y,l]);c.useEffect(()=>{if(!e)return;const I=oe=>{if(xf(oe.target))return;const he=oe.key;if(!/^[0-5]$/.test(he))return;oe.preventDefault();const me=he==="0"?null:Number(he);if(j&&t.length){Ee({star:me}),l==null||l(t,me);return}Ee({star:me}),l==null||l([e],me)};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[e,j,t,Ee,l]);const it=rs(e?()=>ve.getThumb(e):null,[e]),Ot=e?e.split("/").pop()||e:"",Es=c.useMemo(()=>{var oe;if(Ot.includes("."))return Ot.slice(Ot.lastIndexOf(".")+1).toUpperCase();const I=n.find(he=>he.path===e);return(oe=I==null?void 0:I.type)!=null&&oe.includes("/")?I.type.split("/")[1].toUpperCase():""},[Ot,n,e]),Xe=c.useMemo(()=>n.find(I=>I.path===e),[n,e]),Ht=c.useMemo(()=>e?(Xe==null?void 0:Xe.source)??e:"",[Xe,e]),Mn=(s==null?void 0:s.path)??null,hn=(i==null?void 0:i.path)??null,Ri=r&&!!Mn&&!!hn,Wo=(s==null?void 0:s.name)??Mn??"A",Ns=(i==null?void 0:i.name)??hn??"B",js=c.useCallback(async()=>{if(e){H("loading"),de(null);try{const I=await ve.getMetadata(e);ue(I.meta),H("loaded")}catch(I){const oe=I instanceof Error?I.message:"Failed to load metadata";ue(null),de(oe),H("error")}}},[e]),ur=c.useCallback(async(I,oe)=>{const he=It.current+1;It.current=he,Me("loading"),Ve(null);try{const[me,Ye]=await Promise.all([ve.getMetadata(I),ve.getMetadata(oe)]);if(It.current!==he)return;nt(me.meta),rt(Ye.meta),Me("loaded")}catch(me){if(It.current!==he)return;const Ye=me instanceof Error?me.message:"Failed to load metadata";nt(null),rt(null),Ve(Ye),Me("error")}},[]);c.useEffect(()=>{if(!Ri||!Mn||!hn){It.current+=1,Me("idle"),Ve(null),nt(null),rt(null);return}tn(!1),ur(Mn,hn)},[Ri,Mn,hn,ur]);const Ms=c.useMemo(()=>{if(!ee)return"";try{return JSON.stringify(ee,null,1)}catch{return""}},[ee]),Rs=c.useMemo(()=>{if(!ee)return"";const I=si(ee);if(!K&&I&&typeof I=="object"&&!Array.isArray(I)&&"pil_info"in I){const oe={};for(const[he,me]of Object.entries(I))oe[he]=he==="pil_info"?"Hidden (toggle Show PIL info to expand)":me;return JSON.stringify(oe,null,1)}return JSON.stringify(I,null,1)},[ee,K]),Xa=c.useCallback(()=>{var I;Ms&&((I=navigator.clipboard)==null||I.writeText(Ms).then(()=>{ae(!0),setTimeout(()=>ae(!1),1200)}).catch(oe=>{const he=oe instanceof Error?oe.message:"Copy failed";de(he)}))},[Ms]),Ho=c.useCallback(I=>{var oe;I&&((oe=navigator.clipboard)==null||oe.writeText(I).then(()=>{Le(I),Q.current&&window.clearTimeout(Q.current),Q.current=window.setTimeout(()=>{Le(null),Q.current=null},900)}).catch(()=>{}))},[]),Ls=c.useCallback(I=>{const oe=I.target;if(!oe)return;const he=oe.closest("[data-json-key]");if(!he)return;const me=he.getAttribute("data-json-key");me&&(I.preventDefault(),Ho(me))},[Ho]),Vo=c.useMemo(()=>Rs?dC(Rs):"",[Rs]),Ef=z==="loading"?"Loading metadata":z==="error"&&T?T:Rs||"PNG metadata not loaded yet.",Ja=z==="loading",Oe=z==="loaded"&&!!Ms,Qo=Oe?"h-48":"h-24",Li=Ja?"Loading":Oe?J?"Copied":"Copy":"Load meta",_i=Oe?Xa:js,cr=!!ee&&typeof ee=="object"&&!Array.isArray(ee)&&"pil_info"in ee,Vt=j?null:a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[Oe&&cr&&a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors",onClick:()=>ne(I=>!I),disabled:!Oe,children:K?"Hide PIL info":"Show PIL info"}),a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[78px]",onClick:_i,disabled:!e||Ja,children:Li})]}),$n=c.useCallback(()=>{!Mn||!hn||ur(Mn,hn)},[Mn,hn,ur]),mn=c.useMemo(()=>{if(!ut||!en)return null;const I=si(ut),oe=si(en),he=new Map,me=new Map,Ye={maxDepth:mC,maxArray:pC,skipPilInfo:!Pt};ja(I,"",he,0,Ye),ja(oe,"",me,0,Ye);const dr=new Set([...he.keys(),...me.keys()]),Qe=[];let Kr=0,kt=0,ye=0;const Qt=Array.from(dr).sort((Pe,qr)=>Pe.localeCompare(qr));for(const Pe of Qt){if(!Pt&&(Pe==="pil_info"||Pe.startsWith("pil_info.")||Pe.startsWith("pil_info[")))continue;const qr=he.has(Pe),Ti=me.has(Pe);if(!qr&&Ti){kt+=1,Qe.push({key:Pe,kind:"onlyB",aText:"",bText:Rl(me.get(Pe))});continue}if(qr&&!Ti){Kr+=1,Qe.push({key:Pe,kind:"onlyA",aText:Rl(he.get(Pe)),bText:""});continue}const Ko=he.get(Pe),qo=me.get(Pe),Pi=Na(Ko),Ii=Na(qo);Pi!==Ii&&(ye+=1,Qe.push({key:Pe,kind:"different",aText:Rl(Ko),bText:Rl(qo)}))}const Wn=Qe.length>Wu;return{entries:Wn?Qe.slice(0,Wu):Qe,onlyA:Kr,onlyB:kt,different:ye,truncatedCount:Wn?Qe.length-Wu:0}},[ut,en,Pt]);c.useEffect(()=>{try{const I=localStorage.getItem(Im);if(!I)return;const oe=JSON.parse(I);if(!oe||typeof oe!="object")return;const he={};for(const me of hC)typeof oe[me]=="boolean"&&(he[me]=oe[me]);Object.keys(he).length>0&&p(me=>({...me,...he}))}catch{}},[]),c.useEffect(()=>{try{localStorage.setItem(Im,JSON.stringify(h))}catch{}},[h]),c.useEffect(()=>{try{const I=localStorage.getItem(Fm);I==="1"||I==="true"?R(!0):(I==="0"||I==="false")&&R(!1)}catch{}},[]),c.useEffect(()=>{try{localStorage.setItem(Fm,S?"1":"0")}catch{}},[S]);const Qr=c.useCallback((I,oe)=>{var he;oe&&((he=navigator.clipboard)==null||he.writeText(oe).then(()=>{ct(I),setTimeout(()=>ct(me=>me===I?null:me),1e3)}).catch(()=>{}))},[]),Un=c.useCallback((I,oe)=>{if(oe&&!Te[I]){const he=oe.offsetHeight;he&&A(me=>me[I]?me:{...me,[I]:he})}},[Te]),Bn="toolbar-offset absolute bottom-0 left-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20";return C?a.jsxs("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:[!j&&a.jsx("div",{className:"p-3 border-b border-border flex justify-center",children:a.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border w-[220px] h-[160px] bg-panel select-none",children:[it&&a.jsx("img",{src:it,alt:"thumb",className:"block w-full h-full object-contain"}),!!Es&&a.jsx("div",{className:"absolute top-1.5 left-1.5 bg-surface border border-border text-text text-xs px-1.5 py-0.5 rounded-md select-none",children:Es})]})}),a.jsxs(qi,{title:j?"Selection":"Item",open:h.overview,onToggle:()=>v("overview"),contentClassName:"px-3 pb-3 space-y-2",actions:d&&a.jsx("button",{type:"button",className:"btn btn-sm",onClick:d,disabled:!k,title:_??"Find similar",children:"Find similar"}),children:[j?a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Selected"}),a.jsxs("div",{className:"inspector-field-value",children:[t.length," files"]})]}),a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Total size"}),a.jsx("div",{className:"inspector-field-value",children:$u(ke)})]})]}):a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Filename"}),a.jsx("div",{className:"inspector-field-value break-all",title:Ot,children:Ot})]}),_&&a.jsx("div",{className:"text-[11px] text-muted",children:_})]}),r&&Ri&&a.jsx(qi,{title:"Compare Metadata",open:h.compare,onToggle:()=>v("compare"),actions:a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors",onClick:$n,disabled:fe==="loading",children:fe==="loading"?"Loading":"Reload"}),a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors",onClick:()=>tn(I=>!I),disabled:fe!=="loaded",children:Pt?"Hide PIL info":"Include PIL info"})]}),children:a.jsxs("div",{className:"space-y-2 text-[11px]",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px] text-muted",children:[a.jsxs("div",{children:[a.jsx("div",{className:"uppercase tracking-wide text-[10px]",children:"A"}),a.jsx("div",{className:"text-text break-all",title:Wo,children:Wo})]}),a.jsxs("div",{children:[a.jsx("div",{className:"uppercase tracking-wide text-[10px]",children:"B"}),a.jsx("div",{className:"text-text break-all",title:Ns,children:Ns})]})]}),fe==="loading"&&a.jsx("div",{className:"text-muted",children:"Loading metadata"}),fe==="error"&&Ue&&a.jsx("div",{className:"text-danger break-words",children:Ue}),fe==="loaded"&&mn&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-muted",children:[a.jsxs("span",{children:[mn.different," different  ",mn.onlyA," only A  ",mn.onlyB," only B"]}),a.jsx("span",{className:"text-[10px] uppercase tracking-wide",children:"Deep paths"})]}),mn.entries.length===0?a.jsx("div",{className:"text-muted",children:"No differences found."}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-[minmax(80px,_1fr)_minmax(0,_1fr)_minmax(0,_1fr)] gap-2 text-[10px] uppercase tracking-wide text-muted",children:[a.jsx("div",{children:"Path"}),a.jsx("div",{children:"A"}),a.jsx("div",{children:"B"})]}),mn.entries.map(I=>a.jsxs("div",{className:"grid grid-cols-[minmax(80px,_1fr)_minmax(0,_1fr)_minmax(0,_1fr)] gap-2",children:[a.jsx("div",{className:"text-[11px] text-muted font-mono break-all",children:I.key}),a.jsx("div",{className:"text-[11px] font-mono bg-surface-inset border border-border/60 rounded px-2 py-1 whitespace-pre-wrap break-words max-h-32 overflow-auto",children:I.aText}),a.jsx("div",{className:"text-[11px] font-mono bg-surface-inset border border-border/60 rounded px-2 py-1 whitespace-pre-wrap break-words max-h-32 overflow-auto",children:I.bText})]},I.key)),mn.truncatedCount>0&&a.jsxs("div",{className:"text-muted text-[11px]",children:["+",mn.truncatedCount," more differences not shown."]})]})]})]})}),a.jsxs(qi,{title:"Basics",open:h.basics,onToggle:()=>v("basics"),children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",role:"radiogroup","aria-label":"Star rating",children:[a.jsx("span",{className:"ui-kv-label w-16 shrink-0",children:j?"Rating (all)":"Rating"}),a.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(I=>{const oe=(Y??0)>=I;return a.jsx("button",{className:`w-6 h-6 flex items-center justify-center rounded-lg border border-border/60 bg-transparent text-[13px] ${oe?"text-star-active":"text-star-inactive"} hover:border-border hover:text-star-hover transition-colors`,onClick:()=>{const he=Y===I&&!j?null:I;j&&t.length?(l==null||l(t,he),_m(t,{star:he})):e&&(l==null||l([e],he),oy(e,{star:he}))},title:`${I} star${I>1?"s":""} (key ${I})`,"aria-label":`${I} star${I>1?"s":""}`,"aria-pressed":Y===I,children:oe?"":""},I)})})]}),!j&&Z&&ie.star&&a.jsxs("div",{className:"ui-banner ui-banner-danger mt-2 text-[11px] flex items-center justify-between gap-2",children:[a.jsx("span",{children:"Rating conflict."}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:fn,children:"Apply again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:st,children:"Keep theirs"})]})]}),!j&&Xe&&a.jsxs("div",{className:"text-[12px] space-y-1.5 leading-relaxed",children:[a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Qr("dimensions",`${Xe.w}${Xe.h}`),children:"Dimensions"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:I=>Un("dimensions",I),style:Te.dimensions?{minHeight:Te.dimensions}:void 0,children:bt==="dimensions"?"Copied":`${Xe.w}${Xe.h}`})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Qr("size",$u(Xe.size)),children:"Size"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:I=>Un("size",I),style:Te.size?{minHeight:Te.size}:void 0,children:bt==="size"?"Copied":$u(Xe.size)})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Qr("type",Xe.type),children:"Type"}),a.jsx("span",{className:"ui-kv-value break-all text-right inline-block min-w-[80px]",ref:I=>Un("type",I),style:Te.type?{minHeight:Te.type}:void 0,children:bt==="type"?"Copied":Xe.type})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Ht&&Qr("source",Ht),children:"Source"}),a.jsx("span",{className:"ui-kv-value inspector-value-clamp break-words text-right max-w-[70%] inline-block min-w-[80px]",ref:I=>Un("source",I),style:Te.source?{minHeight:Te.source}:void 0,title:Ht,children:bt==="source"?"Copied":Ht})]}),(()=>{const I=Xe.metrics||null;if(!I)return null;const oe=Object.entries(I).filter(([,ye])=>ye!=null);if(!oe.length)return null;const he=(u==null?void 0:u.kind)==="metric"?u.key:null,me=[...oe].sort(([ye],[Qt])=>ye.localeCompare(Qt));let Ye=me;if(he){const ye=me.findIndex(([Qt])=>Qt===he);ye>0&&(Ye=[me[ye],...me.slice(0,ye),...me.slice(ye+1)])}const dr=Ye.length>Bu,Kr=S||!dr?Ye:Ye.slice(0,Bu),kt=Ye.length-Bu;return a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"ui-subsection-title mb-1",children:"Metrics"}),a.jsxs("div",{className:"space-y-1",children:[Kr.map(([ye,Qt])=>{const Wn=he===ye;return a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:`w-24 shrink-0 ${Wn?"text-accent font-medium":"ui-kv-label"}`,children:ye}),a.jsx("span",{className:`ui-kv-value text-right ${Wn?"text-accent font-medium":""}`,children:cC(Qt)})]},ye)}),dr&&a.jsx("button",{type:"button",className:"text-[11px] text-muted underline underline-offset-2 hover:text-text",onClick:()=>R(ye=>!ye),"aria-expanded":S,children:S?"Show less":`+${kt} more`})]})]})})()]})]}),!j&&a.jsxs(qi,{title:"Metadata",open:h.metadata,onToggle:()=>v("metadata"),actions:Vt,children:[a.jsxs("div",{className:"relative",children:[ce&&a.jsxs("div",{className:"ui-json-key-toast",children:["Copied key: ",ce]}),a.jsx("pre",{className:`ui-code-block ui-code-block-resizable ${Qo} overflow-auto whitespace-pre-wrap`,onClick:Ls,children:Oe?a.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:Vo}}):Ef})]}),T&&a.jsx("div",{className:"text-[11px] text-danger mt-1 break-words",children:T})]}),a.jsxs(qi,{title:"Notes & Tags",open:h.notes,onToggle:()=>v("notes"),contentClassName:"px-3 pb-3 space-y-2",children:[!j&&Z&&(ie.tags||ie.notes)&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Conflicting edits detected."}),a.jsx("div",{className:"text-[11px] text-muted mt-0.5",children:"Your changes were not saved because this item was updated elsewhere."}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:fn,children:"Apply my changes again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:st,children:"Keep theirs"})]})]}),a.jsx("textarea",{className:"ui-textarea inspector-input w-full scrollbar-thin",placeholder:"Add notes",value:U,onChange:I=>Re(I.target.value),onBlur:dt,"aria-label":j?"Notes for selected items":"Notes"}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:j?"Tags (apply to all, comma-separated)":"Tags (comma-separated)"}),a.jsx("input",{className:"ui-input inspector-input w-full",placeholder:"tag1, tag2",value:N,onChange:I=>ft(I.target.value),onBlur:Ft,"aria-label":j?"Tags for selected items":"Tags"})]})]}),a.jsx("div",{className:Bn,onMouseDown:o})]}):a.jsx("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:a.jsx("div",{className:Bn,onMouseDown:o})})}function yC({open:e,embeddings:t,rejected:n=[],selectedPath:r,embeddingsLoading:s=!1,embeddingsError:i,onClose:o,onSearch:l}){const[u,d]=c.useState(""),[f,m]=c.useState("path"),[g,C]=c.useState(""),[w,E]=c.useState(""),[L,y]=c.useState("50"),[h,p]=c.useState(""),[v,S]=c.useState(null),[R,j]=c.useState(!1),k=c.useRef(null),_=c.useRef(null),N=c.useMemo(()=>t.find(T=>T.name===u)??t[0]??null,[t,u]);c.useEffect(()=>{e&&(S(null),t.length>0&&!t.some(T=>T.name===u)&&d(t[0].name),r?(m("path"),C(r)):(m("vector"),C("")))},[e,t,u,r]),c.useEffect(()=>{if(!e)return;const T=f==="vector"?_.current:k.current,de=window.requestAnimationFrame(()=>T==null?void 0:T.focus());return()=>window.cancelAnimationFrame(de)},[e,f]);const F=c.useCallback(async()=>{if(S(null),!t.length){S("No embeddings available for similarity search.");return}if(!N){S("Select an embedding to search.");return}const T=g.trim(),de=w.trim(),z=Number(L);if(!Number.isFinite(z)||z<=0){S("Top K must be a positive number.");return}const H=Math.min(1e3,Math.max(1,Math.floor(z))),J=h.trim()===""?null:Number(h);if(J!=null&&!Number.isFinite(J)){S("Min score must be a valid number.");return}if(f==="path"&&!T){S("Select an image path for the query.");return}if(f==="vector"&&!de){S("Paste a base64 vector for the query.");return}const ae={embedding:N.name,query_path:f==="path"?T:null,query_vector_b64:f==="vector"?de:null,top_k:H,min_score:J};j(!0);try{await l(ae),o()}catch(ce){ce instanceof Nn||ce instanceof Error?S(ce.message):S("Failed to run similarity search.")}finally{j(!1)}},[t.length,N,g,w,L,h,f,l,o]);c.useEffect(()=>{if(!e)return;const T=de=>{if(de.key==="Escape"){de.preventDefault(),o();return}(de.ctrlKey||de.metaKey)&&de.key==="Enter"&&(de.preventDefault(),F())};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[e,o,F]);const U=c.useCallback(()=>{var T;r&&(m("path"),C(r),(T=k.current)==null||T.focus())},[r]);if(!e)return null;const D=t.map(T=>({value:T.name,label:T.name})),ee=n.length>0,ue=n.slice(0,3);return a.jsx("div",{className:"fixed inset-0 z-[var(--z-overlay)] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",onClick:T=>{T.target===T.currentTarget&&o()},children:a.jsxs("div",{className:"w-full max-w-2xl rounded-lg border border-border bg-panel shadow-[0_20px_50px_rgba(0,0,0,0.55)]",onClick:T=>T.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Find similar",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-text",children:"Find similar"}),a.jsx("div",{className:"text-xs text-muted",children:"Search with embeddings"})]}),a.jsx("button",{className:"btn btn-sm",onClick:o,"aria-label":"Close",children:"Close"})]}),a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[i&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:i}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Embedding"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ed,{value:(N==null?void 0:N.name)??"",onChange:d,options:D,placeholder:s?"Loading embeddings...":"Select embedding",disabled:!t.length,triggerClassName:"min-w-[180px]"}),N&&a.jsxs("span",{className:"text-xs text-muted",children:[N.dimension," dims, ",N.metric,", ",N.dtype]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Query mode"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",className:`btn btn-sm ${f==="path"?"btn-active":""}`,onClick:()=>m("path"),"aria-pressed":f==="path",children:"Selected image"}),a.jsx("button",{type:"button",className:`btn btn-sm ${f==="vector"?"btn-active":""}`,onClick:()=>m("vector"),"aria-pressed":f==="vector",children:"Vector input"})]})]}),f==="path"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Image path"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:k,type:"text",className:"input w-full",value:g,onChange:T=>C(T.target.value),placeholder:r?"Selected image path":"Select an image first"}),a.jsx("button",{type:"button",className:"btn btn-sm",onClick:U,disabled:!r,title:r?"Use selected image":"Select an image first",children:"Use selected"})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Vector (base64 float32)"}),a.jsx("textarea",{ref:_,className:"ui-textarea w-full font-mono text-[11px]",rows:5,value:w,onChange:T=>E(T.target.value),placeholder:"Paste base64-encoded float32 vector"}),a.jsx("div",{className:"text-[11px] text-muted",children:"Base64 of little-endian float32. Length must match embedding dimension."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Top K"}),a.jsx("input",{type:"number",min:1,max:1e3,step:1,className:"input ui-number w-full",value:L,onChange:T=>y(T.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Min score"}),a.jsx("input",{type:"number",step:.01,className:"input ui-number w-full",value:h,onChange:T=>p(T.target.value),placeholder:"Optional"})]})]}),ee&&a.jsxs("div",{className:"ui-banner text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Skipped columns"}),a.jsxs("div",{className:"mt-1 space-y-1 text-muted",children:[ue.map(T=>a.jsxs("div",{children:[T.name,": ",T.reason]},T.name)),n.length>ue.length&&a.jsxs("div",{children:["+",n.length-ue.length," more"]})]})]}),v&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:v})]}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-border",children:[a.jsx("div",{className:"text-xs text-muted",children:N?`Metric: ${N.metric}`:"Metric: cosine"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:o,disabled:R,children:"Cancel"}),a.jsx("button",{className:"btn btn-sm btn-active",onClick:F,disabled:R||!t.length,children:R?"Searching...":"Find similar"})]})]})]})})}const ay=1,Ql=200,xC=5*6e4,wC=6e4,uy=(e,t)=>t!=null&&t.recursive?["folder",e,"recursive",t.page??ay,t.pageSize??Ql]:["folder",e];function cy(e){return e[0]!=="folder"||e[2]!=="recursive"||typeof e[1]!="string"||typeof e[3]!="number"||typeof e[4]!="number"?null:e}function SC(e){return cy(e)!==null}function CC(e,t,n=!0){if(!SC(e))return!0;const r=cy(e);if(r==null)return!1;const[,s,,i]=r;return i!==ay?!1:!!(s===t||n&&s==="/")}function bC(e,t,n=!0){return!Array.isArray(e)||e[0]!=="folder"?!1:!CC(e,t,n)}const kC=15e3;function EC(e,t){return ve.getFolder(e,t)}function fd(e,t=!1,n){const r=qa(),s={recursive:t,page:n==null?void 0:n.page,pageSize:n==null?void 0:n.pageSize,legacyRecursive:n==null?void 0:n.legacyRecursive},i=!!s.recursive;return Qa({queryKey:uy(e,s),queryFn:()=>EC(e,s),enabled:(n==null?void 0:n.enabled)??!0,staleTime:1e4,gcTime:i?wC:xC,retry:2,retryDelay:o=>Math.min(1e3*Math.pow(2,o),5e3),refetchOnWindowFocus:!1,refetchInterval:r?kC:!1,refetchIntervalInBackground:r})}const NC=(e,t)=>["search",e,t],jC=2e4;function MC(e,t){const n=qa();return Qa({enabled:!!e.trim(),queryKey:NC(e,t),queryFn:()=>ve.search(e,t),staleTime:3e3,gcTime:6e4,placeholderData:r=>r,retry:1,refetchInterval:n?jC:!1,refetchIntervalInBackground:n})}const RC=()=>["embeddings"];function LC(){return Qa({queryKey:RC(),queryFn:ve.getEmbeddings,staleTime:6e4,gcTime:5*6e4,retry:1,refetchOnWindowFocus:!1})}const _C=/^[\/@a-zA-Z0-9._\-\/]{1,512}$/,TC=[".jpg",".jpeg",".png",".webp"];function zn(e){try{const t=decodeURI(e||""),r=(t.startsWith("/")?t:`/${t}`).replace(/\/{2,}/g,"/"),s=r.length>1?r.replace(/\/$/,""):r;return _C.test(s)?s:"/"}catch{return"/"}}function Om(){return(window.location.hash||"").replace(/^#/,"")}function Dm(e){const t=zn(e),n=`#${encodeURI(t)}`;window.location.hash!==n&&(window.location.hash=n)}function Ll(e){const t=zn(e),n=`#${encodeURI(t)}`;if(window.location.hash!==n){const r=`${window.location.pathname}${window.location.search}${n}`;window.history.replaceState(window.history.state,"",r)}}function PC(e){const n=zn(e).toLowerCase();return TC.some(r=>n.endsWith(r))}function IC(e,t){const n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,""),s=[n,r].filter(Boolean).join("/");return s.startsWith("/")?s:`/${s}`}function zm(e){const n=zn(e).split("/").filter(Boolean);return n.length<=1?"/":"/"+n.slice(0,-1).join("/")}function FC(e){return zn(e).split("/").filter(Boolean).pop()||""}function OC(e){return e.endsWith("/_trash_")}const DC=new Set([0,1,2,3,4,5]),bf=new Set(["<","<=",">",">="]),zC=/^\d{4}-\d{2}-\d{2}$/;function AC(e,t){return!t||!t.and.length?e:e.filter(n=>$C(n,t.and))}function $C(e,t){for(const n of t)if(!UC(e,n))return!1;return!0}function UC(e,t){var n,r,s,i,o,l,u;if("stars"in t){const d=t.stars;if(!d||!d.length)return!0;const f=e.star??0;return d.includes(f)}if("starsIn"in t){const d=t.starsIn.values;if(!d||!d.length)return!0;const f=e.star??0;return d.includes(f)}if("starsNotIn"in t){const d=t.starsNotIn.values;if(!d||!d.length)return!0;const f=e.star??0;return!d.includes(f)}if("nameContains"in t){const d=(n=t.nameContains.value)==null?void 0:n.trim();return d?(e.name??"").toLowerCase().includes(d.toLowerCase()):!0}if("nameNotContains"in t){const d=(r=t.nameNotContains.value)==null?void 0:r.trim();return d?!(e.name??"").toLowerCase().includes(d.toLowerCase()):!0}if("commentsContains"in t){const d=(s=t.commentsContains.value)==null?void 0:s.trim();if(!d)return!0;const f=e.comments??"";return f?f.toLowerCase().includes(d.toLowerCase()):!1}if("commentsNotContains"in t){const d=(i=t.commentsNotContains.value)==null?void 0:i.trim();if(!d)return!0;const f=e.comments??"";return f?!f.toLowerCase().includes(d.toLowerCase()):!1}if("urlContains"in t){const d=(o=t.urlContains.value)==null?void 0:o.trim();if(!d)return!0;const f=e.source??e.url??"";return f?f.toLowerCase().includes(d.toLowerCase()):!1}if("urlNotContains"in t){const d=(l=t.urlNotContains.value)==null?void 0:l.trim();if(!d)return!0;const f=e.source??e.url??"";return f?!f.toLowerCase().includes(d.toLowerCase()):!1}if("dateRange"in t){const{from:d,to:f}=t.dateRange;if(!d&&!f)return!0;if(!e.addedAt)return!1;const m=Date.parse(e.addedAt);if(Number.isNaN(m))return!1;const g=Um(d,!1),C=Um(f,!0);return!(g!=null&&m<g||C!=null&&m>C)}if("widthCompare"in t){const{op:d,value:f}=t.widthCompare;if(!Number.isFinite(f))return!0;const m=e.w;return!Number.isFinite(m)||m<=0?!1:Bm(m,d,f)}if("heightCompare"in t){const{op:d,value:f}=t.heightCompare;if(!Number.isFinite(f))return!0;const m=e.h;return!Number.isFinite(m)||m<=0?!1:Bm(m,d,f)}if("metricRange"in t){const{key:d,min:f,max:m}=t.metricRange,g=(u=e.metrics)==null?void 0:u[d];return!(g==null||g<f||g>m)}return!0}function hd(e){if(!e||typeof e!="object")return null;const t=e.and;if(!Array.isArray(t))return null;const n=[];for(const r of t){const s=nb(r);s&&n.push(s)}return{and:n}}function Am(e){var r;const t=e.and.find(s=>"stars"in s),n=e.and.find(s=>"starsIn"in s);return(r=n==null?void 0:n.starsIn)!=null&&r.values?n.starsIn.values:(t==null?void 0:t.stars)??[]}function Hu(e,t){return dy(e,t)}function BC(e){var n;const t=e.and.find(r=>"starsIn"in r);return((n=t==null?void 0:t.starsIn)==null?void 0:n.values)??[]}function dy(e,t){const n=co(t),r=e.and.filter(s=>!("starsIn"in s)&&!("stars"in s));return n.length?{and:[{starsIn:{values:n}},...r]}:{and:r}}function WC(e){var n;const t=e.and.find(r=>"starsNotIn"in r);return((n=t==null?void 0:t.starsNotIn)==null?void 0:n.values)??[]}function fy(e,t){const n=co(t),r=e.and.filter(s=>!("starsNotIn"in s));return n.length?{and:[{starsNotIn:{values:n}},...r]}:{and:r}}function HC(e){var n;const t=e.and.find(r=>"nameContains"in r);return((n=t==null?void 0:t.nameContains)==null?void 0:n.value)??null}function hy(e,t){const n=ln(t),r=e.and.filter(s=>!("nameContains"in s));return n?{and:[{nameContains:{value:n}},...r]}:{and:r}}function VC(e){var n;const t=e.and.find(r=>"nameNotContains"in r);return((n=t==null?void 0:t.nameNotContains)==null?void 0:n.value)??null}function my(e,t){const n=ln(t),r=e.and.filter(s=>!("nameNotContains"in s));return n?{and:[{nameNotContains:{value:n}},...r]}:{and:r}}function QC(e){var n;const t=e.and.find(r=>"commentsContains"in r);return((n=t==null?void 0:t.commentsContains)==null?void 0:n.value)??null}function py(e,t){const n=ln(t),r=e.and.filter(s=>!("commentsContains"in s));return n?{and:[{commentsContains:{value:n}},...r]}:{and:r}}function KC(e){var n;const t=e.and.find(r=>"commentsNotContains"in r);return((n=t==null?void 0:t.commentsNotContains)==null?void 0:n.value)??null}function gy(e,t){const n=ln(t),r=e.and.filter(s=>!("commentsNotContains"in s));return n?{and:[{commentsNotContains:{value:n}},...r]}:{and:r}}function qC(e){var n;const t=e.and.find(r=>"urlContains"in r);return((n=t==null?void 0:t.urlContains)==null?void 0:n.value)??null}function vy(e,t){const n=ln(t),r=e.and.filter(s=>!("urlContains"in s));return n?{and:[{urlContains:{value:n}},...r]}:{and:r}}function YC(e){var n;const t=e.and.find(r=>"urlNotContains"in r);return((n=t==null?void 0:t.urlNotContains)==null?void 0:n.value)??null}function yy(e,t){const n=ln(t),r=e.and.filter(s=>!("urlNotContains"in s));return n?{and:[{urlNotContains:{value:n}},...r]}:{and:r}}function GC(e){const t=e.and.find(n=>"dateRange"in n);return(t==null?void 0:t.dateRange)??null}function md(e,t){const n=Ma((t==null?void 0:t.from)??null),r=Ma((t==null?void 0:t.to)??null),s=e.and.filter(i=>!("dateRange"in i));return!n&&!r?{and:s}:{and:[{dateRange:{...n?{from:n}:{},...r?{to:r}:{}}},...s]}}function XC(e){const t=e.and.find(n=>"widthCompare"in n);return(t==null?void 0:t.widthCompare)??null}function Kl(e,t){const n=e.and.filter(r=>!("widthCompare"in r));return!t||!Number.isFinite(t.value)||!bf.has(t.op)?{and:n}:{and:[{widthCompare:{op:t.op,value:t.value}},...n]}}function JC(e){const t=e.and.find(n=>"heightCompare"in n);return(t==null?void 0:t.heightCompare)??null}function ql(e,t){const n=e.and.filter(r=>!("heightCompare"in r));return!t||!Number.isFinite(t.value)||!bf.has(t.op)?{and:n}:{and:[{heightCompare:{op:t.op,value:t.value}},...n]}}function ZC(e,t){const n=e.and.find(r=>"metricRange"in r&&r.metricRange.key===t);return(n==null?void 0:n.metricRange)??null}function eb(e,t,n){const r=e.and.filter(s=>!("metricRange"in s&&s.metricRange.key===t));return n?{and:[{metricRange:{key:t,min:n.min,max:n.max}},...r]}:{and:r}}function tb(e){const t=hd(e);return t?t.and.length:0}function nb(e){var t,n,r,s,i,o,l,u;if(!e||typeof e!="object")return null;if("stars"in e){const d=co(e.stars);return d.length?{starsIn:{values:d}}:null}if("starsIn"in e){const d=co((t=e.starsIn)==null?void 0:t.values);return d.length?{starsIn:{values:d}}:null}if("starsNotIn"in e){const d=co((n=e.starsNotIn)==null?void 0:n.values);return d.length?{starsNotIn:{values:d}}:null}if("nameContains"in e){const d=ln((r=e.nameContains)==null?void 0:r.value);return d?{nameContains:{value:d}}:null}if("nameNotContains"in e){const d=ln((s=e.nameNotContains)==null?void 0:s.value);return d?{nameNotContains:{value:d}}:null}if("commentsContains"in e){const d=ln((i=e.commentsContains)==null?void 0:i.value);return d?{commentsContains:{value:d}}:null}if("commentsNotContains"in e){const d=ln((o=e.commentsNotContains)==null?void 0:o.value);return d?{commentsNotContains:{value:d}}:null}if("urlContains"in e){const d=ln((l=e.urlContains)==null?void 0:l.value);return d?{urlContains:{value:d}}:null}if("urlNotContains"in e){const d=ln((u=e.urlNotContains)==null?void 0:u.value);return d?{urlNotContains:{value:d}}:null}if("dateRange"in e){const d=e.dateRange,f=Ma((d==null?void 0:d.from)??null),m=Ma((d==null?void 0:d.to)??null);return!f&&!m?null:{dateRange:{...f?{from:f}:{},...m?{to:m}:{}}}}if("widthCompare"in e){const d=e.widthCompare,f=$m(d==null?void 0:d.op,d==null?void 0:d.value);return f?{widthCompare:f}:null}if("heightCompare"in e){const d=e.heightCompare,f=$m(d==null?void 0:d.op,d==null?void 0:d.value);return f?{heightCompare:f}:null}if("metricRange"in e){const d=e.metricRange;if(!d||typeof d!="object")return null;const f=typeof d.key=="string"?d.key:"",m=pd(d.min),g=pd(d.max);return!f||m==null||g==null||m>g?null:{metricRange:{key:f,min:m,max:g}}}return null}function co(e){if(!Array.isArray(e))return[];const t=[],n=new Set;for(const r of e){const s=typeof r=="number"?r:typeof r=="string"?Number(r):NaN;!Number.isInteger(s)||!DC.has(s)||n.has(s)||(n.add(s),t.push(s))}return t}function ln(e){if(typeof e!="string")return null;const t=e.trim();return t||null}function Ma(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=Date.parse(t);return Number.isNaN(n)?null:t}function $m(e,t){if(typeof e!="string"||!bf.has(e))return null;const n=pd(t);return n==null?null:{op:e,value:n}}function Um(e,t){if(!e)return null;const n=e.trim();if(!n)return null;const r=Date.parse(n);return Number.isNaN(r)?null:t&&zC.test(n)?r+24*60*60*1e3-1:r}function Bm(e,t,n){switch(t){case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;default:return!0}}function pd(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function Wm(e){return e.addedAt?Date.parse(e.addedAt):0}function Ra(e,t){return e.name.localeCompare(t.name)}function rb(e,t){const n=Wm(e),r=Wm(t);return n===r?Ra(e,t):n-r}function sb(e){return(t,n)=>{var i,o;const r=(i=t.metrics)==null?void 0:i[e],s=(o=n.metrics)==null?void 0:o[e];return r==null&&s==null?Ra(t,n):r==null?1:s==null?-1:r===s?Ra(t,n):r-s}}function Hm(e,t){return AC(e,t)}function ib(e){let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function ob(e,t){const n=ib(t||1),r=[...e];for(let s=r.length-1;s>0;s-=1){const i=Math.floor(n()*(s+1));[r[s],r[i]]=[r[i],r[s]]}return r}function lb(e,t,n){if(t.kind==="builtin"&&t.key==="random"){const i=n??Date.now();return ob(e,i)}let r=rb;t.kind==="metric"?r=sb(t.key):t.key==="name"&&(r=Ra);const s=[...e].sort(r);return t.dir==="desc"?s.reverse():s}const Vm="leftW.folders",Qm="leftW.metrics",ab="leftW",Km="rightW";function ub(e,t){const[n,r]=c.useState(240),[s,i]=c.useState(320),[o,l]=c.useState(240),u=t==="metrics"?s:n,d=c.useRef(u),f=c.useRef(o);return c.useEffect(()=>{d.current=u},[u]),c.useEffect(()=>{f.current=o},[o]),c.useEffect(()=>{try{const C=window.localStorage,w=Number(C.getItem(Vm)??C.getItem(ab));Number.isFinite(w)&&w>0&&r(w);const E=Number(C.getItem(Qm));Number.isFinite(E)&&E>0&&i(E);const L=Number(C.getItem(Km));Number.isFinite(L)&&L>0&&l(L)}catch{}},[]),{leftW:u,rightW:o,onResizeLeft:C=>{C.preventDefault();const w=e.current;if(!w)return;const E=w.getBoundingClientRect(),L=t==="metrics"?Qm:Vm;let y=d.current;const h=v=>{const S=v.clientX-E.left,R=200,j=Math.max(R,E.width-f.current-200),k=Math.min(Math.max(S,R),j);y=k,t==="metrics"?i(k):r(k)},p=()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",p);try{window.localStorage.setItem(L,String(y))}catch{}};window.addEventListener("mousemove",h),window.addEventListener("mouseup",p)},onResizeRight:C=>{C.preventDefault();const w=e.current;if(!w)return;const E=w.getBoundingClientRect();let L=f.current;const y=p=>{const v=p.clientX-E.left,S=E.width-v,R=240,j=Math.max(R,E.width-d.current-200),k=Math.min(Math.max(S,R),j);L=k,f.current=k,l(k)},h=()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",h);try{window.localStorage.setItem(Km,String(L))}catch{}};window.addEventListener("mousemove",y),window.addEventListener("mouseup",h)}}}function cb({x:e,y:t,items:n}){return a.jsx("div",{className:"dropdown-panel fixed",role:"menu",style:{left:e,top:t,minWidth:180},onClick:r=>r.stopPropagation(),children:n.map((r,s)=>a.jsxs("button",{className:`dropdown-item w-full ${r.danger?"text-danger hover:text-danger":""}`,role:"menuitem","aria-disabled":r.disabled,disabled:r.disabled,onClick:i=>{i.stopPropagation(),r.disabled||r.onClick()},children:[r.icon&&a.jsx("span",{className:"shrink-0",children:r.icon}),a.jsx("span",{children:r.label})]},s))})}function qm(e){return JSON.stringify(e,null,2)}function Ym(e){const t=s=>'"'+s.replaceAll('"','""')+'"',n="path,folder,name,star,type,size,width,height,tags,notes",r=e.map(s=>{const i=(s.tags||[]).join(" "),o=s.notes||"";return[s.path,s.folder,s.name,String(s.star??""),s.type??"",s.size??"",s.width??"",s.height??"",i,o].map(l=>t(String(l))).join(",")});return[n,...r].join(`
`)}function Gm(e){return e.map(t=>{const n=t.path.split("/").filter(Boolean);n.pop();const r=n.length?`/${n.join("/")}`:"/";return{path:t.path,folder:r,name:t.name,star:t.star??null,type:t.type,size:t.size,width:t.w,height:t.h}})}function db(e,t=250){const[n,r]=Gl.useState(e);return Gl.useEffect(()=>{const s=window.setTimeout(()=>r(e),Math.max(0,t));return()=>window.clearTimeout(s)},[e,t]),n}const xy="application/x-lenslet-paths",fb='[role="treeitem"].drop-target';function Xm(e){var n;return Array.from(((n=e.dataTransfer)==null?void 0:n.types)||[]).includes(xy)}function hb(e){document.querySelectorAll(fb).forEach(t=>{t!==e&&t.classList.remove("drop-target")})}function Jm(e){hb(e),e.classList.add("drop-target")}function Zm(e){return e.startsWith("/")?e:`/${e}`}function mb({path:e,isLeaf:t}){const n=Vr(),r=c.useCallback(l=>{Xm(l)&&(l.preventDefault(),t&&Jm(l.currentTarget))},[t]),s=c.useCallback(l=>{!t||!Xm(l)||(l.preventDefault(),Jm(l.currentTarget))},[t]),i=c.useCallback(l=>{const u=l.currentTarget,d=document.elementFromPoint(l.clientX,l.clientY);d&&u.contains(d)||u.classList.remove("drop-target")},[]),o=c.useCallback(async l=>{const u=l.dataTransfer;if(!u)return;l.preventDefault(),l.currentTarget.classList.remove("drop-target");const d=u.getData(xy),m=(d?JSON.parse(d):[]).filter(Boolean);if(!m.length)return;let g=m[0].split("/").slice(0,-1).join("/")||"/";g=Zm(g);const C=Zm(e);try{for(const w of m)await ve.moveFile(w,C);n.invalidateQueries({queryKey:["folder",g]}),n.invalidateQueries({queryKey:["folder",C]}),n.setQueryData(["folder",g],w=>!w||!Array.isArray(w.items)?w:{...w,items:w.items.filter(E=>!m.includes(E.path))})}catch{}},[e,n]);return{onDragOver:r,onDragEnter:s,onDragLeave:i,onDrop:o}}const pb='[role="tree"] [role="treeitem"]';function gb(){return Array.from(document.querySelectorAll(pb))}function vb(e,t){var i;const n=gb(),r=n.findIndex(o=>o===e);if(r===-1)return;let s=r;t==="ArrowDown"?s=Math.min(n.length-1,r+1):t==="ArrowUp"?s=Math.max(0,r-1):t==="Home"?s=0:t==="End"&&(s=n.length-1),(i=n[s])==null||i.focus()}function yb({path:e,isLeaf:t,isExpanded:n,setExpanded:r,onOpen:s}){return c.useCallback(i=>{if(i.key==="Enter"){i.preventDefault(),s(e);return}if(i.key==="ArrowRight"){!t&&!n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.add(e),l}));return}if(i.key==="ArrowLeft"){!t&&n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.delete(e),l}));return}(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="Home"||i.key==="End")&&(i.preventDefault(),vb(i.currentTarget,i.key))},[e,t,n,r,s])}function xb({current:e,roots:t,data:n,onOpen:r,onResize:s,onContextMenu:i,countVersion:o,className:l,showResizeHandle:u=!0}){const[d,f]=c.useState(new Set(["/"])),m=c.useRef(new Map),g=c.useRef(new Map),C=Vr(),w=c.useCallback(async L=>{const y=zn(L||"/"),h=m.current,p=g.current,v=h.get(y);if(v!==void 0)return v;const S=C.getQueryData(uy(y,{recursive:!0}));if(S){const k=S.totalItems??S.items.length;return h.set(y,k),k}const R=p.get(y);if(R)return R;const j=(async()=>{try{const k=await ve.getFolder(y,{recursive:!0}),_=k.totalItems??k.items.length;return h.set(y,_),_}finally{p.delete(y)}})();return p.set(y,j),j},[C]);c.useEffect(()=>{m.current.clear(),g.current.clear()},[o]),c.useEffect(()=>{const L=e.split("/").filter(Boolean),y=["/"];let h="";for(const p of L)h=h?`${h}/${p}`:`/${p}`,y.push(h);f(p=>{const v=new Set(p);for(const S of y)v.add(S);return v})},[e]);const E=l??"h-full overflow-auto bg-panel scrollbar-thin";return a.jsxs("div",{className:E,children:[a.jsx("div",{className:"p-1",role:"tree","aria-label":"Folders",children:t.map(L=>a.jsx(wy,{path:L.path,label:L.label,depth:0,current:e,expanded:d,setExpanded:f,onOpen:r,onContextMenu:i,initial:n,getSubtreeCount:w,countVersion:o},L.path))}),u&&a.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 left-[calc(var(--left)-3px)] hover:bg-accent/20",onMouseDown:s})]})}function wy({path:e,label:t,depth:n,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,initial:u,getSubtreeCount:d,countVersion:f}){var N;const m=s.has(e),g=r===e,C=e==="/"||m||g,{data:w}=fd(e,!1,{enabled:C}),E=u&&e===u.path?u:w,y=!!E?E.dirs.length===0:!1,[h,p]=c.useState(E?E.items.length:null),v=yb({path:e,isLeaf:y,isExpanded:m,setExpanded:i,onOpen:o}),{onDragOver:S,onDragEnter:R,onDragLeave:j,onDrop:k}=mb({path:e,isLeaf:y}),_=F=>{F.stopPropagation(),i(U=>{const D=new Set(U);return D.has(e)?D.delete(e):D.add(e),D})};return c.useEffect(()=>{let F=!1;if(!E){p(null);return}if(p(E.items.length),!!(m&&(n>0||g)))return d(e).then(D=>{F||p(D)}).catch(D=>{F||console.warn(`Failed to compute subtree count for ${e}:`,D)}),()=>{F=!0}},[E,e,d,f,m,n,g]),a.jsxs("div",{children:[a.jsxs("div",{className:`flex items-center gap-1.5 py-0.5 px-2 rounded-md cursor-pointer min-h-[28px] outline-none transition-colors duration-75 ${g?"bg-accent/20 text-accent font-medium":"hover:bg-white/5 text-text"}`,role:"treeitem","aria-level":n+1,"aria-expanded":y?void 0:m,"aria-selected":g,tabIndex:g?0:-1,style:{paddingLeft:8+n*14},onClick:()=>o(e),onContextMenu:F=>{F.preventDefault(),F.stopPropagation(),l&&l(F,e)},onKeyDown:v,onDragOver:S,onDragEnter:R,onDragLeave:j,onDrop:k,children:[a.jsx("span",{className:"w-4 text-center opacity-60 hover:opacity-100 text-[10px]",onClick:_,children:m?"":""}),a.jsx("span",{className:"flex-1 overflow-hidden truncate text-sm",title:t,children:iC(t,28)}),h!==null&&a.jsx("span",{className:"text-[10px] opacity-50 bg-white/5 border border-white/5 rounded px-1.5 min-w-[24px] text-center",children:h})]}),m&&((N=E==null?void 0:E.dirs)==null?void 0:N.map(F=>a.jsx(wy,{path:IC(e,F.name),label:F.name,depth:n+1,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,getSubtreeCount:d,countVersion:f},F.name)))]})}const ss=40,wb=12,ep=[5,4,3,2,1],tp=["<","<=",">",">="];function Sb({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l,onChangeFilters:u}){const d=r&&r.length?a.jsx(Cb,{selectedItems:r,metricKeys:n}):null,f=a.jsx(bb,{filters:o,onChangeFilters:u});return n.length?a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[d,a.jsx(kb,{items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}),f]}):a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[d,f,a.jsx("div",{className:"p-4 text-sm text-muted",children:"No metrics found in this dataset."})]})}function Cb({selectedItems:e,metricKeys:t}){const n=c.useMemo(()=>{if(!e.length)return null;const u=new Map;for(const m of e){const g=m.metrics;if(g)for(const[C,w]of Object.entries(g)){if(w==null||Number.isNaN(w))continue;const E=u.get(C);E?E.push(w):u.set(C,[w])}}return u.size?{entries:(t.length?t.filter(m=>u.has(m)):Array.from(u.keys()).sort()).map(m=>{const g=u.get(m)??[],C=Math.min(...g),w=Math.max(...g),E=g.reduce((L,y)=>L+y,0)/Math.max(1,g.length);return{key:m,value:g[0],min:C,max:w,avg:E,count:g.length}}),totalItems:e.length}:null},[e,t]);if(!n)return null;const{entries:r,totalItems:s}=n,i=r.slice(0,wb),o=r.length-i.length,l=s>1;return a.jsxs("div",{className:"ui-card",children:[a.jsxs("div",{className:"ui-card-header",children:[a.jsx("div",{className:"ui-section-title",children:"Selected metrics"}),a.jsxs("div",{className:"text-[11px] text-muted",children:[s," item",s===1?"":"s"]})]}),a.jsxs("div",{className:"space-y-1 text-[12px]",children:[i.map(u=>a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-muted w-28 shrink-0 truncate",title:u.key,children:u.key}),a.jsxs("span",{className:"font-mono text-text text-right tabular-nums",children:[l?`${Kt(u.min)}  ${Kt(u.max)}`:Kt(u.value),l&&a.jsxs("span",{className:"text-[11px] text-muted ml-2",children:["avg ",Kt(u.avg),u.count!==s?`  ${u.count}/${s}`:""]})]})]},u.key)),o>0&&a.jsxs("div",{className:"text-[11px] text-muted",children:["+",o," more"]})]})]})}function bb({filters:e,onChangeFilters:t}){const n=c.useMemo(()=>BC(e),[e]),r=c.useMemo(()=>WC(e),[e]),s=c.useMemo(()=>HC(e)??"",[e]),i=c.useMemo(()=>VC(e)??"",[e]),o=c.useMemo(()=>QC(e)??"",[e]),l=c.useMemo(()=>KC(e)??"",[e]),u=c.useMemo(()=>qC(e)??"",[e]),d=c.useMemo(()=>YC(e)??"",[e]),f=c.useMemo(()=>GC(e)??{},[e]),m=c.useMemo(()=>ap(f.from),[f.from]),g=c.useMemo(()=>ap(f.to),[f.to]),C=c.useMemo(()=>XC(e),[e]),w=c.useMemo(()=>JC(e),[e]),[E,L]=c.useState((C==null?void 0:C.op)??">="),[y,h]=c.useState((w==null?void 0:w.op)??">=");c.useEffect(()=>{C!=null&&C.op&&L(C.op)},[C==null?void 0:C.op]),c.useEffect(()=>{w!=null&&w.op&&h(w.op)},[w==null?void 0:w.op]);const p=(v,S)=>{const R=new Set(n),j=new Set(r);v==="include"?R.has(S)?R.delete(S):(R.add(S),j.delete(S)):j.has(S)?j.delete(S):(j.add(S),R.delete(S));let k=dy(e,Array.from(R));k=fy(k,Array.from(j)),t(k)};return a.jsxs("div",{className:"ui-card",children:[a.jsx("div",{className:"ui-section-title mb-3",children:"Attributes"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Rating"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Include"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[ep.map(v=>{const S=n.includes(v);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${S?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",v),"aria-pressed":S,title:`Include ${v} star${v>1?"s":""}`,children:[v,""]},`stars-in-${v}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${n.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",0),"aria-pressed":n.includes(0),title:"Include unrated",children:"None"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Exclude"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[ep.map(v=>{const S=r.includes(v);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${S?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",v),"aria-pressed":S,title:`Exclude ${v} star${v>1?"s":""}`,children:[v,""]},`stars-out-${v}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${r.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",0),"aria-pressed":r.includes(0),title:"Exclude unrated",children:"None"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Filename"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:s,placeholder:"e.g. draft",onChange:v=>t(hy(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:i,placeholder:"e.g. v1",onChange:v=>t(my(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Comments"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:o,placeholder:"e.g. hero",onChange:v=>t(py(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:l,placeholder:"e.g. todo",onChange:v=>t(gy(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"URL"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:u,placeholder:"e.g. s3://bucket",onChange:v=>t(vy(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:d,placeholder:"e.g. http://",onChange:v=>t(yy(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Date Added"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"From"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:m,onChange:v=>t(md(e,{from:v.target.value||null,to:f.to??null}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"To"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:g,onChange:v=>t(md(e,{from:f.from??null,to:v.target.value||null}))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Dimensions"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Width"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:E,onChange:v=>{const S=v.target.value;L(S),C&&t(Kl(e,{op:S,value:C.value}))},children:tp.map(v=>a.jsx("option",{value:v,children:v},`w-${v}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:C?String(C.value):"",min:0,placeholder:"px",onChange:v=>{const S=v.target.value;if(!S){t(Kl(e,null));return}const R=Number(S);Number.isFinite(R)&&t(Kl(e,{op:E,value:R}))}})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Height"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:y,onChange:v=>{const S=v.target.value;h(S),w&&t(ql(e,{op:S,value:w.value}))},children:tp.map(v=>a.jsx("option",{value:v,children:v},`h-${v}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:w?String(w.value):"",min:0,placeholder:"px",onChange:v=>{const S=v.target.value;if(!S){t(ql(e,null));return}const R=Number(S);Number.isFinite(R)&&t(ql(e,{op:y,value:R}))}})]})]})]})]})]})]})}function kb({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}){const[u,d]=c.useState(!1),f=s&&n.includes(s)?s:n[0];return a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("label",{className:"ui-label",children:"Metric"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-[11px]",onClick:()=>d(m=>!m),"aria-pressed":u,children:u?"Show one":"Show all"})]}),u?a.jsx("div",{className:"ui-input ui-input-readonly w-full flex items-center text-xs",children:"All metrics"}):a.jsx("select",{className:"ui-select w-full",value:f,onChange:m=>i(m.target.value),children:n.map(m=>a.jsx("option",{value:m,children:m},m))})]}),u?a.jsx("div",{className:"space-y-3",children:n.map(m=>a.jsx(np,{metricKey:m,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l,showTitle:!0},m))}):f?a.jsx(np,{metricKey:f,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l}):a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]})}function np({items:e,filteredItems:t,metricKey:n,selectedItems:r,filters:s,onChangeRange:i,showTitle:o=!1}){const l=c.useMemo(()=>rp(e,n),[e,n]),u=c.useMemo(()=>Vu(l,ss),[l]),d=c.useMemo(()=>rp(t,n),[t,n]),f=c.useMemo(()=>u?Vu(d,ss,u):null,[d,u]),m=ZC(s,n),[g,C]=c.useState(null),[w,E]=c.useState(!1),L=c.useRef(null),y=c.useRef(null),h=c.useRef(!1),p=c.useRef(null),[v,S]=c.useState(null),[R,j]=c.useState(""),[k,_]=c.useState(""),[N,F]=c.useState(null),U=g??m,D=u?{min:u.min,max:u.max}:null,ee=c.useMemo(()=>{var K;if(!(r!=null&&r.length))return[];const Q=[];for(const ne of r){const fe=(K=ne.metrics)==null?void 0:K[n];fe==null||Number.isNaN(fe)||Q.push(fe)}return Q},[r,n]),ue=ee.length===1?ee[0]:null,T=c.useMemo(()=>!u||ee.length<2?null:Vu(ee,ss,u),[ee,u]);c.useEffect(()=>{if(!m||!D){N!=="min"&&j(m?mr(m.min):""),N!=="max"&&_(m?mr(m.max):"");return}if(N!=="min"){const Q=Fs(m.min,D.min)?"":mr(m.min);j(Q)}if(N!=="max"){const Q=Fs(m.max,D.max)?"":mr(m.max);_(Q)}},[m,D,N]),c.useEffect(()=>{S(null)},[n,D==null?void 0:D.min,D==null?void 0:D.max]);const de=Q=>{var fe;if(!D)return null;const K=(fe=p.current)==null?void 0:fe.getBoundingClientRect();if(!K)return null;const ne=kf((Q.clientX-K.left)/K.width);return D.min+(D.max-D.min)*ne},z=(Q,K)=>{if(!D)return;const ne=L.current??Q,fe=ip(ne,Q);C(fe),K&&i(n,fe)},H=Q=>{var ne;if(!D)return;Q.preventDefault();const K=de(Q);K!=null&&(E(!0),C(null),L.current=K,y.current=Q.clientX,h.current=!1,S(K),(ne=p.current)==null||ne.setPointerCapture(Q.pointerId))},J=Q=>{const K=de(Q);if(K==null){w||S(null);return}if(S(K),w){const ne=y.current;if(!h.current&&ne!=null){if(Math.abs(Q.clientX-ne)<4)return;h.current=!0}h.current&&z(K,!1)}},ae=Q=>{var ne;if(!w)return;E(!1),(ne=p.current)==null||ne.releasePointerCapture(Q.pointerId);const K=de(Q);h.current&&K!=null?(S(K),z(K,!0)):m&&i(n,null),L.current=null,y.current=null,h.current=!1,setTimeout(()=>C(null),0)},ce=(Q,K)=>{if(!D)return;const ne=op(Q),fe=op(K);if(!ne.valid||!fe.valid){ne.valid||j(m?mr(m.min):""),fe.valid||_(m?mr(m.max):"");return}if(ne.value==null&&fe.value==null){i(n,null);return}const Me=ne.value??D.min,Ue=fe.value??D.max,Ve=lp(Me,D.min,D.max),ut=lp(Ue,D.min,D.max),nt=ip(Ve,ut);if(Fs(nt.min,D.min)&&Fs(nt.max,D.max)){i(n,null);return}i(n,nt)};if(!u||!D)return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]});const Le=ee.length;return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mb-2 tabular-nums",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{children:["Population: ",u.count]}),a.jsxs("span",{children:["Filtered: ",(f==null?void 0:f.count)??0]}),Le>1&&a.jsxs("span",{className:"text-text",children:["Selected: ",Le]})]}),ue!=null&&a.jsxs("span",{className:"text-text",children:["Selected: ",Kt(ue)]})]}),a.jsxs("svg",{ref:p,viewBox:`0 0 ${ss} 100`,preserveAspectRatio:"none",className:"w-full h-28 cursor-crosshair rounded-md bg-surface-inset",onPointerDown:H,onPointerMove:J,onPointerUp:ae,onPointerLeave:()=>S(null),children:[Qu(u.bins,"#2e3a4b"),f&&Qu(f.bins,"#3a8fff"),T&&Qu(T.bins,"#f59e0b",{opacity:.55}),U&&Eb(U,D),ue!=null&&sp(ue,D,{color:"var(--highlight)",strokeWidth:.7}),v!=null&&sp(v,D,{color:"rgba(255,255,255,0.75)",strokeWidth:.5,dashed:!0})]}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mt-2 tabular-nums",children:[a.jsx("span",{children:Kt(D==null?void 0:D.min)}),a.jsxs("div",{className:"flex flex-col items-center text-center leading-tight",children:[U?a.jsx("span",{className:"text-text",children:Fs(U.min,D.min)?` ${Kt(U.max)}`:Fs(U.max,D.max)?` ${Kt(U.min)}`:`${Kt(U.min)}  ${Kt(U.max)}`}):v!=null?a.jsxs("span",{className:"text-text",children:["Cursor: ",Kt(v)]}):a.jsx("span",{children:"Drag to filter"}),U&&v!=null&&a.jsxs("span",{className:"text-[11px] text-muted",children:["Cursor: ",Kt(v)]})]}),a.jsx("span",{children:Kt(D==null?void 0:D.max)})]}),a.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-2 mt-3 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Min"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:R,placeholder:mr(D.min),onFocus:()=>F("min"),onBlur:()=>{F(null),ce(R,k)},onChange:Q=>j(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&Q.currentTarget.blur()}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Max"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:k,placeholder:mr(D.max),onFocus:()=>F("max"),onBlur:()=>{F(null),ce(R,k)},onChange:Q=>_(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&Q.currentTarget.blur()}})]}),a.jsx("button",{className:"btn btn-xs btn-ghost text-muted hover:text-text",onClick:()=>i(n,null),children:"Clear"})]})]})}function Vu(e,t,n){if(!e.length)return null;const r=n?n.min:Math.min(...e);let s=n?n.max:Math.max(...e);r===s&&(s=r+1);const i=new Array(t).fill(0),o=t/(s-r);for(const l of e){const u=Math.max(0,Math.min(t-1,Math.floor((l-r)*o)));i[u]+=1}return{bins:i,min:r,max:s,count:e.length}}function rp(e,t){var r;const n=[];for(const s of e){const i=(r=s.metrics)==null?void 0:r[t];i==null||Number.isNaN(i)||n.push(i)}return n}function Qu(e,t,n){const r=Math.max(1,...e),s=(n==null?void 0:n.opacity)??.9;return e.map((i,o)=>{const l=i/r*100;return a.jsx("rect",{x:o+.05,y:100-l,width:.9,height:l,fill:t,opacity:s},`${t}-${o}`)})}function Eb(e,t){const n=(e.min-t.min)/(t.max-t.min),r=(e.max-t.min)/(t.max-t.min),s=ss*kf(Math.min(n,r)),i=ss*Math.abs(r-n);return a.jsx("rect",{x:s,y:0,width:Math.max(.5,i),height:100,fill:"rgba(255,255,255,0.08)",stroke:"rgba(255,255,255,0.4)",strokeWidth:.4})}function sp(e,t,n){const r=kf((e-t.min)/(t.max-t.min)),s=ss*r;return a.jsx("line",{x1:s,y1:0,x2:s,y2:100,stroke:n.color,strokeWidth:n.strokeWidth??.5,strokeDasharray:n.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function ip(e,t){return e<t?{min:e,max:t}:{min:t,max:e}}function kf(e){return e<0?0:e>1?1:e}function Kt(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function mr(e){if(!Number.isFinite(e))return"";const t=e.toString();return t.includes("e")?e.toFixed(6):t}function op(e){const t=e.trim();if(!t)return{value:null,valid:!0};const n=Number(t);return Number.isFinite(n)?{value:n,valid:!0}:{value:null,valid:!1}}function lp(e,t,n){return e<t?t:e>n?n:e}function Fs(e,t){const n=Math.max(1,Math.abs(e),Math.abs(t));return Math.abs(e-t)<=1e-6*n}function ap(e){return e?e.length>=10?e.slice(0,10):e:""}const Nb=[{label:"Root",path:"/"}];function jb({leftTool:e,onToolChange:t,compareEnabled:n,compareActive:r,onOpenCompare:s,views:i,activeViewId:o,onActivateView:l,onSaveView:u,current:d,data:f,onOpenFolder:m,onContextMenu:g,countVersion:C,items:w,filteredItems:E,metricKeys:L,selectedItems:y,selectedMetric:h,onSelectMetric:p,filters:v,onChangeRange:S,onChangeFilters:R,onResize:j}){const k=e==="folders"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",_=e==="metrics"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",N=r?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover";return a.jsxs("div",{className:"app-left-panel col-start-1 row-start-2 relative border-r border-border bg-panel overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-y-0 left-0 w-10 border-r border-border flex flex-col items-center gap-2 py-3 bg-surface-overlay",children:[a.jsx("button",{className:k,title:"Folders","aria-label":"Folders","aria-pressed":e==="folders",onClick:()=>t("folders"),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M3 7.5h6l2-2h10a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2z"})})}),a.jsx("button",{className:_,title:"Metrics / Filters","aria-label":"Metrics and Filters","aria-pressed":e==="metrics",onClick:()=>t("metrics"),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]})}),a.jsx("div",{className:"w-6 h-px bg-border/70 my-1"}),a.jsx("button",{className:`${N} ${n?"":"opacity-40 cursor-not-allowed"}`,title:n?"Compare selected images":"Compare (select 2+)","aria-label":"Compare selected images","aria-pressed":r,"aria-disabled":!n,disabled:!n,onClick:()=>{n&&s()},children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("rect",{x:"3",y:"4",width:"8",height:"16",rx:"1"}),a.jsx("rect",{x:"13",y:"4",width:"8",height:"16",rx:"1"})]})}),a.jsx("div",{className:"flex-1"}),a.jsx("a",{className:"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover cursor-pointer",href:"https://github.com/trojblue/lenslet",title:"Lenslet on GitHub","aria-label":"Lenslet on GitHub",target:"_blank",rel:"noreferrer",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M12 .5C5.73.5.5 5.74.5 12.02c0 5.1 3.29 9.42 7.86 10.95.58.11.79-.25.79-.56v-2.17c-3.2.7-3.88-1.55-3.88-1.55-.53-1.35-1.29-1.71-1.29-1.71-1.05-.72.08-.71.08-.71 1.16.08 1.78 1.2 1.78 1.2 1.03 1.77 2.71 1.26 3.37.96.1-.75.4-1.26.73-1.55-2.55-.29-5.23-1.29-5.23-5.74 0-1.27.45-2.31 1.19-3.13-.12-.29-.52-1.46.11-3.05 0 0 .97-.31 3.18 1.19.92-.26 1.91-.39 2.89-.39.98 0 1.97.13 2.89.39 2.2-1.5 3.18-1.19 3.18-1.19.63 1.59.23 2.76.11 3.05.74.82 1.19 1.86 1.19 3.13 0 4.46-2.69 5.45-5.25 5.73.41.36.78 1.07.78 2.16v3.2c0 .31.21.67.8.56 4.56-1.53 7.85-5.85 7.85-10.95C23.5 5.74 18.27.5 12 .5z"})})})]}),a.jsx("div",{className:"ml-10 h-full",children:e==="folders"?a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"px-2 py-2 border-b border-border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Smart Folders"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:u,title:"Save current view as Smart Folder",children:"+ New"})]}),i.length?a.jsx("div",{className:"flex flex-col gap-1",children:i.map(U=>{const D=U.id===o;return a.jsx("button",{className:`text-left px-2 py-1.5 rounded-md text-sm ${D?"bg-accent-muted text-accent":"hover:bg-hover text-text"}`,onClick:()=>l(U),children:U.name},U.id)})}):a.jsx("div",{className:"text-xs text-muted px-1 py-1.5",children:"No saved Smart Folders yet."})]}),a.jsx(xb,{current:d,roots:Nb,data:f,onOpen:m,onContextMenu:g,countVersion:C,className:"flex-1 min-h-0 overflow-auto scrollbar-thin",showResizeHandle:!1})]}):a.jsx(Sb,{items:w,filteredItems:E,metricKeys:L,selectedItems:y,selectedMetric:h,onSelectMetric:p,filters:v,onChangeRange:S,onChangeFilters:R})}),a.jsx("div",{className:"toolbar-offset absolute bottom-0 right-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20",onMouseDown:j})]})}function Mb({persistenceEnabled:e,offViewSummary:t,onRevealOffView:n,canRevealOffView:r=!1,onClearOffView:s,browserZoomPercent:i}){const l=!!(t!=null&&t.names.length)&&t?` (${t.names.join(", ")}${t.extra?` +${t.extra}`:""})`:"",u=r&&n!=null,d=typeof i=="number"?i:null,f=d!==null&&Math.abs(d-100)>=2;return!e||f||!!t?a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-col gap-2",children:[!e&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("span",{className:"font-semibold",children:"Not persisted."})," Workspace is read-only; edits stay in memory until restart."]}),f&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs",children:[a.jsxs("span",{className:"font-semibold",children:["Browser zoom ",Math.round(d),"%."]})," For best results, set it to 100% so UI elements stay in correct proportions."]}),t&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex items-center justify-between gap-3",children:[a.jsxs("span",{children:["Updates outside current view: ",t.count," item",t.count===1?"":"s",l]}),a.jsxs("div",{className:"flex items-center gap-2",children:[u&&a.jsx("button",{className:"text-muted hover:text-text transition-colors",onClick:()=>n==null?void 0:n(),"aria-label":"Reveal off-view updates",children:"Reveal"}),a.jsx("button",{className:"text-muted hover:text-text transition-colors text-base leading-none",onClick:s,"aria-label":"Clear off-view updates",children:""})]})]})]})}):null}const Rb=6e3,Lb=1e4,_b=24*60*6e4,Tb=3e4,Pb=350,Ib=1400,Fb=2048,Ob=6,Db=10;function Sy(e){const t=new Map;for(const n of e)t.set(n.path,n.name);return t}function Cy(e,t){return t.get(e)??e.split("/").pop()??e}function up(e,t){const n=e.filter(r=>!t.has(r.path));return n.length===e.length?e:n}function cp(e,t,n,r,s){const i=e.filter(l=>l.path!==t);return[{path:t,ts:n,kind:r},...i].slice(0,s)}function zb(e,t){if(!e.length)return null;const n=Sy(t),r=new Set,s=[];for(const o of e)r.has(o.path)||(r.add(o.path),s.push(o.path));const i=s.slice(0,2).map(o=>Cy(o,n));return{count:s.length,names:i,extra:Math.max(0,s.length-i.length)}}function Ab(e,t,n,r){if(!e.length)return[];const s=Sy(t);return e.map(i=>({path:i.path,label:Cy(i.path,s),timeLabel:r(i.ts,n)}))}function $b(e){const[t,n]=c.useState([]),[r,s]=c.useState([]),[i,o]=c.useState(new Map),l=c.useRef(new Map),u=c.useRef(new Set),d=c.useRef(new Set),f=c.useRef(new Set);c.useEffect(()=>()=>{for(const L of l.current.values())window.clearTimeout(L);l.current.clear(),u.current.clear()},[]),c.useEffect(()=>{d.current=new Set(e),n(L=>up(L,f.current))},[e]);const m=c.useCallback((L,y)=>{if(y!=null){if(u.current.has(y))return;if(u.current.add(y),u.current.size>Fb){const R=u.current.values().next().value;R!=null&&u.current.delete(R)}}const h=y!=null?`event:${y}`:`event:${L}:${Date.now()}`;o(R=>{if(R.get(L)===h)return R;const j=new Map(R);return j.set(L,h),j});const p=l.current,v=p.get(L);v!=null&&window.clearTimeout(v);const S=window.setTimeout(()=>{o(R=>{if(R.get(L)!==h)return R;const j=new Map(R);return j.delete(L),j}),p.delete(L)},Ib);p.set(L,S)},[]),g=c.useCallback(L=>{f.current=L,n(y=>up(y,L))},[]),C=c.useCallback((L,y,h)=>{const p=Date.now();d.current.has(L)&&f.current.has(L)||n(S=>cp(S,L,p,y,Ob)),m(L,h)},[m]),w=c.useCallback((L,y,h)=>{const p=Date.now(),v=ly(h)??p;s(S=>cp(S,L,v,y,Db))},[]),E=c.useCallback(()=>{n([])},[]);return{offViewActivity:t,recentTouches:r,highlightedPaths:i,onVisiblePathsChange:g,markRecentActivity:C,markRecentTouch:w,clearOffViewActivity:E}}function Ub(e){return e.isOffline?"offline":e.isUnstable?"unstable":e.recentEditActive?"recent":Number.isFinite(e.editingCount)&&e.editingCount>0?"editing":"live"}function by(e){if(!e.length)return e;const t=new Set,n=[];for(const r of e)t.has(r.path)||(t.add(r.path),n.push(r));return n}function ky(e){return{...e,items:by(e.items)}}function Bb(e,t){const n=e.pageCount??1,r=e.pageSize??t,s=(e.page??1)+1;return n<=1||s>n?null:{startPage:s,endPage:n,pageSize:r}}function Wb(e,t){if(e.path!==t.path)return ky(t);const n=by([...e.items,...t.items]);return{...e,generatedAt:t.generatedAt??e.generatedAt,dirs:e.dirs.length?e.dirs:t.dirs,items:n,page:t.page??e.page,pageSize:t.pageSize??e.pageSize,pageCount:t.pageCount??e.pageCount,totalItems:t.totalItems??e.totalItems}}async function Hb(e,t){const n=t.shouldContinue??(()=>!0);let r=ky(e);t.onUpdate(r);const s=Bb(e,t.defaultPageSize);if(s)for(let i=s.startPage;i<=s.endPage;i+=1){let o;try{o=await t.fetchPage(i,s.pageSize)}catch{return}if(!n())return;r=Wb(r,o),t.onUpdate(r)}}const Ey=[-2,-1,1,2],Ny=[-2,-1,0,1,2,3];Ey.length;Ny.length;function Vb(e,t,n){return Math.min(Math.max(e,t),n)}function jy(e,t,n){const r=new Set,s=[];for(const i of n){const o=t+i;if(o<0||o>=e.length)continue;const l=e[o];!l||r.has(l)||(r.add(l),s.push(l))}return s}function Qb(e,t){if(!t)return[];const n=e.indexOf(t);return n<0?[]:jy(e,n,Ey)}function Kb(e,t){if(e.length<2)return[];const n=Math.max(0,e.length-2),r=Vb(t,0,n);return jy(e,r,Ny)}const Ke={sortKey:"sortKey",sortDir:"sortDir",sortSpec:"sortSpec",starFilters:"starFilters",filterAst:"filterAst",selectedMetric:"selectedMetric",viewMode:"viewMode",gridItemSize:"gridItemSize",leftOpen:"leftOpen",rightOpen:"rightOpen"};function qb(e){switch(e){case"live":return"Live";case"reconnecting":return"Reconnecting";case"offline":return"Offline";case"connecting":case"idle":default:return"Connecting"}}function dp(e){if(!(e instanceof Nn))return null;const t=e.body;if(!t||typeof t!="object")return null;const n=t.error;return typeof n=="string"?n:null}function fp(e,t){for(const n of e)ve.prefetchFile(n,t),ve.prefetchThumb(n)}function hp(e,t){return t-e<_b?aC(e,t):uC(e)}function Yb(e,t){return e?t instanceof Nn||t instanceof Error?t.message:"Failed to load embeddings.":null}function Gb(e,t,n,r){return e||t?n:r}function Xb(e,t,n,r,s,i){return e?n:t||i==="/"?r:s}function Jb(){var Uf,Bf,Wf;const[e,t]=c.useState("/"),[n,r]=c.useState(""),[s,i]=c.useState([]),[o,l]=c.useState(!1),[u,d]=c.useState(null),[f,m]=c.useState(null),[g,C]=c.useState(!1),[w,E]=c.useState(0),[L,y]=c.useState(0),[h,p]=c.useState(null),[v,S]=c.useState(100),[R,j]=c.useState(null),[k,_]=c.useState(()=>({filters:{and:[]},sort:{kind:"builtin",key:"added",dir:"desc"},selectedMetric:void 0})),[N,F]=c.useState(()=>Date.now()),[U,D]=c.useState("adaptive"),[ee,ue]=c.useState(220),[T,de]=c.useState(!0),[z,H]=c.useState(!0),[J,ae]=c.useState("folders"),[ce,Le]=c.useState([]),[Q,K]=c.useState(null),[ne,fe]=c.useState(0),[Me,Ue]=c.useState({}),Ve=c.useRef(null),ut=c.useRef(null),nt=c.useRef(null),en=c.useRef(null),rt=c.useRef(!1),Pt=c.useRef(!1),tn=c.useRef(null),It=c.useRef(null),bt=c.useRef(ki()),ct=c.useRef(null),Te=c.useRef(null),A=c.useRef(null),se=c.useRef(!1),q=c.useRef(null),B=c.useRef("idle"),{leftW:Y,rightW:Z,onResizeLeft:ie,onResizeRight:we}=ub(Ve,J),[ke,Ee]=c.useState(!1),[Re,dt]=c.useState(null),ft=Vr(),Ft=GS(),fn=qa(),st=JS(),[it,Ot]=c.useState("idle"),[Es,Xe]=c.useState({}),[Ht,Mn]=c.useState(null),[hn,Ri]=c.useState(null),[Wo,Ns]=c.useState(!1),[js,ur]=c.useState(()=>Date.now()),[Ms,Rs]=c.useState(!0),[Xa,Ho]=c.useState(!1);c.useEffect(()=>{const x=P=>{const O=zn(P),W=PC(O)?O:null,te=W?zm(O):O;W?(m(W),i([W])):(m(null),rt.current=!1),t(pe=>pe===te?pe:(y(X=>X+1),te))};x(Om());const M=()=>x(Om());return window.addEventListener("hashchange",M),()=>window.removeEventListener("hashchange",M)},[]),c.useEffect(()=>{if(hn==null){Ns(!1);return}Ns(!0);const x=window.setTimeout(()=>Ns(!1),Rb);return()=>window.clearTimeout(x)},[hn]),c.useEffect(()=>{if(Ht==null)return;ur(Date.now());const x=window.setInterval(()=>ur(Date.now()),1e4);return()=>window.clearInterval(x)},[Ht]);const{data:Ls,refetch:Vo,isLoading:Ef,isError:Ja}=fd(e,!0,{page:1,pageSize:Ql}),[Oe,Qo]=c.useState(),Li=c.useRef(0),_i=c.useCallback(()=>Vo(),[Vo]),{data:cr}=fd("/",!0,{enabled:!1,page:1,pageSize:Ql});c.useEffect(()=>{ft.removeQueries({predicate:({queryKey:x})=>bC(x,e,!0)})},[e,ft]),c.useEffect(()=>{Li.current+=1,Qo(void 0)},[e]),c.useEffect(()=>{if(!Ls)return;const x=++Li.current;let M=!1;return Hb(Ls,{defaultPageSize:Ql,fetchPage:(P,O)=>ve.getFolder(Ls.path,{recursive:!0,page:P,pageSize:O}),onUpdate:Qo,shouldContinue:()=>!M&&Li.current===x}),()=>{M=!0}},[Ls]);const Vt=u!==null,$n=!Vt&&n.trim().length>0,mn=db(n,250),Qr=c.useMemo(()=>mn.trim().replace(/\s+/g," "),[mn]),Un=MC($n?Qr:"",e),Bn=LC(),I=((Uf=Bn.data)==null?void 0:Uf.embeddings)??[],oe=((Bf=Bn.data)==null?void 0:Bf.rejected)??[],he=I.length>0,me=Yb(Bn.isError,Bn.error),Ye=c.useMemo(()=>zn(e||"/"),[e]),dr=c.useMemo(()=>Am(k.filters),[k.filters]),Qe=c.useMemo(()=>{var M;return($n?((M=Un.data)==null?void 0:M.items)??[]:(Oe==null?void 0:Oe.items)??[]).map(P=>({...P,star:Me[P.path]!==void 0?Me[P.path]:P.star}))},[$n,Un.data,Oe,Me]),Kr=c.useMemo(()=>{var P;const x=new Map;for(const O of Qe)x.set(O.path,O);const M=((P=Un.data)==null?void 0:P.items)??[];for(const O of M){if(x.has(O.path))continue;const W=Me[O.path]!==void 0?Me[O.path]:O.star;x.set(O.path,{...O,star:W})}return x},[Qe,Un.data,Me]),kt=c.useMemo(()=>u?u.items.map(x=>{const M=Kr.get(x.path);return M||ik(x.path,Me[x.path])}):[],[u,Kr,Me]),ye=c.useMemo(()=>{if(u)return Hm(kt,k.filters);const x=Hm(Qe,k.filters);return lb(x,k.sort,N)},[u,kt,Qe,k.filters,k.sort,N]),Qt=u?kt.length:Qe.length,Wn=ye.length,Pe=c.useMemo(()=>ye.map(x=>x.path),[ye]),{offViewActivity:qr,recentTouches:Ti,highlightedPaths:Ko,onVisiblePathsChange:qo,markRecentActivity:Pi,markRecentTouch:Ii,clearOffViewActivity:My}=$b(Pe),Nf=c.useMemo(()=>new Set(s),[s]),Ry=c.useMemo(()=>{if(!s.length)return[];const x=u?kt:Qe,M=new Map(x.map(O=>[O.path,O])),P=new Map(ye.map(O=>[O.path,O]));return s.map(O=>M.get(O)??P.get(O)).filter(O=>!!O)},[s,u,kt,Qe,ye]),pn=c.useMemo(()=>ye.filter(x=>Nf.has(x.path)),[ye,Nf]),jf=c.useMemo(()=>pn.map(x=>x.path),[pn]),Yo=Math.max(0,pn.length-2),Yr=Math.min(w,Yo),Mf=pn[Yr]??null,Rf=pn[Yr+1]??null,Ly=Yr>0,_y=Yr<pn.length-2,Fi=pn.length>=2,Ty=u?kt:Qe,Oi=u?null:k.sort.kind==="metric"?k.sort.key:null,Lf=c.useMemo(()=>Oi?ye.some(x=>{var P;const M=(P=x.metrics)==null?void 0:P[Oi];return M!=null&&!Number.isNaN(M)}):!1,[ye,Oi]);c.useEffect(()=>{E(x=>x>Yo?Yo:x)},[Yo]);const Za=c.useCallback(x=>{const M=Date.now(),O=ly(x)??M,W=O>M?M:O;Mn(te=>te==null?W:te>W?te:W),Ri(M),ur(M)},[]),eu=c.useCallback(x=>{const M=Object.prototype.hasOwnProperty.call(x,"star"),P=x.metrics!==void 0,O=x.comments!==void 0;if(!M&&!P&&!O)return;const W=pe=>{if(pe.path!==x.path)return pe;let X=pe;return M&&pe.star!==x.star&&(X={...X,star:x.star??null}),P&&(X={...X,metrics:x.metrics??null}),O&&pe.comments!==x.comments&&(X={...X,comments:x.comments??""}),X},te=pe=>{if(!pe)return pe;let X=!1;const re=pe.items.map(xe=>{const vt=W(xe);return vt!==xe&&(X=!0),vt});return X?{...pe,items:re}:pe};ft.setQueriesData({predicate:({queryKey:pe})=>Array.isArray(pe)&&pe[0]==="folder"},te),ft.setQueriesData({predicate:({queryKey:pe})=>Array.isArray(pe)&&pe[0]==="search"},te)},[ft]),Py=c.useCallback(()=>{fe(x=>x+1)},[]),_s=c.useCallback(x=>{x.length&&Xe(M=>{let P=!1;const O={...M};for(const W of x){const te=M[W.gallery_id];te&&te.viewing===W.viewing&&te.editing===W.editing||(O[W.gallery_id]=W,P=!0)}return P?O:M})},[]),Go=c.useCallback(()=>{q.current!=null&&(window.clearTimeout(q.current),q.current=null)},[]),Xo=c.useCallback(x=>{x&&Xe(M=>{if(!(x in M))return M;const P={...M};return delete P[x],P})},[]),tu=c.useCallback(x=>{ct.current=x.lease_id,Te.current=x.gallery_id,_s([x])},[_s]),Rn=c.useCallback(async(x,M=!1)=>{const P=bt.current,O=M?void 0:ct.current??void 0,W=te=>ve.joinPresence(x,te,P);try{tu(await W(O));return}catch(te){if(!M&&dp(te)==="invalid_lease"){tu(await W(void 0));return}throw te}},[tu]),_f=c.useCallback(async(x,M)=>{if(x===M){await Rn(M);return}const P=ct.current;if(!P){await Rn(M,!0);return}try{const O=await ve.movePresence(x,M,P,bt.current);Te.current=O.to_scope.gallery_id,_s([O.from_scope,O.to_scope]);return}catch(O){const W=dp(O);if(W==="invalid_lease"){await Rn(M,!0);return}if(W==="scope_mismatch"){await Rn(M);return}throw O}},[_s,Rn]),Tf=c.useCallback(async x=>{const M=Te.current;if(!M){await Rn(x,!0);return}if(M===x){await Rn(x);return}await _f(M,x)},[Rn,_f]),Jo=c.useCallback(async()=>{if(se.current)return;const x=A.current;if(x){A.current=null,se.current=!0;try{await Tf(x)}catch{}finally{se.current=!1;const M=A.current;M&&M!==Te.current&&Jo()}}},[Tf]),Ts=c.useCallback((x,M=!1)=>{if(A.current=x,Go(),M||Te.current==null){Jo();return}q.current=window.setTimeout(()=>{q.current=null,Jo()},Pb)},[Go,Jo]),Pf=c.useCallback(()=>{Te.current=null,ct.current=null,A.current=null,Go()},[Go]),Zo=c.useCallback(x=>{const M=Te.current,P=ct.current;!M||!P||(Y1(M,P,bt.current),x&&Xo(M),Pf())},[Xo,Pf]);c.useEffect(()=>{B1();const x=H1(P=>{if(P.type==="presence"){const te=P.data;if(!(te!=null&&te.gallery_id))return;_s([te]);return}const O=P.data;if(!(O!=null&&O.path))return;const W=O.path;if(P.type==="item-updated"){const te=P.data,pe={v:1,tags:te.tags??[],notes:te.notes??"",star:te.star??null,version:te.version??1,updated_at:te.updated_at??"",updated_by:te.updated_by??"server"};ft.setQueryData(_o(W),pe),eu({path:W,star:te.star??null,metrics:te.metrics,comments:te.notes??""}),tC(W,pe),Pi(W,"item-updated",P.id),Ii(W,"item-updated",te.updated_at),Za(te.updated_at),Ue(X=>{if(X[W]===void 0)return X;const re={...X};return delete re[W],re})}else if(P.type==="metrics-updated"){const te=P.data;eu({path:W,metrics:te.metrics}),Pi(W,"metrics-updated",P.id),Ii(W,"metrics-updated",te.updated_at),Za(te.updated_at)}}),M=V1(Ot);return()=>{x(),M(),W1()}},[_s,Pi,Ii,ft,eu,Za]),c.useEffect(()=>{const x=Te.current;x!==Ye&&Ts(Ye,x==null)},[Ye,Ts]),c.useEffect(()=>{const x=window.setInterval(()=>{const M=Te.current;M&&Rn(M)},Tb);return()=>{window.clearInterval(x)}},[Rn]),c.useEffect(()=>{const x=B.current;if(B.current=it,it==="live"&&x!=="live"){Ts(Ye,!0);return}(it==="reconnecting"||it==="offline")&&Xo(Te.current)},[Xo,it,Ye,Ts]),c.useEffect(()=>{const x=()=>Zo(!0),M=()=>Zo(!0),P=()=>{Ts(Ye,!0)};return window.addEventListener("pagehide",x),window.addEventListener("beforeunload",M),window.addEventListener("pageshow",P),()=>{window.removeEventListener("pagehide",x),window.removeEventListener("beforeunload",M),window.removeEventListener("pageshow",P),Zo(!1)}},[Ye,Ts,Zo]),c.useEffect(()=>{let x=!1;return ve.getHealth().then(M=>{var O;if(x)return;const P=((O=M==null?void 0:M.labels)==null?void 0:O.enabled)??!0;Rs(P)}).catch(()=>{}),()=>{x=!0}},[]);const Iy=c.useMemo(()=>{const x=u?kt:Qe,M={0:0,1:0,2:0,3:0,4:0,5:0};for(const P of x){const O=Me[P.path]??P.star??0;M[String(O)]=(M[String(O)]||0)+1}return M},[u,kt,Qe,Me]),fr=c.useMemo(()=>{const x=new Set;let M=0;const P=u?kt:Qe;for(const O of P){const W=O.metrics;if(W)for(const te of Object.keys(W))x.add(te);if(M+=1,M>=250&&x.size>0)break}return Array.from(x).sort()},[u,kt,Qe]);c.useEffect(()=>{Vt||fr.length&&_(x=>{const M=x.selectedMetric&&fr.includes(x.selectedMetric)?x.selectedMetric:fr[0];return M===x.selectedMetric?x:{...x,selectedMetric:M}})},[fr,Vt]),c.useEffect(()=>{Vt||k.sort.kind==="metric"&&(fr.includes(k.sort.key)||_(x=>({...x,sort:{kind:"builtin",key:"added",dir:x.sort.dir}})))},[fr,k.sort,Vt]);const el=c.useMemo(()=>tb(k.filters),[k.filters]),tl=(Oe==null?void 0:Oe.totalItems)??(Oe==null?void 0:Oe.items.length)??Qt,Fy=e==="/"?tl:(cr==null?void 0:cr.totalItems)??(cr==null?void 0:cr.items.length)??tl,nu=Vt||$n||el>0,nl=Es[e],Oy=Ft.state==="syncing"?"Syncing":Ft.state==="error"?Ft.message?`Not saved  ${Ft.message}`:"Not saved  retry":"All changes saved",Dy=qb(it),ru=Ht!=null,zy=c.useMemo(()=>!ru||Ht==null?"No edits yet.":hp(Ht,js),[ru,Ht,js]),Ay=(nl==null?void 0:nl.editing)??0,$y=st!=null&&st>Lb,Uy=it==="offline"||it==="connecting"||it==="idle",By=it==="reconnecting"||fn||Ft.state==="error"||$y,Wy=Ub({isOffline:Uy,isUnstable:By,recentEditActive:Wo,editingCount:Ay}),Hy=c.useMemo(()=>zb(qr,ye),[qr,ye]),Vy=c.useMemo(()=>Ab(Ti,ye,js,hp),[ye,js,Ti]),Qy=Gb(Vt,nu,Wn,tl),Ky=Xb(Vt,nu,Qt,tl,Fy,e),If=c.useMemo(()=>{if(!u)return null;if(u.queryPath){const x=u.queryPath.split("/").filter(Boolean);return x.length?x[x.length-1]:u.queryPath}return u.queryVector?"Vector query":null},[u]),Ff=c.useMemo(()=>u?el>0?`${Wn} of ${Qt}`:`${Qt}`:null,[u,el,Wn,Qt]),Et=c.useCallback(x=>{_(M=>({...M,filters:x(M.filters)}))},[]),qy=c.useCallback(x=>{_(M=>({...M,filters:x}))},[]),rl=c.useCallback(()=>{Et(x=>Hu(x,[]))},[Et]),Of=c.useCallback(()=>{_(x=>({...x,filters:{and:[]}}))},[]),su=c.useCallback(()=>{d(null);const x=It.current;It.current=null,x&&x.length?(i(x),y(M=>M+1)):i([])},[]),Yy=c.useCallback(()=>{u&&su(),r(""),_(x=>({...x,filters:{and:[]}}))},[su,u]),Gy=c.useCallback(async x=>{!u&&It.current===null&&(It.current=s);const M=await ve.searchEmbeddings(x);if(d({embedding:M.embedding,queryPath:x.query_path??null,queryVector:x.query_vector_b64??null,topK:x.top_k??50,minScore:x.min_score??null,items:M.items,createdAt:Date.now()}),M.items.length){const P=x.query_path&&M.items.some(O=>O.path===x.query_path)?x.query_path:M.items[0].path;i([P]),y(O=>O+1)}else i([])},[u,s]),iu=c.useCallback((x,M)=>{Et(P=>eb(P,x,M))},[Et]),Df=c.useMemo(()=>{var M,P,O,W,te,pe;const x=[];for(const X of k.filters.and)if("stars"in X){const re=X.stars||[];if(!re.length)continue;x.push({id:"stars",label:`Rating in: ${Ku(re)}`,onRemove:()=>rl()})}else if("starsIn"in X){const re=X.starsIn.values||[];if(!re.length)continue;x.push({id:"stars-in",label:`Rating in: ${Ku(re)}`,onRemove:()=>rl()})}else if("starsNotIn"in X){const re=X.starsNotIn.values||[];if(!re.length)continue;x.push({id:"stars-not-in",label:`Rating not in: ${Ku(re)}`,onRemove:()=>Et(xe=>fy(xe,[]))})}else if("nameContains"in X){const re=(M=X.nameContains.value)==null?void 0:M.trim();if(!re)continue;x.push({id:"name-contains",label:`Filename contains: ${re}`,onRemove:()=>Et(xe=>hy(xe,""))})}else if("nameNotContains"in X){const re=(P=X.nameNotContains.value)==null?void 0:P.trim();if(!re)continue;x.push({id:"name-not-contains",label:`Filename not: ${re}`,onRemove:()=>Et(xe=>my(xe,""))})}else if("commentsContains"in X){const re=(O=X.commentsContains.value)==null?void 0:O.trim();if(!re)continue;x.push({id:"comments-contains",label:`Comments contain: ${re}`,onRemove:()=>Et(xe=>py(xe,""))})}else if("commentsNotContains"in X){const re=(W=X.commentsNotContains.value)==null?void 0:W.trim();if(!re)continue;x.push({id:"comments-not-contains",label:`Comments not: ${re}`,onRemove:()=>Et(xe=>gy(xe,""))})}else if("urlContains"in X){const re=(te=X.urlContains.value)==null?void 0:te.trim();if(!re)continue;x.push({id:"url-contains",label:`URL contains: ${re}`,onRemove:()=>Et(xe=>vy(xe,""))})}else if("urlNotContains"in X){const re=(pe=X.urlNotContains.value)==null?void 0:pe.trim();if(!re)continue;x.push({id:"url-not-contains",label:`URL not: ${re}`,onRemove:()=>Et(xe=>yy(xe,""))})}else if("dateRange"in X){const{from:re,to:xe}=X.dateRange;if(!re&&!xe)continue;x.push({id:"date-range",label:`Date: ${tk(re,xe)}`,onRemove:()=>Et(vt=>md(vt,null))})}else if("widthCompare"in X){const{op:re,value:xe}=X.widthCompare;x.push({id:"width-compare",label:`Width ${re} ${xe}`,onRemove:()=>Et(vt=>Kl(vt,null))})}else if("heightCompare"in X){const{op:re,value:xe}=X.heightCompare;x.push({id:"height-compare",label:`Height ${re} ${xe}`,onRemove:()=>Et(vt=>ql(vt,null))})}else if("metricRange"in X){const{key:re,min:xe,max:vt}=X.metricRange;x.push({id:`metric:${re}`,label:`${re}: ${rk(xe,vt)}`,onRemove:()=>iu(re,null)})}return x},[k.filters,rl,iu,Et]),Xy=c.useCallback(x=>{const M=new Set(dr);M.has(x)?M.delete(x):M.add(x),_(P=>({...P,filters:Hu(P.filters,Array.from(M))}))},[dr]),Jy=c.useCallback(()=>{de(!0),ae("metrics")},[]),Zy=c.useCallback(x=>{_(M=>({...M,sort:x})),x.kind==="builtin"&&x.key==="random"&&F(Date.now())},[]),zf=c.useCallback(x=>{if(x==="/"||x==="")return"Lenslet | Root";const M=x.split("/").filter(Boolean);if(!M.length)return"Lenslet";const P=M.slice(-2).join("/");return`Lenslet | ${M.length>2?`.../${P}`:`/${P}`}`},[]),e0=c.useMemo(()=>nk(e),[e]);c.useEffect(()=>{document.title=zf(e)},[e,zf]),c.useEffect(()=>{let x=!0;return ve.getViews().then(M=>{x&&Le(M.views||[])}).catch(()=>{x&&Le([])}),()=>{x=!1}},[]),c.useEffect(()=>{$n&&(i([]),f&&(m(null),rt.current=!1,Ll(e)))},[$n,f,e]),c.useEffect(()=>{const x=Ve.current,M=en.current;if(!x||!M)return;const P=()=>{const O=Math.max(48,Math.round(M.getBoundingClientRect().height));x.style.setProperty("--toolbar-h",`${O}px`)};if(P(),"ResizeObserver"in window){const O=new ResizeObserver(P);return O.observe(M),()=>O.disconnect()}return window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]),c.useEffect(()=>{try{const x=localStorage.getItem(Ke.sortKey),M=localStorage.getItem(Ke.sortDir),P=localStorage.getItem(Ke.sortSpec),O=localStorage.getItem(Ke.starFilters),W=localStorage.getItem(Ke.filterAst),te=localStorage.getItem(Ke.selectedMetric),pe=localStorage.getItem(Ke.viewMode),X=localStorage.getItem(Ke.gridItemSize),re=localStorage.getItem(Ke.leftOpen),xe=localStorage.getItem(Ke.rightOpen),Hf=(yt=>{if(!yt)return null;const Je=Uu(yt);return!Je||typeof Je!="object"?null:Je.kind==="builtin"&&(Je.key==="name"||Je.key==="added"||Je.key==="random")&&(Je.dir==="asc"||Je.dir==="desc")||Je.kind==="metric"&&typeof Je.key=="string"&&Je.key.length>0&&(Je.dir==="asc"||Je.dir==="desc")?Je:null})(P)??{kind:"builtin",key:x==="name"||x==="added"||x==="random"?x:"added",dir:M==="asc"||M==="desc"?M:"desc"};Hf.key==="random"&&F(Date.now());let uu=(yt=>{if(!yt)return null;const Je=Uu(yt);return hd(Je)})(W)??{and:[]};if(O){const yt=Uu(O);if(Array.isArray(yt)){const Je=yt.filter(u0=>[0,1,2,3,4,5].includes(u0));uu=Hu(uu,Je)}}if(_(yt=>({...yt,sort:Hf,filters:uu,selectedMetric:te||yt.selectedMetric})),(pe==="grid"||pe==="adaptive")&&D(pe),X){const yt=Number(X);!isNaN(yt)&&yt>=80&&yt<=500&&ue(yt)}(re==="0"||re==="false")&&de(!1),(xe==="0"||xe==="false")&&H(!1)}catch{}},[]),c.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia("(max-width: 900px)"),M=()=>{x.matches&&(de(!1),H(!1))};return M(),"addEventListener"in x?(x.addEventListener("change",M),()=>x.removeEventListener("change",M)):(x.addListener(M),()=>x.removeListener(M))},[]),c.useEffect(()=>{if(typeof window>"u")return;const x=[1,1.25,1.5,1.75,2,3,4],M=W=>x.reduce((te,pe)=>Math.abs(pe-W)<Math.abs(te-W)?pe:te,x[0]),P=()=>{var vt;const W=window.devicePixelRatio||1,te=M(W),pe=((vt=window.visualViewport)==null?void 0:vt.scale)??1,X=W*pe/te;if(!Number.isFinite(X)){j(null);return}const re=Math.round(X*100),xe=Math.min(500,Math.max(25,re));j(xe)};P(),window.addEventListener("resize",P),window.addEventListener("orientationchange",P);const O=window.visualViewport;return O&&O.addEventListener("resize",P),()=>{window.removeEventListener("resize",P),window.removeEventListener("orientationchange",P),O&&O.removeEventListener("resize",P)}},[]),c.useEffect(()=>{try{localStorage.setItem(Ke.sortKey,k.sort.kind==="builtin"?k.sort.key:"added"),localStorage.setItem(Ke.sortDir,k.sort.dir),localStorage.setItem(Ke.sortSpec,JSON.stringify(k.sort));const x=Am(k.filters);localStorage.setItem(Ke.starFilters,JSON.stringify(x)),localStorage.setItem(Ke.filterAst,JSON.stringify(k.filters)),k.selectedMetric?localStorage.setItem(Ke.selectedMetric,k.selectedMetric):localStorage.removeItem(Ke.selectedMetric),localStorage.setItem(Ke.viewMode,U),localStorage.setItem(Ke.gridItemSize,String(ee)),localStorage.setItem(Ke.leftOpen,T?"1":"0"),localStorage.setItem(Ke.rightOpen,z?"1":"0")}catch{}},[k,U,ee,T,z]),c.useEffect(()=>{const x=ut.current;if(!x)return;const M=O=>Math.min(500,Math.max(80,O)),P=O=>{O.ctrlKey&&(f||g||(O.preventDefault(),ue(W=>M(W+(O.deltaY<0?20:-20)))))};return x.addEventListener("wheel",P,{passive:!1}),()=>x.removeEventListener("wheel",P)},[f,g]),c.useEffect(()=>{if(f||g)return;const x=ut.current;if(!x)return;const M=X=>Math.min(500,Math.max(80,X));let P=null;const O=X=>{if(X.length<2)return 0;const[re,xe]=[X[0],X[1]];return Math.hypot(re.clientX-xe.clientX,re.clientY-xe.clientY)},W=X=>{if(X.touches.length!==2)return;const re=O(X.touches);re&&(P={dist:re,size:ee})},te=X=>{if(!P||X.touches.length!==2)return;const re=O(X.touches);if(!re)return;X.preventDefault();const xe=M(P.size*(re/P.dist));ue(xe)},pe=()=>{P=null};return x.addEventListener("touchstart",W,{passive:!0}),x.addEventListener("touchmove",te,{passive:!1}),x.addEventListener("touchend",pe),x.addEventListener("touchcancel",pe),()=>{x.removeEventListener("touchstart",W),x.removeEventListener("touchmove",te),x.removeEventListener("touchend",pe),x.removeEventListener("touchcancel",pe)}},[f,g,ee]),c.useEffect(()=>{fp(Qb(Pe,f),"viewer")},[f,Pe]),c.useEffect(()=>{g&&fp(Kb(jf,Yr),"compare")},[g,jf,Yr]);const sl=c.useCallback(x=>{m(null),rt.current=!1;const M=zn(x);t(M),Dm(M)},[]),t0=c.useCallback(async()=>{const x=window.prompt("Save Smart Folder as:","New Smart Folder");if(!x)return;const M=Zb(x,ce),P={id:M,name:x,pool:{kind:"folder",path:e},view:JSON.parse(JSON.stringify(k))},O=[...ce.filter(W=>W.id!==M),P];Le(O),K(M);try{await ve.saveViews({version:1,views:O})}catch(W){if(W instanceof Nn&&W.status===403){const te=new Blob([JSON.stringify({version:1,views:O},null,2)],{type:"application/json"});Yl(te,`lenslet-smart-folder-${M}.json`),alert("No-write mode: exported Smart Folder JSON instead of saving.");return}console.error("Failed to save Smart Folder:",W)}},[e,k,ce]);c.useEffect(()=>{if(!Q)return;const x=ce.find(O=>O.id===Q);if(!x){K(null);return}const M=x.pool.path===e,P=JSON.stringify(x.view)===JSON.stringify(k);(!M||!P)&&K(null)},[Q,ce,e,k]);const il=c.useCallback(x=>{if(!x)return;const M=document.getElementById(`cell-${encodeURIComponent(x)}`);M==null||M.focus()},[]),n0=c.useCallback(x=>{m(x),rt.current=!0,Dm(x)},[]),Af=c.useCallback(()=>{m(null),rt.current?(rt.current=!1,window.history.back()):Ll(e),il(tn.current)},[il]),r0=c.useCallback(()=>{g||!Fi||(s[0]&&(tn.current=s[0]),E(0),C(!0),f&&(m(null),rt.current&&(rt.current=!1),Ll(e)),Pt.current||(window.history.pushState({compare:!0},"",window.location.href),Pt.current=!0))},[g,Fi,s,f,e]),ou=c.useCallback(()=>{C(!1),Pt.current&&(Pt.current=!1,window.history.back()),il(tn.current??s[0])},[il,s]),s0=c.useCallback(x=>{pn.length<2||E(M=>{const P=Math.max(0,pn.length-2);return Math.min(P,Math.max(0,M+x))})},[pn.length]);c.useEffect(()=>{g&&(Fi||ou())},[g,Fi,ou]),c.useEffect(()=>{const x=()=>{f&&(rt.current=!1,m(null)),g&&(Pt.current=!1,C(!1))};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[f,g]),c.useEffect(()=>{const x=Ve.current;if(!x)return;const M=W=>{W.dataTransfer&&Array.from(W.dataTransfer.types).includes("Files")&&(W.preventDefault(),Ee(!0))},P=W=>{const te=W.relatedTarget;te&&x.contains(te)||Ee(!1)},O=async W=>{var X,re;W.preventDefault(),Ee(!1);const te=Array.from(((X=W.dataTransfer)==null?void 0:X.files)??[]);if(!te.length)return;if(!((((re=Oe==null?void 0:Oe.dirs)==null?void 0:re.length)??0)===0)){alert("Uploads are only allowed into folders without subdirectories.");return}for(const xe of te)try{await ve.uploadFile(e,xe)}catch(vt){console.error(`Failed to upload ${xe.name}:`,vt)}_i()};return x.addEventListener("dragover",M),x.addEventListener("dragleave",P),x.addEventListener("drop",O),()=>{x.removeEventListener("dragover",M),x.removeEventListener("dragleave",P),x.removeEventListener("drop",O)}},[e,(Wf=Oe==null?void 0:Oe.dirs)==null?void 0:Wf.length,_i]),c.useEffect(()=>{const x=()=>dt(null),M=P=>{P.key==="Escape"&&dt(null)};return window.addEventListener("click",x),window.addEventListener("keydown",M),()=>{window.removeEventListener("click",x),window.removeEventListener("keydown",M)}},[]),c.useEffect(()=>{const x=M=>{if(!xf(M.target)){if((M.ctrlKey||M.metaKey)&&M.key.toLowerCase()==="b"){M.preventDefault(),M.altKey?H(P=>!P):de(P=>!P);return}if(!(f||g)){if(M.key==="Backspace"||M.key==="Delete")M.preventDefault(),sl(zm(e));else if((M.ctrlKey||M.metaKey)&&M.key.toLowerCase()==="a")M.preventDefault(),i(ye.map(P=>P.path));else if(M.key==="Escape")s.length&&(M.preventDefault(),i([]));else if(M.key==="/"){M.preventDefault();const P=document.querySelector(".toolbar-right .input");P==null||P.focus()}}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,ye,s,f,g,sl]);const i0=T?`${Y}px`:"0px",o0=z?`${Z}px`:"0px",$f=f??s[0]??null,lu=$f?Pe.indexOf($f):-1,l0=lu>0,a0=lu>=0&&lu<Pe.length-1,au=c.useCallback(x=>{if(!Pe.length)return;const M=f??s[0];if(!M)return;const P=Pe.indexOf(M);if(P===-1)return;const O=Math.min(Pe.length-1,Math.max(0,P+x)),W=Pe[O];!W||W===M||(f&&(m(W),Ll(W)),i([W]))},[Pe,f,s]);return a.jsxs("div",{className:"app-shell grid h-full grid-cols-[var(--left)_1fr_var(--right)]",ref:Ve,style:{"--left":i0,"--right":o0},children:[a.jsx(b1,{rootRef:en,onSearch:r,viewerActive:!!f,onBack:Af,zoomPercent:f?v:void 0,onZoomPercentChange:x=>p(x),currentLabel:e0,itemCount:Qy,totalCount:Ky,sortSpec:k.sort,metricKeys:fr,onSortChange:Zy,sortDisabled:Vt,filterCount:el,onOpenFilters:Jy,starFilters:dr,onToggleStar:Xy,onClearStars:rl,onClearFilters:Of,starCounts:Iy,viewMode:U,onViewMode:D,gridItemSize:ee,onGridItemSize:ue,leftOpen:T,rightOpen:z,onToggleLeft:()=>de(x=>!x),onToggleRight:()=>H(x=>!x),onPrevImage:()=>au(-1),onNextImage:()=>au(1),canPrevImage:l0,canNextImage:a0,searchDisabled:Vt,searchPlaceholder:Vt?"Exit similarity to search":void 0,syncIndicator:{state:Wy,presence:nl,syncLabel:Oy,connectionLabel:Dy,lastEditedLabel:zy,hasEdits:ru,localTypingActive:Xa,recentTouches:Vy}}),T&&a.jsx(jb,{leftTool:J,onToolChange:ae,compareEnabled:Fi,compareActive:g,onOpenCompare:r0,views:ce,activeViewId:Q,onActivateView:x=>{var P;K(x.id);const M=hd((P=x.view)==null?void 0:P.filters)??{and:[]};_({...x.view,filters:M}),sl(x.pool.path)},onSaveView:t0,current:e,data:Oe,onOpenFolder:x=>{K(null),sl(x)},onContextMenu:(x,M)=>{x.preventDefault(),dt({x:x.clientX,y:x.clientY,kind:"tree",payload:{path:M}})},countVersion:ne,items:Ty,filteredItems:ye,metricKeys:fr,selectedItems:Ry,selectedMetric:k.selectedMetric,onSelectMetric:x=>_(M=>({...M,selectedMetric:x})),filters:k.filters,onChangeRange:iu,onChangeFilters:qy,onResize:ie}),a.jsxs("div",{className:"grid-shell col-start-2 row-start-2 relative overflow-hidden flex flex-col",ref:ut,children:[a.jsx("div",{"aria-live":"polite",className:"sr-only",children:s.length?`${s.length} selected`:""}),a.jsx(Mb,{persistenceEnabled:Ms,offViewSummary:Hy,canRevealOffView:nu,onRevealOffView:Yy,onClearOffView:My,browserZoomPercent:R}),u&&a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"font-semibold",children:"Similarity mode"}),a.jsxs("span",{className:"text-muted",children:["Embedding: ",u.embedding]}),If&&a.jsxs("span",{className:"text-muted",children:["Query: ",If]}),Ff&&a.jsxs("span",{className:"text-muted",children:["Results: ",Ff]}),a.jsxs("span",{className:"text-muted",children:["Top K: ",u.topK]}),u.minScore!=null&&a.jsxs("span",{className:"text-muted",children:["Min score: ",u.minScore]})]}),a.jsx("button",{className:"btn btn-sm",onClick:su,children:"Exit similarity"})]})}),Df.length>0&&a.jsx("div",{className:"sticky top-0 z-10 px-3 py-2 bg-panel border-b border-border",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Filters"}),Df.map(x=>a.jsxs("span",{className:"filter-chip",children:[a.jsx("span",{className:"truncate max-w-[240px]",title:x.label,children:x.label}),a.jsx("button",{className:"filter-chip-remove","aria-label":`Clear filter ${x.label}`,onClick:x.onRemove,children:""})]},x.id)),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:Of,children:"Clear all"})]})}),!1,a.jsxs("div",{className:"flex-1 min-h-0 relative",children:[a.jsx(kS,{items:ye,selected:s,restoreToSelectionToken:L,onSelectionChange:i,onOpenViewer:x=>{try{tn.current=x}catch{}n0(x),i([x])},highlight:$n?Qr:"",recentlyUpdated:Ko,onVisiblePathsChange:qo,suppressSelectionHighlight:!!f||g,viewMode:U,targetCellSize:ee,onContextMenuItem:(x,M)=>{x.preventDefault();const P=s.length?s:[M];dt({x:x.clientX,y:x.clientY,kind:"grid",payload:{paths:P}})},scrollRef:nt,hideScrollbar:Lf}),Lf&&Oi&&a.jsx(jS,{items:ye,metricKey:Oi,scrollRef:nt,sortDir:k.sort.dir})]})]}),z&&a.jsx(vC,{path:s[0]??null,selectedPaths:s,items:ye,compareActive:g,compareA:Mf,compareB:Rf,sortSpec:k.sort,onResize:we,onStarChanged:(x,M)=>{Ue(P=>{const O={...P};for(const W of x)O[W]=M;return O})},onFindSimilar:()=>l(!0),embeddingsAvailable:he,embeddingsLoading:Bn.isLoading,onLocalTypingChange:Ho}),a.jsx(yC,{open:o,embeddings:I,rejected:oe,selectedPath:s[0]??null,embeddingsLoading:Bn.isLoading,embeddingsError:me,onClose:()=>l(!1),onSearch:Gy}),f&&a.jsx(OS,{path:f,onClose:Af,onZoomChange:x=>S(Math.round(x)),requestedZoomPercent:h,onZoomRequestConsumed:()=>p(null),onNavigate:au}),g&&a.jsx(US,{aItem:Mf,bItem:Rf,index:Yr,total:pn.length,canPrev:Ly,canNext:_y,onNavigate:s0,onClose:ou}),ke&&a.jsx("div",{className:"toolbar-offset fixed inset-0 left-[var(--left)] right-[var(--right)] bg-accent/10 border-2 border-dashed border-accent text-text flex items-center justify-center text-lg z-overlay pointer-events-none",children:"Drop images to upload"}),Re&&a.jsx(ok,{ctx:Re,current:e,items:ye,refetch:_i,setCtx:dt,onInvalidateCounts:Py})]})}function Zb(e,t){const n=ek(e)||"view",r=new Set(t.map(i=>i.id));if(!r.has(n))return n;let s=2;for(;r.has(`${n}-${s}`);)s+=1;return`${n}-${s}`}function ek(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function Ku(e){const t=e.filter(s=>s>0).sort((s,i)=>i-s),n=e.includes(0),r=[...t.map(s=>String(s))];return n&&r.push("None"),r.join(", ")}function tk(e,t){return e&&t?`${e} to ${t}`:e?`from ${e}`:t?`to ${t}`:""}function nk(e){if(e==="/"||e==="")return"Root";const t=e.split("/").filter(Boolean);return t.length?t.length<=2?`/${t.join("/")}`:`.../${t.slice(-2).join("/")}`:"Root"}function rk(e,t){return`${mp(e)}${mp(t)}`}function mp(e){const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function sk(e){const t=e.toLowerCase();return t.endsWith(".png")?"image/png":t.endsWith(".webp")?"image/webp":"image/jpeg"}function ik(e,t){const n=e.split("/").pop()??e;return{path:e,name:n,type:sk(e),w:0,h:0,size:0,hasThumb:!0,hasMeta:!1,star:t??null}}function Yl(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function ok({ctx:e,current:t,items:n,refetch:r,setCtx:s,onInvalidateCounts:i}){const o=OC(t),l=Vr(),[u,d]=Gl.useState(!1),[f,m]=Gl.useState(null),g=()=>new Date().toISOString().replace(/[:.]/g,"-"),C=h=>{const p=v=>h==="/"?!0:v===h||v.startsWith(`${h}/`);l.invalidateQueries({predicate:({queryKey:v})=>{if(!Array.isArray(v)||v[0]!=="folder")return!1;const S=typeof v[1]=="string"?v[1]:"";return p(S)}})},w=h=>{const p=zn(h);return p===""?"/":p},E=async()=>{const h=w(e.payload.path||"/");d(!0);try{await ve.refreshFolder(h),C(h),i(),(t===h||t.startsWith(h==="/"?"/":`${h}/`))&&await r(),td.evictPrefix(h),Os.evictPrefix(h)}catch(p){console.error("Failed to refresh folder:",p)}finally{d(!1),s(null)}},L=h=>async()=>{m(h);const p=e.payload.path||t;try{const S=(await ve.getFolder(p,{recursive:!0,legacyRecursive:!0})).items,R=Gm(S),j=h==="csv"?Ym(R):qm(R),k=h==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8",_=p==="/"?"root":(p.replace(/^\/+/,"")||"root").replace(/\//g,"_");Yl(new Blob([j],{type:k}),`metadata_${_}_${g()}.${h}`)}catch(v){console.error("Failed to export folder:",v),alert("Failed to export folder. See console for details.")}finally{m(null),s(null)}},y=e.kind==="tree"?[{label:u?"Refreshing":"Refresh",disabled:u,onClick:E},{label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f||u,onClick:L("csv")},{label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f||u,onClick:L("json")}]:(()=>{const h=e.payload.paths??[],p=[],v=R=>async()=>{m(R);try{const j=new Set(h),k=n.filter(U=>j.has(U.path)),_=Gm(k),N=R==="csv"?Ym(_):qm(_),F=R==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8";Yl(new Blob([N],{type:F}),`metadata_selection_${g()}.${R}`)}finally{m(null),s(null)}},S=async()=>{var j;if(!h.length)return;s(null);const R=new Map(n.map(k=>[k.path,k]));for(const k of h)try{const _=await ve.getFile(k),N=((j=R.get(k))==null?void 0:j.name)||FC(k)||"image";Yl(_,N)}catch(_){console.error(`Failed to download ${k}:`,_)}};return h.length&&p.push({label:h.length>1?`Download (${h.length})`:"Download",onClick:S}),p.push({label:"Move to trash",disabled:o,onClick:async()=>{if(!o){for(const R of h)try{await ve.moveFile(R,"/_trash_")}catch(j){console.error(`Failed to trash ${R}:`,j)}r(),s(null)}}}),o&&(p.push({label:"Permanent delete",danger:!0,onClick:async()=>{if(confirm(`Delete ${h.length} file(s) permanently? This cannot be undone.`)){try{await ve.deleteFiles(h)}catch(R){console.error("Failed to delete files:",R)}r(),s(null)}}}),p.push({label:"Recover",onClick:async()=>{for(const R of h)try{const k=(await ve.getSidecar(R)).original_position,_=k&&k.split("/").slice(0,-1).join("/")||"/";await ve.moveFile(R,_)}catch(j){console.error(`Failed to recover ${R}:`,j)}r(),s(null)}})),h.length&&(p.push({label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f,onClick:v("csv")}),p.push({label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f,onClick:v("json")})),p})();return a.jsx(cb,{x:e.x,y:e.y,items:y})}const lk=new l1({defaultOptions:{queries:{staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always"},mutations:{retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),5e3)}}});function ak(){return a.jsx(a1,{client:lk,children:a.jsx(Jb,{})})}zv(document.getElementById("root")).render(a.jsx(ak,{}));
