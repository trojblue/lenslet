var sy=Object.defineProperty;var Vd=e=>{throw TypeError(e)};var iy=(e,t,n)=>t in e?sy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var yn=(e,t,n)=>iy(e,typeof t!="symbol"?t+"":t,n),pa=(e,t,n)=>t.has(e)||Vd("Cannot "+n);var w=(e,t,n)=>(pa(e,t,"read from private field"),n?n.call(e):t.get(e)),re=(e,t,n)=>t.has(e)?Vd("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),K=(e,t,n,r)=>(pa(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ce=(e,t,n)=>(pa(e,t,"access private method"),n);var oo=(e,t,n,r)=>({set _(s){K(e,t,s,n)},get _(){return w(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function oy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wp={exports:{}},Ml={},Sp={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yi=Symbol.for("react.element"),ly=Symbol.for("react.portal"),ay=Symbol.for("react.fragment"),uy=Symbol.for("react.strict_mode"),cy=Symbol.for("react.profiler"),dy=Symbol.for("react.provider"),fy=Symbol.for("react.context"),hy=Symbol.for("react.forward_ref"),py=Symbol.for("react.suspense"),my=Symbol.for("react.memo"),gy=Symbol.for("react.lazy"),Qd=Symbol.iterator;function vy(e){return e===null||typeof e!="object"?null:(e=Qd&&e[Qd]||e["@@iterator"],typeof e=="function"?e:null)}var kp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cp=Object.assign,Ep={};function Hs(e,t,n){this.props=e,this.context=t,this.refs=Ep,this.updater=n||kp}Hs.prototype.isReactComponent={};Hs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Hs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Np(){}Np.prototype=Hs.prototype;function yc(e,t,n){this.props=e,this.context=t,this.refs=Ep,this.updater=n||kp}var xc=yc.prototype=new Np;xc.constructor=yc;Cp(xc,Hs.prototype);xc.isPureReactComponent=!0;var Kd=Array.isArray,bp=Object.prototype.hasOwnProperty,wc={current:null},jp={key:!0,ref:!0,__self:!0,__source:!0};function Mp(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)bp.call(t,r)&&!jp.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Yi,type:e,key:i,ref:o,props:s,_owner:wc.current}}function yy(e,t){return{$$typeof:Yi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Sc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Yi}function xy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Yd=/\/+/g;function ma(e,t){return typeof e=="object"&&e!==null&&e.key!=null?xy(""+e.key):t.toString(36)}function Lo(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Yi:case ly:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+ma(o,0):r,Kd(s)?(n="",e!=null&&(n=e.replace(Yd,"$&/")+"/"),Lo(s,t,n,"",function(c){return c})):s!=null&&(Sc(s)&&(s=yy(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Yd,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Kd(e))for(var l=0;l<e.length;l++){i=e[l];var a=r+ma(i,l);o+=Lo(i,t,n,a,s)}else if(a=vy(e),typeof a=="function")for(e=a.call(e),l=0;!(i=e.next()).done;)i=i.value,a=r+ma(i,l++),o+=Lo(i,t,n,a,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function lo(e,t,n){if(e==null)return e;var r=[],s=0;return Lo(e,r,"","",function(i){return t.call(n,i,s++)}),r}function wy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var mt={current:null},To={transition:null},Sy={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:To,ReactCurrentOwner:wc};function Rp(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:lo,forEach:function(e,t,n){lo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return lo(e,function(){t++}),t},toArray:function(e){return lo(e,function(t){return t})||[]},only:function(e){if(!Sc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ge.Component=Hs;ge.Fragment=ay;ge.Profiler=cy;ge.PureComponent=yc;ge.StrictMode=uy;ge.Suspense=py;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sy;ge.act=Rp;ge.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Cp({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=wc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)bp.call(t,a)&&!jp.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Yi,type:e.type,key:s,ref:i,props:r,_owner:o}};ge.createContext=function(e){return e={$$typeof:fy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:dy,_context:e},e.Consumer=e};ge.createElement=Mp;ge.createFactory=function(e){var t=Mp.bind(null,e);return t.type=e,t};ge.createRef=function(){return{current:null}};ge.forwardRef=function(e){return{$$typeof:hy,render:e}};ge.isValidElement=Sc;ge.lazy=function(e){return{$$typeof:gy,_payload:{_status:-1,_result:e},_init:wy}};ge.memo=function(e,t){return{$$typeof:my,type:e,compare:t===void 0?null:t}};ge.startTransition=function(e){var t=To.transition;To.transition={};try{e()}finally{To.transition=t}};ge.unstable_act=Rp;ge.useCallback=function(e,t){return mt.current.useCallback(e,t)};ge.useContext=function(e){return mt.current.useContext(e)};ge.useDebugValue=function(){};ge.useDeferredValue=function(e){return mt.current.useDeferredValue(e)};ge.useEffect=function(e,t){return mt.current.useEffect(e,t)};ge.useId=function(){return mt.current.useId()};ge.useImperativeHandle=function(e,t,n){return mt.current.useImperativeHandle(e,t,n)};ge.useInsertionEffect=function(e,t){return mt.current.useInsertionEffect(e,t)};ge.useLayoutEffect=function(e,t){return mt.current.useLayoutEffect(e,t)};ge.useMemo=function(e,t){return mt.current.useMemo(e,t)};ge.useReducer=function(e,t,n){return mt.current.useReducer(e,t,n)};ge.useRef=function(e){return mt.current.useRef(e)};ge.useState=function(e){return mt.current.useState(e)};ge.useSyncExternalStore=function(e,t,n){return mt.current.useSyncExternalStore(e,t,n)};ge.useTransition=function(){return mt.current.useTransition()};ge.version="18.3.1";Sp.exports=ge;var d=Sp.exports;const qo=oy(d);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky=d,Cy=Symbol.for("react.element"),Ey=Symbol.for("react.fragment"),Ny=Object.prototype.hasOwnProperty,by=ky.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jy={key:!0,ref:!0,__self:!0,__source:!0};function Lp(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Ny.call(t,r)&&!jy.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Cy,type:e,key:i,ref:o,props:s,_owner:by.current}}Ml.Fragment=Ey;Ml.jsx=Lp;Ml.jsxs=Lp;wp.exports=Ml;var u=wp.exports,Tp={exports:{}},It={},_p={exports:{}},Pp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,U){var X=I.length;I.push(U);e:for(;0<X;){var ue=X-1>>>1,me=I[ue];if(0<s(me,U))I[ue]=U,I[X]=me,X=ue;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var U=I[0],X=I.pop();if(X!==U){I[0]=X;e:for(var ue=0,me=I.length,Re=me>>>1;ue<Re;){var ee=2*(ue+1)-1,q=I[ee],J=ee+1,fe=I[J];if(0>s(q,X))J<me&&0>s(fe,q)?(I[ue]=fe,I[J]=X,ue=J):(I[ue]=q,I[ee]=X,ue=ee);else if(J<me&&0>s(fe,X))I[ue]=fe,I[J]=X,ue=J;else break e}}return U}function s(I,U){var X=I.sortIndex-U.sortIndex;return X!==0?X:I.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],c=[],m=1,h=null,v=3,S=!1,k=!1,N=!1,T=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(I){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=I)r(c),U.sortIndex=U.expirationTime,t(a,U);else break;U=n(c)}}function f(I){if(N=!1,p(I),!k)if(n(a)!==null)k=!0,pe(C);else{var U=n(c);U!==null&&de(f,U.startTime-I)}}function C(I,U){k=!1,N&&(N=!1,y(b),b=-1),S=!0;var X=v;try{for(p(U),h=n(a);h!==null&&(!(h.expirationTime>U)||I&&!O());){var ue=h.callback;if(typeof ue=="function"){h.callback=null,v=h.priorityLevel;var me=ue(h.expirationTime<=U);U=e.unstable_now(),typeof me=="function"?h.callback=me:h===n(a)&&r(a),p(U)}else r(a);h=n(a)}if(h!==null)var Re=!0;else{var ee=n(c);ee!==null&&de(f,ee.startTime-U),Re=!1}return Re}finally{h=null,v=X,S=!1}}var R=!1,j=null,b=-1,_=5,E=-1;function O(){return!(e.unstable_now()-E<_)}function Q(){if(j!==null){var I=e.unstable_now();E=I;var U=!0;try{U=j(!0,I)}finally{U?z():(R=!1,j=null)}}else R=!1}var z;if(typeof g=="function")z=function(){g(Q)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,le=A.port2;A.port1.onmessage=Q,z=function(){le.postMessage(null)}}else z=function(){T(Q,0)};function pe(I){j=I,R||(R=!0,z())}function de(I,U){b=T(function(){I(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){k||S||(k=!0,pe(C))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(I){switch(v){case 1:case 2:case 3:var U=3;break;default:U=v}var X=v;v=U;try{return I()}finally{v=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,U){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var X=v;v=I;try{return U()}finally{v=X}},e.unstable_scheduleCallback=function(I,U,X){var ue=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ue+X:ue):X=ue,I){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=X+me,I={id:m++,callback:U,priorityLevel:I,startTime:X,expirationTime:me,sortIndex:-1},X>ue?(I.sortIndex=X,t(c,I),n(a)===null&&I===n(c)&&(N?(y(b),b=-1):N=!0,de(f,X-ue))):(I.sortIndex=me,t(a,I),k||S||(k=!0,pe(C))),I},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(I){var U=v;return function(){var X=v;v=U;try{return I.apply(this,arguments)}finally{v=X}}}})(Pp);_p.exports=Pp;var My=_p.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry=d,Pt=My;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ip=new Set,ki={};function qr(e,t){Ds(e,t),Ds(e+"Capture",t)}function Ds(e,t){for(ki[e]=t,e=0;e<t.length;e++)Ip.add(t[e])}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ja=Object.prototype.hasOwnProperty,Ly=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gd={},qd={};function Ty(e){return Ja.call(qd,e)?!0:Ja.call(Gd,e)?!1:Ly.test(e)?qd[e]=!0:(Gd[e]=!0,!1)}function _y(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Py(e,t,n,r){if(t===null||typeof t>"u"||_y(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gt(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nt[e]=new gt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nt[t]=new gt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nt[e]=new gt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nt[e]=new gt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nt[e]=new gt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nt[e]=new gt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nt[e]=new gt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nt[e]=new gt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nt[e]=new gt(e,5,!1,e.toLowerCase(),null,!1,!1)});var kc=/[\-:]([a-z])/g;function Cc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(kc,Cc);nt[t]=new gt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(kc,Cc);nt[t]=new gt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(kc,Cc);nt[t]=new gt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nt[e]=new gt(e,1,!1,e.toLowerCase(),null,!1,!1)});nt.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nt[e]=new gt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ec(e,t,n,r){var s=nt.hasOwnProperty(t)?nt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Py(t,n,s,r)&&(n=null),r||s===null?Ty(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Fn=Ry.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ao=Symbol.for("react.element"),ss=Symbol.for("react.portal"),is=Symbol.for("react.fragment"),Nc=Symbol.for("react.strict_mode"),Za=Symbol.for("react.profiler"),Op=Symbol.for("react.provider"),Fp=Symbol.for("react.context"),bc=Symbol.for("react.forward_ref"),eu=Symbol.for("react.suspense"),tu=Symbol.for("react.suspense_list"),jc=Symbol.for("react.memo"),Bn=Symbol.for("react.lazy"),Dp=Symbol.for("react.offscreen"),Xd=Symbol.iterator;function Xs(e){return e===null||typeof e!="object"?null:(e=Xd&&e[Xd]||e["@@iterator"],typeof e=="function"?e:null)}var Pe=Object.assign,ga;function oi(e){if(ga===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ga=t&&t[1]||""}return`
`+ga+e}var va=!1;function ya(e,t){if(!e||va)return"";va=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var a=`
`+s[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{va=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?oi(e):""}function Iy(e){switch(e.tag){case 5:return oi(e.type);case 16:return oi("Lazy");case 13:return oi("Suspense");case 19:return oi("SuspenseList");case 0:case 2:case 15:return e=ya(e.type,!1),e;case 11:return e=ya(e.type.render,!1),e;case 1:return e=ya(e.type,!0),e;default:return""}}function nu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case is:return"Fragment";case ss:return"Portal";case Za:return"Profiler";case Nc:return"StrictMode";case eu:return"Suspense";case tu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Fp:return(e.displayName||"Context")+".Consumer";case Op:return(e._context.displayName||"Context")+".Provider";case bc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case jc:return t=e.displayName||null,t!==null?t:nu(e.type)||"Memo";case Bn:t=e._payload,e=e._init;try{return nu(e(t))}catch{}}return null}function Oy(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nu(t);case 8:return t===Nc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function hr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fy(e){var t=zp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function uo(e){e._valueTracker||(e._valueTracker=Fy(e))}function Ap(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=zp(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Xo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ru(e,t){var n=t.checked;return Pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Jd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=hr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $p(e,t){t=t.checked,t!=null&&Ec(e,"checked",t,!1)}function su(e,t){$p(e,t);var n=hr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?iu(e,t.type,n):t.hasOwnProperty("defaultValue")&&iu(e,t.type,hr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function iu(e,t,n){(t!=="number"||Xo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var li=Array.isArray;function gs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+hr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ou(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return Pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ef(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($(92));if(li(n)){if(1<n.length)throw Error($(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:hr(n)}}function Up(e,t){var n=hr(t.value),r=hr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function tf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Bp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Bp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var co,Wp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(co=co||document.createElement("div"),co.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=co.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ci(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dy=["Webkit","ms","Moz","O"];Object.keys(fi).forEach(function(e){Dy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fi[t]=fi[e]})});function Hp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||fi.hasOwnProperty(e)&&fi[e]?(""+t).trim():t+"px"}function Vp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Hp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var zy=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function au(e,t){if(t){if(zy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function uu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cu=null;function Mc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var du=null,vs=null,ys=null;function nf(e){if(e=Xi(e)){if(typeof du!="function")throw Error($(280));var t=e.stateNode;t&&(t=Pl(t),du(e.stateNode,e.type,t))}}function Qp(e){vs?ys?ys.push(e):ys=[e]:vs=e}function Kp(){if(vs){var e=vs,t=ys;if(ys=vs=null,nf(e),t)for(e=0;e<t.length;e++)nf(t[e])}}function Yp(e,t){return e(t)}function Gp(){}var xa=!1;function qp(e,t,n){if(xa)return e(t,n);xa=!0;try{return Yp(e,t,n)}finally{xa=!1,(vs!==null||ys!==null)&&(Gp(),Kp())}}function Ei(e,t){var n=e.stateNode;if(n===null)return null;var r=Pl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,t,typeof n));return n}var fu=!1;if(_n)try{var Js={};Object.defineProperty(Js,"passive",{get:function(){fu=!0}}),window.addEventListener("test",Js,Js),window.removeEventListener("test",Js,Js)}catch{fu=!1}function Ay(e,t,n,r,s,i,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(m){this.onError(m)}}var hi=!1,Jo=null,Zo=!1,hu=null,$y={onError:function(e){hi=!0,Jo=e}};function Uy(e,t,n,r,s,i,o,l,a){hi=!1,Jo=null,Ay.apply($y,arguments)}function By(e,t,n,r,s,i,o,l,a){if(Uy.apply(this,arguments),hi){if(hi){var c=Jo;hi=!1,Jo=null}else throw Error($(198));Zo||(Zo=!0,hu=c)}}function Xr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Xp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rf(e){if(Xr(e)!==e)throw Error($(188))}function Wy(e){var t=e.alternate;if(!t){if(t=Xr(e),t===null)throw Error($(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return rf(s),e;if(i===r)return rf(s),t;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:t}function Jp(e){return e=Wy(e),e!==null?Zp(e):null}function Zp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Zp(e);if(t!==null)return t;e=e.sibling}return null}var em=Pt.unstable_scheduleCallback,sf=Pt.unstable_cancelCallback,Hy=Pt.unstable_shouldYield,Vy=Pt.unstable_requestPaint,Ue=Pt.unstable_now,Qy=Pt.unstable_getCurrentPriorityLevel,Rc=Pt.unstable_ImmediatePriority,tm=Pt.unstable_UserBlockingPriority,el=Pt.unstable_NormalPriority,Ky=Pt.unstable_LowPriority,nm=Pt.unstable_IdlePriority,Rl=null,mn=null;function Yy(e){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Rl,e,void 0,(e.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:Xy,Gy=Math.log,qy=Math.LN2;function Xy(e){return e>>>=0,e===0?32:31-(Gy(e)/qy|0)|0}var fo=64,ho=4194304;function ai(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function tl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=ai(l):(i&=o,i!==0&&(r=ai(i)))}else o=n&~s,o!==0?r=ai(o):i!==0&&(r=ai(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-rn(t),s=1<<n,r|=e[n],t&=~s;return r}function Jy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zy(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-rn(i),l=1<<o,a=s[o];a===-1?(!(l&n)||l&r)&&(s[o]=Jy(l,t)):a<=t&&(e.expiredLanes|=l),i&=~l}}function pu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function rm(){var e=fo;return fo<<=1,!(fo&4194240)&&(fo=64),e}function wa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-rn(t),e[t]=n}function e0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-rn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Lc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-rn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Se=0;function sm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var im,Tc,om,lm,am,mu=!1,po=[],rr=null,sr=null,ir=null,Ni=new Map,bi=new Map,Hn=[],t0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function of(e,t){switch(e){case"focusin":case"focusout":rr=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":Ni.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bi.delete(t.pointerId)}}function Zs(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Xi(t),t!==null&&Tc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function n0(e,t,n,r,s){switch(t){case"focusin":return rr=Zs(rr,e,t,n,r,s),!0;case"dragenter":return sr=Zs(sr,e,t,n,r,s),!0;case"mouseover":return ir=Zs(ir,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ni.set(i,Zs(Ni.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,bi.set(i,Zs(bi.get(i)||null,e,t,n,r,s)),!0}return!1}function um(e){var t=Nr(e.target);if(t!==null){var n=Xr(t);if(n!==null){if(t=n.tag,t===13){if(t=Xp(n),t!==null){e.blockedOn=t,am(e.priority,function(){om(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _o(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=gu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);cu=r,n.target.dispatchEvent(r),cu=null}else return t=Xi(n),t!==null&&Tc(t),e.blockedOn=n,!1;t.shift()}return!0}function lf(e,t,n){_o(e)&&n.delete(t)}function r0(){mu=!1,rr!==null&&_o(rr)&&(rr=null),sr!==null&&_o(sr)&&(sr=null),ir!==null&&_o(ir)&&(ir=null),Ni.forEach(lf),bi.forEach(lf)}function ei(e,t){e.blockedOn===t&&(e.blockedOn=null,mu||(mu=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,r0)))}function ji(e){function t(s){return ei(s,e)}if(0<po.length){ei(po[0],e);for(var n=1;n<po.length;n++){var r=po[n];r.blockedOn===e&&(r.blockedOn=null)}}for(rr!==null&&ei(rr,e),sr!==null&&ei(sr,e),ir!==null&&ei(ir,e),Ni.forEach(t),bi.forEach(t),n=0;n<Hn.length;n++)r=Hn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Hn.length&&(n=Hn[0],n.blockedOn===null);)um(n),n.blockedOn===null&&Hn.shift()}var xs=Fn.ReactCurrentBatchConfig,nl=!0;function s0(e,t,n,r){var s=Se,i=xs.transition;xs.transition=null;try{Se=1,_c(e,t,n,r)}finally{Se=s,xs.transition=i}}function i0(e,t,n,r){var s=Se,i=xs.transition;xs.transition=null;try{Se=4,_c(e,t,n,r)}finally{Se=s,xs.transition=i}}function _c(e,t,n,r){if(nl){var s=gu(e,t,n,r);if(s===null)La(e,t,r,rl,n),of(e,r);else if(n0(s,e,t,n,r))r.stopPropagation();else if(of(e,r),t&4&&-1<t0.indexOf(e)){for(;s!==null;){var i=Xi(s);if(i!==null&&im(i),i=gu(e,t,n,r),i===null&&La(e,t,r,rl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else La(e,t,r,null,n)}}var rl=null;function gu(e,t,n,r){if(rl=null,e=Mc(r),e=Nr(e),e!==null)if(t=Xr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Xp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return rl=e,null}function cm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qy()){case Rc:return 1;case tm:return 4;case el:case Ky:return 16;case nm:return 536870912;default:return 16}default:return 16}}var tr=null,Pc=null,Po=null;function dm(){if(Po)return Po;var e,t=Pc,n=t.length,r,s="value"in tr?tr.value:tr.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Po=s.slice(e,1<r?1-r:void 0)}function Io(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function mo(){return!0}function af(){return!1}function Ot(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?mo:af,this.isPropagationStopped=af,this}return Pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mo)},persist:function(){},isPersistent:mo}),t}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ic=Ot(Vs),qi=Pe({},Vs,{view:0,detail:0}),o0=Ot(qi),Sa,ka,ti,Ll=Pe({},qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ti&&(ti&&e.type==="mousemove"?(Sa=e.screenX-ti.screenX,ka=e.screenY-ti.screenY):ka=Sa=0,ti=e),Sa)},movementY:function(e){return"movementY"in e?e.movementY:ka}}),uf=Ot(Ll),l0=Pe({},Ll,{dataTransfer:0}),a0=Ot(l0),u0=Pe({},qi,{relatedTarget:0}),Ca=Ot(u0),c0=Pe({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),d0=Ot(c0),f0=Pe({},Vs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),h0=Ot(f0),p0=Pe({},Vs,{data:0}),cf=Ot(p0),m0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},v0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=v0[e])?!!t[e]:!1}function Oc(){return y0}var x0=Pe({},qi,{key:function(e){if(e.key){var t=m0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Io(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?g0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oc,charCode:function(e){return e.type==="keypress"?Io(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Io(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),w0=Ot(x0),S0=Pe({},Ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),df=Ot(S0),k0=Pe({},qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oc}),C0=Ot(k0),E0=Pe({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),N0=Ot(E0),b0=Pe({},Ll,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),j0=Ot(b0),M0=[9,13,27,32],Fc=_n&&"CompositionEvent"in window,pi=null;_n&&"documentMode"in document&&(pi=document.documentMode);var R0=_n&&"TextEvent"in window&&!pi,fm=_n&&(!Fc||pi&&8<pi&&11>=pi),ff=" ",hf=!1;function hm(e,t){switch(e){case"keyup":return M0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var os=!1;function L0(e,t){switch(e){case"compositionend":return pm(t);case"keypress":return t.which!==32?null:(hf=!0,ff);case"textInput":return e=t.data,e===ff&&hf?null:e;default:return null}}function T0(e,t){if(os)return e==="compositionend"||!Fc&&hm(e,t)?(e=dm(),Po=Pc=tr=null,os=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fm&&t.locale!=="ko"?null:t.data;default:return null}}var _0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_0[e.type]:t==="textarea"}function mm(e,t,n,r){Qp(r),t=sl(t,"onChange"),0<t.length&&(n=new Ic("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var mi=null,Mi=null;function P0(e){bm(e,0)}function Tl(e){var t=us(e);if(Ap(t))return e}function I0(e,t){if(e==="change")return t}var gm=!1;if(_n){var Ea;if(_n){var Na="oninput"in document;if(!Na){var mf=document.createElement("div");mf.setAttribute("oninput","return;"),Na=typeof mf.oninput=="function"}Ea=Na}else Ea=!1;gm=Ea&&(!document.documentMode||9<document.documentMode)}function gf(){mi&&(mi.detachEvent("onpropertychange",vm),Mi=mi=null)}function vm(e){if(e.propertyName==="value"&&Tl(Mi)){var t=[];mm(t,Mi,e,Mc(e)),qp(P0,t)}}function O0(e,t,n){e==="focusin"?(gf(),mi=t,Mi=n,mi.attachEvent("onpropertychange",vm)):e==="focusout"&&gf()}function F0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tl(Mi)}function D0(e,t){if(e==="click")return Tl(t)}function z0(e,t){if(e==="input"||e==="change")return Tl(t)}function A0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var on=typeof Object.is=="function"?Object.is:A0;function Ri(e,t){if(on(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ja.call(t,s)||!on(e[s],t[s]))return!1}return!0}function vf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yf(e,t){var n=vf(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vf(n)}}function ym(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ym(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xm(){for(var e=window,t=Xo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Xo(e.document)}return t}function Dc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $0(e){var t=xm(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ym(n.ownerDocument.documentElement,n)){if(r!==null&&Dc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=yf(n,i);var o=yf(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var U0=_n&&"documentMode"in document&&11>=document.documentMode,ls=null,vu=null,gi=null,yu=!1;function xf(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yu||ls==null||ls!==Xo(r)||(r=ls,"selectionStart"in r&&Dc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gi&&Ri(gi,r)||(gi=r,r=sl(vu,"onSelect"),0<r.length&&(t=new Ic("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ls)))}function go(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var as={animationend:go("Animation","AnimationEnd"),animationiteration:go("Animation","AnimationIteration"),animationstart:go("Animation","AnimationStart"),transitionend:go("Transition","TransitionEnd")},ba={},wm={};_n&&(wm=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function _l(e){if(ba[e])return ba[e];if(!as[e])return e;var t=as[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wm)return ba[e]=t[n];return e}var Sm=_l("animationend"),km=_l("animationiteration"),Cm=_l("animationstart"),Em=_l("transitionend"),Nm=new Map,wf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(e,t){Nm.set(e,t),qr(t,[e])}for(var ja=0;ja<wf.length;ja++){var Ma=wf[ja],B0=Ma.toLowerCase(),W0=Ma[0].toUpperCase()+Ma.slice(1);mr(B0,"on"+W0)}mr(Sm,"onAnimationEnd");mr(km,"onAnimationIteration");mr(Cm,"onAnimationStart");mr("dblclick","onDoubleClick");mr("focusin","onFocus");mr("focusout","onBlur");mr(Em,"onTransitionEnd");Ds("onMouseEnter",["mouseout","mouseover"]);Ds("onMouseLeave",["mouseout","mouseover"]);Ds("onPointerEnter",["pointerout","pointerover"]);Ds("onPointerLeave",["pointerout","pointerover"]);qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ui="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ui));function Sf(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,By(r,t,void 0,e),e.currentTarget=null}function bm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==i&&s.isPropagationStopped())break e;Sf(s,l,c),i=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==i&&s.isPropagationStopped())break e;Sf(s,l,c),i=a}}}if(Zo)throw e=hu,Zo=!1,hu=null,e}function je(e,t){var n=t[Cu];n===void 0&&(n=t[Cu]=new Set);var r=e+"__bubble";n.has(r)||(jm(t,e,2,!1),n.add(r))}function Ra(e,t,n){var r=0;t&&(r|=4),jm(n,e,r,t)}var vo="_reactListening"+Math.random().toString(36).slice(2);function Li(e){if(!e[vo]){e[vo]=!0,Ip.forEach(function(n){n!=="selectionchange"&&(H0.has(n)||Ra(n,!1,e),Ra(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vo]||(t[vo]=!0,Ra("selectionchange",!1,t))}}function jm(e,t,n,r){switch(cm(t)){case 1:var s=s0;break;case 4:s=i0;break;default:s=_c}n=s.bind(null,t,n,e),s=void 0,!fu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function La(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Nr(l),o===null)return;if(a=o.tag,a===5||a===6){r=i=o;continue e}l=l.parentNode}}r=r.return}qp(function(){var c=i,m=Mc(n),h=[];e:{var v=Nm.get(e);if(v!==void 0){var S=Ic,k=e;switch(e){case"keypress":if(Io(n)===0)break e;case"keydown":case"keyup":S=w0;break;case"focusin":k="focus",S=Ca;break;case"focusout":k="blur",S=Ca;break;case"beforeblur":case"afterblur":S=Ca;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=uf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=a0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=C0;break;case Sm:case km:case Cm:S=d0;break;case Em:S=N0;break;case"scroll":S=o0;break;case"wheel":S=j0;break;case"copy":case"cut":case"paste":S=h0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=df}var N=(t&4)!==0,T=!N&&e==="scroll",y=N?v!==null?v+"Capture":null:v;N=[];for(var g=c,p;g!==null;){p=g;var f=p.stateNode;if(p.tag===5&&f!==null&&(p=f,y!==null&&(f=Ei(g,y),f!=null&&N.push(Ti(g,f,p)))),T)break;g=g.return}0<N.length&&(v=new S(v,k,null,n,m),h.push({event:v,listeners:N}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",v&&n!==cu&&(k=n.relatedTarget||n.fromElement)&&(Nr(k)||k[Pn]))break e;if((S||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,S?(k=n.relatedTarget||n.toElement,S=c,k=k?Nr(k):null,k!==null&&(T=Xr(k),k!==T||k.tag!==5&&k.tag!==6)&&(k=null)):(S=null,k=c),S!==k)){if(N=uf,f="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(N=df,f="onPointerLeave",y="onPointerEnter",g="pointer"),T=S==null?v:us(S),p=k==null?v:us(k),v=new N(f,g+"leave",S,n,m),v.target=T,v.relatedTarget=p,f=null,Nr(m)===c&&(N=new N(y,g+"enter",k,n,m),N.target=p,N.relatedTarget=T,f=N),T=f,S&&k)t:{for(N=S,y=k,g=0,p=N;p;p=Zr(p))g++;for(p=0,f=y;f;f=Zr(f))p++;for(;0<g-p;)N=Zr(N),g--;for(;0<p-g;)y=Zr(y),p--;for(;g--;){if(N===y||y!==null&&N===y.alternate)break t;N=Zr(N),y=Zr(y)}N=null}else N=null;S!==null&&kf(h,v,S,N,!1),k!==null&&T!==null&&kf(h,T,k,N,!0)}}e:{if(v=c?us(c):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var C=I0;else if(pf(v))if(gm)C=z0;else{C=F0;var R=O0}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(C=D0);if(C&&(C=C(e,c))){mm(h,C,n,m);break e}R&&R(e,v,c),e==="focusout"&&(R=v._wrapperState)&&R.controlled&&v.type==="number"&&iu(v,"number",v.value)}switch(R=c?us(c):window,e){case"focusin":(pf(R)||R.contentEditable==="true")&&(ls=R,vu=c,gi=null);break;case"focusout":gi=vu=ls=null;break;case"mousedown":yu=!0;break;case"contextmenu":case"mouseup":case"dragend":yu=!1,xf(h,n,m);break;case"selectionchange":if(U0)break;case"keydown":case"keyup":xf(h,n,m)}var j;if(Fc)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else os?hm(e,n)&&(b="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(fm&&n.locale!=="ko"&&(os||b!=="onCompositionStart"?b==="onCompositionEnd"&&os&&(j=dm()):(tr=m,Pc="value"in tr?tr.value:tr.textContent,os=!0)),R=sl(c,b),0<R.length&&(b=new cf(b,e,null,n,m),h.push({event:b,listeners:R}),j?b.data=j:(j=pm(n),j!==null&&(b.data=j)))),(j=R0?L0(e,n):T0(e,n))&&(c=sl(c,"onBeforeInput"),0<c.length&&(m=new cf("onBeforeInput","beforeinput",null,n,m),h.push({event:m,listeners:c}),m.data=j))}bm(h,t)})}function Ti(e,t,n){return{instance:e,listener:t,currentTarget:n}}function sl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ei(e,n),i!=null&&r.unshift(Ti(e,i,s)),i=Ei(e,t),i!=null&&r.push(Ti(e,i,s))),e=e.return}return r}function Zr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function kf(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,s?(a=Ei(n,i),a!=null&&o.unshift(Ti(n,a,l))):s||(a=Ei(n,i),a!=null&&o.push(Ti(n,a,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var V0=/\r\n?/g,Q0=/\u0000|\uFFFD/g;function Cf(e){return(typeof e=="string"?e:""+e).replace(V0,`
`).replace(Q0,"")}function yo(e,t,n){if(t=Cf(t),Cf(e)!==t&&n)throw Error($(425))}function il(){}var xu=null,wu=null;function Su(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ku=typeof setTimeout=="function"?setTimeout:void 0,K0=typeof clearTimeout=="function"?clearTimeout:void 0,Ef=typeof Promise=="function"?Promise:void 0,Y0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ef<"u"?function(e){return Ef.resolve(null).then(e).catch(G0)}:ku;function G0(e){setTimeout(function(){throw e})}function Ta(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ji(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ji(t)}function or(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Qs=Math.random().toString(36).slice(2),pn="__reactFiber$"+Qs,_i="__reactProps$"+Qs,Pn="__reactContainer$"+Qs,Cu="__reactEvents$"+Qs,q0="__reactListeners$"+Qs,X0="__reactHandles$"+Qs;function Nr(e){var t=e[pn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pn]||n[pn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Nf(e);e!==null;){if(n=e[pn])return n;e=Nf(e)}return t}e=n,n=e.parentNode}return null}function Xi(e){return e=e[pn]||e[Pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function us(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function Pl(e){return e[_i]||null}var Eu=[],cs=-1;function gr(e){return{current:e}}function Me(e){0>cs||(e.current=Eu[cs],Eu[cs]=null,cs--)}function Ne(e,t){cs++,Eu[cs]=e.current,e.current=t}var pr={},lt=gr(pr),Et=gr(!1),Wr=pr;function zs(e,t){var n=e.type.contextTypes;if(!n)return pr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Nt(e){return e=e.childContextTypes,e!=null}function ol(){Me(Et),Me(lt)}function bf(e,t,n){if(lt.current!==pr)throw Error($(168));Ne(lt,t),Ne(Et,n)}function Mm(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error($(108,Oy(e)||"Unknown",s));return Pe({},n,r)}function ll(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pr,Wr=lt.current,Ne(lt,e),Ne(Et,Et.current),!0}function jf(e,t,n){var r=e.stateNode;if(!r)throw Error($(169));n?(e=Mm(e,t,Wr),r.__reactInternalMemoizedMergedChildContext=e,Me(Et),Me(lt),Ne(lt,e)):Me(Et),Ne(Et,n)}var kn=null,Il=!1,_a=!1;function Rm(e){kn===null?kn=[e]:kn.push(e)}function J0(e){Il=!0,Rm(e)}function vr(){if(!_a&&kn!==null){_a=!0;var e=0,t=Se;try{var n=kn;for(Se=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}kn=null,Il=!1}catch(s){throw kn!==null&&(kn=kn.slice(e+1)),em(Rc,vr),s}finally{Se=t,_a=!1}}return null}var ds=[],fs=0,al=null,ul=0,At=[],$t=0,Hr=null,jn=1,Mn="";function Cr(e,t){ds[fs++]=ul,ds[fs++]=al,al=e,ul=t}function Lm(e,t,n){At[$t++]=jn,At[$t++]=Mn,At[$t++]=Hr,Hr=e;var r=jn;e=Mn;var s=32-rn(r)-1;r&=~(1<<s),n+=1;var i=32-rn(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,jn=1<<32-rn(t)+s|n<<s|r,Mn=i+e}else jn=1<<i|n<<s|r,Mn=e}function zc(e){e.return!==null&&(Cr(e,1),Lm(e,1,0))}function Ac(e){for(;e===al;)al=ds[--fs],ds[fs]=null,ul=ds[--fs],ds[fs]=null;for(;e===Hr;)Hr=At[--$t],At[$t]=null,Mn=At[--$t],At[$t]=null,jn=At[--$t],At[$t]=null}var _t=null,Tt=null,Le=!1,tn=null;function Tm(e,t){var n=Bt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Mf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,_t=e,Tt=or(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,_t=e,Tt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Hr!==null?{id:jn,overflow:Mn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Bt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,_t=e,Tt=null,!0):!1;default:return!1}}function Nu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function bu(e){if(Le){var t=Tt;if(t){var n=t;if(!Mf(e,t)){if(Nu(e))throw Error($(418));t=or(n.nextSibling);var r=_t;t&&Mf(e,t)?Tm(r,n):(e.flags=e.flags&-4097|2,Le=!1,_t=e)}}else{if(Nu(e))throw Error($(418));e.flags=e.flags&-4097|2,Le=!1,_t=e}}}function Rf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_t=e}function xo(e){if(e!==_t)return!1;if(!Le)return Rf(e),Le=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Su(e.type,e.memoizedProps)),t&&(t=Tt)){if(Nu(e))throw _m(),Error($(418));for(;t;)Tm(e,t),t=or(t.nextSibling)}if(Rf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Tt=or(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Tt=null}}else Tt=_t?or(e.stateNode.nextSibling):null;return!0}function _m(){for(var e=Tt;e;)e=or(e.nextSibling)}function As(){Tt=_t=null,Le=!1}function $c(e){tn===null?tn=[e]:tn.push(e)}var Z0=Fn.ReactCurrentBatchConfig;function ni(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function wo(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Lf(e){var t=e._init;return t(e._payload)}function Pm(e){function t(y,g){if(e){var p=y.deletions;p===null?(y.deletions=[g],y.flags|=16):p.push(g)}}function n(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function s(y,g){return y=cr(y,g),y.index=0,y.sibling=null,y}function i(y,g,p){return y.index=p,e?(p=y.alternate,p!==null?(p=p.index,p<g?(y.flags|=2,g):p):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,g,p,f){return g===null||g.tag!==6?(g=Aa(p,y.mode,f),g.return=y,g):(g=s(g,p),g.return=y,g)}function a(y,g,p,f){var C=p.type;return C===is?m(y,g,p.props.children,f,p.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Bn&&Lf(C)===g.type)?(f=s(g,p.props),f.ref=ni(y,g,p),f.return=y,f):(f=Uo(p.type,p.key,p.props,null,y.mode,f),f.ref=ni(y,g,p),f.return=y,f)}function c(y,g,p,f){return g===null||g.tag!==4||g.stateNode.containerInfo!==p.containerInfo||g.stateNode.implementation!==p.implementation?(g=$a(p,y.mode,f),g.return=y,g):(g=s(g,p.children||[]),g.return=y,g)}function m(y,g,p,f,C){return g===null||g.tag!==7?(g=Br(p,y.mode,f,C),g.return=y,g):(g=s(g,p),g.return=y,g)}function h(y,g,p){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Aa(""+g,y.mode,p),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ao:return p=Uo(g.type,g.key,g.props,null,y.mode,p),p.ref=ni(y,null,g),p.return=y,p;case ss:return g=$a(g,y.mode,p),g.return=y,g;case Bn:var f=g._init;return h(y,f(g._payload),p)}if(li(g)||Xs(g))return g=Br(g,y.mode,p,null),g.return=y,g;wo(y,g)}return null}function v(y,g,p,f){var C=g!==null?g.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return C!==null?null:l(y,g,""+p,f);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ao:return p.key===C?a(y,g,p,f):null;case ss:return p.key===C?c(y,g,p,f):null;case Bn:return C=p._init,v(y,g,C(p._payload),f)}if(li(p)||Xs(p))return C!==null?null:m(y,g,p,f,null);wo(y,p)}return null}function S(y,g,p,f,C){if(typeof f=="string"&&f!==""||typeof f=="number")return y=y.get(p)||null,l(g,y,""+f,C);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ao:return y=y.get(f.key===null?p:f.key)||null,a(g,y,f,C);case ss:return y=y.get(f.key===null?p:f.key)||null,c(g,y,f,C);case Bn:var R=f._init;return S(y,g,p,R(f._payload),C)}if(li(f)||Xs(f))return y=y.get(p)||null,m(g,y,f,C,null);wo(g,f)}return null}function k(y,g,p,f){for(var C=null,R=null,j=g,b=g=0,_=null;j!==null&&b<p.length;b++){j.index>b?(_=j,j=null):_=j.sibling;var E=v(y,j,p[b],f);if(E===null){j===null&&(j=_);break}e&&j&&E.alternate===null&&t(y,j),g=i(E,g,b),R===null?C=E:R.sibling=E,R=E,j=_}if(b===p.length)return n(y,j),Le&&Cr(y,b),C;if(j===null){for(;b<p.length;b++)j=h(y,p[b],f),j!==null&&(g=i(j,g,b),R===null?C=j:R.sibling=j,R=j);return Le&&Cr(y,b),C}for(j=r(y,j);b<p.length;b++)_=S(j,y,b,p[b],f),_!==null&&(e&&_.alternate!==null&&j.delete(_.key===null?b:_.key),g=i(_,g,b),R===null?C=_:R.sibling=_,R=_);return e&&j.forEach(function(O){return t(y,O)}),Le&&Cr(y,b),C}function N(y,g,p,f){var C=Xs(p);if(typeof C!="function")throw Error($(150));if(p=C.call(p),p==null)throw Error($(151));for(var R=C=null,j=g,b=g=0,_=null,E=p.next();j!==null&&!E.done;b++,E=p.next()){j.index>b?(_=j,j=null):_=j.sibling;var O=v(y,j,E.value,f);if(O===null){j===null&&(j=_);break}e&&j&&O.alternate===null&&t(y,j),g=i(O,g,b),R===null?C=O:R.sibling=O,R=O,j=_}if(E.done)return n(y,j),Le&&Cr(y,b),C;if(j===null){for(;!E.done;b++,E=p.next())E=h(y,E.value,f),E!==null&&(g=i(E,g,b),R===null?C=E:R.sibling=E,R=E);return Le&&Cr(y,b),C}for(j=r(y,j);!E.done;b++,E=p.next())E=S(j,y,b,E.value,f),E!==null&&(e&&E.alternate!==null&&j.delete(E.key===null?b:E.key),g=i(E,g,b),R===null?C=E:R.sibling=E,R=E);return e&&j.forEach(function(Q){return t(y,Q)}),Le&&Cr(y,b),C}function T(y,g,p,f){if(typeof p=="object"&&p!==null&&p.type===is&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case ao:e:{for(var C=p.key,R=g;R!==null;){if(R.key===C){if(C=p.type,C===is){if(R.tag===7){n(y,R.sibling),g=s(R,p.props.children),g.return=y,y=g;break e}}else if(R.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Bn&&Lf(C)===R.type){n(y,R.sibling),g=s(R,p.props),g.ref=ni(y,R,p),g.return=y,y=g;break e}n(y,R);break}else t(y,R);R=R.sibling}p.type===is?(g=Br(p.props.children,y.mode,f,p.key),g.return=y,y=g):(f=Uo(p.type,p.key,p.props,null,y.mode,f),f.ref=ni(y,g,p),f.return=y,y=f)}return o(y);case ss:e:{for(R=p.key;g!==null;){if(g.key===R)if(g.tag===4&&g.stateNode.containerInfo===p.containerInfo&&g.stateNode.implementation===p.implementation){n(y,g.sibling),g=s(g,p.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else t(y,g);g=g.sibling}g=$a(p,y.mode,f),g.return=y,y=g}return o(y);case Bn:return R=p._init,T(y,g,R(p._payload),f)}if(li(p))return k(y,g,p,f);if(Xs(p))return N(y,g,p,f);wo(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,g!==null&&g.tag===6?(n(y,g.sibling),g=s(g,p),g.return=y,y=g):(n(y,g),g=Aa(p,y.mode,f),g.return=y,y=g),o(y)):n(y,g)}return T}var $s=Pm(!0),Im=Pm(!1),cl=gr(null),dl=null,hs=null,Uc=null;function Bc(){Uc=hs=dl=null}function Wc(e){var t=cl.current;Me(cl),e._currentValue=t}function ju(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ws(e,t){dl=e,Uc=hs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ct=!0),e.firstContext=null)}function Ht(e){var t=e._currentValue;if(Uc!==e)if(e={context:e,memoizedValue:t,next:null},hs===null){if(dl===null)throw Error($(308));hs=e,dl.dependencies={lanes:0,firstContext:e}}else hs=hs.next=e;return t}var br=null;function Hc(e){br===null?br=[e]:br.push(e)}function Om(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Hc(t)):(n.next=s.next,s.next=n),t.interleaved=n,In(e,r)}function In(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Wn=!1;function Vc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function lr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,In(e,n)}return s=r.interleaved,s===null?(t.next=t,Hc(r)):(t.next=s.next,s.next=t),r.interleaved=t,In(e,n)}function Oo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Lc(e,n)}}function Tf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fl(e,t,n,r){var s=e.updateQueue;Wn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?i=c:o.next=c,o=a;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=c:l.next=c,m.lastBaseUpdate=a))}if(i!==null){var h=s.baseState;o=0,m=c=a=null,l=i;do{var v=l.lane,S=l.eventTime;if((r&v)===v){m!==null&&(m=m.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=e,N=l;switch(v=t,S=n,N.tag){case 1:if(k=N.payload,typeof k=="function"){h=k.call(S,h,v);break e}h=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=N.payload,v=typeof k=="function"?k.call(S,h,v):k,v==null)break e;h=Pe({},h,v);break e;case 2:Wn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else S={eventTime:S,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(c=m=S,a=h):m=m.next=S,o|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(m===null&&(a=h),s.baseState=a,s.firstBaseUpdate=c,s.lastBaseUpdate=m,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Qr|=o,e.lanes=o,e.memoizedState=h}}function _f(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Ji={},gn=gr(Ji),Pi=gr(Ji),Ii=gr(Ji);function jr(e){if(e===Ji)throw Error($(174));return e}function Qc(e,t){switch(Ne(Ii,t),Ne(Pi,e),Ne(gn,Ji),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lu(t,e)}Me(gn),Ne(gn,t)}function Us(){Me(gn),Me(Pi),Me(Ii)}function Dm(e){jr(Ii.current);var t=jr(gn.current),n=lu(t,e.type);t!==n&&(Ne(Pi,e),Ne(gn,n))}function Kc(e){Pi.current===e&&(Me(gn),Me(Pi))}var Te=gr(0);function hl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pa=[];function Yc(){for(var e=0;e<Pa.length;e++)Pa[e]._workInProgressVersionPrimary=null;Pa.length=0}var Fo=Fn.ReactCurrentDispatcher,Ia=Fn.ReactCurrentBatchConfig,Vr=0,_e=null,Qe=null,Xe=null,pl=!1,vi=!1,Oi=0,ex=0;function st(){throw Error($(321))}function Gc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!on(e[n],t[n]))return!1;return!0}function qc(e,t,n,r,s,i){if(Vr=i,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Fo.current=e===null||e.memoizedState===null?sx:ix,e=n(r,s),vi){i=0;do{if(vi=!1,Oi=0,25<=i)throw Error($(301));i+=1,Xe=Qe=null,t.updateQueue=null,Fo.current=ox,e=n(r,s)}while(vi)}if(Fo.current=ml,t=Qe!==null&&Qe.next!==null,Vr=0,Xe=Qe=_e=null,pl=!1,t)throw Error($(300));return e}function Xc(){var e=Oi!==0;return Oi=0,e}function cn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?_e.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function Vt(){if(Qe===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var t=Xe===null?_e.memoizedState:Xe.next;if(t!==null)Xe=t,Qe=e;else{if(e===null)throw Error($(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},Xe===null?_e.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function Fi(e,t){return typeof t=="function"?t(e):t}function Oa(e){var t=Vt(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=Qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,a=null,c=i;do{var m=c.lane;if((Vr&m)===m)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:m,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=h,o=r):a=a.next=h,_e.lanes|=m,Qr|=m}c=c.next}while(c!==null&&c!==i);a===null?o=r:a.next=l,on(r,t.memoizedState)||(Ct=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,_e.lanes|=i,Qr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Fa(e){var t=Vt(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);on(i,t.memoizedState)||(Ct=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function zm(){}function Am(e,t){var n=_e,r=Vt(),s=t(),i=!on(r.memoizedState,s);if(i&&(r.memoizedState=s,Ct=!0),r=r.queue,Jc(Bm.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Di(9,Um.bind(null,n,r,s,t),void 0,null),Je===null)throw Error($(349));Vr&30||$m(n,t,s)}return s}function $m(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Um(e,t,n,r){t.value=n,t.getSnapshot=r,Wm(t)&&Hm(e)}function Bm(e,t,n){return n(function(){Wm(t)&&Hm(e)})}function Wm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!on(e,n)}catch{return!0}}function Hm(e){var t=In(e,1);t!==null&&sn(t,e,1,-1)}function Pf(e){var t=cn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:e},t.queue=e,e=e.dispatch=rx.bind(null,_e,e),[t.memoizedState,e]}function Di(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Vm(){return Vt().memoizedState}function Do(e,t,n,r){var s=cn();_e.flags|=e,s.memoizedState=Di(1|t,n,void 0,r===void 0?null:r)}function Ol(e,t,n,r){var s=Vt();r=r===void 0?null:r;var i=void 0;if(Qe!==null){var o=Qe.memoizedState;if(i=o.destroy,r!==null&&Gc(r,o.deps)){s.memoizedState=Di(t,n,i,r);return}}_e.flags|=e,s.memoizedState=Di(1|t,n,i,r)}function If(e,t){return Do(8390656,8,e,t)}function Jc(e,t){return Ol(2048,8,e,t)}function Qm(e,t){return Ol(4,2,e,t)}function Km(e,t){return Ol(4,4,e,t)}function Ym(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gm(e,t,n){return n=n!=null?n.concat([e]):null,Ol(4,4,Ym.bind(null,t,e),n)}function Zc(){}function qm(e,t){var n=Vt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Gc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xm(e,t){var n=Vt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Gc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jm(e,t,n){return Vr&21?(on(n,t)||(n=rm(),_e.lanes|=n,Qr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ct=!0),e.memoizedState=n)}function tx(e,t){var n=Se;Se=n!==0&&4>n?n:4,e(!0);var r=Ia.transition;Ia.transition={};try{e(!1),t()}finally{Se=n,Ia.transition=r}}function Zm(){return Vt().memoizedState}function nx(e,t,n){var r=ur(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},eg(e))tg(t,n);else if(n=Om(e,t,n,r),n!==null){var s=pt();sn(n,e,r,s),ng(n,t,r)}}function rx(e,t,n){var r=ur(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(eg(e))tg(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,on(l,o)){var a=t.interleaved;a===null?(s.next=s,Hc(t)):(s.next=a.next,a.next=s),t.interleaved=s;return}}catch{}finally{}n=Om(e,t,s,r),n!==null&&(s=pt(),sn(n,e,r,s),ng(n,t,r))}}function eg(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function tg(e,t){vi=pl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ng(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Lc(e,n)}}var ml={readContext:Ht,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},sx={readContext:Ht,useCallback:function(e,t){return cn().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:If,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Do(4194308,4,Ym.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=cn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=cn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=nx.bind(null,_e,e),[r.memoizedState,e]},useRef:function(e){var t=cn();return e={current:e},t.memoizedState=e},useState:Pf,useDebugValue:Zc,useDeferredValue:function(e){return cn().memoizedState=e},useTransition:function(){var e=Pf(!1),t=e[0];return e=tx.bind(null,e[1]),cn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=_e,s=cn();if(Le){if(n===void 0)throw Error($(407));n=n()}else{if(n=t(),Je===null)throw Error($(349));Vr&30||$m(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,If(Bm.bind(null,r,i,e),[e]),r.flags|=2048,Di(9,Um.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=cn(),t=Je.identifierPrefix;if(Le){var n=Mn,r=jn;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Oi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ex++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ix={readContext:Ht,useCallback:qm,useContext:Ht,useEffect:Jc,useImperativeHandle:Gm,useInsertionEffect:Qm,useLayoutEffect:Km,useMemo:Xm,useReducer:Oa,useRef:Vm,useState:function(){return Oa(Fi)},useDebugValue:Zc,useDeferredValue:function(e){var t=Vt();return Jm(t,Qe.memoizedState,e)},useTransition:function(){var e=Oa(Fi)[0],t=Vt().memoizedState;return[e,t]},useMutableSource:zm,useSyncExternalStore:Am,useId:Zm,unstable_isNewReconciler:!1},ox={readContext:Ht,useCallback:qm,useContext:Ht,useEffect:Jc,useImperativeHandle:Gm,useInsertionEffect:Qm,useLayoutEffect:Km,useMemo:Xm,useReducer:Fa,useRef:Vm,useState:function(){return Fa(Fi)},useDebugValue:Zc,useDeferredValue:function(e){var t=Vt();return Qe===null?t.memoizedState=e:Jm(t,Qe.memoizedState,e)},useTransition:function(){var e=Fa(Fi)[0],t=Vt().memoizedState;return[e,t]},useMutableSource:zm,useSyncExternalStore:Am,useId:Zm,unstable_isNewReconciler:!1};function qt(e,t){if(e&&e.defaultProps){t=Pe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Mu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Pe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Fl={isMounted:function(e){return(e=e._reactInternals)?Xr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=pt(),s=ur(e),i=Rn(r,s);i.payload=t,n!=null&&(i.callback=n),t=lr(e,i,s),t!==null&&(sn(t,e,s,r),Oo(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=pt(),s=ur(e),i=Rn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=lr(e,i,s),t!==null&&(sn(t,e,s,r),Oo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=pt(),r=ur(e),s=Rn(n,r);s.tag=2,t!=null&&(s.callback=t),t=lr(e,s,r),t!==null&&(sn(t,e,r,n),Oo(t,e,r))}};function Of(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ri(n,r)||!Ri(s,i):!0}function rg(e,t,n){var r=!1,s=pr,i=t.contextType;return typeof i=="object"&&i!==null?i=Ht(i):(s=Nt(t)?Wr:lt.current,r=t.contextTypes,i=(r=r!=null)?zs(e,s):pr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Fl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ff(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Fl.enqueueReplaceState(t,t.state,null)}function Ru(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Vc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Ht(i):(i=Nt(t)?Wr:lt.current,s.context=zs(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Mu(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Fl.enqueueReplaceState(s,s.state,null),fl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Bs(e,t){try{var n="",r=t;do n+=Iy(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Da(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Lu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var lx=typeof WeakMap=="function"?WeakMap:Map;function sg(e,t,n){n=Rn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){vl||(vl=!0,$u=r),Lu(e,t)},n}function ig(e,t,n){n=Rn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Lu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Lu(e,t),typeof r!="function"&&(ar===null?ar=new Set([this]):ar.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Df(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new lx;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Sx.bind(null,e,t,n),t.then(e,e))}function zf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Af(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Rn(-1,1),t.tag=2,lr(n,t,1))),n.lanes|=1),e)}var ax=Fn.ReactCurrentOwner,Ct=!1;function ft(e,t,n,r){t.child=e===null?Im(t,null,n,r):$s(t,e.child,n,r)}function $f(e,t,n,r,s){n=n.render;var i=t.ref;return ws(t,s),r=qc(e,t,n,r,i,s),n=Xc(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,On(e,t,s)):(Le&&n&&zc(t),t.flags|=1,ft(e,t,r,s),t.child)}function Uf(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!ld(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,og(e,t,i,r,s)):(e=Uo(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ri,n(o,r)&&e.ref===t.ref)return On(e,t,s)}return t.flags|=1,e=cr(i,r),e.ref=t.ref,e.return=t,t.child=e}function og(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ri(i,r)&&e.ref===t.ref)if(Ct=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Ct=!0);else return t.lanes=e.lanes,On(e,t,s)}return Tu(e,t,n,r,s)}function lg(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(ms,Lt),Lt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ne(ms,Lt),Lt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ne(ms,Lt),Lt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ne(ms,Lt),Lt|=r;return ft(e,t,s,n),t.child}function ag(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,s){var i=Nt(n)?Wr:lt.current;return i=zs(t,i),ws(t,s),n=qc(e,t,n,r,i,s),r=Xc(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,On(e,t,s)):(Le&&r&&zc(t),t.flags|=1,ft(e,t,n,s),t.child)}function Bf(e,t,n,r,s){if(Nt(n)){var i=!0;ll(t)}else i=!1;if(ws(t,s),t.stateNode===null)zo(e,t),rg(t,n,r),Ru(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ht(c):(c=Nt(n)?Wr:lt.current,c=zs(t,c));var m=n.getDerivedStateFromProps,h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Ff(t,o,r,c),Wn=!1;var v=t.memoizedState;o.state=v,fl(t,r,o,s),a=t.memoizedState,l!==r||v!==a||Et.current||Wn?(typeof m=="function"&&(Mu(t,n,m,r),a=t.memoizedState),(l=Wn||Of(t,n,l,r,v,a,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fm(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:qt(t.type,l),o.props=c,h=t.pendingProps,v=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Ht(a):(a=Nt(n)?Wr:lt.current,a=zs(t,a));var S=n.getDerivedStateFromProps;(m=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||v!==a)&&Ff(t,o,r,a),Wn=!1,v=t.memoizedState,o.state=v,fl(t,r,o,s);var k=t.memoizedState;l!==h||v!==k||Et.current||Wn?(typeof S=="function"&&(Mu(t,n,S,r),k=t.memoizedState),(c=Wn||Of(t,n,c,r,v,k,a)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),o.props=r,o.state=k,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return _u(e,t,n,r,i,s)}function _u(e,t,n,r,s,i){ag(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&jf(t,n,!1),On(e,t,i);r=t.stateNode,ax.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=$s(t,e.child,null,i),t.child=$s(t,null,l,i)):ft(e,t,l,i),t.memoizedState=r.state,s&&jf(t,n,!0),t.child}function ug(e){var t=e.stateNode;t.pendingContext?bf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bf(e,t.context,!1),Qc(e,t.containerInfo)}function Wf(e,t,n,r,s){return As(),$c(s),t.flags|=256,ft(e,t,n,r),t.child}var Pu={dehydrated:null,treeContext:null,retryLane:0};function Iu(e){return{baseLanes:e,cachePool:null,transitions:null}}function cg(e,t,n){var r=t.pendingProps,s=Te.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ne(Te,s&1),e===null)return bu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Al(o,r,0,null),e=Br(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Iu(n),t.memoizedState=Pu,e):ed(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return ux(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=cr(s,a),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=cr(l,i):(i=Br(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Iu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Pu,r}return i=e.child,e=i.sibling,r=cr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ed(e,t){return t=Al({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function So(e,t,n,r){return r!==null&&$c(r),$s(t,e.child,null,n),e=ed(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ux(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Da(Error($(422))),So(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Al({mode:"visible",children:r.children},s,0,null),i=Br(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&$s(t,e.child,null,o),t.child.memoizedState=Iu(o),t.memoizedState=Pu,i);if(!(t.mode&1))return So(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=Da(i,r,void 0),So(e,t,o,r)}if(l=(o&e.childLanes)!==0,Ct||l){if(r=Je,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,In(e,s),sn(r,e,s,-1))}return od(),r=Da(Error($(421))),So(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=kx.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Tt=or(s.nextSibling),_t=t,Le=!0,tn=null,e!==null&&(At[$t++]=jn,At[$t++]=Mn,At[$t++]=Hr,jn=e.id,Mn=e.overflow,Hr=t),t=ed(t,r.children),t.flags|=4096,t)}function Hf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ju(e.return,t,n)}function za(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function dg(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(ft(e,t,r.children,n),r=Te.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hf(e,n,t);else if(e.tag===19)Hf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ne(Te,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&hl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),za(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&hl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}za(t,!0,n,null,i);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function On(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Qr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,n=cr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=cr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function cx(e,t,n){switch(t.tag){case 3:ug(t),As();break;case 5:Dm(t);break;case 1:Nt(t.type)&&ll(t);break;case 4:Qc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ne(cl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Te,Te.current&1),t.flags|=128,null):n&t.child.childLanes?cg(e,t,n):(Ne(Te,Te.current&1),e=On(e,t,n),e!==null?e.sibling:null);Ne(Te,Te.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return dg(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ne(Te,Te.current),r)break;return null;case 22:case 23:return t.lanes=0,lg(e,t,n)}return On(e,t,n)}var fg,Ou,hg,pg;fg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ou=function(){};hg=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,jr(gn.current);var i=null;switch(n){case"input":s=ru(e,s),r=ru(e,r),i=[];break;case"select":s=Pe({},s,{value:void 0}),r=Pe({},r,{value:void 0}),i=[];break;case"textarea":s=ou(e,s),r=ou(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=il)}au(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ki.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var a=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(i||(i=[]),i.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ki.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&je("scroll",e),i||l===a||(i=[])):(i=i||[]).push(c,a))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};pg=function(e,t,n,r){n!==r&&(t.flags|=4)};function ri(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function it(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function dx(e,t,n){var r=t.pendingProps;switch(Ac(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(t),null;case 1:return Nt(t.type)&&ol(),it(t),null;case 3:return r=t.stateNode,Us(),Me(Et),Me(lt),Yc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(xo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,tn!==null&&(Wu(tn),tn=null))),Ou(e,t),it(t),null;case 5:Kc(t);var s=jr(Ii.current);if(n=t.type,e!==null&&t.stateNode!=null)hg(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error($(166));return it(t),null}if(e=jr(gn.current),xo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[pn]=t,r[_i]=i,e=(t.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(s=0;s<ui.length;s++)je(ui[s],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":Jd(r,i),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},je("invalid",r);break;case"textarea":ef(r,i),je("invalid",r)}au(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&yo(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&yo(r.textContent,l,e),s=["children",""+l]):ki.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&je("scroll",r)}switch(n){case"input":uo(r),Zd(r,i,!0);break;case"textarea":uo(r),tf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=il)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Bp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[pn]=t,e[_i]=r,fg(e,t,!1,!1),t.stateNode=e;e:{switch(o=uu(n,r),n){case"dialog":je("cancel",e),je("close",e),s=r;break;case"iframe":case"object":case"embed":je("load",e),s=r;break;case"video":case"audio":for(s=0;s<ui.length;s++)je(ui[s],e);s=r;break;case"source":je("error",e),s=r;break;case"img":case"image":case"link":je("error",e),je("load",e),s=r;break;case"details":je("toggle",e),s=r;break;case"input":Jd(e,r),s=ru(e,r),je("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Pe({},r,{value:void 0}),je("invalid",e);break;case"textarea":ef(e,r),s=ou(e,r),je("invalid",e);break;default:s=r}au(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?Vp(e,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Wp(e,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Ci(e,a):typeof a=="number"&&Ci(e,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ki.hasOwnProperty(i)?a!=null&&i==="onScroll"&&je("scroll",e):a!=null&&Ec(e,i,a,o))}switch(n){case"input":uo(e),Zd(e,r,!1);break;case"textarea":uo(e),tf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+hr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?gs(e,!!r.multiple,i,!1):r.defaultValue!=null&&gs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=il)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return it(t),null;case 6:if(e&&t.stateNode!=null)pg(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error($(166));if(n=jr(Ii.current),jr(gn.current),xo(t)){if(r=t.stateNode,n=t.memoizedProps,r[pn]=t,(i=r.nodeValue!==n)&&(e=_t,e!==null))switch(e.tag){case 3:yo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yo(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pn]=t,t.stateNode=r}return it(t),null;case 13:if(Me(Te),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Le&&Tt!==null&&t.mode&1&&!(t.flags&128))_m(),As(),t.flags|=98560,i=!1;else if(i=xo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error($(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[pn]=t}else As(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;it(t),i=!1}else tn!==null&&(Wu(tn),tn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Te.current&1?Ye===0&&(Ye=3):od())),t.updateQueue!==null&&(t.flags|=4),it(t),null);case 4:return Us(),Ou(e,t),e===null&&Li(t.stateNode.containerInfo),it(t),null;case 10:return Wc(t.type._context),it(t),null;case 17:return Nt(t.type)&&ol(),it(t),null;case 19:if(Me(Te),i=t.memoizedState,i===null)return it(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)ri(i,!1);else{if(Ye!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=hl(e),o!==null){for(t.flags|=128,ri(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ne(Te,Te.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ue()>Ws&&(t.flags|=128,r=!0,ri(i,!1),t.lanes=4194304)}else{if(!r)if(e=hl(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ri(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Le)return it(t),null}else 2*Ue()-i.renderingStartTime>Ws&&n!==1073741824&&(t.flags|=128,r=!0,ri(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ue(),t.sibling=null,n=Te.current,Ne(Te,r?n&1|2:n&1),t):(it(t),null);case 22:case 23:return id(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Lt&1073741824&&(it(t),t.subtreeFlags&6&&(t.flags|=8192)):it(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function fx(e,t){switch(Ac(t),t.tag){case 1:return Nt(t.type)&&ol(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Us(),Me(Et),Me(lt),Yc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Kc(t),null;case 13:if(Me(Te),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));As()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Me(Te),null;case 4:return Us(),null;case 10:return Wc(t.type._context),null;case 22:case 23:return id(),null;case 24:return null;default:return null}}var ko=!1,ot=!1,hx=typeof WeakSet=="function"?WeakSet:Set,Z=null;function ps(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(e,t,r)}else n.current=null}function Fu(e,t,n){try{n()}catch(r){Fe(e,t,r)}}var Vf=!1;function px(e,t){if(xu=nl,e=xm(),Dc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,m=0,h=e,v=null;t:for(;;){for(var S;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(a=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(S=h.firstChild)!==null;)v=h,h=S;for(;;){if(h===e)break t;if(v===n&&++c===s&&(l=o),v===i&&++m===r&&(a=o),(S=h.nextSibling)!==null)break;h=v,v=h.parentNode}h=S}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(wu={focusedElem:e,selectionRange:n},nl=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var N=k.memoizedProps,T=k.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?N:qt(t.type,N),T);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(f){Fe(t,t.return,f)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return k=Vf,Vf=!1,k}function yi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Fu(t,n,i)}s=s.next}while(s!==r)}}function Dl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Du(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function mg(e){var t=e.alternate;t!==null&&(e.alternate=null,mg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[pn],delete t[_i],delete t[Cu],delete t[q0],delete t[X0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gg(e){return e.tag===5||e.tag===3||e.tag===4}function Qf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=il));else if(r!==4&&(e=e.child,e!==null))for(zu(e,t,n),e=e.sibling;e!==null;)zu(e,t,n),e=e.sibling}function Au(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Au(e,t,n),e=e.sibling;e!==null;)Au(e,t,n),e=e.sibling}var et=null,en=!1;function An(e,t,n){for(n=n.child;n!==null;)vg(e,t,n),n=n.sibling}function vg(e,t,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Rl,n)}catch{}switch(n.tag){case 5:ot||ps(n,t);case 6:var r=et,s=en;et=null,An(e,t,n),et=r,en=s,et!==null&&(en?(e=et,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(en?(e=et,n=n.stateNode,e.nodeType===8?Ta(e.parentNode,n):e.nodeType===1&&Ta(e,n),ji(e)):Ta(et,n.stateNode));break;case 4:r=et,s=en,et=n.stateNode.containerInfo,en=!0,An(e,t,n),et=r,en=s;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Fu(n,t,o),s=s.next}while(s!==r)}An(e,t,n);break;case 1:if(!ot&&(ps(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Fe(n,t,l)}An(e,t,n);break;case 21:An(e,t,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,An(e,t,n),ot=r):An(e,t,n);break;default:An(e,t,n)}}function Kf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new hx),t.forEach(function(r){var s=Cx.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Yt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:et=l.stateNode,en=!1;break e;case 3:et=l.stateNode.containerInfo,en=!0;break e;case 4:et=l.stateNode.containerInfo,en=!0;break e}l=l.return}if(et===null)throw Error($(160));vg(i,o,s),et=null,en=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(c){Fe(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yg(t,e),t=t.sibling}function yg(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yt(t,e),un(e),r&4){try{yi(3,e,e.return),Dl(3,e)}catch(N){Fe(e,e.return,N)}try{yi(5,e,e.return)}catch(N){Fe(e,e.return,N)}}break;case 1:Yt(t,e),un(e),r&512&&n!==null&&ps(n,n.return);break;case 5:if(Yt(t,e),un(e),r&512&&n!==null&&ps(n,n.return),e.flags&32){var s=e.stateNode;try{Ci(s,"")}catch(N){Fe(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&$p(s,i),uu(l,o);var c=uu(l,i);for(o=0;o<a.length;o+=2){var m=a[o],h=a[o+1];m==="style"?Vp(s,h):m==="dangerouslySetInnerHTML"?Wp(s,h):m==="children"?Ci(s,h):Ec(s,m,h,c)}switch(l){case"input":su(s,i);break;case"textarea":Up(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?gs(s,!!i.multiple,S,!1):v!==!!i.multiple&&(i.defaultValue!=null?gs(s,!!i.multiple,i.defaultValue,!0):gs(s,!!i.multiple,i.multiple?[]:"",!1))}s[_i]=i}catch(N){Fe(e,e.return,N)}}break;case 6:if(Yt(t,e),un(e),r&4){if(e.stateNode===null)throw Error($(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(N){Fe(e,e.return,N)}}break;case 3:if(Yt(t,e),un(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ji(t.containerInfo)}catch(N){Fe(e,e.return,N)}break;case 4:Yt(t,e),un(e);break;case 13:Yt(t,e),un(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(rd=Ue())),r&4&&Kf(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(ot=(c=ot)||m,Yt(t,e),ot=c):Yt(t,e),un(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!m&&e.mode&1)for(Z=e,m=e.child;m!==null;){for(h=Z=m;Z!==null;){switch(v=Z,S=v.child,v.tag){case 0:case 11:case 14:case 15:yi(4,v,v.return);break;case 1:ps(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(N){Fe(r,n,N)}}break;case 5:ps(v,v.return);break;case 22:if(v.memoizedState!==null){Gf(h);continue}}S!==null?(S.return=v,Z=S):Gf(h)}m=m.sibling}e:for(m=null,h=e;;){if(h.tag===5){if(m===null){m=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,a=h.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Hp("display",o))}catch(N){Fe(e,e.return,N)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(N){Fe(e,e.return,N)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Yt(t,e),un(e),r&4&&Kf(e);break;case 21:break;default:Yt(t,e),un(e)}}function un(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(gg(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ci(s,""),r.flags&=-33);var i=Qf(e);Au(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Qf(e);zu(e,l,o);break;default:throw Error($(161))}}catch(a){Fe(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mx(e,t,n){Z=e,xg(e)}function xg(e,t,n){for(var r=(e.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ko;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||ot;l=ko;var c=ot;if(ko=o,(ot=a)&&!c)for(Z=s;Z!==null;)o=Z,a=o.child,o.tag===22&&o.memoizedState!==null?qf(s):a!==null?(a.return=o,Z=a):qf(s);for(;i!==null;)Z=i,xg(i),i=i.sibling;Z=s,ko=l,ot=c}Yf(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):Yf(e)}}function Yf(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ot||Dl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ot)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:qt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&_f(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}_f(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var m=c.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&ji(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}ot||t.flags&512&&Du(t)}catch(v){Fe(t,t.return,v)}}if(t===e){Z=null;break}if(n=t.sibling,n!==null){n.return=t.return,Z=n;break}Z=t.return}}function Gf(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Z=n;break}Z=t.return}}function qf(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Dl(4,t)}catch(a){Fe(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(a){Fe(t,s,a)}}var i=t.return;try{Du(t)}catch(a){Fe(t,i,a)}break;case 5:var o=t.return;try{Du(t)}catch(a){Fe(t,o,a)}}}catch(a){Fe(t,t.return,a)}if(t===e){Z=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Z=l;break}Z=t.return}}var gx=Math.ceil,gl=Fn.ReactCurrentDispatcher,td=Fn.ReactCurrentOwner,Wt=Fn.ReactCurrentBatchConfig,xe=0,Je=null,We=null,tt=0,Lt=0,ms=gr(0),Ye=0,zi=null,Qr=0,zl=0,nd=0,xi=null,kt=null,rd=0,Ws=1/0,Sn=null,vl=!1,$u=null,ar=null,Co=!1,nr=null,yl=0,wi=0,Uu=null,Ao=-1,$o=0;function pt(){return xe&6?Ue():Ao!==-1?Ao:Ao=Ue()}function ur(e){return e.mode&1?xe&2&&tt!==0?tt&-tt:Z0.transition!==null?($o===0&&($o=rm()),$o):(e=Se,e!==0||(e=window.event,e=e===void 0?16:cm(e.type)),e):1}function sn(e,t,n,r){if(50<wi)throw wi=0,Uu=null,Error($(185));Gi(e,n,r),(!(xe&2)||e!==Je)&&(e===Je&&(!(xe&2)&&(zl|=n),Ye===4&&Vn(e,tt)),bt(e,r),n===1&&xe===0&&!(t.mode&1)&&(Ws=Ue()+500,Il&&vr()))}function bt(e,t){var n=e.callbackNode;Zy(e,t);var r=tl(e,e===Je?tt:0);if(r===0)n!==null&&sf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&sf(n),t===1)e.tag===0?J0(Xf.bind(null,e)):Rm(Xf.bind(null,e)),Y0(function(){!(xe&6)&&vr()}),n=null;else{switch(sm(r)){case 1:n=Rc;break;case 4:n=tm;break;case 16:n=el;break;case 536870912:n=nm;break;default:n=el}n=jg(n,wg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function wg(e,t){if(Ao=-1,$o=0,xe&6)throw Error($(327));var n=e.callbackNode;if(Ss()&&e.callbackNode!==n)return null;var r=tl(e,e===Je?tt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=xl(e,r);else{t=r;var s=xe;xe|=2;var i=kg();(Je!==e||tt!==t)&&(Sn=null,Ws=Ue()+500,Ur(e,t));do try{xx();break}catch(l){Sg(e,l)}while(!0);Bc(),gl.current=i,xe=s,We!==null?t=0:(Je=null,tt=0,t=Ye)}if(t!==0){if(t===2&&(s=pu(e),s!==0&&(r=s,t=Bu(e,s))),t===1)throw n=zi,Ur(e,0),Vn(e,r),bt(e,Ue()),n;if(t===6)Vn(e,r);else{if(s=e.current.alternate,!(r&30)&&!vx(s)&&(t=xl(e,r),t===2&&(i=pu(e),i!==0&&(r=i,t=Bu(e,i))),t===1))throw n=zi,Ur(e,0),Vn(e,r),bt(e,Ue()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error($(345));case 2:Er(e,kt,Sn);break;case 3:if(Vn(e,r),(r&130023424)===r&&(t=rd+500-Ue(),10<t)){if(tl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){pt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ku(Er.bind(null,e,kt,Sn),t);break}Er(e,kt,Sn);break;case 4:if(Vn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-rn(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gx(r/1960))-r,10<r){e.timeoutHandle=ku(Er.bind(null,e,kt,Sn),r);break}Er(e,kt,Sn);break;case 5:Er(e,kt,Sn);break;default:throw Error($(329))}}}return bt(e,Ue()),e.callbackNode===n?wg.bind(null,e):null}function Bu(e,t){var n=xi;return e.current.memoizedState.isDehydrated&&(Ur(e,t).flags|=256),e=xl(e,t),e!==2&&(t=kt,kt=n,t!==null&&Wu(t)),e}function Wu(e){kt===null?kt=e:kt.push.apply(kt,e)}function vx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!on(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vn(e,t){for(t&=~nd,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rn(t),r=1<<n;e[n]=-1,t&=~r}}function Xf(e){if(xe&6)throw Error($(327));Ss();var t=tl(e,0);if(!(t&1))return bt(e,Ue()),null;var n=xl(e,t);if(e.tag!==0&&n===2){var r=pu(e);r!==0&&(t=r,n=Bu(e,r))}if(n===1)throw n=zi,Ur(e,0),Vn(e,t),bt(e,Ue()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Er(e,kt,Sn),bt(e,Ue()),null}function sd(e,t){var n=xe;xe|=1;try{return e(t)}finally{xe=n,xe===0&&(Ws=Ue()+500,Il&&vr())}}function Kr(e){nr!==null&&nr.tag===0&&!(xe&6)&&Ss();var t=xe;xe|=1;var n=Wt.transition,r=Se;try{if(Wt.transition=null,Se=1,e)return e()}finally{Se=r,Wt.transition=n,xe=t,!(xe&6)&&vr()}}function id(){Lt=ms.current,Me(ms)}function Ur(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,K0(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Ac(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ol();break;case 3:Us(),Me(Et),Me(lt),Yc();break;case 5:Kc(r);break;case 4:Us();break;case 13:Me(Te);break;case 19:Me(Te);break;case 10:Wc(r.type._context);break;case 22:case 23:id()}n=n.return}if(Je=e,We=e=cr(e.current,null),tt=Lt=t,Ye=0,zi=null,nd=zl=Qr=0,kt=xi=null,br!==null){for(t=0;t<br.length;t++)if(n=br[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}br=null}return e}function Sg(e,t){do{var n=We;try{if(Bc(),Fo.current=ml,pl){for(var r=_e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}pl=!1}if(Vr=0,Xe=Qe=_e=null,vi=!1,Oi=0,td.current=null,n===null||n.return===null){Ye=1,zi=t,We=null;break}e:{var i=e,o=n.return,l=n,a=t;if(t=tt,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,m=l,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var S=zf(o);if(S!==null){S.flags&=-257,Af(S,o,l,i,t),S.mode&1&&Df(i,c,t),t=S,a=c;var k=t.updateQueue;if(k===null){var N=new Set;N.add(a),t.updateQueue=N}else k.add(a);break e}else{if(!(t&1)){Df(i,c,t),od();break e}a=Error($(426))}}else if(Le&&l.mode&1){var T=zf(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Af(T,o,l,i,t),$c(Bs(a,l));break e}}i=a=Bs(a,l),Ye!==4&&(Ye=2),xi===null?xi=[i]:xi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=sg(i,a,t);Tf(i,y);break e;case 1:l=a;var g=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ar===null||!ar.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var f=ig(i,l,t);Tf(i,f);break e}}i=i.return}while(i!==null)}Eg(n)}catch(C){t=C,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function kg(){var e=gl.current;return gl.current=ml,e===null?ml:e}function od(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),Je===null||!(Qr&268435455)&&!(zl&268435455)||Vn(Je,tt)}function xl(e,t){var n=xe;xe|=2;var r=kg();(Je!==e||tt!==t)&&(Sn=null,Ur(e,t));do try{yx();break}catch(s){Sg(e,s)}while(!0);if(Bc(),xe=n,gl.current=r,We!==null)throw Error($(261));return Je=null,tt=0,Ye}function yx(){for(;We!==null;)Cg(We)}function xx(){for(;We!==null&&!Hy();)Cg(We)}function Cg(e){var t=bg(e.alternate,e,Lt);e.memoizedProps=e.pendingProps,t===null?Eg(e):We=t,td.current=null}function Eg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=fx(n,t),n!==null){n.flags&=32767,We=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ye=6,We=null;return}}else if(n=dx(n,t,Lt),n!==null){We=n;return}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Ye===0&&(Ye=5)}function Er(e,t,n){var r=Se,s=Wt.transition;try{Wt.transition=null,Se=1,wx(e,t,n,r)}finally{Wt.transition=s,Se=r}return null}function wx(e,t,n,r){do Ss();while(nr!==null);if(xe&6)throw Error($(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(e0(e,i),e===Je&&(We=Je=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Co||(Co=!0,jg(el,function(){return Ss(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Wt.transition,Wt.transition=null;var o=Se;Se=1;var l=xe;xe|=4,td.current=null,px(e,n),yg(n,e),$0(wu),nl=!!xu,wu=xu=null,e.current=n,mx(n),Vy(),xe=l,Se=o,Wt.transition=i}else e.current=n;if(Co&&(Co=!1,nr=e,yl=s),i=e.pendingLanes,i===0&&(ar=null),Yy(n.stateNode),bt(e,Ue()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(vl)throw vl=!1,e=$u,$u=null,e;return yl&1&&e.tag!==0&&Ss(),i=e.pendingLanes,i&1?e===Uu?wi++:(wi=0,Uu=e):wi=0,vr(),null}function Ss(){if(nr!==null){var e=sm(yl),t=Wt.transition,n=Se;try{if(Wt.transition=null,Se=16>e?16:e,nr===null)var r=!1;else{if(e=nr,nr=null,yl=0,xe&6)throw Error($(331));var s=xe;for(xe|=4,Z=e.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(Z=c;Z!==null;){var m=Z;switch(m.tag){case 0:case 11:case 15:yi(8,m,i)}var h=m.child;if(h!==null)h.return=m,Z=h;else for(;Z!==null;){m=Z;var v=m.sibling,S=m.return;if(mg(m),m===c){Z=null;break}if(v!==null){v.return=S,Z=v;break}Z=S}}}var k=i.alternate;if(k!==null){var N=k.child;if(N!==null){k.child=null;do{var T=N.sibling;N.sibling=null,N=T}while(N!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:yi(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Z=y;break e}Z=i.return}}var g=e.current;for(Z=g;Z!==null;){o=Z;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,Z=p;else e:for(o=g;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Dl(9,l)}}catch(C){Fe(l,l.return,C)}if(l===o){Z=null;break e}var f=l.sibling;if(f!==null){f.return=l.return,Z=f;break e}Z=l.return}}if(xe=s,vr(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Rl,e)}catch{}r=!0}return r}finally{Se=n,Wt.transition=t}}return!1}function Jf(e,t,n){t=Bs(n,t),t=sg(e,t,1),e=lr(e,t,1),t=pt(),e!==null&&(Gi(e,1,t),bt(e,t))}function Fe(e,t,n){if(e.tag===3)Jf(e,e,n);else for(;t!==null;){if(t.tag===3){Jf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ar===null||!ar.has(r))){e=Bs(n,e),e=ig(t,e,1),t=lr(t,e,1),e=pt(),t!==null&&(Gi(t,1,e),bt(t,e));break}}t=t.return}}function Sx(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=pt(),e.pingedLanes|=e.suspendedLanes&n,Je===e&&(tt&n)===n&&(Ye===4||Ye===3&&(tt&130023424)===tt&&500>Ue()-rd?Ur(e,0):nd|=n),bt(e,t)}function Ng(e,t){t===0&&(e.mode&1?(t=ho,ho<<=1,!(ho&130023424)&&(ho=4194304)):t=1);var n=pt();e=In(e,t),e!==null&&(Gi(e,t,n),bt(e,n))}function kx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ng(e,n)}function Cx(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(t),Ng(e,n)}var bg;bg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Et.current)Ct=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ct=!1,cx(e,t,n);Ct=!!(e.flags&131072)}else Ct=!1,Le&&t.flags&1048576&&Lm(t,ul,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zo(e,t),e=t.pendingProps;var s=zs(t,lt.current);ws(t,n),s=qc(null,t,r,e,s,n);var i=Xc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nt(r)?(i=!0,ll(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Vc(t),s.updater=Fl,t.stateNode=s,s._reactInternals=t,Ru(t,r,e,n),t=_u(null,t,r,!0,i,n)):(t.tag=0,Le&&i&&zc(t),ft(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zo(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Nx(r),e=qt(r,e),s){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Bf(null,t,r,e,n);break e;case 11:t=$f(null,t,r,e,n);break e;case 14:t=Uf(null,t,r,qt(r.type,e),n);break e}throw Error($(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),Tu(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),Bf(e,t,r,s,n);case 3:e:{if(ug(t),e===null)throw Error($(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Fm(e,t),fl(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Bs(Error($(423)),t),t=Wf(e,t,r,n,s);break e}else if(r!==s){s=Bs(Error($(424)),t),t=Wf(e,t,r,n,s);break e}else for(Tt=or(t.stateNode.containerInfo.firstChild),_t=t,Le=!0,tn=null,n=Im(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(As(),r===s){t=On(e,t,n);break e}ft(e,t,r,n)}t=t.child}return t;case 5:return Dm(t),e===null&&bu(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Su(r,s)?o=null:i!==null&&Su(r,i)&&(t.flags|=32),ag(e,t),ft(e,t,o,n),t.child;case 6:return e===null&&bu(t),null;case 13:return cg(e,t,n);case 4:return Qc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=$s(t,null,r,n):ft(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),$f(e,t,r,s,n);case 7:return ft(e,t,t.pendingProps,n),t.child;case 8:return ft(e,t,t.pendingProps.children,n),t.child;case 12:return ft(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Ne(cl,r._currentValue),r._currentValue=o,i!==null)if(on(i.value,o)){if(i.children===s.children&&!Et.current){t=On(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=Rn(-1,n&-n),a.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var m=c.pending;m===null?a.next=a:(a.next=m.next,m.next=a),c.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),ju(i.return,n,t),l.lanes|=n;break}a=a.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ju(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ft(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ws(t,n),s=Ht(s),r=r(s),t.flags|=1,ft(e,t,r,n),t.child;case 14:return r=t.type,s=qt(r,t.pendingProps),s=qt(r.type,s),Uf(e,t,r,s,n);case 15:return og(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:qt(r,s),zo(e,t),t.tag=1,Nt(r)?(e=!0,ll(t)):e=!1,ws(t,n),rg(t,r,s),Ru(t,r,s,n),_u(null,t,r,!0,e,n);case 19:return dg(e,t,n);case 22:return lg(e,t,n)}throw Error($(156,t.tag))};function jg(e,t){return em(e,t)}function Ex(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(e,t,n,r){return new Ex(e,t,n,r)}function ld(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Nx(e){if(typeof e=="function")return ld(e)?1:0;if(e!=null){if(e=e.$$typeof,e===bc)return 11;if(e===jc)return 14}return 2}function cr(e,t){var n=e.alternate;return n===null?(n=Bt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Uo(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")ld(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case is:return Br(n.children,s,i,t);case Nc:o=8,s|=8;break;case Za:return e=Bt(12,n,t,s|2),e.elementType=Za,e.lanes=i,e;case eu:return e=Bt(13,n,t,s),e.elementType=eu,e.lanes=i,e;case tu:return e=Bt(19,n,t,s),e.elementType=tu,e.lanes=i,e;case Dp:return Al(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Op:o=10;break e;case Fp:o=9;break e;case bc:o=11;break e;case jc:o=14;break e;case Bn:o=16,r=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=Bt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Br(e,t,n,r){return e=Bt(7,e,r,t),e.lanes=n,e}function Al(e,t,n,r){return e=Bt(22,e,r,t),e.elementType=Dp,e.lanes=n,e.stateNode={isHidden:!1},e}function Aa(e,t,n){return e=Bt(6,e,null,t),e.lanes=n,e}function $a(e,t,n){return t=Bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bx(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wa(0),this.expirationTimes=wa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wa(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ad(e,t,n,r,s,i,o,l,a){return e=new bx(e,t,n,l,a),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Bt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vc(i),e}function jx(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ss,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Mg(e){if(!e)return pr;e=e._reactInternals;e:{if(Xr(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(Nt(n))return Mm(e,n,t)}return t}function Rg(e,t,n,r,s,i,o,l,a){return e=ad(n,r,!0,e,s,i,o,l,a),e.context=Mg(null),n=e.current,r=pt(),s=ur(n),i=Rn(r,s),i.callback=t??null,lr(n,i,s),e.current.lanes=s,Gi(e,s,r),bt(e,r),e}function $l(e,t,n,r){var s=t.current,i=pt(),o=ur(s);return n=Mg(n),t.context===null?t.context=n:t.pendingContext=n,t=Rn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=lr(s,t,o),e!==null&&(sn(e,s,o,i),Oo(e,s,o)),o}function wl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ud(e,t){Zf(e,t),(e=e.alternate)&&Zf(e,t)}function Mx(){return null}var Lg=typeof reportError=="function"?reportError:function(e){console.error(e)};function cd(e){this._internalRoot=e}Ul.prototype.render=cd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));$l(e,t,null,null)};Ul.prototype.unmount=cd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Kr(function(){$l(null,e,null,null)}),t[Pn]=null}};function Ul(e){this._internalRoot=e}Ul.prototype.unstable_scheduleHydration=function(e){if(e){var t=lm();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Hn.length&&t!==0&&t<Hn[n].priority;n++);Hn.splice(n,0,e),n===0&&um(e)}};function dd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function eh(){}function Rx(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=wl(o);i.call(c)}}var o=Rg(t,r,e,0,null,!1,!1,"",eh);return e._reactRootContainer=o,e[Pn]=o.current,Li(e.nodeType===8?e.parentNode:e),Kr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=wl(a);l.call(c)}}var a=ad(e,0,!1,null,null,!1,!1,"",eh);return e._reactRootContainer=a,e[Pn]=a.current,Li(e.nodeType===8?e.parentNode:e),Kr(function(){$l(t,a,n,r)}),a}function Wl(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var a=wl(o);l.call(a)}}$l(t,o,e,s)}else o=Rx(n,t,e,s,r);return wl(o)}im=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ai(t.pendingLanes);n!==0&&(Lc(t,n|1),bt(t,Ue()),!(xe&6)&&(Ws=Ue()+500,vr()))}break;case 13:Kr(function(){var r=In(e,1);if(r!==null){var s=pt();sn(r,e,1,s)}}),ud(e,1)}};Tc=function(e){if(e.tag===13){var t=In(e,134217728);if(t!==null){var n=pt();sn(t,e,134217728,n)}ud(e,134217728)}};om=function(e){if(e.tag===13){var t=ur(e),n=In(e,t);if(n!==null){var r=pt();sn(n,e,t,r)}ud(e,t)}};lm=function(){return Se};am=function(e,t){var n=Se;try{return Se=e,t()}finally{Se=n}};du=function(e,t,n){switch(t){case"input":if(su(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Pl(r);if(!s)throw Error($(90));Ap(r),su(r,s)}}}break;case"textarea":Up(e,n);break;case"select":t=n.value,t!=null&&gs(e,!!n.multiple,t,!1)}};Yp=sd;Gp=Kr;var Lx={usingClientEntryPoint:!1,Events:[Xi,us,Pl,Qp,Kp,sd]},si={findFiberByHostInstance:Nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tx={bundleType:si.bundleType,version:si.version,rendererPackageName:si.rendererPackageName,rendererConfig:si.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Jp(e),e===null?null:e.stateNode},findFiberByHostInstance:si.findFiberByHostInstance||Mx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eo.isDisabled&&Eo.supportsFiber)try{Rl=Eo.inject(Tx),mn=Eo}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lx;It.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dd(t))throw Error($(200));return jx(e,t,null,n)};It.createRoot=function(e,t){if(!dd(e))throw Error($(299));var n=!1,r="",s=Lg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=ad(e,1,!1,null,null,n,!1,r,s),e[Pn]=t.current,Li(e.nodeType===8?e.parentNode:e),new cd(t)};It.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=Jp(t),e=e===null?null:e.stateNode,e};It.flushSync=function(e){return Kr(e)};It.hydrate=function(e,t,n){if(!Bl(t))throw Error($(200));return Wl(null,e,t,!0,n)};It.hydrateRoot=function(e,t,n){if(!dd(e))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Lg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Rg(t,null,e,1,n??null,s,!1,i,o),e[Pn]=t.current,Li(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ul(t)};It.render=function(e,t,n){if(!Bl(t))throw Error($(200));return Wl(null,e,t,!1,n)};It.unmountComponentAtNode=function(e){if(!Bl(e))throw Error($(40));return e._reactRootContainer?(Kr(function(){Wl(null,null,e,!1,function(){e._reactRootContainer=null,e[Pn]=null})}),!0):!1};It.unstable_batchedUpdates=sd;It.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bl(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return Wl(e,t,n,!1,r)};It.version="18.3.1-next-f1338f8080-20240426";function Tg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tg)}catch(e){console.error(e)}}Tg(),Tp.exports=It;var fd=Tp.exports,_g,th=fd;_g=th.createRoot,th.hydrateRoot;var Ks=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_x={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Qn,vc,up,Px=(up=class{constructor(){re(this,Qn,_x);re(this,vc,!1)}setTimeoutProvider(e){K(this,Qn,e)}setTimeout(e,t){return w(this,Qn).setTimeout(e,t)}clearTimeout(e){w(this,Qn).clearTimeout(e)}setInterval(e,t){return w(this,Qn).setInterval(e,t)}clearInterval(e){w(this,Qn).clearInterval(e)}},Qn=new WeakMap,vc=new WeakMap,up),Mr=new Px;function Ix(e){setTimeout(e,0)}var Yr=typeof window>"u"||"Deno"in globalThis;function ht(){}function Ox(e,t){return typeof e=="function"?e(t):e}function Hu(e){return typeof e=="number"&&e>=0&&e!==1/0}function Pg(e,t){return Math.max(e+(t||0)-Date.now(),0)}function dr(e,t){return typeof e=="function"?e(t):e}function zt(e,t){return typeof e=="function"?e(t):e}function nh(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==hd(o,t.options))return!1}else if(!Ai(t.queryKey,o))return!1}if(n!=="all"){const a=t.isActive();if(n==="active"&&!a||n==="inactive"&&a)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function rh(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Gr(t.options.mutationKey)!==Gr(i))return!1}else if(!Ai(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function hd(e,t){return((t==null?void 0:t.queryKeyHashFn)||Gr)(e)}function Gr(e){return JSON.stringify(e,(t,n)=>Vu(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ai(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Ai(e[n],t[n])):!1}var Fx=Object.prototype.hasOwnProperty;function Ig(e,t){if(e===t)return e;const n=sh(e)&&sh(t);if(!n&&!(Vu(e)&&Vu(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let a=0;for(let c=0;c<o;c++){const m=n?c:i[c],h=e[m],v=t[m];if(h===v){l[m]=h,(n?c<s:Fx.call(e,m))&&a++;continue}if(h===null||v===null||typeof h!="object"||typeof v!="object"){l[m]=v;continue}const S=Ig(h,v);l[m]=S,S===h&&a++}return s===o&&a===s?e:l}function Sl(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function sh(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Vu(e){if(!ih(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!ih(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function ih(e){return Object.prototype.toString.call(e)==="[object Object]"}function Dx(e){return new Promise(t=>{Mr.setTimeout(t,e)})}function Qu(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Ig(e,t):t}function zx(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function Ax(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var pd=Symbol();function Og(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===pd?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Fg(e,t){return typeof e=="function"?e(...t):!!e}function $x(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var _r,Kn,Ns,cp,Ux=(cp=class extends Ks{constructor(){super();re(this,_r);re(this,Kn);re(this,Ns);K(this,Ns,t=>{if(!Yr&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){w(this,Kn)||this.setEventListener(w(this,Ns))}onUnsubscribe(){var t;this.hasListeners()||((t=w(this,Kn))==null||t.call(this),K(this,Kn,void 0))}setEventListener(t){var n;K(this,Ns,t),(n=w(this,Kn))==null||n.call(this),K(this,Kn,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){w(this,_r)!==t&&(K(this,_r,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof w(this,_r)=="boolean"?w(this,_r):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},_r=new WeakMap,Kn=new WeakMap,Ns=new WeakMap,cp),md=new Ux;function Ku(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var Bx=Ix;function Wx(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=Bx;const i=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(a=>{n(a)})})})};return{batch:l=>{let a;t++;try{a=l()}finally{t--,t||o()}return a},batchCalls:l=>(...a)=>{i(()=>{l(...a)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Ke=Wx(),bs,Yn,js,dp,Hx=(dp=class extends Ks{constructor(){super();re(this,bs,!0);re(this,Yn);re(this,js);K(this,js,t=>{if(!Yr&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){w(this,Yn)||this.setEventListener(w(this,js))}onUnsubscribe(){var t;this.hasListeners()||((t=w(this,Yn))==null||t.call(this),K(this,Yn,void 0))}setEventListener(t){var n;K(this,js,t),(n=w(this,Yn))==null||n.call(this),K(this,Yn,t(this.setOnline.bind(this)))}setOnline(t){w(this,bs)!==t&&(K(this,bs,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return w(this,bs)}},bs=new WeakMap,Yn=new WeakMap,js=new WeakMap,dp),kl=new Hx;function Vx(e){return Math.min(1e3*2**e,3e4)}function Dg(e){return(e??"online")==="online"?kl.isOnline():!0}var Yu=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function zg(e){let t=!1,n=0,r;const s=Ku(),i=()=>s.status!=="pending",o=N=>{var T;if(!i()){const y=new Yu(N);v(y),(T=e.onCancel)==null||T.call(e,y)}},l=()=>{t=!0},a=()=>{t=!1},c=()=>md.isFocused()&&(e.networkMode==="always"||kl.isOnline())&&e.canRun(),m=()=>Dg(e.networkMode)&&e.canRun(),h=N=>{i()||(r==null||r(),s.resolve(N))},v=N=>{i()||(r==null||r(),s.reject(N))},S=()=>new Promise(N=>{var T;r=y=>{(i()||c())&&N(y)},(T=e.onPause)==null||T.call(e)}).then(()=>{var N;r=void 0,i()||(N=e.onContinue)==null||N.call(e)}),k=()=>{if(i())return;let N;const T=n===0?e.initialPromise:void 0;try{N=T??e.fn()}catch(y){N=Promise.reject(y)}Promise.resolve(N).then(h).catch(y=>{var R;if(i())return;const g=e.retry??(Yr?0:3),p=e.retryDelay??Vx,f=typeof p=="function"?p(n,y):p,C=g===!0||typeof g=="number"&&n<g||typeof g=="function"&&g(n,y);if(t||!C){v(y);return}n++,(R=e.onFail)==null||R.call(e,n,y),Dx(f).then(()=>c()?void 0:S()).then(()=>{t?v(y):k()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:a,canStart:m,start:()=>(m()?k():S().then(k),s)}}var Pr,fp,Ag=(fp=class{constructor(){re(this,Pr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Hu(this.gcTime)&&K(this,Pr,Mr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Yr?1/0:5*60*1e3))}clearGcTimeout(){w(this,Pr)&&(Mr.clearTimeout(w(this,Pr)),K(this,Pr,void 0))}},Pr=new WeakMap,fp),Ir,Ms,Dt,Or,qe,Wi,Fr,Jt,wn,hp,Qx=(hp=class extends Ag{constructor(t){super();re(this,Jt);re(this,Ir);re(this,Ms);re(this,Dt);re(this,Or);re(this,qe);re(this,Wi);re(this,Fr);K(this,Fr,!1),K(this,Wi,t.defaultOptions),this.setOptions(t.options),this.observers=[],K(this,Or,t.client),K(this,Dt,w(this,Or).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,K(this,Ir,lh(this.options)),this.state=t.state??w(this,Ir),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=w(this,qe))==null?void 0:t.promise}setOptions(t){if(this.options={...w(this,Wi),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=lh(this.options);n.data!==void 0&&(this.setState(oh(n.data,n.dataUpdatedAt)),K(this,Ir,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&w(this,Dt).remove(this)}setData(t,n){const r=Qu(this.state.data,t,this.options);return ce(this,Jt,wn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ce(this,Jt,wn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=w(this,qe))==null?void 0:r.promise;return(s=w(this,qe))==null||s.cancel(t),n?n.then(ht).catch(ht):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(w(this,Ir))}isActive(){return this.observers.some(t=>zt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===pd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>dr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Pg(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=w(this,qe))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=w(this,qe))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),w(this,Dt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(w(this,qe)&&(w(this,Fr)?w(this,qe).cancel({revert:!0}):w(this,qe).cancelRetry()),this.scheduleGc()),w(this,Dt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ce(this,Jt,wn).call(this,{type:"invalidate"})}async fetch(t,n){var a,c,m,h,v,S,k,N,T,y,g,p;if(this.state.fetchStatus!=="idle"&&((a=w(this,qe))==null?void 0:a.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(w(this,qe))return w(this,qe).continueRetry(),w(this,qe).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(C=>C.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(K(this,Fr,!0),r.signal)})},i=()=>{const f=Og(this.options,n),R=(()=>{const j={client:w(this,Or),queryKey:this.queryKey,meta:this.meta};return s(j),j})();return K(this,Fr,!1),this.options.persister?this.options.persister(f,R,this):f(R)},l=(()=>{const f={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:w(this,Or),state:this.state,fetchFn:i};return s(f),f})();(c=this.options.behavior)==null||c.onFetch(l,this),K(this,Ms,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=l.fetchOptions)==null?void 0:m.meta))&&ce(this,Jt,wn).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),K(this,qe,zg({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:f=>{f instanceof Yu&&f.revert&&this.setState({...w(this,Ms),fetchStatus:"idle"}),r.abort()},onFail:(f,C)=>{ce(this,Jt,wn).call(this,{type:"failed",failureCount:f,error:C})},onPause:()=>{ce(this,Jt,wn).call(this,{type:"pause"})},onContinue:()=>{ce(this,Jt,wn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const f=await w(this,qe).start();if(f===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(f),(S=(v=w(this,Dt).config).onSuccess)==null||S.call(v,f,this),(N=(k=w(this,Dt).config).onSettled)==null||N.call(k,f,this.state.error,this),f}catch(f){if(f instanceof Yu){if(f.silent)return w(this,qe).promise;if(f.revert){if(this.state.data===void 0)throw f;return this.state.data}}throw ce(this,Jt,wn).call(this,{type:"error",error:f}),(y=(T=w(this,Dt).config).onError)==null||y.call(T,f,this),(p=(g=w(this,Dt).config).onSettled)==null||p.call(g,this.state.data,f,this),f}finally{this.scheduleGc()}}},Ir=new WeakMap,Ms=new WeakMap,Dt=new WeakMap,Or=new WeakMap,qe=new WeakMap,Wi=new WeakMap,Fr=new WeakMap,Jt=new WeakSet,wn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...$g(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...oh(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return K(this,Ms,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Ke.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),w(this,Dt).notify({query:this,type:"updated",action:t})})},hp);function $g(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Dg(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function oh(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function lh(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var wt,ye,Hi,ct,Dr,Rs,Cn,Gn,Vi,Ls,Ts,zr,Ar,qn,_s,we,ci,Gu,qu,Xu,Ju,Zu,ec,tc,Ug,pp,Kx=(pp=class extends Ks{constructor(t,n){super();re(this,we);re(this,wt);re(this,ye);re(this,Hi);re(this,ct);re(this,Dr);re(this,Rs);re(this,Cn);re(this,Gn);re(this,Vi);re(this,Ls);re(this,Ts);re(this,zr);re(this,Ar);re(this,qn);re(this,_s,new Set);this.options=n,K(this,wt,t),K(this,Gn,null),K(this,Cn,Ku()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(w(this,ye).addObserver(this),ah(w(this,ye),this.options)?ce(this,we,ci).call(this):this.updateResult(),ce(this,we,Ju).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return nc(w(this,ye),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return nc(w(this,ye),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ce(this,we,Zu).call(this),ce(this,we,ec).call(this),w(this,ye).removeObserver(this)}setOptions(t){const n=this.options,r=w(this,ye);if(this.options=w(this,wt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof zt(this.options.enabled,w(this,ye))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ce(this,we,tc).call(this),w(this,ye).setOptions(this.options),n._defaulted&&!Sl(this.options,n)&&w(this,wt).getQueryCache().notify({type:"observerOptionsUpdated",query:w(this,ye),observer:this});const s=this.hasListeners();s&&uh(w(this,ye),r,this.options,n)&&ce(this,we,ci).call(this),this.updateResult(),s&&(w(this,ye)!==r||zt(this.options.enabled,w(this,ye))!==zt(n.enabled,w(this,ye))||dr(this.options.staleTime,w(this,ye))!==dr(n.staleTime,w(this,ye)))&&ce(this,we,Gu).call(this);const i=ce(this,we,qu).call(this);s&&(w(this,ye)!==r||zt(this.options.enabled,w(this,ye))!==zt(n.enabled,w(this,ye))||i!==w(this,qn))&&ce(this,we,Xu).call(this,i)}getOptimisticResult(t){const n=w(this,wt).getQueryCache().build(w(this,wt),t),r=this.createResult(n,t);return Gx(this,r)&&(K(this,ct,r),K(this,Rs,this.options),K(this,Dr,w(this,ye).state)),r}getCurrentResult(){return w(this,ct)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&w(this,Cn).status==="pending"&&w(this,Cn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){w(this,_s).add(t)}getCurrentQuery(){return w(this,ye)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=w(this,wt).defaultQueryOptions(t),r=w(this,wt).getQueryCache().build(w(this,wt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ce(this,we,ci).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),w(this,ct)))}createResult(t,n){var _;const r=w(this,ye),s=this.options,i=w(this,ct),o=w(this,Dr),l=w(this,Rs),c=t!==r?t.state:w(this,Hi),{state:m}=t;let h={...m},v=!1,S;if(n._optimisticResults){const E=this.hasListeners(),O=!E&&ah(t,n),Q=E&&uh(t,r,n,s);(O||Q)&&(h={...h,...$g(m.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:k,errorUpdatedAt:N,status:T}=h;S=h.data;let y=!1;if(n.placeholderData!==void 0&&S===void 0&&T==="pending"){let E;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(E=i.data,y=!0):E=typeof n.placeholderData=="function"?n.placeholderData((_=w(this,Ts))==null?void 0:_.state.data,w(this,Ts)):n.placeholderData,E!==void 0&&(T="success",S=Qu(i==null?void 0:i.data,E,n),v=!0)}if(n.select&&S!==void 0&&!y)if(i&&S===(o==null?void 0:o.data)&&n.select===w(this,Vi))S=w(this,Ls);else try{K(this,Vi,n.select),S=n.select(S),S=Qu(i==null?void 0:i.data,S,n),K(this,Ls,S),K(this,Gn,null)}catch(E){K(this,Gn,E)}w(this,Gn)&&(k=w(this,Gn),S=w(this,Ls),N=Date.now(),T="error");const g=h.fetchStatus==="fetching",p=T==="pending",f=T==="error",C=p&&g,R=S!==void 0,b={status:T,fetchStatus:h.fetchStatus,isPending:p,isSuccess:T==="success",isError:f,isInitialLoading:C,isLoading:C,data:S,dataUpdatedAt:h.dataUpdatedAt,error:k,errorUpdatedAt:N,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:g,isRefetching:g&&!p,isLoadingError:f&&!R,isPaused:h.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:f&&R,isStale:gd(t,n),refetch:this.refetch,promise:w(this,Cn),isEnabled:zt(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const E=z=>{b.status==="error"?z.reject(b.error):b.data!==void 0&&z.resolve(b.data)},O=()=>{const z=K(this,Cn,b.promise=Ku());E(z)},Q=w(this,Cn);switch(Q.status){case"pending":t.queryHash===r.queryHash&&E(Q);break;case"fulfilled":(b.status==="error"||b.data!==Q.value)&&O();break;case"rejected":(b.status!=="error"||b.error!==Q.reason)&&O();break}}return b}updateResult(){const t=w(this,ct),n=this.createResult(w(this,ye),this.options);if(K(this,Dr,w(this,ye).state),K(this,Rs,this.options),w(this,Dr).data!==void 0&&K(this,Ts,w(this,ye)),Sl(n,t))return;K(this,ct,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!w(this,_s).size)return!0;const o=new Set(i??w(this,_s));return this.options.throwOnError&&o.add("error"),Object.keys(w(this,ct)).some(l=>{const a=l;return w(this,ct)[a]!==t[a]&&o.has(a)})};ce(this,we,Ug).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ce(this,we,Ju).call(this)}},wt=new WeakMap,ye=new WeakMap,Hi=new WeakMap,ct=new WeakMap,Dr=new WeakMap,Rs=new WeakMap,Cn=new WeakMap,Gn=new WeakMap,Vi=new WeakMap,Ls=new WeakMap,Ts=new WeakMap,zr=new WeakMap,Ar=new WeakMap,qn=new WeakMap,_s=new WeakMap,we=new WeakSet,ci=function(t){ce(this,we,tc).call(this);let n=w(this,ye).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(ht)),n},Gu=function(){ce(this,we,Zu).call(this);const t=dr(this.options.staleTime,w(this,ye));if(Yr||w(this,ct).isStale||!Hu(t))return;const r=Pg(w(this,ct).dataUpdatedAt,t)+1;K(this,zr,Mr.setTimeout(()=>{w(this,ct).isStale||this.updateResult()},r))},qu=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(w(this,ye)):this.options.refetchInterval)??!1},Xu=function(t){ce(this,we,ec).call(this),K(this,qn,t),!(Yr||zt(this.options.enabled,w(this,ye))===!1||!Hu(w(this,qn))||w(this,qn)===0)&&K(this,Ar,Mr.setInterval(()=>{(this.options.refetchIntervalInBackground||md.isFocused())&&ce(this,we,ci).call(this)},w(this,qn)))},Ju=function(){ce(this,we,Gu).call(this),ce(this,we,Xu).call(this,ce(this,we,qu).call(this))},Zu=function(){w(this,zr)&&(Mr.clearTimeout(w(this,zr)),K(this,zr,void 0))},ec=function(){w(this,Ar)&&(Mr.clearInterval(w(this,Ar)),K(this,Ar,void 0))},tc=function(){const t=w(this,wt).getQueryCache().build(w(this,wt),this.options);if(t===w(this,ye))return;const n=w(this,ye);K(this,ye,t),K(this,Hi,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},Ug=function(t){Ke.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(w(this,ct))}),w(this,wt).getQueryCache().notify({query:w(this,ye),type:"observerResultsUpdated"})})},pp);function Yx(e,t){return zt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ah(e,t){return Yx(e,t)||e.state.data!==void 0&&nc(e,t,t.refetchOnMount)}function nc(e,t,n){if(zt(t.enabled,e)!==!1&&dr(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&gd(e,t)}return!1}function uh(e,t,n,r){return(e!==t||zt(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&gd(e,n)}function gd(e,t){return zt(t.enabled,e)!==!1&&e.isStaleByTime(dr(t.staleTime,e))}function Gx(e,t){return!Sl(e.getCurrentResult(),t)}function ch(e){return{onFetch:(t,n)=>{var m,h,v,S,k;const r=t.options,s=(v=(h=(m=t.fetchOptions)==null?void 0:m.meta)==null?void 0:h.fetchMore)==null?void 0:v.direction,i=((S=t.state.data)==null?void 0:S.pages)||[],o=((k=t.state.data)==null?void 0:k.pageParams)||[];let l={pages:[],pageParams:[]},a=0;const c=async()=>{let N=!1;const T=p=>{$x(p,()=>t.signal,()=>N=!0)},y=Og(t.options,t.fetchOptions),g=async(p,f,C)=>{if(N)return Promise.reject();if(f==null&&p.pages.length)return Promise.resolve(p);const j=(()=>{const O={client:t.client,queryKey:t.queryKey,pageParam:f,direction:C?"backward":"forward",meta:t.options.meta};return T(O),O})(),b=await y(j),{maxPages:_}=t.options,E=C?Ax:zx;return{pages:E(p.pages,b,_),pageParams:E(p.pageParams,f,_)}};if(s&&i.length){const p=s==="backward",f=p?qx:dh,C={pages:i,pageParams:o},R=f(r,C);l=await g(C,R,p)}else{const p=e??i.length;do{const f=a===0?o[0]??r.initialPageParam:dh(r,l);if(a>0&&f==null)break;l=await g(l,f),a++}while(a<p)}return l};t.options.persister?t.fetchFn=()=>{var N,T;return(T=(N=t.options).persister)==null?void 0:T.call(N,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function dh(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function qx(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Qi,dn,dt,$r,fn,Un,mp,Xx=(mp=class extends Ag{constructor(t){super();re(this,fn);re(this,Qi);re(this,dn);re(this,dt);re(this,$r);K(this,Qi,t.client),this.mutationId=t.mutationId,K(this,dt,t.mutationCache),K(this,dn,[]),this.state=t.state||Bg(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){w(this,dn).includes(t)||(w(this,dn).push(t),this.clearGcTimeout(),w(this,dt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){K(this,dn,w(this,dn).filter(n=>n!==t)),this.scheduleGc(),w(this,dt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){w(this,dn).length||(this.state.status==="pending"?this.scheduleGc():w(this,dt).remove(this))}continue(){var t;return((t=w(this,$r))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,a,c,m,h,v,S,k,N,T,y,g,p,f,C,R,j,b,_;const n=()=>{ce(this,fn,Un).call(this,{type:"continue"})},r={client:w(this,Qi),meta:this.options.meta,mutationKey:this.options.mutationKey};K(this,$r,zg({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(E,O)=>{ce(this,fn,Un).call(this,{type:"failed",failureCount:E,error:O})},onPause:()=>{ce(this,fn,Un).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>w(this,dt).canRun(this)}));const s=this.state.status==="pending",i=!w(this,$r).canStart();try{if(s)n();else{ce(this,fn,Un).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=w(this,dt).config).onMutate)==null?void 0:l.call(o,t,this,r));const O=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,t,r));O!==this.state.context&&ce(this,fn,Un).call(this,{type:"pending",context:O,variables:t,isPaused:i})}const E=await w(this,$r).start();return await((h=(m=w(this,dt).config).onSuccess)==null?void 0:h.call(m,E,t,this.state.context,this,r)),await((S=(v=this.options).onSuccess)==null?void 0:S.call(v,E,t,this.state.context,r)),await((N=(k=w(this,dt).config).onSettled)==null?void 0:N.call(k,E,null,this.state.variables,this.state.context,this,r)),await((y=(T=this.options).onSettled)==null?void 0:y.call(T,E,null,t,this.state.context,r)),ce(this,fn,Un).call(this,{type:"success",data:E}),E}catch(E){try{await((p=(g=w(this,dt).config).onError)==null?void 0:p.call(g,E,t,this.state.context,this,r))}catch(O){Promise.reject(O)}try{await((C=(f=this.options).onError)==null?void 0:C.call(f,E,t,this.state.context,r))}catch(O){Promise.reject(O)}try{await((j=(R=w(this,dt).config).onSettled)==null?void 0:j.call(R,void 0,E,this.state.variables,this.state.context,this,r))}catch(O){Promise.reject(O)}try{await((_=(b=this.options).onSettled)==null?void 0:_.call(b,void 0,E,t,this.state.context,r))}catch(O){Promise.reject(O)}throw ce(this,fn,Un).call(this,{type:"error",error:E}),E}finally{w(this,dt).runNext(this)}}},Qi=new WeakMap,dn=new WeakMap,dt=new WeakMap,$r=new WeakMap,fn=new WeakSet,Un=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ke.batch(()=>{w(this,dn).forEach(r=>{r.onMutationUpdate(t)}),w(this,dt).notify({mutation:this,type:"updated",action:t})})},mp);function Bg(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var En,Zt,Ki,gp,Jx=(gp=class extends Ks{constructor(t={}){super();re(this,En);re(this,Zt);re(this,Ki);this.config=t,K(this,En,new Set),K(this,Zt,new Map),K(this,Ki,0)}build(t,n,r){const s=new Xx({client:t,mutationCache:this,mutationId:++oo(this,Ki)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){w(this,En).add(t);const n=No(t);if(typeof n=="string"){const r=w(this,Zt).get(n);r?r.push(t):w(this,Zt).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(w(this,En).delete(t)){const n=No(t);if(typeof n=="string"){const r=w(this,Zt).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&w(this,Zt).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=No(t);if(typeof n=="string"){const r=w(this,Zt).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=No(t);if(typeof n=="string"){const s=(r=w(this,Zt).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ke.batch(()=>{w(this,En).forEach(t=>{this.notify({type:"removed",mutation:t})}),w(this,En).clear(),w(this,Zt).clear()})}getAll(){return Array.from(w(this,En))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>rh(n,r))}findAll(t={}){return this.getAll().filter(n=>rh(t,n))}notify(t){Ke.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Ke.batch(()=>Promise.all(t.map(n=>n.continue().catch(ht))))}},En=new WeakMap,Zt=new WeakMap,Ki=new WeakMap,gp);function No(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Nn,Xn,St,bn,Tn,Bo,rc,vp,Zx=(vp=class extends Ks{constructor(n,r){super();re(this,Tn);re(this,Nn);re(this,Xn);re(this,St);re(this,bn);K(this,Nn,n),this.setOptions(r),this.bindMethods(),ce(this,Tn,Bo).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=w(this,Nn).defaultMutationOptions(n),Sl(this.options,r)||w(this,Nn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:w(this,St),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Gr(r.mutationKey)!==Gr(this.options.mutationKey)?this.reset():((s=w(this,St))==null?void 0:s.state.status)==="pending"&&w(this,St).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=w(this,St))==null||n.removeObserver(this)}onMutationUpdate(n){ce(this,Tn,Bo).call(this),ce(this,Tn,rc).call(this,n)}getCurrentResult(){return w(this,Xn)}reset(){var n;(n=w(this,St))==null||n.removeObserver(this),K(this,St,void 0),ce(this,Tn,Bo).call(this),ce(this,Tn,rc).call(this)}mutate(n,r){var s;return K(this,bn,r),(s=w(this,St))==null||s.removeObserver(this),K(this,St,w(this,Nn).getMutationCache().build(w(this,Nn),this.options)),w(this,St).addObserver(this),w(this,St).execute(n)}},Nn=new WeakMap,Xn=new WeakMap,St=new WeakMap,bn=new WeakMap,Tn=new WeakSet,Bo=function(){var r;const n=((r=w(this,St))==null?void 0:r.state)??Bg();K(this,Xn,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},rc=function(n){Ke.batch(()=>{var r,s,i,o,l,a,c,m;if(w(this,bn)&&this.hasListeners()){const h=w(this,Xn).variables,v=w(this,Xn).context,S={client:w(this,Nn),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=w(this,bn)).onSuccess)==null||s.call(r,n.data,h,v,S)}catch(k){Promise.reject(k)}try{(o=(i=w(this,bn)).onSettled)==null||o.call(i,n.data,null,h,v,S)}catch(k){Promise.reject(k)}}else if((n==null?void 0:n.type)==="error"){try{(a=(l=w(this,bn)).onError)==null||a.call(l,n.error,h,v,S)}catch(k){Promise.reject(k)}try{(m=(c=w(this,bn)).onSettled)==null||m.call(c,void 0,n.error,h,v,S)}catch(k){Promise.reject(k)}}}this.listeners.forEach(h=>{h(w(this,Xn))})})},vp),hn,yp,ew=(yp=class extends Ks{constructor(t={}){super();re(this,hn);this.config=t,K(this,hn,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??hd(s,n);let o=this.get(i);return o||(o=new Qx({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){w(this,hn).has(t.queryHash)||(w(this,hn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=w(this,hn).get(t.queryHash);n&&(t.destroy(),n===t&&w(this,hn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ke.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return w(this,hn).get(t)}getAll(){return[...w(this,hn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>nh(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>nh(t,r)):n}notify(t){Ke.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Ke.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ke.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},hn=new WeakMap,yp),Oe,Jn,Zn,Ps,Is,er,Os,Fs,xp,tw=(xp=class{constructor(e={}){re(this,Oe);re(this,Jn);re(this,Zn);re(this,Ps);re(this,Is);re(this,er);re(this,Os);re(this,Fs);K(this,Oe,e.queryCache||new ew),K(this,Jn,e.mutationCache||new Jx),K(this,Zn,e.defaultOptions||{}),K(this,Ps,new Map),K(this,Is,new Map),K(this,er,0)}mount(){oo(this,er)._++,w(this,er)===1&&(K(this,Os,md.subscribe(async e=>{e&&(await this.resumePausedMutations(),w(this,Oe).onFocus())})),K(this,Fs,kl.subscribe(async e=>{e&&(await this.resumePausedMutations(),w(this,Oe).onOnline())})))}unmount(){var e,t;oo(this,er)._--,w(this,er)===0&&((e=w(this,Os))==null||e.call(this),K(this,Os,void 0),(t=w(this,Fs))==null||t.call(this),K(this,Fs,void 0))}isFetching(e){return w(this,Oe).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return w(this,Jn).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=w(this,Oe).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=w(this,Oe).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(dr(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return w(this,Oe).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=w(this,Oe).get(r.queryHash),i=s==null?void 0:s.state.data,o=Ox(t,i);if(o!==void 0)return w(this,Oe).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Ke.batch(()=>w(this,Oe).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=w(this,Oe).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=w(this,Oe);Ke.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=w(this,Oe);return Ke.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Ke.batch(()=>w(this,Oe).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(ht).catch(ht)}invalidateQueries(e,t={}){return Ke.batch(()=>(w(this,Oe).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Ke.batch(()=>w(this,Oe).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(ht)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ht)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=w(this,Oe).build(this,t);return n.isStaleByTime(dr(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ht).catch(ht)}fetchInfiniteQuery(e){return e.behavior=ch(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ht).catch(ht)}ensureInfiniteQueryData(e){return e.behavior=ch(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return kl.isOnline()?w(this,Jn).resumePausedMutations():Promise.resolve()}getQueryCache(){return w(this,Oe)}getMutationCache(){return w(this,Jn)}getDefaultOptions(){return w(this,Zn)}setDefaultOptions(e){K(this,Zn,e)}setQueryDefaults(e,t){w(this,Ps).set(Gr(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...w(this,Ps).values()],n={};return t.forEach(r=>{Ai(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){w(this,Is).set(Gr(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...w(this,Is).values()],n={};return t.forEach(r=>{Ai(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...w(this,Zn).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=hd(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===pd&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...w(this,Zn).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){w(this,Oe).clear(),w(this,Jn).clear()}},Oe=new WeakMap,Jn=new WeakMap,Zn=new WeakMap,Ps=new WeakMap,Is=new WeakMap,er=new WeakMap,Os=new WeakMap,Fs=new WeakMap,xp),Wg=d.createContext(void 0),Jr=e=>{const t=d.useContext(Wg);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},nw=({client:e,children:t})=>(d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),u.jsx(Wg.Provider,{value:e,children:t})),Hg=d.createContext(!1),rw=()=>d.useContext(Hg);Hg.Provider;function sw(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var iw=d.createContext(sw()),ow=()=>d.useContext(iw),lw=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},aw=e=>{d.useEffect(()=>{e.clearReset()},[e])},uw=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||Fg(n,[e.error,r])),cw=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},dw=(e,t)=>e.isLoading&&e.isFetching&&!t,fw=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,fh=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function hw(e,t,n){var h,v,S,k,N;const r=rw(),s=ow(),i=Jr(),o=i.defaultQueryOptions(e);(v=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||v.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",cw(o),lw(o,s),aw(s);const l=!i.getQueryCache().get(o.queryHash),[a]=d.useState(()=>new t(i,o)),c=a.getOptimisticResult(o),m=!r&&e.subscribed!==!1;if(d.useSyncExternalStore(d.useCallback(T=>{const y=m?a.subscribe(Ke.batchCalls(T)):ht;return a.updateResult(),y},[a,m]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),d.useEffect(()=>{a.setOptions(o)},[o,a]),fw(o,c))throw fh(o,a,s);if(uw({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((k=(S=i.getDefaultOptions().queries)==null?void 0:S._experimental_afterQuery)==null||k.call(S,o,c),o.experimental_prefetchInRender&&!Yr&&dw(c,r)){const T=l?fh(o,a,s):(N=i.getQueryCache().get(o.queryHash))==null?void 0:N.promise;T==null||T.catch(ht).finally(()=>{a.updateResult()})}return o.notifyOnChangeProps?c:a.trackResult(c)}function vd(e,t){return hw(e,Kx)}function pw(e,t){const n=Jr(),[r]=d.useState(()=>new Zx(n,e));d.useEffect(()=>{r.setOptions(e)},[r,e]);const s=d.useSyncExternalStore(d.useCallback(o=>r.subscribe(Ke.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=d.useCallback((o,l)=>{r.mutate(o,l).catch(ht)},[r]);if(s.error&&Fg(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function hh(e){return e.length>0&&"options"in e[0]}function ph({value:e,onChange:t,options:n,placeholder:r="Select...",trigger:s,triggerClassName:i="",panelClassName:o="",align:l="left",width:a="auto",showChevron:c=!0,title:m,disabled:h=!1,"aria-label":v}){var b;const[S,k]=d.useState(!1),N=d.useRef(null),T=d.useRef(null),g=d.useCallback(()=>{const _=E=>{const O=E.find(Q=>Q.value===e);return O?O.label:null};if(hh(n))for(const E of n){const O=_(E.options);if(O)return O}else{const E=_(n);if(E)return E}return r},[e,n,r])();d.useEffect(()=>{if(!S)return;const _=O=>{N.current&&!N.current.contains(O.target)&&k(!1)},E=O=>{var Q;O.key==="Escape"&&(k(!1),(Q=T.current)==null||Q.focus())};return window.addEventListener("click",_),window.addEventListener("keydown",E),()=>{window.removeEventListener("click",_),window.removeEventListener("keydown",E)}},[S]);const p=_=>{var E;t(_),k(!1),(E=T.current)==null||E.focus()},f=_=>_.map(E=>u.jsxs("button",{className:"dropdown-item","data-active":E.value===e,disabled:E.disabled,onClick:()=>!E.disabled&&p(E.value),role:"menuitem",children:[E.icon&&u.jsx("span",{className:"shrink-0",children:E.icon}),u.jsx("span",{className:"flex-1 truncate",children:E.label}),E.value===e&&u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 text-accent",children:u.jsx("polyline",{points:"20 6 9 17 4 12"})})]},E.value)),C=((b=T.current)==null?void 0:b.offsetWidth)??0,R=a==="trigger"?C:a==="auto"?void 0:a,j={...R?{width:R,minWidth:R}:{},...l==="right"?{right:0}:{left:0}};return u.jsxs("div",{ref:N,className:"relative",children:[s?u.jsx("div",{onClick:()=>!h&&k(_=>!_),children:s}):u.jsxs("button",{ref:T,type:"button",className:`dropdown-trigger ${i}`,onClick:()=>k(_=>!_),disabled:h,title:m,"aria-label":v,"aria-haspopup":"listbox","aria-expanded":S,children:[u.jsx("span",{className:"truncate",children:g}),c&&u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`shrink-0 opacity-60 transition-transform ${S?"rotate-180":""}`,children:u.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),S&&u.jsx("div",{className:`dropdown-panel ${o}`,style:j,role:"listbox","aria-label":v,children:hh(n)?n.map((_,E)=>u.jsxs("div",{children:[_.label&&u.jsx("div",{className:"dropdown-label",children:_.label}),f(_.options),E<n.length-1&&u.jsx("div",{className:"dropdown-divider"})]},_.label||E)):f(n)})]})}const mw={offline:"sync-dot-offline",unstable:"sync-dot-unstable",recent:"sync-dot-recent",editing:"sync-dot-editing",live:"sync-dot-live"};function gw({state:e,presence:t,syncLabel:n,connectionLabel:r,lastEditedLabel:s,hasEdits:i,recentTouches:o,isNarrow:l}){const[a,c]=d.useState(!1),[m,h]=d.useState(null),v=d.useRef(null),S=d.useRef(null),k=d.useRef(null),N=t?`${t.viewing} viewing  ${t.editing} editing`:"- viewing  - editing",T=t?String(t.viewing):"-",y=d.useCallback(()=>{k.current&&(window.clearTimeout(k.current),k.current=null)},[]),g=d.useCallback((f,C)=>{var R;C&&((R=navigator.clipboard)==null||R.writeText(C).then(()=>{h(f),y(),k.current=window.setTimeout(()=>{h(j=>j===f?null:j)},1e3)}).catch(()=>{}))},[y]),p=d.useCallback(()=>{c(!1),window.requestAnimationFrame(()=>{var f;return(f=S.current)==null?void 0:f.focus()})},[]);return d.useEffect(()=>{if(!a)return;const f=R=>{!v.current||v.current.contains(R.target)||p()},C=R=>{R.key==="Escape"&&p()};return window.addEventListener("mousedown",f),window.addEventListener("keydown",C),()=>{window.removeEventListener("mousedown",f),window.removeEventListener("keydown",C)}},[a,p]),d.useEffect(()=>()=>{y()},[y]),u.jsxs("div",{ref:v,className:"sync-indicator",children:[u.jsxs("button",{ref:S,type:"button",className:"sync-indicator-button",onClick:()=>a?p():c(!0),"aria-haspopup":"dialog","aria-expanded":a,"aria-label":"Sync status",title:N,children:[u.jsx("span",{className:`sync-indicator-dot ${mw[e]}`,"aria-hidden":"true"}),!l&&u.jsx("span",{className:"sync-indicator-count tabular-nums",children:T})]}),a&&u.jsxs("div",{role:"dialog","aria-label":"Sync status",className:"sync-indicator-card select-text",children:[u.jsx("div",{className:"sync-indicator-line sync-indicator-primary",children:n}),u.jsx("div",{className:"sync-indicator-line",children:r}),u.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:N}),u.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:i?`Last edited: ${s}`:"No edits yet."}),u.jsxs("div",{className:"sync-indicator-section",children:[u.jsx("div",{className:"sync-indicator-section-title",children:"Recently touched files"}),o.length>0?u.jsx("div",{className:"sync-indicator-list",children:o.map(f=>u.jsxs("div",{className:"sync-indicator-item",children:[u.jsx("button",{type:"button",className:"sync-indicator-item-name",title:`Copy filename: ${f.label}`,onClick:()=>g(f.path,f.label),children:f.label}),u.jsx("span",{className:"sync-indicator-item-time tabular-nums",children:m===f.path?"Copied":f.timeLabel})]},f.path))}):u.jsx("div",{className:"sync-indicator-empty",children:"No recent touches."})]})]})]})}function vw({rootRef:e,onSearch:t,viewerActive:n,onBack:r,zoomPercent:s,onZoomPercentChange:i,currentLabel:o,itemCount:l,totalCount:a,sortSpec:c,metricKeys:m,onSortChange:h,filterCount:v,onOpenFilters:S,starFilters:k,onToggleStar:N,onClearStars:T,onClearFilters:y,starCounts:g,viewMode:p,onViewMode:f,gridItemSize:C,onGridItemSize:R,leftOpen:j,rightOpen:b,onToggleLeft:_,onToggleRight:E,onPrevImage:O,onNextImage:Q,canPrevImage:z,canNextImage:A,syncIndicator:le}){const[pe,de]=d.useState(!1),[I,U]=d.useState(!1),[X,ue]=d.useState(!1),me=d.useRef(null),Re=d.useRef(null);d.useEffect(()=>{if(!pe)return;const L=F=>{me.current&&!me.current.contains(F.target)&&de(!1)};return window.addEventListener("click",L),()=>window.removeEventListener("click",L)},[pe]),d.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const L=window.matchMedia("(max-width: 900px)"),F=Y=>U(Y.matches);return U(L.matches),"addEventListener"in L?(L.addEventListener("change",F),()=>L.removeEventListener("change",F)):(L.addListener(F),()=>L.removeListener(F))},[]),d.useEffect(()=>{if(!I||n){ue(!1);return}if(!X)return;const L=window.requestAnimationFrame(()=>{var F;return(F=Re.current)==null?void 0:F.focus()});return()=>window.cancelAnimationFrame(L)},[I,X,n]);const ee=c??{kind:"builtin",key:"added",dir:"desc"},q=ee.dir,J=ee.kind==="builtin"&&ee.key==="random",fe=m!=null&&m.length?m.map(L=>({value:`metric:${L}`,label:L})):[],Ze=[{value:"builtin:added",label:"Date added"},{value:"builtin:name",label:"Filename"},{value:"builtin:random",label:"Random"},...fe],Ce=[{label:"Layout",options:[{value:"layout:grid",label:"Grid"},{value:"layout:masonry",label:"Masonry"}]},{label:"Sort by",options:Ze}],Ge=ee.kind==="metric"?`metric:${ee.key}`:`builtin:${ee.key}`,vt=[{label:"Sort by",options:Ze}],De=I&&!n,Qt=L=>{if(L.startsWith("layout:")){const F=L==="layout:masonry"?"adaptive":"grid";f==null||f(F)}else h==null||h(mh(L,ee))},Ft=()=>{h&&h(J?ee:{...ee,dir:q==="desc"?"asc":"desc"})},ln=k??[],yr=ln.length,W=xw(v,yr),ne=yw(l,a),se=o||"Root";return u.jsxs("div",{ref:e,className:"toolbar-shell fixed top-0 left-0 right-0 h-12 grid grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] items-center px-3 gap-3 bg-panel border-b border-border z-[var(--z-toolbar)] col-span-full row-start-1 select-none",children:[u.jsxs("div",{className:"toolbar-left flex items-center gap-4 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[u.jsxs("div",{className:"flex flex-col min-w-0 leading-tight",children:[u.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted",children:"Scope"}),u.jsx("span",{className:"text-sm font-medium text-text truncate",title:se,children:se})]}),ne&&u.jsx("span",{className:"toolbar-count text-xs text-muted whitespace-nowrap tabular-nums",children:ne})]}),u.jsxs("div",{className:"toolbar-sort flex items-center gap-2",children:[u.jsxs("div",{className:`toolbar-sort-controls flex items-center gap-2 ${n?"opacity-40 pointer-events-none":""}`,children:[u.jsx(ph,{value:Ge,onChange:Qt,options:Ce,title:"Sort and layout options","aria-label":"Sort and layout",triggerClassName:"min-w-[110px]"}),u.jsx("button",{className:"toolbar-sort-dir btn btn-icon",onClick:Ft,title:J?"Shuffle":`Sort ${q==="desc"?"descending":"ascending"}`,"aria-label":J?"Shuffle":"Toggle sort direction","aria-disabled":n,children:J?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),u.jsx("path",{d:"M21 3v5h-5"})]}):q==="desc"?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 5v14"}),u.jsx("path",{d:"M19 12l-7 7-7-7"})]}):u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 19V5"}),u.jsx("path",{d:"M5 12l7-7 7 7"})]})})]}),u.jsxs("div",{ref:me,className:`toolbar-filter relative ${n?"opacity-40 pointer-events-none":""}`,children:[u.jsxs("button",{className:`btn ${W>0?"btn-active":""}`,onClick:()=>de(L=>!L),"aria-haspopup":"dialog","aria-expanded":pe,title:"Filters","aria-disabled":n,children:[u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),u.jsx("span",{className:"toolbar-filters-label",children:"Filters"}),W>0&&u.jsx("span",{className:"toolbar-filters-count px-1.5 py-0.5 text-[11px] rounded-full bg-accent-strong text-text",children:W})]}),pe&&u.jsxs("div",{role:"dialog","aria-label":"Filters",className:"dropdown-panel w-[240px]",style:{top:"38px",left:0},children:[u.jsx("div",{className:"dropdown-label",children:"Rating"}),u.jsxs("div",{className:"px-1",children:[[5,4,3,2,1].map(L=>{const F=ln.includes(L),Y=(g==null?void 0:g[String(L)])??0;return u.jsxs("button",{onClick:()=>N==null?void 0:N(L),className:`dropdown-item justify-between ${F?"bg-accent-muted":""}`,children:[u.jsxs("span",{className:F?"text-star-active":"text-text",children:["".repeat(L),"".repeat(5-L)]}),u.jsx("span",{className:"text-xs text-muted",children:Y})]},L)}),u.jsxs("button",{onClick:()=>N==null?void 0:N(0),className:`dropdown-item justify-between ${ln.includes(0)?"bg-accent-muted":""}`,children:[u.jsx("span",{className:"text-text",children:"Unrated"}),u.jsx("span",{className:"text-xs text-muted",children:(g==null?void 0:g["0"])??0})]})]}),u.jsx("div",{className:"dropdown-divider"}),u.jsx("div",{className:"dropdown-label",children:"Metrics"}),u.jsxs("button",{className:"dropdown-item",onClick:()=>{de(!1),S==null||S()},children:[u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M4 19V9"}),u.jsx("path",{d:"M10 19V5"}),u.jsx("path",{d:"M16 19v-7"}),u.jsx("path",{d:"M3 19h18"})]}),u.jsx("span",{children:"Open Metrics Panel"}),(v||0)>0&&u.jsxs("span",{className:"ml-auto text-xs text-muted",children:[v," active"]})]}),u.jsx("div",{className:"dropdown-divider"}),u.jsx("button",{className:"dropdown-item text-muted hover:text-text",onClick:()=>{y?y():T==null||T()},disabled:W===0,children:"Clear all filters"})]})]}),n&&u.jsxs("button",{className:"btn btn-sm",onClick:r,title:"Back to grid",children:[u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})]})]}),u.jsx("div",{className:"toolbar-center flex items-center gap-3 justify-center min-w-0",children:n?u.jsxs(u.Fragment,{children:[u.jsx("input",{type:"range",min:5,max:800,step:1,value:Math.round(Math.max(5,Math.min(800,s??100))),onChange:L=>i==null?void 0:i(Number(L.target.value)),className:"zoom-slider","aria-label":"Zoom level"}),u.jsxs("span",{className:"text-xs text-muted min-w-[42px] text-right",children:[Math.round(s??100),"%"]})]}):R&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs text-muted",children:"Size"}),u.jsx("input",{type:"range",min:80,max:500,step:10,value:C??220,onChange:L=>R(Number(L.target.value)),className:"w-28 h-1.5 bg-border rounded-full appearance-none cursor-pointer hover:bg-hover transition-colors [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-text [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-text [&::-moz-range-thumb]:border-0","aria-label":"Thumbnail size"})]})}),u.jsxs("div",{className:"toolbar-right flex items-center gap-2 justify-end",children:[u.jsxs("div",{className:`toolbar-nav flex items-center gap-1 mr-1 ${n?"":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,children:[u.jsx("button",{className:`btn btn-icon ${z?"":"opacity-40 cursor-not-allowed"}`,title:"Previous image (A / )",onClick:()=>z&&(O==null?void 0:O()),"aria-label":"Previous image","aria-disabled":!z,children:u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M15 18l-6-6 6-6"})})}),u.jsx("button",{className:`btn btn-icon ${A?"":"opacity-40 cursor-not-allowed"}`,title:"Next image (D / )",onClick:()=>A&&(Q==null?void 0:Q()),"aria-label":"Next image","aria-disabled":!A,children:u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M9 6l6 6-6 6"})})})]}),u.jsxs("div",{className:"toolbar-panels flex items-center gap-1",children:[u.jsx("button",{className:`btn btn-icon ${j?"":"opacity-50"}`,title:j?"Hide left panel (Ctrl+B)":"Show left panel (Ctrl+B)",onClick:_,"aria-pressed":j,"aria-label":"Toggle left panel",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"3",y:"5",width:"6",height:"14",rx:"1.5"}),u.jsx("rect",{x:"11",y:"5",width:"10",height:"14",rx:"1.5"})]})}),u.jsx("button",{className:`btn btn-icon ${b?"":"opacity-50"}`,title:b?"Hide right panel (Ctrl+Alt+B)":"Show right panel (Ctrl+Alt+B)",onClick:E,"aria-pressed":b,"aria-label":"Toggle right panel",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"15",y:"5",width:"6",height:"14",rx:"1.5"}),u.jsx("rect",{x:"3",y:"5",width:"10",height:"14",rx:"1.5"})]})})]}),le&&u.jsx(gw,{...le,isNarrow:I}),!n&&I&&u.jsx("button",{className:`btn btn-icon ${X?"btn-active":""}`,"aria-label":X?"Close search":"Open search",title:X?"Close search":"Search",onClick:()=>ue(L=>!L),children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[u.jsx("circle",{cx:"11",cy:"11",r:"7"}),u.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),!n&&!I?u.jsx("div",{className:"toolbar-search w-[240px]",children:u.jsx("input",{ref:Re,"aria-label":"Search filename, tags, notes",placeholder:"Search...",onChange:L=>t(L.target.value),className:"toolbar-search-input input w-full focus:w-full transition-all duration-200 select-text"})}):n?u.jsx("div",{className:"toolbar-search w-[240px]","aria-hidden":"true"}):null]}),!n&&I&&X&&u.jsx("div",{className:"toolbar-search-row",children:u.jsx("input",{ref:Re,"aria-label":"Search filename, tags, notes",placeholder:"Search...",onChange:L=>t(L.target.value),className:"toolbar-search-input-mobile input input-lg w-full select-text"})}),De&&u.jsx("div",{className:"mobile-drawer",children:u.jsxs("div",{className:"mobile-drawer-row",children:[u.jsxs("div",{className:"mobile-pill-group",children:[u.jsx("button",{className:`mobile-pill ${p==="grid"?"is-active":""}`,onClick:()=>f==null?void 0:f("grid"),"aria-pressed":p==="grid",children:"Grid"}),u.jsx("button",{className:`mobile-pill ${p==="adaptive"?"is-active":""}`,onClick:()=>f==null?void 0:f("adaptive"),"aria-pressed":p==="adaptive",children:"Masonry"})]}),u.jsx(ph,{value:Ge,onChange:L=>h==null?void 0:h(mh(L,ee)),options:vt,"aria-label":"Sort",triggerClassName:"mobile-pill mobile-pill-dropdown",panelClassName:"mobile-drawer-panel"}),u.jsx("button",{className:"mobile-pill mobile-pill-icon",onClick:Ft,title:J?"Shuffle":`Sort ${q==="desc"?"descending":"ascending"}`,"aria-label":J?"Shuffle":"Toggle sort direction",children:J?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),u.jsx("path",{d:"M21 3v5h-5"})]}):q==="desc"?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 5v14"}),u.jsx("path",{d:"M19 12l-7 7-7-7"})]}):u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 19V5"}),u.jsx("path",{d:"M5 12l7-7 7 7"})]})})]})})]})}function yw(e,t){if(typeof e!="number")return null;const n=e.toLocaleString();if(typeof t!="number")return`${n} items`;const r=t.toLocaleString();return t===e?`${n} items`:`${n} / ${r} items`}function xw(e,t){return typeof e=="number"?e:t>0?1:0}function mh(e,t){if(e.startsWith("metric:")){const n=e.slice(7);return n?{kind:"metric",key:n,dir:t.dir}:t}if(e.startsWith("builtin:")){const n=e.slice(8);if(n==="name"||n==="added"||n==="random")return{kind:"builtin",key:n,dir:t.dir}}return t}class fr extends Error{constructor(n,r,s,i){super(r);yn(this,"status");yn(this,"url");yn(this,"body");this.name="FetchError",this.status=n,this.url=s,this.body=i}}function ww(e){const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function Vg(e,t,n){if(t&&typeof t=="object"){const r=t,s=typeof r.error=="string"?r.error:null,i=typeof r.message=="string"?r.message:null;if(s&&i)return`${s}: ${i}`;if(s)return s;if(i)return i}return typeof t=="string"&&t?t:`HTTP ${e} for ${n}`}function ut(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{let a=null;const c=await l.text().catch(()=>"");if(c)if((l.headers.get("content-type")||"").includes("application/json")||ww(c))try{a=JSON.parse(c)}catch{a=c}else a=c;if(!l.ok)throw new fr(l.status,Vg(l.status,a,e),e,a);return a}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}function bo(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{if(!l.ok){const a=await l.text().catch(()=>""),c=a||null;throw new fr(l.status,Vg(l.status,c,e),e,c)}return l.blob()}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}class Qg{constructor(t){yn(this,"store",new Map);yn(this,"inflight",new Map);yn(this,"totalBytes",0);this.maxBytes=t}getMaxBytes(){return this.maxBytes}getTotalBytes(){return this.totalBytes}getSize(){return this.store.size}has(t){return this.store.has(t)}isInflight(t){return this.inflight.has(t)}get(t){const n=this.store.get(t);if(n)return this.store.delete(t),this.store.set(t,n),n.blob}evictIfNeeded(t){for(;this.totalBytes+t>this.maxBytes&&this.store.size>0;){const n=this.store.keys().next().value;if(n==null)break;const r=this.store.get(n);r&&(this.totalBytes-=r.size),this.store.delete(n)}}set(t,n){const r=n.size||0;if(!(r>this.maxBytes)){if(this.store.has(t)){const s=this.store.get(t);this.totalBytes-=s.size,this.store.delete(t)}this.evictIfNeeded(r),this.store.set(t,{blob:n,size:r}),this.totalBytes+=r}}async getOrFetch(t,n){const r=this.get(t);if(r)return r;const s=this.inflight.get(t);if(s)return s.promise;const i=n(),o=typeof i=="object"&&"promise"in i,l=o?i.promise:i,a=o?i.abort:void 0,c=l.then(m=>(this.set(t,m),m)).finally(()=>{this.inflight.delete(t)});return this.inflight.set(t,{promise:c,abort:a}),c}prefetch(t,n){if(this.store.has(t)||this.inflight.has(t))return;const r=n(),s=typeof r=="object"&&"promise"in r,i=s?r.promise:r,o=s?r.abort:void 0,l=i.then(a=>(this.set(t,a),a)).catch(()=>new Blob).finally(()=>{this.inflight.delete(t)});this.inflight.set(t,{promise:l,abort:o})}cancelPrefetch(t){const n=this.inflight.get(t);if(n!=null&&n.abort)try{n.abort()}catch{}this.inflight.delete(t)}clear(){for(const[t,n]of this.inflight)if(n.abort)try{n.abort()}catch{}this.inflight.clear(),this.store.clear(),this.totalBytes=0}evictPrefix(t){const n=(()=>{const s=t?`/${t.replace(/^\/+/,"")}`:"/";return s==="/"?"/":s.replace(/\/+$/,"")})(),r=s=>{const i=s.startsWith("/")?s.replace(/\/+$/,""):`/${s.replace(/\/+$/,"")}`;return n==="/"?!0:i===n||i.startsWith(`${n}/`)};for(const[s,i]of Array.from(this.store.entries()))r(s)&&(this.totalBytes-=i.size,this.store.delete(s));for(const[s,i]of Array.from(this.inflight.entries()))if(r(s)){if(i.abort)try{i.abort()}catch{}this.inflight.delete(s)}this.totalBytes<0&&(this.totalBytes=0)}}const rs=new Qg(60*1024*1024),sc=new Qg(20*1024*1024),Ua={};function Sw(){const e=Ua==null?void 0:Ua.VITE_API_BASE,t=typeof window<"u",n=t?window.location.origin:"http://localhost",r=t?window.location.hostname:"localhost",s=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\]|.+\.localhost)$/i.test(r);if(!e)return"";let i;try{i=new URL(e,n)}catch{return""}const o=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\])$/i.test(i.hostname);return s?i.origin:o?"":i.origin}const $e=Sw();const kw=40*1024*1024,gh="lenslet.client_id",vh="lenslet.client_id.session",Kg="lenslet.last_event_id",Cw=1e3,Ew=3e4,Nw=5;let es=null,Wo=null,yh=0,ks=null,Cs=0,Hl=!0,Cl=!1;function Yg(){return typeof window<"u"&&typeof EventSource<"u"}function xh(e,t){if(!e)return null;try{return e.getItem(t)}catch{return null}}function wh(e,t,n){if(e)try{e.setItem(t,n)}catch{}}function bw(){if(typeof navigator>"u")return"server";const e=navigator.userAgent||"",t=navigator.language||"",n=navigator.platform||"",r=typeof Intl<"u"&&Intl.DateTimeFormat().resolvedOptions().timeZone||"",s=typeof screen<"u"?`${screen.width}x${screen.height}x${screen.colorDepth}`:"";return[e,t,n,r,s].join("|")}function jw(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=t*16777619>>>0;return t.toString(16).padStart(8,"0")}function Ho(){if(es)return es;const e=typeof window<"u"?window.localStorage:null,t=typeof window<"u"?window.sessionStorage:null,n=xh(e,gh)||xh(t,vh);if(n)return es=n,n;const r=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`;if(e)return wh(e,gh,r),es=r,r;if(t)return wh(t,vh,r),es=r,r;const s=`fp_${jw(bw())}`;return es=s,s}function $i(e="lenslet"){yh+=1;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`nonce_${Math.random().toString(36).slice(2,10)}_${Date.now()}_${yh}`;return`${e}:${Ho()}:${t}`}function Mw(){if(Wo!=null)return Wo;if(typeof window>"u")return null;try{const e=window.localStorage.getItem(Kg);if(!e)return null;const t=Number(e);return!Number.isFinite(t)||t<=0?null:(Wo=t,t)}catch{return null}}function Rw(e){if(!(!Number.isFinite(e)||e<=0)&&(Wo=e,!(typeof window>"u")))try{window.localStorage.setItem(Kg,String(e))}catch{}}function Lw(){if(typeof window>"u")return`${$e}/events`;const e=new URL(`${$e}/events`,window.location.origin),t=Mw();return t!=null&&Number.isFinite(t)&&e.searchParams.set("last_event_id",String(t)),e.toString()}function Tw(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}let Xt=null,Gg="idle";const ic=new Set,oc=new Set,lc=new Set;function Es(e){Gg=e;for(const t of oc)t(e)}function yd(e){if(Cl!==e){Cl=e;for(const t of lc)t(e)}}function xd(){ks!=null&&(window.clearTimeout(ks),ks=null)}function _w(){Cs=0,xd()}function Pw(){if(!Hl||ks!=null)return;Cs+=1;const e=Math.min(Cw*Math.pow(2,Cs-1),Ew);Cs>=Nw?(Es("offline"),yd(!0)):Es("reconnecting"),ks=window.setTimeout(()=>{ks=null,qg()},e)}function qg(){if(!Hl||!Yg()||(Xt&&Xt.readyState===EventSource.CLOSED&&(Xt.close(),Xt=null),Xt))return;Cs>0?Es("reconnecting"):Es("connecting");const e=new EventSource(Lw());Xt=e;const t=n=>r=>{const s=Tw(r.data);if(!s)return;const i=r.lastEventId?Number(r.lastEventId):null,o=i!=null&&Number.isFinite(i)?i:null;o!=null&&Rw(o);for(const l of ic)l({type:n,id:o,data:s})};e.addEventListener("item-updated",t("item-updated")),e.addEventListener("metrics-updated",t("metrics-updated")),e.addEventListener("presence",t("presence")),e.onopen=()=>{_w(),yd(!1),Es("live")},e.onerror=()=>{Xt===e&&(e.close(),Xt=null,Pw())}}function Iw(){Hl=!0,Yg()&&(xd(),qg())}function Ow(){Hl=!1,xd(),Cs=0,Xt&&(Xt.close(),Xt=null),yd(!1),Es("offline")}function Fw(e){return ic.add(e),()=>{ic.delete(e)}}function Dw(e){return oc.add(e),e(Gg),()=>{oc.delete(e)}}function zw(e){return lc.add(e),e(Cl),()=>{lc.delete(e)}}function Aw(){return Cl}const he={getFolder:(e,t)=>{const n=new URLSearchParams({path:e});return t!=null&&n.set("page",String(t)),ut(`${$e}/folders?${n}`).promise},search:(e,t)=>{const n=new URLSearchParams;return e&&n.set("q",e),t&&n.set("path",t),ut(`${$e}/search?${n}`).promise},refreshFolder:e=>{const t=new URLSearchParams({path:e});return ut(`${$e}/refresh?${t}`,{method:"POST"}).promise},getSidecar:e=>ut(`${$e}/item?path=${encodeURIComponent(e)}`).promise,patchSidecar:(e,t,n)=>{const s={"Content-Type":"application/json","Idempotency-Key":(n==null?void 0:n.idempotencyKey)??$i("patch"),"x-client-id":Ho(),"x-updated-by":"web"};return(n==null?void 0:n.ifMatch)!=null&&(s["If-Match"]=String(n.ifMatch)),ut(`${$e}/item?path=${encodeURIComponent(e)}`,{method:"PATCH",headers:s,body:JSON.stringify(t)}).promise},getMetadata:e=>ut(`${$e}/metadata?path=${encodeURIComponent(e)}`).promise,putSidecar:(e,t)=>ut(`${$e}/item?path=${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-client-id":Ho(),"x-updated-by":"web"},body:JSON.stringify(t)}).promise,getHealth:()=>ut(`${$e}/health`).promise,postPresence:(e,t)=>ut(`${$e}/presence`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gallery_id:e,client_id:t??Ho()})}).promise,getThumb:e=>sc.getOrFetch(e,()=>bo(`${$e}/thumb?path=${encodeURIComponent(e)}`)),prefetchThumb:e=>{sc.prefetch(e,()=>bo(`${$e}/thumb?path=${encodeURIComponent(e)}`))},getFile:e=>rs.getOrFetch(e,()=>bo(`${$e}/file?path=${encodeURIComponent(e)}`)),prefetchFile:async e=>{if(!(rs.has(e)||rs.isInflight(e)))try{const t=await bo(`${$e}/file?path=${encodeURIComponent(e)}`).promise;t.size<=kw&&rs.set(e,t)}catch{}},cancelPrefetch:e=>{rs.cancelPrefetch(e)},uploadFile:async(e,t)=>{const n=new FormData;return n.append("dest",e),n.append("file",t),ut(`${$e}/file`,{method:"POST",body:n,timeoutMs:6e4}).promise},moveFile:async(e,t)=>{const n=new FormData;return n.append("src",e),n.append("dest",t),ut(`${$e}/move`,{method:"POST",body:n}).promise},deleteFiles:async e=>ut(`${$e}/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:e})}).promise,exportIntent:async e=>{const t=new FormData;return t.append("path",e),ut(`${$e}/export-intent`,{method:"POST",body:t}).promise},getViews:()=>ut(`${$e}/views`).promise,saveViews:e=>ut(`${$e}/views`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise};class $w{constructor(t=400){yn(this,"cache",new Map);yn(this,"maxSize");this.maxSize=t,typeof window<"u"&&window.addEventListener("beforeunload",()=>this.clear(),{once:!0})}get(t){const n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){for(this.cache.has(t)&&this.cache.delete(t);this.cache.size>=this.maxSize;){const r=this.cache.keys().next().value;if(r===void 0)break;const s=this.cache.get(r);if(this.cache.delete(r),s)try{URL.revokeObjectURL(s)}catch{}}this.cache.set(t,n)}clear(){for(const t of this.cache.values())try{URL.revokeObjectURL(t)}catch{}this.cache.clear()}}const Ba=new $w(400);function Uw({path:e,name:t,onClick:n,selected:r,highlighted:s,displayW:i,displayH:o,ioRoot:l,isScrolling:a,priority:c}){const m=d.useRef(null),[h,v]=d.useState(()=>Ba.get(e)??null),[S,k]=d.useState(!1),[N,T]=d.useState(()=>!!h);return d.useEffect(()=>{const y=m.current;if(!y)return;const g=new IntersectionObserver(p=>{for(const f of p)f.target===y&&k(f.isIntersecting||f.intersectionRatio>0)},{root:l??null,rootMargin:"200px 0px",threshold:.01});return g.observe(y),()=>{g.unobserve(y),g.disconnect()}},[l]),d.useEffect(()=>{if(h||!(S&&!a||c))return;let y=!0;return he.getThumb(e).then(g=>{if(!y)return;const p=URL.createObjectURL(g);Ba.set(e,p),v(p)}).catch(()=>{}),()=>{y=!1}},[e,h,S,a,c]),d.useEffect(()=>{var g;if(!h){T(!1);return}const y=(g=m.current)==null?void 0:g.querySelector("img");y&&y.complete&&y.naturalWidth>0?T(!0):T(!1)},[h]),d.useEffect(()=>{v(Ba.get(e)??null)},[e]),u.jsx("div",{ref:m,className:`absolute inset-0 relative bg-hover border border-border rounded-lg overflow-hidden select-none ${r?"outline-2 outline-accent":""} ${s?"ring-2 ring-accent/60 animate-pulse":""} hover:outline hover:outline-1 hover:outline-accent`,onClick:n,children:h?u.jsx("img",{className:`w-full h-full object-cover block pointer-events-none select-none opacity-0 transition-opacity duration-[160ms] ${N?"opacity-100":""}`,src:h,alt:t,loading:"lazy",decoding:"async",onLoad:()=>T(!0),width:i?Math.round(i):void 0,height:o?Math.round(o):void 0}):null})}function ts(e,t,n){let r=n.initialDeps??[],s,i=!0;function o(){var l,a,c;let m;n.key&&((l=n.debug)!=null&&l.call(n))&&(m=Date.now());const h=e();if(!(h.length!==r.length||h.some((k,N)=>r[N]!==k)))return s;r=h;let S;if(n.key&&((a=n.debug)!=null&&a.call(n))&&(S=Date.now()),s=t(...h),n.key&&((c=n.debug)!=null&&c.call(n))){const k=Math.round((Date.now()-m)*100)/100,N=Math.round((Date.now()-S)*100)/100,T=N/16,y=(g,p)=>{for(g=String(g);g.length<p;)g=" "+g;return g};console.info(`%c ${y(N,5)} /${y(k,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*T,120))}deg 100% 31%);`,n==null?void 0:n.key)}return n!=null&&n.onChange&&!(i&&n.skipInitialOnChange)&&n.onChange(s),i=!1,s}return o.updateDeps=l=>{r=l},o}function Sh(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const Bw=(e,t)=>Math.abs(e-t)<1.01,Ww=(e,t,n)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,s),n)}},kh=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},Hw=e=>e,Vw=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},Qw=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const s=o=>{const{width:l,height:a}=o;t({width:Math.round(l),height:Math.round(a)})};if(s(kh(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const a=o[0];if(a!=null&&a.borderBoxSize){const c=a.borderBoxSize[0];if(c){s({width:c.inlineSize,height:c.blockSize});return}}s(kh(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},Ch={passive:!0},Eh=typeof window>"u"?!0:"onscrollend"in window,Kw=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&Eh?()=>{}:Ww(r,()=>{t(s,!1)},e.options.isScrollingResetDelay),o=m=>()=>{const{horizontal:h,isRtl:v}=e.options;s=h?n.scrollLeft*(v&&-1||1):n.scrollTop,i(),t(s,m)},l=o(!0),a=o(!1);a(),n.addEventListener("scroll",l,Ch);const c=e.options.useScrollendEvent&&Eh;return c&&n.addEventListener("scrollend",a,Ch),()=>{n.removeEventListener("scroll",l),c&&n.removeEventListener("scrollend",a)}},Yw=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},Gw=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const o=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class qw{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Hw,rangeExtractor:Vw,onChange:()=>{},measureElement:Yw,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=ts(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=n[o];if(s.has(l.lane))continue;const a=i.get(l.lane);if(a==null||l.end>a.end?i.set(l.lane,l):l.end<a.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=ts(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,s,i,o,l)=>(this.prevLanes!==void 0&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=ts(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l},a)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const v of this.laneAssignments.keys())v>=n&&this.laneAssignments.delete(v);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(v=>{this.itemSizeCache.set(v.key,v.size)}));const c=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const m=this.measurementsCache.slice(0,c),h=new Array(l).fill(void 0);for(let v=0;v<c;v++){const S=m[v];S&&(h[S.lane]=v)}for(let v=c;v<n;v++){const S=i(v),k=this.laneAssignments.get(v);let N,T;if(k!==void 0&&this.options.lanes>1){N=k;const f=h[N],C=f!==void 0?m[f]:void 0;T=C?C.end+this.options.gap:r+s}else{const f=this.options.lanes===1?m[v-1]:this.getFurthestMeasurement(m,v);T=f?f.end+this.options.gap:r+s,N=f?f.lane:v%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(v,N)}const y=a.get(S),g=typeof y=="number"?y:this.options.estimateSize(v),p=T+g;m[v]={index:v,start:T,size:g,end:p,key:S,lane:N},h[N]=v}return this.measurementsCache=m,m},{key:!1,debug:()=>this.options.debug}),this.calculateRange=ts(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?Xw({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=ts(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,o)=>i===null||o===null?[]:n({startIndex:i,endIndex:o,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=ts(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,o=n.length;i<o;i++){const l=n[i],a=r[l];s.push(a)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return Sh(r[Xg(0,r.length-1,s=>Sh(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(s.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const o=10,l=c=>{if(!this.targetWindow)return;const m=this.getOffsetForIndex(n,c);if(!m){console.warn("Failed to get offset for index:",n);return}const[h,v]=m;this._scrollToOffset(h,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const S=this.getScrollOffset(),k=this.getOffsetForIndex(n,v);if(!k){console.warn("Failed to get offset for index:",n);return}Bw(k[0],S)||a(v)})},a=c=>{this.targetWindow&&(i++,i<o?this.targetWindow.requestAnimationFrame(()=>l(c)):console.warn(`Failed to scroll to index ${n} after ${o} attempts.`))};l(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}s=Math.max(...i.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const Xg=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function Xw({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const s=e.length-1,i=a=>e[a].start;if(e.length<=r)return{startIndex:0,endIndex:s};let o=Xg(0,s,i,n),l=o;if(r===1)for(;l<s&&e[l].end<n+t;)l++;else if(r>1){const a=Array(r).fill(0);for(;l<s&&a.some(m=>m<n+t);){const m=e[l];a[m.lane]=m.end,l++}const c=Array(r).fill(n+t);for(;o>=0&&c.some(m=>m>=n);){const m=e[o];c[m.lane]=m.start,o--}o=Math.max(0,o-o%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const Nh=typeof document<"u"?d.useLayoutEffect:d.useEffect;function Jw(e){const t=d.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var o;i?fd.flushSync(t):t(),(o=e.onChange)==null||o.call(e,s,i)}},[r]=d.useState(()=>new qw(n));return r.setOptions(n),Nh(()=>r._didMount(),[]),Nh(()=>r._willUpdate()),r}function Zw(e){return Jw({observeElementRect:Qw,observeElementOffset:Kw,scrollToFn:Gw,...e})}function e1({containerW:e,gap:t,targetCell:n,aspect:r,captionH:s}){const i=Math.max(1,Math.floor((e+t)/(n+t))),o=(e-t*(i-1))/i,l=o*r.h/r.w,a=l+s+t;return{columns:i,cellW:o,mediaH:l,rowH:a}}const t1=1.333;function n1({items:e,containerWidth:t,targetHeight:n,gap:r,captionH:s}){if(t<=0)return[];const i=[];let o=[],l=0;const a=(c,m)=>({index:i.length,height:m+s+r,imageH:m,items:c.map(h=>({item:h.item,displayW:h.aspect*m,displayH:m,originalIndex:h.originalIndex}))});for(let c=0;c<e.length;c++){const m=e[c],h=m.w>0&&m.h>0?m.w/m.h:t1;o.push({item:m,aspect:h,originalIndex:c}),l+=h;const v=(o.length-1)*r;if(l*n+v>=t){const k=(t-v)/l;i.push(a(o,k)),o=[],l=0}}return o.length>0&&i.push(a(o,n)),i}function r1(e,t,n){return{mode:"adaptive",rows:n1({items:t,containerWidth:e,targetHeight:n.targetCell,gap:n.gap,captionH:n.captionH})}}function s1(e,t,n){const{columns:r,cellW:s,mediaH:i,rowH:o}=e1({containerW:e,gap:n.gap,targetCell:n.targetCell,aspect:n.aspect,captionH:n.captionH}),l=Math.ceil(t.length/Math.max(1,r));return{mode:"grid",columns:r,cellW:s,mediaH:i,rowH:o,rowCount:l}}function i1(e,t,n){const[r,s]=d.useState(0);d.useLayoutEffect(()=>{const a=e.current;if(!a)return;const c=()=>{const h=getComputedStyle(a),v=a.clientWidth-parseFloat(h.paddingLeft)-parseFloat(h.paddingRight);s(v)},m=new ResizeObserver(c);return m.observe(a),c(),()=>m.disconnect()},[]);const i=d.useMemo(()=>n.viewMode==="adaptive"?r1(r,t,n):s1(r,t,n),[r,t,n.viewMode,n.gap,n.targetCell,n.aspect.w,n.aspect.h,n.captionH]),o=Zw({count:i.mode==="adaptive"?i.rows.length:i.rowCount,getScrollElement:()=>e.current,estimateSize:a=>i.mode==="adaptive"?i.rows[a].height:i.rowH,overscan:8}),l=o.getVirtualItems();return d.useEffect(()=>{o.measure()},[i,o]),{width:r,layout:i,rowVirtualizer:o,virtualRows:l}}function o1(e,t,n,r){if(!e.length)return null;const s=n?e.findIndex(l=>l.path===n):0,i=Math.max(1,t);let o=s;if(r.key==="ArrowRight"||r.key==="d")o=Math.min(e.length-1,s+1);else if(r.key==="ArrowLeft"||r.key==="a")o=Math.max(0,s-1);else if(r.key==="ArrowDown"||r.key==="s")o=Math.min(e.length-1,s+i);else if(r.key==="ArrowUp"||r.key==="w")o=Math.max(0,s-i);else return r.key==="Enter"&&n?"open":null;return o}const xn=12,l1=44,a1={w:4,h:3},u1=350,c1=120;function d1({items:e,selected:t,restoreToSelectionToken:n,onSelectionChange:r,onOpenViewer:s,onContextMenuItem:i,highlight:o,recentlyUpdated:l,suppressSelectionHighlight:a=!1,viewMode:c="grid",targetCellSize:m=220,scrollRef:h,hideScrollbar:v=!1}){const[S,k]=d.useState(null),[N,T]=d.useState(null),[y,g]=d.useState(!1),[p,f]=d.useState(null),[C,R]=d.useState(null),j=d.useRef(null),b=d.useRef(null),_=d.useRef(null),E=h??_,O=d.useRef(null),Q=m,{width:z,layout:A,rowVirtualizer:le,virtualRows:pe}=i1(E,e,{gap:xn,targetCell:Q,aspect:a1,captionH:l1,viewMode:c}),de=d.useMemo(()=>{const W=new Map;for(let ne=0;ne<e.length;ne++)W.set(e[ne].path,ne);return W},[e]),I=d.useMemo(()=>{if(A.mode!=="adaptive")return null;const W=new Map;return A.rows.forEach((ne,se)=>{let L=0;ne.items.forEach((F,Y)=>{const V=L+F.displayW/2;W.set(F.item.path,{row:se,center:V,order:Y}),L+=F.displayW+xn})}),W},[A]);d.useEffect(()=>{if(!t.length)return;const W=t[0];p!==W&&f(W)},[t,p]);const U=d.useMemo(()=>{if(A.mode!=="adaptive")return null;let W=0;return A.rows.map(ne=>{const se=W;return W+=ne.height,{start:se,height:ne.height}})},[A]),X=d.useRef(null),ue=(W,ne)=>{try{if(X.current!=null){try{cancelAnimationFrame(X.current)}catch{}X.current=null}const se=W.scrollTop,L=ne-se;if(Math.abs(L)<1){W.scrollTop=ne;return}const F=140,Y=performance.now(),V=ve=>1-Math.pow(1-ve,3),ae=ve=>{const Ee=Math.min(1,(ve-Y)/F),be=V(Ee);W.scrollTop=se+L*be,Ee<1?X.current=requestAnimationFrame(ae):X.current=null};X.current=requestAnimationFrame(ae)}catch{W.scrollTop=ne}},[me,Re]=d.useState(!1);d.useEffect(()=>{const W=E.current;if(!W)return;let ne=0;const se=()=>{Re(!0),window.clearTimeout(ne),ne=window.setTimeout(()=>Re(!1),c1)};return W.addEventListener("scroll",se,{passive:!0}),()=>W.removeEventListener("scroll",se)},[]);const ee=()=>{b.current!=null&&(window.clearTimeout(b.current),b.current=null)},q=()=>{if(ee(),g(!1),k(null),j.current){try{URL.revokeObjectURL(j.current)}catch{}j.current=null}T(null)},J=W=>{me||(ee(),k(W),g(!1),b.current=window.setTimeout(async()=>{b.current=null;try{const ne=await he.getFile(W),se=URL.createObjectURL(ne);if(j.current)try{URL.revokeObjectURL(j.current)}catch{}j.current=se,T(se),g(!0)}catch{}},u1))},fe=A.mode==="grid"?A.columns:Math.max(1,Math.floor(z/(Q+xn))),Ze=(W,ne)=>{if(A.mode!=="adaptive")return null;const se=A.rows[W];if(!se)return null;let L=0,F=null;for(const Y of se.items){const V=L+Y.displayW/2,ae=Math.abs(V-ne);(!F||ae<F.dist)&&(F={path:Y.item.path,dist:ae}),L+=Y.displayW+xn}return F?F.path:null},Ce=(W,ne)=>{var be,yt,ke,xt;if(!e.length)return null;const se=W??e[0].path;if(A.mode!=="adaptive"){const Ie=o1(e,fe,se,ne);return Ie==="open"||Ie==null?Ie:((be=e[Ie])==null?void 0:be.path)??null}const L=I==null?void 0:I.get(se);if(!L)return se;const F=de.get(se)??0,Y=ne.key;if(Y==="Enter")return"open";if(Y==="ArrowRight"||Y==="d")return((yt=e[Math.min(e.length-1,F+1)])==null?void 0:yt.path)??se;if(Y==="ArrowLeft"||Y==="a")return((ke=e[Math.max(0,F-1)])==null?void 0:ke.path)??se;const V=Y==="ArrowDown"||Y==="s"?1:Y==="ArrowUp"||Y==="w"?-1:0;if(V===0)return null;const ae=L.row+V;if(ae<0||ae>=(((xt=A.rows)==null?void 0:xt.length)??0))return se;const ve=L.center;return Ze(ae,ve)??se},Ge=W=>{var ne;try{(ne=document.getElementById(`cell-${encodeURIComponent(W)}`))==null||ne.focus()}catch{}},vt=W=>{try{he.prefetchFile(W),he.prefetchThumb(W)}catch{}},De=(W,ne)=>{f(W),R(W);const se=!!ne.shiftKey,L=!!(ne.ctrlKey||ne.metaKey);if(se){const F=O.current??p??t[0]??W,Y=de.get(F)??e.findIndex(ae=>ae.path===F),V=de.get(W)??e.findIndex(ae=>ae.path===W);if(Y!==-1&&V!==-1){const ae=Math.min(Y,V),ve=Math.max(Y,V),Ee=e.slice(ae,ve+1).map(be=>be.path);if(L){const be=new Set(t);for(const yt of Ee)be.add(yt);r(Array.from(be))}else r(Ee)}else r([W])}else if(L){const F=new Set(t);F.has(W)?F.delete(W):F.add(W),r(Array.from(F)),O.current=W}else r([W]),O.current=W;me||vt(W),Ge(W)},Qt=(W,ne)=>{var se,L;try{const F=Ft.has(W)&&t.length>0?t:[W];(se=ne.dataTransfer)==null||se.setData("application/x-lenslet-paths",JSON.stringify(F)),ne.dataTransfer&&(ne.dataTransfer.effectAllowed="copyMove");try{document.body.classList.add("drag-active")}catch{}const V=ne.currentTarget.querySelector(".cell-content img"),ae=document.createElement("div");ae.className="drag-ghost";const ve=document.createElement("img");ve.draggable=!1,ve.alt="drag",V&&V.src&&(ve.src=V.src),ae.appendChild(ve),document.body.appendChild(ae);const Ee=ae.getBoundingClientRect().width||150;(L=ne.dataTransfer)==null||L.setDragImage(ae,Math.round(Ee/2),0);const be=()=>{try{ae.remove()}catch{}try{document.body.classList.remove("drag-active")}catch{}window.removeEventListener("dragend",be),window.removeEventListener("pointerup",be),document.removeEventListener("visibilitychange",be)};window.addEventListener("dragend",be),window.addEventListener("pointerup",be),document.addEventListener("visibilitychange",be)}catch{}};d.useEffect(()=>{const W=E.current;if(!W)return;const ne=se=>{var be,yt,ke;const L=Ce(C,se);if(L==null)return;if(se.preventDefault(),L==="open"){C&&s(C);return}const F=e.find(xt=>xt.path===L);if(!F)return;R(F.path),f(F.path),r([F.path]);try{O.current=F.path}catch{}const Y=A.mode==="grid"?Math.floor((de.get(F.path)??0)/Math.max(1,A.columns)):((be=I==null?void 0:I.get(F.path))==null?void 0:be.row)??0,V=W.scrollTop,ae=V+W.clientHeight,ve=A.mode==="adaptive"?((yt=U==null?void 0:U[Y])==null?void 0:yt.start)??0:Y*A.rowH,Ee=A.mode==="adaptive"?ve+(((ke=U==null?void 0:U[Y])==null?void 0:ke.height)??0):ve+A.rowH;(ve<V||Ee>ae)&&ue(W,ve),Ge(F.path)};return W.addEventListener("keydown",ne),()=>{W.removeEventListener("keydown",ne)}},[e,C,fe,s,A,I,U,de]),d.useLayoutEffect(()=>{var Y;const W=E.current;if(!W||!n||!t||t.length===0)return;const ne=t[0],se=de.get(ne);if(se==null||se<0)return;let L=0;if(A.mode==="grid")L=Math.floor(se/Math.max(1,A.columns));else{let V=0,ae=A.rows.length-1;for(;V<=ae;){const ve=V+ae>>1,Ee=A.rows[ve];if(se>=Ee.items[0].originalIndex&&se<=Ee.items[Ee.items.length-1].originalIndex){L=ve;break}se<Ee.items[0].originalIndex?ae=ve-1:V=ve+1}}const F=A.mode==="adaptive"?((Y=U==null?void 0:U[L])==null?void 0:Y.start)??0:L*A.rowH;try{W.scrollTop=F}catch{}},[n,A,U]);const Ft=d.useMemo(()=>new Set(t),[t]),ln=!!(S&&N&&y);d.useEffect(()=>{var W;(W=E.current)==null||W.focus()},[]),d.useEffect(()=>{var W;if(a){try{(W=E.current)==null||W.blur()}catch{}try{R(null)}catch{}}},[a]);const yr=C?`cell-${encodeURIComponent(C)}`:void 0;return u.jsx("div",{role:"grid","aria-label":"Gallery",className:`relative h-full overflow-auto p-3 outline-none ${v?"scrollbar-hidden pr-4":"scrollbar-thin"} ${ln?"cursor-zoom-in":""}`,ref:E,tabIndex:0,"aria-activedescendant":yr,onMouseDown:()=>{var W;return(W=E.current)==null?void 0:W.focus()},style:{"--gap":`${xn}px`},children:u.jsxs("div",{className:"relative w-full",style:{height:le.getTotalSize()},children:[pe.map(W=>{var Y;let ne=[],se={},L="";if(A.mode==="adaptive"){const V=A.rows[W.index];if(!V)return null;ne=V.items,se={height:V.height,transform:`translate3d(0, ${W.start}px, 0)`,display:"flex",gap:xn,paddingBottom:xn},L="absolute top-0 left-0 right-0 w-full will-change-transform"}else{const V=W.index*A.columns;ne=e.slice(V,V+A.columns).map(ve=>({item:ve,displayW:A.cellW,displayH:A.mediaH})),se={transform:`translate3d(0, ${W.start}px, 0)`,gridTemplateColumns:`repeat(${A.columns}, minmax(0, 1fr))`,gap:xn,paddingBottom:xn},L="absolute top-0 left-0 right-0 w-full grid will-change-transform"}const F=W.index===((Y=pe[0])==null?void 0:Y.index);try{if(!me)for(const{item:V}of ne)try{he.prefetchThumb(V.path)}catch{}}catch{}return u.jsx("div",{className:L,role:"row",style:se,children:ne.map(({item:V,displayW:ae,displayH:ve})=>{const Ee=!a&&(p===V.path||Ft.has(V.path)),be=(l==null?void 0:l.has(V.path))??!1,yt=A.mode==="adaptive"?{width:ae}:{},ke=A.mode==="adaptive"?{height:ve}:{},xt=A.mode==="adaptive"?"relative rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group shrink-0":"relative aspect-[4/3] rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group";return u.jsxs("div",{id:`cell-${encodeURIComponent(V.path)}`,className:`relative min-w-0 ${Ee?"outline outline-2 outline-accent outline-offset-2 rounded-[10px]":""}`,role:"gridcell","aria-selected":Ee,tabIndex:C===V.path?0:-1,onFocus:()=>R(V.path),draggable:!0,style:yt,onDragStart:Ie=>Qt(V.path,Ie),onDragEnd:()=>{},onContextMenu:Ie=>{Ie.preventDefault(),Ie.stopPropagation(),i&&i(Ie,V.path)},children:[u.jsxs("div",{className:xt,style:ke,onMouseEnter:()=>{try{he.prefetchFile(V.path)}catch{}},onDoubleClick:()=>s(V.path),onMouseLeave:q,children:[u.jsx("div",{className:"cell-content absolute inset-0",children:u.jsx(Uw,{path:V.path,name:V.name,selected:Ee,highlighted:be,displayW:ae,displayH:ve,ioRoot:E.current,isScrolling:me,priority:F,onClick:Ie=>De(V.path,Ie)})}),u.jsx("div",{className:"absolute right-0 bottom-0 w-7 h-7 cursor-zoom-in",onMouseEnter:()=>J(V.path),onMouseLeave:q,children:u.jsx("div",{className:"absolute right-0 bottom-0 h-[18px] w-[18px] flex items-center justify-center text-text select-none opacity-0 group-hover:opacity-50 hover:opacity-100 transition-all duration-[140ms]",style:{clipPath:'path("M0 9C0 4.02944 4.02944 0 9 0H18V18H0V9Z")',background:"linear-gradient(135deg, rgba(18,18,18,0.9) 0%, rgba(34,34,34,0.9) 60%, rgba(22,22,22,0.9) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",borderLeft:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 1px 2px rgba(0,0,0,0.45)",backdropFilter:"blur(1px)"},children:u.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#d9dce2]","aria-hidden":"true",style:{transform:"translate(0px,0px)"},children:[u.jsx("circle",{cx:"11",cy:"11",r:"5.4"}),u.jsx("path",{d:"M15.5 15.5 L19 19"})]})})})]}),u.jsxs("div",{className:"flex flex-col items-center text-center gap-0 mt-1 px-0.5 text-white/90",children:[u.jsx("div",{className:"text-sm leading-[18px] thumb-filename line-clamp-2 break-words hyphens-auto text-center",title:V.name,children:(()=>{const Ie=(o||"").trim();if(!Ie)return V.name;const xr=V.name,Kt=xr.toLowerCase().indexOf(Ie.toLowerCase());if(Kt===-1)return V.name;const Yl=xr.slice(0,Kt),Zi=xr.slice(Kt,Kt+Ie.length),Gl=xr.slice(Kt+Ie.length);return u.jsxs(u.Fragment,{children:[Yl,u.jsx("mark",{className:"bg-accent/20 text-inherit rounded px-0.5",children:Zi}),Gl]})})()}),u.jsxs("div",{className:"text-[11px] leading-[15px] opacity-70",children:[V.w,"  ",V.h]})]})]},V.path)})},W.key)}),S&&N&&y&&fd.createPortal(u.jsx("div",{className:"toolbar-offset fixed inset-0 z-[999] flex items-center justify-center pointer-events-none bg-black/20 opacity-100",children:u.jsx("img",{src:N,alt:"preview",className:"max-w-[80vw] max-h-[80vh] object-contain opacity-[0.98]"})}),document.body)]},`${c}-${fe}`)})}const f1=48,h1=[.1,.24,.5,.74,.9];function p1({items:e,metricKey:t,scrollRef:n,sortDir:r}){const{orderedValues:s,numericValues:i}=d.useMemo(()=>{var E;const b=[],_=[];for(const O of e){const Q=(E=O.metrics)==null?void 0:E[t],z=Q==null||Number.isNaN(Q)?null:Q;b.push(z),z!=null&&_.push(z)}return{orderedValues:b,numericValues:_}},[e,t]),o=d.useMemo(()=>m1(i,f1),[i]),l=d.useMemo(()=>g1(i,h1),[i]),[a,c]=d.useState(0),[m,h]=d.useState(null),[v,S]=d.useState(!1),k=d.useRef(null);if(d.useEffect(()=>{const b=n.current;if(!b)return;const _=()=>{const E=Math.max(1,b.scrollHeight-b.clientHeight),O=Rr(E>0?b.scrollTop/E:0);c(O)};return _(),b.addEventListener("scroll",_,{passive:!0}),window.addEventListener("resize",_),()=>{b.removeEventListener("scroll",_),window.removeEventListener("resize",_)}},[n,e.length]),d.useEffect(()=>{h(null)},[t,e.length]),!o)return null;const N={min:o.min,max:o.max},T=m!=null?jh(m):null,y=jh(a),g=r==="desc",p=d.useMemo(()=>m==null?null:x1(s,m),[s,m]);function f(b){h(Rr(b))}function C(){h(null)}function R(b){const _=n.current;if(!_)return;const E=Math.max(0,_.scrollHeight-_.clientHeight);_.scrollTop=Rr(b)*E}function j(b){var E;const _=(E=k.current)==null?void 0:E.getBoundingClientRect();return _?Rr((b.clientY-_.top)/_.height):null}return u.jsxs("div",{className:"absolute right-0 top-3 bottom-3 w-[14px] flex items-stretch pointer-events-auto",children:[u.jsxs("svg",{ref:k,viewBox:"0 0 10 100",preserveAspectRatio:"none",className:"w-full h-full rounded bg-surface-inset border border-border/60 cursor-ns-resize",onPointerDown:b=>{var E;b.preventDefault();const _=j(b);_!=null&&(S(!0),f(_),R(_),(E=k.current)==null||E.setPointerCapture(b.pointerId))},onPointerMove:b=>{const _=j(b);if(_==null){v||C();return}f(_),v&&R(_)},onPointerUp:b=>{var _;S(!1),(_=k.current)==null||_.releasePointerCapture(b.pointerId)},onPointerLeave:()=>{v||C()},children:[v1(o.bins,"var(--border-strong)",{flip:g}),y1(l,N,{flip:g,color:"var(--muted)"}),bh(y,{color:"var(--highlight)",strokeWidth:.8}),T!=null&&bh(T,{color:"var(--text-secondary)",strokeWidth:.6,dashed:!0})]}),p!=null&&m!=null&&u.jsx("div",{className:"pointer-events-none absolute right-full mr-2 px-1.5 py-0.5 rounded border border-border bg-surface text-[10px] text-text shadow",style:{top:`calc(${(m*100).toFixed(2)}% - 8px)`},children:S1(p)})]})}function m1(e,t){if(!e.length)return null;const n=Math.min(...e);let r=Math.max(...e);n===r&&(r=n+1);const s=new Array(t).fill(0),i=t/(r-n);for(const o of e){const l=Math.max(0,Math.min(t-1,Math.floor((o-n)*i)));s[l]+=1}return{bins:s,min:n,max:r}}function g1(e,t){if(!e.length)return[];const n=[...e].sort((s,i)=>s-i),r=n.length-1;return t.map(s=>{const i=r*s,o=Math.floor(i),l=Math.ceil(i);if(o===l)return n[o];const a=i-o;return n[o]+(n[l]-n[o])*a})}function v1(e,t,n){const r=Math.max(1,...e),s=100/e.length,i=(n==null?void 0:n.flip)??!1;return e.map((o,l)=>{const a=Math.max(.8,o/r*10),c=(i?e.length-1-l:l)*s;return u.jsx("rect",{x:10-a,y:c,width:a,height:Math.max(.2,s-.2),fill:t,opacity:.9},`sb-${l}`)})}function y1(e,t,n){const r=(n==null?void 0:n.flip)??!1,s=n==null?void 0:n.color;return e.map((i,o)=>{const l=w1(i,t,r),a=o===2;return u.jsx("line",{x1:0,y1:l,x2:10,y2:l,stroke:s,strokeWidth:a?.8:.5,opacity:a?.9:.6,vectorEffect:"non-scaling-stroke"},`qt-${o}-${i}`)})}function bh(e,t){return u.jsx("line",{x1:0,y1:e,x2:10,y2:e,stroke:t.color,strokeWidth:t.strokeWidth??.6,strokeDasharray:t.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function x1(e,t){if(!e.length)return null;const n=Math.round(Rr(t)*(e.length-1)),r=e[n];if(r!=null)return r;for(let s=1;s<e.length;s++){const i=n-s;if(i>=0&&e[i]!=null)return e[i];const o=n+s;if(o<e.length&&e[o]!=null)return e[o]}return null}function w1(e,t,n){const r=t.max-t.min;if(r===0)return 0;const s=Rr((e-t.min)/r);return(n?1-s:s)*100}function jh(e){return Rr(e)*100}function Rr(e){return e<0?0:e>1?1:e}function S1(e){if(e==null||Number.isNaN(e))return"-";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Lr(e,t){const[n,r]=d.useState(null),s=d.useRef(null);return d.useEffect(()=>{if(!e){if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}r(null);return}let i=!0;return e().then(o=>{if(!i)return;const l=URL.createObjectURL(o);if(s.current)try{URL.revokeObjectURL(s.current)}catch{}s.current=l,r(l)}).catch(()=>{}),()=>{i=!1}},t),d.useEffect(()=>()=>{if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}},[]),n}function k1(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[o,l]=d.useState(1),[a,c]=d.useState(!1),[m,h]=d.useState(!1),[v,S]=d.useState(!1),k=d.useRef(null),N=d.useRef(null),T=()=>{const p=k.current,f=N.current;if(!p||!f||!f.naturalWidth||!f.naturalHeight)return;const C=p.getBoundingClientRect(),R=C.width/f.naturalWidth,j=C.height/f.naturalHeight,b=Math.min(1,Math.min(R,j));l(b);const _=f.naturalWidth*b,E=f.naturalHeight*b;r((C.width-_)/2),i((C.height-E)/2)};return d.useEffect(()=>{const p=k.current;if(!p)return;const f=new ResizeObserver(()=>{try{requestAnimationFrame(()=>T())}catch{T()}});return f.observe(p),()=>f.disconnect()},[]),{scale:e,setScale:t,tx:n,setTx:r,ty:s,setTy:i,base:o,setBase:l,ready:a,setReady:c,dragging:m,setDragging:h,visible:v,setVisible:S,containerRef:k,imgRef:N,fitAndCenter:T,handleWheel:p=>{p.preventDefault();const f=p.deltaY>0?-1:1,C=1.2,R=.05,j=8,b=k.current;if(!b)return;const _=b.getBoundingClientRect(),E=p.clientX-_.left,O=p.clientY-_.top;t(Q=>{const z=Math.min(j,Math.max(R,Q*Math.pow(C,f))),A=z/Q;return r(le=>E-A*(E-le)),i(le=>O-A*(O-le)),Number(z.toFixed(4))})},handleMouseDown:p=>{const f=k.current,C=N.current;if(!f||!C||p.target!==C)return;const j=f.getBoundingClientRect();if(p.clientX<j.left||p.clientX>j.right||p.clientY<j.top||p.clientY>j.bottom)return;p.preventDefault(),p.stopPropagation(),h(!0);const b=p.clientX,_=p.clientY,E=n,O=s,Q=A=>{r(E+(A.clientX-b)),i(O+(A.clientY-_))},z=()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",z),h(!1)};window.addEventListener("mousemove",Q),window.addEventListener("mouseup",z)}}}function C1({path:e,onClose:t,onNavigate:n,onZoomChange:r,requestedZoomPercent:s,onZoomRequestConsumed:i}){const{scale:o,setScale:l,tx:a,setTx:c,ty:m,setTy:h,base:v,ready:S,setReady:k,dragging:N,visible:T,setVisible:y,containerRef:g,imgRef:p,fitAndCenter:f,handleWheel:C,handleMouseDown:R}=k1(),j=Lr(()=>he.getFile(e),[e]),b=Lr(()=>he.getThumb(e),[e]),_=d.useCallback(()=>{y(!1),window.setTimeout(t,110)},[t,y]);return d.useEffect(()=>{requestAnimationFrame(()=>{var E;y(!0),(E=g.current)==null||E.focus()})},[e]),d.useEffect(()=>{const E=O=>{O.key==="Escape"?_():(O.key==="ArrowRight"||O.key==="d")&&n?n(1):(O.key==="ArrowLeft"||O.key==="a")&&n&&n(-1)};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[t,n]),d.useEffect(()=>{k(!1)},[j]),d.useEffect(()=>{r&&r(v*o*100)},[v,o,r]),d.useEffect(()=>{if(s==null)return;const E=g.current;if(!E){i&&i();return}const O=Math.max(.05,Math.min(8,s/100/Math.max(1e-6,v))),Q=E.getBoundingClientRect(),z=Q.width/2,A=Q.height/2;l(le=>{const pe=O/le;return c(de=>z-pe*(z-de)),h(de=>A-pe*(A-de)),Number(O.toFixed(4))}),i&&i()},[s,v,i]),u.jsxs("div",{ref:g,role:"dialog","aria-modal":!0,"aria-label":"Image viewer",tabIndex:-1,className:`toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] flex items-start justify-start bg-panel z-viewer overflow-hidden transition-opacity duration-[110ms] ease-out cursor-grab focus:outline-none focus-visible:outline-none ${N?"cursor-grabbing select-none":""} ${T?"opacity-100":"opacity-0"}`,style:{outline:"none"},onClick:_,onWheel:C,onMouseDown:R,onKeyDown:E=>{E.key==="Tab"&&E.preventDefault()},children:[u.jsxs("button",{"aria-label":"Close",onClick:E=>{E.stopPropagation(),_()},className:"btn btn-sm absolute top-3 right-3 z-10",title:"Close (Esc)",children:[u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"M6 6l12 12"})]}),"Close"]}),b&&u.jsx("img",{src:b,alt:"thumb",className:"absolute top-0 left-0 max-w-none max-h-none object-contain pointer-events-none transition-opacity duration-[110ms] ease-out",draggable:!1,onDragStart:E=>E.preventDefault(),style:{transform:`translate(${a}px, ${m}px) scale(${v})`,transformOrigin:"0 0",opacity:S?0:.5,filter:"blur(0.25px)"}}),j&&u.jsx("img",{ref:p,src:j,alt:"viewer",className:"max-w-none max-h-none object-contain transition-opacity duration-[110ms] ease-out will-change-transform select-none",draggable:!1,onDragStart:E=>{E.preventDefault()},onLoad:E=>{f(),l(1);try{requestAnimationFrame(()=>k(!0))}catch{k(!0)}},onClick:E=>E.stopPropagation(),style:{transform:`translate(${a}px, ${m}px) scale(${v*o})`,transformOrigin:"0 0",opacity:S?.99:0,WebkitUserDrag:"none"}})]})}function wd(e){return!e||!(e instanceof HTMLElement)?!1:e.closest('input, textarea, [contenteditable="true"]')!==null}const E1=1.2,N1=.05,b1=8;function j1(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[o,l]=d.useState(0),[a,c]=d.useState(0),[m,h]=d.useState(1),[v,S]=d.useState(1),[k,N]=d.useState(!1),T=d.useRef(null),y=d.useRef(null),g=d.useRef(null),p=d.useCallback(()=>{const j=T.current;if(!j)return;const b=j.getBoundingClientRect(),_=(E,O,Q,z)=>{if(!E||!E.naturalWidth||!E.naturalHeight)return;const A=b.width/E.naturalWidth,le=b.height/E.naturalHeight,pe=Math.min(1,Math.min(A,le)),de=E.naturalWidth*pe,I=E.naturalHeight*pe;O(pe),Q((b.width-de)/2),z((b.height-I)/2)};_(y.current,h,r,i),_(g.current,S,l,c)},[]);d.useEffect(()=>{const j=T.current;if(!j)return;const b=new ResizeObserver(()=>{try{requestAnimationFrame(()=>p())}catch{p()}});return b.observe(j),()=>b.disconnect()},[p]);const f=d.useCallback(()=>{t(1),p()},[p]),C=d.useCallback(j=>{j.preventDefault();const b=j.deltaY>0?-1:1,_=T.current;if(!_)return;const E=_.getBoundingClientRect(),O=j.clientX-E.left,Q=j.clientY-E.top;t(z=>{const A=Math.min(b1,Math.max(N1,z*Math.pow(E1,b))),le=A/z;return r(pe=>O-le*(O-pe)),i(pe=>Q-le*(Q-pe)),l(pe=>O-le*(O-pe)),c(pe=>Q-le*(Q-pe)),Number(A.toFixed(4))})},[]),R=d.useCallback(j=>{if(j.button!==0||!T.current)return;j.preventDefault(),N(!0);const _=j.clientX,E=j.clientY,O=n,Q=s,z=o,A=a,le=de=>{const I=de.clientX-_,U=de.clientY-E;r(O+I),i(Q+U),l(z+I),c(A+U)},pe=()=>{window.removeEventListener("pointermove",le),window.removeEventListener("pointerup",pe),N(!1)};window.addEventListener("pointermove",le),window.addEventListener("pointerup",pe)},[n,s,o,a]);return{scale:e,baseA:m,baseB:v,txA:n,tyA:s,txB:o,tyB:a,dragging:k,containerRef:T,imgARef:y,imgBRef:g,fitAndCenter:p,resetView:f,handleWheel:C,handlePointerDown:R}}function M1({aItem:e,bItem:t,index:n,total:r,canPrev:s,canNext:i,onNavigate:o,onClose:l}){const a=d.useRef(null),[c,m]=d.useState(50),[h,v]=d.useState(!1),[S,k]=d.useState(!1),{scale:N,baseA:T,baseB:y,txA:g,tyA:p,txB:f,tyB:C,dragging:R,containerRef:j,imgARef:b,imgBRef:_,fitAndCenter:E,resetView:O,handleWheel:Q,handlePointerDown:z}=j1(),A=(e==null?void 0:e.path)??null,le=(t==null?void 0:t.path)??null,pe=(e==null?void 0:e.name)??A??"Select an image",de=(t==null?void 0:t.name)??le??"Select another image";d.useEffect(()=>{requestAnimationFrame(()=>{var q;return(q=a.current)==null?void 0:q.focus()})},[A,le]),d.useEffect(()=>{O(),v(!1),k(!1)},[A,le,O]),d.useEffect(()=>{const q=J=>{if(!wd(J.target)){if(J.key==="Escape"){J.preventDefault(),l();return}if((J.key==="ArrowRight"||J.key==="d")&&i){J.preventDefault(),o(1);return}(J.key==="ArrowLeft"||J.key==="a")&&s&&(J.preventDefault(),o(-1))}};return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)},[l,o,s,i]);const I=Lr(A?()=>he.getFile(A):null,[A]),U=Lr(le?()=>he.getFile(le):null,[le]),X=Lr(A?()=>he.getThumb(A):null,[A]),ue=Lr(le?()=>he.getThumb(le):null,[le]),me=d.useCallback(q=>Math.min(95,Math.max(5,q)),[]),Re=d.useCallback(q=>{const J=q.target;J!=null&&J.closest(".compare-label")||J!=null&&J.closest(".compare-divider-hit")||z(q)},[z]),ee=d.useCallback(q=>{const J=j.current;if(!J)return;q.preventDefault(),q.stopPropagation();const fe=J.getBoundingClientRect(),Ze=q.currentTarget;Ze.setPointerCapture(q.pointerId);const Ce=vt=>{const De=(vt.clientX-fe.left)/fe.width*100;m(me(De))},Ge=vt=>{Ze.releasePointerCapture(vt.pointerId),window.removeEventListener("pointermove",Ce),window.removeEventListener("pointerup",Ge)};window.addEventListener("pointermove",Ce),window.addEventListener("pointerup",Ge)},[me]);return u.jsxs("div",{ref:a,role:"dialog","aria-modal":!0,"aria-label":"Compare images",tabIndex:-1,className:"toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] bg-panel z-viewer flex flex-col overflow-hidden focus:outline-none",onKeyDown:q=>{q.key==="Tab"&&q.preventDefault()},children:[u.jsxs("div",{className:"compare-header flex items-center gap-3 px-3 py-2",children:[u.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Compare"}),u.jsx("div",{className:"text-xs text-muted",children:r>=2?`${n+1}-${Math.min(n+2,r)} of ${r}`:"Select 2 images"}),u.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[u.jsxs("button",{className:"btn btn-sm",onClick:()=>o(-1),disabled:!s,title:"Previous (Left Arrow or A)",children:[u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:u.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Prev"]}),u.jsxs("button",{className:"btn btn-sm",onClick:()=>o(1),disabled:!i,title:"Next (Right Arrow or D)",children:["Next",u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:u.jsx("path",{d:"M9 18l6-6-6-6"})})]}),u.jsxs("button",{className:"btn btn-sm",onClick:l,title:"Close (Esc)",children:[u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"M6 6l12 12"})]}),"Close"]})]})]}),u.jsx("div",{className:"flex-1 min-h-0 p-3 bg-panel",children:u.jsx("div",{ref:j,className:`compare-stage ${R?"is-dragging":""}`,onWheel:Q,onPointerDown:Re,children:!e||!t?u.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-sm text-muted",children:"Select 2 images to compare."}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"compare-label left-3",children:[u.jsx("span",{className:"compare-label-tag",children:"A"}),u.jsx("span",{className:"truncate",title:e.path,children:pe})]}),u.jsxs("div",{className:"compare-label right-3",children:[u.jsx("span",{className:"compare-label-tag",children:"B"}),u.jsx("span",{className:"truncate",title:t.path,children:de})]}),u.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 ${100-c}% 0 0)`},children:[X&&u.jsx("img",{src:X,alt:"thumb A",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:q=>q.preventDefault(),style:{transform:`translate(${g}px, ${p}px) scale(${T})`,transformOrigin:"0 0",opacity:h?0:.5}}),I&&u.jsx("img",{ref:b,src:I,alt:"compare A",className:"compare-image",draggable:!1,onDragStart:q=>q.preventDefault(),onLoad:()=>{E();try{requestAnimationFrame(()=>v(!0))}catch{v(!0)}},style:{transform:`translate(${g}px, ${p}px) scale(${T*N})`,transformOrigin:"0 0",opacity:h?.99:0}})]}),u.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 0 0 ${c}%)`},children:[ue&&u.jsx("img",{src:ue,alt:"thumb B",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:q=>q.preventDefault(),style:{transform:`translate(${f}px, ${C}px) scale(${y})`,transformOrigin:"0 0",opacity:S?0:.5}}),U&&u.jsx("img",{ref:_,src:U,alt:"compare B",className:"compare-image",draggable:!1,onDragStart:q=>q.preventDefault(),onLoad:()=>{E();try{requestAnimationFrame(()=>k(!0))}catch{k(!0)}},style:{transform:`translate(${f}px, ${C}px) scale(${y*N})`,transformOrigin:"0 0",opacity:S?.99:0}})]}),u.jsxs("div",{className:"compare-divider-hit",style:{left:`${c}%`},onPointerDown:ee,children:[u.jsx("div",{className:"compare-divider-line"}),u.jsx("div",{className:"compare-divider-handle"})]})]})})})]})}function Vl(){const[e,t]=d.useState(Aw());return d.useEffect(()=>zw(t),[]),e}const Ui=e=>["item",e],R1={v:1,tags:[],notes:"",version:1,updated_at:"",updated_by:"web"},Gt=new Map,Vo=new Map,ac=new Map,Sd=new Map;let Mh=0;const vn=new Map,di=new Map,L1=12e3,uc=new Set,cc=new Set;let kd={state:"idle"},Bi=null,dc=0;function jo(e){kd=e;for(const t of uc)t(e)}function Ln(){const e=vn.size>0,t=Gt.size+Vo.size+dc;if(e){jo({state:"error",message:"Conflict detected"});return}if(Bi){jo({state:"error",message:Bi});return}if(t>0){jo({state:"syncing"});return}jo({state:"idle"})}function Cd(){let e=null;for(const t of ac.values())e=e==null?t:Math.min(e,t);for(const t of Sd.values())e=e==null?t:Math.min(e,t);return e}function El(){const e=Cd();for(const t of cc)t(e)}function Nl(e){Bi=e,Ln()}function Jg(){Bi&&(Bi=null,Ln())}function Rh(e){dc=Math.max(0,dc+e),Ln()}function T1(){Mh+=1;const e=Mh;return Sd.set(e,Date.now()),El(),e}function _1(e){e!=null&&Sd.delete(e)&&El()}function Ql(e){const t=di.get(e);if(!t||!t.size)return;const n=vn.get(e)??null;for(const r of t)r(n)}function Lh(e){return vn.get(e)??null}function Kl(e){vn.delete(e)&&(Ql(e),Ln())}function P1(e,t){vn.set(e,t),Ql(e),Ln()}function I1(e,t){const n=di.get(e)??new Set;return n.add(t),di.set(e,n),t(vn.get(e)??null),()=>{const r=di.get(e);r&&(r.delete(t),r.size||di.delete(e))}}function O1(e){const[t,n]=d.useState(()=>e?Lh(e):null);return d.useEffect(()=>{if(!e){n(null);return}return n(Lh(e)),I1(e,n)},[e]),t}function F1(e){return uc.add(e),e(kd),()=>{uc.delete(e)}}function D1(){const[e,t]=d.useState(kd);return d.useEffect(()=>F1(t),[]),e}function z1(e){return cc.add(e),e(Cd()),()=>{cc.delete(e)}}function A1(){const[e,t]=d.useState(()=>Cd()),[n,r]=d.useState(()=>e==null?null:Date.now()-e);return d.useEffect(()=>z1(t),[]),d.useEffect(()=>{if(e==null){r(null);return}r(Date.now()-e);const s=window.setInterval(()=>{r(Date.now()-e)},1e3);return()=>window.clearInterval(s)},[e]),n}function fc(e){const t={};return Object.prototype.hasOwnProperty.call(e,"star")&&(t.set_star=e.star??null),Object.prototype.hasOwnProperty.call(e,"notes")&&(t.set_notes=e.notes??""),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.set_tags=Array.isArray(e.tags)?e.tags:[]),t}function hc(e){var t,n;return e.set_star!==void 0||e.set_notes!==void 0||e.set_tags!==void 0||(((t=e.add_tags)==null?void 0:t.length)??0)>0||(((n=e.remove_tags)==null?void 0:n.length)??0)>0}function ii(e){const t=[],n=new Set;for(const r of e??[]){if(typeof r!="string")continue;const s=r.trim();!s||n.has(s)||(n.add(s),t.push(s))}return t}function $1(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}function U1(e,t){if(e.set_star!==void 0&&(t.star??null)!==e.set_star||e.set_notes!==void 0&&(t.notes??"")!==(e.set_notes??""))return!1;if(e.set_tags!==void 0){const r=ii(e.set_tags),s=ii(t.tags);return $1(r,s)}const n=ii(t.tags);for(const r of ii(e.add_tags))if(!n.includes(r))return!1;for(const r of ii(e.remove_tags))if(n.includes(r))return!1;return!0}function Zg(e,t,n){if(n instanceof fr&&n.status===409){const r=n.body;if(r!=null&&r.current)return P1(e,{path:e,current:r.current,pending:t,receivedAt:new Date().toISOString()}),!0}return!1}function B1(e,t){const n=vn.get(e);if(n){if(U1(n.pending,t)){Kl(e);return}vn.set(e,{...n,current:t}),Ql(e),Ln()}}function W1(e){const t=Vl();return vd({queryKey:Ui(e),queryFn:()=>he.getSidecar(e),enabled:!!e,staleTime:3e4,gcTime:5*6e4,retry:2,refetchInterval:t?L1:!1,refetchIntervalInBackground:t})}function H1(e){const t=Jr();return pw({mutationFn:async({patch:n,baseVersion:r,idempotencyKey:s})=>{const i=fc(n);if(!hc(i))return t.getQueryData(Ui(e))??R1;const o={...i,base_version:r};try{return await he.patchSidecar(e,o,{idempotencyKey:s??$i("patch"),ifMatch:r})}catch(l){throw Zg(e,i,l),l}},retry:(n,r)=>r instanceof fr&&r.status===409?!1:n<2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),4e3),onMutate:()=>(Jg(),Rh(1),{inflightId:T1()}),onSuccess:n=>{Kl(e),t.setQueryData(Ui(e),n)},onError:n=>{n instanceof fr&&n.status===409||(n instanceof fr?Nl(n.message):Nl("Failed to save"))},onSettled:(n,r,s,i)=>{Rh(-1),_1(i==null?void 0:i.inflightId)}})}const V1=6;async function Th(e,t){if(!e.length)return;let n=0;const r=[],s=async()=>{for(;n<e.length;){const o=n++,l=e[o];try{await ev(l,t)}catch(a){r.push({path:l,error:a}),console.error(`[bulkUpdateSidecars] Failed for ${l}:`,a)}}},i=Array.from({length:Math.min(V1,e.length)},()=>s());if(await Promise.all(i),r.length===e.length)throw new Error(`All ${e.length} sidecar updates failed`)}async function ev(e,t){const n=Gt.get(e)||{};Gt.set(e,{...n,...t}),Jg(),Ln();const r=Vo.get(e);if(r)return r;ac.set(e,Date.now()),El();const s=(async()=>{try{for(;Gt.has(e);){const i=Gt.get(e);if(!i)break;const o=fc(i);if(!hc(o)){Gt.get(e)===i&&Gt.delete(e);continue}let l=1;try{l=(await he.getSidecar(e)).version??1}catch{l=1}const a={...o,base_version:l};try{await he.patchSidecar(e,a,{idempotencyKey:$i("patch"),ifMatch:l}),Kl(e),Gt.get(e)===i&&Gt.delete(e)}catch(c){if(Zg(e,o,c)){const h=Gt.get(e);if(h&&h!==i){const v=fc(h);if(hc(v)){const S=vn.get(e);S&&(vn.set(e,{...S,pending:v}),Ql(e))}}Gt.delete(e)}else c instanceof fr?Nl(c.message):Nl("Failed to save");throw c}}}finally{Vo.delete(e),ac.delete(e),El(),Ln()}})();return Vo.set(e,s),Ln(),s}function Wa(e){const t=["B","KB","MB","GB","TB"];let n=0,r=e;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${r.toFixed(1)} ${t[n]}`}function Ha(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function Q1(e,t=28){if(e.length<=t)return e;const n=Math.max(4,Math.floor((t-1)/2));return`${e.slice(0,n)}${e.slice(-n)}`}const K1=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});function Y1(e){const t=e.trim();return!t||/[zZ]|[+-]\d{2}:?\d{2}$/.test(t)?t:`${t.includes("T")?t:t.replace(" ","T")}Z`}function _h(e){if(!e)return null;const t=Date.parse(Y1(e));return Number.isFinite(t)?t:null}function G1(e,t=Date.now()){const n=Math.max(0,t-e),r=Math.max(1,Math.floor(n/1e3));if(r<60)return`${r} second${r===1?"":"s"} ago`;const s=Math.floor(r/60);if(s<60)return`${s} minute${s===1?"":"s"} ago`;const i=Math.floor(s/60);return`${i} hour${i===1?"":"s"} ago`}function q1(e){return K1.format(new Date(e))}function Qo(e){if(Array.isArray(e))return e.map(Qo);if(e&&typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,Qo(n)]));if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")||t.startsWith('"')&&t.endsWith('"'))try{const r=JSON.parse(t);return Qo(r)}catch{return e}}return e}function Va(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function X1(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Ph(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}function J1(e){const t=/(\"(\\u[a-fA-F0-9]{4}|\\[^u]|[^\\"])*\"(?:\s*:)?|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\btrue\b|\bfalse\b|\bnull\b)/g;let n="",r=0;for(const s of e.matchAll(t)){const i=s.index??0,o=s[0];n+=Va(e.slice(r,i));let l="var(--json-fallback)";o.startsWith('"')&&o.trimEnd().endsWith(":")?l="var(--json-key)":o.startsWith('"')?l="var(--json-string)":/true|false|null/.test(o)?l="var(--json-literal)":l="var(--json-number)",n+=`<span style="color:${l}">${Va(o)}</span>`,r=i+o.length}return n+=Va(e.slice(r)),n}const Z1=["overview","basics","metadata","notes"],Ih="lenslet.inspector.sections",Oh="lenslet.inspector.metricsExpanded",Qa=12,eS={overview:!0,metadata:!0,basics:!0,notes:!0};function Mo({title:e,open:t,onToggle:n,actions:r,children:s,contentClassName:i}){const[o,l]=d.useState(t),[a,c]=d.useState(t?"open":"closed");return d.useEffect(()=>{if(t){l(!0);const h=window.requestAnimationFrame(()=>c("open"));return()=>window.cancelAnimationFrame(h)}c("closing");const m=window.setTimeout(()=>{l(!1),c("closed")},140);return()=>window.clearTimeout(m)},[t]),u.jsxs("div",{className:"border-b border-border/60",children:[u.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[u.jsxs("button",{type:"button",onClick:n,"aria-expanded":t,className:"flex items-center gap-2 inspector-section-title hover:text-text transition-colors",children:[u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform ${t?"rotate-90":""}`,"aria-hidden":"true",children:u.jsx("path",{d:"m9 18 6-6-6-6"})}),u.jsx("span",{children:e})]}),r]}),o&&u.jsx("div",{className:"inspector-section-body","data-state":a,"aria-hidden":!t,children:u.jsx("div",{className:i??"px-3 pb-3",children:s})})]})}function tS({path:e,selectedPaths:t=[],items:n=[],onResize:r,onStarChanged:s,sortSpec:i}){const o=!!e,{data:l,isLoading:a}=W1(e??""),c=H1(e??""),m=Jr(),[h,v]=d.useState(eS),S=d.useCallback(L=>{v(F=>({...F,[L]:!F[L]}))},[]),[k,N]=d.useState(!1),[T,y]=d.useState(""),[g,p]=d.useState(""),[f,C]=d.useState(""),[R,j]=d.useState(null),[b,_]=d.useState("idle"),[E,O]=d.useState(!1),[Q,z]=d.useState(null),[A,le]=d.useState({}),de=d.useMemo(()=>{const L=n.find(F=>F.path===e);return L&&L.star!==void 0?L.star:null},[n,e])??(l==null?void 0:l.star)??null,I=t.length>1,U=O1(I?null:e),X={tags:!!(U!=null&&U.pending.set_tags),notes:(U==null?void 0:U.pending.set_notes)!==void 0,star:(U==null?void 0:U.pending.set_star)!==void 0},ue=d.useMemo(()=>{const L=new Set(t);return n.filter(F=>L.has(F.path))},[n,t]),me=d.useMemo(()=>ue.reduce((L,F)=>L+(F.size||0),0),[ue]);d.useEffect(()=>{l&&(y((l.tags||[]).join(", ")),p(l.notes||"")),C(""),j(null),_("idle"),O(!1)},[l==null?void 0:l.updated_at,e]);const Re=d.useCallback(L=>{if(I&&t.length){Th(t,L);return}if(!e)return;const F=(l==null?void 0:l.version)??1;c.mutate({patch:L,baseVersion:F,idempotencyKey:$i("patch")})},[I,t,e,l==null?void 0:l.version,c]),ee=d.useCallback(()=>{if(!U||!e)return;const L={};U.pending.set_tags!==void 0&&(L.tags=Ph(T)),U.pending.set_notes!==void 0&&(L.notes=g),U.pending.set_star!==void 0&&(L.star=de??null);const F=U.current.version??1;c.mutate({patch:L,baseVersion:F,idempotencyKey:$i("patch")})},[U,e,T,g,de,c]),q=d.useCallback(()=>{if(!U||!e)return;const L=U.current;y((L.tags||[]).join(", ")),p(L.notes||""),m.setQueryData(Ui(e),L),Kl(e),s==null||s([e],L.star??null)},[U,e,m,s]);d.useEffect(()=>{if(!e)return;const L=F=>{if(wd(F.target))return;const Y=F.key;if(!/^[0-5]$/.test(Y))return;F.preventDefault();const V=Y==="0"?null:Number(Y);if(I&&t.length){Re({star:V}),s==null||s(t,V);return}Re({star:V}),s==null||s([e],V)};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[e,I,t,Re,s]);const J=Lr(e?()=>he.getThumb(e):null,[e]),fe=e?e.split("/").pop()||e:"",Ze=d.useMemo(()=>{var F;if(fe.includes("."))return fe.slice(fe.lastIndexOf(".")+1).toUpperCase();const L=n.find(Y=>Y.path===e);return(F=L==null?void 0:L.type)!=null&&F.includes("/")?L.type.split("/")[1].toUpperCase():""},[fe,n,e]),Ce=d.useMemo(()=>n.find(L=>L.path===e),[n,e]),Ge=d.useMemo(()=>e?(Ce==null?void 0:Ce.source)??e:"",[Ce,e]),vt=d.useCallback(async()=>{if(e){_("loading"),j(null);try{const L=await he.getMetadata(e),F=Qo(L.meta),Y=JSON.stringify(F,null,2);C(Y),_("loaded")}catch(L){const F=L instanceof Error?L.message:"Failed to load metadata";C(F),j(F),_("error")}}},[e]),De=d.useCallback(()=>{var L;f&&((L=navigator.clipboard)==null||L.writeText(f).then(()=>{O(!0),setTimeout(()=>O(!1),1200)}).catch(F=>{const Y=F instanceof Error?F.message:"Copy failed";j(Y)}))},[f]),Qt=d.useMemo(()=>f?J1(f):"",[f]),Ft=b==="loading"?"Loading metadata":f||"PNG metadata not loaded yet.",ln=b==="loaded"&&!!f,yr=ln?"h-48":"h-24",W=I?null:u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[f&&u.jsx("button",{className:"text-muted underline underline-offset-2 hover:text-text disabled:opacity-60 min-w-[48px] text-center",onClick:De,disabled:!f,title:"Copy metadata",children:E?"Copied":"Copy"}),u.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[78px]",onClick:vt,disabled:!e||b==="loading",children:b==="loading"?"Loading":"Load meta"})]});d.useEffect(()=>{try{const L=localStorage.getItem(Ih);if(!L)return;const F=JSON.parse(L);if(!F||typeof F!="object")return;const Y={};for(const V of Z1)typeof F[V]=="boolean"&&(Y[V]=F[V]);Object.keys(Y).length>0&&v(V=>({...V,...Y}))}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(Ih,JSON.stringify(h))}catch{}},[h]),d.useEffect(()=>{try{const L=localStorage.getItem(Oh);L==="1"||L==="true"?N(!0):(L==="0"||L==="false")&&N(!1)}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(Oh,k?"1":"0")}catch{}},[k]);const ne=d.useCallback((L,F)=>{var Y;F&&((Y=navigator.clipboard)==null||Y.writeText(F).then(()=>{z(L),setTimeout(()=>z(V=>V===L?null:V),1e3)}).catch(()=>{}))},[]),se=d.useCallback((L,F)=>{if(F&&!A[L]){const Y=F.offsetHeight;Y&&le(V=>V[L]?V:{...V,[L]:Y})}},[A]);return o?u.jsxs("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:[!I&&u.jsx("div",{className:"p-3 border-b border-border flex justify-center",children:u.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border w-[220px] h-[160px] bg-panel select-none",children:[J&&u.jsx("img",{src:J,alt:"thumb",className:"block w-full h-full object-contain"}),!!Ze&&u.jsx("div",{className:"absolute top-1.5 left-1.5 bg-surface border border-border text-text text-xs px-1.5 py-0.5 rounded-md select-none",children:Ze})]})}),u.jsx(Mo,{title:I?"Selection":"Item",open:h.overview,onToggle:()=>S("overview"),contentClassName:"px-3 pb-3 space-y-2",children:I?u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{className:"inspector-field",children:[u.jsx("div",{className:"inspector-field-label",children:"Selected"}),u.jsxs("div",{className:"inspector-field-value",children:[t.length," files"]})]}),u.jsxs("div",{className:"inspector-field",children:[u.jsx("div",{className:"inspector-field-label",children:"Total size"}),u.jsx("div",{className:"inspector-field-value",children:Wa(me)})]})]}):u.jsxs("div",{className:"inspector-field",children:[u.jsx("div",{className:"inspector-field-label",children:"Filename"}),u.jsx("div",{className:"inspector-field-value break-all",title:fe,children:fe})]})}),u.jsxs(Mo,{title:"Basics",open:h.basics,onToggle:()=>S("basics"),children:[u.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",role:"radiogroup","aria-label":"Star rating",children:[u.jsx("span",{className:"ui-kv-label w-16 shrink-0",children:I?"Rating (all)":"Rating"}),u.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(L=>{const F=(de??0)>=L;return u.jsx("button",{className:`w-6 h-6 flex items-center justify-center rounded-lg border border-border/60 bg-transparent text-[13px] ${F?"text-star-active":"text-star-inactive"} hover:border-border hover:text-star-hover transition-colors`,onClick:()=>{const Y=de===L&&!I?null:L;I&&t.length?(s==null||s(t,Y),Th(t,{star:Y})):e&&(s==null||s([e],Y),ev(e,{star:Y}))},title:`${L} star${L>1?"s":""} (key ${L})`,"aria-label":`${L} star${L>1?"s":""}`,"aria-pressed":de===L,children:F?"":""},L)})})]}),!I&&U&&X.star&&u.jsxs("div",{className:"ui-banner ui-banner-danger mt-2 text-[11px] flex items-center justify-between gap-2",children:[u.jsx("span",{children:"Rating conflict."}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{className:"btn btn-sm",onClick:ee,children:"Apply again"}),u.jsx("button",{className:"btn btn-sm btn-ghost",onClick:q,children:"Keep theirs"})]})]}),!I&&Ce&&u.jsxs("div",{className:"text-[12px] space-y-1.5 leading-relaxed",children:[u.jsxs("div",{className:"ui-kv-row",children:[u.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ne("dimensions",`${Ce.w}${Ce.h}`),children:"Dimensions"}),u.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:L=>se("dimensions",L),style:A.dimensions?{minHeight:A.dimensions}:void 0,children:Q==="dimensions"?"Copied":`${Ce.w}${Ce.h}`})]}),u.jsxs("div",{className:"ui-kv-row",children:[u.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ne("size",Wa(Ce.size)),children:"Size"}),u.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:L=>se("size",L),style:A.size?{minHeight:A.size}:void 0,children:Q==="size"?"Copied":Wa(Ce.size)})]}),u.jsxs("div",{className:"ui-kv-row",children:[u.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ne("type",Ce.type),children:"Type"}),u.jsx("span",{className:"ui-kv-value break-all text-right inline-block min-w-[80px]",ref:L=>se("type",L),style:A.type?{minHeight:A.type}:void 0,children:Q==="type"?"Copied":Ce.type})]}),u.jsxs("div",{className:"ui-kv-row",children:[u.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Ge&&ne("source",Ge),children:"Source"}),u.jsx("span",{className:"ui-kv-value inspector-value-clamp break-words text-right max-w-[70%] inline-block min-w-[80px]",ref:L=>se("source",L),style:A.source?{minHeight:A.source}:void 0,title:Ge,children:Q==="source"?"Copied":Ge})]}),(()=>{const L=Ce.metrics||null;if(!L)return null;const F=Object.entries(L).filter(([,ke])=>ke!=null);if(!F.length)return null;const Y=(i==null?void 0:i.kind)==="metric"?i.key:null,V=[...F].sort(([ke],[xt])=>ke.localeCompare(xt));let ae=V;if(Y){const ke=V.findIndex(([xt])=>xt===Y);ke>0&&(ae=[V[ke],...V.slice(0,ke),...V.slice(ke+1)])}const ve=ae.length>Qa,be=k||!ve?ae:ae.slice(0,Qa),yt=ae.length-Qa;return u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"ui-subsection-title mb-1",children:"Metrics"}),u.jsxs("div",{className:"space-y-1",children:[be.map(([ke,xt])=>{const Ie=Y===ke;return u.jsxs("div",{className:"ui-kv-row",children:[u.jsx("span",{className:`w-24 shrink-0 ${Ie?"text-accent font-medium":"ui-kv-label"}`,children:ke}),u.jsx("span",{className:`ui-kv-value text-right ${Ie?"text-accent font-medium":""}`,children:X1(xt)})]},ke)}),ve&&u.jsx("button",{type:"button",className:"text-[11px] text-muted underline underline-offset-2 hover:text-text",onClick:()=>N(ke=>!ke),"aria-expanded":k,children:k?"Show less":`+${yt} more`})]})]})})()]})]}),!I&&u.jsxs(Mo,{title:"Metadata",open:h.metadata,onToggle:()=>S("metadata"),actions:W,children:[u.jsx("pre",{className:`ui-code-block ${yr} overflow-auto whitespace-pre-wrap`,children:ln?u.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:Qt}}):Ft}),R&&u.jsx("div",{className:"text-[11px] text-danger mt-1 break-words",children:R})]}),u.jsxs(Mo,{title:"Notes & Tags",open:h.notes,onToggle:()=>S("notes"),contentClassName:"px-3 pb-3 space-y-2",children:[!I&&U&&(X.tags||X.notes)&&u.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[u.jsx("div",{className:"font-semibold",children:"Conflicting edits detected."}),u.jsx("div",{className:"text-[11px] text-muted mt-0.5",children:"Your changes were not saved because this item was updated elsewhere."}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsx("button",{className:"btn btn-sm",onClick:ee,children:"Apply my changes again"}),u.jsx("button",{className:"btn btn-sm btn-ghost",onClick:q,children:"Keep theirs"})]})]}),u.jsx("textarea",{className:"ui-textarea inspector-input w-full scrollbar-thin",placeholder:"Add notes",value:g,onChange:L=>p(L.target.value),onBlur:()=>{Re({notes:g})},"aria-label":I?"Notes for selected items":"Notes"}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-label",children:I?"Tags (apply to all, comma-separated)":"Tags (comma-separated)"}),u.jsx("input",{className:"ui-input inspector-input w-full",placeholder:"tag1, tag2",value:T,onChange:L=>y(L.target.value),onBlur:()=>{Re({tags:Ph(T)})},"aria-label":I?"Tags for selected items":"Tags"})]})]}),u.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 right-[calc(var(--right)-3px)] hover:bg-accent/20",onMouseDown:r})]}):u.jsx("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:u.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 right-[calc(var(--right)-3px)] hover:bg-accent/20",onMouseDown:r})})}const nS=e=>["folder",e],rS=15e3;function tv(e){const t=Vl();return vd({queryKey:nS(e),queryFn:()=>he.getFolder(e),staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),5e3),refetchOnWindowFocus:!1,refetchInterval:t?rS:!1,refetchIntervalInBackground:t})}const sS=(e,t)=>["search",e,t],iS=2e4;function oS(e,t){const n=Vl();return vd({enabled:!!e.trim(),queryKey:sS(e,t),queryFn:()=>he.search(e,t),staleTime:3e3,gcTime:6e4,placeholderData:r=>r,retry:1,refetchInterval:n?iS:!1,refetchIntervalInBackground:n})}const lS=/^[\/@a-zA-Z0-9._\-\/]{1,512}$/,aS=[".jpg",".jpeg",".png",".webp"];function nn(e){try{const t=decodeURI(e||""),r=(t.startsWith("/")?t:`/${t}`).replace(/\/{2,}/g,"/"),s=r.length>1?r.replace(/\/$/,""):r;return lS.test(s)?s:"/"}catch{return"/"}}function Fh(){return(window.location.hash||"").replace(/^#/,"")}function Dh(e){const t=nn(e),n=`#${encodeURI(t)}`;window.location.hash!==n&&(window.location.hash=n)}function Ro(e){const t=nn(e),n=`#${encodeURI(t)}`;if(window.location.hash!==n){const r=`${window.location.pathname}${window.location.search}${n}`;window.history.replaceState(window.history.state,"",r)}}function uS(e){const n=nn(e).toLowerCase();return aS.some(r=>n.endsWith(r))}function Ed(e,t){const n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,""),s=[n,r].filter(Boolean).join("/");return s.startsWith("/")?s:`/${s}`}function zh(e){const n=nn(e).split("/").filter(Boolean);return n.length<=1?"/":"/"+n.slice(0,-1).join("/")}function cS(e){return e.endsWith("/_trash_")}const dS=new Set([0,1,2,3,4,5]),Nd=new Set(["<","<=",">",">="]),fS=/^\d{4}-\d{2}-\d{2}$/;function hS(e,t){return!t||!t.and.length?e:e.filter(n=>pS(n,t.and))}function pS(e,t){for(const n of t)if(!mS(e,n))return!1;return!0}function mS(e,t){var n,r,s,i,o,l,a;if("stars"in t){const c=t.stars;if(!c||!c.length)return!0;const m=e.star??0;return c.includes(m)}if("starsIn"in t){const c=t.starsIn.values;if(!c||!c.length)return!0;const m=e.star??0;return c.includes(m)}if("starsNotIn"in t){const c=t.starsNotIn.values;if(!c||!c.length)return!0;const m=e.star??0;return!c.includes(m)}if("nameContains"in t){const c=(n=t.nameContains.value)==null?void 0:n.trim();return c?(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("nameNotContains"in t){const c=(r=t.nameNotContains.value)==null?void 0:r.trim();return c?!(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("commentsContains"in t){const c=(s=t.commentsContains.value)==null?void 0:s.trim();if(!c)return!0;const m=e.comments??"";return m?m.toLowerCase().includes(c.toLowerCase()):!1}if("commentsNotContains"in t){const c=(i=t.commentsNotContains.value)==null?void 0:i.trim();if(!c)return!0;const m=e.comments??"";return m?!m.toLowerCase().includes(c.toLowerCase()):!1}if("urlContains"in t){const c=(o=t.urlContains.value)==null?void 0:o.trim();if(!c)return!0;const m=e.source??e.url??"";return m?m.toLowerCase().includes(c.toLowerCase()):!1}if("urlNotContains"in t){const c=(l=t.urlNotContains.value)==null?void 0:l.trim();if(!c)return!0;const m=e.source??e.url??"";return m?!m.toLowerCase().includes(c.toLowerCase()):!1}if("dateRange"in t){const{from:c,to:m}=t.dateRange;if(!c&&!m)return!0;if(!e.addedAt)return!1;const h=Date.parse(e.addedAt);if(Number.isNaN(h))return!1;const v=Uh(c,!1),S=Uh(m,!0);return!(v!=null&&h<v||S!=null&&h>S)}if("widthCompare"in t){const{op:c,value:m}=t.widthCompare;if(!Number.isFinite(m))return!0;const h=e.w;return!Number.isFinite(h)||h<=0?!1:Bh(h,c,m)}if("heightCompare"in t){const{op:c,value:m}=t.heightCompare;if(!Number.isFinite(m))return!0;const h=e.h;return!Number.isFinite(h)||h<=0?!1:Bh(h,c,m)}if("metricRange"in t){const{key:c,min:m,max:h}=t.metricRange,v=(a=e.metrics)==null?void 0:a[c];return!(v==null||v<m||v>h)}return!0}function pc(e){if(!e||typeof e!="object")return null;const t=e.and;if(!Array.isArray(t))return null;const n=[];for(const r of t){const s=LS(r);s&&n.push(s)}return{and:n}}function Ah(e){var r;const t=e.and.find(s=>"stars"in s),n=e.and.find(s=>"starsIn"in s);return(r=n==null?void 0:n.starsIn)!=null&&r.values?n.starsIn.values:(t==null?void 0:t.stars)??[]}function Ka(e,t){return nv(e,t)}function gS(e){var n;const t=e.and.find(r=>"starsIn"in r);return((n=t==null?void 0:t.starsIn)==null?void 0:n.values)??[]}function nv(e,t){const n=Si(t),r=e.and.filter(s=>!("starsIn"in s)&&!("stars"in s));return n.length?{and:[{starsIn:{values:n}},...r]}:{and:r}}function vS(e){var n;const t=e.and.find(r=>"starsNotIn"in r);return((n=t==null?void 0:t.starsNotIn)==null?void 0:n.values)??[]}function rv(e,t){const n=Si(t),r=e.and.filter(s=>!("starsNotIn"in s));return n.length?{and:[{starsNotIn:{values:n}},...r]}:{and:r}}function yS(e){var n;const t=e.and.find(r=>"nameContains"in r);return((n=t==null?void 0:t.nameContains)==null?void 0:n.value)??null}function sv(e,t){const n=Ut(t),r=e.and.filter(s=>!("nameContains"in s));return n?{and:[{nameContains:{value:n}},...r]}:{and:r}}function xS(e){var n;const t=e.and.find(r=>"nameNotContains"in r);return((n=t==null?void 0:t.nameNotContains)==null?void 0:n.value)??null}function iv(e,t){const n=Ut(t),r=e.and.filter(s=>!("nameNotContains"in s));return n?{and:[{nameNotContains:{value:n}},...r]}:{and:r}}function wS(e){var n;const t=e.and.find(r=>"commentsContains"in r);return((n=t==null?void 0:t.commentsContains)==null?void 0:n.value)??null}function ov(e,t){const n=Ut(t),r=e.and.filter(s=>!("commentsContains"in s));return n?{and:[{commentsContains:{value:n}},...r]}:{and:r}}function SS(e){var n;const t=e.and.find(r=>"commentsNotContains"in r);return((n=t==null?void 0:t.commentsNotContains)==null?void 0:n.value)??null}function lv(e,t){const n=Ut(t),r=e.and.filter(s=>!("commentsNotContains"in s));return n?{and:[{commentsNotContains:{value:n}},...r]}:{and:r}}function kS(e){var n;const t=e.and.find(r=>"urlContains"in r);return((n=t==null?void 0:t.urlContains)==null?void 0:n.value)??null}function av(e,t){const n=Ut(t),r=e.and.filter(s=>!("urlContains"in s));return n?{and:[{urlContains:{value:n}},...r]}:{and:r}}function CS(e){var n;const t=e.and.find(r=>"urlNotContains"in r);return((n=t==null?void 0:t.urlNotContains)==null?void 0:n.value)??null}function uv(e,t){const n=Ut(t),r=e.and.filter(s=>!("urlNotContains"in s));return n?{and:[{urlNotContains:{value:n}},...r]}:{and:r}}function ES(e){const t=e.and.find(n=>"dateRange"in n);return(t==null?void 0:t.dateRange)??null}function mc(e,t){const n=bl((t==null?void 0:t.from)??null),r=bl((t==null?void 0:t.to)??null),s=e.and.filter(i=>!("dateRange"in i));return!n&&!r?{and:s}:{and:[{dateRange:{...n?{from:n}:{},...r?{to:r}:{}}},...s]}}function NS(e){const t=e.and.find(n=>"widthCompare"in n);return(t==null?void 0:t.widthCompare)??null}function Ko(e,t){const n=e.and.filter(r=>!("widthCompare"in r));return!t||!Number.isFinite(t.value)||!Nd.has(t.op)?{and:n}:{and:[{widthCompare:{op:t.op,value:t.value}},...n]}}function bS(e){const t=e.and.find(n=>"heightCompare"in n);return(t==null?void 0:t.heightCompare)??null}function Yo(e,t){const n=e.and.filter(r=>!("heightCompare"in r));return!t||!Number.isFinite(t.value)||!Nd.has(t.op)?{and:n}:{and:[{heightCompare:{op:t.op,value:t.value}},...n]}}function jS(e,t){const n=e.and.find(r=>"metricRange"in r&&r.metricRange.key===t);return(n==null?void 0:n.metricRange)??null}function MS(e,t,n){const r=e.and.filter(s=>!("metricRange"in s&&s.metricRange.key===t));return n?{and:[{metricRange:{key:t,min:n.min,max:n.max}},...r]}:{and:r}}function RS(e){const t=pc(e);return t?t.and.length:0}function LS(e){var t,n,r,s,i,o,l,a;if(!e||typeof e!="object")return null;if("stars"in e){const c=Si(e.stars);return c.length?{starsIn:{values:c}}:null}if("starsIn"in e){const c=Si((t=e.starsIn)==null?void 0:t.values);return c.length?{starsIn:{values:c}}:null}if("starsNotIn"in e){const c=Si((n=e.starsNotIn)==null?void 0:n.values);return c.length?{starsNotIn:{values:c}}:null}if("nameContains"in e){const c=Ut((r=e.nameContains)==null?void 0:r.value);return c?{nameContains:{value:c}}:null}if("nameNotContains"in e){const c=Ut((s=e.nameNotContains)==null?void 0:s.value);return c?{nameNotContains:{value:c}}:null}if("commentsContains"in e){const c=Ut((i=e.commentsContains)==null?void 0:i.value);return c?{commentsContains:{value:c}}:null}if("commentsNotContains"in e){const c=Ut((o=e.commentsNotContains)==null?void 0:o.value);return c?{commentsNotContains:{value:c}}:null}if("urlContains"in e){const c=Ut((l=e.urlContains)==null?void 0:l.value);return c?{urlContains:{value:c}}:null}if("urlNotContains"in e){const c=Ut((a=e.urlNotContains)==null?void 0:a.value);return c?{urlNotContains:{value:c}}:null}if("dateRange"in e){const c=e.dateRange,m=bl((c==null?void 0:c.from)??null),h=bl((c==null?void 0:c.to)??null);return!m&&!h?null:{dateRange:{...m?{from:m}:{},...h?{to:h}:{}}}}if("widthCompare"in e){const c=e.widthCompare,m=$h(c==null?void 0:c.op,c==null?void 0:c.value);return m?{widthCompare:m}:null}if("heightCompare"in e){const c=e.heightCompare,m=$h(c==null?void 0:c.op,c==null?void 0:c.value);return m?{heightCompare:m}:null}if("metricRange"in e){const c=e.metricRange;if(!c||typeof c!="object")return null;const m=typeof c.key=="string"?c.key:"",h=gc(c.min),v=gc(c.max);return!m||h==null||v==null||h>v?null:{metricRange:{key:m,min:h,max:v}}}return null}function Si(e){if(!Array.isArray(e))return[];const t=[],n=new Set;for(const r of e){const s=typeof r=="number"?r:typeof r=="string"?Number(r):NaN;!Number.isInteger(s)||!dS.has(s)||n.has(s)||(n.add(s),t.push(s))}return t}function Ut(e){if(typeof e!="string")return null;const t=e.trim();return t||null}function bl(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=Date.parse(t);return Number.isNaN(n)?null:t}function $h(e,t){if(typeof e!="string"||!Nd.has(e))return null;const n=gc(t);return n==null?null:{op:e,value:n}}function Uh(e,t){if(!e)return null;const n=e.trim();if(!n)return null;const r=Date.parse(n);return Number.isNaN(r)?null:t&&fS.test(n)?r+24*60*60*1e3-1:r}function Bh(e,t,n){switch(t){case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;default:return!0}}function gc(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function Wh(e){return e.addedAt?Date.parse(e.addedAt):0}function jl(e,t){return e.name.localeCompare(t.name)}function TS(e,t){const n=Wh(e),r=Wh(t);return n===r?jl(e,t):n-r}function _S(e){return(t,n)=>{var i,o;const r=(i=t.metrics)==null?void 0:i[e],s=(o=n.metrics)==null?void 0:o[e];return r==null&&s==null?jl(t,n):r==null?1:s==null?-1:r===s?jl(t,n):r-s}}function PS(e,t){return hS(e,t)}function IS(e){let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function OS(e,t){const n=IS(t||1),r=[...e];for(let s=r.length-1;s>0;s-=1){const i=Math.floor(n()*(s+1));[r[s],r[i]]=[r[i],r[s]]}return r}function FS(e,t,n){if(t.kind==="builtin"&&t.key==="random"){const i=n??Date.now();return OS(e,i)}let r=TS;t.kind==="metric"?r=_S(t.key):t.key==="name"&&(r=jl);const s=[...e].sort(r);return t.dir==="desc"?s.reverse():s}const Hh="leftW.folders",Vh="leftW.metrics",DS="leftW",Qh="rightW";function zS(e,t){const[n,r]=d.useState(240),[s,i]=d.useState(320),[o,l]=d.useState(240),a=t==="metrics"?s:n,c=d.useRef(a),m=d.useRef(o);return d.useEffect(()=>{c.current=a},[a]),d.useEffect(()=>{m.current=o},[o]),d.useEffect(()=>{try{const S=window.localStorage,k=Number(S.getItem(Hh)??S.getItem(DS));Number.isFinite(k)&&k>0&&r(k);const N=Number(S.getItem(Vh));Number.isFinite(N)&&N>0&&i(N);const T=Number(S.getItem(Qh));Number.isFinite(T)&&T>0&&l(T)}catch{}},[]),{leftW:a,rightW:o,onResizeLeft:S=>{S.preventDefault();const k=e.current;if(!k)return;const N=k.getBoundingClientRect(),T=t==="metrics"?Vh:Hh;let y=c.current;const g=f=>{const C=f.clientX-N.left,R=200,j=Math.max(R,N.width-m.current-200),b=Math.min(Math.max(C,R),j);y=b,t==="metrics"?i(b):r(b)},p=()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",p);try{window.localStorage.setItem(T,String(y))}catch{}};window.addEventListener("mousemove",g),window.addEventListener("mouseup",p)},onResizeRight:S=>{S.preventDefault();const k=e.current;if(!k)return;const N=k.getBoundingClientRect(),T=g=>{const p=g.clientX-N.left,f=N.width-p,C=240,R=Math.max(C,N.width-c.current-200),j=Math.min(Math.max(f,C),R);l(j)},y=()=>{window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",y);try{window.localStorage.setItem(Qh,String(m.current))}catch{}};window.addEventListener("mousemove",T),window.addEventListener("mouseup",y)}}}function AS({x:e,y:t,items:n}){return u.jsx("div",{className:"dropdown-panel fixed",role:"menu",style:{left:e,top:t,minWidth:180},onClick:r=>r.stopPropagation(),children:n.map((r,s)=>u.jsxs("button",{className:`dropdown-item w-full ${r.danger?"text-danger hover:text-danger":""}`,role:"menuitem","aria-disabled":r.disabled,disabled:r.disabled,onClick:i=>{i.stopPropagation(),r.disabled||r.onClick()},children:[r.icon&&u.jsx("span",{className:"shrink-0",children:r.icon}),u.jsx("span",{children:r.label})]},s))})}function Kh(e){return JSON.stringify(e,null,2)}function Yh(e){const t=s=>'"'+s.replaceAll('"','""')+'"',n="path,folder,name,star,type,size,width,height,tags,notes",r=e.map(s=>{const i=(s.tags||[]).join(" "),o=s.notes||"";return[s.path,s.folder,s.name,String(s.star??""),s.type??"",s.size??"",s.width??"",s.height??"",i,o].map(l=>t(String(l))).join(",")});return[n,...r].join(`
`)}function Ya(e){return e.map(t=>{const n=t.path.split("/").filter(Boolean);n.pop();const r=n.length?`/${n.join("/")}`:"/";return{path:t.path,folder:r,name:t.name,star:t.star??null,type:t.type,size:t.size,width:t.w,height:t.h}})}function $S(e,t=250){const[n,r]=qo.useState(e);return qo.useEffect(()=>{const s=window.setTimeout(()=>r(e),Math.max(0,t));return()=>window.clearTimeout(s)},[e,t]),n}const cv="application/x-lenslet-paths",US='[role="treeitem"].drop-target';function Gh(e){var n;return Array.from(((n=e.dataTransfer)==null?void 0:n.types)||[]).includes(cv)}function BS(e){document.querySelectorAll(US).forEach(t=>{t!==e&&t.classList.remove("drop-target")})}function qh(e){BS(e),e.classList.add("drop-target")}function Xh(e){return e.startsWith("/")?e:`/${e}`}function WS({path:e,isLeaf:t}){const n=Jr(),r=d.useCallback(l=>{Gh(l)&&(l.preventDefault(),t&&qh(l.currentTarget))},[t]),s=d.useCallback(l=>{!t||!Gh(l)||(l.preventDefault(),qh(l.currentTarget))},[t]),i=d.useCallback(l=>{const a=l.currentTarget,c=document.elementFromPoint(l.clientX,l.clientY);c&&a.contains(c)||a.classList.remove("drop-target")},[]),o=d.useCallback(async l=>{const a=l.dataTransfer;if(!a)return;l.preventDefault(),l.currentTarget.classList.remove("drop-target");const c=a.getData(cv),h=(c?JSON.parse(c):[]).filter(Boolean);if(!h.length)return;let v=h[0].split("/").slice(0,-1).join("/")||"/";v=Xh(v);const S=Xh(e);try{for(const k of h)await he.moveFile(k,S);n.invalidateQueries({queryKey:["folder",v]}),n.invalidateQueries({queryKey:["folder",S]}),n.setQueryData(["folder",v],k=>!k||!Array.isArray(k.items)?k:{...k,items:k.items.filter(N=>!h.includes(N.path))})}catch{}},[e,n]);return{onDragOver:r,onDragEnter:s,onDragLeave:i,onDrop:o}}const HS='[role="tree"] [role="treeitem"]';function VS(){return Array.from(document.querySelectorAll(HS))}function QS(e,t){var i;const n=VS(),r=n.findIndex(o=>o===e);if(r===-1)return;let s=r;t==="ArrowDown"?s=Math.min(n.length-1,r+1):t==="ArrowUp"?s=Math.max(0,r-1):t==="Home"?s=0:t==="End"&&(s=n.length-1),(i=n[s])==null||i.focus()}function KS({path:e,isLeaf:t,isExpanded:n,setExpanded:r,onOpen:s}){return d.useCallback(i=>{if(i.key==="Enter"){i.preventDefault(),s(e);return}if(i.key==="ArrowRight"){!t&&!n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.add(e),l}));return}if(i.key==="ArrowLeft"){!t&&n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.delete(e),l}));return}(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="Home"||i.key==="End")&&(i.preventDefault(),QS(i.currentTarget,i.key))},[e,t,n,r,s])}function YS({current:e,roots:t,data:n,onOpen:r,onResize:s,onContextMenu:i,className:o,showResizeHandle:l=!0}){const[a,c]=d.useState(new Set(["/"])),m=d.useRef(new Map),h=d.useRef(new Map),v=d.useCallback(async(k,N)=>{const T=nn(k||"/"),y=m.current,g=h.current,p=y.get(T);if(p!==void 0)return p;const f=g.get(T);if(f)return f;const C=(async()=>{let R=0;const j=new Set,b=[{path:T,index:N}];for(;b.length;){const _=b.pop(),{path:E,index:O}=_;if(j.has(E))continue;j.add(E);let Q=O;if(!Q)try{Q=await he.getFolder(E)}catch(z){console.warn(`Failed to count folder ${E}:`,z);continue}R+=Q.items.length;for(const z of Q.dirs)z.kind==="branch"&&b.push({path:Ed(E,z.name)})}return y.set(T,R),g.delete(T),R})();return g.set(T,C),C},[]);d.useEffect(()=>{const k=e.split("/").filter(Boolean),N=["/"];let T="";for(const y of k)T=T?`${T}/${y}`:`/${y}`,N.push(T);c(y=>{const g=new Set(y);for(const p of N)g.add(p);return g})},[e]);const S=o??"h-full overflow-auto bg-panel scrollbar-thin";return u.jsxs("div",{className:S,children:[u.jsx("div",{className:"p-1",role:"tree","aria-label":"Folders",children:t.map(k=>u.jsx(dv,{path:k.path,label:k.label,depth:0,current:e,expanded:a,setExpanded:c,onOpen:r,onContextMenu:i,initial:n,getSubtreeCount:v},k.path))}),l&&u.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 left-[calc(var(--left)-3px)] hover:bg-accent/20",onMouseDown:s})]})}function dv({path:e,label:t,depth:n,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,initial:a,getSubtreeCount:c}){var j,b;const m=s.has(e),{data:h}=tv(e),v=a&&e===a.path?a:h,S=r===e,k=(((j=v==null?void 0:v.dirs)==null?void 0:j.length)??0)===0,[N,T]=d.useState(v?v.items.length:null),y=KS({path:e,isLeaf:k,isExpanded:m,setExpanded:i,onOpen:o}),{onDragOver:g,onDragEnter:p,onDragLeave:f,onDrop:C}=WS({path:e,isLeaf:k}),R=_=>{_.stopPropagation(),i(E=>{const O=new Set(E);return O.has(e)?O.delete(e):O.add(e),O})};return d.useEffect(()=>{let _=!1;if(!v){T(null);return}return T(v.items.length),c(e,v).then(E=>{_||T(E)}).catch(E=>{_||console.warn(`Failed to compute subtree count for ${e}:`,E)}),()=>{_=!0}},[v,e,c]),u.jsxs("div",{children:[u.jsxs("div",{className:`flex items-center gap-1.5 py-0.5 px-2 rounded-md cursor-pointer min-h-[28px] outline-none transition-colors duration-75 ${S?"bg-accent/20 text-accent font-medium":"hover:bg-white/5 text-text"}`,role:"treeitem","aria-level":n+1,"aria-expanded":k?void 0:m,"aria-selected":S,tabIndex:S?0:-1,style:{paddingLeft:8+n*14},onClick:()=>o(e),onContextMenu:_=>{_.preventDefault(),_.stopPropagation(),l&&l(_,e)},onKeyDown:y,onDragOver:g,onDragEnter:p,onDragLeave:f,onDrop:C,children:[u.jsx("span",{className:"w-4 text-center opacity-60 hover:opacity-100 text-[10px]",onClick:R,children:m?"":""}),u.jsx("span",{className:"flex-1 overflow-hidden truncate text-sm",title:t,children:Q1(t,28)}),N!==null&&u.jsx("span",{className:"text-[10px] opacity-50 bg-white/5 border border-white/5 rounded px-1.5 min-w-[24px] text-center",children:N})]}),m&&((b=v==null?void 0:v.dirs)==null?void 0:b.map(_=>u.jsx(dv,{path:Ed(e,_.name),label:_.name,depth:n+1,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,getSubtreeCount:c},_.name)))]})}const Tr=40,GS=12,Jh=[5,4,3,2,1],Zh=["<","<=",">",">="];function qS({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l,onChangeFilters:a}){const c=r&&r.length?u.jsx(XS,{selectedItems:r,metricKeys:n}):null,m=u.jsx(JS,{filters:o,onChangeFilters:a});return n.length?u.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,u.jsx(ZS,{items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}),m]}):u.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,m,u.jsx("div",{className:"p-4 text-sm text-muted",children:"No metrics found in this dataset."})]})}function XS({selectedItems:e,metricKeys:t}){const n=d.useMemo(()=>{if(!e.length)return null;const a=new Map;for(const h of e){const v=h.metrics;if(v)for(const[S,k]of Object.entries(v)){if(k==null||Number.isNaN(k))continue;const N=a.get(S);N?N.push(k):a.set(S,[k])}}return a.size?{entries:(t.length?t.filter(h=>a.has(h)):Array.from(a.keys()).sort()).map(h=>{const v=a.get(h)??[],S=Math.min(...v),k=Math.max(...v),N=v.reduce((T,y)=>T+y,0)/Math.max(1,v.length);return{key:h,value:v[0],min:S,max:k,avg:N,count:v.length}}),totalItems:e.length}:null},[e,t]);if(!n)return null;const{entries:r,totalItems:s}=n,i=r.slice(0,GS),o=r.length-i.length,l=s>1;return u.jsxs("div",{className:"ui-card",children:[u.jsxs("div",{className:"ui-card-header",children:[u.jsx("div",{className:"ui-section-title",children:"Selected metrics"}),u.jsxs("div",{className:"text-[11px] text-muted",children:[s," item",s===1?"":"s"]})]}),u.jsxs("div",{className:"space-y-1 text-[12px]",children:[i.map(a=>u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsx("span",{className:"text-muted w-28 shrink-0 truncate",title:a.key,children:a.key}),u.jsxs("span",{className:"font-mono text-text text-right tabular-nums",children:[l?`${Rt(a.min)}  ${Rt(a.max)}`:Rt(a.value),l&&u.jsxs("span",{className:"text-[11px] text-muted ml-2",children:["avg ",Rt(a.avg),a.count!==s?`  ${a.count}/${s}`:""]})]})]},a.key)),o>0&&u.jsxs("div",{className:"text-[11px] text-muted",children:["+",o," more"]})]})]})}function JS({filters:e,onChangeFilters:t}){const n=d.useMemo(()=>gS(e),[e]),r=d.useMemo(()=>vS(e),[e]),s=d.useMemo(()=>yS(e)??"",[e]),i=d.useMemo(()=>xS(e)??"",[e]),o=d.useMemo(()=>wS(e)??"",[e]),l=d.useMemo(()=>SS(e)??"",[e]),a=d.useMemo(()=>kS(e)??"",[e]),c=d.useMemo(()=>CS(e)??"",[e]),m=d.useMemo(()=>ES(e)??{},[e]),h=d.useMemo(()=>op(m.from),[m.from]),v=d.useMemo(()=>op(m.to),[m.to]),S=d.useMemo(()=>NS(e),[e]),k=d.useMemo(()=>bS(e),[e]),[N,T]=d.useState((S==null?void 0:S.op)??">="),[y,g]=d.useState((k==null?void 0:k.op)??">=");d.useEffect(()=>{S!=null&&S.op&&T(S.op)},[S==null?void 0:S.op]),d.useEffect(()=>{k!=null&&k.op&&g(k.op)},[k==null?void 0:k.op]);const p=(f,C)=>{const R=new Set(n),j=new Set(r);f==="include"?R.has(C)?R.delete(C):(R.add(C),j.delete(C)):j.has(C)?j.delete(C):(j.add(C),R.delete(C));let b=nv(e,Array.from(R));b=rv(b,Array.from(j)),t(b)};return u.jsxs("div",{className:"ui-card",children:[u.jsx("div",{className:"ui-section-title mb-3",children:"Attributes"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-2",children:"Rating"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"ui-label",children:"Include"}),u.jsxs("div",{className:"flex flex-wrap gap-1",children:[Jh.map(f=>{const C=n.includes(f);return u.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${C?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",f),"aria-pressed":C,title:`Include ${f} star${f>1?"s":""}`,children:[f,""]},`stars-in-${f}`)}),u.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${n.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",0),"aria-pressed":n.includes(0),title:"Include unrated",children:"None"})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-label",children:"Exclude"}),u.jsxs("div",{className:"flex flex-wrap gap-1",children:[Jh.map(f=>{const C=r.includes(f);return u.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${C?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",f),"aria-pressed":C,title:`Exclude ${f} star${f>1?"s":""}`,children:[f,""]},`stars-out-${f}`)}),u.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${r.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",0),"aria-pressed":r.includes(0),title:"Exclude unrated",children:"None"})]})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-2",children:"Filename"}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Contains"}),u.jsx("input",{className:"ui-input w-full",value:s,placeholder:"e.g. draft",onChange:f=>t(sv(e,f.target.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Does not contain"}),u.jsx("input",{className:"ui-input w-full",value:i,placeholder:"e.g. v1",onChange:f=>t(iv(e,f.target.value))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-2",children:"Comments"}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Contains"}),u.jsx("input",{className:"ui-input w-full",value:o,placeholder:"e.g. hero",onChange:f=>t(ov(e,f.target.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Does not contain"}),u.jsx("input",{className:"ui-input w-full",value:l,placeholder:"e.g. todo",onChange:f=>t(lv(e,f.target.value))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-2",children:"URL"}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Contains"}),u.jsx("input",{className:"ui-input w-full",value:a,placeholder:"e.g. s3://bucket",onChange:f=>t(av(e,f.target.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Does not contain"}),u.jsx("input",{className:"ui-input w-full",value:c,placeholder:"e.g. http://",onChange:f=>t(uv(e,f.target.value))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-2",children:"Date Added"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"From"}),u.jsx("input",{type:"date",className:"ui-input w-full",value:h,onChange:f=>t(mc(e,{from:f.target.value||null,to:m.to??null}))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"To"}),u.jsx("input",{type:"date",className:"ui-input w-full",value:v,onChange:f=>t(mc(e,{from:m.from??null,to:f.target.value||null}))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"ui-subsection-title mb-2",children:"Dimensions"}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Width"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("select",{className:"ui-select ui-select-compact w-16",value:N,onChange:f=>{const C=f.target.value;T(C),S&&t(Ko(e,{op:C,value:S.value}))},children:Zh.map(f=>u.jsx("option",{value:f,children:f},`w-${f}`))}),u.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:S?String(S.value):"",min:0,placeholder:"px",onChange:f=>{const C=f.target.value;if(!C){t(Ko(e,null));return}const R=Number(C);Number.isFinite(R)&&t(Ko(e,{op:N,value:R}))}})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Height"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("select",{className:"ui-select ui-select-compact w-16",value:y,onChange:f=>{const C=f.target.value;g(C),k&&t(Yo(e,{op:C,value:k.value}))},children:Zh.map(f=>u.jsx("option",{value:f,children:f},`h-${f}`))}),u.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:k?String(k.value):"",min:0,placeholder:"px",onChange:f=>{const C=f.target.value;if(!C){t(Yo(e,null));return}const R=Number(C);Number.isFinite(R)&&t(Yo(e,{op:y,value:R}))}})]})]})]})]})]})]})}function ZS({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}){const[a,c]=d.useState(!1),m=s&&n.includes(s)?s:n[0];return u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsx("label",{className:"ui-label",children:"Metric"}),u.jsx("button",{className:"btn btn-sm btn-ghost text-[11px]",onClick:()=>c(h=>!h),"aria-pressed":a,children:a?"Show one":"Show all"})]}),a?u.jsx("div",{className:"ui-input ui-input-readonly w-full flex items-center text-xs",children:"All metrics"}):u.jsx("select",{className:"ui-select w-full",value:m,onChange:h=>i(h.target.value),children:n.map(h=>u.jsx("option",{value:h,children:h},h))})]}),a?u.jsx("div",{className:"space-y-3",children:n.map(h=>u.jsx(ep,{metricKey:h,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l,showTitle:!0},h))}):m?u.jsx(ep,{metricKey:m,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l}):u.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]})}function ep({items:e,filteredItems:t,metricKey:n,selectedItems:r,filters:s,onChangeRange:i,showTitle:o=!1}){const l=d.useMemo(()=>tp(e,n),[e,n]),a=d.useMemo(()=>Ga(l,Tr),[l]),c=d.useMemo(()=>tp(t,n),[t,n]),m=d.useMemo(()=>a?Ga(c,Tr,a):null,[c,a]),h=jS(s,n),[v,S]=d.useState(null),[k,N]=d.useState(!1),T=d.useRef(null),y=d.useRef(null),g=d.useRef(!1),p=d.useRef(null),[f,C]=d.useState(null),[R,j]=d.useState(""),[b,_]=d.useState(""),[E,O]=d.useState(null),Q=v??h,z=a?{min:a.min,max:a.max}:null,A=d.useMemo(()=>{var q;if(!(r!=null&&r.length))return[];const ee=[];for(const J of r){const fe=(q=J.metrics)==null?void 0:q[n];fe==null||Number.isNaN(fe)||ee.push(fe)}return ee},[r,n]),le=A.length===1?A[0]:null,pe=d.useMemo(()=>!a||A.length<2?null:Ga(A,Tr,a),[A,a]);d.useEffect(()=>{if(!h||!z){E!=="min"&&j(h?$n(h.min):""),E!=="max"&&_(h?$n(h.max):"");return}if(E!=="min"){const ee=ns(h.min,z.min)?"":$n(h.min);j(ee)}if(E!=="max"){const ee=ns(h.max,z.max)?"":$n(h.max);_(ee)}},[h,z,E]),d.useEffect(()=>{C(null)},[n,z==null?void 0:z.min,z==null?void 0:z.max]);const de=ee=>{var fe;if(!z)return null;const q=(fe=p.current)==null?void 0:fe.getBoundingClientRect();if(!q)return null;const J=bd((ee.clientX-q.left)/q.width);return z.min+(z.max-z.min)*J},I=(ee,q)=>{if(!z)return;const J=T.current??ee,fe=rp(J,ee);S(fe),q&&i(n,fe)},U=ee=>{var J;if(!z)return;ee.preventDefault();const q=de(ee);q!=null&&(N(!0),S(null),T.current=q,y.current=ee.clientX,g.current=!1,C(q),(J=p.current)==null||J.setPointerCapture(ee.pointerId))},X=ee=>{const q=de(ee);if(q==null){k||C(null);return}if(C(q),k){const J=y.current;if(!g.current&&J!=null){if(Math.abs(ee.clientX-J)<4)return;g.current=!0}g.current&&I(q,!1)}},ue=ee=>{var J;if(!k)return;N(!1),(J=p.current)==null||J.releasePointerCapture(ee.pointerId);const q=de(ee);g.current&&q!=null?(C(q),I(q,!0)):h&&i(n,null),T.current=null,y.current=null,g.current=!1,setTimeout(()=>S(null),0)},me=(ee,q)=>{if(!z)return;const J=sp(ee),fe=sp(q);if(!J.valid||!fe.valid){J.valid||j(h?$n(h.min):""),fe.valid||_(h?$n(h.max):"");return}if(J.value==null&&fe.value==null){i(n,null);return}const Ze=J.value??z.min,Ce=fe.value??z.max,Ge=ip(Ze,z.min,z.max),vt=ip(Ce,z.min,z.max),De=rp(Ge,vt);if(ns(De.min,z.min)&&ns(De.max,z.max)){i(n,null);return}i(n,De)};if(!a||!z)return u.jsxs("div",{className:"ui-card",children:[o&&u.jsx("div",{className:"ui-section-title mb-2",children:n}),u.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]});const Re=A.length;return u.jsxs("div",{className:"ui-card",children:[o&&u.jsx("div",{className:"ui-section-title mb-2",children:n}),u.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mb-2 tabular-nums",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{children:["Population: ",a.count]}),u.jsxs("span",{children:["Filtered: ",(m==null?void 0:m.count)??0]}),Re>1&&u.jsxs("span",{className:"text-text",children:["Selected: ",Re]})]}),le!=null&&u.jsxs("span",{className:"text-text",children:["Selected: ",Rt(le)]})]}),u.jsxs("svg",{ref:p,viewBox:`0 0 ${Tr} 100`,preserveAspectRatio:"none",className:"w-full h-28 cursor-crosshair rounded-md bg-surface-inset",onPointerDown:U,onPointerMove:X,onPointerUp:ue,onPointerLeave:()=>C(null),children:[qa(a.bins,"#2e3a4b"),m&&qa(m.bins,"#3a8fff"),pe&&qa(pe.bins,"#f59e0b",{opacity:.55}),Q&&ek(Q,z),le!=null&&np(le,z,{color:"var(--highlight)",strokeWidth:.7}),f!=null&&np(f,z,{color:"rgba(255,255,255,0.75)",strokeWidth:.5,dashed:!0})]}),u.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mt-2 tabular-nums",children:[u.jsx("span",{children:Rt(z==null?void 0:z.min)}),u.jsxs("div",{className:"flex flex-col items-center text-center leading-tight",children:[Q?u.jsx("span",{className:"text-text",children:ns(Q.min,z.min)?` ${Rt(Q.max)}`:ns(Q.max,z.max)?` ${Rt(Q.min)}`:`${Rt(Q.min)}  ${Rt(Q.max)}`}):f!=null?u.jsxs("span",{className:"text-text",children:["Cursor: ",Rt(f)]}):u.jsx("span",{children:"Drag to filter"}),Q&&f!=null&&u.jsxs("span",{className:"text-[11px] text-muted",children:["Cursor: ",Rt(f)]})]}),u.jsx("span",{children:Rt(z==null?void 0:z.max)})]}),u.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-2 mt-3 items-end",children:[u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Min"}),u.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:R,placeholder:$n(z.min),onFocus:()=>O("min"),onBlur:()=>{O(null),me(R,b)},onChange:ee=>j(ee.target.value),onKeyDown:ee=>{ee.key==="Enter"&&ee.currentTarget.blur()}})]}),u.jsxs("div",{children:[u.jsx("label",{className:"ui-label",children:"Max"}),u.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:b,placeholder:$n(z.max),onFocus:()=>O("max"),onBlur:()=>{O(null),me(R,b)},onChange:ee=>_(ee.target.value),onKeyDown:ee=>{ee.key==="Enter"&&ee.currentTarget.blur()}})]}),u.jsx("button",{className:"btn btn-xs btn-ghost text-muted hover:text-text",onClick:()=>i(n,null),children:"Clear"})]})]})}function Ga(e,t,n){if(!e.length)return null;const r=n?n.min:Math.min(...e);let s=n?n.max:Math.max(...e);r===s&&(s=r+1);const i=new Array(t).fill(0),o=t/(s-r);for(const l of e){const a=Math.max(0,Math.min(t-1,Math.floor((l-r)*o)));i[a]+=1}return{bins:i,min:r,max:s,count:e.length}}function tp(e,t){var r;const n=[];for(const s of e){const i=(r=s.metrics)==null?void 0:r[t];i==null||Number.isNaN(i)||n.push(i)}return n}function qa(e,t,n){const r=Math.max(1,...e),s=(n==null?void 0:n.opacity)??.9;return e.map((i,o)=>{const l=i/r*100;return u.jsx("rect",{x:o+.05,y:100-l,width:.9,height:l,fill:t,opacity:s},`${t}-${o}`)})}function ek(e,t){const n=(e.min-t.min)/(t.max-t.min),r=(e.max-t.min)/(t.max-t.min),s=Tr*bd(Math.min(n,r)),i=Tr*Math.abs(r-n);return u.jsx("rect",{x:s,y:0,width:Math.max(.5,i),height:100,fill:"rgba(255,255,255,0.08)",stroke:"rgba(255,255,255,0.4)",strokeWidth:.4})}function np(e,t,n){const r=bd((e-t.min)/(t.max-t.min)),s=Tr*r;return u.jsx("line",{x1:s,y1:0,x2:s,y2:100,stroke:n.color,strokeWidth:n.strokeWidth??.5,strokeDasharray:n.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function rp(e,t){return e<t?{min:e,max:t}:{min:t,max:e}}function bd(e){return e<0?0:e>1?1:e}function Rt(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function $n(e){if(!Number.isFinite(e))return"";const t=e.toString();return t.includes("e")?e.toFixed(6):t}function sp(e){const t=e.trim();if(!t)return{value:null,valid:!0};const n=Number(t);return Number.isFinite(n)?{value:n,valid:!0}:{value:null,valid:!1}}function ip(e,t,n){return e<t?t:e>n?n:e}function ns(e,t){const n=Math.max(1,Math.abs(e),Math.abs(t));return Math.abs(e-t)<=1e-6*n}function op(e){return e?e.length>=10?e.slice(0,10):e:""}const tk=[{label:"Root",path:"/"}];function nk({leftTool:e,onToolChange:t,compareEnabled:n,compareActive:r,onOpenCompare:s,views:i,activeViewId:o,onActivateView:l,onSaveView:a,current:c,data:m,onOpenFolder:h,onContextMenu:v,items:S,filteredItems:k,metricKeys:N,selectedItems:T,selectedMetric:y,onSelectMetric:g,filters:p,onChangeRange:f,onChangeFilters:C,onResize:R}){const j=e==="folders"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",b=e==="metrics"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",_=r?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover";return u.jsxs("div",{className:"app-left-panel col-start-1 row-start-2 relative border-r border-border bg-panel overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-y-0 left-0 w-10 border-r border-border flex flex-col items-center gap-2 py-3 bg-surface-overlay",children:[u.jsx("button",{className:j,title:"Folders","aria-label":"Folders","aria-pressed":e==="folders",onClick:()=>t("folders"),children:u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:u.jsx("path",{d:"M3 7.5h6l2-2h10a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2z"})})}),u.jsx("button",{className:b,title:"Metrics / Filters","aria-label":"Metrics and Filters","aria-pressed":e==="metrics",onClick:()=>t("metrics"),children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[u.jsx("path",{d:"M4 19V9"}),u.jsx("path",{d:"M10 19V5"}),u.jsx("path",{d:"M16 19v-7"}),u.jsx("path",{d:"M3 19h18"})]})}),u.jsx("div",{className:"w-6 h-px bg-border/70 my-1"}),u.jsx("button",{className:`${_} ${n?"":"opacity-40 cursor-not-allowed"}`,title:n?"Compare selected images":"Compare (select 2+)","aria-label":"Compare selected images","aria-pressed":r,"aria-disabled":!n,disabled:!n,onClick:()=>{n&&s()},children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[u.jsx("rect",{x:"3",y:"4",width:"8",height:"16",rx:"1"}),u.jsx("rect",{x:"13",y:"4",width:"8",height:"16",rx:"1"})]})})]}),u.jsx("div",{className:"ml-10 h-full",children:e==="folders"?u.jsxs("div",{className:"h-full flex flex-col",children:[u.jsxs("div",{className:"px-2 py-2 border-b border-border",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Smart Folders"}),u.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:a,title:"Save current view as Smart Folder",children:"+ New"})]}),i.length?u.jsx("div",{className:"flex flex-col gap-1",children:i.map(E=>{const O=E.id===o;return u.jsx("button",{className:`text-left px-2 py-1.5 rounded-md text-sm ${O?"bg-accent-muted text-accent":"hover:bg-hover text-text"}`,onClick:()=>l(E),children:E.name},E.id)})}):u.jsx("div",{className:"text-xs text-muted px-1 py-1.5",children:"No saved Smart Folders yet."})]}),u.jsx(YS,{current:c,roots:tk,data:m,onOpen:h,onContextMenu:v,className:"flex-1 min-h-0 overflow-auto scrollbar-thin",showResizeHandle:!1})]}):u.jsx(qS,{items:S,filteredItems:k,metricKeys:N,selectedItems:T,selectedMetric:y,onSelectMetric:g,filters:p,onChangeRange:f,onChangeFilters:C})}),u.jsx("div",{className:"toolbar-offset absolute bottom-0 right-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20",onMouseDown:R})]})}function rk({persistenceEnabled:e,recentSummary:t,onDismissRecent:n,onCloseRecent:r,browserZoomPercent:s}){const i=t?` (${t.names.join(", ")}${t.extra?` +${t.extra}`:""})`:"",o=!!(t!=null&&t.names.length),l=typeof s=="number"?s:null,a=l!==null&&Math.abs(l-100)>=2;return!e||a||!!t?u.jsx("div",{className:"border-b border-border bg-panel",children:u.jsxs("div",{className:"px-3 py-2 flex flex-col gap-2",children:[!e&&u.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[u.jsx("span",{className:"font-semibold",children:"Not persisted."})," Workspace is read-only; edits stay in memory until restart."]}),a&&u.jsxs("div",{className:"ui-banner ui-banner-accent text-xs",children:[u.jsxs("span",{className:"font-semibold",children:["Browser zoom ",Math.round(l),"%."]})," For best results, set it to 100% so UI elements stay in correct proportions."]}),t&&u.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex items-center justify-between gap-3",children:[u.jsxs("span",{children:["Recent updates: ",t.count," item",t.count===1?"":"s",o?i:""]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{className:"text-muted hover:text-text transition-colors",onClick:n,"aria-label":"Hide recent activity until refresh",children:"Hide until refresh"}),u.jsx("button",{className:"text-muted hover:text-text transition-colors text-base leading-none",onClick:r,"aria-label":"Close recent activity",children:""})]})]})]})}):u.jsx(u.Fragment,{})}const lp=6e3,sk=15*6e4,ik=1e4,ok=24*60*6e4,Ae={sortKey:"sortKey",sortDir:"sortDir",sortSpec:"sortSpec",starFilters:"starFilters",filterAst:"filterAst",selectedMetric:"selectedMetric",viewMode:"viewMode",gridItemSize:"gridItemSize",leftOpen:"leftOpen",rightOpen:"rightOpen"};function lk(e){switch(e){case"live":return"Live";case"reconnecting":return"Reconnecting";case"offline":return"Offline";case"connecting":case"idle":default:return"Connecting"}}function ak(e){return e.isOffline?"offline":e.isUnstable?"unstable":e.recentEditActive?"recent":e.editingActive?"editing":"live"}function fv(e,t){return t-e<ok?G1(e,t):q1(e)}function uk(e,t){if(!e.length)return null;const n=new Set,r=[];for(const i of e)n.has(i.path)||(n.add(i.path),r.push(i.path));const s=r.slice(0,2).map(i=>{const o=t.find(l=>l.path===i);return(o==null?void 0:o.name)??i.split("/").pop()??i});return{count:r.length,names:s,extra:Math.max(0,r.length-s.length)}}function ck(e,t,n){return e.length?e.map(r=>{const s=t.find(l=>l.path===r.path),i=(s==null?void 0:s.name)??r.path.split("/").pop()??r.path,o=fv(r.ts,n);return{path:r.path,label:i,timeLabel:o}}):[]}function dk(){var Hd;const[e,t]=d.useState("/"),[n,r]=d.useState(""),[s,i]=d.useState([]),[o,l]=d.useState(null),[a,c]=d.useState(!1),[m,h]=d.useState(0),[v,S]=d.useState(0),[k,N]=d.useState(null),[T,y]=d.useState(100),[g,p]=d.useState(null),[f,C]=d.useState(()=>({filters:{and:[]},sort:{kind:"builtin",key:"added",dir:"desc"},selectedMetric:void 0})),[R,j]=d.useState(()=>Date.now()),[b,_]=d.useState("adaptive"),[E,O]=d.useState(220),[Q,z]=d.useState(!0),[A,le]=d.useState(!0),[pe,de]=d.useState("folders"),[I,U]=d.useState([]),[X,ue]=d.useState(null),[me,Re]=d.useState(null),[ee,q]=d.useState(null),[J,fe]=d.useState({}),Ze=d.useRef(null),Ce=d.useRef(null),Ge=d.useRef(null),vt=d.useRef(null),De=d.useRef(!1),Qt=d.useRef(!1),Ft=d.useRef(null),ln=d.useRef(new Map),yr=d.useRef(new Map),{leftW:W,rightW:ne,onResizeLeft:se,onResizeRight:L}=zS(Ze,pe),[F,Y]=d.useState(!1),[V,ae]=d.useState(null),ve=Jr(),Ee=D1(),be=Vl(),yt=A1(),[ke,xt]=d.useState("idle"),[Ie,xr]=d.useState({}),[Kt,Yl]=d.useState([]),[Zi,Gl]=d.useState([]),[jd,hv]=d.useState(null),[pv,mv]=d.useState(!1),[gv,Md]=d.useState(new Set),ql=d.useRef(new Map),[Dn,vv]=d.useState(null),[Rd,yv]=d.useState(null),[xv,Xl]=d.useState(!1),[Ys,Jl]=d.useState(()=>Date.now()),[wv,Sv]=d.useState(!0);d.useEffect(()=>{const x=P=>{const H=nn(P),D=uS(H)?H:null,B=D?zh(H):H;D?(l(D),i([D])):(l(null),De.current=!1),t(ie=>ie===B?ie:(S(te=>te+1),B))};x(Fh());const M=()=>x(Fh());return window.addEventListener("hashchange",M),()=>window.removeEventListener("hashchange",M)},[]),d.useEffect(()=>()=>{for(const x of ql.current.values())window.clearTimeout(x);ql.current.clear()},[]),d.useEffect(()=>{if(Rd==null){Xl(!1);return}Xl(!0);const x=window.setTimeout(()=>Xl(!1),lp);return()=>window.clearTimeout(x)},[Rd]),d.useEffect(()=>{if(Dn==null)return;Jl(Date.now());const x=window.setInterval(()=>Jl(Date.now()),1e4);return()=>window.clearInterval(x)},[Dn]);const{data:ze,refetch:Zl,isLoading:wk,isError:Sk}=tv(e),wr=n.trim().length>0,Ld=$S(n,250),Td=d.useMemo(()=>Ld.trim().replace(/\s+/g," "),[Ld]),_d=oS(wr?Td:"",e),ea=d.useMemo(()=>Ah(f.filters),[f.filters]),an=d.useMemo(()=>{var M;return(wr?((M=_d.data)==null?void 0:M.items)??[]:(ze==null?void 0:ze.items)??[]).map(P=>({...P,star:J[P.path]!==void 0?J[P.path]:P.star}))},[wr,_d.data,ze,J]),Be=d.useMemo(()=>{const x=PS(an,f.filters);return FS(x,f.sort,R)},[an,f.filters,f.sort,R]),kv=an.length,Cv=Be.length,jt=d.useMemo(()=>Be.map(x=>x.path),[Be]),Pd=d.useMemo(()=>new Set(s),[s]),Ev=d.useMemo(()=>{if(!s.length)return[];const x=new Map(an.map(P=>[P.path,P])),M=new Map(Be.map(P=>[P.path,P]));return s.map(P=>x.get(P)??M.get(P)).filter(P=>!!P)},[s,an,Be]),Mt=d.useMemo(()=>Be.filter(x=>Pd.has(x.path)),[Be,Pd]),eo=Math.max(0,Mt.length-2),Sr=Math.min(m,eo),Nv=Mt[Sr]??null,bv=Mt[Sr+1]??null,jv=Sr>0,Mv=Sr<Mt.length-2,Gs=Mt.length>=2,qs=f.sort.kind==="metric"?f.sort.key:null,Id=d.useMemo(()=>qs?Be.some(x=>{var P;const M=(P=x.metrics)==null?void 0:P[qs];return M!=null&&!Number.isNaN(M)}):!1,[Be,qs]);d.useEffect(()=>{h(x=>x>eo?eo:x)},[eo]);const Od=d.useCallback(x=>{Md(D=>{if(D.has(x))return D;const B=new Set(D);return B.add(x),B});const M=ql.current,P=M.get(x);P&&window.clearTimeout(P);const H=window.setTimeout(()=>{Md(D=>{if(!D.has(x))return D;const B=new Set(D);return B.delete(x),B}),M.delete(x)},lp);M.set(x,H)},[]),ta=d.useCallback(x=>{const M=Date.now(),H=_h(x)??M,D=H>M?M:H;vv(B=>B==null?D:B>D?B:D),yv(M),Jl(M)},[]),na=d.useCallback((x,M,P)=>{const H=Date.now(),D=_h(P)??H;Gl(B=>{const ie=B.filter(G=>G.path!==x);return[{path:x,ts:D,kind:M},...ie].slice(0,10)})},[]),ra=d.useCallback((x,M)=>{const P=Date.now();Yl(H=>{const D=H.filter(ie=>ie.path!==x);return[{path:x,ts:P,kind:M},...D].slice(0,6)}),Od(x)},[Od]),sa=d.useCallback(x=>{const M=Object.prototype.hasOwnProperty.call(x,"star"),P=x.metrics!==void 0,H=x.comments!==void 0;if(!M&&!P&&!H)return;const D=B=>{if(B.path!==x.path)return B;let ie=B;return M&&B.star!==x.star&&(ie={...ie,star:x.star??null}),P&&(ie={...ie,metrics:x.metrics??null}),H&&B.comments!==x.comments&&(ie={...ie,comments:x.comments??""}),ie};ve.setQueriesData({predicate:({queryKey:B})=>Array.isArray(B)&&B[0]==="folder"},B=>{if(!B)return B;let ie=!1;const te=B.items.map(G=>{const oe=D(G);return oe!==G&&(ie=!0),oe});return ie?{...B,items:te}:B}),ve.setQueriesData({predicate:({queryKey:B})=>Array.isArray(B)&&B[0]==="search"},B=>{if(!B)return B;let ie=!1;const te=B.items.map(G=>{const oe=D(G);return oe!==G&&(ie=!0),oe});return ie?{...B,items:te}:B})},[ve]),ia=d.useCallback(async x=>{const M=nn(x||"/"),P=ln.current,H=yr.current,D=P.get(M);if(D!==void 0)return D;const B=H.get(M);if(B)return B;const ie=(async()=>{const te=[M],G=new Set;let oe=0;for(;te.length;){const He=te.pop();if(!G.has(He)){G.add(He);try{const kr=await he.getFolder(He);oe+=kr.items.length;for(const fa of kr.dirs)fa.kind==="branch"&&te.push(Ed(He,fa.name))}catch(kr){console.warn(`Failed to count folder ${He}:`,kr)}}}return P.set(M,oe),H.delete(M),oe})();return H.set(M,ie),ie},[]);d.useEffect(()=>{let x=!1;const M=nn(e||"/");return(async()=>{const H=ia("/"),D=M==="/"?H:ia(M),[B,ie]=await Promise.all([H,D]);x||(q(B),Re(ie))})().catch(H=>console.warn("Failed to compute folder counts:",H)),()=>{x=!0}},[e,ia]),d.useEffect(()=>{Iw();const x=Fw(P=>{if(P.type==="presence"){const B=P.data;if(!(B!=null&&B.gallery_id))return;xr(ie=>({...ie,[B.gallery_id]:B}));return}const H=P.data;if(!(H!=null&&H.path))return;const D=H.path;if(P.type==="item-updated"){const B=P.data,ie={v:1,tags:B.tags??[],notes:B.notes??"",star:B.star??null,version:B.version??1,updated_at:B.updated_at??"",updated_by:B.updated_by??"server"};ve.setQueryData(Ui(D),ie),sa({path:D,star:B.star??null,metrics:B.metrics,comments:B.notes??""}),B1(D,ie),ra(D,"item-updated"),na(D,"item-updated",B.updated_at),ta(B.updated_at),fe(te=>{if(te[D]===void 0)return te;const G={...te};return delete G[D],G})}else if(P.type==="metrics-updated"){const B=P.data;sa({path:D,metrics:B.metrics}),ra(D,"metrics-updated"),na(D,"metrics-updated",B.updated_at),ta(B.updated_at)}}),M=Dw(xt);return()=>{x(),M(),Ow()}},[ra,na,ve,sa,ta]),d.useEffect(()=>{let x=!1;const M=nn(e||"/"),P=async()=>{try{const D=await he.postPresence(M);!x&&(D!=null&&D.gallery_id)&&xr(B=>({...B,[D.gallery_id]:D}))}catch{}};P();const H=window.setInterval(P,3e4);return()=>{x=!0,window.clearInterval(H)}},[e]),d.useEffect(()=>{let x=!1;return he.getHealth().then(M=>{var H;if(x)return;const P=((H=M==null?void 0:M.labels)==null?void 0:H.enabled)??!0;Sv(P)}).catch(()=>{}),()=>{x=!0}},[]);const Rv=d.useMemo(()=>{const x=an,M={0:0,1:0,2:0,3:0,4:0,5:0};for(const P of x){const H=J[P.path]??P.star??0;M[String(H)]=(M[String(H)]||0)+1}return M},[an,J]),zn=d.useMemo(()=>{const x=new Set;let M=0;for(const P of an){const H=P.metrics;if(H)for(const D of Object.keys(H))x.add(D);if(M+=1,M>=250&&x.size>0)break}return Array.from(x).sort()},[an]);d.useEffect(()=>{zn.length&&C(x=>{const M=x.selectedMetric&&zn.includes(x.selectedMetric)?x.selectedMetric:zn[0];return M===x.selectedMetric?x:{...x,selectedMetric:M}})},[zn]),d.useEffect(()=>{f.sort.kind==="metric"&&(zn.includes(f.sort.key)||C(x=>({...x,sort:{kind:"builtin",key:"added",dir:x.sort.dir}})))},[zn,f.sort]);const Fd=d.useMemo(()=>RS(f.filters),[f.filters]),to=me??kv,Lv=ee??to,Dd=wr||Fd>0,no=Ie[e],Tv=Ee.state==="syncing"?"Syncing":Ee.state==="error"?Ee.message?`Not saved  ${Ee.message}`:"Not saved  retry":"All changes saved",_v=lk(ke),oa=Dn!=null,Pv=d.useMemo(()=>!oa||Dn==null?"No edits yet.":fv(Dn,Ys),[oa,Dn,Ys]),zd=Dn==null?null:Math.max(0,Ys-Dn),Iv=((no==null?void 0:no.editing)??0)>0||zd!=null&&zd<sk,Ov=yt!=null&&yt>ik,Fv=ke==="offline"||ke==="connecting"||ke==="idle",Dv=ke==="reconnecting"||be||Ee.state==="error"||Ov,zv=ak({isOffline:Fv,isUnstable:Dv,recentEditActive:xv,editingActive:Iv}),Av=d.useMemo(()=>uk(Kt,Be),[Kt,Be]),la=d.useMemo(()=>Kt.length?Kt.reduce((x,M)=>Math.max(x,M.ts),0):null,[Kt]),$v=pv||jd!=null&&la!=null&&la<=jd?null:Av,Uv=d.useMemo(()=>ck(Zi,Be,Ys),[Be,Ys,Zi]),Bv=Dd?Cv:to,Wv=Dd||e==="/"?to:Lv,at=d.useCallback(x=>{C(M=>({...M,filters:x(M.filters)}))},[]),Hv=d.useCallback(x=>{C(M=>({...M,filters:x}))},[]),ro=d.useCallback(()=>{at(x=>Ka(x,[]))},[at]),Ad=d.useCallback(()=>{C(x=>({...x,filters:{and:[]}}))},[]),aa=d.useCallback((x,M)=>{at(P=>MS(P,x,M))},[at]),$d=d.useMemo(()=>{var M,P,H,D,B,ie;const x=[];for(const te of f.filters.and)if("stars"in te){const G=te.stars||[];if(!G.length)continue;x.push({id:"stars",label:`Rating in: ${Xa(G)}`,onRemove:()=>ro()})}else if("starsIn"in te){const G=te.starsIn.values||[];if(!G.length)continue;x.push({id:"stars-in",label:`Rating in: ${Xa(G)}`,onRemove:()=>ro()})}else if("starsNotIn"in te){const G=te.starsNotIn.values||[];if(!G.length)continue;x.push({id:"stars-not-in",label:`Rating not in: ${Xa(G)}`,onRemove:()=>at(oe=>rv(oe,[]))})}else if("nameContains"in te){const G=(M=te.nameContains.value)==null?void 0:M.trim();if(!G)continue;x.push({id:"name-contains",label:`Filename contains: ${G}`,onRemove:()=>at(oe=>sv(oe,""))})}else if("nameNotContains"in te){const G=(P=te.nameNotContains.value)==null?void 0:P.trim();if(!G)continue;x.push({id:"name-not-contains",label:`Filename not: ${G}`,onRemove:()=>at(oe=>iv(oe,""))})}else if("commentsContains"in te){const G=(H=te.commentsContains.value)==null?void 0:H.trim();if(!G)continue;x.push({id:"comments-contains",label:`Comments contain: ${G}`,onRemove:()=>at(oe=>ov(oe,""))})}else if("commentsNotContains"in te){const G=(D=te.commentsNotContains.value)==null?void 0:D.trim();if(!G)continue;x.push({id:"comments-not-contains",label:`Comments not: ${G}`,onRemove:()=>at(oe=>lv(oe,""))})}else if("urlContains"in te){const G=(B=te.urlContains.value)==null?void 0:B.trim();if(!G)continue;x.push({id:"url-contains",label:`URL contains: ${G}`,onRemove:()=>at(oe=>av(oe,""))})}else if("urlNotContains"in te){const G=(ie=te.urlNotContains.value)==null?void 0:ie.trim();if(!G)continue;x.push({id:"url-not-contains",label:`URL not: ${G}`,onRemove:()=>at(oe=>uv(oe,""))})}else if("dateRange"in te){const{from:G,to:oe}=te.dateRange;if(!G&&!oe)continue;x.push({id:"date-range",label:`Date: ${pk(G,oe)}`,onRemove:()=>at(He=>mc(He,null))})}else if("widthCompare"in te){const{op:G,value:oe}=te.widthCompare;x.push({id:"width-compare",label:`Width ${G} ${oe}`,onRemove:()=>at(He=>Ko(He,null))})}else if("heightCompare"in te){const{op:G,value:oe}=te.heightCompare;x.push({id:"height-compare",label:`Height ${G} ${oe}`,onRemove:()=>at(He=>Yo(He,null))})}else if("metricRange"in te){const{key:G,min:oe,max:He}=te.metricRange;x.push({id:`metric:${G}`,label:`${G}: ${gk(oe,He)}`,onRemove:()=>aa(G,null)})}return x},[f.filters,ro,aa,at]),Vv=d.useCallback(x=>{const M=new Set(ea);M.has(x)?M.delete(x):M.add(x),C(P=>({...P,filters:Ka(P.filters,Array.from(M))}))},[ea]),Qv=d.useCallback(()=>{z(!0),de("metrics")},[]),Kv=d.useCallback(x=>{C(M=>({...M,sort:x})),x.kind==="builtin"&&x.key==="random"&&j(Date.now())},[]),Ud=d.useCallback(x=>{if(x==="/"||x==="")return"Lenslet | Root";const M=x.split("/").filter(Boolean);if(!M.length)return"Lenslet";const P=M.slice(-2).join("/");return`Lenslet | ${M.length>2?`.../${P}`:`/${P}`}`},[]),Yv=d.useMemo(()=>mk(e),[e]);d.useEffect(()=>{document.title=Ud(e)},[e,Ud]),d.useEffect(()=>{let x=!0;return he.getViews().then(M=>{x&&U(M.views||[])}).catch(()=>{x&&U([])}),()=>{x=!1}},[]),d.useEffect(()=>{wr&&(i([]),o&&(l(null),De.current=!1,Ro(e)))},[wr,o,e]),d.useEffect(()=>{const x=Ze.current,M=vt.current;if(!x||!M)return;const P=()=>{const H=Math.max(48,Math.round(M.getBoundingClientRect().height));x.style.setProperty("--toolbar-h",`${H}px`)};if(P(),"ResizeObserver"in window){const H=new ResizeObserver(P);return H.observe(M),()=>H.disconnect()}return window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]),d.useEffect(()=>{try{const x=localStorage.getItem(Ae.sortKey),M=localStorage.getItem(Ae.sortDir),P=localStorage.getItem(Ae.sortSpec),H=localStorage.getItem(Ae.starFilters),D=localStorage.getItem(Ae.filterAst),B=localStorage.getItem(Ae.selectedMetric),ie=localStorage.getItem(Ae.viewMode),te=localStorage.getItem(Ae.gridItemSize),G=localStorage.getItem(Ae.leftOpen),oe=localStorage.getItem(Ae.rightOpen),kr=(rt=>{if(!rt)return null;const Ve=Ha(rt);return!Ve||typeof Ve!="object"?null:Ve.kind==="builtin"&&(Ve.key==="name"||Ve.key==="added"||Ve.key==="random")&&(Ve.dir==="asc"||Ve.dir==="desc")||Ve.kind==="metric"&&typeof Ve.key=="string"&&Ve.key.length>0&&(Ve.dir==="asc"||Ve.dir==="desc")?Ve:null})(P)??{kind:"builtin",key:x==="name"||x==="added"||x==="random"?x:"added",dir:M==="asc"||M==="desc"?M:"desc"};kr.key==="random"&&j(Date.now());let ha=(rt=>{if(!rt)return null;const Ve=Ha(rt);return pc(Ve)})(D)??{and:[]};if(H){const rt=Ha(H);if(Array.isArray(rt)){const Ve=rt.filter(ry=>[0,1,2,3,4,5].includes(ry));ha=Ka(ha,Ve)}}if(C(rt=>({...rt,sort:kr,filters:ha,selectedMetric:B||rt.selectedMetric})),(ie==="grid"||ie==="adaptive")&&_(ie),te){const rt=Number(te);!isNaN(rt)&&rt>=80&&rt<=500&&O(rt)}(G==="0"||G==="false")&&z(!1),(oe==="0"||oe==="false")&&le(!1)}catch{}},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia("(max-width: 900px)"),M=()=>{x.matches&&(z(!1),le(!1))};return M(),"addEventListener"in x?(x.addEventListener("change",M),()=>x.removeEventListener("change",M)):(x.addListener(M),()=>x.removeListener(M))},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=[1,1.25,1.5,1.75,2,3,4],M=D=>x.reduce((B,ie)=>Math.abs(ie-D)<Math.abs(B-D)?ie:B,x[0]),P=()=>{var He;const D=window.devicePixelRatio||1,B=M(D),ie=((He=window.visualViewport)==null?void 0:He.scale)??1,te=D*ie/B;if(!Number.isFinite(te)){p(null);return}const G=Math.round(te*100),oe=Math.min(500,Math.max(25,G));p(oe)};P(),window.addEventListener("resize",P),window.addEventListener("orientationchange",P);const H=window.visualViewport;return H&&H.addEventListener("resize",P),()=>{window.removeEventListener("resize",P),window.removeEventListener("orientationchange",P),H&&H.removeEventListener("resize",P)}},[]),d.useEffect(()=>{try{localStorage.setItem(Ae.sortKey,f.sort.kind==="builtin"?f.sort.key:"added"),localStorage.setItem(Ae.sortDir,f.sort.dir),localStorage.setItem(Ae.sortSpec,JSON.stringify(f.sort));const x=Ah(f.filters);localStorage.setItem(Ae.starFilters,JSON.stringify(x)),localStorage.setItem(Ae.filterAst,JSON.stringify(f.filters)),f.selectedMetric?localStorage.setItem(Ae.selectedMetric,f.selectedMetric):localStorage.removeItem(Ae.selectedMetric),localStorage.setItem(Ae.viewMode,b),localStorage.setItem(Ae.gridItemSize,String(E)),localStorage.setItem(Ae.leftOpen,Q?"1":"0"),localStorage.setItem(Ae.rightOpen,A?"1":"0")}catch{}},[f,b,E,Q,A]),d.useEffect(()=>{const x=Ce.current;if(!x)return;const M=H=>Math.min(500,Math.max(80,H)),P=H=>{H.ctrlKey&&(o||a||(H.preventDefault(),O(D=>M(D+(H.deltaY<0?20:-20)))))};return x.addEventListener("wheel",P,{passive:!1}),()=>x.removeEventListener("wheel",P)},[o,a]),d.useEffect(()=>{if(o||a)return;const x=Ce.current;if(!x)return;const M=te=>Math.min(500,Math.max(80,te));let P=null;const H=te=>{if(te.length<2)return 0;const[G,oe]=[te[0],te[1]];return Math.hypot(G.clientX-oe.clientX,G.clientY-oe.clientY)},D=te=>{if(te.touches.length!==2)return;const G=H(te.touches);G&&(P={dist:G,size:E})},B=te=>{if(!P||te.touches.length!==2)return;const G=H(te.touches);if(!G)return;te.preventDefault();const oe=M(P.size*(G/P.dist));O(oe)},ie=()=>{P=null};return x.addEventListener("touchstart",D,{passive:!0}),x.addEventListener("touchmove",B,{passive:!1}),x.addEventListener("touchend",ie),x.addEventListener("touchcancel",ie),()=>{x.removeEventListener("touchstart",D),x.removeEventListener("touchmove",B),x.removeEventListener("touchend",ie),x.removeEventListener("touchcancel",ie)}},[o,a,E]),d.useEffect(()=>{if(!o)return;const x=jt.indexOf(o);if(x===-1)return;const M=[jt[x-2],jt[x-1],jt[x+1],jt[x+2]].filter(P=>!!P);for(const P of M)he.prefetchFile(P),he.prefetchThumb(P)},[o,jt]),d.useEffect(()=>{var P;if(!a||Mt.length<2)return;const x=Sr,M=new Set;for(const H of[-2,-1,0,1,2,3]){const D=x+H;D>=0&&D<Mt.length&&M.add(D)}for(const H of M){const D=(P=Mt[H])==null?void 0:P.path;D&&(he.prefetchFile(D),he.prefetchThumb(D))}},[a,Mt,Sr]),d.useEffect(()=>{var M;if(!((M=ze==null?void 0:ze.items)!=null&&M.length))return;const x=ze.items.slice(0,5);for(const P of x)he.prefetchFile(P.path)},[ze==null?void 0:ze.path,ze==null?void 0:ze.items]);const so=d.useCallback(x=>{l(null),De.current=!1;const M=nn(x);t(M),Dh(M)},[]),Gv=d.useCallback(async()=>{const x=window.prompt("Save Smart Folder as:","New Smart Folder");if(!x)return;const M=fk(x,I),P={id:M,name:x,pool:{kind:"folder",path:e},view:JSON.parse(JSON.stringify(f))},H=[...I.filter(D=>D.id!==M),P];U(H),ue(M);try{await he.saveViews({version:1,views:H})}catch(D){if(D instanceof fr&&D.status===403){const B=new Blob([JSON.stringify({version:1,views:H},null,2)],{type:"application/json"});Go(B,`lenslet-smart-folder-${M}.json`),alert("No-write mode: exported Smart Folder JSON instead of saving.");return}console.error("Failed to save Smart Folder:",D)}},[e,f,I]);d.useEffect(()=>{if(!X)return;const x=I.find(H=>H.id===X);if(!x){ue(null);return}const M=x.pool.path===e,P=JSON.stringify(x.view)===JSON.stringify(f);(!M||!P)&&ue(null)},[X,I,e,f]);const io=d.useCallback(x=>{if(!x)return;const M=document.getElementById(`cell-${encodeURIComponent(x)}`);M==null||M.focus()},[]),qv=d.useCallback(x=>{l(x),De.current=!0,Dh(x)},[]),Bd=d.useCallback(()=>{l(null),De.current?(De.current=!1,window.history.back()):Ro(e),io(Ft.current)},[io]),Xv=d.useCallback(()=>{a||!Gs||(s[0]&&(Ft.current=s[0]),h(0),c(!0),o&&(l(null),De.current&&(De.current=!1),Ro(e)),Qt.current||(window.history.pushState({compare:!0},"",window.location.href),Qt.current=!0))},[a,Gs,s,o,e]),ua=d.useCallback(()=>{c(!1),Qt.current&&(Qt.current=!1,window.history.back()),io(Ft.current??s[0])},[io,s]),Jv=d.useCallback(x=>{Mt.length<2||h(M=>{const P=Math.max(0,Mt.length-2);return Math.min(P,Math.max(0,M+x))})},[Mt.length]);d.useEffect(()=>{a&&(Gs||ua())},[a,Gs,ua]),d.useEffect(()=>{const x=()=>{o&&(De.current=!1,l(null)),a&&(Qt.current=!1,c(!1))};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[o,a]),d.useEffect(()=>{const x=Ze.current;if(!x)return;const M=D=>{D.dataTransfer&&Array.from(D.dataTransfer.types).includes("Files")&&(D.preventDefault(),Y(!0))},P=D=>{const B=D.relatedTarget;B&&x.contains(B)||Y(!1)},H=async D=>{var te,G;D.preventDefault(),Y(!1);const B=Array.from(((te=D.dataTransfer)==null?void 0:te.files)??[]);if(!B.length)return;if(!((((G=ze==null?void 0:ze.dirs)==null?void 0:G.length)??0)===0)){alert("Uploads are only allowed into folders without subdirectories.");return}for(const oe of B)try{await he.uploadFile(e,oe)}catch(He){console.error(`Failed to upload ${oe.name}:`,He)}Zl()};return x.addEventListener("dragover",M),x.addEventListener("dragleave",P),x.addEventListener("drop",H),()=>{x.removeEventListener("dragover",M),x.removeEventListener("dragleave",P),x.removeEventListener("drop",H)}},[e,(Hd=ze==null?void 0:ze.dirs)==null?void 0:Hd.length,Zl]),d.useEffect(()=>{const x=()=>ae(null),M=P=>{P.key==="Escape"&&ae(null)};return window.addEventListener("click",x),window.addEventListener("keydown",M),()=>{window.removeEventListener("click",x),window.removeEventListener("keydown",M)}},[]),d.useEffect(()=>{const x=M=>{if(!wd(M.target)){if((M.ctrlKey||M.metaKey)&&M.key.toLowerCase()==="b"){M.preventDefault(),M.altKey?le(P=>!P):z(P=>!P);return}if(!(o||a)){if(M.key==="Backspace"||M.key==="Delete")M.preventDefault(),so(zh(e));else if((M.ctrlKey||M.metaKey)&&M.key.toLowerCase()==="a")M.preventDefault(),i(Be.map(P=>P.path));else if(M.key==="Escape")s.length&&(M.preventDefault(),i([]));else if(M.key==="/"){M.preventDefault();const P=document.querySelector(".toolbar-right .input");P==null||P.focus()}}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,Be,s,o,a,so]);const Zv=Q?`${W}px`:"0px",ey=A?`${ne}px`:"0px",Wd=o??s[0]??null,ca=Wd?jt.indexOf(Wd):-1,ty=ca>0,ny=ca>=0&&ca<jt.length-1,da=d.useCallback(x=>{if(!jt.length)return;const M=o??s[0];if(!M)return;const P=jt.indexOf(M);if(P===-1)return;const H=Math.min(jt.length-1,Math.max(0,P+x)),D=jt[H];!D||D===M||(o&&(l(D),Ro(D)),i([D]))},[jt,o,s]);return u.jsxs("div",{className:"app-shell grid h-full grid-cols-[var(--left)_1fr_var(--right)]",ref:Ze,style:{"--left":Zv,"--right":ey},children:[u.jsx(vw,{rootRef:vt,onSearch:r,viewerActive:!!o,onBack:Bd,zoomPercent:o?T:void 0,onZoomPercentChange:x=>N(x),currentLabel:Yv,itemCount:Bv,totalCount:Wv,sortSpec:f.sort,metricKeys:zn,onSortChange:Kv,filterCount:Fd,onOpenFilters:Qv,starFilters:ea,onToggleStar:Vv,onClearStars:ro,onClearFilters:Ad,starCounts:Rv,viewMode:b,onViewMode:_,gridItemSize:E,onGridItemSize:O,leftOpen:Q,rightOpen:A,onToggleLeft:()=>z(x=>!x),onToggleRight:()=>le(x=>!x),onPrevImage:()=>da(-1),onNextImage:()=>da(1),canPrevImage:ty,canNextImage:ny,syncIndicator:{state:zv,presence:no,syncLabel:Tv,connectionLabel:_v,lastEditedLabel:Pv,hasEdits:oa,recentTouches:Uv}}),Q&&u.jsx(nk,{leftTool:pe,onToolChange:de,compareEnabled:Gs,compareActive:a,onOpenCompare:Xv,views:I,activeViewId:X,onActivateView:x=>{var P;ue(x.id);const M=pc((P=x.view)==null?void 0:P.filters)??{and:[]};C({...x.view,filters:M}),so(x.pool.path),de("metrics")},onSaveView:Gv,current:e,data:ze,onOpenFolder:x=>{ue(null),so(x)},onContextMenu:(x,M)=>{x.preventDefault(),ae({x:x.clientX,y:x.clientY,kind:"tree",payload:{path:M}})},items:an,filteredItems:Be,metricKeys:zn,selectedItems:Ev,selectedMetric:f.selectedMetric,onSelectMetric:x=>C(M=>({...M,selectedMetric:x})),filters:f.filters,onChangeRange:aa,onChangeFilters:Hv,onResize:se}),u.jsxs("div",{className:"grid-shell col-start-2 row-start-2 relative overflow-hidden flex flex-col",ref:Ce,children:[u.jsx("div",{"aria-live":"polite",className:"sr-only",children:s.length?`${s.length} selected`:""}),u.jsx(rk,{persistenceEnabled:wv,recentSummary:$v,onDismissRecent:()=>mv(!0),onCloseRecent:()=>hv(la??Date.now()),browserZoomPercent:g}),$d.length>0&&u.jsx("div",{className:"sticky top-0 z-10 px-3 py-2 bg-panel border-b border-border",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsx("span",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Filters"}),$d.map(x=>u.jsxs("span",{className:"filter-chip",children:[u.jsx("span",{className:"truncate max-w-[240px]",title:x.label,children:x.label}),u.jsx("button",{className:"filter-chip-remove","aria-label":`Clear filter ${x.label}`,onClick:x.onRemove,children:""})]},x.id)),u.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:Ad,children:"Clear all"})]})}),!1,u.jsxs("div",{className:"flex-1 min-h-0 relative",children:[u.jsx(d1,{items:Be,selected:s,restoreToSelectionToken:v,onSelectionChange:i,onOpenViewer:x=>{try{Ft.current=x}catch{}qv(x),i([x])},highlight:wr?Td:"",recentlyUpdated:gv,suppressSelectionHighlight:!!o||a,viewMode:b,targetCellSize:E,onContextMenuItem:(x,M)=>{x.preventDefault();const P=s.length?s:[M];ae({x:x.clientX,y:x.clientY,kind:"grid",payload:{paths:P}})},scrollRef:Ge,hideScrollbar:Id}),Id&&qs&&u.jsx(p1,{items:Be,metricKey:qs,scrollRef:Ge,sortDir:f.sort.dir})]})]}),A&&u.jsx(tS,{path:s[0]??null,selectedPaths:s,items:Be,sortSpec:f.sort,onResize:L,onStarChanged:(x,M)=>{fe(P=>{const H={...P};for(const D of x)H[D]=M;return H})}}),o&&u.jsx(C1,{path:o,onClose:Bd,onZoomChange:x=>y(Math.round(x)),requestedZoomPercent:k,onZoomRequestConsumed:()=>N(null),onNavigate:da}),a&&u.jsx(M1,{aItem:Nv,bItem:bv,index:Sr,total:Mt.length,canPrev:jv,canNext:Mv,onNavigate:Jv,onClose:ua}),F&&u.jsx("div",{className:"toolbar-offset fixed inset-0 left-[var(--left)] right-[var(--right)] bg-accent/10 border-2 border-dashed border-accent text-text flex items-center justify-center text-lg z-overlay pointer-events-none",children:"Drop images to upload"}),V&&u.jsx(vk,{ctx:V,current:e,items:Be,refetch:Zl,setCtx:ae})]})}function fk(e,t){const n=hk(e)||"view",r=new Set(t.map(i=>i.id));if(!r.has(n))return n;let s=2;for(;r.has(`${n}-${s}`);)s+=1;return`${n}-${s}`}function hk(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function Xa(e){const t=e.filter(s=>s>0).sort((s,i)=>i-s),n=e.includes(0),r=[...t.map(s=>String(s))];return n&&r.push("None"),r.join(", ")}function pk(e,t){return e&&t?`${e} to ${t}`:e?`from ${e}`:t?`to ${t}`:""}function mk(e){if(e==="/"||e==="")return"Root";const t=e.split("/").filter(Boolean);return t.length?t.length<=2?`/${t.join("/")}`:`.../${t.slice(-2).join("/")}`:"Root"}function gk(e,t){return`${ap(e)}${ap(t)}`}function ap(e){const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Go(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function vk({ctx:e,current:t,items:n,refetch:r,setCtx:s}){const i=cS(t),o=(p,f)=>p==="/"?`/${f}`:`${p}/${f}`,l=Jr(),[a,c]=qo.useState(!1),[m,h]=qo.useState(null),v=()=>new Date().toISOString().replace(/[:.]/g,"-"),S=p=>{const f=C=>p==="/"?!0:C===p||C.startsWith(`${p}/`);l.invalidateQueries({predicate:({queryKey:C})=>{if(!Array.isArray(C)||C[0]!=="folder")return!1;const R=typeof C[1]=="string"?C[1]:"";return f(R)}})},k=p=>{const f=nn(p);return f===""?"/":f},N=async()=>{const p=k(e.payload.path||"/");c(!0);try{await he.refreshFolder(p),S(p),(t===p||t.startsWith(p==="/"?"/":`${p}/`))&&await r(),sc.evictPrefix(p),rs.evictPrefix(p)}catch(f){console.error("Failed to refresh folder:",f)}finally{c(!1),s(null)}},T=async p=>{const f=[p],C=new Set,R=[];for(;f.length;){const j=f.pop();if(!C.has(j)){C.add(j);try{const b=await he.getFolder(j);R.push(...b.items);for(const _ of b.dirs)_.kind==="branch"&&f.push(o(j,_.name))}catch(b){console.error(`Failed to fetch folder ${j}:`,b)}}}return R},y=p=>async()=>{h(p);const f=e.payload.path||t;try{const C=await T(f),R=Ya(C),j=p==="csv"?Yh(R):Kh(R),b=p==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8",_=f==="/"?"root":(f.replace(/^\/+/,"")||"root").replace(/\//g,"_");Go(new Blob([j],{type:b}),`metadata_${_}_${v()}.${p}`)}catch(C){console.error("Failed to export folder:",C),alert("Failed to export folder. See console for details.")}finally{h(null),s(null)}},g=e.kind==="tree"?[{label:a?"Refreshing":"Refresh",disabled:a,onClick:N},{label:m==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!m||a,onClick:y("csv")},{label:m==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!m||a,onClick:y("json")}]:(()=>{const p=e.payload.paths??[],f=[];return f.push({label:"Move to trash",disabled:i,onClick:async()=>{if(!i){for(const C of p)try{await he.moveFile(C,"/_trash_")}catch(R){console.error(`Failed to trash ${C}:`,R)}r(),s(null)}}}),i&&(f.push({label:"Permanent delete",danger:!0,onClick:async()=>{if(confirm(`Delete ${p.length} file(s) permanently? This cannot be undone.`)){try{await he.deleteFiles(p)}catch(C){console.error("Failed to delete files:",C)}r(),s(null)}}}),f.push({label:"Recover",onClick:async()=>{for(const C of p)try{const j=(await he.getSidecar(C)).original_position,b=j&&j.split("/").slice(0,-1).join("/")||"/";await he.moveFile(C,b)}catch(R){console.error(`Failed to recover ${C}:`,R)}r(),s(null)}})),p.length&&(f.push({label:m==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!m,onClick:async()=>{h("csv");try{const C=new Set(p),R=n.filter(_=>C.has(_.path)),j=Ya(R),b=Yh(j);Go(new Blob([b],{type:"text/csv;charset=utf-8"}),`metadata_selection_${v()}.csv`)}finally{h(null),s(null)}}}),f.push({label:m==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!m,onClick:async()=>{h("json");try{const C=new Set(p),R=n.filter(_=>C.has(_.path)),j=Ya(R),b=Kh(j);Go(new Blob([b],{type:"application/json;charset=utf-8"}),`metadata_selection_${v()}.json`)}finally{h(null),s(null)}}})),f})();return u.jsx(AS,{x:e.x,y:e.y,items:g})}const yk=new tw({defaultOptions:{queries:{staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always"},mutations:{retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),5e3)}}});function xk(){return u.jsx(nw,{client:yk,children:u.jsx(dk,{})})}_g(document.getElementById("root")).render(u.jsx(xk,{}));
