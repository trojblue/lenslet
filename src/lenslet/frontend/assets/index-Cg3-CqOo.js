var xx=Object.defineProperty;var sh=e=>{throw TypeError(e)};var wx=(e,t,n)=>t in e?xx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Zn=(e,t,n)=>wx(e,typeof t!="symbol"?t+"":t,n),Ru=(e,t,n)=>t.has(e)||sh("Cannot "+n);var C=(e,t,n)=>(Ru(e,t,"read from private field"),n?n.call(e):t.get(e)),oe=(e,t,n)=>t.has(e)?sh("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),W=(e,t,n,r)=>(Ru(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ve=(e,t,n)=>(Ru(e,t,"access private method"),n);var wl=(e,t,n,r)=>({set _(s){W(e,t,s,n)},get _(){return C(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Sx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $p={exports:{}},Qa={},Bp={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xo=Symbol.for("react.element"),bx=Symbol.for("react.portal"),Cx=Symbol.for("react.fragment"),kx=Symbol.for("react.strict_mode"),Ex=Symbol.for("react.profiler"),Nx=Symbol.for("react.provider"),jx=Symbol.for("react.context"),Mx=Symbol.for("react.forward_ref"),Rx=Symbol.for("react.suspense"),Lx=Symbol.for("react.memo"),Px=Symbol.for("react.lazy"),ih=Symbol.iterator;function Tx(e){return e===null||typeof e!="object"?null:(e=ih&&e[ih]||e["@@iterator"],typeof e=="function"?e:null)}var Up={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vp=Object.assign,Hp={};function Di(e,t,n){this.props=e,this.context=t,this.refs=Hp,this.updater=n||Up}Di.prototype.isReactComponent={};Di.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Di.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wp(){}Wp.prototype=Di.prototype;function zd(e,t,n){this.props=e,this.context=t,this.refs=Hp,this.updater=n||Up}var $d=zd.prototype=new Wp;$d.constructor=zd;Vp($d,Di.prototype);$d.isPureReactComponent=!0;var oh=Array.isArray,Qp=Object.prototype.hasOwnProperty,Bd={current:null},Kp={key:!0,ref:!0,__self:!0,__source:!0};function qp(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Qp.call(t,r)&&!Kp.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Xo,type:e,key:i,ref:o,props:s,_owner:Bd.current}}function _x(e,t){return{$$typeof:Xo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ud(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xo}function Ix(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var lh=/\/+/g;function Lu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ix(""+e.key):t.toString(36)}function Ql(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Xo:case bx:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Lu(o,0):r,oh(s)?(n="",e!=null&&(n=e.replace(lh,"$&/")+"/"),Ql(s,t,n,"",function(d){return d})):s!=null&&(Ud(s)&&(s=_x(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(lh,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",oh(e))for(var l=0;l<e.length;l++){i=e[l];var u=r+Lu(i,l);o+=Ql(i,t,n,u,s)}else if(u=Tx(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=r+Lu(i,l++),o+=Ql(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Sl(e,t,n){if(e==null)return e;var r=[],s=0;return Ql(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Fx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var It={current:null},Kl={transition:null},Ox={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:Kl,ReactCurrentOwner:Bd};function Yp(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:Sl,forEach:function(e,t,n){Sl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Sl(e,function(){t++}),t},toArray:function(e){return Sl(e,function(t){return t})||[]},only:function(e){if(!Ud(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=Di;we.Fragment=Cx;we.Profiler=Ex;we.PureComponent=zd;we.StrictMode=kx;we.Suspense=Rx;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ox;we.act=Yp;we.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Vp({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Bd.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)Qp.call(t,u)&&!Kp.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Xo,type:e.type,key:s,ref:i,props:r,_owner:o}};we.createContext=function(e){return e={$$typeof:jx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Nx,_context:e},e.Consumer=e};we.createElement=qp;we.createFactory=function(e){var t=qp.bind(null,e);return t.type=e,t};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:Mx,render:e}};we.isValidElement=Ud;we.lazy=function(e){return{$$typeof:Px,_payload:{_status:-1,_result:e},_init:Fx}};we.memo=function(e,t){return{$$typeof:Lx,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=Kl.transition;Kl.transition={};try{e()}finally{Kl.transition=t}};we.unstable_act=Yp;we.useCallback=function(e,t){return It.current.useCallback(e,t)};we.useContext=function(e){return It.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return It.current.useDeferredValue(e)};we.useEffect=function(e,t){return It.current.useEffect(e,t)};we.useId=function(){return It.current.useId()};we.useImperativeHandle=function(e,t,n){return It.current.useImperativeHandle(e,t,n)};we.useInsertionEffect=function(e,t){return It.current.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return It.current.useLayoutEffect(e,t)};we.useMemo=function(e,t){return It.current.useMemo(e,t)};we.useReducer=function(e,t,n){return It.current.useReducer(e,t,n)};we.useRef=function(e){return It.current.useRef(e)};we.useState=function(e){return It.current.useState(e)};we.useSyncExternalStore=function(e,t,n){return It.current.useSyncExternalStore(e,t,n)};we.useTransition=function(){return It.current.useTransition()};we.version="18.3.1";Bp.exports=we;var c=Bp.exports;const da=Sx(c);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ax=c,Dx=Symbol.for("react.element"),zx=Symbol.for("react.fragment"),$x=Object.prototype.hasOwnProperty,Bx=Ax.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ux={key:!0,ref:!0,__self:!0,__source:!0};function Gp(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)$x.call(t,r)&&!Ux.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Dx,type:e,key:i,ref:o,props:s,_owner:Bx.current}}Qa.Fragment=zx;Qa.jsx=Gp;Qa.jsxs=Gp;$p.exports=Qa;var a=$p.exports,Xp={exports:{}},nn={},Jp={exports:{}},Zp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,H){var X=D.length;D.push(H);e:for(;0<X;){var le=X-1>>>1,fe=D[le];if(0<s(fe,H))D[le]=H,D[X]=fe,X=le;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var H=D[0],X=D.pop();if(X!==H){D[0]=X;e:for(var le=0,fe=D.length,Le=fe>>>1;le<Le;){var Q=2*(le+1)-1,K=D[Q],re=Q+1,ae=D[re];if(0>s(K,X))re<fe&&0>s(ae,K)?(D[le]=ae,D[re]=X,le=re):(D[le]=K,D[Q]=X,le=Q);else if(re<fe&&0>s(ae,X))D[le]=ae,D[re]=X,le=re;else break e}}return H}function s(D,H){var X=D.sortIndex-H.sortIndex;return X!==0?X:D.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,m=null,g=3,b=!1,w=!1,E=!1,L=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(D){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=D)r(d),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(d)}}function v(D){if(E=!1,p(D),!w)if(n(u)!==null)w=!0,T(S);else{var H=n(d);H!==null&&me(v,H.startTime-D)}}function S(D,H){w=!1,E&&(E=!1,y(k),k=-1),b=!0;var X=g;try{for(p(H),m=n(u);m!==null&&(!(m.expirationTime>H)||D&&!F());){var le=m.callback;if(typeof le=="function"){m.callback=null,g=m.priorityLevel;var fe=le(m.expirationTime<=H);H=e.unstable_now(),typeof fe=="function"?m.callback=fe:m===n(u)&&r(u),p(H)}else r(u);m=n(u)}if(m!==null)var Le=!0;else{var Q=n(d);Q!==null&&me(v,Q.startTime-H),Le=!1}return Le}finally{m=null,g=X,b=!1}}var R=!1,j=null,k=-1,P=5,N=-1;function F(){return!(e.unstable_now()-N<P)}function B(){if(j!==null){var D=e.unstable_now();N=D;var H=!0;try{H=j(!0,D)}finally{H?A():(R=!1,j=null)}}else R=!1}var A;if(typeof h=="function")A=function(){h(B)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,de=ee.port2;ee.port1.onmessage=B,A=function(){de.postMessage(null)}}else A=function(){L(B,0)};function T(D){j=D,R||(R=!0,A())}function me(D,H){k=L(function(){D(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){w||b||(w=!0,T(S))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(D){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var X=g;g=H;try{return D()}finally{g=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,H){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var X=g;g=D;try{return H()}finally{g=X}},e.unstable_scheduleCallback=function(D,H,X){var le=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?le+X:le):X=le,D){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=X+fe,D={id:f++,callback:H,priorityLevel:D,startTime:X,expirationTime:fe,sortIndex:-1},X>le?(D.sortIndex=X,t(d,D),n(u)===null&&D===n(d)&&(E?(y(k),k=-1):E=!0,me(v,X-le))):(D.sortIndex=fe,t(u,D),w||b||(w=!0,T(S))),D},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(D){var H=g;return function(){var X=g;g=H;try{return D.apply(this,arguments)}finally{g=X}}}})(Zp);Jp.exports=Zp;var Vx=Jp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hx=c,tn=Vx;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eg=new Set,Eo={};function Ds(e,t){Li(e,t),Li(e+"Capture",t)}function Li(e,t){for(Eo[e]=t,e=0;e<t.length;e++)eg.add(t[e])}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pc=Object.prototype.hasOwnProperty,Wx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ah={},uh={};function Qx(e){return pc.call(uh,e)?!0:pc.call(ah,e)?!1:Wx.test(e)?uh[e]=!0:(ah[e]=!0,!1)}function Kx(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qx(e,t,n,r){if(t===null||typeof t>"u"||Kx(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ft(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vt[e]=new Ft(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vt[t]=new Ft(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vt[e]=new Ft(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vt[e]=new Ft(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vt[e]=new Ft(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vt[e]=new Ft(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vt[e]=new Ft(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vt[e]=new Ft(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vt[e]=new Ft(e,5,!1,e.toLowerCase(),null,!1,!1)});var Vd=/[\-:]([a-z])/g;function Hd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Vd,Hd);vt[t]=new Ft(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Vd,Hd);vt[t]=new Ft(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Vd,Hd);vt[t]=new Ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vt[e]=new Ft(e,1,!1,e.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vt[e]=new Ft(e,1,!1,e.toLowerCase(),null,!0,!0)});function Wd(e,t,n,r){var s=vt.hasOwnProperty(t)?vt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(qx(t,n,s,r)&&(n=null),r||s===null?Qx(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var vr=Hx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bl=Symbol.for("react.element"),Gs=Symbol.for("react.portal"),Xs=Symbol.for("react.fragment"),Qd=Symbol.for("react.strict_mode"),gc=Symbol.for("react.profiler"),tg=Symbol.for("react.provider"),ng=Symbol.for("react.context"),Kd=Symbol.for("react.forward_ref"),vc=Symbol.for("react.suspense"),yc=Symbol.for("react.suspense_list"),qd=Symbol.for("react.memo"),Lr=Symbol.for("react.lazy"),rg=Symbol.for("react.offscreen"),ch=Symbol.iterator;function Yi(e){return e===null||typeof e!="object"?null:(e=ch&&e[ch]||e["@@iterator"],typeof e=="function"?e:null)}var Ue=Object.assign,Pu;function lo(e){if(Pu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Pu=t&&t[1]||""}return`
`+Pu+e}var Tu=!1;function _u(e,t){if(!e||Tu)return"";Tu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{Tu=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?lo(e):""}function Yx(e){switch(e.tag){case 5:return lo(e.type);case 16:return lo("Lazy");case 13:return lo("Suspense");case 19:return lo("SuspenseList");case 0:case 2:case 15:return e=_u(e.type,!1),e;case 11:return e=_u(e.type.render,!1),e;case 1:return e=_u(e.type,!0),e;default:return""}}function xc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xs:return"Fragment";case Gs:return"Portal";case gc:return"Profiler";case Qd:return"StrictMode";case vc:return"Suspense";case yc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ng:return(e.displayName||"Context")+".Consumer";case tg:return(e._context.displayName||"Context")+".Provider";case Kd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qd:return t=e.displayName||null,t!==null?t:xc(e.type)||"Memo";case Lr:t=e._payload,e=e._init;try{return xc(e(t))}catch{}}return null}function Gx(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xc(t);case 8:return t===Qd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function es(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xx(e){var t=sg(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Cl(e){e._valueTracker||(e._valueTracker=Xx(e))}function ig(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=sg(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function fa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wc(e,t){var n=t.checked;return Ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function dh(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=es(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function og(e,t){t=t.checked,t!=null&&Wd(e,"checked",t,!1)}function Sc(e,t){og(e,t);var n=es(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?bc(e,t.type,n):t.hasOwnProperty("defaultValue")&&bc(e,t.type,es(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function bc(e,t,n){(t!=="number"||fa(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ao=Array.isArray;function ai(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+es(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Cc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return Ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($(92));if(ao(n)){if(1<n.length)throw Error($(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:es(n)}}function lg(e,t){var n=es(t.value),r=es(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function mh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ag(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ag(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var kl,ug=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(kl=kl||document.createElement("div"),kl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=kl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function No(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var mo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jx=["Webkit","ms","Moz","O"];Object.keys(mo).forEach(function(e){Jx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),mo[t]=mo[e]})});function cg(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||mo.hasOwnProperty(e)&&mo[e]?(""+t).trim():t+"px"}function dg(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=cg(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Zx=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ec(e,t){if(t){if(Zx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function Nc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jc=null;function Yd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mc=null,ui=null,ci=null;function ph(e){if(e=el(e)){if(typeof Mc!="function")throw Error($(280));var t=e.stateNode;t&&(t=Xa(t),Mc(e.stateNode,e.type,t))}}function fg(e){ui?ci?ci.push(e):ci=[e]:ui=e}function hg(){if(ui){var e=ui,t=ci;if(ci=ui=null,ph(e),t)for(e=0;e<t.length;e++)ph(t[e])}}function mg(e,t){return e(t)}function pg(){}var Iu=!1;function gg(e,t,n){if(Iu)return e(t,n);Iu=!0;try{return mg(e,t,n)}finally{Iu=!1,(ui!==null||ci!==null)&&(pg(),hg())}}function jo(e,t){var n=e.stateNode;if(n===null)return null;var r=Xa(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,t,typeof n));return n}var Rc=!1;if(hr)try{var Gi={};Object.defineProperty(Gi,"passive",{get:function(){Rc=!0}}),window.addEventListener("test",Gi,Gi),window.removeEventListener("test",Gi,Gi)}catch{Rc=!1}function e0(e,t,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(f){this.onError(f)}}var po=!1,ha=null,ma=!1,Lc=null,t0={onError:function(e){po=!0,ha=e}};function n0(e,t,n,r,s,i,o,l,u){po=!1,ha=null,e0.apply(t0,arguments)}function r0(e,t,n,r,s,i,o,l,u){if(n0.apply(this,arguments),po){if(po){var d=ha;po=!1,ha=null}else throw Error($(198));ma||(ma=!0,Lc=d)}}function zs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function vg(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gh(e){if(zs(e)!==e)throw Error($(188))}function s0(e){var t=e.alternate;if(!t){if(t=zs(e),t===null)throw Error($(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return gh(s),e;if(i===r)return gh(s),t;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:t}function yg(e){return e=s0(e),e!==null?xg(e):null}function xg(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xg(e);if(t!==null)return t;e=e.sibling}return null}var wg=tn.unstable_scheduleCallback,vh=tn.unstable_cancelCallback,i0=tn.unstable_shouldYield,o0=tn.unstable_requestPaint,Xe=tn.unstable_now,l0=tn.unstable_getCurrentPriorityLevel,Gd=tn.unstable_ImmediatePriority,Sg=tn.unstable_UserBlockingPriority,pa=tn.unstable_NormalPriority,a0=tn.unstable_LowPriority,bg=tn.unstable_IdlePriority,Ka=null,Un=null;function u0(e){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(Ka,e,void 0,(e.current.flags&128)===128)}catch{}}var Rn=Math.clz32?Math.clz32:f0,c0=Math.log,d0=Math.LN2;function f0(e){return e>>>=0,e===0?32:31-(c0(e)/d0|0)|0}var El=64,Nl=4194304;function uo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ga(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=uo(l):(i&=o,i!==0&&(r=uo(i)))}else o=n&~s,o!==0?r=uo(o):i!==0&&(r=uo(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Rn(t),s=1<<n,r|=e[n],t&=~s;return r}function h0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Rn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=h0(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function Pc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Cg(){var e=El;return El<<=1,!(El&4194240)&&(El=64),e}function Fu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Jo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Rn(t),e[t]=n}function p0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Rn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Xd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Rn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Me=0;function kg(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Eg,Jd,Ng,jg,Mg,Tc=!1,jl=[],Wr=null,Qr=null,Kr=null,Mo=new Map,Ro=new Map,Tr=[],g0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yh(e,t){switch(e){case"focusin":case"focusout":Wr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":Mo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ro.delete(t.pointerId)}}function Xi(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=el(t),t!==null&&Jd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function v0(e,t,n,r,s){switch(t){case"focusin":return Wr=Xi(Wr,e,t,n,r,s),!0;case"dragenter":return Qr=Xi(Qr,e,t,n,r,s),!0;case"mouseover":return Kr=Xi(Kr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Mo.set(i,Xi(Mo.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ro.set(i,Xi(Ro.get(i)||null,e,t,n,r,s)),!0}return!1}function Rg(e){var t=hs(e.target);if(t!==null){var n=zs(t);if(n!==null){if(t=n.tag,t===13){if(t=vg(n),t!==null){e.blockedOn=t,Mg(e.priority,function(){Ng(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ql(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=_c(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);jc=r,n.target.dispatchEvent(r),jc=null}else return t=el(n),t!==null&&Jd(t),e.blockedOn=n,!1;t.shift()}return!0}function xh(e,t,n){ql(e)&&n.delete(t)}function y0(){Tc=!1,Wr!==null&&ql(Wr)&&(Wr=null),Qr!==null&&ql(Qr)&&(Qr=null),Kr!==null&&ql(Kr)&&(Kr=null),Mo.forEach(xh),Ro.forEach(xh)}function Ji(e,t){e.blockedOn===t&&(e.blockedOn=null,Tc||(Tc=!0,tn.unstable_scheduleCallback(tn.unstable_NormalPriority,y0)))}function Lo(e){function t(s){return Ji(s,e)}if(0<jl.length){Ji(jl[0],e);for(var n=1;n<jl.length;n++){var r=jl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Wr!==null&&Ji(Wr,e),Qr!==null&&Ji(Qr,e),Kr!==null&&Ji(Kr,e),Mo.forEach(t),Ro.forEach(t),n=0;n<Tr.length;n++)r=Tr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Tr.length&&(n=Tr[0],n.blockedOn===null);)Rg(n),n.blockedOn===null&&Tr.shift()}var di=vr.ReactCurrentBatchConfig,va=!0;function x0(e,t,n,r){var s=Me,i=di.transition;di.transition=null;try{Me=1,Zd(e,t,n,r)}finally{Me=s,di.transition=i}}function w0(e,t,n,r){var s=Me,i=di.transition;di.transition=null;try{Me=4,Zd(e,t,n,r)}finally{Me=s,di.transition=i}}function Zd(e,t,n,r){if(va){var s=_c(e,t,n,r);if(s===null)Wu(e,t,r,ya,n),yh(e,r);else if(v0(s,e,t,n,r))r.stopPropagation();else if(yh(e,r),t&4&&-1<g0.indexOf(e)){for(;s!==null;){var i=el(s);if(i!==null&&Eg(i),i=_c(e,t,n,r),i===null&&Wu(e,t,r,ya,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Wu(e,t,r,null,n)}}var ya=null;function _c(e,t,n,r){if(ya=null,e=Yd(r),e=hs(e),e!==null)if(t=zs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=vg(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ya=e,null}function Lg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(l0()){case Gd:return 1;case Sg:return 4;case pa:case a0:return 16;case bg:return 536870912;default:return 16}default:return 16}}var Vr=null,ef=null,Yl=null;function Pg(){if(Yl)return Yl;var e,t=ef,n=t.length,r,s="value"in Vr?Vr.value:Vr.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Yl=s.slice(e,1<r?1-r:void 0)}function Gl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ml(){return!0}function wh(){return!1}function rn(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ml:wh,this.isPropagationStopped=wh,this}return Ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ml)},persist:function(){},isPersistent:Ml}),t}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tf=rn(zi),Zo=Ue({},zi,{view:0,detail:0}),S0=rn(Zo),Ou,Au,Zi,qa=Ue({},Zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zi&&(Zi&&e.type==="mousemove"?(Ou=e.screenX-Zi.screenX,Au=e.screenY-Zi.screenY):Au=Ou=0,Zi=e),Ou)},movementY:function(e){return"movementY"in e?e.movementY:Au}}),Sh=rn(qa),b0=Ue({},qa,{dataTransfer:0}),C0=rn(b0),k0=Ue({},Zo,{relatedTarget:0}),Du=rn(k0),E0=Ue({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),N0=rn(E0),j0=Ue({},zi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),M0=rn(j0),R0=Ue({},zi,{data:0}),bh=rn(R0),L0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},P0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=T0[e])?!!t[e]:!1}function nf(){return _0}var I0=Ue({},Zo,{key:function(e){if(e.key){var t=L0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?P0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nf,charCode:function(e){return e.type==="keypress"?Gl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),F0=rn(I0),O0=Ue({},qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ch=rn(O0),A0=Ue({},Zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nf}),D0=rn(A0),z0=Ue({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),$0=rn(z0),B0=Ue({},qa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),U0=rn(B0),V0=[9,13,27,32],rf=hr&&"CompositionEvent"in window,go=null;hr&&"documentMode"in document&&(go=document.documentMode);var H0=hr&&"TextEvent"in window&&!go,Tg=hr&&(!rf||go&&8<go&&11>=go),kh=" ",Eh=!1;function _g(e,t){switch(e){case"keyup":return V0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ig(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Js=!1;function W0(e,t){switch(e){case"compositionend":return Ig(t);case"keypress":return t.which!==32?null:(Eh=!0,kh);case"textInput":return e=t.data,e===kh&&Eh?null:e;default:return null}}function Q0(e,t){if(Js)return e==="compositionend"||!rf&&_g(e,t)?(e=Pg(),Yl=ef=Vr=null,Js=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tg&&t.locale!=="ko"?null:t.data;default:return null}}var K0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!K0[e.type]:t==="textarea"}function Fg(e,t,n,r){fg(r),t=xa(t,"onChange"),0<t.length&&(n=new tf("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var vo=null,Po=null;function q0(e){Qg(e,0)}function Ya(e){var t=ti(e);if(ig(t))return e}function Y0(e,t){if(e==="change")return t}var Og=!1;if(hr){var zu;if(hr){var $u="oninput"in document;if(!$u){var jh=document.createElement("div");jh.setAttribute("oninput","return;"),$u=typeof jh.oninput=="function"}zu=$u}else zu=!1;Og=zu&&(!document.documentMode||9<document.documentMode)}function Mh(){vo&&(vo.detachEvent("onpropertychange",Ag),Po=vo=null)}function Ag(e){if(e.propertyName==="value"&&Ya(Po)){var t=[];Fg(t,Po,e,Yd(e)),gg(q0,t)}}function G0(e,t,n){e==="focusin"?(Mh(),vo=t,Po=n,vo.attachEvent("onpropertychange",Ag)):e==="focusout"&&Mh()}function X0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ya(Po)}function J0(e,t){if(e==="click")return Ya(t)}function Z0(e,t){if(e==="input"||e==="change")return Ya(t)}function ew(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tn=typeof Object.is=="function"?Object.is:ew;function To(e,t){if(Tn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!pc.call(t,s)||!Tn(e[s],t[s]))return!1}return!0}function Rh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lh(e,t){var n=Rh(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rh(n)}}function Dg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Dg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zg(){for(var e=window,t=fa();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=fa(e.document)}return t}function sf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function tw(e){var t=zg(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Dg(n.ownerDocument.documentElement,n)){if(r!==null&&sf(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Lh(n,i);var o=Lh(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var nw=hr&&"documentMode"in document&&11>=document.documentMode,Zs=null,Ic=null,yo=null,Fc=!1;function Ph(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fc||Zs==null||Zs!==fa(r)||(r=Zs,"selectionStart"in r&&sf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yo&&To(yo,r)||(yo=r,r=xa(Ic,"onSelect"),0<r.length&&(t=new tf("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Zs)))}function Rl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ei={animationend:Rl("Animation","AnimationEnd"),animationiteration:Rl("Animation","AnimationIteration"),animationstart:Rl("Animation","AnimationStart"),transitionend:Rl("Transition","TransitionEnd")},Bu={},$g={};hr&&($g=document.createElement("div").style,"AnimationEvent"in window||(delete ei.animationend.animation,delete ei.animationiteration.animation,delete ei.animationstart.animation),"TransitionEvent"in window||delete ei.transitionend.transition);function Ga(e){if(Bu[e])return Bu[e];if(!ei[e])return e;var t=ei[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $g)return Bu[e]=t[n];return e}var Bg=Ga("animationend"),Ug=Ga("animationiteration"),Vg=Ga("animationstart"),Hg=Ga("transitionend"),Wg=new Map,Th="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(e,t){Wg.set(e,t),Ds(t,[e])}for(var Uu=0;Uu<Th.length;Uu++){var Vu=Th[Uu],rw=Vu.toLowerCase(),sw=Vu[0].toUpperCase()+Vu.slice(1);ns(rw,"on"+sw)}ns(Bg,"onAnimationEnd");ns(Ug,"onAnimationIteration");ns(Vg,"onAnimationStart");ns("dblclick","onDoubleClick");ns("focusin","onFocus");ns("focusout","onBlur");ns(Hg,"onTransitionEnd");Li("onMouseEnter",["mouseout","mouseover"]);Li("onMouseLeave",["mouseout","mouseover"]);Li("onPointerEnter",["pointerout","pointerover"]);Li("onPointerLeave",["pointerout","pointerover"]);Ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ds("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iw=new Set("cancel close invalid load scroll toggle".split(" ").concat(co));function _h(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,r0(r,t,void 0,e),e.currentTarget=null}function Qg(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;_h(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;_h(s,l,d),i=u}}}if(ma)throw e=Lc,ma=!1,Lc=null,e}function Fe(e,t){var n=t[$c];n===void 0&&(n=t[$c]=new Set);var r=e+"__bubble";n.has(r)||(Kg(t,e,2,!1),n.add(r))}function Hu(e,t,n){var r=0;t&&(r|=4),Kg(n,e,r,t)}var Ll="_reactListening"+Math.random().toString(36).slice(2);function _o(e){if(!e[Ll]){e[Ll]=!0,eg.forEach(function(n){n!=="selectionchange"&&(iw.has(n)||Hu(n,!1,e),Hu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ll]||(t[Ll]=!0,Hu("selectionchange",!1,t))}}function Kg(e,t,n,r){switch(Lg(t)){case 1:var s=x0;break;case 4:s=w0;break;default:s=Zd}n=s.bind(null,t,n,e),s=void 0,!Rc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Wu(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=hs(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}gg(function(){var d=i,f=Yd(n),m=[];e:{var g=Wg.get(e);if(g!==void 0){var b=tf,w=e;switch(e){case"keypress":if(Gl(n)===0)break e;case"keydown":case"keyup":b=F0;break;case"focusin":w="focus",b=Du;break;case"focusout":w="blur",b=Du;break;case"beforeblur":case"afterblur":b=Du;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Sh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=C0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=D0;break;case Bg:case Ug:case Vg:b=N0;break;case Hg:b=$0;break;case"scroll":b=S0;break;case"wheel":b=U0;break;case"copy":case"cut":case"paste":b=M0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Ch}var E=(t&4)!==0,L=!E&&e==="scroll",y=E?g!==null?g+"Capture":null:g;E=[];for(var h=d,p;h!==null;){p=h;var v=p.stateNode;if(p.tag===5&&v!==null&&(p=v,y!==null&&(v=jo(h,y),v!=null&&E.push(Io(h,v,p)))),L)break;h=h.return}0<E.length&&(g=new b(g,w,null,n,f),m.push({event:g,listeners:E}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",g&&n!==jc&&(w=n.relatedTarget||n.fromElement)&&(hs(w)||w[mr]))break e;if((b||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,b?(w=n.relatedTarget||n.toElement,b=d,w=w?hs(w):null,w!==null&&(L=zs(w),w!==L||w.tag!==5&&w.tag!==6)&&(w=null)):(b=null,w=d),b!==w)){if(E=Sh,v="onMouseLeave",y="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(E=Ch,v="onPointerLeave",y="onPointerEnter",h="pointer"),L=b==null?g:ti(b),p=w==null?g:ti(w),g=new E(v,h+"leave",b,n,f),g.target=L,g.relatedTarget=p,v=null,hs(f)===d&&(E=new E(y,h+"enter",w,n,f),E.target=p,E.relatedTarget=L,v=E),L=v,b&&w)t:{for(E=b,y=w,h=0,p=E;p;p=Qs(p))h++;for(p=0,v=y;v;v=Qs(v))p++;for(;0<h-p;)E=Qs(E),h--;for(;0<p-h;)y=Qs(y),p--;for(;h--;){if(E===y||y!==null&&E===y.alternate)break t;E=Qs(E),y=Qs(y)}E=null}else E=null;b!==null&&Ih(m,g,b,E,!1),w!==null&&L!==null&&Ih(m,L,w,E,!0)}}e:{if(g=d?ti(d):window,b=g.nodeName&&g.nodeName.toLowerCase(),b==="select"||b==="input"&&g.type==="file")var S=Y0;else if(Nh(g))if(Og)S=Z0;else{S=X0;var R=G0}else(b=g.nodeName)&&b.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(S=J0);if(S&&(S=S(e,d))){Fg(m,S,n,f);break e}R&&R(e,g,d),e==="focusout"&&(R=g._wrapperState)&&R.controlled&&g.type==="number"&&bc(g,"number",g.value)}switch(R=d?ti(d):window,e){case"focusin":(Nh(R)||R.contentEditable==="true")&&(Zs=R,Ic=d,yo=null);break;case"focusout":yo=Ic=Zs=null;break;case"mousedown":Fc=!0;break;case"contextmenu":case"mouseup":case"dragend":Fc=!1,Ph(m,n,f);break;case"selectionchange":if(nw)break;case"keydown":case"keyup":Ph(m,n,f)}var j;if(rf)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Js?_g(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(Tg&&n.locale!=="ko"&&(Js||k!=="onCompositionStart"?k==="onCompositionEnd"&&Js&&(j=Pg()):(Vr=f,ef="value"in Vr?Vr.value:Vr.textContent,Js=!0)),R=xa(d,k),0<R.length&&(k=new bh(k,e,null,n,f),m.push({event:k,listeners:R}),j?k.data=j:(j=Ig(n),j!==null&&(k.data=j)))),(j=H0?W0(e,n):Q0(e,n))&&(d=xa(d,"onBeforeInput"),0<d.length&&(f=new bh("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=j))}Qg(m,t)})}function Io(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xa(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=jo(e,n),i!=null&&r.unshift(Io(e,i,s)),i=jo(e,t),i!=null&&r.push(Io(e,i,s))),e=e.return}return r}function Qs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ih(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=jo(n,i),u!=null&&o.unshift(Io(n,u,l))):s||(u=jo(n,i),u!=null&&o.push(Io(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var ow=/\r\n?/g,lw=/\u0000|\uFFFD/g;function Fh(e){return(typeof e=="string"?e:""+e).replace(ow,`
`).replace(lw,"")}function Pl(e,t,n){if(t=Fh(t),Fh(e)!==t&&n)throw Error($(425))}function wa(){}var Oc=null,Ac=null;function Dc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var zc=typeof setTimeout=="function"?setTimeout:void 0,aw=typeof clearTimeout=="function"?clearTimeout:void 0,Oh=typeof Promise=="function"?Promise:void 0,uw=typeof queueMicrotask=="function"?queueMicrotask:typeof Oh<"u"?function(e){return Oh.resolve(null).then(e).catch(cw)}:zc;function cw(e){setTimeout(function(){throw e})}function Qu(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Lo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Lo(t)}function qr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ah(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var $i=Math.random().toString(36).slice(2),Bn="__reactFiber$"+$i,Fo="__reactProps$"+$i,mr="__reactContainer$"+$i,$c="__reactEvents$"+$i,dw="__reactListeners$"+$i,fw="__reactHandles$"+$i;function hs(e){var t=e[Bn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mr]||n[Bn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ah(e);e!==null;){if(n=e[Bn])return n;e=Ah(e)}return t}e=n,n=e.parentNode}return null}function el(e){return e=e[Bn]||e[mr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ti(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function Xa(e){return e[Fo]||null}var Bc=[],ni=-1;function rs(e){return{current:e}}function Oe(e){0>ni||(e.current=Bc[ni],Bc[ni]=null,ni--)}function _e(e,t){ni++,Bc[ni]=e.current,e.current=t}var ts={},Nt=rs(ts),Wt=rs(!1),Ps=ts;function Pi(e,t){var n=e.type.contextTypes;if(!n)return ts;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Qt(e){return e=e.childContextTypes,e!=null}function Sa(){Oe(Wt),Oe(Nt)}function Dh(e,t,n){if(Nt.current!==ts)throw Error($(168));_e(Nt,t),_e(Wt,n)}function qg(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error($(108,Gx(e)||"Unknown",s));return Ue({},n,r)}function ba(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ts,Ps=Nt.current,_e(Nt,e),_e(Wt,Wt.current),!0}function zh(e,t,n){var r=e.stateNode;if(!r)throw Error($(169));n?(e=qg(e,t,Ps),r.__reactInternalMemoizedMergedChildContext=e,Oe(Wt),Oe(Nt),_e(Nt,e)):Oe(Wt),_e(Wt,n)}var rr=null,Ja=!1,Ku=!1;function Yg(e){rr===null?rr=[e]:rr.push(e)}function hw(e){Ja=!0,Yg(e)}function ss(){if(!Ku&&rr!==null){Ku=!0;var e=0,t=Me;try{var n=rr;for(Me=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}rr=null,Ja=!1}catch(s){throw rr!==null&&(rr=rr.slice(e+1)),wg(Gd,ss),s}finally{Me=t,Ku=!1}}return null}var ri=[],si=0,Ca=null,ka=0,dn=[],fn=0,Ts=null,ar=1,ur="";function ds(e,t){ri[si++]=ka,ri[si++]=Ca,Ca=e,ka=t}function Gg(e,t,n){dn[fn++]=ar,dn[fn++]=ur,dn[fn++]=Ts,Ts=e;var r=ar;e=ur;var s=32-Rn(r)-1;r&=~(1<<s),n+=1;var i=32-Rn(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ar=1<<32-Rn(t)+s|n<<s|r,ur=i+e}else ar=1<<i|n<<s|r,ur=e}function of(e){e.return!==null&&(ds(e,1),Gg(e,1,0))}function lf(e){for(;e===Ca;)Ca=ri[--si],ri[si]=null,ka=ri[--si],ri[si]=null;for(;e===Ts;)Ts=dn[--fn],dn[fn]=null,ur=dn[--fn],dn[fn]=null,ar=dn[--fn],dn[fn]=null}var en=null,Zt=null,De=!1,Mn=null;function Xg(e,t){var n=mn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function $h(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,en=e,Zt=qr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,en=e,Zt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ts!==null?{id:ar,overflow:ur}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=mn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,en=e,Zt=null,!0):!1;default:return!1}}function Uc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Vc(e){if(De){var t=Zt;if(t){var n=t;if(!$h(e,t)){if(Uc(e))throw Error($(418));t=qr(n.nextSibling);var r=en;t&&$h(e,t)?Xg(r,n):(e.flags=e.flags&-4097|2,De=!1,en=e)}}else{if(Uc(e))throw Error($(418));e.flags=e.flags&-4097|2,De=!1,en=e}}}function Bh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;en=e}function Tl(e){if(e!==en)return!1;if(!De)return Bh(e),De=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Dc(e.type,e.memoizedProps)),t&&(t=Zt)){if(Uc(e))throw Jg(),Error($(418));for(;t;)Xg(e,t),t=qr(t.nextSibling)}if(Bh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Zt=qr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Zt=null}}else Zt=en?qr(e.stateNode.nextSibling):null;return!0}function Jg(){for(var e=Zt;e;)e=qr(e.nextSibling)}function Ti(){Zt=en=null,De=!1}function af(e){Mn===null?Mn=[e]:Mn.push(e)}var mw=vr.ReactCurrentBatchConfig;function eo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function _l(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Uh(e){var t=e._init;return t(e._payload)}function Zg(e){function t(y,h){if(e){var p=y.deletions;p===null?(y.deletions=[h],y.flags|=16):p.push(h)}}function n(y,h){if(!e)return null;for(;h!==null;)t(y,h),h=h.sibling;return null}function r(y,h){for(y=new Map;h!==null;)h.key!==null?y.set(h.key,h):y.set(h.index,h),h=h.sibling;return y}function s(y,h){return y=Jr(y,h),y.index=0,y.sibling=null,y}function i(y,h,p){return y.index=p,e?(p=y.alternate,p!==null?(p=p.index,p<h?(y.flags|=2,h):p):(y.flags|=2,h)):(y.flags|=1048576,h)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,h,p,v){return h===null||h.tag!==6?(h=ec(p,y.mode,v),h.return=y,h):(h=s(h,p),h.return=y,h)}function u(y,h,p,v){var S=p.type;return S===Xs?f(y,h,p.props.children,v,p.key):h!==null&&(h.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Lr&&Uh(S)===h.type)?(v=s(h,p.props),v.ref=eo(y,h,p),v.return=y,v):(v=ra(p.type,p.key,p.props,null,y.mode,v),v.ref=eo(y,h,p),v.return=y,v)}function d(y,h,p,v){return h===null||h.tag!==4||h.stateNode.containerInfo!==p.containerInfo||h.stateNode.implementation!==p.implementation?(h=tc(p,y.mode,v),h.return=y,h):(h=s(h,p.children||[]),h.return=y,h)}function f(y,h,p,v,S){return h===null||h.tag!==7?(h=Ls(p,y.mode,v,S),h.return=y,h):(h=s(h,p),h.return=y,h)}function m(y,h,p){if(typeof h=="string"&&h!==""||typeof h=="number")return h=ec(""+h,y.mode,p),h.return=y,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case bl:return p=ra(h.type,h.key,h.props,null,y.mode,p),p.ref=eo(y,null,h),p.return=y,p;case Gs:return h=tc(h,y.mode,p),h.return=y,h;case Lr:var v=h._init;return m(y,v(h._payload),p)}if(ao(h)||Yi(h))return h=Ls(h,y.mode,p,null),h.return=y,h;_l(y,h)}return null}function g(y,h,p,v){var S=h!==null?h.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return S!==null?null:l(y,h,""+p,v);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case bl:return p.key===S?u(y,h,p,v):null;case Gs:return p.key===S?d(y,h,p,v):null;case Lr:return S=p._init,g(y,h,S(p._payload),v)}if(ao(p)||Yi(p))return S!==null?null:f(y,h,p,v,null);_l(y,p)}return null}function b(y,h,p,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return y=y.get(p)||null,l(h,y,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case bl:return y=y.get(v.key===null?p:v.key)||null,u(h,y,v,S);case Gs:return y=y.get(v.key===null?p:v.key)||null,d(h,y,v,S);case Lr:var R=v._init;return b(y,h,p,R(v._payload),S)}if(ao(v)||Yi(v))return y=y.get(p)||null,f(h,y,v,S,null);_l(h,v)}return null}function w(y,h,p,v){for(var S=null,R=null,j=h,k=h=0,P=null;j!==null&&k<p.length;k++){j.index>k?(P=j,j=null):P=j.sibling;var N=g(y,j,p[k],v);if(N===null){j===null&&(j=P);break}e&&j&&N.alternate===null&&t(y,j),h=i(N,h,k),R===null?S=N:R.sibling=N,R=N,j=P}if(k===p.length)return n(y,j),De&&ds(y,k),S;if(j===null){for(;k<p.length;k++)j=m(y,p[k],v),j!==null&&(h=i(j,h,k),R===null?S=j:R.sibling=j,R=j);return De&&ds(y,k),S}for(j=r(y,j);k<p.length;k++)P=b(j,y,k,p[k],v),P!==null&&(e&&P.alternate!==null&&j.delete(P.key===null?k:P.key),h=i(P,h,k),R===null?S=P:R.sibling=P,R=P);return e&&j.forEach(function(F){return t(y,F)}),De&&ds(y,k),S}function E(y,h,p,v){var S=Yi(p);if(typeof S!="function")throw Error($(150));if(p=S.call(p),p==null)throw Error($(151));for(var R=S=null,j=h,k=h=0,P=null,N=p.next();j!==null&&!N.done;k++,N=p.next()){j.index>k?(P=j,j=null):P=j.sibling;var F=g(y,j,N.value,v);if(F===null){j===null&&(j=P);break}e&&j&&F.alternate===null&&t(y,j),h=i(F,h,k),R===null?S=F:R.sibling=F,R=F,j=P}if(N.done)return n(y,j),De&&ds(y,k),S;if(j===null){for(;!N.done;k++,N=p.next())N=m(y,N.value,v),N!==null&&(h=i(N,h,k),R===null?S=N:R.sibling=N,R=N);return De&&ds(y,k),S}for(j=r(y,j);!N.done;k++,N=p.next())N=b(j,y,k,N.value,v),N!==null&&(e&&N.alternate!==null&&j.delete(N.key===null?k:N.key),h=i(N,h,k),R===null?S=N:R.sibling=N,R=N);return e&&j.forEach(function(B){return t(y,B)}),De&&ds(y,k),S}function L(y,h,p,v){if(typeof p=="object"&&p!==null&&p.type===Xs&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case bl:e:{for(var S=p.key,R=h;R!==null;){if(R.key===S){if(S=p.type,S===Xs){if(R.tag===7){n(y,R.sibling),h=s(R,p.props.children),h.return=y,y=h;break e}}else if(R.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Lr&&Uh(S)===R.type){n(y,R.sibling),h=s(R,p.props),h.ref=eo(y,R,p),h.return=y,y=h;break e}n(y,R);break}else t(y,R);R=R.sibling}p.type===Xs?(h=Ls(p.props.children,y.mode,v,p.key),h.return=y,y=h):(v=ra(p.type,p.key,p.props,null,y.mode,v),v.ref=eo(y,h,p),v.return=y,y=v)}return o(y);case Gs:e:{for(R=p.key;h!==null;){if(h.key===R)if(h.tag===4&&h.stateNode.containerInfo===p.containerInfo&&h.stateNode.implementation===p.implementation){n(y,h.sibling),h=s(h,p.children||[]),h.return=y,y=h;break e}else{n(y,h);break}else t(y,h);h=h.sibling}h=tc(p,y.mode,v),h.return=y,y=h}return o(y);case Lr:return R=p._init,L(y,h,R(p._payload),v)}if(ao(p))return w(y,h,p,v);if(Yi(p))return E(y,h,p,v);_l(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,h!==null&&h.tag===6?(n(y,h.sibling),h=s(h,p),h.return=y,y=h):(n(y,h),h=ec(p,y.mode,v),h.return=y,y=h),o(y)):n(y,h)}return L}var _i=Zg(!0),ev=Zg(!1),Ea=rs(null),Na=null,ii=null,uf=null;function cf(){uf=ii=Na=null}function df(e){var t=Ea.current;Oe(Ea),e._currentValue=t}function Hc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function fi(e,t){Na=e,uf=ii=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ht=!0),e.firstContext=null)}function gn(e){var t=e._currentValue;if(uf!==e)if(e={context:e,memoizedValue:t,next:null},ii===null){if(Na===null)throw Error($(308));ii=e,Na.dependencies={lanes:0,firstContext:e}}else ii=ii.next=e;return t}var ms=null;function ff(e){ms===null?ms=[e]:ms.push(e)}function tv(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ff(t)):(n.next=s.next,s.next=n),t.interleaved=n,pr(e,r)}function pr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Pr=!1;function hf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,pr(e,n)}return s=r.interleaved,s===null?(t.next=t,ff(r)):(t.next=s.next,s.next=t),r.interleaved=t,pr(e,n)}function Xl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xd(e,n)}}function Vh(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ja(e,t,n,r){var s=e.updateQueue;Pr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=d=u=null,l=i;do{var g=l.lane,b=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,E=l;switch(g=t,b=n,E.tag){case 1:if(w=E.payload,typeof w=="function"){m=w.call(b,m,g);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=E.payload,g=typeof w=="function"?w.call(b,m,g):w,g==null)break e;m=Ue({},m,g);break e;case 2:Pr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else b={eventTime:b,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=b,u=m):f=f.next=b,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Is|=o,e.lanes=o,e.memoizedState=m}}function Hh(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var tl={},Vn=rs(tl),Oo=rs(tl),Ao=rs(tl);function ps(e){if(e===tl)throw Error($(174));return e}function mf(e,t){switch(_e(Ao,t),_e(Oo,e),_e(Vn,tl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:kc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=kc(t,e)}Oe(Vn),_e(Vn,t)}function Ii(){Oe(Vn),Oe(Oo),Oe(Ao)}function rv(e){ps(Ao.current);var t=ps(Vn.current),n=kc(t,e.type);t!==n&&(_e(Oo,e),_e(Vn,n))}function pf(e){Oo.current===e&&(Oe(Vn),Oe(Oo))}var $e=rs(0);function Ma(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qu=[];function gf(){for(var e=0;e<qu.length;e++)qu[e]._workInProgressVersionPrimary=null;qu.length=0}var Jl=vr.ReactCurrentDispatcher,Yu=vr.ReactCurrentBatchConfig,_s=0,Be=null,nt=null,dt=null,Ra=!1,xo=!1,Do=0,pw=0;function Ct(){throw Error($(321))}function vf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Tn(e[n],t[n]))return!1;return!0}function yf(e,t,n,r,s,i){if(_s=i,Be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Jl.current=e===null||e.memoizedState===null?xw:ww,e=n(r,s),xo){i=0;do{if(xo=!1,Do=0,25<=i)throw Error($(301));i+=1,dt=nt=null,t.updateQueue=null,Jl.current=Sw,e=n(r,s)}while(xo)}if(Jl.current=La,t=nt!==null&&nt.next!==null,_s=0,dt=nt=Be=null,Ra=!1,t)throw Error($(300));return e}function xf(){var e=Do!==0;return Do=0,e}function An(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Be.memoizedState=dt=e:dt=dt.next=e,dt}function vn(){if(nt===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=nt.next;var t=dt===null?Be.memoizedState:dt.next;if(t!==null)dt=t,nt=e;else{if(e===null)throw Error($(310));nt=e,e={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},dt===null?Be.memoizedState=dt=e:dt=dt.next=e}return dt}function zo(e,t){return typeof t=="function"?t(e):t}function Gu(e){var t=vn(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=nt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var f=d.lane;if((_s&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Be.lanes|=f,Is|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,Tn(r,t.memoizedState)||(Ht=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Be.lanes|=i,Is|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Xu(e){var t=vn(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Tn(i,t.memoizedState)||(Ht=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function sv(){}function iv(e,t){var n=Be,r=vn(),s=t(),i=!Tn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ht=!0),r=r.queue,wf(av.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,$o(9,lv.bind(null,n,r,s,t),void 0,null),ft===null)throw Error($(349));_s&30||ov(n,t,s)}return s}function ov(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Be.updateQueue,t===null?(t={lastEffect:null,stores:null},Be.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function lv(e,t,n,r){t.value=n,t.getSnapshot=r,uv(t)&&cv(e)}function av(e,t,n){return n(function(){uv(t)&&cv(e)})}function uv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Tn(e,n)}catch{return!0}}function cv(e){var t=pr(e,1);t!==null&&Ln(t,e,1,-1)}function Wh(e){var t=An();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:e},t.queue=e,e=e.dispatch=yw.bind(null,Be,e),[t.memoizedState,e]}function $o(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Be.updateQueue,t===null?(t={lastEffect:null,stores:null},Be.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function dv(){return vn().memoizedState}function Zl(e,t,n,r){var s=An();Be.flags|=e,s.memoizedState=$o(1|t,n,void 0,r===void 0?null:r)}function Za(e,t,n,r){var s=vn();r=r===void 0?null:r;var i=void 0;if(nt!==null){var o=nt.memoizedState;if(i=o.destroy,r!==null&&vf(r,o.deps)){s.memoizedState=$o(t,n,i,r);return}}Be.flags|=e,s.memoizedState=$o(1|t,n,i,r)}function Qh(e,t){return Zl(8390656,8,e,t)}function wf(e,t){return Za(2048,8,e,t)}function fv(e,t){return Za(4,2,e,t)}function hv(e,t){return Za(4,4,e,t)}function mv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pv(e,t,n){return n=n!=null?n.concat([e]):null,Za(4,4,mv.bind(null,t,e),n)}function Sf(){}function gv(e,t){var n=vn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vf(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function vv(e,t){var n=vn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vf(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function yv(e,t,n){return _s&21?(Tn(n,t)||(n=Cg(),Be.lanes|=n,Is|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ht=!0),e.memoizedState=n)}function gw(e,t){var n=Me;Me=n!==0&&4>n?n:4,e(!0);var r=Yu.transition;Yu.transition={};try{e(!1),t()}finally{Me=n,Yu.transition=r}}function xv(){return vn().memoizedState}function vw(e,t,n){var r=Xr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wv(e))Sv(t,n);else if(n=tv(e,t,n,r),n!==null){var s=_t();Ln(n,e,r,s),bv(n,t,r)}}function yw(e,t,n){var r=Xr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wv(e))Sv(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Tn(l,o)){var u=t.interleaved;u===null?(s.next=s,ff(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=tv(e,t,s,r),n!==null&&(s=_t(),Ln(n,e,r,s),bv(n,t,r))}}function wv(e){var t=e.alternate;return e===Be||t!==null&&t===Be}function Sv(e,t){xo=Ra=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function bv(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xd(e,n)}}var La={readContext:gn,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},xw={readContext:gn,useCallback:function(e,t){return An().memoizedState=[e,t===void 0?null:t],e},useContext:gn,useEffect:Qh,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Zl(4194308,4,mv.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zl(4,2,e,t)},useMemo:function(e,t){var n=An();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=An();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=vw.bind(null,Be,e),[r.memoizedState,e]},useRef:function(e){var t=An();return e={current:e},t.memoizedState=e},useState:Wh,useDebugValue:Sf,useDeferredValue:function(e){return An().memoizedState=e},useTransition:function(){var e=Wh(!1),t=e[0];return e=gw.bind(null,e[1]),An().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Be,s=An();if(De){if(n===void 0)throw Error($(407));n=n()}else{if(n=t(),ft===null)throw Error($(349));_s&30||ov(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Qh(av.bind(null,r,i,e),[e]),r.flags|=2048,$o(9,lv.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=An(),t=ft.identifierPrefix;if(De){var n=ur,r=ar;n=(r&~(1<<32-Rn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Do++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=pw++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ww={readContext:gn,useCallback:gv,useContext:gn,useEffect:wf,useImperativeHandle:pv,useInsertionEffect:fv,useLayoutEffect:hv,useMemo:vv,useReducer:Gu,useRef:dv,useState:function(){return Gu(zo)},useDebugValue:Sf,useDeferredValue:function(e){var t=vn();return yv(t,nt.memoizedState,e)},useTransition:function(){var e=Gu(zo)[0],t=vn().memoizedState;return[e,t]},useMutableSource:sv,useSyncExternalStore:iv,useId:xv,unstable_isNewReconciler:!1},Sw={readContext:gn,useCallback:gv,useContext:gn,useEffect:wf,useImperativeHandle:pv,useInsertionEffect:fv,useLayoutEffect:hv,useMemo:vv,useReducer:Xu,useRef:dv,useState:function(){return Xu(zo)},useDebugValue:Sf,useDeferredValue:function(e){var t=vn();return nt===null?t.memoizedState=e:yv(t,nt.memoizedState,e)},useTransition:function(){var e=Xu(zo)[0],t=vn().memoizedState;return[e,t]},useMutableSource:sv,useSyncExternalStore:iv,useId:xv,unstable_isNewReconciler:!1};function Cn(e,t){if(e&&e.defaultProps){t=Ue({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Wc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ue({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var eu={isMounted:function(e){return(e=e._reactInternals)?zs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=_t(),s=Xr(e),i=cr(r,s);i.payload=t,n!=null&&(i.callback=n),t=Yr(e,i,s),t!==null&&(Ln(t,e,s,r),Xl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=_t(),s=Xr(e),i=cr(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Yr(e,i,s),t!==null&&(Ln(t,e,s,r),Xl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_t(),r=Xr(e),s=cr(n,r);s.tag=2,t!=null&&(s.callback=t),t=Yr(e,s,r),t!==null&&(Ln(t,e,r,n),Xl(t,e,r))}};function Kh(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!To(n,r)||!To(s,i):!0}function Cv(e,t,n){var r=!1,s=ts,i=t.contextType;return typeof i=="object"&&i!==null?i=gn(i):(s=Qt(t)?Ps:Nt.current,r=t.contextTypes,i=(r=r!=null)?Pi(e,s):ts),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=eu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function qh(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&eu.enqueueReplaceState(t,t.state,null)}function Qc(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},hf(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=gn(i):(i=Qt(t)?Ps:Nt.current,s.context=Pi(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Wc(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&eu.enqueueReplaceState(s,s.state,null),ja(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Fi(e,t){try{var n="",r=t;do n+=Yx(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Ju(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Kc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var bw=typeof WeakMap=="function"?WeakMap:Map;function kv(e,t,n){n=cr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ta||(Ta=!0,rd=r),Kc(e,t)},n}function Ev(e,t,n){n=cr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Kc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Kc(e,t),typeof r!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Yh(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new bw;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Ow.bind(null,e,t,n),t.then(e,e))}function Gh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Xh(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=cr(-1,1),t.tag=2,Yr(n,t,1))),n.lanes|=1),e)}var Cw=vr.ReactCurrentOwner,Ht=!1;function Pt(e,t,n,r){t.child=e===null?ev(t,null,n,r):_i(t,e.child,n,r)}function Jh(e,t,n,r,s){n=n.render;var i=t.ref;return fi(t,s),r=yf(e,t,n,r,i,s),n=xf(),e!==null&&!Ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,gr(e,t,s)):(De&&n&&of(t),t.flags|=1,Pt(e,t,r,s),t.child)}function Zh(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Rf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Nv(e,t,i,r,s)):(e=ra(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:To,n(o,r)&&e.ref===t.ref)return gr(e,t,s)}return t.flags|=1,e=Jr(i,r),e.ref=t.ref,e.return=t,t.child=e}function Nv(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(To(i,r)&&e.ref===t.ref)if(Ht=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Ht=!0);else return t.lanes=e.lanes,gr(e,t,s)}return qc(e,t,n,r,s)}function jv(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(li,Jt),Jt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(li,Jt),Jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_e(li,Jt),Jt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,_e(li,Jt),Jt|=r;return Pt(e,t,s,n),t.child}function Mv(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function qc(e,t,n,r,s){var i=Qt(n)?Ps:Nt.current;return i=Pi(t,i),fi(t,s),n=yf(e,t,n,r,i,s),r=xf(),e!==null&&!Ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,gr(e,t,s)):(De&&r&&of(t),t.flags|=1,Pt(e,t,n,s),t.child)}function em(e,t,n,r,s){if(Qt(n)){var i=!0;ba(t)}else i=!1;if(fi(t,s),t.stateNode===null)ea(e,t),Cv(t,n,r),Qc(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=gn(d):(d=Qt(n)?Ps:Nt.current,d=Pi(t,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&qh(t,o,r,d),Pr=!1;var g=t.memoizedState;o.state=g,ja(t,r,o,s),u=t.memoizedState,l!==r||g!==u||Wt.current||Pr?(typeof f=="function"&&(Wc(t,n,f,r),u=t.memoizedState),(l=Pr||Kh(t,n,l,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,nv(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Cn(t.type,l),o.props=d,m=t.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=gn(u):(u=Qt(n)?Ps:Nt.current,u=Pi(t,u));var b=n.getDerivedStateFromProps;(f=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&qh(t,o,r,u),Pr=!1,g=t.memoizedState,o.state=g,ja(t,r,o,s);var w=t.memoizedState;l!==m||g!==w||Wt.current||Pr?(typeof b=="function"&&(Wc(t,n,b,r),w=t.memoizedState),(d=Pr||Kh(t,n,d,r,g,w,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Yc(e,t,n,r,i,s)}function Yc(e,t,n,r,s,i){Mv(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&zh(t,n,!1),gr(e,t,i);r=t.stateNode,Cw.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=_i(t,e.child,null,i),t.child=_i(t,null,l,i)):Pt(e,t,l,i),t.memoizedState=r.state,s&&zh(t,n,!0),t.child}function Rv(e){var t=e.stateNode;t.pendingContext?Dh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Dh(e,t.context,!1),mf(e,t.containerInfo)}function tm(e,t,n,r,s){return Ti(),af(s),t.flags|=256,Pt(e,t,n,r),t.child}var Gc={dehydrated:null,treeContext:null,retryLane:0};function Xc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lv(e,t,n){var r=t.pendingProps,s=$e.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),_e($e,s&1),e===null)return Vc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ru(o,r,0,null),e=Ls(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Xc(n),t.memoizedState=Gc,e):bf(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return kw(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Jr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Jr(l,i):(i=Ls(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Xc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Gc,r}return i=e.child,e=i.sibling,r=Jr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function bf(e,t){return t=ru({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Il(e,t,n,r){return r!==null&&af(r),_i(t,e.child,null,n),e=bf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kw(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Ju(Error($(422))),Il(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=ru({mode:"visible",children:r.children},s,0,null),i=Ls(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&_i(t,e.child,null,o),t.child.memoizedState=Xc(o),t.memoizedState=Gc,i);if(!(t.mode&1))return Il(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=Ju(i,r,void 0),Il(e,t,o,r)}if(l=(o&e.childLanes)!==0,Ht||l){if(r=ft,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,pr(e,s),Ln(r,e,s,-1))}return Mf(),r=Ju(Error($(421))),Il(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Aw.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Zt=qr(s.nextSibling),en=t,De=!0,Mn=null,e!==null&&(dn[fn++]=ar,dn[fn++]=ur,dn[fn++]=Ts,ar=e.id,ur=e.overflow,Ts=t),t=bf(t,r.children),t.flags|=4096,t)}function nm(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Hc(e.return,t,n)}function Zu(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Pv(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Pt(e,t,r.children,n),r=$e.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nm(e,n,t);else if(e.tag===19)nm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_e($e,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ma(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Zu(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ma(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Zu(t,!0,n,null,i);break;case"together":Zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ea(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Is|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,n=Jr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Jr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ew(e,t,n){switch(t.tag){case 3:Rv(t),Ti();break;case 5:rv(t);break;case 1:Qt(t.type)&&ba(t);break;case 4:mf(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;_e(Ea,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(_e($e,$e.current&1),t.flags|=128,null):n&t.child.childLanes?Lv(e,t,n):(_e($e,$e.current&1),e=gr(e,t,n),e!==null?e.sibling:null);_e($e,$e.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Pv(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e($e,$e.current),r)break;return null;case 22:case 23:return t.lanes=0,jv(e,t,n)}return gr(e,t,n)}var Tv,Jc,_v,Iv;Tv=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jc=function(){};_v=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ps(Vn.current);var i=null;switch(n){case"input":s=wc(e,s),r=wc(e,r),i=[];break;case"select":s=Ue({},s,{value:void 0}),r=Ue({},r,{value:void 0}),i=[];break;case"textarea":s=Cc(e,s),r=Cc(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=wa)}Ec(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Eo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Eo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Fe("scroll",e),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Iv=function(e,t,n,r){n!==r&&(t.flags|=4)};function to(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Nw(e,t,n){var r=t.pendingProps;switch(lf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return Qt(t.type)&&Sa(),kt(t),null;case 3:return r=t.stateNode,Ii(),Oe(Wt),Oe(Nt),gf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Tl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mn!==null&&(od(Mn),Mn=null))),Jc(e,t),kt(t),null;case 5:pf(t);var s=ps(Ao.current);if(n=t.type,e!==null&&t.stateNode!=null)_v(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error($(166));return kt(t),null}if(e=ps(Vn.current),Tl(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Bn]=t,r[Fo]=i,e=(t.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(s=0;s<co.length;s++)Fe(co[s],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":dh(r,i),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Fe("invalid",r);break;case"textarea":hh(r,i),Fe("invalid",r)}Ec(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Pl(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Pl(r.textContent,l,e),s=["children",""+l]):Eo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Fe("scroll",r)}switch(n){case"input":Cl(r),fh(r,i,!0);break;case"textarea":Cl(r),mh(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=wa)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ag(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Bn]=t,e[Fo]=r,Tv(e,t,!1,!1),t.stateNode=e;e:{switch(o=Nc(n,r),n){case"dialog":Fe("cancel",e),Fe("close",e),s=r;break;case"iframe":case"object":case"embed":Fe("load",e),s=r;break;case"video":case"audio":for(s=0;s<co.length;s++)Fe(co[s],e);s=r;break;case"source":Fe("error",e),s=r;break;case"img":case"image":case"link":Fe("error",e),Fe("load",e),s=r;break;case"details":Fe("toggle",e),s=r;break;case"input":dh(e,r),s=wc(e,r),Fe("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ue({},r,{value:void 0}),Fe("invalid",e);break;case"textarea":hh(e,r),s=Cc(e,r),Fe("invalid",e);break;default:s=r}Ec(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?dg(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ug(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&No(e,u):typeof u=="number"&&No(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Eo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Fe("scroll",e):u!=null&&Wd(e,i,u,o))}switch(n){case"input":Cl(e),fh(e,r,!1);break;case"textarea":Cl(e),mh(e);break;case"option":r.value!=null&&e.setAttribute("value",""+es(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ai(e,!!r.multiple,i,!1):r.defaultValue!=null&&ai(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=wa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kt(t),null;case 6:if(e&&t.stateNode!=null)Iv(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error($(166));if(n=ps(Ao.current),ps(Vn.current),Tl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Bn]=t,(i=r.nodeValue!==n)&&(e=en,e!==null))switch(e.tag){case 3:Pl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Pl(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bn]=t,t.stateNode=r}return kt(t),null;case 13:if(Oe($e),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(De&&Zt!==null&&t.mode&1&&!(t.flags&128))Jg(),Ti(),t.flags|=98560,i=!1;else if(i=Tl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error($(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Bn]=t}else Ti(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kt(t),i=!1}else Mn!==null&&(od(Mn),Mn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||$e.current&1?st===0&&(st=3):Mf())),t.updateQueue!==null&&(t.flags|=4),kt(t),null);case 4:return Ii(),Jc(e,t),e===null&&_o(t.stateNode.containerInfo),kt(t),null;case 10:return df(t.type._context),kt(t),null;case 17:return Qt(t.type)&&Sa(),kt(t),null;case 19:if(Oe($e),i=t.memoizedState,i===null)return kt(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)to(i,!1);else{if(st!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ma(e),o!==null){for(t.flags|=128,to(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _e($e,$e.current&1|2),t.child}e=e.sibling}i.tail!==null&&Xe()>Oi&&(t.flags|=128,r=!0,to(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ma(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),to(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!De)return kt(t),null}else 2*Xe()-i.renderingStartTime>Oi&&n!==1073741824&&(t.flags|=128,r=!0,to(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Xe(),t.sibling=null,n=$e.current,_e($e,r?n&1|2:n&1),t):(kt(t),null);case 22:case 23:return jf(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Jt&1073741824&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function jw(e,t){switch(lf(t),t.tag){case 1:return Qt(t.type)&&Sa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ii(),Oe(Wt),Oe(Nt),gf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return pf(t),null;case 13:if(Oe($e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));Ti()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Oe($e),null;case 4:return Ii(),null;case 10:return df(t.type._context),null;case 22:case 23:return jf(),null;case 24:return null;default:return null}}var Fl=!1,Et=!1,Mw=typeof WeakSet=="function"?WeakSet:Set,Y=null;function oi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(e,t,r)}else n.current=null}function Zc(e,t,n){try{n()}catch(r){We(e,t,r)}}var rm=!1;function Rw(e,t){if(Oc=va,e=zg(),sf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,m=e,g=null;t:for(;;){for(var b;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(b=m.firstChild)!==null;)g=m,m=b;for(;;){if(m===e)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(u=o),(b=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=b}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ac={focusedElem:e,selectionRange:n},va=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var E=w.memoizedProps,L=w.memoizedState,y=t.stateNode,h=y.getSnapshotBeforeUpdate(t.elementType===t.type?E:Cn(t.type,E),L);y.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(v){We(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return w=rm,rm=!1,w}function wo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Zc(t,n,i)}s=s.next}while(s!==r)}}function tu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ed(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Fv(e){var t=e.alternate;t!==null&&(e.alternate=null,Fv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bn],delete t[Fo],delete t[$c],delete t[dw],delete t[fw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ov(e){return e.tag===5||e.tag===3||e.tag===4}function sm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ov(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function td(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=wa));else if(r!==4&&(e=e.child,e!==null))for(td(e,t,n),e=e.sibling;e!==null;)td(e,t,n),e=e.sibling}function nd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(nd(e,t,n),e=e.sibling;e!==null;)nd(e,t,n),e=e.sibling}var pt=null,jn=!1;function jr(e,t,n){for(n=n.child;n!==null;)Av(e,t,n),n=n.sibling}function Av(e,t,n){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(Ka,n)}catch{}switch(n.tag){case 5:Et||oi(n,t);case 6:var r=pt,s=jn;pt=null,jr(e,t,n),pt=r,jn=s,pt!==null&&(jn?(e=pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(jn?(e=pt,n=n.stateNode,e.nodeType===8?Qu(e.parentNode,n):e.nodeType===1&&Qu(e,n),Lo(e)):Qu(pt,n.stateNode));break;case 4:r=pt,s=jn,pt=n.stateNode.containerInfo,jn=!0,jr(e,t,n),pt=r,jn=s;break;case 0:case 11:case 14:case 15:if(!Et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Zc(n,t,o),s=s.next}while(s!==r)}jr(e,t,n);break;case 1:if(!Et&&(oi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){We(n,t,l)}jr(e,t,n);break;case 21:jr(e,t,n);break;case 22:n.mode&1?(Et=(r=Et)||n.memoizedState!==null,jr(e,t,n),Et=r):jr(e,t,n);break;default:jr(e,t,n)}}function im(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Mw),t.forEach(function(r){var s=Dw.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Sn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:pt=l.stateNode,jn=!1;break e;case 3:pt=l.stateNode.containerInfo,jn=!0;break e;case 4:pt=l.stateNode.containerInfo,jn=!0;break e}l=l.return}if(pt===null)throw Error($(160));Av(i,o,s),pt=null,jn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){We(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Dv(t,e),t=t.sibling}function Dv(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Sn(t,e),On(e),r&4){try{wo(3,e,e.return),tu(3,e)}catch(E){We(e,e.return,E)}try{wo(5,e,e.return)}catch(E){We(e,e.return,E)}}break;case 1:Sn(t,e),On(e),r&512&&n!==null&&oi(n,n.return);break;case 5:if(Sn(t,e),On(e),r&512&&n!==null&&oi(n,n.return),e.flags&32){var s=e.stateNode;try{No(s,"")}catch(E){We(e,e.return,E)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&og(s,i),Nc(l,o);var d=Nc(l,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?dg(s,m):f==="dangerouslySetInnerHTML"?ug(s,m):f==="children"?No(s,m):Wd(s,f,m,d)}switch(l){case"input":Sc(s,i);break;case"textarea":lg(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?ai(s,!!i.multiple,b,!1):g!==!!i.multiple&&(i.defaultValue!=null?ai(s,!!i.multiple,i.defaultValue,!0):ai(s,!!i.multiple,i.multiple?[]:"",!1))}s[Fo]=i}catch(E){We(e,e.return,E)}}break;case 6:if(Sn(t,e),On(e),r&4){if(e.stateNode===null)throw Error($(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(E){We(e,e.return,E)}}break;case 3:if(Sn(t,e),On(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Lo(t.containerInfo)}catch(E){We(e,e.return,E)}break;case 4:Sn(t,e),On(e);break;case 13:Sn(t,e),On(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ef=Xe())),r&4&&im(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Et=(d=Et)||f,Sn(t,e),Et=d):Sn(t,e),On(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(Y=e,f=e.child;f!==null;){for(m=Y=f;Y!==null;){switch(g=Y,b=g.child,g.tag){case 0:case 11:case 14:case 15:wo(4,g,g.return);break;case 1:oi(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(E){We(r,n,E)}}break;case 5:oi(g,g.return);break;case 22:if(g.memoizedState!==null){lm(m);continue}}b!==null?(b.return=g,Y=b):lm(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=cg("display",o))}catch(E){We(e,e.return,E)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(E){We(e,e.return,E)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Sn(t,e),On(e),r&4&&im(e);break;case 21:break;default:Sn(t,e),On(e)}}function On(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ov(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(No(s,""),r.flags&=-33);var i=sm(e);nd(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=sm(e);td(e,l,o);break;default:throw Error($(161))}}catch(u){We(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Lw(e,t,n){Y=e,zv(e)}function zv(e,t,n){for(var r=(e.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fl;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Et;l=Fl;var d=Et;if(Fl=o,(Et=u)&&!d)for(Y=s;Y!==null;)o=Y,u=o.child,o.tag===22&&o.memoizedState!==null?am(s):u!==null?(u.return=o,Y=u):am(s);for(;i!==null;)Y=i,zv(i),i=i.sibling;Y=s,Fl=l,Et=d}om(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):om(e)}}function om(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Et||tu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Et)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Cn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Hh(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Hh(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Lo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Et||t.flags&512&&ed(t)}catch(g){We(t,t.return,g)}}if(t===e){Y=null;break}if(n=t.sibling,n!==null){n.return=t.return,Y=n;break}Y=t.return}}function lm(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Y=n;break}Y=t.return}}function am(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{tu(4,t)}catch(u){We(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){We(t,s,u)}}var i=t.return;try{ed(t)}catch(u){We(t,i,u)}break;case 5:var o=t.return;try{ed(t)}catch(u){We(t,o,u)}}}catch(u){We(t,t.return,u)}if(t===e){Y=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Y=l;break}Y=t.return}}var Pw=Math.ceil,Pa=vr.ReactCurrentDispatcher,Cf=vr.ReactCurrentOwner,pn=vr.ReactCurrentBatchConfig,Ne=0,ft=null,et=null,gt=0,Jt=0,li=rs(0),st=0,Bo=null,Is=0,nu=0,kf=0,So=null,Vt=null,Ef=0,Oi=1/0,nr=null,Ta=!1,rd=null,Gr=null,Ol=!1,Hr=null,_a=0,bo=0,sd=null,ta=-1,na=0;function _t(){return Ne&6?Xe():ta!==-1?ta:ta=Xe()}function Xr(e){return e.mode&1?Ne&2&&gt!==0?gt&-gt:mw.transition!==null?(na===0&&(na=Cg()),na):(e=Me,e!==0||(e=window.event,e=e===void 0?16:Lg(e.type)),e):1}function Ln(e,t,n,r){if(50<bo)throw bo=0,sd=null,Error($(185));Jo(e,n,r),(!(Ne&2)||e!==ft)&&(e===ft&&(!(Ne&2)&&(nu|=n),st===4&&_r(e,gt)),Kt(e,r),n===1&&Ne===0&&!(t.mode&1)&&(Oi=Xe()+500,Ja&&ss()))}function Kt(e,t){var n=e.callbackNode;m0(e,t);var r=ga(e,e===ft?gt:0);if(r===0)n!==null&&vh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&vh(n),t===1)e.tag===0?hw(um.bind(null,e)):Yg(um.bind(null,e)),uw(function(){!(Ne&6)&&ss()}),n=null;else{switch(kg(r)){case 1:n=Gd;break;case 4:n=Sg;break;case 16:n=pa;break;case 536870912:n=bg;break;default:n=pa}n=Kv(n,$v.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $v(e,t){if(ta=-1,na=0,Ne&6)throw Error($(327));var n=e.callbackNode;if(hi()&&e.callbackNode!==n)return null;var r=ga(e,e===ft?gt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ia(e,r);else{t=r;var s=Ne;Ne|=2;var i=Uv();(ft!==e||gt!==t)&&(nr=null,Oi=Xe()+500,Rs(e,t));do try{Iw();break}catch(l){Bv(e,l)}while(!0);cf(),Pa.current=i,Ne=s,et!==null?t=0:(ft=null,gt=0,t=st)}if(t!==0){if(t===2&&(s=Pc(e),s!==0&&(r=s,t=id(e,s))),t===1)throw n=Bo,Rs(e,0),_r(e,r),Kt(e,Xe()),n;if(t===6)_r(e,r);else{if(s=e.current.alternate,!(r&30)&&!Tw(s)&&(t=Ia(e,r),t===2&&(i=Pc(e),i!==0&&(r=i,t=id(e,i))),t===1))throw n=Bo,Rs(e,0),_r(e,r),Kt(e,Xe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error($(345));case 2:fs(e,Vt,nr);break;case 3:if(_r(e,r),(r&130023424)===r&&(t=Ef+500-Xe(),10<t)){if(ga(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){_t(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=zc(fs.bind(null,e,Vt,nr),t);break}fs(e,Vt,nr);break;case 4:if(_r(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Rn(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Pw(r/1960))-r,10<r){e.timeoutHandle=zc(fs.bind(null,e,Vt,nr),r);break}fs(e,Vt,nr);break;case 5:fs(e,Vt,nr);break;default:throw Error($(329))}}}return Kt(e,Xe()),e.callbackNode===n?$v.bind(null,e):null}function id(e,t){var n=So;return e.current.memoizedState.isDehydrated&&(Rs(e,t).flags|=256),e=Ia(e,t),e!==2&&(t=Vt,Vt=n,t!==null&&od(t)),e}function od(e){Vt===null?Vt=e:Vt.push.apply(Vt,e)}function Tw(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Tn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _r(e,t){for(t&=~kf,t&=~nu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Rn(t),r=1<<n;e[n]=-1,t&=~r}}function um(e){if(Ne&6)throw Error($(327));hi();var t=ga(e,0);if(!(t&1))return Kt(e,Xe()),null;var n=Ia(e,t);if(e.tag!==0&&n===2){var r=Pc(e);r!==0&&(t=r,n=id(e,r))}if(n===1)throw n=Bo,Rs(e,0),_r(e,t),Kt(e,Xe()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fs(e,Vt,nr),Kt(e,Xe()),null}function Nf(e,t){var n=Ne;Ne|=1;try{return e(t)}finally{Ne=n,Ne===0&&(Oi=Xe()+500,Ja&&ss())}}function Fs(e){Hr!==null&&Hr.tag===0&&!(Ne&6)&&hi();var t=Ne;Ne|=1;var n=pn.transition,r=Me;try{if(pn.transition=null,Me=1,e)return e()}finally{Me=r,pn.transition=n,Ne=t,!(Ne&6)&&ss()}}function jf(){Jt=li.current,Oe(li)}function Rs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,aw(n)),et!==null)for(n=et.return;n!==null;){var r=n;switch(lf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Sa();break;case 3:Ii(),Oe(Wt),Oe(Nt),gf();break;case 5:pf(r);break;case 4:Ii();break;case 13:Oe($e);break;case 19:Oe($e);break;case 10:df(r.type._context);break;case 22:case 23:jf()}n=n.return}if(ft=e,et=e=Jr(e.current,null),gt=Jt=t,st=0,Bo=null,kf=nu=Is=0,Vt=So=null,ms!==null){for(t=0;t<ms.length;t++)if(n=ms[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ms=null}return e}function Bv(e,t){do{var n=et;try{if(cf(),Jl.current=La,Ra){for(var r=Be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ra=!1}if(_s=0,dt=nt=Be=null,xo=!1,Do=0,Cf.current=null,n===null||n.return===null){st=1,Bo=t,et=null;break}e:{var i=e,o=n.return,l=n,u=t;if(t=gt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var b=Gh(o);if(b!==null){b.flags&=-257,Xh(b,o,l,i,t),b.mode&1&&Yh(i,d,t),t=b,u=d;var w=t.updateQueue;if(w===null){var E=new Set;E.add(u),t.updateQueue=E}else w.add(u);break e}else{if(!(t&1)){Yh(i,d,t),Mf();break e}u=Error($(426))}}else if(De&&l.mode&1){var L=Gh(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),Xh(L,o,l,i,t),af(Fi(u,l));break e}}i=u=Fi(u,l),st!==4&&(st=2),So===null?So=[i]:So.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=kv(i,u,t);Vh(i,y);break e;case 1:l=u;var h=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof h.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Gr===null||!Gr.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var v=Ev(i,l,t);Vh(i,v);break e}}i=i.return}while(i!==null)}Hv(n)}catch(S){t=S,et===n&&n!==null&&(et=n=n.return);continue}break}while(!0)}function Uv(){var e=Pa.current;return Pa.current=La,e===null?La:e}function Mf(){(st===0||st===3||st===2)&&(st=4),ft===null||!(Is&268435455)&&!(nu&268435455)||_r(ft,gt)}function Ia(e,t){var n=Ne;Ne|=2;var r=Uv();(ft!==e||gt!==t)&&(nr=null,Rs(e,t));do try{_w();break}catch(s){Bv(e,s)}while(!0);if(cf(),Ne=n,Pa.current=r,et!==null)throw Error($(261));return ft=null,gt=0,st}function _w(){for(;et!==null;)Vv(et)}function Iw(){for(;et!==null&&!i0();)Vv(et)}function Vv(e){var t=Qv(e.alternate,e,Jt);e.memoizedProps=e.pendingProps,t===null?Hv(e):et=t,Cf.current=null}function Hv(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=jw(n,t),n!==null){n.flags&=32767,et=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{st=6,et=null;return}}else if(n=Nw(n,t,Jt),n!==null){et=n;return}if(t=t.sibling,t!==null){et=t;return}et=t=e}while(t!==null);st===0&&(st=5)}function fs(e,t,n){var r=Me,s=pn.transition;try{pn.transition=null,Me=1,Fw(e,t,n,r)}finally{pn.transition=s,Me=r}return null}function Fw(e,t,n,r){do hi();while(Hr!==null);if(Ne&6)throw Error($(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(p0(e,i),e===ft&&(et=ft=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ol||(Ol=!0,Kv(pa,function(){return hi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=pn.transition,pn.transition=null;var o=Me;Me=1;var l=Ne;Ne|=4,Cf.current=null,Rw(e,n),Dv(n,e),tw(Ac),va=!!Oc,Ac=Oc=null,e.current=n,Lw(n),o0(),Ne=l,Me=o,pn.transition=i}else e.current=n;if(Ol&&(Ol=!1,Hr=e,_a=s),i=e.pendingLanes,i===0&&(Gr=null),u0(n.stateNode),Kt(e,Xe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ta)throw Ta=!1,e=rd,rd=null,e;return _a&1&&e.tag!==0&&hi(),i=e.pendingLanes,i&1?e===sd?bo++:(bo=0,sd=e):bo=0,ss(),null}function hi(){if(Hr!==null){var e=kg(_a),t=pn.transition,n=Me;try{if(pn.transition=null,Me=16>e?16:e,Hr===null)var r=!1;else{if(e=Hr,Hr=null,_a=0,Ne&6)throw Error($(331));var s=Ne;for(Ne|=4,Y=e.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(Y=d;Y!==null;){var f=Y;switch(f.tag){case 0:case 11:case 15:wo(8,f,i)}var m=f.child;if(m!==null)m.return=f,Y=m;else for(;Y!==null;){f=Y;var g=f.sibling,b=f.return;if(Fv(f),f===d){Y=null;break}if(g!==null){g.return=b,Y=g;break}Y=b}}}var w=i.alternate;if(w!==null){var E=w.child;if(E!==null){w.child=null;do{var L=E.sibling;E.sibling=null,E=L}while(E!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:wo(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Y=y;break e}Y=i.return}}var h=e.current;for(Y=h;Y!==null;){o=Y;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,Y=p;else e:for(o=h;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:tu(9,l)}}catch(S){We(l,l.return,S)}if(l===o){Y=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,Y=v;break e}Y=l.return}}if(Ne=s,ss(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(Ka,e)}catch{}r=!0}return r}finally{Me=n,pn.transition=t}}return!1}function cm(e,t,n){t=Fi(n,t),t=kv(e,t,1),e=Yr(e,t,1),t=_t(),e!==null&&(Jo(e,1,t),Kt(e,t))}function We(e,t,n){if(e.tag===3)cm(e,e,n);else for(;t!==null;){if(t.tag===3){cm(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gr===null||!Gr.has(r))){e=Fi(n,e),e=Ev(t,e,1),t=Yr(t,e,1),e=_t(),t!==null&&(Jo(t,1,e),Kt(t,e));break}}t=t.return}}function Ow(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=_t(),e.pingedLanes|=e.suspendedLanes&n,ft===e&&(gt&n)===n&&(st===4||st===3&&(gt&130023424)===gt&&500>Xe()-Ef?Rs(e,0):kf|=n),Kt(e,t)}function Wv(e,t){t===0&&(e.mode&1?(t=Nl,Nl<<=1,!(Nl&130023424)&&(Nl=4194304)):t=1);var n=_t();e=pr(e,t),e!==null&&(Jo(e,t,n),Kt(e,n))}function Aw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Wv(e,n)}function Dw(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(t),Wv(e,n)}var Qv;Qv=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Wt.current)Ht=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ht=!1,Ew(e,t,n);Ht=!!(e.flags&131072)}else Ht=!1,De&&t.flags&1048576&&Gg(t,ka,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ea(e,t),e=t.pendingProps;var s=Pi(t,Nt.current);fi(t,n),s=yf(null,t,r,e,s,n);var i=xf();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Qt(r)?(i=!0,ba(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,hf(t),s.updater=eu,t.stateNode=s,s._reactInternals=t,Qc(t,r,e,n),t=Yc(null,t,r,!0,i,n)):(t.tag=0,De&&i&&of(t),Pt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ea(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=$w(r),e=Cn(r,e),s){case 0:t=qc(null,t,r,e,n);break e;case 1:t=em(null,t,r,e,n);break e;case 11:t=Jh(null,t,r,e,n);break e;case 14:t=Zh(null,t,r,Cn(r.type,e),n);break e}throw Error($(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Cn(r,s),qc(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Cn(r,s),em(e,t,r,s,n);case 3:e:{if(Rv(t),e===null)throw Error($(387));r=t.pendingProps,i=t.memoizedState,s=i.element,nv(e,t),ja(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Fi(Error($(423)),t),t=tm(e,t,r,n,s);break e}else if(r!==s){s=Fi(Error($(424)),t),t=tm(e,t,r,n,s);break e}else for(Zt=qr(t.stateNode.containerInfo.firstChild),en=t,De=!0,Mn=null,n=ev(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ti(),r===s){t=gr(e,t,n);break e}Pt(e,t,r,n)}t=t.child}return t;case 5:return rv(t),e===null&&Vc(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Dc(r,s)?o=null:i!==null&&Dc(r,i)&&(t.flags|=32),Mv(e,t),Pt(e,t,o,n),t.child;case 6:return e===null&&Vc(t),null;case 13:return Lv(e,t,n);case 4:return mf(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=_i(t,null,r,n):Pt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Cn(r,s),Jh(e,t,r,s,n);case 7:return Pt(e,t,t.pendingProps,n),t.child;case 8:return Pt(e,t,t.pendingProps.children,n),t.child;case 12:return Pt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,_e(Ea,r._currentValue),r._currentValue=o,i!==null)if(Tn(i.value,o)){if(i.children===s.children&&!Wt.current){t=gr(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=cr(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Hc(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Hc(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Pt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,fi(t,n),s=gn(s),r=r(s),t.flags|=1,Pt(e,t,r,n),t.child;case 14:return r=t.type,s=Cn(r,t.pendingProps),s=Cn(r.type,s),Zh(e,t,r,s,n);case 15:return Nv(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Cn(r,s),ea(e,t),t.tag=1,Qt(r)?(e=!0,ba(t)):e=!1,fi(t,n),Cv(t,r,s),Qc(t,r,s,n),Yc(null,t,r,!0,e,n);case 19:return Pv(e,t,n);case 22:return jv(e,t,n)}throw Error($(156,t.tag))};function Kv(e,t){return wg(e,t)}function zw(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(e,t,n,r){return new zw(e,t,n,r)}function Rf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $w(e){if(typeof e=="function")return Rf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Kd)return 11;if(e===qd)return 14}return 2}function Jr(e,t){var n=e.alternate;return n===null?(n=mn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ra(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")Rf(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Xs:return Ls(n.children,s,i,t);case Qd:o=8,s|=8;break;case gc:return e=mn(12,n,t,s|2),e.elementType=gc,e.lanes=i,e;case vc:return e=mn(13,n,t,s),e.elementType=vc,e.lanes=i,e;case yc:return e=mn(19,n,t,s),e.elementType=yc,e.lanes=i,e;case rg:return ru(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tg:o=10;break e;case ng:o=9;break e;case Kd:o=11;break e;case qd:o=14;break e;case Lr:o=16,r=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=mn(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Ls(e,t,n,r){return e=mn(7,e,r,t),e.lanes=n,e}function ru(e,t,n,r){return e=mn(22,e,r,t),e.elementType=rg,e.lanes=n,e.stateNode={isHidden:!1},e}function ec(e,t,n){return e=mn(6,e,null,t),e.lanes=n,e}function tc(e,t,n){return t=mn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bw(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fu(0),this.expirationTimes=Fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lf(e,t,n,r,s,i,o,l,u){return e=new Bw(e,t,n,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=mn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hf(i),e}function Uw(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gs,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function qv(e){if(!e)return ts;e=e._reactInternals;e:{if(zs(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Qt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(Qt(n))return qg(e,n,t)}return t}function Yv(e,t,n,r,s,i,o,l,u){return e=Lf(n,r,!0,e,s,i,o,l,u),e.context=qv(null),n=e.current,r=_t(),s=Xr(n),i=cr(r,s),i.callback=t??null,Yr(n,i,s),e.current.lanes=s,Jo(e,s,r),Kt(e,r),e}function su(e,t,n,r){var s=t.current,i=_t(),o=Xr(s);return n=qv(n),t.context===null?t.context=n:t.pendingContext=n,t=cr(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Yr(s,t,o),e!==null&&(Ln(e,s,o,i),Xl(e,s,o)),o}function Fa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Pf(e,t){dm(e,t),(e=e.alternate)&&dm(e,t)}function Vw(){return null}var Gv=typeof reportError=="function"?reportError:function(e){console.error(e)};function Tf(e){this._internalRoot=e}iu.prototype.render=Tf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));su(e,t,null,null)};iu.prototype.unmount=Tf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fs(function(){su(null,e,null,null)}),t[mr]=null}};function iu(e){this._internalRoot=e}iu.prototype.unstable_scheduleHydration=function(e){if(e){var t=jg();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Tr.length&&t!==0&&t<Tr[n].priority;n++);Tr.splice(n,0,e),n===0&&Rg(e)}};function _f(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ou(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fm(){}function Hw(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Fa(o);i.call(d)}}var o=Yv(t,r,e,0,null,!1,!1,"",fm);return e._reactRootContainer=o,e[mr]=o.current,_o(e.nodeType===8?e.parentNode:e),Fs(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Fa(u);l.call(d)}}var u=Lf(e,0,!1,null,null,!1,!1,"",fm);return e._reactRootContainer=u,e[mr]=u.current,_o(e.nodeType===8?e.parentNode:e),Fs(function(){su(t,u,n,r)}),u}function lu(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Fa(o);l.call(u)}}su(t,o,e,s)}else o=Hw(n,t,e,s,r);return Fa(o)}Eg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=uo(t.pendingLanes);n!==0&&(Xd(t,n|1),Kt(t,Xe()),!(Ne&6)&&(Oi=Xe()+500,ss()))}break;case 13:Fs(function(){var r=pr(e,1);if(r!==null){var s=_t();Ln(r,e,1,s)}}),Pf(e,1)}};Jd=function(e){if(e.tag===13){var t=pr(e,134217728);if(t!==null){var n=_t();Ln(t,e,134217728,n)}Pf(e,134217728)}};Ng=function(e){if(e.tag===13){var t=Xr(e),n=pr(e,t);if(n!==null){var r=_t();Ln(n,e,t,r)}Pf(e,t)}};jg=function(){return Me};Mg=function(e,t){var n=Me;try{return Me=e,t()}finally{Me=n}};Mc=function(e,t,n){switch(t){case"input":if(Sc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Xa(r);if(!s)throw Error($(90));ig(r),Sc(r,s)}}}break;case"textarea":lg(e,n);break;case"select":t=n.value,t!=null&&ai(e,!!n.multiple,t,!1)}};mg=Nf;pg=Fs;var Ww={usingClientEntryPoint:!1,Events:[el,ti,Xa,fg,hg,Nf]},no={findFiberByHostInstance:hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qw={bundleType:no.bundleType,version:no.version,rendererPackageName:no.rendererPackageName,rendererConfig:no.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yg(e),e===null?null:e.stateNode},findFiberByHostInstance:no.findFiberByHostInstance||Vw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Al.isDisabled&&Al.supportsFiber)try{Ka=Al.inject(Qw),Un=Al}catch{}}nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ww;nn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_f(t))throw Error($(200));return Uw(e,t,null,n)};nn.createRoot=function(e,t){if(!_f(e))throw Error($(299));var n=!1,r="",s=Gv;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Lf(e,1,!1,null,null,n,!1,r,s),e[mr]=t.current,_o(e.nodeType===8?e.parentNode:e),new Tf(t)};nn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=yg(t),e=e===null?null:e.stateNode,e};nn.flushSync=function(e){return Fs(e)};nn.hydrate=function(e,t,n){if(!ou(t))throw Error($(200));return lu(null,e,t,!0,n)};nn.hydrateRoot=function(e,t,n){if(!_f(e))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Gv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Yv(t,null,e,1,n??null,s,!1,i,o),e[mr]=t.current,_o(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new iu(t)};nn.render=function(e,t,n){if(!ou(t))throw Error($(200));return lu(null,e,t,!1,n)};nn.unmountComponentAtNode=function(e){if(!ou(e))throw Error($(40));return e._reactRootContainer?(Fs(function(){lu(null,null,e,!1,function(){e._reactRootContainer=null,e[mr]=null})}),!0):!1};nn.unstable_batchedUpdates=Nf;nn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ou(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return lu(e,t,n,!1,r)};nn.version="18.3.1-next-f1338f8080-20240426";function Xv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xv)}catch(e){console.error(e)}}Xv(),Xp.exports=nn;var If=Xp.exports,Jv,hm=If;Jv=hm.createRoot,hm.hydrateRoot;var Bi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Kw={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ir,Dd,Rp,qw=(Rp=class{constructor(){oe(this,Ir,Kw);oe(this,Dd,!1)}setTimeoutProvider(e){W(this,Ir,e)}setTimeout(e,t){return C(this,Ir).setTimeout(e,t)}clearTimeout(e){C(this,Ir).clearTimeout(e)}setInterval(e,t){return C(this,Ir).setInterval(e,t)}clearInterval(e){C(this,Ir).clearInterval(e)}},Ir=new WeakMap,Dd=new WeakMap,Rp),gs=new qw;function Yw(e){setTimeout(e,0)}var Os=typeof window>"u"||"Deno"in globalThis;function Tt(){}function Gw(e,t){return typeof e=="function"?e(t):e}function ld(e){return typeof e=="number"&&e>=0&&e!==1/0}function Zv(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Zr(e,t){return typeof e=="function"?e(t):e}function cn(e,t){return typeof e=="function"?e(t):e}function mm(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==Ff(o,t.options))return!1}else if(!Uo(t.queryKey,o))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function pm(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(As(t.options.mutationKey)!==As(i))return!1}else if(!Uo(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Ff(e,t){return((t==null?void 0:t.queryKeyHashFn)||As)(e)}function As(e){return JSON.stringify(e,(t,n)=>ad(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Uo(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Uo(e[n],t[n])):!1}var Xw=Object.prototype.hasOwnProperty;function ey(e,t){if(e===t)return e;const n=gm(e)&&gm(t);if(!n&&!(ad(e)&&ad(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let u=0;for(let d=0;d<o;d++){const f=n?d:i[d],m=e[f],g=t[f];if(m===g){l[f]=m,(n?d<s:Xw.call(e,f))&&u++;continue}if(m===null||g===null||typeof m!="object"||typeof g!="object"){l[f]=g;continue}const b=ey(m,g);l[f]=b,b===m&&u++}return s===o&&u===s?e:l}function Oa(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function gm(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ad(e){if(!vm(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!vm(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function vm(e){return Object.prototype.toString.call(e)==="[object Object]"}function Jw(e){return new Promise(t=>{gs.setTimeout(t,e)})}function ud(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?ey(e,t):t}function Zw(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function e1(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Of=Symbol();function ty(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Of?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function ny(e,t){return typeof e=="function"?e(...t):!!e}function t1(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var ws,Fr,yi,Lp,n1=(Lp=class extends Bi{constructor(){super();oe(this,ws);oe(this,Fr);oe(this,yi);W(this,yi,t=>{if(!Os&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){C(this,Fr)||this.setEventListener(C(this,yi))}onUnsubscribe(){var t;this.hasListeners()||((t=C(this,Fr))==null||t.call(this),W(this,Fr,void 0))}setEventListener(t){var n;W(this,yi,t),(n=C(this,Fr))==null||n.call(this),W(this,Fr,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){C(this,ws)!==t&&(W(this,ws,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof C(this,ws)=="boolean"?C(this,ws):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ws=new WeakMap,Fr=new WeakMap,yi=new WeakMap,Lp),Af=new n1;function cd(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var r1=Yw;function s1(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=r1;const i=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;t++;try{u=l()}finally{t--,t||o()}return u},batchCalls:l=>(...u)=>{i(()=>{l(...u)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var rt=s1(),xi,Or,wi,Pp,i1=(Pp=class extends Bi{constructor(){super();oe(this,xi,!0);oe(this,Or);oe(this,wi);W(this,wi,t=>{if(!Os&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){C(this,Or)||this.setEventListener(C(this,wi))}onUnsubscribe(){var t;this.hasListeners()||((t=C(this,Or))==null||t.call(this),W(this,Or,void 0))}setEventListener(t){var n;W(this,wi,t),(n=C(this,Or))==null||n.call(this),W(this,Or,t(this.setOnline.bind(this)))}setOnline(t){C(this,xi)!==t&&(W(this,xi,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return C(this,xi)}},xi=new WeakMap,Or=new WeakMap,wi=new WeakMap,Pp),Aa=new i1;function o1(e){return Math.min(1e3*2**e,3e4)}function ry(e){return(e??"online")==="online"?Aa.isOnline():!0}var dd=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function sy(e){let t=!1,n=0,r;const s=cd(),i=()=>s.status!=="pending",o=E=>{var L;if(!i()){const y=new dd(E);g(y),(L=e.onCancel)==null||L.call(e,y)}},l=()=>{t=!0},u=()=>{t=!1},d=()=>Af.isFocused()&&(e.networkMode==="always"||Aa.isOnline())&&e.canRun(),f=()=>ry(e.networkMode)&&e.canRun(),m=E=>{i()||(r==null||r(),s.resolve(E))},g=E=>{i()||(r==null||r(),s.reject(E))},b=()=>new Promise(E=>{var L;r=y=>{(i()||d())&&E(y)},(L=e.onPause)==null||L.call(e)}).then(()=>{var E;r=void 0,i()||(E=e.onContinue)==null||E.call(e)}),w=()=>{if(i())return;let E;const L=n===0?e.initialPromise:void 0;try{E=L??e.fn()}catch(y){E=Promise.reject(y)}Promise.resolve(E).then(m).catch(y=>{var R;if(i())return;const h=e.retry??(Os?0:3),p=e.retryDelay??o1,v=typeof p=="function"?p(n,y):p,S=h===!0||typeof h=="number"&&n<h||typeof h=="function"&&h(n,y);if(t||!S){g(y);return}n++,(R=e.onFail)==null||R.call(e,n,y),Jw(v).then(()=>d()?void 0:b()).then(()=>{t?g(y):w()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:u,canStart:f,start:()=>(f()?w():b().then(w),s)}}var Ss,Tp,iy=(Tp=class{constructor(){oe(this,Ss)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ld(this.gcTime)&&W(this,Ss,gs.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Os?1/0:5*60*1e3))}clearGcTimeout(){C(this,Ss)&&(gs.clearTimeout(C(this,Ss)),W(this,Ss,void 0))}},Ss=new WeakMap,Tp),bs,Si,un,Cs,ct,Qo,ks,En,tr,_p,l1=(_p=class extends iy{constructor(t){super();oe(this,En);oe(this,bs);oe(this,Si);oe(this,un);oe(this,Cs);oe(this,ct);oe(this,Qo);oe(this,ks);W(this,ks,!1),W(this,Qo,t.defaultOptions),this.setOptions(t.options),this.observers=[],W(this,Cs,t.client),W(this,un,C(this,Cs).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,W(this,bs,xm(this.options)),this.state=t.state??C(this,bs),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=C(this,ct))==null?void 0:t.promise}setOptions(t){if(this.options={...C(this,Qo),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=xm(this.options);n.data!==void 0&&(this.setState(ym(n.data,n.dataUpdatedAt)),W(this,bs,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&C(this,un).remove(this)}setData(t,n){const r=ud(this.state.data,t,this.options);return ve(this,En,tr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ve(this,En,tr).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=C(this,ct))==null?void 0:r.promise;return(s=C(this,ct))==null||s.cancel(t),n?n.then(Tt).catch(Tt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(C(this,bs))}isActive(){return this.observers.some(t=>cn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Of||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Zr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Zv(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=C(this,ct))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=C(this,ct))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),C(this,un).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(C(this,ct)&&(C(this,ks)?C(this,ct).cancel({revert:!0}):C(this,ct).cancelRetry()),this.scheduleGc()),C(this,un).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ve(this,En,tr).call(this,{type:"invalidate"})}async fetch(t,n){var u,d,f,m,g,b,w,E,L,y,h,p;if(this.state.fetchStatus!=="idle"&&((u=C(this,ct))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(C(this,ct))return C(this,ct).continueRetry(),C(this,ct).promise}if(t&&this.setOptions(t),!this.options.queryFn){const v=this.observers.find(S=>S.options.queryFn);v&&this.setOptions(v.options)}const r=new AbortController,s=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(W(this,ks,!0),r.signal)})},i=()=>{const v=ty(this.options,n),R=(()=>{const j={client:C(this,Cs),queryKey:this.queryKey,meta:this.meta};return s(j),j})();return W(this,ks,!1),this.options.persister?this.options.persister(v,R,this):v(R)},l=(()=>{const v={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:C(this,Cs),state:this.state,fetchFn:i};return s(v),v})();(d=this.options.behavior)==null||d.onFetch(l,this),W(this,Si,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&ve(this,En,tr).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),W(this,ct,sy({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:v=>{v instanceof dd&&v.revert&&this.setState({...C(this,Si),fetchStatus:"idle"}),r.abort()},onFail:(v,S)=>{ve(this,En,tr).call(this,{type:"failed",failureCount:v,error:S})},onPause:()=>{ve(this,En,tr).call(this,{type:"pause"})},onContinue:()=>{ve(this,En,tr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const v=await C(this,ct).start();if(v===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(v),(b=(g=C(this,un).config).onSuccess)==null||b.call(g,v,this),(E=(w=C(this,un).config).onSettled)==null||E.call(w,v,this.state.error,this),v}catch(v){if(v instanceof dd){if(v.silent)return C(this,ct).promise;if(v.revert){if(this.state.data===void 0)throw v;return this.state.data}}throw ve(this,En,tr).call(this,{type:"error",error:v}),(y=(L=C(this,un).config).onError)==null||y.call(L,v,this),(p=(h=C(this,un).config).onSettled)==null||p.call(h,this.state.data,v,this),v}finally{this.scheduleGc()}}},bs=new WeakMap,Si=new WeakMap,un=new WeakMap,Cs=new WeakMap,ct=new WeakMap,Qo=new WeakMap,ks=new WeakMap,En=new WeakSet,tr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...oy(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...ym(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return W(this,Si,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),rt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),C(this,un).notify({query:this,type:"updated",action:t})})},_p);function oy(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ry(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ym(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function xm(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Bt,Ce,Ko,Rt,Es,bi,sr,Ar,qo,Ci,ki,Ns,js,Dr,Ei,je,fo,fd,hd,md,pd,gd,vd,yd,ly,Ip,a1=(Ip=class extends Bi{constructor(t,n){super();oe(this,je);oe(this,Bt);oe(this,Ce);oe(this,Ko);oe(this,Rt);oe(this,Es);oe(this,bi);oe(this,sr);oe(this,Ar);oe(this,qo);oe(this,Ci);oe(this,ki);oe(this,Ns);oe(this,js);oe(this,Dr);oe(this,Ei,new Set);this.options=n,W(this,Bt,t),W(this,Ar,null),W(this,sr,cd()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(C(this,Ce).addObserver(this),wm(C(this,Ce),this.options)?ve(this,je,fo).call(this):this.updateResult(),ve(this,je,pd).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return xd(C(this,Ce),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return xd(C(this,Ce),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ve(this,je,gd).call(this),ve(this,je,vd).call(this),C(this,Ce).removeObserver(this)}setOptions(t){const n=this.options,r=C(this,Ce);if(this.options=C(this,Bt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof cn(this.options.enabled,C(this,Ce))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ve(this,je,yd).call(this),C(this,Ce).setOptions(this.options),n._defaulted&&!Oa(this.options,n)&&C(this,Bt).getQueryCache().notify({type:"observerOptionsUpdated",query:C(this,Ce),observer:this});const s=this.hasListeners();s&&Sm(C(this,Ce),r,this.options,n)&&ve(this,je,fo).call(this),this.updateResult(),s&&(C(this,Ce)!==r||cn(this.options.enabled,C(this,Ce))!==cn(n.enabled,C(this,Ce))||Zr(this.options.staleTime,C(this,Ce))!==Zr(n.staleTime,C(this,Ce)))&&ve(this,je,fd).call(this);const i=ve(this,je,hd).call(this);s&&(C(this,Ce)!==r||cn(this.options.enabled,C(this,Ce))!==cn(n.enabled,C(this,Ce))||i!==C(this,Dr))&&ve(this,je,md).call(this,i)}getOptimisticResult(t){const n=C(this,Bt).getQueryCache().build(C(this,Bt),t),r=this.createResult(n,t);return c1(this,r)&&(W(this,Rt,r),W(this,bi,this.options),W(this,Es,C(this,Ce).state)),r}getCurrentResult(){return C(this,Rt)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&C(this,sr).status==="pending"&&C(this,sr).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){C(this,Ei).add(t)}getCurrentQuery(){return C(this,Ce)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=C(this,Bt).defaultQueryOptions(t),r=C(this,Bt).getQueryCache().build(C(this,Bt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ve(this,je,fo).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),C(this,Rt)))}createResult(t,n){var P;const r=C(this,Ce),s=this.options,i=C(this,Rt),o=C(this,Es),l=C(this,bi),d=t!==r?t.state:C(this,Ko),{state:f}=t;let m={...f},g=!1,b;if(n._optimisticResults){const N=this.hasListeners(),F=!N&&wm(t,n),B=N&&Sm(t,r,n,s);(F||B)&&(m={...m,...oy(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:w,errorUpdatedAt:E,status:L}=m;b=m.data;let y=!1;if(n.placeholderData!==void 0&&b===void 0&&L==="pending"){let N;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(N=i.data,y=!0):N=typeof n.placeholderData=="function"?n.placeholderData((P=C(this,ki))==null?void 0:P.state.data,C(this,ki)):n.placeholderData,N!==void 0&&(L="success",b=ud(i==null?void 0:i.data,N,n),g=!0)}if(n.select&&b!==void 0&&!y)if(i&&b===(o==null?void 0:o.data)&&n.select===C(this,qo))b=C(this,Ci);else try{W(this,qo,n.select),b=n.select(b),b=ud(i==null?void 0:i.data,b,n),W(this,Ci,b),W(this,Ar,null)}catch(N){W(this,Ar,N)}C(this,Ar)&&(w=C(this,Ar),b=C(this,Ci),E=Date.now(),L="error");const h=m.fetchStatus==="fetching",p=L==="pending",v=L==="error",S=p&&h,R=b!==void 0,k={status:L,fetchStatus:m.fetchStatus,isPending:p,isSuccess:L==="success",isError:v,isInitialLoading:S,isLoading:S,data:b,dataUpdatedAt:m.dataUpdatedAt,error:w,errorUpdatedAt:E,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:h,isRefetching:h&&!p,isLoadingError:v&&!R,isPaused:m.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:v&&R,isStale:Df(t,n),refetch:this.refetch,promise:C(this,sr),isEnabled:cn(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const N=A=>{k.status==="error"?A.reject(k.error):k.data!==void 0&&A.resolve(k.data)},F=()=>{const A=W(this,sr,k.promise=cd());N(A)},B=C(this,sr);switch(B.status){case"pending":t.queryHash===r.queryHash&&N(B);break;case"fulfilled":(k.status==="error"||k.data!==B.value)&&F();break;case"rejected":(k.status!=="error"||k.error!==B.reason)&&F();break}}return k}updateResult(){const t=C(this,Rt),n=this.createResult(C(this,Ce),this.options);if(W(this,Es,C(this,Ce).state),W(this,bi,this.options),C(this,Es).data!==void 0&&W(this,ki,C(this,Ce)),Oa(n,t))return;W(this,Rt,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!C(this,Ei).size)return!0;const o=new Set(i??C(this,Ei));return this.options.throwOnError&&o.add("error"),Object.keys(C(this,Rt)).some(l=>{const u=l;return C(this,Rt)[u]!==t[u]&&o.has(u)})};ve(this,je,ly).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ve(this,je,pd).call(this)}},Bt=new WeakMap,Ce=new WeakMap,Ko=new WeakMap,Rt=new WeakMap,Es=new WeakMap,bi=new WeakMap,sr=new WeakMap,Ar=new WeakMap,qo=new WeakMap,Ci=new WeakMap,ki=new WeakMap,Ns=new WeakMap,js=new WeakMap,Dr=new WeakMap,Ei=new WeakMap,je=new WeakSet,fo=function(t){ve(this,je,yd).call(this);let n=C(this,Ce).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Tt)),n},fd=function(){ve(this,je,gd).call(this);const t=Zr(this.options.staleTime,C(this,Ce));if(Os||C(this,Rt).isStale||!ld(t))return;const r=Zv(C(this,Rt).dataUpdatedAt,t)+1;W(this,Ns,gs.setTimeout(()=>{C(this,Rt).isStale||this.updateResult()},r))},hd=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(C(this,Ce)):this.options.refetchInterval)??!1},md=function(t){ve(this,je,vd).call(this),W(this,Dr,t),!(Os||cn(this.options.enabled,C(this,Ce))===!1||!ld(C(this,Dr))||C(this,Dr)===0)&&W(this,js,gs.setInterval(()=>{(this.options.refetchIntervalInBackground||Af.isFocused())&&ve(this,je,fo).call(this)},C(this,Dr)))},pd=function(){ve(this,je,fd).call(this),ve(this,je,md).call(this,ve(this,je,hd).call(this))},gd=function(){C(this,Ns)&&(gs.clearTimeout(C(this,Ns)),W(this,Ns,void 0))},vd=function(){C(this,js)&&(gs.clearInterval(C(this,js)),W(this,js,void 0))},yd=function(){const t=C(this,Bt).getQueryCache().build(C(this,Bt),this.options);if(t===C(this,Ce))return;const n=C(this,Ce);W(this,Ce,t),W(this,Ko,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},ly=function(t){rt.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(C(this,Rt))}),C(this,Bt).getQueryCache().notify({query:C(this,Ce),type:"observerResultsUpdated"})})},Ip);function u1(e,t){return cn(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function wm(e,t){return u1(e,t)||e.state.data!==void 0&&xd(e,t,t.refetchOnMount)}function xd(e,t,n){if(cn(t.enabled,e)!==!1&&Zr(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Df(e,t)}return!1}function Sm(e,t,n,r){return(e!==t||cn(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Df(e,n)}function Df(e,t){return cn(t.enabled,e)!==!1&&e.isStaleByTime(Zr(t.staleTime,e))}function c1(e,t){return!Oa(e.getCurrentResult(),t)}function bm(e){return{onFetch:(t,n)=>{var f,m,g,b,w;const r=t.options,s=(g=(m=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:m.fetchMore)==null?void 0:g.direction,i=((b=t.state.data)==null?void 0:b.pages)||[],o=((w=t.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const d=async()=>{let E=!1;const L=p=>{t1(p,()=>t.signal,()=>E=!0)},y=ty(t.options,t.fetchOptions),h=async(p,v,S)=>{if(E)return Promise.reject();if(v==null&&p.pages.length)return Promise.resolve(p);const j=(()=>{const F={client:t.client,queryKey:t.queryKey,pageParam:v,direction:S?"backward":"forward",meta:t.options.meta};return L(F),F})(),k=await y(j),{maxPages:P}=t.options,N=S?e1:Zw;return{pages:N(p.pages,k,P),pageParams:N(p.pageParams,v,P)}};if(s&&i.length){const p=s==="backward",v=p?d1:Cm,S={pages:i,pageParams:o},R=v(r,S);l=await h(S,R,p)}else{const p=e??i.length;do{const v=u===0?o[0]??r.initialPageParam:Cm(r,l);if(u>0&&v==null)break;l=await h(l,v),u++}while(u<p)}return l};t.options.persister?t.fetchFn=()=>{var E,L;return(L=(E=t.options).persister)==null?void 0:L.call(E,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function Cm(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function d1(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Yo,Dn,Lt,Ms,zn,Rr,Fp,f1=(Fp=class extends iy{constructor(t){super();oe(this,zn);oe(this,Yo);oe(this,Dn);oe(this,Lt);oe(this,Ms);W(this,Yo,t.client),this.mutationId=t.mutationId,W(this,Lt,t.mutationCache),W(this,Dn,[]),this.state=t.state||ay(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){C(this,Dn).includes(t)||(C(this,Dn).push(t),this.clearGcTimeout(),C(this,Lt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){W(this,Dn,C(this,Dn).filter(n=>n!==t)),this.scheduleGc(),C(this,Lt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){C(this,Dn).length||(this.state.status==="pending"?this.scheduleGc():C(this,Lt).remove(this))}continue(){var t;return((t=C(this,Ms))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,u,d,f,m,g,b,w,E,L,y,h,p,v,S,R,j,k,P;const n=()=>{ve(this,zn,Rr).call(this,{type:"continue"})},r={client:C(this,Yo),meta:this.options.meta,mutationKey:this.options.mutationKey};W(this,Ms,sy({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(N,F)=>{ve(this,zn,Rr).call(this,{type:"failed",failureCount:N,error:F})},onPause:()=>{ve(this,zn,Rr).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>C(this,Lt).canRun(this)}));const s=this.state.status==="pending",i=!C(this,Ms).canStart();try{if(s)n();else{ve(this,zn,Rr).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=C(this,Lt).config).onMutate)==null?void 0:l.call(o,t,this,r));const F=await((d=(u=this.options).onMutate)==null?void 0:d.call(u,t,r));F!==this.state.context&&ve(this,zn,Rr).call(this,{type:"pending",context:F,variables:t,isPaused:i})}const N=await C(this,Ms).start();return await((m=(f=C(this,Lt).config).onSuccess)==null?void 0:m.call(f,N,t,this.state.context,this,r)),await((b=(g=this.options).onSuccess)==null?void 0:b.call(g,N,t,this.state.context,r)),await((E=(w=C(this,Lt).config).onSettled)==null?void 0:E.call(w,N,null,this.state.variables,this.state.context,this,r)),await((y=(L=this.options).onSettled)==null?void 0:y.call(L,N,null,t,this.state.context,r)),ve(this,zn,Rr).call(this,{type:"success",data:N}),N}catch(N){try{await((p=(h=C(this,Lt).config).onError)==null?void 0:p.call(h,N,t,this.state.context,this,r))}catch(F){Promise.reject(F)}try{await((S=(v=this.options).onError)==null?void 0:S.call(v,N,t,this.state.context,r))}catch(F){Promise.reject(F)}try{await((j=(R=C(this,Lt).config).onSettled)==null?void 0:j.call(R,void 0,N,this.state.variables,this.state.context,this,r))}catch(F){Promise.reject(F)}try{await((P=(k=this.options).onSettled)==null?void 0:P.call(k,void 0,N,t,this.state.context,r))}catch(F){Promise.reject(F)}throw ve(this,zn,Rr).call(this,{type:"error",error:N}),N}finally{C(this,Lt).runNext(this)}}},Yo=new WeakMap,Dn=new WeakMap,Lt=new WeakMap,Ms=new WeakMap,zn=new WeakSet,Rr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),rt.batch(()=>{C(this,Dn).forEach(r=>{r.onMutationUpdate(t)}),C(this,Lt).notify({mutation:this,type:"updated",action:t})})},Fp);function ay(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ir,Nn,Go,Op,h1=(Op=class extends Bi{constructor(t={}){super();oe(this,ir);oe(this,Nn);oe(this,Go);this.config=t,W(this,ir,new Set),W(this,Nn,new Map),W(this,Go,0)}build(t,n,r){const s=new f1({client:t,mutationCache:this,mutationId:++wl(this,Go)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){C(this,ir).add(t);const n=Dl(t);if(typeof n=="string"){const r=C(this,Nn).get(n);r?r.push(t):C(this,Nn).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(C(this,ir).delete(t)){const n=Dl(t);if(typeof n=="string"){const r=C(this,Nn).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&C(this,Nn).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Dl(t);if(typeof n=="string"){const r=C(this,Nn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Dl(t);if(typeof n=="string"){const s=(r=C(this,Nn).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){rt.batch(()=>{C(this,ir).forEach(t=>{this.notify({type:"removed",mutation:t})}),C(this,ir).clear(),C(this,Nn).clear()})}getAll(){return Array.from(C(this,ir))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>pm(n,r))}findAll(t={}){return this.getAll().filter(n=>pm(t,n))}notify(t){rt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return rt.batch(()=>Promise.all(t.map(n=>n.continue().catch(Tt))))}},ir=new WeakMap,Nn=new WeakMap,Go=new WeakMap,Op);function Dl(e){var t;return(t=e.options.scope)==null?void 0:t.id}var or,zr,Ut,lr,fr,sa,wd,Ap,m1=(Ap=class extends Bi{constructor(n,r){super();oe(this,fr);oe(this,or);oe(this,zr);oe(this,Ut);oe(this,lr);W(this,or,n),this.setOptions(r),this.bindMethods(),ve(this,fr,sa).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=C(this,or).defaultMutationOptions(n),Oa(this.options,r)||C(this,or).getMutationCache().notify({type:"observerOptionsUpdated",mutation:C(this,Ut),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&As(r.mutationKey)!==As(this.options.mutationKey)?this.reset():((s=C(this,Ut))==null?void 0:s.state.status)==="pending"&&C(this,Ut).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=C(this,Ut))==null||n.removeObserver(this)}onMutationUpdate(n){ve(this,fr,sa).call(this),ve(this,fr,wd).call(this,n)}getCurrentResult(){return C(this,zr)}reset(){var n;(n=C(this,Ut))==null||n.removeObserver(this),W(this,Ut,void 0),ve(this,fr,sa).call(this),ve(this,fr,wd).call(this)}mutate(n,r){var s;return W(this,lr,r),(s=C(this,Ut))==null||s.removeObserver(this),W(this,Ut,C(this,or).getMutationCache().build(C(this,or),this.options)),C(this,Ut).addObserver(this),C(this,Ut).execute(n)}},or=new WeakMap,zr=new WeakMap,Ut=new WeakMap,lr=new WeakMap,fr=new WeakSet,sa=function(){var r;const n=((r=C(this,Ut))==null?void 0:r.state)??ay();W(this,zr,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},wd=function(n){rt.batch(()=>{var r,s,i,o,l,u,d,f;if(C(this,lr)&&this.hasListeners()){const m=C(this,zr).variables,g=C(this,zr).context,b={client:C(this,or),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=C(this,lr)).onSuccess)==null||s.call(r,n.data,m,g,b)}catch(w){Promise.reject(w)}try{(o=(i=C(this,lr)).onSettled)==null||o.call(i,n.data,null,m,g,b)}catch(w){Promise.reject(w)}}else if((n==null?void 0:n.type)==="error"){try{(u=(l=C(this,lr)).onError)==null||u.call(l,n.error,m,g,b)}catch(w){Promise.reject(w)}try{(f=(d=C(this,lr)).onSettled)==null||f.call(d,void 0,n.error,m,g,b)}catch(w){Promise.reject(w)}}}this.listeners.forEach(m=>{m(C(this,zr))})})},Ap),$n,Dp,p1=(Dp=class extends Bi{constructor(t={}){super();oe(this,$n);this.config=t,W(this,$n,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??Ff(s,n);let o=this.get(i);return o||(o=new l1({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){C(this,$n).has(t.queryHash)||(C(this,$n).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=C(this,$n).get(t.queryHash);n&&(t.destroy(),n===t&&C(this,$n).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){rt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return C(this,$n).get(t)}getAll(){return[...C(this,$n).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>mm(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>mm(t,r)):n}notify(t){rt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){rt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){rt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},$n=new WeakMap,Dp),Ve,$r,Br,Ni,ji,Ur,Mi,Ri,zp,g1=(zp=class{constructor(e={}){oe(this,Ve);oe(this,$r);oe(this,Br);oe(this,Ni);oe(this,ji);oe(this,Ur);oe(this,Mi);oe(this,Ri);W(this,Ve,e.queryCache||new p1),W(this,$r,e.mutationCache||new h1),W(this,Br,e.defaultOptions||{}),W(this,Ni,new Map),W(this,ji,new Map),W(this,Ur,0)}mount(){wl(this,Ur)._++,C(this,Ur)===1&&(W(this,Mi,Af.subscribe(async e=>{e&&(await this.resumePausedMutations(),C(this,Ve).onFocus())})),W(this,Ri,Aa.subscribe(async e=>{e&&(await this.resumePausedMutations(),C(this,Ve).onOnline())})))}unmount(){var e,t;wl(this,Ur)._--,C(this,Ur)===0&&((e=C(this,Mi))==null||e.call(this),W(this,Mi,void 0),(t=C(this,Ri))==null||t.call(this),W(this,Ri,void 0))}isFetching(e){return C(this,Ve).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return C(this,$r).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=C(this,Ve).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=C(this,Ve).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Zr(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return C(this,Ve).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=C(this,Ve).get(r.queryHash),i=s==null?void 0:s.state.data,o=Gw(t,i);if(o!==void 0)return C(this,Ve).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return rt.batch(()=>C(this,Ve).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=C(this,Ve).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=C(this,Ve);rt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=C(this,Ve);return rt.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=rt.batch(()=>C(this,Ve).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Tt).catch(Tt)}invalidateQueries(e,t={}){return rt.batch(()=>(C(this,Ve).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=rt.batch(()=>C(this,Ve).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Tt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Tt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=C(this,Ve).build(this,t);return n.isStaleByTime(Zr(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Tt).catch(Tt)}fetchInfiniteQuery(e){return e.behavior=bm(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Tt).catch(Tt)}ensureInfiniteQueryData(e){return e.behavior=bm(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Aa.isOnline()?C(this,$r).resumePausedMutations():Promise.resolve()}getQueryCache(){return C(this,Ve)}getMutationCache(){return C(this,$r)}getDefaultOptions(){return C(this,Br)}setDefaultOptions(e){W(this,Br,e)}setQueryDefaults(e,t){C(this,Ni).set(As(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...C(this,Ni).values()],n={};return t.forEach(r=>{Uo(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){C(this,ji).set(As(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...C(this,ji).values()],n={};return t.forEach(r=>{Uo(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...C(this,Br).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ff(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Of&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...C(this,Br).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){C(this,Ve).clear(),C(this,$r).clear()}},Ve=new WeakMap,$r=new WeakMap,Br=new WeakMap,Ni=new WeakMap,ji=new WeakMap,Ur=new WeakMap,Mi=new WeakMap,Ri=new WeakMap,zp),uy=c.createContext(void 0),is=e=>{const t=c.useContext(uy);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},v1=({client:e,children:t})=>(c.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(uy.Provider,{value:e,children:t})),cy=c.createContext(!1),y1=()=>c.useContext(cy);cy.Provider;function x1(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var w1=c.createContext(x1()),S1=()=>c.useContext(w1),b1=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},C1=e=>{c.useEffect(()=>{e.clearReset()},[e])},k1=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||ny(n,[e.error,r])),E1=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},N1=(e,t)=>e.isLoading&&e.isFetching&&!t,j1=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,km=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function M1(e,t,n){var m,g,b,w,E;const r=y1(),s=S1(),i=is(),o=i.defaultQueryOptions(e);(g=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||g.call(m,o),o._optimisticResults=r?"isRestoring":"optimistic",E1(o),b1(o,s),C1(s);const l=!i.getQueryCache().get(o.queryHash),[u]=c.useState(()=>new t(i,o)),d=u.getOptimisticResult(o),f=!r&&e.subscribed!==!1;if(c.useSyncExternalStore(c.useCallback(L=>{const y=f?u.subscribe(rt.batchCalls(L)):Tt;return u.updateResult(),y},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),c.useEffect(()=>{u.setOptions(o)},[o,u]),j1(o,d))throw km(o,u,s);if(k1({result:d,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((w=(b=i.getDefaultOptions().queries)==null?void 0:b._experimental_afterQuery)==null||w.call(b,o,d),o.experimental_prefetchInRender&&!Os&&N1(d,r)){const L=l?km(o,u,s):(E=i.getQueryCache().get(o.queryHash))==null?void 0:E.promise;L==null||L.catch(Tt).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?d:u.trackResult(d)}function au(e,t){return M1(e,a1)}function R1(e,t){const n=is(),[r]=c.useState(()=>new m1(n,e));c.useEffect(()=>{r.setOptions(e)},[r,e]);const s=c.useSyncExternalStore(c.useCallback(o=>r.subscribe(rt.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=c.useCallback((o,l)=>{r.mutate(o,l).catch(Tt)},[r]);if(s.error&&ny(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function Em(e){return e.length>0&&"options"in e[0]}function Sd({value:e,onChange:t,options:n,placeholder:r="Select...",trigger:s,triggerClassName:i="",panelClassName:o="",align:l="left",width:u="auto",showChevron:d=!0,title:f,disabled:m=!1,"aria-label":g}){var k;const[b,w]=c.useState(!1),E=c.useRef(null),L=c.useRef(null),h=c.useCallback(()=>{const P=N=>{const F=N.find(B=>B.value===e);return F?F.label:null};if(Em(n))for(const N of n){const F=P(N.options);if(F)return F}else{const N=P(n);if(N)return N}return r},[e,n,r])();c.useEffect(()=>{if(!b)return;const P=F=>{E.current&&!E.current.contains(F.target)&&w(!1)},N=F=>{var B;F.key==="Escape"&&(w(!1),(B=L.current)==null||B.focus())};return window.addEventListener("click",P),window.addEventListener("keydown",N),()=>{window.removeEventListener("click",P),window.removeEventListener("keydown",N)}},[b]);const p=P=>{var N;t(P),w(!1),(N=L.current)==null||N.focus()},v=P=>P.map(N=>a.jsxs("button",{className:"dropdown-item","data-active":N.value===e,disabled:N.disabled,onClick:()=>!N.disabled&&p(N.value),role:"menuitem",children:[N.icon&&a.jsx("span",{className:"shrink-0",children:N.icon}),a.jsx("span",{className:"flex-1 truncate",children:N.label}),N.value===e&&a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 text-accent",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})]},N.value)),S=((k=L.current)==null?void 0:k.offsetWidth)??0,R=u==="trigger"?S:u==="auto"?void 0:u,j={...R?{width:R,minWidth:R}:{},...l==="right"?{right:0}:{left:0}};return a.jsxs("div",{ref:E,className:"relative",children:[s?a.jsx("div",{onClick:()=>!m&&w(P=>!P),children:s}):a.jsxs("button",{ref:L,type:"button",className:`dropdown-trigger ${i}`,onClick:()=>w(P=>!P),disabled:m,title:f,"aria-label":g,"aria-haspopup":"listbox","aria-expanded":b,children:[a.jsx("span",{className:"truncate",children:h}),d&&a.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`shrink-0 opacity-60 transition-transform ${b?"rotate-180":""}`,children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),b&&a.jsx("div",{className:`dropdown-panel ${o}`,style:j,role:"listbox","aria-label":g,children:Em(n)?n.map((P,N)=>a.jsxs("div",{children:[P.label&&a.jsx("div",{className:"dropdown-label",children:P.label}),v(P.options),N<n.length-1&&a.jsx("div",{className:"dropdown-divider"})]},P.label||N)):v(n)})]})}const L1={offline:"sync-dot-offline",unstable:"sync-dot-unstable",recent:"sync-dot-recent",editing:"sync-dot-editing",live:"sync-dot-live"};function P1({state:e,presence:t,syncLabel:n,connectionLabel:r,lastEditedLabel:s,hasEdits:i,localTypingActive:o,recentTouches:l,isNarrow:u}){const[d,f]=c.useState(!1),[m,g]=c.useState(null),b=c.useRef(null),w=c.useRef(null),E=c.useRef(null),L=t?`${t.viewing} viewing  ${t.editing} editing`:"- viewing  - editing",y=t?String(t.viewing):"-",h=c.useCallback(()=>{E.current&&(window.clearTimeout(E.current),E.current=null)},[]),p=c.useCallback((S,R)=>{var j;R&&((j=navigator.clipboard)==null||j.writeText(R).then(()=>{g(S),h(),E.current=window.setTimeout(()=>{g(k=>k===S?null:k)},1e3)}).catch(()=>{}))},[h]),v=c.useCallback(()=>{f(!1),window.requestAnimationFrame(()=>{var S;return(S=w.current)==null?void 0:S.focus()})},[]);return c.useEffect(()=>{if(!d)return;const S=j=>{!b.current||b.current.contains(j.target)||v()},R=j=>{j.key==="Escape"&&v()};return window.addEventListener("mousedown",S),window.addEventListener("keydown",R),()=>{window.removeEventListener("mousedown",S),window.removeEventListener("keydown",R)}},[d,v]),c.useEffect(()=>()=>{h()},[h]),a.jsxs("div",{ref:b,className:"sync-indicator",children:[a.jsxs("button",{ref:w,type:"button",className:"sync-indicator-button",onClick:()=>d?v():f(!0),"aria-haspopup":"dialog","aria-expanded":d,"aria-label":"Sync status",title:L,children:[a.jsx("span",{className:`sync-indicator-dot ${L1[e]}`,"aria-hidden":"true"}),!u&&a.jsx("span",{className:"sync-indicator-count tabular-nums",children:y}),!u&&o&&a.jsx("span",{className:"sync-indicator-local",children:"typing"})]}),d&&a.jsxs("div",{role:"dialog","aria-label":"Sync status",className:"sync-indicator-card select-text",children:[a.jsx("div",{className:"sync-indicator-line sync-indicator-primary",children:n}),a.jsx("div",{className:"sync-indicator-line",children:r}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:L}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:i?`Last edited: ${s}`:"No edits yet."}),o&&a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:"Local typing in progress (saved on blur)."}),a.jsxs("div",{className:"sync-indicator-section",children:[a.jsx("div",{className:"sync-indicator-section-title",children:"Recently touched files"}),l.length>0?a.jsx("div",{className:"sync-indicator-list",children:l.map(S=>a.jsxs("div",{className:"sync-indicator-item",children:[a.jsx("button",{type:"button",className:"sync-indicator-item-name",title:`Copy filename: ${S.label}`,onClick:()=>p(S.path,S.label),children:S.label}),a.jsx("span",{className:"sync-indicator-item-time tabular-nums",children:m===S.path?"Copied":S.timeLabel})]},S.path))}):a.jsx("div",{className:"sync-indicator-empty",children:"No recent touches."})]})]})]})}function T1({rootRef:e,onSearch:t,viewerActive:n,onBack:r,zoomPercent:s,onZoomPercentChange:i,currentLabel:o,itemCount:l,totalCount:u,sortSpec:d,metricKeys:f,onSortChange:m,sortDisabled:g=!1,filterCount:b,onOpenFilters:w,starFilters:E,onToggleStar:L,onClearStars:y,onClearFilters:h,starCounts:p,viewMode:v,onViewMode:S,gridItemSize:R,onGridItemSize:j,leftOpen:k,rightOpen:P,onToggleLeft:N,onToggleRight:F,onPrevImage:B,onNextImage:A,canPrevImage:ee,canNextImage:de,searchDisabled:T=!1,searchPlaceholder:me,syncIndicator:D}){const[H,X]=c.useState(!1),[le,fe]=c.useState(!1),[Le,Q]=c.useState(!1),K=c.useRef(null),re=c.useRef(null);c.useEffect(()=>{if(!H)return;const U=J=>{K.current&&!K.current.contains(J.target)&&X(!1)};return window.addEventListener("click",U),()=>window.removeEventListener("click",U)},[H]),c.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const U=window.matchMedia("(max-width: 900px)"),J=he=>fe(he.matches);return fe(U.matches),"addEventListener"in U?(U.addEventListener("change",J),()=>U.removeEventListener("change",J)):(U.addListener(J),()=>U.removeListener(J))},[]),c.useEffect(()=>{if(T){Q(!1);return}if(!le||n){Q(!1);return}if(!Le)return;const U=window.requestAnimationFrame(()=>{var J;return(J=re.current)==null?void 0:J.focus()});return()=>window.cancelAnimationFrame(U)},[le,Le,n,T]);const ae=d??{kind:"builtin",key:"added",dir:"desc"},Re=ae.dir,Ae=ae.kind==="builtin"&&ae.key==="random",Qe=n||g,Pe=f!=null&&f.length?f.map(U=>({value:`metric:${U}`,label:U,disabled:g})):[],it=[{value:"builtin:added",label:"Date added",disabled:g},{value:"builtin:name",label:"Filename",disabled:g},{value:"builtin:random",label:"Random",disabled:g},...Pe],Ke=[{label:"Layout",options:[{value:"layout:grid",label:"Grid"},{value:"layout:masonry",label:"Masonry"}]},{label:"Sort by",options:it}],ot=ae.kind==="metric"?`metric:${ae.key}`:`builtin:${ae.key}`,Ot=[{label:"Sort by",options:it}],sn=le&&!n,on=U=>{if(U.startsWith("layout:")){const J=U==="layout:masonry"?"adaptive":"grid";S==null||S(J)}else{if(g)return;m==null||m(Nm(U,ae))}},At=()=>{!m||g||m(Ae?ae:{...ae,dir:Re==="desc"?"asc":"desc"})},lt=E??[],at=lt.length,z=I1(b,at),ne=_1(l,u),ie=o||"Root";return a.jsxs("div",{ref:e,className:"toolbar-shell fixed top-0 left-0 right-0 h-12 grid grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] items-center px-3 gap-3 bg-panel border-b border-border z-[var(--z-toolbar)] col-span-full row-start-1 select-none",children:[a.jsxs("div",{className:"toolbar-left flex items-center gap-4 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsxs("div",{className:"flex flex-col min-w-0 leading-tight",children:[a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted",children:"Scope"}),a.jsx("span",{className:"text-sm font-medium text-text truncate",title:ie,children:ie})]}),ne&&a.jsx("span",{className:"toolbar-count text-xs text-muted whitespace-nowrap tabular-nums",children:ne})]}),a.jsxs("div",{className:"toolbar-sort flex items-center gap-2",children:[a.jsxs("div",{className:`toolbar-sort-controls flex items-center gap-2 ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsx(Sd,{value:ot,onChange:on,options:Ke,title:"Sort and layout options","aria-label":"Sort and layout",triggerClassName:"min-w-[110px]"}),a.jsx("button",{className:"toolbar-sort-dir btn btn-icon",onClick:At,title:g?"Sorting disabled":Ae?"Shuffle":`Sort ${Re==="desc"?"descending":"ascending"}`,"aria-label":Ae?"Shuffle":"Toggle sort direction","aria-disabled":Qe,disabled:Qe,children:Ae?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Re==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]}),a.jsxs("div",{ref:K,className:`toolbar-filter relative ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsxs("button",{className:`btn ${z>0?"btn-active":""}`,onClick:()=>X(U=>!U),"aria-haspopup":"dialog","aria-expanded":H,title:"Filters","aria-disabled":n,children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),a.jsx("span",{className:"toolbar-filters-label",children:"Filters"}),z>0&&a.jsx("span",{className:"toolbar-filters-count px-1.5 py-0.5 text-[11px] rounded-full bg-accent-strong text-text",children:z})]}),H&&a.jsxs("div",{role:"dialog","aria-label":"Filters",className:"dropdown-panel w-[240px]",style:{top:"38px",left:0},children:[a.jsx("div",{className:"dropdown-label",children:"Rating"}),a.jsxs("div",{className:"px-1",children:[[5,4,3,2,1].map(U=>{const J=lt.includes(U),he=(p==null?void 0:p[String(U)])??0;return a.jsxs("button",{onClick:()=>L==null?void 0:L(U),className:`dropdown-item justify-between ${J?"bg-accent-muted":""}`,children:[a.jsxs("span",{className:J?"text-star-active":"text-text",children:["".repeat(U),"".repeat(5-U)]}),a.jsx("span",{className:"text-xs text-muted",children:he})]},U)}),a.jsxs("button",{onClick:()=>L==null?void 0:L(0),className:`dropdown-item justify-between ${lt.includes(0)?"bg-accent-muted":""}`,children:[a.jsx("span",{className:"text-text",children:"Unrated"}),a.jsx("span",{className:"text-xs text-muted",children:(p==null?void 0:p["0"])??0})]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("div",{className:"dropdown-label",children:"Metrics"}),a.jsxs("button",{className:"dropdown-item",onClick:()=>{X(!1),w==null||w()},children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]}),a.jsx("span",{children:"Open Metrics Panel"}),(b||0)>0&&a.jsxs("span",{className:"ml-auto text-xs text-muted",children:[b," active"]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("button",{className:"dropdown-item text-muted hover:text-text",onClick:()=>{h?h():y==null||y()},disabled:z===0,children:"Clear all filters"})]})]}),n&&a.jsxs("button",{className:"btn btn-sm",onClick:r,title:"Back to grid",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})]})]}),a.jsx("div",{className:"toolbar-center flex items-center gap-3 justify-center min-w-0",children:n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"range",min:5,max:800,step:1,value:Math.round(Math.max(5,Math.min(800,s??100))),onChange:U=>i==null?void 0:i(Number(U.target.value)),className:"zoom-slider","aria-label":"Zoom level"}),a.jsxs("span",{className:"text-xs text-muted min-w-[42px] text-right",children:[Math.round(s??100),"%"]})]}):j&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted",children:"Size"}),a.jsx("input",{type:"range",min:80,max:500,step:10,value:R??220,onChange:U=>j(Number(U.target.value)),className:"w-28 h-1.5 bg-border rounded-full appearance-none cursor-pointer hover:bg-hover transition-colors [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-text [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-text [&::-moz-range-thumb]:border-0","aria-label":"Thumbnail size"})]})}),a.jsxs("div",{className:"toolbar-right flex items-center gap-2 justify-end",children:[a.jsxs("div",{className:`toolbar-nav flex items-center gap-1 mr-1 ${n?"":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,children:[a.jsx("button",{className:`btn btn-icon ${ee?"":"opacity-40 cursor-not-allowed"}`,title:"Previous image (A / )",onClick:()=>ee&&(B==null?void 0:B()),"aria-label":"Previous image","aria-disabled":!ee,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("button",{className:`btn btn-icon ${de?"":"opacity-40 cursor-not-allowed"}`,title:"Next image (D / )",onClick:()=>de&&(A==null?void 0:A()),"aria-label":"Next image","aria-disabled":!de,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 6l6 6-6 6"})})})]}),a.jsxs("div",{className:"toolbar-panels flex items-center gap-1",children:[a.jsx("button",{className:`btn btn-icon ${k?"":"opacity-50"}`,title:k?"Hide left panel (Ctrl+B)":"Show left panel (Ctrl+B)",onClick:N,"aria-pressed":k,"aria-label":"Toggle left panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"11",y:"5",width:"10",height:"14",rx:"1.5"})]})}),a.jsx("button",{className:`btn btn-icon ${P?"":"opacity-50"}`,title:P?"Hide right panel (Ctrl+Alt+B)":"Show right panel (Ctrl+Alt+B)",onClick:F,"aria-pressed":P,"aria-label":"Toggle right panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"15",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"3",y:"5",width:"10",height:"14",rx:"1.5"})]})})]}),D&&a.jsx(P1,{...D,isNarrow:le}),!n&&le&&a.jsx("button",{className:`btn btn-icon ${Le?"btn-active":""} ${T?"opacity-50 cursor-not-allowed":""}`,"aria-label":Le?"Close search":"Open search",title:T?"Search disabled":Le?"Close search":"Search",onClick:()=>!T&&Q(U=>!U),disabled:T,children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("circle",{cx:"11",cy:"11",r:"7"}),a.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),!n&&!le?a.jsx("div",{className:"toolbar-search w-[240px]",children:a.jsx("input",{ref:re,"aria-label":"Search filename, tags, notes",placeholder:T?me??"Search disabled":"Search...",onChange:U=>t(U.target.value),className:"toolbar-search-input input w-full focus:w-full transition-all duration-200 select-text",disabled:T})}):n?a.jsx("div",{className:"toolbar-search w-[240px]","aria-hidden":"true"}):null]}),!n&&le&&Le&&!T&&a.jsx("div",{className:"toolbar-search-row",children:a.jsx("input",{ref:re,"aria-label":"Search filename, tags, notes",placeholder:me??"Search...",onChange:U=>t(U.target.value),className:"toolbar-search-input-mobile input input-lg w-full select-text"})}),sn&&a.jsx("div",{className:"mobile-drawer",children:a.jsxs("div",{className:"mobile-drawer-row",children:[a.jsxs("div",{className:"mobile-pill-group",children:[a.jsx("button",{className:`mobile-pill ${v==="grid"?"is-active":""}`,onClick:()=>S==null?void 0:S("grid"),"aria-pressed":v==="grid",children:"Grid"}),a.jsx("button",{className:`mobile-pill ${v==="adaptive"?"is-active":""}`,onClick:()=>S==null?void 0:S("adaptive"),"aria-pressed":v==="adaptive",children:"Masonry"})]}),a.jsx(Sd,{value:ot,onChange:U=>m==null?void 0:m(Nm(U,ae)),options:Ot,"aria-label":"Sort",triggerClassName:"mobile-pill mobile-pill-dropdown",panelClassName:"mobile-drawer-panel",disabled:g}),a.jsx("button",{className:`mobile-pill mobile-pill-icon ${Qe?"opacity-50 cursor-not-allowed":""}`,onClick:At,title:g?"Sorting disabled":Ae?"Shuffle":`Sort ${Re==="desc"?"descending":"ascending"}`,"aria-label":Ae?"Shuffle":"Toggle sort direction","aria-disabled":Qe,disabled:Qe,children:Ae?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Re==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]})})]})}function _1(e,t){if(typeof e!="number")return null;const n=e.toLocaleString();if(typeof t!="number")return`${n} items`;const r=t.toLocaleString();return t===e?`${n} items`:`${n} / ${r} items`}function I1(e,t){return typeof e=="number"?e:t>0?1:0}function Nm(e,t){if(e.startsWith("metric:")){const n=e.slice(7);return n?{kind:"metric",key:n,dir:t.dir}:t}if(e.startsWith("builtin:")){const n=e.slice(8);if(n==="name"||n==="added"||n==="random")return{kind:"builtin",key:n,dir:t.dir}}return t}class Pn extends Error{constructor(n,r,s,i){super(r);Zn(this,"status");Zn(this,"url");Zn(this,"body");this.name="FetchError",this.status=n,this.url=s,this.body=i}}function F1(e){const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function dy(e,t,n){if(t&&typeof t=="object"){const r=t,s=typeof r.error=="string"?r.error:null,i=typeof r.message=="string"?r.message:null;if(s&&i)return`${s}: ${i}`;if(s)return s;if(i)return i}return typeof t=="string"&&t?t:`HTTP ${e} for ${n}`}function mt(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{let u=null;const d=await l.text().catch(()=>"");if(d)if((l.headers.get("content-type")||"").includes("application/json")||F1(d))try{u=JSON.parse(d)}catch{u=d}else u=d;if(!l.ok)throw new Pn(l.status,dy(l.status,u,e),e,u);return u}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}function zl(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{if(!l.ok){const u=await l.text().catch(()=>""),d=u||null;throw new Pn(l.status,dy(l.status,d,e),e,d)}return l.blob()}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}class fy{constructor(t){Zn(this,"store",new Map);Zn(this,"inflight",new Map);Zn(this,"totalBytes",0);this.maxBytes=t}getMaxBytes(){return this.maxBytes}getTotalBytes(){return this.totalBytes}getSize(){return this.store.size}has(t){return this.store.has(t)}isInflight(t){return this.inflight.has(t)}get(t){const n=this.store.get(t);if(n)return this.store.delete(t),this.store.set(t,n),n.blob}evictIfNeeded(t){for(;this.totalBytes+t>this.maxBytes&&this.store.size>0;){const n=this.store.keys().next().value;if(n==null)break;const r=this.store.get(n);r&&(this.totalBytes-=r.size),this.store.delete(n)}}set(t,n){const r=n.size||0;if(!(r>this.maxBytes)){if(this.store.has(t)){const s=this.store.get(t);this.totalBytes-=s.size,this.store.delete(t)}this.evictIfNeeded(r),this.store.set(t,{blob:n,size:r}),this.totalBytes+=r}}async getOrFetch(t,n){const r=this.get(t);if(r)return r;const s=this.inflight.get(t);if(s)return s.promise;const i=n(),o=typeof i=="object"&&"promise"in i,l=o?i.promise:i,u=o?i.abort:void 0,d=l.then(f=>(this.set(t,f),f)).finally(()=>{this.inflight.delete(t)});return this.inflight.set(t,{promise:d,abort:u}),d}prefetch(t,n){if(this.store.has(t)||this.inflight.has(t))return;const r=n(),s=typeof r=="object"&&"promise"in r,i=s?r.promise:r,o=s?r.abort:void 0,l=i.then(u=>(this.set(t,u),u)).catch(()=>new Blob).finally(()=>{this.inflight.delete(t)});this.inflight.set(t,{promise:l,abort:o})}cancelPrefetch(t){const n=this.inflight.get(t);if(n!=null&&n.abort)try{n.abort()}catch{}this.inflight.delete(t)}clear(){for(const[t,n]of this.inflight)if(n.abort)try{n.abort()}catch{}this.inflight.clear(),this.store.clear(),this.totalBytes=0}evictPrefix(t){const n=(()=>{const s=t?`/${t.replace(/^\/+/,"")}`:"/";return s==="/"?"/":s.replace(/\/+$/,"")})(),r=s=>{const i=s.startsWith("/")?s.replace(/\/+$/,""):`/${s.replace(/\/+$/,"")}`;return n==="/"?!0:i===n||i.startsWith(`${n}/`)};for(const[s,i]of Array.from(this.store.entries()))r(s)&&(this.totalBytes-=i.size,this.store.delete(s));for(const[s,i]of Array.from(this.inflight.entries()))if(r(s)){if(i.abort)try{i.abort()}catch{}this.inflight.delete(s)}this.totalBytes<0&&(this.totalBytes=0)}}const Ys=new fy(60*1024*1024),bd=new fy(20*1024*1024),nc={};function O1(){const e=nc==null?void 0:nc.VITE_API_BASE,t=typeof window<"u",n=t?window.location.origin:"http://localhost",r=t?window.location.hostname:"localhost",s=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\]|.+\.localhost)$/i.test(r);if(!e)return"";let i;try{i=new URL(e,n)}catch{return""}const o=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\])$/i.test(i.hostname);return s?i.origin:o?"":i.origin}const He=O1();const A1=40*1024*1024;function D1(e){return e==="viewer"||e==="compare"}function jm(e){return`${He}/thumb?path=${encodeURIComponent(e)}`}function Mm(e){return`${He}/file?path=${encodeURIComponent(e)}`}const rc="lenslet.client_id",Rm="lenslet.client_id.session",hy="lenslet.last_event_id",z1=1e3,$1=3e4,B1=5;let Cd=null,ia=null,Lm=0,mi=null,pi=0,uu=!0,Da=!1;function my(){return typeof window<"u"&&typeof EventSource<"u"}function Pm(e,t){if(!e)return null;try{return e.getItem(t)}catch{return null}}function Tm(e,t,n){if(e)try{e.setItem(t,n)}catch{}}function U1(e,t){if(e)try{e.removeItem(t)}catch{}}function V1(){if(typeof navigator>"u")return"server";const e=navigator.userAgent||"",t=navigator.language||"",n=navigator.platform||"",r=typeof Intl<"u"&&Intl.DateTimeFormat().resolvedOptions().timeZone||"",s=typeof screen<"u"?`${screen.width}x${screen.height}x${screen.colorDepth}`:"";return[e,t,n,r,s].join("|")}function H1(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=t*16777619>>>0;return t.toString(16).padStart(8,"0")}function _m(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`}function ro(e){return Cd=e,e}function za(e){if(typeof window>"u")return null;try{return e==="local"?window.localStorage:window.sessionStorage}catch{return null}}function Ai(){if(Cd)return Cd;const e=za("local"),t=za("session"),n=Pm(t,Rm);if(n)return ro(n);const r=Pm(e,rc);if(t){const i=_m();return Tm(t,Rm,i),r&&U1(e,rc),ro(i)}if(r)return ro(r);if(e){const i=_m();return Tm(e,rc,i),ro(i)}const s=`fp_${H1(V1())}_${Math.random().toString(36).slice(2,8)}`;return ro(s)}function Vo(e="lenslet"){Lm+=1;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`nonce_${Math.random().toString(36).slice(2,10)}_${Date.now()}_${Lm}`;return`${e}:${Ai()}:${t}`}function W1(){if(ia!=null)return ia;if(typeof window>"u")return null;const e=za("local");if(!e)return null;try{const t=e.getItem(hy);if(!t)return null;const n=Number(t);return!Number.isFinite(n)||n<=0?null:(ia=n,n)}catch{return null}}function Q1(e){if(!Number.isFinite(e)||e<=0||(ia=e,typeof window>"u"))return;const t=za("local");if(t)try{t.setItem(hy,String(e))}catch{}}function K1(){if(typeof window>"u")return`${He}/events`;const e=new URL(`${He}/events`,window.location.origin),t=W1();return t!=null&&Number.isFinite(t)&&e.searchParams.set("last_event_id",String(t)),e.toString()}function q1(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}let kn=null,py="idle";const kd=new Set,Ed=new Set,Nd=new Set;function gi(e){py=e;for(const t of Ed)t(e)}function zf(e){if(Da!==e){Da=e;for(const t of Nd)t(e)}}function $f(){mi!=null&&(window.clearTimeout(mi),mi=null)}function Y1(){pi=0,$f()}function G1(){if(!uu||mi!=null)return;pi+=1;const e=Math.min(z1*Math.pow(2,pi-1),$1);pi>=B1?(gi("offline"),zf(!0)):gi("reconnecting"),mi=window.setTimeout(()=>{mi=null,gy()},e)}function gy(){if(!uu||!my()||(kn&&kn.readyState===EventSource.CLOSED&&(kn.close(),kn=null),kn))return;pi>0?gi("reconnecting"):gi("connecting");const e=new EventSource(K1());kn=e;const t=n=>r=>{const s=q1(r.data);if(!s)return;const i=r.lastEventId?Number(r.lastEventId):null,o=i!=null&&Number.isFinite(i)?i:null;o!=null&&Q1(o);for(const l of kd)l({type:n,id:o,data:s})};e.addEventListener("item-updated",t("item-updated")),e.addEventListener("metrics-updated",t("metrics-updated")),e.addEventListener("presence",t("presence")),e.onopen=()=>{Y1(),zf(!1),gi("live")},e.onerror=()=>{kn===e&&(e.close(),kn=null,G1())}}function X1(){uu=!0,my()&&($f(),gy())}function J1(){uu=!1,$f(),pi=0,kn&&(kn.close(),kn=null),zf(!1),gi("offline")}function Z1(e){return kd.add(e),()=>{kd.delete(e)}}function eS(e){return Ed.add(e),e(py),()=>{Ed.delete(e)}}function tS(e){return Nd.add(e),e(Da),()=>{Nd.delete(e)}}function nS(){return Da}function rS(e,t){const n=JSON.stringify(t),r=`${He}${e}`;if(typeof navigator<"u"&&typeof navigator.sendBeacon=="function")try{if(navigator.sendBeacon(r,new Blob([n],{type:"application/json"})))return!0}catch{}if(typeof fetch!="function")return!1;try{return fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:n,keepalive:!0}),!0}catch{return!1}}function sS(e,t,n){return rS("/presence/leave",{gallery_id:e,lease_id:t,client_id:n??Ai()})}function $l(e){return e??Ai()}function Bl(e,t){return mt(`${He}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).promise}function iS(e,t){const n=new URLSearchParams({path:e});return(t==null?void 0:t.page)!=null&&n.set("page",String(t.page)),(t==null?void 0:t.pageSize)!=null&&n.set("page_size",String(t.pageSize)),t!=null&&t.recursive&&n.set("recursive","1"),t!=null&&t.legacyRecursive&&n.set("legacy_recursive","1"),n.toString()}const ye={getFolder:(e,t)=>mt(`${He}/folders?${iS(e,t)}`).promise,search:(e,t)=>{const n=new URLSearchParams;return e&&n.set("q",e),t&&n.set("path",t),mt(`${He}/search?${n}`).promise},getEmbeddings:()=>mt(`${He}/embeddings`).promise,searchEmbeddings:e=>mt(`${He}/embeddings/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise,refreshFolder:e=>{const t=new URLSearchParams({path:e});return mt(`${He}/refresh?${t}`,{method:"POST"}).promise},getSidecar:e=>mt(`${He}/item?path=${encodeURIComponent(e)}`).promise,patchSidecar:(e,t,n)=>{const s={"Content-Type":"application/json","Idempotency-Key":(n==null?void 0:n.idempotencyKey)??Vo("patch"),"x-client-id":Ai(),"x-updated-by":"web"};return(n==null?void 0:n.ifMatch)!=null&&(s["If-Match"]=String(n.ifMatch)),mt(`${He}/item?path=${encodeURIComponent(e)}`,{method:"PATCH",headers:s,body:JSON.stringify(t)}).promise},getMetadata:e=>mt(`${He}/metadata?path=${encodeURIComponent(e)}`).promise,putSidecar:(e,t)=>mt(`${He}/item?path=${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-client-id":Ai(),"x-updated-by":"web"},body:JSON.stringify(t)}).promise,getHealth:()=>mt(`${He}/health`).promise,joinPresence:(e,t,n)=>Bl("/presence/join",{gallery_id:e,client_id:$l(n),lease_id:t}),movePresence:(e,t,n,r)=>Bl("/presence/move",{from_gallery_id:e,to_gallery_id:t,client_id:$l(r),lease_id:n}),leavePresence:(e,t,n)=>Bl("/presence/leave",{gallery_id:e,client_id:$l(n),lease_id:t}),postPresence:(e,t,n)=>Bl("/presence",{gallery_id:e,client_id:$l(n),lease_id:t}),getThumb:e=>bd.getOrFetch(e,()=>zl(jm(e))),prefetchThumb:e=>{bd.prefetch(e,()=>zl(jm(e)))},getFile:e=>Ys.getOrFetch(e,()=>zl(Mm(e))),prefetchFile:async(e,t)=>{if(D1(t)&&!(Ys.has(e)||Ys.isInflight(e)))try{const n=await zl(Mm(e),{headers:{"x-lenslet-prefetch":t}}).promise;n.size<=A1&&Ys.set(e,n)}catch{}},cancelPrefetch:e=>{Ys.cancelPrefetch(e)},uploadFile:async(e,t)=>{const n=new FormData;return n.append("dest",e),n.append("file",t),mt(`${He}/file`,{method:"POST",body:n,timeoutMs:6e4}).promise},moveFile:async(e,t)=>{const n=new FormData;return n.append("src",e),n.append("dest",t),mt(`${He}/move`,{method:"POST",body:n}).promise},deleteFiles:async e=>mt(`${He}/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:e})}).promise,exportIntent:async e=>{const t=new FormData;return t.append("path",e),mt(`${He}/export-intent`,{method:"POST",body:t}).promise},getViews:()=>mt(`${He}/views`).promise,saveViews:e=>mt(`${He}/views`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise};class oS{constructor(t=400){Zn(this,"cache",new Map);Zn(this,"maxSize");this.maxSize=t,typeof window<"u"&&window.addEventListener("beforeunload",()=>this.clear(),{once:!0})}get(t){const n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){for(this.cache.has(t)&&this.cache.delete(t);this.cache.size>=this.maxSize;){const r=this.cache.keys().next().value;if(r===void 0)break;const s=this.cache.get(r);if(this.cache.delete(r),s)try{URL.revokeObjectURL(s)}catch{}}this.cache.set(t,n)}clear(){for(const t of this.cache.values())try{URL.revokeObjectURL(t)}catch{}this.cache.clear()}}const sc=new oS(400);function lS({path:e,name:t,onClick:n,selected:r,highlighted:s,highlightKey:i,displayW:o,displayH:l,ioRoot:u,isScrolling:d,priority:f}){const m=c.useRef(null),[g,b]=c.useState(()=>sc.get(e)??null),[w,E]=c.useState(!1),[L,y]=c.useState(()=>!!g);c.useEffect(()=>{const p=m.current;if(!p)return;const v=new IntersectionObserver(S=>{for(const R of S)R.target===p&&E(R.isIntersecting||R.intersectionRatio>0)},{root:u??null,rootMargin:"200px 0px",threshold:.01});return v.observe(p),()=>{v.unobserve(p),v.disconnect()}},[u]),c.useEffect(()=>{if(g||!(w&&!d||f))return;let p=!0;return ye.getThumb(e).then(v=>{if(!p)return;const S=URL.createObjectURL(v);sc.set(e,S),b(S)}).catch(()=>{}),()=>{p=!1}},[e,g,w,d,f]),c.useEffect(()=>{var v;if(!g){y(!1);return}const p=(v=m.current)==null?void 0:v.querySelector("img");p&&p.complete&&p.naturalWidth>0?y(!0):y(!1)},[g]),c.useEffect(()=>{b(sc.get(e)??null)},[e]);const h=["absolute inset-0 relative bg-hover border border-border rounded-lg overflow-hidden select-none",r?"outline-2 outline-accent":"",s?"thumb-updated-ring":"","hover:outline hover:outline-1 hover:outline-accent"].filter(Boolean).join(" ");return a.jsx("div",{ref:m,"data-highlight-key":i??void 0,className:h,onClick:n,children:g?a.jsx("img",{className:`w-full h-full object-cover block pointer-events-none select-none opacity-0 transition-opacity duration-[160ms] ${L?"opacity-100":""}`,src:g,alt:t,loading:"lazy",decoding:"async",onLoad:()=>y(!0),width:o?Math.round(o):void 0,height:l?Math.round(l):void 0}):null})}function Ks(e,t,n){let r=n.initialDeps??[],s,i=!0;function o(){var l,u,d;let f;n.key&&((l=n.debug)!=null&&l.call(n))&&(f=Date.now());const m=e();if(!(m.length!==r.length||m.some((w,E)=>r[E]!==w)))return s;r=m;let b;if(n.key&&((u=n.debug)!=null&&u.call(n))&&(b=Date.now()),s=t(...m),n.key&&((d=n.debug)!=null&&d.call(n))){const w=Math.round((Date.now()-f)*100)/100,E=Math.round((Date.now()-b)*100)/100,L=E/16,y=(h,p)=>{for(h=String(h);h.length<p;)h=" "+h;return h};console.info(`%c ${y(E,5)} /${y(w,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*L,120))}deg 100% 31%);`,n==null?void 0:n.key)}return n!=null&&n.onChange&&!(i&&n.skipInitialOnChange)&&n.onChange(s),i=!1,s}return o.updateDeps=l=>{r=l},o}function Im(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const aS=(e,t)=>Math.abs(e-t)<1.01,uS=(e,t,n)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,s),n)}},Fm=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},cS=e=>e,dS=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},fS=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const s=o=>{const{width:l,height:u}=o;t({width:Math.round(l),height:Math.round(u)})};if(s(Fm(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const u=o[0];if(u!=null&&u.borderBoxSize){const d=u.borderBoxSize[0];if(d){s({width:d.inlineSize,height:d.blockSize});return}}s(Fm(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},Om={passive:!0},Am=typeof window>"u"?!0:"onscrollend"in window,hS=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&Am?()=>{}:uS(r,()=>{t(s,!1)},e.options.isScrollingResetDelay),o=f=>()=>{const{horizontal:m,isRtl:g}=e.options;s=m?n.scrollLeft*(g&&-1||1):n.scrollTop,i(),t(s,f)},l=o(!0),u=o(!1);u(),n.addEventListener("scroll",l,Om);const d=e.options.useScrollendEvent&&Am;return d&&n.addEventListener("scrollend",u,Om),()=>{n.removeEventListener("scroll",l),d&&n.removeEventListener("scrollend",u)}},mS=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},pS=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const o=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class gS{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:cS,rangeExtractor:dS,onChange:()=>{},measureElement:mS,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=Ks(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=n[o];if(s.has(l.lane))continue;const u=i.get(l.lane);if(u==null||l.end>u.end?i.set(l.lane,l):l.end<u.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=Ks(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,s,i,o,l)=>(this.prevLanes!==void 0&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=Ks(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l},u)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const g of this.laneAssignments.keys())g>=n&&this.laneAssignments.delete(g);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(g=>{this.itemSizeCache.set(g.key,g.size)}));const d=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const f=this.measurementsCache.slice(0,d),m=new Array(l).fill(void 0);for(let g=0;g<d;g++){const b=f[g];b&&(m[b.lane]=g)}for(let g=d;g<n;g++){const b=i(g),w=this.laneAssignments.get(g);let E,L;if(w!==void 0&&this.options.lanes>1){E=w;const v=m[E],S=v!==void 0?f[v]:void 0;L=S?S.end+this.options.gap:r+s}else{const v=this.options.lanes===1?f[g-1]:this.getFurthestMeasurement(f,g);L=v?v.end+this.options.gap:r+s,E=v?v.lane:g%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(g,E)}const y=u.get(b),h=typeof y=="number"?y:this.options.estimateSize(g),p=L+h;f[g]={index:g,start:L,size:h,end:p,key:b,lane:E},m[E]=g}return this.measurementsCache=f,f},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Ks(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?vS({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Ks(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,o)=>i===null||o===null?[]:n({startIndex:i,endIndex:o,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=Ks(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,o=n.length;i<o;i++){const l=n[i],u=r[l];s.push(u)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return Im(r[vy(0,r.length-1,s=>Im(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(s.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const o=10,l=d=>{if(!this.targetWindow)return;const f=this.getOffsetForIndex(n,d);if(!f){console.warn("Failed to get offset for index:",n);return}const[m,g]=f;this._scrollToOffset(m,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const b=this.getScrollOffset(),w=this.getOffsetForIndex(n,g);if(!w){console.warn("Failed to get offset for index:",n);return}aS(w[0],b)||u(g)})},u=d=>{this.targetWindow&&(i++,i<o?this.targetWindow.requestAnimationFrame(()=>l(d)):console.warn(`Failed to scroll to index ${n} after ${o} attempts.`))};l(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}s=Math.max(...i.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const vy=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function vS({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const s=e.length-1,i=u=>e[u].start;if(e.length<=r)return{startIndex:0,endIndex:s};let o=vy(0,s,i,n),l=o;if(r===1)for(;l<s&&e[l].end<n+t;)l++;else if(r>1){const u=Array(r).fill(0);for(;l<s&&u.some(f=>f<n+t);){const f=e[l];u[f.lane]=f.end,l++}const d=Array(r).fill(n+t);for(;o>=0&&d.some(f=>f>=n);){const f=e[o];d[f.lane]=f.start,o--}o=Math.max(0,o-o%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const Dm=typeof document<"u"?c.useLayoutEffect:c.useEffect;function yS(e){const t=c.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var o;i?If.flushSync(t):t(),(o=e.onChange)==null||o.call(e,s,i)}},[r]=c.useState(()=>new gS(n));return r.setOptions(n),Dm(()=>r._didMount(),[]),Dm(()=>r._willUpdate()),r}function xS(e){return yS({observeElementRect:fS,observeElementOffset:hS,scrollToFn:pS,...e})}function wS({containerW:e,gap:t,targetCell:n,aspect:r,captionH:s}){const i=Math.max(1,Math.floor((e+t)/(n+t))),o=(e-t*(i-1))/i,l=o*r.h/r.w,u=l+s+t;return{columns:i,cellW:o,mediaH:l,rowH:u}}const SS=1.333;function bS({items:e,containerWidth:t,targetHeight:n,gap:r,captionH:s}){if(t<=0)return[];const i=[];let o=[],l=0;const u=(d,f)=>({index:i.length,height:f+s+r,imageH:f,items:d.map(m=>({item:m.item,displayW:m.aspect*f,displayH:f,originalIndex:m.originalIndex}))});for(let d=0;d<e.length;d++){const f=e[d],m=f.w>0&&f.h>0?f.w/f.h:SS;o.push({item:f,aspect:m,originalIndex:d}),l+=m;const g=(o.length-1)*r;if(l*n+g>=t){const w=(t-g)/l;i.push(u(o,w)),o=[],l=0}}return o.length>0&&i.push(u(o,n)),i}function CS(e,t,n){return{mode:"adaptive",rows:bS({items:t,containerWidth:e,targetHeight:n.targetCell,gap:n.gap,captionH:n.captionH})}}function kS(e,t,n){const{columns:r,cellW:s,mediaH:i,rowH:o}=wS({containerW:e,gap:n.gap,targetCell:n.targetCell,aspect:n.aspect,captionH:n.captionH}),l=Math.ceil(t.length/Math.max(1,r));return{mode:"grid",columns:r,cellW:s,mediaH:i,rowH:o,rowCount:l}}function ES(e,t,n){const[r,s]=c.useState(0);c.useLayoutEffect(()=>{const u=e.current;if(!u)return;const d=()=>{const m=getComputedStyle(u),g=u.clientWidth-parseFloat(m.paddingLeft)-parseFloat(m.paddingRight);s(g)},f=new ResizeObserver(d);return f.observe(u),d(),()=>f.disconnect()},[]);const i=c.useMemo(()=>n.viewMode==="adaptive"?CS(r,t,n):kS(r,t,n),[r,t,n.viewMode,n.gap,n.targetCell,n.aspect.w,n.aspect.h,n.captionH]),o=xS({count:i.mode==="adaptive"?i.rows.length:i.rowCount,getScrollElement:()=>e.current,estimateSize:u=>i.mode==="adaptive"?i.rows[u].height:i.rowH,overscan:8}),l=o.getVirtualItems();return c.useEffect(()=>{o.measure()},[i,o]),{width:r,layout:i,rowVirtualizer:o,virtualRows:l}}function NS(e,t,n,r){if(!e.length)return null;const s=n?e.findIndex(l=>l.path===n):0,i=Math.max(1,t);let o=s;if(r.key==="ArrowRight"||r.key==="d")o=Math.min(e.length-1,s+1);else if(r.key==="ArrowLeft"||r.key==="a")o=Math.max(0,s-1);else if(r.key==="ArrowDown"||r.key==="s")o=Math.min(e.length-1,s+i);else if(r.key==="ArrowUp"||r.key==="w")o=Math.max(0,s-i);else return r.key==="Enter"&&n?"open":null;return o}function jS(e,t,n){const r=[];for(const s of e){if(t.mode==="adaptive"){const l=t.rows[s.index];if(!l)continue;for(const u of l.items)r.push(u.item.path);continue}const i=s.index*t.columns,o=n.slice(i,i+t.columns);for(const l of o)r.push(l.path)}return Array.from(new Set(r))}const er=12,MS=44,RS={w:4,h:3},LS=350,PS=120;function TS(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function _S({items:e,selected:t,restoreToSelectionToken:n,onSelectionChange:r,onOpenViewer:s,onContextMenuItem:i,highlight:o,recentlyUpdated:l,onVisiblePathsChange:u,suppressSelectionHighlight:d=!1,viewMode:f="grid",targetCellSize:m=220,scrollRef:g,hideScrollbar:b=!1}){const[w,E]=c.useState(null),[L,y]=c.useState(null),[h,p]=c.useState(!1),[v,S]=c.useState(null),[R,j]=c.useState(null),k=c.useRef(null),P=c.useRef(null),N=c.useRef(null),F=g??N,B=c.useRef(null),A=c.useRef(new Set),ee=m,{width:de,layout:T,rowVirtualizer:me,virtualRows:D}=ES(F,e,{gap:er,targetCell:ee,aspect:RS,captionH:MS,viewMode:f}),H=c.useMemo(()=>{const z=new Map;for(let ne=0;ne<e.length;ne++)z.set(e[ne].path,ne);return z},[e]),X=c.useMemo(()=>{if(T.mode!=="adaptive")return null;const z=new Map;return T.rows.forEach((ne,ie)=>{let U=0;ne.items.forEach((J,he)=>{const te=U+J.displayW/2;z.set(J.item.path,{row:ie,center:te,order:he}),U+=J.displayW+er})}),z},[T]);c.useEffect(()=>{if(!t.length)return;const z=t[0];v!==z&&S(z)},[t,v]);const le=c.useMemo(()=>{if(T.mode!=="adaptive")return null;let z=0;return T.rows.map(ne=>{const ie=z;return z+=ne.height,{start:ie,height:ne.height}})},[T]),fe=c.useRef(null),Le=(z,ne)=>{try{if(fe.current!=null){try{cancelAnimationFrame(fe.current)}catch{}fe.current=null}const ie=z.scrollTop,U=ne-ie;if(Math.abs(U)<1){z.scrollTop=ne;return}const J=140,he=performance.now(),te=ke=>1-Math.pow(1-ke,3),ge=ke=>{const Te=Math.min(1,(ke-he)/J),Se=te(Te);z.scrollTop=ie+U*Se,Te<1?fe.current=requestAnimationFrame(ge):fe.current=null};fe.current=requestAnimationFrame(ge)}catch{z.scrollTop=ne}},[Q,K]=c.useState(!1);c.useEffect(()=>{const z=F.current;if(!z)return;let ne=0;const ie=()=>{K(!0),window.clearTimeout(ne),ne=window.setTimeout(()=>K(!1),PS)};return z.addEventListener("scroll",ie,{passive:!0}),()=>z.removeEventListener("scroll",ie)},[]);const re=()=>{P.current!=null&&(window.clearTimeout(P.current),P.current=null)},ae=()=>{if(re(),p(!1),E(null),k.current){try{URL.revokeObjectURL(k.current)}catch{}k.current=null}y(null)},Re=z=>{Q||(re(),E(z),p(!1),P.current=window.setTimeout(async()=>{P.current=null;try{const ne=await ye.getFile(z),ie=URL.createObjectURL(ne);if(k.current)try{URL.revokeObjectURL(k.current)}catch{}k.current=ie,y(ie),p(!0)}catch{}},LS))},Ae=T.mode==="grid"?T.columns:Math.max(1,Math.floor(de/(ee+er))),Qe=(z,ne)=>{if(T.mode!=="adaptive")return null;const ie=T.rows[z];if(!ie)return null;let U=0,J=null;for(const he of ie.items){const te=U+he.displayW/2,ge=Math.abs(te-ne);(!J||ge<J.dist)&&(J={path:he.item.path,dist:ge}),U+=he.displayW+er}return J?J.path:null},Pe=(z,ne)=>{var Se,ht,ut,Ie;if(!e.length)return null;const ie=z??e[0].path;if(T.mode!=="adaptive"){const Qn=NS(e,Ae,ie,ne);return Qn==="open"||Qn==null?Qn:((Se=e[Qn])==null?void 0:Se.path)??null}const U=X==null?void 0:X.get(ie);if(!U)return ie;const J=H.get(ie)??0,he=ne.key;if(he==="Enter")return"open";if(he==="ArrowRight"||he==="d")return((ht=e[Math.min(e.length-1,J+1)])==null?void 0:ht.path)??ie;if(he==="ArrowLeft"||he==="a")return((ut=e[Math.max(0,J-1)])==null?void 0:ut.path)??ie;const te=he==="ArrowDown"||he==="s"?1:he==="ArrowUp"||he==="w"?-1:0;if(te===0)return null;const ge=U.row+te;if(ge<0||ge>=(((Ie=T.rows)==null?void 0:Ie.length)??0))return ie;const ke=U.center;return Qe(ge,ke)??ie},it=z=>{var ne;try{(ne=document.getElementById(`cell-${encodeURIComponent(z)}`))==null||ne.focus()}catch{}},Ke=c.useCallback(z=>{try{ye.prefetchThumb(z)}catch{}},[]),ot=(z,ne)=>{S(z),j(z);const ie=!!ne.shiftKey,U=!!(ne.ctrlKey||ne.metaKey);if(ie){const J=B.current??v??t[0]??z,he=H.get(J)??e.findIndex(ge=>ge.path===J),te=H.get(z)??e.findIndex(ge=>ge.path===z);if(he!==-1&&te!==-1){const ge=Math.min(he,te),ke=Math.max(he,te),Te=e.slice(ge,ke+1).map(Se=>Se.path);if(U){const Se=new Set(t);for(const ht of Te)Se.add(ht);r(Array.from(Se))}else r(Te)}else r([z])}else if(U){const J=new Set(t);J.has(z)?J.delete(z):J.add(z),r(Array.from(J)),B.current=z}else r([z]),B.current=z;Q||Ke(z),it(z)},Ot=(z,ne)=>{var ie,U;try{const J=sn.has(z)&&t.length>0?t:[z];(ie=ne.dataTransfer)==null||ie.setData("application/x-lenslet-paths",JSON.stringify(J)),ne.dataTransfer&&(ne.dataTransfer.effectAllowed="copyMove");try{document.body.classList.add("drag-active")}catch{}const te=ne.currentTarget.querySelector(".cell-content img"),ge=document.createElement("div");ge.className="drag-ghost";const ke=document.createElement("img");ke.draggable=!1,ke.alt="drag",te&&te.src&&(ke.src=te.src),ge.appendChild(ke),document.body.appendChild(ge);const Te=ge.getBoundingClientRect().width||150;(U=ne.dataTransfer)==null||U.setDragImage(ge,Math.round(Te/2),0);const Se=()=>{try{ge.remove()}catch{}try{document.body.classList.remove("drag-active")}catch{}window.removeEventListener("dragend",Se),window.removeEventListener("pointerup",Se),document.removeEventListener("visibilitychange",Se)};window.addEventListener("dragend",Se),window.addEventListener("pointerup",Se),document.addEventListener("visibilitychange",Se)}catch{}};c.useEffect(()=>{const z=F.current;if(!z)return;const ne=ie=>{var Se,ht,ut;const U=Pe(R,ie);if(U==null)return;if(ie.preventDefault(),U==="open"){R&&s(R);return}const J=e.find(Ie=>Ie.path===U);if(!J)return;j(J.path),S(J.path),r([J.path]);try{B.current=J.path}catch{}const he=T.mode==="grid"?Math.floor((H.get(J.path)??0)/Math.max(1,T.columns)):((Se=X==null?void 0:X.get(J.path))==null?void 0:Se.row)??0,te=z.scrollTop,ge=te+z.clientHeight,ke=T.mode==="adaptive"?((ht=le==null?void 0:le[he])==null?void 0:ht.start)??0:he*T.rowH,Te=T.mode==="adaptive"?ke+(((ut=le==null?void 0:le[he])==null?void 0:ut.height)??0):ke+T.rowH;(ke<te||Te>ge)&&Le(z,ke),it(J.path)};return z.addEventListener("keydown",ne),()=>{z.removeEventListener("keydown",ne)}},[e,R,Ae,s,T,X,le,H]),c.useLayoutEffect(()=>{var he;const z=F.current;if(!z||!n||!t||t.length===0)return;const ne=t[0],ie=H.get(ne);if(ie==null||ie<0)return;let U=0;if(T.mode==="grid")U=Math.floor(ie/Math.max(1,T.columns));else{let te=0,ge=T.rows.length-1;for(;te<=ge;){const ke=te+ge>>1,Te=T.rows[ke];if(ie>=Te.items[0].originalIndex&&ie<=Te.items[Te.items.length-1].originalIndex){U=ke;break}ie<Te.items[0].originalIndex?ge=ke-1:te=ke+1}}const J=T.mode==="adaptive"?((he=le==null?void 0:le[U])==null?void 0:he.start)??0:U*T.rowH;try{z.scrollTop=J}catch{}},[n,T,le]);const sn=c.useMemo(()=>new Set(t),[t]),on=!!(w&&L&&h),At=c.useMemo(()=>jS(D,T,e),[e,T,D]);c.useEffect(()=>{if(!(Q||At.length===0))for(const z of At)Ke(z)},[Q,At,Ke]),c.useEffect(()=>{var z;(z=F.current)==null||z.focus()},[]),c.useEffect(()=>{var z;if(d){try{(z=F.current)==null||z.blur()}catch{}try{j(null)}catch{}}},[d]);const lt=c.useMemo(()=>{const z=new Set;for(const ne of D){if(T.mode==="adaptive"){const J=T.rows[ne.index];if(!J)continue;for(const he of J.items)z.add(he.item.path);continue}const ie=ne.index*T.columns,U=Math.min(e.length,ie+T.columns);for(let J=ie;J<U;J+=1){const he=e[J];he&&z.add(he.path)}}return z},[e,T,D]);c.useEffect(()=>{u&&(TS(A.current,lt)||(A.current=lt,u(lt)))},[u,lt]);const at=R?`cell-${encodeURIComponent(R)}`:void 0;return a.jsx("div",{role:"grid","aria-label":"Gallery",className:`relative h-full overflow-auto p-3 outline-none ${b?"scrollbar-hidden pr-4":"scrollbar-thin"} ${on?"cursor-zoom-in":""}`,ref:F,tabIndex:0,"aria-activedescendant":at,onMouseDown:()=>{var z;return(z=F.current)==null?void 0:z.focus()},style:{"--gap":`${er}px`},children:a.jsxs("div",{className:"relative w-full",style:{height:me.getTotalSize()},children:[D.map(z=>{var he;let ne=[],ie={},U="";if(T.mode==="adaptive"){const te=T.rows[z.index];if(!te)return null;ne=te.items,ie={height:te.height,transform:`translate3d(0, ${z.start}px, 0)`,display:"flex",gap:er,paddingBottom:er},U="absolute top-0 left-0 right-0 w-full will-change-transform"}else{const te=z.index*T.columns;ne=e.slice(te,te+T.columns).map(ke=>({item:ke,displayW:T.cellW,displayH:T.mediaH})),ie={transform:`translate3d(0, ${z.start}px, 0)`,gridTemplateColumns:`repeat(${T.columns}, minmax(0, 1fr))`,gap:er,paddingBottom:er},U="absolute top-0 left-0 right-0 w-full grid will-change-transform"}const J=z.index===((he=D[0])==null?void 0:he.index);return a.jsx("div",{className:U,role:"row",style:ie,children:ne.map(({item:te,displayW:ge,displayH:ke})=>{const Te=!d&&(v===te.path||sn.has(te.path)),Se=(l==null?void 0:l.get(te.path))??null,ht=Se!=null,ut=T.mode==="adaptive"?{width:ge}:{},Ie=T.mode==="adaptive"?{height:ke}:{},Qn=T.mode==="adaptive"?"relative rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group shrink-0":"relative aspect-[4/3] rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group";return a.jsxs("div",{id:`cell-${encodeURIComponent(te.path)}`,className:`relative min-w-0 ${Te?"outline outline-2 outline-accent outline-offset-2 rounded-[10px]":""}`,role:"gridcell","aria-selected":Te,tabIndex:R===te.path?0:-1,onFocus:()=>j(te.path),draggable:!0,style:ut,onDragStart:qe=>Ot(te.path,qe),onDragEnd:()=>{},onContextMenu:qe=>{qe.preventDefault(),qe.stopPropagation(),i&&i(qe,te.path)},children:[a.jsxs("div",{className:Qn,style:Ie,onDoubleClick:()=>s(te.path),onMouseLeave:ae,children:[a.jsx("div",{className:"cell-content absolute inset-0",children:a.jsx(lS,{path:te.path,name:te.name,selected:Te,highlighted:ht,highlightKey:Se,displayW:ge,displayH:ke,ioRoot:F.current,isScrolling:Q,priority:J,onClick:qe=>ot(te.path,qe)})}),a.jsx("div",{className:"absolute right-0 bottom-0 w-7 h-7 cursor-zoom-in",onMouseEnter:()=>Re(te.path),onMouseLeave:ae,children:a.jsx("div",{className:"absolute right-0 bottom-0 h-[18px] w-[18px] flex items-center justify-center text-text select-none opacity-0 group-hover:opacity-50 hover:opacity-100 transition-all duration-[140ms]",style:{clipPath:'path("M0 9C0 4.02944 4.02944 0 9 0H18V18H0V9Z")',background:"linear-gradient(135deg, rgba(18,18,18,0.9) 0%, rgba(34,34,34,0.9) 60%, rgba(22,22,22,0.9) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",borderLeft:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 1px 2px rgba(0,0,0,0.45)",backdropFilter:"blur(1px)"},children:a.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#d9dce2]","aria-hidden":"true",style:{transform:"translate(0px,0px)"},children:[a.jsx("circle",{cx:"11",cy:"11",r:"5.4"}),a.jsx("path",{d:"M15.5 15.5 L19 19"})]})})})]}),a.jsxs("div",{className:"flex flex-col items-center text-center gap-0 mt-1 px-0.5 text-white/90",children:[a.jsx("div",{className:"text-sm leading-[18px] thumb-filename line-clamp-2 break-words hyphens-auto text-center",title:te.name,children:(()=>{const qe=(o||"").trim();if(!qe)return te.name;const be=te.name,yn=be.toLowerCase().indexOf(qe.toLowerCase());if(yn===-1)return te.name;const $s=be.slice(0,yn),Bs=be.slice(yn,yn+qe.length),yt=be.slice(yn+qe.length);return a.jsxs(a.Fragment,{children:[$s,a.jsx("mark",{className:"bg-accent/20 text-inherit rounded px-0.5",children:Bs}),yt]})})()}),a.jsxs("div",{className:"text-[11px] leading-[15px] opacity-70",children:[te.w,"  ",te.h]})]})]},te.path)})},z.key)}),w&&L&&h&&If.createPortal(a.jsx("div",{className:"toolbar-offset fixed inset-0 z-[999] flex items-center justify-center pointer-events-none bg-black/20 opacity-100",children:a.jsx("img",{src:L,alt:"preview",className:"max-w-[80vw] max-h-[80vh] object-contain opacity-[0.98]"})}),document.body)]},`${f}-${Ae}`)})}const IS=48,FS=[.1,.24,.5,.74,.9];function OS({items:e,metricKey:t,scrollRef:n,sortDir:r}){const{orderedValues:s,numericValues:i}=c.useMemo(()=>{var N;const k=[],P=[];for(const F of e){const B=(N=F.metrics)==null?void 0:N[t],A=B==null||Number.isNaN(B)?null:B;k.push(A),A!=null&&P.push(A)}return{orderedValues:k,numericValues:P}},[e,t]),o=c.useMemo(()=>AS(i,IS),[i]),l=c.useMemo(()=>DS(i,FS),[i]),[u,d]=c.useState(0),[f,m]=c.useState(null),[g,b]=c.useState(!1),w=c.useRef(null);if(c.useEffect(()=>{const k=n.current;if(!k)return;const P=()=>{const N=Math.max(1,k.scrollHeight-k.clientHeight),F=vs(N>0?k.scrollTop/N:0);d(F)};return P(),k.addEventListener("scroll",P,{passive:!0}),window.addEventListener("resize",P),()=>{k.removeEventListener("scroll",P),window.removeEventListener("resize",P)}},[n,e.length]),c.useEffect(()=>{m(null)},[t,e.length]),!o)return null;const E={min:o.min,max:o.max},L=f!=null?$m(f):null,y=$m(u),h=r==="desc",p=c.useMemo(()=>f==null?null:BS(s,f),[s,f]);function v(k){m(vs(k))}function S(){m(null)}function R(k){const P=n.current;if(!P)return;const N=Math.max(0,P.scrollHeight-P.clientHeight);P.scrollTop=vs(k)*N}function j(k){var N;const P=(N=w.current)==null?void 0:N.getBoundingClientRect();return P?vs((k.clientY-P.top)/P.height):null}return a.jsxs("div",{className:"absolute right-0 top-3 bottom-3 w-[14px] flex items-stretch pointer-events-auto",children:[a.jsxs("svg",{ref:w,viewBox:"0 0 10 100",preserveAspectRatio:"none",className:"w-full h-full rounded bg-surface-inset border border-border/60 cursor-ns-resize",onPointerDown:k=>{var N;k.preventDefault();const P=j(k);P!=null&&(b(!0),v(P),R(P),(N=w.current)==null||N.setPointerCapture(k.pointerId))},onPointerMove:k=>{const P=j(k);if(P==null){g||S();return}v(P),g&&R(P)},onPointerUp:k=>{var P;b(!1),(P=w.current)==null||P.releasePointerCapture(k.pointerId)},onPointerLeave:()=>{g||S()},children:[zS(o.bins,"var(--border-strong)",{flip:h}),$S(l,E,{flip:h,color:"var(--muted)"}),zm(y,{color:"var(--highlight)",strokeWidth:.8}),L!=null&&zm(L,{color:"var(--text-secondary)",strokeWidth:.6,dashed:!0})]}),p!=null&&f!=null&&a.jsx("div",{className:"pointer-events-none absolute right-full mr-2 px-1.5 py-0.5 rounded border border-border bg-surface text-[10px] text-text shadow",style:{top:`calc(${(f*100).toFixed(2)}% - 8px)`},children:VS(p)})]})}function AS(e,t){if(!e.length)return null;const n=Math.min(...e);let r=Math.max(...e);n===r&&(r=n+1);const s=new Array(t).fill(0),i=t/(r-n);for(const o of e){const l=Math.max(0,Math.min(t-1,Math.floor((o-n)*i)));s[l]+=1}return{bins:s,min:n,max:r}}function DS(e,t){if(!e.length)return[];const n=[...e].sort((s,i)=>s-i),r=n.length-1;return t.map(s=>{const i=r*s,o=Math.floor(i),l=Math.ceil(i);if(o===l)return n[o];const u=i-o;return n[o]+(n[l]-n[o])*u})}function zS(e,t,n){const r=Math.max(1,...e),s=100/e.length,i=(n==null?void 0:n.flip)??!1;return e.map((o,l)=>{const u=Math.max(.8,o/r*10),d=(i?e.length-1-l:l)*s;return a.jsx("rect",{x:10-u,y:d,width:u,height:Math.max(.2,s-.2),fill:t,opacity:.9},`sb-${l}`)})}function $S(e,t,n){const r=(n==null?void 0:n.flip)??!1,s=n==null?void 0:n.color;return e.map((i,o)=>{const l=US(i,t,r),u=o===2;return a.jsx("line",{x1:0,y1:l,x2:10,y2:l,stroke:s,strokeWidth:u?.8:.5,opacity:u?.9:.6,vectorEffect:"non-scaling-stroke"},`qt-${o}-${i}`)})}function zm(e,t){return a.jsx("line",{x1:0,y1:e,x2:10,y2:e,stroke:t.color,strokeWidth:t.strokeWidth??.6,strokeDasharray:t.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function BS(e,t){if(!e.length)return null;const n=Math.round(vs(t)*(e.length-1)),r=e[n];if(r!=null)return r;for(let s=1;s<e.length;s++){const i=n-s;if(i>=0&&e[i]!=null)return e[i];const o=n+s;if(o<e.length&&e[o]!=null)return e[o]}return null}function US(e,t,n){const r=t.max-t.min;if(r===0)return 0;const s=vs((e-t.min)/r);return(n?1-s:s)*100}function $m(e){return vs(e)*100}function vs(e){return e<0?0:e>1?1:e}function VS(e){if(e==null||Number.isNaN(e))return"-";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function ys(e,t){const[n,r]=c.useState(null),s=c.useRef(null);return c.useEffect(()=>{if(!e){if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}r(null);return}let i=!0;return e().then(o=>{if(!i)return;const l=URL.createObjectURL(o);if(s.current)try{URL.revokeObjectURL(s.current)}catch{}s.current=l,r(l)}).catch(()=>{}),()=>{i=!1}},t),c.useEffect(()=>()=>{if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}},[]),n}function HS(){const[e,t]=c.useState(1),[n,r]=c.useState(0),[s,i]=c.useState(0),[o,l]=c.useState(1),[u,d]=c.useState(!1),[f,m]=c.useState(!1),[g,b]=c.useState(!1),w=c.useRef(null),E=c.useRef(null),L=()=>{const p=w.current,v=E.current;if(!p||!v||!v.naturalWidth||!v.naturalHeight)return;const S=p.getBoundingClientRect(),R=S.width/v.naturalWidth,j=S.height/v.naturalHeight,k=Math.min(1,Math.min(R,j));l(k);const P=v.naturalWidth*k,N=v.naturalHeight*k;r((S.width-P)/2),i((S.height-N)/2)};return c.useEffect(()=>{const p=w.current;if(!p)return;const v=new ResizeObserver(()=>{try{requestAnimationFrame(()=>L())}catch{L()}});return v.observe(p),()=>v.disconnect()},[]),{scale:e,setScale:t,tx:n,setTx:r,ty:s,setTy:i,base:o,setBase:l,ready:u,setReady:d,dragging:f,setDragging:m,visible:g,setVisible:b,containerRef:w,imgRef:E,fitAndCenter:L,handleWheel:p=>{p.preventDefault();const v=p.deltaY>0?-1:1,S=1.2,R=.05,j=8,k=w.current;if(!k)return;const P=k.getBoundingClientRect(),N=p.clientX-P.left,F=p.clientY-P.top;t(B=>{const A=Math.min(j,Math.max(R,B*Math.pow(S,v))),ee=A/B;return r(de=>N-ee*(N-de)),i(de=>F-ee*(F-de)),Number(A.toFixed(4))})},handleMouseDown:p=>{const v=w.current,S=E.current;if(!v||!S||p.target!==S)return;const j=v.getBoundingClientRect();if(p.clientX<j.left||p.clientX>j.right||p.clientY<j.top||p.clientY>j.bottom)return;p.preventDefault(),p.stopPropagation(),m(!0);const k=p.clientX,P=p.clientY,N=n,F=s,B=ee=>{r(N+(ee.clientX-k)),i(F+(ee.clientY-P))},A=()=>{window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",A),m(!1)};window.addEventListener("mousemove",B),window.addEventListener("mouseup",A)}}}function WS({path:e,onClose:t,onNavigate:n,onZoomChange:r,requestedZoomPercent:s,onZoomRequestConsumed:i}){const{scale:o,setScale:l,tx:u,setTx:d,ty:f,setTy:m,base:g,ready:b,setReady:w,dragging:E,visible:L,setVisible:y,containerRef:h,imgRef:p,fitAndCenter:v,handleWheel:S,handleMouseDown:R}=HS(),j=ys(()=>ye.getFile(e),[e]),k=ys(()=>ye.getThumb(e),[e]),P=c.useCallback(()=>{y(!1),window.setTimeout(t,110)},[t,y]);return c.useEffect(()=>{requestAnimationFrame(()=>{var N;y(!0),(N=h.current)==null||N.focus()})},[e]),c.useEffect(()=>{const N=F=>{F.key==="Escape"?P():(F.key==="ArrowRight"||F.key==="d")&&n?n(1):(F.key==="ArrowLeft"||F.key==="a")&&n&&n(-1)};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[t,n]),c.useEffect(()=>{w(!1)},[j]),c.useEffect(()=>{r&&r(g*o*100)},[g,o,r]),c.useEffect(()=>{if(s==null)return;const N=h.current;if(!N){i&&i();return}const F=Math.max(.05,Math.min(8,s/100/Math.max(1e-6,g))),B=N.getBoundingClientRect(),A=B.width/2,ee=B.height/2;l(de=>{const T=F/de;return d(me=>A-T*(A-me)),m(me=>ee-T*(ee-me)),Number(F.toFixed(4))}),i&&i()},[s,g,i]),a.jsxs("div",{ref:h,role:"dialog","aria-modal":!0,"aria-label":"Image viewer",tabIndex:-1,className:`toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] flex items-start justify-start bg-panel z-viewer overflow-hidden transition-opacity duration-[110ms] ease-out cursor-grab focus:outline-none focus-visible:outline-none ${E?"cursor-grabbing select-none":""} ${L?"opacity-100":"opacity-0"}`,style:{outline:"none"},onClick:P,onWheel:S,onMouseDown:R,onKeyDown:N=>{N.key==="Tab"&&N.preventDefault()},children:[a.jsxs("button",{"aria-label":"Close",onClick:N=>{N.stopPropagation(),P()},className:"btn btn-sm absolute top-3 right-3 z-10",title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]}),k&&a.jsx("img",{src:k,alt:"thumb",className:"absolute top-0 left-0 max-w-none max-h-none object-contain pointer-events-none transition-opacity duration-[110ms] ease-out",draggable:!1,onDragStart:N=>N.preventDefault(),style:{transform:`translate(${u}px, ${f}px) scale(${g})`,transformOrigin:"0 0",opacity:b?0:.5,filter:"blur(0.25px)"}}),j&&a.jsx("img",{ref:p,src:j,alt:"viewer",className:"max-w-none max-h-none object-contain transition-opacity duration-[110ms] ease-out will-change-transform select-none",draggable:!1,onDragStart:N=>{N.preventDefault()},onLoad:N=>{v(),l(1);try{requestAnimationFrame(()=>w(!0))}catch{w(!0)}},onClick:N=>N.stopPropagation(),style:{transform:`translate(${u}px, ${f}px) scale(${g*o})`,transformOrigin:"0 0",opacity:b?.99:0,WebkitUserDrag:"none"}})]})}function Bf(e){return!e||!(e instanceof HTMLElement)?!1:e.closest('input, textarea, [contenteditable="true"]')!==null}const QS=1.2,KS=.05,qS=8;function YS(){const[e,t]=c.useState(1),[n,r]=c.useState(0),[s,i]=c.useState(0),[o,l]=c.useState(0),[u,d]=c.useState(0),[f,m]=c.useState(1),[g,b]=c.useState(1),[w,E]=c.useState(!1),L=c.useRef(null),y=c.useRef(null),h=c.useRef(null),p=c.useCallback(()=>{const j=L.current;if(!j)return;const k=j.getBoundingClientRect(),P=(N,F,B,A)=>{if(!N||!N.naturalWidth||!N.naturalHeight)return;const ee=k.width/N.naturalWidth,de=k.height/N.naturalHeight,T=Math.min(1,Math.min(ee,de)),me=N.naturalWidth*T,D=N.naturalHeight*T;F(T),B((k.width-me)/2),A((k.height-D)/2)};P(y.current,m,r,i),P(h.current,b,l,d)},[]);c.useEffect(()=>{const j=L.current;if(!j)return;const k=new ResizeObserver(()=>{try{requestAnimationFrame(()=>p())}catch{p()}});return k.observe(j),()=>k.disconnect()},[p]);const v=c.useCallback(()=>{t(1),p()},[p]),S=c.useCallback(j=>{j.preventDefault();const k=j.deltaY>0?-1:1,P=L.current;if(!P)return;const N=P.getBoundingClientRect(),F=j.clientX-N.left,B=j.clientY-N.top;t(A=>{const ee=Math.min(qS,Math.max(KS,A*Math.pow(QS,k))),de=ee/A;return r(T=>F-de*(F-T)),i(T=>B-de*(B-T)),l(T=>F-de*(F-T)),d(T=>B-de*(B-T)),Number(ee.toFixed(4))})},[]),R=c.useCallback(j=>{if(j.button!==0||!L.current)return;j.preventDefault(),E(!0);const P=j.clientX,N=j.clientY,F=n,B=s,A=o,ee=u,de=me=>{const D=me.clientX-P,H=me.clientY-N;r(F+D),i(B+H),l(A+D),d(ee+H)},T=()=>{window.removeEventListener("pointermove",de),window.removeEventListener("pointerup",T),E(!1)};window.addEventListener("pointermove",de),window.addEventListener("pointerup",T)},[n,s,o,u]);return{scale:e,baseA:f,baseB:g,txA:n,tyA:s,txB:o,tyB:u,dragging:w,containerRef:L,imgARef:y,imgBRef:h,fitAndCenter:p,resetView:v,handleWheel:S,handlePointerDown:R}}function GS({aItem:e,bItem:t,index:n,total:r,canPrev:s,canNext:i,onNavigate:o,onClose:l}){const u=c.useRef(null),[d,f]=c.useState(50),[m,g]=c.useState(!1),[b,w]=c.useState(!1),{scale:E,baseA:L,baseB:y,txA:h,tyA:p,txB:v,tyB:S,dragging:R,containerRef:j,imgARef:k,imgBRef:P,fitAndCenter:N,resetView:F,handleWheel:B,handlePointerDown:A}=YS(),ee=(e==null?void 0:e.path)??null,de=(t==null?void 0:t.path)??null,T=(e==null?void 0:e.name)??ee??"Select an image",me=(t==null?void 0:t.name)??de??"Select another image";c.useEffect(()=>{requestAnimationFrame(()=>{var K;return(K=u.current)==null?void 0:K.focus()})},[ee,de]),c.useEffect(()=>{F(),g(!1),w(!1)},[ee,de,F]),c.useEffect(()=>{const K=re=>{if(!Bf(re.target)){if(re.key==="Escape"){re.preventDefault(),l();return}if((re.key==="ArrowRight"||re.key==="d")&&i){re.preventDefault(),o(1);return}(re.key==="ArrowLeft"||re.key==="a")&&s&&(re.preventDefault(),o(-1))}};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[l,o,s,i]);const D=ys(ee?()=>ye.getFile(ee):null,[ee]),H=ys(de?()=>ye.getFile(de):null,[de]),X=ys(ee?()=>ye.getThumb(ee):null,[ee]),le=ys(de?()=>ye.getThumb(de):null,[de]),fe=c.useCallback(K=>Math.min(95,Math.max(5,K)),[]),Le=c.useCallback(K=>{const re=K.target;re!=null&&re.closest(".compare-label")||re!=null&&re.closest(".compare-divider-hit")||A(K)},[A]),Q=c.useCallback(K=>{const re=j.current;if(!re)return;K.preventDefault(),K.stopPropagation();const ae=re.getBoundingClientRect(),Re=K.currentTarget;Re.setPointerCapture(K.pointerId);const Ae=Pe=>{const it=(Pe.clientX-ae.left)/ae.width*100;f(fe(it))},Qe=Pe=>{Re.releasePointerCapture(Pe.pointerId),window.removeEventListener("pointermove",Ae),window.removeEventListener("pointerup",Qe)};window.addEventListener("pointermove",Ae),window.addEventListener("pointerup",Qe)},[fe]);return a.jsxs("div",{ref:u,role:"dialog","aria-modal":!0,"aria-label":"Compare images",tabIndex:-1,className:"toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] bg-panel z-viewer flex flex-col overflow-hidden focus:outline-none",onKeyDown:K=>{K.key==="Tab"&&K.preventDefault()},children:[a.jsxs("div",{className:"compare-header flex items-center gap-3 px-3 py-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Compare"}),a.jsx("div",{className:"text-xs text-muted",children:r>=2?`${n+1}-${Math.min(n+2,r)} of ${r}`:"Select 2 images"}),a.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(-1),disabled:!s,title:"Previous (Left Arrow or A)",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Prev"]}),a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(1),disabled:!i,title:"Next (Right Arrow or D)",children:["Next",a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"btn btn-sm",onClick:l,title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]})]})]}),a.jsx("div",{className:"flex-1 min-h-0 p-3 bg-panel",children:a.jsx("div",{ref:j,className:`compare-stage ${R?"is-dragging":""}`,onWheel:B,onPointerDown:Le,children:!e||!t?a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-sm text-muted",children:"Select 2 images to compare."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"compare-label left-3",children:[a.jsx("span",{className:"compare-label-tag",children:"A"}),a.jsx("span",{className:"truncate",title:e.path,children:T})]}),a.jsxs("div",{className:"compare-label right-3",children:[a.jsx("span",{className:"compare-label-tag",children:"B"}),a.jsx("span",{className:"truncate",title:t.path,children:me})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 ${100-d}% 0 0)`},children:[X&&a.jsx("img",{src:X,alt:"thumb A",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:K=>K.preventDefault(),style:{transform:`translate(${h}px, ${p}px) scale(${L})`,transformOrigin:"0 0",opacity:m?0:.5}}),D&&a.jsx("img",{ref:k,src:D,alt:"compare A",className:"compare-image",draggable:!1,onDragStart:K=>K.preventDefault(),onLoad:()=>{N();try{requestAnimationFrame(()=>g(!0))}catch{g(!0)}},style:{transform:`translate(${h}px, ${p}px) scale(${L*E})`,transformOrigin:"0 0",opacity:m?.99:0}})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 0 0 ${d}%)`},children:[le&&a.jsx("img",{src:le,alt:"thumb B",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:K=>K.preventDefault(),style:{transform:`translate(${v}px, ${S}px) scale(${y})`,transformOrigin:"0 0",opacity:b?0:.5}}),H&&a.jsx("img",{ref:P,src:H,alt:"compare B",className:"compare-image",draggable:!1,onDragStart:K=>K.preventDefault(),onLoad:()=>{N();try{requestAnimationFrame(()=>w(!0))}catch{w(!0)}},style:{transform:`translate(${v}px, ${S}px) scale(${y*E})`,transformOrigin:"0 0",opacity:b?.99:0}})]}),a.jsxs("div",{className:"compare-divider-hit",style:{left:`${d}%`},onPointerDown:Q,children:[a.jsx("div",{className:"compare-divider-line"}),a.jsx("div",{className:"compare-divider-handle"})]})]})})})]})}function cu(){const[e,t]=c.useState(nS());return c.useEffect(()=>tS(t),[]),e}const Ho=e=>["item",e],XS={v:1,tags:[],notes:"",version:1,updated_at:"",updated_by:"web"},bn=new Map,oa=new Map,jd=new Map,Uf=new Map;let Bm=0;const Wn=new Map,ho=new Map,JS=12e3,Md=new Set,Rd=new Set;let Vf={state:"idle"},Wo=null,Ld=0;function Ul(e){Vf=e;for(const t of Md)t(e)}function dr(){const e=Wn.size>0,t=bn.size+oa.size+Ld;if(e){Ul({state:"error",message:"Conflict detected"});return}if(Wo){Ul({state:"error",message:Wo});return}if(t>0){Ul({state:"syncing"});return}Ul({state:"idle"})}function Hf(){let e=null;for(const t of jd.values())e=e==null?t:Math.min(e,t);for(const t of Uf.values())e=e==null?t:Math.min(e,t);return e}function $a(){const e=Hf();for(const t of Rd)t(e)}function Ba(e){Wo=e,dr()}function yy(){Wo&&(Wo=null,dr())}function Um(e){Ld=Math.max(0,Ld+e),dr()}function ZS(){Bm+=1;const e=Bm;return Uf.set(e,Date.now()),$a(),e}function eb(e){e!=null&&Uf.delete(e)&&$a()}function du(e){const t=ho.get(e);if(!t||!t.size)return;const n=Wn.get(e)??null;for(const r of t)r(n)}function Vm(e){return Wn.get(e)??null}function fu(e){Wn.delete(e)&&(du(e),dr())}function tb(e,t){Wn.set(e,t),du(e),dr()}function nb(e,t){const n=ho.get(e)??new Set;return n.add(t),ho.set(e,n),t(Wn.get(e)??null),()=>{const r=ho.get(e);r&&(r.delete(t),r.size||ho.delete(e))}}function rb(e){const[t,n]=c.useState(()=>e?Vm(e):null);return c.useEffect(()=>{if(!e){n(null);return}return n(Vm(e)),nb(e,n)},[e]),t}function sb(e){return Md.add(e),e(Vf),()=>{Md.delete(e)}}function ib(){const[e,t]=c.useState(Vf);return c.useEffect(()=>sb(t),[]),e}function ob(e){return Rd.add(e),e(Hf()),()=>{Rd.delete(e)}}function lb(){const[e,t]=c.useState(()=>Hf()),[n,r]=c.useState(()=>e==null?null:Date.now()-e);return c.useEffect(()=>ob(t),[]),c.useEffect(()=>{if(e==null){r(null);return}r(Date.now()-e);const s=window.setInterval(()=>{r(Date.now()-e)},1e3);return()=>window.clearInterval(s)},[e]),n}function Pd(e){const t={};return Object.prototype.hasOwnProperty.call(e,"star")&&(t.set_star=e.star??null),Object.prototype.hasOwnProperty.call(e,"notes")&&(t.set_notes=e.notes??""),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.set_tags=Array.isArray(e.tags)?e.tags:[]),t}function Td(e){var t,n;return e.set_star!==void 0||e.set_notes!==void 0||e.set_tags!==void 0||(((t=e.add_tags)==null?void 0:t.length)??0)>0||(((n=e.remove_tags)==null?void 0:n.length)??0)>0}function so(e){const t=[],n=new Set;for(const r of e??[]){if(typeof r!="string")continue;const s=r.trim();!s||n.has(s)||(n.add(s),t.push(s))}return t}function ab(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}function ub(e,t){if(e.set_star!==void 0&&(t.star??null)!==e.set_star||e.set_notes!==void 0&&(t.notes??"")!==(e.set_notes??""))return!1;if(e.set_tags!==void 0){const r=so(e.set_tags),s=so(t.tags);return ab(r,s)}const n=so(t.tags);for(const r of so(e.add_tags))if(!n.includes(r))return!1;for(const r of so(e.remove_tags))if(n.includes(r))return!1;return!0}function xy(e,t,n){if(n instanceof Pn&&n.status===409){const r=n.body;if(r!=null&&r.current)return tb(e,{path:e,current:r.current,pending:t,receivedAt:new Date().toISOString()}),!0}return!1}function cb(e,t){const n=Wn.get(e);if(n){if(ub(n.pending,t)){fu(e);return}Wn.set(e,{...n,current:t}),du(e),dr()}}function db(e){const t=cu();return au({queryKey:Ho(e),queryFn:()=>ye.getSidecar(e),enabled:!!e,staleTime:3e4,gcTime:5*6e4,retry:2,refetchInterval:t?JS:!1,refetchIntervalInBackground:t})}function fb(e){const t=is();return R1({mutationFn:async({patch:n,baseVersion:r,idempotencyKey:s})=>{const i=Pd(n);if(!Td(i))return t.getQueryData(Ho(e))??XS;const o={...i,base_version:r};try{return await ye.patchSidecar(e,o,{idempotencyKey:s??Vo("patch"),ifMatch:r})}catch(l){throw xy(e,i,l),l}},retry:(n,r)=>r instanceof Pn&&r.status===409?!1:n<2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),4e3),onMutate:()=>(yy(),Um(1),{inflightId:ZS()}),onSuccess:n=>{fu(e),t.setQueryData(Ho(e),n)},onError:n=>{n instanceof Pn&&n.status===409||(n instanceof Pn?Ba(n.message):Ba("Failed to save"))},onSettled:(n,r,s,i)=>{Um(-1),eb(i==null?void 0:i.inflightId)}})}const hb=6;async function Hm(e,t){if(!e.length)return;let n=0;const r=[],s=async()=>{for(;n<e.length;){const o=n++,l=e[o];try{await wy(l,t)}catch(u){r.push({path:l,error:u}),console.error(`[bulkUpdateSidecars] Failed for ${l}:`,u)}}},i=Array.from({length:Math.min(hb,e.length)},()=>s());if(await Promise.all(i),r.length===e.length)throw new Error(`All ${e.length} sidecar updates failed`)}async function wy(e,t){const n=bn.get(e)||{};bn.set(e,{...n,...t}),yy(),dr();const r=oa.get(e);if(r)return r;jd.set(e,Date.now()),$a();const s=(async()=>{try{for(;bn.has(e);){const i=bn.get(e);if(!i)break;const o=Pd(i);if(!Td(o)){bn.get(e)===i&&bn.delete(e);continue}let l=1;try{l=(await ye.getSidecar(e)).version??1}catch{l=1}const u={...o,base_version:l};try{await ye.patchSidecar(e,u,{idempotencyKey:Vo("patch"),ifMatch:l}),fu(e),bn.get(e)===i&&bn.delete(e)}catch(d){if(xy(e,o,d)){const m=bn.get(e);if(m&&m!==i){const g=Pd(m);if(Td(g)){const b=Wn.get(e);b&&(Wn.set(e,{...b,pending:g}),du(e))}}bn.delete(e)}else d instanceof Pn?Ba(d.message):Ba("Failed to save");throw d}}}finally{oa.delete(e),jd.delete(e),$a(),dr()}})();return oa.set(e,s),dr(),s}function ic(e){const t=["B","KB","MB","GB","TB"];let n=0,r=e;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${r.toFixed(1)} ${t[n]}`}function oc(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function mb(e,t=28){if(e.length<=t)return e;const n=Math.max(4,Math.floor((t-1)/2));return`${e.slice(0,n)}${e.slice(-n)}`}const pb=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});function gb(e){const t=e.trim();return!t||/[zZ]|[+-]\d{2}:?\d{2}$/.test(t)?t:`${t.includes("T")?t:t.replace(" ","T")}Z`}function Sy(e){if(!e)return null;const t=Date.parse(gb(e));return Number.isFinite(t)?t:null}function vb(e,t=Date.now()){const n=Math.max(0,t-e),r=Math.max(1,Math.floor(n/1e3));if(r<60)return`${r} second${r===1?"":"s"} ago`;const s=Math.floor(r/60);if(s<60)return`${s} minute${s===1?"":"s"} ago`;const i=Math.floor(s/60);return`${i} hour${i===1?"":"s"} ago`}function yb(e){return pb.format(new Date(e))}function vi(e){if(Array.isArray(e))return e.map(vi);if(e&&typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,vi(n)]));if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")||t.startsWith('"')&&t.endsWith('"'))try{const r=JSON.parse(t);return vi(r)}catch{return e}}return e}function io(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function xb(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Wm(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}const Vl=2;function Co(e,t,n){if(e===null)return'<span style="color:var(--json-literal)">null</span>';if(e===void 0)return'<span style="color:var(--json-fallback)">undefined</span>';if(typeof e=="string")return`<span style="color:var(--json-string)">${io(JSON.stringify(e))}</span>`;if(typeof e=="number")return`<span style="color:var(--json-number)">${io(String(e))}</span>`;if(typeof e=="boolean")return`<span style="color:var(--json-literal)">${e?"true":"false"}</span>`;if(Array.isArray(e)){if(e.length===0)return"[]";const r=" ".repeat(n),s=" ".repeat(n+Vl);let i=`[
`;return e.forEach((o,l)=>{const u=Co(o,[...t,l],n+Vl);i+=`${s}${u}${l<e.length-1?",":""}
`}),i+=`${r}]`,i}if(hu(e)){const r=Object.keys(e);if(!r.length)return"{}";const s=" ".repeat(n),i=" ".repeat(n+Vl);let o=`{
`;return r.forEach((l,u)=>{const d=io(JSON.stringify([...t,l])),f=io(JSON.stringify(l)),m=`<span class="ui-json-key" data-json-path='${d}' style="color:var(--json-key)">${f}</span>`,g=Co(e[l],[...t,l],n+Vl);o+=`${i}${m}: ${g}${u<r.length-1?",":""}
`}),o+=`${s}}`,o}return`<span style="color:var(--json-fallback)">${io(String(e))}</span>`}function lc(e,t){if(!e)return null;const n=vi(e);if(!t&&hu(n)&&"pil_info"in n){const r={};for(const[s,i]of Object.entries(n))r[s]=s==="pil_info"?"Hidden (toggle Show PIL info to expand)":i;return r}return n}function Ua(e){return e==null?String(e):typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):Array.isArray(e)?`[${e.map(Ua).join(",")}]`:typeof e=="object"?`{${Object.entries(e).sort(([n],[r])=>n.localeCompare(r)).map(([n,r])=>`${n}:${Ua(r)}`).join(",")}}`:String(e)}function Hl(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);try{return JSON.stringify(e,null,1)}catch{return String(e)}}function hu(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function by(e){return e==="pil_info"||e.startsWith("pil_info.")||e.startsWith("pil_info[")}function _d(e,t){if(typeof t=="number")return e?`${e}[${t}]`:`[${t}]`;const n=/^[A-Za-z0-9_$-]+$/.test(t);return e?n?`${e}.${t}`:`${e}["${t}"]`:n?t:`["${t}"]`}function ac(e){let t="";for(const n of e)t=_d(t,n);return t||"(root)"}function uc(e,t){let n=e;for(const r of t){if(typeof r=="number"){if(!Array.isArray(n))return;n=n[r];continue}if(!hu(n))return;n=n[r]}return n}function Qm(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e;try{return JSON.stringify(e,null,1)}catch{return String(e)}}function Va(e,t,n,r,s){if(s.skipPilInfo&&by(t))return;const i=t||"(root)";if(r>=s.maxDepth){n.set(i,e);return}if(Array.isArray(e)){if(!e.length){n.set(i,[]);return}if(e.length>s.maxArray){n.set(i,e);return}e.forEach((o,l)=>Va(o,_d(t,l),n,r+1,s));return}if(hu(e)){const o=Object.keys(e).sort((l,u)=>l.localeCompare(u));if(!o.length){n.set(t||"(root)",{});return}for(const l of o)s.skipPilInfo&&!t&&l==="pil_info"||Va(e[l],_d(t,l),n,r+1,s);return}n.set(i,e)}const wb=["overview","compare","basics","metadata","notes"],Km="lenslet.inspector.sections",qm="lenslet.inspector.metricsExpanded",cc=12,Ym=120,Sb=8,bb=80,Cb={overview:!0,compare:!0,metadata:!0,basics:!0,notes:!0};function oo({title:e,open:t,onToggle:n,actions:r,children:s,contentClassName:i}){const[o,l]=c.useState(t),[u,d]=c.useState(t?"open":"closed");return c.useEffect(()=>{if(t){l(!0);const m=window.requestAnimationFrame(()=>d("open"));return()=>window.cancelAnimationFrame(m)}d("closing");const f=window.setTimeout(()=>{l(!1),d("closed")},140);return()=>window.clearTimeout(f)},[t]),a.jsxs("div",{className:"border-b border-border/60",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[a.jsxs("button",{type:"button",onClick:n,"aria-expanded":t,className:"flex items-center gap-2 inspector-section-title hover:text-text transition-colors",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform ${t?"rotate-90":""}`,"aria-hidden":"true",children:a.jsx("path",{d:"m9 18 6-6-6-6"})}),a.jsx("span",{children:e})]}),r]}),o&&a.jsx("div",{className:"inspector-section-body","data-state":u,"aria-hidden":!t,children:a.jsx("div",{className:i??"px-3 pb-3",children:s})})]})}function kb({path:e,selectedPaths:t=[],items:n=[],compareActive:r=!1,compareA:s=null,compareB:i=null,onResize:o,onStarChanged:l,sortSpec:u,onFindSimilar:d,embeddingsAvailable:f=!1,embeddingsLoading:m=!1,onLocalTypingChange:g}){const b=!!e,{data:w,isLoading:E}=db(e??""),L=fb(e??""),y=is(),[h,p]=c.useState(Cb),v=c.useCallback(_=>{p(q=>({...q,[_]:!q[_]}))},[]),[S,R]=c.useState(!1),j=t.length>1,k=!!d&&f&&!j,P=d?f?j?"Select a single image to search.":null:m?"Loading embeddings...":"No embeddings detected.":null,[N,F]=c.useState(""),[B,A]=c.useState(""),[ee,de]=c.useState(null),[T,me]=c.useState(null),[D,H]=c.useState("idle"),[X,le]=c.useState(!1),[fe,Le]=c.useState(null),Q=c.useRef(null),[K,re]=c.useState(!1),[ae,Re]=c.useState("idle"),[Ae,Qe]=c.useState(null),[Pe,it]=c.useState(null),[Ke,ot]=c.useState(null),[Ot,sn]=c.useState(!1),[on,At]=c.useState(!1),[lt,at]=c.useState(!1),[z,ne]=c.useState(null),[ie,U]=c.useState(null),[J,he]=c.useState(null),te=c.useRef(null),ge=c.useRef(0),[ke,Te]=c.useState(null),[Se,ht]=c.useState({}),ut=c.useRef(!1),Ie=c.useCallback(_=>{ut.current!==_&&(ut.current=_,g==null||g(_))},[g]),qe=c.useMemo(()=>{const _=n.find(q=>q.path===e);return _&&_.star!==void 0?_.star:null},[n,e])??(w==null?void 0:w.star)??null,be=rb(j?null:e),yn={tags:!!(be!=null&&be.pending.set_tags),notes:(be==null?void 0:be.pending.set_notes)!==void 0,star:(be==null?void 0:be.pending.set_star)!==void 0},$s=c.useMemo(()=>{const _=new Set(t);return n.filter(q=>_.has(q.path))},[n,t]),Bs=c.useMemo(()=>$s.reduce((_,q)=>_+(q.size||0),0),[$s]);c.useEffect(()=>{w&&(F((w.tags||[]).join(", ")),A(w.notes||"")),de(null),me(null),H("idle"),le(!1),Le(null),Q.current&&(window.clearTimeout(Q.current),Q.current=null),re(!1),Ie(!1)},[w==null?void 0:w.updated_at,Ie,e]),c.useEffect(()=>()=>{Q.current&&(window.clearTimeout(Q.current),Q.current=null),te.current&&(window.clearTimeout(te.current),te.current=null),Ie(!1)},[Ie]);const yt=c.useCallback(_=>{if(j&&t.length){Hm(t,_);return}if(!e)return;const q=(w==null?void 0:w.version)??1;L.mutate({patch:_,baseVersion:q,idempotencyKey:Vo("patch")})},[j,t,e,w==null?void 0:w.version,L]),mu=c.useCallback(_=>{A(_),Ie(!0)},[Ie]),nl=c.useCallback(()=>{yt({notes:B}),Ie(!1)},[yt,B,Ie]),pu=c.useCallback(_=>{F(_),Ie(!0)},[Ie]),gu=c.useCallback(()=>{yt({tags:Wm(N)}),Ie(!1)},[yt,Ie,N]),Us=c.useCallback(()=>{if(!be||!e)return;const _={};be.pending.set_tags!==void 0&&(_.tags=Wm(N)),be.pending.set_notes!==void 0&&(_.notes=B),be.pending.set_star!==void 0&&(_.star=qe??null);const q=be.current.version??1;L.mutate({patch:_,baseVersion:q,idempotencyKey:Vo("patch")})},[be,e,N,B,qe,L]),os=c.useCallback(()=>{if(!be||!e)return;const _=be.current;F((_.tags||[]).join(", ")),A(_.notes||""),y.setQueryData(Ho(e),_),fu(e),l==null||l([e],_.star??null)},[be,e,y,l]);c.useEffect(()=>{if(!e)return;const _=q=>{if(Bf(q.target))return;const ue=q.key;if(!/^[0-5]$/.test(ue))return;q.preventDefault();const ce=ue==="0"?null:Number(ue);if(j&&t.length){yt({star:ce}),l==null||l(t,ce);return}yt({star:ce}),l==null||l([e],ce)};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[e,j,t,yt,l]);const Vs=ys(e?()=>ye.getThumb(e):null,[e]),yr=e?e.split("/").pop()||e:"",rl=c.useMemo(()=>{var q;if(yr.includes("."))return yr.slice(yr.lastIndexOf(".")+1).toUpperCase();const _=n.find(ue=>ue.path===e);return(q=_==null?void 0:_.type)!=null&&q.includes("/")?_.type.split("/")[1].toUpperCase():""},[yr,n,e]),xt=c.useMemo(()=>n.find(_=>_.path===e),[n,e]),Hs=c.useMemo(()=>e?(xt==null?void 0:xt.source)??e:"",[xt,e]),qt=(s==null?void 0:s.path)??null,xn=(i==null?void 0:i.path)??null,sl=r&&!!qt&&!!xn,vu=(s==null?void 0:s.name)??qt??"A",Je=(i==null?void 0:i.name)??xn??"B",il=c.useCallback(async()=>{if(e){H("loading"),me(null);try{const _=await ye.getMetadata(e);de(_.meta),H("loaded")}catch(_){const q=_ instanceof Error?_.message:"Failed to load metadata";de(null),me(q),H("error")}}},[e]),xr=c.useCallback(async(_,q)=>{const ue=ge.current+1;ge.current=ue,Re("loading"),Qe(null);try{const[ce,Ee]=await Promise.all([ye.getMetadata(_),ye.getMetadata(q)]);if(ge.current!==ue)return;it(ce.meta),ot(Ee.meta),Re("loaded")}catch(ce){if(ge.current!==ue)return;const Ee=ce instanceof Error?ce.message:"Failed to load metadata";it(null),ot(null),Qe(Ee),Re("error")}},[]);c.useEffect(()=>{if(!sl||!qt||!xn){ge.current+=1,Re("idle"),Qe(null),it(null),ot(null),At(!1),at(!1),ne(null),U(null),he(null);return}sn(!1),At(!1),at(!1),ne(null),U(null),he(null),xr(qt,xn)},[sl,qt,xn,xr]);const wr=c.useMemo(()=>{if(!ee)return"";try{return JSON.stringify(ee,null,1)}catch{return""}},[ee]),Dt=c.useMemo(()=>lc(ee,K),[ee,K]),zt=c.useMemo(()=>{if(!Pe)return"";try{return JSON.stringify(Pe,null,1)}catch{return""}},[Pe]),_n=c.useMemo(()=>{if(!Ke)return"";try{return JSON.stringify(Ke,null,1)}catch{return""}},[Ke]),Kn=c.useMemo(()=>lc(Pe,on),[Pe,on]),qn=c.useMemo(()=>lc(Ke,lt),[Ke,lt]),Ws=c.useCallback(()=>{var _;wr&&((_=navigator.clipboard)==null||_.writeText(wr).then(()=>{le(!0),setTimeout(()=>le(!1),1200)}).catch(q=>{const ue=q instanceof Error?q.message:"Copy failed";me(ue)}))},[wr]),Sr=c.useMemo(()=>Dt?Co(Dt,[],0):"",[Dt]),Ui=c.useMemo(()=>Kn?Co(Kn,[],0):"",[Kn]),ol=c.useMemo(()=>qn?Co(qn,[],0):"",[qn]),ll=c.useCallback(_=>{Le(_),Q.current&&window.clearTimeout(Q.current),Q.current=window.setTimeout(()=>{Le(null),Q.current=null},900)},[]),al=c.useCallback((_,q)=>{var ce;const ue=Qm(q);(ce=navigator.clipboard)==null||ce.writeText(ue).then(()=>{ll(_)}).catch(()=>{})},[ll]),In=c.useCallback((_,q)=>{_==="A"?U(q):he(q),te.current&&window.clearTimeout(te.current),te.current=window.setTimeout(()=>{U(null),he(null),te.current=null},900)},[]),br=c.useCallback((_,q,ue)=>{var Ee;const ce=Qm(ue);(Ee=navigator.clipboard)==null||Ee.writeText(ce).then(()=>{In(_,q)}).catch(()=>{})},[In]),$t=c.useCallback(_=>{if(!Dt)return;const q=_.target;if(!q)return;const ue=q.closest("[data-json-path]");if(!ue)return;const ce=ue.getAttribute("data-json-path");if(!ce)return;let Ee;try{Ee=JSON.parse(ce)}catch{return}const an=uc(Dt,Ee);al(ac(Ee),an)},[Dt,al]),ul=c.useCallback(_=>{if(!Kn)return;const q=_.target;if(!q)return;const ue=q.closest("[data-json-path]");if(!ue)return;const ce=ue.getAttribute("data-json-path");if(!ce)return;let Ee;try{Ee=JSON.parse(ce)}catch{return}const an=uc(Kn,Ee);br("A",ac(Ee),an)},[Kn,br]),ln=c.useCallback(_=>{if(!qn)return;const q=_.target;if(!q)return;const ue=q.closest("[data-json-path]");if(!ue)return;const ce=ue.getAttribute("data-json-path");if(!ce)return;let Ee;try{Ee=JSON.parse(ce)}catch{return}const an=uc(qn,Ee);br("B",ac(Ee),an)},[qn,br]),ze=c.useCallback(_=>{var ue;const q=_==="A"?zt:_n;q&&((ue=navigator.clipboard)==null||ue.writeText(q).then(()=>{ne(_),setTimeout(()=>ne(ce=>ce===_?null:ce),1200)}).catch(()=>{}))},[zt,_n]);let Yn=Dt?"":"PNG metadata not loaded yet.";D==="loading"?Yn="Loading metadata":D==="error"&&T&&(Yn=T);let Cr="Metadata not loaded yet.";ae==="loading"?Cr="Loading metadata":ae==="error"&&Ae&&(Cr=Ae);const Yt=D==="loading",Gn=D==="loaded"&&!!wr,cl=Gn?"h-48":"h-24";let Vi="Load meta";Yt?Vi="Loading":Gn&&(Vi=X?"Copied":"Copy");const yu=Gn?Ws:il,Hi=!!ee&&typeof ee=="object"&&!Array.isArray(ee)&&"pil_info"in ee,Wi=!!Pe&&typeof Pe=="object"&&!Array.isArray(Pe)&&"pil_info"in Pe,xu=!!Ke&&typeof Ke=="object"&&!Array.isArray(Ke)&&"pil_info"in Ke,dl=j?null:a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[Gn&&Hi&&a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors",onClick:()=>re(_=>!_),disabled:!Gn,children:K?"Hide PIL info":"Show PIL info"}),a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[78px]",onClick:yu,disabled:!e||Yt,children:Vi})]}),wu=c.useCallback(()=>{!qt||!xn||xr(qt,xn)},[qt,xn,xr]),Ze=c.useMemo(()=>{if(!Pe||!Ke)return null;const _=vi(Pe),q=vi(Ke),ue=new Map,ce=new Map,Ee={maxDepth:Sb,maxArray:bb,skipPilInfo:!Ot};Va(_,"",ue,0,Ee),Va(q,"",ce,0,Ee);const an=new Set([...ue.keys(),...ce.keys()]),Gt=[];let as=0,kr=0,Ye=0;const Jn=Array.from(an).sort((wt,jt)=>wt.localeCompare(jt)),wn=!Ot;for(const wt of Jn){if(wn&&by(wt))continue;const jt=ue.has(wt),Ki=ce.has(wt);if(!jt&&Ki){kr+=1,Gt.push({key:wt,kind:"onlyB",aText:"",bText:Hl(ce.get(wt))});continue}if(jt&&!Ki){as+=1,Gt.push({key:wt,kind:"onlyA",aText:Hl(ue.get(wt)),bText:""});continue}const qi=ue.get(wt),cs=ce.get(wt),Er=Ua(qi),fl=Ua(cs);Er!==fl&&(Ye+=1,Gt.push({key:wt,kind:"different",aText:Hl(qi),bText:Hl(cs)}))}const us=Math.max(0,Gt.length-Ym);return{entries:us?Gt.slice(0,Ym):Gt,onlyA:as,onlyB:kr,different:Ye,truncatedCount:us}},[Pe,Ke,Ot]);c.useEffect(()=>{try{const _=localStorage.getItem(Km);if(!_)return;const q=JSON.parse(_);if(!q||typeof q!="object")return;const ue={};for(const ce of wb)typeof q[ce]=="boolean"&&(ue[ce]=q[ce]);Object.keys(ue).length>0&&p(ce=>({...ce,...ue}))}catch{}},[]),c.useEffect(()=>{try{localStorage.setItem(Km,JSON.stringify(h))}catch{}},[h]),c.useEffect(()=>{try{const _=localStorage.getItem(qm);_==="1"||_==="true"?R(!0):(_==="0"||_==="false")&&R(!1)}catch{}},[]),c.useEffect(()=>{try{localStorage.setItem(qm,S?"1":"0")}catch{}},[S]);const ls=c.useCallback((_,q)=>{var ue;q&&((ue=navigator.clipboard)==null||ue.writeText(q).then(()=>{Te(_),setTimeout(()=>Te(ce=>ce===_?null:ce),1e3)}).catch(()=>{}))},[]),Xn=c.useCallback((_,q)=>{if(q&&!Se[_]){const ue=q.offsetHeight;ue&&ht(ce=>ce[_]?ce:{...ce,[_]:ue})}},[Se]),Fn="toolbar-offset absolute bottom-0 left-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20";return b?a.jsxs("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:[!j&&a.jsx("div",{className:"p-3 border-b border-border flex justify-center",children:a.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border w-[220px] h-[160px] bg-panel select-none",children:[Vs&&a.jsx("img",{src:Vs,alt:"thumb",className:"block w-full h-full object-contain"}),!!rl&&a.jsx("div",{className:"absolute top-1.5 left-1.5 bg-surface border border-border text-text text-xs px-1.5 py-0.5 rounded-md select-none",children:rl})]})}),a.jsxs(oo,{title:j?"Selection":"Item",open:h.overview,onToggle:()=>v("overview"),contentClassName:"px-3 pb-3 space-y-2",actions:d&&a.jsx("button",{type:"button",className:"btn btn-sm",onClick:d,disabled:!k,title:P??"Find similar",children:"Find similar"}),children:[j?a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Selected"}),a.jsxs("div",{className:"inspector-field-value",children:[t.length," files"]})]}),a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Total size"}),a.jsx("div",{className:"inspector-field-value",children:ic(Bs)})]})]}):a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Filename"}),a.jsx("div",{className:"inspector-field-value break-all",title:yr,children:yr})]}),P&&a.jsx("div",{className:"text-[11px] text-muted",children:P})]}),r&&sl&&a.jsx(oo,{title:"Compare Metadata",open:h.compare,onToggle:()=>v("compare"),actions:a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors",onClick:wu,disabled:ae==="loading",children:ae==="loading"?"Loading":"Reload"}),a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors",onClick:()=>sn(_=>!_),disabled:ae!=="loaded",children:Ot?"Hide PIL info":"Include PIL info"})]}),children:a.jsxs("div",{className:"space-y-2 text-[11px]",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px] text-muted",children:[a.jsxs("div",{children:[a.jsx("div",{className:"uppercase tracking-wide text-[10px]",children:"A"}),a.jsx("div",{className:"text-text break-all",title:vu,children:vu})]}),a.jsxs("div",{children:[a.jsx("div",{className:"uppercase tracking-wide text-[10px]",children:"B"}),a.jsx("div",{className:"text-text break-all",title:Je,children:Je})]})]}),ae==="loading"&&a.jsx("div",{className:"text-muted",children:"Loading metadata"}),ae==="error"&&Ae&&a.jsx("div",{className:"text-danger break-words",children:Ae}),ae==="loaded"&&Ze&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-muted",children:[a.jsxs("span",{children:[Ze.different," different  ",Ze.onlyA," only A  ",Ze.onlyB," only B"]}),a.jsx("span",{className:"text-[10px] uppercase tracking-wide",children:"Deep paths"})]}),Ze.entries.length===0?a.jsx("div",{className:"text-muted",children:"No differences found."}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-[minmax(80px,_1fr)_minmax(0,_1fr)_minmax(0,_1fr)] gap-2 text-[10px] uppercase tracking-wide text-muted",children:[a.jsx("div",{children:"Path"}),a.jsx("div",{children:"A"}),a.jsx("div",{children:"B"})]}),Ze.entries.map(_=>a.jsxs("div",{className:"grid grid-cols-[minmax(80px,_1fr)_minmax(0,_1fr)_minmax(0,_1fr)] gap-2",children:[a.jsx("div",{className:"text-[11px] text-muted font-mono break-all",children:_.key}),a.jsx("div",{className:"text-[11px] font-mono bg-surface-inset border border-border/60 rounded px-2 py-1 whitespace-pre-wrap break-words max-h-32 overflow-auto",children:_.aText}),a.jsx("div",{className:"text-[11px] font-mono bg-surface-inset border border-border/60 rounded px-2 py-1 whitespace-pre-wrap break-words max-h-32 overflow-auto",children:_.bText})]},_.key)),Ze.truncatedCount>0&&a.jsxs("div",{className:"text-muted text-[11px]",children:["+",Ze.truncatedCount," more differences not shown."]})]})]}),a.jsxs("div",{className:"grid gap-3 pt-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted",children:"Metadata A"}),a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[Wi&&a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors",onClick:()=>At(_=>!_),disabled:ae!=="loaded",children:on?"Hide PIL info":"Show PIL info"}),a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[70px]",onClick:()=>ze("A"),disabled:ae!=="loaded",children:z==="A"?"Copied":"Copy"})]})]}),a.jsxs("div",{className:"relative",children:[ie&&a.jsxs("div",{className:"ui-json-key-toast",children:["Copied value: ",ie]}),a.jsx("pre",{className:"ui-code-block ui-code-block-resizable h-40 overflow-auto whitespace-pre-wrap",onClick:ul,children:ae==="loaded"&&Ui?a.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:Ui}}):Cr})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[10px] uppercase tracking-wide text-muted",children:"Metadata B"}),a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[xu&&a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors",onClick:()=>at(_=>!_),disabled:ae!=="loaded",children:lt?"Hide PIL info":"Show PIL info"}),a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[70px]",onClick:()=>ze("B"),disabled:ae!=="loaded",children:z==="B"?"Copied":"Copy"})]})]}),a.jsxs("div",{className:"relative",children:[J&&a.jsxs("div",{className:"ui-json-key-toast",children:["Copied value: ",J]}),a.jsx("pre",{className:"ui-code-block ui-code-block-resizable h-40 overflow-auto whitespace-pre-wrap",onClick:ln,children:ae==="loaded"&&ol?a.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:ol}}):Cr})]})]})]})]})}),a.jsxs(oo,{title:"Basics",open:h.basics,onToggle:()=>v("basics"),children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",role:"radiogroup","aria-label":"Star rating",children:[a.jsx("span",{className:"ui-kv-label w-16 shrink-0",children:j?"Rating (all)":"Rating"}),a.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(_=>{const q=(qe??0)>=_;return a.jsx("button",{className:`w-6 h-6 flex items-center justify-center rounded-lg border border-border/60 bg-transparent text-[13px] ${q?"text-star-active":"text-star-inactive"} hover:border-border hover:text-star-hover transition-colors`,onClick:()=>{const ue=qe===_&&!j?null:_;j&&t.length?(l==null||l(t,ue),Hm(t,{star:ue})):e&&(l==null||l([e],ue),wy(e,{star:ue}))},title:`${_} star${_>1?"s":""} (key ${_})`,"aria-label":`${_} star${_>1?"s":""}`,"aria-pressed":qe===_,children:q?"":""},_)})})]}),!j&&be&&yn.star&&a.jsxs("div",{className:"ui-banner ui-banner-danger mt-2 text-[11px] flex items-center justify-between gap-2",children:[a.jsx("span",{children:"Rating conflict."}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:Us,children:"Apply again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:os,children:"Keep theirs"})]})]}),!j&&xt&&a.jsxs("div",{className:"text-[12px] space-y-1.5 leading-relaxed",children:[a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ls("dimensions",`${xt.w}${xt.h}`),children:"Dimensions"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:_=>Xn("dimensions",_),style:Se.dimensions?{minHeight:Se.dimensions}:void 0,children:ke==="dimensions"?"Copied":`${xt.w}${xt.h}`})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ls("size",ic(xt.size)),children:"Size"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:_=>Xn("size",_),style:Se.size?{minHeight:Se.size}:void 0,children:ke==="size"?"Copied":ic(xt.size)})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ls("type",xt.type),children:"Type"}),a.jsx("span",{className:"ui-kv-value break-all text-right inline-block min-w-[80px]",ref:_=>Xn("type",_),style:Se.type?{minHeight:Se.type}:void 0,children:ke==="type"?"Copied":xt.type})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Hs&&ls("source",Hs),children:"Source"}),a.jsx("span",{className:"ui-kv-value inspector-value-clamp break-words text-right max-w-[70%] inline-block min-w-[80px]",ref:_=>Xn("source",_),style:Se.source?{minHeight:Se.source}:void 0,title:Hs,children:ke==="source"?"Copied":Hs})]}),(()=>{const _=xt.metrics||null;if(!_)return null;const q=Object.entries(_).filter(([,Ye])=>Ye!=null);if(!q.length)return null;const ue=(u==null?void 0:u.kind)==="metric"?u.key:null,ce=[...q].sort(([Ye],[Jn])=>Ye.localeCompare(Jn));let Ee=ce;if(ue){const Ye=ce.findIndex(([Jn])=>Jn===ue);Ye>0&&(Ee=[ce[Ye],...ce.slice(0,Ye),...ce.slice(Ye+1)])}const an=Ee.length>cc,as=S||!an?Ee:Ee.slice(0,cc),kr=Ee.length-cc;return a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"ui-subsection-title mb-1",children:"Metrics"}),a.jsxs("div",{className:"space-y-1",children:[as.map(([Ye,Jn])=>{const wn=ue===Ye;return a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:`w-24 shrink-0 ${wn?"text-accent font-medium":"ui-kv-label"}`,children:Ye}),a.jsx("span",{className:`ui-kv-value text-right ${wn?"text-accent font-medium":""}`,children:xb(Jn)})]},Ye)}),an&&a.jsx("button",{type:"button",className:"text-[11px] text-muted underline underline-offset-2 hover:text-text",onClick:()=>R(Ye=>!Ye),"aria-expanded":S,children:S?"Show less":`+${kr} more`})]})]})})()]})]}),!j&&a.jsxs(oo,{title:"Metadata",open:h.metadata,onToggle:()=>v("metadata"),actions:dl,children:[a.jsxs("div",{className:"relative",children:[fe&&a.jsxs("div",{className:"ui-json-key-toast",children:["Copied value: ",fe]}),a.jsx("pre",{className:`ui-code-block ui-code-block-resizable ${cl} overflow-auto whitespace-pre-wrap`,onClick:$t,children:Gn?a.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:Sr}}):Yn})]}),T&&a.jsx("div",{className:"text-[11px] text-danger mt-1 break-words",children:T})]}),a.jsxs(oo,{title:"Notes & Tags",open:h.notes,onToggle:()=>v("notes"),contentClassName:"px-3 pb-3 space-y-2",children:[!j&&be&&(yn.tags||yn.notes)&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Conflicting edits detected."}),a.jsx("div",{className:"text-[11px] text-muted mt-0.5",children:"Your changes were not saved because this item was updated elsewhere."}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:Us,children:"Apply my changes again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:os,children:"Keep theirs"})]})]}),a.jsx("textarea",{className:"ui-textarea inspector-input w-full scrollbar-thin",placeholder:"Add notes",value:B,onChange:_=>mu(_.target.value),onBlur:nl,"aria-label":j?"Notes for selected items":"Notes"}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:j?"Tags (apply to all, comma-separated)":"Tags (comma-separated)"}),a.jsx("input",{className:"ui-input inspector-input w-full",placeholder:"tag1, tag2",value:N,onChange:_=>pu(_.target.value),onBlur:gu,"aria-label":j?"Tags for selected items":"Tags"})]})]}),a.jsx("div",{className:Fn,onMouseDown:o})]}):a.jsx("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:a.jsx("div",{className:Fn,onMouseDown:o})})}function Eb({open:e,embeddings:t,rejected:n=[],selectedPath:r,embeddingsLoading:s=!1,embeddingsError:i,onClose:o,onSearch:l}){const[u,d]=c.useState(""),[f,m]=c.useState("path"),[g,b]=c.useState(""),[w,E]=c.useState(""),[L,y]=c.useState("50"),[h,p]=c.useState(""),[v,S]=c.useState(null),[R,j]=c.useState(!1),k=c.useRef(null),P=c.useRef(null),N=c.useMemo(()=>t.find(T=>T.name===u)??t[0]??null,[t,u]);c.useEffect(()=>{e&&(S(null),t.length>0&&!t.some(T=>T.name===u)&&d(t[0].name),r?(m("path"),b(r)):(m("vector"),b("")))},[e,t,u,r]),c.useEffect(()=>{if(!e)return;const T=f==="vector"?P.current:k.current,me=window.requestAnimationFrame(()=>T==null?void 0:T.focus());return()=>window.cancelAnimationFrame(me)},[e,f]);const F=c.useCallback(async()=>{if(S(null),!t.length){S("No embeddings available for similarity search.");return}if(!N){S("Select an embedding to search.");return}const T=g.trim(),me=w.trim(),D=Number(L);if(!Number.isFinite(D)||D<=0){S("Top K must be a positive number.");return}const H=Math.min(1e3,Math.max(1,Math.floor(D))),X=h.trim()===""?null:Number(h);if(X!=null&&!Number.isFinite(X)){S("Min score must be a valid number.");return}if(f==="path"&&!T){S("Select an image path for the query.");return}if(f==="vector"&&!me){S("Paste a base64 vector for the query.");return}const le={embedding:N.name,query_path:f==="path"?T:null,query_vector_b64:f==="vector"?me:null,top_k:H,min_score:X};j(!0);try{await l(le),o()}catch(fe){fe instanceof Pn||fe instanceof Error?S(fe.message):S("Failed to run similarity search.")}finally{j(!1)}},[t.length,N,g,w,L,h,f,l,o]);c.useEffect(()=>{if(!e)return;const T=me=>{if(me.key==="Escape"){me.preventDefault(),o();return}(me.ctrlKey||me.metaKey)&&me.key==="Enter"&&(me.preventDefault(),F())};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[e,o,F]);const B=c.useCallback(()=>{var T;r&&(m("path"),b(r),(T=k.current)==null||T.focus())},[r]);if(!e)return null;const A=t.map(T=>({value:T.name,label:T.name})),ee=n.length>0,de=n.slice(0,3);return a.jsx("div",{className:"fixed inset-0 z-[var(--z-overlay)] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",onClick:T=>{T.target===T.currentTarget&&o()},children:a.jsxs("div",{className:"w-full max-w-2xl rounded-lg border border-border bg-panel shadow-[0_20px_50px_rgba(0,0,0,0.55)]",onClick:T=>T.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Find similar",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-text",children:"Find similar"}),a.jsx("div",{className:"text-xs text-muted",children:"Search with embeddings"})]}),a.jsx("button",{className:"btn btn-sm",onClick:o,"aria-label":"Close",children:"Close"})]}),a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[i&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:i}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Embedding"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Sd,{value:(N==null?void 0:N.name)??"",onChange:d,options:A,placeholder:s?"Loading embeddings...":"Select embedding",disabled:!t.length,triggerClassName:"min-w-[180px]"}),N&&a.jsxs("span",{className:"text-xs text-muted",children:[N.dimension," dims, ",N.metric,", ",N.dtype]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Query mode"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",className:`btn btn-sm ${f==="path"?"btn-active":""}`,onClick:()=>m("path"),"aria-pressed":f==="path",children:"Selected image"}),a.jsx("button",{type:"button",className:`btn btn-sm ${f==="vector"?"btn-active":""}`,onClick:()=>m("vector"),"aria-pressed":f==="vector",children:"Vector input"})]})]}),f==="path"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Image path"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:k,type:"text",className:"input w-full",value:g,onChange:T=>b(T.target.value),placeholder:r?"Selected image path":"Select an image first"}),a.jsx("button",{type:"button",className:"btn btn-sm",onClick:B,disabled:!r,title:r?"Use selected image":"Select an image first",children:"Use selected"})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Vector (base64 float32)"}),a.jsx("textarea",{ref:P,className:"ui-textarea w-full font-mono text-[11px]",rows:5,value:w,onChange:T=>E(T.target.value),placeholder:"Paste base64-encoded float32 vector"}),a.jsx("div",{className:"text-[11px] text-muted",children:"Base64 of little-endian float32. Length must match embedding dimension."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Top K"}),a.jsx("input",{type:"number",min:1,max:1e3,step:1,className:"input ui-number w-full",value:L,onChange:T=>y(T.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Min score"}),a.jsx("input",{type:"number",step:.01,className:"input ui-number w-full",value:h,onChange:T=>p(T.target.value),placeholder:"Optional"})]})]}),ee&&a.jsxs("div",{className:"ui-banner text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Skipped columns"}),a.jsxs("div",{className:"mt-1 space-y-1 text-muted",children:[de.map(T=>a.jsxs("div",{children:[T.name,": ",T.reason]},T.name)),n.length>de.length&&a.jsxs("div",{children:["+",n.length-de.length," more"]})]})]}),v&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:v})]}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-border",children:[a.jsx("div",{className:"text-xs text-muted",children:N?`Metric: ${N.metric}`:"Metric: cosine"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:o,disabled:R,children:"Cancel"}),a.jsx("button",{className:"btn btn-sm btn-active",onClick:F,disabled:R||!t.length,children:R?"Searching...":"Find similar"})]})]})]})})}const Cy=1,la=200,Nb=5*6e4,jb=6e4,ky=(e,t)=>t!=null&&t.recursive?["folder",e,"recursive",t.page??Cy,t.pageSize??la]:["folder",e];function Ey(e){return e[0]!=="folder"||e[2]!=="recursive"||typeof e[1]!="string"||typeof e[3]!="number"||typeof e[4]!="number"?null:e}function Mb(e){return Ey(e)!==null}function Rb(e,t,n=!0){if(!Mb(e))return!0;const r=Ey(e);if(r==null)return!1;const[,s,,i]=r;return i!==Cy?!1:!!(s===t||n&&s==="/")}function Lb(e,t,n=!0){return!Array.isArray(e)||e[0]!=="folder"?!1:!Rb(e,t,n)}const Pb=15e3;function Tb(e,t){return ye.getFolder(e,t)}function Id(e,t=!1,n){const r=cu(),s={recursive:t,page:n==null?void 0:n.page,pageSize:n==null?void 0:n.pageSize,legacyRecursive:n==null?void 0:n.legacyRecursive},i=!!s.recursive;return au({queryKey:ky(e,s),queryFn:()=>Tb(e,s),enabled:(n==null?void 0:n.enabled)??!0,staleTime:1e4,gcTime:i?jb:Nb,retry:2,retryDelay:o=>Math.min(1e3*Math.pow(2,o),5e3),refetchOnWindowFocus:!1,refetchInterval:r?Pb:!1,refetchIntervalInBackground:r})}const _b=(e,t)=>["search",e,t],Ib=2e4;function Fb(e,t){const n=cu();return au({enabled:!!e.trim(),queryKey:_b(e,t),queryFn:()=>ye.search(e,t),staleTime:3e3,gcTime:6e4,placeholderData:r=>r,retry:1,refetchInterval:n?Ib:!1,refetchIntervalInBackground:n})}const Ob=()=>["embeddings"];function Ab(){return au({queryKey:Ob(),queryFn:ye.getEmbeddings,staleTime:6e4,gcTime:5*6e4,retry:1,refetchOnWindowFocus:!1})}const Db=/^[\/@a-zA-Z0-9._\-\/]{1,512}$/,zb=[".jpg",".jpeg",".png",".webp"];function Hn(e){try{const t=decodeURI(e||""),r=(t.startsWith("/")?t:`/${t}`).replace(/\/{2,}/g,"/"),s=r.length>1?r.replace(/\/$/,""):r;return Db.test(s)?s:"/"}catch{return"/"}}function Gm(){return(window.location.hash||"").replace(/^#/,"")}function Xm(e){const t=Hn(e),n=`#${encodeURI(t)}`;window.location.hash!==n&&(window.location.hash=n)}function Wl(e){const t=Hn(e),n=`#${encodeURI(t)}`;if(window.location.hash!==n){const r=`${window.location.pathname}${window.location.search}${n}`;window.history.replaceState(window.history.state,"",r)}}function $b(e){const n=Hn(e).toLowerCase();return zb.some(r=>n.endsWith(r))}function Bb(e,t){const n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,""),s=[n,r].filter(Boolean).join("/");return s.startsWith("/")?s:`/${s}`}function Jm(e){const n=Hn(e).split("/").filter(Boolean);return n.length<=1?"/":"/"+n.slice(0,-1).join("/")}function Ub(e){return Hn(e).split("/").filter(Boolean).pop()||""}function Vb(e){return e.endsWith("/_trash_")}const Hb=new Set([0,1,2,3,4,5]),Wf=new Set(["<","<=",">",">="]),Wb=/^\d{4}-\d{2}-\d{2}$/;function Qb(e,t){return!t||!t.and.length?e:e.filter(n=>Kb(n,t.and))}function Kb(e,t){for(const n of t)if(!qb(e,n))return!1;return!0}function qb(e,t){var n,r,s,i,o,l,u;if("stars"in t){const d=t.stars;if(!d||!d.length)return!0;const f=e.star??0;return d.includes(f)}if("starsIn"in t){const d=t.starsIn.values;if(!d||!d.length)return!0;const f=e.star??0;return d.includes(f)}if("starsNotIn"in t){const d=t.starsNotIn.values;if(!d||!d.length)return!0;const f=e.star??0;return!d.includes(f)}if("nameContains"in t){const d=(n=t.nameContains.value)==null?void 0:n.trim();return d?(e.name??"").toLowerCase().includes(d.toLowerCase()):!0}if("nameNotContains"in t){const d=(r=t.nameNotContains.value)==null?void 0:r.trim();return d?!(e.name??"").toLowerCase().includes(d.toLowerCase()):!0}if("commentsContains"in t){const d=(s=t.commentsContains.value)==null?void 0:s.trim();if(!d)return!0;const f=e.comments??"";return f?f.toLowerCase().includes(d.toLowerCase()):!1}if("commentsNotContains"in t){const d=(i=t.commentsNotContains.value)==null?void 0:i.trim();if(!d)return!0;const f=e.comments??"";return f?!f.toLowerCase().includes(d.toLowerCase()):!1}if("urlContains"in t){const d=(o=t.urlContains.value)==null?void 0:o.trim();if(!d)return!0;const f=e.source??e.url??"";return f?f.toLowerCase().includes(d.toLowerCase()):!1}if("urlNotContains"in t){const d=(l=t.urlNotContains.value)==null?void 0:l.trim();if(!d)return!0;const f=e.source??e.url??"";return f?!f.toLowerCase().includes(d.toLowerCase()):!1}if("dateRange"in t){const{from:d,to:f}=t.dateRange;if(!d&&!f)return!0;if(!e.addedAt)return!1;const m=Date.parse(e.addedAt);if(Number.isNaN(m))return!1;const g=tp(d,!1),b=tp(f,!0);return!(g!=null&&m<g||b!=null&&m>b)}if("widthCompare"in t){const{op:d,value:f}=t.widthCompare;if(!Number.isFinite(f))return!0;const m=e.w;return!Number.isFinite(m)||m<=0?!1:np(m,d,f)}if("heightCompare"in t){const{op:d,value:f}=t.heightCompare;if(!Number.isFinite(f))return!0;const m=e.h;return!Number.isFinite(m)||m<=0?!1:np(m,d,f)}if("metricRange"in t){const{key:d,min:f,max:m}=t.metricRange,g=(u=e.metrics)==null?void 0:u[d];return!(g==null||g<f||g>m)}return!0}function Fd(e){if(!e||typeof e!="object")return null;const t=e.and;if(!Array.isArray(t))return null;const n=[];for(const r of t){const s=uC(r);s&&n.push(s)}return{and:n}}function Zm(e){var r;const t=e.and.find(s=>"stars"in s),n=e.and.find(s=>"starsIn"in s);return(r=n==null?void 0:n.starsIn)!=null&&r.values?n.starsIn.values:(t==null?void 0:t.stars)??[]}function dc(e,t){return Ny(e,t)}function Yb(e){var n;const t=e.and.find(r=>"starsIn"in r);return((n=t==null?void 0:t.starsIn)==null?void 0:n.values)??[]}function Ny(e,t){const n=ko(t),r=e.and.filter(s=>!("starsIn"in s)&&!("stars"in s));return n.length?{and:[{starsIn:{values:n}},...r]}:{and:r}}function Gb(e){var n;const t=e.and.find(r=>"starsNotIn"in r);return((n=t==null?void 0:t.starsNotIn)==null?void 0:n.values)??[]}function jy(e,t){const n=ko(t),r=e.and.filter(s=>!("starsNotIn"in s));return n.length?{and:[{starsNotIn:{values:n}},...r]}:{and:r}}function Xb(e){var n;const t=e.and.find(r=>"nameContains"in r);return((n=t==null?void 0:t.nameContains)==null?void 0:n.value)??null}function My(e,t){const n=hn(t),r=e.and.filter(s=>!("nameContains"in s));return n?{and:[{nameContains:{value:n}},...r]}:{and:r}}function Jb(e){var n;const t=e.and.find(r=>"nameNotContains"in r);return((n=t==null?void 0:t.nameNotContains)==null?void 0:n.value)??null}function Ry(e,t){const n=hn(t),r=e.and.filter(s=>!("nameNotContains"in s));return n?{and:[{nameNotContains:{value:n}},...r]}:{and:r}}function Zb(e){var n;const t=e.and.find(r=>"commentsContains"in r);return((n=t==null?void 0:t.commentsContains)==null?void 0:n.value)??null}function Ly(e,t){const n=hn(t),r=e.and.filter(s=>!("commentsContains"in s));return n?{and:[{commentsContains:{value:n}},...r]}:{and:r}}function eC(e){var n;const t=e.and.find(r=>"commentsNotContains"in r);return((n=t==null?void 0:t.commentsNotContains)==null?void 0:n.value)??null}function Py(e,t){const n=hn(t),r=e.and.filter(s=>!("commentsNotContains"in s));return n?{and:[{commentsNotContains:{value:n}},...r]}:{and:r}}function tC(e){var n;const t=e.and.find(r=>"urlContains"in r);return((n=t==null?void 0:t.urlContains)==null?void 0:n.value)??null}function Ty(e,t){const n=hn(t),r=e.and.filter(s=>!("urlContains"in s));return n?{and:[{urlContains:{value:n}},...r]}:{and:r}}function nC(e){var n;const t=e.and.find(r=>"urlNotContains"in r);return((n=t==null?void 0:t.urlNotContains)==null?void 0:n.value)??null}function _y(e,t){const n=hn(t),r=e.and.filter(s=>!("urlNotContains"in s));return n?{and:[{urlNotContains:{value:n}},...r]}:{and:r}}function rC(e){const t=e.and.find(n=>"dateRange"in n);return(t==null?void 0:t.dateRange)??null}function Od(e,t){const n=Ha((t==null?void 0:t.from)??null),r=Ha((t==null?void 0:t.to)??null),s=e.and.filter(i=>!("dateRange"in i));return!n&&!r?{and:s}:{and:[{dateRange:{...n?{from:n}:{},...r?{to:r}:{}}},...s]}}function sC(e){const t=e.and.find(n=>"widthCompare"in n);return(t==null?void 0:t.widthCompare)??null}function aa(e,t){const n=e.and.filter(r=>!("widthCompare"in r));return!t||!Number.isFinite(t.value)||!Wf.has(t.op)?{and:n}:{and:[{widthCompare:{op:t.op,value:t.value}},...n]}}function iC(e){const t=e.and.find(n=>"heightCompare"in n);return(t==null?void 0:t.heightCompare)??null}function ua(e,t){const n=e.and.filter(r=>!("heightCompare"in r));return!t||!Number.isFinite(t.value)||!Wf.has(t.op)?{and:n}:{and:[{heightCompare:{op:t.op,value:t.value}},...n]}}function oC(e,t){const n=e.and.find(r=>"metricRange"in r&&r.metricRange.key===t);return(n==null?void 0:n.metricRange)??null}function lC(e,t,n){const r=e.and.filter(s=>!("metricRange"in s&&s.metricRange.key===t));return n?{and:[{metricRange:{key:t,min:n.min,max:n.max}},...r]}:{and:r}}function aC(e){const t=Fd(e);return t?t.and.length:0}function uC(e){var t,n,r,s,i,o,l,u;if(!e||typeof e!="object")return null;if("stars"in e){const d=ko(e.stars);return d.length?{starsIn:{values:d}}:null}if("starsIn"in e){const d=ko((t=e.starsIn)==null?void 0:t.values);return d.length?{starsIn:{values:d}}:null}if("starsNotIn"in e){const d=ko((n=e.starsNotIn)==null?void 0:n.values);return d.length?{starsNotIn:{values:d}}:null}if("nameContains"in e){const d=hn((r=e.nameContains)==null?void 0:r.value);return d?{nameContains:{value:d}}:null}if("nameNotContains"in e){const d=hn((s=e.nameNotContains)==null?void 0:s.value);return d?{nameNotContains:{value:d}}:null}if("commentsContains"in e){const d=hn((i=e.commentsContains)==null?void 0:i.value);return d?{commentsContains:{value:d}}:null}if("commentsNotContains"in e){const d=hn((o=e.commentsNotContains)==null?void 0:o.value);return d?{commentsNotContains:{value:d}}:null}if("urlContains"in e){const d=hn((l=e.urlContains)==null?void 0:l.value);return d?{urlContains:{value:d}}:null}if("urlNotContains"in e){const d=hn((u=e.urlNotContains)==null?void 0:u.value);return d?{urlNotContains:{value:d}}:null}if("dateRange"in e){const d=e.dateRange,f=Ha((d==null?void 0:d.from)??null),m=Ha((d==null?void 0:d.to)??null);return!f&&!m?null:{dateRange:{...f?{from:f}:{},...m?{to:m}:{}}}}if("widthCompare"in e){const d=e.widthCompare,f=ep(d==null?void 0:d.op,d==null?void 0:d.value);return f?{widthCompare:f}:null}if("heightCompare"in e){const d=e.heightCompare,f=ep(d==null?void 0:d.op,d==null?void 0:d.value);return f?{heightCompare:f}:null}if("metricRange"in e){const d=e.metricRange;if(!d||typeof d!="object")return null;const f=typeof d.key=="string"?d.key:"",m=Ad(d.min),g=Ad(d.max);return!f||m==null||g==null||m>g?null:{metricRange:{key:f,min:m,max:g}}}return null}function ko(e){if(!Array.isArray(e))return[];const t=[],n=new Set;for(const r of e){const s=typeof r=="number"?r:typeof r=="string"?Number(r):NaN;!Number.isInteger(s)||!Hb.has(s)||n.has(s)||(n.add(s),t.push(s))}return t}function hn(e){if(typeof e!="string")return null;const t=e.trim();return t||null}function Ha(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=Date.parse(t);return Number.isNaN(n)?null:t}function ep(e,t){if(typeof e!="string"||!Wf.has(e))return null;const n=Ad(t);return n==null?null:{op:e,value:n}}function tp(e,t){if(!e)return null;const n=e.trim();if(!n)return null;const r=Date.parse(n);return Number.isNaN(r)?null:t&&Wb.test(n)?r+24*60*60*1e3-1:r}function np(e,t,n){switch(t){case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;default:return!0}}function Ad(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function rp(e){return e.addedAt?Date.parse(e.addedAt):0}function Wa(e,t){return e.name.localeCompare(t.name)}function cC(e,t){const n=rp(e),r=rp(t);return n===r?Wa(e,t):n-r}function dC(e){return(t,n)=>{var i,o;const r=(i=t.metrics)==null?void 0:i[e],s=(o=n.metrics)==null?void 0:o[e];return r==null&&s==null?Wa(t,n):r==null?1:s==null?-1:r===s?Wa(t,n):r-s}}function sp(e,t){return Qb(e,t)}function fC(e){let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function hC(e,t){const n=fC(t||1),r=[...e];for(let s=r.length-1;s>0;s-=1){const i=Math.floor(n()*(s+1));[r[s],r[i]]=[r[i],r[s]]}return r}function mC(e,t,n){if(t.kind==="builtin"&&t.key==="random"){const i=n??Date.now();return hC(e,i)}let r=cC;t.kind==="metric"?r=dC(t.key):t.key==="name"&&(r=Wa);const s=[...e].sort(r);return t.dir==="desc"?s.reverse():s}const ip="leftW.folders",op="leftW.metrics",pC="leftW",lp="rightW";function gC(e,t){const[n,r]=c.useState(240),[s,i]=c.useState(320),[o,l]=c.useState(240),u=t==="metrics"?s:n,d=c.useRef(u),f=c.useRef(o);return c.useEffect(()=>{d.current=u},[u]),c.useEffect(()=>{f.current=o},[o]),c.useEffect(()=>{try{const b=window.localStorage,w=Number(b.getItem(ip)??b.getItem(pC));Number.isFinite(w)&&w>0&&r(w);const E=Number(b.getItem(op));Number.isFinite(E)&&E>0&&i(E);const L=Number(b.getItem(lp));Number.isFinite(L)&&L>0&&l(L)}catch{}},[]),{leftW:u,rightW:o,onResizeLeft:b=>{b.preventDefault();const w=e.current;if(!w)return;const E=w.getBoundingClientRect(),L=t==="metrics"?op:ip;let y=d.current;const h=v=>{const S=v.clientX-E.left,R=200,j=Math.max(R,E.width-f.current-200),k=Math.min(Math.max(S,R),j);y=k,t==="metrics"?i(k):r(k)},p=()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",p);try{window.localStorage.setItem(L,String(y))}catch{}};window.addEventListener("mousemove",h),window.addEventListener("mouseup",p)},onResizeRight:b=>{b.preventDefault();const w=e.current;if(!w)return;const E=w.getBoundingClientRect();let L=f.current;const y=p=>{const v=p.clientX-E.left,S=E.width-v,R=240,j=Math.max(R,E.width-d.current-200),k=Math.min(Math.max(S,R),j);L=k,f.current=k,l(k)},h=()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",h);try{window.localStorage.setItem(lp,String(L))}catch{}};window.addEventListener("mousemove",y),window.addEventListener("mouseup",h)}}}function vC({x:e,y:t,items:n}){return a.jsx("div",{className:"dropdown-panel fixed",role:"menu",style:{left:e,top:t,minWidth:180},onClick:r=>r.stopPropagation(),children:n.map((r,s)=>a.jsxs("button",{className:`dropdown-item w-full ${r.danger?"text-danger hover:text-danger":""}`,role:"menuitem","aria-disabled":r.disabled,disabled:r.disabled,onClick:i=>{i.stopPropagation(),r.disabled||r.onClick()},children:[r.icon&&a.jsx("span",{className:"shrink-0",children:r.icon}),a.jsx("span",{children:r.label})]},s))})}function ap(e){return JSON.stringify(e,null,2)}function up(e){const t=s=>'"'+s.replaceAll('"','""')+'"',n="path,folder,name,star,type,size,width,height,tags,notes",r=e.map(s=>{const i=(s.tags||[]).join(" "),o=s.notes||"";return[s.path,s.folder,s.name,String(s.star??""),s.type??"",s.size??"",s.width??"",s.height??"",i,o].map(l=>t(String(l))).join(",")});return[n,...r].join(`
`)}function cp(e){return e.map(t=>{const n=t.path.split("/").filter(Boolean);n.pop();const r=n.length?`/${n.join("/")}`:"/";return{path:t.path,folder:r,name:t.name,star:t.star??null,type:t.type,size:t.size,width:t.w,height:t.h}})}function yC(e,t=250){const[n,r]=da.useState(e);return da.useEffect(()=>{const s=window.setTimeout(()=>r(e),Math.max(0,t));return()=>window.clearTimeout(s)},[e,t]),n}const Iy="application/x-lenslet-paths",xC='[role="treeitem"].drop-target';function dp(e){var n;return Array.from(((n=e.dataTransfer)==null?void 0:n.types)||[]).includes(Iy)}function wC(e){document.querySelectorAll(xC).forEach(t=>{t!==e&&t.classList.remove("drop-target")})}function fp(e){wC(e),e.classList.add("drop-target")}function hp(e){return e.startsWith("/")?e:`/${e}`}function SC({path:e,isLeaf:t}){const n=is(),r=c.useCallback(l=>{dp(l)&&(l.preventDefault(),t&&fp(l.currentTarget))},[t]),s=c.useCallback(l=>{!t||!dp(l)||(l.preventDefault(),fp(l.currentTarget))},[t]),i=c.useCallback(l=>{const u=l.currentTarget,d=document.elementFromPoint(l.clientX,l.clientY);d&&u.contains(d)||u.classList.remove("drop-target")},[]),o=c.useCallback(async l=>{const u=l.dataTransfer;if(!u)return;l.preventDefault(),l.currentTarget.classList.remove("drop-target");const d=u.getData(Iy),m=(d?JSON.parse(d):[]).filter(Boolean);if(!m.length)return;let g=m[0].split("/").slice(0,-1).join("/")||"/";g=hp(g);const b=hp(e);try{for(const w of m)await ye.moveFile(w,b);n.invalidateQueries({queryKey:["folder",g]}),n.invalidateQueries({queryKey:["folder",b]}),n.setQueryData(["folder",g],w=>!w||!Array.isArray(w.items)?w:{...w,items:w.items.filter(E=>!m.includes(E.path))})}catch{}},[e,n]);return{onDragOver:r,onDragEnter:s,onDragLeave:i,onDrop:o}}const bC='[role="tree"] [role="treeitem"]';function CC(){return Array.from(document.querySelectorAll(bC))}function kC(e,t){var i;const n=CC(),r=n.findIndex(o=>o===e);if(r===-1)return;let s=r;t==="ArrowDown"?s=Math.min(n.length-1,r+1):t==="ArrowUp"?s=Math.max(0,r-1):t==="Home"?s=0:t==="End"&&(s=n.length-1),(i=n[s])==null||i.focus()}function EC({path:e,isLeaf:t,isExpanded:n,setExpanded:r,onOpen:s}){return c.useCallback(i=>{if(i.key==="Enter"){i.preventDefault(),s(e);return}if(i.key==="ArrowRight"){!t&&!n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.add(e),l}));return}if(i.key==="ArrowLeft"){!t&&n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.delete(e),l}));return}(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="Home"||i.key==="End")&&(i.preventDefault(),kC(i.currentTarget,i.key))},[e,t,n,r,s])}function NC({current:e,roots:t,data:n,onOpen:r,onResize:s,onContextMenu:i,countVersion:o,className:l,showResizeHandle:u=!0}){const[d,f]=c.useState(new Set(["/"])),m=c.useRef(new Map),g=c.useRef(new Map),b=is(),w=c.useCallback(async L=>{const y=Hn(L||"/"),h=m.current,p=g.current,v=h.get(y);if(v!==void 0)return v;const S=b.getQueryData(ky(y,{recursive:!0}));if(S){const k=S.totalItems??S.items.length;return h.set(y,k),k}const R=p.get(y);if(R)return R;const j=(async()=>{try{const k=await ye.getFolder(y,{recursive:!0}),P=k.totalItems??k.items.length;return h.set(y,P),P}finally{p.delete(y)}})();return p.set(y,j),j},[b]);c.useEffect(()=>{m.current.clear(),g.current.clear()},[o]),c.useEffect(()=>{const L=e.split("/").filter(Boolean),y=["/"];let h="";for(const p of L)h=h?`${h}/${p}`:`/${p}`,y.push(h);f(p=>{const v=new Set(p);for(const S of y)v.add(S);return v})},[e]);const E=l??"h-full overflow-auto bg-panel scrollbar-thin";return a.jsxs("div",{className:E,children:[a.jsx("div",{className:"p-1",role:"tree","aria-label":"Folders",children:t.map(L=>a.jsx(Fy,{path:L.path,label:L.label,depth:0,current:e,expanded:d,setExpanded:f,onOpen:r,onContextMenu:i,initial:n,getSubtreeCount:w,countVersion:o},L.path))}),u&&a.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 left-[calc(var(--left)-3px)] hover:bg-accent/20",onMouseDown:s})]})}function Fy({path:e,label:t,depth:n,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,initial:u,getSubtreeCount:d,countVersion:f}){var N;const m=s.has(e),g=r===e,b=e==="/"||m||g,{data:w}=Id(e,!1,{enabled:b}),E=u&&e===u.path?u:w,y=!!E?E.dirs.length===0:!1,[h,p]=c.useState(E?E.items.length:null),v=EC({path:e,isLeaf:y,isExpanded:m,setExpanded:i,onOpen:o}),{onDragOver:S,onDragEnter:R,onDragLeave:j,onDrop:k}=SC({path:e,isLeaf:y}),P=F=>{F.stopPropagation(),i(B=>{const A=new Set(B);return A.has(e)?A.delete(e):A.add(e),A})};return c.useEffect(()=>{let F=!1;if(!E){p(null);return}if(p(E.items.length),!!(m&&(n>0||g)))return d(e).then(A=>{F||p(A)}).catch(A=>{F||console.warn(`Failed to compute subtree count for ${e}:`,A)}),()=>{F=!0}},[E,e,d,f,m,n,g]),a.jsxs("div",{children:[a.jsxs("div",{className:`flex items-center gap-1.5 py-0.5 px-2 rounded-md cursor-pointer min-h-[28px] outline-none transition-colors duration-75 ${g?"bg-accent/20 text-accent font-medium":"hover:bg-white/5 text-text"}`,role:"treeitem","aria-level":n+1,"aria-expanded":y?void 0:m,"aria-selected":g,tabIndex:g?0:-1,style:{paddingLeft:8+n*14},onClick:()=>o(e),onContextMenu:F=>{F.preventDefault(),F.stopPropagation(),l&&l(F,e)},onKeyDown:v,onDragOver:S,onDragEnter:R,onDragLeave:j,onDrop:k,children:[a.jsx("span",{className:"w-4 text-center opacity-60 hover:opacity-100 text-[10px]",onClick:P,children:m?"":""}),a.jsx("span",{className:"flex-1 overflow-hidden truncate text-sm",title:t,children:mb(t,28)}),h!==null&&a.jsx("span",{className:"text-[10px] opacity-50 bg-white/5 border border-white/5 rounded px-1.5 min-w-[24px] text-center",children:h})]}),m&&((N=E==null?void 0:E.dirs)==null?void 0:N.map(F=>a.jsx(Fy,{path:Bb(e,F.name),label:F.name,depth:n+1,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,getSubtreeCount:d,countVersion:f},F.name)))]})}const xs=40,jC=12,mp=[5,4,3,2,1],pp=["<","<=",">",">="];function MC({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l,onChangeFilters:u}){const d=r&&r.length?a.jsx(RC,{selectedItems:r,metricKeys:n}):null,f=a.jsx(LC,{filters:o,onChangeFilters:u});return n.length?a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[d,a.jsx(PC,{items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}),f]}):a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[d,f,a.jsx("div",{className:"p-4 text-sm text-muted",children:"No metrics found in this dataset."})]})}function RC({selectedItems:e,metricKeys:t}){const n=c.useMemo(()=>{if(!e.length)return null;const u=new Map;for(const m of e){const g=m.metrics;if(g)for(const[b,w]of Object.entries(g)){if(w==null||Number.isNaN(w))continue;const E=u.get(b);E?E.push(w):u.set(b,[w])}}return u.size?{entries:(t.length?t.filter(m=>u.has(m)):Array.from(u.keys()).sort()).map(m=>{const g=u.get(m)??[],b=Math.min(...g),w=Math.max(...g),E=g.reduce((L,y)=>L+y,0)/Math.max(1,g.length);return{key:m,value:g[0],min:b,max:w,avg:E,count:g.length}}),totalItems:e.length}:null},[e,t]);if(!n)return null;const{entries:r,totalItems:s}=n,i=r.slice(0,jC),o=r.length-i.length,l=s>1;return a.jsxs("div",{className:"ui-card",children:[a.jsxs("div",{className:"ui-card-header",children:[a.jsx("div",{className:"ui-section-title",children:"Selected metrics"}),a.jsxs("div",{className:"text-[11px] text-muted",children:[s," item",s===1?"":"s"]})]}),a.jsxs("div",{className:"space-y-1 text-[12px]",children:[i.map(u=>a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-muted w-28 shrink-0 truncate",title:u.key,children:u.key}),a.jsxs("span",{className:"font-mono text-text text-right tabular-nums",children:[l?`${Xt(u.min)}  ${Xt(u.max)}`:Xt(u.value),l&&a.jsxs("span",{className:"text-[11px] text-muted ml-2",children:["avg ",Xt(u.avg),u.count!==s?`  ${u.count}/${s}`:""]})]})]},u.key)),o>0&&a.jsxs("div",{className:"text-[11px] text-muted",children:["+",o," more"]})]})]})}function LC({filters:e,onChangeFilters:t}){const n=c.useMemo(()=>Yb(e),[e]),r=c.useMemo(()=>Gb(e),[e]),s=c.useMemo(()=>Xb(e)??"",[e]),i=c.useMemo(()=>Jb(e)??"",[e]),o=c.useMemo(()=>Zb(e)??"",[e]),l=c.useMemo(()=>eC(e)??"",[e]),u=c.useMemo(()=>tC(e)??"",[e]),d=c.useMemo(()=>nC(e)??"",[e]),f=c.useMemo(()=>rC(e)??{},[e]),m=c.useMemo(()=>bp(f.from),[f.from]),g=c.useMemo(()=>bp(f.to),[f.to]),b=c.useMemo(()=>sC(e),[e]),w=c.useMemo(()=>iC(e),[e]),[E,L]=c.useState((b==null?void 0:b.op)??">="),[y,h]=c.useState((w==null?void 0:w.op)??">=");c.useEffect(()=>{b!=null&&b.op&&L(b.op)},[b==null?void 0:b.op]),c.useEffect(()=>{w!=null&&w.op&&h(w.op)},[w==null?void 0:w.op]);const p=(v,S)=>{const R=new Set(n),j=new Set(r);v==="include"?R.has(S)?R.delete(S):(R.add(S),j.delete(S)):j.has(S)?j.delete(S):(j.add(S),R.delete(S));let k=Ny(e,Array.from(R));k=jy(k,Array.from(j)),t(k)};return a.jsxs("div",{className:"ui-card",children:[a.jsx("div",{className:"ui-section-title mb-3",children:"Attributes"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Rating"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Include"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[mp.map(v=>{const S=n.includes(v);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${S?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",v),"aria-pressed":S,title:`Include ${v} star${v>1?"s":""}`,children:[v,""]},`stars-in-${v}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${n.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",0),"aria-pressed":n.includes(0),title:"Include unrated",children:"None"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Exclude"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[mp.map(v=>{const S=r.includes(v);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${S?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",v),"aria-pressed":S,title:`Exclude ${v} star${v>1?"s":""}`,children:[v,""]},`stars-out-${v}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${r.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",0),"aria-pressed":r.includes(0),title:"Exclude unrated",children:"None"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Filename"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:s,placeholder:"e.g. draft",onChange:v=>t(My(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:i,placeholder:"e.g. v1",onChange:v=>t(Ry(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Comments"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:o,placeholder:"e.g. hero",onChange:v=>t(Ly(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:l,placeholder:"e.g. todo",onChange:v=>t(Py(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"URL"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:u,placeholder:"e.g. s3://bucket",onChange:v=>t(Ty(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:d,placeholder:"e.g. http://",onChange:v=>t(_y(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Date Added"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"From"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:m,onChange:v=>t(Od(e,{from:v.target.value||null,to:f.to??null}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"To"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:g,onChange:v=>t(Od(e,{from:f.from??null,to:v.target.value||null}))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Dimensions"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Width"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:E,onChange:v=>{const S=v.target.value;L(S),b&&t(aa(e,{op:S,value:b.value}))},children:pp.map(v=>a.jsx("option",{value:v,children:v},`w-${v}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:b?String(b.value):"",min:0,placeholder:"px",onChange:v=>{const S=v.target.value;if(!S){t(aa(e,null));return}const R=Number(S);Number.isFinite(R)&&t(aa(e,{op:E,value:R}))}})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Height"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:y,onChange:v=>{const S=v.target.value;h(S),w&&t(ua(e,{op:S,value:w.value}))},children:pp.map(v=>a.jsx("option",{value:v,children:v},`h-${v}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:w?String(w.value):"",min:0,placeholder:"px",onChange:v=>{const S=v.target.value;if(!S){t(ua(e,null));return}const R=Number(S);Number.isFinite(R)&&t(ua(e,{op:y,value:R}))}})]})]})]})]})]})]})}function PC({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}){const[u,d]=c.useState(!1),f=s&&n.includes(s)?s:n[0];return a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("label",{className:"ui-label",children:"Metric"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-[11px]",onClick:()=>d(m=>!m),"aria-pressed":u,children:u?"Show one":"Show all"})]}),u?a.jsx("div",{className:"ui-input ui-input-readonly w-full flex items-center text-xs",children:"All metrics"}):a.jsx("select",{className:"ui-select w-full",value:f,onChange:m=>i(m.target.value),children:n.map(m=>a.jsx("option",{value:m,children:m},m))})]}),u?a.jsx("div",{className:"space-y-3",children:n.map(m=>a.jsx(gp,{metricKey:m,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l,showTitle:!0},m))}):f?a.jsx(gp,{metricKey:f,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l}):a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]})}function gp({items:e,filteredItems:t,metricKey:n,selectedItems:r,filters:s,onChangeRange:i,showTitle:o=!1}){const l=c.useMemo(()=>vp(e,n),[e,n]),u=c.useMemo(()=>fc(l,xs),[l]),d=c.useMemo(()=>vp(t,n),[t,n]),f=c.useMemo(()=>u?fc(d,xs,u):null,[d,u]),m=oC(s,n),[g,b]=c.useState(null),[w,E]=c.useState(!1),L=c.useRef(null),y=c.useRef(null),h=c.useRef(!1),p=c.useRef(null),[v,S]=c.useState(null),[R,j]=c.useState(""),[k,P]=c.useState(""),[N,F]=c.useState(null),B=g??m,A=u?{min:u.min,max:u.max}:null,ee=c.useMemo(()=>{var K;if(!(r!=null&&r.length))return[];const Q=[];for(const re of r){const ae=(K=re.metrics)==null?void 0:K[n];ae==null||Number.isNaN(ae)||Q.push(ae)}return Q},[r,n]),de=ee.length===1?ee[0]:null,T=c.useMemo(()=>!u||ee.length<2?null:fc(ee,xs,u),[ee,u]);c.useEffect(()=>{if(!m||!A){N!=="min"&&j(m?Mr(m.min):""),N!=="max"&&P(m?Mr(m.max):"");return}if(N!=="min"){const Q=qs(m.min,A.min)?"":Mr(m.min);j(Q)}if(N!=="max"){const Q=qs(m.max,A.max)?"":Mr(m.max);P(Q)}},[m,A,N]),c.useEffect(()=>{S(null)},[n,A==null?void 0:A.min,A==null?void 0:A.max]);const me=Q=>{var ae;if(!A)return null;const K=(ae=p.current)==null?void 0:ae.getBoundingClientRect();if(!K)return null;const re=Qf((Q.clientX-K.left)/K.width);return A.min+(A.max-A.min)*re},D=(Q,K)=>{if(!A)return;const re=L.current??Q,ae=xp(re,Q);b(ae),K&&i(n,ae)},H=Q=>{var re;if(!A)return;Q.preventDefault();const K=me(Q);K!=null&&(E(!0),b(null),L.current=K,y.current=Q.clientX,h.current=!1,S(K),(re=p.current)==null||re.setPointerCapture(Q.pointerId))},X=Q=>{const K=me(Q);if(K==null){w||S(null);return}if(S(K),w){const re=y.current;if(!h.current&&re!=null){if(Math.abs(Q.clientX-re)<4)return;h.current=!0}h.current&&D(K,!1)}},le=Q=>{var re;if(!w)return;E(!1),(re=p.current)==null||re.releasePointerCapture(Q.pointerId);const K=me(Q);h.current&&K!=null?(S(K),D(K,!0)):m&&i(n,null),L.current=null,y.current=null,h.current=!1,setTimeout(()=>b(null),0)},fe=(Q,K)=>{if(!A)return;const re=wp(Q),ae=wp(K);if(!re.valid||!ae.valid){re.valid||j(m?Mr(m.min):""),ae.valid||P(m?Mr(m.max):"");return}if(re.value==null&&ae.value==null){i(n,null);return}const Re=re.value??A.min,Ae=ae.value??A.max,Qe=Sp(Re,A.min,A.max),Pe=Sp(Ae,A.min,A.max),it=xp(Qe,Pe);if(qs(it.min,A.min)&&qs(it.max,A.max)){i(n,null);return}i(n,it)};if(!u||!A)return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]});const Le=ee.length;return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mb-2 tabular-nums",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{children:["Population: ",u.count]}),a.jsxs("span",{children:["Filtered: ",(f==null?void 0:f.count)??0]}),Le>1&&a.jsxs("span",{className:"text-text",children:["Selected: ",Le]})]}),de!=null&&a.jsxs("span",{className:"text-text",children:["Selected: ",Xt(de)]})]}),a.jsxs("svg",{ref:p,viewBox:`0 0 ${xs} 100`,preserveAspectRatio:"none",className:"w-full h-28 cursor-crosshair rounded-md bg-surface-inset",onPointerDown:H,onPointerMove:X,onPointerUp:le,onPointerLeave:()=>S(null),children:[hc(u.bins,"#2e3a4b"),f&&hc(f.bins,"#3a8fff"),T&&hc(T.bins,"#f59e0b",{opacity:.55}),B&&TC(B,A),de!=null&&yp(de,A,{color:"var(--highlight)",strokeWidth:.7}),v!=null&&yp(v,A,{color:"rgba(255,255,255,0.75)",strokeWidth:.5,dashed:!0})]}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mt-2 tabular-nums",children:[a.jsx("span",{children:Xt(A==null?void 0:A.min)}),a.jsxs("div",{className:"flex flex-col items-center text-center leading-tight",children:[B?a.jsx("span",{className:"text-text",children:qs(B.min,A.min)?` ${Xt(B.max)}`:qs(B.max,A.max)?` ${Xt(B.min)}`:`${Xt(B.min)}  ${Xt(B.max)}`}):v!=null?a.jsxs("span",{className:"text-text",children:["Cursor: ",Xt(v)]}):a.jsx("span",{children:"Drag to filter"}),B&&v!=null&&a.jsxs("span",{className:"text-[11px] text-muted",children:["Cursor: ",Xt(v)]})]}),a.jsx("span",{children:Xt(A==null?void 0:A.max)})]}),a.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-2 mt-3 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Min"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:R,placeholder:Mr(A.min),onFocus:()=>F("min"),onBlur:()=>{F(null),fe(R,k)},onChange:Q=>j(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&Q.currentTarget.blur()}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Max"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:k,placeholder:Mr(A.max),onFocus:()=>F("max"),onBlur:()=>{F(null),fe(R,k)},onChange:Q=>P(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&Q.currentTarget.blur()}})]}),a.jsx("button",{className:"btn btn-xs btn-ghost text-muted hover:text-text",onClick:()=>i(n,null),children:"Clear"})]})]})}function fc(e,t,n){if(!e.length)return null;const r=n?n.min:Math.min(...e);let s=n?n.max:Math.max(...e);r===s&&(s=r+1);const i=new Array(t).fill(0),o=t/(s-r);for(const l of e){const u=Math.max(0,Math.min(t-1,Math.floor((l-r)*o)));i[u]+=1}return{bins:i,min:r,max:s,count:e.length}}function vp(e,t){var r;const n=[];for(const s of e){const i=(r=s.metrics)==null?void 0:r[t];i==null||Number.isNaN(i)||n.push(i)}return n}function hc(e,t,n){const r=Math.max(1,...e),s=(n==null?void 0:n.opacity)??.9;return e.map((i,o)=>{const l=i/r*100;return a.jsx("rect",{x:o+.05,y:100-l,width:.9,height:l,fill:t,opacity:s},`${t}-${o}`)})}function TC(e,t){const n=(e.min-t.min)/(t.max-t.min),r=(e.max-t.min)/(t.max-t.min),s=xs*Qf(Math.min(n,r)),i=xs*Math.abs(r-n);return a.jsx("rect",{x:s,y:0,width:Math.max(.5,i),height:100,fill:"rgba(255,255,255,0.08)",stroke:"rgba(255,255,255,0.4)",strokeWidth:.4})}function yp(e,t,n){const r=Qf((e-t.min)/(t.max-t.min)),s=xs*r;return a.jsx("line",{x1:s,y1:0,x2:s,y2:100,stroke:n.color,strokeWidth:n.strokeWidth??.5,strokeDasharray:n.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function xp(e,t){return e<t?{min:e,max:t}:{min:t,max:e}}function Qf(e){return e<0?0:e>1?1:e}function Xt(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Mr(e){if(!Number.isFinite(e))return"";const t=e.toString();return t.includes("e")?e.toFixed(6):t}function wp(e){const t=e.trim();if(!t)return{value:null,valid:!0};const n=Number(t);return Number.isFinite(n)?{value:n,valid:!0}:{value:null,valid:!1}}function Sp(e,t,n){return e<t?t:e>n?n:e}function qs(e,t){const n=Math.max(1,Math.abs(e),Math.abs(t));return Math.abs(e-t)<=1e-6*n}function bp(e){return e?e.length>=10?e.slice(0,10):e:""}const _C=[{label:"Root",path:"/"}];function IC({leftTool:e,onToolChange:t,compareEnabled:n,compareActive:r,onOpenCompare:s,views:i,activeViewId:o,onActivateView:l,onSaveView:u,current:d,data:f,onOpenFolder:m,onContextMenu:g,countVersion:b,items:w,filteredItems:E,metricKeys:L,selectedItems:y,selectedMetric:h,onSelectMetric:p,filters:v,onChangeRange:S,onChangeFilters:R,onResize:j}){const k=e==="folders"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",P=e==="metrics"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",N=r?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover";return a.jsxs("div",{className:"app-left-panel col-start-1 row-start-2 relative border-r border-border bg-panel overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-y-0 left-0 w-10 border-r border-border flex flex-col items-center gap-2 py-3 bg-surface-overlay",children:[a.jsx("button",{className:k,title:"Folders","aria-label":"Folders","aria-pressed":e==="folders",onClick:()=>t("folders"),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M3 7.5h6l2-2h10a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2z"})})}),a.jsx("button",{className:P,title:"Metrics / Filters","aria-label":"Metrics and Filters","aria-pressed":e==="metrics",onClick:()=>t("metrics"),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]})}),a.jsx("div",{className:"w-6 h-px bg-border/70 my-1"}),a.jsx("button",{className:`${N} ${n?"":"opacity-40 cursor-not-allowed"}`,title:n?"Compare selected images":"Compare (select 2+)","aria-label":"Compare selected images","aria-pressed":r,"aria-disabled":!n,disabled:!n,onClick:()=>{n&&s()},children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("rect",{x:"3",y:"4",width:"8",height:"16",rx:"1"}),a.jsx("rect",{x:"13",y:"4",width:"8",height:"16",rx:"1"})]})}),a.jsx("div",{className:"flex-1"}),a.jsx("a",{className:"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover cursor-pointer",href:"https://github.com/trojblue/lenslet",title:"Lenslet on GitHub","aria-label":"Lenslet on GitHub",target:"_blank",rel:"noreferrer",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M12 .5C5.73.5.5 5.74.5 12.02c0 5.1 3.29 9.42 7.86 10.95.58.11.79-.25.79-.56v-2.17c-3.2.7-3.88-1.55-3.88-1.55-.53-1.35-1.29-1.71-1.29-1.71-1.05-.72.08-.71.08-.71 1.16.08 1.78 1.2 1.78 1.2 1.03 1.77 2.71 1.26 3.37.96.1-.75.4-1.26.73-1.55-2.55-.29-5.23-1.29-5.23-5.74 0-1.27.45-2.31 1.19-3.13-.12-.29-.52-1.46.11-3.05 0 0 .97-.31 3.18 1.19.92-.26 1.91-.39 2.89-.39.98 0 1.97.13 2.89.39 2.2-1.5 3.18-1.19 3.18-1.19.63 1.59.23 2.76.11 3.05.74.82 1.19 1.86 1.19 3.13 0 4.46-2.69 5.45-5.25 5.73.41.36.78 1.07.78 2.16v3.2c0 .31.21.67.8.56 4.56-1.53 7.85-5.85 7.85-10.95C23.5 5.74 18.27.5 12 .5z"})})})]}),a.jsx("div",{className:"ml-10 h-full",children:e==="folders"?a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"px-2 py-2 border-b border-border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Smart Folders"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:u,title:"Save current view as Smart Folder",children:"+ New"})]}),i.length?a.jsx("div",{className:"flex flex-col gap-1",children:i.map(B=>{const A=B.id===o;return a.jsx("button",{className:`text-left px-2 py-1.5 rounded-md text-sm ${A?"bg-accent-muted text-accent":"hover:bg-hover text-text"}`,onClick:()=>l(B),children:B.name},B.id)})}):a.jsx("div",{className:"text-xs text-muted px-1 py-1.5",children:"No saved Smart Folders yet."})]}),a.jsx(NC,{current:d,roots:_C,data:f,onOpen:m,onContextMenu:g,countVersion:b,className:"flex-1 min-h-0 overflow-auto scrollbar-thin",showResizeHandle:!1})]}):a.jsx(MC,{items:w,filteredItems:E,metricKeys:L,selectedItems:y,selectedMetric:h,onSelectMetric:p,filters:v,onChangeRange:S,onChangeFilters:R})}),a.jsx("div",{className:"toolbar-offset absolute bottom-0 right-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20",onMouseDown:j})]})}function FC({persistenceEnabled:e,offViewSummary:t,onRevealOffView:n,canRevealOffView:r=!1,onClearOffView:s,browserZoomPercent:i}){const l=!!(t!=null&&t.names.length)&&t?` (${t.names.join(", ")}${t.extra?` +${t.extra}`:""})`:"",u=r&&n!=null,d=typeof i=="number"?i:null,f=d!==null&&Math.abs(d-100)>=2;return!e||f||!!t?a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-col gap-2",children:[!e&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("span",{className:"font-semibold",children:"Not persisted."})," Workspace is read-only; edits stay in memory until restart."]}),f&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs",children:[a.jsxs("span",{className:"font-semibold",children:["Browser zoom ",Math.round(d),"%."]})," For best results, set it to 100% so UI elements stay in correct proportions."]}),t&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex items-center justify-between gap-3",children:[a.jsxs("span",{children:["Updates outside current view: ",t.count," item",t.count===1?"":"s",l]}),a.jsxs("div",{className:"flex items-center gap-2",children:[u&&a.jsx("button",{className:"text-muted hover:text-text transition-colors",onClick:()=>n==null?void 0:n(),"aria-label":"Reveal off-view updates",children:"Reveal"}),a.jsx("button",{className:"text-muted hover:text-text transition-colors text-base leading-none",onClick:s,"aria-label":"Clear off-view updates",children:""})]})]})]})}):null}const OC=6e3,AC=1e4,DC=24*60*6e4,zC=3e4,$C=350,BC=1400,UC=2048,VC=6,HC=10;function Oy(e){const t=new Map;for(const n of e)t.set(n.path,n.name);return t}function Ay(e,t){return t.get(e)??e.split("/").pop()??e}function Cp(e,t){const n=e.filter(r=>!t.has(r.path));return n.length===e.length?e:n}function kp(e,t,n,r,s){const i=e.filter(l=>l.path!==t);return[{path:t,ts:n,kind:r},...i].slice(0,s)}function WC(e,t){if(!e.length)return null;const n=Oy(t),r=new Set,s=[];for(const o of e)r.has(o.path)||(r.add(o.path),s.push(o.path));const i=s.slice(0,2).map(o=>Ay(o,n));return{count:s.length,names:i,extra:Math.max(0,s.length-i.length)}}function QC(e,t,n,r){if(!e.length)return[];const s=Oy(t);return e.map(i=>({path:i.path,label:Ay(i.path,s),timeLabel:r(i.ts,n)}))}function KC(e){const[t,n]=c.useState([]),[r,s]=c.useState([]),[i,o]=c.useState(new Map),l=c.useRef(new Map),u=c.useRef(new Set),d=c.useRef(new Set),f=c.useRef(new Set);c.useEffect(()=>()=>{for(const L of l.current.values())window.clearTimeout(L);l.current.clear(),u.current.clear()},[]),c.useEffect(()=>{d.current=new Set(e),n(L=>Cp(L,f.current))},[e]);const m=c.useCallback((L,y)=>{if(y!=null){if(u.current.has(y))return;if(u.current.add(y),u.current.size>UC){const R=u.current.values().next().value;R!=null&&u.current.delete(R)}}const h=y!=null?`event:${y}`:`event:${L}:${Date.now()}`;o(R=>{if(R.get(L)===h)return R;const j=new Map(R);return j.set(L,h),j});const p=l.current,v=p.get(L);v!=null&&window.clearTimeout(v);const S=window.setTimeout(()=>{o(R=>{if(R.get(L)!==h)return R;const j=new Map(R);return j.delete(L),j}),p.delete(L)},BC);p.set(L,S)},[]),g=c.useCallback(L=>{f.current=L,n(y=>Cp(y,L))},[]),b=c.useCallback((L,y,h)=>{const p=Date.now();d.current.has(L)&&f.current.has(L)||n(S=>kp(S,L,p,y,VC)),m(L,h)},[m]),w=c.useCallback((L,y,h)=>{const p=Date.now(),v=Sy(h)??p;s(S=>kp(S,L,v,y,HC))},[]),E=c.useCallback(()=>{n([])},[]);return{offViewActivity:t,recentTouches:r,highlightedPaths:i,onVisiblePathsChange:g,markRecentActivity:b,markRecentTouch:w,clearOffViewActivity:E}}function qC(e){return e.isOffline?"offline":e.isUnstable?"unstable":e.recentEditActive?"recent":Number.isFinite(e.editingCount)&&e.editingCount>0?"editing":"live"}function Dy(e){if(!e.length)return e;const t=new Set,n=[];for(const r of e)t.has(r.path)||(t.add(r.path),n.push(r));return n}function zy(e){return{...e,items:Dy(e.items)}}function YC(e,t){const n=e.pageCount??1,r=e.pageSize??t,s=(e.page??1)+1;return n<=1||s>n?null:{startPage:s,endPage:n,pageSize:r}}function GC(e,t){if(e.path!==t.path)return zy(t);const n=Dy([...e.items,...t.items]);return{...e,generatedAt:t.generatedAt??e.generatedAt,dirs:e.dirs.length?e.dirs:t.dirs,items:n,page:t.page??e.page,pageSize:t.pageSize??e.pageSize,pageCount:t.pageCount??e.pageCount,totalItems:t.totalItems??e.totalItems}}async function XC(e,t){const n=t.shouldContinue??(()=>!0);let r=zy(e);t.onUpdate(r);const s=YC(e,t.defaultPageSize);if(s)for(let i=s.startPage;i<=s.endPage;i+=1){let o;try{o=await t.fetchPage(i,s.pageSize)}catch{return}if(!n())return;r=GC(r,o),t.onUpdate(r)}}const $y=[-2,-1,1,2],By=[-2,-1,0,1,2,3];$y.length;By.length;function JC(e,t,n){return Math.min(Math.max(e,t),n)}function Uy(e,t,n){const r=new Set,s=[];for(const i of n){const o=t+i;if(o<0||o>=e.length)continue;const l=e[o];!l||r.has(l)||(r.add(l),s.push(l))}return s}function ZC(e,t){if(!t)return[];const n=e.indexOf(t);return n<0?[]:Uy(e,n,$y)}function ek(e,t){if(e.length<2)return[];const n=Math.max(0,e.length-2),r=JC(t,0,n);return Uy(e,r,By)}const Ge={sortKey:"sortKey",sortDir:"sortDir",sortSpec:"sortSpec",starFilters:"starFilters",filterAst:"filterAst",selectedMetric:"selectedMetric",viewMode:"viewMode",gridItemSize:"gridItemSize",leftOpen:"leftOpen",rightOpen:"rightOpen"};function tk(e){switch(e){case"live":return"Live";case"reconnecting":return"Reconnecting";case"offline":return"Offline";case"connecting":case"idle":default:return"Connecting"}}function Ep(e){if(!(e instanceof Pn))return null;const t=e.body;if(!t||typeof t!="object")return null;const n=t.error;return typeof n=="string"?n:null}function Np(e,t){for(const n of e)ye.prefetchFile(n,t),ye.prefetchThumb(n)}function jp(e,t){return t-e<DC?vb(e,t):yb(e)}function nk(e,t){return e?t instanceof Pn||t instanceof Error?t.message:"Failed to load embeddings.":null}function rk(e,t,n,r){return e||t?n:r}function sk(e,t,n,r,s,i){return e?n:t||i==="/"?r:s}function ik(){var eh,th,nh;const[e,t]=c.useState("/"),[n,r]=c.useState(""),[s,i]=c.useState([]),[o,l]=c.useState(!1),[u,d]=c.useState(null),[f,m]=c.useState(null),[g,b]=c.useState(!1),[w,E]=c.useState(0),[L,y]=c.useState(0),[h,p]=c.useState(null),[v,S]=c.useState(100),[R,j]=c.useState(null),[k,P]=c.useState(()=>({filters:{and:[]},sort:{kind:"builtin",key:"added",dir:"desc"},selectedMetric:void 0})),[N,F]=c.useState(()=>Date.now()),[B,A]=c.useState("adaptive"),[ee,de]=c.useState(220),[T,me]=c.useState(!0),[D,H]=c.useState(!0),[X,le]=c.useState("folders"),[fe,Le]=c.useState([]),[Q,K]=c.useState(null),[re,ae]=c.useState(0),[Re,Ae]=c.useState({}),Qe=c.useRef(null),Pe=c.useRef(null),it=c.useRef(null),Ke=c.useRef(null),ot=c.useRef(!1),Ot=c.useRef(!1),sn=c.useRef(null),on=c.useRef(null),At=c.useRef(Ai()),lt=c.useRef(null),at=c.useRef(null),z=c.useRef(null),ne=c.useRef(!1),ie=c.useRef(null),U=c.useRef("idle"),{leftW:J,rightW:he,onResizeLeft:te,onResizeRight:ge}=gC(Qe,X),[ke,Te]=c.useState(!1),[Se,ht]=c.useState(null),ut=is(),Ie=ib(),Qn=cu(),qe=lb(),[be,yn]=c.useState("idle"),[$s,Bs]=c.useState({}),[yt,mu]=c.useState(null),[nl,pu]=c.useState(null),[gu,Us]=c.useState(!1),[os,Vs]=c.useState(()=>Date.now()),[yr,rl]=c.useState(!0),[xt,Hs]=c.useState(!1);c.useEffect(()=>{const x=I=>{const O=Hn(I),V=$b(O)?O:null,Z=V?Jm(O):O;V?(m(V),i([V])):(m(null),ot.current=!1),t(pe=>pe===Z?pe:(y(G=>G+1),Z))};x(Gm());const M=()=>x(Gm());return window.addEventListener("hashchange",M),()=>window.removeEventListener("hashchange",M)},[]),c.useEffect(()=>{if(nl==null){Us(!1);return}Us(!0);const x=window.setTimeout(()=>Us(!1),OC);return()=>window.clearTimeout(x)},[nl]),c.useEffect(()=>{if(yt==null)return;Vs(Date.now());const x=window.setInterval(()=>Vs(Date.now()),1e4);return()=>window.clearInterval(x)},[yt]);const{data:qt,refetch:xn,isLoading:sl,isError:vu}=Id(e,!0,{page:1,pageSize:la}),[Je,il]=c.useState(),xr=c.useRef(0),wr=c.useCallback(()=>xn(),[xn]),{data:Dt}=Id("/",!0,{enabled:!1,page:1,pageSize:la});c.useEffect(()=>{ut.removeQueries({predicate:({queryKey:x})=>Lb(x,e,!0)})},[e,ut]),c.useEffect(()=>{xr.current+=1,il(void 0)},[e]),c.useEffect(()=>{if(!qt)return;const x=++xr.current;let M=!1;return XC(qt,{defaultPageSize:la,fetchPage:(I,O)=>ye.getFolder(qt.path,{recursive:!0,page:I,pageSize:O}),onUpdate:il,shouldContinue:()=>!M&&xr.current===x}),()=>{M=!0}},[qt]);const zt=u!==null,_n=!zt&&n.trim().length>0,Kn=yC(n,250),qn=c.useMemo(()=>Kn.trim().replace(/\s+/g," "),[Kn]),Ws=Fb(_n?qn:"",e),Sr=Ab(),Ui=((eh=Sr.data)==null?void 0:eh.embeddings)??[],ol=((th=Sr.data)==null?void 0:th.rejected)??[],ll=Ui.length>0,al=nk(Sr.isError,Sr.error),In=c.useMemo(()=>Hn(e||"/"),[e]),br=c.useMemo(()=>Zm(k.filters),[k.filters]),$t=c.useMemo(()=>{var M;return(_n?((M=Ws.data)==null?void 0:M.items)??[]:(Je==null?void 0:Je.items)??[]).map(I=>({...I,star:Re[I.path]!==void 0?Re[I.path]:I.star}))},[_n,Ws.data,Je,Re]),ul=c.useMemo(()=>{var I;const x=new Map;for(const O of $t)x.set(O.path,O);const M=((I=Ws.data)==null?void 0:I.items)??[];for(const O of M){if(x.has(O.path))continue;const V=Re[O.path]!==void 0?Re[O.path]:O.star;x.set(O.path,{...O,star:V})}return x},[$t,Ws.data,Re]),ln=c.useMemo(()=>u?u.items.map(x=>{const M=ul.get(x.path);return M||fk(x.path,Re[x.path])}):[],[u,ul,Re]),ze=c.useMemo(()=>{if(u)return sp(ln,k.filters);const x=sp($t,k.filters);return mC(x,k.sort,N)},[u,ln,$t,k.filters,k.sort,N]),Yn=u?ln.length:$t.length,Cr=ze.length,Yt=c.useMemo(()=>ze.map(x=>x.path),[ze]),{offViewActivity:Gn,recentTouches:cl,highlightedPaths:Vi,onVisiblePathsChange:yu,markRecentActivity:Hi,markRecentTouch:Wi,clearOffViewActivity:xu}=KC(Yt),dl=c.useMemo(()=>new Set(s),[s]),wu=c.useMemo(()=>{if(!s.length)return[];const x=u?ln:$t,M=new Map(x.map(O=>[O.path,O])),I=new Map(ze.map(O=>[O.path,O]));return s.map(O=>M.get(O)??I.get(O)).filter(O=>!!O)},[s,u,ln,$t,ze]),Ze=c.useMemo(()=>ze.filter(x=>dl.has(x.path)),[ze,dl]),ls=c.useMemo(()=>Ze.map(x=>x.path),[Ze]),Xn=Math.max(0,Ze.length-2),Fn=Math.min(w,Xn),_=Ze[Fn]??null,q=Ze[Fn+1]??null,ue=Fn>0,ce=Fn<Ze.length-2,Ee=Ze.length>=2,an=u?ln:$t,Gt=u?null:k.sort.kind==="metric"?k.sort.key:null,as=c.useMemo(()=>Gt?ze.some(x=>{var I;const M=(I=x.metrics)==null?void 0:I[Gt];return M!=null&&!Number.isNaN(M)}):!1,[ze,Gt]);c.useEffect(()=>{E(x=>x>Xn?Xn:x)},[Xn]);const kr=c.useCallback(x=>{const M=Date.now(),O=Sy(x)??M,V=O>M?M:O;mu(Z=>Z==null?V:Z>V?Z:V),pu(M),Vs(M)},[]),Ye=c.useCallback(x=>{const M=Object.prototype.hasOwnProperty.call(x,"star"),I=x.metrics!==void 0,O=x.comments!==void 0;if(!M&&!I&&!O)return;const V=pe=>{if(pe.path!==x.path)return pe;let G=pe;return M&&pe.star!==x.star&&(G={...G,star:x.star??null}),I&&(G={...G,metrics:x.metrics??null}),O&&pe.comments!==x.comments&&(G={...G,comments:x.comments??""}),G},Z=pe=>{if(!pe)return pe;let G=!1;const se=pe.items.map(xe=>{const St=V(xe);return St!==xe&&(G=!0),St});return G?{...pe,items:se}:pe};ut.setQueriesData({predicate:({queryKey:pe})=>Array.isArray(pe)&&pe[0]==="folder"},Z),ut.setQueriesData({predicate:({queryKey:pe})=>Array.isArray(pe)&&pe[0]==="search"},Z)},[ut]),Jn=c.useCallback(()=>{ae(x=>x+1)},[]),wn=c.useCallback(x=>{x.length&&Bs(M=>{let I=!1;const O={...M};for(const V of x){const Z=M[V.gallery_id];Z&&Z.viewing===V.viewing&&Z.editing===V.editing||(O[V.gallery_id]=V,I=!0)}return I?O:M})},[]),us=c.useCallback(()=>{ie.current!=null&&(window.clearTimeout(ie.current),ie.current=null)},[]),Qi=c.useCallback(x=>{x&&Bs(M=>{if(!(x in M))return M;const I={...M};return delete I[x],I})},[]),wt=c.useCallback(x=>{lt.current=x.lease_id,at.current=x.gallery_id,wn([x])},[wn]),jt=c.useCallback(async(x,M=!1)=>{const I=At.current,O=M?void 0:lt.current??void 0,V=Z=>ye.joinPresence(x,Z,I);try{wt(await V(O));return}catch(Z){if(!M&&Ep(Z)==="invalid_lease"){wt(await V(void 0));return}throw Z}},[wt]),Ki=c.useCallback(async(x,M)=>{if(x===M){await jt(M);return}const I=lt.current;if(!I){await jt(M,!0);return}try{const O=await ye.movePresence(x,M,I,At.current);at.current=O.to_scope.gallery_id,wn([O.from_scope,O.to_scope]);return}catch(O){const V=Ep(O);if(V==="invalid_lease"){await jt(M,!0);return}if(V==="scope_mismatch"){await jt(M);return}throw O}},[wn,jt]),qi=c.useCallback(async x=>{const M=at.current;if(!M){await jt(x,!0);return}if(M===x){await jt(x);return}await Ki(M,x)},[jt,Ki]),cs=c.useCallback(async()=>{if(ne.current)return;const x=z.current;if(x){z.current=null,ne.current=!0;try{await qi(x)}catch{}finally{ne.current=!1;const M=z.current;M&&M!==at.current&&cs()}}},[qi]),Er=c.useCallback((x,M=!1)=>{if(z.current=x,us(),M||at.current==null){cs();return}ie.current=window.setTimeout(()=>{ie.current=null,cs()},$C)},[us,cs]),fl=c.useCallback(()=>{at.current=null,lt.current=null,z.current=null,us()},[us]),hl=c.useCallback(x=>{const M=at.current,I=lt.current;!M||!I||(sS(M,I,At.current),x&&Qi(M),fl())},[Qi,fl]);c.useEffect(()=>{X1();const x=Z1(I=>{if(I.type==="presence"){const Z=I.data;if(!(Z!=null&&Z.gallery_id))return;wn([Z]);return}const O=I.data;if(!(O!=null&&O.path))return;const V=O.path;if(I.type==="item-updated"){const Z=I.data,pe={v:1,tags:Z.tags??[],notes:Z.notes??"",star:Z.star??null,version:Z.version??1,updated_at:Z.updated_at??"",updated_by:Z.updated_by??"server"};ut.setQueryData(Ho(V),pe),Ye({path:V,star:Z.star??null,metrics:Z.metrics,comments:Z.notes??""}),cb(V,pe),Hi(V,"item-updated",I.id),Wi(V,"item-updated",Z.updated_at),kr(Z.updated_at),Ae(G=>{if(G[V]===void 0)return G;const se={...G};return delete se[V],se})}else if(I.type==="metrics-updated"){const Z=I.data;Ye({path:V,metrics:Z.metrics}),Hi(V,"metrics-updated",I.id),Wi(V,"metrics-updated",Z.updated_at),kr(Z.updated_at)}}),M=eS(yn);return()=>{x(),M(),J1()}},[wn,Hi,Wi,ut,Ye,kr]),c.useEffect(()=>{const x=at.current;x!==In&&Er(In,x==null)},[In,Er]),c.useEffect(()=>{const x=window.setInterval(()=>{const M=at.current;M&&jt(M)},zC);return()=>{window.clearInterval(x)}},[jt]),c.useEffect(()=>{const x=U.current;if(U.current=be,be==="live"&&x!=="live"){Er(In,!0);return}(be==="reconnecting"||be==="offline")&&Qi(at.current)},[Qi,be,In,Er]),c.useEffect(()=>{const x=()=>hl(!0),M=()=>hl(!0),I=()=>{Er(In,!0)};return window.addEventListener("pagehide",x),window.addEventListener("beforeunload",M),window.addEventListener("pageshow",I),()=>{window.removeEventListener("pagehide",x),window.removeEventListener("beforeunload",M),window.removeEventListener("pageshow",I),hl(!1)}},[In,Er,hl]),c.useEffect(()=>{let x=!1;return ye.getHealth().then(M=>{var O;if(x)return;const I=((O=M==null?void 0:M.labels)==null?void 0:O.enabled)??!0;rl(I)}).catch(()=>{}),()=>{x=!0}},[]);const Vy=c.useMemo(()=>{const x=u?ln:$t,M={0:0,1:0,2:0,3:0,4:0,5:0};for(const I of x){const O=Re[I.path]??I.star??0;M[String(O)]=(M[String(O)]||0)+1}return M},[u,ln,$t,Re]),Nr=c.useMemo(()=>{const x=new Set;let M=0;const I=u?ln:$t;for(const O of I){const V=O.metrics;if(V)for(const Z of Object.keys(V))x.add(Z);if(M+=1,M>=250&&x.size>0)break}return Array.from(x).sort()},[u,ln,$t]);c.useEffect(()=>{zt||Nr.length&&P(x=>{const M=x.selectedMetric&&Nr.includes(x.selectedMetric)?x.selectedMetric:Nr[0];return M===x.selectedMetric?x:{...x,selectedMetric:M}})},[Nr,zt]),c.useEffect(()=>{zt||k.sort.kind==="metric"&&(Nr.includes(k.sort.key)||P(x=>({...x,sort:{kind:"builtin",key:"added",dir:x.sort.dir}})))},[Nr,k.sort,zt]);const ml=c.useMemo(()=>aC(k.filters),[k.filters]),pl=(Je==null?void 0:Je.totalItems)??(Je==null?void 0:Je.items.length)??Yn,Hy=e==="/"?pl:(Dt==null?void 0:Dt.totalItems)??(Dt==null?void 0:Dt.items.length)??pl,Su=zt||_n||ml>0,gl=$s[e],Wy=Ie.state==="syncing"?"Syncing":Ie.state==="error"?Ie.message?`Not saved  ${Ie.message}`:"Not saved  retry":"All changes saved",Qy=tk(be),bu=yt!=null,Ky=c.useMemo(()=>!bu||yt==null?"No edits yet.":jp(yt,os),[bu,yt,os]),qy=(gl==null?void 0:gl.editing)??0,Yy=qe!=null&&qe>AC,Gy=be==="offline"||be==="connecting"||be==="idle",Xy=be==="reconnecting"||Qn||Ie.state==="error"||Yy,Jy=qC({isOffline:Gy,isUnstable:Xy,recentEditActive:gu,editingCount:qy}),Zy=c.useMemo(()=>WC(Gn,ze),[Gn,ze]),ex=c.useMemo(()=>QC(cl,ze,os,jp),[ze,os,cl]),tx=rk(zt,Su,Cr,pl),nx=sk(zt,Su,Yn,pl,Hy,e),Kf=c.useMemo(()=>{if(!u)return null;if(u.queryPath){const x=u.queryPath.split("/").filter(Boolean);return x.length?x[x.length-1]:u.queryPath}return u.queryVector?"Vector query":null},[u]),qf=c.useMemo(()=>u?ml>0?`${Cr} of ${Yn}`:`${Yn}`:null,[u,ml,Cr,Yn]),Mt=c.useCallback(x=>{P(M=>({...M,filters:x(M.filters)}))},[]),rx=c.useCallback(x=>{P(M=>({...M,filters:x}))},[]),vl=c.useCallback(()=>{Mt(x=>dc(x,[]))},[Mt]),Yf=c.useCallback(()=>{P(x=>({...x,filters:{and:[]}}))},[]),Cu=c.useCallback(()=>{d(null);const x=on.current;on.current=null,x&&x.length?(i(x),y(M=>M+1)):i([])},[]),sx=c.useCallback(()=>{u&&Cu(),r(""),P(x=>({...x,filters:{and:[]}}))},[Cu,u]),ix=c.useCallback(async x=>{!u&&on.current===null&&(on.current=s);const M=await ye.searchEmbeddings(x);if(d({embedding:M.embedding,queryPath:x.query_path??null,queryVector:x.query_vector_b64??null,topK:x.top_k??50,minScore:x.min_score??null,items:M.items,createdAt:Date.now()}),M.items.length){const I=x.query_path&&M.items.some(O=>O.path===x.query_path)?x.query_path:M.items[0].path;i([I]),y(O=>O+1)}else i([])},[u,s]),ku=c.useCallback((x,M)=>{Mt(I=>lC(I,x,M))},[Mt]),Gf=c.useMemo(()=>{var M,I,O,V,Z,pe;const x=[];for(const G of k.filters.and)if("stars"in G){const se=G.stars||[];if(!se.length)continue;x.push({id:"stars",label:`Rating in: ${mc(se)}`,onRemove:()=>vl()})}else if("starsIn"in G){const se=G.starsIn.values||[];if(!se.length)continue;x.push({id:"stars-in",label:`Rating in: ${mc(se)}`,onRemove:()=>vl()})}else if("starsNotIn"in G){const se=G.starsNotIn.values||[];if(!se.length)continue;x.push({id:"stars-not-in",label:`Rating not in: ${mc(se)}`,onRemove:()=>Mt(xe=>jy(xe,[]))})}else if("nameContains"in G){const se=(M=G.nameContains.value)==null?void 0:M.trim();if(!se)continue;x.push({id:"name-contains",label:`Filename contains: ${se}`,onRemove:()=>Mt(xe=>My(xe,""))})}else if("nameNotContains"in G){const se=(I=G.nameNotContains.value)==null?void 0:I.trim();if(!se)continue;x.push({id:"name-not-contains",label:`Filename not: ${se}`,onRemove:()=>Mt(xe=>Ry(xe,""))})}else if("commentsContains"in G){const se=(O=G.commentsContains.value)==null?void 0:O.trim();if(!se)continue;x.push({id:"comments-contains",label:`Comments contain: ${se}`,onRemove:()=>Mt(xe=>Ly(xe,""))})}else if("commentsNotContains"in G){const se=(V=G.commentsNotContains.value)==null?void 0:V.trim();if(!se)continue;x.push({id:"comments-not-contains",label:`Comments not: ${se}`,onRemove:()=>Mt(xe=>Py(xe,""))})}else if("urlContains"in G){const se=(Z=G.urlContains.value)==null?void 0:Z.trim();if(!se)continue;x.push({id:"url-contains",label:`URL contains: ${se}`,onRemove:()=>Mt(xe=>Ty(xe,""))})}else if("urlNotContains"in G){const se=(pe=G.urlNotContains.value)==null?void 0:pe.trim();if(!se)continue;x.push({id:"url-not-contains",label:`URL not: ${se}`,onRemove:()=>Mt(xe=>_y(xe,""))})}else if("dateRange"in G){const{from:se,to:xe}=G.dateRange;if(!se&&!xe)continue;x.push({id:"date-range",label:`Date: ${ak(se,xe)}`,onRemove:()=>Mt(St=>Od(St,null))})}else if("widthCompare"in G){const{op:se,value:xe}=G.widthCompare;x.push({id:"width-compare",label:`Width ${se} ${xe}`,onRemove:()=>Mt(St=>aa(St,null))})}else if("heightCompare"in G){const{op:se,value:xe}=G.heightCompare;x.push({id:"height-compare",label:`Height ${se} ${xe}`,onRemove:()=>Mt(St=>ua(St,null))})}else if("metricRange"in G){const{key:se,min:xe,max:St}=G.metricRange;x.push({id:`metric:${se}`,label:`${se}: ${ck(xe,St)}`,onRemove:()=>ku(se,null)})}return x},[k.filters,vl,ku,Mt]),ox=c.useCallback(x=>{const M=new Set(br);M.has(x)?M.delete(x):M.add(x),P(I=>({...I,filters:dc(I.filters,Array.from(M))}))},[br]),lx=c.useCallback(()=>{me(!0),le("metrics")},[]),ax=c.useCallback(x=>{P(M=>({...M,sort:x})),x.kind==="builtin"&&x.key==="random"&&F(Date.now())},[]),Xf=c.useCallback(x=>{if(x==="/"||x==="")return"Lenslet | Root";const M=x.split("/").filter(Boolean);if(!M.length)return"Lenslet";const I=M.slice(-2).join("/");return`Lenslet | ${M.length>2?`.../${I}`:`/${I}`}`},[]),ux=c.useMemo(()=>uk(e),[e]);c.useEffect(()=>{document.title=Xf(e)},[e,Xf]),c.useEffect(()=>{let x=!0;return ye.getViews().then(M=>{x&&Le(M.views||[])}).catch(()=>{x&&Le([])}),()=>{x=!1}},[]),c.useEffect(()=>{_n&&(i([]),f&&(m(null),ot.current=!1,Wl(e)))},[_n,f,e]),c.useEffect(()=>{const x=Qe.current,M=Ke.current;if(!x||!M)return;const I=()=>{const O=Math.max(48,Math.round(M.getBoundingClientRect().height));x.style.setProperty("--toolbar-h",`${O}px`)};if(I(),"ResizeObserver"in window){const O=new ResizeObserver(I);return O.observe(M),()=>O.disconnect()}return window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]),c.useEffect(()=>{try{const x=localStorage.getItem(Ge.sortKey),M=localStorage.getItem(Ge.sortDir),I=localStorage.getItem(Ge.sortSpec),O=localStorage.getItem(Ge.starFilters),V=localStorage.getItem(Ge.filterAst),Z=localStorage.getItem(Ge.selectedMetric),pe=localStorage.getItem(Ge.viewMode),G=localStorage.getItem(Ge.gridItemSize),se=localStorage.getItem(Ge.leftOpen),xe=localStorage.getItem(Ge.rightOpen),rh=(bt=>{if(!bt)return null;const tt=oc(bt);return!tt||typeof tt!="object"?null:tt.kind==="builtin"&&(tt.key==="name"||tt.key==="added"||tt.key==="random")&&(tt.dir==="asc"||tt.dir==="desc")||tt.kind==="metric"&&typeof tt.key=="string"&&tt.key.length>0&&(tt.dir==="asc"||tt.dir==="desc")?tt:null})(I)??{kind:"builtin",key:x==="name"||x==="added"||x==="random"?x:"added",dir:M==="asc"||M==="desc"?M:"desc"};rh.key==="random"&&F(Date.now());let Mu=(bt=>{if(!bt)return null;const tt=oc(bt);return Fd(tt)})(V)??{and:[]};if(O){const bt=oc(O);if(Array.isArray(bt)){const tt=bt.filter(yx=>[0,1,2,3,4,5].includes(yx));Mu=dc(Mu,tt)}}if(P(bt=>({...bt,sort:rh,filters:Mu,selectedMetric:Z||bt.selectedMetric})),(pe==="grid"||pe==="adaptive")&&A(pe),G){const bt=Number(G);!isNaN(bt)&&bt>=80&&bt<=500&&de(bt)}(se==="0"||se==="false")&&me(!1),(xe==="0"||xe==="false")&&H(!1)}catch{}},[]),c.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia("(max-width: 900px)"),M=()=>{x.matches&&(me(!1),H(!1))};return M(),"addEventListener"in x?(x.addEventListener("change",M),()=>x.removeEventListener("change",M)):(x.addListener(M),()=>x.removeListener(M))},[]),c.useEffect(()=>{if(typeof window>"u")return;const x=[1,1.25,1.5,1.75,2,3,4],M=V=>x.reduce((Z,pe)=>Math.abs(pe-V)<Math.abs(Z-V)?pe:Z,x[0]),I=()=>{var St;const V=window.devicePixelRatio||1,Z=M(V),pe=((St=window.visualViewport)==null?void 0:St.scale)??1,G=V*pe/Z;if(!Number.isFinite(G)){j(null);return}const se=Math.round(G*100),xe=Math.min(500,Math.max(25,se));j(xe)};I(),window.addEventListener("resize",I),window.addEventListener("orientationchange",I);const O=window.visualViewport;return O&&O.addEventListener("resize",I),()=>{window.removeEventListener("resize",I),window.removeEventListener("orientationchange",I),O&&O.removeEventListener("resize",I)}},[]),c.useEffect(()=>{try{localStorage.setItem(Ge.sortKey,k.sort.kind==="builtin"?k.sort.key:"added"),localStorage.setItem(Ge.sortDir,k.sort.dir),localStorage.setItem(Ge.sortSpec,JSON.stringify(k.sort));const x=Zm(k.filters);localStorage.setItem(Ge.starFilters,JSON.stringify(x)),localStorage.setItem(Ge.filterAst,JSON.stringify(k.filters)),k.selectedMetric?localStorage.setItem(Ge.selectedMetric,k.selectedMetric):localStorage.removeItem(Ge.selectedMetric),localStorage.setItem(Ge.viewMode,B),localStorage.setItem(Ge.gridItemSize,String(ee)),localStorage.setItem(Ge.leftOpen,T?"1":"0"),localStorage.setItem(Ge.rightOpen,D?"1":"0")}catch{}},[k,B,ee,T,D]),c.useEffect(()=>{const x=Pe.current;if(!x)return;const M=O=>Math.min(500,Math.max(80,O)),I=O=>{O.ctrlKey&&(f||g||(O.preventDefault(),de(V=>M(V+(O.deltaY<0?20:-20)))))};return x.addEventListener("wheel",I,{passive:!1}),()=>x.removeEventListener("wheel",I)},[f,g]),c.useEffect(()=>{if(f||g)return;const x=Pe.current;if(!x)return;const M=G=>Math.min(500,Math.max(80,G));let I=null;const O=G=>{if(G.length<2)return 0;const[se,xe]=[G[0],G[1]];return Math.hypot(se.clientX-xe.clientX,se.clientY-xe.clientY)},V=G=>{if(G.touches.length!==2)return;const se=O(G.touches);se&&(I={dist:se,size:ee})},Z=G=>{if(!I||G.touches.length!==2)return;const se=O(G.touches);if(!se)return;G.preventDefault();const xe=M(I.size*(se/I.dist));de(xe)},pe=()=>{I=null};return x.addEventListener("touchstart",V,{passive:!0}),x.addEventListener("touchmove",Z,{passive:!1}),x.addEventListener("touchend",pe),x.addEventListener("touchcancel",pe),()=>{x.removeEventListener("touchstart",V),x.removeEventListener("touchmove",Z),x.removeEventListener("touchend",pe),x.removeEventListener("touchcancel",pe)}},[f,g,ee]),c.useEffect(()=>{Np(ZC(Yt,f),"viewer")},[f,Yt]),c.useEffect(()=>{g&&Np(ek(ls,Fn),"compare")},[g,ls,Fn]);const yl=c.useCallback(x=>{m(null),ot.current=!1;const M=Hn(x);t(M),Xm(M)},[]),cx=c.useCallback(async()=>{const x=window.prompt("Save Smart Folder as:","New Smart Folder");if(!x)return;const M=ok(x,fe),I={id:M,name:x,pool:{kind:"folder",path:e},view:JSON.parse(JSON.stringify(k))},O=[...fe.filter(V=>V.id!==M),I];Le(O),K(M);try{await ye.saveViews({version:1,views:O})}catch(V){if(V instanceof Pn&&V.status===403){const Z=new Blob([JSON.stringify({version:1,views:O},null,2)],{type:"application/json"});ca(Z,`lenslet-smart-folder-${M}.json`),alert("No-write mode: exported Smart Folder JSON instead of saving.");return}console.error("Failed to save Smart Folder:",V)}},[e,k,fe]);c.useEffect(()=>{if(!Q)return;const x=fe.find(O=>O.id===Q);if(!x){K(null);return}const M=x.pool.path===e,I=JSON.stringify(x.view)===JSON.stringify(k);(!M||!I)&&K(null)},[Q,fe,e,k]);const xl=c.useCallback(x=>{if(!x)return;const M=document.getElementById(`cell-${encodeURIComponent(x)}`);M==null||M.focus()},[]),dx=c.useCallback(x=>{m(x),ot.current=!0,Xm(x)},[]),Jf=c.useCallback(()=>{m(null),ot.current?(ot.current=!1,window.history.back()):Wl(e),xl(sn.current)},[xl]),fx=c.useCallback(()=>{g||!Ee||(s[0]&&(sn.current=s[0]),E(0),b(!0),f&&(m(null),ot.current&&(ot.current=!1),Wl(e)),Ot.current||(window.history.pushState({compare:!0},"",window.location.href),Ot.current=!0))},[g,Ee,s,f,e]),Eu=c.useCallback(()=>{b(!1),Ot.current&&(Ot.current=!1,window.history.back()),xl(sn.current??s[0])},[xl,s]),hx=c.useCallback(x=>{Ze.length<2||E(M=>{const I=Math.max(0,Ze.length-2);return Math.min(I,Math.max(0,M+x))})},[Ze.length]);c.useEffect(()=>{g&&(Ee||Eu())},[g,Ee,Eu]),c.useEffect(()=>{const x=()=>{f&&(ot.current=!1,m(null)),g&&(Ot.current=!1,b(!1))};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[f,g]),c.useEffect(()=>{const x=Qe.current;if(!x)return;const M=V=>{V.dataTransfer&&Array.from(V.dataTransfer.types).includes("Files")&&(V.preventDefault(),Te(!0))},I=V=>{const Z=V.relatedTarget;Z&&x.contains(Z)||Te(!1)},O=async V=>{var G,se;V.preventDefault(),Te(!1);const Z=Array.from(((G=V.dataTransfer)==null?void 0:G.files)??[]);if(!Z.length)return;if(!((((se=Je==null?void 0:Je.dirs)==null?void 0:se.length)??0)===0)){alert("Uploads are only allowed into folders without subdirectories.");return}for(const xe of Z)try{await ye.uploadFile(e,xe)}catch(St){console.error(`Failed to upload ${xe.name}:`,St)}wr()};return x.addEventListener("dragover",M),x.addEventListener("dragleave",I),x.addEventListener("drop",O),()=>{x.removeEventListener("dragover",M),x.removeEventListener("dragleave",I),x.removeEventListener("drop",O)}},[e,(nh=Je==null?void 0:Je.dirs)==null?void 0:nh.length,wr]),c.useEffect(()=>{const x=()=>ht(null),M=I=>{I.key==="Escape"&&ht(null)};return window.addEventListener("click",x),window.addEventListener("keydown",M),()=>{window.removeEventListener("click",x),window.removeEventListener("keydown",M)}},[]),c.useEffect(()=>{const x=M=>{if(!Bf(M.target)){if((M.ctrlKey||M.metaKey)&&M.key.toLowerCase()==="b"){M.preventDefault(),M.altKey?H(I=>!I):me(I=>!I);return}if(!(f||g)){if(M.key==="Backspace"||M.key==="Delete")M.preventDefault(),yl(Jm(e));else if((M.ctrlKey||M.metaKey)&&M.key.toLowerCase()==="a")M.preventDefault(),i(ze.map(I=>I.path));else if(M.key==="Escape")s.length&&(M.preventDefault(),i([]));else if(M.key==="/"){M.preventDefault();const I=document.querySelector(".toolbar-right .input");I==null||I.focus()}}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,ze,s,f,g,yl]);const mx=T?`${J}px`:"0px",px=D?`${he}px`:"0px",Zf=f??s[0]??null,Nu=Zf?Yt.indexOf(Zf):-1,gx=Nu>0,vx=Nu>=0&&Nu<Yt.length-1,ju=c.useCallback(x=>{if(!Yt.length)return;const M=f??s[0];if(!M)return;const I=Yt.indexOf(M);if(I===-1)return;const O=Math.min(Yt.length-1,Math.max(0,I+x)),V=Yt[O];!V||V===M||(f&&(m(V),Wl(V)),i([V]))},[Yt,f,s]);return a.jsxs("div",{className:"app-shell grid h-full grid-cols-[var(--left)_1fr_var(--right)]",ref:Qe,style:{"--left":mx,"--right":px},children:[a.jsx(T1,{rootRef:Ke,onSearch:r,viewerActive:!!f,onBack:Jf,zoomPercent:f?v:void 0,onZoomPercentChange:x=>p(x),currentLabel:ux,itemCount:tx,totalCount:nx,sortSpec:k.sort,metricKeys:Nr,onSortChange:ax,sortDisabled:zt,filterCount:ml,onOpenFilters:lx,starFilters:br,onToggleStar:ox,onClearStars:vl,onClearFilters:Yf,starCounts:Vy,viewMode:B,onViewMode:A,gridItemSize:ee,onGridItemSize:de,leftOpen:T,rightOpen:D,onToggleLeft:()=>me(x=>!x),onToggleRight:()=>H(x=>!x),onPrevImage:()=>ju(-1),onNextImage:()=>ju(1),canPrevImage:gx,canNextImage:vx,searchDisabled:zt,searchPlaceholder:zt?"Exit similarity to search":void 0,syncIndicator:{state:Jy,presence:gl,syncLabel:Wy,connectionLabel:Qy,lastEditedLabel:Ky,hasEdits:bu,localTypingActive:xt,recentTouches:ex}}),T&&a.jsx(IC,{leftTool:X,onToolChange:le,compareEnabled:Ee,compareActive:g,onOpenCompare:fx,views:fe,activeViewId:Q,onActivateView:x=>{var I;K(x.id);const M=Fd((I=x.view)==null?void 0:I.filters)??{and:[]};P({...x.view,filters:M}),yl(x.pool.path)},onSaveView:cx,current:e,data:Je,onOpenFolder:x=>{K(null),yl(x)},onContextMenu:(x,M)=>{x.preventDefault(),ht({x:x.clientX,y:x.clientY,kind:"tree",payload:{path:M}})},countVersion:re,items:an,filteredItems:ze,metricKeys:Nr,selectedItems:wu,selectedMetric:k.selectedMetric,onSelectMetric:x=>P(M=>({...M,selectedMetric:x})),filters:k.filters,onChangeRange:ku,onChangeFilters:rx,onResize:te}),a.jsxs("div",{className:"grid-shell col-start-2 row-start-2 relative overflow-hidden flex flex-col",ref:Pe,children:[a.jsx("div",{"aria-live":"polite",className:"sr-only",children:s.length?`${s.length} selected`:""}),a.jsx(FC,{persistenceEnabled:yr,offViewSummary:Zy,canRevealOffView:Su,onRevealOffView:sx,onClearOffView:xu,browserZoomPercent:R}),u&&a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"font-semibold",children:"Similarity mode"}),a.jsxs("span",{className:"text-muted",children:["Embedding: ",u.embedding]}),Kf&&a.jsxs("span",{className:"text-muted",children:["Query: ",Kf]}),qf&&a.jsxs("span",{className:"text-muted",children:["Results: ",qf]}),a.jsxs("span",{className:"text-muted",children:["Top K: ",u.topK]}),u.minScore!=null&&a.jsxs("span",{className:"text-muted",children:["Min score: ",u.minScore]})]}),a.jsx("button",{className:"btn btn-sm",onClick:Cu,children:"Exit similarity"})]})}),Gf.length>0&&a.jsx("div",{className:"sticky top-0 z-10 px-3 py-2 bg-panel border-b border-border",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Filters"}),Gf.map(x=>a.jsxs("span",{className:"filter-chip",children:[a.jsx("span",{className:"truncate max-w-[240px]",title:x.label,children:x.label}),a.jsx("button",{className:"filter-chip-remove","aria-label":`Clear filter ${x.label}`,onClick:x.onRemove,children:""})]},x.id)),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:Yf,children:"Clear all"})]})}),!1,a.jsxs("div",{className:"flex-1 min-h-0 relative",children:[a.jsx(_S,{items:ze,selected:s,restoreToSelectionToken:L,onSelectionChange:i,onOpenViewer:x=>{try{sn.current=x}catch{}dx(x),i([x])},highlight:_n?qn:"",recentlyUpdated:Vi,onVisiblePathsChange:yu,suppressSelectionHighlight:!!f||g,viewMode:B,targetCellSize:ee,onContextMenuItem:(x,M)=>{x.preventDefault();const I=s.length?s:[M];ht({x:x.clientX,y:x.clientY,kind:"grid",payload:{paths:I}})},scrollRef:it,hideScrollbar:as}),as&&Gt&&a.jsx(OS,{items:ze,metricKey:Gt,scrollRef:it,sortDir:k.sort.dir})]})]}),D&&a.jsx(kb,{path:s[0]??null,selectedPaths:s,items:ze,compareActive:g,compareA:_,compareB:q,sortSpec:k.sort,onResize:ge,onStarChanged:(x,M)=>{Ae(I=>{const O={...I};for(const V of x)O[V]=M;return O})},onFindSimilar:()=>l(!0),embeddingsAvailable:ll,embeddingsLoading:Sr.isLoading,onLocalTypingChange:Hs}),a.jsx(Eb,{open:o,embeddings:Ui,rejected:ol,selectedPath:s[0]??null,embeddingsLoading:Sr.isLoading,embeddingsError:al,onClose:()=>l(!1),onSearch:ix}),f&&a.jsx(WS,{path:f,onClose:Jf,onZoomChange:x=>S(Math.round(x)),requestedZoomPercent:h,onZoomRequestConsumed:()=>p(null),onNavigate:ju}),g&&a.jsx(GS,{aItem:_,bItem:q,index:Fn,total:Ze.length,canPrev:ue,canNext:ce,onNavigate:hx,onClose:Eu}),ke&&a.jsx("div",{className:"toolbar-offset fixed inset-0 left-[var(--left)] right-[var(--right)] bg-accent/10 border-2 border-dashed border-accent text-text flex items-center justify-center text-lg z-overlay pointer-events-none",children:"Drop images to upload"}),Se&&a.jsx(hk,{ctx:Se,current:e,items:ze,refetch:wr,setCtx:ht,onInvalidateCounts:Jn})]})}function ok(e,t){const n=lk(e)||"view",r=new Set(t.map(i=>i.id));if(!r.has(n))return n;let s=2;for(;r.has(`${n}-${s}`);)s+=1;return`${n}-${s}`}function lk(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function mc(e){const t=e.filter(s=>s>0).sort((s,i)=>i-s),n=e.includes(0),r=[...t.map(s=>String(s))];return n&&r.push("None"),r.join(", ")}function ak(e,t){return e&&t?`${e} to ${t}`:e?`from ${e}`:t?`to ${t}`:""}function uk(e){if(e==="/"||e==="")return"Root";const t=e.split("/").filter(Boolean);return t.length?t.length<=2?`/${t.join("/")}`:`.../${t.slice(-2).join("/")}`:"Root"}function ck(e,t){return`${Mp(e)}${Mp(t)}`}function Mp(e){const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function dk(e){const t=e.toLowerCase();return t.endsWith(".png")?"image/png":t.endsWith(".webp")?"image/webp":"image/jpeg"}function fk(e,t){const n=e.split("/").pop()??e;return{path:e,name:n,type:dk(e),w:0,h:0,size:0,hasThumb:!0,hasMeta:!1,star:t??null}}function ca(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function hk({ctx:e,current:t,items:n,refetch:r,setCtx:s,onInvalidateCounts:i}){const o=Vb(t),l=is(),[u,d]=da.useState(!1),[f,m]=da.useState(null),g=()=>new Date().toISOString().replace(/[:.]/g,"-"),b=h=>{const p=v=>h==="/"?!0:v===h||v.startsWith(`${h}/`);l.invalidateQueries({predicate:({queryKey:v})=>{if(!Array.isArray(v)||v[0]!=="folder")return!1;const S=typeof v[1]=="string"?v[1]:"";return p(S)}})},w=h=>{const p=Hn(h);return p===""?"/":p},E=async()=>{const h=w(e.payload.path||"/");d(!0);try{await ye.refreshFolder(h),b(h),i(),(t===h||t.startsWith(h==="/"?"/":`${h}/`))&&await r(),bd.evictPrefix(h),Ys.evictPrefix(h)}catch(p){console.error("Failed to refresh folder:",p)}finally{d(!1),s(null)}},L=h=>async()=>{m(h);const p=e.payload.path||t;try{const S=(await ye.getFolder(p,{recursive:!0,legacyRecursive:!0})).items,R=cp(S),j=h==="csv"?up(R):ap(R),k=h==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8",P=p==="/"?"root":(p.replace(/^\/+/,"")||"root").replace(/\//g,"_");ca(new Blob([j],{type:k}),`metadata_${P}_${g()}.${h}`)}catch(v){console.error("Failed to export folder:",v),alert("Failed to export folder. See console for details.")}finally{m(null),s(null)}},y=e.kind==="tree"?[{label:u?"Refreshing":"Refresh",disabled:u,onClick:E},{label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f||u,onClick:L("csv")},{label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f||u,onClick:L("json")}]:(()=>{const h=e.payload.paths??[],p=[],v=R=>async()=>{m(R);try{const j=new Set(h),k=n.filter(B=>j.has(B.path)),P=cp(k),N=R==="csv"?up(P):ap(P),F=R==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8";ca(new Blob([N],{type:F}),`metadata_selection_${g()}.${R}`)}finally{m(null),s(null)}},S=async()=>{var j;if(!h.length)return;s(null);const R=new Map(n.map(k=>[k.path,k]));for(const k of h)try{const P=await ye.getFile(k),N=((j=R.get(k))==null?void 0:j.name)||Ub(k)||"image";ca(P,N)}catch(P){console.error(`Failed to download ${k}:`,P)}};return h.length&&p.push({label:h.length>1?`Download (${h.length})`:"Download",onClick:S}),p.push({label:"Move to trash",disabled:o,onClick:async()=>{if(!o){for(const R of h)try{await ye.moveFile(R,"/_trash_")}catch(j){console.error(`Failed to trash ${R}:`,j)}r(),s(null)}}}),o&&(p.push({label:"Permanent delete",danger:!0,onClick:async()=>{if(confirm(`Delete ${h.length} file(s) permanently? This cannot be undone.`)){try{await ye.deleteFiles(h)}catch(R){console.error("Failed to delete files:",R)}r(),s(null)}}}),p.push({label:"Recover",onClick:async()=>{for(const R of h)try{const k=(await ye.getSidecar(R)).original_position,P=k&&k.split("/").slice(0,-1).join("/")||"/";await ye.moveFile(R,P)}catch(j){console.error(`Failed to recover ${R}:`,j)}r(),s(null)}})),h.length&&(p.push({label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f,onClick:v("csv")}),p.push({label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f,onClick:v("json")})),p})();return a.jsx(vC,{x:e.x,y:e.y,items:y})}const mk=new g1({defaultOptions:{queries:{staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always"},mutations:{retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),5e3)}}});function pk(){return a.jsx(v1,{client:mk,children:a.jsx(ik,{})})}Jv(document.getElementById("root")).render(a.jsx(pk,{}));
