var Sy=Object.defineProperty;var sf=e=>{throw TypeError(e)};var ky=(e,t,n)=>t in e?Sy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var bn=(e,t,n)=>ky(e,typeof t!="symbol"?t+"":t,n),Ca=(e,t,n)=>t.has(e)||sf("Cannot "+n);var S=(e,t,n)=>(Ca(e,t,"read from private field"),n?n.call(e):t.get(e)),re=(e,t,n)=>t.has(e)?sf("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),K=(e,t,n,r)=>(Ca(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),pe=(e,t,n)=>(Ca(e,t,"access private method"),n);var vo=(e,t,n,r)=>({set _(s){K(e,t,s,n)},get _(){return S(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Cy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Im={exports:{}},Dl={},Fm={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var to=Symbol.for("react.element"),by=Symbol.for("react.portal"),Ey=Symbol.for("react.fragment"),Ny=Symbol.for("react.strict_mode"),jy=Symbol.for("react.profiler"),My=Symbol.for("react.provider"),Ry=Symbol.for("react.context"),Ly=Symbol.for("react.forward_ref"),Ty=Symbol.for("react.suspense"),_y=Symbol.for("react.memo"),Py=Symbol.for("react.lazy"),of=Symbol.iterator;function Iy(e){return e===null||typeof e!="object"?null:(e=of&&e[of]||e["@@iterator"],typeof e=="function"?e:null)}var Om={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dm=Object.assign,zm={};function Gs(e,t,n){this.props=e,this.context=t,this.refs=zm,this.updater=n||Om}Gs.prototype.isReactComponent={};Gs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Gs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Am(){}Am.prototype=Gs.prototype;function Rc(e,t,n){this.props=e,this.context=t,this.refs=zm,this.updater=n||Om}var Lc=Rc.prototype=new Am;Lc.constructor=Rc;Dm(Lc,Gs.prototype);Lc.isPureReactComponent=!0;var lf=Array.isArray,$m=Object.prototype.hasOwnProperty,Tc={current:null},Um={key:!0,ref:!0,__self:!0,__source:!0};function Bm(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)$m.call(t,r)&&!Um.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:to,type:e,key:i,ref:o,props:s,_owner:Tc.current}}function Fy(e,t){return{$$typeof:to,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function _c(e){return typeof e=="object"&&e!==null&&e.$$typeof===to}function Oy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var af=/\/+/g;function ba(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Oy(""+e.key):t.toString(36)}function $o(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case to:case by:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+ba(o,0):r,lf(s)?(n="",e!=null&&(n=e.replace(af,"$&/")+"/"),$o(s,t,n,"",function(c){return c})):s!=null&&(_c(s)&&(s=Fy(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(af,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",lf(e))for(var l=0;l<e.length;l++){i=e[l];var u=r+ba(i,l);o+=$o(i,t,n,u,s)}else if(u=Iy(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=r+ba(i,l++),o+=$o(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function yo(e,t,n){if(e==null)return e;var r=[],s=0;return $o(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Dy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wt={current:null},Uo={transition:null},zy={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:Uo,ReactCurrentOwner:Tc};function Wm(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:yo,forEach:function(e,t,n){yo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return yo(e,function(){t++}),t},toArray:function(e){return yo(e,function(t){return t})||[]},only:function(e){if(!_c(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=Gs;we.Fragment=Ey;we.Profiler=jy;we.PureComponent=Rc;we.StrictMode=Ny;we.Suspense=Ty;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zy;we.act=Wm;we.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Dm({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Tc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)$m.call(t,u)&&!Um.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:to,type:e.type,key:s,ref:i,props:r,_owner:o}};we.createContext=function(e){return e={$$typeof:Ry,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:My,_context:e},e.Consumer=e};we.createElement=Bm;we.createFactory=function(e){var t=Bm.bind(null,e);return t.type=e,t};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:Ly,render:e}};we.isValidElement=_c;we.lazy=function(e){return{$$typeof:Py,_payload:{_status:-1,_result:e},_init:Dy}};we.memo=function(e,t){return{$$typeof:_y,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=Uo.transition;Uo.transition={};try{e()}finally{Uo.transition=t}};we.unstable_act=Wm;we.useCallback=function(e,t){return wt.current.useCallback(e,t)};we.useContext=function(e){return wt.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return wt.current.useDeferredValue(e)};we.useEffect=function(e,t){return wt.current.useEffect(e,t)};we.useId=function(){return wt.current.useId()};we.useImperativeHandle=function(e,t,n){return wt.current.useImperativeHandle(e,t,n)};we.useInsertionEffect=function(e,t){return wt.current.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return wt.current.useLayoutEffect(e,t)};we.useMemo=function(e,t){return wt.current.useMemo(e,t)};we.useReducer=function(e,t,n){return wt.current.useReducer(e,t,n)};we.useRef=function(e){return wt.current.useRef(e)};we.useState=function(e){return wt.current.useState(e)};we.useSyncExternalStore=function(e,t,n){return wt.current.useSyncExternalStore(e,t,n)};we.useTransition=function(){return wt.current.useTransition()};we.version="18.3.1";Fm.exports=we;var d=Fm.exports;const il=Cy(d);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay=d,$y=Symbol.for("react.element"),Uy=Symbol.for("react.fragment"),By=Object.prototype.hasOwnProperty,Wy=Ay.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hy={key:!0,ref:!0,__self:!0,__source:!0};function Hm(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)By.call(t,r)&&!Hy.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:$y,type:e,key:i,ref:o,props:s,_owner:Wy.current}}Dl.Fragment=Uy;Dl.jsx=Hm;Dl.jsxs=Hm;Im.exports=Dl;var a=Im.exports,Vm={exports:{}},At={},Qm={exports:{}},Km={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,V){var q=I.length;I.push(V);e:for(;0<q;){var he=q-1>>>1,fe=I[he];if(0<s(fe,V))I[he]=V,I[q]=fe,q=he;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var V=I[0],q=I.pop();if(q!==V){I[0]=q;e:for(var he=0,fe=I.length,Me=fe>>>1;he<Me;){var W=2*(he+1)-1,Y=I[W],te=W+1,me=I[te];if(0>s(Y,q))te<fe&&0>s(me,Y)?(I[he]=me,I[te]=q,he=te):(I[he]=Y,I[W]=q,he=W);else if(te<fe&&0>s(me,q))I[he]=me,I[te]=q,he=te;else break e}}return V}function s(I,V){var q=I.sortIndex-V.sortIndex;return q!==0?q:I.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,h=null,g=3,w=!1,k=!1,N=!1,L=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(I){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=I)r(c),V.sortIndex=V.expirationTime,t(u,V);else break;V=n(c)}}function v(I){if(N=!1,p(I),!k)if(n(u)!==null)k=!0,B(C);else{var V=n(c);V!==null&&le(v,V.startTime-I)}}function C(I,V){k=!1,N&&(N=!1,y(b),b=-1),w=!0;var q=g;try{for(p(V),h=n(u);h!==null&&(!(h.expirationTime>V)||I&&!P());){var he=h.callback;if(typeof he=="function"){h.callback=null,g=h.priorityLevel;var fe=he(h.expirationTime<=V);V=e.unstable_now(),typeof fe=="function"?h.callback=fe:h===n(u)&&r(u),p(V)}else r(u);h=n(u)}if(h!==null)var Me=!0;else{var W=n(c);W!==null&&le(v,W.startTime-V),Me=!1}return Me}finally{h=null,g=q,w=!1}}var R=!1,M=null,b=-1,T=5,E=-1;function P(){return!(e.unstable_now()-E<T)}function Q(){if(M!==null){var I=e.unstable_now();E=I;var V=!0;try{V=M(!0,I)}finally{V?O():(R=!1,M=null)}}else R=!1}var O;if(typeof m=="function")O=function(){m(Q)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ie=$.port2;$.port1.onmessage=Q,O=function(){ie.postMessage(null)}}else O=function(){L(Q,0)};function B(I){M=I,R||(R=!0,O())}function le(I,V){b=L(function(){I(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){k||w||(k=!0,B(C))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(I){switch(g){case 1:case 2:case 3:var V=3;break;default:V=g}var q=g;g=V;try{return I()}finally{g=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,V){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var q=g;g=I;try{return V()}finally{g=q}},e.unstable_scheduleCallback=function(I,V,q){var he=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?he+q:he):q=he,I){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=q+fe,I={id:f++,callback:V,priorityLevel:I,startTime:q,expirationTime:fe,sortIndex:-1},q>he?(I.sortIndex=q,t(c,I),n(u)===null&&I===n(c)&&(N?(y(b),b=-1):N=!0,le(v,q-he))):(I.sortIndex=fe,t(u,I),k||w||(k=!0,B(C))),I},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(I){var V=g;return function(){var q=g;g=V;try{return I.apply(this,arguments)}finally{g=q}}}})(Km);Qm.exports=Km;var Vy=Qm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy=d,zt=Vy;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qm=new Set,Ri={};function ts(e,t){Ws(e,t),Ws(e+"Capture",t)}function Ws(e,t){for(Ri[e]=t,e=0;e<t.length;e++)qm.add(t[e])}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ou=Object.prototype.hasOwnProperty,Ky=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uf={},cf={};function qy(e){return ou.call(cf,e)?!0:ou.call(uf,e)?!1:Ky.test(e)?cf[e]=!0:(uf[e]=!0,!1)}function Yy(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Gy(e,t,n,r){if(t===null||typeof t>"u"||Yy(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function St(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ot[e]=new St(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ot[t]=new St(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ot[e]=new St(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ot[e]=new St(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ot[e]=new St(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ot[e]=new St(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ot[e]=new St(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ot[e]=new St(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ot[e]=new St(e,5,!1,e.toLowerCase(),null,!1,!1)});var Pc=/[\-:]([a-z])/g;function Ic(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Pc,Ic);ot[t]=new St(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Pc,Ic);ot[t]=new St(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Pc,Ic);ot[t]=new St(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ot[e]=new St(e,1,!1,e.toLowerCase(),null,!1,!1)});ot.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ot[e]=new St(e,1,!1,e.toLowerCase(),null,!0,!0)});function Fc(e,t,n,r){var s=ot.hasOwnProperty(t)?ot[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Gy(t,n,s,r)&&(n=null),r||s===null?qy(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Wn=Qy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xo=Symbol.for("react.element"),cs=Symbol.for("react.portal"),ds=Symbol.for("react.fragment"),Oc=Symbol.for("react.strict_mode"),lu=Symbol.for("react.profiler"),Ym=Symbol.for("react.provider"),Gm=Symbol.for("react.context"),Dc=Symbol.for("react.forward_ref"),au=Symbol.for("react.suspense"),uu=Symbol.for("react.suspense_list"),zc=Symbol.for("react.memo"),Yn=Symbol.for("react.lazy"),Xm=Symbol.for("react.offscreen"),df=Symbol.iterator;function si(e){return e===null||typeof e!="object"?null:(e=df&&e[df]||e["@@iterator"],typeof e=="function"?e:null)}var Ae=Object.assign,Ea;function hi(e){if(Ea===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ea=t&&t[1]||""}return`
`+Ea+e}var Na=!1;function ja(e,t){if(!e||Na)return"";Na=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{Na=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?hi(e):""}function Xy(e){switch(e.tag){case 5:return hi(e.type);case 16:return hi("Lazy");case 13:return hi("Suspense");case 19:return hi("SuspenseList");case 0:case 2:case 15:return e=ja(e.type,!1),e;case 11:return e=ja(e.type.render,!1),e;case 1:return e=ja(e.type,!0),e;default:return""}}function cu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ds:return"Fragment";case cs:return"Portal";case lu:return"Profiler";case Oc:return"StrictMode";case au:return"Suspense";case uu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Gm:return(e.displayName||"Context")+".Consumer";case Ym:return(e._context.displayName||"Context")+".Provider";case Dc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zc:return t=e.displayName||null,t!==null?t:cu(e.type)||"Memo";case Yn:t=e._payload,e=e._init;try{return cu(e(t))}catch{}}return null}function Jy(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cu(t);case 8:return t===Oc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Zy(e){var t=Jm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wo(e){e._valueTracker||(e._valueTracker=Zy(e))}function Zm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Jm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ol(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function du(e,t){var n=t.checked;return Ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ff(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=xr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ep(e,t){t=t.checked,t!=null&&Fc(e,"checked",t,!1)}function fu(e,t){ep(e,t);var n=xr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?hu(e,t.type,n):t.hasOwnProperty("defaultValue")&&hu(e,t.type,xr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function hf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function hu(e,t,n){(t!=="number"||ol(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var mi=Array.isArray;function ks(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+xr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function mu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function mf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(z(92));if(mi(n)){if(1<n.length)throw Error(z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:xr(n)}}function tp(e,t){var n=xr(t.value),r=xr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function pf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function np(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?np(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var So,rp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(So=So||document.createElement("div"),So.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=So.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Li(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var xi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},e0=["Webkit","ms","Moz","O"];Object.keys(xi).forEach(function(e){e0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xi[t]=xi[e]})});function sp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||xi.hasOwnProperty(e)&&xi[e]?(""+t).trim():t+"px"}function ip(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=sp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var t0=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gu(e,t){if(t){if(t0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function vu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yu=null;function Ac(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xu=null,Cs=null,bs=null;function gf(e){if(e=so(e)){if(typeof xu!="function")throw Error(z(280));var t=e.stateNode;t&&(t=Bl(t),xu(e.stateNode,e.type,t))}}function op(e){Cs?bs?bs.push(e):bs=[e]:Cs=e}function lp(){if(Cs){var e=Cs,t=bs;if(bs=Cs=null,gf(e),t)for(e=0;e<t.length;e++)gf(t[e])}}function ap(e,t){return e(t)}function up(){}var Ma=!1;function cp(e,t,n){if(Ma)return e(t,n);Ma=!0;try{return ap(e,t,n)}finally{Ma=!1,(Cs!==null||bs!==null)&&(up(),lp())}}function Ti(e,t){var n=e.stateNode;if(n===null)return null;var r=Bl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(z(231,t,typeof n));return n}var wu=!1;if(An)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){wu=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{wu=!1}function n0(e,t,n,r,s,i,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var wi=!1,ll=null,al=!1,Su=null,r0={onError:function(e){wi=!0,ll=e}};function s0(e,t,n,r,s,i,o,l,u){wi=!1,ll=null,n0.apply(r0,arguments)}function i0(e,t,n,r,s,i,o,l,u){if(s0.apply(this,arguments),wi){if(wi){var c=ll;wi=!1,ll=null}else throw Error(z(198));al||(al=!0,Su=c)}}function ns(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function dp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vf(e){if(ns(e)!==e)throw Error(z(188))}function o0(e){var t=e.alternate;if(!t){if(t=ns(e),t===null)throw Error(z(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return vf(s),e;if(i===r)return vf(s),t;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?e:t}function fp(e){return e=o0(e),e!==null?hp(e):null}function hp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=hp(e);if(t!==null)return t;e=e.sibling}return null}var mp=zt.unstable_scheduleCallback,yf=zt.unstable_cancelCallback,l0=zt.unstable_shouldYield,a0=zt.unstable_requestPaint,He=zt.unstable_now,u0=zt.unstable_getCurrentPriorityLevel,$c=zt.unstable_ImmediatePriority,pp=zt.unstable_UserBlockingPriority,ul=zt.unstable_NormalPriority,c0=zt.unstable_LowPriority,gp=zt.unstable_IdlePriority,zl=null,xn=null;function d0(e){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(zl,e,void 0,(e.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:m0,f0=Math.log,h0=Math.LN2;function m0(e){return e>>>=0,e===0?32:31-(f0(e)/h0|0)|0}var ko=64,Co=4194304;function pi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function cl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=pi(l):(i&=o,i!==0&&(r=pi(i)))}else o=n&~s,o!==0?r=pi(o):i!==0&&(r=pi(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ln(t),s=1<<n,r|=e[n],t&=~s;return r}function p0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function g0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ln(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=p0(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function ku(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vp(){var e=ko;return ko<<=1,!(ko&4194240)&&(ko=64),e}function Ra(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function no(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ln(t),e[t]=n}function v0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ln(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Uc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ln(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Le=0;function yp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var xp,Bc,wp,Sp,kp,Cu=!1,bo=[],cr=null,dr=null,fr=null,_i=new Map,Pi=new Map,Xn=[],y0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xf(e,t){switch(e){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":_i.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pi.delete(t.pointerId)}}function oi(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=so(t),t!==null&&Bc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function x0(e,t,n,r,s){switch(t){case"focusin":return cr=oi(cr,e,t,n,r,s),!0;case"dragenter":return dr=oi(dr,e,t,n,r,s),!0;case"mouseover":return fr=oi(fr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return _i.set(i,oi(_i.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Pi.set(i,oi(Pi.get(i)||null,e,t,n,r,s)),!0}return!1}function Cp(e){var t=Lr(e.target);if(t!==null){var n=ns(t);if(n!==null){if(t=n.tag,t===13){if(t=dp(n),t!==null){e.blockedOn=t,kp(e.priority,function(){wp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=bu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);yu=r,n.target.dispatchEvent(r),yu=null}else return t=so(n),t!==null&&Bc(t),e.blockedOn=n,!1;t.shift()}return!0}function wf(e,t,n){Bo(e)&&n.delete(t)}function w0(){Cu=!1,cr!==null&&Bo(cr)&&(cr=null),dr!==null&&Bo(dr)&&(dr=null),fr!==null&&Bo(fr)&&(fr=null),_i.forEach(wf),Pi.forEach(wf)}function li(e,t){e.blockedOn===t&&(e.blockedOn=null,Cu||(Cu=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,w0)))}function Ii(e){function t(s){return li(s,e)}if(0<bo.length){li(bo[0],e);for(var n=1;n<bo.length;n++){var r=bo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(cr!==null&&li(cr,e),dr!==null&&li(dr,e),fr!==null&&li(fr,e),_i.forEach(t),Pi.forEach(t),n=0;n<Xn.length;n++)r=Xn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Xn.length&&(n=Xn[0],n.blockedOn===null);)Cp(n),n.blockedOn===null&&Xn.shift()}var Es=Wn.ReactCurrentBatchConfig,dl=!0;function S0(e,t,n,r){var s=Le,i=Es.transition;Es.transition=null;try{Le=1,Wc(e,t,n,r)}finally{Le=s,Es.transition=i}}function k0(e,t,n,r){var s=Le,i=Es.transition;Es.transition=null;try{Le=4,Wc(e,t,n,r)}finally{Le=s,Es.transition=i}}function Wc(e,t,n,r){if(dl){var s=bu(e,t,n,r);if(s===null)Aa(e,t,r,fl,n),xf(e,r);else if(x0(s,e,t,n,r))r.stopPropagation();else if(xf(e,r),t&4&&-1<y0.indexOf(e)){for(;s!==null;){var i=so(s);if(i!==null&&xp(i),i=bu(e,t,n,r),i===null&&Aa(e,t,r,fl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Aa(e,t,r,null,n)}}var fl=null;function bu(e,t,n,r){if(fl=null,e=Ac(r),e=Lr(e),e!==null)if(t=ns(e),t===null)e=null;else if(n=t.tag,n===13){if(e=dp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fl=e,null}function bp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(u0()){case $c:return 1;case pp:return 4;case ul:case c0:return 16;case gp:return 536870912;default:return 16}default:return 16}}var ar=null,Hc=null,Wo=null;function Ep(){if(Wo)return Wo;var e,t=Hc,n=t.length,r,s="value"in ar?ar.value:ar.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Wo=s.slice(e,1<r?1-r:void 0)}function Ho(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Eo(){return!0}function Sf(){return!1}function $t(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Eo:Sf,this.isPropagationStopped=Sf,this}return Ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Eo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Eo)},persist:function(){},isPersistent:Eo}),t}var Xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vc=$t(Xs),ro=Ae({},Xs,{view:0,detail:0}),C0=$t(ro),La,Ta,ai,Al=Ae({},ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ai&&(ai&&e.type==="mousemove"?(La=e.screenX-ai.screenX,Ta=e.screenY-ai.screenY):Ta=La=0,ai=e),La)},movementY:function(e){return"movementY"in e?e.movementY:Ta}}),kf=$t(Al),b0=Ae({},Al,{dataTransfer:0}),E0=$t(b0),N0=Ae({},ro,{relatedTarget:0}),_a=$t(N0),j0=Ae({},Xs,{animationName:0,elapsedTime:0,pseudoElement:0}),M0=$t(j0),R0=Ae({},Xs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),L0=$t(R0),T0=Ae({},Xs,{data:0}),Cf=$t(T0),_0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},P0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=I0[e])?!!t[e]:!1}function Qc(){return F0}var O0=Ae({},ro,{key:function(e){if(e.key){var t=_0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ho(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?P0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qc,charCode:function(e){return e.type==="keypress"?Ho(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ho(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),D0=$t(O0),z0=Ae({},Al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bf=$t(z0),A0=Ae({},ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qc}),$0=$t(A0),U0=Ae({},Xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),B0=$t(U0),W0=Ae({},Al,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),H0=$t(W0),V0=[9,13,27,32],Kc=An&&"CompositionEvent"in window,Si=null;An&&"documentMode"in document&&(Si=document.documentMode);var Q0=An&&"TextEvent"in window&&!Si,Np=An&&(!Kc||Si&&8<Si&&11>=Si),Ef=" ",Nf=!1;function jp(e,t){switch(e){case"keyup":return V0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fs=!1;function K0(e,t){switch(e){case"compositionend":return Mp(t);case"keypress":return t.which!==32?null:(Nf=!0,Ef);case"textInput":return e=t.data,e===Ef&&Nf?null:e;default:return null}}function q0(e,t){if(fs)return e==="compositionend"||!Kc&&jp(e,t)?(e=Ep(),Wo=Hc=ar=null,fs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Np&&t.locale!=="ko"?null:t.data;default:return null}}var Y0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Y0[e.type]:t==="textarea"}function Rp(e,t,n,r){op(r),t=hl(t,"onChange"),0<t.length&&(n=new Vc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ki=null,Fi=null;function G0(e){$p(e,0)}function $l(e){var t=ps(e);if(Zm(t))return e}function X0(e,t){if(e==="change")return t}var Lp=!1;if(An){var Pa;if(An){var Ia="oninput"in document;if(!Ia){var Mf=document.createElement("div");Mf.setAttribute("oninput","return;"),Ia=typeof Mf.oninput=="function"}Pa=Ia}else Pa=!1;Lp=Pa&&(!document.documentMode||9<document.documentMode)}function Rf(){ki&&(ki.detachEvent("onpropertychange",Tp),Fi=ki=null)}function Tp(e){if(e.propertyName==="value"&&$l(Fi)){var t=[];Rp(t,Fi,e,Ac(e)),cp(G0,t)}}function J0(e,t,n){e==="focusin"?(Rf(),ki=t,Fi=n,ki.attachEvent("onpropertychange",Tp)):e==="focusout"&&Rf()}function Z0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $l(Fi)}function ex(e,t){if(e==="click")return $l(t)}function tx(e,t){if(e==="input"||e==="change")return $l(t)}function nx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var un=typeof Object.is=="function"?Object.is:nx;function Oi(e,t){if(un(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ou.call(t,s)||!un(e[s],t[s]))return!1}return!0}function Lf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tf(e,t){var n=Lf(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lf(n)}}function _p(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_p(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pp(){for(var e=window,t=ol();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ol(e.document)}return t}function qc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function rx(e){var t=Pp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&_p(n.ownerDocument.documentElement,n)){if(r!==null&&qc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Tf(n,i);var o=Tf(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sx=An&&"documentMode"in document&&11>=document.documentMode,hs=null,Eu=null,Ci=null,Nu=!1;function _f(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nu||hs==null||hs!==ol(r)||(r=hs,"selectionStart"in r&&qc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ci&&Oi(Ci,r)||(Ci=r,r=hl(Eu,"onSelect"),0<r.length&&(t=new Vc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=hs)))}function No(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ms={animationend:No("Animation","AnimationEnd"),animationiteration:No("Animation","AnimationIteration"),animationstart:No("Animation","AnimationStart"),transitionend:No("Transition","TransitionEnd")},Fa={},Ip={};An&&(Ip=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function Ul(e){if(Fa[e])return Fa[e];if(!ms[e])return e;var t=ms[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ip)return Fa[e]=t[n];return e}var Fp=Ul("animationend"),Op=Ul("animationiteration"),Dp=Ul("animationstart"),zp=Ul("transitionend"),Ap=new Map,Pf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){Ap.set(e,t),ts(t,[e])}for(var Oa=0;Oa<Pf.length;Oa++){var Da=Pf[Oa],ix=Da.toLowerCase(),ox=Da[0].toUpperCase()+Da.slice(1);Sr(ix,"on"+ox)}Sr(Fp,"onAnimationEnd");Sr(Op,"onAnimationIteration");Sr(Dp,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(zp,"onTransitionEnd");Ws("onMouseEnter",["mouseout","mouseover"]);Ws("onMouseLeave",["mouseout","mouseover"]);Ws("onPointerEnter",["pointerout","pointerover"]);Ws("onPointerLeave",["pointerout","pointerover"]);ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lx=new Set("cancel close invalid load scroll toggle".split(" ").concat(gi));function If(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,i0(r,t,void 0,e),e.currentTarget=null}function $p(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;If(s,l,c),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;If(s,l,c),i=u}}}if(al)throw e=Su,al=!1,Su=null,e}function _e(e,t){var n=t[Tu];n===void 0&&(n=t[Tu]=new Set);var r=e+"__bubble";n.has(r)||(Up(t,e,2,!1),n.add(r))}function za(e,t,n){var r=0;t&&(r|=4),Up(n,e,r,t)}var jo="_reactListening"+Math.random().toString(36).slice(2);function Di(e){if(!e[jo]){e[jo]=!0,qm.forEach(function(n){n!=="selectionchange"&&(lx.has(n)||za(n,!1,e),za(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[jo]||(t[jo]=!0,za("selectionchange",!1,t))}}function Up(e,t,n,r){switch(bp(t)){case 1:var s=S0;break;case 4:s=k0;break;default:s=Wc}n=s.bind(null,t,n,e),s=void 0,!wu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Aa(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Lr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}cp(function(){var c=i,f=Ac(n),h=[];e:{var g=Ap.get(e);if(g!==void 0){var w=Vc,k=e;switch(e){case"keypress":if(Ho(n)===0)break e;case"keydown":case"keyup":w=D0;break;case"focusin":k="focus",w=_a;break;case"focusout":k="blur",w=_a;break;case"beforeblur":case"afterblur":w=_a;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=kf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=E0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=$0;break;case Fp:case Op:case Dp:w=M0;break;case zp:w=B0;break;case"scroll":w=C0;break;case"wheel":w=H0;break;case"copy":case"cut":case"paste":w=L0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=bf}var N=(t&4)!==0,L=!N&&e==="scroll",y=N?g!==null?g+"Capture":null:g;N=[];for(var m=c,p;m!==null;){p=m;var v=p.stateNode;if(p.tag===5&&v!==null&&(p=v,y!==null&&(v=Ti(m,y),v!=null&&N.push(zi(m,v,p)))),L)break;m=m.return}0<N.length&&(g=new w(g,k,null,n,f),h.push({event:g,listeners:N}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",g&&n!==yu&&(k=n.relatedTarget||n.fromElement)&&(Lr(k)||k[$n]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(k=n.relatedTarget||n.toElement,w=c,k=k?Lr(k):null,k!==null&&(L=ns(k),k!==L||k.tag!==5&&k.tag!==6)&&(k=null)):(w=null,k=c),w!==k)){if(N=kf,v="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(N=bf,v="onPointerLeave",y="onPointerEnter",m="pointer"),L=w==null?g:ps(w),p=k==null?g:ps(k),g=new N(v,m+"leave",w,n,f),g.target=L,g.relatedTarget=p,v=null,Lr(f)===c&&(N=new N(y,m+"enter",k,n,f),N.target=p,N.relatedTarget=L,v=N),L=v,w&&k)t:{for(N=w,y=k,m=0,p=N;p;p=is(p))m++;for(p=0,v=y;v;v=is(v))p++;for(;0<m-p;)N=is(N),m--;for(;0<p-m;)y=is(y),p--;for(;m--;){if(N===y||y!==null&&N===y.alternate)break t;N=is(N),y=is(y)}N=null}else N=null;w!==null&&Ff(h,g,w,N,!1),k!==null&&L!==null&&Ff(h,L,k,N,!0)}}e:{if(g=c?ps(c):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var C=X0;else if(jf(g))if(Lp)C=tx;else{C=Z0;var R=J0}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(C=ex);if(C&&(C=C(e,c))){Rp(h,C,n,f);break e}R&&R(e,g,c),e==="focusout"&&(R=g._wrapperState)&&R.controlled&&g.type==="number"&&hu(g,"number",g.value)}switch(R=c?ps(c):window,e){case"focusin":(jf(R)||R.contentEditable==="true")&&(hs=R,Eu=c,Ci=null);break;case"focusout":Ci=Eu=hs=null;break;case"mousedown":Nu=!0;break;case"contextmenu":case"mouseup":case"dragend":Nu=!1,_f(h,n,f);break;case"selectionchange":if(sx)break;case"keydown":case"keyup":_f(h,n,f)}var M;if(Kc)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else fs?jp(e,n)&&(b="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(Np&&n.locale!=="ko"&&(fs||b!=="onCompositionStart"?b==="onCompositionEnd"&&fs&&(M=Ep()):(ar=f,Hc="value"in ar?ar.value:ar.textContent,fs=!0)),R=hl(c,b),0<R.length&&(b=new Cf(b,e,null,n,f),h.push({event:b,listeners:R}),M?b.data=M:(M=Mp(n),M!==null&&(b.data=M)))),(M=Q0?K0(e,n):q0(e,n))&&(c=hl(c,"onBeforeInput"),0<c.length&&(f=new Cf("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:c}),f.data=M))}$p(h,t)})}function zi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function hl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ti(e,n),i!=null&&r.unshift(zi(e,i,s)),i=Ti(e,t),i!=null&&r.push(zi(e,i,s))),e=e.return}return r}function is(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ff(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,s?(u=Ti(n,i),u!=null&&o.unshift(zi(n,u,l))):s||(u=Ti(n,i),u!=null&&o.push(zi(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var ax=/\r\n?/g,ux=/\u0000|\uFFFD/g;function Of(e){return(typeof e=="string"?e:""+e).replace(ax,`
`).replace(ux,"")}function Mo(e,t,n){if(t=Of(t),Of(e)!==t&&n)throw Error(z(425))}function ml(){}var ju=null,Mu=null;function Ru(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Lu=typeof setTimeout=="function"?setTimeout:void 0,cx=typeof clearTimeout=="function"?clearTimeout:void 0,Df=typeof Promise=="function"?Promise:void 0,dx=typeof queueMicrotask=="function"?queueMicrotask:typeof Df<"u"?function(e){return Df.resolve(null).then(e).catch(fx)}:Lu;function fx(e){setTimeout(function(){throw e})}function $a(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ii(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ii(t)}function hr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function zf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Js=Math.random().toString(36).slice(2),yn="__reactFiber$"+Js,Ai="__reactProps$"+Js,$n="__reactContainer$"+Js,Tu="__reactEvents$"+Js,hx="__reactListeners$"+Js,mx="__reactHandles$"+Js;function Lr(e){var t=e[yn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$n]||n[yn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=zf(e);e!==null;){if(n=e[yn])return n;e=zf(e)}return t}e=n,n=e.parentNode}return null}function so(e){return e=e[yn]||e[$n],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ps(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function Bl(e){return e[Ai]||null}var _u=[],gs=-1;function kr(e){return{current:e}}function Pe(e){0>gs||(e.current=_u[gs],_u[gs]=null,gs--)}function Te(e,t){gs++,_u[gs]=e.current,e.current=t}var wr={},ht=kr(wr),Rt=kr(!1),qr=wr;function Hs(e,t){var n=e.type.contextTypes;if(!n)return wr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Lt(e){return e=e.childContextTypes,e!=null}function pl(){Pe(Rt),Pe(ht)}function Af(e,t,n){if(ht.current!==wr)throw Error(z(168));Te(ht,t),Te(Rt,n)}function Bp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(z(108,Jy(e)||"Unknown",s));return Ae({},n,r)}function gl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wr,qr=ht.current,Te(ht,e),Te(Rt,Rt.current),!0}function $f(e,t,n){var r=e.stateNode;if(!r)throw Error(z(169));n?(e=Bp(e,t,qr),r.__reactInternalMemoizedMergedChildContext=e,Pe(Rt),Pe(ht),Te(ht,e)):Pe(Rt),Te(Rt,n)}var Mn=null,Wl=!1,Ua=!1;function Wp(e){Mn===null?Mn=[e]:Mn.push(e)}function px(e){Wl=!0,Wp(e)}function Cr(){if(!Ua&&Mn!==null){Ua=!0;var e=0,t=Le;try{var n=Mn;for(Le=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Mn=null,Wl=!1}catch(s){throw Mn!==null&&(Mn=Mn.slice(e+1)),mp($c,Cr),s}finally{Le=t,Ua=!1}}return null}var vs=[],ys=0,vl=null,yl=0,Ht=[],Vt=0,Yr=null,Pn=1,In="";function Mr(e,t){vs[ys++]=yl,vs[ys++]=vl,vl=e,yl=t}function Hp(e,t,n){Ht[Vt++]=Pn,Ht[Vt++]=In,Ht[Vt++]=Yr,Yr=e;var r=Pn;e=In;var s=32-ln(r)-1;r&=~(1<<s),n+=1;var i=32-ln(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pn=1<<32-ln(t)+s|n<<s|r,In=i+e}else Pn=1<<i|n<<s|r,In=e}function Yc(e){e.return!==null&&(Mr(e,1),Hp(e,1,0))}function Gc(e){for(;e===vl;)vl=vs[--ys],vs[ys]=null,yl=vs[--ys],vs[ys]=null;for(;e===Yr;)Yr=Ht[--Vt],Ht[Vt]=null,In=Ht[--Vt],Ht[Vt]=null,Pn=Ht[--Vt],Ht[Vt]=null}var Dt=null,Ot=null,Fe=!1,on=null;function Vp(e,t){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Uf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dt=e,Ot=hr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dt=e,Ot=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Yr!==null?{id:Pn,overflow:In}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Dt=e,Ot=null,!0):!1;default:return!1}}function Pu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Iu(e){if(Fe){var t=Ot;if(t){var n=t;if(!Uf(e,t)){if(Pu(e))throw Error(z(418));t=hr(n.nextSibling);var r=Dt;t&&Uf(e,t)?Vp(r,n):(e.flags=e.flags&-4097|2,Fe=!1,Dt=e)}}else{if(Pu(e))throw Error(z(418));e.flags=e.flags&-4097|2,Fe=!1,Dt=e}}}function Bf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dt=e}function Ro(e){if(e!==Dt)return!1;if(!Fe)return Bf(e),Fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ru(e.type,e.memoizedProps)),t&&(t=Ot)){if(Pu(e))throw Qp(),Error(z(418));for(;t;)Vp(e,t),t=hr(t.nextSibling)}if(Bf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ot=hr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ot=null}}else Ot=Dt?hr(e.stateNode.nextSibling):null;return!0}function Qp(){for(var e=Ot;e;)e=hr(e.nextSibling)}function Vs(){Ot=Dt=null,Fe=!1}function Xc(e){on===null?on=[e]:on.push(e)}var gx=Wn.ReactCurrentBatchConfig;function ui(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,e))}return e}function Lo(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wf(e){var t=e._init;return t(e._payload)}function Kp(e){function t(y,m){if(e){var p=y.deletions;p===null?(y.deletions=[m],y.flags|=16):p.push(m)}}function n(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function s(y,m){return y=vr(y,m),y.index=0,y.sibling=null,y}function i(y,m,p){return y.index=p,e?(p=y.alternate,p!==null?(p=p.index,p<m?(y.flags|=2,m):p):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,m,p,v){return m===null||m.tag!==6?(m=qa(p,y.mode,v),m.return=y,m):(m=s(m,p),m.return=y,m)}function u(y,m,p,v){var C=p.type;return C===ds?f(y,m,p.props.children,v,p.key):m!==null&&(m.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Yn&&Wf(C)===m.type)?(v=s(m,p.props),v.ref=ui(y,m,p),v.return=y,v):(v=Xo(p.type,p.key,p.props,null,y.mode,v),v.ref=ui(y,m,p),v.return=y,v)}function c(y,m,p,v){return m===null||m.tag!==4||m.stateNode.containerInfo!==p.containerInfo||m.stateNode.implementation!==p.implementation?(m=Ya(p,y.mode,v),m.return=y,m):(m=s(m,p.children||[]),m.return=y,m)}function f(y,m,p,v,C){return m===null||m.tag!==7?(m=Kr(p,y.mode,v,C),m.return=y,m):(m=s(m,p),m.return=y,m)}function h(y,m,p){if(typeof m=="string"&&m!==""||typeof m=="number")return m=qa(""+m,y.mode,p),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case xo:return p=Xo(m.type,m.key,m.props,null,y.mode,p),p.ref=ui(y,null,m),p.return=y,p;case cs:return m=Ya(m,y.mode,p),m.return=y,m;case Yn:var v=m._init;return h(y,v(m._payload),p)}if(mi(m)||si(m))return m=Kr(m,y.mode,p,null),m.return=y,m;Lo(y,m)}return null}function g(y,m,p,v){var C=m!==null?m.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return C!==null?null:l(y,m,""+p,v);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case xo:return p.key===C?u(y,m,p,v):null;case cs:return p.key===C?c(y,m,p,v):null;case Yn:return C=p._init,g(y,m,C(p._payload),v)}if(mi(p)||si(p))return C!==null?null:f(y,m,p,v,null);Lo(y,p)}return null}function w(y,m,p,v,C){if(typeof v=="string"&&v!==""||typeof v=="number")return y=y.get(p)||null,l(m,y,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case xo:return y=y.get(v.key===null?p:v.key)||null,u(m,y,v,C);case cs:return y=y.get(v.key===null?p:v.key)||null,c(m,y,v,C);case Yn:var R=v._init;return w(y,m,p,R(v._payload),C)}if(mi(v)||si(v))return y=y.get(p)||null,f(m,y,v,C,null);Lo(m,v)}return null}function k(y,m,p,v){for(var C=null,R=null,M=m,b=m=0,T=null;M!==null&&b<p.length;b++){M.index>b?(T=M,M=null):T=M.sibling;var E=g(y,M,p[b],v);if(E===null){M===null&&(M=T);break}e&&M&&E.alternate===null&&t(y,M),m=i(E,m,b),R===null?C=E:R.sibling=E,R=E,M=T}if(b===p.length)return n(y,M),Fe&&Mr(y,b),C;if(M===null){for(;b<p.length;b++)M=h(y,p[b],v),M!==null&&(m=i(M,m,b),R===null?C=M:R.sibling=M,R=M);return Fe&&Mr(y,b),C}for(M=r(y,M);b<p.length;b++)T=w(M,y,b,p[b],v),T!==null&&(e&&T.alternate!==null&&M.delete(T.key===null?b:T.key),m=i(T,m,b),R===null?C=T:R.sibling=T,R=T);return e&&M.forEach(function(P){return t(y,P)}),Fe&&Mr(y,b),C}function N(y,m,p,v){var C=si(p);if(typeof C!="function")throw Error(z(150));if(p=C.call(p),p==null)throw Error(z(151));for(var R=C=null,M=m,b=m=0,T=null,E=p.next();M!==null&&!E.done;b++,E=p.next()){M.index>b?(T=M,M=null):T=M.sibling;var P=g(y,M,E.value,v);if(P===null){M===null&&(M=T);break}e&&M&&P.alternate===null&&t(y,M),m=i(P,m,b),R===null?C=P:R.sibling=P,R=P,M=T}if(E.done)return n(y,M),Fe&&Mr(y,b),C;if(M===null){for(;!E.done;b++,E=p.next())E=h(y,E.value,v),E!==null&&(m=i(E,m,b),R===null?C=E:R.sibling=E,R=E);return Fe&&Mr(y,b),C}for(M=r(y,M);!E.done;b++,E=p.next())E=w(M,y,b,E.value,v),E!==null&&(e&&E.alternate!==null&&M.delete(E.key===null?b:E.key),m=i(E,m,b),R===null?C=E:R.sibling=E,R=E);return e&&M.forEach(function(Q){return t(y,Q)}),Fe&&Mr(y,b),C}function L(y,m,p,v){if(typeof p=="object"&&p!==null&&p.type===ds&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case xo:e:{for(var C=p.key,R=m;R!==null;){if(R.key===C){if(C=p.type,C===ds){if(R.tag===7){n(y,R.sibling),m=s(R,p.props.children),m.return=y,y=m;break e}}else if(R.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Yn&&Wf(C)===R.type){n(y,R.sibling),m=s(R,p.props),m.ref=ui(y,R,p),m.return=y,y=m;break e}n(y,R);break}else t(y,R);R=R.sibling}p.type===ds?(m=Kr(p.props.children,y.mode,v,p.key),m.return=y,y=m):(v=Xo(p.type,p.key,p.props,null,y.mode,v),v.ref=ui(y,m,p),v.return=y,y=v)}return o(y);case cs:e:{for(R=p.key;m!==null;){if(m.key===R)if(m.tag===4&&m.stateNode.containerInfo===p.containerInfo&&m.stateNode.implementation===p.implementation){n(y,m.sibling),m=s(m,p.children||[]),m.return=y,y=m;break e}else{n(y,m);break}else t(y,m);m=m.sibling}m=Ya(p,y.mode,v),m.return=y,y=m}return o(y);case Yn:return R=p._init,L(y,m,R(p._payload),v)}if(mi(p))return k(y,m,p,v);if(si(p))return N(y,m,p,v);Lo(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,m!==null&&m.tag===6?(n(y,m.sibling),m=s(m,p),m.return=y,y=m):(n(y,m),m=qa(p,y.mode,v),m.return=y,y=m),o(y)):n(y,m)}return L}var Qs=Kp(!0),qp=Kp(!1),xl=kr(null),wl=null,xs=null,Jc=null;function Zc(){Jc=xs=wl=null}function ed(e){var t=xl.current;Pe(xl),e._currentValue=t}function Fu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){wl=e,Jc=xs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mt=!0),e.firstContext=null)}function Yt(e){var t=e._currentValue;if(Jc!==e)if(e={context:e,memoizedValue:t,next:null},xs===null){if(wl===null)throw Error(z(308));xs=e,wl.dependencies={lanes:0,firstContext:e}}else xs=xs.next=e;return t}var Tr=null;function td(e){Tr===null?Tr=[e]:Tr.push(e)}function Yp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,td(t)):(n.next=s.next,s.next=n),t.interleaved=n,Un(e,r)}function Un(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Gn=!1;function nd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Un(e,n)}return s=r.interleaved,s===null?(t.next=t,td(r)):(t.next=s.next,s.next=t),r.interleaved=t,Un(e,n)}function Vo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Uc(e,n)}}function Hf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Sl(e,t,n,r){var s=e.updateQueue;Gn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(i!==null){var h=s.baseState;o=0,f=c=u=null,l=i;do{var g=l.lane,w=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=e,N=l;switch(g=t,w=n,N.tag){case 1:if(k=N.payload,typeof k=="function"){h=k.call(w,h,g);break e}h=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=N.payload,g=typeof k=="function"?k.call(w,h,g):k,g==null)break e;h=Ae({},h,g);break e;case 2:Gn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else w={eventTime:w,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=w,u=h):f=f.next=w,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Xr|=o,e.lanes=o,e.memoizedState=h}}function Vf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var io={},wn=kr(io),$i=kr(io),Ui=kr(io);function _r(e){if(e===io)throw Error(z(174));return e}function rd(e,t){switch(Te(Ui,t),Te($i,e),Te(wn,io),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pu(t,e)}Pe(wn),Te(wn,t)}function Ks(){Pe(wn),Pe($i),Pe(Ui)}function Xp(e){_r(Ui.current);var t=_r(wn.current),n=pu(t,e.type);t!==n&&(Te($i,e),Te(wn,n))}function sd(e){$i.current===e&&(Pe(wn),Pe($i))}var De=kr(0);function kl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ba=[];function id(){for(var e=0;e<Ba.length;e++)Ba[e]._workInProgressVersionPrimary=null;Ba.length=0}var Qo=Wn.ReactCurrentDispatcher,Wa=Wn.ReactCurrentBatchConfig,Gr=0,ze=null,Ge=null,et=null,Cl=!1,bi=!1,Bi=0,vx=0;function ct(){throw Error(z(321))}function od(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!un(e[n],t[n]))return!1;return!0}function ld(e,t,n,r,s,i){if(Gr=i,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qo.current=e===null||e.memoizedState===null?Sx:kx,e=n(r,s),bi){i=0;do{if(bi=!1,Bi=0,25<=i)throw Error(z(301));i+=1,et=Ge=null,t.updateQueue=null,Qo.current=Cx,e=n(r,s)}while(bi)}if(Qo.current=bl,t=Ge!==null&&Ge.next!==null,Gr=0,et=Ge=ze=null,Cl=!1,t)throw Error(z(300));return e}function ad(){var e=Bi!==0;return Bi=0,e}function mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?ze.memoizedState=et=e:et=et.next=e,et}function Gt(){if(Ge===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var t=et===null?ze.memoizedState:et.next;if(t!==null)et=t,Ge=e;else{if(e===null)throw Error(z(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},et===null?ze.memoizedState=et=e:et=et.next=e}return et}function Wi(e,t){return typeof t=="function"?t(e):t}function Ha(e){var t=Gt(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=Ge,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,c=i;do{var f=c.lane;if((Gr&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,o=r):u=u.next=h,ze.lanes|=f,Xr|=f}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=l,un(r,t.memoizedState)||(Mt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,ze.lanes|=i,Xr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Va(e){var t=Gt(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);un(i,t.memoizedState)||(Mt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Jp(){}function Zp(e,t){var n=ze,r=Gt(),s=t(),i=!un(r.memoizedState,s);if(i&&(r.memoizedState=s,Mt=!0),r=r.queue,ud(ng.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,Hi(9,tg.bind(null,n,r,s,t),void 0,null),tt===null)throw Error(z(349));Gr&30||eg(n,t,s)}return s}function eg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function tg(e,t,n,r){t.value=n,t.getSnapshot=r,rg(t)&&sg(e)}function ng(e,t,n){return n(function(){rg(t)&&sg(e)})}function rg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!un(e,n)}catch{return!0}}function sg(e){var t=Un(e,1);t!==null&&an(t,e,1,-1)}function Qf(e){var t=mn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:e},t.queue=e,e=e.dispatch=wx.bind(null,ze,e),[t.memoizedState,e]}function Hi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ig(){return Gt().memoizedState}function Ko(e,t,n,r){var s=mn();ze.flags|=e,s.memoizedState=Hi(1|t,n,void 0,r===void 0?null:r)}function Hl(e,t,n,r){var s=Gt();r=r===void 0?null:r;var i=void 0;if(Ge!==null){var o=Ge.memoizedState;if(i=o.destroy,r!==null&&od(r,o.deps)){s.memoizedState=Hi(t,n,i,r);return}}ze.flags|=e,s.memoizedState=Hi(1|t,n,i,r)}function Kf(e,t){return Ko(8390656,8,e,t)}function ud(e,t){return Hl(2048,8,e,t)}function og(e,t){return Hl(4,2,e,t)}function lg(e,t){return Hl(4,4,e,t)}function ag(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ug(e,t,n){return n=n!=null?n.concat([e]):null,Hl(4,4,ag.bind(null,t,e),n)}function cd(){}function cg(e,t){var n=Gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&od(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function dg(e,t){var n=Gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&od(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function fg(e,t,n){return Gr&21?(un(n,t)||(n=vp(),ze.lanes|=n,Xr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mt=!0),e.memoizedState=n)}function yx(e,t){var n=Le;Le=n!==0&&4>n?n:4,e(!0);var r=Wa.transition;Wa.transition={};try{e(!1),t()}finally{Le=n,Wa.transition=r}}function hg(){return Gt().memoizedState}function xx(e,t,n){var r=gr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},mg(e))pg(t,n);else if(n=Yp(e,t,n,r),n!==null){var s=xt();an(n,e,r,s),gg(n,t,r)}}function wx(e,t,n){var r=gr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(mg(e))pg(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,un(l,o)){var u=t.interleaved;u===null?(s.next=s,td(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=Yp(e,t,s,r),n!==null&&(s=xt(),an(n,e,r,s),gg(n,t,r))}}function mg(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function pg(e,t){bi=Cl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gg(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Uc(e,n)}}var bl={readContext:Yt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},Sx={readContext:Yt,useCallback:function(e,t){return mn().memoizedState=[e,t===void 0?null:t],e},useContext:Yt,useEffect:Kf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ko(4194308,4,ag.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ko(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ko(4,2,e,t)},useMemo:function(e,t){var n=mn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=mn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xx.bind(null,ze,e),[r.memoizedState,e]},useRef:function(e){var t=mn();return e={current:e},t.memoizedState=e},useState:Qf,useDebugValue:cd,useDeferredValue:function(e){return mn().memoizedState=e},useTransition:function(){var e=Qf(!1),t=e[0];return e=yx.bind(null,e[1]),mn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ze,s=mn();if(Fe){if(n===void 0)throw Error(z(407));n=n()}else{if(n=t(),tt===null)throw Error(z(349));Gr&30||eg(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Kf(ng.bind(null,r,i,e),[e]),r.flags|=2048,Hi(9,tg.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=mn(),t=tt.identifierPrefix;if(Fe){var n=In,r=Pn;n=(r&~(1<<32-ln(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Bi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=vx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},kx={readContext:Yt,useCallback:cg,useContext:Yt,useEffect:ud,useImperativeHandle:ug,useInsertionEffect:og,useLayoutEffect:lg,useMemo:dg,useReducer:Ha,useRef:ig,useState:function(){return Ha(Wi)},useDebugValue:cd,useDeferredValue:function(e){var t=Gt();return fg(t,Ge.memoizedState,e)},useTransition:function(){var e=Ha(Wi)[0],t=Gt().memoizedState;return[e,t]},useMutableSource:Jp,useSyncExternalStore:Zp,useId:hg,unstable_isNewReconciler:!1},Cx={readContext:Yt,useCallback:cg,useContext:Yt,useEffect:ud,useImperativeHandle:ug,useInsertionEffect:og,useLayoutEffect:lg,useMemo:dg,useReducer:Va,useRef:ig,useState:function(){return Va(Wi)},useDebugValue:cd,useDeferredValue:function(e){var t=Gt();return Ge===null?t.memoizedState=e:fg(t,Ge.memoizedState,e)},useTransition:function(){var e=Va(Wi)[0],t=Gt().memoizedState;return[e,t]},useMutableSource:Jp,useSyncExternalStore:Zp,useId:hg,unstable_isNewReconciler:!1};function en(e,t){if(e&&e.defaultProps){t=Ae({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ou(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ae({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Vl={isMounted:function(e){return(e=e._reactInternals)?ns(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xt(),s=gr(e),i=Fn(r,s);i.payload=t,n!=null&&(i.callback=n),t=mr(e,i,s),t!==null&&(an(t,e,s,r),Vo(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xt(),s=gr(e),i=Fn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=mr(e,i,s),t!==null&&(an(t,e,s,r),Vo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xt(),r=gr(e),s=Fn(n,r);s.tag=2,t!=null&&(s.callback=t),t=mr(e,s,r),t!==null&&(an(t,e,r,n),Vo(t,e,r))}};function qf(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Oi(n,r)||!Oi(s,i):!0}function vg(e,t,n){var r=!1,s=wr,i=t.contextType;return typeof i=="object"&&i!==null?i=Yt(i):(s=Lt(t)?qr:ht.current,r=t.contextTypes,i=(r=r!=null)?Hs(e,s):wr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Yf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vl.enqueueReplaceState(t,t.state,null)}function Du(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},nd(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Yt(i):(i=Lt(t)?qr:ht.current,s.context=Hs(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ou(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Vl.enqueueReplaceState(s,s.state,null),Sl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function qs(e,t){try{var n="",r=t;do n+=Xy(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Qa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function zu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var bx=typeof WeakMap=="function"?WeakMap:Map;function yg(e,t,n){n=Fn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Nl||(Nl=!0,qu=r),zu(e,t)},n}function xg(e,t,n){n=Fn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){zu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){zu(e,t),typeof r!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Gf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new bx;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=zx.bind(null,e,t,n),t.then(e,e))}function Xf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Jf(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Fn(-1,1),t.tag=2,mr(n,t,1))),n.lanes|=1),e)}var Ex=Wn.ReactCurrentOwner,Mt=!1;function vt(e,t,n,r){t.child=e===null?qp(t,null,n,r):Qs(t,e.child,n,r)}function Zf(e,t,n,r,s){n=n.render;var i=t.ref;return Ns(t,s),r=ld(e,t,n,r,i,s),n=ad(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bn(e,t,s)):(Fe&&n&&Yc(t),t.flags|=1,vt(e,t,r,s),t.child)}function eh(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!yd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,wg(e,t,i,r,s)):(e=Xo(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Oi,n(o,r)&&e.ref===t.ref)return Bn(e,t,s)}return t.flags|=1,e=vr(i,r),e.ref=t.ref,e.return=t,t.child=e}function wg(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Oi(i,r)&&e.ref===t.ref)if(Mt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Mt=!0);else return t.lanes=e.lanes,Bn(e,t,s)}return Au(e,t,n,r,s)}function Sg(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Ss,Ft),Ft|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Te(Ss,Ft),Ft|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Ss,Ft),Ft|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Te(Ss,Ft),Ft|=r;return vt(e,t,s,n),t.child}function kg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Au(e,t,n,r,s){var i=Lt(n)?qr:ht.current;return i=Hs(t,i),Ns(t,s),n=ld(e,t,n,r,i,s),r=ad(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bn(e,t,s)):(Fe&&r&&Yc(t),t.flags|=1,vt(e,t,n,s),t.child)}function th(e,t,n,r,s){if(Lt(n)){var i=!0;gl(t)}else i=!1;if(Ns(t,s),t.stateNode===null)qo(e,t),vg(t,n,r),Du(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Yt(c):(c=Lt(n)?qr:ht.current,c=Hs(t,c));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&Yf(t,o,r,c),Gn=!1;var g=t.memoizedState;o.state=g,Sl(t,r,o,s),u=t.memoizedState,l!==r||g!==u||Rt.current||Gn?(typeof f=="function"&&(Ou(t,n,f,r),u=t.memoizedState),(l=Gn||qf(t,n,l,r,g,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Gp(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:en(t.type,l),o.props=c,h=t.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Yt(u):(u=Lt(n)?qr:ht.current,u=Hs(t,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||g!==u)&&Yf(t,o,r,u),Gn=!1,g=t.memoizedState,o.state=g,Sl(t,r,o,s);var k=t.memoizedState;l!==h||g!==k||Rt.current||Gn?(typeof w=="function"&&(Ou(t,n,w,r),k=t.memoizedState),(c=Gn||qf(t,n,c,r,g,k,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),o.props=r,o.state=k,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return $u(e,t,n,r,i,s)}function $u(e,t,n,r,s,i){kg(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&$f(t,n,!1),Bn(e,t,i);r=t.stateNode,Ex.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Qs(t,e.child,null,i),t.child=Qs(t,null,l,i)):vt(e,t,l,i),t.memoizedState=r.state,s&&$f(t,n,!0),t.child}function Cg(e){var t=e.stateNode;t.pendingContext?Af(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Af(e,t.context,!1),rd(e,t.containerInfo)}function nh(e,t,n,r,s){return Vs(),Xc(s),t.flags|=256,vt(e,t,n,r),t.child}var Uu={dehydrated:null,treeContext:null,retryLane:0};function Bu(e){return{baseLanes:e,cachePool:null,transitions:null}}function bg(e,t,n){var r=t.pendingProps,s=De.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Te(De,s&1),e===null)return Iu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ql(o,r,0,null),e=Kr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Bu(n),t.memoizedState=Uu,e):dd(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Nx(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=vr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=vr(l,i):(i=Kr(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Bu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Uu,r}return i=e.child,e=i.sibling,r=vr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function dd(e,t){return t=ql({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function To(e,t,n,r){return r!==null&&Xc(r),Qs(t,e.child,null,n),e=dd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Nx(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Qa(Error(z(422))),To(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=ql({mode:"visible",children:r.children},s,0,null),i=Kr(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Qs(t,e.child,null,o),t.child.memoizedState=Bu(o),t.memoizedState=Uu,i);if(!(t.mode&1))return To(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(z(419)),r=Qa(i,r,void 0),To(e,t,o,r)}if(l=(o&e.childLanes)!==0,Mt||l){if(r=tt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Un(e,s),an(r,e,s,-1))}return vd(),r=Qa(Error(z(421))),To(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Ax.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ot=hr(s.nextSibling),Dt=t,Fe=!0,on=null,e!==null&&(Ht[Vt++]=Pn,Ht[Vt++]=In,Ht[Vt++]=Yr,Pn=e.id,In=e.overflow,Yr=t),t=dd(t,r.children),t.flags|=4096,t)}function rh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Fu(e.return,t,n)}function Ka(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Eg(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(vt(e,t,r.children,n),r=De.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rh(e,n,t);else if(e.tag===19)rh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Te(De,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&kl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ka(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&kl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ka(t,!0,n,null,i);break;case"together":Ka(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Xr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,n=vr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=vr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function jx(e,t,n){switch(t.tag){case 3:Cg(t),Vs();break;case 5:Xp(t);break;case 1:Lt(t.type)&&gl(t);break;case 4:rd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Te(xl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Te(De,De.current&1),t.flags|=128,null):n&t.child.childLanes?bg(e,t,n):(Te(De,De.current&1),e=Bn(e,t,n),e!==null?e.sibling:null);Te(De,De.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Eg(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(De,De.current),r)break;return null;case 22:case 23:return t.lanes=0,Sg(e,t,n)}return Bn(e,t,n)}var Ng,Wu,jg,Mg;Ng=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wu=function(){};jg=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,_r(wn.current);var i=null;switch(n){case"input":s=du(e,s),r=du(e,r),i=[];break;case"select":s=Ae({},s,{value:void 0}),r=Ae({},r,{value:void 0}),i=[];break;case"textarea":s=mu(e,s),r=mu(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ml)}gu(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ri.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ri.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&_e("scroll",e),i||l===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Mg=function(e,t,n,r){n!==r&&(t.flags|=4)};function ci(e,t){if(!Fe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Mx(e,t,n){var r=t.pendingProps;switch(Gc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return Lt(t.type)&&pl(),dt(t),null;case 3:return r=t.stateNode,Ks(),Pe(Rt),Pe(ht),id(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ro(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,on!==null&&(Xu(on),on=null))),Wu(e,t),dt(t),null;case 5:sd(t);var s=_r(Ui.current);if(n=t.type,e!==null&&t.stateNode!=null)jg(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(z(166));return dt(t),null}if(e=_r(wn.current),Ro(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[yn]=t,r[Ai]=i,e=(t.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<gi.length;s++)_e(gi[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":ff(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":mf(r,i),_e("invalid",r)}gu(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Mo(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Mo(r.textContent,l,e),s=["children",""+l]):Ri.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":wo(r),hf(r,i,!0);break;case"textarea":wo(r),pf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ml)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=np(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[yn]=t,e[Ai]=r,Ng(e,t,!1,!1),t.stateNode=e;e:{switch(o=vu(n,r),n){case"dialog":_e("cancel",e),_e("close",e),s=r;break;case"iframe":case"object":case"embed":_e("load",e),s=r;break;case"video":case"audio":for(s=0;s<gi.length;s++)_e(gi[s],e);s=r;break;case"source":_e("error",e),s=r;break;case"img":case"image":case"link":_e("error",e),_e("load",e),s=r;break;case"details":_e("toggle",e),s=r;break;case"input":ff(e,r),s=du(e,r),_e("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ae({},r,{value:void 0}),_e("invalid",e);break;case"textarea":mf(e,r),s=mu(e,r),_e("invalid",e);break;default:s=r}gu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?ip(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&rp(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Li(e,u):typeof u=="number"&&Li(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ri.hasOwnProperty(i)?u!=null&&i==="onScroll"&&_e("scroll",e):u!=null&&Fc(e,i,u,o))}switch(n){case"input":wo(e),hf(e,r,!1);break;case"textarea":wo(e),pf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+xr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ks(e,!!r.multiple,i,!1):r.defaultValue!=null&&ks(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ml)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dt(t),null;case 6:if(e&&t.stateNode!=null)Mg(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(z(166));if(n=_r(Ui.current),_r(wn.current),Ro(t)){if(r=t.stateNode,n=t.memoizedProps,r[yn]=t,(i=r.nodeValue!==n)&&(e=Dt,e!==null))switch(e.tag){case 3:Mo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Mo(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yn]=t,t.stateNode=r}return dt(t),null;case 13:if(Pe(De),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Fe&&Ot!==null&&t.mode&1&&!(t.flags&128))Qp(),Vs(),t.flags|=98560,i=!1;else if(i=Ro(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(z(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[yn]=t}else Vs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dt(t),i=!1}else on!==null&&(Xu(on),on=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||De.current&1?Je===0&&(Je=3):vd())),t.updateQueue!==null&&(t.flags|=4),dt(t),null);case 4:return Ks(),Wu(e,t),e===null&&Di(t.stateNode.containerInfo),dt(t),null;case 10:return ed(t.type._context),dt(t),null;case 17:return Lt(t.type)&&pl(),dt(t),null;case 19:if(Pe(De),i=t.memoizedState,i===null)return dt(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)ci(i,!1);else{if(Je!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=kl(e),o!==null){for(t.flags|=128,ci(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Te(De,De.current&1|2),t.child}e=e.sibling}i.tail!==null&&He()>Ys&&(t.flags|=128,r=!0,ci(i,!1),t.lanes=4194304)}else{if(!r)if(e=kl(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ci(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Fe)return dt(t),null}else 2*He()-i.renderingStartTime>Ys&&n!==1073741824&&(t.flags|=128,r=!0,ci(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=He(),t.sibling=null,n=De.current,Te(De,r?n&1|2:n&1),t):(dt(t),null);case 22:case 23:return gd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ft&1073741824&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function Rx(e,t){switch(Gc(t),t.tag){case 1:return Lt(t.type)&&pl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ks(),Pe(Rt),Pe(ht),id(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return sd(t),null;case 13:if(Pe(De),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));Vs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe(De),null;case 4:return Ks(),null;case 10:return ed(t.type._context),null;case 22:case 23:return gd(),null;case 24:return null;default:return null}}var _o=!1,ft=!1,Lx=typeof WeakSet=="function"?WeakSet:Set,X=null;function ws(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(e,t,r)}else n.current=null}function Hu(e,t,n){try{n()}catch(r){Ue(e,t,r)}}var sh=!1;function Tx(e,t){if(ju=dl,e=Pp(),qc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,h=e,g=null;t:for(;;){for(var w;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(w=h.firstChild)!==null;)g=h,h=w;for(;;){if(h===e)break t;if(g===n&&++c===s&&(l=o),g===i&&++f===r&&(u=o),(w=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mu={focusedElem:e,selectionRange:n},dl=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var N=k.memoizedProps,L=k.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?N:en(t.type,N),L);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(v){Ue(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return k=sh,sh=!1,k}function Ei(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Hu(t,n,i)}s=s.next}while(s!==r)}}function Ql(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Vu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Rg(e){var t=e.alternate;t!==null&&(e.alternate=null,Rg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yn],delete t[Ai],delete t[Tu],delete t[hx],delete t[mx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Lg(e){return e.tag===5||e.tag===3||e.tag===4}function ih(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Lg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ml));else if(r!==4&&(e=e.child,e!==null))for(Qu(e,t,n),e=e.sibling;e!==null;)Qu(e,t,n),e=e.sibling}function Ku(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ku(e,t,n),e=e.sibling;e!==null;)Ku(e,t,n),e=e.sibling}var st=null,sn=!1;function Qn(e,t,n){for(n=n.child;n!==null;)Tg(e,t,n),n=n.sibling}function Tg(e,t,n){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(zl,n)}catch{}switch(n.tag){case 5:ft||ws(n,t);case 6:var r=st,s=sn;st=null,Qn(e,t,n),st=r,sn=s,st!==null&&(sn?(e=st,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(sn?(e=st,n=n.stateNode,e.nodeType===8?$a(e.parentNode,n):e.nodeType===1&&$a(e,n),Ii(e)):$a(st,n.stateNode));break;case 4:r=st,s=sn,st=n.stateNode.containerInfo,sn=!0,Qn(e,t,n),st=r,sn=s;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Hu(n,t,o),s=s.next}while(s!==r)}Qn(e,t,n);break;case 1:if(!ft&&(ws(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ue(n,t,l)}Qn(e,t,n);break;case 21:Qn(e,t,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,Qn(e,t,n),ft=r):Qn(e,t,n);break;default:Qn(e,t,n)}}function oh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Lx),t.forEach(function(r){var s=$x.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:st=l.stateNode,sn=!1;break e;case 3:st=l.stateNode.containerInfo,sn=!0;break e;case 4:st=l.stateNode.containerInfo,sn=!0;break e}l=l.return}if(st===null)throw Error(z(160));Tg(i,o,s),st=null,sn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Ue(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)_g(t,e),t=t.sibling}function _g(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jt(t,e),hn(e),r&4){try{Ei(3,e,e.return),Ql(3,e)}catch(N){Ue(e,e.return,N)}try{Ei(5,e,e.return)}catch(N){Ue(e,e.return,N)}}break;case 1:Jt(t,e),hn(e),r&512&&n!==null&&ws(n,n.return);break;case 5:if(Jt(t,e),hn(e),r&512&&n!==null&&ws(n,n.return),e.flags&32){var s=e.stateNode;try{Li(s,"")}catch(N){Ue(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ep(s,i),vu(l,o);var c=vu(l,i);for(o=0;o<u.length;o+=2){var f=u[o],h=u[o+1];f==="style"?ip(s,h):f==="dangerouslySetInnerHTML"?rp(s,h):f==="children"?Li(s,h):Fc(s,f,h,c)}switch(l){case"input":fu(s,i);break;case"textarea":tp(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?ks(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?ks(s,!!i.multiple,i.defaultValue,!0):ks(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ai]=i}catch(N){Ue(e,e.return,N)}}break;case 6:if(Jt(t,e),hn(e),r&4){if(e.stateNode===null)throw Error(z(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(N){Ue(e,e.return,N)}}break;case 3:if(Jt(t,e),hn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ii(t.containerInfo)}catch(N){Ue(e,e.return,N)}break;case 4:Jt(t,e),hn(e);break;case 13:Jt(t,e),hn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(md=He())),r&4&&oh(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(ft=(c=ft)||f,Jt(t,e),ft=c):Jt(t,e),hn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(X=e,f=e.child;f!==null;){for(h=X=f;X!==null;){switch(g=X,w=g.child,g.tag){case 0:case 11:case 14:case 15:Ei(4,g,g.return);break;case 1:ws(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(N){Ue(r,n,N)}}break;case 5:ws(g,g.return);break;case 22:if(g.memoizedState!==null){ah(h);continue}}w!==null?(w.return=g,X=w):ah(h)}f=f.sibling}e:for(f=null,h=e;;){if(h.tag===5){if(f===null){f=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=sp("display",o))}catch(N){Ue(e,e.return,N)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(N){Ue(e,e.return,N)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Jt(t,e),hn(e),r&4&&oh(e);break;case 21:break;default:Jt(t,e),hn(e)}}function hn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Lg(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Li(s,""),r.flags&=-33);var i=ih(e);Ku(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ih(e);Qu(e,l,o);break;default:throw Error(z(161))}}catch(u){Ue(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _x(e,t,n){X=e,Pg(e)}function Pg(e,t,n){for(var r=(e.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||_o;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ft;l=_o;var c=ft;if(_o=o,(ft=u)&&!c)for(X=s;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?uh(s):u!==null?(u.return=o,X=u):uh(s);for(;i!==null;)X=i,Pg(i),i=i.sibling;X=s,_o=l,ft=c}lh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):lh(e)}}function lh(e){for(;X!==null;){var t=X;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ft||Ql(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ft)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Vf(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Vf(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Ii(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}ft||t.flags&512&&Vu(t)}catch(g){Ue(t,t.return,g)}}if(t===e){X=null;break}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}}function ah(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}function uh(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ql(4,t)}catch(u){Ue(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){Ue(t,s,u)}}var i=t.return;try{Vu(t)}catch(u){Ue(t,i,u)}break;case 5:var o=t.return;try{Vu(t)}catch(u){Ue(t,o,u)}}}catch(u){Ue(t,t.return,u)}if(t===e){X=null;break}var l=t.sibling;if(l!==null){l.return=t.return,X=l;break}X=t.return}}var Px=Math.ceil,El=Wn.ReactCurrentDispatcher,fd=Wn.ReactCurrentOwner,qt=Wn.ReactCurrentBatchConfig,Ce=0,tt=null,qe=null,it=0,Ft=0,Ss=kr(0),Je=0,Vi=null,Xr=0,Kl=0,hd=0,Ni=null,jt=null,md=0,Ys=1/0,jn=null,Nl=!1,qu=null,pr=null,Po=!1,ur=null,jl=0,ji=0,Yu=null,Yo=-1,Go=0;function xt(){return Ce&6?He():Yo!==-1?Yo:Yo=He()}function gr(e){return e.mode&1?Ce&2&&it!==0?it&-it:gx.transition!==null?(Go===0&&(Go=vp()),Go):(e=Le,e!==0||(e=window.event,e=e===void 0?16:bp(e.type)),e):1}function an(e,t,n,r){if(50<ji)throw ji=0,Yu=null,Error(z(185));no(e,n,r),(!(Ce&2)||e!==tt)&&(e===tt&&(!(Ce&2)&&(Kl|=n),Je===4&&Jn(e,it)),Tt(e,r),n===1&&Ce===0&&!(t.mode&1)&&(Ys=He()+500,Wl&&Cr()))}function Tt(e,t){var n=e.callbackNode;g0(e,t);var r=cl(e,e===tt?it:0);if(r===0)n!==null&&yf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&yf(n),t===1)e.tag===0?px(ch.bind(null,e)):Wp(ch.bind(null,e)),dx(function(){!(Ce&6)&&Cr()}),n=null;else{switch(yp(r)){case 1:n=$c;break;case 4:n=pp;break;case 16:n=ul;break;case 536870912:n=gp;break;default:n=ul}n=Ug(n,Ig.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ig(e,t){if(Yo=-1,Go=0,Ce&6)throw Error(z(327));var n=e.callbackNode;if(js()&&e.callbackNode!==n)return null;var r=cl(e,e===tt?it:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ml(e,r);else{t=r;var s=Ce;Ce|=2;var i=Og();(tt!==e||it!==t)&&(jn=null,Ys=He()+500,Qr(e,t));do try{Ox();break}catch(l){Fg(e,l)}while(!0);Zc(),El.current=i,Ce=s,qe!==null?t=0:(tt=null,it=0,t=Je)}if(t!==0){if(t===2&&(s=ku(e),s!==0&&(r=s,t=Gu(e,s))),t===1)throw n=Vi,Qr(e,0),Jn(e,r),Tt(e,He()),n;if(t===6)Jn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Ix(s)&&(t=Ml(e,r),t===2&&(i=ku(e),i!==0&&(r=i,t=Gu(e,i))),t===1))throw n=Vi,Qr(e,0),Jn(e,r),Tt(e,He()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(z(345));case 2:Rr(e,jt,jn);break;case 3:if(Jn(e,r),(r&130023424)===r&&(t=md+500-He(),10<t)){if(cl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){xt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Lu(Rr.bind(null,e,jt,jn),t);break}Rr(e,jt,jn);break;case 4:if(Jn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-ln(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Px(r/1960))-r,10<r){e.timeoutHandle=Lu(Rr.bind(null,e,jt,jn),r);break}Rr(e,jt,jn);break;case 5:Rr(e,jt,jn);break;default:throw Error(z(329))}}}return Tt(e,He()),e.callbackNode===n?Ig.bind(null,e):null}function Gu(e,t){var n=Ni;return e.current.memoizedState.isDehydrated&&(Qr(e,t).flags|=256),e=Ml(e,t),e!==2&&(t=jt,jt=n,t!==null&&Xu(t)),e}function Xu(e){jt===null?jt=e:jt.push.apply(jt,e)}function Ix(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!un(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jn(e,t){for(t&=~hd,t&=~Kl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ln(t),r=1<<n;e[n]=-1,t&=~r}}function ch(e){if(Ce&6)throw Error(z(327));js();var t=cl(e,0);if(!(t&1))return Tt(e,He()),null;var n=Ml(e,t);if(e.tag!==0&&n===2){var r=ku(e);r!==0&&(t=r,n=Gu(e,r))}if(n===1)throw n=Vi,Qr(e,0),Jn(e,t),Tt(e,He()),n;if(n===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rr(e,jt,jn),Tt(e,He()),null}function pd(e,t){var n=Ce;Ce|=1;try{return e(t)}finally{Ce=n,Ce===0&&(Ys=He()+500,Wl&&Cr())}}function Jr(e){ur!==null&&ur.tag===0&&!(Ce&6)&&js();var t=Ce;Ce|=1;var n=qt.transition,r=Le;try{if(qt.transition=null,Le=1,e)return e()}finally{Le=r,qt.transition=n,Ce=t,!(Ce&6)&&Cr()}}function gd(){Ft=Ss.current,Pe(Ss)}function Qr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,cx(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(Gc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pl();break;case 3:Ks(),Pe(Rt),Pe(ht),id();break;case 5:sd(r);break;case 4:Ks();break;case 13:Pe(De);break;case 19:Pe(De);break;case 10:ed(r.type._context);break;case 22:case 23:gd()}n=n.return}if(tt=e,qe=e=vr(e.current,null),it=Ft=t,Je=0,Vi=null,hd=Kl=Xr=0,jt=Ni=null,Tr!==null){for(t=0;t<Tr.length;t++)if(n=Tr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Tr=null}return e}function Fg(e,t){do{var n=qe;try{if(Zc(),Qo.current=bl,Cl){for(var r=ze.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Cl=!1}if(Gr=0,et=Ge=ze=null,bi=!1,Bi=0,fd.current=null,n===null||n.return===null){Je=1,Vi=t,qe=null;break}e:{var i=e,o=n.return,l=n,u=t;if(t=it,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=Xf(o);if(w!==null){w.flags&=-257,Jf(w,o,l,i,t),w.mode&1&&Gf(i,c,t),t=w,u=c;var k=t.updateQueue;if(k===null){var N=new Set;N.add(u),t.updateQueue=N}else k.add(u);break e}else{if(!(t&1)){Gf(i,c,t),vd();break e}u=Error(z(426))}}else if(Fe&&l.mode&1){var L=Xf(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),Jf(L,o,l,i,t),Xc(qs(u,l));break e}}i=u=qs(u,l),Je!==4&&(Je=2),Ni===null?Ni=[i]:Ni.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=yg(i,u,t);Hf(i,y);break e;case 1:l=u;var m=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(pr===null||!pr.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var v=xg(i,l,t);Hf(i,v);break e}}i=i.return}while(i!==null)}zg(n)}catch(C){t=C,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function Og(){var e=El.current;return El.current=bl,e===null?bl:e}function vd(){(Je===0||Je===3||Je===2)&&(Je=4),tt===null||!(Xr&268435455)&&!(Kl&268435455)||Jn(tt,it)}function Ml(e,t){var n=Ce;Ce|=2;var r=Og();(tt!==e||it!==t)&&(jn=null,Qr(e,t));do try{Fx();break}catch(s){Fg(e,s)}while(!0);if(Zc(),Ce=n,El.current=r,qe!==null)throw Error(z(261));return tt=null,it=0,Je}function Fx(){for(;qe!==null;)Dg(qe)}function Ox(){for(;qe!==null&&!l0();)Dg(qe)}function Dg(e){var t=$g(e.alternate,e,Ft);e.memoizedProps=e.pendingProps,t===null?zg(e):qe=t,fd.current=null}function zg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Rx(n,t),n!==null){n.flags&=32767,qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,qe=null;return}}else if(n=Mx(n,t,Ft),n!==null){qe=n;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);Je===0&&(Je=5)}function Rr(e,t,n){var r=Le,s=qt.transition;try{qt.transition=null,Le=1,Dx(e,t,n,r)}finally{qt.transition=s,Le=r}return null}function Dx(e,t,n,r){do js();while(ur!==null);if(Ce&6)throw Error(z(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(v0(e,i),e===tt&&(qe=tt=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Po||(Po=!0,Ug(ul,function(){return js(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=qt.transition,qt.transition=null;var o=Le;Le=1;var l=Ce;Ce|=4,fd.current=null,Tx(e,n),_g(n,e),rx(Mu),dl=!!ju,Mu=ju=null,e.current=n,_x(n),a0(),Ce=l,Le=o,qt.transition=i}else e.current=n;if(Po&&(Po=!1,ur=e,jl=s),i=e.pendingLanes,i===0&&(pr=null),d0(n.stateNode),Tt(e,He()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Nl)throw Nl=!1,e=qu,qu=null,e;return jl&1&&e.tag!==0&&js(),i=e.pendingLanes,i&1?e===Yu?ji++:(ji=0,Yu=e):ji=0,Cr(),null}function js(){if(ur!==null){var e=yp(jl),t=qt.transition,n=Le;try{if(qt.transition=null,Le=16>e?16:e,ur===null)var r=!1;else{if(e=ur,ur=null,jl=0,Ce&6)throw Error(z(331));var s=Ce;for(Ce|=4,X=e.current;X!==null;){var i=X,o=i.child;if(X.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(X=c;X!==null;){var f=X;switch(f.tag){case 0:case 11:case 15:Ei(8,f,i)}var h=f.child;if(h!==null)h.return=f,X=h;else for(;X!==null;){f=X;var g=f.sibling,w=f.return;if(Rg(f),f===c){X=null;break}if(g!==null){g.return=w,X=g;break}X=w}}}var k=i.alternate;if(k!==null){var N=k.child;if(N!==null){k.child=null;do{var L=N.sibling;N.sibling=null,N=L}while(N!==null)}}X=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,X=o;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ei(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,X=y;break e}X=i.return}}var m=e.current;for(X=m;X!==null;){o=X;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,X=p;else e:for(o=m;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ql(9,l)}}catch(C){Ue(l,l.return,C)}if(l===o){X=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,X=v;break e}X=l.return}}if(Ce=s,Cr(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(zl,e)}catch{}r=!0}return r}finally{Le=n,qt.transition=t}}return!1}function dh(e,t,n){t=qs(n,t),t=yg(e,t,1),e=mr(e,t,1),t=xt(),e!==null&&(no(e,1,t),Tt(e,t))}function Ue(e,t,n){if(e.tag===3)dh(e,e,n);else for(;t!==null;){if(t.tag===3){dh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pr===null||!pr.has(r))){e=qs(n,e),e=xg(t,e,1),t=mr(t,e,1),e=xt(),t!==null&&(no(t,1,e),Tt(t,e));break}}t=t.return}}function zx(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=xt(),e.pingedLanes|=e.suspendedLanes&n,tt===e&&(it&n)===n&&(Je===4||Je===3&&(it&130023424)===it&&500>He()-md?Qr(e,0):hd|=n),Tt(e,t)}function Ag(e,t){t===0&&(e.mode&1?(t=Co,Co<<=1,!(Co&130023424)&&(Co=4194304)):t=1);var n=xt();e=Un(e,t),e!==null&&(no(e,t,n),Tt(e,n))}function Ax(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ag(e,n)}function $x(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(t),Ag(e,n)}var $g;$g=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rt.current)Mt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Mt=!1,jx(e,t,n);Mt=!!(e.flags&131072)}else Mt=!1,Fe&&t.flags&1048576&&Hp(t,yl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var s=Hs(t,ht.current);Ns(t,n),s=ld(null,t,r,e,s,n);var i=ad();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lt(r)?(i=!0,gl(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,nd(t),s.updater=Vl,t.stateNode=s,s._reactInternals=t,Du(t,r,e,n),t=$u(null,t,r,!0,i,n)):(t.tag=0,Fe&&i&&Yc(t),vt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Bx(r),e=en(r,e),s){case 0:t=Au(null,t,r,e,n);break e;case 1:t=th(null,t,r,e,n);break e;case 11:t=Zf(null,t,r,e,n);break e;case 14:t=eh(null,t,r,en(r.type,e),n);break e}throw Error(z(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:en(r,s),Au(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:en(r,s),th(e,t,r,s,n);case 3:e:{if(Cg(t),e===null)throw Error(z(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Gp(e,t),Sl(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=qs(Error(z(423)),t),t=nh(e,t,r,n,s);break e}else if(r!==s){s=qs(Error(z(424)),t),t=nh(e,t,r,n,s);break e}else for(Ot=hr(t.stateNode.containerInfo.firstChild),Dt=t,Fe=!0,on=null,n=qp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vs(),r===s){t=Bn(e,t,n);break e}vt(e,t,r,n)}t=t.child}return t;case 5:return Xp(t),e===null&&Iu(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ru(r,s)?o=null:i!==null&&Ru(r,i)&&(t.flags|=32),kg(e,t),vt(e,t,o,n),t.child;case 6:return e===null&&Iu(t),null;case 13:return bg(e,t,n);case 4:return rd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Qs(t,null,r,n):vt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:en(r,s),Zf(e,t,r,s,n);case 7:return vt(e,t,t.pendingProps,n),t.child;case 8:return vt(e,t,t.pendingProps.children,n),t.child;case 12:return vt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Te(xl,r._currentValue),r._currentValue=o,i!==null)if(un(i.value,o)){if(i.children===s.children&&!Rt.current){t=Bn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Fn(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Fu(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Fu(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ns(t,n),s=Yt(s),r=r(s),t.flags|=1,vt(e,t,r,n),t.child;case 14:return r=t.type,s=en(r,t.pendingProps),s=en(r.type,s),eh(e,t,r,s,n);case 15:return wg(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:en(r,s),qo(e,t),t.tag=1,Lt(r)?(e=!0,gl(t)):e=!1,Ns(t,n),vg(t,r,s),Du(t,r,s,n),$u(null,t,r,!0,e,n);case 19:return Eg(e,t,n);case 22:return Sg(e,t,n)}throw Error(z(156,t.tag))};function Ug(e,t){return mp(e,t)}function Ux(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(e,t,n,r){return new Ux(e,t,n,r)}function yd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bx(e){if(typeof e=="function")return yd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Dc)return 11;if(e===zc)return 14}return 2}function vr(e,t){var n=e.alternate;return n===null?(n=Kt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Xo(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")yd(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ds:return Kr(n.children,s,i,t);case Oc:o=8,s|=8;break;case lu:return e=Kt(12,n,t,s|2),e.elementType=lu,e.lanes=i,e;case au:return e=Kt(13,n,t,s),e.elementType=au,e.lanes=i,e;case uu:return e=Kt(19,n,t,s),e.elementType=uu,e.lanes=i,e;case Xm:return ql(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ym:o=10;break e;case Gm:o=9;break e;case Dc:o=11;break e;case zc:o=14;break e;case Yn:o=16,r=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=Kt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Kr(e,t,n,r){return e=Kt(7,e,r,t),e.lanes=n,e}function ql(e,t,n,r){return e=Kt(22,e,r,t),e.elementType=Xm,e.lanes=n,e.stateNode={isHidden:!1},e}function qa(e,t,n){return e=Kt(6,e,null,t),e.lanes=n,e}function Ya(e,t,n){return t=Kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wx(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ra(0),this.expirationTimes=Ra(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ra(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function xd(e,t,n,r,s,i,o,l,u){return e=new Wx(e,t,n,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Kt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},nd(i),e}function Hx(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cs,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Bg(e){if(!e)return wr;e=e._reactInternals;e:{if(ns(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var n=e.type;if(Lt(n))return Bp(e,n,t)}return t}function Wg(e,t,n,r,s,i,o,l,u){return e=xd(n,r,!0,e,s,i,o,l,u),e.context=Bg(null),n=e.current,r=xt(),s=gr(n),i=Fn(r,s),i.callback=t??null,mr(n,i,s),e.current.lanes=s,no(e,s,r),Tt(e,r),e}function Yl(e,t,n,r){var s=t.current,i=xt(),o=gr(s);return n=Bg(n),t.context===null?t.context=n:t.pendingContext=n,t=Fn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=mr(s,t,o),e!==null&&(an(e,s,o,i),Vo(e,s,o)),o}function Rl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function wd(e,t){fh(e,t),(e=e.alternate)&&fh(e,t)}function Vx(){return null}var Hg=typeof reportError=="function"?reportError:function(e){console.error(e)};function Sd(e){this._internalRoot=e}Gl.prototype.render=Sd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));Yl(e,t,null,null)};Gl.prototype.unmount=Sd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jr(function(){Yl(null,e,null,null)}),t[$n]=null}};function Gl(e){this._internalRoot=e}Gl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xn.length&&t!==0&&t<Xn[n].priority;n++);Xn.splice(n,0,e),n===0&&Cp(e)}};function kd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hh(){}function Qx(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Rl(o);i.call(c)}}var o=Wg(t,r,e,0,null,!1,!1,"",hh);return e._reactRootContainer=o,e[$n]=o.current,Di(e.nodeType===8?e.parentNode:e),Jr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=Rl(u);l.call(c)}}var u=xd(e,0,!1,null,null,!1,!1,"",hh);return e._reactRootContainer=u,e[$n]=u.current,Di(e.nodeType===8?e.parentNode:e),Jr(function(){Yl(t,u,n,r)}),u}function Jl(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Rl(o);l.call(u)}}Yl(t,o,e,s)}else o=Qx(n,t,e,s,r);return Rl(o)}xp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=pi(t.pendingLanes);n!==0&&(Uc(t,n|1),Tt(t,He()),!(Ce&6)&&(Ys=He()+500,Cr()))}break;case 13:Jr(function(){var r=Un(e,1);if(r!==null){var s=xt();an(r,e,1,s)}}),wd(e,1)}};Bc=function(e){if(e.tag===13){var t=Un(e,134217728);if(t!==null){var n=xt();an(t,e,134217728,n)}wd(e,134217728)}};wp=function(e){if(e.tag===13){var t=gr(e),n=Un(e,t);if(n!==null){var r=xt();an(n,e,t,r)}wd(e,t)}};Sp=function(){return Le};kp=function(e,t){var n=Le;try{return Le=e,t()}finally{Le=n}};xu=function(e,t,n){switch(t){case"input":if(fu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Bl(r);if(!s)throw Error(z(90));Zm(r),fu(r,s)}}}break;case"textarea":tp(e,n);break;case"select":t=n.value,t!=null&&ks(e,!!n.multiple,t,!1)}};ap=pd;up=Jr;var Kx={usingClientEntryPoint:!1,Events:[so,ps,Bl,op,lp,pd]},di={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qx={bundleType:di.bundleType,version:di.version,rendererPackageName:di.rendererPackageName,rendererConfig:di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fp(e),e===null?null:e.stateNode},findFiberByHostInstance:di.findFiberByHostInstance||Vx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Io=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Io.isDisabled&&Io.supportsFiber)try{zl=Io.inject(qx),xn=Io}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kx;At.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kd(t))throw Error(z(200));return Hx(e,t,null,n)};At.createRoot=function(e,t){if(!kd(e))throw Error(z(299));var n=!1,r="",s=Hg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=xd(e,1,!1,null,null,n,!1,r,s),e[$n]=t.current,Di(e.nodeType===8?e.parentNode:e),new Sd(t)};At.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=fp(t),e=e===null?null:e.stateNode,e};At.flushSync=function(e){return Jr(e)};At.hydrate=function(e,t,n){if(!Xl(t))throw Error(z(200));return Jl(null,e,t,!0,n)};At.hydrateRoot=function(e,t,n){if(!kd(e))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Hg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Wg(t,null,e,1,n??null,s,!1,i,o),e[$n]=t.current,Di(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Gl(t)};At.render=function(e,t,n){if(!Xl(t))throw Error(z(200));return Jl(null,e,t,!1,n)};At.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(z(40));return e._reactRootContainer?(Jr(function(){Jl(null,null,e,!1,function(){e._reactRootContainer=null,e[$n]=null})}),!0):!1};At.unstable_batchedUpdates=pd;At.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return Jl(e,t,n,!1,r)};At.version="18.3.1-next-f1338f8080-20240426";function Vg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vg)}catch(e){console.error(e)}}Vg(),Vm.exports=At;var Cd=Vm.exports,Qg,mh=Cd;Qg=mh.createRoot,mh.hydrateRoot;var Zs=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Yx={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Zn,Mc,Cm,Gx=(Cm=class{constructor(){re(this,Zn,Yx);re(this,Mc,!1)}setTimeoutProvider(e){K(this,Zn,e)}setTimeout(e,t){return S(this,Zn).setTimeout(e,t)}clearTimeout(e){S(this,Zn).clearTimeout(e)}setInterval(e,t){return S(this,Zn).setInterval(e,t)}clearInterval(e){S(this,Zn).clearInterval(e)}},Zn=new WeakMap,Mc=new WeakMap,Cm),Pr=new Gx;function Xx(e){setTimeout(e,0)}var Zr=typeof window>"u"||"Deno"in globalThis;function yt(){}function Jx(e,t){return typeof e=="function"?e(t):e}function Ju(e){return typeof e=="number"&&e>=0&&e!==1/0}function Kg(e,t){return Math.max(e+(t||0)-Date.now(),0)}function yr(e,t){return typeof e=="function"?e(t):e}function Wt(e,t){return typeof e=="function"?e(t):e}function ph(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==bd(o,t.options))return!1}else if(!Qi(t.queryKey,o))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function gh(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(es(t.options.mutationKey)!==es(i))return!1}else if(!Qi(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function bd(e,t){return((t==null?void 0:t.queryKeyHashFn)||es)(e)}function es(e){return JSON.stringify(e,(t,n)=>Zu(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Qi(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Qi(e[n],t[n])):!1}var Zx=Object.prototype.hasOwnProperty;function qg(e,t){if(e===t)return e;const n=vh(e)&&vh(t);if(!n&&!(Zu(e)&&Zu(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let u=0;for(let c=0;c<o;c++){const f=n?c:i[c],h=e[f],g=t[f];if(h===g){l[f]=h,(n?c<s:Zx.call(e,f))&&u++;continue}if(h===null||g===null||typeof h!="object"||typeof g!="object"){l[f]=g;continue}const w=qg(h,g);l[f]=w,w===h&&u++}return s===o&&u===s?e:l}function Ll(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function vh(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Zu(e){if(!yh(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!yh(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function yh(e){return Object.prototype.toString.call(e)==="[object Object]"}function ew(e){return new Promise(t=>{Pr.setTimeout(t,e)})}function ec(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?qg(e,t):t}function tw(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function nw(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Ed=Symbol();function Yg(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Ed?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Gg(e,t){return typeof e=="function"?e(...t):!!e}function rw(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var Dr,er,Ts,bm,sw=(bm=class extends Zs{constructor(){super();re(this,Dr);re(this,er);re(this,Ts);K(this,Ts,t=>{if(!Zr&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){S(this,er)||this.setEventListener(S(this,Ts))}onUnsubscribe(){var t;this.hasListeners()||((t=S(this,er))==null||t.call(this),K(this,er,void 0))}setEventListener(t){var n;K(this,Ts,t),(n=S(this,er))==null||n.call(this),K(this,er,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){S(this,Dr)!==t&&(K(this,Dr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof S(this,Dr)=="boolean"?S(this,Dr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Dr=new WeakMap,er=new WeakMap,Ts=new WeakMap,bm),Nd=new sw;function tc(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var iw=Xx;function ow(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=iw;const i=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;t++;try{u=l()}finally{t--,t||o()}return u},batchCalls:l=>(...u)=>{i(()=>{l(...u)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Xe=ow(),_s,tr,Ps,Em,lw=(Em=class extends Zs{constructor(){super();re(this,_s,!0);re(this,tr);re(this,Ps);K(this,Ps,t=>{if(!Zr&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){S(this,tr)||this.setEventListener(S(this,Ps))}onUnsubscribe(){var t;this.hasListeners()||((t=S(this,tr))==null||t.call(this),K(this,tr,void 0))}setEventListener(t){var n;K(this,Ps,t),(n=S(this,tr))==null||n.call(this),K(this,tr,t(this.setOnline.bind(this)))}setOnline(t){S(this,_s)!==t&&(K(this,_s,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return S(this,_s)}},_s=new WeakMap,tr=new WeakMap,Ps=new WeakMap,Em),Tl=new lw;function aw(e){return Math.min(1e3*2**e,3e4)}function Xg(e){return(e??"online")==="online"?Tl.isOnline():!0}var nc=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Jg(e){let t=!1,n=0,r;const s=tc(),i=()=>s.status!=="pending",o=N=>{var L;if(!i()){const y=new nc(N);g(y),(L=e.onCancel)==null||L.call(e,y)}},l=()=>{t=!0},u=()=>{t=!1},c=()=>Nd.isFocused()&&(e.networkMode==="always"||Tl.isOnline())&&e.canRun(),f=()=>Xg(e.networkMode)&&e.canRun(),h=N=>{i()||(r==null||r(),s.resolve(N))},g=N=>{i()||(r==null||r(),s.reject(N))},w=()=>new Promise(N=>{var L;r=y=>{(i()||c())&&N(y)},(L=e.onPause)==null||L.call(e)}).then(()=>{var N;r=void 0,i()||(N=e.onContinue)==null||N.call(e)}),k=()=>{if(i())return;let N;const L=n===0?e.initialPromise:void 0;try{N=L??e.fn()}catch(y){N=Promise.reject(y)}Promise.resolve(N).then(h).catch(y=>{var R;if(i())return;const m=e.retry??(Zr?0:3),p=e.retryDelay??aw,v=typeof p=="function"?p(n,y):p,C=m===!0||typeof m=="number"&&n<m||typeof m=="function"&&m(n,y);if(t||!C){g(y);return}n++,(R=e.onFail)==null||R.call(e,n,y),ew(v).then(()=>c()?void 0:w()).then(()=>{t?g(y):k()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:u,canStart:f,start:()=>(f()?k():w().then(k),s)}}var zr,Nm,Zg=(Nm=class{constructor(){re(this,zr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ju(this.gcTime)&&K(this,zr,Pr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Zr?1/0:5*60*1e3))}clearGcTimeout(){S(this,zr)&&(Pr.clearTimeout(S(this,zr)),K(this,zr,void 0))}},zr=new WeakMap,Nm),Ar,Is,Bt,$r,Ze,Gi,Ur,nn,Nn,jm,uw=(jm=class extends Zg{constructor(t){super();re(this,nn);re(this,Ar);re(this,Is);re(this,Bt);re(this,$r);re(this,Ze);re(this,Gi);re(this,Ur);K(this,Ur,!1),K(this,Gi,t.defaultOptions),this.setOptions(t.options),this.observers=[],K(this,$r,t.client),K(this,Bt,S(this,$r).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,K(this,Ar,wh(this.options)),this.state=t.state??S(this,Ar),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=S(this,Ze))==null?void 0:t.promise}setOptions(t){if(this.options={...S(this,Gi),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=wh(this.options);n.data!==void 0&&(this.setState(xh(n.data,n.dataUpdatedAt)),K(this,Ar,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&S(this,Bt).remove(this)}setData(t,n){const r=ec(this.state.data,t,this.options);return pe(this,nn,Nn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){pe(this,nn,Nn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=S(this,Ze))==null?void 0:r.promise;return(s=S(this,Ze))==null||s.cancel(t),n?n.then(yt).catch(yt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(S(this,Ar))}isActive(){return this.observers.some(t=>Wt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ed||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>yr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Kg(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=S(this,Ze))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=S(this,Ze))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),S(this,Bt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(S(this,Ze)&&(S(this,Ur)?S(this,Ze).cancel({revert:!0}):S(this,Ze).cancelRetry()),this.scheduleGc()),S(this,Bt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||pe(this,nn,Nn).call(this,{type:"invalidate"})}async fetch(t,n){var u,c,f,h,g,w,k,N,L,y,m,p;if(this.state.fetchStatus!=="idle"&&((u=S(this,Ze))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(S(this,Ze))return S(this,Ze).continueRetry(),S(this,Ze).promise}if(t&&this.setOptions(t),!this.options.queryFn){const v=this.observers.find(C=>C.options.queryFn);v&&this.setOptions(v.options)}const r=new AbortController,s=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(K(this,Ur,!0),r.signal)})},i=()=>{const v=Yg(this.options,n),R=(()=>{const M={client:S(this,$r),queryKey:this.queryKey,meta:this.meta};return s(M),M})();return K(this,Ur,!1),this.options.persister?this.options.persister(v,R,this):v(R)},l=(()=>{const v={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:S(this,$r),state:this.state,fetchFn:i};return s(v),v})();(c=this.options.behavior)==null||c.onFetch(l,this),K(this,Is,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&pe(this,nn,Nn).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),K(this,Ze,Jg({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:v=>{v instanceof nc&&v.revert&&this.setState({...S(this,Is),fetchStatus:"idle"}),r.abort()},onFail:(v,C)=>{pe(this,nn,Nn).call(this,{type:"failed",failureCount:v,error:C})},onPause:()=>{pe(this,nn,Nn).call(this,{type:"pause"})},onContinue:()=>{pe(this,nn,Nn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const v=await S(this,Ze).start();if(v===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(v),(w=(g=S(this,Bt).config).onSuccess)==null||w.call(g,v,this),(N=(k=S(this,Bt).config).onSettled)==null||N.call(k,v,this.state.error,this),v}catch(v){if(v instanceof nc){if(v.silent)return S(this,Ze).promise;if(v.revert){if(this.state.data===void 0)throw v;return this.state.data}}throw pe(this,nn,Nn).call(this,{type:"error",error:v}),(y=(L=S(this,Bt).config).onError)==null||y.call(L,v,this),(p=(m=S(this,Bt).config).onSettled)==null||p.call(m,this.state.data,v,this),v}finally{this.scheduleGc()}}},Ar=new WeakMap,Is=new WeakMap,Bt=new WeakMap,$r=new WeakMap,Ze=new WeakMap,Gi=new WeakMap,Ur=new WeakMap,nn=new WeakSet,Nn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...ev(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...xh(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return K(this,Is,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Xe.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),S(this,Bt).notify({query:this,type:"updated",action:t})})},jm);function ev(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Xg(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function xh(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function wh(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Et,Se,Xi,pt,Br,Fs,Rn,nr,Ji,Os,Ds,Wr,Hr,rr,zs,je,vi,rc,sc,ic,oc,lc,ac,uc,tv,Mm,cw=(Mm=class extends Zs{constructor(t,n){super();re(this,je);re(this,Et);re(this,Se);re(this,Xi);re(this,pt);re(this,Br);re(this,Fs);re(this,Rn);re(this,nr);re(this,Ji);re(this,Os);re(this,Ds);re(this,Wr);re(this,Hr);re(this,rr);re(this,zs,new Set);this.options=n,K(this,Et,t),K(this,nr,null),K(this,Rn,tc()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(S(this,Se).addObserver(this),Sh(S(this,Se),this.options)?pe(this,je,vi).call(this):this.updateResult(),pe(this,je,oc).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return cc(S(this,Se),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return cc(S(this,Se),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,pe(this,je,lc).call(this),pe(this,je,ac).call(this),S(this,Se).removeObserver(this)}setOptions(t){const n=this.options,r=S(this,Se);if(this.options=S(this,Et).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Wt(this.options.enabled,S(this,Se))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");pe(this,je,uc).call(this),S(this,Se).setOptions(this.options),n._defaulted&&!Ll(this.options,n)&&S(this,Et).getQueryCache().notify({type:"observerOptionsUpdated",query:S(this,Se),observer:this});const s=this.hasListeners();s&&kh(S(this,Se),r,this.options,n)&&pe(this,je,vi).call(this),this.updateResult(),s&&(S(this,Se)!==r||Wt(this.options.enabled,S(this,Se))!==Wt(n.enabled,S(this,Se))||yr(this.options.staleTime,S(this,Se))!==yr(n.staleTime,S(this,Se)))&&pe(this,je,rc).call(this);const i=pe(this,je,sc).call(this);s&&(S(this,Se)!==r||Wt(this.options.enabled,S(this,Se))!==Wt(n.enabled,S(this,Se))||i!==S(this,rr))&&pe(this,je,ic).call(this,i)}getOptimisticResult(t){const n=S(this,Et).getQueryCache().build(S(this,Et),t),r=this.createResult(n,t);return fw(this,r)&&(K(this,pt,r),K(this,Fs,this.options),K(this,Br,S(this,Se).state)),r}getCurrentResult(){return S(this,pt)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&S(this,Rn).status==="pending"&&S(this,Rn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){S(this,zs).add(t)}getCurrentQuery(){return S(this,Se)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=S(this,Et).defaultQueryOptions(t),r=S(this,Et).getQueryCache().build(S(this,Et),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return pe(this,je,vi).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),S(this,pt)))}createResult(t,n){var T;const r=S(this,Se),s=this.options,i=S(this,pt),o=S(this,Br),l=S(this,Fs),c=t!==r?t.state:S(this,Xi),{state:f}=t;let h={...f},g=!1,w;if(n._optimisticResults){const E=this.hasListeners(),P=!E&&Sh(t,n),Q=E&&kh(t,r,n,s);(P||Q)&&(h={...h,...ev(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:k,errorUpdatedAt:N,status:L}=h;w=h.data;let y=!1;if(n.placeholderData!==void 0&&w===void 0&&L==="pending"){let E;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(E=i.data,y=!0):E=typeof n.placeholderData=="function"?n.placeholderData((T=S(this,Ds))==null?void 0:T.state.data,S(this,Ds)):n.placeholderData,E!==void 0&&(L="success",w=ec(i==null?void 0:i.data,E,n),g=!0)}if(n.select&&w!==void 0&&!y)if(i&&w===(o==null?void 0:o.data)&&n.select===S(this,Ji))w=S(this,Os);else try{K(this,Ji,n.select),w=n.select(w),w=ec(i==null?void 0:i.data,w,n),K(this,Os,w),K(this,nr,null)}catch(E){K(this,nr,E)}S(this,nr)&&(k=S(this,nr),w=S(this,Os),N=Date.now(),L="error");const m=h.fetchStatus==="fetching",p=L==="pending",v=L==="error",C=p&&m,R=w!==void 0,b={status:L,fetchStatus:h.fetchStatus,isPending:p,isSuccess:L==="success",isError:v,isInitialLoading:C,isLoading:C,data:w,dataUpdatedAt:h.dataUpdatedAt,error:k,errorUpdatedAt:N,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:m,isRefetching:m&&!p,isLoadingError:v&&!R,isPaused:h.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:v&&R,isStale:jd(t,n),refetch:this.refetch,promise:S(this,Rn),isEnabled:Wt(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const E=O=>{b.status==="error"?O.reject(b.error):b.data!==void 0&&O.resolve(b.data)},P=()=>{const O=K(this,Rn,b.promise=tc());E(O)},Q=S(this,Rn);switch(Q.status){case"pending":t.queryHash===r.queryHash&&E(Q);break;case"fulfilled":(b.status==="error"||b.data!==Q.value)&&P();break;case"rejected":(b.status!=="error"||b.error!==Q.reason)&&P();break}}return b}updateResult(){const t=S(this,pt),n=this.createResult(S(this,Se),this.options);if(K(this,Br,S(this,Se).state),K(this,Fs,this.options),S(this,Br).data!==void 0&&K(this,Ds,S(this,Se)),Ll(n,t))return;K(this,pt,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!S(this,zs).size)return!0;const o=new Set(i??S(this,zs));return this.options.throwOnError&&o.add("error"),Object.keys(S(this,pt)).some(l=>{const u=l;return S(this,pt)[u]!==t[u]&&o.has(u)})};pe(this,je,tv).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&pe(this,je,oc).call(this)}},Et=new WeakMap,Se=new WeakMap,Xi=new WeakMap,pt=new WeakMap,Br=new WeakMap,Fs=new WeakMap,Rn=new WeakMap,nr=new WeakMap,Ji=new WeakMap,Os=new WeakMap,Ds=new WeakMap,Wr=new WeakMap,Hr=new WeakMap,rr=new WeakMap,zs=new WeakMap,je=new WeakSet,vi=function(t){pe(this,je,uc).call(this);let n=S(this,Se).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(yt)),n},rc=function(){pe(this,je,lc).call(this);const t=yr(this.options.staleTime,S(this,Se));if(Zr||S(this,pt).isStale||!Ju(t))return;const r=Kg(S(this,pt).dataUpdatedAt,t)+1;K(this,Wr,Pr.setTimeout(()=>{S(this,pt).isStale||this.updateResult()},r))},sc=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(S(this,Se)):this.options.refetchInterval)??!1},ic=function(t){pe(this,je,ac).call(this),K(this,rr,t),!(Zr||Wt(this.options.enabled,S(this,Se))===!1||!Ju(S(this,rr))||S(this,rr)===0)&&K(this,Hr,Pr.setInterval(()=>{(this.options.refetchIntervalInBackground||Nd.isFocused())&&pe(this,je,vi).call(this)},S(this,rr)))},oc=function(){pe(this,je,rc).call(this),pe(this,je,ic).call(this,pe(this,je,sc).call(this))},lc=function(){S(this,Wr)&&(Pr.clearTimeout(S(this,Wr)),K(this,Wr,void 0))},ac=function(){S(this,Hr)&&(Pr.clearInterval(S(this,Hr)),K(this,Hr,void 0))},uc=function(){const t=S(this,Et).getQueryCache().build(S(this,Et),this.options);if(t===S(this,Se))return;const n=S(this,Se);K(this,Se,t),K(this,Xi,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},tv=function(t){Xe.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(S(this,pt))}),S(this,Et).getQueryCache().notify({query:S(this,Se),type:"observerResultsUpdated"})})},Mm);function dw(e,t){return Wt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Sh(e,t){return dw(e,t)||e.state.data!==void 0&&cc(e,t,t.refetchOnMount)}function cc(e,t,n){if(Wt(t.enabled,e)!==!1&&yr(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&jd(e,t)}return!1}function kh(e,t,n,r){return(e!==t||Wt(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&jd(e,n)}function jd(e,t){return Wt(t.enabled,e)!==!1&&e.isStaleByTime(yr(t.staleTime,e))}function fw(e,t){return!Ll(e.getCurrentResult(),t)}function Ch(e){return{onFetch:(t,n)=>{var f,h,g,w,k;const r=t.options,s=(g=(h=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:h.fetchMore)==null?void 0:g.direction,i=((w=t.state.data)==null?void 0:w.pages)||[],o=((k=t.state.data)==null?void 0:k.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const c=async()=>{let N=!1;const L=p=>{rw(p,()=>t.signal,()=>N=!0)},y=Yg(t.options,t.fetchOptions),m=async(p,v,C)=>{if(N)return Promise.reject();if(v==null&&p.pages.length)return Promise.resolve(p);const M=(()=>{const P={client:t.client,queryKey:t.queryKey,pageParam:v,direction:C?"backward":"forward",meta:t.options.meta};return L(P),P})(),b=await y(M),{maxPages:T}=t.options,E=C?nw:tw;return{pages:E(p.pages,b,T),pageParams:E(p.pageParams,v,T)}};if(s&&i.length){const p=s==="backward",v=p?hw:bh,C={pages:i,pageParams:o},R=v(r,C);l=await m(C,R,p)}else{const p=e??i.length;do{const v=u===0?o[0]??r.initialPageParam:bh(r,l);if(u>0&&v==null)break;l=await m(l,v),u++}while(u<p)}return l};t.options.persister?t.fetchFn=()=>{var N,L;return(L=(N=t.options).persister)==null?void 0:L.call(N,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function bh(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function hw(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Zi,pn,gt,Vr,gn,qn,Rm,mw=(Rm=class extends Zg{constructor(t){super();re(this,gn);re(this,Zi);re(this,pn);re(this,gt);re(this,Vr);K(this,Zi,t.client),this.mutationId=t.mutationId,K(this,gt,t.mutationCache),K(this,pn,[]),this.state=t.state||nv(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){S(this,pn).includes(t)||(S(this,pn).push(t),this.clearGcTimeout(),S(this,gt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){K(this,pn,S(this,pn).filter(n=>n!==t)),this.scheduleGc(),S(this,gt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){S(this,pn).length||(this.state.status==="pending"?this.scheduleGc():S(this,gt).remove(this))}continue(){var t;return((t=S(this,Vr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,u,c,f,h,g,w,k,N,L,y,m,p,v,C,R,M,b,T;const n=()=>{pe(this,gn,qn).call(this,{type:"continue"})},r={client:S(this,Zi),meta:this.options.meta,mutationKey:this.options.mutationKey};K(this,Vr,Jg({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(E,P)=>{pe(this,gn,qn).call(this,{type:"failed",failureCount:E,error:P})},onPause:()=>{pe(this,gn,qn).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>S(this,gt).canRun(this)}));const s=this.state.status==="pending",i=!S(this,Vr).canStart();try{if(s)n();else{pe(this,gn,qn).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=S(this,gt).config).onMutate)==null?void 0:l.call(o,t,this,r));const P=await((c=(u=this.options).onMutate)==null?void 0:c.call(u,t,r));P!==this.state.context&&pe(this,gn,qn).call(this,{type:"pending",context:P,variables:t,isPaused:i})}const E=await S(this,Vr).start();return await((h=(f=S(this,gt).config).onSuccess)==null?void 0:h.call(f,E,t,this.state.context,this,r)),await((w=(g=this.options).onSuccess)==null?void 0:w.call(g,E,t,this.state.context,r)),await((N=(k=S(this,gt).config).onSettled)==null?void 0:N.call(k,E,null,this.state.variables,this.state.context,this,r)),await((y=(L=this.options).onSettled)==null?void 0:y.call(L,E,null,t,this.state.context,r)),pe(this,gn,qn).call(this,{type:"success",data:E}),E}catch(E){try{await((p=(m=S(this,gt).config).onError)==null?void 0:p.call(m,E,t,this.state.context,this,r))}catch(P){Promise.reject(P)}try{await((C=(v=this.options).onError)==null?void 0:C.call(v,E,t,this.state.context,r))}catch(P){Promise.reject(P)}try{await((M=(R=S(this,gt).config).onSettled)==null?void 0:M.call(R,void 0,E,this.state.variables,this.state.context,this,r))}catch(P){Promise.reject(P)}try{await((T=(b=this.options).onSettled)==null?void 0:T.call(b,void 0,E,t,this.state.context,r))}catch(P){Promise.reject(P)}throw pe(this,gn,qn).call(this,{type:"error",error:E}),E}finally{S(this,gt).runNext(this)}}},Zi=new WeakMap,pn=new WeakMap,gt=new WeakMap,Vr=new WeakMap,gn=new WeakSet,qn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Xe.batch(()=>{S(this,pn).forEach(r=>{r.onMutationUpdate(t)}),S(this,gt).notify({mutation:this,type:"updated",action:t})})},Rm);function nv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ln,rn,eo,Lm,pw=(Lm=class extends Zs{constructor(t={}){super();re(this,Ln);re(this,rn);re(this,eo);this.config=t,K(this,Ln,new Set),K(this,rn,new Map),K(this,eo,0)}build(t,n,r){const s=new mw({client:t,mutationCache:this,mutationId:++vo(this,eo)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){S(this,Ln).add(t);const n=Fo(t);if(typeof n=="string"){const r=S(this,rn).get(n);r?r.push(t):S(this,rn).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(S(this,Ln).delete(t)){const n=Fo(t);if(typeof n=="string"){const r=S(this,rn).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&S(this,rn).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Fo(t);if(typeof n=="string"){const r=S(this,rn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Fo(t);if(typeof n=="string"){const s=(r=S(this,rn).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Xe.batch(()=>{S(this,Ln).forEach(t=>{this.notify({type:"removed",mutation:t})}),S(this,Ln).clear(),S(this,rn).clear()})}getAll(){return Array.from(S(this,Ln))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>gh(n,r))}findAll(t={}){return this.getAll().filter(n=>gh(t,n))}notify(t){Xe.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Xe.batch(()=>Promise.all(t.map(n=>n.continue().catch(yt))))}},Ln=new WeakMap,rn=new WeakMap,eo=new WeakMap,Lm);function Fo(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Tn,sr,Nt,_n,zn,Jo,dc,Tm,gw=(Tm=class extends Zs{constructor(n,r){super();re(this,zn);re(this,Tn);re(this,sr);re(this,Nt);re(this,_n);K(this,Tn,n),this.setOptions(r),this.bindMethods(),pe(this,zn,Jo).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=S(this,Tn).defaultMutationOptions(n),Ll(this.options,r)||S(this,Tn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:S(this,Nt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&es(r.mutationKey)!==es(this.options.mutationKey)?this.reset():((s=S(this,Nt))==null?void 0:s.state.status)==="pending"&&S(this,Nt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=S(this,Nt))==null||n.removeObserver(this)}onMutationUpdate(n){pe(this,zn,Jo).call(this),pe(this,zn,dc).call(this,n)}getCurrentResult(){return S(this,sr)}reset(){var n;(n=S(this,Nt))==null||n.removeObserver(this),K(this,Nt,void 0),pe(this,zn,Jo).call(this),pe(this,zn,dc).call(this)}mutate(n,r){var s;return K(this,_n,r),(s=S(this,Nt))==null||s.removeObserver(this),K(this,Nt,S(this,Tn).getMutationCache().build(S(this,Tn),this.options)),S(this,Nt).addObserver(this),S(this,Nt).execute(n)}},Tn=new WeakMap,sr=new WeakMap,Nt=new WeakMap,_n=new WeakMap,zn=new WeakSet,Jo=function(){var r;const n=((r=S(this,Nt))==null?void 0:r.state)??nv();K(this,sr,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},dc=function(n){Xe.batch(()=>{var r,s,i,o,l,u,c,f;if(S(this,_n)&&this.hasListeners()){const h=S(this,sr).variables,g=S(this,sr).context,w={client:S(this,Tn),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=S(this,_n)).onSuccess)==null||s.call(r,n.data,h,g,w)}catch(k){Promise.reject(k)}try{(o=(i=S(this,_n)).onSettled)==null||o.call(i,n.data,null,h,g,w)}catch(k){Promise.reject(k)}}else if((n==null?void 0:n.type)==="error"){try{(u=(l=S(this,_n)).onError)==null||u.call(l,n.error,h,g,w)}catch(k){Promise.reject(k)}try{(f=(c=S(this,_n)).onSettled)==null||f.call(c,void 0,n.error,h,g,w)}catch(k){Promise.reject(k)}}}this.listeners.forEach(h=>{h(S(this,sr))})})},Tm),vn,_m,vw=(_m=class extends Zs{constructor(t={}){super();re(this,vn);this.config=t,K(this,vn,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??bd(s,n);let o=this.get(i);return o||(o=new uw({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){S(this,vn).has(t.queryHash)||(S(this,vn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=S(this,vn).get(t.queryHash);n&&(t.destroy(),n===t&&S(this,vn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Xe.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return S(this,vn).get(t)}getAll(){return[...S(this,vn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>ph(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>ph(t,r)):n}notify(t){Xe.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Xe.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Xe.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},vn=new WeakMap,_m),$e,ir,or,As,$s,lr,Us,Bs,Pm,yw=(Pm=class{constructor(e={}){re(this,$e);re(this,ir);re(this,or);re(this,As);re(this,$s);re(this,lr);re(this,Us);re(this,Bs);K(this,$e,e.queryCache||new vw),K(this,ir,e.mutationCache||new pw),K(this,or,e.defaultOptions||{}),K(this,As,new Map),K(this,$s,new Map),K(this,lr,0)}mount(){vo(this,lr)._++,S(this,lr)===1&&(K(this,Us,Nd.subscribe(async e=>{e&&(await this.resumePausedMutations(),S(this,$e).onFocus())})),K(this,Bs,Tl.subscribe(async e=>{e&&(await this.resumePausedMutations(),S(this,$e).onOnline())})))}unmount(){var e,t;vo(this,lr)._--,S(this,lr)===0&&((e=S(this,Us))==null||e.call(this),K(this,Us,void 0),(t=S(this,Bs))==null||t.call(this),K(this,Bs,void 0))}isFetching(e){return S(this,$e).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return S(this,ir).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=S(this,$e).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=S(this,$e).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(yr(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return S(this,$e).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=S(this,$e).get(r.queryHash),i=s==null?void 0:s.state.data,o=Jx(t,i);if(o!==void 0)return S(this,$e).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Xe.batch(()=>S(this,$e).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=S(this,$e).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=S(this,$e);Xe.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=S(this,$e);return Xe.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Xe.batch(()=>S(this,$e).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(yt).catch(yt)}invalidateQueries(e,t={}){return Xe.batch(()=>(S(this,$e).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Xe.batch(()=>S(this,$e).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(yt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(yt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=S(this,$e).build(this,t);return n.isStaleByTime(yr(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(yt).catch(yt)}fetchInfiniteQuery(e){return e.behavior=Ch(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(yt).catch(yt)}ensureInfiniteQueryData(e){return e.behavior=Ch(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Tl.isOnline()?S(this,ir).resumePausedMutations():Promise.resolve()}getQueryCache(){return S(this,$e)}getMutationCache(){return S(this,ir)}getDefaultOptions(){return S(this,or)}setDefaultOptions(e){K(this,or,e)}setQueryDefaults(e,t){S(this,As).set(es(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...S(this,As).values()],n={};return t.forEach(r=>{Qi(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){S(this,$s).set(es(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...S(this,$s).values()],n={};return t.forEach(r=>{Qi(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...S(this,or).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=bd(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Ed&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...S(this,or).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){S(this,$e).clear(),S(this,ir).clear()}},$e=new WeakMap,ir=new WeakMap,or=new WeakMap,As=new WeakMap,$s=new WeakMap,lr=new WeakMap,Us=new WeakMap,Bs=new WeakMap,Pm),rv=d.createContext(void 0),br=e=>{const t=d.useContext(rv);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},xw=({client:e,children:t})=>(d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(rv.Provider,{value:e,children:t})),sv=d.createContext(!1),ww=()=>d.useContext(sv);sv.Provider;function Sw(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var kw=d.createContext(Sw()),Cw=()=>d.useContext(kw),bw=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Ew=e=>{d.useEffect(()=>{e.clearReset()},[e])},Nw=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||Gg(n,[e.error,r])),jw=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Mw=(e,t)=>e.isLoading&&e.isFetching&&!t,Rw=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Eh=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Lw(e,t,n){var h,g,w,k,N;const r=ww(),s=Cw(),i=br(),o=i.defaultQueryOptions(e);(g=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||g.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",jw(o),bw(o,s),Ew(s);const l=!i.getQueryCache().get(o.queryHash),[u]=d.useState(()=>new t(i,o)),c=u.getOptimisticResult(o),f=!r&&e.subscribed!==!1;if(d.useSyncExternalStore(d.useCallback(L=>{const y=f?u.subscribe(Xe.batchCalls(L)):yt;return u.updateResult(),y},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),d.useEffect(()=>{u.setOptions(o)},[o,u]),Rw(o,c))throw Eh(o,u,s);if(Nw({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((k=(w=i.getDefaultOptions().queries)==null?void 0:w._experimental_afterQuery)==null||k.call(w,o,c),o.experimental_prefetchInRender&&!Zr&&Mw(c,r)){const L=l?Eh(o,u,s):(N=i.getQueryCache().get(o.queryHash))==null?void 0:N.promise;L==null||L.catch(yt).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?c:u.trackResult(c)}function Zl(e,t){return Lw(e,cw)}function Tw(e,t){const n=br(),[r]=d.useState(()=>new gw(n,e));d.useEffect(()=>{r.setOptions(e)},[r,e]);const s=d.useSyncExternalStore(d.useCallback(o=>r.subscribe(Xe.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=d.useCallback((o,l)=>{r.mutate(o,l).catch(yt)},[r]);if(s.error&&Gg(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function Nh(e){return e.length>0&&"options"in e[0]}function fc({value:e,onChange:t,options:n,placeholder:r="Select...",trigger:s,triggerClassName:i="",panelClassName:o="",align:l="left",width:u="auto",showChevron:c=!0,title:f,disabled:h=!1,"aria-label":g}){var b;const[w,k]=d.useState(!1),N=d.useRef(null),L=d.useRef(null),m=d.useCallback(()=>{const T=E=>{const P=E.find(Q=>Q.value===e);return P?P.label:null};if(Nh(n))for(const E of n){const P=T(E.options);if(P)return P}else{const E=T(n);if(E)return E}return r},[e,n,r])();d.useEffect(()=>{if(!w)return;const T=P=>{N.current&&!N.current.contains(P.target)&&k(!1)},E=P=>{var Q;P.key==="Escape"&&(k(!1),(Q=L.current)==null||Q.focus())};return window.addEventListener("click",T),window.addEventListener("keydown",E),()=>{window.removeEventListener("click",T),window.removeEventListener("keydown",E)}},[w]);const p=T=>{var E;t(T),k(!1),(E=L.current)==null||E.focus()},v=T=>T.map(E=>a.jsxs("button",{className:"dropdown-item","data-active":E.value===e,disabled:E.disabled,onClick:()=>!E.disabled&&p(E.value),role:"menuitem",children:[E.icon&&a.jsx("span",{className:"shrink-0",children:E.icon}),a.jsx("span",{className:"flex-1 truncate",children:E.label}),E.value===e&&a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 text-accent",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})]},E.value)),C=((b=L.current)==null?void 0:b.offsetWidth)??0,R=u==="trigger"?C:u==="auto"?void 0:u,M={...R?{width:R,minWidth:R}:{},...l==="right"?{right:0}:{left:0}};return a.jsxs("div",{ref:N,className:"relative",children:[s?a.jsx("div",{onClick:()=>!h&&k(T=>!T),children:s}):a.jsxs("button",{ref:L,type:"button",className:`dropdown-trigger ${i}`,onClick:()=>k(T=>!T),disabled:h,title:f,"aria-label":g,"aria-haspopup":"listbox","aria-expanded":w,children:[a.jsx("span",{className:"truncate",children:m}),c&&a.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`shrink-0 opacity-60 transition-transform ${w?"rotate-180":""}`,children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),w&&a.jsx("div",{className:`dropdown-panel ${o}`,style:M,role:"listbox","aria-label":g,children:Nh(n)?n.map((T,E)=>a.jsxs("div",{children:[T.label&&a.jsx("div",{className:"dropdown-label",children:T.label}),v(T.options),E<n.length-1&&a.jsx("div",{className:"dropdown-divider"})]},T.label||E)):v(n)})]})}const _w={offline:"sync-dot-offline",unstable:"sync-dot-unstable",recent:"sync-dot-recent",editing:"sync-dot-editing",live:"sync-dot-live"};function Pw({state:e,presence:t,syncLabel:n,connectionLabel:r,lastEditedLabel:s,hasEdits:i,recentTouches:o,isNarrow:l}){const[u,c]=d.useState(!1),[f,h]=d.useState(null),g=d.useRef(null),w=d.useRef(null),k=d.useRef(null),N=t?`${t.viewing} viewing  ${t.editing} editing`:"- viewing  - editing",L=t?String(t.viewing):"-",y=d.useCallback(()=>{k.current&&(window.clearTimeout(k.current),k.current=null)},[]),m=d.useCallback((v,C)=>{var R;C&&((R=navigator.clipboard)==null||R.writeText(C).then(()=>{h(v),y(),k.current=window.setTimeout(()=>{h(M=>M===v?null:M)},1e3)}).catch(()=>{}))},[y]),p=d.useCallback(()=>{c(!1),window.requestAnimationFrame(()=>{var v;return(v=w.current)==null?void 0:v.focus()})},[]);return d.useEffect(()=>{if(!u)return;const v=R=>{!g.current||g.current.contains(R.target)||p()},C=R=>{R.key==="Escape"&&p()};return window.addEventListener("mousedown",v),window.addEventListener("keydown",C),()=>{window.removeEventListener("mousedown",v),window.removeEventListener("keydown",C)}},[u,p]),d.useEffect(()=>()=>{y()},[y]),a.jsxs("div",{ref:g,className:"sync-indicator",children:[a.jsxs("button",{ref:w,type:"button",className:"sync-indicator-button",onClick:()=>u?p():c(!0),"aria-haspopup":"dialog","aria-expanded":u,"aria-label":"Sync status",title:N,children:[a.jsx("span",{className:`sync-indicator-dot ${_w[e]}`,"aria-hidden":"true"}),!l&&a.jsx("span",{className:"sync-indicator-count tabular-nums",children:L})]}),u&&a.jsxs("div",{role:"dialog","aria-label":"Sync status",className:"sync-indicator-card select-text",children:[a.jsx("div",{className:"sync-indicator-line sync-indicator-primary",children:n}),a.jsx("div",{className:"sync-indicator-line",children:r}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:N}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:i?`Last edited: ${s}`:"No edits yet."}),a.jsxs("div",{className:"sync-indicator-section",children:[a.jsx("div",{className:"sync-indicator-section-title",children:"Recently touched files"}),o.length>0?a.jsx("div",{className:"sync-indicator-list",children:o.map(v=>a.jsxs("div",{className:"sync-indicator-item",children:[a.jsx("button",{type:"button",className:"sync-indicator-item-name",title:`Copy filename: ${v.label}`,onClick:()=>m(v.path,v.label),children:v.label}),a.jsx("span",{className:"sync-indicator-item-time tabular-nums",children:f===v.path?"Copied":v.timeLabel})]},v.path))}):a.jsx("div",{className:"sync-indicator-empty",children:"No recent touches."})]})]})]})}function Iw({rootRef:e,onSearch:t,viewerActive:n,onBack:r,zoomPercent:s,onZoomPercentChange:i,currentLabel:o,itemCount:l,totalCount:u,sortSpec:c,metricKeys:f,onSortChange:h,sortDisabled:g=!1,filterCount:w,onOpenFilters:k,starFilters:N,onToggleStar:L,onClearStars:y,onClearFilters:m,starCounts:p,viewMode:v,onViewMode:C,gridItemSize:R,onGridItemSize:M,leftOpen:b,rightOpen:T,onToggleLeft:E,onToggleRight:P,onPrevImage:Q,onNextImage:O,canPrevImage:$,canNextImage:ie,searchDisabled:B=!1,searchPlaceholder:le,syncIndicator:I}){const[V,q]=d.useState(!1),[he,fe]=d.useState(!1),[Me,W]=d.useState(!1),Y=d.useRef(null),te=d.useRef(null);d.useEffect(()=>{if(!V)return;const H=ae=>{Y.current&&!Y.current.contains(ae.target)&&q(!1)};return window.addEventListener("click",H),()=>window.removeEventListener("click",H)},[V]),d.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const H=window.matchMedia("(max-width: 900px)"),ae=ke=>fe(ke.matches);return fe(H.matches),"addEventListener"in H?(H.addEventListener("change",ae),()=>H.removeEventListener("change",ae)):(H.addListener(ae),()=>H.removeListener(ae))},[]),d.useEffect(()=>{if(B){W(!1);return}if(!he||n){W(!1);return}if(!Me)return;const H=window.requestAnimationFrame(()=>{var ae;return(ae=te.current)==null?void 0:ae.focus()});return()=>window.cancelAnimationFrame(H)},[he,Me,n,B]);const me=c??{kind:"builtin",key:"added",dir:"desc"},Re=me.dir,Ve=me.kind==="builtin"&&me.key==="random",Be=n||g,lt=f!=null&&f.length?f.map(H=>({value:`metric:${H}`,label:H,disabled:g})):[],Qe=[{value:"builtin:added",label:"Date added",disabled:g},{value:"builtin:name",label:"Filename",disabled:g},{value:"builtin:random",label:"Random",disabled:g},...lt],Cn=[{label:"Layout",options:[{value:"layout:grid",label:"Grid"},{value:"layout:masonry",label:"Masonry"}]},{label:"Sort by",options:Qe}],Ee=me.kind==="metric"?`metric:${me.key}`:`builtin:${me.key}`,kt=[{label:"Sort by",options:Qe}],cn=he&&!n,U=H=>{if(H.startsWith("layout:")){const ae=H==="layout:masonry"?"adaptive":"grid";C==null||C(ae)}else{if(g)return;h==null||h(jh(H,me))}},se=()=>{!h||g||h(Ve?me:{...me,dir:Re==="desc"?"asc":"desc"})},oe=N??[],ye=oe.length,ue=Ow(w,ye),ve=Fw(l,u),Z=o||"Root";return a.jsxs("div",{ref:e,className:"toolbar-shell fixed top-0 left-0 right-0 h-12 grid grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] items-center px-3 gap-3 bg-panel border-b border-border z-[var(--z-toolbar)] col-span-full row-start-1 select-none",children:[a.jsxs("div",{className:"toolbar-left flex items-center gap-4 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsxs("div",{className:"flex flex-col min-w-0 leading-tight",children:[a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted",children:"Scope"}),a.jsx("span",{className:"text-sm font-medium text-text truncate",title:Z,children:Z})]}),ve&&a.jsx("span",{className:"toolbar-count text-xs text-muted whitespace-nowrap tabular-nums",children:ve})]}),a.jsxs("div",{className:"toolbar-sort flex items-center gap-2",children:[a.jsxs("div",{className:`toolbar-sort-controls flex items-center gap-2 ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsx(fc,{value:Ee,onChange:U,options:Cn,title:"Sort and layout options","aria-label":"Sort and layout",triggerClassName:"min-w-[110px]"}),a.jsx("button",{className:"toolbar-sort-dir btn btn-icon",onClick:se,title:g?"Sorting disabled":Ve?"Shuffle":`Sort ${Re==="desc"?"descending":"ascending"}`,"aria-label":Ve?"Shuffle":"Toggle sort direction","aria-disabled":Be,disabled:Be,children:Ve?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Re==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]}),a.jsxs("div",{ref:Y,className:`toolbar-filter relative ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsxs("button",{className:`btn ${ue>0?"btn-active":""}`,onClick:()=>q(H=>!H),"aria-haspopup":"dialog","aria-expanded":V,title:"Filters","aria-disabled":n,children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),a.jsx("span",{className:"toolbar-filters-label",children:"Filters"}),ue>0&&a.jsx("span",{className:"toolbar-filters-count px-1.5 py-0.5 text-[11px] rounded-full bg-accent-strong text-text",children:ue})]}),V&&a.jsxs("div",{role:"dialog","aria-label":"Filters",className:"dropdown-panel w-[240px]",style:{top:"38px",left:0},children:[a.jsx("div",{className:"dropdown-label",children:"Rating"}),a.jsxs("div",{className:"px-1",children:[[5,4,3,2,1].map(H=>{const ae=oe.includes(H),ke=(p==null?void 0:p[String(H)])??0;return a.jsxs("button",{onClick:()=>L==null?void 0:L(H),className:`dropdown-item justify-between ${ae?"bg-accent-muted":""}`,children:[a.jsxs("span",{className:ae?"text-star-active":"text-text",children:["".repeat(H),"".repeat(5-H)]}),a.jsx("span",{className:"text-xs text-muted",children:ke})]},H)}),a.jsxs("button",{onClick:()=>L==null?void 0:L(0),className:`dropdown-item justify-between ${oe.includes(0)?"bg-accent-muted":""}`,children:[a.jsx("span",{className:"text-text",children:"Unrated"}),a.jsx("span",{className:"text-xs text-muted",children:(p==null?void 0:p["0"])??0})]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("div",{className:"dropdown-label",children:"Metrics"}),a.jsxs("button",{className:"dropdown-item",onClick:()=>{q(!1),k==null||k()},children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]}),a.jsx("span",{children:"Open Metrics Panel"}),(w||0)>0&&a.jsxs("span",{className:"ml-auto text-xs text-muted",children:[w," active"]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("button",{className:"dropdown-item text-muted hover:text-text",onClick:()=>{m?m():y==null||y()},disabled:ue===0,children:"Clear all filters"})]})]}),n&&a.jsxs("button",{className:"btn btn-sm",onClick:r,title:"Back to grid",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})]})]}),a.jsx("div",{className:"toolbar-center flex items-center gap-3 justify-center min-w-0",children:n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"range",min:5,max:800,step:1,value:Math.round(Math.max(5,Math.min(800,s??100))),onChange:H=>i==null?void 0:i(Number(H.target.value)),className:"zoom-slider","aria-label":"Zoom level"}),a.jsxs("span",{className:"text-xs text-muted min-w-[42px] text-right",children:[Math.round(s??100),"%"]})]}):M&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted",children:"Size"}),a.jsx("input",{type:"range",min:80,max:500,step:10,value:R??220,onChange:H=>M(Number(H.target.value)),className:"w-28 h-1.5 bg-border rounded-full appearance-none cursor-pointer hover:bg-hover transition-colors [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-text [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-text [&::-moz-range-thumb]:border-0","aria-label":"Thumbnail size"})]})}),a.jsxs("div",{className:"toolbar-right flex items-center gap-2 justify-end",children:[a.jsxs("div",{className:`toolbar-nav flex items-center gap-1 mr-1 ${n?"":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,children:[a.jsx("button",{className:`btn btn-icon ${$?"":"opacity-40 cursor-not-allowed"}`,title:"Previous image (A / )",onClick:()=>$&&(Q==null?void 0:Q()),"aria-label":"Previous image","aria-disabled":!$,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("button",{className:`btn btn-icon ${ie?"":"opacity-40 cursor-not-allowed"}`,title:"Next image (D / )",onClick:()=>ie&&(O==null?void 0:O()),"aria-label":"Next image","aria-disabled":!ie,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 6l6 6-6 6"})})})]}),a.jsxs("div",{className:"toolbar-panels flex items-center gap-1",children:[a.jsx("button",{className:`btn btn-icon ${b?"":"opacity-50"}`,title:b?"Hide left panel (Ctrl+B)":"Show left panel (Ctrl+B)",onClick:E,"aria-pressed":b,"aria-label":"Toggle left panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"11",y:"5",width:"10",height:"14",rx:"1.5"})]})}),a.jsx("button",{className:`btn btn-icon ${T?"":"opacity-50"}`,title:T?"Hide right panel (Ctrl+Alt+B)":"Show right panel (Ctrl+Alt+B)",onClick:P,"aria-pressed":T,"aria-label":"Toggle right panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"15",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"3",y:"5",width:"10",height:"14",rx:"1.5"})]})})]}),I&&a.jsx(Pw,{...I,isNarrow:he}),!n&&he&&a.jsx("button",{className:`btn btn-icon ${Me?"btn-active":""} ${B?"opacity-50 cursor-not-allowed":""}`,"aria-label":Me?"Close search":"Open search",title:B?"Search disabled":Me?"Close search":"Search",onClick:()=>!B&&W(H=>!H),disabled:B,children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("circle",{cx:"11",cy:"11",r:"7"}),a.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),!n&&!he?a.jsx("div",{className:"toolbar-search w-[240px]",children:a.jsx("input",{ref:te,"aria-label":"Search filename, tags, notes",placeholder:B?le??"Search disabled":"Search...",onChange:H=>t(H.target.value),className:"toolbar-search-input input w-full focus:w-full transition-all duration-200 select-text",disabled:B})}):n?a.jsx("div",{className:"toolbar-search w-[240px]","aria-hidden":"true"}):null]}),!n&&he&&Me&&!B&&a.jsx("div",{className:"toolbar-search-row",children:a.jsx("input",{ref:te,"aria-label":"Search filename, tags, notes",placeholder:le??"Search...",onChange:H=>t(H.target.value),className:"toolbar-search-input-mobile input input-lg w-full select-text"})}),cn&&a.jsx("div",{className:"mobile-drawer",children:a.jsxs("div",{className:"mobile-drawer-row",children:[a.jsxs("div",{className:"mobile-pill-group",children:[a.jsx("button",{className:`mobile-pill ${v==="grid"?"is-active":""}`,onClick:()=>C==null?void 0:C("grid"),"aria-pressed":v==="grid",children:"Grid"}),a.jsx("button",{className:`mobile-pill ${v==="adaptive"?"is-active":""}`,onClick:()=>C==null?void 0:C("adaptive"),"aria-pressed":v==="adaptive",children:"Masonry"})]}),a.jsx(fc,{value:Ee,onChange:H=>h==null?void 0:h(jh(H,me)),options:kt,"aria-label":"Sort",triggerClassName:"mobile-pill mobile-pill-dropdown",panelClassName:"mobile-drawer-panel",disabled:g}),a.jsx("button",{className:`mobile-pill mobile-pill-icon ${Be?"opacity-50 cursor-not-allowed":""}`,onClick:se,title:g?"Sorting disabled":Ve?"Shuffle":`Sort ${Re==="desc"?"descending":"ascending"}`,"aria-label":Ve?"Shuffle":"Toggle sort direction","aria-disabled":Be,disabled:Be,children:Ve?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Re==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]})})]})}function Fw(e,t){if(typeof e!="number")return null;const n=e.toLocaleString();if(typeof t!="number")return`${n} items`;const r=t.toLocaleString();return t===e?`${n} items`:`${n} / ${r} items`}function Ow(e,t){return typeof e=="number"?e:t>0?1:0}function jh(e,t){if(e.startsWith("metric:")){const n=e.slice(7);return n?{kind:"metric",key:n,dir:t.dir}:t}if(e.startsWith("builtin:")){const n=e.slice(8);if(n==="name"||n==="added"||n==="random")return{kind:"builtin",key:n,dir:t.dir}}return t}class Sn extends Error{constructor(n,r,s,i){super(r);bn(this,"status");bn(this,"url");bn(this,"body");this.name="FetchError",this.status=n,this.url=s,this.body=i}}function Dw(e){const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function iv(e,t,n){if(t&&typeof t=="object"){const r=t,s=typeof r.error=="string"?r.error:null,i=typeof r.message=="string"?r.message:null;if(s&&i)return`${s}: ${i}`;if(s)return s;if(i)return i}return typeof t=="string"&&t?t:`HTTP ${e} for ${n}`}function rt(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{let u=null;const c=await l.text().catch(()=>"");if(c)if((l.headers.get("content-type")||"").includes("application/json")||Dw(c))try{u=JSON.parse(c)}catch{u=c}else u=c;if(!l.ok)throw new Sn(l.status,iv(l.status,u,e),e,u);return u}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}function Oo(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{if(!l.ok){const u=await l.text().catch(()=>""),c=u||null;throw new Sn(l.status,iv(l.status,c,e),e,c)}return l.blob()}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}class ov{constructor(t){bn(this,"store",new Map);bn(this,"inflight",new Map);bn(this,"totalBytes",0);this.maxBytes=t}getMaxBytes(){return this.maxBytes}getTotalBytes(){return this.totalBytes}getSize(){return this.store.size}has(t){return this.store.has(t)}isInflight(t){return this.inflight.has(t)}get(t){const n=this.store.get(t);if(n)return this.store.delete(t),this.store.set(t,n),n.blob}evictIfNeeded(t){for(;this.totalBytes+t>this.maxBytes&&this.store.size>0;){const n=this.store.keys().next().value;if(n==null)break;const r=this.store.get(n);r&&(this.totalBytes-=r.size),this.store.delete(n)}}set(t,n){const r=n.size||0;if(!(r>this.maxBytes)){if(this.store.has(t)){const s=this.store.get(t);this.totalBytes-=s.size,this.store.delete(t)}this.evictIfNeeded(r),this.store.set(t,{blob:n,size:r}),this.totalBytes+=r}}async getOrFetch(t,n){const r=this.get(t);if(r)return r;const s=this.inflight.get(t);if(s)return s.promise;const i=n(),o=typeof i=="object"&&"promise"in i,l=o?i.promise:i,u=o?i.abort:void 0,c=l.then(f=>(this.set(t,f),f)).finally(()=>{this.inflight.delete(t)});return this.inflight.set(t,{promise:c,abort:u}),c}prefetch(t,n){if(this.store.has(t)||this.inflight.has(t))return;const r=n(),s=typeof r=="object"&&"promise"in r,i=s?r.promise:r,o=s?r.abort:void 0,l=i.then(u=>(this.set(t,u),u)).catch(()=>new Blob).finally(()=>{this.inflight.delete(t)});this.inflight.set(t,{promise:l,abort:o})}cancelPrefetch(t){const n=this.inflight.get(t);if(n!=null&&n.abort)try{n.abort()}catch{}this.inflight.delete(t)}clear(){for(const[t,n]of this.inflight)if(n.abort)try{n.abort()}catch{}this.inflight.clear(),this.store.clear(),this.totalBytes=0}evictPrefix(t){const n=(()=>{const s=t?`/${t.replace(/^\/+/,"")}`:"/";return s==="/"?"/":s.replace(/\/+$/,"")})(),r=s=>{const i=s.startsWith("/")?s.replace(/\/+$/,""):`/${s.replace(/\/+$/,"")}`;return n==="/"?!0:i===n||i.startsWith(`${n}/`)};for(const[s,i]of Array.from(this.store.entries()))r(s)&&(this.totalBytes-=i.size,this.store.delete(s));for(const[s,i]of Array.from(this.inflight.entries()))if(r(s)){if(i.abort)try{i.abort()}catch{}this.inflight.delete(s)}this.totalBytes<0&&(this.totalBytes=0)}}const us=new ov(60*1024*1024),hc=new ov(20*1024*1024),Ga={};function zw(){const e=Ga==null?void 0:Ga.VITE_API_BASE,t=typeof window<"u",n=t?window.location.origin:"http://localhost",r=t?window.location.hostname:"localhost",s=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\]|.+\.localhost)$/i.test(r);if(!e)return"";let i;try{i=new URL(e,n)}catch{return""}const o=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\])$/i.test(i.hostname);return s?i.origin:o?"":i.origin}const Oe=zw();const Aw=40*1024*1024,Mh="lenslet.client_id",Rh="lenslet.client_id.session",lv="lenslet.last_event_id",$w=1e3,Uw=3e4,Bw=5;let os=null,Zo=null,Lh=0,Ms=null,Rs=0,ea=!0,_l=!1;function av(){return typeof window<"u"&&typeof EventSource<"u"}function Th(e,t){if(!e)return null;try{return e.getItem(t)}catch{return null}}function _h(e,t,n){if(e)try{e.setItem(t,n)}catch{}}function Ww(){if(typeof navigator>"u")return"server";const e=navigator.userAgent||"",t=navigator.language||"",n=navigator.platform||"",r=typeof Intl<"u"&&Intl.DateTimeFormat().resolvedOptions().timeZone||"",s=typeof screen<"u"?`${screen.width}x${screen.height}x${screen.colorDepth}`:"";return[e,t,n,r,s].join("|")}function Hw(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=t*16777619>>>0;return t.toString(16).padStart(8,"0")}function el(){if(os)return os;const e=typeof window<"u"?window.localStorage:null,t=typeof window<"u"?window.sessionStorage:null,n=Th(e,Mh)||Th(t,Rh);if(n)return os=n,n;const r=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`;if(e)return _h(e,Mh,r),os=r,r;if(t)return _h(t,Rh,r),os=r,r;const s=`fp_${Hw(Ww())}`;return os=s,s}function Ki(e="lenslet"){Lh+=1;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`nonce_${Math.random().toString(36).slice(2,10)}_${Date.now()}_${Lh}`;return`${e}:${el()}:${t}`}function Vw(){if(Zo!=null)return Zo;if(typeof window>"u")return null;try{const e=window.localStorage.getItem(lv);if(!e)return null;const t=Number(e);return!Number.isFinite(t)||t<=0?null:(Zo=t,t)}catch{return null}}function Qw(e){if(!(!Number.isFinite(e)||e<=0)&&(Zo=e,!(typeof window>"u")))try{window.localStorage.setItem(lv,String(e))}catch{}}function Kw(){if(typeof window>"u")return`${Oe}/events`;const e=new URL(`${Oe}/events`,window.location.origin),t=Vw();return t!=null&&Number.isFinite(t)&&e.searchParams.set("last_event_id",String(t)),e.toString()}function qw(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}let tn=null,uv="idle";const mc=new Set,pc=new Set,gc=new Set;function Ls(e){uv=e;for(const t of pc)t(e)}function Md(e){if(_l!==e){_l=e;for(const t of gc)t(e)}}function Rd(){Ms!=null&&(window.clearTimeout(Ms),Ms=null)}function Yw(){Rs=0,Rd()}function Gw(){if(!ea||Ms!=null)return;Rs+=1;const e=Math.min($w*Math.pow(2,Rs-1),Uw);Rs>=Bw?(Ls("offline"),Md(!0)):Ls("reconnecting"),Ms=window.setTimeout(()=>{Ms=null,cv()},e)}function cv(){if(!ea||!av()||(tn&&tn.readyState===EventSource.CLOSED&&(tn.close(),tn=null),tn))return;Rs>0?Ls("reconnecting"):Ls("connecting");const e=new EventSource(Kw());tn=e;const t=n=>r=>{const s=qw(r.data);if(!s)return;const i=r.lastEventId?Number(r.lastEventId):null,o=i!=null&&Number.isFinite(i)?i:null;o!=null&&Qw(o);for(const l of mc)l({type:n,id:o,data:s})};e.addEventListener("item-updated",t("item-updated")),e.addEventListener("metrics-updated",t("metrics-updated")),e.addEventListener("presence",t("presence")),e.onopen=()=>{Yw(),Md(!1),Ls("live")},e.onerror=()=>{tn===e&&(e.close(),tn=null,Gw())}}function Xw(){ea=!0,av()&&(Rd(),cv())}function Jw(){ea=!1,Rd(),Rs=0,tn&&(tn.close(),tn=null),Md(!1),Ls("offline")}function Zw(e){return mc.add(e),()=>{mc.delete(e)}}function e1(e){return pc.add(e),e(uv),()=>{pc.delete(e)}}function t1(e){return gc.add(e),e(_l),()=>{gc.delete(e)}}function n1(){return _l}const ge={getFolder:(e,t,n)=>{const r=new URLSearchParams({path:e});return t!=null&&r.set("page",String(t)),n&&r.set("recursive","1"),rt(`${Oe}/folders?${r}`).promise},search:(e,t)=>{const n=new URLSearchParams;return e&&n.set("q",e),t&&n.set("path",t),rt(`${Oe}/search?${n}`).promise},getEmbeddings:()=>rt(`${Oe}/embeddings`).promise,searchEmbeddings:e=>rt(`${Oe}/embeddings/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise,refreshFolder:e=>{const t=new URLSearchParams({path:e});return rt(`${Oe}/refresh?${t}`,{method:"POST"}).promise},getSidecar:e=>rt(`${Oe}/item?path=${encodeURIComponent(e)}`).promise,patchSidecar:(e,t,n)=>{const s={"Content-Type":"application/json","Idempotency-Key":(n==null?void 0:n.idempotencyKey)??Ki("patch"),"x-client-id":el(),"x-updated-by":"web"};return(n==null?void 0:n.ifMatch)!=null&&(s["If-Match"]=String(n.ifMatch)),rt(`${Oe}/item?path=${encodeURIComponent(e)}`,{method:"PATCH",headers:s,body:JSON.stringify(t)}).promise},getMetadata:e=>rt(`${Oe}/metadata?path=${encodeURIComponent(e)}`).promise,putSidecar:(e,t)=>rt(`${Oe}/item?path=${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-client-id":el(),"x-updated-by":"web"},body:JSON.stringify(t)}).promise,getHealth:()=>rt(`${Oe}/health`).promise,postPresence:(e,t)=>rt(`${Oe}/presence`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gallery_id:e,client_id:t??el()})}).promise,getThumb:e=>hc.getOrFetch(e,()=>Oo(`${Oe}/thumb?path=${encodeURIComponent(e)}`)),prefetchThumb:e=>{hc.prefetch(e,()=>Oo(`${Oe}/thumb?path=${encodeURIComponent(e)}`))},getFile:e=>us.getOrFetch(e,()=>Oo(`${Oe}/file?path=${encodeURIComponent(e)}`)),prefetchFile:async e=>{if(!(us.has(e)||us.isInflight(e)))try{const t=await Oo(`${Oe}/file?path=${encodeURIComponent(e)}`).promise;t.size<=Aw&&us.set(e,t)}catch{}},cancelPrefetch:e=>{us.cancelPrefetch(e)},uploadFile:async(e,t)=>{const n=new FormData;return n.append("dest",e),n.append("file",t),rt(`${Oe}/file`,{method:"POST",body:n,timeoutMs:6e4}).promise},moveFile:async(e,t)=>{const n=new FormData;return n.append("src",e),n.append("dest",t),rt(`${Oe}/move`,{method:"POST",body:n}).promise},deleteFiles:async e=>rt(`${Oe}/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:e})}).promise,exportIntent:async e=>{const t=new FormData;return t.append("path",e),rt(`${Oe}/export-intent`,{method:"POST",body:t}).promise},getViews:()=>rt(`${Oe}/views`).promise,saveViews:e=>rt(`${Oe}/views`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise};class r1{constructor(t=400){bn(this,"cache",new Map);bn(this,"maxSize");this.maxSize=t,typeof window<"u"&&window.addEventListener("beforeunload",()=>this.clear(),{once:!0})}get(t){const n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){for(this.cache.has(t)&&this.cache.delete(t);this.cache.size>=this.maxSize;){const r=this.cache.keys().next().value;if(r===void 0)break;const s=this.cache.get(r);if(this.cache.delete(r),s)try{URL.revokeObjectURL(s)}catch{}}this.cache.set(t,n)}clear(){for(const t of this.cache.values())try{URL.revokeObjectURL(t)}catch{}this.cache.clear()}}const Xa=new r1(400);function s1({path:e,name:t,onClick:n,selected:r,highlighted:s,displayW:i,displayH:o,ioRoot:l,isScrolling:u,priority:c}){const f=d.useRef(null),[h,g]=d.useState(()=>Xa.get(e)??null),[w,k]=d.useState(!1),[N,L]=d.useState(()=>!!h);return d.useEffect(()=>{const y=f.current;if(!y)return;const m=new IntersectionObserver(p=>{for(const v of p)v.target===y&&k(v.isIntersecting||v.intersectionRatio>0)},{root:l??null,rootMargin:"200px 0px",threshold:.01});return m.observe(y),()=>{m.unobserve(y),m.disconnect()}},[l]),d.useEffect(()=>{if(h||!(w&&!u||c))return;let y=!0;return ge.getThumb(e).then(m=>{if(!y)return;const p=URL.createObjectURL(m);Xa.set(e,p),g(p)}).catch(()=>{}),()=>{y=!1}},[e,h,w,u,c]),d.useEffect(()=>{var m;if(!h){L(!1);return}const y=(m=f.current)==null?void 0:m.querySelector("img");y&&y.complete&&y.naturalWidth>0?L(!0):L(!1)},[h]),d.useEffect(()=>{g(Xa.get(e)??null)},[e]),a.jsx("div",{ref:f,className:`absolute inset-0 relative bg-hover border border-border rounded-lg overflow-hidden select-none ${r?"outline-2 outline-accent":""} ${s?"ring-2 ring-accent/60 animate-pulse":""} hover:outline hover:outline-1 hover:outline-accent`,onClick:n,children:h?a.jsx("img",{className:`w-full h-full object-cover block pointer-events-none select-none opacity-0 transition-opacity duration-[160ms] ${N?"opacity-100":""}`,src:h,alt:t,loading:"lazy",decoding:"async",onLoad:()=>L(!0),width:i?Math.round(i):void 0,height:o?Math.round(o):void 0}):null})}function ls(e,t,n){let r=n.initialDeps??[],s,i=!0;function o(){var l,u,c;let f;n.key&&((l=n.debug)!=null&&l.call(n))&&(f=Date.now());const h=e();if(!(h.length!==r.length||h.some((k,N)=>r[N]!==k)))return s;r=h;let w;if(n.key&&((u=n.debug)!=null&&u.call(n))&&(w=Date.now()),s=t(...h),n.key&&((c=n.debug)!=null&&c.call(n))){const k=Math.round((Date.now()-f)*100)/100,N=Math.round((Date.now()-w)*100)/100,L=N/16,y=(m,p)=>{for(m=String(m);m.length<p;)m=" "+m;return m};console.info(`%c ${y(N,5)} /${y(k,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*L,120))}deg 100% 31%);`,n==null?void 0:n.key)}return n!=null&&n.onChange&&!(i&&n.skipInitialOnChange)&&n.onChange(s),i=!1,s}return o.updateDeps=l=>{r=l},o}function Ph(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const i1=(e,t)=>Math.abs(e-t)<1.01,o1=(e,t,n)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,s),n)}},Ih=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},l1=e=>e,a1=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},u1=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const s=o=>{const{width:l,height:u}=o;t({width:Math.round(l),height:Math.round(u)})};if(s(Ih(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const u=o[0];if(u!=null&&u.borderBoxSize){const c=u.borderBoxSize[0];if(c){s({width:c.inlineSize,height:c.blockSize});return}}s(Ih(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},Fh={passive:!0},Oh=typeof window>"u"?!0:"onscrollend"in window,c1=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&Oh?()=>{}:o1(r,()=>{t(s,!1)},e.options.isScrollingResetDelay),o=f=>()=>{const{horizontal:h,isRtl:g}=e.options;s=h?n.scrollLeft*(g&&-1||1):n.scrollTop,i(),t(s,f)},l=o(!0),u=o(!1);u(),n.addEventListener("scroll",l,Fh);const c=e.options.useScrollendEvent&&Oh;return c&&n.addEventListener("scrollend",u,Fh),()=>{n.removeEventListener("scroll",l),c&&n.removeEventListener("scrollend",u)}},d1=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},f1=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const o=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class h1{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:l1,rangeExtractor:a1,onChange:()=>{},measureElement:d1,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=ls(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=n[o];if(s.has(l.lane))continue;const u=i.get(l.lane);if(u==null||l.end>u.end?i.set(l.lane,l):l.end<u.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=ls(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,s,i,o,l)=>(this.prevLanes!==void 0&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=ls(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l},u)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const g of this.laneAssignments.keys())g>=n&&this.laneAssignments.delete(g);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(g=>{this.itemSizeCache.set(g.key,g.size)}));const c=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const f=this.measurementsCache.slice(0,c),h=new Array(l).fill(void 0);for(let g=0;g<c;g++){const w=f[g];w&&(h[w.lane]=g)}for(let g=c;g<n;g++){const w=i(g),k=this.laneAssignments.get(g);let N,L;if(k!==void 0&&this.options.lanes>1){N=k;const v=h[N],C=v!==void 0?f[v]:void 0;L=C?C.end+this.options.gap:r+s}else{const v=this.options.lanes===1?f[g-1]:this.getFurthestMeasurement(f,g);L=v?v.end+this.options.gap:r+s,N=v?v.lane:g%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(g,N)}const y=u.get(w),m=typeof y=="number"?y:this.options.estimateSize(g),p=L+m;f[g]={index:g,start:L,size:m,end:p,key:w,lane:N},h[N]=g}return this.measurementsCache=f,f},{key:!1,debug:()=>this.options.debug}),this.calculateRange=ls(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?m1({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=ls(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,o)=>i===null||o===null?[]:n({startIndex:i,endIndex:o,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=ls(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,o=n.length;i<o;i++){const l=n[i],u=r[l];s.push(u)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return Ph(r[dv(0,r.length-1,s=>Ph(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(s.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const o=10,l=c=>{if(!this.targetWindow)return;const f=this.getOffsetForIndex(n,c);if(!f){console.warn("Failed to get offset for index:",n);return}const[h,g]=f;this._scrollToOffset(h,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const w=this.getScrollOffset(),k=this.getOffsetForIndex(n,g);if(!k){console.warn("Failed to get offset for index:",n);return}i1(k[0],w)||u(g)})},u=c=>{this.targetWindow&&(i++,i<o?this.targetWindow.requestAnimationFrame(()=>l(c)):console.warn(`Failed to scroll to index ${n} after ${o} attempts.`))};l(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}s=Math.max(...i.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const dv=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function m1({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const s=e.length-1,i=u=>e[u].start;if(e.length<=r)return{startIndex:0,endIndex:s};let o=dv(0,s,i,n),l=o;if(r===1)for(;l<s&&e[l].end<n+t;)l++;else if(r>1){const u=Array(r).fill(0);for(;l<s&&u.some(f=>f<n+t);){const f=e[l];u[f.lane]=f.end,l++}const c=Array(r).fill(n+t);for(;o>=0&&c.some(f=>f>=n);){const f=e[o];c[f.lane]=f.start,o--}o=Math.max(0,o-o%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const Dh=typeof document<"u"?d.useLayoutEffect:d.useEffect;function p1(e){const t=d.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var o;i?Cd.flushSync(t):t(),(o=e.onChange)==null||o.call(e,s,i)}},[r]=d.useState(()=>new h1(n));return r.setOptions(n),Dh(()=>r._didMount(),[]),Dh(()=>r._willUpdate()),r}function g1(e){return p1({observeElementRect:u1,observeElementOffset:c1,scrollToFn:f1,...e})}function v1({containerW:e,gap:t,targetCell:n,aspect:r,captionH:s}){const i=Math.max(1,Math.floor((e+t)/(n+t))),o=(e-t*(i-1))/i,l=o*r.h/r.w,u=l+s+t;return{columns:i,cellW:o,mediaH:l,rowH:u}}const y1=1.333;function x1({items:e,containerWidth:t,targetHeight:n,gap:r,captionH:s}){if(t<=0)return[];const i=[];let o=[],l=0;const u=(c,f)=>({index:i.length,height:f+s+r,imageH:f,items:c.map(h=>({item:h.item,displayW:h.aspect*f,displayH:f,originalIndex:h.originalIndex}))});for(let c=0;c<e.length;c++){const f=e[c],h=f.w>0&&f.h>0?f.w/f.h:y1;o.push({item:f,aspect:h,originalIndex:c}),l+=h;const g=(o.length-1)*r;if(l*n+g>=t){const k=(t-g)/l;i.push(u(o,k)),o=[],l=0}}return o.length>0&&i.push(u(o,n)),i}function w1(e,t,n){return{mode:"adaptive",rows:x1({items:t,containerWidth:e,targetHeight:n.targetCell,gap:n.gap,captionH:n.captionH})}}function S1(e,t,n){const{columns:r,cellW:s,mediaH:i,rowH:o}=v1({containerW:e,gap:n.gap,targetCell:n.targetCell,aspect:n.aspect,captionH:n.captionH}),l=Math.ceil(t.length/Math.max(1,r));return{mode:"grid",columns:r,cellW:s,mediaH:i,rowH:o,rowCount:l}}function k1(e,t,n){const[r,s]=d.useState(0);d.useLayoutEffect(()=>{const u=e.current;if(!u)return;const c=()=>{const h=getComputedStyle(u),g=u.clientWidth-parseFloat(h.paddingLeft)-parseFloat(h.paddingRight);s(g)},f=new ResizeObserver(c);return f.observe(u),c(),()=>f.disconnect()},[]);const i=d.useMemo(()=>n.viewMode==="adaptive"?w1(r,t,n):S1(r,t,n),[r,t,n.viewMode,n.gap,n.targetCell,n.aspect.w,n.aspect.h,n.captionH]),o=g1({count:i.mode==="adaptive"?i.rows.length:i.rowCount,getScrollElement:()=>e.current,estimateSize:u=>i.mode==="adaptive"?i.rows[u].height:i.rowH,overscan:8}),l=o.getVirtualItems();return d.useEffect(()=>{o.measure()},[i,o]),{width:r,layout:i,rowVirtualizer:o,virtualRows:l}}function C1(e,t,n,r){if(!e.length)return null;const s=n?e.findIndex(l=>l.path===n):0,i=Math.max(1,t);let o=s;if(r.key==="ArrowRight"||r.key==="d")o=Math.min(e.length-1,s+1);else if(r.key==="ArrowLeft"||r.key==="a")o=Math.max(0,s-1);else if(r.key==="ArrowDown"||r.key==="s")o=Math.min(e.length-1,s+i);else if(r.key==="ArrowUp"||r.key==="w")o=Math.max(0,s-i);else return r.key==="Enter"&&n?"open":null;return o}const En=12,b1=44,E1={w:4,h:3},N1=350,j1=120;function M1({items:e,selected:t,restoreToSelectionToken:n,onSelectionChange:r,onOpenViewer:s,onContextMenuItem:i,highlight:o,recentlyUpdated:l,suppressSelectionHighlight:u=!1,viewMode:c="grid",targetCellSize:f=220,scrollRef:h,hideScrollbar:g=!1}){const[w,k]=d.useState(null),[N,L]=d.useState(null),[y,m]=d.useState(!1),[p,v]=d.useState(null),[C,R]=d.useState(null),M=d.useRef(null),b=d.useRef(null),T=d.useRef(null),E=h??T,P=d.useRef(null),Q=f,{width:O,layout:$,rowVirtualizer:ie,virtualRows:B}=k1(E,e,{gap:En,targetCell:Q,aspect:E1,captionH:b1,viewMode:c}),le=d.useMemo(()=>{const U=new Map;for(let se=0;se<e.length;se++)U.set(e[se].path,se);return U},[e]),I=d.useMemo(()=>{if($.mode!=="adaptive")return null;const U=new Map;return $.rows.forEach((se,oe)=>{let ye=0;se.items.forEach((ue,ve)=>{const Z=ye+ue.displayW/2;U.set(ue.item.path,{row:oe,center:Z,order:ve}),ye+=ue.displayW+En})}),U},[$]);d.useEffect(()=>{if(!t.length)return;const U=t[0];p!==U&&v(U)},[t,p]);const V=d.useMemo(()=>{if($.mode!=="adaptive")return null;let U=0;return $.rows.map(se=>{const oe=U;return U+=se.height,{start:oe,height:se.height}})},[$]),q=d.useRef(null),he=(U,se)=>{try{if(q.current!=null){try{cancelAnimationFrame(q.current)}catch{}q.current=null}const oe=U.scrollTop,ye=se-oe;if(Math.abs(ye)<1){U.scrollTop=se;return}const ue=140,ve=performance.now(),Z=ae=>1-Math.pow(1-ae,3),H=ae=>{const ke=Math.min(1,(ae-ve)/ue),be=Z(ke);U.scrollTop=oe+ye*be,ke<1?q.current=requestAnimationFrame(H):q.current=null};q.current=requestAnimationFrame(H)}catch{U.scrollTop=se}},[fe,Me]=d.useState(!1);d.useEffect(()=>{const U=E.current;if(!U)return;let se=0;const oe=()=>{Me(!0),window.clearTimeout(se),se=window.setTimeout(()=>Me(!1),j1)};return U.addEventListener("scroll",oe,{passive:!0}),()=>U.removeEventListener("scroll",oe)},[]);const W=()=>{b.current!=null&&(window.clearTimeout(b.current),b.current=null)},Y=()=>{if(W(),m(!1),k(null),M.current){try{URL.revokeObjectURL(M.current)}catch{}M.current=null}L(null)},te=U=>{fe||(W(),k(U),m(!1),b.current=window.setTimeout(async()=>{b.current=null;try{const se=await ge.getFile(U),oe=URL.createObjectURL(se);if(M.current)try{URL.revokeObjectURL(M.current)}catch{}M.current=oe,L(oe),m(!0)}catch{}},N1))},me=$.mode==="grid"?$.columns:Math.max(1,Math.floor(O/(Q+En))),Re=(U,se)=>{if($.mode!=="adaptive")return null;const oe=$.rows[U];if(!oe)return null;let ye=0,ue=null;for(const ve of oe.items){const Z=ye+ve.displayW/2,H=Math.abs(Z-se);(!ue||H<ue.dist)&&(ue={path:ve.item.path,dist:H}),ye+=ve.displayW+En}return ue?ue.path:null},Ve=(U,se)=>{var be,Ct,D,ne;if(!e.length)return null;const oe=U??e[0].path;if($.mode!=="adaptive"){const ce=C1(e,me,oe,se);return ce==="open"||ce==null?ce:((be=e[ce])==null?void 0:be.path)??null}const ye=I==null?void 0:I.get(oe);if(!ye)return oe;const ue=le.get(oe)??0,ve=se.key;if(ve==="Enter")return"open";if(ve==="ArrowRight"||ve==="d")return((Ct=e[Math.min(e.length-1,ue+1)])==null?void 0:Ct.path)??oe;if(ve==="ArrowLeft"||ve==="a")return((D=e[Math.max(0,ue-1)])==null?void 0:D.path)??oe;const Z=ve==="ArrowDown"||ve==="s"?1:ve==="ArrowUp"||ve==="w"?-1:0;if(Z===0)return null;const H=ye.row+Z;if(H<0||H>=(((ne=$.rows)==null?void 0:ne.length)??0))return oe;const ae=ye.center;return Re(H,ae)??oe},Be=U=>{var se;try{(se=document.getElementById(`cell-${encodeURIComponent(U)}`))==null||se.focus()}catch{}},lt=U=>{try{ge.prefetchFile(U),ge.prefetchThumb(U)}catch{}},Qe=(U,se)=>{v(U),R(U);const oe=!!se.shiftKey,ye=!!(se.ctrlKey||se.metaKey);if(oe){const ue=P.current??p??t[0]??U,ve=le.get(ue)??e.findIndex(H=>H.path===ue),Z=le.get(U)??e.findIndex(H=>H.path===U);if(ve!==-1&&Z!==-1){const H=Math.min(ve,Z),ae=Math.max(ve,Z),ke=e.slice(H,ae+1).map(be=>be.path);if(ye){const be=new Set(t);for(const Ct of ke)be.add(Ct);r(Array.from(be))}else r(ke)}else r([U])}else if(ye){const ue=new Set(t);ue.has(U)?ue.delete(U):ue.add(U),r(Array.from(ue)),P.current=U}else r([U]),P.current=U;fe||lt(U),Be(U)},Cn=(U,se)=>{var oe,ye;try{const ue=Ee.has(U)&&t.length>0?t:[U];(oe=se.dataTransfer)==null||oe.setData("application/x-lenslet-paths",JSON.stringify(ue)),se.dataTransfer&&(se.dataTransfer.effectAllowed="copyMove");try{document.body.classList.add("drag-active")}catch{}const Z=se.currentTarget.querySelector(".cell-content img"),H=document.createElement("div");H.className="drag-ghost";const ae=document.createElement("img");ae.draggable=!1,ae.alt="drag",Z&&Z.src&&(ae.src=Z.src),H.appendChild(ae),document.body.appendChild(H);const ke=H.getBoundingClientRect().width||150;(ye=se.dataTransfer)==null||ye.setDragImage(H,Math.round(ke/2),0);const be=()=>{try{H.remove()}catch{}try{document.body.classList.remove("drag-active")}catch{}window.removeEventListener("dragend",be),window.removeEventListener("pointerup",be),document.removeEventListener("visibilitychange",be)};window.addEventListener("dragend",be),window.addEventListener("pointerup",be),document.addEventListener("visibilitychange",be)}catch{}};d.useEffect(()=>{const U=E.current;if(!U)return;const se=oe=>{var be,Ct,D;const ye=Ve(C,oe);if(ye==null)return;if(oe.preventDefault(),ye==="open"){C&&s(C);return}const ue=e.find(ne=>ne.path===ye);if(!ue)return;R(ue.path),v(ue.path),r([ue.path]);try{P.current=ue.path}catch{}const ve=$.mode==="grid"?Math.floor((le.get(ue.path)??0)/Math.max(1,$.columns)):((be=I==null?void 0:I.get(ue.path))==null?void 0:be.row)??0,Z=U.scrollTop,H=Z+U.clientHeight,ae=$.mode==="adaptive"?((Ct=V==null?void 0:V[ve])==null?void 0:Ct.start)??0:ve*$.rowH,ke=$.mode==="adaptive"?ae+(((D=V==null?void 0:V[ve])==null?void 0:D.height)??0):ae+$.rowH;(ae<Z||ke>H)&&he(U,ae),Be(ue.path)};return U.addEventListener("keydown",se),()=>{U.removeEventListener("keydown",se)}},[e,C,me,s,$,I,V,le]),d.useLayoutEffect(()=>{var ve;const U=E.current;if(!U||!n||!t||t.length===0)return;const se=t[0],oe=le.get(se);if(oe==null||oe<0)return;let ye=0;if($.mode==="grid")ye=Math.floor(oe/Math.max(1,$.columns));else{let Z=0,H=$.rows.length-1;for(;Z<=H;){const ae=Z+H>>1,ke=$.rows[ae];if(oe>=ke.items[0].originalIndex&&oe<=ke.items[ke.items.length-1].originalIndex){ye=ae;break}oe<ke.items[0].originalIndex?H=ae-1:Z=ae+1}}const ue=$.mode==="adaptive"?((ve=V==null?void 0:V[ye])==null?void 0:ve.start)??0:ye*$.rowH;try{U.scrollTop=ue}catch{}},[n,$,V]);const Ee=d.useMemo(()=>new Set(t),[t]),kt=!!(w&&N&&y);d.useEffect(()=>{var U;(U=E.current)==null||U.focus()},[]),d.useEffect(()=>{var U;if(u){try{(U=E.current)==null||U.blur()}catch{}try{R(null)}catch{}}},[u]);const cn=C?`cell-${encodeURIComponent(C)}`:void 0;return a.jsx("div",{role:"grid","aria-label":"Gallery",className:`relative h-full overflow-auto p-3 outline-none ${g?"scrollbar-hidden pr-4":"scrollbar-thin"} ${kt?"cursor-zoom-in":""}`,ref:E,tabIndex:0,"aria-activedescendant":cn,onMouseDown:()=>{var U;return(U=E.current)==null?void 0:U.focus()},style:{"--gap":`${En}px`},children:a.jsxs("div",{className:"relative w-full",style:{height:ie.getTotalSize()},children:[B.map(U=>{var ve;let se=[],oe={},ye="";if($.mode==="adaptive"){const Z=$.rows[U.index];if(!Z)return null;se=Z.items,oe={height:Z.height,transform:`translate3d(0, ${U.start}px, 0)`,display:"flex",gap:En,paddingBottom:En},ye="absolute top-0 left-0 right-0 w-full will-change-transform"}else{const Z=U.index*$.columns;se=e.slice(Z,Z+$.columns).map(ae=>({item:ae,displayW:$.cellW,displayH:$.mediaH})),oe={transform:`translate3d(0, ${U.start}px, 0)`,gridTemplateColumns:`repeat(${$.columns}, minmax(0, 1fr))`,gap:En,paddingBottom:En},ye="absolute top-0 left-0 right-0 w-full grid will-change-transform"}const ue=U.index===((ve=B[0])==null?void 0:ve.index);try{if(!fe)for(const{item:Z}of se)try{ge.prefetchThumb(Z.path)}catch{}}catch{}return a.jsx("div",{className:ye,role:"row",style:oe,children:se.map(({item:Z,displayW:H,displayH:ae})=>{const ke=!u&&(p===Z.path||Ee.has(Z.path)),be=(l==null?void 0:l.has(Z.path))??!1,Ct=$.mode==="adaptive"?{width:H}:{},D=$.mode==="adaptive"?{height:ae}:{},ne=$.mode==="adaptive"?"relative rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group shrink-0":"relative aspect-[4/3] rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group";return a.jsxs("div",{id:`cell-${encodeURIComponent(Z.path)}`,className:`relative min-w-0 ${ke?"outline outline-2 outline-accent outline-offset-2 rounded-[10px]":""}`,role:"gridcell","aria-selected":ke,tabIndex:C===Z.path?0:-1,onFocus:()=>R(Z.path),draggable:!0,style:Ct,onDragStart:ce=>Cn(Z.path,ce),onDragEnd:()=>{},onContextMenu:ce=>{ce.preventDefault(),ce.stopPropagation(),i&&i(ce,Z.path)},children:[a.jsxs("div",{className:ne,style:D,onMouseEnter:()=>{try{ge.prefetchFile(Z.path)}catch{}},onDoubleClick:()=>s(Z.path),onMouseLeave:Y,children:[a.jsx("div",{className:"cell-content absolute inset-0",children:a.jsx(s1,{path:Z.path,name:Z.name,selected:ke,highlighted:be,displayW:H,displayH:ae,ioRoot:E.current,isScrolling:fe,priority:ue,onClick:ce=>Qe(Z.path,ce)})}),a.jsx("div",{className:"absolute right-0 bottom-0 w-7 h-7 cursor-zoom-in",onMouseEnter:()=>te(Z.path),onMouseLeave:Y,children:a.jsx("div",{className:"absolute right-0 bottom-0 h-[18px] w-[18px] flex items-center justify-center text-text select-none opacity-0 group-hover:opacity-50 hover:opacity-100 transition-all duration-[140ms]",style:{clipPath:'path("M0 9C0 4.02944 4.02944 0 9 0H18V18H0V9Z")',background:"linear-gradient(135deg, rgba(18,18,18,0.9) 0%, rgba(34,34,34,0.9) 60%, rgba(22,22,22,0.9) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",borderLeft:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 1px 2px rgba(0,0,0,0.45)",backdropFilter:"blur(1px)"},children:a.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#d9dce2]","aria-hidden":"true",style:{transform:"translate(0px,0px)"},children:[a.jsx("circle",{cx:"11",cy:"11",r:"5.4"}),a.jsx("path",{d:"M15.5 15.5 L19 19"})]})})})]}),a.jsxs("div",{className:"flex flex-col items-center text-center gap-0 mt-1 px-0.5 text-white/90",children:[a.jsx("div",{className:"text-sm leading-[18px] thumb-filename line-clamp-2 break-words hyphens-auto text-center",title:Z.name,children:(()=>{const ce=(o||"").trim();if(!ce)return Z.name;const Ne=Z.name,bt=Ne.toLowerCase().indexOf(ce.toLowerCase());if(bt===-1)return Z.name;const dn=Ne.slice(0,bt),oo=Ne.slice(bt,bt+ce.length),rs=Ne.slice(bt+ce.length);return a.jsxs(a.Fragment,{children:[dn,a.jsx("mark",{className:"bg-accent/20 text-inherit rounded px-0.5",children:oo}),rs]})})()}),a.jsxs("div",{className:"text-[11px] leading-[15px] opacity-70",children:[Z.w,"  ",Z.h]})]})]},Z.path)})},U.key)}),w&&N&&y&&Cd.createPortal(a.jsx("div",{className:"toolbar-offset fixed inset-0 z-[999] flex items-center justify-center pointer-events-none bg-black/20 opacity-100",children:a.jsx("img",{src:N,alt:"preview",className:"max-w-[80vw] max-h-[80vh] object-contain opacity-[0.98]"})}),document.body)]},`${c}-${me}`)})}const R1=48,L1=[.1,.24,.5,.74,.9];function T1({items:e,metricKey:t,scrollRef:n,sortDir:r}){const{orderedValues:s,numericValues:i}=d.useMemo(()=>{var E;const b=[],T=[];for(const P of e){const Q=(E=P.metrics)==null?void 0:E[t],O=Q==null||Number.isNaN(Q)?null:Q;b.push(O),O!=null&&T.push(O)}return{orderedValues:b,numericValues:T}},[e,t]),o=d.useMemo(()=>_1(i,R1),[i]),l=d.useMemo(()=>P1(i,L1),[i]),[u,c]=d.useState(0),[f,h]=d.useState(null),[g,w]=d.useState(!1),k=d.useRef(null);if(d.useEffect(()=>{const b=n.current;if(!b)return;const T=()=>{const E=Math.max(1,b.scrollHeight-b.clientHeight),P=Ir(E>0?b.scrollTop/E:0);c(P)};return T(),b.addEventListener("scroll",T,{passive:!0}),window.addEventListener("resize",T),()=>{b.removeEventListener("scroll",T),window.removeEventListener("resize",T)}},[n,e.length]),d.useEffect(()=>{h(null)},[t,e.length]),!o)return null;const N={min:o.min,max:o.max},L=f!=null?Ah(f):null,y=Ah(u),m=r==="desc",p=d.useMemo(()=>f==null?null:O1(s,f),[s,f]);function v(b){h(Ir(b))}function C(){h(null)}function R(b){const T=n.current;if(!T)return;const E=Math.max(0,T.scrollHeight-T.clientHeight);T.scrollTop=Ir(b)*E}function M(b){var E;const T=(E=k.current)==null?void 0:E.getBoundingClientRect();return T?Ir((b.clientY-T.top)/T.height):null}return a.jsxs("div",{className:"absolute right-0 top-3 bottom-3 w-[14px] flex items-stretch pointer-events-auto",children:[a.jsxs("svg",{ref:k,viewBox:"0 0 10 100",preserveAspectRatio:"none",className:"w-full h-full rounded bg-surface-inset border border-border/60 cursor-ns-resize",onPointerDown:b=>{var E;b.preventDefault();const T=M(b);T!=null&&(w(!0),v(T),R(T),(E=k.current)==null||E.setPointerCapture(b.pointerId))},onPointerMove:b=>{const T=M(b);if(T==null){g||C();return}v(T),g&&R(T)},onPointerUp:b=>{var T;w(!1),(T=k.current)==null||T.releasePointerCapture(b.pointerId)},onPointerLeave:()=>{g||C()},children:[I1(o.bins,"var(--border-strong)",{flip:m}),F1(l,N,{flip:m,color:"var(--muted)"}),zh(y,{color:"var(--highlight)",strokeWidth:.8}),L!=null&&zh(L,{color:"var(--text-secondary)",strokeWidth:.6,dashed:!0})]}),p!=null&&f!=null&&a.jsx("div",{className:"pointer-events-none absolute right-full mr-2 px-1.5 py-0.5 rounded border border-border bg-surface text-[10px] text-text shadow",style:{top:`calc(${(f*100).toFixed(2)}% - 8px)`},children:z1(p)})]})}function _1(e,t){if(!e.length)return null;const n=Math.min(...e);let r=Math.max(...e);n===r&&(r=n+1);const s=new Array(t).fill(0),i=t/(r-n);for(const o of e){const l=Math.max(0,Math.min(t-1,Math.floor((o-n)*i)));s[l]+=1}return{bins:s,min:n,max:r}}function P1(e,t){if(!e.length)return[];const n=[...e].sort((s,i)=>s-i),r=n.length-1;return t.map(s=>{const i=r*s,o=Math.floor(i),l=Math.ceil(i);if(o===l)return n[o];const u=i-o;return n[o]+(n[l]-n[o])*u})}function I1(e,t,n){const r=Math.max(1,...e),s=100/e.length,i=(n==null?void 0:n.flip)??!1;return e.map((o,l)=>{const u=Math.max(.8,o/r*10),c=(i?e.length-1-l:l)*s;return a.jsx("rect",{x:10-u,y:c,width:u,height:Math.max(.2,s-.2),fill:t,opacity:.9},`sb-${l}`)})}function F1(e,t,n){const r=(n==null?void 0:n.flip)??!1,s=n==null?void 0:n.color;return e.map((i,o)=>{const l=D1(i,t,r),u=o===2;return a.jsx("line",{x1:0,y1:l,x2:10,y2:l,stroke:s,strokeWidth:u?.8:.5,opacity:u?.9:.6,vectorEffect:"non-scaling-stroke"},`qt-${o}-${i}`)})}function zh(e,t){return a.jsx("line",{x1:0,y1:e,x2:10,y2:e,stroke:t.color,strokeWidth:t.strokeWidth??.6,strokeDasharray:t.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function O1(e,t){if(!e.length)return null;const n=Math.round(Ir(t)*(e.length-1)),r=e[n];if(r!=null)return r;for(let s=1;s<e.length;s++){const i=n-s;if(i>=0&&e[i]!=null)return e[i];const o=n+s;if(o<e.length&&e[o]!=null)return e[o]}return null}function D1(e,t,n){const r=t.max-t.min;if(r===0)return 0;const s=Ir((e-t.min)/r);return(n?1-s:s)*100}function Ah(e){return Ir(e)*100}function Ir(e){return e<0?0:e>1?1:e}function z1(e){if(e==null||Number.isNaN(e))return"-";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Fr(e,t){const[n,r]=d.useState(null),s=d.useRef(null);return d.useEffect(()=>{if(!e){if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}r(null);return}let i=!0;return e().then(o=>{if(!i)return;const l=URL.createObjectURL(o);if(s.current)try{URL.revokeObjectURL(s.current)}catch{}s.current=l,r(l)}).catch(()=>{}),()=>{i=!1}},t),d.useEffect(()=>()=>{if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}},[]),n}function A1(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[o,l]=d.useState(1),[u,c]=d.useState(!1),[f,h]=d.useState(!1),[g,w]=d.useState(!1),k=d.useRef(null),N=d.useRef(null),L=()=>{const p=k.current,v=N.current;if(!p||!v||!v.naturalWidth||!v.naturalHeight)return;const C=p.getBoundingClientRect(),R=C.width/v.naturalWidth,M=C.height/v.naturalHeight,b=Math.min(1,Math.min(R,M));l(b);const T=v.naturalWidth*b,E=v.naturalHeight*b;r((C.width-T)/2),i((C.height-E)/2)};return d.useEffect(()=>{const p=k.current;if(!p)return;const v=new ResizeObserver(()=>{try{requestAnimationFrame(()=>L())}catch{L()}});return v.observe(p),()=>v.disconnect()},[]),{scale:e,setScale:t,tx:n,setTx:r,ty:s,setTy:i,base:o,setBase:l,ready:u,setReady:c,dragging:f,setDragging:h,visible:g,setVisible:w,containerRef:k,imgRef:N,fitAndCenter:L,handleWheel:p=>{p.preventDefault();const v=p.deltaY>0?-1:1,C=1.2,R=.05,M=8,b=k.current;if(!b)return;const T=b.getBoundingClientRect(),E=p.clientX-T.left,P=p.clientY-T.top;t(Q=>{const O=Math.min(M,Math.max(R,Q*Math.pow(C,v))),$=O/Q;return r(ie=>E-$*(E-ie)),i(ie=>P-$*(P-ie)),Number(O.toFixed(4))})},handleMouseDown:p=>{const v=k.current,C=N.current;if(!v||!C||p.target!==C)return;const M=v.getBoundingClientRect();if(p.clientX<M.left||p.clientX>M.right||p.clientY<M.top||p.clientY>M.bottom)return;p.preventDefault(),p.stopPropagation(),h(!0);const b=p.clientX,T=p.clientY,E=n,P=s,Q=$=>{r(E+($.clientX-b)),i(P+($.clientY-T))},O=()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",O),h(!1)};window.addEventListener("mousemove",Q),window.addEventListener("mouseup",O)}}}function $1({path:e,onClose:t,onNavigate:n,onZoomChange:r,requestedZoomPercent:s,onZoomRequestConsumed:i}){const{scale:o,setScale:l,tx:u,setTx:c,ty:f,setTy:h,base:g,ready:w,setReady:k,dragging:N,visible:L,setVisible:y,containerRef:m,imgRef:p,fitAndCenter:v,handleWheel:C,handleMouseDown:R}=A1(),M=Fr(()=>ge.getFile(e),[e]),b=Fr(()=>ge.getThumb(e),[e]),T=d.useCallback(()=>{y(!1),window.setTimeout(t,110)},[t,y]);return d.useEffect(()=>{requestAnimationFrame(()=>{var E;y(!0),(E=m.current)==null||E.focus()})},[e]),d.useEffect(()=>{const E=P=>{P.key==="Escape"?T():(P.key==="ArrowRight"||P.key==="d")&&n?n(1):(P.key==="ArrowLeft"||P.key==="a")&&n&&n(-1)};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[t,n]),d.useEffect(()=>{k(!1)},[M]),d.useEffect(()=>{r&&r(g*o*100)},[g,o,r]),d.useEffect(()=>{if(s==null)return;const E=m.current;if(!E){i&&i();return}const P=Math.max(.05,Math.min(8,s/100/Math.max(1e-6,g))),Q=E.getBoundingClientRect(),O=Q.width/2,$=Q.height/2;l(ie=>{const B=P/ie;return c(le=>O-B*(O-le)),h(le=>$-B*($-le)),Number(P.toFixed(4))}),i&&i()},[s,g,i]),a.jsxs("div",{ref:m,role:"dialog","aria-modal":!0,"aria-label":"Image viewer",tabIndex:-1,className:`toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] flex items-start justify-start bg-panel z-viewer overflow-hidden transition-opacity duration-[110ms] ease-out cursor-grab focus:outline-none focus-visible:outline-none ${N?"cursor-grabbing select-none":""} ${L?"opacity-100":"opacity-0"}`,style:{outline:"none"},onClick:T,onWheel:C,onMouseDown:R,onKeyDown:E=>{E.key==="Tab"&&E.preventDefault()},children:[a.jsxs("button",{"aria-label":"Close",onClick:E=>{E.stopPropagation(),T()},className:"btn btn-sm absolute top-3 right-3 z-10",title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]}),b&&a.jsx("img",{src:b,alt:"thumb",className:"absolute top-0 left-0 max-w-none max-h-none object-contain pointer-events-none transition-opacity duration-[110ms] ease-out",draggable:!1,onDragStart:E=>E.preventDefault(),style:{transform:`translate(${u}px, ${f}px) scale(${g})`,transformOrigin:"0 0",opacity:w?0:.5,filter:"blur(0.25px)"}}),M&&a.jsx("img",{ref:p,src:M,alt:"viewer",className:"max-w-none max-h-none object-contain transition-opacity duration-[110ms] ease-out will-change-transform select-none",draggable:!1,onDragStart:E=>{E.preventDefault()},onLoad:E=>{v(),l(1);try{requestAnimationFrame(()=>k(!0))}catch{k(!0)}},onClick:E=>E.stopPropagation(),style:{transform:`translate(${u}px, ${f}px) scale(${g*o})`,transformOrigin:"0 0",opacity:w?.99:0,WebkitUserDrag:"none"}})]})}function Ld(e){return!e||!(e instanceof HTMLElement)?!1:e.closest('input, textarea, [contenteditable="true"]')!==null}const U1=1.2,B1=.05,W1=8;function H1(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[o,l]=d.useState(0),[u,c]=d.useState(0),[f,h]=d.useState(1),[g,w]=d.useState(1),[k,N]=d.useState(!1),L=d.useRef(null),y=d.useRef(null),m=d.useRef(null),p=d.useCallback(()=>{const M=L.current;if(!M)return;const b=M.getBoundingClientRect(),T=(E,P,Q,O)=>{if(!E||!E.naturalWidth||!E.naturalHeight)return;const $=b.width/E.naturalWidth,ie=b.height/E.naturalHeight,B=Math.min(1,Math.min($,ie)),le=E.naturalWidth*B,I=E.naturalHeight*B;P(B),Q((b.width-le)/2),O((b.height-I)/2)};T(y.current,h,r,i),T(m.current,w,l,c)},[]);d.useEffect(()=>{const M=L.current;if(!M)return;const b=new ResizeObserver(()=>{try{requestAnimationFrame(()=>p())}catch{p()}});return b.observe(M),()=>b.disconnect()},[p]);const v=d.useCallback(()=>{t(1),p()},[p]),C=d.useCallback(M=>{M.preventDefault();const b=M.deltaY>0?-1:1,T=L.current;if(!T)return;const E=T.getBoundingClientRect(),P=M.clientX-E.left,Q=M.clientY-E.top;t(O=>{const $=Math.min(W1,Math.max(B1,O*Math.pow(U1,b))),ie=$/O;return r(B=>P-ie*(P-B)),i(B=>Q-ie*(Q-B)),l(B=>P-ie*(P-B)),c(B=>Q-ie*(Q-B)),Number($.toFixed(4))})},[]),R=d.useCallback(M=>{if(M.button!==0||!L.current)return;M.preventDefault(),N(!0);const T=M.clientX,E=M.clientY,P=n,Q=s,O=o,$=u,ie=le=>{const I=le.clientX-T,V=le.clientY-E;r(P+I),i(Q+V),l(O+I),c($+V)},B=()=>{window.removeEventListener("pointermove",ie),window.removeEventListener("pointerup",B),N(!1)};window.addEventListener("pointermove",ie),window.addEventListener("pointerup",B)},[n,s,o,u]);return{scale:e,baseA:f,baseB:g,txA:n,tyA:s,txB:o,tyB:u,dragging:k,containerRef:L,imgARef:y,imgBRef:m,fitAndCenter:p,resetView:v,handleWheel:C,handlePointerDown:R}}function V1({aItem:e,bItem:t,index:n,total:r,canPrev:s,canNext:i,onNavigate:o,onClose:l}){const u=d.useRef(null),[c,f]=d.useState(50),[h,g]=d.useState(!1),[w,k]=d.useState(!1),{scale:N,baseA:L,baseB:y,txA:m,tyA:p,txB:v,tyB:C,dragging:R,containerRef:M,imgARef:b,imgBRef:T,fitAndCenter:E,resetView:P,handleWheel:Q,handlePointerDown:O}=H1(),$=(e==null?void 0:e.path)??null,ie=(t==null?void 0:t.path)??null,B=(e==null?void 0:e.name)??$??"Select an image",le=(t==null?void 0:t.name)??ie??"Select another image";d.useEffect(()=>{requestAnimationFrame(()=>{var Y;return(Y=u.current)==null?void 0:Y.focus()})},[$,ie]),d.useEffect(()=>{P(),g(!1),k(!1)},[$,ie,P]),d.useEffect(()=>{const Y=te=>{if(!Ld(te.target)){if(te.key==="Escape"){te.preventDefault(),l();return}if((te.key==="ArrowRight"||te.key==="d")&&i){te.preventDefault(),o(1);return}(te.key==="ArrowLeft"||te.key==="a")&&s&&(te.preventDefault(),o(-1))}};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[l,o,s,i]);const I=Fr($?()=>ge.getFile($):null,[$]),V=Fr(ie?()=>ge.getFile(ie):null,[ie]),q=Fr($?()=>ge.getThumb($):null,[$]),he=Fr(ie?()=>ge.getThumb(ie):null,[ie]),fe=d.useCallback(Y=>Math.min(95,Math.max(5,Y)),[]),Me=d.useCallback(Y=>{const te=Y.target;te!=null&&te.closest(".compare-label")||te!=null&&te.closest(".compare-divider-hit")||O(Y)},[O]),W=d.useCallback(Y=>{const te=M.current;if(!te)return;Y.preventDefault(),Y.stopPropagation();const me=te.getBoundingClientRect(),Re=Y.currentTarget;Re.setPointerCapture(Y.pointerId);const Ve=lt=>{const Qe=(lt.clientX-me.left)/me.width*100;f(fe(Qe))},Be=lt=>{Re.releasePointerCapture(lt.pointerId),window.removeEventListener("pointermove",Ve),window.removeEventListener("pointerup",Be)};window.addEventListener("pointermove",Ve),window.addEventListener("pointerup",Be)},[fe]);return a.jsxs("div",{ref:u,role:"dialog","aria-modal":!0,"aria-label":"Compare images",tabIndex:-1,className:"toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] bg-panel z-viewer flex flex-col overflow-hidden focus:outline-none",onKeyDown:Y=>{Y.key==="Tab"&&Y.preventDefault()},children:[a.jsxs("div",{className:"compare-header flex items-center gap-3 px-3 py-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Compare"}),a.jsx("div",{className:"text-xs text-muted",children:r>=2?`${n+1}-${Math.min(n+2,r)} of ${r}`:"Select 2 images"}),a.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(-1),disabled:!s,title:"Previous (Left Arrow or A)",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Prev"]}),a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(1),disabled:!i,title:"Next (Right Arrow or D)",children:["Next",a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"btn btn-sm",onClick:l,title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]})]})]}),a.jsx("div",{className:"flex-1 min-h-0 p-3 bg-panel",children:a.jsx("div",{ref:M,className:`compare-stage ${R?"is-dragging":""}`,onWheel:Q,onPointerDown:Me,children:!e||!t?a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-sm text-muted",children:"Select 2 images to compare."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"compare-label left-3",children:[a.jsx("span",{className:"compare-label-tag",children:"A"}),a.jsx("span",{className:"truncate",title:e.path,children:B})]}),a.jsxs("div",{className:"compare-label right-3",children:[a.jsx("span",{className:"compare-label-tag",children:"B"}),a.jsx("span",{className:"truncate",title:t.path,children:le})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 ${100-c}% 0 0)`},children:[q&&a.jsx("img",{src:q,alt:"thumb A",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:Y=>Y.preventDefault(),style:{transform:`translate(${m}px, ${p}px) scale(${L})`,transformOrigin:"0 0",opacity:h?0:.5}}),I&&a.jsx("img",{ref:b,src:I,alt:"compare A",className:"compare-image",draggable:!1,onDragStart:Y=>Y.preventDefault(),onLoad:()=>{E();try{requestAnimationFrame(()=>g(!0))}catch{g(!0)}},style:{transform:`translate(${m}px, ${p}px) scale(${L*N})`,transformOrigin:"0 0",opacity:h?.99:0}})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 0 0 ${c}%)`},children:[he&&a.jsx("img",{src:he,alt:"thumb B",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:Y=>Y.preventDefault(),style:{transform:`translate(${v}px, ${C}px) scale(${y})`,transformOrigin:"0 0",opacity:w?0:.5}}),V&&a.jsx("img",{ref:T,src:V,alt:"compare B",className:"compare-image",draggable:!1,onDragStart:Y=>Y.preventDefault(),onLoad:()=>{E();try{requestAnimationFrame(()=>k(!0))}catch{k(!0)}},style:{transform:`translate(${v}px, ${C}px) scale(${y*N})`,transformOrigin:"0 0",opacity:w?.99:0}})]}),a.jsxs("div",{className:"compare-divider-hit",style:{left:`${c}%`},onPointerDown:W,children:[a.jsx("div",{className:"compare-divider-line"}),a.jsx("div",{className:"compare-divider-handle"})]})]})})})]})}function ta(){const[e,t]=d.useState(n1());return d.useEffect(()=>t1(t),[]),e}const qi=e=>["item",e],Q1={v:1,tags:[],notes:"",version:1,updated_at:"",updated_by:"web"},Zt=new Map,tl=new Map,vc=new Map,Td=new Map;let $h=0;const kn=new Map,yi=new Map,K1=12e3,yc=new Set,xc=new Set;let _d={state:"idle"},Yi=null,wc=0;function Do(e){_d=e;for(const t of yc)t(e)}function On(){const e=kn.size>0,t=Zt.size+tl.size+wc;if(e){Do({state:"error",message:"Conflict detected"});return}if(Yi){Do({state:"error",message:Yi});return}if(t>0){Do({state:"syncing"});return}Do({state:"idle"})}function Pd(){let e=null;for(const t of vc.values())e=e==null?t:Math.min(e,t);for(const t of Td.values())e=e==null?t:Math.min(e,t);return e}function Pl(){const e=Pd();for(const t of xc)t(e)}function Il(e){Yi=e,On()}function fv(){Yi&&(Yi=null,On())}function Uh(e){wc=Math.max(0,wc+e),On()}function q1(){$h+=1;const e=$h;return Td.set(e,Date.now()),Pl(),e}function Y1(e){e!=null&&Td.delete(e)&&Pl()}function na(e){const t=yi.get(e);if(!t||!t.size)return;const n=kn.get(e)??null;for(const r of t)r(n)}function Bh(e){return kn.get(e)??null}function ra(e){kn.delete(e)&&(na(e),On())}function G1(e,t){kn.set(e,t),na(e),On()}function X1(e,t){const n=yi.get(e)??new Set;return n.add(t),yi.set(e,n),t(kn.get(e)??null),()=>{const r=yi.get(e);r&&(r.delete(t),r.size||yi.delete(e))}}function J1(e){const[t,n]=d.useState(()=>e?Bh(e):null);return d.useEffect(()=>{if(!e){n(null);return}return n(Bh(e)),X1(e,n)},[e]),t}function Z1(e){return yc.add(e),e(_d),()=>{yc.delete(e)}}function eS(){const[e,t]=d.useState(_d);return d.useEffect(()=>Z1(t),[]),e}function tS(e){return xc.add(e),e(Pd()),()=>{xc.delete(e)}}function nS(){const[e,t]=d.useState(()=>Pd()),[n,r]=d.useState(()=>e==null?null:Date.now()-e);return d.useEffect(()=>tS(t),[]),d.useEffect(()=>{if(e==null){r(null);return}r(Date.now()-e);const s=window.setInterval(()=>{r(Date.now()-e)},1e3);return()=>window.clearInterval(s)},[e]),n}function Sc(e){const t={};return Object.prototype.hasOwnProperty.call(e,"star")&&(t.set_star=e.star??null),Object.prototype.hasOwnProperty.call(e,"notes")&&(t.set_notes=e.notes??""),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.set_tags=Array.isArray(e.tags)?e.tags:[]),t}function kc(e){var t,n;return e.set_star!==void 0||e.set_notes!==void 0||e.set_tags!==void 0||(((t=e.add_tags)==null?void 0:t.length)??0)>0||(((n=e.remove_tags)==null?void 0:n.length)??0)>0}function fi(e){const t=[],n=new Set;for(const r of e??[]){if(typeof r!="string")continue;const s=r.trim();!s||n.has(s)||(n.add(s),t.push(s))}return t}function rS(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}function sS(e,t){if(e.set_star!==void 0&&(t.star??null)!==e.set_star||e.set_notes!==void 0&&(t.notes??"")!==(e.set_notes??""))return!1;if(e.set_tags!==void 0){const r=fi(e.set_tags),s=fi(t.tags);return rS(r,s)}const n=fi(t.tags);for(const r of fi(e.add_tags))if(!n.includes(r))return!1;for(const r of fi(e.remove_tags))if(n.includes(r))return!1;return!0}function hv(e,t,n){if(n instanceof Sn&&n.status===409){const r=n.body;if(r!=null&&r.current)return G1(e,{path:e,current:r.current,pending:t,receivedAt:new Date().toISOString()}),!0}return!1}function iS(e,t){const n=kn.get(e);if(n){if(sS(n.pending,t)){ra(e);return}kn.set(e,{...n,current:t}),na(e),On()}}function oS(e){const t=ta();return Zl({queryKey:qi(e),queryFn:()=>ge.getSidecar(e),enabled:!!e,staleTime:3e4,gcTime:5*6e4,retry:2,refetchInterval:t?K1:!1,refetchIntervalInBackground:t})}function lS(e){const t=br();return Tw({mutationFn:async({patch:n,baseVersion:r,idempotencyKey:s})=>{const i=Sc(n);if(!kc(i))return t.getQueryData(qi(e))??Q1;const o={...i,base_version:r};try{return await ge.patchSidecar(e,o,{idempotencyKey:s??Ki("patch"),ifMatch:r})}catch(l){throw hv(e,i,l),l}},retry:(n,r)=>r instanceof Sn&&r.status===409?!1:n<2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),4e3),onMutate:()=>(fv(),Uh(1),{inflightId:q1()}),onSuccess:n=>{ra(e),t.setQueryData(qi(e),n)},onError:n=>{n instanceof Sn&&n.status===409||(n instanceof Sn?Il(n.message):Il("Failed to save"))},onSettled:(n,r,s,i)=>{Uh(-1),Y1(i==null?void 0:i.inflightId)}})}const aS=6;async function Wh(e,t){if(!e.length)return;let n=0;const r=[],s=async()=>{for(;n<e.length;){const o=n++,l=e[o];try{await mv(l,t)}catch(u){r.push({path:l,error:u}),console.error(`[bulkUpdateSidecars] Failed for ${l}:`,u)}}},i=Array.from({length:Math.min(aS,e.length)},()=>s());if(await Promise.all(i),r.length===e.length)throw new Error(`All ${e.length} sidecar updates failed`)}async function mv(e,t){const n=Zt.get(e)||{};Zt.set(e,{...n,...t}),fv(),On();const r=tl.get(e);if(r)return r;vc.set(e,Date.now()),Pl();const s=(async()=>{try{for(;Zt.has(e);){const i=Zt.get(e);if(!i)break;const o=Sc(i);if(!kc(o)){Zt.get(e)===i&&Zt.delete(e);continue}let l=1;try{l=(await ge.getSidecar(e)).version??1}catch{l=1}const u={...o,base_version:l};try{await ge.patchSidecar(e,u,{idempotencyKey:Ki("patch"),ifMatch:l}),ra(e),Zt.get(e)===i&&Zt.delete(e)}catch(c){if(hv(e,o,c)){const h=Zt.get(e);if(h&&h!==i){const g=Sc(h);if(kc(g)){const w=kn.get(e);w&&(kn.set(e,{...w,pending:g}),na(e))}}Zt.delete(e)}else c instanceof Sn?Il(c.message):Il("Failed to save");throw c}}}finally{tl.delete(e),vc.delete(e),Pl(),On()}})();return tl.set(e,s),On(),s}function Ja(e){const t=["B","KB","MB","GB","TB"];let n=0,r=e;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${r.toFixed(1)} ${t[n]}`}function Za(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function uS(e,t=28){if(e.length<=t)return e;const n=Math.max(4,Math.floor((t-1)/2));return`${e.slice(0,n)}${e.slice(-n)}`}const cS=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});function dS(e){const t=e.trim();return!t||/[zZ]|[+-]\d{2}:?\d{2}$/.test(t)?t:`${t.includes("T")?t:t.replace(" ","T")}Z`}function Hh(e){if(!e)return null;const t=Date.parse(dS(e));return Number.isFinite(t)?t:null}function fS(e,t=Date.now()){const n=Math.max(0,t-e),r=Math.max(1,Math.floor(n/1e3));if(r<60)return`${r} second${r===1?"":"s"} ago`;const s=Math.floor(r/60);if(s<60)return`${s} minute${s===1?"":"s"} ago`;const i=Math.floor(s/60);return`${i} hour${i===1?"":"s"} ago`}function hS(e){return cS.format(new Date(e))}function nl(e){if(Array.isArray(e))return e.map(nl);if(e&&typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,nl(n)]));if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")||t.startsWith('"')&&t.endsWith('"'))try{const r=JSON.parse(t);return nl(r)}catch{return e}}return e}function eu(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function mS(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Vh(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}function pS(e){const t=/(\"(\\u[a-fA-F0-9]{4}|\\[^u]|[^\\"])*\"(?:\s*:)?|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\btrue\b|\bfalse\b|\bnull\b)/g;let n="",r=0;for(const s of e.matchAll(t)){const i=s.index??0,o=s[0];n+=eu(e.slice(r,i));let l="var(--json-fallback)";o.startsWith('"')&&o.trimEnd().endsWith(":")?l="var(--json-key)":o.startsWith('"')?l="var(--json-string)":/true|false|null/.test(o)?l="var(--json-literal)":l="var(--json-number)",n+=`<span style="color:${l}">${eu(o)}</span>`,r=i+o.length}return n+=eu(e.slice(r)),n}const gS=["overview","basics","metadata","notes"],Qh="lenslet.inspector.sections",Kh="lenslet.inspector.metricsExpanded",tu=12,vS={overview:!0,metadata:!0,basics:!0,notes:!0};function zo({title:e,open:t,onToggle:n,actions:r,children:s,contentClassName:i}){const[o,l]=d.useState(t),[u,c]=d.useState(t?"open":"closed");return d.useEffect(()=>{if(t){l(!0);const h=window.requestAnimationFrame(()=>c("open"));return()=>window.cancelAnimationFrame(h)}c("closing");const f=window.setTimeout(()=>{l(!1),c("closed")},140);return()=>window.clearTimeout(f)},[t]),a.jsxs("div",{className:"border-b border-border/60",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[a.jsxs("button",{type:"button",onClick:n,"aria-expanded":t,className:"flex items-center gap-2 inspector-section-title hover:text-text transition-colors",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform ${t?"rotate-90":""}`,"aria-hidden":"true",children:a.jsx("path",{d:"m9 18 6-6-6-6"})}),a.jsx("span",{children:e})]}),r]}),o&&a.jsx("div",{className:"inspector-section-body","data-state":u,"aria-hidden":!t,children:a.jsx("div",{className:i??"px-3 pb-3",children:s})})]})}function yS({path:e,selectedPaths:t=[],items:n=[],onResize:r,onStarChanged:s,sortSpec:i,onFindSimilar:o,embeddingsAvailable:l=!1,embeddingsLoading:u=!1}){const c=!!e,{data:f,isLoading:h}=oS(e??""),g=lS(e??""),w=br(),[k,N]=d.useState(vS),L=d.useCallback(D=>{N(ne=>({...ne,[D]:!ne[D]}))},[]),[y,m]=d.useState(!1),p=t.length>1,v=!!o&&l&&!p,C=o?l?p?"Select a single image to search.":null:u?"Loading embeddings...":"No embeddings detected.":null,[R,M]=d.useState(""),[b,T]=d.useState(""),[E,P]=d.useState(""),[Q,O]=d.useState(null),[$,ie]=d.useState("idle"),[B,le]=d.useState(!1),[I,V]=d.useState(null),[q,he]=d.useState({}),Me=d.useMemo(()=>{const D=n.find(ne=>ne.path===e);return D&&D.star!==void 0?D.star:null},[n,e])??(f==null?void 0:f.star)??null,W=J1(p?null:e),Y={tags:!!(W!=null&&W.pending.set_tags),notes:(W==null?void 0:W.pending.set_notes)!==void 0,star:(W==null?void 0:W.pending.set_star)!==void 0},te=d.useMemo(()=>{const D=new Set(t);return n.filter(ne=>D.has(ne.path))},[n,t]),me=d.useMemo(()=>te.reduce((D,ne)=>D+(ne.size||0),0),[te]);d.useEffect(()=>{f&&(M((f.tags||[]).join(", ")),T(f.notes||"")),P(""),O(null),ie("idle"),le(!1)},[f==null?void 0:f.updated_at,e]);const Re=d.useCallback(D=>{if(p&&t.length){Wh(t,D);return}if(!e)return;const ne=(f==null?void 0:f.version)??1;g.mutate({patch:D,baseVersion:ne,idempotencyKey:Ki("patch")})},[p,t,e,f==null?void 0:f.version,g]),Ve=d.useCallback(()=>{if(!W||!e)return;const D={};W.pending.set_tags!==void 0&&(D.tags=Vh(R)),W.pending.set_notes!==void 0&&(D.notes=b),W.pending.set_star!==void 0&&(D.star=Me??null);const ne=W.current.version??1;g.mutate({patch:D,baseVersion:ne,idempotencyKey:Ki("patch")})},[W,e,R,b,Me,g]),Be=d.useCallback(()=>{if(!W||!e)return;const D=W.current;M((D.tags||[]).join(", ")),T(D.notes||""),w.setQueryData(qi(e),D),ra(e),s==null||s([e],D.star??null)},[W,e,w,s]);d.useEffect(()=>{if(!e)return;const D=ne=>{if(Ld(ne.target))return;const ce=ne.key;if(!/^[0-5]$/.test(ce))return;ne.preventDefault();const Ne=ce==="0"?null:Number(ce);if(p&&t.length){Re({star:Ne}),s==null||s(t,Ne);return}Re({star:Ne}),s==null||s([e],Ne)};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[e,p,t,Re,s]);const lt=Fr(e?()=>ge.getThumb(e):null,[e]),Qe=e?e.split("/").pop()||e:"",Cn=d.useMemo(()=>{var ne;if(Qe.includes("."))return Qe.slice(Qe.lastIndexOf(".")+1).toUpperCase();const D=n.find(ce=>ce.path===e);return(ne=D==null?void 0:D.type)!=null&&ne.includes("/")?D.type.split("/")[1].toUpperCase():""},[Qe,n,e]),Ee=d.useMemo(()=>n.find(D=>D.path===e),[n,e]),kt=d.useMemo(()=>e?(Ee==null?void 0:Ee.source)??e:"",[Ee,e]),cn=d.useCallback(async()=>{if(e){ie("loading"),O(null);try{const D=await ge.getMetadata(e),ne=nl(D.meta),ce=JSON.stringify(ne,null,1);P(ce),ie("loaded")}catch(D){const ne=D instanceof Error?D.message:"Failed to load metadata";P(ne),O(ne),ie("error")}}},[e]),U=d.useCallback(()=>{var D;E&&((D=navigator.clipboard)==null||D.writeText(E).then(()=>{le(!0),setTimeout(()=>le(!1),1200)}).catch(ne=>{const ce=ne instanceof Error?ne.message:"Copy failed";O(ce)}))},[E]),se=d.useMemo(()=>E?pS(E):"",[E]),oe=$==="loading"?"Loading metadata":E||"PNG metadata not loaded yet.",ye=$==="loading",ue=$==="loaded"&&!!E,ve=ue?"h-48":"h-24",Z=ye?"Loading":ue?B?"Copied":"Copy":"Load meta",H=ue?U:cn,ae=p?null:a.jsx("div",{className:"flex items-center gap-2 text-xs",children:a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[78px]",onClick:H,disabled:!e||ye,children:Z})});d.useEffect(()=>{try{const D=localStorage.getItem(Qh);if(!D)return;const ne=JSON.parse(D);if(!ne||typeof ne!="object")return;const ce={};for(const Ne of gS)typeof ne[Ne]=="boolean"&&(ce[Ne]=ne[Ne]);Object.keys(ce).length>0&&N(Ne=>({...Ne,...ce}))}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(Qh,JSON.stringify(k))}catch{}},[k]),d.useEffect(()=>{try{const D=localStorage.getItem(Kh);D==="1"||D==="true"?m(!0):(D==="0"||D==="false")&&m(!1)}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(Kh,y?"1":"0")}catch{}},[y]);const ke=d.useCallback((D,ne)=>{var ce;ne&&((ce=navigator.clipboard)==null||ce.writeText(ne).then(()=>{V(D),setTimeout(()=>V(Ne=>Ne===D?null:Ne),1e3)}).catch(()=>{}))},[]),be=d.useCallback((D,ne)=>{if(ne&&!q[D]){const ce=ne.offsetHeight;ce&&he(Ne=>Ne[D]?Ne:{...Ne,[D]:ce})}},[q]),Ct="toolbar-offset absolute bottom-0 left-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20";return c?a.jsxs("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:[!p&&a.jsx("div",{className:"p-3 border-b border-border flex justify-center",children:a.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border w-[220px] h-[160px] bg-panel select-none",children:[lt&&a.jsx("img",{src:lt,alt:"thumb",className:"block w-full h-full object-contain"}),!!Cn&&a.jsx("div",{className:"absolute top-1.5 left-1.5 bg-surface border border-border text-text text-xs px-1.5 py-0.5 rounded-md select-none",children:Cn})]})}),a.jsxs(zo,{title:p?"Selection":"Item",open:k.overview,onToggle:()=>L("overview"),contentClassName:"px-3 pb-3 space-y-2",actions:o&&a.jsx("button",{type:"button",className:"btn btn-sm",onClick:o,disabled:!v,title:C??"Find similar",children:"Find similar"}),children:[p?a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Selected"}),a.jsxs("div",{className:"inspector-field-value",children:[t.length," files"]})]}),a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Total size"}),a.jsx("div",{className:"inspector-field-value",children:Ja(me)})]})]}):a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Filename"}),a.jsx("div",{className:"inspector-field-value break-all",title:Qe,children:Qe})]}),C&&a.jsx("div",{className:"text-[11px] text-muted",children:C})]}),a.jsxs(zo,{title:"Basics",open:k.basics,onToggle:()=>L("basics"),children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",role:"radiogroup","aria-label":"Star rating",children:[a.jsx("span",{className:"ui-kv-label w-16 shrink-0",children:p?"Rating (all)":"Rating"}),a.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(D=>{const ne=(Me??0)>=D;return a.jsx("button",{className:`w-6 h-6 flex items-center justify-center rounded-lg border border-border/60 bg-transparent text-[13px] ${ne?"text-star-active":"text-star-inactive"} hover:border-border hover:text-star-hover transition-colors`,onClick:()=>{const ce=Me===D&&!p?null:D;p&&t.length?(s==null||s(t,ce),Wh(t,{star:ce})):e&&(s==null||s([e],ce),mv(e,{star:ce}))},title:`${D} star${D>1?"s":""} (key ${D})`,"aria-label":`${D} star${D>1?"s":""}`,"aria-pressed":Me===D,children:ne?"":""},D)})})]}),!p&&W&&Y.star&&a.jsxs("div",{className:"ui-banner ui-banner-danger mt-2 text-[11px] flex items-center justify-between gap-2",children:[a.jsx("span",{children:"Rating conflict."}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:Ve,children:"Apply again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:Be,children:"Keep theirs"})]})]}),!p&&Ee&&a.jsxs("div",{className:"text-[12px] space-y-1.5 leading-relaxed",children:[a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ke("dimensions",`${Ee.w}${Ee.h}`),children:"Dimensions"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:D=>be("dimensions",D),style:q.dimensions?{minHeight:q.dimensions}:void 0,children:I==="dimensions"?"Copied":`${Ee.w}${Ee.h}`})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ke("size",Ja(Ee.size)),children:"Size"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:D=>be("size",D),style:q.size?{minHeight:q.size}:void 0,children:I==="size"?"Copied":Ja(Ee.size)})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ke("type",Ee.type),children:"Type"}),a.jsx("span",{className:"ui-kv-value break-all text-right inline-block min-w-[80px]",ref:D=>be("type",D),style:q.type?{minHeight:q.type}:void 0,children:I==="type"?"Copied":Ee.type})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>kt&&ke("source",kt),children:"Source"}),a.jsx("span",{className:"ui-kv-value inspector-value-clamp break-words text-right max-w-[70%] inline-block min-w-[80px]",ref:D=>be("source",D),style:q.source?{minHeight:q.source}:void 0,title:kt,children:I==="source"?"Copied":kt})]}),(()=>{const D=Ee.metrics||null;if(!D)return null;const ne=Object.entries(D).filter(([,nt])=>nt!=null);if(!ne.length)return null;const ce=(i==null?void 0:i.kind)==="metric"?i.key:null,Ne=[...ne].sort(([nt],[Er])=>nt.localeCompare(Er));let bt=Ne;if(ce){const nt=Ne.findIndex(([Er])=>Er===ce);nt>0&&(bt=[Ne[nt],...Ne.slice(0,nt),...Ne.slice(nt+1)])}const dn=bt.length>tu,rs=y||!dn?bt:bt.slice(0,tu),sa=bt.length-tu;return a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"ui-subsection-title mb-1",children:"Metrics"}),a.jsxs("div",{className:"space-y-1",children:[rs.map(([nt,Er])=>{const lo=ce===nt;return a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:`w-24 shrink-0 ${lo?"text-accent font-medium":"ui-kv-label"}`,children:nt}),a.jsx("span",{className:`ui-kv-value text-right ${lo?"text-accent font-medium":""}`,children:mS(Er)})]},nt)}),dn&&a.jsx("button",{type:"button",className:"text-[11px] text-muted underline underline-offset-2 hover:text-text",onClick:()=>m(nt=>!nt),"aria-expanded":y,children:y?"Show less":`+${sa} more`})]})]})})()]})]}),!p&&a.jsxs(zo,{title:"Metadata",open:k.metadata,onToggle:()=>L("metadata"),actions:ae,children:[a.jsx("pre",{className:`ui-code-block ${ve} overflow-auto whitespace-pre-wrap`,children:ue?a.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:se}}):oe}),Q&&a.jsx("div",{className:"text-[11px] text-danger mt-1 break-words",children:Q})]}),a.jsxs(zo,{title:"Notes & Tags",open:k.notes,onToggle:()=>L("notes"),contentClassName:"px-3 pb-3 space-y-2",children:[!p&&W&&(Y.tags||Y.notes)&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Conflicting edits detected."}),a.jsx("div",{className:"text-[11px] text-muted mt-0.5",children:"Your changes were not saved because this item was updated elsewhere."}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:Ve,children:"Apply my changes again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:Be,children:"Keep theirs"})]})]}),a.jsx("textarea",{className:"ui-textarea inspector-input w-full scrollbar-thin",placeholder:"Add notes",value:b,onChange:D=>T(D.target.value),onBlur:()=>{Re({notes:b})},"aria-label":p?"Notes for selected items":"Notes"}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:p?"Tags (apply to all, comma-separated)":"Tags (comma-separated)"}),a.jsx("input",{className:"ui-input inspector-input w-full",placeholder:"tag1, tag2",value:R,onChange:D=>M(D.target.value),onBlur:()=>{Re({tags:Vh(R)})},"aria-label":p?"Tags for selected items":"Tags"})]})]}),a.jsx("div",{className:Ct,onMouseDown:r})]}):a.jsx("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:a.jsx("div",{className:Ct,onMouseDown:r})})}function xS({open:e,embeddings:t,rejected:n=[],selectedPath:r,embeddingsLoading:s=!1,embeddingsError:i,onClose:o,onSearch:l}){const[u,c]=d.useState(""),[f,h]=d.useState("path"),[g,w]=d.useState(""),[k,N]=d.useState(""),[L,y]=d.useState("50"),[m,p]=d.useState(""),[v,C]=d.useState(null),[R,M]=d.useState(!1),b=d.useRef(null),T=d.useRef(null),E=d.useMemo(()=>t.find(B=>B.name===u)??t[0]??null,[t,u]);d.useEffect(()=>{e&&(C(null),t.length>0&&!t.some(B=>B.name===u)&&c(t[0].name),r?(h("path"),w(r)):(h("vector"),w("")))},[e,t,u,r]),d.useEffect(()=>{if(!e)return;const B=f==="vector"?T.current:b.current,le=window.requestAnimationFrame(()=>B==null?void 0:B.focus());return()=>window.cancelAnimationFrame(le)},[e,f]);const P=d.useCallback(async()=>{if(C(null),!t.length){C("No embeddings available for similarity search.");return}if(!E){C("Select an embedding to search.");return}const B=g.trim(),le=k.trim(),I=Number(L);if(!Number.isFinite(I)||I<=0){C("Top K must be a positive number.");return}const V=Math.min(1e3,Math.max(1,Math.floor(I))),q=m.trim()===""?null:Number(m);if(q!=null&&!Number.isFinite(q)){C("Min score must be a valid number.");return}if(f==="path"&&!B){C("Select an image path for the query.");return}if(f==="vector"&&!le){C("Paste a base64 vector for the query.");return}const he={embedding:E.name,query_path:f==="path"?B:null,query_vector_b64:f==="vector"?le:null,top_k:V,min_score:q};M(!0);try{await l(he),o()}catch(fe){fe instanceof Sn||fe instanceof Error?C(fe.message):C("Failed to run similarity search.")}finally{M(!1)}},[t.length,E,g,k,L,m,f,l,o]);d.useEffect(()=>{if(!e)return;const B=le=>{if(le.key==="Escape"){le.preventDefault(),o();return}(le.ctrlKey||le.metaKey)&&le.key==="Enter"&&(le.preventDefault(),P())};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[e,o,P]);const Q=d.useCallback(()=>{var B;r&&(h("path"),w(r),(B=b.current)==null||B.focus())},[r]);if(!e)return null;const O=t.map(B=>({value:B.name,label:B.name})),$=n.length>0,ie=n.slice(0,3);return a.jsx("div",{className:"fixed inset-0 z-[var(--z-overlay)] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",onClick:B=>{B.target===B.currentTarget&&o()},children:a.jsxs("div",{className:"w-full max-w-2xl rounded-lg border border-border bg-panel shadow-[0_20px_50px_rgba(0,0,0,0.55)]",onClick:B=>B.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Find similar",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-text",children:"Find similar"}),a.jsx("div",{className:"text-xs text-muted",children:"Search with embeddings"})]}),a.jsx("button",{className:"btn btn-sm",onClick:o,"aria-label":"Close",children:"Close"})]}),a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[i&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:i}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Embedding"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fc,{value:(E==null?void 0:E.name)??"",onChange:c,options:O,placeholder:s?"Loading embeddings...":"Select embedding",disabled:!t.length,triggerClassName:"min-w-[180px]"}),E&&a.jsxs("span",{className:"text-xs text-muted",children:[E.dimension," dims, ",E.metric,", ",E.dtype]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Query mode"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",className:`btn btn-sm ${f==="path"?"btn-active":""}`,onClick:()=>h("path"),"aria-pressed":f==="path",children:"Selected image"}),a.jsx("button",{type:"button",className:`btn btn-sm ${f==="vector"?"btn-active":""}`,onClick:()=>h("vector"),"aria-pressed":f==="vector",children:"Vector input"})]})]}),f==="path"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Image path"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:b,type:"text",className:"input w-full",value:g,onChange:B=>w(B.target.value),placeholder:r?"Selected image path":"Select an image first"}),a.jsx("button",{type:"button",className:"btn btn-sm",onClick:Q,disabled:!r,title:r?"Use selected image":"Select an image first",children:"Use selected"})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Vector (base64 float32)"}),a.jsx("textarea",{ref:T,className:"ui-textarea w-full font-mono text-[11px]",rows:5,value:k,onChange:B=>N(B.target.value),placeholder:"Paste base64-encoded float32 vector"}),a.jsx("div",{className:"text-[11px] text-muted",children:"Base64 of little-endian float32. Length must match embedding dimension."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Top K"}),a.jsx("input",{type:"number",min:1,max:1e3,step:1,className:"input ui-number w-full",value:L,onChange:B=>y(B.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Min score"}),a.jsx("input",{type:"number",step:.01,className:"input ui-number w-full",value:m,onChange:B=>p(B.target.value),placeholder:"Optional"})]})]}),$&&a.jsxs("div",{className:"ui-banner text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Skipped columns"}),a.jsxs("div",{className:"mt-1 space-y-1 text-muted",children:[ie.map(B=>a.jsxs("div",{children:[B.name,": ",B.reason]},B.name)),n.length>ie.length&&a.jsxs("div",{children:["+",n.length-ie.length," more"]})]})]}),v&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:v})]}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-border",children:[a.jsx("div",{className:"text-xs text-muted",children:E?`Metric: ${E.metric}`:"Metric: cosine"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:o,disabled:R,children:"Cancel"}),a.jsx("button",{className:"btn btn-sm btn-active",onClick:P,disabled:R||!t.length,children:R?"Searching...":"Find similar"})]})]})]})})}const pv=(e,t=!1)=>t?["folder",e,"recursive"]:["folder",e],wS=15e3;function SS(e,t=!1){return ge.getFolder(e,void 0,t)}function Cc(e,t=!1,n){const r=ta();return Zl({queryKey:pv(e,t),queryFn:()=>SS(e,t),enabled:(n==null?void 0:n.enabled)??!0,staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:s=>Math.min(1e3*Math.pow(2,s),5e3),refetchOnWindowFocus:!1,refetchInterval:r?wS:!1,refetchIntervalInBackground:r})}const kS=(e,t)=>["search",e,t],CS=2e4;function bS(e,t){const n=ta();return Zl({enabled:!!e.trim(),queryKey:kS(e,t),queryFn:()=>ge.search(e,t),staleTime:3e3,gcTime:6e4,placeholderData:r=>r,retry:1,refetchInterval:n?CS:!1,refetchIntervalInBackground:n})}const ES=()=>["embeddings"];function NS(){return Zl({queryKey:ES(),queryFn:ge.getEmbeddings,staleTime:6e4,gcTime:5*6e4,retry:1,refetchOnWindowFocus:!1})}const jS=/^[\/@a-zA-Z0-9._\-\/]{1,512}$/,MS=[".jpg",".jpeg",".png",".webp"];function Dn(e){try{const t=decodeURI(e||""),r=(t.startsWith("/")?t:`/${t}`).replace(/\/{2,}/g,"/"),s=r.length>1?r.replace(/\/$/,""):r;return jS.test(s)?s:"/"}catch{return"/"}}function qh(){return(window.location.hash||"").replace(/^#/,"")}function Yh(e){const t=Dn(e),n=`#${encodeURI(t)}`;window.location.hash!==n&&(window.location.hash=n)}function Ao(e){const t=Dn(e),n=`#${encodeURI(t)}`;if(window.location.hash!==n){const r=`${window.location.pathname}${window.location.search}${n}`;window.history.replaceState(window.history.state,"",r)}}function RS(e){const n=Dn(e).toLowerCase();return MS.some(r=>n.endsWith(r))}function LS(e,t){const n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,""),s=[n,r].filter(Boolean).join("/");return s.startsWith("/")?s:`/${s}`}function Gh(e){const n=Dn(e).split("/").filter(Boolean);return n.length<=1?"/":"/"+n.slice(0,-1).join("/")}function TS(e){return e.endsWith("/_trash_")}const _S=new Set([0,1,2,3,4,5]),Id=new Set(["<","<=",">",">="]),PS=/^\d{4}-\d{2}-\d{2}$/;function IS(e,t){return!t||!t.and.length?e:e.filter(n=>FS(n,t.and))}function FS(e,t){for(const n of t)if(!OS(e,n))return!1;return!0}function OS(e,t){var n,r,s,i,o,l,u;if("stars"in t){const c=t.stars;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsIn"in t){const c=t.starsIn.values;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsNotIn"in t){const c=t.starsNotIn.values;if(!c||!c.length)return!0;const f=e.star??0;return!c.includes(f)}if("nameContains"in t){const c=(n=t.nameContains.value)==null?void 0:n.trim();return c?(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("nameNotContains"in t){const c=(r=t.nameNotContains.value)==null?void 0:r.trim();return c?!(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("commentsContains"in t){const c=(s=t.commentsContains.value)==null?void 0:s.trim();if(!c)return!0;const f=e.comments??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("commentsNotContains"in t){const c=(i=t.commentsNotContains.value)==null?void 0:i.trim();if(!c)return!0;const f=e.comments??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("urlContains"in t){const c=(o=t.urlContains.value)==null?void 0:o.trim();if(!c)return!0;const f=e.source??e.url??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("urlNotContains"in t){const c=(l=t.urlNotContains.value)==null?void 0:l.trim();if(!c)return!0;const f=e.source??e.url??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("dateRange"in t){const{from:c,to:f}=t.dateRange;if(!c&&!f)return!0;if(!e.addedAt)return!1;const h=Date.parse(e.addedAt);if(Number.isNaN(h))return!1;const g=Zh(c,!1),w=Zh(f,!0);return!(g!=null&&h<g||w!=null&&h>w)}if("widthCompare"in t){const{op:c,value:f}=t.widthCompare;if(!Number.isFinite(f))return!0;const h=e.w;return!Number.isFinite(h)||h<=0?!1:em(h,c,f)}if("heightCompare"in t){const{op:c,value:f}=t.heightCompare;if(!Number.isFinite(f))return!0;const h=e.h;return!Number.isFinite(h)||h<=0?!1:em(h,c,f)}if("metricRange"in t){const{key:c,min:f,max:h}=t.metricRange,g=(u=e.metrics)==null?void 0:u[c];return!(g==null||g<f||g>h)}return!0}function bc(e){if(!e||typeof e!="object")return null;const t=e.and;if(!Array.isArray(t))return null;const n=[];for(const r of t){const s=XS(r);s&&n.push(s)}return{and:n}}function Xh(e){var r;const t=e.and.find(s=>"stars"in s),n=e.and.find(s=>"starsIn"in s);return(r=n==null?void 0:n.starsIn)!=null&&r.values?n.starsIn.values:(t==null?void 0:t.stars)??[]}function nu(e,t){return gv(e,t)}function DS(e){var n;const t=e.and.find(r=>"starsIn"in r);return((n=t==null?void 0:t.starsIn)==null?void 0:n.values)??[]}function gv(e,t){const n=Mi(t),r=e.and.filter(s=>!("starsIn"in s)&&!("stars"in s));return n.length?{and:[{starsIn:{values:n}},...r]}:{and:r}}function zS(e){var n;const t=e.and.find(r=>"starsNotIn"in r);return((n=t==null?void 0:t.starsNotIn)==null?void 0:n.values)??[]}function vv(e,t){const n=Mi(t),r=e.and.filter(s=>!("starsNotIn"in s));return n.length?{and:[{starsNotIn:{values:n}},...r]}:{and:r}}function AS(e){var n;const t=e.and.find(r=>"nameContains"in r);return((n=t==null?void 0:t.nameContains)==null?void 0:n.value)??null}function yv(e,t){const n=Qt(t),r=e.and.filter(s=>!("nameContains"in s));return n?{and:[{nameContains:{value:n}},...r]}:{and:r}}function $S(e){var n;const t=e.and.find(r=>"nameNotContains"in r);return((n=t==null?void 0:t.nameNotContains)==null?void 0:n.value)??null}function xv(e,t){const n=Qt(t),r=e.and.filter(s=>!("nameNotContains"in s));return n?{and:[{nameNotContains:{value:n}},...r]}:{and:r}}function US(e){var n;const t=e.and.find(r=>"commentsContains"in r);return((n=t==null?void 0:t.commentsContains)==null?void 0:n.value)??null}function wv(e,t){const n=Qt(t),r=e.and.filter(s=>!("commentsContains"in s));return n?{and:[{commentsContains:{value:n}},...r]}:{and:r}}function BS(e){var n;const t=e.and.find(r=>"commentsNotContains"in r);return((n=t==null?void 0:t.commentsNotContains)==null?void 0:n.value)??null}function Sv(e,t){const n=Qt(t),r=e.and.filter(s=>!("commentsNotContains"in s));return n?{and:[{commentsNotContains:{value:n}},...r]}:{and:r}}function WS(e){var n;const t=e.and.find(r=>"urlContains"in r);return((n=t==null?void 0:t.urlContains)==null?void 0:n.value)??null}function kv(e,t){const n=Qt(t),r=e.and.filter(s=>!("urlContains"in s));return n?{and:[{urlContains:{value:n}},...r]}:{and:r}}function HS(e){var n;const t=e.and.find(r=>"urlNotContains"in r);return((n=t==null?void 0:t.urlNotContains)==null?void 0:n.value)??null}function Cv(e,t){const n=Qt(t),r=e.and.filter(s=>!("urlNotContains"in s));return n?{and:[{urlNotContains:{value:n}},...r]}:{and:r}}function VS(e){const t=e.and.find(n=>"dateRange"in n);return(t==null?void 0:t.dateRange)??null}function Ec(e,t){const n=Fl((t==null?void 0:t.from)??null),r=Fl((t==null?void 0:t.to)??null),s=e.and.filter(i=>!("dateRange"in i));return!n&&!r?{and:s}:{and:[{dateRange:{...n?{from:n}:{},...r?{to:r}:{}}},...s]}}function QS(e){const t=e.and.find(n=>"widthCompare"in n);return(t==null?void 0:t.widthCompare)??null}function rl(e,t){const n=e.and.filter(r=>!("widthCompare"in r));return!t||!Number.isFinite(t.value)||!Id.has(t.op)?{and:n}:{and:[{widthCompare:{op:t.op,value:t.value}},...n]}}function KS(e){const t=e.and.find(n=>"heightCompare"in n);return(t==null?void 0:t.heightCompare)??null}function sl(e,t){const n=e.and.filter(r=>!("heightCompare"in r));return!t||!Number.isFinite(t.value)||!Id.has(t.op)?{and:n}:{and:[{heightCompare:{op:t.op,value:t.value}},...n]}}function qS(e,t){const n=e.and.find(r=>"metricRange"in r&&r.metricRange.key===t);return(n==null?void 0:n.metricRange)??null}function YS(e,t,n){const r=e.and.filter(s=>!("metricRange"in s&&s.metricRange.key===t));return n?{and:[{metricRange:{key:t,min:n.min,max:n.max}},...r]}:{and:r}}function GS(e){const t=bc(e);return t?t.and.length:0}function XS(e){var t,n,r,s,i,o,l,u;if(!e||typeof e!="object")return null;if("stars"in e){const c=Mi(e.stars);return c.length?{starsIn:{values:c}}:null}if("starsIn"in e){const c=Mi((t=e.starsIn)==null?void 0:t.values);return c.length?{starsIn:{values:c}}:null}if("starsNotIn"in e){const c=Mi((n=e.starsNotIn)==null?void 0:n.values);return c.length?{starsNotIn:{values:c}}:null}if("nameContains"in e){const c=Qt((r=e.nameContains)==null?void 0:r.value);return c?{nameContains:{value:c}}:null}if("nameNotContains"in e){const c=Qt((s=e.nameNotContains)==null?void 0:s.value);return c?{nameNotContains:{value:c}}:null}if("commentsContains"in e){const c=Qt((i=e.commentsContains)==null?void 0:i.value);return c?{commentsContains:{value:c}}:null}if("commentsNotContains"in e){const c=Qt((o=e.commentsNotContains)==null?void 0:o.value);return c?{commentsNotContains:{value:c}}:null}if("urlContains"in e){const c=Qt((l=e.urlContains)==null?void 0:l.value);return c?{urlContains:{value:c}}:null}if("urlNotContains"in e){const c=Qt((u=e.urlNotContains)==null?void 0:u.value);return c?{urlNotContains:{value:c}}:null}if("dateRange"in e){const c=e.dateRange,f=Fl((c==null?void 0:c.from)??null),h=Fl((c==null?void 0:c.to)??null);return!f&&!h?null:{dateRange:{...f?{from:f}:{},...h?{to:h}:{}}}}if("widthCompare"in e){const c=e.widthCompare,f=Jh(c==null?void 0:c.op,c==null?void 0:c.value);return f?{widthCompare:f}:null}if("heightCompare"in e){const c=e.heightCompare,f=Jh(c==null?void 0:c.op,c==null?void 0:c.value);return f?{heightCompare:f}:null}if("metricRange"in e){const c=e.metricRange;if(!c||typeof c!="object")return null;const f=typeof c.key=="string"?c.key:"",h=Nc(c.min),g=Nc(c.max);return!f||h==null||g==null||h>g?null:{metricRange:{key:f,min:h,max:g}}}return null}function Mi(e){if(!Array.isArray(e))return[];const t=[],n=new Set;for(const r of e){const s=typeof r=="number"?r:typeof r=="string"?Number(r):NaN;!Number.isInteger(s)||!_S.has(s)||n.has(s)||(n.add(s),t.push(s))}return t}function Qt(e){if(typeof e!="string")return null;const t=e.trim();return t||null}function Fl(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=Date.parse(t);return Number.isNaN(n)?null:t}function Jh(e,t){if(typeof e!="string"||!Id.has(e))return null;const n=Nc(t);return n==null?null:{op:e,value:n}}function Zh(e,t){if(!e)return null;const n=e.trim();if(!n)return null;const r=Date.parse(n);return Number.isNaN(r)?null:t&&PS.test(n)?r+24*60*60*1e3-1:r}function em(e,t,n){switch(t){case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;default:return!0}}function Nc(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function tm(e){return e.addedAt?Date.parse(e.addedAt):0}function Ol(e,t){return e.name.localeCompare(t.name)}function JS(e,t){const n=tm(e),r=tm(t);return n===r?Ol(e,t):n-r}function ZS(e){return(t,n)=>{var i,o;const r=(i=t.metrics)==null?void 0:i[e],s=(o=n.metrics)==null?void 0:o[e];return r==null&&s==null?Ol(t,n):r==null?1:s==null?-1:r===s?Ol(t,n):r-s}}function nm(e,t){return IS(e,t)}function ek(e){let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function tk(e,t){const n=ek(t||1),r=[...e];for(let s=r.length-1;s>0;s-=1){const i=Math.floor(n()*(s+1));[r[s],r[i]]=[r[i],r[s]]}return r}function nk(e,t,n){if(t.kind==="builtin"&&t.key==="random"){const i=n??Date.now();return tk(e,i)}let r=JS;t.kind==="metric"?r=ZS(t.key):t.key==="name"&&(r=Ol);const s=[...e].sort(r);return t.dir==="desc"?s.reverse():s}const rm="leftW.folders",sm="leftW.metrics",rk="leftW",im="rightW";function sk(e,t){const[n,r]=d.useState(240),[s,i]=d.useState(320),[o,l]=d.useState(240),u=t==="metrics"?s:n,c=d.useRef(u),f=d.useRef(o);return d.useEffect(()=>{c.current=u},[u]),d.useEffect(()=>{f.current=o},[o]),d.useEffect(()=>{try{const w=window.localStorage,k=Number(w.getItem(rm)??w.getItem(rk));Number.isFinite(k)&&k>0&&r(k);const N=Number(w.getItem(sm));Number.isFinite(N)&&N>0&&i(N);const L=Number(w.getItem(im));Number.isFinite(L)&&L>0&&l(L)}catch{}},[]),{leftW:u,rightW:o,onResizeLeft:w=>{w.preventDefault();const k=e.current;if(!k)return;const N=k.getBoundingClientRect(),L=t==="metrics"?sm:rm;let y=c.current;const m=v=>{const C=v.clientX-N.left,R=200,M=Math.max(R,N.width-f.current-200),b=Math.min(Math.max(C,R),M);y=b,t==="metrics"?i(b):r(b)},p=()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",p);try{window.localStorage.setItem(L,String(y))}catch{}};window.addEventListener("mousemove",m),window.addEventListener("mouseup",p)},onResizeRight:w=>{w.preventDefault();const k=e.current;if(!k)return;const N=k.getBoundingClientRect();let L=f.current;const y=p=>{const v=p.clientX-N.left,C=N.width-v,R=240,M=Math.max(R,N.width-c.current-200),b=Math.min(Math.max(C,R),M);L=b,f.current=b,l(b)},m=()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",m);try{window.localStorage.setItem(im,String(L))}catch{}};window.addEventListener("mousemove",y),window.addEventListener("mouseup",m)}}}function ik({x:e,y:t,items:n}){return a.jsx("div",{className:"dropdown-panel fixed",role:"menu",style:{left:e,top:t,minWidth:180},onClick:r=>r.stopPropagation(),children:n.map((r,s)=>a.jsxs("button",{className:`dropdown-item w-full ${r.danger?"text-danger hover:text-danger":""}`,role:"menuitem","aria-disabled":r.disabled,disabled:r.disabled,onClick:i=>{i.stopPropagation(),r.disabled||r.onClick()},children:[r.icon&&a.jsx("span",{className:"shrink-0",children:r.icon}),a.jsx("span",{children:r.label})]},s))})}function om(e){return JSON.stringify(e,null,2)}function lm(e){const t=s=>'"'+s.replaceAll('"','""')+'"',n="path,folder,name,star,type,size,width,height,tags,notes",r=e.map(s=>{const i=(s.tags||[]).join(" "),o=s.notes||"";return[s.path,s.folder,s.name,String(s.star??""),s.type??"",s.size??"",s.width??"",s.height??"",i,o].map(l=>t(String(l))).join(",")});return[n,...r].join(`
`)}function am(e){return e.map(t=>{const n=t.path.split("/").filter(Boolean);n.pop();const r=n.length?`/${n.join("/")}`:"/";return{path:t.path,folder:r,name:t.name,star:t.star??null,type:t.type,size:t.size,width:t.w,height:t.h}})}function ok(e,t=250){const[n,r]=il.useState(e);return il.useEffect(()=>{const s=window.setTimeout(()=>r(e),Math.max(0,t));return()=>window.clearTimeout(s)},[e,t]),n}const bv="application/x-lenslet-paths",lk='[role="treeitem"].drop-target';function um(e){var n;return Array.from(((n=e.dataTransfer)==null?void 0:n.types)||[]).includes(bv)}function ak(e){document.querySelectorAll(lk).forEach(t=>{t!==e&&t.classList.remove("drop-target")})}function cm(e){ak(e),e.classList.add("drop-target")}function dm(e){return e.startsWith("/")?e:`/${e}`}function uk({path:e,isLeaf:t}){const n=br(),r=d.useCallback(l=>{um(l)&&(l.preventDefault(),t&&cm(l.currentTarget))},[t]),s=d.useCallback(l=>{!t||!um(l)||(l.preventDefault(),cm(l.currentTarget))},[t]),i=d.useCallback(l=>{const u=l.currentTarget,c=document.elementFromPoint(l.clientX,l.clientY);c&&u.contains(c)||u.classList.remove("drop-target")},[]),o=d.useCallback(async l=>{const u=l.dataTransfer;if(!u)return;l.preventDefault(),l.currentTarget.classList.remove("drop-target");const c=u.getData(bv),h=(c?JSON.parse(c):[]).filter(Boolean);if(!h.length)return;let g=h[0].split("/").slice(0,-1).join("/")||"/";g=dm(g);const w=dm(e);try{for(const k of h)await ge.moveFile(k,w);n.invalidateQueries({queryKey:["folder",g]}),n.invalidateQueries({queryKey:["folder",w]}),n.setQueryData(["folder",g],k=>!k||!Array.isArray(k.items)?k:{...k,items:k.items.filter(N=>!h.includes(N.path))})}catch{}},[e,n]);return{onDragOver:r,onDragEnter:s,onDragLeave:i,onDrop:o}}const ck='[role="tree"] [role="treeitem"]';function dk(){return Array.from(document.querySelectorAll(ck))}function fk(e,t){var i;const n=dk(),r=n.findIndex(o=>o===e);if(r===-1)return;let s=r;t==="ArrowDown"?s=Math.min(n.length-1,r+1):t==="ArrowUp"?s=Math.max(0,r-1):t==="Home"?s=0:t==="End"&&(s=n.length-1),(i=n[s])==null||i.focus()}function hk({path:e,isLeaf:t,isExpanded:n,setExpanded:r,onOpen:s}){return d.useCallback(i=>{if(i.key==="Enter"){i.preventDefault(),s(e);return}if(i.key==="ArrowRight"){!t&&!n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.add(e),l}));return}if(i.key==="ArrowLeft"){!t&&n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.delete(e),l}));return}(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="Home"||i.key==="End")&&(i.preventDefault(),fk(i.currentTarget,i.key))},[e,t,n,r,s])}function mk({current:e,roots:t,data:n,onOpen:r,onResize:s,onContextMenu:i,countVersion:o,className:l,showResizeHandle:u=!0}){const[c,f]=d.useState(new Set(["/"])),h=d.useRef(new Map),g=d.useRef(new Map),w=br(),k=d.useCallback(async L=>{const y=Dn(L||"/"),m=h.current,p=g.current,v=m.get(y);if(v!==void 0)return v;const C=w.getQueryData(pv(y,!0));if(C){const b=C.items.length;return m.set(y,b),b}const R=p.get(y);if(R)return R;const M=(async()=>{try{const T=(await ge.getFolder(y,void 0,!0)).items.length;return m.set(y,T),T}finally{p.delete(y)}})();return p.set(y,M),M},[w]);d.useEffect(()=>{h.current.clear(),g.current.clear()},[o]),d.useEffect(()=>{const L=e.split("/").filter(Boolean),y=["/"];let m="";for(const p of L)m=m?`${m}/${p}`:`/${p}`,y.push(m);f(p=>{const v=new Set(p);for(const C of y)v.add(C);return v})},[e]);const N=l??"h-full overflow-auto bg-panel scrollbar-thin";return a.jsxs("div",{className:N,children:[a.jsx("div",{className:"p-1",role:"tree","aria-label":"Folders",children:t.map(L=>a.jsx(Ev,{path:L.path,label:L.label,depth:0,current:e,expanded:c,setExpanded:f,onOpen:r,onContextMenu:i,initial:n,getSubtreeCount:k,countVersion:o},L.path))}),u&&a.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 left-[calc(var(--left)-3px)] hover:bg-accent/20",onMouseDown:s})]})}function Ev({path:e,label:t,depth:n,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,initial:u,getSubtreeCount:c,countVersion:f}){var E;const h=s.has(e),g=r===e,w=e==="/"||h||g,{data:k}=Cc(e,!1,{enabled:w}),N=u&&e===u.path?u:k,y=!!N?N.dirs.length===0:!1,[m,p]=d.useState(N?N.items.length:null),v=hk({path:e,isLeaf:y,isExpanded:h,setExpanded:i,onOpen:o}),{onDragOver:C,onDragEnter:R,onDragLeave:M,onDrop:b}=uk({path:e,isLeaf:y}),T=P=>{P.stopPropagation(),i(Q=>{const O=new Set(Q);return O.has(e)?O.delete(e):O.add(e),O})};return d.useEffect(()=>{let P=!1;if(!N){p(null);return}if(p(N.items.length),!!(h&&(n>0||g)))return c(e).then(O=>{P||p(O)}).catch(O=>{P||console.warn(`Failed to compute subtree count for ${e}:`,O)}),()=>{P=!0}},[N,e,c,f,h,n,g]),a.jsxs("div",{children:[a.jsxs("div",{className:`flex items-center gap-1.5 py-0.5 px-2 rounded-md cursor-pointer min-h-[28px] outline-none transition-colors duration-75 ${g?"bg-accent/20 text-accent font-medium":"hover:bg-white/5 text-text"}`,role:"treeitem","aria-level":n+1,"aria-expanded":y?void 0:h,"aria-selected":g,tabIndex:g?0:-1,style:{paddingLeft:8+n*14},onClick:()=>o(e),onContextMenu:P=>{P.preventDefault(),P.stopPropagation(),l&&l(P,e)},onKeyDown:v,onDragOver:C,onDragEnter:R,onDragLeave:M,onDrop:b,children:[a.jsx("span",{className:"w-4 text-center opacity-60 hover:opacity-100 text-[10px]",onClick:T,children:h?"":""}),a.jsx("span",{className:"flex-1 overflow-hidden truncate text-sm",title:t,children:uS(t,28)}),m!==null&&a.jsx("span",{className:"text-[10px] opacity-50 bg-white/5 border border-white/5 rounded px-1.5 min-w-[24px] text-center",children:m})]}),h&&((E=N==null?void 0:N.dirs)==null?void 0:E.map(P=>a.jsx(Ev,{path:LS(e,P.name),label:P.name,depth:n+1,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,getSubtreeCount:c,countVersion:f},P.name)))]})}const Or=40,pk=12,fm=[5,4,3,2,1],hm=["<","<=",">",">="];function gk({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l,onChangeFilters:u}){const c=r&&r.length?a.jsx(vk,{selectedItems:r,metricKeys:n}):null,f=a.jsx(yk,{filters:o,onChangeFilters:u});return n.length?a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,a.jsx(xk,{items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}),f]}):a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,f,a.jsx("div",{className:"p-4 text-sm text-muted",children:"No metrics found in this dataset."})]})}function vk({selectedItems:e,metricKeys:t}){const n=d.useMemo(()=>{if(!e.length)return null;const u=new Map;for(const h of e){const g=h.metrics;if(g)for(const[w,k]of Object.entries(g)){if(k==null||Number.isNaN(k))continue;const N=u.get(w);N?N.push(k):u.set(w,[k])}}return u.size?{entries:(t.length?t.filter(h=>u.has(h)):Array.from(u.keys()).sort()).map(h=>{const g=u.get(h)??[],w=Math.min(...g),k=Math.max(...g),N=g.reduce((L,y)=>L+y,0)/Math.max(1,g.length);return{key:h,value:g[0],min:w,max:k,avg:N,count:g.length}}),totalItems:e.length}:null},[e,t]);if(!n)return null;const{entries:r,totalItems:s}=n,i=r.slice(0,pk),o=r.length-i.length,l=s>1;return a.jsxs("div",{className:"ui-card",children:[a.jsxs("div",{className:"ui-card-header",children:[a.jsx("div",{className:"ui-section-title",children:"Selected metrics"}),a.jsxs("div",{className:"text-[11px] text-muted",children:[s," item",s===1?"":"s"]})]}),a.jsxs("div",{className:"space-y-1 text-[12px]",children:[i.map(u=>a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-muted w-28 shrink-0 truncate",title:u.key,children:u.key}),a.jsxs("span",{className:"font-mono text-text text-right tabular-nums",children:[l?`${It(u.min)}  ${It(u.max)}`:It(u.value),l&&a.jsxs("span",{className:"text-[11px] text-muted ml-2",children:["avg ",It(u.avg),u.count!==s?`  ${u.count}/${s}`:""]})]})]},u.key)),o>0&&a.jsxs("div",{className:"text-[11px] text-muted",children:["+",o," more"]})]})]})}function yk({filters:e,onChangeFilters:t}){const n=d.useMemo(()=>DS(e),[e]),r=d.useMemo(()=>zS(e),[e]),s=d.useMemo(()=>AS(e)??"",[e]),i=d.useMemo(()=>$S(e)??"",[e]),o=d.useMemo(()=>US(e)??"",[e]),l=d.useMemo(()=>BS(e)??"",[e]),u=d.useMemo(()=>WS(e)??"",[e]),c=d.useMemo(()=>HS(e)??"",[e]),f=d.useMemo(()=>VS(e)??{},[e]),h=d.useMemo(()=>wm(f.from),[f.from]),g=d.useMemo(()=>wm(f.to),[f.to]),w=d.useMemo(()=>QS(e),[e]),k=d.useMemo(()=>KS(e),[e]),[N,L]=d.useState((w==null?void 0:w.op)??">="),[y,m]=d.useState((k==null?void 0:k.op)??">=");d.useEffect(()=>{w!=null&&w.op&&L(w.op)},[w==null?void 0:w.op]),d.useEffect(()=>{k!=null&&k.op&&m(k.op)},[k==null?void 0:k.op]);const p=(v,C)=>{const R=new Set(n),M=new Set(r);v==="include"?R.has(C)?R.delete(C):(R.add(C),M.delete(C)):M.has(C)?M.delete(C):(M.add(C),R.delete(C));let b=gv(e,Array.from(R));b=vv(b,Array.from(M)),t(b)};return a.jsxs("div",{className:"ui-card",children:[a.jsx("div",{className:"ui-section-title mb-3",children:"Attributes"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Rating"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Include"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[fm.map(v=>{const C=n.includes(v);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${C?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",v),"aria-pressed":C,title:`Include ${v} star${v>1?"s":""}`,children:[v,""]},`stars-in-${v}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${n.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",0),"aria-pressed":n.includes(0),title:"Include unrated",children:"None"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Exclude"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[fm.map(v=>{const C=r.includes(v);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${C?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",v),"aria-pressed":C,title:`Exclude ${v} star${v>1?"s":""}`,children:[v,""]},`stars-out-${v}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${r.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",0),"aria-pressed":r.includes(0),title:"Exclude unrated",children:"None"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Filename"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:s,placeholder:"e.g. draft",onChange:v=>t(yv(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:i,placeholder:"e.g. v1",onChange:v=>t(xv(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Comments"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:o,placeholder:"e.g. hero",onChange:v=>t(wv(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:l,placeholder:"e.g. todo",onChange:v=>t(Sv(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"URL"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:u,placeholder:"e.g. s3://bucket",onChange:v=>t(kv(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:c,placeholder:"e.g. http://",onChange:v=>t(Cv(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Date Added"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"From"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:h,onChange:v=>t(Ec(e,{from:v.target.value||null,to:f.to??null}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"To"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:g,onChange:v=>t(Ec(e,{from:f.from??null,to:v.target.value||null}))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Dimensions"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Width"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:N,onChange:v=>{const C=v.target.value;L(C),w&&t(rl(e,{op:C,value:w.value}))},children:hm.map(v=>a.jsx("option",{value:v,children:v},`w-${v}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:w?String(w.value):"",min:0,placeholder:"px",onChange:v=>{const C=v.target.value;if(!C){t(rl(e,null));return}const R=Number(C);Number.isFinite(R)&&t(rl(e,{op:N,value:R}))}})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Height"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:y,onChange:v=>{const C=v.target.value;m(C),k&&t(sl(e,{op:C,value:k.value}))},children:hm.map(v=>a.jsx("option",{value:v,children:v},`h-${v}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:k?String(k.value):"",min:0,placeholder:"px",onChange:v=>{const C=v.target.value;if(!C){t(sl(e,null));return}const R=Number(C);Number.isFinite(R)&&t(sl(e,{op:y,value:R}))}})]})]})]})]})]})]})}function xk({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}){const[u,c]=d.useState(!1),f=s&&n.includes(s)?s:n[0];return a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("label",{className:"ui-label",children:"Metric"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-[11px]",onClick:()=>c(h=>!h),"aria-pressed":u,children:u?"Show one":"Show all"})]}),u?a.jsx("div",{className:"ui-input ui-input-readonly w-full flex items-center text-xs",children:"All metrics"}):a.jsx("select",{className:"ui-select w-full",value:f,onChange:h=>i(h.target.value),children:n.map(h=>a.jsx("option",{value:h,children:h},h))})]}),u?a.jsx("div",{className:"space-y-3",children:n.map(h=>a.jsx(mm,{metricKey:h,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l,showTitle:!0},h))}):f?a.jsx(mm,{metricKey:f,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l}):a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]})}function mm({items:e,filteredItems:t,metricKey:n,selectedItems:r,filters:s,onChangeRange:i,showTitle:o=!1}){const l=d.useMemo(()=>pm(e,n),[e,n]),u=d.useMemo(()=>ru(l,Or),[l]),c=d.useMemo(()=>pm(t,n),[t,n]),f=d.useMemo(()=>u?ru(c,Or,u):null,[c,u]),h=qS(s,n),[g,w]=d.useState(null),[k,N]=d.useState(!1),L=d.useRef(null),y=d.useRef(null),m=d.useRef(!1),p=d.useRef(null),[v,C]=d.useState(null),[R,M]=d.useState(""),[b,T]=d.useState(""),[E,P]=d.useState(null),Q=g??h,O=u?{min:u.min,max:u.max}:null,$=d.useMemo(()=>{var Y;if(!(r!=null&&r.length))return[];const W=[];for(const te of r){const me=(Y=te.metrics)==null?void 0:Y[n];me==null||Number.isNaN(me)||W.push(me)}return W},[r,n]),ie=$.length===1?$[0]:null,B=d.useMemo(()=>!u||$.length<2?null:ru($,Or,u),[$,u]);d.useEffect(()=>{if(!h||!O){E!=="min"&&M(h?Kn(h.min):""),E!=="max"&&T(h?Kn(h.max):"");return}if(E!=="min"){const W=as(h.min,O.min)?"":Kn(h.min);M(W)}if(E!=="max"){const W=as(h.max,O.max)?"":Kn(h.max);T(W)}},[h,O,E]),d.useEffect(()=>{C(null)},[n,O==null?void 0:O.min,O==null?void 0:O.max]);const le=W=>{var me;if(!O)return null;const Y=(me=p.current)==null?void 0:me.getBoundingClientRect();if(!Y)return null;const te=Fd((W.clientX-Y.left)/Y.width);return O.min+(O.max-O.min)*te},I=(W,Y)=>{if(!O)return;const te=L.current??W,me=vm(te,W);w(me),Y&&i(n,me)},V=W=>{var te;if(!O)return;W.preventDefault();const Y=le(W);Y!=null&&(N(!0),w(null),L.current=Y,y.current=W.clientX,m.current=!1,C(Y),(te=p.current)==null||te.setPointerCapture(W.pointerId))},q=W=>{const Y=le(W);if(Y==null){k||C(null);return}if(C(Y),k){const te=y.current;if(!m.current&&te!=null){if(Math.abs(W.clientX-te)<4)return;m.current=!0}m.current&&I(Y,!1)}},he=W=>{var te;if(!k)return;N(!1),(te=p.current)==null||te.releasePointerCapture(W.pointerId);const Y=le(W);m.current&&Y!=null?(C(Y),I(Y,!0)):h&&i(n,null),L.current=null,y.current=null,m.current=!1,setTimeout(()=>w(null),0)},fe=(W,Y)=>{if(!O)return;const te=ym(W),me=ym(Y);if(!te.valid||!me.valid){te.valid||M(h?Kn(h.min):""),me.valid||T(h?Kn(h.max):"");return}if(te.value==null&&me.value==null){i(n,null);return}const Re=te.value??O.min,Ve=me.value??O.max,Be=xm(Re,O.min,O.max),lt=xm(Ve,O.min,O.max),Qe=vm(Be,lt);if(as(Qe.min,O.min)&&as(Qe.max,O.max)){i(n,null);return}i(n,Qe)};if(!u||!O)return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]});const Me=$.length;return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mb-2 tabular-nums",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{children:["Population: ",u.count]}),a.jsxs("span",{children:["Filtered: ",(f==null?void 0:f.count)??0]}),Me>1&&a.jsxs("span",{className:"text-text",children:["Selected: ",Me]})]}),ie!=null&&a.jsxs("span",{className:"text-text",children:["Selected: ",It(ie)]})]}),a.jsxs("svg",{ref:p,viewBox:`0 0 ${Or} 100`,preserveAspectRatio:"none",className:"w-full h-28 cursor-crosshair rounded-md bg-surface-inset",onPointerDown:V,onPointerMove:q,onPointerUp:he,onPointerLeave:()=>C(null),children:[su(u.bins,"#2e3a4b"),f&&su(f.bins,"#3a8fff"),B&&su(B.bins,"#f59e0b",{opacity:.55}),Q&&wk(Q,O),ie!=null&&gm(ie,O,{color:"var(--highlight)",strokeWidth:.7}),v!=null&&gm(v,O,{color:"rgba(255,255,255,0.75)",strokeWidth:.5,dashed:!0})]}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mt-2 tabular-nums",children:[a.jsx("span",{children:It(O==null?void 0:O.min)}),a.jsxs("div",{className:"flex flex-col items-center text-center leading-tight",children:[Q?a.jsx("span",{className:"text-text",children:as(Q.min,O.min)?` ${It(Q.max)}`:as(Q.max,O.max)?` ${It(Q.min)}`:`${It(Q.min)}  ${It(Q.max)}`}):v!=null?a.jsxs("span",{className:"text-text",children:["Cursor: ",It(v)]}):a.jsx("span",{children:"Drag to filter"}),Q&&v!=null&&a.jsxs("span",{className:"text-[11px] text-muted",children:["Cursor: ",It(v)]})]}),a.jsx("span",{children:It(O==null?void 0:O.max)})]}),a.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-2 mt-3 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Min"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:R,placeholder:Kn(O.min),onFocus:()=>P("min"),onBlur:()=>{P(null),fe(R,b)},onChange:W=>M(W.target.value),onKeyDown:W=>{W.key==="Enter"&&W.currentTarget.blur()}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Max"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:b,placeholder:Kn(O.max),onFocus:()=>P("max"),onBlur:()=>{P(null),fe(R,b)},onChange:W=>T(W.target.value),onKeyDown:W=>{W.key==="Enter"&&W.currentTarget.blur()}})]}),a.jsx("button",{className:"btn btn-xs btn-ghost text-muted hover:text-text",onClick:()=>i(n,null),children:"Clear"})]})]})}function ru(e,t,n){if(!e.length)return null;const r=n?n.min:Math.min(...e);let s=n?n.max:Math.max(...e);r===s&&(s=r+1);const i=new Array(t).fill(0),o=t/(s-r);for(const l of e){const u=Math.max(0,Math.min(t-1,Math.floor((l-r)*o)));i[u]+=1}return{bins:i,min:r,max:s,count:e.length}}function pm(e,t){var r;const n=[];for(const s of e){const i=(r=s.metrics)==null?void 0:r[t];i==null||Number.isNaN(i)||n.push(i)}return n}function su(e,t,n){const r=Math.max(1,...e),s=(n==null?void 0:n.opacity)??.9;return e.map((i,o)=>{const l=i/r*100;return a.jsx("rect",{x:o+.05,y:100-l,width:.9,height:l,fill:t,opacity:s},`${t}-${o}`)})}function wk(e,t){const n=(e.min-t.min)/(t.max-t.min),r=(e.max-t.min)/(t.max-t.min),s=Or*Fd(Math.min(n,r)),i=Or*Math.abs(r-n);return a.jsx("rect",{x:s,y:0,width:Math.max(.5,i),height:100,fill:"rgba(255,255,255,0.08)",stroke:"rgba(255,255,255,0.4)",strokeWidth:.4})}function gm(e,t,n){const r=Fd((e-t.min)/(t.max-t.min)),s=Or*r;return a.jsx("line",{x1:s,y1:0,x2:s,y2:100,stroke:n.color,strokeWidth:n.strokeWidth??.5,strokeDasharray:n.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function vm(e,t){return e<t?{min:e,max:t}:{min:t,max:e}}function Fd(e){return e<0?0:e>1?1:e}function It(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Kn(e){if(!Number.isFinite(e))return"";const t=e.toString();return t.includes("e")?e.toFixed(6):t}function ym(e){const t=e.trim();if(!t)return{value:null,valid:!0};const n=Number(t);return Number.isFinite(n)?{value:n,valid:!0}:{value:null,valid:!1}}function xm(e,t,n){return e<t?t:e>n?n:e}function as(e,t){const n=Math.max(1,Math.abs(e),Math.abs(t));return Math.abs(e-t)<=1e-6*n}function wm(e){return e?e.length>=10?e.slice(0,10):e:""}const Sk=[{label:"Root",path:"/"}];function kk({leftTool:e,onToolChange:t,compareEnabled:n,compareActive:r,onOpenCompare:s,views:i,activeViewId:o,onActivateView:l,onSaveView:u,current:c,data:f,onOpenFolder:h,onContextMenu:g,countVersion:w,items:k,filteredItems:N,metricKeys:L,selectedItems:y,selectedMetric:m,onSelectMetric:p,filters:v,onChangeRange:C,onChangeFilters:R,onResize:M}){const b=e==="folders"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",T=e==="metrics"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",E=r?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover";return a.jsxs("div",{className:"app-left-panel col-start-1 row-start-2 relative border-r border-border bg-panel overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-y-0 left-0 w-10 border-r border-border flex flex-col items-center gap-2 py-3 bg-surface-overlay",children:[a.jsx("button",{className:b,title:"Folders","aria-label":"Folders","aria-pressed":e==="folders",onClick:()=>t("folders"),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M3 7.5h6l2-2h10a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2z"})})}),a.jsx("button",{className:T,title:"Metrics / Filters","aria-label":"Metrics and Filters","aria-pressed":e==="metrics",onClick:()=>t("metrics"),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]})}),a.jsx("div",{className:"w-6 h-px bg-border/70 my-1"}),a.jsx("button",{className:`${E} ${n?"":"opacity-40 cursor-not-allowed"}`,title:n?"Compare selected images":"Compare (select 2+)","aria-label":"Compare selected images","aria-pressed":r,"aria-disabled":!n,disabled:!n,onClick:()=>{n&&s()},children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("rect",{x:"3",y:"4",width:"8",height:"16",rx:"1"}),a.jsx("rect",{x:"13",y:"4",width:"8",height:"16",rx:"1"})]})})]}),a.jsx("div",{className:"ml-10 h-full",children:e==="folders"?a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"px-2 py-2 border-b border-border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Smart Folders"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:u,title:"Save current view as Smart Folder",children:"+ New"})]}),i.length?a.jsx("div",{className:"flex flex-col gap-1",children:i.map(P=>{const Q=P.id===o;return a.jsx("button",{className:`text-left px-2 py-1.5 rounded-md text-sm ${Q?"bg-accent-muted text-accent":"hover:bg-hover text-text"}`,onClick:()=>l(P),children:P.name},P.id)})}):a.jsx("div",{className:"text-xs text-muted px-1 py-1.5",children:"No saved Smart Folders yet."})]}),a.jsx(mk,{current:c,roots:Sk,data:f,onOpen:h,onContextMenu:g,countVersion:w,className:"flex-1 min-h-0 overflow-auto scrollbar-thin",showResizeHandle:!1})]}):a.jsx(gk,{items:k,filteredItems:N,metricKeys:L,selectedItems:y,selectedMetric:m,onSelectMetric:p,filters:v,onChangeRange:C,onChangeFilters:R})}),a.jsx("div",{className:"toolbar-offset absolute bottom-0 right-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20",onMouseDown:M})]})}function Ck({persistenceEnabled:e,recentSummary:t,onDismissRecent:n,onCloseRecent:r,browserZoomPercent:s}){const i=t?` (${t.names.join(", ")}${t.extra?` +${t.extra}`:""})`:"",o=!!(t!=null&&t.names.length),l=typeof s=="number"?s:null,u=l!==null&&Math.abs(l-100)>=2;return!e||u||!!t?a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-col gap-2",children:[!e&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("span",{className:"font-semibold",children:"Not persisted."})," Workspace is read-only; edits stay in memory until restart."]}),u&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs",children:[a.jsxs("span",{className:"font-semibold",children:["Browser zoom ",Math.round(l),"%."]})," For best results, set it to 100% so UI elements stay in correct proportions."]}),t&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex items-center justify-between gap-3",children:[a.jsxs("span",{children:["Recent updates: ",t.count," item",t.count===1?"":"s",o?i:""]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"text-muted hover:text-text transition-colors",onClick:n,"aria-label":"Hide recent activity until refresh",children:"Hide until refresh"}),a.jsx("button",{className:"text-muted hover:text-text transition-colors text-base leading-none",onClick:r,"aria-label":"Close recent activity",children:""})]})]})]})}):a.jsx(a.Fragment,{})}const Sm=6e3,bk=15*6e4,Ek=1e4,Nk=24*60*6e4,We={sortKey:"sortKey",sortDir:"sortDir",sortSpec:"sortSpec",starFilters:"starFilters",filterAst:"filterAst",selectedMetric:"selectedMetric",viewMode:"viewMode",gridItemSize:"gridItemSize",leftOpen:"leftOpen",rightOpen:"rightOpen"};function jk(e){switch(e){case"live":return"Live";case"reconnecting":return"Reconnecting";case"offline":return"Offline";case"connecting":case"idle":default:return"Connecting"}}function Mk(e){return e.isOffline?"offline":e.isUnstable?"unstable":e.recentEditActive?"recent":e.editingActive?"editing":"live"}function Nv(e,t){return t-e<Nk?fS(e,t):hS(e)}function Rk(e,t){if(!e.length)return null;const n=new Set,r=[];for(const i of e)n.has(i.path)||(n.add(i.path),r.push(i.path));const s=r.slice(0,2).map(i=>{const o=t.find(l=>l.path===i);return(o==null?void 0:o.name)??i.split("/").pop()??i});return{count:r.length,names:s,extra:Math.max(0,r.length-s.length)}}function Lk(e,t,n){return e.length?e.map(r=>{const s=t.find(l=>l.path===r.path),i=(s==null?void 0:s.name)??r.path.split("/").pop()??r.path,o=Nv(r.ts,n);return{path:r.path,label:i,timeLabel:o}}):[]}function Tk(e,t){return e?t instanceof Sn||t instanceof Error?t.message:"Failed to load embeddings.":null}function _k(e,t,n,r){return e||t?n:r}function Pk(e,t,n,r,s,i){return e?n:t||i==="/"?r:s}function Ik(){var ef,tf,nf;const[e,t]=d.useState("/"),[n,r]=d.useState(""),[s,i]=d.useState([]),[o,l]=d.useState(!1),[u,c]=d.useState(null),[f,h]=d.useState(null),[g,w]=d.useState(!1),[k,N]=d.useState(0),[L,y]=d.useState(0),[m,p]=d.useState(null),[v,C]=d.useState(100),[R,M]=d.useState(null),[b,T]=d.useState(()=>({filters:{and:[]},sort:{kind:"builtin",key:"added",dir:"desc"},selectedMetric:void 0})),[E,P]=d.useState(()=>Date.now()),[Q,O]=d.useState("adaptive"),[$,ie]=d.useState(220),[B,le]=d.useState(!0),[I,V]=d.useState(!0),[q,he]=d.useState("folders"),[fe,Me]=d.useState([]),[W,Y]=d.useState(null),[te,me]=d.useState(0),[Re,Ve]=d.useState({}),Be=d.useRef(null),lt=d.useRef(null),Qe=d.useRef(null),Cn=d.useRef(null),Ee=d.useRef(!1),kt=d.useRef(!1),cn=d.useRef(null),U=d.useRef(null),{leftW:se,rightW:oe,onResizeLeft:ye,onResizeRight:ue}=sk(Be,q),[ve,Z]=d.useState(!1),[H,ae]=d.useState(null),ke=br(),be=eS(),Ct=ta(),D=nS(),[ne,ce]=d.useState("idle"),[Ne,bt]=d.useState({}),[dn,oo]=d.useState([]),[rs,sa]=d.useState([]),[nt,Er]=d.useState(null),[lo,jv]=d.useState(!1),[Mv,Od]=d.useState(new Set),ia=d.useRef(new Map),[Hn,Rv]=d.useState(null),[Dd,Lv]=d.useState(null),[Tv,oa]=d.useState(!1),[ei,la]=d.useState(()=>Date.now()),[_v,Pv]=d.useState(!0);d.useEffect(()=>{const x=_=>{const F=Dn(_),A=RS(F)?F:null,J=A?Gh(F):F;A?(h(A),i([A])):(h(null),Ee.current=!1),t(de=>de===J?de:(y(G=>G+1),J))};x(qh());const j=()=>x(qh());return window.addEventListener("hashchange",j),()=>window.removeEventListener("hashchange",j)},[]),d.useEffect(()=>()=>{for(const x of ia.current.values())window.clearTimeout(x);ia.current.clear()},[]),d.useEffect(()=>{if(Dd==null){oa(!1);return}oa(!0);const x=window.setTimeout(()=>oa(!1),Sm);return()=>window.clearTimeout(x)},[Dd]),d.useEffect(()=>{if(Hn==null)return;la(Date.now());const x=window.setInterval(()=>la(Date.now()),1e4);return()=>window.clearInterval(x)},[Hn]);const{data:Ie,refetch:aa,isLoading:Vk,isError:Qk}=Cc(e,!0),{data:ua}=Cc("/",!0,{enabled:!1}),Xt=u!==null,Nr=!Xt&&n.trim().length>0,zd=ok(n,250),Ad=d.useMemo(()=>zd.trim().replace(/\s+/g," "),[zd]),ao=bS(Nr?Ad:"",e),ss=NS(),$d=((ef=ss.data)==null?void 0:ef.embeddings)??[],Iv=((tf=ss.data)==null?void 0:tf.rejected)??[],Fv=$d.length>0,Ov=Tk(ss.isError,ss.error),ca=d.useMemo(()=>Xh(b.filters),[b.filters]),Ut=d.useMemo(()=>{var j;return(Nr?((j=ao.data)==null?void 0:j.items)??[]:(Ie==null?void 0:Ie.items)??[]).map(_=>({..._,star:Re[_.path]!==void 0?Re[_.path]:_.star}))},[Nr,ao.data,Ie,Re]),Ud=d.useMemo(()=>{var _;const x=new Map;for(const F of Ut)x.set(F.path,F);const j=((_=ao.data)==null?void 0:_.items)??[];for(const F of j){if(x.has(F.path))continue;const A=Re[F.path]!==void 0?Re[F.path]:F.star;x.set(F.path,{...F,star:A})}return x},[Ut,ao.data,Re]),fn=d.useMemo(()=>u?u.items.map(x=>{const j=Ud.get(x.path);return j||Uk(x.path,Re[x.path])}):[],[u,Ud,Re]),Ke=d.useMemo(()=>{if(u)return nm(fn,b.filters);const x=nm(Ut,b.filters);return nk(x,b.sort,E)},[u,fn,Ut,b.filters,b.sort,E]),ti=u?fn.length:Ut.length,da=Ke.length,_t=d.useMemo(()=>Ke.map(x=>x.path),[Ke]),Bd=d.useMemo(()=>new Set(s),[s]),Dv=d.useMemo(()=>{if(!s.length)return[];const x=u?fn:Ut,j=new Map(x.map(F=>[F.path,F])),_=new Map(Ke.map(F=>[F.path,F]));return s.map(F=>j.get(F)??_.get(F)).filter(F=>!!F)},[s,u,fn,Ut,Ke]),Pt=d.useMemo(()=>Ke.filter(x=>Bd.has(x.path)),[Ke,Bd]),uo=Math.max(0,Pt.length-2),jr=Math.min(k,uo),zv=Pt[jr]??null,Av=Pt[jr+1]??null,$v=jr>0,Uv=jr<Pt.length-2,ni=Pt.length>=2,Bv=u?fn:Ut,ri=u?null:b.sort.kind==="metric"?b.sort.key:null,Wd=d.useMemo(()=>ri?Ke.some(x=>{var _;const j=(_=x.metrics)==null?void 0:_[ri];return j!=null&&!Number.isNaN(j)}):!1,[Ke,ri]);d.useEffect(()=>{N(x=>x>uo?uo:x)},[uo]);const Hd=d.useCallback(x=>{Od(A=>{if(A.has(x))return A;const J=new Set(A);return J.add(x),J});const j=ia.current,_=j.get(x);_&&window.clearTimeout(_);const F=window.setTimeout(()=>{Od(A=>{if(!A.has(x))return A;const J=new Set(A);return J.delete(x),J}),j.delete(x)},Sm);j.set(x,F)},[]),fa=d.useCallback(x=>{const j=Date.now(),F=Hh(x)??j,A=F>j?j:F;Rv(J=>J==null?A:J>A?J:A),Lv(j),la(j)},[]),ha=d.useCallback((x,j,_)=>{const F=Date.now(),A=Hh(_)??F;sa(J=>{const de=J.filter(ee=>ee.path!==x);return[{path:x,ts:A,kind:j},...de].slice(0,10)})},[]),ma=d.useCallback((x,j)=>{const _=Date.now();oo(F=>{const A=F.filter(de=>de.path!==x);return[{path:x,ts:_,kind:j},...A].slice(0,6)}),Hd(x)},[Hd]),pa=d.useCallback(x=>{const j=Object.prototype.hasOwnProperty.call(x,"star"),_=x.metrics!==void 0,F=x.comments!==void 0;if(!j&&!_&&!F)return;const A=de=>{if(de.path!==x.path)return de;let G=de;return j&&de.star!==x.star&&(G={...G,star:x.star??null}),_&&(G={...G,metrics:x.metrics??null}),F&&de.comments!==x.comments&&(G={...G,comments:x.comments??""}),G},J=de=>{if(!de)return de;let G=!1;const ee=de.items.map(xe=>{const at=A(xe);return at!==xe&&(G=!0),at});return G?{...de,items:ee}:de};ke.setQueriesData({predicate:({queryKey:de})=>Array.isArray(de)&&de[0]==="folder"},J),ke.setQueriesData({predicate:({queryKey:de})=>Array.isArray(de)&&de[0]==="search"},J)},[ke]),Wv=d.useCallback(()=>{me(x=>x+1)},[]);d.useEffect(()=>{Xw();const x=Zw(_=>{if(_.type==="presence"){const J=_.data;if(!(J!=null&&J.gallery_id))return;bt(de=>({...de,[J.gallery_id]:J}));return}const F=_.data;if(!(F!=null&&F.path))return;const A=F.path;if(_.type==="item-updated"){const J=_.data,de={v:1,tags:J.tags??[],notes:J.notes??"",star:J.star??null,version:J.version??1,updated_at:J.updated_at??"",updated_by:J.updated_by??"server"};ke.setQueryData(qi(A),de),pa({path:A,star:J.star??null,metrics:J.metrics,comments:J.notes??""}),iS(A,de),ma(A,"item-updated"),ha(A,"item-updated",J.updated_at),fa(J.updated_at),Ve(G=>{if(G[A]===void 0)return G;const ee={...G};return delete ee[A],ee})}else if(_.type==="metrics-updated"){const J=_.data;pa({path:A,metrics:J.metrics}),ma(A,"metrics-updated"),ha(A,"metrics-updated",J.updated_at),fa(J.updated_at)}}),j=e1(ce);return()=>{x(),j(),Jw()}},[ma,ha,ke,pa,fa]),d.useEffect(()=>{let x=!1;const j=Dn(e||"/"),_=async()=>{try{const A=await ge.postPresence(j);!x&&(A!=null&&A.gallery_id)&&bt(J=>({...J,[A.gallery_id]:A}))}catch{}};_();const F=window.setInterval(_,3e4);return()=>{x=!0,window.clearInterval(F)}},[e]),d.useEffect(()=>{let x=!1;return ge.getHealth().then(j=>{var F;if(x)return;const _=((F=j==null?void 0:j.labels)==null?void 0:F.enabled)??!0;Pv(_)}).catch(()=>{}),()=>{x=!0}},[]);const Hv=d.useMemo(()=>{const x=u?fn:Ut,j={0:0,1:0,2:0,3:0,4:0,5:0};for(const _ of x){const F=Re[_.path]??_.star??0;j[String(F)]=(j[String(F)]||0)+1}return j},[u,fn,Ut,Re]),Vn=d.useMemo(()=>{const x=new Set;let j=0;const _=u?fn:Ut;for(const F of _){const A=F.metrics;if(A)for(const J of Object.keys(A))x.add(J);if(j+=1,j>=250&&x.size>0)break}return Array.from(x).sort()},[u,fn,Ut]);d.useEffect(()=>{Xt||Vn.length&&T(x=>{const j=x.selectedMetric&&Vn.includes(x.selectedMetric)?x.selectedMetric:Vn[0];return j===x.selectedMetric?x:{...x,selectedMetric:j}})},[Vn,Xt]),d.useEffect(()=>{Xt||b.sort.kind==="metric"&&(Vn.includes(b.sort.key)||T(x=>({...x,sort:{kind:"builtin",key:"added",dir:x.sort.dir}})))},[Vn,b.sort,Xt]);const co=d.useMemo(()=>GS(b.filters),[b.filters]),fo=(Ie==null?void 0:Ie.items.length)??ti,Vv=e==="/"?fo:(ua==null?void 0:ua.items.length)??fo,Vd=Xt||Nr||co>0,ho=Ne[e],Qv=be.state==="syncing"?"Syncing":be.state==="error"?be.message?`Not saved  ${be.message}`:"Not saved  retry":"All changes saved",Kv=jk(ne),ga=Hn!=null,qv=d.useMemo(()=>!ga||Hn==null?"No edits yet.":Nv(Hn,ei),[ga,Hn,ei]),Qd=Hn==null?null:Math.max(0,ei-Hn),Yv=((ho==null?void 0:ho.editing)??0)>0||Qd!=null&&Qd<bk,Gv=D!=null&&D>Ek,Xv=ne==="offline"||ne==="connecting"||ne==="idle",Jv=ne==="reconnecting"||Ct||be.state==="error"||Gv,Zv=Mk({isOffline:Xv,isUnstable:Jv,recentEditActive:Tv,editingActive:Yv}),ey=d.useMemo(()=>Rk(dn,Ke),[dn,Ke]),va=d.useMemo(()=>dn.length?dn.reduce((x,j)=>Math.max(x,j.ts),0):null,[dn]),ty=lo||nt!=null&&va!=null&&va<=nt?null:ey,ny=d.useMemo(()=>Lk(rs,Ke,ei),[Ke,ei,rs]),ry=_k(Xt,Vd,da,fo),sy=Pk(Xt,Vd,ti,fo,Vv,e),Kd=d.useMemo(()=>{if(!u)return null;if(u.queryPath){const x=u.queryPath.split("/").filter(Boolean);return x.length?x[x.length-1]:u.queryPath}return u.queryVector?"Vector query":null},[u]),qd=d.useMemo(()=>u?co>0?`${da} of ${ti}`:`${ti}`:null,[u,co,da,ti]),mt=d.useCallback(x=>{T(j=>({...j,filters:x(j.filters)}))},[]),iy=d.useCallback(x=>{T(j=>({...j,filters:x}))},[]),mo=d.useCallback(()=>{mt(x=>nu(x,[]))},[mt]),Yd=d.useCallback(()=>{T(x=>({...x,filters:{and:[]}}))},[]),oy=d.useCallback(()=>{c(null);const x=U.current;U.current=null,x&&x.length?(i(x),y(j=>j+1)):i([])},[]),ly=d.useCallback(async x=>{!u&&U.current===null&&(U.current=s);const j=await ge.searchEmbeddings(x);if(c({embedding:j.embedding,queryPath:x.query_path??null,queryVector:x.query_vector_b64??null,topK:x.top_k??50,minScore:x.min_score??null,items:j.items,createdAt:Date.now()}),j.items.length){const _=x.query_path&&j.items.some(F=>F.path===x.query_path)?x.query_path:j.items[0].path;i([_]),y(F=>F+1)}else i([])},[u,s]),ya=d.useCallback((x,j)=>{mt(_=>YS(_,x,j))},[mt]),Gd=d.useMemo(()=>{var j,_,F,A,J,de;const x=[];for(const G of b.filters.and)if("stars"in G){const ee=G.stars||[];if(!ee.length)continue;x.push({id:"stars",label:`Rating in: ${iu(ee)}`,onRemove:()=>mo()})}else if("starsIn"in G){const ee=G.starsIn.values||[];if(!ee.length)continue;x.push({id:"stars-in",label:`Rating in: ${iu(ee)}`,onRemove:()=>mo()})}else if("starsNotIn"in G){const ee=G.starsNotIn.values||[];if(!ee.length)continue;x.push({id:"stars-not-in",label:`Rating not in: ${iu(ee)}`,onRemove:()=>mt(xe=>vv(xe,[]))})}else if("nameContains"in G){const ee=(j=G.nameContains.value)==null?void 0:j.trim();if(!ee)continue;x.push({id:"name-contains",label:`Filename contains: ${ee}`,onRemove:()=>mt(xe=>yv(xe,""))})}else if("nameNotContains"in G){const ee=(_=G.nameNotContains.value)==null?void 0:_.trim();if(!ee)continue;x.push({id:"name-not-contains",label:`Filename not: ${ee}`,onRemove:()=>mt(xe=>xv(xe,""))})}else if("commentsContains"in G){const ee=(F=G.commentsContains.value)==null?void 0:F.trim();if(!ee)continue;x.push({id:"comments-contains",label:`Comments contain: ${ee}`,onRemove:()=>mt(xe=>wv(xe,""))})}else if("commentsNotContains"in G){const ee=(A=G.commentsNotContains.value)==null?void 0:A.trim();if(!ee)continue;x.push({id:"comments-not-contains",label:`Comments not: ${ee}`,onRemove:()=>mt(xe=>Sv(xe,""))})}else if("urlContains"in G){const ee=(J=G.urlContains.value)==null?void 0:J.trim();if(!ee)continue;x.push({id:"url-contains",label:`URL contains: ${ee}`,onRemove:()=>mt(xe=>kv(xe,""))})}else if("urlNotContains"in G){const ee=(de=G.urlNotContains.value)==null?void 0:de.trim();if(!ee)continue;x.push({id:"url-not-contains",label:`URL not: ${ee}`,onRemove:()=>mt(xe=>Cv(xe,""))})}else if("dateRange"in G){const{from:ee,to:xe}=G.dateRange;if(!ee&&!xe)continue;x.push({id:"date-range",label:`Date: ${Dk(ee,xe)}`,onRemove:()=>mt(at=>Ec(at,null))})}else if("widthCompare"in G){const{op:ee,value:xe}=G.widthCompare;x.push({id:"width-compare",label:`Width ${ee} ${xe}`,onRemove:()=>mt(at=>rl(at,null))})}else if("heightCompare"in G){const{op:ee,value:xe}=G.heightCompare;x.push({id:"height-compare",label:`Height ${ee} ${xe}`,onRemove:()=>mt(at=>sl(at,null))})}else if("metricRange"in G){const{key:ee,min:xe,max:at}=G.metricRange;x.push({id:`metric:${ee}`,label:`${ee}: ${Ak(xe,at)}`,onRemove:()=>ya(ee,null)})}return x},[b.filters,mo,ya,mt]),ay=d.useCallback(x=>{const j=new Set(ca);j.has(x)?j.delete(x):j.add(x),T(_=>({..._,filters:nu(_.filters,Array.from(j))}))},[ca]),uy=d.useCallback(()=>{le(!0),he("metrics")},[]),cy=d.useCallback(x=>{T(j=>({...j,sort:x})),x.kind==="builtin"&&x.key==="random"&&P(Date.now())},[]),Xd=d.useCallback(x=>{if(x==="/"||x==="")return"Lenslet | Root";const j=x.split("/").filter(Boolean);if(!j.length)return"Lenslet";const _=j.slice(-2).join("/");return`Lenslet | ${j.length>2?`.../${_}`:`/${_}`}`},[]),dy=d.useMemo(()=>zk(e),[e]);d.useEffect(()=>{document.title=Xd(e)},[e,Xd]),d.useEffect(()=>{let x=!0;return ge.getViews().then(j=>{x&&Me(j.views||[])}).catch(()=>{x&&Me([])}),()=>{x=!1}},[]),d.useEffect(()=>{Nr&&(i([]),f&&(h(null),Ee.current=!1,Ao(e)))},[Nr,f,e]),d.useEffect(()=>{const x=Be.current,j=Cn.current;if(!x||!j)return;const _=()=>{const F=Math.max(48,Math.round(j.getBoundingClientRect().height));x.style.setProperty("--toolbar-h",`${F}px`)};if(_(),"ResizeObserver"in window){const F=new ResizeObserver(_);return F.observe(j),()=>F.disconnect()}return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]),d.useEffect(()=>{try{const x=localStorage.getItem(We.sortKey),j=localStorage.getItem(We.sortDir),_=localStorage.getItem(We.sortSpec),F=localStorage.getItem(We.starFilters),A=localStorage.getItem(We.filterAst),J=localStorage.getItem(We.selectedMetric),de=localStorage.getItem(We.viewMode),G=localStorage.getItem(We.gridItemSize),ee=localStorage.getItem(We.leftOpen),xe=localStorage.getItem(We.rightOpen),rf=(ut=>{if(!ut)return null;const Ye=Za(ut);return!Ye||typeof Ye!="object"?null:Ye.kind==="builtin"&&(Ye.key==="name"||Ye.key==="added"||Ye.key==="random")&&(Ye.dir==="asc"||Ye.dir==="desc")||Ye.kind==="metric"&&typeof Ye.key=="string"&&Ye.key.length>0&&(Ye.dir==="asc"||Ye.dir==="desc")?Ye:null})(_)??{kind:"builtin",key:x==="name"||x==="added"||x==="random"?x:"added",dir:j==="asc"||j==="desc"?j:"desc"};rf.key==="random"&&P(Date.now());let ka=(ut=>{if(!ut)return null;const Ye=Za(ut);return bc(Ye)})(A)??{and:[]};if(F){const ut=Za(F);if(Array.isArray(ut)){const Ye=ut.filter(wy=>[0,1,2,3,4,5].includes(wy));ka=nu(ka,Ye)}}if(T(ut=>({...ut,sort:rf,filters:ka,selectedMetric:J||ut.selectedMetric})),(de==="grid"||de==="adaptive")&&O(de),G){const ut=Number(G);!isNaN(ut)&&ut>=80&&ut<=500&&ie(ut)}(ee==="0"||ee==="false")&&le(!1),(xe==="0"||xe==="false")&&V(!1)}catch{}},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia("(max-width: 900px)"),j=()=>{x.matches&&(le(!1),V(!1))};return j(),"addEventListener"in x?(x.addEventListener("change",j),()=>x.removeEventListener("change",j)):(x.addListener(j),()=>x.removeListener(j))},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=[1,1.25,1.5,1.75,2,3,4],j=A=>x.reduce((J,de)=>Math.abs(de-A)<Math.abs(J-A)?de:J,x[0]),_=()=>{var at;const A=window.devicePixelRatio||1,J=j(A),de=((at=window.visualViewport)==null?void 0:at.scale)??1,G=A*de/J;if(!Number.isFinite(G)){M(null);return}const ee=Math.round(G*100),xe=Math.min(500,Math.max(25,ee));M(xe)};_(),window.addEventListener("resize",_),window.addEventListener("orientationchange",_);const F=window.visualViewport;return F&&F.addEventListener("resize",_),()=>{window.removeEventListener("resize",_),window.removeEventListener("orientationchange",_),F&&F.removeEventListener("resize",_)}},[]),d.useEffect(()=>{try{localStorage.setItem(We.sortKey,b.sort.kind==="builtin"?b.sort.key:"added"),localStorage.setItem(We.sortDir,b.sort.dir),localStorage.setItem(We.sortSpec,JSON.stringify(b.sort));const x=Xh(b.filters);localStorage.setItem(We.starFilters,JSON.stringify(x)),localStorage.setItem(We.filterAst,JSON.stringify(b.filters)),b.selectedMetric?localStorage.setItem(We.selectedMetric,b.selectedMetric):localStorage.removeItem(We.selectedMetric),localStorage.setItem(We.viewMode,Q),localStorage.setItem(We.gridItemSize,String($)),localStorage.setItem(We.leftOpen,B?"1":"0"),localStorage.setItem(We.rightOpen,I?"1":"0")}catch{}},[b,Q,$,B,I]),d.useEffect(()=>{const x=lt.current;if(!x)return;const j=F=>Math.min(500,Math.max(80,F)),_=F=>{F.ctrlKey&&(f||g||(F.preventDefault(),ie(A=>j(A+(F.deltaY<0?20:-20)))))};return x.addEventListener("wheel",_,{passive:!1}),()=>x.removeEventListener("wheel",_)},[f,g]),d.useEffect(()=>{if(f||g)return;const x=lt.current;if(!x)return;const j=G=>Math.min(500,Math.max(80,G));let _=null;const F=G=>{if(G.length<2)return 0;const[ee,xe]=[G[0],G[1]];return Math.hypot(ee.clientX-xe.clientX,ee.clientY-xe.clientY)},A=G=>{if(G.touches.length!==2)return;const ee=F(G.touches);ee&&(_={dist:ee,size:$})},J=G=>{if(!_||G.touches.length!==2)return;const ee=F(G.touches);if(!ee)return;G.preventDefault();const xe=j(_.size*(ee/_.dist));ie(xe)},de=()=>{_=null};return x.addEventListener("touchstart",A,{passive:!0}),x.addEventListener("touchmove",J,{passive:!1}),x.addEventListener("touchend",de),x.addEventListener("touchcancel",de),()=>{x.removeEventListener("touchstart",A),x.removeEventListener("touchmove",J),x.removeEventListener("touchend",de),x.removeEventListener("touchcancel",de)}},[f,g,$]),d.useEffect(()=>{if(!f)return;const x=_t.indexOf(f);if(x===-1)return;const j=[_t[x-2],_t[x-1],_t[x+1],_t[x+2]].filter(_=>!!_);for(const _ of j)ge.prefetchFile(_),ge.prefetchThumb(_)},[f,_t]),d.useEffect(()=>{var _;if(!g||Pt.length<2)return;const x=jr,j=new Set;for(const F of[-2,-1,0,1,2,3]){const A=x+F;A>=0&&A<Pt.length&&j.add(A)}for(const F of j){const A=(_=Pt[F])==null?void 0:_.path;A&&(ge.prefetchFile(A),ge.prefetchThumb(A))}},[g,Pt,jr]),d.useEffect(()=>{var j;if(!((j=Ie==null?void 0:Ie.items)!=null&&j.length))return;const x=Ie.items.slice(0,5);for(const _ of x)ge.prefetchFile(_.path)},[Ie==null?void 0:Ie.path,Ie==null?void 0:Ie.items]);const po=d.useCallback(x=>{h(null),Ee.current=!1;const j=Dn(x);t(j),Yh(j)},[]),fy=d.useCallback(async()=>{const x=window.prompt("Save Smart Folder as:","New Smart Folder");if(!x)return;const j=Fk(x,fe),_={id:j,name:x,pool:{kind:"folder",path:e},view:JSON.parse(JSON.stringify(b))},F=[...fe.filter(A=>A.id!==j),_];Me(F),Y(j);try{await ge.saveViews({version:1,views:F})}catch(A){if(A instanceof Sn&&A.status===403){const J=new Blob([JSON.stringify({version:1,views:F},null,2)],{type:"application/json"});jc(J,`lenslet-smart-folder-${j}.json`),alert("No-write mode: exported Smart Folder JSON instead of saving.");return}console.error("Failed to save Smart Folder:",A)}},[e,b,fe]);d.useEffect(()=>{if(!W)return;const x=fe.find(F=>F.id===W);if(!x){Y(null);return}const j=x.pool.path===e,_=JSON.stringify(x.view)===JSON.stringify(b);(!j||!_)&&Y(null)},[W,fe,e,b]);const go=d.useCallback(x=>{if(!x)return;const j=document.getElementById(`cell-${encodeURIComponent(x)}`);j==null||j.focus()},[]),hy=d.useCallback(x=>{h(x),Ee.current=!0,Yh(x)},[]),Jd=d.useCallback(()=>{h(null),Ee.current?(Ee.current=!1,window.history.back()):Ao(e),go(cn.current)},[go]),my=d.useCallback(()=>{g||!ni||(s[0]&&(cn.current=s[0]),N(0),w(!0),f&&(h(null),Ee.current&&(Ee.current=!1),Ao(e)),kt.current||(window.history.pushState({compare:!0},"",window.location.href),kt.current=!0))},[g,ni,s,f,e]),xa=d.useCallback(()=>{w(!1),kt.current&&(kt.current=!1,window.history.back()),go(cn.current??s[0])},[go,s]),py=d.useCallback(x=>{Pt.length<2||N(j=>{const _=Math.max(0,Pt.length-2);return Math.min(_,Math.max(0,j+x))})},[Pt.length]);d.useEffect(()=>{g&&(ni||xa())},[g,ni,xa]),d.useEffect(()=>{const x=()=>{f&&(Ee.current=!1,h(null)),g&&(kt.current=!1,w(!1))};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[f,g]),d.useEffect(()=>{const x=Be.current;if(!x)return;const j=A=>{A.dataTransfer&&Array.from(A.dataTransfer.types).includes("Files")&&(A.preventDefault(),Z(!0))},_=A=>{const J=A.relatedTarget;J&&x.contains(J)||Z(!1)},F=async A=>{var G,ee;A.preventDefault(),Z(!1);const J=Array.from(((G=A.dataTransfer)==null?void 0:G.files)??[]);if(!J.length)return;if(!((((ee=Ie==null?void 0:Ie.dirs)==null?void 0:ee.length)??0)===0)){alert("Uploads are only allowed into folders without subdirectories.");return}for(const xe of J)try{await ge.uploadFile(e,xe)}catch(at){console.error(`Failed to upload ${xe.name}:`,at)}aa()};return x.addEventListener("dragover",j),x.addEventListener("dragleave",_),x.addEventListener("drop",F),()=>{x.removeEventListener("dragover",j),x.removeEventListener("dragleave",_),x.removeEventListener("drop",F)}},[e,(nf=Ie==null?void 0:Ie.dirs)==null?void 0:nf.length,aa]),d.useEffect(()=>{const x=()=>ae(null),j=_=>{_.key==="Escape"&&ae(null)};return window.addEventListener("click",x),window.addEventListener("keydown",j),()=>{window.removeEventListener("click",x),window.removeEventListener("keydown",j)}},[]),d.useEffect(()=>{const x=j=>{if(!Ld(j.target)){if((j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="b"){j.preventDefault(),j.altKey?V(_=>!_):le(_=>!_);return}if(!(f||g)){if(j.key==="Backspace"||j.key==="Delete")j.preventDefault(),po(Gh(e));else if((j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="a")j.preventDefault(),i(Ke.map(_=>_.path));else if(j.key==="Escape")s.length&&(j.preventDefault(),i([]));else if(j.key==="/"){j.preventDefault();const _=document.querySelector(".toolbar-right .input");_==null||_.focus()}}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,Ke,s,f,g,po]);const gy=B?`${se}px`:"0px",vy=I?`${oe}px`:"0px",Zd=f??s[0]??null,wa=Zd?_t.indexOf(Zd):-1,yy=wa>0,xy=wa>=0&&wa<_t.length-1,Sa=d.useCallback(x=>{if(!_t.length)return;const j=f??s[0];if(!j)return;const _=_t.indexOf(j);if(_===-1)return;const F=Math.min(_t.length-1,Math.max(0,_+x)),A=_t[F];!A||A===j||(f&&(h(A),Ao(A)),i([A]))},[_t,f,s]);return a.jsxs("div",{className:"app-shell grid h-full grid-cols-[var(--left)_1fr_var(--right)]",ref:Be,style:{"--left":gy,"--right":vy},children:[a.jsx(Iw,{rootRef:Cn,onSearch:r,viewerActive:!!f,onBack:Jd,zoomPercent:f?v:void 0,onZoomPercentChange:x=>p(x),currentLabel:dy,itemCount:ry,totalCount:sy,sortSpec:b.sort,metricKeys:Vn,onSortChange:cy,sortDisabled:Xt,filterCount:co,onOpenFilters:uy,starFilters:ca,onToggleStar:ay,onClearStars:mo,onClearFilters:Yd,starCounts:Hv,viewMode:Q,onViewMode:O,gridItemSize:$,onGridItemSize:ie,leftOpen:B,rightOpen:I,onToggleLeft:()=>le(x=>!x),onToggleRight:()=>V(x=>!x),onPrevImage:()=>Sa(-1),onNextImage:()=>Sa(1),canPrevImage:yy,canNextImage:xy,searchDisabled:Xt,searchPlaceholder:Xt?"Exit similarity to search":void 0,syncIndicator:{state:Zv,presence:ho,syncLabel:Qv,connectionLabel:Kv,lastEditedLabel:qv,hasEdits:ga,recentTouches:ny}}),B&&a.jsx(kk,{leftTool:q,onToolChange:he,compareEnabled:ni,compareActive:g,onOpenCompare:my,views:fe,activeViewId:W,onActivateView:x=>{var _;Y(x.id);const j=bc((_=x.view)==null?void 0:_.filters)??{and:[]};T({...x.view,filters:j}),po(x.pool.path)},onSaveView:fy,current:e,data:Ie,onOpenFolder:x=>{Y(null),po(x)},onContextMenu:(x,j)=>{x.preventDefault(),ae({x:x.clientX,y:x.clientY,kind:"tree",payload:{path:j}})},countVersion:te,items:Bv,filteredItems:Ke,metricKeys:Vn,selectedItems:Dv,selectedMetric:b.selectedMetric,onSelectMetric:x=>T(j=>({...j,selectedMetric:x})),filters:b.filters,onChangeRange:ya,onChangeFilters:iy,onResize:ye}),a.jsxs("div",{className:"grid-shell col-start-2 row-start-2 relative overflow-hidden flex flex-col",ref:lt,children:[a.jsx("div",{"aria-live":"polite",className:"sr-only",children:s.length?`${s.length} selected`:""}),a.jsx(Ck,{persistenceEnabled:_v,recentSummary:ty,onDismissRecent:()=>jv(!0),onCloseRecent:()=>Er(va??Date.now()),browserZoomPercent:R}),u&&a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"font-semibold",children:"Similarity mode"}),a.jsxs("span",{className:"text-muted",children:["Embedding: ",u.embedding]}),Kd&&a.jsxs("span",{className:"text-muted",children:["Query: ",Kd]}),qd&&a.jsxs("span",{className:"text-muted",children:["Results: ",qd]}),a.jsxs("span",{className:"text-muted",children:["Top K: ",u.topK]}),u.minScore!=null&&a.jsxs("span",{className:"text-muted",children:["Min score: ",u.minScore]})]}),a.jsx("button",{className:"btn btn-sm",onClick:oy,children:"Exit similarity"})]})}),Gd.length>0&&a.jsx("div",{className:"sticky top-0 z-10 px-3 py-2 bg-panel border-b border-border",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Filters"}),Gd.map(x=>a.jsxs("span",{className:"filter-chip",children:[a.jsx("span",{className:"truncate max-w-[240px]",title:x.label,children:x.label}),a.jsx("button",{className:"filter-chip-remove","aria-label":`Clear filter ${x.label}`,onClick:x.onRemove,children:""})]},x.id)),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:Yd,children:"Clear all"})]})}),!1,a.jsxs("div",{className:"flex-1 min-h-0 relative",children:[a.jsx(M1,{items:Ke,selected:s,restoreToSelectionToken:L,onSelectionChange:i,onOpenViewer:x=>{try{cn.current=x}catch{}hy(x),i([x])},highlight:Nr?Ad:"",recentlyUpdated:Mv,suppressSelectionHighlight:!!f||g,viewMode:Q,targetCellSize:$,onContextMenuItem:(x,j)=>{x.preventDefault();const _=s.length?s:[j];ae({x:x.clientX,y:x.clientY,kind:"grid",payload:{paths:_}})},scrollRef:Qe,hideScrollbar:Wd}),Wd&&ri&&a.jsx(T1,{items:Ke,metricKey:ri,scrollRef:Qe,sortDir:b.sort.dir})]})]}),I&&a.jsx(yS,{path:s[0]??null,selectedPaths:s,items:Ke,sortSpec:b.sort,onResize:ue,onStarChanged:(x,j)=>{Ve(_=>{const F={..._};for(const A of x)F[A]=j;return F})},onFindSimilar:()=>l(!0),embeddingsAvailable:Fv,embeddingsLoading:ss.isLoading}),a.jsx(xS,{open:o,embeddings:$d,rejected:Iv,selectedPath:s[0]??null,embeddingsLoading:ss.isLoading,embeddingsError:Ov,onClose:()=>l(!1),onSearch:ly}),f&&a.jsx($1,{path:f,onClose:Jd,onZoomChange:x=>C(Math.round(x)),requestedZoomPercent:m,onZoomRequestConsumed:()=>p(null),onNavigate:Sa}),g&&a.jsx(V1,{aItem:zv,bItem:Av,index:jr,total:Pt.length,canPrev:$v,canNext:Uv,onNavigate:py,onClose:xa}),ve&&a.jsx("div",{className:"toolbar-offset fixed inset-0 left-[var(--left)] right-[var(--right)] bg-accent/10 border-2 border-dashed border-accent text-text flex items-center justify-center text-lg z-overlay pointer-events-none",children:"Drop images to upload"}),H&&a.jsx(Bk,{ctx:H,current:e,items:Ke,refetch:aa,setCtx:ae,onInvalidateCounts:Wv})]})}function Fk(e,t){const n=Ok(e)||"view",r=new Set(t.map(i=>i.id));if(!r.has(n))return n;let s=2;for(;r.has(`${n}-${s}`);)s+=1;return`${n}-${s}`}function Ok(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function iu(e){const t=e.filter(s=>s>0).sort((s,i)=>i-s),n=e.includes(0),r=[...t.map(s=>String(s))];return n&&r.push("None"),r.join(", ")}function Dk(e,t){return e&&t?`${e} to ${t}`:e?`from ${e}`:t?`to ${t}`:""}function zk(e){if(e==="/"||e==="")return"Root";const t=e.split("/").filter(Boolean);return t.length?t.length<=2?`/${t.join("/")}`:`.../${t.slice(-2).join("/")}`:"Root"}function Ak(e,t){return`${km(e)}${km(t)}`}function km(e){const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function $k(e){const t=e.toLowerCase();return t.endsWith(".png")?"image/png":t.endsWith(".webp")?"image/webp":"image/jpeg"}function Uk(e,t){const n=e.split("/").pop()??e;return{path:e,name:n,type:$k(e),w:0,h:0,size:0,hasThumb:!0,hasMeta:!1,star:t??null}}function jc(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function Bk({ctx:e,current:t,items:n,refetch:r,setCtx:s,onInvalidateCounts:i}){const o=TS(t),l=br(),[u,c]=il.useState(!1),[f,h]=il.useState(null),g=()=>new Date().toISOString().replace(/[:.]/g,"-"),w=m=>{const p=v=>m==="/"?!0:v===m||v.startsWith(`${m}/`);l.invalidateQueries({predicate:({queryKey:v})=>{if(!Array.isArray(v)||v[0]!=="folder")return!1;const C=typeof v[1]=="string"?v[1]:"";return p(C)}})},k=m=>{const p=Dn(m);return p===""?"/":p},N=async()=>{const m=k(e.payload.path||"/");c(!0);try{await ge.refreshFolder(m),w(m),i(),(t===m||t.startsWith(m==="/"?"/":`${m}/`))&&await r(),hc.evictPrefix(m),us.evictPrefix(m)}catch(p){console.error("Failed to refresh folder:",p)}finally{c(!1),s(null)}},L=m=>async()=>{h(m);const p=e.payload.path||t;try{const C=(await ge.getFolder(p,void 0,!0)).items,R=am(C),M=m==="csv"?lm(R):om(R),b=m==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8",T=p==="/"?"root":(p.replace(/^\/+/,"")||"root").replace(/\//g,"_");jc(new Blob([M],{type:b}),`metadata_${T}_${g()}.${m}`)}catch(v){console.error("Failed to export folder:",v),alert("Failed to export folder. See console for details.")}finally{h(null),s(null)}},y=e.kind==="tree"?[{label:u?"Refreshing":"Refresh",disabled:u,onClick:N},{label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f||u,onClick:L("csv")},{label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f||u,onClick:L("json")}]:(()=>{const m=e.payload.paths??[],p=[],v=C=>async()=>{h(C);try{const R=new Set(m),M=n.filter(P=>R.has(P.path)),b=am(M),T=C==="csv"?lm(b):om(b),E=C==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8";jc(new Blob([T],{type:E}),`metadata_selection_${g()}.${C}`)}finally{h(null),s(null)}};return p.push({label:"Move to trash",disabled:o,onClick:async()=>{if(!o){for(const C of m)try{await ge.moveFile(C,"/_trash_")}catch(R){console.error(`Failed to trash ${C}:`,R)}r(),s(null)}}}),o&&(p.push({label:"Permanent delete",danger:!0,onClick:async()=>{if(confirm(`Delete ${m.length} file(s) permanently? This cannot be undone.`)){try{await ge.deleteFiles(m)}catch(C){console.error("Failed to delete files:",C)}r(),s(null)}}}),p.push({label:"Recover",onClick:async()=>{for(const C of m)try{const M=(await ge.getSidecar(C)).original_position,b=M&&M.split("/").slice(0,-1).join("/")||"/";await ge.moveFile(C,b)}catch(R){console.error(`Failed to recover ${C}:`,R)}r(),s(null)}})),m.length&&(p.push({label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f,onClick:v("csv")}),p.push({label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f,onClick:v("json")})),p})();return a.jsx(ik,{x:e.x,y:e.y,items:y})}const Wk=new yw({defaultOptions:{queries:{staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always"},mutations:{retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),5e3)}}});function Hk(){return a.jsx(xw,{client:Wk,children:a.jsx(Ik,{})})}Qg(document.getElementById("root")).render(a.jsx(Hk,{}));
