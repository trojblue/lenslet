var by=Object.defineProperty;var rf=e=>{throw TypeError(e)};var Ey=(e,t,n)=>t in e?by(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var bn=(e,t,n)=>Ey(e,typeof t!="symbol"?t+"":t,n),wa=(e,t,n)=>t.has(e)||rf("Cannot "+n);var k=(e,t,n)=>(wa(e,t,"read from private field"),n?n.call(e):t.get(e)),se=(e,t,n)=>t.has(e)?rf("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),K=(e,t,n,r)=>(wa(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),pe=(e,t,n)=>(wa(e,t,"access private method"),n);var mo=(e,t,n,r)=>({set _(s){K(e,t,s,n)},get _(){return k(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Ny(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pm={exports:{}},Il={},Im={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var to=Symbol.for("react.element"),jy=Symbol.for("react.portal"),My=Symbol.for("react.fragment"),Ry=Symbol.for("react.strict_mode"),Ly=Symbol.for("react.profiler"),Ty=Symbol.for("react.provider"),_y=Symbol.for("react.context"),Py=Symbol.for("react.forward_ref"),Iy=Symbol.for("react.suspense"),Fy=Symbol.for("react.memo"),Oy=Symbol.for("react.lazy"),sf=Symbol.iterator;function Dy(e){return e===null||typeof e!="object"?null:(e=sf&&e[sf]||e["@@iterator"],typeof e=="function"?e:null)}var Fm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Om=Object.assign,Dm={};function Ys(e,t,n){this.props=e,this.context=t,this.refs=Dm,this.updater=n||Fm}Ys.prototype.isReactComponent={};Ys.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ys.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function zm(){}zm.prototype=Ys.prototype;function Ec(e,t,n){this.props=e,this.context=t,this.refs=Dm,this.updater=n||Fm}var Nc=Ec.prototype=new zm;Nc.constructor=Ec;Om(Nc,Ys.prototype);Nc.isPureReactComponent=!0;var of=Array.isArray,Am=Object.prototype.hasOwnProperty,jc={current:null},$m={key:!0,ref:!0,__self:!0,__source:!0};function Um(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Am.call(t,r)&&!$m.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:to,type:e,key:i,ref:o,props:s,_owner:jc.current}}function zy(e,t){return{$$typeof:to,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Mc(e){return typeof e=="object"&&e!==null&&e.$$typeof===to}function Ay(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var lf=/\/+/g;function Sa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ay(""+e.key):t.toString(36)}function Do(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case to:case jy:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Sa(o,0):r,of(s)?(n="",e!=null&&(n=e.replace(lf,"$&/")+"/"),Do(s,t,n,"",function(c){return c})):s!=null&&(Mc(s)&&(s=zy(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(lf,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",of(e))for(var l=0;l<e.length;l++){i=e[l];var u=r+Sa(i,l);o+=Do(i,t,n,u,s)}else if(u=Dy(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=r+Sa(i,l++),o+=Do(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function po(e,t,n){if(e==null)return e;var r=[],s=0;return Do(e,r,"","",function(i){return t.call(n,i,s++)}),r}function $y(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var St={current:null},zo={transition:null},Uy={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:zo,ReactCurrentOwner:jc};function Bm(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:po,forEach:function(e,t,n){po(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return po(e,function(){t++}),t},toArray:function(e){return po(e,function(t){return t})||[]},only:function(e){if(!Mc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xe.Component=Ys;xe.Fragment=My;xe.Profiler=Ly;xe.PureComponent=Ec;xe.StrictMode=Ry;xe.Suspense=Iy;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uy;xe.act=Bm;xe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Om({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=jc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)Am.call(t,u)&&!$m.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:to,type:e.type,key:s,ref:i,props:r,_owner:o}};xe.createContext=function(e){return e={$$typeof:_y,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ty,_context:e},e.Consumer=e};xe.createElement=Um;xe.createFactory=function(e){var t=Um.bind(null,e);return t.type=e,t};xe.createRef=function(){return{current:null}};xe.forwardRef=function(e){return{$$typeof:Py,render:e}};xe.isValidElement=Mc;xe.lazy=function(e){return{$$typeof:Oy,_payload:{_status:-1,_result:e},_init:$y}};xe.memo=function(e,t){return{$$typeof:Fy,type:e,compare:t===void 0?null:t}};xe.startTransition=function(e){var t=zo.transition;zo.transition={};try{e()}finally{zo.transition=t}};xe.unstable_act=Bm;xe.useCallback=function(e,t){return St.current.useCallback(e,t)};xe.useContext=function(e){return St.current.useContext(e)};xe.useDebugValue=function(){};xe.useDeferredValue=function(e){return St.current.useDeferredValue(e)};xe.useEffect=function(e,t){return St.current.useEffect(e,t)};xe.useId=function(){return St.current.useId()};xe.useImperativeHandle=function(e,t,n){return St.current.useImperativeHandle(e,t,n)};xe.useInsertionEffect=function(e,t){return St.current.useInsertionEffect(e,t)};xe.useLayoutEffect=function(e,t){return St.current.useLayoutEffect(e,t)};xe.useMemo=function(e,t){return St.current.useMemo(e,t)};xe.useReducer=function(e,t,n){return St.current.useReducer(e,t,n)};xe.useRef=function(e){return St.current.useRef(e)};xe.useState=function(e){return St.current.useState(e)};xe.useSyncExternalStore=function(e,t,n){return St.current.useSyncExternalStore(e,t,n)};xe.useTransition=function(){return St.current.useTransition()};xe.version="18.3.1";Im.exports=xe;var d=Im.exports;const nl=Ny(d);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var By=d,Wy=Symbol.for("react.element"),Hy=Symbol.for("react.fragment"),Vy=Object.prototype.hasOwnProperty,Qy=By.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ky={key:!0,ref:!0,__self:!0,__source:!0};function Wm(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Vy.call(t,r)&&!Ky.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Wy,type:e,key:i,ref:o,props:s,_owner:Qy.current}}Il.Fragment=Hy;Il.jsx=Wm;Il.jsxs=Wm;Pm.exports=Il;var a=Pm.exports,Hm={exports:{}},Dt={},Vm={exports:{}},Qm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,V){var q=O.length;O.push(V);e:for(;0<q;){var fe=q-1>>>1,de=O[fe];if(0<s(de,V))O[fe]=V,O[q]=de,q=fe;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var V=O[0],q=O.pop();if(q!==V){O[0]=q;e:for(var fe=0,de=O.length,be=de>>>1;fe<be;){var H=2*(fe+1)-1,Y=O[H],ne=H+1,he=O[ne];if(0>s(Y,q))ne<de&&0>s(he,Y)?(O[fe]=he,O[ne]=q,fe=ne):(O[fe]=Y,O[H]=q,fe=H);else if(ne<de&&0>s(he,q))O[fe]=he,O[ne]=q,fe=ne;else break e}}return V}function s(O,V){var q=O.sortIndex-V.sortIndex;return q!==0?q:O.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,h=null,g=3,S=!1,w=!1,N=!1,R=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(O){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=O)r(c),V.sortIndex=V.expirationTime,t(u,V);else break;V=n(c)}}function y(O){if(N=!1,m(O),!w)if(n(u)!==null)w=!0,B(b);else{var V=n(c);V!==null&&ue(y,V.startTime-O)}}function b(O,V){w=!1,N&&(N=!1,v(E),E=-1),S=!0;var q=g;try{for(m(V),h=n(u);h!==null&&(!(h.expirationTime>V)||O&&!F());){var fe=h.callback;if(typeof fe=="function"){h.callback=null,g=h.priorityLevel;var de=fe(h.expirationTime<=V);V=e.unstable_now(),typeof de=="function"?h.callback=de:h===n(u)&&r(u),m(V)}else r(u);h=n(u)}if(h!==null)var be=!0;else{var H=n(c);H!==null&&ue(y,H.startTime-V),be=!1}return be}finally{h=null,g=q,S=!1}}var L=!1,M=null,E=-1,T=5,C=-1;function F(){return!(e.unstable_now()-C<T)}function Q(){if(M!==null){var O=e.unstable_now();C=O;var V=!0;try{V=M(!0,O)}finally{V?z():(L=!1,M=null)}}else L=!1}var z;if(typeof p=="function")z=function(){p(Q)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,oe=$.port2;$.port1.onmessage=Q,z=function(){oe.postMessage(null)}}else z=function(){R(Q,0)};function B(O){M=O,L||(L=!0,z())}function ue(O,V){E=R(function(){O(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){w||S||(w=!0,B(b))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(O){switch(g){case 1:case 2:case 3:var V=3;break;default:V=g}var q=g;g=V;try{return O()}finally{g=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,V){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var q=g;g=O;try{return V()}finally{g=q}},e.unstable_scheduleCallback=function(O,V,q){var fe=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?fe+q:fe):q=fe,O){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=q+de,O={id:f++,callback:V,priorityLevel:O,startTime:q,expirationTime:de,sortIndex:-1},q>fe?(O.sortIndex=q,t(c,O),n(u)===null&&O===n(c)&&(N?(v(E),E=-1):N=!0,ue(y,q-fe))):(O.sortIndex=de,t(u,O),w||S||(w=!0,B(b))),O},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(O){var V=g;return function(){var q=g;g=V;try{return O.apply(this,arguments)}finally{g=q}}}})(Qm);Vm.exports=Qm;var qy=Vm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy=d,Ot=qy;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Km=new Set,Ri={};function Zr(e,t){Bs(e,t),Bs(e+"Capture",t)}function Bs(e,t){for(Ri[e]=t,e=0;e<t.length;e++)Km.add(t[e])}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ru=Object.prototype.hasOwnProperty,Gy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,af={},uf={};function Xy(e){return ru.call(uf,e)?!0:ru.call(af,e)?!1:Gy.test(e)?uf[e]=!0:(af[e]=!0,!1)}function Jy(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Zy(e,t,n,r){if(t===null||typeof t>"u"||Jy(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function kt(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){it[e]=new kt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];it[t]=new kt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){it[e]=new kt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){it[e]=new kt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){it[e]=new kt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){it[e]=new kt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){it[e]=new kt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){it[e]=new kt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){it[e]=new kt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Rc=/[\-:]([a-z])/g;function Lc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Rc,Lc);it[t]=new kt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Rc,Lc);it[t]=new kt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Rc,Lc);it[t]=new kt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){it[e]=new kt(e,1,!1,e.toLowerCase(),null,!1,!1)});it.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){it[e]=new kt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Tc(e,t,n,r){var s=it.hasOwnProperty(t)?it[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Zy(t,n,s,r)&&(n=null),r||s===null?Xy(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Bn=Yy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,go=Symbol.for("react.element"),us=Symbol.for("react.portal"),cs=Symbol.for("react.fragment"),_c=Symbol.for("react.strict_mode"),su=Symbol.for("react.profiler"),qm=Symbol.for("react.provider"),Ym=Symbol.for("react.context"),Pc=Symbol.for("react.forward_ref"),iu=Symbol.for("react.suspense"),ou=Symbol.for("react.suspense_list"),Ic=Symbol.for("react.memo"),Yn=Symbol.for("react.lazy"),Gm=Symbol.for("react.offscreen"),cf=Symbol.iterator;function si(e){return e===null||typeof e!="object"?null:(e=cf&&e[cf]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,ka;function hi(e){if(ka===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ka=t&&t[1]||""}return`
`+ka+e}var Ca=!1;function ba(e,t){if(!e||Ca)return"";Ca=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{Ca=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?hi(e):""}function e0(e){switch(e.tag){case 5:return hi(e.type);case 16:return hi("Lazy");case 13:return hi("Suspense");case 19:return hi("SuspenseList");case 0:case 2:case 15:return e=ba(e.type,!1),e;case 11:return e=ba(e.type.render,!1),e;case 1:return e=ba(e.type,!0),e;default:return""}}function lu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cs:return"Fragment";case us:return"Portal";case su:return"Profiler";case _c:return"StrictMode";case iu:return"Suspense";case ou:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ym:return(e.displayName||"Context")+".Consumer";case qm:return(e._context.displayName||"Context")+".Provider";case Pc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ic:return t=e.displayName||null,t!==null?t:lu(e.type)||"Memo";case Yn:t=e._payload,e=e._init;try{return lu(e(t))}catch{}}return null}function t0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lu(t);case 8:return t===_c?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function n0(e){var t=Xm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function vo(e){e._valueTracker||(e._valueTracker=n0(e))}function Jm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Xm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function rl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function au(e,t){var n=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function df(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=xr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zm(e,t){t=t.checked,t!=null&&Tc(e,"checked",t,!1)}function uu(e,t){Zm(e,t);var n=xr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?cu(e,t.type,n):t.hasOwnProperty("defaultValue")&&cu(e,t.type,xr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ff(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function cu(e,t,n){(t!=="number"||rl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var mi=Array.isArray;function Ss(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+xr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function du(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(A(92));if(mi(n)){if(1<n.length)throw Error(A(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:xr(n)}}function ep(e,t){var n=xr(t.value),r=xr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function mf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function tp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?tp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var yo,np=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(yo=yo||document.createElement("div"),yo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=yo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Li(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var xi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},r0=["Webkit","ms","Moz","O"];Object.keys(xi).forEach(function(e){r0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xi[t]=xi[e]})});function rp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||xi.hasOwnProperty(e)&&xi[e]?(""+t).trim():t+"px"}function sp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=rp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var s0=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hu(e,t){if(t){if(s0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function mu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pu=null;function Fc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gu=null,ks=null,Cs=null;function pf(e){if(e=so(e)){if(typeof gu!="function")throw Error(A(280));var t=e.stateNode;t&&(t=Al(t),gu(e.stateNode,e.type,t))}}function ip(e){ks?Cs?Cs.push(e):Cs=[e]:ks=e}function op(){if(ks){var e=ks,t=Cs;if(Cs=ks=null,pf(e),t)for(e=0;e<t.length;e++)pf(t[e])}}function lp(e,t){return e(t)}function ap(){}var Ea=!1;function up(e,t,n){if(Ea)return e(t,n);Ea=!0;try{return lp(e,t,n)}finally{Ea=!1,(ks!==null||Cs!==null)&&(ap(),op())}}function Ti(e,t){var n=e.stateNode;if(n===null)return null;var r=Al(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(A(231,t,typeof n));return n}var vu=!1;if(zn)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){vu=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{vu=!1}function i0(e,t,n,r,s,i,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var wi=!1,sl=null,il=!1,yu=null,o0={onError:function(e){wi=!0,sl=e}};function l0(e,t,n,r,s,i,o,l,u){wi=!1,sl=null,i0.apply(o0,arguments)}function a0(e,t,n,r,s,i,o,l,u){if(l0.apply(this,arguments),wi){if(wi){var c=sl;wi=!1,sl=null}else throw Error(A(198));il||(il=!0,yu=c)}}function es(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function cp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gf(e){if(es(e)!==e)throw Error(A(188))}function u0(e){var t=e.alternate;if(!t){if(t=es(e),t===null)throw Error(A(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return gf(s),e;if(i===r)return gf(s),t;i=i.sibling}throw Error(A(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?e:t}function dp(e){return e=u0(e),e!==null?fp(e):null}function fp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fp(e);if(t!==null)return t;e=e.sibling}return null}var hp=Ot.unstable_scheduleCallback,vf=Ot.unstable_cancelCallback,c0=Ot.unstable_shouldYield,d0=Ot.unstable_requestPaint,We=Ot.unstable_now,f0=Ot.unstable_getCurrentPriorityLevel,Oc=Ot.unstable_ImmediatePriority,mp=Ot.unstable_UserBlockingPriority,ol=Ot.unstable_NormalPriority,h0=Ot.unstable_LowPriority,pp=Ot.unstable_IdlePriority,Fl=null,xn=null;function m0(e){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(Fl,e,void 0,(e.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:v0,p0=Math.log,g0=Math.LN2;function v0(e){return e>>>=0,e===0?32:31-(p0(e)/g0|0)|0}var xo=64,wo=4194304;function pi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ll(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=pi(l):(i&=o,i!==0&&(r=pi(i)))}else o=n&~s,o!==0?r=pi(o):i!==0&&(r=pi(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ln(t),s=1<<n,r|=e[n],t&=~s;return r}function y0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ln(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=y0(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function xu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gp(){var e=xo;return xo<<=1,!(xo&4194240)&&(xo=64),e}function Na(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function no(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ln(t),e[t]=n}function w0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ln(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Dc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ln(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ee=0;function vp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yp,zc,xp,wp,Sp,wu=!1,So=[],cr=null,dr=null,fr=null,_i=new Map,Pi=new Map,Xn=[],S0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yf(e,t){switch(e){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":_i.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pi.delete(t.pointerId)}}function oi(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=so(t),t!==null&&zc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function k0(e,t,n,r,s){switch(t){case"focusin":return cr=oi(cr,e,t,n,r,s),!0;case"dragenter":return dr=oi(dr,e,t,n,r,s),!0;case"mouseover":return fr=oi(fr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return _i.set(i,oi(_i.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Pi.set(i,oi(Pi.get(i)||null,e,t,n,r,s)),!0}return!1}function kp(e){var t=Mr(e.target);if(t!==null){var n=es(t);if(n!==null){if(t=n.tag,t===13){if(t=cp(n),t!==null){e.blockedOn=t,Sp(e.priority,function(){xp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ao(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Su(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);pu=r,n.target.dispatchEvent(r),pu=null}else return t=so(n),t!==null&&zc(t),e.blockedOn=n,!1;t.shift()}return!0}function xf(e,t,n){Ao(e)&&n.delete(t)}function C0(){wu=!1,cr!==null&&Ao(cr)&&(cr=null),dr!==null&&Ao(dr)&&(dr=null),fr!==null&&Ao(fr)&&(fr=null),_i.forEach(xf),Pi.forEach(xf)}function li(e,t){e.blockedOn===t&&(e.blockedOn=null,wu||(wu=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,C0)))}function Ii(e){function t(s){return li(s,e)}if(0<So.length){li(So[0],e);for(var n=1;n<So.length;n++){var r=So[n];r.blockedOn===e&&(r.blockedOn=null)}}for(cr!==null&&li(cr,e),dr!==null&&li(dr,e),fr!==null&&li(fr,e),_i.forEach(t),Pi.forEach(t),n=0;n<Xn.length;n++)r=Xn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Xn.length&&(n=Xn[0],n.blockedOn===null);)kp(n),n.blockedOn===null&&Xn.shift()}var bs=Bn.ReactCurrentBatchConfig,al=!0;function b0(e,t,n,r){var s=Ee,i=bs.transition;bs.transition=null;try{Ee=1,Ac(e,t,n,r)}finally{Ee=s,bs.transition=i}}function E0(e,t,n,r){var s=Ee,i=bs.transition;bs.transition=null;try{Ee=4,Ac(e,t,n,r)}finally{Ee=s,bs.transition=i}}function Ac(e,t,n,r){if(al){var s=Su(e,t,n,r);if(s===null)Oa(e,t,r,ul,n),yf(e,r);else if(k0(s,e,t,n,r))r.stopPropagation();else if(yf(e,r),t&4&&-1<S0.indexOf(e)){for(;s!==null;){var i=so(s);if(i!==null&&yp(i),i=Su(e,t,n,r),i===null&&Oa(e,t,r,ul,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Oa(e,t,r,null,n)}}var ul=null;function Su(e,t,n,r){if(ul=null,e=Fc(r),e=Mr(e),e!==null)if(t=es(e),t===null)e=null;else if(n=t.tag,n===13){if(e=cp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ul=e,null}function Cp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(f0()){case Oc:return 1;case mp:return 4;case ol:case h0:return 16;case pp:return 536870912;default:return 16}default:return 16}}var ar=null,$c=null,$o=null;function bp(){if($o)return $o;var e,t=$c,n=t.length,r,s="value"in ar?ar.value:ar.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return $o=s.slice(e,1<r?1-r:void 0)}function Uo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ko(){return!0}function wf(){return!1}function zt(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ko:wf,this.isPropagationStopped=wf,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ko)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ko)},persist:function(){},isPersistent:ko}),t}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uc=zt(Gs),ro=Oe({},Gs,{view:0,detail:0}),N0=zt(ro),ja,Ma,ai,Ol=Oe({},ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ai&&(ai&&e.type==="mousemove"?(ja=e.screenX-ai.screenX,Ma=e.screenY-ai.screenY):Ma=ja=0,ai=e),ja)},movementY:function(e){return"movementY"in e?e.movementY:Ma}}),Sf=zt(Ol),j0=Oe({},Ol,{dataTransfer:0}),M0=zt(j0),R0=Oe({},ro,{relatedTarget:0}),Ra=zt(R0),L0=Oe({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),T0=zt(L0),_0=Oe({},Gs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),P0=zt(_0),I0=Oe({},Gs,{data:0}),kf=zt(I0),F0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},O0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},D0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=D0[e])?!!t[e]:!1}function Bc(){return z0}var A0=Oe({},ro,{key:function(e){if(e.key){var t=F0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Uo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?O0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bc,charCode:function(e){return e.type==="keypress"?Uo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Uo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$0=zt(A0),U0=Oe({},Ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cf=zt(U0),B0=Oe({},ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bc}),W0=zt(B0),H0=Oe({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),V0=zt(H0),Q0=Oe({},Ol,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),K0=zt(Q0),q0=[9,13,27,32],Wc=zn&&"CompositionEvent"in window,Si=null;zn&&"documentMode"in document&&(Si=document.documentMode);var Y0=zn&&"TextEvent"in window&&!Si,Ep=zn&&(!Wc||Si&&8<Si&&11>=Si),bf=" ",Ef=!1;function Np(e,t){switch(e){case"keyup":return q0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ds=!1;function G0(e,t){switch(e){case"compositionend":return jp(t);case"keypress":return t.which!==32?null:(Ef=!0,bf);case"textInput":return e=t.data,e===bf&&Ef?null:e;default:return null}}function X0(e,t){if(ds)return e==="compositionend"||!Wc&&Np(e,t)?(e=bp(),$o=$c=ar=null,ds=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ep&&t.locale!=="ko"?null:t.data;default:return null}}var J0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!J0[e.type]:t==="textarea"}function Mp(e,t,n,r){ip(r),t=cl(t,"onChange"),0<t.length&&(n=new Uc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ki=null,Fi=null;function Z0(e){Ap(e,0)}function Dl(e){var t=ms(e);if(Jm(t))return e}function ex(e,t){if(e==="change")return t}var Rp=!1;if(zn){var La;if(zn){var Ta="oninput"in document;if(!Ta){var jf=document.createElement("div");jf.setAttribute("oninput","return;"),Ta=typeof jf.oninput=="function"}La=Ta}else La=!1;Rp=La&&(!document.documentMode||9<document.documentMode)}function Mf(){ki&&(ki.detachEvent("onpropertychange",Lp),Fi=ki=null)}function Lp(e){if(e.propertyName==="value"&&Dl(Fi)){var t=[];Mp(t,Fi,e,Fc(e)),up(Z0,t)}}function tx(e,t,n){e==="focusin"?(Mf(),ki=t,Fi=n,ki.attachEvent("onpropertychange",Lp)):e==="focusout"&&Mf()}function nx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Dl(Fi)}function rx(e,t){if(e==="click")return Dl(t)}function sx(e,t){if(e==="input"||e==="change")return Dl(t)}function ix(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var un=typeof Object.is=="function"?Object.is:ix;function Oi(e,t){if(un(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ru.call(t,s)||!un(e[s],t[s]))return!1}return!0}function Rf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lf(e,t){var n=Rf(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rf(n)}}function Tp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Tp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _p(){for(var e=window,t=rl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=rl(e.document)}return t}function Hc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ox(e){var t=_p(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Tp(n.ownerDocument.documentElement,n)){if(r!==null&&Hc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Lf(n,i);var o=Lf(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lx=zn&&"documentMode"in document&&11>=document.documentMode,fs=null,ku=null,Ci=null,Cu=!1;function Tf(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cu||fs==null||fs!==rl(r)||(r=fs,"selectionStart"in r&&Hc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ci&&Oi(Ci,r)||(Ci=r,r=cl(ku,"onSelect"),0<r.length&&(t=new Uc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fs)))}function Co(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hs={animationend:Co("Animation","AnimationEnd"),animationiteration:Co("Animation","AnimationIteration"),animationstart:Co("Animation","AnimationStart"),transitionend:Co("Transition","TransitionEnd")},_a={},Pp={};zn&&(Pp=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function zl(e){if(_a[e])return _a[e];if(!hs[e])return e;var t=hs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Pp)return _a[e]=t[n];return e}var Ip=zl("animationend"),Fp=zl("animationiteration"),Op=zl("animationstart"),Dp=zl("transitionend"),zp=new Map,_f="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){zp.set(e,t),Zr(t,[e])}for(var Pa=0;Pa<_f.length;Pa++){var Ia=_f[Pa],ax=Ia.toLowerCase(),ux=Ia[0].toUpperCase()+Ia.slice(1);Sr(ax,"on"+ux)}Sr(Ip,"onAnimationEnd");Sr(Fp,"onAnimationIteration");Sr(Op,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(Dp,"onTransitionEnd");Bs("onMouseEnter",["mouseout","mouseover"]);Bs("onMouseLeave",["mouseout","mouseover"]);Bs("onPointerEnter",["pointerout","pointerover"]);Bs("onPointerLeave",["pointerout","pointerover"]);Zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cx=new Set("cancel close invalid load scroll toggle".split(" ").concat(gi));function Pf(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,a0(r,t,void 0,e),e.currentTarget=null}function Ap(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Pf(s,l,c),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Pf(s,l,c),i=u}}}if(il)throw e=yu,il=!1,yu=null,e}function Me(e,t){var n=t[Mu];n===void 0&&(n=t[Mu]=new Set);var r=e+"__bubble";n.has(r)||($p(t,e,2,!1),n.add(r))}function Fa(e,t,n){var r=0;t&&(r|=4),$p(n,e,r,t)}var bo="_reactListening"+Math.random().toString(36).slice(2);function Di(e){if(!e[bo]){e[bo]=!0,Km.forEach(function(n){n!=="selectionchange"&&(cx.has(n)||Fa(n,!1,e),Fa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bo]||(t[bo]=!0,Fa("selectionchange",!1,t))}}function $p(e,t,n,r){switch(Cp(t)){case 1:var s=b0;break;case 4:s=E0;break;default:s=Ac}n=s.bind(null,t,n,e),s=void 0,!vu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Oa(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Mr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}up(function(){var c=i,f=Fc(n),h=[];e:{var g=zp.get(e);if(g!==void 0){var S=Uc,w=e;switch(e){case"keypress":if(Uo(n)===0)break e;case"keydown":case"keyup":S=$0;break;case"focusin":w="focus",S=Ra;break;case"focusout":w="blur",S=Ra;break;case"beforeblur":case"afterblur":S=Ra;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Sf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=M0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=W0;break;case Ip:case Fp:case Op:S=T0;break;case Dp:S=V0;break;case"scroll":S=N0;break;case"wheel":S=K0;break;case"copy":case"cut":case"paste":S=P0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Cf}var N=(t&4)!==0,R=!N&&e==="scroll",v=N?g!==null?g+"Capture":null:g;N=[];for(var p=c,m;p!==null;){m=p;var y=m.stateNode;if(m.tag===5&&y!==null&&(m=y,v!==null&&(y=Ti(p,v),y!=null&&N.push(zi(p,y,m)))),R)break;p=p.return}0<N.length&&(g=new S(g,w,null,n,f),h.push({event:g,listeners:N}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",g&&n!==pu&&(w=n.relatedTarget||n.fromElement)&&(Mr(w)||w[An]))break e;if((S||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,S?(w=n.relatedTarget||n.toElement,S=c,w=w?Mr(w):null,w!==null&&(R=es(w),w!==R||w.tag!==5&&w.tag!==6)&&(w=null)):(S=null,w=c),S!==w)){if(N=Sf,y="onMouseLeave",v="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(N=Cf,y="onPointerLeave",v="onPointerEnter",p="pointer"),R=S==null?g:ms(S),m=w==null?g:ms(w),g=new N(y,p+"leave",S,n,f),g.target=R,g.relatedTarget=m,y=null,Mr(f)===c&&(N=new N(v,p+"enter",w,n,f),N.target=m,N.relatedTarget=R,y=N),R=y,S&&w)t:{for(N=S,v=w,p=0,m=N;m;m=ss(m))p++;for(m=0,y=v;y;y=ss(y))m++;for(;0<p-m;)N=ss(N),p--;for(;0<m-p;)v=ss(v),m--;for(;p--;){if(N===v||v!==null&&N===v.alternate)break t;N=ss(N),v=ss(v)}N=null}else N=null;S!==null&&If(h,g,S,N,!1),w!==null&&R!==null&&If(h,R,w,N,!0)}}e:{if(g=c?ms(c):window,S=g.nodeName&&g.nodeName.toLowerCase(),S==="select"||S==="input"&&g.type==="file")var b=ex;else if(Nf(g))if(Rp)b=sx;else{b=nx;var L=tx}else(S=g.nodeName)&&S.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(b=rx);if(b&&(b=b(e,c))){Mp(h,b,n,f);break e}L&&L(e,g,c),e==="focusout"&&(L=g._wrapperState)&&L.controlled&&g.type==="number"&&cu(g,"number",g.value)}switch(L=c?ms(c):window,e){case"focusin":(Nf(L)||L.contentEditable==="true")&&(fs=L,ku=c,Ci=null);break;case"focusout":Ci=ku=fs=null;break;case"mousedown":Cu=!0;break;case"contextmenu":case"mouseup":case"dragend":Cu=!1,Tf(h,n,f);break;case"selectionchange":if(lx)break;case"keydown":case"keyup":Tf(h,n,f)}var M;if(Wc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ds?Np(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Ep&&n.locale!=="ko"&&(ds||E!=="onCompositionStart"?E==="onCompositionEnd"&&ds&&(M=bp()):(ar=f,$c="value"in ar?ar.value:ar.textContent,ds=!0)),L=cl(c,E),0<L.length&&(E=new kf(E,e,null,n,f),h.push({event:E,listeners:L}),M?E.data=M:(M=jp(n),M!==null&&(E.data=M)))),(M=Y0?G0(e,n):X0(e,n))&&(c=cl(c,"onBeforeInput"),0<c.length&&(f=new kf("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:c}),f.data=M))}Ap(h,t)})}function zi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function cl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ti(e,n),i!=null&&r.unshift(zi(e,i,s)),i=Ti(e,t),i!=null&&r.push(zi(e,i,s))),e=e.return}return r}function ss(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function If(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,s?(u=Ti(n,i),u!=null&&o.unshift(zi(n,u,l))):s||(u=Ti(n,i),u!=null&&o.push(zi(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var dx=/\r\n?/g,fx=/\u0000|\uFFFD/g;function Ff(e){return(typeof e=="string"?e:""+e).replace(dx,`
`).replace(fx,"")}function Eo(e,t,n){if(t=Ff(t),Ff(e)!==t&&n)throw Error(A(425))}function dl(){}var bu=null,Eu=null;function Nu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ju=typeof setTimeout=="function"?setTimeout:void 0,hx=typeof clearTimeout=="function"?clearTimeout:void 0,Of=typeof Promise=="function"?Promise:void 0,mx=typeof queueMicrotask=="function"?queueMicrotask:typeof Of<"u"?function(e){return Of.resolve(null).then(e).catch(px)}:ju;function px(e){setTimeout(function(){throw e})}function Da(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ii(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ii(t)}function hr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Df(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Xs=Math.random().toString(36).slice(2),yn="__reactFiber$"+Xs,Ai="__reactProps$"+Xs,An="__reactContainer$"+Xs,Mu="__reactEvents$"+Xs,gx="__reactListeners$"+Xs,vx="__reactHandles$"+Xs;function Mr(e){var t=e[yn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[An]||n[yn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Df(e);e!==null;){if(n=e[yn])return n;e=Df(e)}return t}e=n,n=e.parentNode}return null}function so(e){return e=e[yn]||e[An],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ms(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function Al(e){return e[Ai]||null}var Ru=[],ps=-1;function kr(e){return{current:e}}function Re(e){0>ps||(e.current=Ru[ps],Ru[ps]=null,ps--)}function je(e,t){ps++,Ru[ps]=e.current,e.current=t}var wr={},dt=kr(wr),jt=kr(!1),Qr=wr;function Ws(e,t){var n=e.type.contextTypes;if(!n)return wr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Mt(e){return e=e.childContextTypes,e!=null}function fl(){Re(jt),Re(dt)}function zf(e,t,n){if(dt.current!==wr)throw Error(A(168));je(dt,t),je(jt,n)}function Up(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(A(108,t0(e)||"Unknown",s));return Oe({},n,r)}function hl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wr,Qr=dt.current,je(dt,e),je(jt,jt.current),!0}function Af(e,t,n){var r=e.stateNode;if(!r)throw Error(A(169));n?(e=Up(e,t,Qr),r.__reactInternalMemoizedMergedChildContext=e,Re(jt),Re(dt),je(dt,e)):Re(jt),je(jt,n)}var Mn=null,$l=!1,za=!1;function Bp(e){Mn===null?Mn=[e]:Mn.push(e)}function yx(e){$l=!0,Bp(e)}function Cr(){if(!za&&Mn!==null){za=!0;var e=0,t=Ee;try{var n=Mn;for(Ee=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Mn=null,$l=!1}catch(s){throw Mn!==null&&(Mn=Mn.slice(e+1)),hp(Oc,Cr),s}finally{Ee=t,za=!1}}return null}var gs=[],vs=0,ml=null,pl=0,Bt=[],Wt=0,Kr=null,Pn=1,In="";function Nr(e,t){gs[vs++]=pl,gs[vs++]=ml,ml=e,pl=t}function Wp(e,t,n){Bt[Wt++]=Pn,Bt[Wt++]=In,Bt[Wt++]=Kr,Kr=e;var r=Pn;e=In;var s=32-ln(r)-1;r&=~(1<<s),n+=1;var i=32-ln(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pn=1<<32-ln(t)+s|n<<s|r,In=i+e}else Pn=1<<i|n<<s|r,In=e}function Vc(e){e.return!==null&&(Nr(e,1),Wp(e,1,0))}function Qc(e){for(;e===ml;)ml=gs[--vs],gs[vs]=null,pl=gs[--vs],gs[vs]=null;for(;e===Kr;)Kr=Bt[--Wt],Bt[Wt]=null,In=Bt[--Wt],Bt[Wt]=null,Pn=Bt[--Wt],Bt[Wt]=null}var Ft=null,It=null,Te=!1,sn=null;function Hp(e,t){var n=Vt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function $f(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ft=e,It=hr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ft=e,It=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Kr!==null?{id:Pn,overflow:In}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Vt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ft=e,It=null,!0):!1;default:return!1}}function Lu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Tu(e){if(Te){var t=It;if(t){var n=t;if(!$f(e,t)){if(Lu(e))throw Error(A(418));t=hr(n.nextSibling);var r=Ft;t&&$f(e,t)?Hp(r,n):(e.flags=e.flags&-4097|2,Te=!1,Ft=e)}}else{if(Lu(e))throw Error(A(418));e.flags=e.flags&-4097|2,Te=!1,Ft=e}}}function Uf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ft=e}function No(e){if(e!==Ft)return!1;if(!Te)return Uf(e),Te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Nu(e.type,e.memoizedProps)),t&&(t=It)){if(Lu(e))throw Vp(),Error(A(418));for(;t;)Hp(e,t),t=hr(t.nextSibling)}if(Uf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){It=hr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}It=null}}else It=Ft?hr(e.stateNode.nextSibling):null;return!0}function Vp(){for(var e=It;e;)e=hr(e.nextSibling)}function Hs(){It=Ft=null,Te=!1}function Kc(e){sn===null?sn=[e]:sn.push(e)}var xx=Bn.ReactCurrentBatchConfig;function ui(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,e))}return e}function jo(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Bf(e){var t=e._init;return t(e._payload)}function Qp(e){function t(v,p){if(e){var m=v.deletions;m===null?(v.deletions=[p],v.flags|=16):m.push(p)}}function n(v,p){if(!e)return null;for(;p!==null;)t(v,p),p=p.sibling;return null}function r(v,p){for(v=new Map;p!==null;)p.key!==null?v.set(p.key,p):v.set(p.index,p),p=p.sibling;return v}function s(v,p){return v=vr(v,p),v.index=0,v.sibling=null,v}function i(v,p,m){return v.index=m,e?(m=v.alternate,m!==null?(m=m.index,m<p?(v.flags|=2,p):m):(v.flags|=2,p)):(v.flags|=1048576,p)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,p,m,y){return p===null||p.tag!==6?(p=Va(m,v.mode,y),p.return=v,p):(p=s(p,m),p.return=v,p)}function u(v,p,m,y){var b=m.type;return b===cs?f(v,p,m.props.children,y,m.key):p!==null&&(p.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Yn&&Bf(b)===p.type)?(y=s(p,m.props),y.ref=ui(v,p,m),y.return=v,y):(y=qo(m.type,m.key,m.props,null,v.mode,y),y.ref=ui(v,p,m),y.return=v,y)}function c(v,p,m,y){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=Qa(m,v.mode,y),p.return=v,p):(p=s(p,m.children||[]),p.return=v,p)}function f(v,p,m,y,b){return p===null||p.tag!==7?(p=Vr(m,v.mode,y,b),p.return=v,p):(p=s(p,m),p.return=v,p)}function h(v,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Va(""+p,v.mode,m),p.return=v,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case go:return m=qo(p.type,p.key,p.props,null,v.mode,m),m.ref=ui(v,null,p),m.return=v,m;case us:return p=Qa(p,v.mode,m),p.return=v,p;case Yn:var y=p._init;return h(v,y(p._payload),m)}if(mi(p)||si(p))return p=Vr(p,v.mode,m,null),p.return=v,p;jo(v,p)}return null}function g(v,p,m,y){var b=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return b!==null?null:l(v,p,""+m,y);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case go:return m.key===b?u(v,p,m,y):null;case us:return m.key===b?c(v,p,m,y):null;case Yn:return b=m._init,g(v,p,b(m._payload),y)}if(mi(m)||si(m))return b!==null?null:f(v,p,m,y,null);jo(v,m)}return null}function S(v,p,m,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return v=v.get(m)||null,l(p,v,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case go:return v=v.get(y.key===null?m:y.key)||null,u(p,v,y,b);case us:return v=v.get(y.key===null?m:y.key)||null,c(p,v,y,b);case Yn:var L=y._init;return S(v,p,m,L(y._payload),b)}if(mi(y)||si(y))return v=v.get(m)||null,f(p,v,y,b,null);jo(p,y)}return null}function w(v,p,m,y){for(var b=null,L=null,M=p,E=p=0,T=null;M!==null&&E<m.length;E++){M.index>E?(T=M,M=null):T=M.sibling;var C=g(v,M,m[E],y);if(C===null){M===null&&(M=T);break}e&&M&&C.alternate===null&&t(v,M),p=i(C,p,E),L===null?b=C:L.sibling=C,L=C,M=T}if(E===m.length)return n(v,M),Te&&Nr(v,E),b;if(M===null){for(;E<m.length;E++)M=h(v,m[E],y),M!==null&&(p=i(M,p,E),L===null?b=M:L.sibling=M,L=M);return Te&&Nr(v,E),b}for(M=r(v,M);E<m.length;E++)T=S(M,v,E,m[E],y),T!==null&&(e&&T.alternate!==null&&M.delete(T.key===null?E:T.key),p=i(T,p,E),L===null?b=T:L.sibling=T,L=T);return e&&M.forEach(function(F){return t(v,F)}),Te&&Nr(v,E),b}function N(v,p,m,y){var b=si(m);if(typeof b!="function")throw Error(A(150));if(m=b.call(m),m==null)throw Error(A(151));for(var L=b=null,M=p,E=p=0,T=null,C=m.next();M!==null&&!C.done;E++,C=m.next()){M.index>E?(T=M,M=null):T=M.sibling;var F=g(v,M,C.value,y);if(F===null){M===null&&(M=T);break}e&&M&&F.alternate===null&&t(v,M),p=i(F,p,E),L===null?b=F:L.sibling=F,L=F,M=T}if(C.done)return n(v,M),Te&&Nr(v,E),b;if(M===null){for(;!C.done;E++,C=m.next())C=h(v,C.value,y),C!==null&&(p=i(C,p,E),L===null?b=C:L.sibling=C,L=C);return Te&&Nr(v,E),b}for(M=r(v,M);!C.done;E++,C=m.next())C=S(M,v,E,C.value,y),C!==null&&(e&&C.alternate!==null&&M.delete(C.key===null?E:C.key),p=i(C,p,E),L===null?b=C:L.sibling=C,L=C);return e&&M.forEach(function(Q){return t(v,Q)}),Te&&Nr(v,E),b}function R(v,p,m,y){if(typeof m=="object"&&m!==null&&m.type===cs&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case go:e:{for(var b=m.key,L=p;L!==null;){if(L.key===b){if(b=m.type,b===cs){if(L.tag===7){n(v,L.sibling),p=s(L,m.props.children),p.return=v,v=p;break e}}else if(L.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Yn&&Bf(b)===L.type){n(v,L.sibling),p=s(L,m.props),p.ref=ui(v,L,m),p.return=v,v=p;break e}n(v,L);break}else t(v,L);L=L.sibling}m.type===cs?(p=Vr(m.props.children,v.mode,y,m.key),p.return=v,v=p):(y=qo(m.type,m.key,m.props,null,v.mode,y),y.ref=ui(v,p,m),y.return=v,v=y)}return o(v);case us:e:{for(L=m.key;p!==null;){if(p.key===L)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(v,p.sibling),p=s(p,m.children||[]),p.return=v,v=p;break e}else{n(v,p);break}else t(v,p);p=p.sibling}p=Qa(m,v.mode,y),p.return=v,v=p}return o(v);case Yn:return L=m._init,R(v,p,L(m._payload),y)}if(mi(m))return w(v,p,m,y);if(si(m))return N(v,p,m,y);jo(v,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(v,p.sibling),p=s(p,m),p.return=v,v=p):(n(v,p),p=Va(m,v.mode,y),p.return=v,v=p),o(v)):n(v,p)}return R}var Vs=Qp(!0),Kp=Qp(!1),gl=kr(null),vl=null,ys=null,qc=null;function Yc(){qc=ys=vl=null}function Gc(e){var t=gl.current;Re(gl),e._currentValue=t}function _u(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){vl=e,qc=ys=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nt=!0),e.firstContext=null)}function Kt(e){var t=e._currentValue;if(qc!==e)if(e={context:e,memoizedValue:t,next:null},ys===null){if(vl===null)throw Error(A(308));ys=e,vl.dependencies={lanes:0,firstContext:e}}else ys=ys.next=e;return t}var Rr=null;function Xc(e){Rr===null?Rr=[e]:Rr.push(e)}function qp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Xc(t)):(n.next=s.next,s.next=n),t.interleaved=n,$n(e,r)}function $n(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Gn=!1;function Jc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,$n(e,n)}return s=r.interleaved,s===null?(t.next=t,Xc(r)):(t.next=s.next,s.next=t),r.interleaved=t,$n(e,n)}function Bo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Dc(e,n)}}function Wf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function yl(e,t,n,r){var s=e.updateQueue;Gn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(i!==null){var h=s.baseState;o=0,f=c=u=null,l=i;do{var g=l.lane,S=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,N=l;switch(g=t,S=n,N.tag){case 1:if(w=N.payload,typeof w=="function"){h=w.call(S,h,g);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=N.payload,g=typeof w=="function"?w.call(S,h,g):w,g==null)break e;h=Oe({},h,g);break e;case 2:Gn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else S={eventTime:S,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=S,u=h):f=f.next=S,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Yr|=o,e.lanes=o,e.memoizedState=h}}function Hf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(A(191,s));s.call(r)}}}var io={},wn=kr(io),$i=kr(io),Ui=kr(io);function Lr(e){if(e===io)throw Error(A(174));return e}function Zc(e,t){switch(je(Ui,t),je($i,e),je(wn,io),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fu(t,e)}Re(wn),je(wn,t)}function Qs(){Re(wn),Re($i),Re(Ui)}function Gp(e){Lr(Ui.current);var t=Lr(wn.current),n=fu(t,e.type);t!==n&&(je($i,e),je(wn,n))}function ed(e){$i.current===e&&(Re(wn),Re($i))}var Ie=kr(0);function xl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Aa=[];function td(){for(var e=0;e<Aa.length;e++)Aa[e]._workInProgressVersionPrimary=null;Aa.length=0}var Wo=Bn.ReactCurrentDispatcher,$a=Bn.ReactCurrentBatchConfig,qr=0,Fe=null,Ge=null,et=null,wl=!1,bi=!1,Bi=0,wx=0;function at(){throw Error(A(321))}function nd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!un(e[n],t[n]))return!1;return!0}function rd(e,t,n,r,s,i){if(qr=i,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wo.current=e===null||e.memoizedState===null?bx:Ex,e=n(r,s),bi){i=0;do{if(bi=!1,Bi=0,25<=i)throw Error(A(301));i+=1,et=Ge=null,t.updateQueue=null,Wo.current=Nx,e=n(r,s)}while(bi)}if(Wo.current=Sl,t=Ge!==null&&Ge.next!==null,qr=0,et=Ge=Fe=null,wl=!1,t)throw Error(A(300));return e}function sd(){var e=Bi!==0;return Bi=0,e}function mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Fe.memoizedState=et=e:et=et.next=e,et}function qt(){if(Ge===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var t=et===null?Fe.memoizedState:et.next;if(t!==null)et=t,Ge=e;else{if(e===null)throw Error(A(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},et===null?Fe.memoizedState=et=e:et=et.next=e}return et}function Wi(e,t){return typeof t=="function"?t(e):t}function Ua(e){var t=qt(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=Ge,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,c=i;do{var f=c.lane;if((qr&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,o=r):u=u.next=h,Fe.lanes|=f,Yr|=f}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=l,un(r,t.memoizedState)||(Nt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Fe.lanes|=i,Yr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ba(e){var t=qt(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);un(i,t.memoizedState)||(Nt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Xp(){}function Jp(e,t){var n=Fe,r=qt(),s=t(),i=!un(r.memoizedState,s);if(i&&(r.memoizedState=s,Nt=!0),r=r.queue,id(tg.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,Hi(9,eg.bind(null,n,r,s,t),void 0,null),tt===null)throw Error(A(349));qr&30||Zp(n,t,s)}return s}function Zp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function eg(e,t,n,r){t.value=n,t.getSnapshot=r,ng(t)&&rg(e)}function tg(e,t,n){return n(function(){ng(t)&&rg(e)})}function ng(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!un(e,n)}catch{return!0}}function rg(e){var t=$n(e,1);t!==null&&an(t,e,1,-1)}function Vf(e){var t=mn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:e},t.queue=e,e=e.dispatch=Cx.bind(null,Fe,e),[t.memoizedState,e]}function Hi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function sg(){return qt().memoizedState}function Ho(e,t,n,r){var s=mn();Fe.flags|=e,s.memoizedState=Hi(1|t,n,void 0,r===void 0?null:r)}function Ul(e,t,n,r){var s=qt();r=r===void 0?null:r;var i=void 0;if(Ge!==null){var o=Ge.memoizedState;if(i=o.destroy,r!==null&&nd(r,o.deps)){s.memoizedState=Hi(t,n,i,r);return}}Fe.flags|=e,s.memoizedState=Hi(1|t,n,i,r)}function Qf(e,t){return Ho(8390656,8,e,t)}function id(e,t){return Ul(2048,8,e,t)}function ig(e,t){return Ul(4,2,e,t)}function og(e,t){return Ul(4,4,e,t)}function lg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ag(e,t,n){return n=n!=null?n.concat([e]):null,Ul(4,4,lg.bind(null,t,e),n)}function od(){}function ug(e,t){var n=qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&nd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function cg(e,t){var n=qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&nd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function dg(e,t,n){return qr&21?(un(n,t)||(n=gp(),Fe.lanes|=n,Yr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nt=!0),e.memoizedState=n)}function Sx(e,t){var n=Ee;Ee=n!==0&&4>n?n:4,e(!0);var r=$a.transition;$a.transition={};try{e(!1),t()}finally{Ee=n,$a.transition=r}}function fg(){return qt().memoizedState}function kx(e,t,n){var r=gr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hg(e))mg(t,n);else if(n=qp(e,t,n,r),n!==null){var s=wt();an(n,e,r,s),pg(n,t,r)}}function Cx(e,t,n){var r=gr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hg(e))mg(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,un(l,o)){var u=t.interleaved;u===null?(s.next=s,Xc(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=qp(e,t,s,r),n!==null&&(s=wt(),an(n,e,r,s),pg(n,t,r))}}function hg(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function mg(e,t){bi=wl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pg(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Dc(e,n)}}var Sl={readContext:Kt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},bx={readContext:Kt,useCallback:function(e,t){return mn().memoizedState=[e,t===void 0?null:t],e},useContext:Kt,useEffect:Qf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ho(4194308,4,lg.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ho(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ho(4,2,e,t)},useMemo:function(e,t){var n=mn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=mn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=kx.bind(null,Fe,e),[r.memoizedState,e]},useRef:function(e){var t=mn();return e={current:e},t.memoizedState=e},useState:Vf,useDebugValue:od,useDeferredValue:function(e){return mn().memoizedState=e},useTransition:function(){var e=Vf(!1),t=e[0];return e=Sx.bind(null,e[1]),mn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Fe,s=mn();if(Te){if(n===void 0)throw Error(A(407));n=n()}else{if(n=t(),tt===null)throw Error(A(349));qr&30||Zp(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Qf(tg.bind(null,r,i,e),[e]),r.flags|=2048,Hi(9,eg.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=mn(),t=tt.identifierPrefix;if(Te){var n=In,r=Pn;n=(r&~(1<<32-ln(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Bi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=wx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ex={readContext:Kt,useCallback:ug,useContext:Kt,useEffect:id,useImperativeHandle:ag,useInsertionEffect:ig,useLayoutEffect:og,useMemo:cg,useReducer:Ua,useRef:sg,useState:function(){return Ua(Wi)},useDebugValue:od,useDeferredValue:function(e){var t=qt();return dg(t,Ge.memoizedState,e)},useTransition:function(){var e=Ua(Wi)[0],t=qt().memoizedState;return[e,t]},useMutableSource:Xp,useSyncExternalStore:Jp,useId:fg,unstable_isNewReconciler:!1},Nx={readContext:Kt,useCallback:ug,useContext:Kt,useEffect:id,useImperativeHandle:ag,useInsertionEffect:ig,useLayoutEffect:og,useMemo:cg,useReducer:Ba,useRef:sg,useState:function(){return Ba(Wi)},useDebugValue:od,useDeferredValue:function(e){var t=qt();return Ge===null?t.memoizedState=e:dg(t,Ge.memoizedState,e)},useTransition:function(){var e=Ba(Wi)[0],t=qt().memoizedState;return[e,t]},useMutableSource:Xp,useSyncExternalStore:Jp,useId:fg,unstable_isNewReconciler:!1};function Zt(e,t){if(e&&e.defaultProps){t=Oe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Pu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Oe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Bl={isMounted:function(e){return(e=e._reactInternals)?es(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=wt(),s=gr(e),i=Fn(r,s);i.payload=t,n!=null&&(i.callback=n),t=mr(e,i,s),t!==null&&(an(t,e,s,r),Bo(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=wt(),s=gr(e),i=Fn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=mr(e,i,s),t!==null&&(an(t,e,s,r),Bo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=wt(),r=gr(e),s=Fn(n,r);s.tag=2,t!=null&&(s.callback=t),t=mr(e,s,r),t!==null&&(an(t,e,r,n),Bo(t,e,r))}};function Kf(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Oi(n,r)||!Oi(s,i):!0}function gg(e,t,n){var r=!1,s=wr,i=t.contextType;return typeof i=="object"&&i!==null?i=Kt(i):(s=Mt(t)?Qr:dt.current,r=t.contextTypes,i=(r=r!=null)?Ws(e,s):wr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Bl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function qf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bl.enqueueReplaceState(t,t.state,null)}function Iu(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Jc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Kt(i):(i=Mt(t)?Qr:dt.current,s.context=Ws(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Pu(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Bl.enqueueReplaceState(s,s.state,null),yl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ks(e,t){try{var n="",r=t;do n+=e0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Wa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Fu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var jx=typeof WeakMap=="function"?WeakMap:Map;function vg(e,t,n){n=Fn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Cl||(Cl=!0,Vu=r),Fu(e,t)},n}function yg(e,t,n){n=Fn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Fu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Fu(e,t),typeof r!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Yf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new jx;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Ux.bind(null,e,t,n),t.then(e,e))}function Gf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Xf(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Fn(-1,1),t.tag=2,mr(n,t,1))),n.lanes|=1),e)}var Mx=Bn.ReactCurrentOwner,Nt=!1;function yt(e,t,n,r){t.child=e===null?Kp(t,null,n,r):Vs(t,e.child,n,r)}function Jf(e,t,n,r,s){n=n.render;var i=t.ref;return Es(t,s),r=rd(e,t,n,r,i,s),n=sd(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Un(e,t,s)):(Te&&n&&Vc(t),t.flags|=1,yt(e,t,r,s),t.child)}function Zf(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!md(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,xg(e,t,i,r,s)):(e=qo(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Oi,n(o,r)&&e.ref===t.ref)return Un(e,t,s)}return t.flags|=1,e=vr(i,r),e.ref=t.ref,e.return=t,t.child=e}function xg(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Oi(i,r)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Nt=!0);else return t.lanes=e.lanes,Un(e,t,s)}return Ou(e,t,n,r,s)}function wg(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(ws,Pt),Pt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,je(ws,Pt),Pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,je(ws,Pt),Pt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,je(ws,Pt),Pt|=r;return yt(e,t,s,n),t.child}function Sg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ou(e,t,n,r,s){var i=Mt(n)?Qr:dt.current;return i=Ws(t,i),Es(t,s),n=rd(e,t,n,r,i,s),r=sd(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Un(e,t,s)):(Te&&r&&Vc(t),t.flags|=1,yt(e,t,n,s),t.child)}function eh(e,t,n,r,s){if(Mt(n)){var i=!0;hl(t)}else i=!1;if(Es(t,s),t.stateNode===null)Vo(e,t),gg(t,n,r),Iu(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Kt(c):(c=Mt(n)?Qr:dt.current,c=Ws(t,c));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&qf(t,o,r,c),Gn=!1;var g=t.memoizedState;o.state=g,yl(t,r,o,s),u=t.memoizedState,l!==r||g!==u||jt.current||Gn?(typeof f=="function"&&(Pu(t,n,f,r),u=t.memoizedState),(l=Gn||Kf(t,n,l,r,g,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Yp(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Zt(t.type,l),o.props=c,h=t.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Kt(u):(u=Mt(n)?Qr:dt.current,u=Ws(t,u));var S=n.getDerivedStateFromProps;(f=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||g!==u)&&qf(t,o,r,u),Gn=!1,g=t.memoizedState,o.state=g,yl(t,r,o,s);var w=t.memoizedState;l!==h||g!==w||jt.current||Gn?(typeof S=="function"&&(Pu(t,n,S,r),w=t.memoizedState),(c=Gn||Kf(t,n,c,r,g,w,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Du(e,t,n,r,i,s)}function Du(e,t,n,r,s,i){Sg(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Af(t,n,!1),Un(e,t,i);r=t.stateNode,Mx.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Vs(t,e.child,null,i),t.child=Vs(t,null,l,i)):yt(e,t,l,i),t.memoizedState=r.state,s&&Af(t,n,!0),t.child}function kg(e){var t=e.stateNode;t.pendingContext?zf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&zf(e,t.context,!1),Zc(e,t.containerInfo)}function th(e,t,n,r,s){return Hs(),Kc(s),t.flags|=256,yt(e,t,n,r),t.child}var zu={dehydrated:null,treeContext:null,retryLane:0};function Au(e){return{baseLanes:e,cachePool:null,transitions:null}}function Cg(e,t,n){var r=t.pendingProps,s=Ie.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),je(Ie,s&1),e===null)return Tu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Vl(o,r,0,null),e=Vr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Au(n),t.memoizedState=zu,e):ld(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Rx(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=vr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=vr(l,i):(i=Vr(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Au(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=zu,r}return i=e.child,e=i.sibling,r=vr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ld(e,t){return t=Vl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Mo(e,t,n,r){return r!==null&&Kc(r),Vs(t,e.child,null,n),e=ld(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rx(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Wa(Error(A(422))),Mo(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Vl({mode:"visible",children:r.children},s,0,null),i=Vr(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Vs(t,e.child,null,o),t.child.memoizedState=Au(o),t.memoizedState=zu,i);if(!(t.mode&1))return Mo(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(A(419)),r=Wa(i,r,void 0),Mo(e,t,o,r)}if(l=(o&e.childLanes)!==0,Nt||l){if(r=tt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$n(e,s),an(r,e,s,-1))}return hd(),r=Wa(Error(A(421))),Mo(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Bx.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,It=hr(s.nextSibling),Ft=t,Te=!0,sn=null,e!==null&&(Bt[Wt++]=Pn,Bt[Wt++]=In,Bt[Wt++]=Kr,Pn=e.id,In=e.overflow,Kr=t),t=ld(t,r.children),t.flags|=4096,t)}function nh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),_u(e.return,t,n)}function Ha(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function bg(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(yt(e,t,r.children,n),r=Ie.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nh(e,n,t);else if(e.tag===19)nh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(je(Ie,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&xl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ha(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&xl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ha(t,!0,n,null,i);break;case"together":Ha(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Un(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,n=vr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=vr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Lx(e,t,n){switch(t.tag){case 3:kg(t),Hs();break;case 5:Gp(t);break;case 1:Mt(t.type)&&hl(t);break;case 4:Zc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;je(gl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(je(Ie,Ie.current&1),t.flags|=128,null):n&t.child.childLanes?Cg(e,t,n):(je(Ie,Ie.current&1),e=Un(e,t,n),e!==null?e.sibling:null);je(Ie,Ie.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return bg(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),je(Ie,Ie.current),r)break;return null;case 22:case 23:return t.lanes=0,wg(e,t,n)}return Un(e,t,n)}var Eg,$u,Ng,jg;Eg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$u=function(){};Ng=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Lr(wn.current);var i=null;switch(n){case"input":s=au(e,s),r=au(e,r),i=[];break;case"select":s=Oe({},s,{value:void 0}),r=Oe({},r,{value:void 0}),i=[];break;case"textarea":s=du(e,s),r=du(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=dl)}hu(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ri.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ri.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Me("scroll",e),i||l===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};jg=function(e,t,n,r){n!==r&&(t.flags|=4)};function ci(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Tx(e,t,n){var r=t.pendingProps;switch(Qc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return Mt(t.type)&&fl(),ut(t),null;case 3:return r=t.stateNode,Qs(),Re(jt),Re(dt),td(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(No(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,sn!==null&&(qu(sn),sn=null))),$u(e,t),ut(t),null;case 5:ed(t);var s=Lr(Ui.current);if(n=t.type,e!==null&&t.stateNode!=null)Ng(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(A(166));return ut(t),null}if(e=Lr(wn.current),No(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[yn]=t,r[Ai]=i,e=(t.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(s=0;s<gi.length;s++)Me(gi[s],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":df(r,i),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Me("invalid",r);break;case"textarea":hf(r,i),Me("invalid",r)}hu(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Eo(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Eo(r.textContent,l,e),s=["children",""+l]):Ri.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Me("scroll",r)}switch(n){case"input":vo(r),ff(r,i,!0);break;case"textarea":vo(r),mf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=dl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=tp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[yn]=t,e[Ai]=r,Eg(e,t,!1,!1),t.stateNode=e;e:{switch(o=mu(n,r),n){case"dialog":Me("cancel",e),Me("close",e),s=r;break;case"iframe":case"object":case"embed":Me("load",e),s=r;break;case"video":case"audio":for(s=0;s<gi.length;s++)Me(gi[s],e);s=r;break;case"source":Me("error",e),s=r;break;case"img":case"image":case"link":Me("error",e),Me("load",e),s=r;break;case"details":Me("toggle",e),s=r;break;case"input":df(e,r),s=au(e,r),Me("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Oe({},r,{value:void 0}),Me("invalid",e);break;case"textarea":hf(e,r),s=du(e,r),Me("invalid",e);break;default:s=r}hu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?sp(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&np(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Li(e,u):typeof u=="number"&&Li(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ri.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Me("scroll",e):u!=null&&Tc(e,i,u,o))}switch(n){case"input":vo(e),ff(e,r,!1);break;case"textarea":vo(e),mf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+xr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Ss(e,!!r.multiple,i,!1):r.defaultValue!=null&&Ss(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=dl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ut(t),null;case 6:if(e&&t.stateNode!=null)jg(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(A(166));if(n=Lr(Ui.current),Lr(wn.current),No(t)){if(r=t.stateNode,n=t.memoizedProps,r[yn]=t,(i=r.nodeValue!==n)&&(e=Ft,e!==null))switch(e.tag){case 3:Eo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Eo(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yn]=t,t.stateNode=r}return ut(t),null;case 13:if(Re(Ie),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Te&&It!==null&&t.mode&1&&!(t.flags&128))Vp(),Hs(),t.flags|=98560,i=!1;else if(i=No(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(A(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(A(317));i[yn]=t}else Hs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),i=!1}else sn!==null&&(qu(sn),sn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ie.current&1?Je===0&&(Je=3):hd())),t.updateQueue!==null&&(t.flags|=4),ut(t),null);case 4:return Qs(),$u(e,t),e===null&&Di(t.stateNode.containerInfo),ut(t),null;case 10:return Gc(t.type._context),ut(t),null;case 17:return Mt(t.type)&&fl(),ut(t),null;case 19:if(Re(Ie),i=t.memoizedState,i===null)return ut(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)ci(i,!1);else{if(Je!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=xl(e),o!==null){for(t.flags|=128,ci(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return je(Ie,Ie.current&1|2),t.child}e=e.sibling}i.tail!==null&&We()>qs&&(t.flags|=128,r=!0,ci(i,!1),t.lanes=4194304)}else{if(!r)if(e=xl(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ci(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Te)return ut(t),null}else 2*We()-i.renderingStartTime>qs&&n!==1073741824&&(t.flags|=128,r=!0,ci(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=We(),t.sibling=null,n=Ie.current,je(Ie,r?n&1|2:n&1),t):(ut(t),null);case 22:case 23:return fd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Pt&1073741824&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function _x(e,t){switch(Qc(t),t.tag){case 1:return Mt(t.type)&&fl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qs(),Re(jt),Re(dt),td(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ed(t),null;case 13:if(Re(Ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));Hs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Re(Ie),null;case 4:return Qs(),null;case 10:return Gc(t.type._context),null;case 22:case 23:return fd(),null;case 24:return null;default:return null}}var Ro=!1,ct=!1,Px=typeof WeakSet=="function"?WeakSet:Set,Z=null;function xs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(e,t,r)}else n.current=null}function Uu(e,t,n){try{n()}catch(r){$e(e,t,r)}}var rh=!1;function Ix(e,t){if(bu=al,e=_p(),Hc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,h=e,g=null;t:for(;;){for(var S;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(S=h.firstChild)!==null;)g=h,h=S;for(;;){if(h===e)break t;if(g===n&&++c===s&&(l=o),g===i&&++f===r&&(u=o),(S=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Eu={focusedElem:e,selectionRange:n},al=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var N=w.memoizedProps,R=w.memoizedState,v=t.stateNode,p=v.getSnapshotBeforeUpdate(t.elementType===t.type?N:Zt(t.type,N),R);v.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(y){$e(t,t.return,y)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return w=rh,rh=!1,w}function Ei(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Uu(t,n,i)}s=s.next}while(s!==r)}}function Wl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Bu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Mg(e){var t=e.alternate;t!==null&&(e.alternate=null,Mg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yn],delete t[Ai],delete t[Mu],delete t[gx],delete t[vx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Rg(e){return e.tag===5||e.tag===3||e.tag===4}function sh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=dl));else if(r!==4&&(e=e.child,e!==null))for(Wu(e,t,n),e=e.sibling;e!==null;)Wu(e,t,n),e=e.sibling}function Hu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Hu(e,t,n),e=e.sibling;e!==null;)Hu(e,t,n),e=e.sibling}var rt=null,rn=!1;function Qn(e,t,n){for(n=n.child;n!==null;)Lg(e,t,n),n=n.sibling}function Lg(e,t,n){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(Fl,n)}catch{}switch(n.tag){case 5:ct||xs(n,t);case 6:var r=rt,s=rn;rt=null,Qn(e,t,n),rt=r,rn=s,rt!==null&&(rn?(e=rt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(rn?(e=rt,n=n.stateNode,e.nodeType===8?Da(e.parentNode,n):e.nodeType===1&&Da(e,n),Ii(e)):Da(rt,n.stateNode));break;case 4:r=rt,s=rn,rt=n.stateNode.containerInfo,rn=!0,Qn(e,t,n),rt=r,rn=s;break;case 0:case 11:case 14:case 15:if(!ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Uu(n,t,o),s=s.next}while(s!==r)}Qn(e,t,n);break;case 1:if(!ct&&(xs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){$e(n,t,l)}Qn(e,t,n);break;case 21:Qn(e,t,n);break;case 22:n.mode&1?(ct=(r=ct)||n.memoizedState!==null,Qn(e,t,n),ct=r):Qn(e,t,n);break;default:Qn(e,t,n)}}function ih(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Px),t.forEach(function(r){var s=Wx.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:rt=l.stateNode,rn=!1;break e;case 3:rt=l.stateNode.containerInfo,rn=!0;break e;case 4:rt=l.stateNode.containerInfo,rn=!0;break e}l=l.return}if(rt===null)throw Error(A(160));Lg(i,o,s),rt=null,rn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){$e(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Tg(t,e),t=t.sibling}function Tg(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xt(t,e),hn(e),r&4){try{Ei(3,e,e.return),Wl(3,e)}catch(N){$e(e,e.return,N)}try{Ei(5,e,e.return)}catch(N){$e(e,e.return,N)}}break;case 1:Xt(t,e),hn(e),r&512&&n!==null&&xs(n,n.return);break;case 5:if(Xt(t,e),hn(e),r&512&&n!==null&&xs(n,n.return),e.flags&32){var s=e.stateNode;try{Li(s,"")}catch(N){$e(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Zm(s,i),mu(l,o);var c=mu(l,i);for(o=0;o<u.length;o+=2){var f=u[o],h=u[o+1];f==="style"?sp(s,h):f==="dangerouslySetInnerHTML"?np(s,h):f==="children"?Li(s,h):Tc(s,f,h,c)}switch(l){case"input":uu(s,i);break;case"textarea":ep(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?Ss(s,!!i.multiple,S,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ss(s,!!i.multiple,i.defaultValue,!0):Ss(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ai]=i}catch(N){$e(e,e.return,N)}}break;case 6:if(Xt(t,e),hn(e),r&4){if(e.stateNode===null)throw Error(A(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(N){$e(e,e.return,N)}}break;case 3:if(Xt(t,e),hn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ii(t.containerInfo)}catch(N){$e(e,e.return,N)}break;case 4:Xt(t,e),hn(e);break;case 13:Xt(t,e),hn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(cd=We())),r&4&&ih(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(ct=(c=ct)||f,Xt(t,e),ct=c):Xt(t,e),hn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(Z=e,f=e.child;f!==null;){for(h=Z=f;Z!==null;){switch(g=Z,S=g.child,g.tag){case 0:case 11:case 14:case 15:Ei(4,g,g.return);break;case 1:xs(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(N){$e(r,n,N)}}break;case 5:xs(g,g.return);break;case 22:if(g.memoizedState!==null){lh(h);continue}}S!==null?(S.return=g,Z=S):lh(h)}f=f.sibling}e:for(f=null,h=e;;){if(h.tag===5){if(f===null){f=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=rp("display",o))}catch(N){$e(e,e.return,N)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(N){$e(e,e.return,N)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Xt(t,e),hn(e),r&4&&ih(e);break;case 21:break;default:Xt(t,e),hn(e)}}function hn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Rg(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Li(s,""),r.flags&=-33);var i=sh(e);Hu(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=sh(e);Wu(e,l,o);break;default:throw Error(A(161))}}catch(u){$e(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fx(e,t,n){Z=e,_g(e)}function _g(e,t,n){for(var r=(e.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ro;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ct;l=Ro;var c=ct;if(Ro=o,(ct=u)&&!c)for(Z=s;Z!==null;)o=Z,u=o.child,o.tag===22&&o.memoizedState!==null?ah(s):u!==null?(u.return=o,Z=u):ah(s);for(;i!==null;)Z=i,_g(i),i=i.sibling;Z=s,Ro=l,ct=c}oh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):oh(e)}}function oh(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ct||Wl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ct)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Zt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Hf(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Hf(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Ii(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}ct||t.flags&512&&Bu(t)}catch(g){$e(t,t.return,g)}}if(t===e){Z=null;break}if(n=t.sibling,n!==null){n.return=t.return,Z=n;break}Z=t.return}}function lh(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Z=n;break}Z=t.return}}function ah(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Wl(4,t)}catch(u){$e(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){$e(t,s,u)}}var i=t.return;try{Bu(t)}catch(u){$e(t,i,u)}break;case 5:var o=t.return;try{Bu(t)}catch(u){$e(t,o,u)}}}catch(u){$e(t,t.return,u)}if(t===e){Z=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Z=l;break}Z=t.return}}var Ox=Math.ceil,kl=Bn.ReactCurrentDispatcher,ad=Bn.ReactCurrentOwner,Qt=Bn.ReactCurrentBatchConfig,ke=0,tt=null,Qe=null,st=0,Pt=0,ws=kr(0),Je=0,Vi=null,Yr=0,Hl=0,ud=0,Ni=null,Et=null,cd=0,qs=1/0,jn=null,Cl=!1,Vu=null,pr=null,Lo=!1,ur=null,bl=0,ji=0,Qu=null,Qo=-1,Ko=0;function wt(){return ke&6?We():Qo!==-1?Qo:Qo=We()}function gr(e){return e.mode&1?ke&2&&st!==0?st&-st:xx.transition!==null?(Ko===0&&(Ko=gp()),Ko):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:Cp(e.type)),e):1}function an(e,t,n,r){if(50<ji)throw ji=0,Qu=null,Error(A(185));no(e,n,r),(!(ke&2)||e!==tt)&&(e===tt&&(!(ke&2)&&(Hl|=n),Je===4&&Jn(e,st)),Rt(e,r),n===1&&ke===0&&!(t.mode&1)&&(qs=We()+500,$l&&Cr()))}function Rt(e,t){var n=e.callbackNode;x0(e,t);var r=ll(e,e===tt?st:0);if(r===0)n!==null&&vf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&vf(n),t===1)e.tag===0?yx(uh.bind(null,e)):Bp(uh.bind(null,e)),mx(function(){!(ke&6)&&Cr()}),n=null;else{switch(vp(r)){case 1:n=Oc;break;case 4:n=mp;break;case 16:n=ol;break;case 536870912:n=pp;break;default:n=ol}n=$g(n,Pg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Pg(e,t){if(Qo=-1,Ko=0,ke&6)throw Error(A(327));var n=e.callbackNode;if(Ns()&&e.callbackNode!==n)return null;var r=ll(e,e===tt?st:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=El(e,r);else{t=r;var s=ke;ke|=2;var i=Fg();(tt!==e||st!==t)&&(jn=null,qs=We()+500,Hr(e,t));do try{Ax();break}catch(l){Ig(e,l)}while(!0);Yc(),kl.current=i,ke=s,Qe!==null?t=0:(tt=null,st=0,t=Je)}if(t!==0){if(t===2&&(s=xu(e),s!==0&&(r=s,t=Ku(e,s))),t===1)throw n=Vi,Hr(e,0),Jn(e,r),Rt(e,We()),n;if(t===6)Jn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Dx(s)&&(t=El(e,r),t===2&&(i=xu(e),i!==0&&(r=i,t=Ku(e,i))),t===1))throw n=Vi,Hr(e,0),Jn(e,r),Rt(e,We()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(A(345));case 2:jr(e,Et,jn);break;case 3:if(Jn(e,r),(r&130023424)===r&&(t=cd+500-We(),10<t)){if(ll(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){wt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ju(jr.bind(null,e,Et,jn),t);break}jr(e,Et,jn);break;case 4:if(Jn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-ln(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ox(r/1960))-r,10<r){e.timeoutHandle=ju(jr.bind(null,e,Et,jn),r);break}jr(e,Et,jn);break;case 5:jr(e,Et,jn);break;default:throw Error(A(329))}}}return Rt(e,We()),e.callbackNode===n?Pg.bind(null,e):null}function Ku(e,t){var n=Ni;return e.current.memoizedState.isDehydrated&&(Hr(e,t).flags|=256),e=El(e,t),e!==2&&(t=Et,Et=n,t!==null&&qu(t)),e}function qu(e){Et===null?Et=e:Et.push.apply(Et,e)}function Dx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!un(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jn(e,t){for(t&=~ud,t&=~Hl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ln(t),r=1<<n;e[n]=-1,t&=~r}}function uh(e){if(ke&6)throw Error(A(327));Ns();var t=ll(e,0);if(!(t&1))return Rt(e,We()),null;var n=El(e,t);if(e.tag!==0&&n===2){var r=xu(e);r!==0&&(t=r,n=Ku(e,r))}if(n===1)throw n=Vi,Hr(e,0),Jn(e,t),Rt(e,We()),n;if(n===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jr(e,Et,jn),Rt(e,We()),null}function dd(e,t){var n=ke;ke|=1;try{return e(t)}finally{ke=n,ke===0&&(qs=We()+500,$l&&Cr())}}function Gr(e){ur!==null&&ur.tag===0&&!(ke&6)&&Ns();var t=ke;ke|=1;var n=Qt.transition,r=Ee;try{if(Qt.transition=null,Ee=1,e)return e()}finally{Ee=r,Qt.transition=n,ke=t,!(ke&6)&&Cr()}}function fd(){Pt=ws.current,Re(ws)}function Hr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,hx(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(Qc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fl();break;case 3:Qs(),Re(jt),Re(dt),td();break;case 5:ed(r);break;case 4:Qs();break;case 13:Re(Ie);break;case 19:Re(Ie);break;case 10:Gc(r.type._context);break;case 22:case 23:fd()}n=n.return}if(tt=e,Qe=e=vr(e.current,null),st=Pt=t,Je=0,Vi=null,ud=Hl=Yr=0,Et=Ni=null,Rr!==null){for(t=0;t<Rr.length;t++)if(n=Rr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Rr=null}return e}function Ig(e,t){do{var n=Qe;try{if(Yc(),Wo.current=Sl,wl){for(var r=Fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}wl=!1}if(qr=0,et=Ge=Fe=null,bi=!1,Bi=0,ad.current=null,n===null||n.return===null){Je=1,Vi=t,Qe=null;break}e:{var i=e,o=n.return,l=n,u=t;if(t=st,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var S=Gf(o);if(S!==null){S.flags&=-257,Xf(S,o,l,i,t),S.mode&1&&Yf(i,c,t),t=S,u=c;var w=t.updateQueue;if(w===null){var N=new Set;N.add(u),t.updateQueue=N}else w.add(u);break e}else{if(!(t&1)){Yf(i,c,t),hd();break e}u=Error(A(426))}}else if(Te&&l.mode&1){var R=Gf(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Xf(R,o,l,i,t),Kc(Ks(u,l));break e}}i=u=Ks(u,l),Je!==4&&(Je=2),Ni===null?Ni=[i]:Ni.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=vg(i,u,t);Wf(i,v);break e;case 1:l=u;var p=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(pr===null||!pr.has(m)))){i.flags|=65536,t&=-t,i.lanes|=t;var y=yg(i,l,t);Wf(i,y);break e}}i=i.return}while(i!==null)}Dg(n)}catch(b){t=b,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function Fg(){var e=kl.current;return kl.current=Sl,e===null?Sl:e}function hd(){(Je===0||Je===3||Je===2)&&(Je=4),tt===null||!(Yr&268435455)&&!(Hl&268435455)||Jn(tt,st)}function El(e,t){var n=ke;ke|=2;var r=Fg();(tt!==e||st!==t)&&(jn=null,Hr(e,t));do try{zx();break}catch(s){Ig(e,s)}while(!0);if(Yc(),ke=n,kl.current=r,Qe!==null)throw Error(A(261));return tt=null,st=0,Je}function zx(){for(;Qe!==null;)Og(Qe)}function Ax(){for(;Qe!==null&&!c0();)Og(Qe)}function Og(e){var t=Ag(e.alternate,e,Pt);e.memoizedProps=e.pendingProps,t===null?Dg(e):Qe=t,ad.current=null}function Dg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=_x(n,t),n!==null){n.flags&=32767,Qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,Qe=null;return}}else if(n=Tx(n,t,Pt),n!==null){Qe=n;return}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);Je===0&&(Je=5)}function jr(e,t,n){var r=Ee,s=Qt.transition;try{Qt.transition=null,Ee=1,$x(e,t,n,r)}finally{Qt.transition=s,Ee=r}return null}function $x(e,t,n,r){do Ns();while(ur!==null);if(ke&6)throw Error(A(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(w0(e,i),e===tt&&(Qe=tt=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lo||(Lo=!0,$g(ol,function(){return Ns(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Qt.transition,Qt.transition=null;var o=Ee;Ee=1;var l=ke;ke|=4,ad.current=null,Ix(e,n),Tg(n,e),ox(Eu),al=!!bu,Eu=bu=null,e.current=n,Fx(n),d0(),ke=l,Ee=o,Qt.transition=i}else e.current=n;if(Lo&&(Lo=!1,ur=e,bl=s),i=e.pendingLanes,i===0&&(pr=null),m0(n.stateNode),Rt(e,We()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Cl)throw Cl=!1,e=Vu,Vu=null,e;return bl&1&&e.tag!==0&&Ns(),i=e.pendingLanes,i&1?e===Qu?ji++:(ji=0,Qu=e):ji=0,Cr(),null}function Ns(){if(ur!==null){var e=vp(bl),t=Qt.transition,n=Ee;try{if(Qt.transition=null,Ee=16>e?16:e,ur===null)var r=!1;else{if(e=ur,ur=null,bl=0,ke&6)throw Error(A(331));var s=ke;for(ke|=4,Z=e.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(Z=c;Z!==null;){var f=Z;switch(f.tag){case 0:case 11:case 15:Ei(8,f,i)}var h=f.child;if(h!==null)h.return=f,Z=h;else for(;Z!==null;){f=Z;var g=f.sibling,S=f.return;if(Mg(f),f===c){Z=null;break}if(g!==null){g.return=S,Z=g;break}Z=S}}}var w=i.alternate;if(w!==null){var N=w.child;if(N!==null){w.child=null;do{var R=N.sibling;N.sibling=null,N=R}while(N!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ei(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Z=v;break e}Z=i.return}}var p=e.current;for(Z=p;Z!==null;){o=Z;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,Z=m;else e:for(o=p;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Wl(9,l)}}catch(b){$e(l,l.return,b)}if(l===o){Z=null;break e}var y=l.sibling;if(y!==null){y.return=l.return,Z=y;break e}Z=l.return}}if(ke=s,Cr(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(Fl,e)}catch{}r=!0}return r}finally{Ee=n,Qt.transition=t}}return!1}function ch(e,t,n){t=Ks(n,t),t=vg(e,t,1),e=mr(e,t,1),t=wt(),e!==null&&(no(e,1,t),Rt(e,t))}function $e(e,t,n){if(e.tag===3)ch(e,e,n);else for(;t!==null;){if(t.tag===3){ch(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pr===null||!pr.has(r))){e=Ks(n,e),e=yg(t,e,1),t=mr(t,e,1),e=wt(),t!==null&&(no(t,1,e),Rt(t,e));break}}t=t.return}}function Ux(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=wt(),e.pingedLanes|=e.suspendedLanes&n,tt===e&&(st&n)===n&&(Je===4||Je===3&&(st&130023424)===st&&500>We()-cd?Hr(e,0):ud|=n),Rt(e,t)}function zg(e,t){t===0&&(e.mode&1?(t=wo,wo<<=1,!(wo&130023424)&&(wo=4194304)):t=1);var n=wt();e=$n(e,t),e!==null&&(no(e,t,n),Rt(e,n))}function Bx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),zg(e,n)}function Wx(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(t),zg(e,n)}var Ag;Ag=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||jt.current)Nt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Nt=!1,Lx(e,t,n);Nt=!!(e.flags&131072)}else Nt=!1,Te&&t.flags&1048576&&Wp(t,pl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vo(e,t),e=t.pendingProps;var s=Ws(t,dt.current);Es(t,n),s=rd(null,t,r,e,s,n);var i=sd();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mt(r)?(i=!0,hl(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Jc(t),s.updater=Bl,t.stateNode=s,s._reactInternals=t,Iu(t,r,e,n),t=Du(null,t,r,!0,i,n)):(t.tag=0,Te&&i&&Vc(t),yt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Vx(r),e=Zt(r,e),s){case 0:t=Ou(null,t,r,e,n);break e;case 1:t=eh(null,t,r,e,n);break e;case 11:t=Jf(null,t,r,e,n);break e;case 14:t=Zf(null,t,r,Zt(r.type,e),n);break e}throw Error(A(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Zt(r,s),Ou(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Zt(r,s),eh(e,t,r,s,n);case 3:e:{if(kg(t),e===null)throw Error(A(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Yp(e,t),yl(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ks(Error(A(423)),t),t=th(e,t,r,n,s);break e}else if(r!==s){s=Ks(Error(A(424)),t),t=th(e,t,r,n,s);break e}else for(It=hr(t.stateNode.containerInfo.firstChild),Ft=t,Te=!0,sn=null,n=Kp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Hs(),r===s){t=Un(e,t,n);break e}yt(e,t,r,n)}t=t.child}return t;case 5:return Gp(t),e===null&&Tu(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Nu(r,s)?o=null:i!==null&&Nu(r,i)&&(t.flags|=32),Sg(e,t),yt(e,t,o,n),t.child;case 6:return e===null&&Tu(t),null;case 13:return Cg(e,t,n);case 4:return Zc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Vs(t,null,r,n):yt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Zt(r,s),Jf(e,t,r,s,n);case 7:return yt(e,t,t.pendingProps,n),t.child;case 8:return yt(e,t,t.pendingProps.children,n),t.child;case 12:return yt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,je(gl,r._currentValue),r._currentValue=o,i!==null)if(un(i.value,o)){if(i.children===s.children&&!jt.current){t=Un(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Fn(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),_u(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(A(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),_u(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}yt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Es(t,n),s=Kt(s),r=r(s),t.flags|=1,yt(e,t,r,n),t.child;case 14:return r=t.type,s=Zt(r,t.pendingProps),s=Zt(r.type,s),Zf(e,t,r,s,n);case 15:return xg(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Zt(r,s),Vo(e,t),t.tag=1,Mt(r)?(e=!0,hl(t)):e=!1,Es(t,n),gg(t,r,s),Iu(t,r,s,n),Du(null,t,r,!0,e,n);case 19:return bg(e,t,n);case 22:return wg(e,t,n)}throw Error(A(156,t.tag))};function $g(e,t){return hp(e,t)}function Hx(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(e,t,n,r){return new Hx(e,t,n,r)}function md(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vx(e){if(typeof e=="function")return md(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pc)return 11;if(e===Ic)return 14}return 2}function vr(e,t){var n=e.alternate;return n===null?(n=Vt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qo(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")md(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case cs:return Vr(n.children,s,i,t);case _c:o=8,s|=8;break;case su:return e=Vt(12,n,t,s|2),e.elementType=su,e.lanes=i,e;case iu:return e=Vt(13,n,t,s),e.elementType=iu,e.lanes=i,e;case ou:return e=Vt(19,n,t,s),e.elementType=ou,e.lanes=i,e;case Gm:return Vl(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qm:o=10;break e;case Ym:o=9;break e;case Pc:o=11;break e;case Ic:o=14;break e;case Yn:o=16,r=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=Vt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Vr(e,t,n,r){return e=Vt(7,e,r,t),e.lanes=n,e}function Vl(e,t,n,r){return e=Vt(22,e,r,t),e.elementType=Gm,e.lanes=n,e.stateNode={isHidden:!1},e}function Va(e,t,n){return e=Vt(6,e,null,t),e.lanes=n,e}function Qa(e,t,n){return t=Vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qx(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Na(0),this.expirationTimes=Na(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Na(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function pd(e,t,n,r,s,i,o,l,u){return e=new Qx(e,t,n,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Vt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jc(i),e}function Kx(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:us,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ug(e){if(!e)return wr;e=e._reactInternals;e:{if(es(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var n=e.type;if(Mt(n))return Up(e,n,t)}return t}function Bg(e,t,n,r,s,i,o,l,u){return e=pd(n,r,!0,e,s,i,o,l,u),e.context=Ug(null),n=e.current,r=wt(),s=gr(n),i=Fn(r,s),i.callback=t??null,mr(n,i,s),e.current.lanes=s,no(e,s,r),Rt(e,r),e}function Ql(e,t,n,r){var s=t.current,i=wt(),o=gr(s);return n=Ug(n),t.context===null?t.context=n:t.pendingContext=n,t=Fn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=mr(s,t,o),e!==null&&(an(e,s,o,i),Bo(e,s,o)),o}function Nl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function gd(e,t){dh(e,t),(e=e.alternate)&&dh(e,t)}function qx(){return null}var Wg=typeof reportError=="function"?reportError:function(e){console.error(e)};function vd(e){this._internalRoot=e}Kl.prototype.render=vd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));Ql(e,t,null,null)};Kl.prototype.unmount=vd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gr(function(){Ql(null,e,null,null)}),t[An]=null}};function Kl(e){this._internalRoot=e}Kl.prototype.unstable_scheduleHydration=function(e){if(e){var t=wp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xn.length&&t!==0&&t<Xn[n].priority;n++);Xn.splice(n,0,e),n===0&&kp(e)}};function yd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ql(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fh(){}function Yx(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Nl(o);i.call(c)}}var o=Bg(t,r,e,0,null,!1,!1,"",fh);return e._reactRootContainer=o,e[An]=o.current,Di(e.nodeType===8?e.parentNode:e),Gr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=Nl(u);l.call(c)}}var u=pd(e,0,!1,null,null,!1,!1,"",fh);return e._reactRootContainer=u,e[An]=u.current,Di(e.nodeType===8?e.parentNode:e),Gr(function(){Ql(t,u,n,r)}),u}function Yl(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Nl(o);l.call(u)}}Ql(t,o,e,s)}else o=Yx(n,t,e,s,r);return Nl(o)}yp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=pi(t.pendingLanes);n!==0&&(Dc(t,n|1),Rt(t,We()),!(ke&6)&&(qs=We()+500,Cr()))}break;case 13:Gr(function(){var r=$n(e,1);if(r!==null){var s=wt();an(r,e,1,s)}}),gd(e,1)}};zc=function(e){if(e.tag===13){var t=$n(e,134217728);if(t!==null){var n=wt();an(t,e,134217728,n)}gd(e,134217728)}};xp=function(e){if(e.tag===13){var t=gr(e),n=$n(e,t);if(n!==null){var r=wt();an(n,e,t,r)}gd(e,t)}};wp=function(){return Ee};Sp=function(e,t){var n=Ee;try{return Ee=e,t()}finally{Ee=n}};gu=function(e,t,n){switch(t){case"input":if(uu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Al(r);if(!s)throw Error(A(90));Jm(r),uu(r,s)}}}break;case"textarea":ep(e,n);break;case"select":t=n.value,t!=null&&Ss(e,!!n.multiple,t,!1)}};lp=dd;ap=Gr;var Gx={usingClientEntryPoint:!1,Events:[so,ms,Al,ip,op,dd]},di={findFiberByHostInstance:Mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xx={bundleType:di.bundleType,version:di.version,rendererPackageName:di.rendererPackageName,rendererConfig:di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=dp(e),e===null?null:e.stateNode},findFiberByHostInstance:di.findFiberByHostInstance||qx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var To=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!To.isDisabled&&To.supportsFiber)try{Fl=To.inject(Xx),xn=To}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gx;Dt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yd(t))throw Error(A(200));return Kx(e,t,null,n)};Dt.createRoot=function(e,t){if(!yd(e))throw Error(A(299));var n=!1,r="",s=Wg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=pd(e,1,!1,null,null,n,!1,r,s),e[An]=t.current,Di(e.nodeType===8?e.parentNode:e),new vd(t)};Dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=dp(t),e=e===null?null:e.stateNode,e};Dt.flushSync=function(e){return Gr(e)};Dt.hydrate=function(e,t,n){if(!ql(t))throw Error(A(200));return Yl(null,e,t,!0,n)};Dt.hydrateRoot=function(e,t,n){if(!yd(e))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Wg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Bg(t,null,e,1,n??null,s,!1,i,o),e[An]=t.current,Di(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Kl(t)};Dt.render=function(e,t,n){if(!ql(t))throw Error(A(200));return Yl(null,e,t,!1,n)};Dt.unmountComponentAtNode=function(e){if(!ql(e))throw Error(A(40));return e._reactRootContainer?(Gr(function(){Yl(null,null,e,!1,function(){e._reactRootContainer=null,e[An]=null})}),!0):!1};Dt.unstable_batchedUpdates=dd;Dt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ql(n))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return Yl(e,t,n,!1,r)};Dt.version="18.3.1-next-f1338f8080-20240426";function Hg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hg)}catch(e){console.error(e)}}Hg(),Hm.exports=Dt;var xd=Hm.exports,Vg,hh=xd;Vg=hh.createRoot,hh.hydrateRoot;var Js=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Jx={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Zn,bc,km,Zx=(km=class{constructor(){se(this,Zn,Jx);se(this,bc,!1)}setTimeoutProvider(e){K(this,Zn,e)}setTimeout(e,t){return k(this,Zn).setTimeout(e,t)}clearTimeout(e){k(this,Zn).clearTimeout(e)}setInterval(e,t){return k(this,Zn).setInterval(e,t)}clearInterval(e){k(this,Zn).clearInterval(e)}},Zn=new WeakMap,bc=new WeakMap,km),Tr=new Zx;function ew(e){setTimeout(e,0)}var Xr=typeof window>"u"||"Deno"in globalThis;function xt(){}function tw(e,t){return typeof e=="function"?e(t):e}function Yu(e){return typeof e=="number"&&e>=0&&e!==1/0}function Qg(e,t){return Math.max(e+(t||0)-Date.now(),0)}function yr(e,t){return typeof e=="function"?e(t):e}function Ut(e,t){return typeof e=="function"?e(t):e}function mh(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==wd(o,t.options))return!1}else if(!Qi(t.queryKey,o))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function ph(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Jr(t.options.mutationKey)!==Jr(i))return!1}else if(!Qi(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function wd(e,t){return((t==null?void 0:t.queryKeyHashFn)||Jr)(e)}function Jr(e){return JSON.stringify(e,(t,n)=>Gu(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Qi(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Qi(e[n],t[n])):!1}var nw=Object.prototype.hasOwnProperty;function Kg(e,t){if(e===t)return e;const n=gh(e)&&gh(t);if(!n&&!(Gu(e)&&Gu(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let u=0;for(let c=0;c<o;c++){const f=n?c:i[c],h=e[f],g=t[f];if(h===g){l[f]=h,(n?c<s:nw.call(e,f))&&u++;continue}if(h===null||g===null||typeof h!="object"||typeof g!="object"){l[f]=g;continue}const S=Kg(h,g);l[f]=S,S===h&&u++}return s===o&&u===s?e:l}function jl(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function gh(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Gu(e){if(!vh(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!vh(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function vh(e){return Object.prototype.toString.call(e)==="[object Object]"}function rw(e){return new Promise(t=>{Tr.setTimeout(t,e)})}function Xu(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Kg(e,t):t}function sw(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function iw(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Sd=Symbol();function qg(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Sd?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Yg(e,t){return typeof e=="function"?e(...t):!!e}function ow(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var Fr,er,Ls,Cm,lw=(Cm=class extends Js{constructor(){super();se(this,Fr);se(this,er);se(this,Ls);K(this,Ls,t=>{if(!Xr&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){k(this,er)||this.setEventListener(k(this,Ls))}onUnsubscribe(){var t;this.hasListeners()||((t=k(this,er))==null||t.call(this),K(this,er,void 0))}setEventListener(t){var n;K(this,Ls,t),(n=k(this,er))==null||n.call(this),K(this,er,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){k(this,Fr)!==t&&(K(this,Fr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof k(this,Fr)=="boolean"?k(this,Fr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Fr=new WeakMap,er=new WeakMap,Ls=new WeakMap,Cm),kd=new lw;function Ju(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var aw=ew;function uw(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=aw;const i=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;t++;try{u=l()}finally{t--,t||o()}return u},batchCalls:l=>(...u)=>{i(()=>{l(...u)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Xe=uw(),Ts,tr,_s,bm,cw=(bm=class extends Js{constructor(){super();se(this,Ts,!0);se(this,tr);se(this,_s);K(this,_s,t=>{if(!Xr&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){k(this,tr)||this.setEventListener(k(this,_s))}onUnsubscribe(){var t;this.hasListeners()||((t=k(this,tr))==null||t.call(this),K(this,tr,void 0))}setEventListener(t){var n;K(this,_s,t),(n=k(this,tr))==null||n.call(this),K(this,tr,t(this.setOnline.bind(this)))}setOnline(t){k(this,Ts)!==t&&(K(this,Ts,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return k(this,Ts)}},Ts=new WeakMap,tr=new WeakMap,_s=new WeakMap,bm),Ml=new cw;function dw(e){return Math.min(1e3*2**e,3e4)}function Gg(e){return(e??"online")==="online"?Ml.isOnline():!0}var Zu=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Xg(e){let t=!1,n=0,r;const s=Ju(),i=()=>s.status!=="pending",o=N=>{var R;if(!i()){const v=new Zu(N);g(v),(R=e.onCancel)==null||R.call(e,v)}},l=()=>{t=!0},u=()=>{t=!1},c=()=>kd.isFocused()&&(e.networkMode==="always"||Ml.isOnline())&&e.canRun(),f=()=>Gg(e.networkMode)&&e.canRun(),h=N=>{i()||(r==null||r(),s.resolve(N))},g=N=>{i()||(r==null||r(),s.reject(N))},S=()=>new Promise(N=>{var R;r=v=>{(i()||c())&&N(v)},(R=e.onPause)==null||R.call(e)}).then(()=>{var N;r=void 0,i()||(N=e.onContinue)==null||N.call(e)}),w=()=>{if(i())return;let N;const R=n===0?e.initialPromise:void 0;try{N=R??e.fn()}catch(v){N=Promise.reject(v)}Promise.resolve(N).then(h).catch(v=>{var L;if(i())return;const p=e.retry??(Xr?0:3),m=e.retryDelay??dw,y=typeof m=="function"?m(n,v):m,b=p===!0||typeof p=="number"&&n<p||typeof p=="function"&&p(n,v);if(t||!b){g(v);return}n++,(L=e.onFail)==null||L.call(e,n,v),rw(y).then(()=>c()?void 0:S()).then(()=>{t?g(v):w()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:u,canStart:f,start:()=>(f()?w():S().then(w),s)}}var Or,Em,Jg=(Em=class{constructor(){se(this,Or)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Yu(this.gcTime)&&K(this,Or,Tr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Xr?1/0:5*60*1e3))}clearGcTimeout(){k(this,Or)&&(Tr.clearTimeout(k(this,Or)),K(this,Or,void 0))}},Or=new WeakMap,Em),Dr,Ps,$t,zr,Ze,Gi,Ar,tn,Nn,Nm,fw=(Nm=class extends Jg{constructor(t){super();se(this,tn);se(this,Dr);se(this,Ps);se(this,$t);se(this,zr);se(this,Ze);se(this,Gi);se(this,Ar);K(this,Ar,!1),K(this,Gi,t.defaultOptions),this.setOptions(t.options),this.observers=[],K(this,zr,t.client),K(this,$t,k(this,zr).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,K(this,Dr,xh(this.options)),this.state=t.state??k(this,Dr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=k(this,Ze))==null?void 0:t.promise}setOptions(t){if(this.options={...k(this,Gi),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=xh(this.options);n.data!==void 0&&(this.setState(yh(n.data,n.dataUpdatedAt)),K(this,Dr,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&k(this,$t).remove(this)}setData(t,n){const r=Xu(this.state.data,t,this.options);return pe(this,tn,Nn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){pe(this,tn,Nn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=k(this,Ze))==null?void 0:r.promise;return(s=k(this,Ze))==null||s.cancel(t),n?n.then(xt).catch(xt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(k(this,Dr))}isActive(){return this.observers.some(t=>Ut(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Sd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>yr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Qg(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=k(this,Ze))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=k(this,Ze))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),k(this,$t).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(k(this,Ze)&&(k(this,Ar)?k(this,Ze).cancel({revert:!0}):k(this,Ze).cancelRetry()),this.scheduleGc()),k(this,$t).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||pe(this,tn,Nn).call(this,{type:"invalidate"})}async fetch(t,n){var u,c,f,h,g,S,w,N,R,v,p,m;if(this.state.fetchStatus!=="idle"&&((u=k(this,Ze))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(k(this,Ze))return k(this,Ze).continueRetry(),k(this,Ze).promise}if(t&&this.setOptions(t),!this.options.queryFn){const y=this.observers.find(b=>b.options.queryFn);y&&this.setOptions(y.options)}const r=new AbortController,s=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(K(this,Ar,!0),r.signal)})},i=()=>{const y=qg(this.options,n),L=(()=>{const M={client:k(this,zr),queryKey:this.queryKey,meta:this.meta};return s(M),M})();return K(this,Ar,!1),this.options.persister?this.options.persister(y,L,this):y(L)},l=(()=>{const y={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:k(this,zr),state:this.state,fetchFn:i};return s(y),y})();(c=this.options.behavior)==null||c.onFetch(l,this),K(this,Ps,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&pe(this,tn,Nn).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),K(this,Ze,Xg({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:y=>{y instanceof Zu&&y.revert&&this.setState({...k(this,Ps),fetchStatus:"idle"}),r.abort()},onFail:(y,b)=>{pe(this,tn,Nn).call(this,{type:"failed",failureCount:y,error:b})},onPause:()=>{pe(this,tn,Nn).call(this,{type:"pause"})},onContinue:()=>{pe(this,tn,Nn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const y=await k(this,Ze).start();if(y===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(y),(S=(g=k(this,$t).config).onSuccess)==null||S.call(g,y,this),(N=(w=k(this,$t).config).onSettled)==null||N.call(w,y,this.state.error,this),y}catch(y){if(y instanceof Zu){if(y.silent)return k(this,Ze).promise;if(y.revert){if(this.state.data===void 0)throw y;return this.state.data}}throw pe(this,tn,Nn).call(this,{type:"error",error:y}),(v=(R=k(this,$t).config).onError)==null||v.call(R,y,this),(m=(p=k(this,$t).config).onSettled)==null||m.call(p,this.state.data,y,this),y}finally{this.scheduleGc()}}},Dr=new WeakMap,Ps=new WeakMap,$t=new WeakMap,zr=new WeakMap,Ze=new WeakMap,Gi=new WeakMap,Ar=new WeakMap,tn=new WeakSet,Nn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Zg(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...yh(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return K(this,Ps,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Xe.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),k(this,$t).notify({query:this,type:"updated",action:t})})},Nm);function Zg(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Gg(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function yh(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function xh(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ct,Se,Xi,gt,$r,Is,Rn,nr,Ji,Fs,Os,Ur,Br,rr,Ds,Ce,vi,ec,tc,nc,rc,sc,ic,oc,ev,jm,hw=(jm=class extends Js{constructor(t,n){super();se(this,Ce);se(this,Ct);se(this,Se);se(this,Xi);se(this,gt);se(this,$r);se(this,Is);se(this,Rn);se(this,nr);se(this,Ji);se(this,Fs);se(this,Os);se(this,Ur);se(this,Br);se(this,rr);se(this,Ds,new Set);this.options=n,K(this,Ct,t),K(this,nr,null),K(this,Rn,Ju()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(k(this,Se).addObserver(this),wh(k(this,Se),this.options)?pe(this,Ce,vi).call(this):this.updateResult(),pe(this,Ce,rc).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return lc(k(this,Se),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return lc(k(this,Se),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,pe(this,Ce,sc).call(this),pe(this,Ce,ic).call(this),k(this,Se).removeObserver(this)}setOptions(t){const n=this.options,r=k(this,Se);if(this.options=k(this,Ct).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ut(this.options.enabled,k(this,Se))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");pe(this,Ce,oc).call(this),k(this,Se).setOptions(this.options),n._defaulted&&!jl(this.options,n)&&k(this,Ct).getQueryCache().notify({type:"observerOptionsUpdated",query:k(this,Se),observer:this});const s=this.hasListeners();s&&Sh(k(this,Se),r,this.options,n)&&pe(this,Ce,vi).call(this),this.updateResult(),s&&(k(this,Se)!==r||Ut(this.options.enabled,k(this,Se))!==Ut(n.enabled,k(this,Se))||yr(this.options.staleTime,k(this,Se))!==yr(n.staleTime,k(this,Se)))&&pe(this,Ce,ec).call(this);const i=pe(this,Ce,tc).call(this);s&&(k(this,Se)!==r||Ut(this.options.enabled,k(this,Se))!==Ut(n.enabled,k(this,Se))||i!==k(this,rr))&&pe(this,Ce,nc).call(this,i)}getOptimisticResult(t){const n=k(this,Ct).getQueryCache().build(k(this,Ct),t),r=this.createResult(n,t);return pw(this,r)&&(K(this,gt,r),K(this,Is,this.options),K(this,$r,k(this,Se).state)),r}getCurrentResult(){return k(this,gt)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&k(this,Rn).status==="pending"&&k(this,Rn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){k(this,Ds).add(t)}getCurrentQuery(){return k(this,Se)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=k(this,Ct).defaultQueryOptions(t),r=k(this,Ct).getQueryCache().build(k(this,Ct),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return pe(this,Ce,vi).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),k(this,gt)))}createResult(t,n){var T;const r=k(this,Se),s=this.options,i=k(this,gt),o=k(this,$r),l=k(this,Is),c=t!==r?t.state:k(this,Xi),{state:f}=t;let h={...f},g=!1,S;if(n._optimisticResults){const C=this.hasListeners(),F=!C&&wh(t,n),Q=C&&Sh(t,r,n,s);(F||Q)&&(h={...h,...Zg(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:w,errorUpdatedAt:N,status:R}=h;S=h.data;let v=!1;if(n.placeholderData!==void 0&&S===void 0&&R==="pending"){let C;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(C=i.data,v=!0):C=typeof n.placeholderData=="function"?n.placeholderData((T=k(this,Os))==null?void 0:T.state.data,k(this,Os)):n.placeholderData,C!==void 0&&(R="success",S=Xu(i==null?void 0:i.data,C,n),g=!0)}if(n.select&&S!==void 0&&!v)if(i&&S===(o==null?void 0:o.data)&&n.select===k(this,Ji))S=k(this,Fs);else try{K(this,Ji,n.select),S=n.select(S),S=Xu(i==null?void 0:i.data,S,n),K(this,Fs,S),K(this,nr,null)}catch(C){K(this,nr,C)}k(this,nr)&&(w=k(this,nr),S=k(this,Fs),N=Date.now(),R="error");const p=h.fetchStatus==="fetching",m=R==="pending",y=R==="error",b=m&&p,L=S!==void 0,E={status:R,fetchStatus:h.fetchStatus,isPending:m,isSuccess:R==="success",isError:y,isInitialLoading:b,isLoading:b,data:S,dataUpdatedAt:h.dataUpdatedAt,error:w,errorUpdatedAt:N,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:p,isRefetching:p&&!m,isLoadingError:y&&!L,isPaused:h.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:y&&L,isStale:Cd(t,n),refetch:this.refetch,promise:k(this,Rn),isEnabled:Ut(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const C=z=>{E.status==="error"?z.reject(E.error):E.data!==void 0&&z.resolve(E.data)},F=()=>{const z=K(this,Rn,E.promise=Ju());C(z)},Q=k(this,Rn);switch(Q.status){case"pending":t.queryHash===r.queryHash&&C(Q);break;case"fulfilled":(E.status==="error"||E.data!==Q.value)&&F();break;case"rejected":(E.status!=="error"||E.error!==Q.reason)&&F();break}}return E}updateResult(){const t=k(this,gt),n=this.createResult(k(this,Se),this.options);if(K(this,$r,k(this,Se).state),K(this,Is,this.options),k(this,$r).data!==void 0&&K(this,Os,k(this,Se)),jl(n,t))return;K(this,gt,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!k(this,Ds).size)return!0;const o=new Set(i??k(this,Ds));return this.options.throwOnError&&o.add("error"),Object.keys(k(this,gt)).some(l=>{const u=l;return k(this,gt)[u]!==t[u]&&o.has(u)})};pe(this,Ce,ev).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&pe(this,Ce,rc).call(this)}},Ct=new WeakMap,Se=new WeakMap,Xi=new WeakMap,gt=new WeakMap,$r=new WeakMap,Is=new WeakMap,Rn=new WeakMap,nr=new WeakMap,Ji=new WeakMap,Fs=new WeakMap,Os=new WeakMap,Ur=new WeakMap,Br=new WeakMap,rr=new WeakMap,Ds=new WeakMap,Ce=new WeakSet,vi=function(t){pe(this,Ce,oc).call(this);let n=k(this,Se).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(xt)),n},ec=function(){pe(this,Ce,sc).call(this);const t=yr(this.options.staleTime,k(this,Se));if(Xr||k(this,gt).isStale||!Yu(t))return;const r=Qg(k(this,gt).dataUpdatedAt,t)+1;K(this,Ur,Tr.setTimeout(()=>{k(this,gt).isStale||this.updateResult()},r))},tc=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(k(this,Se)):this.options.refetchInterval)??!1},nc=function(t){pe(this,Ce,ic).call(this),K(this,rr,t),!(Xr||Ut(this.options.enabled,k(this,Se))===!1||!Yu(k(this,rr))||k(this,rr)===0)&&K(this,Br,Tr.setInterval(()=>{(this.options.refetchIntervalInBackground||kd.isFocused())&&pe(this,Ce,vi).call(this)},k(this,rr)))},rc=function(){pe(this,Ce,ec).call(this),pe(this,Ce,nc).call(this,pe(this,Ce,tc).call(this))},sc=function(){k(this,Ur)&&(Tr.clearTimeout(k(this,Ur)),K(this,Ur,void 0))},ic=function(){k(this,Br)&&(Tr.clearInterval(k(this,Br)),K(this,Br,void 0))},oc=function(){const t=k(this,Ct).getQueryCache().build(k(this,Ct),this.options);if(t===k(this,Se))return;const n=k(this,Se);K(this,Se,t),K(this,Xi,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},ev=function(t){Xe.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(k(this,gt))}),k(this,Ct).getQueryCache().notify({query:k(this,Se),type:"observerResultsUpdated"})})},jm);function mw(e,t){return Ut(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function wh(e,t){return mw(e,t)||e.state.data!==void 0&&lc(e,t,t.refetchOnMount)}function lc(e,t,n){if(Ut(t.enabled,e)!==!1&&yr(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Cd(e,t)}return!1}function Sh(e,t,n,r){return(e!==t||Ut(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Cd(e,n)}function Cd(e,t){return Ut(t.enabled,e)!==!1&&e.isStaleByTime(yr(t.staleTime,e))}function pw(e,t){return!jl(e.getCurrentResult(),t)}function kh(e){return{onFetch:(t,n)=>{var f,h,g,S,w;const r=t.options,s=(g=(h=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:h.fetchMore)==null?void 0:g.direction,i=((S=t.state.data)==null?void 0:S.pages)||[],o=((w=t.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const c=async()=>{let N=!1;const R=m=>{ow(m,()=>t.signal,()=>N=!0)},v=qg(t.options,t.fetchOptions),p=async(m,y,b)=>{if(N)return Promise.reject();if(y==null&&m.pages.length)return Promise.resolve(m);const M=(()=>{const F={client:t.client,queryKey:t.queryKey,pageParam:y,direction:b?"backward":"forward",meta:t.options.meta};return R(F),F})(),E=await v(M),{maxPages:T}=t.options,C=b?iw:sw;return{pages:C(m.pages,E,T),pageParams:C(m.pageParams,y,T)}};if(s&&i.length){const m=s==="backward",y=m?gw:Ch,b={pages:i,pageParams:o},L=y(r,b);l=await p(b,L,m)}else{const m=e??i.length;do{const y=u===0?o[0]??r.initialPageParam:Ch(r,l);if(u>0&&y==null)break;l=await p(l,y),u++}while(u<m)}return l};t.options.persister?t.fetchFn=()=>{var N,R;return(R=(N=t.options).persister)==null?void 0:R.call(N,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function Ch(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function gw(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Zi,pn,vt,Wr,gn,qn,Mm,vw=(Mm=class extends Jg{constructor(t){super();se(this,gn);se(this,Zi);se(this,pn);se(this,vt);se(this,Wr);K(this,Zi,t.client),this.mutationId=t.mutationId,K(this,vt,t.mutationCache),K(this,pn,[]),this.state=t.state||tv(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){k(this,pn).includes(t)||(k(this,pn).push(t),this.clearGcTimeout(),k(this,vt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){K(this,pn,k(this,pn).filter(n=>n!==t)),this.scheduleGc(),k(this,vt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){k(this,pn).length||(this.state.status==="pending"?this.scheduleGc():k(this,vt).remove(this))}continue(){var t;return((t=k(this,Wr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,u,c,f,h,g,S,w,N,R,v,p,m,y,b,L,M,E,T;const n=()=>{pe(this,gn,qn).call(this,{type:"continue"})},r={client:k(this,Zi),meta:this.options.meta,mutationKey:this.options.mutationKey};K(this,Wr,Xg({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(C,F)=>{pe(this,gn,qn).call(this,{type:"failed",failureCount:C,error:F})},onPause:()=>{pe(this,gn,qn).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>k(this,vt).canRun(this)}));const s=this.state.status==="pending",i=!k(this,Wr).canStart();try{if(s)n();else{pe(this,gn,qn).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=k(this,vt).config).onMutate)==null?void 0:l.call(o,t,this,r));const F=await((c=(u=this.options).onMutate)==null?void 0:c.call(u,t,r));F!==this.state.context&&pe(this,gn,qn).call(this,{type:"pending",context:F,variables:t,isPaused:i})}const C=await k(this,Wr).start();return await((h=(f=k(this,vt).config).onSuccess)==null?void 0:h.call(f,C,t,this.state.context,this,r)),await((S=(g=this.options).onSuccess)==null?void 0:S.call(g,C,t,this.state.context,r)),await((N=(w=k(this,vt).config).onSettled)==null?void 0:N.call(w,C,null,this.state.variables,this.state.context,this,r)),await((v=(R=this.options).onSettled)==null?void 0:v.call(R,C,null,t,this.state.context,r)),pe(this,gn,qn).call(this,{type:"success",data:C}),C}catch(C){try{await((m=(p=k(this,vt).config).onError)==null?void 0:m.call(p,C,t,this.state.context,this,r))}catch(F){Promise.reject(F)}try{await((b=(y=this.options).onError)==null?void 0:b.call(y,C,t,this.state.context,r))}catch(F){Promise.reject(F)}try{await((M=(L=k(this,vt).config).onSettled)==null?void 0:M.call(L,void 0,C,this.state.variables,this.state.context,this,r))}catch(F){Promise.reject(F)}try{await((T=(E=this.options).onSettled)==null?void 0:T.call(E,void 0,C,t,this.state.context,r))}catch(F){Promise.reject(F)}throw pe(this,gn,qn).call(this,{type:"error",error:C}),C}finally{k(this,vt).runNext(this)}}},Zi=new WeakMap,pn=new WeakMap,vt=new WeakMap,Wr=new WeakMap,gn=new WeakSet,qn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Xe.batch(()=>{k(this,pn).forEach(r=>{r.onMutationUpdate(t)}),k(this,vt).notify({mutation:this,type:"updated",action:t})})},Mm);function tv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ln,nn,eo,Rm,yw=(Rm=class extends Js{constructor(t={}){super();se(this,Ln);se(this,nn);se(this,eo);this.config=t,K(this,Ln,new Set),K(this,nn,new Map),K(this,eo,0)}build(t,n,r){const s=new vw({client:t,mutationCache:this,mutationId:++mo(this,eo)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){k(this,Ln).add(t);const n=_o(t);if(typeof n=="string"){const r=k(this,nn).get(n);r?r.push(t):k(this,nn).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(k(this,Ln).delete(t)){const n=_o(t);if(typeof n=="string"){const r=k(this,nn).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&k(this,nn).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=_o(t);if(typeof n=="string"){const r=k(this,nn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=_o(t);if(typeof n=="string"){const s=(r=k(this,nn).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Xe.batch(()=>{k(this,Ln).forEach(t=>{this.notify({type:"removed",mutation:t})}),k(this,Ln).clear(),k(this,nn).clear()})}getAll(){return Array.from(k(this,Ln))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>ph(n,r))}findAll(t={}){return this.getAll().filter(n=>ph(t,n))}notify(t){Xe.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Xe.batch(()=>Promise.all(t.map(n=>n.continue().catch(xt))))}},Ln=new WeakMap,nn=new WeakMap,eo=new WeakMap,Rm);function _o(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Tn,sr,bt,_n,Dn,Yo,ac,Lm,xw=(Lm=class extends Js{constructor(n,r){super();se(this,Dn);se(this,Tn);se(this,sr);se(this,bt);se(this,_n);K(this,Tn,n),this.setOptions(r),this.bindMethods(),pe(this,Dn,Yo).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=k(this,Tn).defaultMutationOptions(n),jl(this.options,r)||k(this,Tn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:k(this,bt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Jr(r.mutationKey)!==Jr(this.options.mutationKey)?this.reset():((s=k(this,bt))==null?void 0:s.state.status)==="pending"&&k(this,bt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=k(this,bt))==null||n.removeObserver(this)}onMutationUpdate(n){pe(this,Dn,Yo).call(this),pe(this,Dn,ac).call(this,n)}getCurrentResult(){return k(this,sr)}reset(){var n;(n=k(this,bt))==null||n.removeObserver(this),K(this,bt,void 0),pe(this,Dn,Yo).call(this),pe(this,Dn,ac).call(this)}mutate(n,r){var s;return K(this,_n,r),(s=k(this,bt))==null||s.removeObserver(this),K(this,bt,k(this,Tn).getMutationCache().build(k(this,Tn),this.options)),k(this,bt).addObserver(this),k(this,bt).execute(n)}},Tn=new WeakMap,sr=new WeakMap,bt=new WeakMap,_n=new WeakMap,Dn=new WeakSet,Yo=function(){var r;const n=((r=k(this,bt))==null?void 0:r.state)??tv();K(this,sr,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},ac=function(n){Xe.batch(()=>{var r,s,i,o,l,u,c,f;if(k(this,_n)&&this.hasListeners()){const h=k(this,sr).variables,g=k(this,sr).context,S={client:k(this,Tn),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=k(this,_n)).onSuccess)==null||s.call(r,n.data,h,g,S)}catch(w){Promise.reject(w)}try{(o=(i=k(this,_n)).onSettled)==null||o.call(i,n.data,null,h,g,S)}catch(w){Promise.reject(w)}}else if((n==null?void 0:n.type)==="error"){try{(u=(l=k(this,_n)).onError)==null||u.call(l,n.error,h,g,S)}catch(w){Promise.reject(w)}try{(f=(c=k(this,_n)).onSettled)==null||f.call(c,void 0,n.error,h,g,S)}catch(w){Promise.reject(w)}}}this.listeners.forEach(h=>{h(k(this,sr))})})},Lm),vn,Tm,ww=(Tm=class extends Js{constructor(t={}){super();se(this,vn);this.config=t,K(this,vn,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??wd(s,n);let o=this.get(i);return o||(o=new fw({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){k(this,vn).has(t.queryHash)||(k(this,vn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=k(this,vn).get(t.queryHash);n&&(t.destroy(),n===t&&k(this,vn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Xe.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return k(this,vn).get(t)}getAll(){return[...k(this,vn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>mh(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>mh(t,r)):n}notify(t){Xe.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Xe.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Xe.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},vn=new WeakMap,Tm),Ae,ir,or,zs,As,lr,$s,Us,_m,Sw=(_m=class{constructor(e={}){se(this,Ae);se(this,ir);se(this,or);se(this,zs);se(this,As);se(this,lr);se(this,$s);se(this,Us);K(this,Ae,e.queryCache||new ww),K(this,ir,e.mutationCache||new yw),K(this,or,e.defaultOptions||{}),K(this,zs,new Map),K(this,As,new Map),K(this,lr,0)}mount(){mo(this,lr)._++,k(this,lr)===1&&(K(this,$s,kd.subscribe(async e=>{e&&(await this.resumePausedMutations(),k(this,Ae).onFocus())})),K(this,Us,Ml.subscribe(async e=>{e&&(await this.resumePausedMutations(),k(this,Ae).onOnline())})))}unmount(){var e,t;mo(this,lr)._--,k(this,lr)===0&&((e=k(this,$s))==null||e.call(this),K(this,$s,void 0),(t=k(this,Us))==null||t.call(this),K(this,Us,void 0))}isFetching(e){return k(this,Ae).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return k(this,ir).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=k(this,Ae).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=k(this,Ae).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(yr(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return k(this,Ae).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=k(this,Ae).get(r.queryHash),i=s==null?void 0:s.state.data,o=tw(t,i);if(o!==void 0)return k(this,Ae).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Xe.batch(()=>k(this,Ae).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=k(this,Ae).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=k(this,Ae);Xe.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=k(this,Ae);return Xe.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Xe.batch(()=>k(this,Ae).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(xt).catch(xt)}invalidateQueries(e,t={}){return Xe.batch(()=>(k(this,Ae).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Xe.batch(()=>k(this,Ae).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(xt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(xt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=k(this,Ae).build(this,t);return n.isStaleByTime(yr(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(xt).catch(xt)}fetchInfiniteQuery(e){return e.behavior=kh(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(xt).catch(xt)}ensureInfiniteQueryData(e){return e.behavior=kh(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ml.isOnline()?k(this,ir).resumePausedMutations():Promise.resolve()}getQueryCache(){return k(this,Ae)}getMutationCache(){return k(this,ir)}getDefaultOptions(){return k(this,or)}setDefaultOptions(e){K(this,or,e)}setQueryDefaults(e,t){k(this,zs).set(Jr(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...k(this,zs).values()],n={};return t.forEach(r=>{Qi(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){k(this,As).set(Jr(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...k(this,As).values()],n={};return t.forEach(r=>{Qi(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...k(this,or).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=wd(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Sd&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...k(this,or).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){k(this,Ae).clear(),k(this,ir).clear()}},Ae=new WeakMap,ir=new WeakMap,or=new WeakMap,zs=new WeakMap,As=new WeakMap,lr=new WeakMap,$s=new WeakMap,Us=new WeakMap,_m),nv=d.createContext(void 0),ts=e=>{const t=d.useContext(nv);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},kw=({client:e,children:t})=>(d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(nv.Provider,{value:e,children:t})),rv=d.createContext(!1),Cw=()=>d.useContext(rv);rv.Provider;function bw(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Ew=d.createContext(bw()),Nw=()=>d.useContext(Ew),jw=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Mw=e=>{d.useEffect(()=>{e.clearReset()},[e])},Rw=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||Yg(n,[e.error,r])),Lw=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Tw=(e,t)=>e.isLoading&&e.isFetching&&!t,_w=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,bh=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Pw(e,t,n){var h,g,S,w,N;const r=Cw(),s=Nw(),i=ts(),o=i.defaultQueryOptions(e);(g=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||g.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",Lw(o),jw(o,s),Mw(s);const l=!i.getQueryCache().get(o.queryHash),[u]=d.useState(()=>new t(i,o)),c=u.getOptimisticResult(o),f=!r&&e.subscribed!==!1;if(d.useSyncExternalStore(d.useCallback(R=>{const v=f?u.subscribe(Xe.batchCalls(R)):xt;return u.updateResult(),v},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),d.useEffect(()=>{u.setOptions(o)},[o,u]),_w(o,c))throw bh(o,u,s);if(Rw({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((w=(S=i.getDefaultOptions().queries)==null?void 0:S._experimental_afterQuery)==null||w.call(S,o,c),o.experimental_prefetchInRender&&!Xr&&Tw(c,r)){const R=l?bh(o,u,s):(N=i.getQueryCache().get(o.queryHash))==null?void 0:N.promise;R==null||R.catch(xt).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?c:u.trackResult(c)}function Gl(e,t){return Pw(e,hw)}function Iw(e,t){const n=ts(),[r]=d.useState(()=>new xw(n,e));d.useEffect(()=>{r.setOptions(e)},[r,e]);const s=d.useSyncExternalStore(d.useCallback(o=>r.subscribe(Xe.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=d.useCallback((o,l)=>{r.mutate(o,l).catch(xt)},[r]);if(s.error&&Yg(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function Eh(e){return e.length>0&&"options"in e[0]}function uc({value:e,onChange:t,options:n,placeholder:r="Select...",trigger:s,triggerClassName:i="",panelClassName:o="",align:l="left",width:u="auto",showChevron:c=!0,title:f,disabled:h=!1,"aria-label":g}){var E;const[S,w]=d.useState(!1),N=d.useRef(null),R=d.useRef(null),p=d.useCallback(()=>{const T=C=>{const F=C.find(Q=>Q.value===e);return F?F.label:null};if(Eh(n))for(const C of n){const F=T(C.options);if(F)return F}else{const C=T(n);if(C)return C}return r},[e,n,r])();d.useEffect(()=>{if(!S)return;const T=F=>{N.current&&!N.current.contains(F.target)&&w(!1)},C=F=>{var Q;F.key==="Escape"&&(w(!1),(Q=R.current)==null||Q.focus())};return window.addEventListener("click",T),window.addEventListener("keydown",C),()=>{window.removeEventListener("click",T),window.removeEventListener("keydown",C)}},[S]);const m=T=>{var C;t(T),w(!1),(C=R.current)==null||C.focus()},y=T=>T.map(C=>a.jsxs("button",{className:"dropdown-item","data-active":C.value===e,disabled:C.disabled,onClick:()=>!C.disabled&&m(C.value),role:"menuitem",children:[C.icon&&a.jsx("span",{className:"shrink-0",children:C.icon}),a.jsx("span",{className:"flex-1 truncate",children:C.label}),C.value===e&&a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 text-accent",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})]},C.value)),b=((E=R.current)==null?void 0:E.offsetWidth)??0,L=u==="trigger"?b:u==="auto"?void 0:u,M={...L?{width:L,minWidth:L}:{},...l==="right"?{right:0}:{left:0}};return a.jsxs("div",{ref:N,className:"relative",children:[s?a.jsx("div",{onClick:()=>!h&&w(T=>!T),children:s}):a.jsxs("button",{ref:R,type:"button",className:`dropdown-trigger ${i}`,onClick:()=>w(T=>!T),disabled:h,title:f,"aria-label":g,"aria-haspopup":"listbox","aria-expanded":S,children:[a.jsx("span",{className:"truncate",children:p}),c&&a.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`shrink-0 opacity-60 transition-transform ${S?"rotate-180":""}`,children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),S&&a.jsx("div",{className:`dropdown-panel ${o}`,style:M,role:"listbox","aria-label":g,children:Eh(n)?n.map((T,C)=>a.jsxs("div",{children:[T.label&&a.jsx("div",{className:"dropdown-label",children:T.label}),y(T.options),C<n.length-1&&a.jsx("div",{className:"dropdown-divider"})]},T.label||C)):y(n)})]})}const Fw={offline:"sync-dot-offline",unstable:"sync-dot-unstable",recent:"sync-dot-recent",editing:"sync-dot-editing",live:"sync-dot-live"};function Ow({state:e,presence:t,syncLabel:n,connectionLabel:r,lastEditedLabel:s,hasEdits:i,recentTouches:o,isNarrow:l}){const[u,c]=d.useState(!1),[f,h]=d.useState(null),g=d.useRef(null),S=d.useRef(null),w=d.useRef(null),N=t?`${t.viewing} viewing  ${t.editing} editing`:"- viewing  - editing",R=t?String(t.viewing):"-",v=d.useCallback(()=>{w.current&&(window.clearTimeout(w.current),w.current=null)},[]),p=d.useCallback((y,b)=>{var L;b&&((L=navigator.clipboard)==null||L.writeText(b).then(()=>{h(y),v(),w.current=window.setTimeout(()=>{h(M=>M===y?null:M)},1e3)}).catch(()=>{}))},[v]),m=d.useCallback(()=>{c(!1),window.requestAnimationFrame(()=>{var y;return(y=S.current)==null?void 0:y.focus()})},[]);return d.useEffect(()=>{if(!u)return;const y=L=>{!g.current||g.current.contains(L.target)||m()},b=L=>{L.key==="Escape"&&m()};return window.addEventListener("mousedown",y),window.addEventListener("keydown",b),()=>{window.removeEventListener("mousedown",y),window.removeEventListener("keydown",b)}},[u,m]),d.useEffect(()=>()=>{v()},[v]),a.jsxs("div",{ref:g,className:"sync-indicator",children:[a.jsxs("button",{ref:S,type:"button",className:"sync-indicator-button",onClick:()=>u?m():c(!0),"aria-haspopup":"dialog","aria-expanded":u,"aria-label":"Sync status",title:N,children:[a.jsx("span",{className:`sync-indicator-dot ${Fw[e]}`,"aria-hidden":"true"}),!l&&a.jsx("span",{className:"sync-indicator-count tabular-nums",children:R})]}),u&&a.jsxs("div",{role:"dialog","aria-label":"Sync status",className:"sync-indicator-card select-text",children:[a.jsx("div",{className:"sync-indicator-line sync-indicator-primary",children:n}),a.jsx("div",{className:"sync-indicator-line",children:r}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:N}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:i?`Last edited: ${s}`:"No edits yet."}),a.jsxs("div",{className:"sync-indicator-section",children:[a.jsx("div",{className:"sync-indicator-section-title",children:"Recently touched files"}),o.length>0?a.jsx("div",{className:"sync-indicator-list",children:o.map(y=>a.jsxs("div",{className:"sync-indicator-item",children:[a.jsx("button",{type:"button",className:"sync-indicator-item-name",title:`Copy filename: ${y.label}`,onClick:()=>p(y.path,y.label),children:y.label}),a.jsx("span",{className:"sync-indicator-item-time tabular-nums",children:f===y.path?"Copied":y.timeLabel})]},y.path))}):a.jsx("div",{className:"sync-indicator-empty",children:"No recent touches."})]})]})]})}function Dw({rootRef:e,onSearch:t,viewerActive:n,onBack:r,zoomPercent:s,onZoomPercentChange:i,currentLabel:o,itemCount:l,totalCount:u,sortSpec:c,metricKeys:f,onSortChange:h,sortDisabled:g=!1,filterCount:S,onOpenFilters:w,starFilters:N,onToggleStar:R,onClearStars:v,onClearFilters:p,starCounts:m,viewMode:y,onViewMode:b,gridItemSize:L,onGridItemSize:M,leftOpen:E,rightOpen:T,onToggleLeft:C,onToggleRight:F,onPrevImage:Q,onNextImage:z,canPrevImage:$,canNextImage:oe,searchDisabled:B=!1,searchPlaceholder:ue,syncIndicator:O}){const[V,q]=d.useState(!1),[fe,de]=d.useState(!1),[be,H]=d.useState(!1),Y=d.useRef(null),ne=d.useRef(null);d.useEffect(()=>{if(!V)return;const W=_=>{Y.current&&!Y.current.contains(_.target)&&q(!1)};return window.addEventListener("click",W),()=>window.removeEventListener("click",W)},[V]),d.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const W=window.matchMedia("(max-width: 900px)"),_=G=>de(G.matches);return de(W.matches),"addEventListener"in W?(W.addEventListener("change",_),()=>W.removeEventListener("change",_)):(W.addListener(_),()=>W.removeListener(_))},[]),d.useEffect(()=>{if(B){H(!1);return}if(!fe||n){H(!1);return}if(!be)return;const W=window.requestAnimationFrame(()=>{var _;return(_=ne.current)==null?void 0:_.focus()});return()=>window.cancelAnimationFrame(W)},[fe,be,n,B]);const he=c??{kind:"builtin",key:"added",dir:"desc"},He=he.dir,Ke=he.kind==="builtin"&&he.key==="random",Ne=n||g,ft=f!=null&&f.length?f.map(W=>({value:`metric:${W}`,label:W,disabled:g})):[],De=[{value:"builtin:added",label:"Date added",disabled:g},{value:"builtin:name",label:"Filename",disabled:g},{value:"builtin:random",label:"Random",disabled:g},...ft],cn=[{label:"Layout",options:[{value:"layout:grid",label:"Grid"},{value:"layout:masonry",label:"Masonry"}]},{label:"Sort by",options:De}],_e=he.kind==="metric"?`metric:${he.key}`:`builtin:${he.key}`,Yt=[{label:"Sort by",options:De}],ht=fe&&!n,U=W=>{if(W.startsWith("layout:")){const _=W==="layout:masonry"?"adaptive":"grid";b==null||b(_)}else{if(g)return;h==null||h(Nh(W,he))}},re=()=>{!h||g||h(Ke?he:{...he,dir:He==="desc"?"asc":"desc"})},ae=N??[],ve=ae.length,ce=Aw(S,ve),ge=zw(l,u),ee=o||"Root";return a.jsxs("div",{ref:e,className:"toolbar-shell fixed top-0 left-0 right-0 h-12 grid grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] items-center px-3 gap-3 bg-panel border-b border-border z-[var(--z-toolbar)] col-span-full row-start-1 select-none",children:[a.jsxs("div",{className:"toolbar-left flex items-center gap-4 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsxs("div",{className:"flex flex-col min-w-0 leading-tight",children:[a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted",children:"Scope"}),a.jsx("span",{className:"text-sm font-medium text-text truncate",title:ee,children:ee})]}),ge&&a.jsx("span",{className:"toolbar-count text-xs text-muted whitespace-nowrap tabular-nums",children:ge})]}),a.jsxs("div",{className:"toolbar-sort flex items-center gap-2",children:[a.jsxs("div",{className:`toolbar-sort-controls flex items-center gap-2 ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsx(uc,{value:_e,onChange:U,options:cn,title:"Sort and layout options","aria-label":"Sort and layout",triggerClassName:"min-w-[110px]"}),a.jsx("button",{className:"toolbar-sort-dir btn btn-icon",onClick:re,title:g?"Sorting disabled":Ke?"Shuffle":`Sort ${He==="desc"?"descending":"ascending"}`,"aria-label":Ke?"Shuffle":"Toggle sort direction","aria-disabled":Ne,disabled:Ne,children:Ke?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):He==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]}),a.jsxs("div",{ref:Y,className:`toolbar-filter relative ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsxs("button",{className:`btn ${ce>0?"btn-active":""}`,onClick:()=>q(W=>!W),"aria-haspopup":"dialog","aria-expanded":V,title:"Filters","aria-disabled":n,children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),a.jsx("span",{className:"toolbar-filters-label",children:"Filters"}),ce>0&&a.jsx("span",{className:"toolbar-filters-count px-1.5 py-0.5 text-[11px] rounded-full bg-accent-strong text-text",children:ce})]}),V&&a.jsxs("div",{role:"dialog","aria-label":"Filters",className:"dropdown-panel w-[240px]",style:{top:"38px",left:0},children:[a.jsx("div",{className:"dropdown-label",children:"Rating"}),a.jsxs("div",{className:"px-1",children:[[5,4,3,2,1].map(W=>{const _=ae.includes(W),G=(m==null?void 0:m[String(W)])??0;return a.jsxs("button",{onClick:()=>R==null?void 0:R(W),className:`dropdown-item justify-between ${_?"bg-accent-muted":""}`,children:[a.jsxs("span",{className:_?"text-star-active":"text-text",children:["".repeat(W),"".repeat(5-W)]}),a.jsx("span",{className:"text-xs text-muted",children:G})]},W)}),a.jsxs("button",{onClick:()=>R==null?void 0:R(0),className:`dropdown-item justify-between ${ae.includes(0)?"bg-accent-muted":""}`,children:[a.jsx("span",{className:"text-text",children:"Unrated"}),a.jsx("span",{className:"text-xs text-muted",children:(m==null?void 0:m["0"])??0})]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("div",{className:"dropdown-label",children:"Metrics"}),a.jsxs("button",{className:"dropdown-item",onClick:()=>{q(!1),w==null||w()},children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]}),a.jsx("span",{children:"Open Metrics Panel"}),(S||0)>0&&a.jsxs("span",{className:"ml-auto text-xs text-muted",children:[S," active"]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("button",{className:"dropdown-item text-muted hover:text-text",onClick:()=>{p?p():v==null||v()},disabled:ce===0,children:"Clear all filters"})]})]}),n&&a.jsxs("button",{className:"btn btn-sm",onClick:r,title:"Back to grid",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})]})]}),a.jsx("div",{className:"toolbar-center flex items-center gap-3 justify-center min-w-0",children:n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"range",min:5,max:800,step:1,value:Math.round(Math.max(5,Math.min(800,s??100))),onChange:W=>i==null?void 0:i(Number(W.target.value)),className:"zoom-slider","aria-label":"Zoom level"}),a.jsxs("span",{className:"text-xs text-muted min-w-[42px] text-right",children:[Math.round(s??100),"%"]})]}):M&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted",children:"Size"}),a.jsx("input",{type:"range",min:80,max:500,step:10,value:L??220,onChange:W=>M(Number(W.target.value)),className:"w-28 h-1.5 bg-border rounded-full appearance-none cursor-pointer hover:bg-hover transition-colors [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-text [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-text [&::-moz-range-thumb]:border-0","aria-label":"Thumbnail size"})]})}),a.jsxs("div",{className:"toolbar-right flex items-center gap-2 justify-end",children:[a.jsxs("div",{className:`toolbar-nav flex items-center gap-1 mr-1 ${n?"":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,children:[a.jsx("button",{className:`btn btn-icon ${$?"":"opacity-40 cursor-not-allowed"}`,title:"Previous image (A / )",onClick:()=>$&&(Q==null?void 0:Q()),"aria-label":"Previous image","aria-disabled":!$,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("button",{className:`btn btn-icon ${oe?"":"opacity-40 cursor-not-allowed"}`,title:"Next image (D / )",onClick:()=>oe&&(z==null?void 0:z()),"aria-label":"Next image","aria-disabled":!oe,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 6l6 6-6 6"})})})]}),a.jsxs("div",{className:"toolbar-panels flex items-center gap-1",children:[a.jsx("button",{className:`btn btn-icon ${E?"":"opacity-50"}`,title:E?"Hide left panel (Ctrl+B)":"Show left panel (Ctrl+B)",onClick:C,"aria-pressed":E,"aria-label":"Toggle left panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"11",y:"5",width:"10",height:"14",rx:"1.5"})]})}),a.jsx("button",{className:`btn btn-icon ${T?"":"opacity-50"}`,title:T?"Hide right panel (Ctrl+Alt+B)":"Show right panel (Ctrl+Alt+B)",onClick:F,"aria-pressed":T,"aria-label":"Toggle right panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"15",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"3",y:"5",width:"10",height:"14",rx:"1.5"})]})})]}),O&&a.jsx(Ow,{...O,isNarrow:fe}),!n&&fe&&a.jsx("button",{className:`btn btn-icon ${be?"btn-active":""} ${B?"opacity-50 cursor-not-allowed":""}`,"aria-label":be?"Close search":"Open search",title:B?"Search disabled":be?"Close search":"Search",onClick:()=>!B&&H(W=>!W),disabled:B,children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("circle",{cx:"11",cy:"11",r:"7"}),a.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),!n&&!fe?a.jsx("div",{className:"toolbar-search w-[240px]",children:a.jsx("input",{ref:ne,"aria-label":"Search filename, tags, notes",placeholder:B?ue??"Search disabled":"Search...",onChange:W=>t(W.target.value),className:"toolbar-search-input input w-full focus:w-full transition-all duration-200 select-text",disabled:B})}):n?a.jsx("div",{className:"toolbar-search w-[240px]","aria-hidden":"true"}):null]}),!n&&fe&&be&&!B&&a.jsx("div",{className:"toolbar-search-row",children:a.jsx("input",{ref:ne,"aria-label":"Search filename, tags, notes",placeholder:ue??"Search...",onChange:W=>t(W.target.value),className:"toolbar-search-input-mobile input input-lg w-full select-text"})}),ht&&a.jsx("div",{className:"mobile-drawer",children:a.jsxs("div",{className:"mobile-drawer-row",children:[a.jsxs("div",{className:"mobile-pill-group",children:[a.jsx("button",{className:`mobile-pill ${y==="grid"?"is-active":""}`,onClick:()=>b==null?void 0:b("grid"),"aria-pressed":y==="grid",children:"Grid"}),a.jsx("button",{className:`mobile-pill ${y==="adaptive"?"is-active":""}`,onClick:()=>b==null?void 0:b("adaptive"),"aria-pressed":y==="adaptive",children:"Masonry"})]}),a.jsx(uc,{value:_e,onChange:W=>h==null?void 0:h(Nh(W,he)),options:Yt,"aria-label":"Sort",triggerClassName:"mobile-pill mobile-pill-dropdown",panelClassName:"mobile-drawer-panel",disabled:g}),a.jsx("button",{className:`mobile-pill mobile-pill-icon ${Ne?"opacity-50 cursor-not-allowed":""}`,onClick:re,title:g?"Sorting disabled":Ke?"Shuffle":`Sort ${He==="desc"?"descending":"ascending"}`,"aria-label":Ke?"Shuffle":"Toggle sort direction","aria-disabled":Ne,disabled:Ne,children:Ke?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):He==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]})})]})}function zw(e,t){if(typeof e!="number")return null;const n=e.toLocaleString();if(typeof t!="number")return`${n} items`;const r=t.toLocaleString();return t===e?`${n} items`:`${n} / ${r} items`}function Aw(e,t){return typeof e=="number"?e:t>0?1:0}function Nh(e,t){if(e.startsWith("metric:")){const n=e.slice(7);return n?{kind:"metric",key:n,dir:t.dir}:t}if(e.startsWith("builtin:")){const n=e.slice(8);if(n==="name"||n==="added"||n==="random")return{kind:"builtin",key:n,dir:t.dir}}return t}class Sn extends Error{constructor(n,r,s,i){super(r);bn(this,"status");bn(this,"url");bn(this,"body");this.name="FetchError",this.status=n,this.url=s,this.body=i}}function $w(e){const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function sv(e,t,n){if(t&&typeof t=="object"){const r=t,s=typeof r.error=="string"?r.error:null,i=typeof r.message=="string"?r.message:null;if(s&&i)return`${s}: ${i}`;if(s)return s;if(i)return i}return typeof t=="string"&&t?t:`HTTP ${e} for ${n}`}function nt(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{let u=null;const c=await l.text().catch(()=>"");if(c)if((l.headers.get("content-type")||"").includes("application/json")||$w(c))try{u=JSON.parse(c)}catch{u=c}else u=c;if(!l.ok)throw new Sn(l.status,sv(l.status,u,e),e,u);return u}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}function Po(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{if(!l.ok){const u=await l.text().catch(()=>""),c=u||null;throw new Sn(l.status,sv(l.status,c,e),e,c)}return l.blob()}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}class iv{constructor(t){bn(this,"store",new Map);bn(this,"inflight",new Map);bn(this,"totalBytes",0);this.maxBytes=t}getMaxBytes(){return this.maxBytes}getTotalBytes(){return this.totalBytes}getSize(){return this.store.size}has(t){return this.store.has(t)}isInflight(t){return this.inflight.has(t)}get(t){const n=this.store.get(t);if(n)return this.store.delete(t),this.store.set(t,n),n.blob}evictIfNeeded(t){for(;this.totalBytes+t>this.maxBytes&&this.store.size>0;){const n=this.store.keys().next().value;if(n==null)break;const r=this.store.get(n);r&&(this.totalBytes-=r.size),this.store.delete(n)}}set(t,n){const r=n.size||0;if(!(r>this.maxBytes)){if(this.store.has(t)){const s=this.store.get(t);this.totalBytes-=s.size,this.store.delete(t)}this.evictIfNeeded(r),this.store.set(t,{blob:n,size:r}),this.totalBytes+=r}}async getOrFetch(t,n){const r=this.get(t);if(r)return r;const s=this.inflight.get(t);if(s)return s.promise;const i=n(),o=typeof i=="object"&&"promise"in i,l=o?i.promise:i,u=o?i.abort:void 0,c=l.then(f=>(this.set(t,f),f)).finally(()=>{this.inflight.delete(t)});return this.inflight.set(t,{promise:c,abort:u}),c}prefetch(t,n){if(this.store.has(t)||this.inflight.has(t))return;const r=n(),s=typeof r=="object"&&"promise"in r,i=s?r.promise:r,o=s?r.abort:void 0,l=i.then(u=>(this.set(t,u),u)).catch(()=>new Blob).finally(()=>{this.inflight.delete(t)});this.inflight.set(t,{promise:l,abort:o})}cancelPrefetch(t){const n=this.inflight.get(t);if(n!=null&&n.abort)try{n.abort()}catch{}this.inflight.delete(t)}clear(){for(const[t,n]of this.inflight)if(n.abort)try{n.abort()}catch{}this.inflight.clear(),this.store.clear(),this.totalBytes=0}evictPrefix(t){const n=(()=>{const s=t?`/${t.replace(/^\/+/,"")}`:"/";return s==="/"?"/":s.replace(/\/+$/,"")})(),r=s=>{const i=s.startsWith("/")?s.replace(/\/+$/,""):`/${s.replace(/\/+$/,"")}`;return n==="/"?!0:i===n||i.startsWith(`${n}/`)};for(const[s,i]of Array.from(this.store.entries()))r(s)&&(this.totalBytes-=i.size,this.store.delete(s));for(const[s,i]of Array.from(this.inflight.entries()))if(r(s)){if(i.abort)try{i.abort()}catch{}this.inflight.delete(s)}this.totalBytes<0&&(this.totalBytes=0)}}const as=new iv(60*1024*1024),cc=new iv(20*1024*1024),Ka={};function Uw(){const e=Ka==null?void 0:Ka.VITE_API_BASE,t=typeof window<"u",n=t?window.location.origin:"http://localhost",r=t?window.location.hostname:"localhost",s=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\]|.+\.localhost)$/i.test(r);if(!e)return"";let i;try{i=new URL(e,n)}catch{return""}const o=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\])$/i.test(i.hostname);return s?i.origin:o?"":i.origin}const Pe=Uw();const Bw=40*1024*1024,jh="lenslet.client_id",Mh="lenslet.client_id.session",ov="lenslet.last_event_id",Ww=1e3,Hw=3e4,Vw=5;let is=null,Go=null,Rh=0,js=null,Ms=0,Xl=!0,Rl=!1;function lv(){return typeof window<"u"&&typeof EventSource<"u"}function Lh(e,t){if(!e)return null;try{return e.getItem(t)}catch{return null}}function Th(e,t,n){if(e)try{e.setItem(t,n)}catch{}}function Qw(){if(typeof navigator>"u")return"server";const e=navigator.userAgent||"",t=navigator.language||"",n=navigator.platform||"",r=typeof Intl<"u"&&Intl.DateTimeFormat().resolvedOptions().timeZone||"",s=typeof screen<"u"?`${screen.width}x${screen.height}x${screen.colorDepth}`:"";return[e,t,n,r,s].join("|")}function Kw(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=t*16777619>>>0;return t.toString(16).padStart(8,"0")}function Xo(){if(is)return is;const e=typeof window<"u"?window.localStorage:null,t=typeof window<"u"?window.sessionStorage:null,n=Lh(e,jh)||Lh(t,Mh);if(n)return is=n,n;const r=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`;if(e)return Th(e,jh,r),is=r,r;if(t)return Th(t,Mh,r),is=r,r;const s=`fp_${Kw(Qw())}`;return is=s,s}function Ki(e="lenslet"){Rh+=1;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`nonce_${Math.random().toString(36).slice(2,10)}_${Date.now()}_${Rh}`;return`${e}:${Xo()}:${t}`}function qw(){if(Go!=null)return Go;if(typeof window>"u")return null;try{const e=window.localStorage.getItem(ov);if(!e)return null;const t=Number(e);return!Number.isFinite(t)||t<=0?null:(Go=t,t)}catch{return null}}function Yw(e){if(!(!Number.isFinite(e)||e<=0)&&(Go=e,!(typeof window>"u")))try{window.localStorage.setItem(ov,String(e))}catch{}}function Gw(){if(typeof window>"u")return`${Pe}/events`;const e=new URL(`${Pe}/events`,window.location.origin),t=qw();return t!=null&&Number.isFinite(t)&&e.searchParams.set("last_event_id",String(t)),e.toString()}function Xw(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}let en=null,av="idle";const dc=new Set,fc=new Set,hc=new Set;function Rs(e){av=e;for(const t of fc)t(e)}function bd(e){if(Rl!==e){Rl=e;for(const t of hc)t(e)}}function Ed(){js!=null&&(window.clearTimeout(js),js=null)}function Jw(){Ms=0,Ed()}function Zw(){if(!Xl||js!=null)return;Ms+=1;const e=Math.min(Ww*Math.pow(2,Ms-1),Hw);Ms>=Vw?(Rs("offline"),bd(!0)):Rs("reconnecting"),js=window.setTimeout(()=>{js=null,uv()},e)}function uv(){if(!Xl||!lv()||(en&&en.readyState===EventSource.CLOSED&&(en.close(),en=null),en))return;Ms>0?Rs("reconnecting"):Rs("connecting");const e=new EventSource(Gw());en=e;const t=n=>r=>{const s=Xw(r.data);if(!s)return;const i=r.lastEventId?Number(r.lastEventId):null,o=i!=null&&Number.isFinite(i)?i:null;o!=null&&Yw(o);for(const l of dc)l({type:n,id:o,data:s})};e.addEventListener("item-updated",t("item-updated")),e.addEventListener("metrics-updated",t("metrics-updated")),e.addEventListener("presence",t("presence")),e.onopen=()=>{Jw(),bd(!1),Rs("live")},e.onerror=()=>{en===e&&(e.close(),en=null,Zw())}}function e1(){Xl=!0,lv()&&(Ed(),uv())}function t1(){Xl=!1,Ed(),Ms=0,en&&(en.close(),en=null),bd(!1),Rs("offline")}function n1(e){return dc.add(e),()=>{dc.delete(e)}}function r1(e){return fc.add(e),e(av),()=>{fc.delete(e)}}function s1(e){return hc.add(e),e(Rl),()=>{hc.delete(e)}}function i1(){return Rl}const me={getFolder:(e,t,n)=>{const r=new URLSearchParams({path:e});return t!=null&&r.set("page",String(t)),n&&r.set("recursive","1"),nt(`${Pe}/folders?${r}`).promise},search:(e,t)=>{const n=new URLSearchParams;return e&&n.set("q",e),t&&n.set("path",t),nt(`${Pe}/search?${n}`).promise},getEmbeddings:()=>nt(`${Pe}/embeddings`).promise,searchEmbeddings:e=>nt(`${Pe}/embeddings/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise,refreshFolder:e=>{const t=new URLSearchParams({path:e});return nt(`${Pe}/refresh?${t}`,{method:"POST"}).promise},getSidecar:e=>nt(`${Pe}/item?path=${encodeURIComponent(e)}`).promise,patchSidecar:(e,t,n)=>{const s={"Content-Type":"application/json","Idempotency-Key":(n==null?void 0:n.idempotencyKey)??Ki("patch"),"x-client-id":Xo(),"x-updated-by":"web"};return(n==null?void 0:n.ifMatch)!=null&&(s["If-Match"]=String(n.ifMatch)),nt(`${Pe}/item?path=${encodeURIComponent(e)}`,{method:"PATCH",headers:s,body:JSON.stringify(t)}).promise},getMetadata:e=>nt(`${Pe}/metadata?path=${encodeURIComponent(e)}`).promise,putSidecar:(e,t)=>nt(`${Pe}/item?path=${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-client-id":Xo(),"x-updated-by":"web"},body:JSON.stringify(t)}).promise,getHealth:()=>nt(`${Pe}/health`).promise,postPresence:(e,t)=>nt(`${Pe}/presence`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gallery_id:e,client_id:t??Xo()})}).promise,getThumb:e=>cc.getOrFetch(e,()=>Po(`${Pe}/thumb?path=${encodeURIComponent(e)}`)),prefetchThumb:e=>{cc.prefetch(e,()=>Po(`${Pe}/thumb?path=${encodeURIComponent(e)}`))},getFile:e=>as.getOrFetch(e,()=>Po(`${Pe}/file?path=${encodeURIComponent(e)}`)),prefetchFile:async e=>{if(!(as.has(e)||as.isInflight(e)))try{const t=await Po(`${Pe}/file?path=${encodeURIComponent(e)}`).promise;t.size<=Bw&&as.set(e,t)}catch{}},cancelPrefetch:e=>{as.cancelPrefetch(e)},uploadFile:async(e,t)=>{const n=new FormData;return n.append("dest",e),n.append("file",t),nt(`${Pe}/file`,{method:"POST",body:n,timeoutMs:6e4}).promise},moveFile:async(e,t)=>{const n=new FormData;return n.append("src",e),n.append("dest",t),nt(`${Pe}/move`,{method:"POST",body:n}).promise},deleteFiles:async e=>nt(`${Pe}/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:e})}).promise,exportIntent:async e=>{const t=new FormData;return t.append("path",e),nt(`${Pe}/export-intent`,{method:"POST",body:t}).promise},getViews:()=>nt(`${Pe}/views`).promise,saveViews:e=>nt(`${Pe}/views`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise};class o1{constructor(t=400){bn(this,"cache",new Map);bn(this,"maxSize");this.maxSize=t,typeof window<"u"&&window.addEventListener("beforeunload",()=>this.clear(),{once:!0})}get(t){const n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){for(this.cache.has(t)&&this.cache.delete(t);this.cache.size>=this.maxSize;){const r=this.cache.keys().next().value;if(r===void 0)break;const s=this.cache.get(r);if(this.cache.delete(r),s)try{URL.revokeObjectURL(s)}catch{}}this.cache.set(t,n)}clear(){for(const t of this.cache.values())try{URL.revokeObjectURL(t)}catch{}this.cache.clear()}}const qa=new o1(400);function l1({path:e,name:t,onClick:n,selected:r,highlighted:s,displayW:i,displayH:o,ioRoot:l,isScrolling:u,priority:c}){const f=d.useRef(null),[h,g]=d.useState(()=>qa.get(e)??null),[S,w]=d.useState(!1),[N,R]=d.useState(()=>!!h);return d.useEffect(()=>{const v=f.current;if(!v)return;const p=new IntersectionObserver(m=>{for(const y of m)y.target===v&&w(y.isIntersecting||y.intersectionRatio>0)},{root:l??null,rootMargin:"200px 0px",threshold:.01});return p.observe(v),()=>{p.unobserve(v),p.disconnect()}},[l]),d.useEffect(()=>{if(h||!(S&&!u||c))return;let v=!0;return me.getThumb(e).then(p=>{if(!v)return;const m=URL.createObjectURL(p);qa.set(e,m),g(m)}).catch(()=>{}),()=>{v=!1}},[e,h,S,u,c]),d.useEffect(()=>{var p;if(!h){R(!1);return}const v=(p=f.current)==null?void 0:p.querySelector("img");v&&v.complete&&v.naturalWidth>0?R(!0):R(!1)},[h]),d.useEffect(()=>{g(qa.get(e)??null)},[e]),a.jsx("div",{ref:f,className:`absolute inset-0 relative bg-hover border border-border rounded-lg overflow-hidden select-none ${r?"outline-2 outline-accent":""} ${s?"ring-2 ring-accent/60 animate-pulse":""} hover:outline hover:outline-1 hover:outline-accent`,onClick:n,children:h?a.jsx("img",{className:`w-full h-full object-cover block pointer-events-none select-none opacity-0 transition-opacity duration-[160ms] ${N?"opacity-100":""}`,src:h,alt:t,loading:"lazy",decoding:"async",onLoad:()=>R(!0),width:i?Math.round(i):void 0,height:o?Math.round(o):void 0}):null})}function os(e,t,n){let r=n.initialDeps??[],s,i=!0;function o(){var l,u,c;let f;n.key&&((l=n.debug)!=null&&l.call(n))&&(f=Date.now());const h=e();if(!(h.length!==r.length||h.some((w,N)=>r[N]!==w)))return s;r=h;let S;if(n.key&&((u=n.debug)!=null&&u.call(n))&&(S=Date.now()),s=t(...h),n.key&&((c=n.debug)!=null&&c.call(n))){const w=Math.round((Date.now()-f)*100)/100,N=Math.round((Date.now()-S)*100)/100,R=N/16,v=(p,m)=>{for(p=String(p);p.length<m;)p=" "+p;return p};console.info(`%c ${v(N,5)} /${v(w,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*R,120))}deg 100% 31%);`,n==null?void 0:n.key)}return n!=null&&n.onChange&&!(i&&n.skipInitialOnChange)&&n.onChange(s),i=!1,s}return o.updateDeps=l=>{r=l},o}function _h(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const a1=(e,t)=>Math.abs(e-t)<1.01,u1=(e,t,n)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,s),n)}},Ph=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},c1=e=>e,d1=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},f1=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const s=o=>{const{width:l,height:u}=o;t({width:Math.round(l),height:Math.round(u)})};if(s(Ph(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const u=o[0];if(u!=null&&u.borderBoxSize){const c=u.borderBoxSize[0];if(c){s({width:c.inlineSize,height:c.blockSize});return}}s(Ph(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},Ih={passive:!0},Fh=typeof window>"u"?!0:"onscrollend"in window,h1=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&Fh?()=>{}:u1(r,()=>{t(s,!1)},e.options.isScrollingResetDelay),o=f=>()=>{const{horizontal:h,isRtl:g}=e.options;s=h?n.scrollLeft*(g&&-1||1):n.scrollTop,i(),t(s,f)},l=o(!0),u=o(!1);u(),n.addEventListener("scroll",l,Ih);const c=e.options.useScrollendEvent&&Fh;return c&&n.addEventListener("scrollend",u,Ih),()=>{n.removeEventListener("scroll",l),c&&n.removeEventListener("scrollend",u)}},m1=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},p1=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const o=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class g1{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:c1,rangeExtractor:d1,onChange:()=>{},measureElement:m1,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=os(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=n[o];if(s.has(l.lane))continue;const u=i.get(l.lane);if(u==null||l.end>u.end?i.set(l.lane,l):l.end<u.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=os(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,s,i,o,l)=>(this.prevLanes!==void 0&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=os(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l},u)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const g of this.laneAssignments.keys())g>=n&&this.laneAssignments.delete(g);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(g=>{this.itemSizeCache.set(g.key,g.size)}));const c=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const f=this.measurementsCache.slice(0,c),h=new Array(l).fill(void 0);for(let g=0;g<c;g++){const S=f[g];S&&(h[S.lane]=g)}for(let g=c;g<n;g++){const S=i(g),w=this.laneAssignments.get(g);let N,R;if(w!==void 0&&this.options.lanes>1){N=w;const y=h[N],b=y!==void 0?f[y]:void 0;R=b?b.end+this.options.gap:r+s}else{const y=this.options.lanes===1?f[g-1]:this.getFurthestMeasurement(f,g);R=y?y.end+this.options.gap:r+s,N=y?y.lane:g%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(g,N)}const v=u.get(S),p=typeof v=="number"?v:this.options.estimateSize(g),m=R+p;f[g]={index:g,start:R,size:p,end:m,key:S,lane:N},h[N]=g}return this.measurementsCache=f,f},{key:!1,debug:()=>this.options.debug}),this.calculateRange=os(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?v1({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=os(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,o)=>i===null||o===null?[]:n({startIndex:i,endIndex:o,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=os(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,o=n.length;i<o;i++){const l=n[i],u=r[l];s.push(u)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return _h(r[cv(0,r.length-1,s=>_h(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(s.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const o=10,l=c=>{if(!this.targetWindow)return;const f=this.getOffsetForIndex(n,c);if(!f){console.warn("Failed to get offset for index:",n);return}const[h,g]=f;this._scrollToOffset(h,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const S=this.getScrollOffset(),w=this.getOffsetForIndex(n,g);if(!w){console.warn("Failed to get offset for index:",n);return}a1(w[0],S)||u(g)})},u=c=>{this.targetWindow&&(i++,i<o?this.targetWindow.requestAnimationFrame(()=>l(c)):console.warn(`Failed to scroll to index ${n} after ${o} attempts.`))};l(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}s=Math.max(...i.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const cv=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function v1({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const s=e.length-1,i=u=>e[u].start;if(e.length<=r)return{startIndex:0,endIndex:s};let o=cv(0,s,i,n),l=o;if(r===1)for(;l<s&&e[l].end<n+t;)l++;else if(r>1){const u=Array(r).fill(0);for(;l<s&&u.some(f=>f<n+t);){const f=e[l];u[f.lane]=f.end,l++}const c=Array(r).fill(n+t);for(;o>=0&&c.some(f=>f>=n);){const f=e[o];c[f.lane]=f.start,o--}o=Math.max(0,o-o%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const Oh=typeof document<"u"?d.useLayoutEffect:d.useEffect;function y1(e){const t=d.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var o;i?xd.flushSync(t):t(),(o=e.onChange)==null||o.call(e,s,i)}},[r]=d.useState(()=>new g1(n));return r.setOptions(n),Oh(()=>r._didMount(),[]),Oh(()=>r._willUpdate()),r}function x1(e){return y1({observeElementRect:f1,observeElementOffset:h1,scrollToFn:p1,...e})}function w1({containerW:e,gap:t,targetCell:n,aspect:r,captionH:s}){const i=Math.max(1,Math.floor((e+t)/(n+t))),o=(e-t*(i-1))/i,l=o*r.h/r.w,u=l+s+t;return{columns:i,cellW:o,mediaH:l,rowH:u}}const S1=1.333;function k1({items:e,containerWidth:t,targetHeight:n,gap:r,captionH:s}){if(t<=0)return[];const i=[];let o=[],l=0;const u=(c,f)=>({index:i.length,height:f+s+r,imageH:f,items:c.map(h=>({item:h.item,displayW:h.aspect*f,displayH:f,originalIndex:h.originalIndex}))});for(let c=0;c<e.length;c++){const f=e[c],h=f.w>0&&f.h>0?f.w/f.h:S1;o.push({item:f,aspect:h,originalIndex:c}),l+=h;const g=(o.length-1)*r;if(l*n+g>=t){const w=(t-g)/l;i.push(u(o,w)),o=[],l=0}}return o.length>0&&i.push(u(o,n)),i}function C1(e,t,n){return{mode:"adaptive",rows:k1({items:t,containerWidth:e,targetHeight:n.targetCell,gap:n.gap,captionH:n.captionH})}}function b1(e,t,n){const{columns:r,cellW:s,mediaH:i,rowH:o}=w1({containerW:e,gap:n.gap,targetCell:n.targetCell,aspect:n.aspect,captionH:n.captionH}),l=Math.ceil(t.length/Math.max(1,r));return{mode:"grid",columns:r,cellW:s,mediaH:i,rowH:o,rowCount:l}}function E1(e,t,n){const[r,s]=d.useState(0);d.useLayoutEffect(()=>{const u=e.current;if(!u)return;const c=()=>{const h=getComputedStyle(u),g=u.clientWidth-parseFloat(h.paddingLeft)-parseFloat(h.paddingRight);s(g)},f=new ResizeObserver(c);return f.observe(u),c(),()=>f.disconnect()},[]);const i=d.useMemo(()=>n.viewMode==="adaptive"?C1(r,t,n):b1(r,t,n),[r,t,n.viewMode,n.gap,n.targetCell,n.aspect.w,n.aspect.h,n.captionH]),o=x1({count:i.mode==="adaptive"?i.rows.length:i.rowCount,getScrollElement:()=>e.current,estimateSize:u=>i.mode==="adaptive"?i.rows[u].height:i.rowH,overscan:8}),l=o.getVirtualItems();return d.useEffect(()=>{o.measure()},[i,o]),{width:r,layout:i,rowVirtualizer:o,virtualRows:l}}function N1(e,t,n,r){if(!e.length)return null;const s=n?e.findIndex(l=>l.path===n):0,i=Math.max(1,t);let o=s;if(r.key==="ArrowRight"||r.key==="d")o=Math.min(e.length-1,s+1);else if(r.key==="ArrowLeft"||r.key==="a")o=Math.max(0,s-1);else if(r.key==="ArrowDown"||r.key==="s")o=Math.min(e.length-1,s+i);else if(r.key==="ArrowUp"||r.key==="w")o=Math.max(0,s-i);else return r.key==="Enter"&&n?"open":null;return o}const En=12,j1=44,M1={w:4,h:3},R1=350,L1=120;function T1({items:e,selected:t,restoreToSelectionToken:n,onSelectionChange:r,onOpenViewer:s,onContextMenuItem:i,highlight:o,recentlyUpdated:l,suppressSelectionHighlight:u=!1,viewMode:c="grid",targetCellSize:f=220,scrollRef:h,hideScrollbar:g=!1}){const[S,w]=d.useState(null),[N,R]=d.useState(null),[v,p]=d.useState(!1),[m,y]=d.useState(null),[b,L]=d.useState(null),M=d.useRef(null),E=d.useRef(null),T=d.useRef(null),C=h??T,F=d.useRef(null),Q=f,{width:z,layout:$,rowVirtualizer:oe,virtualRows:B}=E1(C,e,{gap:En,targetCell:Q,aspect:M1,captionH:j1,viewMode:c}),ue=d.useMemo(()=>{const U=new Map;for(let re=0;re<e.length;re++)U.set(e[re].path,re);return U},[e]),O=d.useMemo(()=>{if($.mode!=="adaptive")return null;const U=new Map;return $.rows.forEach((re,ae)=>{let ve=0;re.items.forEach((ce,ge)=>{const ee=ve+ce.displayW/2;U.set(ce.item.path,{row:ae,center:ee,order:ge}),ve+=ce.displayW+En})}),U},[$]);d.useEffect(()=>{if(!t.length)return;const U=t[0];m!==U&&y(U)},[t,m]);const V=d.useMemo(()=>{if($.mode!=="adaptive")return null;let U=0;return $.rows.map(re=>{const ae=U;return U+=re.height,{start:ae,height:re.height}})},[$]),q=d.useRef(null),fe=(U,re)=>{try{if(q.current!=null){try{cancelAnimationFrame(q.current)}catch{}q.current=null}const ae=U.scrollTop,ve=re-ae;if(Math.abs(ve)<1){U.scrollTop=re;return}const ce=140,ge=performance.now(),ee=_=>1-Math.pow(1-_,3),W=_=>{const G=Math.min(1,(_-ge)/ce),ie=ee(G);U.scrollTop=ae+ve*ie,G<1?q.current=requestAnimationFrame(W):q.current=null};q.current=requestAnimationFrame(W)}catch{U.scrollTop=re}},[de,be]=d.useState(!1);d.useEffect(()=>{const U=C.current;if(!U)return;let re=0;const ae=()=>{be(!0),window.clearTimeout(re),re=window.setTimeout(()=>be(!1),L1)};return U.addEventListener("scroll",ae,{passive:!0}),()=>U.removeEventListener("scroll",ae)},[]);const H=()=>{E.current!=null&&(window.clearTimeout(E.current),E.current=null)},Y=()=>{if(H(),p(!1),w(null),M.current){try{URL.revokeObjectURL(M.current)}catch{}M.current=null}R(null)},ne=U=>{de||(H(),w(U),p(!1),E.current=window.setTimeout(async()=>{E.current=null;try{const re=await me.getFile(U),ae=URL.createObjectURL(re);if(M.current)try{URL.revokeObjectURL(M.current)}catch{}M.current=ae,R(ae),p(!0)}catch{}},R1))},he=$.mode==="grid"?$.columns:Math.max(1,Math.floor(z/(Q+En))),He=(U,re)=>{if($.mode!=="adaptive")return null;const ae=$.rows[U];if(!ae)return null;let ve=0,ce=null;for(const ge of ae.items){const ee=ve+ge.displayW/2,W=Math.abs(ee-re);(!ce||W<ce.dist)&&(ce={path:ge.item.path,dist:W}),ve+=ge.displayW+En}return ce?ce.path:null},Ke=(U,re)=>{var ie,we,qe,mt;if(!e.length)return null;const ae=U??e[0].path;if($.mode!=="adaptive"){const Le=N1(e,he,ae,re);return Le==="open"||Le==null?Le:((ie=e[Le])==null?void 0:ie.path)??null}const ve=O==null?void 0:O.get(ae);if(!ve)return ae;const ce=ue.get(ae)??0,ge=re.key;if(ge==="Enter")return"open";if(ge==="ArrowRight"||ge==="d")return((we=e[Math.min(e.length-1,ce+1)])==null?void 0:we.path)??ae;if(ge==="ArrowLeft"||ge==="a")return((qe=e[Math.max(0,ce-1)])==null?void 0:qe.path)??ae;const ee=ge==="ArrowDown"||ge==="s"?1:ge==="ArrowUp"||ge==="w"?-1:0;if(ee===0)return null;const W=ve.row+ee;if(W<0||W>=(((mt=$.rows)==null?void 0:mt.length)??0))return ae;const _=ve.center;return He(W,_)??ae},Ne=U=>{var re;try{(re=document.getElementById(`cell-${encodeURIComponent(U)}`))==null||re.focus()}catch{}},ft=U=>{try{me.prefetchFile(U),me.prefetchThumb(U)}catch{}},De=(U,re)=>{y(U),L(U);const ae=!!re.shiftKey,ve=!!(re.ctrlKey||re.metaKey);if(ae){const ce=F.current??m??t[0]??U,ge=ue.get(ce)??e.findIndex(W=>W.path===ce),ee=ue.get(U)??e.findIndex(W=>W.path===U);if(ge!==-1&&ee!==-1){const W=Math.min(ge,ee),_=Math.max(ge,ee),G=e.slice(W,_+1).map(ie=>ie.path);if(ve){const ie=new Set(t);for(const we of G)ie.add(we);r(Array.from(ie))}else r(G)}else r([U])}else if(ve){const ce=new Set(t);ce.has(U)?ce.delete(U):ce.add(U),r(Array.from(ce)),F.current=U}else r([U]),F.current=U;de||ft(U),Ne(U)},cn=(U,re)=>{var ae,ve;try{const ce=_e.has(U)&&t.length>0?t:[U];(ae=re.dataTransfer)==null||ae.setData("application/x-lenslet-paths",JSON.stringify(ce)),re.dataTransfer&&(re.dataTransfer.effectAllowed="copyMove");try{document.body.classList.add("drag-active")}catch{}const ee=re.currentTarget.querySelector(".cell-content img"),W=document.createElement("div");W.className="drag-ghost";const _=document.createElement("img");_.draggable=!1,_.alt="drag",ee&&ee.src&&(_.src=ee.src),W.appendChild(_),document.body.appendChild(W);const G=W.getBoundingClientRect().width||150;(ve=re.dataTransfer)==null||ve.setDragImage(W,Math.round(G/2),0);const ie=()=>{try{W.remove()}catch{}try{document.body.classList.remove("drag-active")}catch{}window.removeEventListener("dragend",ie),window.removeEventListener("pointerup",ie),document.removeEventListener("visibilitychange",ie)};window.addEventListener("dragend",ie),window.addEventListener("pointerup",ie),document.addEventListener("visibilitychange",ie)}catch{}};d.useEffect(()=>{const U=C.current;if(!U)return;const re=ae=>{var ie,we,qe;const ve=Ke(b,ae);if(ve==null)return;if(ae.preventDefault(),ve==="open"){b&&s(b);return}const ce=e.find(mt=>mt.path===ve);if(!ce)return;L(ce.path),y(ce.path),r([ce.path]);try{F.current=ce.path}catch{}const ge=$.mode==="grid"?Math.floor((ue.get(ce.path)??0)/Math.max(1,$.columns)):((ie=O==null?void 0:O.get(ce.path))==null?void 0:ie.row)??0,ee=U.scrollTop,W=ee+U.clientHeight,_=$.mode==="adaptive"?((we=V==null?void 0:V[ge])==null?void 0:we.start)??0:ge*$.rowH,G=$.mode==="adaptive"?_+(((qe=V==null?void 0:V[ge])==null?void 0:qe.height)??0):_+$.rowH;(_<ee||G>W)&&fe(U,_),Ne(ce.path)};return U.addEventListener("keydown",re),()=>{U.removeEventListener("keydown",re)}},[e,b,he,s,$,O,V,ue]),d.useLayoutEffect(()=>{var ge;const U=C.current;if(!U||!n||!t||t.length===0)return;const re=t[0],ae=ue.get(re);if(ae==null||ae<0)return;let ve=0;if($.mode==="grid")ve=Math.floor(ae/Math.max(1,$.columns));else{let ee=0,W=$.rows.length-1;for(;ee<=W;){const _=ee+W>>1,G=$.rows[_];if(ae>=G.items[0].originalIndex&&ae<=G.items[G.items.length-1].originalIndex){ve=_;break}ae<G.items[0].originalIndex?W=_-1:ee=_+1}}const ce=$.mode==="adaptive"?((ge=V==null?void 0:V[ve])==null?void 0:ge.start)??0:ve*$.rowH;try{U.scrollTop=ce}catch{}},[n,$,V]);const _e=d.useMemo(()=>new Set(t),[t]),Yt=!!(S&&N&&v);d.useEffect(()=>{var U;(U=C.current)==null||U.focus()},[]),d.useEffect(()=>{var U;if(u){try{(U=C.current)==null||U.blur()}catch{}try{L(null)}catch{}}},[u]);const ht=b?`cell-${encodeURIComponent(b)}`:void 0;return a.jsx("div",{role:"grid","aria-label":"Gallery",className:`relative h-full overflow-auto p-3 outline-none ${g?"scrollbar-hidden pr-4":"scrollbar-thin"} ${Yt?"cursor-zoom-in":""}`,ref:C,tabIndex:0,"aria-activedescendant":ht,onMouseDown:()=>{var U;return(U=C.current)==null?void 0:U.focus()},style:{"--gap":`${En}px`},children:a.jsxs("div",{className:"relative w-full",style:{height:oe.getTotalSize()},children:[B.map(U=>{var ge;let re=[],ae={},ve="";if($.mode==="adaptive"){const ee=$.rows[U.index];if(!ee)return null;re=ee.items,ae={height:ee.height,transform:`translate3d(0, ${U.start}px, 0)`,display:"flex",gap:En,paddingBottom:En},ve="absolute top-0 left-0 right-0 w-full will-change-transform"}else{const ee=U.index*$.columns;re=e.slice(ee,ee+$.columns).map(_=>({item:_,displayW:$.cellW,displayH:$.mediaH})),ae={transform:`translate3d(0, ${U.start}px, 0)`,gridTemplateColumns:`repeat(${$.columns}, minmax(0, 1fr))`,gap:En,paddingBottom:En},ve="absolute top-0 left-0 right-0 w-full grid will-change-transform"}const ce=U.index===((ge=B[0])==null?void 0:ge.index);try{if(!de)for(const{item:ee}of re)try{me.prefetchThumb(ee.path)}catch{}}catch{}return a.jsx("div",{className:ve,role:"row",style:ae,children:re.map(({item:ee,displayW:W,displayH:_})=>{const G=!u&&(m===ee.path||_e.has(ee.path)),ie=(l==null?void 0:l.has(ee.path))??!1,we=$.mode==="adaptive"?{width:W}:{},qe=$.mode==="adaptive"?{height:_}:{},mt=$.mode==="adaptive"?"relative rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group shrink-0":"relative aspect-[4/3] rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group";return a.jsxs("div",{id:`cell-${encodeURIComponent(ee.path)}`,className:`relative min-w-0 ${G?"outline outline-2 outline-accent outline-offset-2 rounded-[10px]":""}`,role:"gridcell","aria-selected":G,tabIndex:b===ee.path?0:-1,onFocus:()=>L(ee.path),draggable:!0,style:we,onDragStart:Le=>cn(ee.path,Le),onDragEnd:()=>{},onContextMenu:Le=>{Le.preventDefault(),Le.stopPropagation(),i&&i(Le,ee.path)},children:[a.jsxs("div",{className:mt,style:qe,onMouseEnter:()=>{try{me.prefetchFile(ee.path)}catch{}},onDoubleClick:()=>s(ee.path),onMouseLeave:Y,children:[a.jsx("div",{className:"cell-content absolute inset-0",children:a.jsx(l1,{path:ee.path,name:ee.name,selected:G,highlighted:ie,displayW:W,displayH:_,ioRoot:C.current,isScrolling:de,priority:ce,onClick:Le=>De(ee.path,Le)})}),a.jsx("div",{className:"absolute right-0 bottom-0 w-7 h-7 cursor-zoom-in",onMouseEnter:()=>ne(ee.path),onMouseLeave:Y,children:a.jsx("div",{className:"absolute right-0 bottom-0 h-[18px] w-[18px] flex items-center justify-center text-text select-none opacity-0 group-hover:opacity-50 hover:opacity-100 transition-all duration-[140ms]",style:{clipPath:'path("M0 9C0 4.02944 4.02944 0 9 0H18V18H0V9Z")',background:"linear-gradient(135deg, rgba(18,18,18,0.9) 0%, rgba(34,34,34,0.9) 60%, rgba(22,22,22,0.9) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",borderLeft:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 1px 2px rgba(0,0,0,0.45)",backdropFilter:"blur(1px)"},children:a.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#d9dce2]","aria-hidden":"true",style:{transform:"translate(0px,0px)"},children:[a.jsx("circle",{cx:"11",cy:"11",r:"5.4"}),a.jsx("path",{d:"M15.5 15.5 L19 19"})]})})})]}),a.jsxs("div",{className:"flex flex-col items-center text-center gap-0 mt-1 px-0.5 text-white/90",children:[a.jsx("div",{className:"text-sm leading-[18px] thumb-filename line-clamp-2 break-words hyphens-auto text-center",title:ee.name,children:(()=>{const Le=(o||"").trim();if(!Le)return ee.name;const Wn=ee.name,dn=Wn.toLowerCase().indexOf(Le.toLowerCase());if(dn===-1)return ee.name;const ze=Wn.slice(0,dn),Cn=Wn.slice(dn,dn+Le.length),ns=Wn.slice(dn+Le.length);return a.jsxs(a.Fragment,{children:[ze,a.jsx("mark",{className:"bg-accent/20 text-inherit rounded px-0.5",children:Cn}),ns]})})()}),a.jsxs("div",{className:"text-[11px] leading-[15px] opacity-70",children:[ee.w,"  ",ee.h]})]})]},ee.path)})},U.key)}),S&&N&&v&&xd.createPortal(a.jsx("div",{className:"toolbar-offset fixed inset-0 z-[999] flex items-center justify-center pointer-events-none bg-black/20 opacity-100",children:a.jsx("img",{src:N,alt:"preview",className:"max-w-[80vw] max-h-[80vh] object-contain opacity-[0.98]"})}),document.body)]},`${c}-${he}`)})}const _1=48,P1=[.1,.24,.5,.74,.9];function I1({items:e,metricKey:t,scrollRef:n,sortDir:r}){const{orderedValues:s,numericValues:i}=d.useMemo(()=>{var C;const E=[],T=[];for(const F of e){const Q=(C=F.metrics)==null?void 0:C[t],z=Q==null||Number.isNaN(Q)?null:Q;E.push(z),z!=null&&T.push(z)}return{orderedValues:E,numericValues:T}},[e,t]),o=d.useMemo(()=>F1(i,_1),[i]),l=d.useMemo(()=>O1(i,P1),[i]),[u,c]=d.useState(0),[f,h]=d.useState(null),[g,S]=d.useState(!1),w=d.useRef(null);if(d.useEffect(()=>{const E=n.current;if(!E)return;const T=()=>{const C=Math.max(1,E.scrollHeight-E.clientHeight),F=_r(C>0?E.scrollTop/C:0);c(F)};return T(),E.addEventListener("scroll",T,{passive:!0}),window.addEventListener("resize",T),()=>{E.removeEventListener("scroll",T),window.removeEventListener("resize",T)}},[n,e.length]),d.useEffect(()=>{h(null)},[t,e.length]),!o)return null;const N={min:o.min,max:o.max},R=f!=null?zh(f):null,v=zh(u),p=r==="desc",m=d.useMemo(()=>f==null?null:A1(s,f),[s,f]);function y(E){h(_r(E))}function b(){h(null)}function L(E){const T=n.current;if(!T)return;const C=Math.max(0,T.scrollHeight-T.clientHeight);T.scrollTop=_r(E)*C}function M(E){var C;const T=(C=w.current)==null?void 0:C.getBoundingClientRect();return T?_r((E.clientY-T.top)/T.height):null}return a.jsxs("div",{className:"absolute right-0 top-3 bottom-3 w-[14px] flex items-stretch pointer-events-auto",children:[a.jsxs("svg",{ref:w,viewBox:"0 0 10 100",preserveAspectRatio:"none",className:"w-full h-full rounded bg-surface-inset border border-border/60 cursor-ns-resize",onPointerDown:E=>{var C;E.preventDefault();const T=M(E);T!=null&&(S(!0),y(T),L(T),(C=w.current)==null||C.setPointerCapture(E.pointerId))},onPointerMove:E=>{const T=M(E);if(T==null){g||b();return}y(T),g&&L(T)},onPointerUp:E=>{var T;S(!1),(T=w.current)==null||T.releasePointerCapture(E.pointerId)},onPointerLeave:()=>{g||b()},children:[D1(o.bins,"var(--border-strong)",{flip:p}),z1(l,N,{flip:p,color:"var(--muted)"}),Dh(v,{color:"var(--highlight)",strokeWidth:.8}),R!=null&&Dh(R,{color:"var(--text-secondary)",strokeWidth:.6,dashed:!0})]}),m!=null&&f!=null&&a.jsx("div",{className:"pointer-events-none absolute right-full mr-2 px-1.5 py-0.5 rounded border border-border bg-surface text-[10px] text-text shadow",style:{top:`calc(${(f*100).toFixed(2)}% - 8px)`},children:U1(m)})]})}function F1(e,t){if(!e.length)return null;const n=Math.min(...e);let r=Math.max(...e);n===r&&(r=n+1);const s=new Array(t).fill(0),i=t/(r-n);for(const o of e){const l=Math.max(0,Math.min(t-1,Math.floor((o-n)*i)));s[l]+=1}return{bins:s,min:n,max:r}}function O1(e,t){if(!e.length)return[];const n=[...e].sort((s,i)=>s-i),r=n.length-1;return t.map(s=>{const i=r*s,o=Math.floor(i),l=Math.ceil(i);if(o===l)return n[o];const u=i-o;return n[o]+(n[l]-n[o])*u})}function D1(e,t,n){const r=Math.max(1,...e),s=100/e.length,i=(n==null?void 0:n.flip)??!1;return e.map((o,l)=>{const u=Math.max(.8,o/r*10),c=(i?e.length-1-l:l)*s;return a.jsx("rect",{x:10-u,y:c,width:u,height:Math.max(.2,s-.2),fill:t,opacity:.9},`sb-${l}`)})}function z1(e,t,n){const r=(n==null?void 0:n.flip)??!1,s=n==null?void 0:n.color;return e.map((i,o)=>{const l=$1(i,t,r),u=o===2;return a.jsx("line",{x1:0,y1:l,x2:10,y2:l,stroke:s,strokeWidth:u?.8:.5,opacity:u?.9:.6,vectorEffect:"non-scaling-stroke"},`qt-${o}-${i}`)})}function Dh(e,t){return a.jsx("line",{x1:0,y1:e,x2:10,y2:e,stroke:t.color,strokeWidth:t.strokeWidth??.6,strokeDasharray:t.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function A1(e,t){if(!e.length)return null;const n=Math.round(_r(t)*(e.length-1)),r=e[n];if(r!=null)return r;for(let s=1;s<e.length;s++){const i=n-s;if(i>=0&&e[i]!=null)return e[i];const o=n+s;if(o<e.length&&e[o]!=null)return e[o]}return null}function $1(e,t,n){const r=t.max-t.min;if(r===0)return 0;const s=_r((e-t.min)/r);return(n?1-s:s)*100}function zh(e){return _r(e)*100}function _r(e){return e<0?0:e>1?1:e}function U1(e){if(e==null||Number.isNaN(e))return"-";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Pr(e,t){const[n,r]=d.useState(null),s=d.useRef(null);return d.useEffect(()=>{if(!e){if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}r(null);return}let i=!0;return e().then(o=>{if(!i)return;const l=URL.createObjectURL(o);if(s.current)try{URL.revokeObjectURL(s.current)}catch{}s.current=l,r(l)}).catch(()=>{}),()=>{i=!1}},t),d.useEffect(()=>()=>{if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}},[]),n}function B1(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[o,l]=d.useState(1),[u,c]=d.useState(!1),[f,h]=d.useState(!1),[g,S]=d.useState(!1),w=d.useRef(null),N=d.useRef(null),R=()=>{const m=w.current,y=N.current;if(!m||!y||!y.naturalWidth||!y.naturalHeight)return;const b=m.getBoundingClientRect(),L=b.width/y.naturalWidth,M=b.height/y.naturalHeight,E=Math.min(1,Math.min(L,M));l(E);const T=y.naturalWidth*E,C=y.naturalHeight*E;r((b.width-T)/2),i((b.height-C)/2)};return d.useEffect(()=>{const m=w.current;if(!m)return;const y=new ResizeObserver(()=>{try{requestAnimationFrame(()=>R())}catch{R()}});return y.observe(m),()=>y.disconnect()},[]),{scale:e,setScale:t,tx:n,setTx:r,ty:s,setTy:i,base:o,setBase:l,ready:u,setReady:c,dragging:f,setDragging:h,visible:g,setVisible:S,containerRef:w,imgRef:N,fitAndCenter:R,handleWheel:m=>{m.preventDefault();const y=m.deltaY>0?-1:1,b=1.2,L=.05,M=8,E=w.current;if(!E)return;const T=E.getBoundingClientRect(),C=m.clientX-T.left,F=m.clientY-T.top;t(Q=>{const z=Math.min(M,Math.max(L,Q*Math.pow(b,y))),$=z/Q;return r(oe=>C-$*(C-oe)),i(oe=>F-$*(F-oe)),Number(z.toFixed(4))})},handleMouseDown:m=>{const y=w.current,b=N.current;if(!y||!b||m.target!==b)return;const M=y.getBoundingClientRect();if(m.clientX<M.left||m.clientX>M.right||m.clientY<M.top||m.clientY>M.bottom)return;m.preventDefault(),m.stopPropagation(),h(!0);const E=m.clientX,T=m.clientY,C=n,F=s,Q=$=>{r(C+($.clientX-E)),i(F+($.clientY-T))},z=()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",z),h(!1)};window.addEventListener("mousemove",Q),window.addEventListener("mouseup",z)}}}function W1({path:e,onClose:t,onNavigate:n,onZoomChange:r,requestedZoomPercent:s,onZoomRequestConsumed:i}){const{scale:o,setScale:l,tx:u,setTx:c,ty:f,setTy:h,base:g,ready:S,setReady:w,dragging:N,visible:R,setVisible:v,containerRef:p,imgRef:m,fitAndCenter:y,handleWheel:b,handleMouseDown:L}=B1(),M=Pr(()=>me.getFile(e),[e]),E=Pr(()=>me.getThumb(e),[e]),T=d.useCallback(()=>{v(!1),window.setTimeout(t,110)},[t,v]);return d.useEffect(()=>{requestAnimationFrame(()=>{var C;v(!0),(C=p.current)==null||C.focus()})},[e]),d.useEffect(()=>{const C=F=>{F.key==="Escape"?T():(F.key==="ArrowRight"||F.key==="d")&&n?n(1):(F.key==="ArrowLeft"||F.key==="a")&&n&&n(-1)};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[t,n]),d.useEffect(()=>{w(!1)},[M]),d.useEffect(()=>{r&&r(g*o*100)},[g,o,r]),d.useEffect(()=>{if(s==null)return;const C=p.current;if(!C){i&&i();return}const F=Math.max(.05,Math.min(8,s/100/Math.max(1e-6,g))),Q=C.getBoundingClientRect(),z=Q.width/2,$=Q.height/2;l(oe=>{const B=F/oe;return c(ue=>z-B*(z-ue)),h(ue=>$-B*($-ue)),Number(F.toFixed(4))}),i&&i()},[s,g,i]),a.jsxs("div",{ref:p,role:"dialog","aria-modal":!0,"aria-label":"Image viewer",tabIndex:-1,className:`toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] flex items-start justify-start bg-panel z-viewer overflow-hidden transition-opacity duration-[110ms] ease-out cursor-grab focus:outline-none focus-visible:outline-none ${N?"cursor-grabbing select-none":""} ${R?"opacity-100":"opacity-0"}`,style:{outline:"none"},onClick:T,onWheel:b,onMouseDown:L,onKeyDown:C=>{C.key==="Tab"&&C.preventDefault()},children:[a.jsxs("button",{"aria-label":"Close",onClick:C=>{C.stopPropagation(),T()},className:"btn btn-sm absolute top-3 right-3 z-10",title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]}),E&&a.jsx("img",{src:E,alt:"thumb",className:"absolute top-0 left-0 max-w-none max-h-none object-contain pointer-events-none transition-opacity duration-[110ms] ease-out",draggable:!1,onDragStart:C=>C.preventDefault(),style:{transform:`translate(${u}px, ${f}px) scale(${g})`,transformOrigin:"0 0",opacity:S?0:.5,filter:"blur(0.25px)"}}),M&&a.jsx("img",{ref:m,src:M,alt:"viewer",className:"max-w-none max-h-none object-contain transition-opacity duration-[110ms] ease-out will-change-transform select-none",draggable:!1,onDragStart:C=>{C.preventDefault()},onLoad:C=>{y(),l(1);try{requestAnimationFrame(()=>w(!0))}catch{w(!0)}},onClick:C=>C.stopPropagation(),style:{transform:`translate(${u}px, ${f}px) scale(${g*o})`,transformOrigin:"0 0",opacity:S?.99:0,WebkitUserDrag:"none"}})]})}function Nd(e){return!e||!(e instanceof HTMLElement)?!1:e.closest('input, textarea, [contenteditable="true"]')!==null}const H1=1.2,V1=.05,Q1=8;function K1(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[o,l]=d.useState(0),[u,c]=d.useState(0),[f,h]=d.useState(1),[g,S]=d.useState(1),[w,N]=d.useState(!1),R=d.useRef(null),v=d.useRef(null),p=d.useRef(null),m=d.useCallback(()=>{const M=R.current;if(!M)return;const E=M.getBoundingClientRect(),T=(C,F,Q,z)=>{if(!C||!C.naturalWidth||!C.naturalHeight)return;const $=E.width/C.naturalWidth,oe=E.height/C.naturalHeight,B=Math.min(1,Math.min($,oe)),ue=C.naturalWidth*B,O=C.naturalHeight*B;F(B),Q((E.width-ue)/2),z((E.height-O)/2)};T(v.current,h,r,i),T(p.current,S,l,c)},[]);d.useEffect(()=>{const M=R.current;if(!M)return;const E=new ResizeObserver(()=>{try{requestAnimationFrame(()=>m())}catch{m()}});return E.observe(M),()=>E.disconnect()},[m]);const y=d.useCallback(()=>{t(1),m()},[m]),b=d.useCallback(M=>{M.preventDefault();const E=M.deltaY>0?-1:1,T=R.current;if(!T)return;const C=T.getBoundingClientRect(),F=M.clientX-C.left,Q=M.clientY-C.top;t(z=>{const $=Math.min(Q1,Math.max(V1,z*Math.pow(H1,E))),oe=$/z;return r(B=>F-oe*(F-B)),i(B=>Q-oe*(Q-B)),l(B=>F-oe*(F-B)),c(B=>Q-oe*(Q-B)),Number($.toFixed(4))})},[]),L=d.useCallback(M=>{if(M.button!==0||!R.current)return;M.preventDefault(),N(!0);const T=M.clientX,C=M.clientY,F=n,Q=s,z=o,$=u,oe=ue=>{const O=ue.clientX-T,V=ue.clientY-C;r(F+O),i(Q+V),l(z+O),c($+V)},B=()=>{window.removeEventListener("pointermove",oe),window.removeEventListener("pointerup",B),N(!1)};window.addEventListener("pointermove",oe),window.addEventListener("pointerup",B)},[n,s,o,u]);return{scale:e,baseA:f,baseB:g,txA:n,tyA:s,txB:o,tyB:u,dragging:w,containerRef:R,imgARef:v,imgBRef:p,fitAndCenter:m,resetView:y,handleWheel:b,handlePointerDown:L}}function q1({aItem:e,bItem:t,index:n,total:r,canPrev:s,canNext:i,onNavigate:o,onClose:l}){const u=d.useRef(null),[c,f]=d.useState(50),[h,g]=d.useState(!1),[S,w]=d.useState(!1),{scale:N,baseA:R,baseB:v,txA:p,tyA:m,txB:y,tyB:b,dragging:L,containerRef:M,imgARef:E,imgBRef:T,fitAndCenter:C,resetView:F,handleWheel:Q,handlePointerDown:z}=K1(),$=(e==null?void 0:e.path)??null,oe=(t==null?void 0:t.path)??null,B=(e==null?void 0:e.name)??$??"Select an image",ue=(t==null?void 0:t.name)??oe??"Select another image";d.useEffect(()=>{requestAnimationFrame(()=>{var Y;return(Y=u.current)==null?void 0:Y.focus()})},[$,oe]),d.useEffect(()=>{F(),g(!1),w(!1)},[$,oe,F]),d.useEffect(()=>{const Y=ne=>{if(!Nd(ne.target)){if(ne.key==="Escape"){ne.preventDefault(),l();return}if((ne.key==="ArrowRight"||ne.key==="d")&&i){ne.preventDefault(),o(1);return}(ne.key==="ArrowLeft"||ne.key==="a")&&s&&(ne.preventDefault(),o(-1))}};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[l,o,s,i]);const O=Pr($?()=>me.getFile($):null,[$]),V=Pr(oe?()=>me.getFile(oe):null,[oe]),q=Pr($?()=>me.getThumb($):null,[$]),fe=Pr(oe?()=>me.getThumb(oe):null,[oe]),de=d.useCallback(Y=>Math.min(95,Math.max(5,Y)),[]),be=d.useCallback(Y=>{const ne=Y.target;ne!=null&&ne.closest(".compare-label")||ne!=null&&ne.closest(".compare-divider-hit")||z(Y)},[z]),H=d.useCallback(Y=>{const ne=M.current;if(!ne)return;Y.preventDefault(),Y.stopPropagation();const he=ne.getBoundingClientRect(),He=Y.currentTarget;He.setPointerCapture(Y.pointerId);const Ke=ft=>{const De=(ft.clientX-he.left)/he.width*100;f(de(De))},Ne=ft=>{He.releasePointerCapture(ft.pointerId),window.removeEventListener("pointermove",Ke),window.removeEventListener("pointerup",Ne)};window.addEventListener("pointermove",Ke),window.addEventListener("pointerup",Ne)},[de]);return a.jsxs("div",{ref:u,role:"dialog","aria-modal":!0,"aria-label":"Compare images",tabIndex:-1,className:"toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] bg-panel z-viewer flex flex-col overflow-hidden focus:outline-none",onKeyDown:Y=>{Y.key==="Tab"&&Y.preventDefault()},children:[a.jsxs("div",{className:"compare-header flex items-center gap-3 px-3 py-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Compare"}),a.jsx("div",{className:"text-xs text-muted",children:r>=2?`${n+1}-${Math.min(n+2,r)} of ${r}`:"Select 2 images"}),a.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(-1),disabled:!s,title:"Previous (Left Arrow or A)",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Prev"]}),a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(1),disabled:!i,title:"Next (Right Arrow or D)",children:["Next",a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"btn btn-sm",onClick:l,title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]})]})]}),a.jsx("div",{className:"flex-1 min-h-0 p-3 bg-panel",children:a.jsx("div",{ref:M,className:`compare-stage ${L?"is-dragging":""}`,onWheel:Q,onPointerDown:be,children:!e||!t?a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-sm text-muted",children:"Select 2 images to compare."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"compare-label left-3",children:[a.jsx("span",{className:"compare-label-tag",children:"A"}),a.jsx("span",{className:"truncate",title:e.path,children:B})]}),a.jsxs("div",{className:"compare-label right-3",children:[a.jsx("span",{className:"compare-label-tag",children:"B"}),a.jsx("span",{className:"truncate",title:t.path,children:ue})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 ${100-c}% 0 0)`},children:[q&&a.jsx("img",{src:q,alt:"thumb A",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:Y=>Y.preventDefault(),style:{transform:`translate(${p}px, ${m}px) scale(${R})`,transformOrigin:"0 0",opacity:h?0:.5}}),O&&a.jsx("img",{ref:E,src:O,alt:"compare A",className:"compare-image",draggable:!1,onDragStart:Y=>Y.preventDefault(),onLoad:()=>{C();try{requestAnimationFrame(()=>g(!0))}catch{g(!0)}},style:{transform:`translate(${p}px, ${m}px) scale(${R*N})`,transformOrigin:"0 0",opacity:h?.99:0}})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 0 0 ${c}%)`},children:[fe&&a.jsx("img",{src:fe,alt:"thumb B",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:Y=>Y.preventDefault(),style:{transform:`translate(${y}px, ${b}px) scale(${v})`,transformOrigin:"0 0",opacity:S?0:.5}}),V&&a.jsx("img",{ref:T,src:V,alt:"compare B",className:"compare-image",draggable:!1,onDragStart:Y=>Y.preventDefault(),onLoad:()=>{C();try{requestAnimationFrame(()=>w(!0))}catch{w(!0)}},style:{transform:`translate(${y}px, ${b}px) scale(${v*N})`,transformOrigin:"0 0",opacity:S?.99:0}})]}),a.jsxs("div",{className:"compare-divider-hit",style:{left:`${c}%`},onPointerDown:H,children:[a.jsx("div",{className:"compare-divider-line"}),a.jsx("div",{className:"compare-divider-handle"})]})]})})})]})}function Jl(){const[e,t]=d.useState(i1());return d.useEffect(()=>s1(t),[]),e}const qi=e=>["item",e],Y1={v:1,tags:[],notes:"",version:1,updated_at:"",updated_by:"web"},Jt=new Map,Jo=new Map,mc=new Map,jd=new Map;let Ah=0;const kn=new Map,yi=new Map,G1=12e3,pc=new Set,gc=new Set;let Md={state:"idle"},Yi=null,vc=0;function Io(e){Md=e;for(const t of pc)t(e)}function On(){const e=kn.size>0,t=Jt.size+Jo.size+vc;if(e){Io({state:"error",message:"Conflict detected"});return}if(Yi){Io({state:"error",message:Yi});return}if(t>0){Io({state:"syncing"});return}Io({state:"idle"})}function Rd(){let e=null;for(const t of mc.values())e=e==null?t:Math.min(e,t);for(const t of jd.values())e=e==null?t:Math.min(e,t);return e}function Ll(){const e=Rd();for(const t of gc)t(e)}function Tl(e){Yi=e,On()}function dv(){Yi&&(Yi=null,On())}function $h(e){vc=Math.max(0,vc+e),On()}function X1(){Ah+=1;const e=Ah;return jd.set(e,Date.now()),Ll(),e}function J1(e){e!=null&&jd.delete(e)&&Ll()}function Zl(e){const t=yi.get(e);if(!t||!t.size)return;const n=kn.get(e)??null;for(const r of t)r(n)}function Uh(e){return kn.get(e)??null}function ea(e){kn.delete(e)&&(Zl(e),On())}function Z1(e,t){kn.set(e,t),Zl(e),On()}function eS(e,t){const n=yi.get(e)??new Set;return n.add(t),yi.set(e,n),t(kn.get(e)??null),()=>{const r=yi.get(e);r&&(r.delete(t),r.size||yi.delete(e))}}function tS(e){const[t,n]=d.useState(()=>e?Uh(e):null);return d.useEffect(()=>{if(!e){n(null);return}return n(Uh(e)),eS(e,n)},[e]),t}function nS(e){return pc.add(e),e(Md),()=>{pc.delete(e)}}function rS(){const[e,t]=d.useState(Md);return d.useEffect(()=>nS(t),[]),e}function sS(e){return gc.add(e),e(Rd()),()=>{gc.delete(e)}}function iS(){const[e,t]=d.useState(()=>Rd()),[n,r]=d.useState(()=>e==null?null:Date.now()-e);return d.useEffect(()=>sS(t),[]),d.useEffect(()=>{if(e==null){r(null);return}r(Date.now()-e);const s=window.setInterval(()=>{r(Date.now()-e)},1e3);return()=>window.clearInterval(s)},[e]),n}function yc(e){const t={};return Object.prototype.hasOwnProperty.call(e,"star")&&(t.set_star=e.star??null),Object.prototype.hasOwnProperty.call(e,"notes")&&(t.set_notes=e.notes??""),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.set_tags=Array.isArray(e.tags)?e.tags:[]),t}function xc(e){var t,n;return e.set_star!==void 0||e.set_notes!==void 0||e.set_tags!==void 0||(((t=e.add_tags)==null?void 0:t.length)??0)>0||(((n=e.remove_tags)==null?void 0:n.length)??0)>0}function fi(e){const t=[],n=new Set;for(const r of e??[]){if(typeof r!="string")continue;const s=r.trim();!s||n.has(s)||(n.add(s),t.push(s))}return t}function oS(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}function lS(e,t){if(e.set_star!==void 0&&(t.star??null)!==e.set_star||e.set_notes!==void 0&&(t.notes??"")!==(e.set_notes??""))return!1;if(e.set_tags!==void 0){const r=fi(e.set_tags),s=fi(t.tags);return oS(r,s)}const n=fi(t.tags);for(const r of fi(e.add_tags))if(!n.includes(r))return!1;for(const r of fi(e.remove_tags))if(n.includes(r))return!1;return!0}function fv(e,t,n){if(n instanceof Sn&&n.status===409){const r=n.body;if(r!=null&&r.current)return Z1(e,{path:e,current:r.current,pending:t,receivedAt:new Date().toISOString()}),!0}return!1}function aS(e,t){const n=kn.get(e);if(n){if(lS(n.pending,t)){ea(e);return}kn.set(e,{...n,current:t}),Zl(e),On()}}function uS(e){const t=Jl();return Gl({queryKey:qi(e),queryFn:()=>me.getSidecar(e),enabled:!!e,staleTime:3e4,gcTime:5*6e4,retry:2,refetchInterval:t?G1:!1,refetchIntervalInBackground:t})}function cS(e){const t=ts();return Iw({mutationFn:async({patch:n,baseVersion:r,idempotencyKey:s})=>{const i=yc(n);if(!xc(i))return t.getQueryData(qi(e))??Y1;const o={...i,base_version:r};try{return await me.patchSidecar(e,o,{idempotencyKey:s??Ki("patch"),ifMatch:r})}catch(l){throw fv(e,i,l),l}},retry:(n,r)=>r instanceof Sn&&r.status===409?!1:n<2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),4e3),onMutate:()=>(dv(),$h(1),{inflightId:X1()}),onSuccess:n=>{ea(e),t.setQueryData(qi(e),n)},onError:n=>{n instanceof Sn&&n.status===409||(n instanceof Sn?Tl(n.message):Tl("Failed to save"))},onSettled:(n,r,s,i)=>{$h(-1),J1(i==null?void 0:i.inflightId)}})}const dS=6;async function Bh(e,t){if(!e.length)return;let n=0;const r=[],s=async()=>{for(;n<e.length;){const o=n++,l=e[o];try{await hv(l,t)}catch(u){r.push({path:l,error:u}),console.error(`[bulkUpdateSidecars] Failed for ${l}:`,u)}}},i=Array.from({length:Math.min(dS,e.length)},()=>s());if(await Promise.all(i),r.length===e.length)throw new Error(`All ${e.length} sidecar updates failed`)}async function hv(e,t){const n=Jt.get(e)||{};Jt.set(e,{...n,...t}),dv(),On();const r=Jo.get(e);if(r)return r;mc.set(e,Date.now()),Ll();const s=(async()=>{try{for(;Jt.has(e);){const i=Jt.get(e);if(!i)break;const o=yc(i);if(!xc(o)){Jt.get(e)===i&&Jt.delete(e);continue}let l=1;try{l=(await me.getSidecar(e)).version??1}catch{l=1}const u={...o,base_version:l};try{await me.patchSidecar(e,u,{idempotencyKey:Ki("patch"),ifMatch:l}),ea(e),Jt.get(e)===i&&Jt.delete(e)}catch(c){if(fv(e,o,c)){const h=Jt.get(e);if(h&&h!==i){const g=yc(h);if(xc(g)){const S=kn.get(e);S&&(kn.set(e,{...S,pending:g}),Zl(e))}}Jt.delete(e)}else c instanceof Sn?Tl(c.message):Tl("Failed to save");throw c}}}finally{Jo.delete(e),mc.delete(e),Ll(),On()}})();return Jo.set(e,s),On(),s}function Ya(e){const t=["B","KB","MB","GB","TB"];let n=0,r=e;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${r.toFixed(1)} ${t[n]}`}function Ga(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function fS(e,t=28){if(e.length<=t)return e;const n=Math.max(4,Math.floor((t-1)/2));return`${e.slice(0,n)}${e.slice(-n)}`}const hS=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});function mS(e){const t=e.trim();return!t||/[zZ]|[+-]\d{2}:?\d{2}$/.test(t)?t:`${t.includes("T")?t:t.replace(" ","T")}Z`}function Wh(e){if(!e)return null;const t=Date.parse(mS(e));return Number.isFinite(t)?t:null}function pS(e,t=Date.now()){const n=Math.max(0,t-e),r=Math.max(1,Math.floor(n/1e3));if(r<60)return`${r} second${r===1?"":"s"} ago`;const s=Math.floor(r/60);if(s<60)return`${s} minute${s===1?"":"s"} ago`;const i=Math.floor(s/60);return`${i} hour${i===1?"":"s"} ago`}function gS(e){return hS.format(new Date(e))}function Zo(e){if(Array.isArray(e))return e.map(Zo);if(e&&typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,Zo(n)]));if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")||t.startsWith('"')&&t.endsWith('"'))try{const r=JSON.parse(t);return Zo(r)}catch{return e}}return e}function Xa(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function vS(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Hh(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}function yS(e){const t=/(\"(\\u[a-fA-F0-9]{4}|\\[^u]|[^\\"])*\"(?:\s*:)?|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\btrue\b|\bfalse\b|\bnull\b)/g;let n="",r=0;for(const s of e.matchAll(t)){const i=s.index??0,o=s[0];n+=Xa(e.slice(r,i));let l="var(--json-fallback)";o.startsWith('"')&&o.trimEnd().endsWith(":")?l="var(--json-key)":o.startsWith('"')?l="var(--json-string)":/true|false|null/.test(o)?l="var(--json-literal)":l="var(--json-number)",n+=`<span style="color:${l}">${Xa(o)}</span>`,r=i+o.length}return n+=Xa(e.slice(r)),n}const xS=["overview","basics","metadata","notes"],Vh="lenslet.inspector.sections",Qh="lenslet.inspector.metricsExpanded",Ja=12,wS={overview:!0,metadata:!0,basics:!0,notes:!0};function Fo({title:e,open:t,onToggle:n,actions:r,children:s,contentClassName:i}){const[o,l]=d.useState(t),[u,c]=d.useState(t?"open":"closed");return d.useEffect(()=>{if(t){l(!0);const h=window.requestAnimationFrame(()=>c("open"));return()=>window.cancelAnimationFrame(h)}c("closing");const f=window.setTimeout(()=>{l(!1),c("closed")},140);return()=>window.clearTimeout(f)},[t]),a.jsxs("div",{className:"border-b border-border/60",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[a.jsxs("button",{type:"button",onClick:n,"aria-expanded":t,className:"flex items-center gap-2 inspector-section-title hover:text-text transition-colors",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform ${t?"rotate-90":""}`,"aria-hidden":"true",children:a.jsx("path",{d:"m9 18 6-6-6-6"})}),a.jsx("span",{children:e})]}),r]}),o&&a.jsx("div",{className:"inspector-section-body","data-state":u,"aria-hidden":!t,children:a.jsx("div",{className:i??"px-3 pb-3",children:s})})]})}function SS({path:e,selectedPaths:t=[],items:n=[],onResize:r,onStarChanged:s,sortSpec:i,onFindSimilar:o,embeddingsAvailable:l=!1,embeddingsLoading:u=!1}){const c=!!e,{data:f,isLoading:h}=uS(e??""),g=cS(e??""),S=ts(),[w,N]=d.useState(wS),R=d.useCallback(_=>{N(G=>({...G,[_]:!G[_]}))},[]),[v,p]=d.useState(!1),m=t.length>1,y=!!o&&l&&!m,b=o?l?m?"Select a single image to search.":null:u?"Loading embeddings...":"No embeddings detected.":null,[L,M]=d.useState(""),[E,T]=d.useState(""),[C,F]=d.useState(""),[Q,z]=d.useState(null),[$,oe]=d.useState("idle"),[B,ue]=d.useState(!1),[O,V]=d.useState(null),[q,fe]=d.useState({}),be=d.useMemo(()=>{const _=n.find(G=>G.path===e);return _&&_.star!==void 0?_.star:null},[n,e])??(f==null?void 0:f.star)??null,H=tS(m?null:e),Y={tags:!!(H!=null&&H.pending.set_tags),notes:(H==null?void 0:H.pending.set_notes)!==void 0,star:(H==null?void 0:H.pending.set_star)!==void 0},ne=d.useMemo(()=>{const _=new Set(t);return n.filter(G=>_.has(G.path))},[n,t]),he=d.useMemo(()=>ne.reduce((_,G)=>_+(G.size||0),0),[ne]);d.useEffect(()=>{f&&(M((f.tags||[]).join(", ")),T(f.notes||"")),F(""),z(null),oe("idle"),ue(!1)},[f==null?void 0:f.updated_at,e]);const He=d.useCallback(_=>{if(m&&t.length){Bh(t,_);return}if(!e)return;const G=(f==null?void 0:f.version)??1;g.mutate({patch:_,baseVersion:G,idempotencyKey:Ki("patch")})},[m,t,e,f==null?void 0:f.version,g]),Ke=d.useCallback(()=>{if(!H||!e)return;const _={};H.pending.set_tags!==void 0&&(_.tags=Hh(L)),H.pending.set_notes!==void 0&&(_.notes=E),H.pending.set_star!==void 0&&(_.star=be??null);const G=H.current.version??1;g.mutate({patch:_,baseVersion:G,idempotencyKey:Ki("patch")})},[H,e,L,E,be,g]),Ne=d.useCallback(()=>{if(!H||!e)return;const _=H.current;M((_.tags||[]).join(", ")),T(_.notes||""),S.setQueryData(qi(e),_),ea(e),s==null||s([e],_.star??null)},[H,e,S,s]);d.useEffect(()=>{if(!e)return;const _=G=>{if(Nd(G.target))return;const ie=G.key;if(!/^[0-5]$/.test(ie))return;G.preventDefault();const we=ie==="0"?null:Number(ie);if(m&&t.length){He({star:we}),s==null||s(t,we);return}He({star:we}),s==null||s([e],we)};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[e,m,t,He,s]);const ft=Pr(e?()=>me.getThumb(e):null,[e]),De=e?e.split("/").pop()||e:"",cn=d.useMemo(()=>{var G;if(De.includes("."))return De.slice(De.lastIndexOf(".")+1).toUpperCase();const _=n.find(ie=>ie.path===e);return(G=_==null?void 0:_.type)!=null&&G.includes("/")?_.type.split("/")[1].toUpperCase():""},[De,n,e]),_e=d.useMemo(()=>n.find(_=>_.path===e),[n,e]),Yt=d.useMemo(()=>e?(_e==null?void 0:_e.source)??e:"",[_e,e]),ht=d.useCallback(async()=>{if(e){oe("loading"),z(null);try{const _=await me.getMetadata(e),G=Zo(_.meta),ie=JSON.stringify(G,null,2);F(ie),oe("loaded")}catch(_){const G=_ instanceof Error?_.message:"Failed to load metadata";F(G),z(G),oe("error")}}},[e]),U=d.useCallback(()=>{var _;C&&((_=navigator.clipboard)==null||_.writeText(C).then(()=>{ue(!0),setTimeout(()=>ue(!1),1200)}).catch(G=>{const ie=G instanceof Error?G.message:"Copy failed";z(ie)}))},[C]),re=d.useMemo(()=>C?yS(C):"",[C]),ae=$==="loading"?"Loading metadata":C||"PNG metadata not loaded yet.",ve=$==="loaded"&&!!C,ce=ve?"h-48":"h-24",ge=m?null:a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[C&&a.jsx("button",{className:"text-muted underline underline-offset-2 hover:text-text disabled:opacity-60 min-w-[48px] text-center",onClick:U,disabled:!C,title:"Copy metadata",children:B?"Copied":"Copy"}),a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[78px]",onClick:ht,disabled:!e||$==="loading",children:$==="loading"?"Loading":"Load meta"})]});d.useEffect(()=>{try{const _=localStorage.getItem(Vh);if(!_)return;const G=JSON.parse(_);if(!G||typeof G!="object")return;const ie={};for(const we of xS)typeof G[we]=="boolean"&&(ie[we]=G[we]);Object.keys(ie).length>0&&N(we=>({...we,...ie}))}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(Vh,JSON.stringify(w))}catch{}},[w]),d.useEffect(()=>{try{const _=localStorage.getItem(Qh);_==="1"||_==="true"?p(!0):(_==="0"||_==="false")&&p(!1)}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(Qh,v?"1":"0")}catch{}},[v]);const ee=d.useCallback((_,G)=>{var ie;G&&((ie=navigator.clipboard)==null||ie.writeText(G).then(()=>{V(_),setTimeout(()=>V(we=>we===_?null:we),1e3)}).catch(()=>{}))},[]),W=d.useCallback((_,G)=>{if(G&&!q[_]){const ie=G.offsetHeight;ie&&fe(we=>we[_]?we:{...we,[_]:ie})}},[q]);return c?a.jsxs("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:[!m&&a.jsx("div",{className:"p-3 border-b border-border flex justify-center",children:a.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border w-[220px] h-[160px] bg-panel select-none",children:[ft&&a.jsx("img",{src:ft,alt:"thumb",className:"block w-full h-full object-contain"}),!!cn&&a.jsx("div",{className:"absolute top-1.5 left-1.5 bg-surface border border-border text-text text-xs px-1.5 py-0.5 rounded-md select-none",children:cn})]})}),a.jsxs(Fo,{title:m?"Selection":"Item",open:w.overview,onToggle:()=>R("overview"),contentClassName:"px-3 pb-3 space-y-2",actions:o&&a.jsx("button",{type:"button",className:"btn btn-sm",onClick:o,disabled:!y,title:b??"Find similar",children:"Find similar"}),children:[m?a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Selected"}),a.jsxs("div",{className:"inspector-field-value",children:[t.length," files"]})]}),a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Total size"}),a.jsx("div",{className:"inspector-field-value",children:Ya(he)})]})]}):a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Filename"}),a.jsx("div",{className:"inspector-field-value break-all",title:De,children:De})]}),b&&a.jsx("div",{className:"text-[11px] text-muted",children:b})]}),a.jsxs(Fo,{title:"Basics",open:w.basics,onToggle:()=>R("basics"),children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",role:"radiogroup","aria-label":"Star rating",children:[a.jsx("span",{className:"ui-kv-label w-16 shrink-0",children:m?"Rating (all)":"Rating"}),a.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(_=>{const G=(be??0)>=_;return a.jsx("button",{className:`w-6 h-6 flex items-center justify-center rounded-lg border border-border/60 bg-transparent text-[13px] ${G?"text-star-active":"text-star-inactive"} hover:border-border hover:text-star-hover transition-colors`,onClick:()=>{const ie=be===_&&!m?null:_;m&&t.length?(s==null||s(t,ie),Bh(t,{star:ie})):e&&(s==null||s([e],ie),hv(e,{star:ie}))},title:`${_} star${_>1?"s":""} (key ${_})`,"aria-label":`${_} star${_>1?"s":""}`,"aria-pressed":be===_,children:G?"":""},_)})})]}),!m&&H&&Y.star&&a.jsxs("div",{className:"ui-banner ui-banner-danger mt-2 text-[11px] flex items-center justify-between gap-2",children:[a.jsx("span",{children:"Rating conflict."}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:Ke,children:"Apply again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:Ne,children:"Keep theirs"})]})]}),!m&&_e&&a.jsxs("div",{className:"text-[12px] space-y-1.5 leading-relaxed",children:[a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ee("dimensions",`${_e.w}${_e.h}`),children:"Dimensions"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:_=>W("dimensions",_),style:q.dimensions?{minHeight:q.dimensions}:void 0,children:O==="dimensions"?"Copied":`${_e.w}${_e.h}`})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ee("size",Ya(_e.size)),children:"Size"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:_=>W("size",_),style:q.size?{minHeight:q.size}:void 0,children:O==="size"?"Copied":Ya(_e.size)})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ee("type",_e.type),children:"Type"}),a.jsx("span",{className:"ui-kv-value break-all text-right inline-block min-w-[80px]",ref:_=>W("type",_),style:q.type?{minHeight:q.type}:void 0,children:O==="type"?"Copied":_e.type})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Yt&&ee("source",Yt),children:"Source"}),a.jsx("span",{className:"ui-kv-value inspector-value-clamp break-words text-right max-w-[70%] inline-block min-w-[80px]",ref:_=>W("source",_),style:q.source?{minHeight:q.source}:void 0,title:Yt,children:O==="source"?"Copied":Yt})]}),(()=>{const _=_e.metrics||null;if(!_)return null;const G=Object.entries(_).filter(([,ze])=>ze!=null);if(!G.length)return null;const ie=(i==null?void 0:i.kind)==="metric"?i.key:null,we=[...G].sort(([ze],[Cn])=>ze.localeCompare(Cn));let qe=we;if(ie){const ze=we.findIndex(([Cn])=>Cn===ie);ze>0&&(qe=[we[ze],...we.slice(0,ze),...we.slice(ze+1)])}const mt=qe.length>Ja,Wn=v||!mt?qe:qe.slice(0,Ja),dn=qe.length-Ja;return a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"ui-subsection-title mb-1",children:"Metrics"}),a.jsxs("div",{className:"space-y-1",children:[Wn.map(([ze,Cn])=>{const ns=ie===ze;return a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:`w-24 shrink-0 ${ns?"text-accent font-medium":"ui-kv-label"}`,children:ze}),a.jsx("span",{className:`ui-kv-value text-right ${ns?"text-accent font-medium":""}`,children:vS(Cn)})]},ze)}),mt&&a.jsx("button",{type:"button",className:"text-[11px] text-muted underline underline-offset-2 hover:text-text",onClick:()=>p(ze=>!ze),"aria-expanded":v,children:v?"Show less":`+${dn} more`})]})]})})()]})]}),!m&&a.jsxs(Fo,{title:"Metadata",open:w.metadata,onToggle:()=>R("metadata"),actions:ge,children:[a.jsx("pre",{className:`ui-code-block ${ce} overflow-auto whitespace-pre-wrap`,children:ve?a.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:re}}):ae}),Q&&a.jsx("div",{className:"text-[11px] text-danger mt-1 break-words",children:Q})]}),a.jsxs(Fo,{title:"Notes & Tags",open:w.notes,onToggle:()=>R("notes"),contentClassName:"px-3 pb-3 space-y-2",children:[!m&&H&&(Y.tags||Y.notes)&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Conflicting edits detected."}),a.jsx("div",{className:"text-[11px] text-muted mt-0.5",children:"Your changes were not saved because this item was updated elsewhere."}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:Ke,children:"Apply my changes again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:Ne,children:"Keep theirs"})]})]}),a.jsx("textarea",{className:"ui-textarea inspector-input w-full scrollbar-thin",placeholder:"Add notes",value:E,onChange:_=>T(_.target.value),onBlur:()=>{He({notes:E})},"aria-label":m?"Notes for selected items":"Notes"}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:m?"Tags (apply to all, comma-separated)":"Tags (comma-separated)"}),a.jsx("input",{className:"ui-input inspector-input w-full",placeholder:"tag1, tag2",value:L,onChange:_=>M(_.target.value),onBlur:()=>{He({tags:Hh(L)})},"aria-label":m?"Tags for selected items":"Tags"})]})]}),a.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 right-[calc(var(--right)-3px)] hover:bg-accent/20",onMouseDown:r})]}):a.jsx("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:a.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 right-[calc(var(--right)-3px)] hover:bg-accent/20",onMouseDown:r})})}function kS({open:e,embeddings:t,rejected:n=[],selectedPath:r,embeddingsLoading:s=!1,embeddingsError:i,onClose:o,onSearch:l}){const[u,c]=d.useState(""),[f,h]=d.useState("path"),[g,S]=d.useState(""),[w,N]=d.useState(""),[R,v]=d.useState("50"),[p,m]=d.useState(""),[y,b]=d.useState(null),[L,M]=d.useState(!1),E=d.useRef(null),T=d.useRef(null),C=d.useMemo(()=>t.find(B=>B.name===u)??t[0]??null,[t,u]);d.useEffect(()=>{e&&(b(null),t.length>0&&!t.some(B=>B.name===u)&&c(t[0].name),r?(h("path"),S(r)):(h("vector"),S("")))},[e,t,u,r]),d.useEffect(()=>{if(!e)return;const B=f==="vector"?T.current:E.current,ue=window.requestAnimationFrame(()=>B==null?void 0:B.focus());return()=>window.cancelAnimationFrame(ue)},[e,f]);const F=d.useCallback(async()=>{if(b(null),!t.length){b("No embeddings available for similarity search.");return}if(!C){b("Select an embedding to search.");return}const B=g.trim(),ue=w.trim(),O=Number(R);if(!Number.isFinite(O)||O<=0){b("Top K must be a positive number.");return}const V=Math.min(1e3,Math.max(1,Math.floor(O))),q=p.trim()===""?null:Number(p);if(q!=null&&!Number.isFinite(q)){b("Min score must be a valid number.");return}if(f==="path"&&!B){b("Select an image path for the query.");return}if(f==="vector"&&!ue){b("Paste a base64 vector for the query.");return}const fe={embedding:C.name,query_path:f==="path"?B:null,query_vector_b64:f==="vector"?ue:null,top_k:V,min_score:q};M(!0);try{await l(fe),o()}catch(de){de instanceof Sn||de instanceof Error?b(de.message):b("Failed to run similarity search.")}finally{M(!1)}},[t.length,C,g,w,R,p,f,l,o]);d.useEffect(()=>{if(!e)return;const B=ue=>{if(ue.key==="Escape"){ue.preventDefault(),o();return}(ue.ctrlKey||ue.metaKey)&&ue.key==="Enter"&&(ue.preventDefault(),F())};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[e,o,F]);const Q=d.useCallback(()=>{var B;r&&(h("path"),S(r),(B=E.current)==null||B.focus())},[r]);if(!e)return null;const z=t.map(B=>({value:B.name,label:B.name})),$=n.length>0,oe=n.slice(0,3);return a.jsx("div",{className:"fixed inset-0 z-[var(--z-overlay)] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",onClick:B=>{B.target===B.currentTarget&&o()},children:a.jsxs("div",{className:"w-full max-w-2xl rounded-lg border border-border bg-panel shadow-[0_20px_50px_rgba(0,0,0,0.55)]",onClick:B=>B.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Find similar",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-text",children:"Find similar"}),a.jsx("div",{className:"text-xs text-muted",children:"Search with embeddings"})]}),a.jsx("button",{className:"btn btn-sm",onClick:o,"aria-label":"Close",children:"Close"})]}),a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[i&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:i}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Embedding"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(uc,{value:(C==null?void 0:C.name)??"",onChange:c,options:z,placeholder:s?"Loading embeddings...":"Select embedding",disabled:!t.length,triggerClassName:"min-w-[180px]"}),C&&a.jsxs("span",{className:"text-xs text-muted",children:[C.dimension," dims, ",C.metric,", ",C.dtype]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Query mode"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",className:`btn btn-sm ${f==="path"?"btn-active":""}`,onClick:()=>h("path"),"aria-pressed":f==="path",children:"Selected image"}),a.jsx("button",{type:"button",className:`btn btn-sm ${f==="vector"?"btn-active":""}`,onClick:()=>h("vector"),"aria-pressed":f==="vector",children:"Vector input"})]})]}),f==="path"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Image path"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:E,type:"text",className:"input w-full",value:g,onChange:B=>S(B.target.value),placeholder:r?"Selected image path":"Select an image first"}),a.jsx("button",{type:"button",className:"btn btn-sm",onClick:Q,disabled:!r,title:r?"Use selected image":"Select an image first",children:"Use selected"})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Vector (base64 float32)"}),a.jsx("textarea",{ref:T,className:"ui-textarea w-full font-mono text-[11px]",rows:5,value:w,onChange:B=>N(B.target.value),placeholder:"Paste base64-encoded float32 vector"}),a.jsx("div",{className:"text-[11px] text-muted",children:"Base64 of little-endian float32. Length must match embedding dimension."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Top K"}),a.jsx("input",{type:"number",min:1,max:1e3,step:1,className:"input ui-number w-full",value:R,onChange:B=>v(B.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Min score"}),a.jsx("input",{type:"number",step:.01,className:"input ui-number w-full",value:p,onChange:B=>m(B.target.value),placeholder:"Optional"})]})]}),$&&a.jsxs("div",{className:"ui-banner text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Skipped columns"}),a.jsxs("div",{className:"mt-1 space-y-1 text-muted",children:[oe.map(B=>a.jsxs("div",{children:[B.name,": ",B.reason]},B.name)),n.length>oe.length&&a.jsxs("div",{children:["+",n.length-oe.length," more"]})]})]}),y&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:y})]}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-border",children:[a.jsx("div",{className:"text-xs text-muted",children:C?`Metric: ${C.metric}`:"Metric: cosine"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:o,disabled:L,children:"Cancel"}),a.jsx("button",{className:"btn btn-sm btn-active",onClick:F,disabled:L||!t.length,children:L?"Searching...":"Find similar"})]})]})]})})}const CS=(e,t=!1)=>t?["folder",e,"recursive"]:["folder",e],bS=15e3;function mv(e,t=!1){const n=Jl();return Gl({queryKey:CS(e,t),queryFn:()=>me.getFolder(e,void 0,t),staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:r=>Math.min(1e3*Math.pow(2,r),5e3),refetchOnWindowFocus:!1,refetchInterval:n?bS:!1,refetchIntervalInBackground:n})}const ES=(e,t)=>["search",e,t],NS=2e4;function jS(e,t){const n=Jl();return Gl({enabled:!!e.trim(),queryKey:ES(e,t),queryFn:()=>me.search(e,t),staleTime:3e3,gcTime:6e4,placeholderData:r=>r,retry:1,refetchInterval:n?NS:!1,refetchIntervalInBackground:n})}const MS=()=>["embeddings"];function RS(){return Gl({queryKey:MS(),queryFn:me.getEmbeddings,staleTime:6e4,gcTime:5*6e4,retry:1,refetchOnWindowFocus:!1})}const LS=/^[\/@a-zA-Z0-9._\-\/]{1,512}$/,TS=[".jpg",".jpeg",".png",".webp"];function on(e){try{const t=decodeURI(e||""),r=(t.startsWith("/")?t:`/${t}`).replace(/\/{2,}/g,"/"),s=r.length>1?r.replace(/\/$/,""):r;return LS.test(s)?s:"/"}catch{return"/"}}function Kh(){return(window.location.hash||"").replace(/^#/,"")}function qh(e){const t=on(e),n=`#${encodeURI(t)}`;window.location.hash!==n&&(window.location.hash=n)}function Oo(e){const t=on(e),n=`#${encodeURI(t)}`;if(window.location.hash!==n){const r=`${window.location.pathname}${window.location.search}${n}`;window.history.replaceState(window.history.state,"",r)}}function _S(e){const n=on(e).toLowerCase();return TS.some(r=>n.endsWith(r))}function pv(e,t){const n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,""),s=[n,r].filter(Boolean).join("/");return s.startsWith("/")?s:`/${s}`}function Yh(e){const n=on(e).split("/").filter(Boolean);return n.length<=1?"/":"/"+n.slice(0,-1).join("/")}function PS(e){return e.endsWith("/_trash_")}const IS=new Set([0,1,2,3,4,5]),Ld=new Set(["<","<=",">",">="]),FS=/^\d{4}-\d{2}-\d{2}$/;function OS(e,t){return!t||!t.and.length?e:e.filter(n=>DS(n,t.and))}function DS(e,t){for(const n of t)if(!zS(e,n))return!1;return!0}function zS(e,t){var n,r,s,i,o,l,u;if("stars"in t){const c=t.stars;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsIn"in t){const c=t.starsIn.values;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsNotIn"in t){const c=t.starsNotIn.values;if(!c||!c.length)return!0;const f=e.star??0;return!c.includes(f)}if("nameContains"in t){const c=(n=t.nameContains.value)==null?void 0:n.trim();return c?(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("nameNotContains"in t){const c=(r=t.nameNotContains.value)==null?void 0:r.trim();return c?!(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("commentsContains"in t){const c=(s=t.commentsContains.value)==null?void 0:s.trim();if(!c)return!0;const f=e.comments??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("commentsNotContains"in t){const c=(i=t.commentsNotContains.value)==null?void 0:i.trim();if(!c)return!0;const f=e.comments??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("urlContains"in t){const c=(o=t.urlContains.value)==null?void 0:o.trim();if(!c)return!0;const f=e.source??e.url??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("urlNotContains"in t){const c=(l=t.urlNotContains.value)==null?void 0:l.trim();if(!c)return!0;const f=e.source??e.url??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("dateRange"in t){const{from:c,to:f}=t.dateRange;if(!c&&!f)return!0;if(!e.addedAt)return!1;const h=Date.parse(e.addedAt);if(Number.isNaN(h))return!1;const g=Jh(c,!1),S=Jh(f,!0);return!(g!=null&&h<g||S!=null&&h>S)}if("widthCompare"in t){const{op:c,value:f}=t.widthCompare;if(!Number.isFinite(f))return!0;const h=e.w;return!Number.isFinite(h)||h<=0?!1:Zh(h,c,f)}if("heightCompare"in t){const{op:c,value:f}=t.heightCompare;if(!Number.isFinite(f))return!0;const h=e.h;return!Number.isFinite(h)||h<=0?!1:Zh(h,c,f)}if("metricRange"in t){const{key:c,min:f,max:h}=t.metricRange,g=(u=e.metrics)==null?void 0:u[c];return!(g==null||g<f||g>h)}return!0}function wc(e){if(!e||typeof e!="object")return null;const t=e.and;if(!Array.isArray(t))return null;const n=[];for(const r of t){const s=ZS(r);s&&n.push(s)}return{and:n}}function Gh(e){var r;const t=e.and.find(s=>"stars"in s),n=e.and.find(s=>"starsIn"in s);return(r=n==null?void 0:n.starsIn)!=null&&r.values?n.starsIn.values:(t==null?void 0:t.stars)??[]}function Za(e,t){return gv(e,t)}function AS(e){var n;const t=e.and.find(r=>"starsIn"in r);return((n=t==null?void 0:t.starsIn)==null?void 0:n.values)??[]}function gv(e,t){const n=Mi(t),r=e.and.filter(s=>!("starsIn"in s)&&!("stars"in s));return n.length?{and:[{starsIn:{values:n}},...r]}:{and:r}}function $S(e){var n;const t=e.and.find(r=>"starsNotIn"in r);return((n=t==null?void 0:t.starsNotIn)==null?void 0:n.values)??[]}function vv(e,t){const n=Mi(t),r=e.and.filter(s=>!("starsNotIn"in s));return n.length?{and:[{starsNotIn:{values:n}},...r]}:{and:r}}function US(e){var n;const t=e.and.find(r=>"nameContains"in r);return((n=t==null?void 0:t.nameContains)==null?void 0:n.value)??null}function yv(e,t){const n=Ht(t),r=e.and.filter(s=>!("nameContains"in s));return n?{and:[{nameContains:{value:n}},...r]}:{and:r}}function BS(e){var n;const t=e.and.find(r=>"nameNotContains"in r);return((n=t==null?void 0:t.nameNotContains)==null?void 0:n.value)??null}function xv(e,t){const n=Ht(t),r=e.and.filter(s=>!("nameNotContains"in s));return n?{and:[{nameNotContains:{value:n}},...r]}:{and:r}}function WS(e){var n;const t=e.and.find(r=>"commentsContains"in r);return((n=t==null?void 0:t.commentsContains)==null?void 0:n.value)??null}function wv(e,t){const n=Ht(t),r=e.and.filter(s=>!("commentsContains"in s));return n?{and:[{commentsContains:{value:n}},...r]}:{and:r}}function HS(e){var n;const t=e.and.find(r=>"commentsNotContains"in r);return((n=t==null?void 0:t.commentsNotContains)==null?void 0:n.value)??null}function Sv(e,t){const n=Ht(t),r=e.and.filter(s=>!("commentsNotContains"in s));return n?{and:[{commentsNotContains:{value:n}},...r]}:{and:r}}function VS(e){var n;const t=e.and.find(r=>"urlContains"in r);return((n=t==null?void 0:t.urlContains)==null?void 0:n.value)??null}function kv(e,t){const n=Ht(t),r=e.and.filter(s=>!("urlContains"in s));return n?{and:[{urlContains:{value:n}},...r]}:{and:r}}function QS(e){var n;const t=e.and.find(r=>"urlNotContains"in r);return((n=t==null?void 0:t.urlNotContains)==null?void 0:n.value)??null}function Cv(e,t){const n=Ht(t),r=e.and.filter(s=>!("urlNotContains"in s));return n?{and:[{urlNotContains:{value:n}},...r]}:{and:r}}function KS(e){const t=e.and.find(n=>"dateRange"in n);return(t==null?void 0:t.dateRange)??null}function Sc(e,t){const n=_l((t==null?void 0:t.from)??null),r=_l((t==null?void 0:t.to)??null),s=e.and.filter(i=>!("dateRange"in i));return!n&&!r?{and:s}:{and:[{dateRange:{...n?{from:n}:{},...r?{to:r}:{}}},...s]}}function qS(e){const t=e.and.find(n=>"widthCompare"in n);return(t==null?void 0:t.widthCompare)??null}function el(e,t){const n=e.and.filter(r=>!("widthCompare"in r));return!t||!Number.isFinite(t.value)||!Ld.has(t.op)?{and:n}:{and:[{widthCompare:{op:t.op,value:t.value}},...n]}}function YS(e){const t=e.and.find(n=>"heightCompare"in n);return(t==null?void 0:t.heightCompare)??null}function tl(e,t){const n=e.and.filter(r=>!("heightCompare"in r));return!t||!Number.isFinite(t.value)||!Ld.has(t.op)?{and:n}:{and:[{heightCompare:{op:t.op,value:t.value}},...n]}}function GS(e,t){const n=e.and.find(r=>"metricRange"in r&&r.metricRange.key===t);return(n==null?void 0:n.metricRange)??null}function XS(e,t,n){const r=e.and.filter(s=>!("metricRange"in s&&s.metricRange.key===t));return n?{and:[{metricRange:{key:t,min:n.min,max:n.max}},...r]}:{and:r}}function JS(e){const t=wc(e);return t?t.and.length:0}function ZS(e){var t,n,r,s,i,o,l,u;if(!e||typeof e!="object")return null;if("stars"in e){const c=Mi(e.stars);return c.length?{starsIn:{values:c}}:null}if("starsIn"in e){const c=Mi((t=e.starsIn)==null?void 0:t.values);return c.length?{starsIn:{values:c}}:null}if("starsNotIn"in e){const c=Mi((n=e.starsNotIn)==null?void 0:n.values);return c.length?{starsNotIn:{values:c}}:null}if("nameContains"in e){const c=Ht((r=e.nameContains)==null?void 0:r.value);return c?{nameContains:{value:c}}:null}if("nameNotContains"in e){const c=Ht((s=e.nameNotContains)==null?void 0:s.value);return c?{nameNotContains:{value:c}}:null}if("commentsContains"in e){const c=Ht((i=e.commentsContains)==null?void 0:i.value);return c?{commentsContains:{value:c}}:null}if("commentsNotContains"in e){const c=Ht((o=e.commentsNotContains)==null?void 0:o.value);return c?{commentsNotContains:{value:c}}:null}if("urlContains"in e){const c=Ht((l=e.urlContains)==null?void 0:l.value);return c?{urlContains:{value:c}}:null}if("urlNotContains"in e){const c=Ht((u=e.urlNotContains)==null?void 0:u.value);return c?{urlNotContains:{value:c}}:null}if("dateRange"in e){const c=e.dateRange,f=_l((c==null?void 0:c.from)??null),h=_l((c==null?void 0:c.to)??null);return!f&&!h?null:{dateRange:{...f?{from:f}:{},...h?{to:h}:{}}}}if("widthCompare"in e){const c=e.widthCompare,f=Xh(c==null?void 0:c.op,c==null?void 0:c.value);return f?{widthCompare:f}:null}if("heightCompare"in e){const c=e.heightCompare,f=Xh(c==null?void 0:c.op,c==null?void 0:c.value);return f?{heightCompare:f}:null}if("metricRange"in e){const c=e.metricRange;if(!c||typeof c!="object")return null;const f=typeof c.key=="string"?c.key:"",h=kc(c.min),g=kc(c.max);return!f||h==null||g==null||h>g?null:{metricRange:{key:f,min:h,max:g}}}return null}function Mi(e){if(!Array.isArray(e))return[];const t=[],n=new Set;for(const r of e){const s=typeof r=="number"?r:typeof r=="string"?Number(r):NaN;!Number.isInteger(s)||!IS.has(s)||n.has(s)||(n.add(s),t.push(s))}return t}function Ht(e){if(typeof e!="string")return null;const t=e.trim();return t||null}function _l(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=Date.parse(t);return Number.isNaN(n)?null:t}function Xh(e,t){if(typeof e!="string"||!Ld.has(e))return null;const n=kc(t);return n==null?null:{op:e,value:n}}function Jh(e,t){if(!e)return null;const n=e.trim();if(!n)return null;const r=Date.parse(n);return Number.isNaN(r)?null:t&&FS.test(n)?r+24*60*60*1e3-1:r}function Zh(e,t,n){switch(t){case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;default:return!0}}function kc(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function em(e){return e.addedAt?Date.parse(e.addedAt):0}function Pl(e,t){return e.name.localeCompare(t.name)}function ek(e,t){const n=em(e),r=em(t);return n===r?Pl(e,t):n-r}function tk(e){return(t,n)=>{var i,o;const r=(i=t.metrics)==null?void 0:i[e],s=(o=n.metrics)==null?void 0:o[e];return r==null&&s==null?Pl(t,n):r==null?1:s==null?-1:r===s?Pl(t,n):r-s}}function tm(e,t){return OS(e,t)}function nk(e){let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function rk(e,t){const n=nk(t||1),r=[...e];for(let s=r.length-1;s>0;s-=1){const i=Math.floor(n()*(s+1));[r[s],r[i]]=[r[i],r[s]]}return r}function sk(e,t,n){if(t.kind==="builtin"&&t.key==="random"){const i=n??Date.now();return rk(e,i)}let r=ek;t.kind==="metric"?r=tk(t.key):t.key==="name"&&(r=Pl);const s=[...e].sort(r);return t.dir==="desc"?s.reverse():s}const nm="leftW.folders",rm="leftW.metrics",ik="leftW",sm="rightW";function ok(e,t){const[n,r]=d.useState(240),[s,i]=d.useState(320),[o,l]=d.useState(240),u=t==="metrics"?s:n,c=d.useRef(u),f=d.useRef(o);return d.useEffect(()=>{c.current=u},[u]),d.useEffect(()=>{f.current=o},[o]),d.useEffect(()=>{try{const S=window.localStorage,w=Number(S.getItem(nm)??S.getItem(ik));Number.isFinite(w)&&w>0&&r(w);const N=Number(S.getItem(rm));Number.isFinite(N)&&N>0&&i(N);const R=Number(S.getItem(sm));Number.isFinite(R)&&R>0&&l(R)}catch{}},[]),{leftW:u,rightW:o,onResizeLeft:S=>{S.preventDefault();const w=e.current;if(!w)return;const N=w.getBoundingClientRect(),R=t==="metrics"?rm:nm;let v=c.current;const p=y=>{const b=y.clientX-N.left,L=200,M=Math.max(L,N.width-f.current-200),E=Math.min(Math.max(b,L),M);v=E,t==="metrics"?i(E):r(E)},m=()=>{window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",m);try{window.localStorage.setItem(R,String(v))}catch{}};window.addEventListener("mousemove",p),window.addEventListener("mouseup",m)},onResizeRight:S=>{S.preventDefault();const w=e.current;if(!w)return;const N=w.getBoundingClientRect(),R=p=>{const m=p.clientX-N.left,y=N.width-m,b=240,L=Math.max(b,N.width-c.current-200),M=Math.min(Math.max(y,b),L);l(M)},v=()=>{window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",v);try{window.localStorage.setItem(sm,String(f.current))}catch{}};window.addEventListener("mousemove",R),window.addEventListener("mouseup",v)}}}function lk({x:e,y:t,items:n}){return a.jsx("div",{className:"dropdown-panel fixed",role:"menu",style:{left:e,top:t,minWidth:180},onClick:r=>r.stopPropagation(),children:n.map((r,s)=>a.jsxs("button",{className:`dropdown-item w-full ${r.danger?"text-danger hover:text-danger":""}`,role:"menuitem","aria-disabled":r.disabled,disabled:r.disabled,onClick:i=>{i.stopPropagation(),r.disabled||r.onClick()},children:[r.icon&&a.jsx("span",{className:"shrink-0",children:r.icon}),a.jsx("span",{children:r.label})]},s))})}function im(e){return JSON.stringify(e,null,2)}function om(e){const t=s=>'"'+s.replaceAll('"','""')+'"',n="path,folder,name,star,type,size,width,height,tags,notes",r=e.map(s=>{const i=(s.tags||[]).join(" "),o=s.notes||"";return[s.path,s.folder,s.name,String(s.star??""),s.type??"",s.size??"",s.width??"",s.height??"",i,o].map(l=>t(String(l))).join(",")});return[n,...r].join(`
`)}function lm(e){return e.map(t=>{const n=t.path.split("/").filter(Boolean);n.pop();const r=n.length?`/${n.join("/")}`:"/";return{path:t.path,folder:r,name:t.name,star:t.star??null,type:t.type,size:t.size,width:t.w,height:t.h}})}function ak(e,t=250){const[n,r]=nl.useState(e);return nl.useEffect(()=>{const s=window.setTimeout(()=>r(e),Math.max(0,t));return()=>window.clearTimeout(s)},[e,t]),n}const bv="application/x-lenslet-paths",uk='[role="treeitem"].drop-target';function am(e){var n;return Array.from(((n=e.dataTransfer)==null?void 0:n.types)||[]).includes(bv)}function ck(e){document.querySelectorAll(uk).forEach(t=>{t!==e&&t.classList.remove("drop-target")})}function um(e){ck(e),e.classList.add("drop-target")}function cm(e){return e.startsWith("/")?e:`/${e}`}function dk({path:e,isLeaf:t}){const n=ts(),r=d.useCallback(l=>{am(l)&&(l.preventDefault(),t&&um(l.currentTarget))},[t]),s=d.useCallback(l=>{!t||!am(l)||(l.preventDefault(),um(l.currentTarget))},[t]),i=d.useCallback(l=>{const u=l.currentTarget,c=document.elementFromPoint(l.clientX,l.clientY);c&&u.contains(c)||u.classList.remove("drop-target")},[]),o=d.useCallback(async l=>{const u=l.dataTransfer;if(!u)return;l.preventDefault(),l.currentTarget.classList.remove("drop-target");const c=u.getData(bv),h=(c?JSON.parse(c):[]).filter(Boolean);if(!h.length)return;let g=h[0].split("/").slice(0,-1).join("/")||"/";g=cm(g);const S=cm(e);try{for(const w of h)await me.moveFile(w,S);n.invalidateQueries({queryKey:["folder",g]}),n.invalidateQueries({queryKey:["folder",S]}),n.setQueryData(["folder",g],w=>!w||!Array.isArray(w.items)?w:{...w,items:w.items.filter(N=>!h.includes(N.path))})}catch{}},[e,n]);return{onDragOver:r,onDragEnter:s,onDragLeave:i,onDrop:o}}const fk='[role="tree"] [role="treeitem"]';function hk(){return Array.from(document.querySelectorAll(fk))}function mk(e,t){var i;const n=hk(),r=n.findIndex(o=>o===e);if(r===-1)return;let s=r;t==="ArrowDown"?s=Math.min(n.length-1,r+1):t==="ArrowUp"?s=Math.max(0,r-1):t==="Home"?s=0:t==="End"&&(s=n.length-1),(i=n[s])==null||i.focus()}function pk({path:e,isLeaf:t,isExpanded:n,setExpanded:r,onOpen:s}){return d.useCallback(i=>{if(i.key==="Enter"){i.preventDefault(),s(e);return}if(i.key==="ArrowRight"){!t&&!n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.add(e),l}));return}if(i.key==="ArrowLeft"){!t&&n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.delete(e),l}));return}(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="Home"||i.key==="End")&&(i.preventDefault(),mk(i.currentTarget,i.key))},[e,t,n,r,s])}function gk({current:e,roots:t,data:n,onOpen:r,onResize:s,onContextMenu:i,className:o,showResizeHandle:l=!0}){const[u,c]=d.useState(new Set(["/"])),f=d.useRef(new Map),h=d.useRef(new Map),g=d.useCallback(async(w,N)=>{const R=on(w||"/"),v=f.current,p=h.current,m=v.get(R);if(m!==void 0)return m;const y=p.get(R);if(y)return y;const b=(async()=>{let L=0;const M=new Set,E=[{path:R,index:N}];for(;E.length;){const T=E.pop(),{path:C,index:F}=T;if(M.has(C))continue;M.add(C);let Q=F;if(!Q)try{Q=await me.getFolder(C)}catch(z){console.warn(`Failed to count folder ${C}:`,z);continue}L+=Q.items.length;for(const z of Q.dirs)z.kind==="branch"&&E.push({path:pv(C,z.name)})}return v.set(R,L),p.delete(R),L})();return p.set(R,b),b},[]);d.useEffect(()=>{const w=e.split("/").filter(Boolean),N=["/"];let R="";for(const v of w)R=R?`${R}/${v}`:`/${v}`,N.push(R);c(v=>{const p=new Set(v);for(const m of N)p.add(m);return p})},[e]);const S=o??"h-full overflow-auto bg-panel scrollbar-thin";return a.jsxs("div",{className:S,children:[a.jsx("div",{className:"p-1",role:"tree","aria-label":"Folders",children:t.map(w=>a.jsx(Ev,{path:w.path,label:w.label,depth:0,current:e,expanded:u,setExpanded:c,onOpen:r,onContextMenu:i,initial:n,getSubtreeCount:g},w.path))}),l&&a.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 left-[calc(var(--left)-3px)] hover:bg-accent/20",onMouseDown:s})]})}function Ev({path:e,label:t,depth:n,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,initial:u,getSubtreeCount:c}){var M,E;const f=s.has(e),{data:h}=mv(e),g=u&&e===u.path?u:h,S=r===e,w=(((M=g==null?void 0:g.dirs)==null?void 0:M.length)??0)===0,[N,R]=d.useState(g?g.items.length:null),v=pk({path:e,isLeaf:w,isExpanded:f,setExpanded:i,onOpen:o}),{onDragOver:p,onDragEnter:m,onDragLeave:y,onDrop:b}=dk({path:e,isLeaf:w}),L=T=>{T.stopPropagation(),i(C=>{const F=new Set(C);return F.has(e)?F.delete(e):F.add(e),F})};return d.useEffect(()=>{let T=!1;if(!g){R(null);return}return R(g.items.length),c(e,g).then(C=>{T||R(C)}).catch(C=>{T||console.warn(`Failed to compute subtree count for ${e}:`,C)}),()=>{T=!0}},[g,e,c]),a.jsxs("div",{children:[a.jsxs("div",{className:`flex items-center gap-1.5 py-0.5 px-2 rounded-md cursor-pointer min-h-[28px] outline-none transition-colors duration-75 ${S?"bg-accent/20 text-accent font-medium":"hover:bg-white/5 text-text"}`,role:"treeitem","aria-level":n+1,"aria-expanded":w?void 0:f,"aria-selected":S,tabIndex:S?0:-1,style:{paddingLeft:8+n*14},onClick:()=>o(e),onContextMenu:T=>{T.preventDefault(),T.stopPropagation(),l&&l(T,e)},onKeyDown:v,onDragOver:p,onDragEnter:m,onDragLeave:y,onDrop:b,children:[a.jsx("span",{className:"w-4 text-center opacity-60 hover:opacity-100 text-[10px]",onClick:L,children:f?"":""}),a.jsx("span",{className:"flex-1 overflow-hidden truncate text-sm",title:t,children:fS(t,28)}),N!==null&&a.jsx("span",{className:"text-[10px] opacity-50 bg-white/5 border border-white/5 rounded px-1.5 min-w-[24px] text-center",children:N})]}),f&&((E=g==null?void 0:g.dirs)==null?void 0:E.map(T=>a.jsx(Ev,{path:pv(e,T.name),label:T.name,depth:n+1,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,getSubtreeCount:c},T.name)))]})}const Ir=40,vk=12,dm=[5,4,3,2,1],fm=["<","<=",">",">="];function yk({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l,onChangeFilters:u}){const c=r&&r.length?a.jsx(xk,{selectedItems:r,metricKeys:n}):null,f=a.jsx(wk,{filters:o,onChangeFilters:u});return n.length?a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,a.jsx(Sk,{items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}),f]}):a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,f,a.jsx("div",{className:"p-4 text-sm text-muted",children:"No metrics found in this dataset."})]})}function xk({selectedItems:e,metricKeys:t}){const n=d.useMemo(()=>{if(!e.length)return null;const u=new Map;for(const h of e){const g=h.metrics;if(g)for(const[S,w]of Object.entries(g)){if(w==null||Number.isNaN(w))continue;const N=u.get(S);N?N.push(w):u.set(S,[w])}}return u.size?{entries:(t.length?t.filter(h=>u.has(h)):Array.from(u.keys()).sort()).map(h=>{const g=u.get(h)??[],S=Math.min(...g),w=Math.max(...g),N=g.reduce((R,v)=>R+v,0)/Math.max(1,g.length);return{key:h,value:g[0],min:S,max:w,avg:N,count:g.length}}),totalItems:e.length}:null},[e,t]);if(!n)return null;const{entries:r,totalItems:s}=n,i=r.slice(0,vk),o=r.length-i.length,l=s>1;return a.jsxs("div",{className:"ui-card",children:[a.jsxs("div",{className:"ui-card-header",children:[a.jsx("div",{className:"ui-section-title",children:"Selected metrics"}),a.jsxs("div",{className:"text-[11px] text-muted",children:[s," item",s===1?"":"s"]})]}),a.jsxs("div",{className:"space-y-1 text-[12px]",children:[i.map(u=>a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-muted w-28 shrink-0 truncate",title:u.key,children:u.key}),a.jsxs("span",{className:"font-mono text-text text-right tabular-nums",children:[l?`${_t(u.min)}  ${_t(u.max)}`:_t(u.value),l&&a.jsxs("span",{className:"text-[11px] text-muted ml-2",children:["avg ",_t(u.avg),u.count!==s?`  ${u.count}/${s}`:""]})]})]},u.key)),o>0&&a.jsxs("div",{className:"text-[11px] text-muted",children:["+",o," more"]})]})]})}function wk({filters:e,onChangeFilters:t}){const n=d.useMemo(()=>AS(e),[e]),r=d.useMemo(()=>$S(e),[e]),s=d.useMemo(()=>US(e)??"",[e]),i=d.useMemo(()=>BS(e)??"",[e]),o=d.useMemo(()=>WS(e)??"",[e]),l=d.useMemo(()=>HS(e)??"",[e]),u=d.useMemo(()=>VS(e)??"",[e]),c=d.useMemo(()=>QS(e)??"",[e]),f=d.useMemo(()=>KS(e)??{},[e]),h=d.useMemo(()=>xm(f.from),[f.from]),g=d.useMemo(()=>xm(f.to),[f.to]),S=d.useMemo(()=>qS(e),[e]),w=d.useMemo(()=>YS(e),[e]),[N,R]=d.useState((S==null?void 0:S.op)??">="),[v,p]=d.useState((w==null?void 0:w.op)??">=");d.useEffect(()=>{S!=null&&S.op&&R(S.op)},[S==null?void 0:S.op]),d.useEffect(()=>{w!=null&&w.op&&p(w.op)},[w==null?void 0:w.op]);const m=(y,b)=>{const L=new Set(n),M=new Set(r);y==="include"?L.has(b)?L.delete(b):(L.add(b),M.delete(b)):M.has(b)?M.delete(b):(M.add(b),L.delete(b));let E=gv(e,Array.from(L));E=vv(E,Array.from(M)),t(E)};return a.jsxs("div",{className:"ui-card",children:[a.jsx("div",{className:"ui-section-title mb-3",children:"Attributes"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Rating"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Include"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[dm.map(y=>{const b=n.includes(y);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${b?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>m("include",y),"aria-pressed":b,title:`Include ${y} star${y>1?"s":""}`,children:[y,""]},`stars-in-${y}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${n.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>m("include",0),"aria-pressed":n.includes(0),title:"Include unrated",children:"None"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Exclude"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[dm.map(y=>{const b=r.includes(y);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${b?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>m("exclude",y),"aria-pressed":b,title:`Exclude ${y} star${y>1?"s":""}`,children:[y,""]},`stars-out-${y}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${r.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>m("exclude",0),"aria-pressed":r.includes(0),title:"Exclude unrated",children:"None"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Filename"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:s,placeholder:"e.g. draft",onChange:y=>t(yv(e,y.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:i,placeholder:"e.g. v1",onChange:y=>t(xv(e,y.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Comments"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:o,placeholder:"e.g. hero",onChange:y=>t(wv(e,y.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:l,placeholder:"e.g. todo",onChange:y=>t(Sv(e,y.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"URL"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:u,placeholder:"e.g. s3://bucket",onChange:y=>t(kv(e,y.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:c,placeholder:"e.g. http://",onChange:y=>t(Cv(e,y.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Date Added"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"From"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:h,onChange:y=>t(Sc(e,{from:y.target.value||null,to:f.to??null}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"To"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:g,onChange:y=>t(Sc(e,{from:f.from??null,to:y.target.value||null}))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Dimensions"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Width"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:N,onChange:y=>{const b=y.target.value;R(b),S&&t(el(e,{op:b,value:S.value}))},children:fm.map(y=>a.jsx("option",{value:y,children:y},`w-${y}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:S?String(S.value):"",min:0,placeholder:"px",onChange:y=>{const b=y.target.value;if(!b){t(el(e,null));return}const L=Number(b);Number.isFinite(L)&&t(el(e,{op:N,value:L}))}})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Height"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:v,onChange:y=>{const b=y.target.value;p(b),w&&t(tl(e,{op:b,value:w.value}))},children:fm.map(y=>a.jsx("option",{value:y,children:y},`h-${y}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:w?String(w.value):"",min:0,placeholder:"px",onChange:y=>{const b=y.target.value;if(!b){t(tl(e,null));return}const L=Number(b);Number.isFinite(L)&&t(tl(e,{op:v,value:L}))}})]})]})]})]})]})]})}function Sk({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}){const[u,c]=d.useState(!1),f=s&&n.includes(s)?s:n[0];return a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("label",{className:"ui-label",children:"Metric"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-[11px]",onClick:()=>c(h=>!h),"aria-pressed":u,children:u?"Show one":"Show all"})]}),u?a.jsx("div",{className:"ui-input ui-input-readonly w-full flex items-center text-xs",children:"All metrics"}):a.jsx("select",{className:"ui-select w-full",value:f,onChange:h=>i(h.target.value),children:n.map(h=>a.jsx("option",{value:h,children:h},h))})]}),u?a.jsx("div",{className:"space-y-3",children:n.map(h=>a.jsx(hm,{metricKey:h,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l,showTitle:!0},h))}):f?a.jsx(hm,{metricKey:f,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l}):a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]})}function hm({items:e,filteredItems:t,metricKey:n,selectedItems:r,filters:s,onChangeRange:i,showTitle:o=!1}){const l=d.useMemo(()=>mm(e,n),[e,n]),u=d.useMemo(()=>eu(l,Ir),[l]),c=d.useMemo(()=>mm(t,n),[t,n]),f=d.useMemo(()=>u?eu(c,Ir,u):null,[c,u]),h=GS(s,n),[g,S]=d.useState(null),[w,N]=d.useState(!1),R=d.useRef(null),v=d.useRef(null),p=d.useRef(!1),m=d.useRef(null),[y,b]=d.useState(null),[L,M]=d.useState(""),[E,T]=d.useState(""),[C,F]=d.useState(null),Q=g??h,z=u?{min:u.min,max:u.max}:null,$=d.useMemo(()=>{var Y;if(!(r!=null&&r.length))return[];const H=[];for(const ne of r){const he=(Y=ne.metrics)==null?void 0:Y[n];he==null||Number.isNaN(he)||H.push(he)}return H},[r,n]),oe=$.length===1?$[0]:null,B=d.useMemo(()=>!u||$.length<2?null:eu($,Ir,u),[$,u]);d.useEffect(()=>{if(!h||!z){C!=="min"&&M(h?Kn(h.min):""),C!=="max"&&T(h?Kn(h.max):"");return}if(C!=="min"){const H=ls(h.min,z.min)?"":Kn(h.min);M(H)}if(C!=="max"){const H=ls(h.max,z.max)?"":Kn(h.max);T(H)}},[h,z,C]),d.useEffect(()=>{b(null)},[n,z==null?void 0:z.min,z==null?void 0:z.max]);const ue=H=>{var he;if(!z)return null;const Y=(he=m.current)==null?void 0:he.getBoundingClientRect();if(!Y)return null;const ne=Td((H.clientX-Y.left)/Y.width);return z.min+(z.max-z.min)*ne},O=(H,Y)=>{if(!z)return;const ne=R.current??H,he=gm(ne,H);S(he),Y&&i(n,he)},V=H=>{var ne;if(!z)return;H.preventDefault();const Y=ue(H);Y!=null&&(N(!0),S(null),R.current=Y,v.current=H.clientX,p.current=!1,b(Y),(ne=m.current)==null||ne.setPointerCapture(H.pointerId))},q=H=>{const Y=ue(H);if(Y==null){w||b(null);return}if(b(Y),w){const ne=v.current;if(!p.current&&ne!=null){if(Math.abs(H.clientX-ne)<4)return;p.current=!0}p.current&&O(Y,!1)}},fe=H=>{var ne;if(!w)return;N(!1),(ne=m.current)==null||ne.releasePointerCapture(H.pointerId);const Y=ue(H);p.current&&Y!=null?(b(Y),O(Y,!0)):h&&i(n,null),R.current=null,v.current=null,p.current=!1,setTimeout(()=>S(null),0)},de=(H,Y)=>{if(!z)return;const ne=vm(H),he=vm(Y);if(!ne.valid||!he.valid){ne.valid||M(h?Kn(h.min):""),he.valid||T(h?Kn(h.max):"");return}if(ne.value==null&&he.value==null){i(n,null);return}const He=ne.value??z.min,Ke=he.value??z.max,Ne=ym(He,z.min,z.max),ft=ym(Ke,z.min,z.max),De=gm(Ne,ft);if(ls(De.min,z.min)&&ls(De.max,z.max)){i(n,null);return}i(n,De)};if(!u||!z)return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]});const be=$.length;return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mb-2 tabular-nums",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{children:["Population: ",u.count]}),a.jsxs("span",{children:["Filtered: ",(f==null?void 0:f.count)??0]}),be>1&&a.jsxs("span",{className:"text-text",children:["Selected: ",be]})]}),oe!=null&&a.jsxs("span",{className:"text-text",children:["Selected: ",_t(oe)]})]}),a.jsxs("svg",{ref:m,viewBox:`0 0 ${Ir} 100`,preserveAspectRatio:"none",className:"w-full h-28 cursor-crosshair rounded-md bg-surface-inset",onPointerDown:V,onPointerMove:q,onPointerUp:fe,onPointerLeave:()=>b(null),children:[tu(u.bins,"#2e3a4b"),f&&tu(f.bins,"#3a8fff"),B&&tu(B.bins,"#f59e0b",{opacity:.55}),Q&&kk(Q,z),oe!=null&&pm(oe,z,{color:"var(--highlight)",strokeWidth:.7}),y!=null&&pm(y,z,{color:"rgba(255,255,255,0.75)",strokeWidth:.5,dashed:!0})]}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mt-2 tabular-nums",children:[a.jsx("span",{children:_t(z==null?void 0:z.min)}),a.jsxs("div",{className:"flex flex-col items-center text-center leading-tight",children:[Q?a.jsx("span",{className:"text-text",children:ls(Q.min,z.min)?` ${_t(Q.max)}`:ls(Q.max,z.max)?` ${_t(Q.min)}`:`${_t(Q.min)}  ${_t(Q.max)}`}):y!=null?a.jsxs("span",{className:"text-text",children:["Cursor: ",_t(y)]}):a.jsx("span",{children:"Drag to filter"}),Q&&y!=null&&a.jsxs("span",{className:"text-[11px] text-muted",children:["Cursor: ",_t(y)]})]}),a.jsx("span",{children:_t(z==null?void 0:z.max)})]}),a.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-2 mt-3 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Min"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:L,placeholder:Kn(z.min),onFocus:()=>F("min"),onBlur:()=>{F(null),de(L,E)},onChange:H=>M(H.target.value),onKeyDown:H=>{H.key==="Enter"&&H.currentTarget.blur()}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Max"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:E,placeholder:Kn(z.max),onFocus:()=>F("max"),onBlur:()=>{F(null),de(L,E)},onChange:H=>T(H.target.value),onKeyDown:H=>{H.key==="Enter"&&H.currentTarget.blur()}})]}),a.jsx("button",{className:"btn btn-xs btn-ghost text-muted hover:text-text",onClick:()=>i(n,null),children:"Clear"})]})]})}function eu(e,t,n){if(!e.length)return null;const r=n?n.min:Math.min(...e);let s=n?n.max:Math.max(...e);r===s&&(s=r+1);const i=new Array(t).fill(0),o=t/(s-r);for(const l of e){const u=Math.max(0,Math.min(t-1,Math.floor((l-r)*o)));i[u]+=1}return{bins:i,min:r,max:s,count:e.length}}function mm(e,t){var r;const n=[];for(const s of e){const i=(r=s.metrics)==null?void 0:r[t];i==null||Number.isNaN(i)||n.push(i)}return n}function tu(e,t,n){const r=Math.max(1,...e),s=(n==null?void 0:n.opacity)??.9;return e.map((i,o)=>{const l=i/r*100;return a.jsx("rect",{x:o+.05,y:100-l,width:.9,height:l,fill:t,opacity:s},`${t}-${o}`)})}function kk(e,t){const n=(e.min-t.min)/(t.max-t.min),r=(e.max-t.min)/(t.max-t.min),s=Ir*Td(Math.min(n,r)),i=Ir*Math.abs(r-n);return a.jsx("rect",{x:s,y:0,width:Math.max(.5,i),height:100,fill:"rgba(255,255,255,0.08)",stroke:"rgba(255,255,255,0.4)",strokeWidth:.4})}function pm(e,t,n){const r=Td((e-t.min)/(t.max-t.min)),s=Ir*r;return a.jsx("line",{x1:s,y1:0,x2:s,y2:100,stroke:n.color,strokeWidth:n.strokeWidth??.5,strokeDasharray:n.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function gm(e,t){return e<t?{min:e,max:t}:{min:t,max:e}}function Td(e){return e<0?0:e>1?1:e}function _t(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Kn(e){if(!Number.isFinite(e))return"";const t=e.toString();return t.includes("e")?e.toFixed(6):t}function vm(e){const t=e.trim();if(!t)return{value:null,valid:!0};const n=Number(t);return Number.isFinite(n)?{value:n,valid:!0}:{value:null,valid:!1}}function ym(e,t,n){return e<t?t:e>n?n:e}function ls(e,t){const n=Math.max(1,Math.abs(e),Math.abs(t));return Math.abs(e-t)<=1e-6*n}function xm(e){return e?e.length>=10?e.slice(0,10):e:""}const Ck=[{label:"Root",path:"/"}];function bk({leftTool:e,onToolChange:t,compareEnabled:n,compareActive:r,onOpenCompare:s,views:i,activeViewId:o,onActivateView:l,onSaveView:u,current:c,data:f,onOpenFolder:h,onContextMenu:g,items:S,filteredItems:w,metricKeys:N,selectedItems:R,selectedMetric:v,onSelectMetric:p,filters:m,onChangeRange:y,onChangeFilters:b,onResize:L}){const M=e==="folders"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",E=e==="metrics"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",T=r?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover";return a.jsxs("div",{className:"app-left-panel col-start-1 row-start-2 relative border-r border-border bg-panel overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-y-0 left-0 w-10 border-r border-border flex flex-col items-center gap-2 py-3 bg-surface-overlay",children:[a.jsx("button",{className:M,title:"Folders","aria-label":"Folders","aria-pressed":e==="folders",onClick:()=>t("folders"),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M3 7.5h6l2-2h10a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2z"})})}),a.jsx("button",{className:E,title:"Metrics / Filters","aria-label":"Metrics and Filters","aria-pressed":e==="metrics",onClick:()=>t("metrics"),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]})}),a.jsx("div",{className:"w-6 h-px bg-border/70 my-1"}),a.jsx("button",{className:`${T} ${n?"":"opacity-40 cursor-not-allowed"}`,title:n?"Compare selected images":"Compare (select 2+)","aria-label":"Compare selected images","aria-pressed":r,"aria-disabled":!n,disabled:!n,onClick:()=>{n&&s()},children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("rect",{x:"3",y:"4",width:"8",height:"16",rx:"1"}),a.jsx("rect",{x:"13",y:"4",width:"8",height:"16",rx:"1"})]})})]}),a.jsx("div",{className:"ml-10 h-full",children:e==="folders"?a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"px-2 py-2 border-b border-border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Smart Folders"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:u,title:"Save current view as Smart Folder",children:"+ New"})]}),i.length?a.jsx("div",{className:"flex flex-col gap-1",children:i.map(C=>{const F=C.id===o;return a.jsx("button",{className:`text-left px-2 py-1.5 rounded-md text-sm ${F?"bg-accent-muted text-accent":"hover:bg-hover text-text"}`,onClick:()=>l(C),children:C.name},C.id)})}):a.jsx("div",{className:"text-xs text-muted px-1 py-1.5",children:"No saved Smart Folders yet."})]}),a.jsx(gk,{current:c,roots:Ck,data:f,onOpen:h,onContextMenu:g,className:"flex-1 min-h-0 overflow-auto scrollbar-thin",showResizeHandle:!1})]}):a.jsx(yk,{items:S,filteredItems:w,metricKeys:N,selectedItems:R,selectedMetric:v,onSelectMetric:p,filters:m,onChangeRange:y,onChangeFilters:b})}),a.jsx("div",{className:"toolbar-offset absolute bottom-0 right-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20",onMouseDown:L})]})}function Ek({persistenceEnabled:e,recentSummary:t,onDismissRecent:n,onCloseRecent:r,browserZoomPercent:s}){const i=t?` (${t.names.join(", ")}${t.extra?` +${t.extra}`:""})`:"",o=!!(t!=null&&t.names.length),l=typeof s=="number"?s:null,u=l!==null&&Math.abs(l-100)>=2;return!e||u||!!t?a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-col gap-2",children:[!e&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("span",{className:"font-semibold",children:"Not persisted."})," Workspace is read-only; edits stay in memory until restart."]}),u&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs",children:[a.jsxs("span",{className:"font-semibold",children:["Browser zoom ",Math.round(l),"%."]})," For best results, set it to 100% so UI elements stay in correct proportions."]}),t&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex items-center justify-between gap-3",children:[a.jsxs("span",{children:["Recent updates: ",t.count," item",t.count===1?"":"s",o?i:""]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"text-muted hover:text-text transition-colors",onClick:n,"aria-label":"Hide recent activity until refresh",children:"Hide until refresh"}),a.jsx("button",{className:"text-muted hover:text-text transition-colors text-base leading-none",onClick:r,"aria-label":"Close recent activity",children:""})]})]})]})}):a.jsx(a.Fragment,{})}const wm=6e3,Nk=15*6e4,jk=1e4,Mk=24*60*6e4,Be={sortKey:"sortKey",sortDir:"sortDir",sortSpec:"sortSpec",starFilters:"starFilters",filterAst:"filterAst",selectedMetric:"selectedMetric",viewMode:"viewMode",gridItemSize:"gridItemSize",leftOpen:"leftOpen",rightOpen:"rightOpen"};function Rk(e){switch(e){case"live":return"Live";case"reconnecting":return"Reconnecting";case"offline":return"Offline";case"connecting":case"idle":default:return"Connecting"}}function Lk(e){return e.isOffline?"offline":e.isUnstable?"unstable":e.recentEditActive?"recent":e.editingActive?"editing":"live"}function Nv(e,t){return t-e<Mk?pS(e,t):gS(e)}function Tk(e,t){if(!e.length)return null;const n=new Set,r=[];for(const i of e)n.has(i.path)||(n.add(i.path),r.push(i.path));const s=r.slice(0,2).map(i=>{const o=t.find(l=>l.path===i);return(o==null?void 0:o.name)??i.split("/").pop()??i});return{count:r.length,names:s,extra:Math.max(0,r.length-s.length)}}function _k(e,t,n){return e.length?e.map(r=>{const s=t.find(l=>l.path===r.path),i=(s==null?void 0:s.name)??r.path.split("/").pop()??r.path,o=Nv(r.ts,n);return{path:r.path,label:i,timeLabel:o}}):[]}function Pk(e,t){return e?t instanceof Sn||t instanceof Error?t.message:"Failed to load embeddings.":null}function Ik(e,t,n,r){return e||t?n:r}function Fk(e,t,n,r,s,i){return e?n:t||i==="/"?r:s}function Ok(){var Zd,ef,tf;const[e,t]=d.useState("/"),[n,r]=d.useState(""),[s,i]=d.useState([]),[o,l]=d.useState(!1),[u,c]=d.useState(null),[f,h]=d.useState(null),[g,S]=d.useState(!1),[w,N]=d.useState(0),[R,v]=d.useState(0),[p,m]=d.useState(null),[y,b]=d.useState(100),[L,M]=d.useState(null),[E,T]=d.useState(()=>({filters:{and:[]},sort:{kind:"builtin",key:"added",dir:"desc"},selectedMetric:void 0})),[C,F]=d.useState(()=>Date.now()),[Q,z]=d.useState("adaptive"),[$,oe]=d.useState(220),[B,ue]=d.useState(!0),[O,V]=d.useState(!0),[q,fe]=d.useState("folders"),[de,be]=d.useState([]),[H,Y]=d.useState(null),[ne,he]=d.useState(null),[He,Ke]=d.useState(null),[Ne,ft]=d.useState({}),De=d.useRef(null),cn=d.useRef(null),_e=d.useRef(null),Yt=d.useRef(null),ht=d.useRef(!1),U=d.useRef(!1),re=d.useRef(null),ae=d.useRef(new Map),ve=d.useRef(new Map),ce=d.useRef(null),{leftW:ge,rightW:ee,onResizeLeft:W,onResizeRight:_}=ok(De,q),[G,ie]=d.useState(!1),[we,qe]=d.useState(null),mt=ts(),Le=rS(),Wn=Jl(),dn=iS(),[ze,Cn]=d.useState("idle"),[ns,_d]=d.useState({}),[Zs,jv]=d.useState([]),[Pd,Mv]=d.useState([]),[Id,Rv]=d.useState(null),[Lv,Tv]=d.useState(!1),[_v,Fd]=d.useState(new Set),ta=d.useRef(new Map),[Hn,Pv]=d.useState(null),[Od,Iv]=d.useState(null),[Fv,na]=d.useState(!1),[ei,ra]=d.useState(()=>Date.now()),[Ov,Dv]=d.useState(!0);d.useEffect(()=>{const x=P=>{const I=on(P),D=_S(I)?I:null,X=D?Yh(I):I;D?(h(D),i([D])):(h(null),ht.current=!1),t(le=>le===X?le:(v(J=>J+1),X))};x(Kh());const j=()=>x(Kh());return window.addEventListener("hashchange",j),()=>window.removeEventListener("hashchange",j)},[]),d.useEffect(()=>()=>{for(const x of ta.current.values())window.clearTimeout(x);ta.current.clear()},[]),d.useEffect(()=>{if(Od==null){na(!1);return}na(!0);const x=window.setTimeout(()=>na(!1),wm);return()=>window.clearTimeout(x)},[Od]),d.useEffect(()=>{if(Hn==null)return;ra(Date.now());const x=window.setInterval(()=>ra(Date.now()),1e4);return()=>window.clearInterval(x)},[Hn]);const{data:Ue,refetch:sa,isLoading:Kk,isError:qk}=mv(e,!0),Gt=u!==null,br=!Gt&&n.trim().length>0,Dd=ak(n,250),zd=d.useMemo(()=>Dd.trim().replace(/\s+/g," "),[Dd]),oo=jS(br?zd:"",e),rs=RS(),Ad=((Zd=rs.data)==null?void 0:Zd.embeddings)??[],zv=((ef=rs.data)==null?void 0:ef.rejected)??[],Av=Ad.length>0,$v=Pk(rs.isError,rs.error),ia=d.useMemo(()=>Gh(E.filters),[E.filters]),At=d.useMemo(()=>{var j;return(br?((j=oo.data)==null?void 0:j.items)??[]:(Ue==null?void 0:Ue.items)??[]).map(P=>({...P,star:Ne[P.path]!==void 0?Ne[P.path]:P.star}))},[br,oo.data,Ue,Ne]),$d=d.useMemo(()=>{var P;const x=new Map;for(const I of At)x.set(I.path,I);const j=((P=oo.data)==null?void 0:P.items)??[];for(const I of j){if(x.has(I.path))continue;const D=Ne[I.path]!==void 0?Ne[I.path]:I.star;x.set(I.path,{...I,star:D})}return x},[At,oo.data,Ne]),fn=d.useMemo(()=>u?u.items.map(x=>{const j=$d.get(x.path);return j||Wk(x.path,Ne[x.path])}):[],[u,$d,Ne]),Ve=d.useMemo(()=>{if(u)return tm(fn,E.filters);const x=tm(At,E.filters);return sk(x,E.sort,C)},[u,fn,At,E.filters,E.sort,C]),ti=u?fn.length:At.length,oa=Ve.length,Lt=d.useMemo(()=>Ve.map(x=>x.path),[Ve]),Ud=d.useMemo(()=>new Set(s),[s]),Uv=d.useMemo(()=>{if(!s.length)return[];const x=u?fn:At,j=new Map(x.map(I=>[I.path,I])),P=new Map(Ve.map(I=>[I.path,I]));return s.map(I=>j.get(I)??P.get(I)).filter(I=>!!I)},[s,u,fn,At,Ve]),Tt=d.useMemo(()=>Ve.filter(x=>Ud.has(x.path)),[Ve,Ud]),lo=Math.max(0,Tt.length-2),Er=Math.min(w,lo),Bv=Tt[Er]??null,Wv=Tt[Er+1]??null,Hv=Er>0,Vv=Er<Tt.length-2,ni=Tt.length>=2,Qv=u?fn:At,ri=u?null:E.sort.kind==="metric"?E.sort.key:null,Bd=d.useMemo(()=>ri?Ve.some(x=>{var P;const j=(P=x.metrics)==null?void 0:P[ri];return j!=null&&!Number.isNaN(j)}):!1,[Ve,ri]);d.useEffect(()=>{N(x=>x>lo?lo:x)},[lo]);const Wd=d.useCallback(x=>{Fd(D=>{if(D.has(x))return D;const X=new Set(D);return X.add(x),X});const j=ta.current,P=j.get(x);P&&window.clearTimeout(P);const I=window.setTimeout(()=>{Fd(D=>{if(!D.has(x))return D;const X=new Set(D);return X.delete(x),X}),j.delete(x)},wm);j.set(x,I)},[]),la=d.useCallback(x=>{const j=Date.now(),I=Wh(x)??j,D=I>j?j:I;Pv(X=>X==null?D:X>D?X:D),Iv(j),ra(j)},[]),aa=d.useCallback((x,j,P)=>{const I=Date.now(),D=Wh(P)??I;Mv(X=>{const le=X.filter(te=>te.path!==x);return[{path:x,ts:D,kind:j},...le].slice(0,10)})},[]),ua=d.useCallback((x,j)=>{const P=Date.now();jv(I=>{const D=I.filter(le=>le.path!==x);return[{path:x,ts:P,kind:j},...D].slice(0,6)}),Wd(x)},[Wd]),ca=d.useCallback(x=>{const j=Object.prototype.hasOwnProperty.call(x,"star"),P=x.metrics!==void 0,I=x.comments!==void 0;if(!j&&!P&&!I)return;const D=le=>{if(le.path!==x.path)return le;let J=le;return j&&le.star!==x.star&&(J={...J,star:x.star??null}),P&&(J={...J,metrics:x.metrics??null}),I&&le.comments!==x.comments&&(J={...J,comments:x.comments??""}),J},X=le=>{if(!le)return le;let J=!1;const te=le.items.map(ye=>{const ot=D(ye);return ot!==ye&&(J=!0),ot});return J?{...le,items:te}:le};mt.setQueriesData({predicate:({queryKey:le})=>Array.isArray(le)&&le[0]==="folder"},X),mt.setQueriesData({predicate:({queryKey:le})=>Array.isArray(le)&&le[0]==="search"},X)},[mt]),da=d.useCallback(async x=>{const j=on(x||"/"),P=ae.current,I=ve.current,D=P.get(j);if(D!==void 0)return D;const X=I.get(j);if(X)return X;const le=(async()=>{const te=(await me.getFolder(j,void 0,!0)).items.length;return P.set(j,te),I.delete(j),te})().catch(J=>{throw I.delete(j),J});return I.set(j,le),le},[]);d.useEffect(()=>{let x=!1;const j=on(e||"/");return(async()=>{const I=da("/"),D=j==="/"?I:da(j),[X,le]=await Promise.all([I,D]);x||(Ke(X),he(le))})().catch(I=>console.warn("Failed to compute folder counts:",I)),()=>{x=!0}},[e,da]),d.useEffect(()=>{e1();const x=n1(P=>{if(P.type==="presence"){const X=P.data;if(!(X!=null&&X.gallery_id))return;_d(le=>({...le,[X.gallery_id]:X}));return}const I=P.data;if(!(I!=null&&I.path))return;const D=I.path;if(P.type==="item-updated"){const X=P.data,le={v:1,tags:X.tags??[],notes:X.notes??"",star:X.star??null,version:X.version??1,updated_at:X.updated_at??"",updated_by:X.updated_by??"server"};mt.setQueryData(qi(D),le),ca({path:D,star:X.star??null,metrics:X.metrics,comments:X.notes??""}),aS(D,le),ua(D,"item-updated"),aa(D,"item-updated",X.updated_at),la(X.updated_at),ft(J=>{if(J[D]===void 0)return J;const te={...J};return delete te[D],te})}else if(P.type==="metrics-updated"){const X=P.data;ca({path:D,metrics:X.metrics}),ua(D,"metrics-updated"),aa(D,"metrics-updated",X.updated_at),la(X.updated_at)}}),j=r1(Cn);return()=>{x(),j(),t1()}},[ua,aa,mt,ca,la]),d.useEffect(()=>{let x=!1;const j=on(e||"/"),P=async()=>{try{const D=await me.postPresence(j);!x&&(D!=null&&D.gallery_id)&&_d(X=>({...X,[D.gallery_id]:D}))}catch{}};P();const I=window.setInterval(P,3e4);return()=>{x=!0,window.clearInterval(I)}},[e]),d.useEffect(()=>{let x=!1;return me.getHealth().then(j=>{var I;if(x)return;const P=((I=j==null?void 0:j.labels)==null?void 0:I.enabled)??!0;Dv(P)}).catch(()=>{}),()=>{x=!0}},[]);const Kv=d.useMemo(()=>{const x=u?fn:At,j={0:0,1:0,2:0,3:0,4:0,5:0};for(const P of x){const I=Ne[P.path]??P.star??0;j[String(I)]=(j[String(I)]||0)+1}return j},[u,fn,At,Ne]),Vn=d.useMemo(()=>{const x=new Set;let j=0;const P=u?fn:At;for(const I of P){const D=I.metrics;if(D)for(const X of Object.keys(D))x.add(X);if(j+=1,j>=250&&x.size>0)break}return Array.from(x).sort()},[u,fn,At]);d.useEffect(()=>{Gt||Vn.length&&T(x=>{const j=x.selectedMetric&&Vn.includes(x.selectedMetric)?x.selectedMetric:Vn[0];return j===x.selectedMetric?x:{...x,selectedMetric:j}})},[Vn,Gt]),d.useEffect(()=>{Gt||E.sort.kind==="metric"&&(Vn.includes(E.sort.key)||T(x=>({...x,sort:{kind:"builtin",key:"added",dir:x.sort.dir}})))},[Vn,E.sort,Gt]);const ao=d.useMemo(()=>JS(E.filters),[E.filters]),fa=ne??ti,qv=He??fa,Hd=Gt||br||ao>0,uo=ns[e],Yv=Le.state==="syncing"?"Syncing":Le.state==="error"?Le.message?`Not saved  ${Le.message}`:"Not saved  retry":"All changes saved",Gv=Rk(ze),ha=Hn!=null,Xv=d.useMemo(()=>!ha||Hn==null?"No edits yet.":Nv(Hn,ei),[ha,Hn,ei]),Vd=Hn==null?null:Math.max(0,ei-Hn),Jv=((uo==null?void 0:uo.editing)??0)>0||Vd!=null&&Vd<Nk,Zv=dn!=null&&dn>jk,ey=ze==="offline"||ze==="connecting"||ze==="idle",ty=ze==="reconnecting"||Wn||Le.state==="error"||Zv,ny=Lk({isOffline:ey,isUnstable:ty,recentEditActive:Fv,editingActive:Jv}),ry=d.useMemo(()=>Tk(Zs,Ve),[Zs,Ve]),ma=d.useMemo(()=>Zs.length?Zs.reduce((x,j)=>Math.max(x,j.ts),0):null,[Zs]),sy=Lv||Id!=null&&ma!=null&&ma<=Id?null:ry,iy=d.useMemo(()=>_k(Pd,Ve,ei),[Ve,ei,Pd]),oy=Ik(Gt,Hd,oa,fa),ly=Fk(Gt,Hd,ti,fa,qv,e),Qd=d.useMemo(()=>{if(!u)return null;if(u.queryPath){const x=u.queryPath.split("/").filter(Boolean);return x.length?x[x.length-1]:u.queryPath}return u.queryVector?"Vector query":null},[u]),Kd=d.useMemo(()=>u?ao>0?`${oa} of ${ti}`:`${ti}`:null,[u,ao,oa,ti]),pt=d.useCallback(x=>{T(j=>({...j,filters:x(j.filters)}))},[]),ay=d.useCallback(x=>{T(j=>({...j,filters:x}))},[]),co=d.useCallback(()=>{pt(x=>Za(x,[]))},[pt]),qd=d.useCallback(()=>{T(x=>({...x,filters:{and:[]}}))},[]),uy=d.useCallback(()=>{c(null);const x=ce.current;ce.current=null,x&&x.length?(i(x),v(j=>j+1)):i([])},[]),cy=d.useCallback(async x=>{!u&&ce.current===null&&(ce.current=s);const j=await me.searchEmbeddings(x);if(c({embedding:j.embedding,queryPath:x.query_path??null,queryVector:x.query_vector_b64??null,topK:x.top_k??50,minScore:x.min_score??null,items:j.items,createdAt:Date.now()}),j.items.length){const P=x.query_path&&j.items.some(I=>I.path===x.query_path)?x.query_path:j.items[0].path;i([P]),v(I=>I+1)}else i([])},[u,s]),pa=d.useCallback((x,j)=>{pt(P=>XS(P,x,j))},[pt]),Yd=d.useMemo(()=>{var j,P,I,D,X,le;const x=[];for(const J of E.filters.and)if("stars"in J){const te=J.stars||[];if(!te.length)continue;x.push({id:"stars",label:`Rating in: ${nu(te)}`,onRemove:()=>co()})}else if("starsIn"in J){const te=J.starsIn.values||[];if(!te.length)continue;x.push({id:"stars-in",label:`Rating in: ${nu(te)}`,onRemove:()=>co()})}else if("starsNotIn"in J){const te=J.starsNotIn.values||[];if(!te.length)continue;x.push({id:"stars-not-in",label:`Rating not in: ${nu(te)}`,onRemove:()=>pt(ye=>vv(ye,[]))})}else if("nameContains"in J){const te=(j=J.nameContains.value)==null?void 0:j.trim();if(!te)continue;x.push({id:"name-contains",label:`Filename contains: ${te}`,onRemove:()=>pt(ye=>yv(ye,""))})}else if("nameNotContains"in J){const te=(P=J.nameNotContains.value)==null?void 0:P.trim();if(!te)continue;x.push({id:"name-not-contains",label:`Filename not: ${te}`,onRemove:()=>pt(ye=>xv(ye,""))})}else if("commentsContains"in J){const te=(I=J.commentsContains.value)==null?void 0:I.trim();if(!te)continue;x.push({id:"comments-contains",label:`Comments contain: ${te}`,onRemove:()=>pt(ye=>wv(ye,""))})}else if("commentsNotContains"in J){const te=(D=J.commentsNotContains.value)==null?void 0:D.trim();if(!te)continue;x.push({id:"comments-not-contains",label:`Comments not: ${te}`,onRemove:()=>pt(ye=>Sv(ye,""))})}else if("urlContains"in J){const te=(X=J.urlContains.value)==null?void 0:X.trim();if(!te)continue;x.push({id:"url-contains",label:`URL contains: ${te}`,onRemove:()=>pt(ye=>kv(ye,""))})}else if("urlNotContains"in J){const te=(le=J.urlNotContains.value)==null?void 0:le.trim();if(!te)continue;x.push({id:"url-not-contains",label:`URL not: ${te}`,onRemove:()=>pt(ye=>Cv(ye,""))})}else if("dateRange"in J){const{from:te,to:ye}=J.dateRange;if(!te&&!ye)continue;x.push({id:"date-range",label:`Date: ${Ak(te,ye)}`,onRemove:()=>pt(ot=>Sc(ot,null))})}else if("widthCompare"in J){const{op:te,value:ye}=J.widthCompare;x.push({id:"width-compare",label:`Width ${te} ${ye}`,onRemove:()=>pt(ot=>el(ot,null))})}else if("heightCompare"in J){const{op:te,value:ye}=J.heightCompare;x.push({id:"height-compare",label:`Height ${te} ${ye}`,onRemove:()=>pt(ot=>tl(ot,null))})}else if("metricRange"in J){const{key:te,min:ye,max:ot}=J.metricRange;x.push({id:`metric:${te}`,label:`${te}: ${Uk(ye,ot)}`,onRemove:()=>pa(te,null)})}return x},[E.filters,co,pa,pt]),dy=d.useCallback(x=>{const j=new Set(ia);j.has(x)?j.delete(x):j.add(x),T(P=>({...P,filters:Za(P.filters,Array.from(j))}))},[ia]),fy=d.useCallback(()=>{ue(!0),fe("metrics")},[]),hy=d.useCallback(x=>{T(j=>({...j,sort:x})),x.kind==="builtin"&&x.key==="random"&&F(Date.now())},[]),Gd=d.useCallback(x=>{if(x==="/"||x==="")return"Lenslet | Root";const j=x.split("/").filter(Boolean);if(!j.length)return"Lenslet";const P=j.slice(-2).join("/");return`Lenslet | ${j.length>2?`.../${P}`:`/${P}`}`},[]),my=d.useMemo(()=>$k(e),[e]);d.useEffect(()=>{document.title=Gd(e)},[e,Gd]),d.useEffect(()=>{let x=!0;return me.getViews().then(j=>{x&&be(j.views||[])}).catch(()=>{x&&be([])}),()=>{x=!1}},[]),d.useEffect(()=>{br&&(i([]),f&&(h(null),ht.current=!1,Oo(e)))},[br,f,e]),d.useEffect(()=>{const x=De.current,j=Yt.current;if(!x||!j)return;const P=()=>{const I=Math.max(48,Math.round(j.getBoundingClientRect().height));x.style.setProperty("--toolbar-h",`${I}px`)};if(P(),"ResizeObserver"in window){const I=new ResizeObserver(P);return I.observe(j),()=>I.disconnect()}return window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]),d.useEffect(()=>{try{const x=localStorage.getItem(Be.sortKey),j=localStorage.getItem(Be.sortDir),P=localStorage.getItem(Be.sortSpec),I=localStorage.getItem(Be.starFilters),D=localStorage.getItem(Be.filterAst),X=localStorage.getItem(Be.selectedMetric),le=localStorage.getItem(Be.viewMode),J=localStorage.getItem(Be.gridItemSize),te=localStorage.getItem(Be.leftOpen),ye=localStorage.getItem(Be.rightOpen),nf=(lt=>{if(!lt)return null;const Ye=Ga(lt);return!Ye||typeof Ye!="object"?null:Ye.kind==="builtin"&&(Ye.key==="name"||Ye.key==="added"||Ye.key==="random")&&(Ye.dir==="asc"||Ye.dir==="desc")||Ye.kind==="metric"&&typeof Ye.key=="string"&&Ye.key.length>0&&(Ye.dir==="asc"||Ye.dir==="desc")?Ye:null})(P)??{kind:"builtin",key:x==="name"||x==="added"||x==="random"?x:"added",dir:j==="asc"||j==="desc"?j:"desc"};nf.key==="random"&&F(Date.now());let xa=(lt=>{if(!lt)return null;const Ye=Ga(lt);return wc(Ye)})(D)??{and:[]};if(I){const lt=Ga(I);if(Array.isArray(lt)){const Ye=lt.filter(Cy=>[0,1,2,3,4,5].includes(Cy));xa=Za(xa,Ye)}}if(T(lt=>({...lt,sort:nf,filters:xa,selectedMetric:X||lt.selectedMetric})),(le==="grid"||le==="adaptive")&&z(le),J){const lt=Number(J);!isNaN(lt)&&lt>=80&&lt<=500&&oe(lt)}(te==="0"||te==="false")&&ue(!1),(ye==="0"||ye==="false")&&V(!1)}catch{}},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia("(max-width: 900px)"),j=()=>{x.matches&&(ue(!1),V(!1))};return j(),"addEventListener"in x?(x.addEventListener("change",j),()=>x.removeEventListener("change",j)):(x.addListener(j),()=>x.removeListener(j))},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=[1,1.25,1.5,1.75,2,3,4],j=D=>x.reduce((X,le)=>Math.abs(le-D)<Math.abs(X-D)?le:X,x[0]),P=()=>{var ot;const D=window.devicePixelRatio||1,X=j(D),le=((ot=window.visualViewport)==null?void 0:ot.scale)??1,J=D*le/X;if(!Number.isFinite(J)){M(null);return}const te=Math.round(J*100),ye=Math.min(500,Math.max(25,te));M(ye)};P(),window.addEventListener("resize",P),window.addEventListener("orientationchange",P);const I=window.visualViewport;return I&&I.addEventListener("resize",P),()=>{window.removeEventListener("resize",P),window.removeEventListener("orientationchange",P),I&&I.removeEventListener("resize",P)}},[]),d.useEffect(()=>{try{localStorage.setItem(Be.sortKey,E.sort.kind==="builtin"?E.sort.key:"added"),localStorage.setItem(Be.sortDir,E.sort.dir),localStorage.setItem(Be.sortSpec,JSON.stringify(E.sort));const x=Gh(E.filters);localStorage.setItem(Be.starFilters,JSON.stringify(x)),localStorage.setItem(Be.filterAst,JSON.stringify(E.filters)),E.selectedMetric?localStorage.setItem(Be.selectedMetric,E.selectedMetric):localStorage.removeItem(Be.selectedMetric),localStorage.setItem(Be.viewMode,Q),localStorage.setItem(Be.gridItemSize,String($)),localStorage.setItem(Be.leftOpen,B?"1":"0"),localStorage.setItem(Be.rightOpen,O?"1":"0")}catch{}},[E,Q,$,B,O]),d.useEffect(()=>{const x=cn.current;if(!x)return;const j=I=>Math.min(500,Math.max(80,I)),P=I=>{I.ctrlKey&&(f||g||(I.preventDefault(),oe(D=>j(D+(I.deltaY<0?20:-20)))))};return x.addEventListener("wheel",P,{passive:!1}),()=>x.removeEventListener("wheel",P)},[f,g]),d.useEffect(()=>{if(f||g)return;const x=cn.current;if(!x)return;const j=J=>Math.min(500,Math.max(80,J));let P=null;const I=J=>{if(J.length<2)return 0;const[te,ye]=[J[0],J[1]];return Math.hypot(te.clientX-ye.clientX,te.clientY-ye.clientY)},D=J=>{if(J.touches.length!==2)return;const te=I(J.touches);te&&(P={dist:te,size:$})},X=J=>{if(!P||J.touches.length!==2)return;const te=I(J.touches);if(!te)return;J.preventDefault();const ye=j(P.size*(te/P.dist));oe(ye)},le=()=>{P=null};return x.addEventListener("touchstart",D,{passive:!0}),x.addEventListener("touchmove",X,{passive:!1}),x.addEventListener("touchend",le),x.addEventListener("touchcancel",le),()=>{x.removeEventListener("touchstart",D),x.removeEventListener("touchmove",X),x.removeEventListener("touchend",le),x.removeEventListener("touchcancel",le)}},[f,g,$]),d.useEffect(()=>{if(!f)return;const x=Lt.indexOf(f);if(x===-1)return;const j=[Lt[x-2],Lt[x-1],Lt[x+1],Lt[x+2]].filter(P=>!!P);for(const P of j)me.prefetchFile(P),me.prefetchThumb(P)},[f,Lt]),d.useEffect(()=>{var P;if(!g||Tt.length<2)return;const x=Er,j=new Set;for(const I of[-2,-1,0,1,2,3]){const D=x+I;D>=0&&D<Tt.length&&j.add(D)}for(const I of j){const D=(P=Tt[I])==null?void 0:P.path;D&&(me.prefetchFile(D),me.prefetchThumb(D))}},[g,Tt,Er]),d.useEffect(()=>{var j;if(!((j=Ue==null?void 0:Ue.items)!=null&&j.length))return;const x=Ue.items.slice(0,5);for(const P of x)me.prefetchFile(P.path)},[Ue==null?void 0:Ue.path,Ue==null?void 0:Ue.items]);const fo=d.useCallback(x=>{h(null),ht.current=!1;const j=on(x);t(j),qh(j)},[]),py=d.useCallback(async()=>{const x=window.prompt("Save Smart Folder as:","New Smart Folder");if(!x)return;const j=Dk(x,de),P={id:j,name:x,pool:{kind:"folder",path:e},view:JSON.parse(JSON.stringify(E))},I=[...de.filter(D=>D.id!==j),P];be(I),Y(j);try{await me.saveViews({version:1,views:I})}catch(D){if(D instanceof Sn&&D.status===403){const X=new Blob([JSON.stringify({version:1,views:I},null,2)],{type:"application/json"});Cc(X,`lenslet-smart-folder-${j}.json`),alert("No-write mode: exported Smart Folder JSON instead of saving.");return}console.error("Failed to save Smart Folder:",D)}},[e,E,de]);d.useEffect(()=>{if(!H)return;const x=de.find(I=>I.id===H);if(!x){Y(null);return}const j=x.pool.path===e,P=JSON.stringify(x.view)===JSON.stringify(E);(!j||!P)&&Y(null)},[H,de,e,E]);const ho=d.useCallback(x=>{if(!x)return;const j=document.getElementById(`cell-${encodeURIComponent(x)}`);j==null||j.focus()},[]),gy=d.useCallback(x=>{h(x),ht.current=!0,qh(x)},[]),Xd=d.useCallback(()=>{h(null),ht.current?(ht.current=!1,window.history.back()):Oo(e),ho(re.current)},[ho]),vy=d.useCallback(()=>{g||!ni||(s[0]&&(re.current=s[0]),N(0),S(!0),f&&(h(null),ht.current&&(ht.current=!1),Oo(e)),U.current||(window.history.pushState({compare:!0},"",window.location.href),U.current=!0))},[g,ni,s,f,e]),ga=d.useCallback(()=>{S(!1),U.current&&(U.current=!1,window.history.back()),ho(re.current??s[0])},[ho,s]),yy=d.useCallback(x=>{Tt.length<2||N(j=>{const P=Math.max(0,Tt.length-2);return Math.min(P,Math.max(0,j+x))})},[Tt.length]);d.useEffect(()=>{g&&(ni||ga())},[g,ni,ga]),d.useEffect(()=>{const x=()=>{f&&(ht.current=!1,h(null)),g&&(U.current=!1,S(!1))};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[f,g]),d.useEffect(()=>{const x=De.current;if(!x)return;const j=D=>{D.dataTransfer&&Array.from(D.dataTransfer.types).includes("Files")&&(D.preventDefault(),ie(!0))},P=D=>{const X=D.relatedTarget;X&&x.contains(X)||ie(!1)},I=async D=>{var J,te;D.preventDefault(),ie(!1);const X=Array.from(((J=D.dataTransfer)==null?void 0:J.files)??[]);if(!X.length)return;if(!((((te=Ue==null?void 0:Ue.dirs)==null?void 0:te.length)??0)===0)){alert("Uploads are only allowed into folders without subdirectories.");return}for(const ye of X)try{await me.uploadFile(e,ye)}catch(ot){console.error(`Failed to upload ${ye.name}:`,ot)}sa()};return x.addEventListener("dragover",j),x.addEventListener("dragleave",P),x.addEventListener("drop",I),()=>{x.removeEventListener("dragover",j),x.removeEventListener("dragleave",P),x.removeEventListener("drop",I)}},[e,(tf=Ue==null?void 0:Ue.dirs)==null?void 0:tf.length,sa]),d.useEffect(()=>{const x=()=>qe(null),j=P=>{P.key==="Escape"&&qe(null)};return window.addEventListener("click",x),window.addEventListener("keydown",j),()=>{window.removeEventListener("click",x),window.removeEventListener("keydown",j)}},[]),d.useEffect(()=>{const x=j=>{if(!Nd(j.target)){if((j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="b"){j.preventDefault(),j.altKey?V(P=>!P):ue(P=>!P);return}if(!(f||g)){if(j.key==="Backspace"||j.key==="Delete")j.preventDefault(),fo(Yh(e));else if((j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="a")j.preventDefault(),i(Ve.map(P=>P.path));else if(j.key==="Escape")s.length&&(j.preventDefault(),i([]));else if(j.key==="/"){j.preventDefault();const P=document.querySelector(".toolbar-right .input");P==null||P.focus()}}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,Ve,s,f,g,fo]);const xy=B?`${ge}px`:"0px",wy=O?`${ee}px`:"0px",Jd=f??s[0]??null,va=Jd?Lt.indexOf(Jd):-1,Sy=va>0,ky=va>=0&&va<Lt.length-1,ya=d.useCallback(x=>{if(!Lt.length)return;const j=f??s[0];if(!j)return;const P=Lt.indexOf(j);if(P===-1)return;const I=Math.min(Lt.length-1,Math.max(0,P+x)),D=Lt[I];!D||D===j||(f&&(h(D),Oo(D)),i([D]))},[Lt,f,s]);return a.jsxs("div",{className:"app-shell grid h-full grid-cols-[var(--left)_1fr_var(--right)]",ref:De,style:{"--left":xy,"--right":wy},children:[a.jsx(Dw,{rootRef:Yt,onSearch:r,viewerActive:!!f,onBack:Xd,zoomPercent:f?y:void 0,onZoomPercentChange:x=>m(x),currentLabel:my,itemCount:oy,totalCount:ly,sortSpec:E.sort,metricKeys:Vn,onSortChange:hy,sortDisabled:Gt,filterCount:ao,onOpenFilters:fy,starFilters:ia,onToggleStar:dy,onClearStars:co,onClearFilters:qd,starCounts:Kv,viewMode:Q,onViewMode:z,gridItemSize:$,onGridItemSize:oe,leftOpen:B,rightOpen:O,onToggleLeft:()=>ue(x=>!x),onToggleRight:()=>V(x=>!x),onPrevImage:()=>ya(-1),onNextImage:()=>ya(1),canPrevImage:Sy,canNextImage:ky,searchDisabled:Gt,searchPlaceholder:Gt?"Exit similarity to search":void 0,syncIndicator:{state:ny,presence:uo,syncLabel:Yv,connectionLabel:Gv,lastEditedLabel:Xv,hasEdits:ha,recentTouches:iy}}),B&&a.jsx(bk,{leftTool:q,onToolChange:fe,compareEnabled:ni,compareActive:g,onOpenCompare:vy,views:de,activeViewId:H,onActivateView:x=>{var P;Y(x.id);const j=wc((P=x.view)==null?void 0:P.filters)??{and:[]};T({...x.view,filters:j}),fo(x.pool.path)},onSaveView:py,current:e,data:Ue,onOpenFolder:x=>{Y(null),fo(x)},onContextMenu:(x,j)=>{x.preventDefault(),qe({x:x.clientX,y:x.clientY,kind:"tree",payload:{path:j}})},items:Qv,filteredItems:Ve,metricKeys:Vn,selectedItems:Uv,selectedMetric:E.selectedMetric,onSelectMetric:x=>T(j=>({...j,selectedMetric:x})),filters:E.filters,onChangeRange:pa,onChangeFilters:ay,onResize:W}),a.jsxs("div",{className:"grid-shell col-start-2 row-start-2 relative overflow-hidden flex flex-col",ref:cn,children:[a.jsx("div",{"aria-live":"polite",className:"sr-only",children:s.length?`${s.length} selected`:""}),a.jsx(Ek,{persistenceEnabled:Ov,recentSummary:sy,onDismissRecent:()=>Tv(!0),onCloseRecent:()=>Rv(ma??Date.now()),browserZoomPercent:L}),u&&a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"font-semibold",children:"Similarity mode"}),a.jsxs("span",{className:"text-muted",children:["Embedding: ",u.embedding]}),Qd&&a.jsxs("span",{className:"text-muted",children:["Query: ",Qd]}),Kd&&a.jsxs("span",{className:"text-muted",children:["Results: ",Kd]}),a.jsxs("span",{className:"text-muted",children:["Top K: ",u.topK]}),u.minScore!=null&&a.jsxs("span",{className:"text-muted",children:["Min score: ",u.minScore]})]}),a.jsx("button",{className:"btn btn-sm",onClick:uy,children:"Exit similarity"})]})}),Yd.length>0&&a.jsx("div",{className:"sticky top-0 z-10 px-3 py-2 bg-panel border-b border-border",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Filters"}),Yd.map(x=>a.jsxs("span",{className:"filter-chip",children:[a.jsx("span",{className:"truncate max-w-[240px]",title:x.label,children:x.label}),a.jsx("button",{className:"filter-chip-remove","aria-label":`Clear filter ${x.label}`,onClick:x.onRemove,children:""})]},x.id)),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:qd,children:"Clear all"})]})}),!1,a.jsxs("div",{className:"flex-1 min-h-0 relative",children:[a.jsx(T1,{items:Ve,selected:s,restoreToSelectionToken:R,onSelectionChange:i,onOpenViewer:x=>{try{re.current=x}catch{}gy(x),i([x])},highlight:br?zd:"",recentlyUpdated:_v,suppressSelectionHighlight:!!f||g,viewMode:Q,targetCellSize:$,onContextMenuItem:(x,j)=>{x.preventDefault();const P=s.length?s:[j];qe({x:x.clientX,y:x.clientY,kind:"grid",payload:{paths:P}})},scrollRef:_e,hideScrollbar:Bd}),Bd&&ri&&a.jsx(I1,{items:Ve,metricKey:ri,scrollRef:_e,sortDir:E.sort.dir})]})]}),O&&a.jsx(SS,{path:s[0]??null,selectedPaths:s,items:Ve,sortSpec:E.sort,onResize:_,onStarChanged:(x,j)=>{ft(P=>{const I={...P};for(const D of x)I[D]=j;return I})},onFindSimilar:()=>l(!0),embeddingsAvailable:Av,embeddingsLoading:rs.isLoading}),a.jsx(kS,{open:o,embeddings:Ad,rejected:zv,selectedPath:s[0]??null,embeddingsLoading:rs.isLoading,embeddingsError:$v,onClose:()=>l(!1),onSearch:cy}),f&&a.jsx(W1,{path:f,onClose:Xd,onZoomChange:x=>b(Math.round(x)),requestedZoomPercent:p,onZoomRequestConsumed:()=>m(null),onNavigate:ya}),g&&a.jsx(q1,{aItem:Bv,bItem:Wv,index:Er,total:Tt.length,canPrev:Hv,canNext:Vv,onNavigate:yy,onClose:ga}),G&&a.jsx("div",{className:"toolbar-offset fixed inset-0 left-[var(--left)] right-[var(--right)] bg-accent/10 border-2 border-dashed border-accent text-text flex items-center justify-center text-lg z-overlay pointer-events-none",children:"Drop images to upload"}),we&&a.jsx(Hk,{ctx:we,current:e,items:Ve,refetch:sa,setCtx:qe})]})}function Dk(e,t){const n=zk(e)||"view",r=new Set(t.map(i=>i.id));if(!r.has(n))return n;let s=2;for(;r.has(`${n}-${s}`);)s+=1;return`${n}-${s}`}function zk(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function nu(e){const t=e.filter(s=>s>0).sort((s,i)=>i-s),n=e.includes(0),r=[...t.map(s=>String(s))];return n&&r.push("None"),r.join(", ")}function Ak(e,t){return e&&t?`${e} to ${t}`:e?`from ${e}`:t?`to ${t}`:""}function $k(e){if(e==="/"||e==="")return"Root";const t=e.split("/").filter(Boolean);return t.length?t.length<=2?`/${t.join("/")}`:`.../${t.slice(-2).join("/")}`:"Root"}function Uk(e,t){return`${Sm(e)}${Sm(t)}`}function Sm(e){const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Bk(e){const t=e.toLowerCase();return t.endsWith(".png")?"image/png":t.endsWith(".webp")?"image/webp":"image/jpeg"}function Wk(e,t){const n=e.split("/").pop()??e;return{path:e,name:n,type:Bk(e),w:0,h:0,size:0,hasThumb:!0,hasMeta:!1,star:t??null}}function Cc(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function Hk({ctx:e,current:t,items:n,refetch:r,setCtx:s}){const i=PS(t),o=ts(),[l,u]=nl.useState(!1),[c,f]=nl.useState(null),h=()=>new Date().toISOString().replace(/[:.]/g,"-"),g=v=>{const p=m=>v==="/"?!0:m===v||m.startsWith(`${v}/`);o.invalidateQueries({predicate:({queryKey:m})=>{if(!Array.isArray(m)||m[0]!=="folder")return!1;const y=typeof m[1]=="string"?m[1]:"";return p(y)}})},S=v=>{const p=on(v);return p===""?"/":p},w=async()=>{const v=S(e.payload.path||"/");u(!0);try{await me.refreshFolder(v),g(v),(t===v||t.startsWith(v==="/"?"/":`${v}/`))&&await r(),cc.evictPrefix(v),as.evictPrefix(v)}catch(p){console.error("Failed to refresh folder:",p)}finally{u(!1),s(null)}},N=v=>async()=>{f(v);const p=e.payload.path||t;try{const y=(await me.getFolder(p,void 0,!0)).items,b=lm(y),L=v==="csv"?om(b):im(b),M=v==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8",E=p==="/"?"root":(p.replace(/^\/+/,"")||"root").replace(/\//g,"_");Cc(new Blob([L],{type:M}),`metadata_${E}_${h()}.${v}`)}catch(m){console.error("Failed to export folder:",m),alert("Failed to export folder. See console for details.")}finally{f(null),s(null)}},R=e.kind==="tree"?[{label:l?"Refreshing":"Refresh",disabled:l,onClick:w},{label:c==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!c||l,onClick:N("csv")},{label:c==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!c||l,onClick:N("json")}]:(()=>{const v=e.payload.paths??[],p=[],m=y=>async()=>{f(y);try{const b=new Set(v),L=n.filter(C=>b.has(C.path)),M=lm(L),E=y==="csv"?om(M):im(M),T=y==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8";Cc(new Blob([E],{type:T}),`metadata_selection_${h()}.${y}`)}finally{f(null),s(null)}};return p.push({label:"Move to trash",disabled:i,onClick:async()=>{if(!i){for(const y of v)try{await me.moveFile(y,"/_trash_")}catch(b){console.error(`Failed to trash ${y}:`,b)}r(),s(null)}}}),i&&(p.push({label:"Permanent delete",danger:!0,onClick:async()=>{if(confirm(`Delete ${v.length} file(s) permanently? This cannot be undone.`)){try{await me.deleteFiles(v)}catch(y){console.error("Failed to delete files:",y)}r(),s(null)}}}),p.push({label:"Recover",onClick:async()=>{for(const y of v)try{const L=(await me.getSidecar(y)).original_position,M=L&&L.split("/").slice(0,-1).join("/")||"/";await me.moveFile(y,M)}catch(b){console.error(`Failed to recover ${y}:`,b)}r(),s(null)}})),v.length&&(p.push({label:c==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!c,onClick:m("csv")}),p.push({label:c==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!c,onClick:m("json")})),p})();return a.jsx(lk,{x:e.x,y:e.y,items:R})}const Vk=new Sw({defaultOptions:{queries:{staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always"},mutations:{retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),5e3)}}});function Qk(){return a.jsx(kw,{client:Vk,children:a.jsx(Ok,{})})}Vg(document.getElementById("root")).render(a.jsx(Qk,{}));
