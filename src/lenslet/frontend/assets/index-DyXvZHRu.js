var jy=Object.defineProperty;var of=e=>{throw TypeError(e)};var My=(e,t,n)=>t in e?jy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var bn=(e,t,n)=>My(e,typeof t!="symbol"?t+"":t,n),Ca=(e,t,n)=>t.has(e)||of("Cannot "+n);var S=(e,t,n)=>(Ca(e,t,"read from private field"),n?n.call(e):t.get(e)),re=(e,t,n)=>t.has(e)?of("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),K=(e,t,n,r)=>(Ca(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ye=(e,t,n)=>(Ca(e,t,"access private method"),n);var go=(e,t,n,r)=>({set _(s){K(e,t,s,n)},get _(){return S(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Ry(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fm={exports:{}},Ol={},Om={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ro=Symbol.for("react.element"),Ly=Symbol.for("react.portal"),Ty=Symbol.for("react.fragment"),_y=Symbol.for("react.strict_mode"),Py=Symbol.for("react.profiler"),Iy=Symbol.for("react.provider"),Fy=Symbol.for("react.context"),Oy=Symbol.for("react.forward_ref"),Dy=Symbol.for("react.suspense"),zy=Symbol.for("react.memo"),Ay=Symbol.for("react.lazy"),lf=Symbol.iterator;function $y(e){return e===null||typeof e!="object"?null:(e=lf&&e[lf]||e["@@iterator"],typeof e=="function"?e:null)}var Dm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zm=Object.assign,Am={};function Xs(e,t,n){this.props=e,this.context=t,this.refs=Am,this.updater=n||Dm}Xs.prototype.isReactComponent={};Xs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $m(){}$m.prototype=Xs.prototype;function Mc(e,t,n){this.props=e,this.context=t,this.refs=Am,this.updater=n||Dm}var Rc=Mc.prototype=new $m;Rc.constructor=Mc;zm(Rc,Xs.prototype);Rc.isPureReactComponent=!0;var af=Array.isArray,Um=Object.prototype.hasOwnProperty,Lc={current:null},Bm={key:!0,ref:!0,__self:!0,__source:!0};function Wm(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Um.call(t,r)&&!Bm.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ro,type:e,key:i,ref:o,props:s,_owner:Lc.current}}function Uy(e,t){return{$$typeof:ro,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Tc(e){return typeof e=="object"&&e!==null&&e.$$typeof===ro}function By(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var uf=/\/+/g;function ba(e,t){return typeof e=="object"&&e!==null&&e.key!=null?By(""+e.key):t.toString(36)}function Ao(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ro:case Ly:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+ba(o,0):r,af(s)?(n="",e!=null&&(n=e.replace(uf,"$&/")+"/"),Ao(s,t,n,"",function(c){return c})):s!=null&&(Tc(s)&&(s=Uy(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(uf,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",af(e))for(var l=0;l<e.length;l++){i=e[l];var u=r+ba(i,l);o+=Ao(i,t,n,u,s)}else if(u=$y(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=r+ba(i,l++),o+=Ao(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function vo(e,t,n){if(e==null)return e;var r=[],s=0;return Ao(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Wy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wt={current:null},$o={transition:null},Hy={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:$o,ReactCurrentOwner:Lc};function Hm(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:vo,forEach:function(e,t,n){vo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return vo(e,function(){t++}),t},toArray:function(e){return vo(e,function(t){return t})||[]},only:function(e){if(!Tc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=Xs;we.Fragment=Ty;we.Profiler=Py;we.PureComponent=Mc;we.StrictMode=_y;we.Suspense=Dy;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hy;we.act=Hm;we.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=zm({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Lc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)Um.call(t,u)&&!Bm.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:ro,type:e.type,key:s,ref:i,props:r,_owner:o}};we.createContext=function(e){return e={$$typeof:Fy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Iy,_context:e},e.Consumer=e};we.createElement=Wm;we.createFactory=function(e){var t=Wm.bind(null,e);return t.type=e,t};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:Oy,render:e}};we.isValidElement=Tc;we.lazy=function(e){return{$$typeof:Ay,_payload:{_status:-1,_result:e},_init:Wy}};we.memo=function(e,t){return{$$typeof:zy,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=$o.transition;$o.transition={};try{e()}finally{$o.transition=t}};we.unstable_act=Hm;we.useCallback=function(e,t){return wt.current.useCallback(e,t)};we.useContext=function(e){return wt.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return wt.current.useDeferredValue(e)};we.useEffect=function(e,t){return wt.current.useEffect(e,t)};we.useId=function(){return wt.current.useId()};we.useImperativeHandle=function(e,t,n){return wt.current.useImperativeHandle(e,t,n)};we.useInsertionEffect=function(e,t){return wt.current.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return wt.current.useLayoutEffect(e,t)};we.useMemo=function(e,t){return wt.current.useMemo(e,t)};we.useReducer=function(e,t,n){return wt.current.useReducer(e,t,n)};we.useRef=function(e){return wt.current.useRef(e)};we.useState=function(e){return wt.current.useState(e)};we.useSyncExternalStore=function(e,t,n){return wt.current.useSyncExternalStore(e,t,n)};we.useTransition=function(){return wt.current.useTransition()};we.version="18.3.1";Om.exports=we;var d=Om.exports;const sl=Ry(d);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy=d,Qy=Symbol.for("react.element"),Ky=Symbol.for("react.fragment"),qy=Object.prototype.hasOwnProperty,Yy=Vy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gy={key:!0,ref:!0,__self:!0,__source:!0};function Vm(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)qy.call(t,r)&&!Gy.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Qy,type:e,key:i,ref:o,props:s,_owner:Yy.current}}Ol.Fragment=Ky;Ol.jsx=Vm;Ol.jsxs=Vm;Fm.exports=Ol;var a=Fm.exports,Qm={exports:{}},zt={},Km={exports:{}},qm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,V){var q=F.length;F.push(V);e:for(;0<q;){var he=q-1>>>1,fe=F[he];if(0<s(fe,V))F[he]=V,F[q]=fe,q=he;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var V=F[0],q=F.pop();if(q!==V){F[0]=q;e:for(var he=0,fe=F.length,Ne=fe>>>1;he<Ne;){var H=2*(he+1)-1,Y=F[H],ne=H+1,me=F[ne];if(0>s(Y,q))ne<fe&&0>s(me,Y)?(F[he]=me,F[ne]=q,he=ne):(F[he]=Y,F[H]=q,he=H);else if(ne<fe&&0>s(me,q))F[he]=me,F[ne]=q,he=ne;else break e}}return V}function s(F,V){var q=F.sortIndex-V.sortIndex;return q!==0?q:F.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,m=null,g=3,w=!1,k=!1,N=!1,L=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(F){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=F)r(c),V.sortIndex=V.expirationTime,t(u,V);else break;V=n(c)}}function v(F){if(N=!1,p(F),!k)if(n(u)!==null)k=!0,U(b);else{var V=n(c);V!==null&&ue(v,V.startTime-F)}}function b(F,V){k=!1,N&&(N=!1,y(E),E=-1),w=!0;var q=g;try{for(p(V),m=n(u);m!==null&&(!(m.expirationTime>V)||F&&!P());){var he=m.callback;if(typeof he=="function"){m.callback=null,g=m.priorityLevel;var fe=he(m.expirationTime<=V);V=e.unstable_now(),typeof fe=="function"?m.callback=fe:m===n(u)&&r(u),p(V)}else r(u);m=n(u)}if(m!==null)var Ne=!0;else{var H=n(c);H!==null&&ue(v,H.startTime-V),Ne=!1}return Ne}finally{m=null,g=q,w=!1}}var R=!1,M=null,E=-1,T=5,C=-1;function P(){return!(e.unstable_now()-C<T)}function W(){if(M!==null){var F=e.unstable_now();C=F;var V=!0;try{V=M(!0,F)}finally{V?D():(R=!1,M=null)}}else R=!1}var D;if(typeof h=="function")D=function(){h(W)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,oe=z.port2;z.port1.onmessage=W,D=function(){oe.postMessage(null)}}else D=function(){L(W,0)};function U(F){M=F,R||(R=!0,D())}function ue(F,V){E=L(function(){F(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){k||w||(k=!0,U(b))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(F){switch(g){case 1:case 2:case 3:var V=3;break;default:V=g}var q=g;g=V;try{return F()}finally{g=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,V){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var q=g;g=F;try{return V()}finally{g=q}},e.unstable_scheduleCallback=function(F,V,q){var he=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?he+q:he):q=he,F){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=q+fe,F={id:f++,callback:V,priorityLevel:F,startTime:q,expirationTime:fe,sortIndex:-1},q>he?(F.sortIndex=q,t(c,F),n(u)===null&&F===n(c)&&(N?(y(E),E=-1):N=!0,ue(v,q-he))):(F.sortIndex=fe,t(u,F),k||w||(k=!0,U(b))),F},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(F){var V=g;return function(){var q=g;g=V;try{return F.apply(this,arguments)}finally{g=q}}}})(qm);Km.exports=qm;var Xy=Km.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy=d,Dt=Xy;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ym=new Set,Ti={};function ts(e,t){Hs(e,t),Hs(e+"Capture",t)}function Hs(e,t){for(Ti[e]=t,e=0;e<t.length;e++)Ym.add(t[e])}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ou=Object.prototype.hasOwnProperty,Zy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cf={},df={};function e0(e){return ou.call(df,e)?!0:ou.call(cf,e)?!1:Zy.test(e)?df[e]=!0:(cf[e]=!0,!1)}function t0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function n0(e,t,n,r){if(t===null||typeof t>"u"||t0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function St(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ot[e]=new St(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ot[t]=new St(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ot[e]=new St(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ot[e]=new St(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ot[e]=new St(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ot[e]=new St(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ot[e]=new St(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ot[e]=new St(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ot[e]=new St(e,5,!1,e.toLowerCase(),null,!1,!1)});var _c=/[\-:]([a-z])/g;function Pc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_c,Pc);ot[t]=new St(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_c,Pc);ot[t]=new St(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_c,Pc);ot[t]=new St(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ot[e]=new St(e,1,!1,e.toLowerCase(),null,!1,!1)});ot.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ot[e]=new St(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ic(e,t,n,r){var s=ot.hasOwnProperty(t)?ot[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(n0(t,n,s,r)&&(n=null),r||s===null?e0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Bn=Jy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yo=Symbol.for("react.element"),ds=Symbol.for("react.portal"),fs=Symbol.for("react.fragment"),Fc=Symbol.for("react.strict_mode"),lu=Symbol.for("react.profiler"),Gm=Symbol.for("react.provider"),Xm=Symbol.for("react.context"),Oc=Symbol.for("react.forward_ref"),au=Symbol.for("react.suspense"),uu=Symbol.for("react.suspense_list"),Dc=Symbol.for("react.memo"),Xn=Symbol.for("react.lazy"),Jm=Symbol.for("react.offscreen"),ff=Symbol.iterator;function oi(e){return e===null||typeof e!="object"?null:(e=ff&&e[ff]||e["@@iterator"],typeof e=="function"?e:null)}var ze=Object.assign,Ea;function pi(e){if(Ea===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ea=t&&t[1]||""}return`
`+Ea+e}var Na=!1;function ja(e,t){if(!e||Na)return"";Na=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{Na=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?pi(e):""}function r0(e){switch(e.tag){case 5:return pi(e.type);case 16:return pi("Lazy");case 13:return pi("Suspense");case 19:return pi("SuspenseList");case 0:case 2:case 15:return e=ja(e.type,!1),e;case 11:return e=ja(e.type.render,!1),e;case 1:return e=ja(e.type,!0),e;default:return""}}function cu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fs:return"Fragment";case ds:return"Portal";case lu:return"Profiler";case Fc:return"StrictMode";case au:return"Suspense";case uu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Xm:return(e.displayName||"Context")+".Consumer";case Gm:return(e._context.displayName||"Context")+".Provider";case Oc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Dc:return t=e.displayName||null,t!==null?t:cu(e.type)||"Memo";case Xn:t=e._payload,e=e._init;try{return cu(e(t))}catch{}}return null}function s0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cu(t);case 8:return t===Fc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Sr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function i0(e){var t=Zm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xo(e){e._valueTracker||(e._valueTracker=i0(e))}function ep(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Zm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function il(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function du(e,t){var n=t.checked;return ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hf(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Sr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function tp(e,t){t=t.checked,t!=null&&Ic(e,"checked",t,!1)}function fu(e,t){tp(e,t);var n=Sr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?hu(e,t.type,n):t.hasOwnProperty("defaultValue")&&hu(e,t.type,Sr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function hu(e,t,n){(t!=="number"||il(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var gi=Array.isArray;function Cs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Sr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function mu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($(92));if(gi(n)){if(1<n.length)throw Error($(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Sr(n)}}function np(e,t){var n=Sr(t.value),r=Sr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function gf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function rp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?rp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wo,sp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(wo=wo||document.createElement("div"),wo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _i(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o0=["Webkit","ms","Moz","O"];Object.keys(Si).forEach(function(e){o0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Si[t]=Si[e]})});function ip(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Si.hasOwnProperty(e)&&Si[e]?(""+t).trim():t+"px"}function op(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ip(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var l0=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gu(e,t){if(t){if(l0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function vu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yu=null;function zc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xu=null,bs=null,Es=null;function vf(e){if(e=oo(e)){if(typeof xu!="function")throw Error($(280));var t=e.stateNode;t&&(t=Ul(t),xu(e.stateNode,e.type,t))}}function lp(e){bs?Es?Es.push(e):Es=[e]:bs=e}function ap(){if(bs){var e=bs,t=Es;if(Es=bs=null,vf(e),t)for(e=0;e<t.length;e++)vf(t[e])}}function up(e,t){return e(t)}function cp(){}var Ma=!1;function dp(e,t,n){if(Ma)return e(t,n);Ma=!0;try{return up(e,t,n)}finally{Ma=!1,(bs!==null||Es!==null)&&(cp(),ap())}}function Pi(e,t){var n=e.stateNode;if(n===null)return null;var r=Ul(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,t,typeof n));return n}var wu=!1;if(zn)try{var li={};Object.defineProperty(li,"passive",{get:function(){wu=!0}}),window.addEventListener("test",li,li),window.removeEventListener("test",li,li)}catch{wu=!1}function a0(e,t,n,r,s,i,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var ki=!1,ol=null,ll=!1,Su=null,u0={onError:function(e){ki=!0,ol=e}};function c0(e,t,n,r,s,i,o,l,u){ki=!1,ol=null,a0.apply(u0,arguments)}function d0(e,t,n,r,s,i,o,l,u){if(c0.apply(this,arguments),ki){if(ki){var c=ol;ki=!1,ol=null}else throw Error($(198));ll||(ll=!0,Su=c)}}function ns(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function fp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function yf(e){if(ns(e)!==e)throw Error($(188))}function f0(e){var t=e.alternate;if(!t){if(t=ns(e),t===null)throw Error($(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return yf(s),e;if(i===r)return yf(s),t;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:t}function hp(e){return e=f0(e),e!==null?mp(e):null}function mp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=mp(e);if(t!==null)return t;e=e.sibling}return null}var pp=Dt.unstable_scheduleCallback,xf=Dt.unstable_cancelCallback,h0=Dt.unstable_shouldYield,m0=Dt.unstable_requestPaint,We=Dt.unstable_now,p0=Dt.unstable_getCurrentPriorityLevel,Ac=Dt.unstable_ImmediatePriority,gp=Dt.unstable_UserBlockingPriority,al=Dt.unstable_NormalPriority,g0=Dt.unstable_LowPriority,vp=Dt.unstable_IdlePriority,Dl=null,yn=null;function v0(e){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Dl,e,void 0,(e.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:w0,y0=Math.log,x0=Math.LN2;function w0(e){return e>>>=0,e===0?32:31-(y0(e)/x0|0)|0}var So=64,ko=4194304;function vi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ul(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=vi(l):(i&=o,i!==0&&(r=vi(i)))}else o=n&~s,o!==0?r=vi(o):i!==0&&(r=vi(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-an(t),s=1<<n,r|=e[n],t&=~s;return r}function S0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function k0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-an(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=S0(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function ku(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yp(){var e=So;return So<<=1,!(So&4194240)&&(So=64),e}function Ra(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function so(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-an(t),e[t]=n}function C0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-an(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function $c(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-an(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var je=0;function xp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wp,Uc,Sp,kp,Cp,Cu=!1,Co=[],fr=null,hr=null,mr=null,Ii=new Map,Fi=new Map,Zn=[],b0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wf(e,t){switch(e){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Ii.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fi.delete(t.pointerId)}}function ai(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=oo(t),t!==null&&Uc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function E0(e,t,n,r,s){switch(t){case"focusin":return fr=ai(fr,e,t,n,r,s),!0;case"dragenter":return hr=ai(hr,e,t,n,r,s),!0;case"mouseover":return mr=ai(mr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ii.set(i,ai(Ii.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Fi.set(i,ai(Fi.get(i)||null,e,t,n,r,s)),!0}return!1}function bp(e){var t=Lr(e.target);if(t!==null){var n=ns(t);if(n!==null){if(t=n.tag,t===13){if(t=fp(n),t!==null){e.blockedOn=t,Cp(e.priority,function(){Sp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Uo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=bu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);yu=r,n.target.dispatchEvent(r),yu=null}else return t=oo(n),t!==null&&Uc(t),e.blockedOn=n,!1;t.shift()}return!0}function Sf(e,t,n){Uo(e)&&n.delete(t)}function N0(){Cu=!1,fr!==null&&Uo(fr)&&(fr=null),hr!==null&&Uo(hr)&&(hr=null),mr!==null&&Uo(mr)&&(mr=null),Ii.forEach(Sf),Fi.forEach(Sf)}function ui(e,t){e.blockedOn===t&&(e.blockedOn=null,Cu||(Cu=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,N0)))}function Oi(e){function t(s){return ui(s,e)}if(0<Co.length){ui(Co[0],e);for(var n=1;n<Co.length;n++){var r=Co[n];r.blockedOn===e&&(r.blockedOn=null)}}for(fr!==null&&ui(fr,e),hr!==null&&ui(hr,e),mr!==null&&ui(mr,e),Ii.forEach(t),Fi.forEach(t),n=0;n<Zn.length;n++)r=Zn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Zn.length&&(n=Zn[0],n.blockedOn===null);)bp(n),n.blockedOn===null&&Zn.shift()}var Ns=Bn.ReactCurrentBatchConfig,cl=!0;function j0(e,t,n,r){var s=je,i=Ns.transition;Ns.transition=null;try{je=1,Bc(e,t,n,r)}finally{je=s,Ns.transition=i}}function M0(e,t,n,r){var s=je,i=Ns.transition;Ns.transition=null;try{je=4,Bc(e,t,n,r)}finally{je=s,Ns.transition=i}}function Bc(e,t,n,r){if(cl){var s=bu(e,t,n,r);if(s===null)Aa(e,t,r,dl,n),wf(e,r);else if(E0(s,e,t,n,r))r.stopPropagation();else if(wf(e,r),t&4&&-1<b0.indexOf(e)){for(;s!==null;){var i=oo(s);if(i!==null&&wp(i),i=bu(e,t,n,r),i===null&&Aa(e,t,r,dl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Aa(e,t,r,null,n)}}var dl=null;function bu(e,t,n,r){if(dl=null,e=zc(r),e=Lr(e),e!==null)if(t=ns(e),t===null)e=null;else if(n=t.tag,n===13){if(e=fp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return dl=e,null}function Ep(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p0()){case Ac:return 1;case gp:return 4;case al:case g0:return 16;case vp:return 536870912;default:return 16}default:return 16}}var cr=null,Wc=null,Bo=null;function Np(){if(Bo)return Bo;var e,t=Wc,n=t.length,r,s="value"in cr?cr.value:cr.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Bo=s.slice(e,1<r?1-r:void 0)}function Wo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bo(){return!0}function kf(){return!1}function At(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?bo:kf,this.isPropagationStopped=kf,this}return ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bo)},persist:function(){},isPersistent:bo}),t}var Js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hc=At(Js),io=ze({},Js,{view:0,detail:0}),R0=At(io),La,Ta,ci,zl=ze({},io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ci&&(ci&&e.type==="mousemove"?(La=e.screenX-ci.screenX,Ta=e.screenY-ci.screenY):Ta=La=0,ci=e),La)},movementY:function(e){return"movementY"in e?e.movementY:Ta}}),Cf=At(zl),L0=ze({},zl,{dataTransfer:0}),T0=At(L0),_0=ze({},io,{relatedTarget:0}),_a=At(_0),P0=ze({},Js,{animationName:0,elapsedTime:0,pseudoElement:0}),I0=At(P0),F0=ze({},Js,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),O0=At(F0),D0=ze({},Js,{data:0}),bf=At(D0),z0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function U0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$0[e])?!!t[e]:!1}function Vc(){return U0}var B0=ze({},io,{key:function(e){if(e.key){var t=z0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Wo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?A0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vc,charCode:function(e){return e.type==="keypress"?Wo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),W0=At(B0),H0=ze({},zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ef=At(H0),V0=ze({},io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vc}),Q0=At(V0),K0=ze({},Js,{propertyName:0,elapsedTime:0,pseudoElement:0}),q0=At(K0),Y0=ze({},zl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),G0=At(Y0),X0=[9,13,27,32],Qc=zn&&"CompositionEvent"in window,Ci=null;zn&&"documentMode"in document&&(Ci=document.documentMode);var J0=zn&&"TextEvent"in window&&!Ci,jp=zn&&(!Qc||Ci&&8<Ci&&11>=Ci),Nf=" ",jf=!1;function Mp(e,t){switch(e){case"keyup":return X0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hs=!1;function Z0(e,t){switch(e){case"compositionend":return Rp(t);case"keypress":return t.which!==32?null:(jf=!0,Nf);case"textInput":return e=t.data,e===Nf&&jf?null:e;default:return null}}function ex(e,t){if(hs)return e==="compositionend"||!Qc&&Mp(e,t)?(e=Np(),Bo=Wc=cr=null,hs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jp&&t.locale!=="ko"?null:t.data;default:return null}}var tx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!tx[e.type]:t==="textarea"}function Lp(e,t,n,r){lp(r),t=fl(t,"onChange"),0<t.length&&(n=new Hc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var bi=null,Di=null;function nx(e){Up(e,0)}function Al(e){var t=gs(e);if(ep(t))return e}function rx(e,t){if(e==="change")return t}var Tp=!1;if(zn){var Pa;if(zn){var Ia="oninput"in document;if(!Ia){var Rf=document.createElement("div");Rf.setAttribute("oninput","return;"),Ia=typeof Rf.oninput=="function"}Pa=Ia}else Pa=!1;Tp=Pa&&(!document.documentMode||9<document.documentMode)}function Lf(){bi&&(bi.detachEvent("onpropertychange",_p),Di=bi=null)}function _p(e){if(e.propertyName==="value"&&Al(Di)){var t=[];Lp(t,Di,e,zc(e)),dp(nx,t)}}function sx(e,t,n){e==="focusin"?(Lf(),bi=t,Di=n,bi.attachEvent("onpropertychange",_p)):e==="focusout"&&Lf()}function ix(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Al(Di)}function ox(e,t){if(e==="click")return Al(t)}function lx(e,t){if(e==="input"||e==="change")return Al(t)}function ax(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cn=typeof Object.is=="function"?Object.is:ax;function zi(e,t){if(cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ou.call(t,s)||!cn(e[s],t[s]))return!1}return!0}function Tf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _f(e,t){var n=Tf(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Tf(n)}}function Pp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Pp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ip(){for(var e=window,t=il();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=il(e.document)}return t}function Kc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ux(e){var t=Ip(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Pp(n.ownerDocument.documentElement,n)){if(r!==null&&Kc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=_f(n,i);var o=_f(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var cx=zn&&"documentMode"in document&&11>=document.documentMode,ms=null,Eu=null,Ei=null,Nu=!1;function Pf(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nu||ms==null||ms!==il(r)||(r=ms,"selectionStart"in r&&Kc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ei&&zi(Ei,r)||(Ei=r,r=fl(Eu,"onSelect"),0<r.length&&(t=new Hc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ms)))}function Eo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ps={animationend:Eo("Animation","AnimationEnd"),animationiteration:Eo("Animation","AnimationIteration"),animationstart:Eo("Animation","AnimationStart"),transitionend:Eo("Transition","TransitionEnd")},Fa={},Fp={};zn&&(Fp=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function $l(e){if(Fa[e])return Fa[e];if(!ps[e])return e;var t=ps[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Fp)return Fa[e]=t[n];return e}var Op=$l("animationend"),Dp=$l("animationiteration"),zp=$l("animationstart"),Ap=$l("transitionend"),$p=new Map,If="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(e,t){$p.set(e,t),ts(t,[e])}for(var Oa=0;Oa<If.length;Oa++){var Da=If[Oa],dx=Da.toLowerCase(),fx=Da[0].toUpperCase()+Da.slice(1);Cr(dx,"on"+fx)}Cr(Op,"onAnimationEnd");Cr(Dp,"onAnimationIteration");Cr(zp,"onAnimationStart");Cr("dblclick","onDoubleClick");Cr("focusin","onFocus");Cr("focusout","onBlur");Cr(Ap,"onTransitionEnd");Hs("onMouseEnter",["mouseout","mouseover"]);Hs("onMouseLeave",["mouseout","mouseover"]);Hs("onPointerEnter",["pointerout","pointerover"]);Hs("onPointerLeave",["pointerout","pointerover"]);ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hx=new Set("cancel close invalid load scroll toggle".split(" ").concat(yi));function Ff(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,d0(r,t,void 0,e),e.currentTarget=null}function Up(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Ff(s,l,c),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Ff(s,l,c),i=u}}}if(ll)throw e=Su,ll=!1,Su=null,e}function _e(e,t){var n=t[Tu];n===void 0&&(n=t[Tu]=new Set);var r=e+"__bubble";n.has(r)||(Bp(t,e,2,!1),n.add(r))}function za(e,t,n){var r=0;t&&(r|=4),Bp(n,e,r,t)}var No="_reactListening"+Math.random().toString(36).slice(2);function Ai(e){if(!e[No]){e[No]=!0,Ym.forEach(function(n){n!=="selectionchange"&&(hx.has(n)||za(n,!1,e),za(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[No]||(t[No]=!0,za("selectionchange",!1,t))}}function Bp(e,t,n,r){switch(Ep(t)){case 1:var s=j0;break;case 4:s=M0;break;default:s=Bc}n=s.bind(null,t,n,e),s=void 0,!wu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Aa(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Lr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}dp(function(){var c=i,f=zc(n),m=[];e:{var g=$p.get(e);if(g!==void 0){var w=Hc,k=e;switch(e){case"keypress":if(Wo(n)===0)break e;case"keydown":case"keyup":w=W0;break;case"focusin":k="focus",w=_a;break;case"focusout":k="blur",w=_a;break;case"beforeblur":case"afterblur":w=_a;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Cf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=T0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Q0;break;case Op:case Dp:case zp:w=I0;break;case Ap:w=q0;break;case"scroll":w=R0;break;case"wheel":w=G0;break;case"copy":case"cut":case"paste":w=O0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Ef}var N=(t&4)!==0,L=!N&&e==="scroll",y=N?g!==null?g+"Capture":null:g;N=[];for(var h=c,p;h!==null;){p=h;var v=p.stateNode;if(p.tag===5&&v!==null&&(p=v,y!==null&&(v=Pi(h,y),v!=null&&N.push($i(h,v,p)))),L)break;h=h.return}0<N.length&&(g=new w(g,k,null,n,f),m.push({event:g,listeners:N}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",g&&n!==yu&&(k=n.relatedTarget||n.fromElement)&&(Lr(k)||k[An]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(k=n.relatedTarget||n.toElement,w=c,k=k?Lr(k):null,k!==null&&(L=ns(k),k!==L||k.tag!==5&&k.tag!==6)&&(k=null)):(w=null,k=c),w!==k)){if(N=Cf,v="onMouseLeave",y="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(N=Ef,v="onPointerLeave",y="onPointerEnter",h="pointer"),L=w==null?g:gs(w),p=k==null?g:gs(k),g=new N(v,h+"leave",w,n,f),g.target=L,g.relatedTarget=p,v=null,Lr(f)===c&&(N=new N(y,h+"enter",k,n,f),N.target=p,N.relatedTarget=L,v=N),L=v,w&&k)t:{for(N=w,y=k,h=0,p=N;p;p=os(p))h++;for(p=0,v=y;v;v=os(v))p++;for(;0<h-p;)N=os(N),h--;for(;0<p-h;)y=os(y),p--;for(;h--;){if(N===y||y!==null&&N===y.alternate)break t;N=os(N),y=os(y)}N=null}else N=null;w!==null&&Of(m,g,w,N,!1),k!==null&&L!==null&&Of(m,L,k,N,!0)}}e:{if(g=c?gs(c):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var b=rx;else if(Mf(g))if(Tp)b=lx;else{b=ix;var R=sx}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(b=ox);if(b&&(b=b(e,c))){Lp(m,b,n,f);break e}R&&R(e,g,c),e==="focusout"&&(R=g._wrapperState)&&R.controlled&&g.type==="number"&&hu(g,"number",g.value)}switch(R=c?gs(c):window,e){case"focusin":(Mf(R)||R.contentEditable==="true")&&(ms=R,Eu=c,Ei=null);break;case"focusout":Ei=Eu=ms=null;break;case"mousedown":Nu=!0;break;case"contextmenu":case"mouseup":case"dragend":Nu=!1,Pf(m,n,f);break;case"selectionchange":if(cx)break;case"keydown":case"keyup":Pf(m,n,f)}var M;if(Qc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else hs?Mp(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(jp&&n.locale!=="ko"&&(hs||E!=="onCompositionStart"?E==="onCompositionEnd"&&hs&&(M=Np()):(cr=f,Wc="value"in cr?cr.value:cr.textContent,hs=!0)),R=fl(c,E),0<R.length&&(E=new bf(E,e,null,n,f),m.push({event:E,listeners:R}),M?E.data=M:(M=Rp(n),M!==null&&(E.data=M)))),(M=J0?Z0(e,n):ex(e,n))&&(c=fl(c,"onBeforeInput"),0<c.length&&(f=new bf("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:c}),f.data=M))}Up(m,t)})}function $i(e,t,n){return{instance:e,listener:t,currentTarget:n}}function fl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Pi(e,n),i!=null&&r.unshift($i(e,i,s)),i=Pi(e,t),i!=null&&r.push($i(e,i,s))),e=e.return}return r}function os(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Of(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,s?(u=Pi(n,i),u!=null&&o.unshift($i(n,u,l))):s||(u=Pi(n,i),u!=null&&o.push($i(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var mx=/\r\n?/g,px=/\u0000|\uFFFD/g;function Df(e){return(typeof e=="string"?e:""+e).replace(mx,`
`).replace(px,"")}function jo(e,t,n){if(t=Df(t),Df(e)!==t&&n)throw Error($(425))}function hl(){}var ju=null,Mu=null;function Ru(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Lu=typeof setTimeout=="function"?setTimeout:void 0,gx=typeof clearTimeout=="function"?clearTimeout:void 0,zf=typeof Promise=="function"?Promise:void 0,vx=typeof queueMicrotask=="function"?queueMicrotask:typeof zf<"u"?function(e){return zf.resolve(null).then(e).catch(yx)}:Lu;function yx(e){setTimeout(function(){throw e})}function $a(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Oi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Oi(t)}function pr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Af(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Zs=Math.random().toString(36).slice(2),vn="__reactFiber$"+Zs,Ui="__reactProps$"+Zs,An="__reactContainer$"+Zs,Tu="__reactEvents$"+Zs,xx="__reactListeners$"+Zs,wx="__reactHandles$"+Zs;function Lr(e){var t=e[vn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[An]||n[vn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Af(e);e!==null;){if(n=e[vn])return n;e=Af(e)}return t}e=n,n=e.parentNode}return null}function oo(e){return e=e[vn]||e[An],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function Ul(e){return e[Ui]||null}var _u=[],vs=-1;function br(e){return{current:e}}function Pe(e){0>vs||(e.current=_u[vs],_u[vs]=null,vs--)}function Le(e,t){vs++,_u[vs]=e.current,e.current=t}var kr={},ht=br(kr),Mt=br(!1),qr=kr;function Vs(e,t){var n=e.type.contextTypes;if(!n)return kr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Rt(e){return e=e.childContextTypes,e!=null}function ml(){Pe(Mt),Pe(ht)}function $f(e,t,n){if(ht.current!==kr)throw Error($(168));Le(ht,t),Le(Mt,n)}function Wp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error($(108,s0(e)||"Unknown",s));return ze({},n,r)}function pl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||kr,qr=ht.current,Le(ht,e),Le(Mt,Mt.current),!0}function Uf(e,t,n){var r=e.stateNode;if(!r)throw Error($(169));n?(e=Wp(e,t,qr),r.__reactInternalMemoizedMergedChildContext=e,Pe(Mt),Pe(ht),Le(ht,e)):Pe(Mt),Le(Mt,n)}var Mn=null,Bl=!1,Ua=!1;function Hp(e){Mn===null?Mn=[e]:Mn.push(e)}function Sx(e){Bl=!0,Hp(e)}function Er(){if(!Ua&&Mn!==null){Ua=!0;var e=0,t=je;try{var n=Mn;for(je=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Mn=null,Bl=!1}catch(s){throw Mn!==null&&(Mn=Mn.slice(e+1)),pp(Ac,Er),s}finally{je=t,Ua=!1}}return null}var ys=[],xs=0,gl=null,vl=0,Ht=[],Vt=0,Yr=null,Pn=1,In="";function Mr(e,t){ys[xs++]=vl,ys[xs++]=gl,gl=e,vl=t}function Vp(e,t,n){Ht[Vt++]=Pn,Ht[Vt++]=In,Ht[Vt++]=Yr,Yr=e;var r=Pn;e=In;var s=32-an(r)-1;r&=~(1<<s),n+=1;var i=32-an(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pn=1<<32-an(t)+s|n<<s|r,In=i+e}else Pn=1<<i|n<<s|r,In=e}function qc(e){e.return!==null&&(Mr(e,1),Vp(e,1,0))}function Yc(e){for(;e===gl;)gl=ys[--xs],ys[xs]=null,vl=ys[--xs],ys[xs]=null;for(;e===Yr;)Yr=Ht[--Vt],Ht[Vt]=null,In=Ht[--Vt],Ht[Vt]=null,Pn=Ht[--Vt],Ht[Vt]=null}var Ot=null,Ft=null,Ie=!1,on=null;function Qp(e,t){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ot=e,Ft=pr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ot=e,Ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Yr!==null?{id:Pn,overflow:In}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ot=e,Ft=null,!0):!1;default:return!1}}function Pu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Iu(e){if(Ie){var t=Ft;if(t){var n=t;if(!Bf(e,t)){if(Pu(e))throw Error($(418));t=pr(n.nextSibling);var r=Ot;t&&Bf(e,t)?Qp(r,n):(e.flags=e.flags&-4097|2,Ie=!1,Ot=e)}}else{if(Pu(e))throw Error($(418));e.flags=e.flags&-4097|2,Ie=!1,Ot=e}}}function Wf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ot=e}function Mo(e){if(e!==Ot)return!1;if(!Ie)return Wf(e),Ie=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ru(e.type,e.memoizedProps)),t&&(t=Ft)){if(Pu(e))throw Kp(),Error($(418));for(;t;)Qp(e,t),t=pr(t.nextSibling)}if(Wf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ft=pr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ft=null}}else Ft=Ot?pr(e.stateNode.nextSibling):null;return!0}function Kp(){for(var e=Ft;e;)e=pr(e.nextSibling)}function Qs(){Ft=Ot=null,Ie=!1}function Gc(e){on===null?on=[e]:on.push(e)}var kx=Bn.ReactCurrentBatchConfig;function di(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function Ro(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hf(e){var t=e._init;return t(e._payload)}function qp(e){function t(y,h){if(e){var p=y.deletions;p===null?(y.deletions=[h],y.flags|=16):p.push(h)}}function n(y,h){if(!e)return null;for(;h!==null;)t(y,h),h=h.sibling;return null}function r(y,h){for(y=new Map;h!==null;)h.key!==null?y.set(h.key,h):y.set(h.index,h),h=h.sibling;return y}function s(y,h){return y=xr(y,h),y.index=0,y.sibling=null,y}function i(y,h,p){return y.index=p,e?(p=y.alternate,p!==null?(p=p.index,p<h?(y.flags|=2,h):p):(y.flags|=2,h)):(y.flags|=1048576,h)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,h,p,v){return h===null||h.tag!==6?(h=qa(p,y.mode,v),h.return=y,h):(h=s(h,p),h.return=y,h)}function u(y,h,p,v){var b=p.type;return b===fs?f(y,h,p.props.children,v,p.key):h!==null&&(h.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Xn&&Hf(b)===h.type)?(v=s(h,p.props),v.ref=di(y,h,p),v.return=y,v):(v=Go(p.type,p.key,p.props,null,y.mode,v),v.ref=di(y,h,p),v.return=y,v)}function c(y,h,p,v){return h===null||h.tag!==4||h.stateNode.containerInfo!==p.containerInfo||h.stateNode.implementation!==p.implementation?(h=Ya(p,y.mode,v),h.return=y,h):(h=s(h,p.children||[]),h.return=y,h)}function f(y,h,p,v,b){return h===null||h.tag!==7?(h=Kr(p,y.mode,v,b),h.return=y,h):(h=s(h,p),h.return=y,h)}function m(y,h,p){if(typeof h=="string"&&h!==""||typeof h=="number")return h=qa(""+h,y.mode,p),h.return=y,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case yo:return p=Go(h.type,h.key,h.props,null,y.mode,p),p.ref=di(y,null,h),p.return=y,p;case ds:return h=Ya(h,y.mode,p),h.return=y,h;case Xn:var v=h._init;return m(y,v(h._payload),p)}if(gi(h)||oi(h))return h=Kr(h,y.mode,p,null),h.return=y,h;Ro(y,h)}return null}function g(y,h,p,v){var b=h!==null?h.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return b!==null?null:l(y,h,""+p,v);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case yo:return p.key===b?u(y,h,p,v):null;case ds:return p.key===b?c(y,h,p,v):null;case Xn:return b=p._init,g(y,h,b(p._payload),v)}if(gi(p)||oi(p))return b!==null?null:f(y,h,p,v,null);Ro(y,p)}return null}function w(y,h,p,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return y=y.get(p)||null,l(h,y,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case yo:return y=y.get(v.key===null?p:v.key)||null,u(h,y,v,b);case ds:return y=y.get(v.key===null?p:v.key)||null,c(h,y,v,b);case Xn:var R=v._init;return w(y,h,p,R(v._payload),b)}if(gi(v)||oi(v))return y=y.get(p)||null,f(h,y,v,b,null);Ro(h,v)}return null}function k(y,h,p,v){for(var b=null,R=null,M=h,E=h=0,T=null;M!==null&&E<p.length;E++){M.index>E?(T=M,M=null):T=M.sibling;var C=g(y,M,p[E],v);if(C===null){M===null&&(M=T);break}e&&M&&C.alternate===null&&t(y,M),h=i(C,h,E),R===null?b=C:R.sibling=C,R=C,M=T}if(E===p.length)return n(y,M),Ie&&Mr(y,E),b;if(M===null){for(;E<p.length;E++)M=m(y,p[E],v),M!==null&&(h=i(M,h,E),R===null?b=M:R.sibling=M,R=M);return Ie&&Mr(y,E),b}for(M=r(y,M);E<p.length;E++)T=w(M,y,E,p[E],v),T!==null&&(e&&T.alternate!==null&&M.delete(T.key===null?E:T.key),h=i(T,h,E),R===null?b=T:R.sibling=T,R=T);return e&&M.forEach(function(P){return t(y,P)}),Ie&&Mr(y,E),b}function N(y,h,p,v){var b=oi(p);if(typeof b!="function")throw Error($(150));if(p=b.call(p),p==null)throw Error($(151));for(var R=b=null,M=h,E=h=0,T=null,C=p.next();M!==null&&!C.done;E++,C=p.next()){M.index>E?(T=M,M=null):T=M.sibling;var P=g(y,M,C.value,v);if(P===null){M===null&&(M=T);break}e&&M&&P.alternate===null&&t(y,M),h=i(P,h,E),R===null?b=P:R.sibling=P,R=P,M=T}if(C.done)return n(y,M),Ie&&Mr(y,E),b;if(M===null){for(;!C.done;E++,C=p.next())C=m(y,C.value,v),C!==null&&(h=i(C,h,E),R===null?b=C:R.sibling=C,R=C);return Ie&&Mr(y,E),b}for(M=r(y,M);!C.done;E++,C=p.next())C=w(M,y,E,C.value,v),C!==null&&(e&&C.alternate!==null&&M.delete(C.key===null?E:C.key),h=i(C,h,E),R===null?b=C:R.sibling=C,R=C);return e&&M.forEach(function(W){return t(y,W)}),Ie&&Mr(y,E),b}function L(y,h,p,v){if(typeof p=="object"&&p!==null&&p.type===fs&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case yo:e:{for(var b=p.key,R=h;R!==null;){if(R.key===b){if(b=p.type,b===fs){if(R.tag===7){n(y,R.sibling),h=s(R,p.props.children),h.return=y,y=h;break e}}else if(R.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Xn&&Hf(b)===R.type){n(y,R.sibling),h=s(R,p.props),h.ref=di(y,R,p),h.return=y,y=h;break e}n(y,R);break}else t(y,R);R=R.sibling}p.type===fs?(h=Kr(p.props.children,y.mode,v,p.key),h.return=y,y=h):(v=Go(p.type,p.key,p.props,null,y.mode,v),v.ref=di(y,h,p),v.return=y,y=v)}return o(y);case ds:e:{for(R=p.key;h!==null;){if(h.key===R)if(h.tag===4&&h.stateNode.containerInfo===p.containerInfo&&h.stateNode.implementation===p.implementation){n(y,h.sibling),h=s(h,p.children||[]),h.return=y,y=h;break e}else{n(y,h);break}else t(y,h);h=h.sibling}h=Ya(p,y.mode,v),h.return=y,y=h}return o(y);case Xn:return R=p._init,L(y,h,R(p._payload),v)}if(gi(p))return k(y,h,p,v);if(oi(p))return N(y,h,p,v);Ro(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,h!==null&&h.tag===6?(n(y,h.sibling),h=s(h,p),h.return=y,y=h):(n(y,h),h=qa(p,y.mode,v),h.return=y,y=h),o(y)):n(y,h)}return L}var Ks=qp(!0),Yp=qp(!1),yl=br(null),xl=null,ws=null,Xc=null;function Jc(){Xc=ws=xl=null}function Zc(e){var t=yl.current;Pe(yl),e._currentValue=t}function Fu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function js(e,t){xl=e,Xc=ws=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(jt=!0),e.firstContext=null)}function Yt(e){var t=e._currentValue;if(Xc!==e)if(e={context:e,memoizedValue:t,next:null},ws===null){if(xl===null)throw Error($(308));ws=e,xl.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var Tr=null;function ed(e){Tr===null?Tr=[e]:Tr.push(e)}function Gp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ed(t)):(n.next=s.next,s.next=n),t.interleaved=n,$n(e,r)}function $n(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Jn=!1;function td(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,$n(e,n)}return s=r.interleaved,s===null?(t.next=t,ed(r)):(t.next=s.next,s.next=t),r.interleaved=t,$n(e,n)}function Ho(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$c(e,n)}}function Vf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function wl(e,t,n,r){var s=e.updateQueue;Jn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=c=u=null,l=i;do{var g=l.lane,w=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=e,N=l;switch(g=t,w=n,N.tag){case 1:if(k=N.payload,typeof k=="function"){m=k.call(w,m,g);break e}m=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=N.payload,g=typeof k=="function"?k.call(w,m,g):k,g==null)break e;m=ze({},m,g);break e;case 2:Jn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else w={eventTime:w,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=w,u=m):f=f.next=w,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Xr|=o,e.lanes=o,e.memoizedState=m}}function Qf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var lo={},xn=br(lo),Bi=br(lo),Wi=br(lo);function _r(e){if(e===lo)throw Error($(174));return e}function nd(e,t){switch(Le(Wi,t),Le(Bi,e),Le(xn,lo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pu(t,e)}Pe(xn),Le(xn,t)}function qs(){Pe(xn),Pe(Bi),Pe(Wi)}function Jp(e){_r(Wi.current);var t=_r(xn.current),n=pu(t,e.type);t!==n&&(Le(Bi,e),Le(xn,n))}function rd(e){Bi.current===e&&(Pe(xn),Pe(Bi))}var Oe=br(0);function Sl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ba=[];function sd(){for(var e=0;e<Ba.length;e++)Ba[e]._workInProgressVersionPrimary=null;Ba.length=0}var Vo=Bn.ReactCurrentDispatcher,Wa=Bn.ReactCurrentBatchConfig,Gr=0,De=null,Ge=null,et=null,kl=!1,Ni=!1,Hi=0,Cx=0;function ct(){throw Error($(321))}function id(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cn(e[n],t[n]))return!1;return!0}function od(e,t,n,r,s,i){if(Gr=i,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vo.current=e===null||e.memoizedState===null?jx:Mx,e=n(r,s),Ni){i=0;do{if(Ni=!1,Hi=0,25<=i)throw Error($(301));i+=1,et=Ge=null,t.updateQueue=null,Vo.current=Rx,e=n(r,s)}while(Ni)}if(Vo.current=Cl,t=Ge!==null&&Ge.next!==null,Gr=0,et=Ge=De=null,kl=!1,t)throw Error($(300));return e}function ld(){var e=Hi!==0;return Hi=0,e}function hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?De.memoizedState=et=e:et=et.next=e,et}function Gt(){if(Ge===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var t=et===null?De.memoizedState:et.next;if(t!==null)et=t,Ge=e;else{if(e===null)throw Error($(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},et===null?De.memoizedState=et=e:et=et.next=e}return et}function Vi(e,t){return typeof t=="function"?t(e):t}function Ha(e){var t=Gt(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=Ge,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,c=i;do{var f=c.lane;if((Gr&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var m={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,De.lanes|=f,Xr|=f}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=l,cn(r,t.memoizedState)||(jt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,De.lanes|=i,Xr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Va(e){var t=Gt(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);cn(i,t.memoizedState)||(jt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Zp(){}function eg(e,t){var n=De,r=Gt(),s=t(),i=!cn(r.memoizedState,s);if(i&&(r.memoizedState=s,jt=!0),r=r.queue,ad(rg.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,Qi(9,ng.bind(null,n,r,s,t),void 0,null),tt===null)throw Error($(349));Gr&30||tg(n,t,s)}return s}function tg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ng(e,t,n,r){t.value=n,t.getSnapshot=r,sg(t)&&ig(e)}function rg(e,t,n){return n(function(){sg(t)&&ig(e)})}function sg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cn(e,n)}catch{return!0}}function ig(e){var t=$n(e,1);t!==null&&un(t,e,1,-1)}function Kf(e){var t=hn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:e},t.queue=e,e=e.dispatch=Nx.bind(null,De,e),[t.memoizedState,e]}function Qi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function og(){return Gt().memoizedState}function Qo(e,t,n,r){var s=hn();De.flags|=e,s.memoizedState=Qi(1|t,n,void 0,r===void 0?null:r)}function Wl(e,t,n,r){var s=Gt();r=r===void 0?null:r;var i=void 0;if(Ge!==null){var o=Ge.memoizedState;if(i=o.destroy,r!==null&&id(r,o.deps)){s.memoizedState=Qi(t,n,i,r);return}}De.flags|=e,s.memoizedState=Qi(1|t,n,i,r)}function qf(e,t){return Qo(8390656,8,e,t)}function ad(e,t){return Wl(2048,8,e,t)}function lg(e,t){return Wl(4,2,e,t)}function ag(e,t){return Wl(4,4,e,t)}function ug(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cg(e,t,n){return n=n!=null?n.concat([e]):null,Wl(4,4,ug.bind(null,t,e),n)}function ud(){}function dg(e,t){var n=Gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&id(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function fg(e,t){var n=Gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&id(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function hg(e,t,n){return Gr&21?(cn(n,t)||(n=yp(),De.lanes|=n,Xr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,jt=!0),e.memoizedState=n)}function bx(e,t){var n=je;je=n!==0&&4>n?n:4,e(!0);var r=Wa.transition;Wa.transition={};try{e(!1),t()}finally{je=n,Wa.transition=r}}function mg(){return Gt().memoizedState}function Ex(e,t,n){var r=yr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pg(e))gg(t,n);else if(n=Gp(e,t,n,r),n!==null){var s=xt();un(n,e,r,s),vg(n,t,r)}}function Nx(e,t,n){var r=yr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pg(e))gg(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,cn(l,o)){var u=t.interleaved;u===null?(s.next=s,ed(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=Gp(e,t,s,r),n!==null&&(s=xt(),un(n,e,r,s),vg(n,t,r))}}function pg(e){var t=e.alternate;return e===De||t!==null&&t===De}function gg(e,t){Ni=kl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function vg(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$c(e,n)}}var Cl={readContext:Yt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},jx={readContext:Yt,useCallback:function(e,t){return hn().memoizedState=[e,t===void 0?null:t],e},useContext:Yt,useEffect:qf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Qo(4194308,4,ug.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qo(4,2,e,t)},useMemo:function(e,t){var n=hn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=hn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ex.bind(null,De,e),[r.memoizedState,e]},useRef:function(e){var t=hn();return e={current:e},t.memoizedState=e},useState:Kf,useDebugValue:ud,useDeferredValue:function(e){return hn().memoizedState=e},useTransition:function(){var e=Kf(!1),t=e[0];return e=bx.bind(null,e[1]),hn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=De,s=hn();if(Ie){if(n===void 0)throw Error($(407));n=n()}else{if(n=t(),tt===null)throw Error($(349));Gr&30||tg(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,qf(rg.bind(null,r,i,e),[e]),r.flags|=2048,Qi(9,ng.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=hn(),t=tt.identifierPrefix;if(Ie){var n=In,r=Pn;n=(r&~(1<<32-an(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Hi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Cx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Mx={readContext:Yt,useCallback:dg,useContext:Yt,useEffect:ad,useImperativeHandle:cg,useInsertionEffect:lg,useLayoutEffect:ag,useMemo:fg,useReducer:Ha,useRef:og,useState:function(){return Ha(Vi)},useDebugValue:ud,useDeferredValue:function(e){var t=Gt();return hg(t,Ge.memoizedState,e)},useTransition:function(){var e=Ha(Vi)[0],t=Gt().memoizedState;return[e,t]},useMutableSource:Zp,useSyncExternalStore:eg,useId:mg,unstable_isNewReconciler:!1},Rx={readContext:Yt,useCallback:dg,useContext:Yt,useEffect:ad,useImperativeHandle:cg,useInsertionEffect:lg,useLayoutEffect:ag,useMemo:fg,useReducer:Va,useRef:og,useState:function(){return Va(Vi)},useDebugValue:ud,useDeferredValue:function(e){var t=Gt();return Ge===null?t.memoizedState=e:hg(t,Ge.memoizedState,e)},useTransition:function(){var e=Va(Vi)[0],t=Gt().memoizedState;return[e,t]},useMutableSource:Zp,useSyncExternalStore:eg,useId:mg,unstable_isNewReconciler:!1};function en(e,t){if(e&&e.defaultProps){t=ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ou(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Hl={isMounted:function(e){return(e=e._reactInternals)?ns(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xt(),s=yr(e),i=Fn(r,s);i.payload=t,n!=null&&(i.callback=n),t=gr(e,i,s),t!==null&&(un(t,e,s,r),Ho(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xt(),s=yr(e),i=Fn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=gr(e,i,s),t!==null&&(un(t,e,s,r),Ho(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xt(),r=yr(e),s=Fn(n,r);s.tag=2,t!=null&&(s.callback=t),t=gr(e,s,r),t!==null&&(un(t,e,r,n),Ho(t,e,r))}};function Yf(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!zi(n,r)||!zi(s,i):!0}function yg(e,t,n){var r=!1,s=kr,i=t.contextType;return typeof i=="object"&&i!==null?i=Yt(i):(s=Rt(t)?qr:ht.current,r=t.contextTypes,i=(r=r!=null)?Vs(e,s):kr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Gf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Hl.enqueueReplaceState(t,t.state,null)}function Du(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},td(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Yt(i):(i=Rt(t)?qr:ht.current,s.context=Vs(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ou(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Hl.enqueueReplaceState(s,s.state,null),wl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ys(e,t){try{var n="",r=t;do n+=r0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Qa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function zu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Lx=typeof WeakMap=="function"?WeakMap:Map;function xg(e,t,n){n=Fn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){El||(El=!0,qu=r),zu(e,t)},n}function wg(e,t,n){n=Fn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){zu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){zu(e,t),typeof r!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Xf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Lx;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Hx.bind(null,e,t,n),t.then(e,e))}function Jf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zf(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Fn(-1,1),t.tag=2,gr(n,t,1))),n.lanes|=1),e)}var Tx=Bn.ReactCurrentOwner,jt=!1;function vt(e,t,n,r){t.child=e===null?Yp(t,null,n,r):Ks(t,e.child,n,r)}function eh(e,t,n,r,s){n=n.render;var i=t.ref;return js(t,s),r=od(e,t,n,r,i,s),n=ld(),e!==null&&!jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Un(e,t,s)):(Ie&&n&&qc(t),t.flags|=1,vt(e,t,r,s),t.child)}function th(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!vd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Sg(e,t,i,r,s)):(e=Go(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:zi,n(o,r)&&e.ref===t.ref)return Un(e,t,s)}return t.flags|=1,e=xr(i,r),e.ref=t.ref,e.return=t,t.child=e}function Sg(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(zi(i,r)&&e.ref===t.ref)if(jt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(jt=!0);else return t.lanes=e.lanes,Un(e,t,s)}return Au(e,t,n,r,s)}function kg(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(ks,It),It|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Le(ks,It),It|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Le(ks,It),It|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Le(ks,It),It|=r;return vt(e,t,s,n),t.child}function Cg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Au(e,t,n,r,s){var i=Rt(n)?qr:ht.current;return i=Vs(t,i),js(t,s),n=od(e,t,n,r,i,s),r=ld(),e!==null&&!jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Un(e,t,s)):(Ie&&r&&qc(t),t.flags|=1,vt(e,t,n,s),t.child)}function nh(e,t,n,r,s){if(Rt(n)){var i=!0;pl(t)}else i=!1;if(js(t,s),t.stateNode===null)Ko(e,t),yg(t,n,r),Du(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Yt(c):(c=Rt(n)?qr:ht.current,c=Vs(t,c));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&Gf(t,o,r,c),Jn=!1;var g=t.memoizedState;o.state=g,wl(t,r,o,s),u=t.memoizedState,l!==r||g!==u||Mt.current||Jn?(typeof f=="function"&&(Ou(t,n,f,r),u=t.memoizedState),(l=Jn||Yf(t,n,l,r,g,u,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Xp(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:en(t.type,l),o.props=c,m=t.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Yt(u):(u=Rt(n)?qr:ht.current,u=Vs(t,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Gf(t,o,r,u),Jn=!1,g=t.memoizedState,o.state=g,wl(t,r,o,s);var k=t.memoizedState;l!==m||g!==k||Mt.current||Jn?(typeof w=="function"&&(Ou(t,n,w,r),k=t.memoizedState),(c=Jn||Yf(t,n,c,r,g,k,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),o.props=r,o.state=k,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return $u(e,t,n,r,i,s)}function $u(e,t,n,r,s,i){Cg(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Uf(t,n,!1),Un(e,t,i);r=t.stateNode,Tx.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ks(t,e.child,null,i),t.child=Ks(t,null,l,i)):vt(e,t,l,i),t.memoizedState=r.state,s&&Uf(t,n,!0),t.child}function bg(e){var t=e.stateNode;t.pendingContext?$f(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$f(e,t.context,!1),nd(e,t.containerInfo)}function rh(e,t,n,r,s){return Qs(),Gc(s),t.flags|=256,vt(e,t,n,r),t.child}var Uu={dehydrated:null,treeContext:null,retryLane:0};function Bu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Eg(e,t,n){var r=t.pendingProps,s=Oe.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Le(Oe,s&1),e===null)return Iu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Kl(o,r,0,null),e=Kr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Bu(n),t.memoizedState=Uu,e):cd(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return _x(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=xr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=xr(l,i):(i=Kr(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Bu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Uu,r}return i=e.child,e=i.sibling,r=xr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function cd(e,t){return t=Kl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Lo(e,t,n,r){return r!==null&&Gc(r),Ks(t,e.child,null,n),e=cd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _x(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Qa(Error($(422))),Lo(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Kl({mode:"visible",children:r.children},s,0,null),i=Kr(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ks(t,e.child,null,o),t.child.memoizedState=Bu(o),t.memoizedState=Uu,i);if(!(t.mode&1))return Lo(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=Qa(i,r,void 0),Lo(e,t,o,r)}if(l=(o&e.childLanes)!==0,jt||l){if(r=tt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$n(e,s),un(r,e,s,-1))}return gd(),r=Qa(Error($(421))),Lo(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Vx.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ft=pr(s.nextSibling),Ot=t,Ie=!0,on=null,e!==null&&(Ht[Vt++]=Pn,Ht[Vt++]=In,Ht[Vt++]=Yr,Pn=e.id,In=e.overflow,Yr=t),t=cd(t,r.children),t.flags|=4096,t)}function sh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Fu(e.return,t,n)}function Ka(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ng(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(vt(e,t,r.children,n),r=Oe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sh(e,n,t);else if(e.tag===19)sh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Le(Oe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Sl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ka(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Sl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ka(t,!0,n,null,i);break;case"together":Ka(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ko(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Un(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Xr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,n=xr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=xr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Px(e,t,n){switch(t.tag){case 3:bg(t),Qs();break;case 5:Jp(t);break;case 1:Rt(t.type)&&pl(t);break;case 4:nd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Le(yl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Le(Oe,Oe.current&1),t.flags|=128,null):n&t.child.childLanes?Eg(e,t,n):(Le(Oe,Oe.current&1),e=Un(e,t,n),e!==null?e.sibling:null);Le(Oe,Oe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Ng(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Le(Oe,Oe.current),r)break;return null;case 22:case 23:return t.lanes=0,kg(e,t,n)}return Un(e,t,n)}var jg,Wu,Mg,Rg;jg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wu=function(){};Mg=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,_r(xn.current);var i=null;switch(n){case"input":s=du(e,s),r=du(e,r),i=[];break;case"select":s=ze({},s,{value:void 0}),r=ze({},r,{value:void 0}),i=[];break;case"textarea":s=mu(e,s),r=mu(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=hl)}gu(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ti.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ti.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&_e("scroll",e),i||l===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Rg=function(e,t,n,r){n!==r&&(t.flags|=4)};function fi(e,t){if(!Ie)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ix(e,t,n){var r=t.pendingProps;switch(Yc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return Rt(t.type)&&ml(),dt(t),null;case 3:return r=t.stateNode,qs(),Pe(Mt),Pe(ht),sd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Mo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,on!==null&&(Xu(on),on=null))),Wu(e,t),dt(t),null;case 5:rd(t);var s=_r(Wi.current);if(n=t.type,e!==null&&t.stateNode!=null)Mg(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error($(166));return dt(t),null}if(e=_r(xn.current),Mo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[vn]=t,r[Ui]=i,e=(t.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<yi.length;s++)_e(yi[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":hf(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":pf(r,i),_e("invalid",r)}gu(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&jo(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&jo(r.textContent,l,e),s=["children",""+l]):Ti.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":xo(r),mf(r,i,!0);break;case"textarea":xo(r),gf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=hl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=rp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[vn]=t,e[Ui]=r,jg(e,t,!1,!1),t.stateNode=e;e:{switch(o=vu(n,r),n){case"dialog":_e("cancel",e),_e("close",e),s=r;break;case"iframe":case"object":case"embed":_e("load",e),s=r;break;case"video":case"audio":for(s=0;s<yi.length;s++)_e(yi[s],e);s=r;break;case"source":_e("error",e),s=r;break;case"img":case"image":case"link":_e("error",e),_e("load",e),s=r;break;case"details":_e("toggle",e),s=r;break;case"input":hf(e,r),s=du(e,r),_e("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ze({},r,{value:void 0}),_e("invalid",e);break;case"textarea":pf(e,r),s=mu(e,r),_e("invalid",e);break;default:s=r}gu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?op(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&sp(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&_i(e,u):typeof u=="number"&&_i(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ti.hasOwnProperty(i)?u!=null&&i==="onScroll"&&_e("scroll",e):u!=null&&Ic(e,i,u,o))}switch(n){case"input":xo(e),mf(e,r,!1);break;case"textarea":xo(e),gf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Sr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Cs(e,!!r.multiple,i,!1):r.defaultValue!=null&&Cs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=hl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dt(t),null;case 6:if(e&&t.stateNode!=null)Rg(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error($(166));if(n=_r(Wi.current),_r(xn.current),Mo(t)){if(r=t.stateNode,n=t.memoizedProps,r[vn]=t,(i=r.nodeValue!==n)&&(e=Ot,e!==null))switch(e.tag){case 3:jo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&jo(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vn]=t,t.stateNode=r}return dt(t),null;case 13:if(Pe(Oe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ie&&Ft!==null&&t.mode&1&&!(t.flags&128))Kp(),Qs(),t.flags|=98560,i=!1;else if(i=Mo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error($(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[vn]=t}else Qs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dt(t),i=!1}else on!==null&&(Xu(on),on=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Oe.current&1?Je===0&&(Je=3):gd())),t.updateQueue!==null&&(t.flags|=4),dt(t),null);case 4:return qs(),Wu(e,t),e===null&&Ai(t.stateNode.containerInfo),dt(t),null;case 10:return Zc(t.type._context),dt(t),null;case 17:return Rt(t.type)&&ml(),dt(t),null;case 19:if(Pe(Oe),i=t.memoizedState,i===null)return dt(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)fi(i,!1);else{if(Je!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Sl(e),o!==null){for(t.flags|=128,fi(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Le(Oe,Oe.current&1|2),t.child}e=e.sibling}i.tail!==null&&We()>Gs&&(t.flags|=128,r=!0,fi(i,!1),t.lanes=4194304)}else{if(!r)if(e=Sl(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),fi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ie)return dt(t),null}else 2*We()-i.renderingStartTime>Gs&&n!==1073741824&&(t.flags|=128,r=!0,fi(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=We(),t.sibling=null,n=Oe.current,Le(Oe,r?n&1|2:n&1),t):(dt(t),null);case 22:case 23:return pd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?It&1073741824&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function Fx(e,t){switch(Yc(t),t.tag){case 1:return Rt(t.type)&&ml(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qs(),Pe(Mt),Pe(ht),sd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return rd(t),null;case 13:if(Pe(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));Qs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe(Oe),null;case 4:return qs(),null;case 10:return Zc(t.type._context),null;case 22:case 23:return pd(),null;case 24:return null;default:return null}}var To=!1,ft=!1,Ox=typeof WeakSet=="function"?WeakSet:Set,J=null;function Ss(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(e,t,r)}else n.current=null}function Hu(e,t,n){try{n()}catch(r){$e(e,t,r)}}var ih=!1;function Dx(e,t){if(ju=cl,e=Ip(),Kc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,m=e,g=null;t:for(;;){for(var w;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(w=m.firstChild)!==null;)g=m,m=w;for(;;){if(m===e)break t;if(g===n&&++c===s&&(l=o),g===i&&++f===r&&(u=o),(w=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mu={focusedElem:e,selectionRange:n},cl=!1,J=t;J!==null;)if(t=J,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,J=e;else for(;J!==null;){t=J;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var N=k.memoizedProps,L=k.memoizedState,y=t.stateNode,h=y.getSnapshotBeforeUpdate(t.elementType===t.type?N:en(t.type,N),L);y.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(v){$e(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}return k=ih,ih=!1,k}function ji(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Hu(t,n,i)}s=s.next}while(s!==r)}}function Vl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Vu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Lg(e){var t=e.alternate;t!==null&&(e.alternate=null,Lg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vn],delete t[Ui],delete t[Tu],delete t[xx],delete t[wx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tg(e){return e.tag===5||e.tag===3||e.tag===4}function oh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=hl));else if(r!==4&&(e=e.child,e!==null))for(Qu(e,t,n),e=e.sibling;e!==null;)Qu(e,t,n),e=e.sibling}function Ku(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ku(e,t,n),e=e.sibling;e!==null;)Ku(e,t,n),e=e.sibling}var st=null,sn=!1;function qn(e,t,n){for(n=n.child;n!==null;)_g(e,t,n),n=n.sibling}function _g(e,t,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Dl,n)}catch{}switch(n.tag){case 5:ft||Ss(n,t);case 6:var r=st,s=sn;st=null,qn(e,t,n),st=r,sn=s,st!==null&&(sn?(e=st,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(sn?(e=st,n=n.stateNode,e.nodeType===8?$a(e.parentNode,n):e.nodeType===1&&$a(e,n),Oi(e)):$a(st,n.stateNode));break;case 4:r=st,s=sn,st=n.stateNode.containerInfo,sn=!0,qn(e,t,n),st=r,sn=s;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Hu(n,t,o),s=s.next}while(s!==r)}qn(e,t,n);break;case 1:if(!ft&&(Ss(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){$e(n,t,l)}qn(e,t,n);break;case 21:qn(e,t,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,qn(e,t,n),ft=r):qn(e,t,n);break;default:qn(e,t,n)}}function lh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ox),t.forEach(function(r){var s=Qx.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:st=l.stateNode,sn=!1;break e;case 3:st=l.stateNode.containerInfo,sn=!0;break e;case 4:st=l.stateNode.containerInfo,sn=!0;break e}l=l.return}if(st===null)throw Error($(160));_g(i,o,s),st=null,sn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){$e(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Pg(t,e),t=t.sibling}function Pg(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jt(t,e),fn(e),r&4){try{ji(3,e,e.return),Vl(3,e)}catch(N){$e(e,e.return,N)}try{ji(5,e,e.return)}catch(N){$e(e,e.return,N)}}break;case 1:Jt(t,e),fn(e),r&512&&n!==null&&Ss(n,n.return);break;case 5:if(Jt(t,e),fn(e),r&512&&n!==null&&Ss(n,n.return),e.flags&32){var s=e.stateNode;try{_i(s,"")}catch(N){$e(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&tp(s,i),vu(l,o);var c=vu(l,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?op(s,m):f==="dangerouslySetInnerHTML"?sp(s,m):f==="children"?_i(s,m):Ic(s,f,m,c)}switch(l){case"input":fu(s,i);break;case"textarea":np(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Cs(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?Cs(s,!!i.multiple,i.defaultValue,!0):Cs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ui]=i}catch(N){$e(e,e.return,N)}}break;case 6:if(Jt(t,e),fn(e),r&4){if(e.stateNode===null)throw Error($(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(N){$e(e,e.return,N)}}break;case 3:if(Jt(t,e),fn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Oi(t.containerInfo)}catch(N){$e(e,e.return,N)}break;case 4:Jt(t,e),fn(e);break;case 13:Jt(t,e),fn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hd=We())),r&4&&lh(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(ft=(c=ft)||f,Jt(t,e),ft=c):Jt(t,e),fn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(J=e,f=e.child;f!==null;){for(m=J=f;J!==null;){switch(g=J,w=g.child,g.tag){case 0:case 11:case 14:case 15:ji(4,g,g.return);break;case 1:Ss(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(N){$e(r,n,N)}}break;case 5:Ss(g,g.return);break;case 22:if(g.memoizedState!==null){uh(m);continue}}w!==null?(w.return=g,J=w):uh(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=ip("display",o))}catch(N){$e(e,e.return,N)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(N){$e(e,e.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Jt(t,e),fn(e),r&4&&lh(e);break;case 21:break;default:Jt(t,e),fn(e)}}function fn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Tg(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(_i(s,""),r.flags&=-33);var i=oh(e);Ku(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=oh(e);Qu(e,l,o);break;default:throw Error($(161))}}catch(u){$e(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zx(e,t,n){J=e,Ig(e)}function Ig(e,t,n){for(var r=(e.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||To;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ft;l=To;var c=ft;if(To=o,(ft=u)&&!c)for(J=s;J!==null;)o=J,u=o.child,o.tag===22&&o.memoizedState!==null?ch(s):u!==null?(u.return=o,J=u):ch(s);for(;i!==null;)J=i,Ig(i),i=i.sibling;J=s,To=l,ft=c}ah(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):ah(e)}}function ah(e){for(;J!==null;){var t=J;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ft||Vl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ft)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Qf(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Qf(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Oi(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}ft||t.flags&512&&Vu(t)}catch(g){$e(t,t.return,g)}}if(t===e){J=null;break}if(n=t.sibling,n!==null){n.return=t.return,J=n;break}J=t.return}}function uh(e){for(;J!==null;){var t=J;if(t===e){J=null;break}var n=t.sibling;if(n!==null){n.return=t.return,J=n;break}J=t.return}}function ch(e){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Vl(4,t)}catch(u){$e(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){$e(t,s,u)}}var i=t.return;try{Vu(t)}catch(u){$e(t,i,u)}break;case 5:var o=t.return;try{Vu(t)}catch(u){$e(t,o,u)}}}catch(u){$e(t,t.return,u)}if(t===e){J=null;break}var l=t.sibling;if(l!==null){l.return=t.return,J=l;break}J=t.return}}var Ax=Math.ceil,bl=Bn.ReactCurrentDispatcher,dd=Bn.ReactCurrentOwner,qt=Bn.ReactCurrentBatchConfig,Ce=0,tt=null,Ke=null,it=0,It=0,ks=br(0),Je=0,Ki=null,Xr=0,Ql=0,fd=0,Mi=null,Nt=null,hd=0,Gs=1/0,jn=null,El=!1,qu=null,vr=null,_o=!1,dr=null,Nl=0,Ri=0,Yu=null,qo=-1,Yo=0;function xt(){return Ce&6?We():qo!==-1?qo:qo=We()}function yr(e){return e.mode&1?Ce&2&&it!==0?it&-it:kx.transition!==null?(Yo===0&&(Yo=yp()),Yo):(e=je,e!==0||(e=window.event,e=e===void 0?16:Ep(e.type)),e):1}function un(e,t,n,r){if(50<Ri)throw Ri=0,Yu=null,Error($(185));so(e,n,r),(!(Ce&2)||e!==tt)&&(e===tt&&(!(Ce&2)&&(Ql|=n),Je===4&&er(e,it)),Lt(e,r),n===1&&Ce===0&&!(t.mode&1)&&(Gs=We()+500,Bl&&Er()))}function Lt(e,t){var n=e.callbackNode;k0(e,t);var r=ul(e,e===tt?it:0);if(r===0)n!==null&&xf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&xf(n),t===1)e.tag===0?Sx(dh.bind(null,e)):Hp(dh.bind(null,e)),vx(function(){!(Ce&6)&&Er()}),n=null;else{switch(xp(r)){case 1:n=Ac;break;case 4:n=gp;break;case 16:n=al;break;case 536870912:n=vp;break;default:n=al}n=Bg(n,Fg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Fg(e,t){if(qo=-1,Yo=0,Ce&6)throw Error($(327));var n=e.callbackNode;if(Ms()&&e.callbackNode!==n)return null;var r=ul(e,e===tt?it:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=jl(e,r);else{t=r;var s=Ce;Ce|=2;var i=Dg();(tt!==e||it!==t)&&(jn=null,Gs=We()+500,Qr(e,t));do try{Bx();break}catch(l){Og(e,l)}while(!0);Jc(),bl.current=i,Ce=s,Ke!==null?t=0:(tt=null,it=0,t=Je)}if(t!==0){if(t===2&&(s=ku(e),s!==0&&(r=s,t=Gu(e,s))),t===1)throw n=Ki,Qr(e,0),er(e,r),Lt(e,We()),n;if(t===6)er(e,r);else{if(s=e.current.alternate,!(r&30)&&!$x(s)&&(t=jl(e,r),t===2&&(i=ku(e),i!==0&&(r=i,t=Gu(e,i))),t===1))throw n=Ki,Qr(e,0),er(e,r),Lt(e,We()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error($(345));case 2:Rr(e,Nt,jn);break;case 3:if(er(e,r),(r&130023424)===r&&(t=hd+500-We(),10<t)){if(ul(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){xt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Lu(Rr.bind(null,e,Nt,jn),t);break}Rr(e,Nt,jn);break;case 4:if(er(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-an(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ax(r/1960))-r,10<r){e.timeoutHandle=Lu(Rr.bind(null,e,Nt,jn),r);break}Rr(e,Nt,jn);break;case 5:Rr(e,Nt,jn);break;default:throw Error($(329))}}}return Lt(e,We()),e.callbackNode===n?Fg.bind(null,e):null}function Gu(e,t){var n=Mi;return e.current.memoizedState.isDehydrated&&(Qr(e,t).flags|=256),e=jl(e,t),e!==2&&(t=Nt,Nt=n,t!==null&&Xu(t)),e}function Xu(e){Nt===null?Nt=e:Nt.push.apply(Nt,e)}function $x(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!cn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function er(e,t){for(t&=~fd,t&=~Ql,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-an(t),r=1<<n;e[n]=-1,t&=~r}}function dh(e){if(Ce&6)throw Error($(327));Ms();var t=ul(e,0);if(!(t&1))return Lt(e,We()),null;var n=jl(e,t);if(e.tag!==0&&n===2){var r=ku(e);r!==0&&(t=r,n=Gu(e,r))}if(n===1)throw n=Ki,Qr(e,0),er(e,t),Lt(e,We()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rr(e,Nt,jn),Lt(e,We()),null}function md(e,t){var n=Ce;Ce|=1;try{return e(t)}finally{Ce=n,Ce===0&&(Gs=We()+500,Bl&&Er())}}function Jr(e){dr!==null&&dr.tag===0&&!(Ce&6)&&Ms();var t=Ce;Ce|=1;var n=qt.transition,r=je;try{if(qt.transition=null,je=1,e)return e()}finally{je=r,qt.transition=n,Ce=t,!(Ce&6)&&Er()}}function pd(){It=ks.current,Pe(ks)}function Qr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,gx(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(Yc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ml();break;case 3:qs(),Pe(Mt),Pe(ht),sd();break;case 5:rd(r);break;case 4:qs();break;case 13:Pe(Oe);break;case 19:Pe(Oe);break;case 10:Zc(r.type._context);break;case 22:case 23:pd()}n=n.return}if(tt=e,Ke=e=xr(e.current,null),it=It=t,Je=0,Ki=null,fd=Ql=Xr=0,Nt=Mi=null,Tr!==null){for(t=0;t<Tr.length;t++)if(n=Tr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Tr=null}return e}function Og(e,t){do{var n=Ke;try{if(Jc(),Vo.current=Cl,kl){for(var r=De.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}kl=!1}if(Gr=0,et=Ge=De=null,Ni=!1,Hi=0,dd.current=null,n===null||n.return===null){Je=1,Ki=t,Ke=null;break}e:{var i=e,o=n.return,l=n,u=t;if(t=it,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=Jf(o);if(w!==null){w.flags&=-257,Zf(w,o,l,i,t),w.mode&1&&Xf(i,c,t),t=w,u=c;var k=t.updateQueue;if(k===null){var N=new Set;N.add(u),t.updateQueue=N}else k.add(u);break e}else{if(!(t&1)){Xf(i,c,t),gd();break e}u=Error($(426))}}else if(Ie&&l.mode&1){var L=Jf(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),Zf(L,o,l,i,t),Gc(Ys(u,l));break e}}i=u=Ys(u,l),Je!==4&&(Je=2),Mi===null?Mi=[i]:Mi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=xg(i,u,t);Vf(i,y);break e;case 1:l=u;var h=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof h.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(vr===null||!vr.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var v=wg(i,l,t);Vf(i,v);break e}}i=i.return}while(i!==null)}Ag(n)}catch(b){t=b,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function Dg(){var e=bl.current;return bl.current=Cl,e===null?Cl:e}function gd(){(Je===0||Je===3||Je===2)&&(Je=4),tt===null||!(Xr&268435455)&&!(Ql&268435455)||er(tt,it)}function jl(e,t){var n=Ce;Ce|=2;var r=Dg();(tt!==e||it!==t)&&(jn=null,Qr(e,t));do try{Ux();break}catch(s){Og(e,s)}while(!0);if(Jc(),Ce=n,bl.current=r,Ke!==null)throw Error($(261));return tt=null,it=0,Je}function Ux(){for(;Ke!==null;)zg(Ke)}function Bx(){for(;Ke!==null&&!h0();)zg(Ke)}function zg(e){var t=Ug(e.alternate,e,It);e.memoizedProps=e.pendingProps,t===null?Ag(e):Ke=t,dd.current=null}function Ag(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Fx(n,t),n!==null){n.flags&=32767,Ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,Ke=null;return}}else if(n=Ix(n,t,It),n!==null){Ke=n;return}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);Je===0&&(Je=5)}function Rr(e,t,n){var r=je,s=qt.transition;try{qt.transition=null,je=1,Wx(e,t,n,r)}finally{qt.transition=s,je=r}return null}function Wx(e,t,n,r){do Ms();while(dr!==null);if(Ce&6)throw Error($(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(C0(e,i),e===tt&&(Ke=tt=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_o||(_o=!0,Bg(al,function(){return Ms(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=qt.transition,qt.transition=null;var o=je;je=1;var l=Ce;Ce|=4,dd.current=null,Dx(e,n),Pg(n,e),ux(Mu),cl=!!ju,Mu=ju=null,e.current=n,zx(n),m0(),Ce=l,je=o,qt.transition=i}else e.current=n;if(_o&&(_o=!1,dr=e,Nl=s),i=e.pendingLanes,i===0&&(vr=null),v0(n.stateNode),Lt(e,We()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(El)throw El=!1,e=qu,qu=null,e;return Nl&1&&e.tag!==0&&Ms(),i=e.pendingLanes,i&1?e===Yu?Ri++:(Ri=0,Yu=e):Ri=0,Er(),null}function Ms(){if(dr!==null){var e=xp(Nl),t=qt.transition,n=je;try{if(qt.transition=null,je=16>e?16:e,dr===null)var r=!1;else{if(e=dr,dr=null,Nl=0,Ce&6)throw Error($(331));var s=Ce;for(Ce|=4,J=e.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(J=c;J!==null;){var f=J;switch(f.tag){case 0:case 11:case 15:ji(8,f,i)}var m=f.child;if(m!==null)m.return=f,J=m;else for(;J!==null;){f=J;var g=f.sibling,w=f.return;if(Lg(f),f===c){J=null;break}if(g!==null){g.return=w,J=g;break}J=w}}}var k=i.alternate;if(k!==null){var N=k.child;if(N!==null){k.child=null;do{var L=N.sibling;N.sibling=null,N=L}while(N!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ji(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,J=y;break e}J=i.return}}var h=e.current;for(J=h;J!==null;){o=J;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,J=p;else e:for(o=h;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Vl(9,l)}}catch(b){$e(l,l.return,b)}if(l===o){J=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,J=v;break e}J=l.return}}if(Ce=s,Er(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Dl,e)}catch{}r=!0}return r}finally{je=n,qt.transition=t}}return!1}function fh(e,t,n){t=Ys(n,t),t=xg(e,t,1),e=gr(e,t,1),t=xt(),e!==null&&(so(e,1,t),Lt(e,t))}function $e(e,t,n){if(e.tag===3)fh(e,e,n);else for(;t!==null;){if(t.tag===3){fh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vr===null||!vr.has(r))){e=Ys(n,e),e=wg(t,e,1),t=gr(t,e,1),e=xt(),t!==null&&(so(t,1,e),Lt(t,e));break}}t=t.return}}function Hx(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=xt(),e.pingedLanes|=e.suspendedLanes&n,tt===e&&(it&n)===n&&(Je===4||Je===3&&(it&130023424)===it&&500>We()-hd?Qr(e,0):fd|=n),Lt(e,t)}function $g(e,t){t===0&&(e.mode&1?(t=ko,ko<<=1,!(ko&130023424)&&(ko=4194304)):t=1);var n=xt();e=$n(e,t),e!==null&&(so(e,t,n),Lt(e,n))}function Vx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),$g(e,n)}function Qx(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(t),$g(e,n)}var Ug;Ug=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mt.current)jt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return jt=!1,Px(e,t,n);jt=!!(e.flags&131072)}else jt=!1,Ie&&t.flags&1048576&&Vp(t,vl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ko(e,t),e=t.pendingProps;var s=Vs(t,ht.current);js(t,n),s=od(null,t,r,e,s,n);var i=ld();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rt(r)?(i=!0,pl(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,td(t),s.updater=Hl,t.stateNode=s,s._reactInternals=t,Du(t,r,e,n),t=$u(null,t,r,!0,i,n)):(t.tag=0,Ie&&i&&qc(t),vt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ko(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=qx(r),e=en(r,e),s){case 0:t=Au(null,t,r,e,n);break e;case 1:t=nh(null,t,r,e,n);break e;case 11:t=eh(null,t,r,e,n);break e;case 14:t=th(null,t,r,en(r.type,e),n);break e}throw Error($(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:en(r,s),Au(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:en(r,s),nh(e,t,r,s,n);case 3:e:{if(bg(t),e===null)throw Error($(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Xp(e,t),wl(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ys(Error($(423)),t),t=rh(e,t,r,n,s);break e}else if(r!==s){s=Ys(Error($(424)),t),t=rh(e,t,r,n,s);break e}else for(Ft=pr(t.stateNode.containerInfo.firstChild),Ot=t,Ie=!0,on=null,n=Yp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qs(),r===s){t=Un(e,t,n);break e}vt(e,t,r,n)}t=t.child}return t;case 5:return Jp(t),e===null&&Iu(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ru(r,s)?o=null:i!==null&&Ru(r,i)&&(t.flags|=32),Cg(e,t),vt(e,t,o,n),t.child;case 6:return e===null&&Iu(t),null;case 13:return Eg(e,t,n);case 4:return nd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ks(t,null,r,n):vt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:en(r,s),eh(e,t,r,s,n);case 7:return vt(e,t,t.pendingProps,n),t.child;case 8:return vt(e,t,t.pendingProps.children,n),t.child;case 12:return vt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Le(yl,r._currentValue),r._currentValue=o,i!==null)if(cn(i.value,o)){if(i.children===s.children&&!Mt.current){t=Un(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Fn(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Fu(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Fu(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,js(t,n),s=Yt(s),r=r(s),t.flags|=1,vt(e,t,r,n),t.child;case 14:return r=t.type,s=en(r,t.pendingProps),s=en(r.type,s),th(e,t,r,s,n);case 15:return Sg(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:en(r,s),Ko(e,t),t.tag=1,Rt(r)?(e=!0,pl(t)):e=!1,js(t,n),yg(t,r,s),Du(t,r,s,n),$u(null,t,r,!0,e,n);case 19:return Ng(e,t,n);case 22:return kg(e,t,n)}throw Error($(156,t.tag))};function Bg(e,t){return pp(e,t)}function Kx(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(e,t,n,r){return new Kx(e,t,n,r)}function vd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qx(e){if(typeof e=="function")return vd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Oc)return 11;if(e===Dc)return 14}return 2}function xr(e,t){var n=e.alternate;return n===null?(n=Kt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Go(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")vd(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case fs:return Kr(n.children,s,i,t);case Fc:o=8,s|=8;break;case lu:return e=Kt(12,n,t,s|2),e.elementType=lu,e.lanes=i,e;case au:return e=Kt(13,n,t,s),e.elementType=au,e.lanes=i,e;case uu:return e=Kt(19,n,t,s),e.elementType=uu,e.lanes=i,e;case Jm:return Kl(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Gm:o=10;break e;case Xm:o=9;break e;case Oc:o=11;break e;case Dc:o=14;break e;case Xn:o=16,r=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=Kt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Kr(e,t,n,r){return e=Kt(7,e,r,t),e.lanes=n,e}function Kl(e,t,n,r){return e=Kt(22,e,r,t),e.elementType=Jm,e.lanes=n,e.stateNode={isHidden:!1},e}function qa(e,t,n){return e=Kt(6,e,null,t),e.lanes=n,e}function Ya(e,t,n){return t=Kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yx(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ra(0),this.expirationTimes=Ra(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ra(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yd(e,t,n,r,s,i,o,l,u){return e=new Yx(e,t,n,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Kt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},td(i),e}function Gx(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ds,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Wg(e){if(!e)return kr;e=e._reactInternals;e:{if(ns(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(Rt(n))return Wp(e,n,t)}return t}function Hg(e,t,n,r,s,i,o,l,u){return e=yd(n,r,!0,e,s,i,o,l,u),e.context=Wg(null),n=e.current,r=xt(),s=yr(n),i=Fn(r,s),i.callback=t??null,gr(n,i,s),e.current.lanes=s,so(e,s,r),Lt(e,r),e}function ql(e,t,n,r){var s=t.current,i=xt(),o=yr(s);return n=Wg(n),t.context===null?t.context=n:t.pendingContext=n,t=Fn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=gr(s,t,o),e!==null&&(un(e,s,o,i),Ho(e,s,o)),o}function Ml(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function xd(e,t){hh(e,t),(e=e.alternate)&&hh(e,t)}function Xx(){return null}var Vg=typeof reportError=="function"?reportError:function(e){console.error(e)};function wd(e){this._internalRoot=e}Yl.prototype.render=wd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));ql(e,t,null,null)};Yl.prototype.unmount=wd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jr(function(){ql(null,e,null,null)}),t[An]=null}};function Yl(e){this._internalRoot=e}Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=kp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Zn.length&&t!==0&&t<Zn[n].priority;n++);Zn.splice(n,0,e),n===0&&bp(e)}};function Sd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mh(){}function Jx(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Ml(o);i.call(c)}}var o=Hg(t,r,e,0,null,!1,!1,"",mh);return e._reactRootContainer=o,e[An]=o.current,Ai(e.nodeType===8?e.parentNode:e),Jr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=Ml(u);l.call(c)}}var u=yd(e,0,!1,null,null,!1,!1,"",mh);return e._reactRootContainer=u,e[An]=u.current,Ai(e.nodeType===8?e.parentNode:e),Jr(function(){ql(t,u,n,r)}),u}function Xl(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Ml(o);l.call(u)}}ql(t,o,e,s)}else o=Jx(n,t,e,s,r);return Ml(o)}wp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=vi(t.pendingLanes);n!==0&&($c(t,n|1),Lt(t,We()),!(Ce&6)&&(Gs=We()+500,Er()))}break;case 13:Jr(function(){var r=$n(e,1);if(r!==null){var s=xt();un(r,e,1,s)}}),xd(e,1)}};Uc=function(e){if(e.tag===13){var t=$n(e,134217728);if(t!==null){var n=xt();un(t,e,134217728,n)}xd(e,134217728)}};Sp=function(e){if(e.tag===13){var t=yr(e),n=$n(e,t);if(n!==null){var r=xt();un(n,e,t,r)}xd(e,t)}};kp=function(){return je};Cp=function(e,t){var n=je;try{return je=e,t()}finally{je=n}};xu=function(e,t,n){switch(t){case"input":if(fu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Ul(r);if(!s)throw Error($(90));ep(r),fu(r,s)}}}break;case"textarea":np(e,n);break;case"select":t=n.value,t!=null&&Cs(e,!!n.multiple,t,!1)}};up=md;cp=Jr;var Zx={usingClientEntryPoint:!1,Events:[oo,gs,Ul,lp,ap,md]},hi={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ew={bundleType:hi.bundleType,version:hi.version,rendererPackageName:hi.rendererPackageName,rendererConfig:hi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hp(e),e===null?null:e.stateNode},findFiberByHostInstance:hi.findFiberByHostInstance||Xx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Po=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Po.isDisabled&&Po.supportsFiber)try{Dl=Po.inject(ew),yn=Po}catch{}}zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zx;zt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sd(t))throw Error($(200));return Gx(e,t,null,n)};zt.createRoot=function(e,t){if(!Sd(e))throw Error($(299));var n=!1,r="",s=Vg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=yd(e,1,!1,null,null,n,!1,r,s),e[An]=t.current,Ai(e.nodeType===8?e.parentNode:e),new wd(t)};zt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=hp(t),e=e===null?null:e.stateNode,e};zt.flushSync=function(e){return Jr(e)};zt.hydrate=function(e,t,n){if(!Gl(t))throw Error($(200));return Xl(null,e,t,!0,n)};zt.hydrateRoot=function(e,t,n){if(!Sd(e))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Vg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Hg(t,null,e,1,n??null,s,!1,i,o),e[An]=t.current,Ai(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Yl(t)};zt.render=function(e,t,n){if(!Gl(t))throw Error($(200));return Xl(null,e,t,!1,n)};zt.unmountComponentAtNode=function(e){if(!Gl(e))throw Error($(40));return e._reactRootContainer?(Jr(function(){Xl(null,null,e,!1,function(){e._reactRootContainer=null,e[An]=null})}),!0):!1};zt.unstable_batchedUpdates=md;zt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Gl(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return Xl(e,t,n,!1,r)};zt.version="18.3.1-next-f1338f8080-20240426";function Qg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qg)}catch(e){console.error(e)}}Qg(),Qm.exports=zt;var kd=Qm.exports,Kg,ph=kd;Kg=ph.createRoot,ph.hydrateRoot;var ei=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},tw={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},tr,jc,bm,nw=(bm=class{constructor(){re(this,tr,tw);re(this,jc,!1)}setTimeoutProvider(e){K(this,tr,e)}setTimeout(e,t){return S(this,tr).setTimeout(e,t)}clearTimeout(e){S(this,tr).clearTimeout(e)}setInterval(e,t){return S(this,tr).setInterval(e,t)}clearInterval(e){S(this,tr).clearInterval(e)}},tr=new WeakMap,jc=new WeakMap,bm),Pr=new nw;function rw(e){setTimeout(e,0)}var Zr=typeof window>"u"||"Deno"in globalThis;function yt(){}function sw(e,t){return typeof e=="function"?e(t):e}function Ju(e){return typeof e=="number"&&e>=0&&e!==1/0}function qg(e,t){return Math.max(e+(t||0)-Date.now(),0)}function wr(e,t){return typeof e=="function"?e(t):e}function Wt(e,t){return typeof e=="function"?e(t):e}function gh(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==Cd(o,t.options))return!1}else if(!qi(t.queryKey,o))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function vh(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(es(t.options.mutationKey)!==es(i))return!1}else if(!qi(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Cd(e,t){return((t==null?void 0:t.queryKeyHashFn)||es)(e)}function es(e){return JSON.stringify(e,(t,n)=>Zu(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function qi(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>qi(e[n],t[n])):!1}var iw=Object.prototype.hasOwnProperty;function Yg(e,t){if(e===t)return e;const n=yh(e)&&yh(t);if(!n&&!(Zu(e)&&Zu(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let u=0;for(let c=0;c<o;c++){const f=n?c:i[c],m=e[f],g=t[f];if(m===g){l[f]=m,(n?c<s:iw.call(e,f))&&u++;continue}if(m===null||g===null||typeof m!="object"||typeof g!="object"){l[f]=g;continue}const w=Yg(m,g);l[f]=w,w===m&&u++}return s===o&&u===s?e:l}function Rl(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function yh(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Zu(e){if(!xh(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!xh(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function xh(e){return Object.prototype.toString.call(e)==="[object Object]"}function ow(e){return new Promise(t=>{Pr.setTimeout(t,e)})}function ec(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Yg(e,t):t}function lw(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function aw(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var bd=Symbol();function Gg(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===bd?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Xg(e,t){return typeof e=="function"?e(...t):!!e}function uw(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var Dr,nr,_s,Em,cw=(Em=class extends ei{constructor(){super();re(this,Dr);re(this,nr);re(this,_s);K(this,_s,t=>{if(!Zr&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){S(this,nr)||this.setEventListener(S(this,_s))}onUnsubscribe(){var t;this.hasListeners()||((t=S(this,nr))==null||t.call(this),K(this,nr,void 0))}setEventListener(t){var n;K(this,_s,t),(n=S(this,nr))==null||n.call(this),K(this,nr,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){S(this,Dr)!==t&&(K(this,Dr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof S(this,Dr)=="boolean"?S(this,Dr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Dr=new WeakMap,nr=new WeakMap,_s=new WeakMap,Em),Ed=new cw;function tc(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var dw=rw;function fw(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=dw;const i=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;t++;try{u=l()}finally{t--,t||o()}return u},batchCalls:l=>(...u)=>{i(()=>{l(...u)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Xe=fw(),Ps,rr,Is,Nm,hw=(Nm=class extends ei{constructor(){super();re(this,Ps,!0);re(this,rr);re(this,Is);K(this,Is,t=>{if(!Zr&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){S(this,rr)||this.setEventListener(S(this,Is))}onUnsubscribe(){var t;this.hasListeners()||((t=S(this,rr))==null||t.call(this),K(this,rr,void 0))}setEventListener(t){var n;K(this,Is,t),(n=S(this,rr))==null||n.call(this),K(this,rr,t(this.setOnline.bind(this)))}setOnline(t){S(this,Ps)!==t&&(K(this,Ps,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return S(this,Ps)}},Ps=new WeakMap,rr=new WeakMap,Is=new WeakMap,Nm),Ll=new hw;function mw(e){return Math.min(1e3*2**e,3e4)}function Jg(e){return(e??"online")==="online"?Ll.isOnline():!0}var nc=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Zg(e){let t=!1,n=0,r;const s=tc(),i=()=>s.status!=="pending",o=N=>{var L;if(!i()){const y=new nc(N);g(y),(L=e.onCancel)==null||L.call(e,y)}},l=()=>{t=!0},u=()=>{t=!1},c=()=>Ed.isFocused()&&(e.networkMode==="always"||Ll.isOnline())&&e.canRun(),f=()=>Jg(e.networkMode)&&e.canRun(),m=N=>{i()||(r==null||r(),s.resolve(N))},g=N=>{i()||(r==null||r(),s.reject(N))},w=()=>new Promise(N=>{var L;r=y=>{(i()||c())&&N(y)},(L=e.onPause)==null||L.call(e)}).then(()=>{var N;r=void 0,i()||(N=e.onContinue)==null||N.call(e)}),k=()=>{if(i())return;let N;const L=n===0?e.initialPromise:void 0;try{N=L??e.fn()}catch(y){N=Promise.reject(y)}Promise.resolve(N).then(m).catch(y=>{var R;if(i())return;const h=e.retry??(Zr?0:3),p=e.retryDelay??mw,v=typeof p=="function"?p(n,y):p,b=h===!0||typeof h=="number"&&n<h||typeof h=="function"&&h(n,y);if(t||!b){g(y);return}n++,(R=e.onFail)==null||R.call(e,n,y),ow(v).then(()=>c()?void 0:w()).then(()=>{t?g(y):k()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:u,canStart:f,start:()=>(f()?k():w().then(k),s)}}var zr,jm,ev=(jm=class{constructor(){re(this,zr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ju(this.gcTime)&&K(this,zr,Pr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Zr?1/0:5*60*1e3))}clearGcTimeout(){S(this,zr)&&(Pr.clearTimeout(S(this,zr)),K(this,zr,void 0))}},zr=new WeakMap,jm),Ar,Fs,Bt,$r,Ze,Ji,Ur,nn,Nn,Mm,pw=(Mm=class extends ev{constructor(t){super();re(this,nn);re(this,Ar);re(this,Fs);re(this,Bt);re(this,$r);re(this,Ze);re(this,Ji);re(this,Ur);K(this,Ur,!1),K(this,Ji,t.defaultOptions),this.setOptions(t.options),this.observers=[],K(this,$r,t.client),K(this,Bt,S(this,$r).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,K(this,Ar,Sh(this.options)),this.state=t.state??S(this,Ar),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=S(this,Ze))==null?void 0:t.promise}setOptions(t){if(this.options={...S(this,Ji),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Sh(this.options);n.data!==void 0&&(this.setState(wh(n.data,n.dataUpdatedAt)),K(this,Ar,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&S(this,Bt).remove(this)}setData(t,n){const r=ec(this.state.data,t,this.options);return ye(this,nn,Nn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ye(this,nn,Nn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=S(this,Ze))==null?void 0:r.promise;return(s=S(this,Ze))==null||s.cancel(t),n?n.then(yt).catch(yt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(S(this,Ar))}isActive(){return this.observers.some(t=>Wt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===bd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>wr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!qg(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=S(this,Ze))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=S(this,Ze))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),S(this,Bt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(S(this,Ze)&&(S(this,Ur)?S(this,Ze).cancel({revert:!0}):S(this,Ze).cancelRetry()),this.scheduleGc()),S(this,Bt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ye(this,nn,Nn).call(this,{type:"invalidate"})}async fetch(t,n){var u,c,f,m,g,w,k,N,L,y,h,p;if(this.state.fetchStatus!=="idle"&&((u=S(this,Ze))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(S(this,Ze))return S(this,Ze).continueRetry(),S(this,Ze).promise}if(t&&this.setOptions(t),!this.options.queryFn){const v=this.observers.find(b=>b.options.queryFn);v&&this.setOptions(v.options)}const r=new AbortController,s=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(K(this,Ur,!0),r.signal)})},i=()=>{const v=Gg(this.options,n),R=(()=>{const M={client:S(this,$r),queryKey:this.queryKey,meta:this.meta};return s(M),M})();return K(this,Ur,!1),this.options.persister?this.options.persister(v,R,this):v(R)},l=(()=>{const v={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:S(this,$r),state:this.state,fetchFn:i};return s(v),v})();(c=this.options.behavior)==null||c.onFetch(l,this),K(this,Fs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&ye(this,nn,Nn).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),K(this,Ze,Zg({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:v=>{v instanceof nc&&v.revert&&this.setState({...S(this,Fs),fetchStatus:"idle"}),r.abort()},onFail:(v,b)=>{ye(this,nn,Nn).call(this,{type:"failed",failureCount:v,error:b})},onPause:()=>{ye(this,nn,Nn).call(this,{type:"pause"})},onContinue:()=>{ye(this,nn,Nn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const v=await S(this,Ze).start();if(v===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(v),(w=(g=S(this,Bt).config).onSuccess)==null||w.call(g,v,this),(N=(k=S(this,Bt).config).onSettled)==null||N.call(k,v,this.state.error,this),v}catch(v){if(v instanceof nc){if(v.silent)return S(this,Ze).promise;if(v.revert){if(this.state.data===void 0)throw v;return this.state.data}}throw ye(this,nn,Nn).call(this,{type:"error",error:v}),(y=(L=S(this,Bt).config).onError)==null||y.call(L,v,this),(p=(h=S(this,Bt).config).onSettled)==null||p.call(h,this.state.data,v,this),v}finally{this.scheduleGc()}}},Ar=new WeakMap,Fs=new WeakMap,Bt=new WeakMap,$r=new WeakMap,Ze=new WeakMap,Ji=new WeakMap,Ur=new WeakMap,nn=new WeakSet,Nn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...tv(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...wh(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return K(this,Fs,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Xe.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),S(this,Bt).notify({query:this,type:"updated",action:t})})},Mm);function tv(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Jg(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function wh(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Sh(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var bt,Se,Zi,pt,Br,Os,Rn,sr,eo,Ds,zs,Wr,Hr,ir,As,Ee,xi,rc,sc,ic,oc,lc,ac,uc,nv,Rm,gw=(Rm=class extends ei{constructor(t,n){super();re(this,Ee);re(this,bt);re(this,Se);re(this,Zi);re(this,pt);re(this,Br);re(this,Os);re(this,Rn);re(this,sr);re(this,eo);re(this,Ds);re(this,zs);re(this,Wr);re(this,Hr);re(this,ir);re(this,As,new Set);this.options=n,K(this,bt,t),K(this,sr,null),K(this,Rn,tc()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(S(this,Se).addObserver(this),kh(S(this,Se),this.options)?ye(this,Ee,xi).call(this):this.updateResult(),ye(this,Ee,oc).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return cc(S(this,Se),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return cc(S(this,Se),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ye(this,Ee,lc).call(this),ye(this,Ee,ac).call(this),S(this,Se).removeObserver(this)}setOptions(t){const n=this.options,r=S(this,Se);if(this.options=S(this,bt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Wt(this.options.enabled,S(this,Se))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ye(this,Ee,uc).call(this),S(this,Se).setOptions(this.options),n._defaulted&&!Rl(this.options,n)&&S(this,bt).getQueryCache().notify({type:"observerOptionsUpdated",query:S(this,Se),observer:this});const s=this.hasListeners();s&&Ch(S(this,Se),r,this.options,n)&&ye(this,Ee,xi).call(this),this.updateResult(),s&&(S(this,Se)!==r||Wt(this.options.enabled,S(this,Se))!==Wt(n.enabled,S(this,Se))||wr(this.options.staleTime,S(this,Se))!==wr(n.staleTime,S(this,Se)))&&ye(this,Ee,rc).call(this);const i=ye(this,Ee,sc).call(this);s&&(S(this,Se)!==r||Wt(this.options.enabled,S(this,Se))!==Wt(n.enabled,S(this,Se))||i!==S(this,ir))&&ye(this,Ee,ic).call(this,i)}getOptimisticResult(t){const n=S(this,bt).getQueryCache().build(S(this,bt),t),r=this.createResult(n,t);return yw(this,r)&&(K(this,pt,r),K(this,Os,this.options),K(this,Br,S(this,Se).state)),r}getCurrentResult(){return S(this,pt)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&S(this,Rn).status==="pending"&&S(this,Rn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){S(this,As).add(t)}getCurrentQuery(){return S(this,Se)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=S(this,bt).defaultQueryOptions(t),r=S(this,bt).getQueryCache().build(S(this,bt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ye(this,Ee,xi).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),S(this,pt)))}createResult(t,n){var T;const r=S(this,Se),s=this.options,i=S(this,pt),o=S(this,Br),l=S(this,Os),c=t!==r?t.state:S(this,Zi),{state:f}=t;let m={...f},g=!1,w;if(n._optimisticResults){const C=this.hasListeners(),P=!C&&kh(t,n),W=C&&Ch(t,r,n,s);(P||W)&&(m={...m,...tv(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:k,errorUpdatedAt:N,status:L}=m;w=m.data;let y=!1;if(n.placeholderData!==void 0&&w===void 0&&L==="pending"){let C;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(C=i.data,y=!0):C=typeof n.placeholderData=="function"?n.placeholderData((T=S(this,zs))==null?void 0:T.state.data,S(this,zs)):n.placeholderData,C!==void 0&&(L="success",w=ec(i==null?void 0:i.data,C,n),g=!0)}if(n.select&&w!==void 0&&!y)if(i&&w===(o==null?void 0:o.data)&&n.select===S(this,eo))w=S(this,Ds);else try{K(this,eo,n.select),w=n.select(w),w=ec(i==null?void 0:i.data,w,n),K(this,Ds,w),K(this,sr,null)}catch(C){K(this,sr,C)}S(this,sr)&&(k=S(this,sr),w=S(this,Ds),N=Date.now(),L="error");const h=m.fetchStatus==="fetching",p=L==="pending",v=L==="error",b=p&&h,R=w!==void 0,E={status:L,fetchStatus:m.fetchStatus,isPending:p,isSuccess:L==="success",isError:v,isInitialLoading:b,isLoading:b,data:w,dataUpdatedAt:m.dataUpdatedAt,error:k,errorUpdatedAt:N,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>c.dataUpdateCount||m.errorUpdateCount>c.errorUpdateCount,isFetching:h,isRefetching:h&&!p,isLoadingError:v&&!R,isPaused:m.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:v&&R,isStale:Nd(t,n),refetch:this.refetch,promise:S(this,Rn),isEnabled:Wt(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const C=D=>{E.status==="error"?D.reject(E.error):E.data!==void 0&&D.resolve(E.data)},P=()=>{const D=K(this,Rn,E.promise=tc());C(D)},W=S(this,Rn);switch(W.status){case"pending":t.queryHash===r.queryHash&&C(W);break;case"fulfilled":(E.status==="error"||E.data!==W.value)&&P();break;case"rejected":(E.status!=="error"||E.error!==W.reason)&&P();break}}return E}updateResult(){const t=S(this,pt),n=this.createResult(S(this,Se),this.options);if(K(this,Br,S(this,Se).state),K(this,Os,this.options),S(this,Br).data!==void 0&&K(this,zs,S(this,Se)),Rl(n,t))return;K(this,pt,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!S(this,As).size)return!0;const o=new Set(i??S(this,As));return this.options.throwOnError&&o.add("error"),Object.keys(S(this,pt)).some(l=>{const u=l;return S(this,pt)[u]!==t[u]&&o.has(u)})};ye(this,Ee,nv).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ye(this,Ee,oc).call(this)}},bt=new WeakMap,Se=new WeakMap,Zi=new WeakMap,pt=new WeakMap,Br=new WeakMap,Os=new WeakMap,Rn=new WeakMap,sr=new WeakMap,eo=new WeakMap,Ds=new WeakMap,zs=new WeakMap,Wr=new WeakMap,Hr=new WeakMap,ir=new WeakMap,As=new WeakMap,Ee=new WeakSet,xi=function(t){ye(this,Ee,uc).call(this);let n=S(this,Se).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(yt)),n},rc=function(){ye(this,Ee,lc).call(this);const t=wr(this.options.staleTime,S(this,Se));if(Zr||S(this,pt).isStale||!Ju(t))return;const r=qg(S(this,pt).dataUpdatedAt,t)+1;K(this,Wr,Pr.setTimeout(()=>{S(this,pt).isStale||this.updateResult()},r))},sc=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(S(this,Se)):this.options.refetchInterval)??!1},ic=function(t){ye(this,Ee,ac).call(this),K(this,ir,t),!(Zr||Wt(this.options.enabled,S(this,Se))===!1||!Ju(S(this,ir))||S(this,ir)===0)&&K(this,Hr,Pr.setInterval(()=>{(this.options.refetchIntervalInBackground||Ed.isFocused())&&ye(this,Ee,xi).call(this)},S(this,ir)))},oc=function(){ye(this,Ee,rc).call(this),ye(this,Ee,ic).call(this,ye(this,Ee,sc).call(this))},lc=function(){S(this,Wr)&&(Pr.clearTimeout(S(this,Wr)),K(this,Wr,void 0))},ac=function(){S(this,Hr)&&(Pr.clearInterval(S(this,Hr)),K(this,Hr,void 0))},uc=function(){const t=S(this,bt).getQueryCache().build(S(this,bt),this.options);if(t===S(this,Se))return;const n=S(this,Se);K(this,Se,t),K(this,Zi,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},nv=function(t){Xe.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(S(this,pt))}),S(this,bt).getQueryCache().notify({query:S(this,Se),type:"observerResultsUpdated"})})},Rm);function vw(e,t){return Wt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function kh(e,t){return vw(e,t)||e.state.data!==void 0&&cc(e,t,t.refetchOnMount)}function cc(e,t,n){if(Wt(t.enabled,e)!==!1&&wr(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Nd(e,t)}return!1}function Ch(e,t,n,r){return(e!==t||Wt(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Nd(e,n)}function Nd(e,t){return Wt(t.enabled,e)!==!1&&e.isStaleByTime(wr(t.staleTime,e))}function yw(e,t){return!Rl(e.getCurrentResult(),t)}function bh(e){return{onFetch:(t,n)=>{var f,m,g,w,k;const r=t.options,s=(g=(m=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:m.fetchMore)==null?void 0:g.direction,i=((w=t.state.data)==null?void 0:w.pages)||[],o=((k=t.state.data)==null?void 0:k.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const c=async()=>{let N=!1;const L=p=>{uw(p,()=>t.signal,()=>N=!0)},y=Gg(t.options,t.fetchOptions),h=async(p,v,b)=>{if(N)return Promise.reject();if(v==null&&p.pages.length)return Promise.resolve(p);const M=(()=>{const P={client:t.client,queryKey:t.queryKey,pageParam:v,direction:b?"backward":"forward",meta:t.options.meta};return L(P),P})(),E=await y(M),{maxPages:T}=t.options,C=b?aw:lw;return{pages:C(p.pages,E,T),pageParams:C(p.pageParams,v,T)}};if(s&&i.length){const p=s==="backward",v=p?xw:Eh,b={pages:i,pageParams:o},R=v(r,b);l=await h(b,R,p)}else{const p=e??i.length;do{const v=u===0?o[0]??r.initialPageParam:Eh(r,l);if(u>0&&v==null)break;l=await h(l,v),u++}while(u<p)}return l};t.options.persister?t.fetchFn=()=>{var N,L;return(L=(N=t.options).persister)==null?void 0:L.call(N,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function Eh(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function xw(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var to,mn,gt,Vr,pn,Gn,Lm,ww=(Lm=class extends ev{constructor(t){super();re(this,pn);re(this,to);re(this,mn);re(this,gt);re(this,Vr);K(this,to,t.client),this.mutationId=t.mutationId,K(this,gt,t.mutationCache),K(this,mn,[]),this.state=t.state||rv(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){S(this,mn).includes(t)||(S(this,mn).push(t),this.clearGcTimeout(),S(this,gt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){K(this,mn,S(this,mn).filter(n=>n!==t)),this.scheduleGc(),S(this,gt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){S(this,mn).length||(this.state.status==="pending"?this.scheduleGc():S(this,gt).remove(this))}continue(){var t;return((t=S(this,Vr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,u,c,f,m,g,w,k,N,L,y,h,p,v,b,R,M,E,T;const n=()=>{ye(this,pn,Gn).call(this,{type:"continue"})},r={client:S(this,to),meta:this.options.meta,mutationKey:this.options.mutationKey};K(this,Vr,Zg({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(C,P)=>{ye(this,pn,Gn).call(this,{type:"failed",failureCount:C,error:P})},onPause:()=>{ye(this,pn,Gn).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>S(this,gt).canRun(this)}));const s=this.state.status==="pending",i=!S(this,Vr).canStart();try{if(s)n();else{ye(this,pn,Gn).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=S(this,gt).config).onMutate)==null?void 0:l.call(o,t,this,r));const P=await((c=(u=this.options).onMutate)==null?void 0:c.call(u,t,r));P!==this.state.context&&ye(this,pn,Gn).call(this,{type:"pending",context:P,variables:t,isPaused:i})}const C=await S(this,Vr).start();return await((m=(f=S(this,gt).config).onSuccess)==null?void 0:m.call(f,C,t,this.state.context,this,r)),await((w=(g=this.options).onSuccess)==null?void 0:w.call(g,C,t,this.state.context,r)),await((N=(k=S(this,gt).config).onSettled)==null?void 0:N.call(k,C,null,this.state.variables,this.state.context,this,r)),await((y=(L=this.options).onSettled)==null?void 0:y.call(L,C,null,t,this.state.context,r)),ye(this,pn,Gn).call(this,{type:"success",data:C}),C}catch(C){try{await((p=(h=S(this,gt).config).onError)==null?void 0:p.call(h,C,t,this.state.context,this,r))}catch(P){Promise.reject(P)}try{await((b=(v=this.options).onError)==null?void 0:b.call(v,C,t,this.state.context,r))}catch(P){Promise.reject(P)}try{await((M=(R=S(this,gt).config).onSettled)==null?void 0:M.call(R,void 0,C,this.state.variables,this.state.context,this,r))}catch(P){Promise.reject(P)}try{await((T=(E=this.options).onSettled)==null?void 0:T.call(E,void 0,C,t,this.state.context,r))}catch(P){Promise.reject(P)}throw ye(this,pn,Gn).call(this,{type:"error",error:C}),C}finally{S(this,gt).runNext(this)}}},to=new WeakMap,mn=new WeakMap,gt=new WeakMap,Vr=new WeakMap,pn=new WeakSet,Gn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Xe.batch(()=>{S(this,mn).forEach(r=>{r.onMutationUpdate(t)}),S(this,gt).notify({mutation:this,type:"updated",action:t})})},Lm);function rv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ln,rn,no,Tm,Sw=(Tm=class extends ei{constructor(t={}){super();re(this,Ln);re(this,rn);re(this,no);this.config=t,K(this,Ln,new Set),K(this,rn,new Map),K(this,no,0)}build(t,n,r){const s=new ww({client:t,mutationCache:this,mutationId:++go(this,no)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){S(this,Ln).add(t);const n=Io(t);if(typeof n=="string"){const r=S(this,rn).get(n);r?r.push(t):S(this,rn).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(S(this,Ln).delete(t)){const n=Io(t);if(typeof n=="string"){const r=S(this,rn).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&S(this,rn).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Io(t);if(typeof n=="string"){const r=S(this,rn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Io(t);if(typeof n=="string"){const s=(r=S(this,rn).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Xe.batch(()=>{S(this,Ln).forEach(t=>{this.notify({type:"removed",mutation:t})}),S(this,Ln).clear(),S(this,rn).clear()})}getAll(){return Array.from(S(this,Ln))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>vh(n,r))}findAll(t={}){return this.getAll().filter(n=>vh(t,n))}notify(t){Xe.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Xe.batch(()=>Promise.all(t.map(n=>n.continue().catch(yt))))}},Ln=new WeakMap,rn=new WeakMap,no=new WeakMap,Tm);function Io(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Tn,or,Et,_n,Dn,Xo,dc,_m,kw=(_m=class extends ei{constructor(n,r){super();re(this,Dn);re(this,Tn);re(this,or);re(this,Et);re(this,_n);K(this,Tn,n),this.setOptions(r),this.bindMethods(),ye(this,Dn,Xo).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=S(this,Tn).defaultMutationOptions(n),Rl(this.options,r)||S(this,Tn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:S(this,Et),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&es(r.mutationKey)!==es(this.options.mutationKey)?this.reset():((s=S(this,Et))==null?void 0:s.state.status)==="pending"&&S(this,Et).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=S(this,Et))==null||n.removeObserver(this)}onMutationUpdate(n){ye(this,Dn,Xo).call(this),ye(this,Dn,dc).call(this,n)}getCurrentResult(){return S(this,or)}reset(){var n;(n=S(this,Et))==null||n.removeObserver(this),K(this,Et,void 0),ye(this,Dn,Xo).call(this),ye(this,Dn,dc).call(this)}mutate(n,r){var s;return K(this,_n,r),(s=S(this,Et))==null||s.removeObserver(this),K(this,Et,S(this,Tn).getMutationCache().build(S(this,Tn),this.options)),S(this,Et).addObserver(this),S(this,Et).execute(n)}},Tn=new WeakMap,or=new WeakMap,Et=new WeakMap,_n=new WeakMap,Dn=new WeakSet,Xo=function(){var r;const n=((r=S(this,Et))==null?void 0:r.state)??rv();K(this,or,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},dc=function(n){Xe.batch(()=>{var r,s,i,o,l,u,c,f;if(S(this,_n)&&this.hasListeners()){const m=S(this,or).variables,g=S(this,or).context,w={client:S(this,Tn),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=S(this,_n)).onSuccess)==null||s.call(r,n.data,m,g,w)}catch(k){Promise.reject(k)}try{(o=(i=S(this,_n)).onSettled)==null||o.call(i,n.data,null,m,g,w)}catch(k){Promise.reject(k)}}else if((n==null?void 0:n.type)==="error"){try{(u=(l=S(this,_n)).onError)==null||u.call(l,n.error,m,g,w)}catch(k){Promise.reject(k)}try{(f=(c=S(this,_n)).onSettled)==null||f.call(c,void 0,n.error,m,g,w)}catch(k){Promise.reject(k)}}}this.listeners.forEach(m=>{m(S(this,or))})})},_m),gn,Pm,Cw=(Pm=class extends ei{constructor(t={}){super();re(this,gn);this.config=t,K(this,gn,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??Cd(s,n);let o=this.get(i);return o||(o=new pw({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){S(this,gn).has(t.queryHash)||(S(this,gn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=S(this,gn).get(t.queryHash);n&&(t.destroy(),n===t&&S(this,gn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Xe.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return S(this,gn).get(t)}getAll(){return[...S(this,gn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>gh(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>gh(t,r)):n}notify(t){Xe.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Xe.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Xe.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},gn=new WeakMap,Pm),Ae,lr,ar,$s,Us,ur,Bs,Ws,Im,bw=(Im=class{constructor(e={}){re(this,Ae);re(this,lr);re(this,ar);re(this,$s);re(this,Us);re(this,ur);re(this,Bs);re(this,Ws);K(this,Ae,e.queryCache||new Cw),K(this,lr,e.mutationCache||new Sw),K(this,ar,e.defaultOptions||{}),K(this,$s,new Map),K(this,Us,new Map),K(this,ur,0)}mount(){go(this,ur)._++,S(this,ur)===1&&(K(this,Bs,Ed.subscribe(async e=>{e&&(await this.resumePausedMutations(),S(this,Ae).onFocus())})),K(this,Ws,Ll.subscribe(async e=>{e&&(await this.resumePausedMutations(),S(this,Ae).onOnline())})))}unmount(){var e,t;go(this,ur)._--,S(this,ur)===0&&((e=S(this,Bs))==null||e.call(this),K(this,Bs,void 0),(t=S(this,Ws))==null||t.call(this),K(this,Ws,void 0))}isFetching(e){return S(this,Ae).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return S(this,lr).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=S(this,Ae).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=S(this,Ae).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(wr(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return S(this,Ae).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=S(this,Ae).get(r.queryHash),i=s==null?void 0:s.state.data,o=sw(t,i);if(o!==void 0)return S(this,Ae).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Xe.batch(()=>S(this,Ae).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=S(this,Ae).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=S(this,Ae);Xe.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=S(this,Ae);return Xe.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Xe.batch(()=>S(this,Ae).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(yt).catch(yt)}invalidateQueries(e,t={}){return Xe.batch(()=>(S(this,Ae).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Xe.batch(()=>S(this,Ae).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(yt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(yt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=S(this,Ae).build(this,t);return n.isStaleByTime(wr(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(yt).catch(yt)}fetchInfiniteQuery(e){return e.behavior=bh(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(yt).catch(yt)}ensureInfiniteQueryData(e){return e.behavior=bh(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ll.isOnline()?S(this,lr).resumePausedMutations():Promise.resolve()}getQueryCache(){return S(this,Ae)}getMutationCache(){return S(this,lr)}getDefaultOptions(){return S(this,ar)}setDefaultOptions(e){K(this,ar,e)}setQueryDefaults(e,t){S(this,$s).set(es(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...S(this,$s).values()],n={};return t.forEach(r=>{qi(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){S(this,Us).set(es(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...S(this,Us).values()],n={};return t.forEach(r=>{qi(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...S(this,ar).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Cd(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===bd&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...S(this,ar).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){S(this,Ae).clear(),S(this,lr).clear()}},Ae=new WeakMap,lr=new WeakMap,ar=new WeakMap,$s=new WeakMap,Us=new WeakMap,ur=new WeakMap,Bs=new WeakMap,Ws=new WeakMap,Im),sv=d.createContext(void 0),rs=e=>{const t=d.useContext(sv);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Ew=({client:e,children:t})=>(d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(sv.Provider,{value:e,children:t})),iv=d.createContext(!1),Nw=()=>d.useContext(iv);iv.Provider;function jw(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Mw=d.createContext(jw()),Rw=()=>d.useContext(Mw),Lw=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Tw=e=>{d.useEffect(()=>{e.clearReset()},[e])},_w=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||Xg(n,[e.error,r])),Pw=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Iw=(e,t)=>e.isLoading&&e.isFetching&&!t,Fw=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Nh=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Ow(e,t,n){var m,g,w,k,N;const r=Nw(),s=Rw(),i=rs(),o=i.defaultQueryOptions(e);(g=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||g.call(m,o),o._optimisticResults=r?"isRestoring":"optimistic",Pw(o),Lw(o,s),Tw(s);const l=!i.getQueryCache().get(o.queryHash),[u]=d.useState(()=>new t(i,o)),c=u.getOptimisticResult(o),f=!r&&e.subscribed!==!1;if(d.useSyncExternalStore(d.useCallback(L=>{const y=f?u.subscribe(Xe.batchCalls(L)):yt;return u.updateResult(),y},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),d.useEffect(()=>{u.setOptions(o)},[o,u]),Fw(o,c))throw Nh(o,u,s);if(_w({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((k=(w=i.getDefaultOptions().queries)==null?void 0:w._experimental_afterQuery)==null||k.call(w,o,c),o.experimental_prefetchInRender&&!Zr&&Iw(c,r)){const L=l?Nh(o,u,s):(N=i.getQueryCache().get(o.queryHash))==null?void 0:N.promise;L==null||L.catch(yt).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?c:u.trackResult(c)}function Jl(e,t){return Ow(e,gw)}function Dw(e,t){const n=rs(),[r]=d.useState(()=>new kw(n,e));d.useEffect(()=>{r.setOptions(e)},[r,e]);const s=d.useSyncExternalStore(d.useCallback(o=>r.subscribe(Xe.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=d.useCallback((o,l)=>{r.mutate(o,l).catch(yt)},[r]);if(s.error&&Xg(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function jh(e){return e.length>0&&"options"in e[0]}function fc({value:e,onChange:t,options:n,placeholder:r="Select...",trigger:s,triggerClassName:i="",panelClassName:o="",align:l="left",width:u="auto",showChevron:c=!0,title:f,disabled:m=!1,"aria-label":g}){var E;const[w,k]=d.useState(!1),N=d.useRef(null),L=d.useRef(null),h=d.useCallback(()=>{const T=C=>{const P=C.find(W=>W.value===e);return P?P.label:null};if(jh(n))for(const C of n){const P=T(C.options);if(P)return P}else{const C=T(n);if(C)return C}return r},[e,n,r])();d.useEffect(()=>{if(!w)return;const T=P=>{N.current&&!N.current.contains(P.target)&&k(!1)},C=P=>{var W;P.key==="Escape"&&(k(!1),(W=L.current)==null||W.focus())};return window.addEventListener("click",T),window.addEventListener("keydown",C),()=>{window.removeEventListener("click",T),window.removeEventListener("keydown",C)}},[w]);const p=T=>{var C;t(T),k(!1),(C=L.current)==null||C.focus()},v=T=>T.map(C=>a.jsxs("button",{className:"dropdown-item","data-active":C.value===e,disabled:C.disabled,onClick:()=>!C.disabled&&p(C.value),role:"menuitem",children:[C.icon&&a.jsx("span",{className:"shrink-0",children:C.icon}),a.jsx("span",{className:"flex-1 truncate",children:C.label}),C.value===e&&a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 text-accent",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})]},C.value)),b=((E=L.current)==null?void 0:E.offsetWidth)??0,R=u==="trigger"?b:u==="auto"?void 0:u,M={...R?{width:R,minWidth:R}:{},...l==="right"?{right:0}:{left:0}};return a.jsxs("div",{ref:N,className:"relative",children:[s?a.jsx("div",{onClick:()=>!m&&k(T=>!T),children:s}):a.jsxs("button",{ref:L,type:"button",className:`dropdown-trigger ${i}`,onClick:()=>k(T=>!T),disabled:m,title:f,"aria-label":g,"aria-haspopup":"listbox","aria-expanded":w,children:[a.jsx("span",{className:"truncate",children:h}),c&&a.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`shrink-0 opacity-60 transition-transform ${w?"rotate-180":""}`,children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),w&&a.jsx("div",{className:`dropdown-panel ${o}`,style:M,role:"listbox","aria-label":g,children:jh(n)?n.map((T,C)=>a.jsxs("div",{children:[T.label&&a.jsx("div",{className:"dropdown-label",children:T.label}),v(T.options),C<n.length-1&&a.jsx("div",{className:"dropdown-divider"})]},T.label||C)):v(n)})]})}const zw={offline:"sync-dot-offline",unstable:"sync-dot-unstable",recent:"sync-dot-recent",editing:"sync-dot-editing",live:"sync-dot-live"};function Aw({state:e,presence:t,syncLabel:n,connectionLabel:r,lastEditedLabel:s,hasEdits:i,recentTouches:o,isNarrow:l}){const[u,c]=d.useState(!1),[f,m]=d.useState(null),g=d.useRef(null),w=d.useRef(null),k=d.useRef(null),N=t?`${t.viewing} viewing  ${t.editing} editing`:"- viewing  - editing",L=t?String(t.viewing):"-",y=d.useCallback(()=>{k.current&&(window.clearTimeout(k.current),k.current=null)},[]),h=d.useCallback((v,b)=>{var R;b&&((R=navigator.clipboard)==null||R.writeText(b).then(()=>{m(v),y(),k.current=window.setTimeout(()=>{m(M=>M===v?null:M)},1e3)}).catch(()=>{}))},[y]),p=d.useCallback(()=>{c(!1),window.requestAnimationFrame(()=>{var v;return(v=w.current)==null?void 0:v.focus()})},[]);return d.useEffect(()=>{if(!u)return;const v=R=>{!g.current||g.current.contains(R.target)||p()},b=R=>{R.key==="Escape"&&p()};return window.addEventListener("mousedown",v),window.addEventListener("keydown",b),()=>{window.removeEventListener("mousedown",v),window.removeEventListener("keydown",b)}},[u,p]),d.useEffect(()=>()=>{y()},[y]),a.jsxs("div",{ref:g,className:"sync-indicator",children:[a.jsxs("button",{ref:w,type:"button",className:"sync-indicator-button",onClick:()=>u?p():c(!0),"aria-haspopup":"dialog","aria-expanded":u,"aria-label":"Sync status",title:N,children:[a.jsx("span",{className:`sync-indicator-dot ${zw[e]}`,"aria-hidden":"true"}),!l&&a.jsx("span",{className:"sync-indicator-count tabular-nums",children:L})]}),u&&a.jsxs("div",{role:"dialog","aria-label":"Sync status",className:"sync-indicator-card select-text",children:[a.jsx("div",{className:"sync-indicator-line sync-indicator-primary",children:n}),a.jsx("div",{className:"sync-indicator-line",children:r}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:N}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:i?`Last edited: ${s}`:"No edits yet."}),a.jsxs("div",{className:"sync-indicator-section",children:[a.jsx("div",{className:"sync-indicator-section-title",children:"Recently touched files"}),o.length>0?a.jsx("div",{className:"sync-indicator-list",children:o.map(v=>a.jsxs("div",{className:"sync-indicator-item",children:[a.jsx("button",{type:"button",className:"sync-indicator-item-name",title:`Copy filename: ${v.label}`,onClick:()=>h(v.path,v.label),children:v.label}),a.jsx("span",{className:"sync-indicator-item-time tabular-nums",children:f===v.path?"Copied":v.timeLabel})]},v.path))}):a.jsx("div",{className:"sync-indicator-empty",children:"No recent touches."})]})]})]})}function $w({rootRef:e,onSearch:t,viewerActive:n,onBack:r,zoomPercent:s,onZoomPercentChange:i,currentLabel:o,itemCount:l,totalCount:u,sortSpec:c,metricKeys:f,onSortChange:m,sortDisabled:g=!1,filterCount:w,onOpenFilters:k,starFilters:N,onToggleStar:L,onClearStars:y,onClearFilters:h,starCounts:p,viewMode:v,onViewMode:b,gridItemSize:R,onGridItemSize:M,leftOpen:E,rightOpen:T,onToggleLeft:C,onToggleRight:P,onPrevImage:W,onNextImage:D,canPrevImage:z,canNextImage:oe,searchDisabled:U=!1,searchPlaceholder:ue,syncIndicator:F}){const[V,q]=d.useState(!1),[he,fe]=d.useState(!1),[Ne,H]=d.useState(!1),Y=d.useRef(null),ne=d.useRef(null);d.useEffect(()=>{if(!V)return;const Q=de=>{Y.current&&!Y.current.contains(de.target)&&q(!1)};return window.addEventListener("click",Q),()=>window.removeEventListener("click",Q)},[V]),d.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const Q=window.matchMedia("(max-width: 900px)"),de=be=>fe(be.matches);return fe(Q.matches),"addEventListener"in Q?(Q.addEventListener("change",de),()=>Q.removeEventListener("change",de)):(Q.addListener(de),()=>Q.removeListener(de))},[]),d.useEffect(()=>{if(U){H(!1);return}if(!he||n){H(!1);return}if(!Ne)return;const Q=window.requestAnimationFrame(()=>{var de;return(de=ne.current)==null?void 0:de.focus()});return()=>window.cancelAnimationFrame(Q)},[he,Ne,n,U]);const me=c??{kind:"builtin",key:"added",dir:"desc"},He=me.dir,Ve=me.kind==="builtin"&&me.key==="random",qe=n||g,kt=f!=null&&f.length?f.map(Q=>({value:`metric:${Q}`,label:Q,disabled:g})):[],Me=[{value:"builtin:added",label:"Date added",disabled:g},{value:"builtin:name",label:"Filename",disabled:g},{value:"builtin:random",label:"Random",disabled:g},...kt],kn=[{label:"Layout",options:[{value:"layout:grid",label:"Grid"},{value:"layout:masonry",label:"Masonry"}]},{label:"Sort by",options:Me}],Te=me.kind==="metric"?`metric:${me.key}`:`builtin:${me.key}`,$t=[{label:"Sort by",options:Me}],Wn=he&&!n,B=Q=>{if(Q.startsWith("layout:")){const de=Q==="layout:masonry"?"adaptive":"grid";b==null||b(de)}else{if(g)return;m==null||m(Mh(Q,me))}},te=()=>{!m||g||m(Ve?me:{...me,dir:He==="desc"?"asc":"desc"})},se=N??[],pe=se.length,ce=Bw(w,pe),ve=Uw(l,u),Z=o||"Root";return a.jsxs("div",{ref:e,className:"toolbar-shell fixed top-0 left-0 right-0 h-12 grid grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] items-center px-3 gap-3 bg-panel border-b border-border z-[var(--z-toolbar)] col-span-full row-start-1 select-none",children:[a.jsxs("div",{className:"toolbar-left flex items-center gap-4 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsxs("div",{className:"flex flex-col min-w-0 leading-tight",children:[a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted",children:"Scope"}),a.jsx("span",{className:"text-sm font-medium text-text truncate",title:Z,children:Z})]}),ve&&a.jsx("span",{className:"toolbar-count text-xs text-muted whitespace-nowrap tabular-nums",children:ve})]}),a.jsxs("div",{className:"toolbar-sort flex items-center gap-2",children:[a.jsxs("div",{className:`toolbar-sort-controls flex items-center gap-2 ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsx(fc,{value:Te,onChange:B,options:kn,title:"Sort and layout options","aria-label":"Sort and layout",triggerClassName:"min-w-[110px]"}),a.jsx("button",{className:"toolbar-sort-dir btn btn-icon",onClick:te,title:g?"Sorting disabled":Ve?"Shuffle":`Sort ${He==="desc"?"descending":"ascending"}`,"aria-label":Ve?"Shuffle":"Toggle sort direction","aria-disabled":qe,disabled:qe,children:Ve?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):He==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]}),a.jsxs("div",{ref:Y,className:`toolbar-filter relative ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsxs("button",{className:`btn ${ce>0?"btn-active":""}`,onClick:()=>q(Q=>!Q),"aria-haspopup":"dialog","aria-expanded":V,title:"Filters","aria-disabled":n,children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),a.jsx("span",{className:"toolbar-filters-label",children:"Filters"}),ce>0&&a.jsx("span",{className:"toolbar-filters-count px-1.5 py-0.5 text-[11px] rounded-full bg-accent-strong text-text",children:ce})]}),V&&a.jsxs("div",{role:"dialog","aria-label":"Filters",className:"dropdown-panel w-[240px]",style:{top:"38px",left:0},children:[a.jsx("div",{className:"dropdown-label",children:"Rating"}),a.jsxs("div",{className:"px-1",children:[[5,4,3,2,1].map(Q=>{const de=se.includes(Q),be=(p==null?void 0:p[String(Q)])??0;return a.jsxs("button",{onClick:()=>L==null?void 0:L(Q),className:`dropdown-item justify-between ${de?"bg-accent-muted":""}`,children:[a.jsxs("span",{className:de?"text-star-active":"text-text",children:["".repeat(Q),"".repeat(5-Q)]}),a.jsx("span",{className:"text-xs text-muted",children:be})]},Q)}),a.jsxs("button",{onClick:()=>L==null?void 0:L(0),className:`dropdown-item justify-between ${se.includes(0)?"bg-accent-muted":""}`,children:[a.jsx("span",{className:"text-text",children:"Unrated"}),a.jsx("span",{className:"text-xs text-muted",children:(p==null?void 0:p["0"])??0})]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("div",{className:"dropdown-label",children:"Metrics"}),a.jsxs("button",{className:"dropdown-item",onClick:()=>{q(!1),k==null||k()},children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]}),a.jsx("span",{children:"Open Metrics Panel"}),(w||0)>0&&a.jsxs("span",{className:"ml-auto text-xs text-muted",children:[w," active"]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("button",{className:"dropdown-item text-muted hover:text-text",onClick:()=>{h?h():y==null||y()},disabled:ce===0,children:"Clear all filters"})]})]}),n&&a.jsxs("button",{className:"btn btn-sm",onClick:r,title:"Back to grid",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})]})]}),a.jsx("div",{className:"toolbar-center flex items-center gap-3 justify-center min-w-0",children:n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"range",min:5,max:800,step:1,value:Math.round(Math.max(5,Math.min(800,s??100))),onChange:Q=>i==null?void 0:i(Number(Q.target.value)),className:"zoom-slider","aria-label":"Zoom level"}),a.jsxs("span",{className:"text-xs text-muted min-w-[42px] text-right",children:[Math.round(s??100),"%"]})]}):M&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted",children:"Size"}),a.jsx("input",{type:"range",min:80,max:500,step:10,value:R??220,onChange:Q=>M(Number(Q.target.value)),className:"w-28 h-1.5 bg-border rounded-full appearance-none cursor-pointer hover:bg-hover transition-colors [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-text [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-text [&::-moz-range-thumb]:border-0","aria-label":"Thumbnail size"})]})}),a.jsxs("div",{className:"toolbar-right flex items-center gap-2 justify-end",children:[a.jsxs("div",{className:`toolbar-nav flex items-center gap-1 mr-1 ${n?"":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,children:[a.jsx("button",{className:`btn btn-icon ${z?"":"opacity-40 cursor-not-allowed"}`,title:"Previous image (A / )",onClick:()=>z&&(W==null?void 0:W()),"aria-label":"Previous image","aria-disabled":!z,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("button",{className:`btn btn-icon ${oe?"":"opacity-40 cursor-not-allowed"}`,title:"Next image (D / )",onClick:()=>oe&&(D==null?void 0:D()),"aria-label":"Next image","aria-disabled":!oe,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 6l6 6-6 6"})})})]}),a.jsxs("div",{className:"toolbar-panels flex items-center gap-1",children:[a.jsx("button",{className:`btn btn-icon ${E?"":"opacity-50"}`,title:E?"Hide left panel (Ctrl+B)":"Show left panel (Ctrl+B)",onClick:C,"aria-pressed":E,"aria-label":"Toggle left panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"11",y:"5",width:"10",height:"14",rx:"1.5"})]})}),a.jsx("button",{className:`btn btn-icon ${T?"":"opacity-50"}`,title:T?"Hide right panel (Ctrl+Alt+B)":"Show right panel (Ctrl+Alt+B)",onClick:P,"aria-pressed":T,"aria-label":"Toggle right panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"15",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"3",y:"5",width:"10",height:"14",rx:"1.5"})]})})]}),F&&a.jsx(Aw,{...F,isNarrow:he}),!n&&he&&a.jsx("button",{className:`btn btn-icon ${Ne?"btn-active":""} ${U?"opacity-50 cursor-not-allowed":""}`,"aria-label":Ne?"Close search":"Open search",title:U?"Search disabled":Ne?"Close search":"Search",onClick:()=>!U&&H(Q=>!Q),disabled:U,children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("circle",{cx:"11",cy:"11",r:"7"}),a.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),!n&&!he?a.jsx("div",{className:"toolbar-search w-[240px]",children:a.jsx("input",{ref:ne,"aria-label":"Search filename, tags, notes",placeholder:U?ue??"Search disabled":"Search...",onChange:Q=>t(Q.target.value),className:"toolbar-search-input input w-full focus:w-full transition-all duration-200 select-text",disabled:U})}):n?a.jsx("div",{className:"toolbar-search w-[240px]","aria-hidden":"true"}):null]}),!n&&he&&Ne&&!U&&a.jsx("div",{className:"toolbar-search-row",children:a.jsx("input",{ref:ne,"aria-label":"Search filename, tags, notes",placeholder:ue??"Search...",onChange:Q=>t(Q.target.value),className:"toolbar-search-input-mobile input input-lg w-full select-text"})}),Wn&&a.jsx("div",{className:"mobile-drawer",children:a.jsxs("div",{className:"mobile-drawer-row",children:[a.jsxs("div",{className:"mobile-pill-group",children:[a.jsx("button",{className:`mobile-pill ${v==="grid"?"is-active":""}`,onClick:()=>b==null?void 0:b("grid"),"aria-pressed":v==="grid",children:"Grid"}),a.jsx("button",{className:`mobile-pill ${v==="adaptive"?"is-active":""}`,onClick:()=>b==null?void 0:b("adaptive"),"aria-pressed":v==="adaptive",children:"Masonry"})]}),a.jsx(fc,{value:Te,onChange:Q=>m==null?void 0:m(Mh(Q,me)),options:$t,"aria-label":"Sort",triggerClassName:"mobile-pill mobile-pill-dropdown",panelClassName:"mobile-drawer-panel",disabled:g}),a.jsx("button",{className:`mobile-pill mobile-pill-icon ${qe?"opacity-50 cursor-not-allowed":""}`,onClick:te,title:g?"Sorting disabled":Ve?"Shuffle":`Sort ${He==="desc"?"descending":"ascending"}`,"aria-label":Ve?"Shuffle":"Toggle sort direction","aria-disabled":qe,disabled:qe,children:Ve?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):He==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]})})]})}function Uw(e,t){if(typeof e!="number")return null;const n=e.toLocaleString();if(typeof t!="number")return`${n} items`;const r=t.toLocaleString();return t===e?`${n} items`:`${n} / ${r} items`}function Bw(e,t){return typeof e=="number"?e:t>0?1:0}function Mh(e,t){if(e.startsWith("metric:")){const n=e.slice(7);return n?{kind:"metric",key:n,dir:t.dir}:t}if(e.startsWith("builtin:")){const n=e.slice(8);if(n==="name"||n==="added"||n==="random")return{kind:"builtin",key:n,dir:t.dir}}return t}class wn extends Error{constructor(n,r,s,i){super(r);bn(this,"status");bn(this,"url");bn(this,"body");this.name="FetchError",this.status=n,this.url=s,this.body=i}}function Ww(e){const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function ov(e,t,n){if(t&&typeof t=="object"){const r=t,s=typeof r.error=="string"?r.error:null,i=typeof r.message=="string"?r.message:null;if(s&&i)return`${s}: ${i}`;if(s)return s;if(i)return i}return typeof t=="string"&&t?t:`HTTP ${e} for ${n}`}function rt(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{let u=null;const c=await l.text().catch(()=>"");if(c)if((l.headers.get("content-type")||"").includes("application/json")||Ww(c))try{u=JSON.parse(c)}catch{u=c}else u=c;if(!l.ok)throw new wn(l.status,ov(l.status,u,e),e,u);return u}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}function Fo(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{if(!l.ok){const u=await l.text().catch(()=>""),c=u||null;throw new wn(l.status,ov(l.status,c,e),e,c)}return l.blob()}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}class lv{constructor(t){bn(this,"store",new Map);bn(this,"inflight",new Map);bn(this,"totalBytes",0);this.maxBytes=t}getMaxBytes(){return this.maxBytes}getTotalBytes(){return this.totalBytes}getSize(){return this.store.size}has(t){return this.store.has(t)}isInflight(t){return this.inflight.has(t)}get(t){const n=this.store.get(t);if(n)return this.store.delete(t),this.store.set(t,n),n.blob}evictIfNeeded(t){for(;this.totalBytes+t>this.maxBytes&&this.store.size>0;){const n=this.store.keys().next().value;if(n==null)break;const r=this.store.get(n);r&&(this.totalBytes-=r.size),this.store.delete(n)}}set(t,n){const r=n.size||0;if(!(r>this.maxBytes)){if(this.store.has(t)){const s=this.store.get(t);this.totalBytes-=s.size,this.store.delete(t)}this.evictIfNeeded(r),this.store.set(t,{blob:n,size:r}),this.totalBytes+=r}}async getOrFetch(t,n){const r=this.get(t);if(r)return r;const s=this.inflight.get(t);if(s)return s.promise;const i=n(),o=typeof i=="object"&&"promise"in i,l=o?i.promise:i,u=o?i.abort:void 0,c=l.then(f=>(this.set(t,f),f)).finally(()=>{this.inflight.delete(t)});return this.inflight.set(t,{promise:c,abort:u}),c}prefetch(t,n){if(this.store.has(t)||this.inflight.has(t))return;const r=n(),s=typeof r=="object"&&"promise"in r,i=s?r.promise:r,o=s?r.abort:void 0,l=i.then(u=>(this.set(t,u),u)).catch(()=>new Blob).finally(()=>{this.inflight.delete(t)});this.inflight.set(t,{promise:l,abort:o})}cancelPrefetch(t){const n=this.inflight.get(t);if(n!=null&&n.abort)try{n.abort()}catch{}this.inflight.delete(t)}clear(){for(const[t,n]of this.inflight)if(n.abort)try{n.abort()}catch{}this.inflight.clear(),this.store.clear(),this.totalBytes=0}evictPrefix(t){const n=(()=>{const s=t?`/${t.replace(/^\/+/,"")}`:"/";return s==="/"?"/":s.replace(/\/+$/,"")})(),r=s=>{const i=s.startsWith("/")?s.replace(/\/+$/,""):`/${s.replace(/\/+$/,"")}`;return n==="/"?!0:i===n||i.startsWith(`${n}/`)};for(const[s,i]of Array.from(this.store.entries()))r(s)&&(this.totalBytes-=i.size,this.store.delete(s));for(const[s,i]of Array.from(this.inflight.entries()))if(r(s)){if(i.abort)try{i.abort()}catch{}this.inflight.delete(s)}this.totalBytes<0&&(this.totalBytes=0)}}const cs=new lv(60*1024*1024),hc=new lv(20*1024*1024),Ga={};function Hw(){const e=Ga==null?void 0:Ga.VITE_API_BASE,t=typeof window<"u",n=t?window.location.origin:"http://localhost",r=t?window.location.hostname:"localhost",s=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\]|.+\.localhost)$/i.test(r);if(!e)return"";let i;try{i=new URL(e,n)}catch{return""}const o=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\])$/i.test(i.hostname);return s?i.origin:o?"":i.origin}const Fe=Hw();const Vw=40*1024*1024,Rh="lenslet.client_id",Lh="lenslet.client_id.session",av="lenslet.last_event_id",Qw=1e3,Kw=3e4,qw=5;let ls=null,Jo=null,Th=0,Rs=null,Ls=0,Zl=!0,Tl=!1;function uv(){return typeof window<"u"&&typeof EventSource<"u"}function _h(e,t){if(!e)return null;try{return e.getItem(t)}catch{return null}}function Ph(e,t,n){if(e)try{e.setItem(t,n)}catch{}}function Yw(){if(typeof navigator>"u")return"server";const e=navigator.userAgent||"",t=navigator.language||"",n=navigator.platform||"",r=typeof Intl<"u"&&Intl.DateTimeFormat().resolvedOptions().timeZone||"",s=typeof screen<"u"?`${screen.width}x${screen.height}x${screen.colorDepth}`:"";return[e,t,n,r,s].join("|")}function Gw(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=t*16777619>>>0;return t.toString(16).padStart(8,"0")}function Zo(){if(ls)return ls;const e=typeof window<"u"?window.localStorage:null,t=typeof window<"u"?window.sessionStorage:null,n=_h(e,Rh)||_h(t,Lh);if(n)return ls=n,n;const r=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`;if(e)return Ph(e,Rh,r),ls=r,r;if(t)return Ph(t,Lh,r),ls=r,r;const s=`fp_${Gw(Yw())}`;return ls=s,s}function Yi(e="lenslet"){Th+=1;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`nonce_${Math.random().toString(36).slice(2,10)}_${Date.now()}_${Th}`;return`${e}:${Zo()}:${t}`}function Xw(){if(Jo!=null)return Jo;if(typeof window>"u")return null;try{const e=window.localStorage.getItem(av);if(!e)return null;const t=Number(e);return!Number.isFinite(t)||t<=0?null:(Jo=t,t)}catch{return null}}function Jw(e){if(!(!Number.isFinite(e)||e<=0)&&(Jo=e,!(typeof window>"u")))try{window.localStorage.setItem(av,String(e))}catch{}}function Zw(){if(typeof window>"u")return`${Fe}/events`;const e=new URL(`${Fe}/events`,window.location.origin),t=Xw();return t!=null&&Number.isFinite(t)&&e.searchParams.set("last_event_id",String(t)),e.toString()}function e1(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}let tn=null,cv="idle";const mc=new Set,pc=new Set,gc=new Set;function Ts(e){cv=e;for(const t of pc)t(e)}function jd(e){if(Tl!==e){Tl=e;for(const t of gc)t(e)}}function Md(){Rs!=null&&(window.clearTimeout(Rs),Rs=null)}function t1(){Ls=0,Md()}function n1(){if(!Zl||Rs!=null)return;Ls+=1;const e=Math.min(Qw*Math.pow(2,Ls-1),Kw);Ls>=qw?(Ts("offline"),jd(!0)):Ts("reconnecting"),Rs=window.setTimeout(()=>{Rs=null,dv()},e)}function dv(){if(!Zl||!uv()||(tn&&tn.readyState===EventSource.CLOSED&&(tn.close(),tn=null),tn))return;Ls>0?Ts("reconnecting"):Ts("connecting");const e=new EventSource(Zw());tn=e;const t=n=>r=>{const s=e1(r.data);if(!s)return;const i=r.lastEventId?Number(r.lastEventId):null,o=i!=null&&Number.isFinite(i)?i:null;o!=null&&Jw(o);for(const l of mc)l({type:n,id:o,data:s})};e.addEventListener("item-updated",t("item-updated")),e.addEventListener("metrics-updated",t("metrics-updated")),e.addEventListener("presence",t("presence")),e.onopen=()=>{t1(),jd(!1),Ts("live")},e.onerror=()=>{tn===e&&(e.close(),tn=null,n1())}}function r1(){Zl=!0,uv()&&(Md(),dv())}function s1(){Zl=!1,Md(),Ls=0,tn&&(tn.close(),tn=null),jd(!1),Ts("offline")}function i1(e){return mc.add(e),()=>{mc.delete(e)}}function o1(e){return pc.add(e),e(cv),()=>{pc.delete(e)}}function l1(e){return gc.add(e),e(Tl),()=>{gc.delete(e)}}function a1(){return Tl}const ge={getFolder:(e,t,n)=>{const r=new URLSearchParams({path:e});return t!=null&&r.set("page",String(t)),n&&r.set("recursive","1"),rt(`${Fe}/folders?${r}`).promise},search:(e,t)=>{const n=new URLSearchParams;return e&&n.set("q",e),t&&n.set("path",t),rt(`${Fe}/search?${n}`).promise},getEmbeddings:()=>rt(`${Fe}/embeddings`).promise,searchEmbeddings:e=>rt(`${Fe}/embeddings/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise,refreshFolder:e=>{const t=new URLSearchParams({path:e});return rt(`${Fe}/refresh?${t}`,{method:"POST"}).promise},getSidecar:e=>rt(`${Fe}/item?path=${encodeURIComponent(e)}`).promise,patchSidecar:(e,t,n)=>{const s={"Content-Type":"application/json","Idempotency-Key":(n==null?void 0:n.idempotencyKey)??Yi("patch"),"x-client-id":Zo(),"x-updated-by":"web"};return(n==null?void 0:n.ifMatch)!=null&&(s["If-Match"]=String(n.ifMatch)),rt(`${Fe}/item?path=${encodeURIComponent(e)}`,{method:"PATCH",headers:s,body:JSON.stringify(t)}).promise},getMetadata:e=>rt(`${Fe}/metadata?path=${encodeURIComponent(e)}`).promise,putSidecar:(e,t)=>rt(`${Fe}/item?path=${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-client-id":Zo(),"x-updated-by":"web"},body:JSON.stringify(t)}).promise,getHealth:()=>rt(`${Fe}/health`).promise,postPresence:(e,t)=>rt(`${Fe}/presence`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gallery_id:e,client_id:t??Zo()})}).promise,getThumb:e=>hc.getOrFetch(e,()=>Fo(`${Fe}/thumb?path=${encodeURIComponent(e)}`)),prefetchThumb:e=>{hc.prefetch(e,()=>Fo(`${Fe}/thumb?path=${encodeURIComponent(e)}`))},getFile:e=>cs.getOrFetch(e,()=>Fo(`${Fe}/file?path=${encodeURIComponent(e)}`)),prefetchFile:async e=>{if(!(cs.has(e)||cs.isInflight(e)))try{const t=await Fo(`${Fe}/file?path=${encodeURIComponent(e)}`).promise;t.size<=Vw&&cs.set(e,t)}catch{}},cancelPrefetch:e=>{cs.cancelPrefetch(e)},uploadFile:async(e,t)=>{const n=new FormData;return n.append("dest",e),n.append("file",t),rt(`${Fe}/file`,{method:"POST",body:n,timeoutMs:6e4}).promise},moveFile:async(e,t)=>{const n=new FormData;return n.append("src",e),n.append("dest",t),rt(`${Fe}/move`,{method:"POST",body:n}).promise},deleteFiles:async e=>rt(`${Fe}/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:e})}).promise,exportIntent:async e=>{const t=new FormData;return t.append("path",e),rt(`${Fe}/export-intent`,{method:"POST",body:t}).promise},getViews:()=>rt(`${Fe}/views`).promise,saveViews:e=>rt(`${Fe}/views`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise};class u1{constructor(t=400){bn(this,"cache",new Map);bn(this,"maxSize");this.maxSize=t,typeof window<"u"&&window.addEventListener("beforeunload",()=>this.clear(),{once:!0})}get(t){const n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){for(this.cache.has(t)&&this.cache.delete(t);this.cache.size>=this.maxSize;){const r=this.cache.keys().next().value;if(r===void 0)break;const s=this.cache.get(r);if(this.cache.delete(r),s)try{URL.revokeObjectURL(s)}catch{}}this.cache.set(t,n)}clear(){for(const t of this.cache.values())try{URL.revokeObjectURL(t)}catch{}this.cache.clear()}}const Xa=new u1(400);function c1({path:e,name:t,onClick:n,selected:r,highlighted:s,displayW:i,displayH:o,ioRoot:l,isScrolling:u,priority:c}){const f=d.useRef(null),[m,g]=d.useState(()=>Xa.get(e)??null),[w,k]=d.useState(!1),[N,L]=d.useState(()=>!!m);return d.useEffect(()=>{const y=f.current;if(!y)return;const h=new IntersectionObserver(p=>{for(const v of p)v.target===y&&k(v.isIntersecting||v.intersectionRatio>0)},{root:l??null,rootMargin:"200px 0px",threshold:.01});return h.observe(y),()=>{h.unobserve(y),h.disconnect()}},[l]),d.useEffect(()=>{if(m||!(w&&!u||c))return;let y=!0;return ge.getThumb(e).then(h=>{if(!y)return;const p=URL.createObjectURL(h);Xa.set(e,p),g(p)}).catch(()=>{}),()=>{y=!1}},[e,m,w,u,c]),d.useEffect(()=>{var h;if(!m){L(!1);return}const y=(h=f.current)==null?void 0:h.querySelector("img");y&&y.complete&&y.naturalWidth>0?L(!0):L(!1)},[m]),d.useEffect(()=>{g(Xa.get(e)??null)},[e]),a.jsx("div",{ref:f,className:`absolute inset-0 relative bg-hover border border-border rounded-lg overflow-hidden select-none ${r?"outline-2 outline-accent":""} ${s?"ring-2 ring-accent/60 animate-pulse":""} hover:outline hover:outline-1 hover:outline-accent`,onClick:n,children:m?a.jsx("img",{className:`w-full h-full object-cover block pointer-events-none select-none opacity-0 transition-opacity duration-[160ms] ${N?"opacity-100":""}`,src:m,alt:t,loading:"lazy",decoding:"async",onLoad:()=>L(!0),width:i?Math.round(i):void 0,height:o?Math.round(o):void 0}):null})}function as(e,t,n){let r=n.initialDeps??[],s,i=!0;function o(){var l,u,c;let f;n.key&&((l=n.debug)!=null&&l.call(n))&&(f=Date.now());const m=e();if(!(m.length!==r.length||m.some((k,N)=>r[N]!==k)))return s;r=m;let w;if(n.key&&((u=n.debug)!=null&&u.call(n))&&(w=Date.now()),s=t(...m),n.key&&((c=n.debug)!=null&&c.call(n))){const k=Math.round((Date.now()-f)*100)/100,N=Math.round((Date.now()-w)*100)/100,L=N/16,y=(h,p)=>{for(h=String(h);h.length<p;)h=" "+h;return h};console.info(`%c ${y(N,5)} /${y(k,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*L,120))}deg 100% 31%);`,n==null?void 0:n.key)}return n!=null&&n.onChange&&!(i&&n.skipInitialOnChange)&&n.onChange(s),i=!1,s}return o.updateDeps=l=>{r=l},o}function Ih(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const d1=(e,t)=>Math.abs(e-t)<1.01,f1=(e,t,n)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,s),n)}},Fh=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},h1=e=>e,m1=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},p1=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const s=o=>{const{width:l,height:u}=o;t({width:Math.round(l),height:Math.round(u)})};if(s(Fh(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const u=o[0];if(u!=null&&u.borderBoxSize){const c=u.borderBoxSize[0];if(c){s({width:c.inlineSize,height:c.blockSize});return}}s(Fh(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},Oh={passive:!0},Dh=typeof window>"u"?!0:"onscrollend"in window,g1=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&Dh?()=>{}:f1(r,()=>{t(s,!1)},e.options.isScrollingResetDelay),o=f=>()=>{const{horizontal:m,isRtl:g}=e.options;s=m?n.scrollLeft*(g&&-1||1):n.scrollTop,i(),t(s,f)},l=o(!0),u=o(!1);u(),n.addEventListener("scroll",l,Oh);const c=e.options.useScrollendEvent&&Dh;return c&&n.addEventListener("scrollend",u,Oh),()=>{n.removeEventListener("scroll",l),c&&n.removeEventListener("scrollend",u)}},v1=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},y1=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const o=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class x1{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:h1,rangeExtractor:m1,onChange:()=>{},measureElement:v1,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=as(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=n[o];if(s.has(l.lane))continue;const u=i.get(l.lane);if(u==null||l.end>u.end?i.set(l.lane,l):l.end<u.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=as(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,s,i,o,l)=>(this.prevLanes!==void 0&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=as(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l},u)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const g of this.laneAssignments.keys())g>=n&&this.laneAssignments.delete(g);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(g=>{this.itemSizeCache.set(g.key,g.size)}));const c=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const f=this.measurementsCache.slice(0,c),m=new Array(l).fill(void 0);for(let g=0;g<c;g++){const w=f[g];w&&(m[w.lane]=g)}for(let g=c;g<n;g++){const w=i(g),k=this.laneAssignments.get(g);let N,L;if(k!==void 0&&this.options.lanes>1){N=k;const v=m[N],b=v!==void 0?f[v]:void 0;L=b?b.end+this.options.gap:r+s}else{const v=this.options.lanes===1?f[g-1]:this.getFurthestMeasurement(f,g);L=v?v.end+this.options.gap:r+s,N=v?v.lane:g%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(g,N)}const y=u.get(w),h=typeof y=="number"?y:this.options.estimateSize(g),p=L+h;f[g]={index:g,start:L,size:h,end:p,key:w,lane:N},m[N]=g}return this.measurementsCache=f,f},{key:!1,debug:()=>this.options.debug}),this.calculateRange=as(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?w1({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=as(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,o)=>i===null||o===null?[]:n({startIndex:i,endIndex:o,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=as(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,o=n.length;i<o;i++){const l=n[i],u=r[l];s.push(u)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return Ih(r[fv(0,r.length-1,s=>Ih(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(s.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const o=10,l=c=>{if(!this.targetWindow)return;const f=this.getOffsetForIndex(n,c);if(!f){console.warn("Failed to get offset for index:",n);return}const[m,g]=f;this._scrollToOffset(m,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const w=this.getScrollOffset(),k=this.getOffsetForIndex(n,g);if(!k){console.warn("Failed to get offset for index:",n);return}d1(k[0],w)||u(g)})},u=c=>{this.targetWindow&&(i++,i<o?this.targetWindow.requestAnimationFrame(()=>l(c)):console.warn(`Failed to scroll to index ${n} after ${o} attempts.`))};l(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}s=Math.max(...i.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const fv=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function w1({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const s=e.length-1,i=u=>e[u].start;if(e.length<=r)return{startIndex:0,endIndex:s};let o=fv(0,s,i,n),l=o;if(r===1)for(;l<s&&e[l].end<n+t;)l++;else if(r>1){const u=Array(r).fill(0);for(;l<s&&u.some(f=>f<n+t);){const f=e[l];u[f.lane]=f.end,l++}const c=Array(r).fill(n+t);for(;o>=0&&c.some(f=>f>=n);){const f=e[o];c[f.lane]=f.start,o--}o=Math.max(0,o-o%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const zh=typeof document<"u"?d.useLayoutEffect:d.useEffect;function S1(e){const t=d.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var o;i?kd.flushSync(t):t(),(o=e.onChange)==null||o.call(e,s,i)}},[r]=d.useState(()=>new x1(n));return r.setOptions(n),zh(()=>r._didMount(),[]),zh(()=>r._willUpdate()),r}function k1(e){return S1({observeElementRect:p1,observeElementOffset:g1,scrollToFn:y1,...e})}function C1({containerW:e,gap:t,targetCell:n,aspect:r,captionH:s}){const i=Math.max(1,Math.floor((e+t)/(n+t))),o=(e-t*(i-1))/i,l=o*r.h/r.w,u=l+s+t;return{columns:i,cellW:o,mediaH:l,rowH:u}}const b1=1.333;function E1({items:e,containerWidth:t,targetHeight:n,gap:r,captionH:s}){if(t<=0)return[];const i=[];let o=[],l=0;const u=(c,f)=>({index:i.length,height:f+s+r,imageH:f,items:c.map(m=>({item:m.item,displayW:m.aspect*f,displayH:f,originalIndex:m.originalIndex}))});for(let c=0;c<e.length;c++){const f=e[c],m=f.w>0&&f.h>0?f.w/f.h:b1;o.push({item:f,aspect:m,originalIndex:c}),l+=m;const g=(o.length-1)*r;if(l*n+g>=t){const k=(t-g)/l;i.push(u(o,k)),o=[],l=0}}return o.length>0&&i.push(u(o,n)),i}function N1(e,t,n){return{mode:"adaptive",rows:E1({items:t,containerWidth:e,targetHeight:n.targetCell,gap:n.gap,captionH:n.captionH})}}function j1(e,t,n){const{columns:r,cellW:s,mediaH:i,rowH:o}=C1({containerW:e,gap:n.gap,targetCell:n.targetCell,aspect:n.aspect,captionH:n.captionH}),l=Math.ceil(t.length/Math.max(1,r));return{mode:"grid",columns:r,cellW:s,mediaH:i,rowH:o,rowCount:l}}function M1(e,t,n){const[r,s]=d.useState(0);d.useLayoutEffect(()=>{const u=e.current;if(!u)return;const c=()=>{const m=getComputedStyle(u),g=u.clientWidth-parseFloat(m.paddingLeft)-parseFloat(m.paddingRight);s(g)},f=new ResizeObserver(c);return f.observe(u),c(),()=>f.disconnect()},[]);const i=d.useMemo(()=>n.viewMode==="adaptive"?N1(r,t,n):j1(r,t,n),[r,t,n.viewMode,n.gap,n.targetCell,n.aspect.w,n.aspect.h,n.captionH]),o=k1({count:i.mode==="adaptive"?i.rows.length:i.rowCount,getScrollElement:()=>e.current,estimateSize:u=>i.mode==="adaptive"?i.rows[u].height:i.rowH,overscan:8}),l=o.getVirtualItems();return d.useEffect(()=>{o.measure()},[i,o]),{width:r,layout:i,rowVirtualizer:o,virtualRows:l}}function R1(e,t,n,r){if(!e.length)return null;const s=n?e.findIndex(l=>l.path===n):0,i=Math.max(1,t);let o=s;if(r.key==="ArrowRight"||r.key==="d")o=Math.min(e.length-1,s+1);else if(r.key==="ArrowLeft"||r.key==="a")o=Math.max(0,s-1);else if(r.key==="ArrowDown"||r.key==="s")o=Math.min(e.length-1,s+i);else if(r.key==="ArrowUp"||r.key==="w")o=Math.max(0,s-i);else return r.key==="Enter"&&n?"open":null;return o}const En=12,L1=44,T1={w:4,h:3},_1=350,P1=120;function I1({items:e,selected:t,restoreToSelectionToken:n,onSelectionChange:r,onOpenViewer:s,onContextMenuItem:i,highlight:o,recentlyUpdated:l,suppressSelectionHighlight:u=!1,viewMode:c="grid",targetCellSize:f=220,scrollRef:m,hideScrollbar:g=!1}){const[w,k]=d.useState(null),[N,L]=d.useState(null),[y,h]=d.useState(!1),[p,v]=d.useState(null),[b,R]=d.useState(null),M=d.useRef(null),E=d.useRef(null),T=d.useRef(null),C=m??T,P=d.useRef(null),W=f,{width:D,layout:z,rowVirtualizer:oe,virtualRows:U}=M1(C,e,{gap:En,targetCell:W,aspect:T1,captionH:L1,viewMode:c}),ue=d.useMemo(()=>{const B=new Map;for(let te=0;te<e.length;te++)B.set(e[te].path,te);return B},[e]),F=d.useMemo(()=>{if(z.mode!=="adaptive")return null;const B=new Map;return z.rows.forEach((te,se)=>{let pe=0;te.items.forEach((ce,ve)=>{const Z=pe+ce.displayW/2;B.set(ce.item.path,{row:se,center:Z,order:ve}),pe+=ce.displayW+En})}),B},[z]);d.useEffect(()=>{if(!t.length)return;const B=t[0];p!==B&&v(B)},[t,p]);const V=d.useMemo(()=>{if(z.mode!=="adaptive")return null;let B=0;return z.rows.map(te=>{const se=B;return B+=te.height,{start:se,height:te.height}})},[z]),q=d.useRef(null),he=(B,te)=>{try{if(q.current!=null){try{cancelAnimationFrame(q.current)}catch{}q.current=null}const se=B.scrollTop,pe=te-se;if(Math.abs(pe)<1){B.scrollTop=te;return}const ce=140,ve=performance.now(),Z=de=>1-Math.pow(1-de,3),Q=de=>{const be=Math.min(1,(de-ve)/ce),Re=Z(be);B.scrollTop=se+pe*Re,be<1?q.current=requestAnimationFrame(Q):q.current=null};q.current=requestAnimationFrame(Q)}catch{B.scrollTop=te}},[fe,Ne]=d.useState(!1);d.useEffect(()=>{const B=C.current;if(!B)return;let te=0;const se=()=>{Ne(!0),window.clearTimeout(te),te=window.setTimeout(()=>Ne(!1),P1)};return B.addEventListener("scroll",se,{passive:!0}),()=>B.removeEventListener("scroll",se)},[]);const H=()=>{E.current!=null&&(window.clearTimeout(E.current),E.current=null)},Y=()=>{if(H(),h(!1),k(null),M.current){try{URL.revokeObjectURL(M.current)}catch{}M.current=null}L(null)},ne=B=>{fe||(H(),k(B),h(!1),E.current=window.setTimeout(async()=>{E.current=null;try{const te=await ge.getFile(B),se=URL.createObjectURL(te);if(M.current)try{URL.revokeObjectURL(M.current)}catch{}M.current=se,L(se),h(!0)}catch{}},_1))},me=z.mode==="grid"?z.columns:Math.max(1,Math.floor(D/(W+En))),He=(B,te)=>{if(z.mode!=="adaptive")return null;const se=z.rows[B];if(!se)return null;let pe=0,ce=null;for(const ve of se.items){const Z=pe+ve.displayW/2,Q=Math.abs(Z-te);(!ce||Q<ce.dist)&&(ce={path:ve.item.path,dist:Q}),pe+=ve.displayW+En}return ce?ce.path:null},Ve=(B,te)=>{var Re,Ct,A,ie;if(!e.length)return null;const se=B??e[0].path;if(z.mode!=="adaptive"){const le=R1(e,me,se,te);return le==="open"||le==null?le:((Re=e[le])==null?void 0:Re.path)??null}const pe=F==null?void 0:F.get(se);if(!pe)return se;const ce=ue.get(se)??0,ve=te.key;if(ve==="Enter")return"open";if(ve==="ArrowRight"||ve==="d")return((Ct=e[Math.min(e.length-1,ce+1)])==null?void 0:Ct.path)??se;if(ve==="ArrowLeft"||ve==="a")return((A=e[Math.max(0,ce-1)])==null?void 0:A.path)??se;const Z=ve==="ArrowDown"||ve==="s"?1:ve==="ArrowUp"||ve==="w"?-1:0;if(Z===0)return null;const Q=pe.row+Z;if(Q<0||Q>=(((ie=z.rows)==null?void 0:ie.length)??0))return se;const de=pe.center;return He(Q,de)??se},qe=B=>{var te;try{(te=document.getElementById(`cell-${encodeURIComponent(B)}`))==null||te.focus()}catch{}},kt=B=>{try{ge.prefetchFile(B),ge.prefetchThumb(B)}catch{}},Me=(B,te)=>{v(B),R(B);const se=!!te.shiftKey,pe=!!(te.ctrlKey||te.metaKey);if(se){const ce=P.current??p??t[0]??B,ve=ue.get(ce)??e.findIndex(Q=>Q.path===ce),Z=ue.get(B)??e.findIndex(Q=>Q.path===B);if(ve!==-1&&Z!==-1){const Q=Math.min(ve,Z),de=Math.max(ve,Z),be=e.slice(Q,de+1).map(Re=>Re.path);if(pe){const Re=new Set(t);for(const Ct of be)Re.add(Ct);r(Array.from(Re))}else r(be)}else r([B])}else if(pe){const ce=new Set(t);ce.has(B)?ce.delete(B):ce.add(B),r(Array.from(ce)),P.current=B}else r([B]),P.current=B;fe||kt(B),qe(B)},kn=(B,te)=>{var se,pe;try{const ce=Te.has(B)&&t.length>0?t:[B];(se=te.dataTransfer)==null||se.setData("application/x-lenslet-paths",JSON.stringify(ce)),te.dataTransfer&&(te.dataTransfer.effectAllowed="copyMove");try{document.body.classList.add("drag-active")}catch{}const Z=te.currentTarget.querySelector(".cell-content img"),Q=document.createElement("div");Q.className="drag-ghost";const de=document.createElement("img");de.draggable=!1,de.alt="drag",Z&&Z.src&&(de.src=Z.src),Q.appendChild(de),document.body.appendChild(Q);const be=Q.getBoundingClientRect().width||150;(pe=te.dataTransfer)==null||pe.setDragImage(Q,Math.round(be/2),0);const Re=()=>{try{Q.remove()}catch{}try{document.body.classList.remove("drag-active")}catch{}window.removeEventListener("dragend",Re),window.removeEventListener("pointerup",Re),document.removeEventListener("visibilitychange",Re)};window.addEventListener("dragend",Re),window.addEventListener("pointerup",Re),document.addEventListener("visibilitychange",Re)}catch{}};d.useEffect(()=>{const B=C.current;if(!B)return;const te=se=>{var Re,Ct,A;const pe=Ve(b,se);if(pe==null)return;if(se.preventDefault(),pe==="open"){b&&s(b);return}const ce=e.find(ie=>ie.path===pe);if(!ce)return;R(ce.path),v(ce.path),r([ce.path]);try{P.current=ce.path}catch{}const ve=z.mode==="grid"?Math.floor((ue.get(ce.path)??0)/Math.max(1,z.columns)):((Re=F==null?void 0:F.get(ce.path))==null?void 0:Re.row)??0,Z=B.scrollTop,Q=Z+B.clientHeight,de=z.mode==="adaptive"?((Ct=V==null?void 0:V[ve])==null?void 0:Ct.start)??0:ve*z.rowH,be=z.mode==="adaptive"?de+(((A=V==null?void 0:V[ve])==null?void 0:A.height)??0):de+z.rowH;(de<Z||be>Q)&&he(B,de),qe(ce.path)};return B.addEventListener("keydown",te),()=>{B.removeEventListener("keydown",te)}},[e,b,me,s,z,F,V,ue]),d.useLayoutEffect(()=>{var ve;const B=C.current;if(!B||!n||!t||t.length===0)return;const te=t[0],se=ue.get(te);if(se==null||se<0)return;let pe=0;if(z.mode==="grid")pe=Math.floor(se/Math.max(1,z.columns));else{let Z=0,Q=z.rows.length-1;for(;Z<=Q;){const de=Z+Q>>1,be=z.rows[de];if(se>=be.items[0].originalIndex&&se<=be.items[be.items.length-1].originalIndex){pe=de;break}se<be.items[0].originalIndex?Q=de-1:Z=de+1}}const ce=z.mode==="adaptive"?((ve=V==null?void 0:V[pe])==null?void 0:ve.start)??0:pe*z.rowH;try{B.scrollTop=ce}catch{}},[n,z,V]);const Te=d.useMemo(()=>new Set(t),[t]),$t=!!(w&&N&&y);d.useEffect(()=>{var B;(B=C.current)==null||B.focus()},[]),d.useEffect(()=>{var B;if(u){try{(B=C.current)==null||B.blur()}catch{}try{R(null)}catch{}}},[u]);const Wn=b?`cell-${encodeURIComponent(b)}`:void 0;return a.jsx("div",{role:"grid","aria-label":"Gallery",className:`relative h-full overflow-auto p-3 outline-none ${g?"scrollbar-hidden pr-4":"scrollbar-thin"} ${$t?"cursor-zoom-in":""}`,ref:C,tabIndex:0,"aria-activedescendant":Wn,onMouseDown:()=>{var B;return(B=C.current)==null?void 0:B.focus()},style:{"--gap":`${En}px`},children:a.jsxs("div",{className:"relative w-full",style:{height:oe.getTotalSize()},children:[U.map(B=>{var ve;let te=[],se={},pe="";if(z.mode==="adaptive"){const Z=z.rows[B.index];if(!Z)return null;te=Z.items,se={height:Z.height,transform:`translate3d(0, ${B.start}px, 0)`,display:"flex",gap:En,paddingBottom:En},pe="absolute top-0 left-0 right-0 w-full will-change-transform"}else{const Z=B.index*z.columns;te=e.slice(Z,Z+z.columns).map(de=>({item:de,displayW:z.cellW,displayH:z.mediaH})),se={transform:`translate3d(0, ${B.start}px, 0)`,gridTemplateColumns:`repeat(${z.columns}, minmax(0, 1fr))`,gap:En,paddingBottom:En},pe="absolute top-0 left-0 right-0 w-full grid will-change-transform"}const ce=B.index===((ve=U[0])==null?void 0:ve.index);try{if(!fe)for(const{item:Z}of te)try{ge.prefetchThumb(Z.path)}catch{}}catch{}return a.jsx("div",{className:pe,role:"row",style:se,children:te.map(({item:Z,displayW:Q,displayH:de})=>{const be=!u&&(p===Z.path||Te.has(Z.path)),Re=(l==null?void 0:l.has(Z.path))??!1,Ct=z.mode==="adaptive"?{width:Q}:{},A=z.mode==="adaptive"?{height:de}:{},ie=z.mode==="adaptive"?"relative rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group shrink-0":"relative aspect-[4/3] rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group";return a.jsxs("div",{id:`cell-${encodeURIComponent(Z.path)}`,className:`relative min-w-0 ${be?"outline outline-2 outline-accent outline-offset-2 rounded-[10px]":""}`,role:"gridcell","aria-selected":be,tabIndex:b===Z.path?0:-1,onFocus:()=>R(Z.path),draggable:!0,style:Ct,onDragStart:le=>kn(Z.path,le),onDragEnd:()=>{},onContextMenu:le=>{le.preventDefault(),le.stopPropagation(),i&&i(le,Z.path)},children:[a.jsxs("div",{className:ie,style:A,onMouseEnter:()=>{try{ge.prefetchFile(Z.path)}catch{}},onDoubleClick:()=>s(Z.path),onMouseLeave:Y,children:[a.jsx("div",{className:"cell-content absolute inset-0",children:a.jsx(c1,{path:Z.path,name:Z.name,selected:be,highlighted:Re,displayW:Q,displayH:de,ioRoot:C.current,isScrolling:fe,priority:ce,onClick:le=>Me(Z.path,le)})}),a.jsx("div",{className:"absolute right-0 bottom-0 w-7 h-7 cursor-zoom-in",onMouseEnter:()=>ne(Z.path),onMouseLeave:Y,children:a.jsx("div",{className:"absolute right-0 bottom-0 h-[18px] w-[18px] flex items-center justify-center text-text select-none opacity-0 group-hover:opacity-50 hover:opacity-100 transition-all duration-[140ms]",style:{clipPath:'path("M0 9C0 4.02944 4.02944 0 9 0H18V18H0V9Z")',background:"linear-gradient(135deg, rgba(18,18,18,0.9) 0%, rgba(34,34,34,0.9) 60%, rgba(22,22,22,0.9) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",borderLeft:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 1px 2px rgba(0,0,0,0.45)",backdropFilter:"blur(1px)"},children:a.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#d9dce2]","aria-hidden":"true",style:{transform:"translate(0px,0px)"},children:[a.jsx("circle",{cx:"11",cy:"11",r:"5.4"}),a.jsx("path",{d:"M15.5 15.5 L19 19"})]})})})]}),a.jsxs("div",{className:"flex flex-col items-center text-center gap-0 mt-1 px-0.5 text-white/90",children:[a.jsx("div",{className:"text-sm leading-[18px] thumb-filename line-clamp-2 break-words hyphens-auto text-center",title:Z.name,children:(()=>{const le=(o||"").trim();if(!le)return Z.name;const ke=Z.name,nt=ke.toLowerCase().indexOf(le.toLowerCase());if(nt===-1)return Z.name;const ss=ke.slice(0,nt),ti=ke.slice(nt,nt+le.length),Cn=ke.slice(nt+le.length);return a.jsxs(a.Fragment,{children:[ss,a.jsx("mark",{className:"bg-accent/20 text-inherit rounded px-0.5",children:ti}),Cn]})})()}),a.jsxs("div",{className:"text-[11px] leading-[15px] opacity-70",children:[Z.w,"  ",Z.h]})]})]},Z.path)})},B.key)}),w&&N&&y&&kd.createPortal(a.jsx("div",{className:"toolbar-offset fixed inset-0 z-[999] flex items-center justify-center pointer-events-none bg-black/20 opacity-100",children:a.jsx("img",{src:N,alt:"preview",className:"max-w-[80vw] max-h-[80vh] object-contain opacity-[0.98]"})}),document.body)]},`${c}-${me}`)})}const F1=48,O1=[.1,.24,.5,.74,.9];function D1({items:e,metricKey:t,scrollRef:n,sortDir:r}){const{orderedValues:s,numericValues:i}=d.useMemo(()=>{var C;const E=[],T=[];for(const P of e){const W=(C=P.metrics)==null?void 0:C[t],D=W==null||Number.isNaN(W)?null:W;E.push(D),D!=null&&T.push(D)}return{orderedValues:E,numericValues:T}},[e,t]),o=d.useMemo(()=>z1(i,F1),[i]),l=d.useMemo(()=>A1(i,O1),[i]),[u,c]=d.useState(0),[f,m]=d.useState(null),[g,w]=d.useState(!1),k=d.useRef(null);if(d.useEffect(()=>{const E=n.current;if(!E)return;const T=()=>{const C=Math.max(1,E.scrollHeight-E.clientHeight),P=Ir(C>0?E.scrollTop/C:0);c(P)};return T(),E.addEventListener("scroll",T,{passive:!0}),window.addEventListener("resize",T),()=>{E.removeEventListener("scroll",T),window.removeEventListener("resize",T)}},[n,e.length]),d.useEffect(()=>{m(null)},[t,e.length]),!o)return null;const N={min:o.min,max:o.max},L=f!=null?$h(f):null,y=$h(u),h=r==="desc",p=d.useMemo(()=>f==null?null:B1(s,f),[s,f]);function v(E){m(Ir(E))}function b(){m(null)}function R(E){const T=n.current;if(!T)return;const C=Math.max(0,T.scrollHeight-T.clientHeight);T.scrollTop=Ir(E)*C}function M(E){var C;const T=(C=k.current)==null?void 0:C.getBoundingClientRect();return T?Ir((E.clientY-T.top)/T.height):null}return a.jsxs("div",{className:"absolute right-0 top-3 bottom-3 w-[14px] flex items-stretch pointer-events-auto",children:[a.jsxs("svg",{ref:k,viewBox:"0 0 10 100",preserveAspectRatio:"none",className:"w-full h-full rounded bg-surface-inset border border-border/60 cursor-ns-resize",onPointerDown:E=>{var C;E.preventDefault();const T=M(E);T!=null&&(w(!0),v(T),R(T),(C=k.current)==null||C.setPointerCapture(E.pointerId))},onPointerMove:E=>{const T=M(E);if(T==null){g||b();return}v(T),g&&R(T)},onPointerUp:E=>{var T;w(!1),(T=k.current)==null||T.releasePointerCapture(E.pointerId)},onPointerLeave:()=>{g||b()},children:[$1(o.bins,"var(--border-strong)",{flip:h}),U1(l,N,{flip:h,color:"var(--muted)"}),Ah(y,{color:"var(--highlight)",strokeWidth:.8}),L!=null&&Ah(L,{color:"var(--text-secondary)",strokeWidth:.6,dashed:!0})]}),p!=null&&f!=null&&a.jsx("div",{className:"pointer-events-none absolute right-full mr-2 px-1.5 py-0.5 rounded border border-border bg-surface text-[10px] text-text shadow",style:{top:`calc(${(f*100).toFixed(2)}% - 8px)`},children:H1(p)})]})}function z1(e,t){if(!e.length)return null;const n=Math.min(...e);let r=Math.max(...e);n===r&&(r=n+1);const s=new Array(t).fill(0),i=t/(r-n);for(const o of e){const l=Math.max(0,Math.min(t-1,Math.floor((o-n)*i)));s[l]+=1}return{bins:s,min:n,max:r}}function A1(e,t){if(!e.length)return[];const n=[...e].sort((s,i)=>s-i),r=n.length-1;return t.map(s=>{const i=r*s,o=Math.floor(i),l=Math.ceil(i);if(o===l)return n[o];const u=i-o;return n[o]+(n[l]-n[o])*u})}function $1(e,t,n){const r=Math.max(1,...e),s=100/e.length,i=(n==null?void 0:n.flip)??!1;return e.map((o,l)=>{const u=Math.max(.8,o/r*10),c=(i?e.length-1-l:l)*s;return a.jsx("rect",{x:10-u,y:c,width:u,height:Math.max(.2,s-.2),fill:t,opacity:.9},`sb-${l}`)})}function U1(e,t,n){const r=(n==null?void 0:n.flip)??!1,s=n==null?void 0:n.color;return e.map((i,o)=>{const l=W1(i,t,r),u=o===2;return a.jsx("line",{x1:0,y1:l,x2:10,y2:l,stroke:s,strokeWidth:u?.8:.5,opacity:u?.9:.6,vectorEffect:"non-scaling-stroke"},`qt-${o}-${i}`)})}function Ah(e,t){return a.jsx("line",{x1:0,y1:e,x2:10,y2:e,stroke:t.color,strokeWidth:t.strokeWidth??.6,strokeDasharray:t.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function B1(e,t){if(!e.length)return null;const n=Math.round(Ir(t)*(e.length-1)),r=e[n];if(r!=null)return r;for(let s=1;s<e.length;s++){const i=n-s;if(i>=0&&e[i]!=null)return e[i];const o=n+s;if(o<e.length&&e[o]!=null)return e[o]}return null}function W1(e,t,n){const r=t.max-t.min;if(r===0)return 0;const s=Ir((e-t.min)/r);return(n?1-s:s)*100}function $h(e){return Ir(e)*100}function Ir(e){return e<0?0:e>1?1:e}function H1(e){if(e==null||Number.isNaN(e))return"-";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Fr(e,t){const[n,r]=d.useState(null),s=d.useRef(null);return d.useEffect(()=>{if(!e){if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}r(null);return}let i=!0;return e().then(o=>{if(!i)return;const l=URL.createObjectURL(o);if(s.current)try{URL.revokeObjectURL(s.current)}catch{}s.current=l,r(l)}).catch(()=>{}),()=>{i=!1}},t),d.useEffect(()=>()=>{if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}},[]),n}function V1(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[o,l]=d.useState(1),[u,c]=d.useState(!1),[f,m]=d.useState(!1),[g,w]=d.useState(!1),k=d.useRef(null),N=d.useRef(null),L=()=>{const p=k.current,v=N.current;if(!p||!v||!v.naturalWidth||!v.naturalHeight)return;const b=p.getBoundingClientRect(),R=b.width/v.naturalWidth,M=b.height/v.naturalHeight,E=Math.min(1,Math.min(R,M));l(E);const T=v.naturalWidth*E,C=v.naturalHeight*E;r((b.width-T)/2),i((b.height-C)/2)};return d.useEffect(()=>{const p=k.current;if(!p)return;const v=new ResizeObserver(()=>{try{requestAnimationFrame(()=>L())}catch{L()}});return v.observe(p),()=>v.disconnect()},[]),{scale:e,setScale:t,tx:n,setTx:r,ty:s,setTy:i,base:o,setBase:l,ready:u,setReady:c,dragging:f,setDragging:m,visible:g,setVisible:w,containerRef:k,imgRef:N,fitAndCenter:L,handleWheel:p=>{p.preventDefault();const v=p.deltaY>0?-1:1,b=1.2,R=.05,M=8,E=k.current;if(!E)return;const T=E.getBoundingClientRect(),C=p.clientX-T.left,P=p.clientY-T.top;t(W=>{const D=Math.min(M,Math.max(R,W*Math.pow(b,v))),z=D/W;return r(oe=>C-z*(C-oe)),i(oe=>P-z*(P-oe)),Number(D.toFixed(4))})},handleMouseDown:p=>{const v=k.current,b=N.current;if(!v||!b||p.target!==b)return;const M=v.getBoundingClientRect();if(p.clientX<M.left||p.clientX>M.right||p.clientY<M.top||p.clientY>M.bottom)return;p.preventDefault(),p.stopPropagation(),m(!0);const E=p.clientX,T=p.clientY,C=n,P=s,W=z=>{r(C+(z.clientX-E)),i(P+(z.clientY-T))},D=()=>{window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",D),m(!1)};window.addEventListener("mousemove",W),window.addEventListener("mouseup",D)}}}function Q1({path:e,onClose:t,onNavigate:n,onZoomChange:r,requestedZoomPercent:s,onZoomRequestConsumed:i}){const{scale:o,setScale:l,tx:u,setTx:c,ty:f,setTy:m,base:g,ready:w,setReady:k,dragging:N,visible:L,setVisible:y,containerRef:h,imgRef:p,fitAndCenter:v,handleWheel:b,handleMouseDown:R}=V1(),M=Fr(()=>ge.getFile(e),[e]),E=Fr(()=>ge.getThumb(e),[e]),T=d.useCallback(()=>{y(!1),window.setTimeout(t,110)},[t,y]);return d.useEffect(()=>{requestAnimationFrame(()=>{var C;y(!0),(C=h.current)==null||C.focus()})},[e]),d.useEffect(()=>{const C=P=>{P.key==="Escape"?T():(P.key==="ArrowRight"||P.key==="d")&&n?n(1):(P.key==="ArrowLeft"||P.key==="a")&&n&&n(-1)};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[t,n]),d.useEffect(()=>{k(!1)},[M]),d.useEffect(()=>{r&&r(g*o*100)},[g,o,r]),d.useEffect(()=>{if(s==null)return;const C=h.current;if(!C){i&&i();return}const P=Math.max(.05,Math.min(8,s/100/Math.max(1e-6,g))),W=C.getBoundingClientRect(),D=W.width/2,z=W.height/2;l(oe=>{const U=P/oe;return c(ue=>D-U*(D-ue)),m(ue=>z-U*(z-ue)),Number(P.toFixed(4))}),i&&i()},[s,g,i]),a.jsxs("div",{ref:h,role:"dialog","aria-modal":!0,"aria-label":"Image viewer",tabIndex:-1,className:`toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] flex items-start justify-start bg-panel z-viewer overflow-hidden transition-opacity duration-[110ms] ease-out cursor-grab focus:outline-none focus-visible:outline-none ${N?"cursor-grabbing select-none":""} ${L?"opacity-100":"opacity-0"}`,style:{outline:"none"},onClick:T,onWheel:b,onMouseDown:R,onKeyDown:C=>{C.key==="Tab"&&C.preventDefault()},children:[a.jsxs("button",{"aria-label":"Close",onClick:C=>{C.stopPropagation(),T()},className:"btn btn-sm absolute top-3 right-3 z-10",title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]}),E&&a.jsx("img",{src:E,alt:"thumb",className:"absolute top-0 left-0 max-w-none max-h-none object-contain pointer-events-none transition-opacity duration-[110ms] ease-out",draggable:!1,onDragStart:C=>C.preventDefault(),style:{transform:`translate(${u}px, ${f}px) scale(${g})`,transformOrigin:"0 0",opacity:w?0:.5,filter:"blur(0.25px)"}}),M&&a.jsx("img",{ref:p,src:M,alt:"viewer",className:"max-w-none max-h-none object-contain transition-opacity duration-[110ms] ease-out will-change-transform select-none",draggable:!1,onDragStart:C=>{C.preventDefault()},onLoad:C=>{v(),l(1);try{requestAnimationFrame(()=>k(!0))}catch{k(!0)}},onClick:C=>C.stopPropagation(),style:{transform:`translate(${u}px, ${f}px) scale(${g*o})`,transformOrigin:"0 0",opacity:w?.99:0,WebkitUserDrag:"none"}})]})}function Rd(e){return!e||!(e instanceof HTMLElement)?!1:e.closest('input, textarea, [contenteditable="true"]')!==null}const K1=1.2,q1=.05,Y1=8;function G1(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[o,l]=d.useState(0),[u,c]=d.useState(0),[f,m]=d.useState(1),[g,w]=d.useState(1),[k,N]=d.useState(!1),L=d.useRef(null),y=d.useRef(null),h=d.useRef(null),p=d.useCallback(()=>{const M=L.current;if(!M)return;const E=M.getBoundingClientRect(),T=(C,P,W,D)=>{if(!C||!C.naturalWidth||!C.naturalHeight)return;const z=E.width/C.naturalWidth,oe=E.height/C.naturalHeight,U=Math.min(1,Math.min(z,oe)),ue=C.naturalWidth*U,F=C.naturalHeight*U;P(U),W((E.width-ue)/2),D((E.height-F)/2)};T(y.current,m,r,i),T(h.current,w,l,c)},[]);d.useEffect(()=>{const M=L.current;if(!M)return;const E=new ResizeObserver(()=>{try{requestAnimationFrame(()=>p())}catch{p()}});return E.observe(M),()=>E.disconnect()},[p]);const v=d.useCallback(()=>{t(1),p()},[p]),b=d.useCallback(M=>{M.preventDefault();const E=M.deltaY>0?-1:1,T=L.current;if(!T)return;const C=T.getBoundingClientRect(),P=M.clientX-C.left,W=M.clientY-C.top;t(D=>{const z=Math.min(Y1,Math.max(q1,D*Math.pow(K1,E))),oe=z/D;return r(U=>P-oe*(P-U)),i(U=>W-oe*(W-U)),l(U=>P-oe*(P-U)),c(U=>W-oe*(W-U)),Number(z.toFixed(4))})},[]),R=d.useCallback(M=>{if(M.button!==0||!L.current)return;M.preventDefault(),N(!0);const T=M.clientX,C=M.clientY,P=n,W=s,D=o,z=u,oe=ue=>{const F=ue.clientX-T,V=ue.clientY-C;r(P+F),i(W+V),l(D+F),c(z+V)},U=()=>{window.removeEventListener("pointermove",oe),window.removeEventListener("pointerup",U),N(!1)};window.addEventListener("pointermove",oe),window.addEventListener("pointerup",U)},[n,s,o,u]);return{scale:e,baseA:f,baseB:g,txA:n,tyA:s,txB:o,tyB:u,dragging:k,containerRef:L,imgARef:y,imgBRef:h,fitAndCenter:p,resetView:v,handleWheel:b,handlePointerDown:R}}function X1({aItem:e,bItem:t,index:n,total:r,canPrev:s,canNext:i,onNavigate:o,onClose:l}){const u=d.useRef(null),[c,f]=d.useState(50),[m,g]=d.useState(!1),[w,k]=d.useState(!1),{scale:N,baseA:L,baseB:y,txA:h,tyA:p,txB:v,tyB:b,dragging:R,containerRef:M,imgARef:E,imgBRef:T,fitAndCenter:C,resetView:P,handleWheel:W,handlePointerDown:D}=G1(),z=(e==null?void 0:e.path)??null,oe=(t==null?void 0:t.path)??null,U=(e==null?void 0:e.name)??z??"Select an image",ue=(t==null?void 0:t.name)??oe??"Select another image";d.useEffect(()=>{requestAnimationFrame(()=>{var Y;return(Y=u.current)==null?void 0:Y.focus()})},[z,oe]),d.useEffect(()=>{P(),g(!1),k(!1)},[z,oe,P]),d.useEffect(()=>{const Y=ne=>{if(!Rd(ne.target)){if(ne.key==="Escape"){ne.preventDefault(),l();return}if((ne.key==="ArrowRight"||ne.key==="d")&&i){ne.preventDefault(),o(1);return}(ne.key==="ArrowLeft"||ne.key==="a")&&s&&(ne.preventDefault(),o(-1))}};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[l,o,s,i]);const F=Fr(z?()=>ge.getFile(z):null,[z]),V=Fr(oe?()=>ge.getFile(oe):null,[oe]),q=Fr(z?()=>ge.getThumb(z):null,[z]),he=Fr(oe?()=>ge.getThumb(oe):null,[oe]),fe=d.useCallback(Y=>Math.min(95,Math.max(5,Y)),[]),Ne=d.useCallback(Y=>{const ne=Y.target;ne!=null&&ne.closest(".compare-label")||ne!=null&&ne.closest(".compare-divider-hit")||D(Y)},[D]),H=d.useCallback(Y=>{const ne=M.current;if(!ne)return;Y.preventDefault(),Y.stopPropagation();const me=ne.getBoundingClientRect(),He=Y.currentTarget;He.setPointerCapture(Y.pointerId);const Ve=kt=>{const Me=(kt.clientX-me.left)/me.width*100;f(fe(Me))},qe=kt=>{He.releasePointerCapture(kt.pointerId),window.removeEventListener("pointermove",Ve),window.removeEventListener("pointerup",qe)};window.addEventListener("pointermove",Ve),window.addEventListener("pointerup",qe)},[fe]);return a.jsxs("div",{ref:u,role:"dialog","aria-modal":!0,"aria-label":"Compare images",tabIndex:-1,className:"toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] bg-panel z-viewer flex flex-col overflow-hidden focus:outline-none",onKeyDown:Y=>{Y.key==="Tab"&&Y.preventDefault()},children:[a.jsxs("div",{className:"compare-header flex items-center gap-3 px-3 py-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Compare"}),a.jsx("div",{className:"text-xs text-muted",children:r>=2?`${n+1}-${Math.min(n+2,r)} of ${r}`:"Select 2 images"}),a.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(-1),disabled:!s,title:"Previous (Left Arrow or A)",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Prev"]}),a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(1),disabled:!i,title:"Next (Right Arrow or D)",children:["Next",a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"btn btn-sm",onClick:l,title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]})]})]}),a.jsx("div",{className:"flex-1 min-h-0 p-3 bg-panel",children:a.jsx("div",{ref:M,className:`compare-stage ${R?"is-dragging":""}`,onWheel:W,onPointerDown:Ne,children:!e||!t?a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-sm text-muted",children:"Select 2 images to compare."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"compare-label left-3",children:[a.jsx("span",{className:"compare-label-tag",children:"A"}),a.jsx("span",{className:"truncate",title:e.path,children:U})]}),a.jsxs("div",{className:"compare-label right-3",children:[a.jsx("span",{className:"compare-label-tag",children:"B"}),a.jsx("span",{className:"truncate",title:t.path,children:ue})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 ${100-c}% 0 0)`},children:[q&&a.jsx("img",{src:q,alt:"thumb A",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:Y=>Y.preventDefault(),style:{transform:`translate(${h}px, ${p}px) scale(${L})`,transformOrigin:"0 0",opacity:m?0:.5}}),F&&a.jsx("img",{ref:E,src:F,alt:"compare A",className:"compare-image",draggable:!1,onDragStart:Y=>Y.preventDefault(),onLoad:()=>{C();try{requestAnimationFrame(()=>g(!0))}catch{g(!0)}},style:{transform:`translate(${h}px, ${p}px) scale(${L*N})`,transformOrigin:"0 0",opacity:m?.99:0}})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 0 0 ${c}%)`},children:[he&&a.jsx("img",{src:he,alt:"thumb B",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:Y=>Y.preventDefault(),style:{transform:`translate(${v}px, ${b}px) scale(${y})`,transformOrigin:"0 0",opacity:w?0:.5}}),V&&a.jsx("img",{ref:T,src:V,alt:"compare B",className:"compare-image",draggable:!1,onDragStart:Y=>Y.preventDefault(),onLoad:()=>{C();try{requestAnimationFrame(()=>k(!0))}catch{k(!0)}},style:{transform:`translate(${v}px, ${b}px) scale(${y*N})`,transformOrigin:"0 0",opacity:w?.99:0}})]}),a.jsxs("div",{className:"compare-divider-hit",style:{left:`${c}%`},onPointerDown:H,children:[a.jsx("div",{className:"compare-divider-line"}),a.jsx("div",{className:"compare-divider-handle"})]})]})})})]})}function ea(){const[e,t]=d.useState(a1());return d.useEffect(()=>l1(t),[]),e}const Gi=e=>["item",e],J1={v:1,tags:[],notes:"",version:1,updated_at:"",updated_by:"web"},Zt=new Map,el=new Map,vc=new Map,Ld=new Map;let Uh=0;const Sn=new Map,wi=new Map,Z1=12e3,yc=new Set,xc=new Set;let Td={state:"idle"},Xi=null,wc=0;function Oo(e){Td=e;for(const t of yc)t(e)}function On(){const e=Sn.size>0,t=Zt.size+el.size+wc;if(e){Oo({state:"error",message:"Conflict detected"});return}if(Xi){Oo({state:"error",message:Xi});return}if(t>0){Oo({state:"syncing"});return}Oo({state:"idle"})}function _d(){let e=null;for(const t of vc.values())e=e==null?t:Math.min(e,t);for(const t of Ld.values())e=e==null?t:Math.min(e,t);return e}function _l(){const e=_d();for(const t of xc)t(e)}function Pl(e){Xi=e,On()}function hv(){Xi&&(Xi=null,On())}function Bh(e){wc=Math.max(0,wc+e),On()}function eS(){Uh+=1;const e=Uh;return Ld.set(e,Date.now()),_l(),e}function tS(e){e!=null&&Ld.delete(e)&&_l()}function ta(e){const t=wi.get(e);if(!t||!t.size)return;const n=Sn.get(e)??null;for(const r of t)r(n)}function Wh(e){return Sn.get(e)??null}function na(e){Sn.delete(e)&&(ta(e),On())}function nS(e,t){Sn.set(e,t),ta(e),On()}function rS(e,t){const n=wi.get(e)??new Set;return n.add(t),wi.set(e,n),t(Sn.get(e)??null),()=>{const r=wi.get(e);r&&(r.delete(t),r.size||wi.delete(e))}}function sS(e){const[t,n]=d.useState(()=>e?Wh(e):null);return d.useEffect(()=>{if(!e){n(null);return}return n(Wh(e)),rS(e,n)},[e]),t}function iS(e){return yc.add(e),e(Td),()=>{yc.delete(e)}}function oS(){const[e,t]=d.useState(Td);return d.useEffect(()=>iS(t),[]),e}function lS(e){return xc.add(e),e(_d()),()=>{xc.delete(e)}}function aS(){const[e,t]=d.useState(()=>_d()),[n,r]=d.useState(()=>e==null?null:Date.now()-e);return d.useEffect(()=>lS(t),[]),d.useEffect(()=>{if(e==null){r(null);return}r(Date.now()-e);const s=window.setInterval(()=>{r(Date.now()-e)},1e3);return()=>window.clearInterval(s)},[e]),n}function Sc(e){const t={};return Object.prototype.hasOwnProperty.call(e,"star")&&(t.set_star=e.star??null),Object.prototype.hasOwnProperty.call(e,"notes")&&(t.set_notes=e.notes??""),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.set_tags=Array.isArray(e.tags)?e.tags:[]),t}function kc(e){var t,n;return e.set_star!==void 0||e.set_notes!==void 0||e.set_tags!==void 0||(((t=e.add_tags)==null?void 0:t.length)??0)>0||(((n=e.remove_tags)==null?void 0:n.length)??0)>0}function mi(e){const t=[],n=new Set;for(const r of e??[]){if(typeof r!="string")continue;const s=r.trim();!s||n.has(s)||(n.add(s),t.push(s))}return t}function uS(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}function cS(e,t){if(e.set_star!==void 0&&(t.star??null)!==e.set_star||e.set_notes!==void 0&&(t.notes??"")!==(e.set_notes??""))return!1;if(e.set_tags!==void 0){const r=mi(e.set_tags),s=mi(t.tags);return uS(r,s)}const n=mi(t.tags);for(const r of mi(e.add_tags))if(!n.includes(r))return!1;for(const r of mi(e.remove_tags))if(n.includes(r))return!1;return!0}function mv(e,t,n){if(n instanceof wn&&n.status===409){const r=n.body;if(r!=null&&r.current)return nS(e,{path:e,current:r.current,pending:t,receivedAt:new Date().toISOString()}),!0}return!1}function dS(e,t){const n=Sn.get(e);if(n){if(cS(n.pending,t)){na(e);return}Sn.set(e,{...n,current:t}),ta(e),On()}}function fS(e){const t=ea();return Jl({queryKey:Gi(e),queryFn:()=>ge.getSidecar(e),enabled:!!e,staleTime:3e4,gcTime:5*6e4,retry:2,refetchInterval:t?Z1:!1,refetchIntervalInBackground:t})}function hS(e){const t=rs();return Dw({mutationFn:async({patch:n,baseVersion:r,idempotencyKey:s})=>{const i=Sc(n);if(!kc(i))return t.getQueryData(Gi(e))??J1;const o={...i,base_version:r};try{return await ge.patchSidecar(e,o,{idempotencyKey:s??Yi("patch"),ifMatch:r})}catch(l){throw mv(e,i,l),l}},retry:(n,r)=>r instanceof wn&&r.status===409?!1:n<2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),4e3),onMutate:()=>(hv(),Bh(1),{inflightId:eS()}),onSuccess:n=>{na(e),t.setQueryData(Gi(e),n)},onError:n=>{n instanceof wn&&n.status===409||(n instanceof wn?Pl(n.message):Pl("Failed to save"))},onSettled:(n,r,s,i)=>{Bh(-1),tS(i==null?void 0:i.inflightId)}})}const mS=6;async function Hh(e,t){if(!e.length)return;let n=0;const r=[],s=async()=>{for(;n<e.length;){const o=n++,l=e[o];try{await pv(l,t)}catch(u){r.push({path:l,error:u}),console.error(`[bulkUpdateSidecars] Failed for ${l}:`,u)}}},i=Array.from({length:Math.min(mS,e.length)},()=>s());if(await Promise.all(i),r.length===e.length)throw new Error(`All ${e.length} sidecar updates failed`)}async function pv(e,t){const n=Zt.get(e)||{};Zt.set(e,{...n,...t}),hv(),On();const r=el.get(e);if(r)return r;vc.set(e,Date.now()),_l();const s=(async()=>{try{for(;Zt.has(e);){const i=Zt.get(e);if(!i)break;const o=Sc(i);if(!kc(o)){Zt.get(e)===i&&Zt.delete(e);continue}let l=1;try{l=(await ge.getSidecar(e)).version??1}catch{l=1}const u={...o,base_version:l};try{await ge.patchSidecar(e,u,{idempotencyKey:Yi("patch"),ifMatch:l}),na(e),Zt.get(e)===i&&Zt.delete(e)}catch(c){if(mv(e,o,c)){const m=Zt.get(e);if(m&&m!==i){const g=Sc(m);if(kc(g)){const w=Sn.get(e);w&&(Sn.set(e,{...w,pending:g}),ta(e))}}Zt.delete(e)}else c instanceof wn?Pl(c.message):Pl("Failed to save");throw c}}}finally{el.delete(e),vc.delete(e),_l(),On()}})();return el.set(e,s),On(),s}function Ja(e){const t=["B","KB","MB","GB","TB"];let n=0,r=e;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${r.toFixed(1)} ${t[n]}`}function Za(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function pS(e,t=28){if(e.length<=t)return e;const n=Math.max(4,Math.floor((t-1)/2));return`${e.slice(0,n)}${e.slice(-n)}`}const gS=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});function vS(e){const t=e.trim();return!t||/[zZ]|[+-]\d{2}:?\d{2}$/.test(t)?t:`${t.includes("T")?t:t.replace(" ","T")}Z`}function Vh(e){if(!e)return null;const t=Date.parse(vS(e));return Number.isFinite(t)?t:null}function yS(e,t=Date.now()){const n=Math.max(0,t-e),r=Math.max(1,Math.floor(n/1e3));if(r<60)return`${r} second${r===1?"":"s"} ago`;const s=Math.floor(r/60);if(s<60)return`${s} minute${s===1?"":"s"} ago`;const i=Math.floor(s/60);return`${i} hour${i===1?"":"s"} ago`}function xS(e){return gS.format(new Date(e))}function tl(e){if(Array.isArray(e))return e.map(tl);if(e&&typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,tl(n)]));if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")||t.startsWith('"')&&t.endsWith('"'))try{const r=JSON.parse(t);return tl(r)}catch{return e}}return e}function eu(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function wS(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Qh(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}function SS(e){const t=/(\"(\\u[a-fA-F0-9]{4}|\\[^u]|[^\\"])*\"(?:\s*:)?|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\btrue\b|\bfalse\b|\bnull\b)/g;let n="",r=0;for(const s of e.matchAll(t)){const i=s.index??0,o=s[0];n+=eu(e.slice(r,i));let l="var(--json-fallback)";o.startsWith('"')&&o.trimEnd().endsWith(":")?l="var(--json-key)":o.startsWith('"')?l="var(--json-string)":/true|false|null/.test(o)?l="var(--json-literal)":l="var(--json-number)",n+=`<span style="color:${l}">${eu(o)}</span>`,r=i+o.length}return n+=eu(e.slice(r)),n}const kS=["overview","basics","metadata","notes"],Kh="lenslet.inspector.sections",qh="lenslet.inspector.metricsExpanded",tu=12,CS={overview:!0,metadata:!0,basics:!0,notes:!0};function Do({title:e,open:t,onToggle:n,actions:r,children:s,contentClassName:i}){const[o,l]=d.useState(t),[u,c]=d.useState(t?"open":"closed");return d.useEffect(()=>{if(t){l(!0);const m=window.requestAnimationFrame(()=>c("open"));return()=>window.cancelAnimationFrame(m)}c("closing");const f=window.setTimeout(()=>{l(!1),c("closed")},140);return()=>window.clearTimeout(f)},[t]),a.jsxs("div",{className:"border-b border-border/60",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[a.jsxs("button",{type:"button",onClick:n,"aria-expanded":t,className:"flex items-center gap-2 inspector-section-title hover:text-text transition-colors",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform ${t?"rotate-90":""}`,"aria-hidden":"true",children:a.jsx("path",{d:"m9 18 6-6-6-6"})}),a.jsx("span",{children:e})]}),r]}),o&&a.jsx("div",{className:"inspector-section-body","data-state":u,"aria-hidden":!t,children:a.jsx("div",{className:i??"px-3 pb-3",children:s})})]})}function bS({path:e,selectedPaths:t=[],items:n=[],onResize:r,onStarChanged:s,sortSpec:i,onFindSimilar:o,embeddingsAvailable:l=!1,embeddingsLoading:u=!1}){const c=!!e,{data:f,isLoading:m}=fS(e??""),g=hS(e??""),w=rs(),[k,N]=d.useState(CS),L=d.useCallback(A=>{N(ie=>({...ie,[A]:!ie[A]}))},[]),[y,h]=d.useState(!1),p=t.length>1,v=!!o&&l&&!p,b=o?l?p?"Select a single image to search.":null:u?"Loading embeddings...":"No embeddings detected.":null,[R,M]=d.useState(""),[E,T]=d.useState(""),[C,P]=d.useState(""),[W,D]=d.useState(null),[z,oe]=d.useState("idle"),[U,ue]=d.useState(!1),[F,V]=d.useState(null),[q,he]=d.useState({}),Ne=d.useMemo(()=>{const A=n.find(ie=>ie.path===e);return A&&A.star!==void 0?A.star:null},[n,e])??(f==null?void 0:f.star)??null,H=sS(p?null:e),Y={tags:!!(H!=null&&H.pending.set_tags),notes:(H==null?void 0:H.pending.set_notes)!==void 0,star:(H==null?void 0:H.pending.set_star)!==void 0},ne=d.useMemo(()=>{const A=new Set(t);return n.filter(ie=>A.has(ie.path))},[n,t]),me=d.useMemo(()=>ne.reduce((A,ie)=>A+(ie.size||0),0),[ne]);d.useEffect(()=>{f&&(M((f.tags||[]).join(", ")),T(f.notes||"")),P(""),D(null),oe("idle"),ue(!1)},[f==null?void 0:f.updated_at,e]);const He=d.useCallback(A=>{if(p&&t.length){Hh(t,A);return}if(!e)return;const ie=(f==null?void 0:f.version)??1;g.mutate({patch:A,baseVersion:ie,idempotencyKey:Yi("patch")})},[p,t,e,f==null?void 0:f.version,g]),Ve=d.useCallback(()=>{if(!H||!e)return;const A={};H.pending.set_tags!==void 0&&(A.tags=Qh(R)),H.pending.set_notes!==void 0&&(A.notes=E),H.pending.set_star!==void 0&&(A.star=Ne??null);const ie=H.current.version??1;g.mutate({patch:A,baseVersion:ie,idempotencyKey:Yi("patch")})},[H,e,R,E,Ne,g]),qe=d.useCallback(()=>{if(!H||!e)return;const A=H.current;M((A.tags||[]).join(", ")),T(A.notes||""),w.setQueryData(Gi(e),A),na(e),s==null||s([e],A.star??null)},[H,e,w,s]);d.useEffect(()=>{if(!e)return;const A=ie=>{if(Rd(ie.target))return;const le=ie.key;if(!/^[0-5]$/.test(le))return;ie.preventDefault();const ke=le==="0"?null:Number(le);if(p&&t.length){He({star:ke}),s==null||s(t,ke);return}He({star:ke}),s==null||s([e],ke)};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[e,p,t,He,s]);const kt=Fr(e?()=>ge.getThumb(e):null,[e]),Me=e?e.split("/").pop()||e:"",kn=d.useMemo(()=>{var ie;if(Me.includes("."))return Me.slice(Me.lastIndexOf(".")+1).toUpperCase();const A=n.find(le=>le.path===e);return(ie=A==null?void 0:A.type)!=null&&ie.includes("/")?A.type.split("/")[1].toUpperCase():""},[Me,n,e]),Te=d.useMemo(()=>n.find(A=>A.path===e),[n,e]),$t=d.useMemo(()=>e?(Te==null?void 0:Te.source)??e:"",[Te,e]),Wn=d.useCallback(async()=>{if(e){oe("loading"),D(null);try{const A=await ge.getMetadata(e),ie=tl(A.meta),le=JSON.stringify(ie,null,1);P(le),oe("loaded")}catch(A){const ie=A instanceof Error?A.message:"Failed to load metadata";P(ie),D(ie),oe("error")}}},[e]),B=d.useCallback(()=>{var A;C&&((A=navigator.clipboard)==null||A.writeText(C).then(()=>{ue(!0),setTimeout(()=>ue(!1),1200)}).catch(ie=>{const le=ie instanceof Error?ie.message:"Copy failed";D(le)}))},[C]),te=d.useMemo(()=>C?SS(C):"",[C]),se=z==="loading"?"Loading metadata":C||"PNG metadata not loaded yet.",pe=z==="loading",ce=z==="loaded"&&!!C,ve=ce?"h-48":"h-24",Z=pe?"Loading":ce?U?"Copied":"Copy":"Load meta",Q=ce?B:Wn,de=p?null:a.jsx("div",{className:"flex items-center gap-2 text-xs",children:a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[78px]",onClick:Q,disabled:!e||pe,children:Z})});d.useEffect(()=>{try{const A=localStorage.getItem(Kh);if(!A)return;const ie=JSON.parse(A);if(!ie||typeof ie!="object")return;const le={};for(const ke of kS)typeof ie[ke]=="boolean"&&(le[ke]=ie[ke]);Object.keys(le).length>0&&N(ke=>({...ke,...le}))}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(Kh,JSON.stringify(k))}catch{}},[k]),d.useEffect(()=>{try{const A=localStorage.getItem(qh);A==="1"||A==="true"?h(!0):(A==="0"||A==="false")&&h(!1)}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(qh,y?"1":"0")}catch{}},[y]);const be=d.useCallback((A,ie)=>{var le;ie&&((le=navigator.clipboard)==null||le.writeText(ie).then(()=>{V(A),setTimeout(()=>V(ke=>ke===A?null:ke),1e3)}).catch(()=>{}))},[]),Re=d.useCallback((A,ie)=>{if(ie&&!q[A]){const le=ie.offsetHeight;le&&he(ke=>ke[A]?ke:{...ke,[A]:le})}},[q]),Ct="toolbar-offset absolute bottom-0 left-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20";return c?a.jsxs("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:[!p&&a.jsx("div",{className:"p-3 border-b border-border flex justify-center",children:a.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border w-[220px] h-[160px] bg-panel select-none",children:[kt&&a.jsx("img",{src:kt,alt:"thumb",className:"block w-full h-full object-contain"}),!!kn&&a.jsx("div",{className:"absolute top-1.5 left-1.5 bg-surface border border-border text-text text-xs px-1.5 py-0.5 rounded-md select-none",children:kn})]})}),a.jsxs(Do,{title:p?"Selection":"Item",open:k.overview,onToggle:()=>L("overview"),contentClassName:"px-3 pb-3 space-y-2",actions:o&&a.jsx("button",{type:"button",className:"btn btn-sm",onClick:o,disabled:!v,title:b??"Find similar",children:"Find similar"}),children:[p?a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Selected"}),a.jsxs("div",{className:"inspector-field-value",children:[t.length," files"]})]}),a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Total size"}),a.jsx("div",{className:"inspector-field-value",children:Ja(me)})]})]}):a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Filename"}),a.jsx("div",{className:"inspector-field-value break-all",title:Me,children:Me})]}),b&&a.jsx("div",{className:"text-[11px] text-muted",children:b})]}),a.jsxs(Do,{title:"Basics",open:k.basics,onToggle:()=>L("basics"),children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",role:"radiogroup","aria-label":"Star rating",children:[a.jsx("span",{className:"ui-kv-label w-16 shrink-0",children:p?"Rating (all)":"Rating"}),a.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(A=>{const ie=(Ne??0)>=A;return a.jsx("button",{className:`w-6 h-6 flex items-center justify-center rounded-lg border border-border/60 bg-transparent text-[13px] ${ie?"text-star-active":"text-star-inactive"} hover:border-border hover:text-star-hover transition-colors`,onClick:()=>{const le=Ne===A&&!p?null:A;p&&t.length?(s==null||s(t,le),Hh(t,{star:le})):e&&(s==null||s([e],le),pv(e,{star:le}))},title:`${A} star${A>1?"s":""} (key ${A})`,"aria-label":`${A} star${A>1?"s":""}`,"aria-pressed":Ne===A,children:ie?"":""},A)})})]}),!p&&H&&Y.star&&a.jsxs("div",{className:"ui-banner ui-banner-danger mt-2 text-[11px] flex items-center justify-between gap-2",children:[a.jsx("span",{children:"Rating conflict."}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:Ve,children:"Apply again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:qe,children:"Keep theirs"})]})]}),!p&&Te&&a.jsxs("div",{className:"text-[12px] space-y-1.5 leading-relaxed",children:[a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>be("dimensions",`${Te.w}${Te.h}`),children:"Dimensions"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:A=>Re("dimensions",A),style:q.dimensions?{minHeight:q.dimensions}:void 0,children:F==="dimensions"?"Copied":`${Te.w}${Te.h}`})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>be("size",Ja(Te.size)),children:"Size"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:A=>Re("size",A),style:q.size?{minHeight:q.size}:void 0,children:F==="size"?"Copied":Ja(Te.size)})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>be("type",Te.type),children:"Type"}),a.jsx("span",{className:"ui-kv-value break-all text-right inline-block min-w-[80px]",ref:A=>Re("type",A),style:q.type?{minHeight:q.type}:void 0,children:F==="type"?"Copied":Te.type})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>$t&&be("source",$t),children:"Source"}),a.jsx("span",{className:"ui-kv-value inspector-value-clamp break-words text-right max-w-[70%] inline-block min-w-[80px]",ref:A=>Re("source",A),style:q.source?{minHeight:q.source}:void 0,title:$t,children:F==="source"?"Copied":$t})]}),(()=>{const A=Te.metrics||null;if(!A)return null;const ie=Object.entries(A).filter(([,lt])=>lt!=null);if(!ie.length)return null;const le=(i==null?void 0:i.kind)==="metric"?i.key:null,ke=[...ie].sort(([lt],[Hn])=>lt.localeCompare(Hn));let nt=ke;if(le){const lt=ke.findIndex(([Hn])=>Hn===le);lt>0&&(nt=[ke[lt],...ke.slice(0,lt),...ke.slice(lt+1)])}const ss=nt.length>tu,Cn=y||!ss?nt:nt.slice(0,tu),ra=nt.length-tu;return a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"ui-subsection-title mb-1",children:"Metrics"}),a.jsxs("div",{className:"space-y-1",children:[Cn.map(([lt,Hn])=>{const Vn=le===lt;return a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:`w-24 shrink-0 ${Vn?"text-accent font-medium":"ui-kv-label"}`,children:lt}),a.jsx("span",{className:`ui-kv-value text-right ${Vn?"text-accent font-medium":""}`,children:wS(Hn)})]},lt)}),ss&&a.jsx("button",{type:"button",className:"text-[11px] text-muted underline underline-offset-2 hover:text-text",onClick:()=>h(lt=>!lt),"aria-expanded":y,children:y?"Show less":`+${ra} more`})]})]})})()]})]}),!p&&a.jsxs(Do,{title:"Metadata",open:k.metadata,onToggle:()=>L("metadata"),actions:de,children:[a.jsx("pre",{className:`ui-code-block ${ve} overflow-auto whitespace-pre-wrap`,children:ce?a.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:te}}):se}),W&&a.jsx("div",{className:"text-[11px] text-danger mt-1 break-words",children:W})]}),a.jsxs(Do,{title:"Notes & Tags",open:k.notes,onToggle:()=>L("notes"),contentClassName:"px-3 pb-3 space-y-2",children:[!p&&H&&(Y.tags||Y.notes)&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Conflicting edits detected."}),a.jsx("div",{className:"text-[11px] text-muted mt-0.5",children:"Your changes were not saved because this item was updated elsewhere."}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:Ve,children:"Apply my changes again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:qe,children:"Keep theirs"})]})]}),a.jsx("textarea",{className:"ui-textarea inspector-input w-full scrollbar-thin",placeholder:"Add notes",value:E,onChange:A=>T(A.target.value),onBlur:()=>{He({notes:E})},"aria-label":p?"Notes for selected items":"Notes"}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:p?"Tags (apply to all, comma-separated)":"Tags (comma-separated)"}),a.jsx("input",{className:"ui-input inspector-input w-full",placeholder:"tag1, tag2",value:R,onChange:A=>M(A.target.value),onBlur:()=>{He({tags:Qh(R)})},"aria-label":p?"Tags for selected items":"Tags"})]})]}),a.jsx("div",{className:Ct,onMouseDown:r})]}):a.jsx("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:a.jsx("div",{className:Ct,onMouseDown:r})})}function ES({open:e,embeddings:t,rejected:n=[],selectedPath:r,embeddingsLoading:s=!1,embeddingsError:i,onClose:o,onSearch:l}){const[u,c]=d.useState(""),[f,m]=d.useState("path"),[g,w]=d.useState(""),[k,N]=d.useState(""),[L,y]=d.useState("50"),[h,p]=d.useState(""),[v,b]=d.useState(null),[R,M]=d.useState(!1),E=d.useRef(null),T=d.useRef(null),C=d.useMemo(()=>t.find(U=>U.name===u)??t[0]??null,[t,u]);d.useEffect(()=>{e&&(b(null),t.length>0&&!t.some(U=>U.name===u)&&c(t[0].name),r?(m("path"),w(r)):(m("vector"),w("")))},[e,t,u,r]),d.useEffect(()=>{if(!e)return;const U=f==="vector"?T.current:E.current,ue=window.requestAnimationFrame(()=>U==null?void 0:U.focus());return()=>window.cancelAnimationFrame(ue)},[e,f]);const P=d.useCallback(async()=>{if(b(null),!t.length){b("No embeddings available for similarity search.");return}if(!C){b("Select an embedding to search.");return}const U=g.trim(),ue=k.trim(),F=Number(L);if(!Number.isFinite(F)||F<=0){b("Top K must be a positive number.");return}const V=Math.min(1e3,Math.max(1,Math.floor(F))),q=h.trim()===""?null:Number(h);if(q!=null&&!Number.isFinite(q)){b("Min score must be a valid number.");return}if(f==="path"&&!U){b("Select an image path for the query.");return}if(f==="vector"&&!ue){b("Paste a base64 vector for the query.");return}const he={embedding:C.name,query_path:f==="path"?U:null,query_vector_b64:f==="vector"?ue:null,top_k:V,min_score:q};M(!0);try{await l(he),o()}catch(fe){fe instanceof wn||fe instanceof Error?b(fe.message):b("Failed to run similarity search.")}finally{M(!1)}},[t.length,C,g,k,L,h,f,l,o]);d.useEffect(()=>{if(!e)return;const U=ue=>{if(ue.key==="Escape"){ue.preventDefault(),o();return}(ue.ctrlKey||ue.metaKey)&&ue.key==="Enter"&&(ue.preventDefault(),P())};return window.addEventListener("keydown",U),()=>window.removeEventListener("keydown",U)},[e,o,P]);const W=d.useCallback(()=>{var U;r&&(m("path"),w(r),(U=E.current)==null||U.focus())},[r]);if(!e)return null;const D=t.map(U=>({value:U.name,label:U.name})),z=n.length>0,oe=n.slice(0,3);return a.jsx("div",{className:"fixed inset-0 z-[var(--z-overlay)] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",onClick:U=>{U.target===U.currentTarget&&o()},children:a.jsxs("div",{className:"w-full max-w-2xl rounded-lg border border-border bg-panel shadow-[0_20px_50px_rgba(0,0,0,0.55)]",onClick:U=>U.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Find similar",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-text",children:"Find similar"}),a.jsx("div",{className:"text-xs text-muted",children:"Search with embeddings"})]}),a.jsx("button",{className:"btn btn-sm",onClick:o,"aria-label":"Close",children:"Close"})]}),a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[i&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:i}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Embedding"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fc,{value:(C==null?void 0:C.name)??"",onChange:c,options:D,placeholder:s?"Loading embeddings...":"Select embedding",disabled:!t.length,triggerClassName:"min-w-[180px]"}),C&&a.jsxs("span",{className:"text-xs text-muted",children:[C.dimension," dims, ",C.metric,", ",C.dtype]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Query mode"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",className:`btn btn-sm ${f==="path"?"btn-active":""}`,onClick:()=>m("path"),"aria-pressed":f==="path",children:"Selected image"}),a.jsx("button",{type:"button",className:`btn btn-sm ${f==="vector"?"btn-active":""}`,onClick:()=>m("vector"),"aria-pressed":f==="vector",children:"Vector input"})]})]}),f==="path"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Image path"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:E,type:"text",className:"input w-full",value:g,onChange:U=>w(U.target.value),placeholder:r?"Selected image path":"Select an image first"}),a.jsx("button",{type:"button",className:"btn btn-sm",onClick:W,disabled:!r,title:r?"Use selected image":"Select an image first",children:"Use selected"})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Vector (base64 float32)"}),a.jsx("textarea",{ref:T,className:"ui-textarea w-full font-mono text-[11px]",rows:5,value:k,onChange:U=>N(U.target.value),placeholder:"Paste base64-encoded float32 vector"}),a.jsx("div",{className:"text-[11px] text-muted",children:"Base64 of little-endian float32. Length must match embedding dimension."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Top K"}),a.jsx("input",{type:"number",min:1,max:1e3,step:1,className:"input ui-number w-full",value:L,onChange:U=>y(U.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Min score"}),a.jsx("input",{type:"number",step:.01,className:"input ui-number w-full",value:h,onChange:U=>p(U.target.value),placeholder:"Optional"})]})]}),z&&a.jsxs("div",{className:"ui-banner text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Skipped columns"}),a.jsxs("div",{className:"mt-1 space-y-1 text-muted",children:[oe.map(U=>a.jsxs("div",{children:[U.name,": ",U.reason]},U.name)),n.length>oe.length&&a.jsxs("div",{children:["+",n.length-oe.length," more"]})]})]}),v&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:v})]}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-border",children:[a.jsx("div",{className:"text-xs text-muted",children:C?`Metric: ${C.metric}`:"Metric: cosine"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:o,disabled:R,children:"Cancel"}),a.jsx("button",{className:"btn btn-sm btn-active",onClick:P,disabled:R||!t.length,children:R?"Searching...":"Find similar"})]})]})]})})}const NS=(e,t=!1)=>t?["folder",e,"recursive"]:["folder",e],jS=15e3;function MS(e,t=!1){return ge.getFolder(e,void 0,t)}function gv(e,t=!1){const n=ea();return Jl({queryKey:NS(e,t),queryFn:()=>MS(e,t),staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:r=>Math.min(1e3*Math.pow(2,r),5e3),refetchOnWindowFocus:!1,refetchInterval:n?jS:!1,refetchIntervalInBackground:n})}const RS=(e,t)=>["search",e,t],LS=2e4;function TS(e,t){const n=ea();return Jl({enabled:!!e.trim(),queryKey:RS(e,t),queryFn:()=>ge.search(e,t),staleTime:3e3,gcTime:6e4,placeholderData:r=>r,retry:1,refetchInterval:n?LS:!1,refetchIntervalInBackground:n})}const _S=()=>["embeddings"];function PS(){return Jl({queryKey:_S(),queryFn:ge.getEmbeddings,staleTime:6e4,gcTime:5*6e4,retry:1,refetchOnWindowFocus:!1})}const IS=/^[\/@a-zA-Z0-9._\-\/]{1,512}$/,FS=[".jpg",".jpeg",".png",".webp"];function ln(e){try{const t=decodeURI(e||""),r=(t.startsWith("/")?t:`/${t}`).replace(/\/{2,}/g,"/"),s=r.length>1?r.replace(/\/$/,""):r;return IS.test(s)?s:"/"}catch{return"/"}}function Yh(){return(window.location.hash||"").replace(/^#/,"")}function Gh(e){const t=ln(e),n=`#${encodeURI(t)}`;window.location.hash!==n&&(window.location.hash=n)}function zo(e){const t=ln(e),n=`#${encodeURI(t)}`;if(window.location.hash!==n){const r=`${window.location.pathname}${window.location.search}${n}`;window.history.replaceState(window.history.state,"",r)}}function OS(e){const n=ln(e).toLowerCase();return FS.some(r=>n.endsWith(r))}function vv(e,t){const n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,""),s=[n,r].filter(Boolean).join("/");return s.startsWith("/")?s:`/${s}`}function Xh(e){const n=ln(e).split("/").filter(Boolean);return n.length<=1?"/":"/"+n.slice(0,-1).join("/")}function DS(e){return e.endsWith("/_trash_")}const zS=new Set([0,1,2,3,4,5]),Pd=new Set(["<","<=",">",">="]),AS=/^\d{4}-\d{2}-\d{2}$/;function $S(e,t){return!t||!t.and.length?e:e.filter(n=>US(n,t.and))}function US(e,t){for(const n of t)if(!BS(e,n))return!1;return!0}function BS(e,t){var n,r,s,i,o,l,u;if("stars"in t){const c=t.stars;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsIn"in t){const c=t.starsIn.values;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsNotIn"in t){const c=t.starsNotIn.values;if(!c||!c.length)return!0;const f=e.star??0;return!c.includes(f)}if("nameContains"in t){const c=(n=t.nameContains.value)==null?void 0:n.trim();return c?(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("nameNotContains"in t){const c=(r=t.nameNotContains.value)==null?void 0:r.trim();return c?!(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("commentsContains"in t){const c=(s=t.commentsContains.value)==null?void 0:s.trim();if(!c)return!0;const f=e.comments??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("commentsNotContains"in t){const c=(i=t.commentsNotContains.value)==null?void 0:i.trim();if(!c)return!0;const f=e.comments??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("urlContains"in t){const c=(o=t.urlContains.value)==null?void 0:o.trim();if(!c)return!0;const f=e.source??e.url??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("urlNotContains"in t){const c=(l=t.urlNotContains.value)==null?void 0:l.trim();if(!c)return!0;const f=e.source??e.url??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("dateRange"in t){const{from:c,to:f}=t.dateRange;if(!c&&!f)return!0;if(!e.addedAt)return!1;const m=Date.parse(e.addedAt);if(Number.isNaN(m))return!1;const g=em(c,!1),w=em(f,!0);return!(g!=null&&m<g||w!=null&&m>w)}if("widthCompare"in t){const{op:c,value:f}=t.widthCompare;if(!Number.isFinite(f))return!0;const m=e.w;return!Number.isFinite(m)||m<=0?!1:tm(m,c,f)}if("heightCompare"in t){const{op:c,value:f}=t.heightCompare;if(!Number.isFinite(f))return!0;const m=e.h;return!Number.isFinite(m)||m<=0?!1:tm(m,c,f)}if("metricRange"in t){const{key:c,min:f,max:m}=t.metricRange,g=(u=e.metrics)==null?void 0:u[c];return!(g==null||g<f||g>m)}return!0}function Cc(e){if(!e||typeof e!="object")return null;const t=e.and;if(!Array.isArray(t))return null;const n=[];for(const r of t){const s=rk(r);s&&n.push(s)}return{and:n}}function Jh(e){var r;const t=e.and.find(s=>"stars"in s),n=e.and.find(s=>"starsIn"in s);return(r=n==null?void 0:n.starsIn)!=null&&r.values?n.starsIn.values:(t==null?void 0:t.stars)??[]}function nu(e,t){return yv(e,t)}function WS(e){var n;const t=e.and.find(r=>"starsIn"in r);return((n=t==null?void 0:t.starsIn)==null?void 0:n.values)??[]}function yv(e,t){const n=Li(t),r=e.and.filter(s=>!("starsIn"in s)&&!("stars"in s));return n.length?{and:[{starsIn:{values:n}},...r]}:{and:r}}function HS(e){var n;const t=e.and.find(r=>"starsNotIn"in r);return((n=t==null?void 0:t.starsNotIn)==null?void 0:n.values)??[]}function xv(e,t){const n=Li(t),r=e.and.filter(s=>!("starsNotIn"in s));return n.length?{and:[{starsNotIn:{values:n}},...r]}:{and:r}}function VS(e){var n;const t=e.and.find(r=>"nameContains"in r);return((n=t==null?void 0:t.nameContains)==null?void 0:n.value)??null}function wv(e,t){const n=Qt(t),r=e.and.filter(s=>!("nameContains"in s));return n?{and:[{nameContains:{value:n}},...r]}:{and:r}}function QS(e){var n;const t=e.and.find(r=>"nameNotContains"in r);return((n=t==null?void 0:t.nameNotContains)==null?void 0:n.value)??null}function Sv(e,t){const n=Qt(t),r=e.and.filter(s=>!("nameNotContains"in s));return n?{and:[{nameNotContains:{value:n}},...r]}:{and:r}}function KS(e){var n;const t=e.and.find(r=>"commentsContains"in r);return((n=t==null?void 0:t.commentsContains)==null?void 0:n.value)??null}function kv(e,t){const n=Qt(t),r=e.and.filter(s=>!("commentsContains"in s));return n?{and:[{commentsContains:{value:n}},...r]}:{and:r}}function qS(e){var n;const t=e.and.find(r=>"commentsNotContains"in r);return((n=t==null?void 0:t.commentsNotContains)==null?void 0:n.value)??null}function Cv(e,t){const n=Qt(t),r=e.and.filter(s=>!("commentsNotContains"in s));return n?{and:[{commentsNotContains:{value:n}},...r]}:{and:r}}function YS(e){var n;const t=e.and.find(r=>"urlContains"in r);return((n=t==null?void 0:t.urlContains)==null?void 0:n.value)??null}function bv(e,t){const n=Qt(t),r=e.and.filter(s=>!("urlContains"in s));return n?{and:[{urlContains:{value:n}},...r]}:{and:r}}function GS(e){var n;const t=e.and.find(r=>"urlNotContains"in r);return((n=t==null?void 0:t.urlNotContains)==null?void 0:n.value)??null}function Ev(e,t){const n=Qt(t),r=e.and.filter(s=>!("urlNotContains"in s));return n?{and:[{urlNotContains:{value:n}},...r]}:{and:r}}function XS(e){const t=e.and.find(n=>"dateRange"in n);return(t==null?void 0:t.dateRange)??null}function bc(e,t){const n=Il((t==null?void 0:t.from)??null),r=Il((t==null?void 0:t.to)??null),s=e.and.filter(i=>!("dateRange"in i));return!n&&!r?{and:s}:{and:[{dateRange:{...n?{from:n}:{},...r?{to:r}:{}}},...s]}}function JS(e){const t=e.and.find(n=>"widthCompare"in n);return(t==null?void 0:t.widthCompare)??null}function nl(e,t){const n=e.and.filter(r=>!("widthCompare"in r));return!t||!Number.isFinite(t.value)||!Pd.has(t.op)?{and:n}:{and:[{widthCompare:{op:t.op,value:t.value}},...n]}}function ZS(e){const t=e.and.find(n=>"heightCompare"in n);return(t==null?void 0:t.heightCompare)??null}function rl(e,t){const n=e.and.filter(r=>!("heightCompare"in r));return!t||!Number.isFinite(t.value)||!Pd.has(t.op)?{and:n}:{and:[{heightCompare:{op:t.op,value:t.value}},...n]}}function ek(e,t){const n=e.and.find(r=>"metricRange"in r&&r.metricRange.key===t);return(n==null?void 0:n.metricRange)??null}function tk(e,t,n){const r=e.and.filter(s=>!("metricRange"in s&&s.metricRange.key===t));return n?{and:[{metricRange:{key:t,min:n.min,max:n.max}},...r]}:{and:r}}function nk(e){const t=Cc(e);return t?t.and.length:0}function rk(e){var t,n,r,s,i,o,l,u;if(!e||typeof e!="object")return null;if("stars"in e){const c=Li(e.stars);return c.length?{starsIn:{values:c}}:null}if("starsIn"in e){const c=Li((t=e.starsIn)==null?void 0:t.values);return c.length?{starsIn:{values:c}}:null}if("starsNotIn"in e){const c=Li((n=e.starsNotIn)==null?void 0:n.values);return c.length?{starsNotIn:{values:c}}:null}if("nameContains"in e){const c=Qt((r=e.nameContains)==null?void 0:r.value);return c?{nameContains:{value:c}}:null}if("nameNotContains"in e){const c=Qt((s=e.nameNotContains)==null?void 0:s.value);return c?{nameNotContains:{value:c}}:null}if("commentsContains"in e){const c=Qt((i=e.commentsContains)==null?void 0:i.value);return c?{commentsContains:{value:c}}:null}if("commentsNotContains"in e){const c=Qt((o=e.commentsNotContains)==null?void 0:o.value);return c?{commentsNotContains:{value:c}}:null}if("urlContains"in e){const c=Qt((l=e.urlContains)==null?void 0:l.value);return c?{urlContains:{value:c}}:null}if("urlNotContains"in e){const c=Qt((u=e.urlNotContains)==null?void 0:u.value);return c?{urlNotContains:{value:c}}:null}if("dateRange"in e){const c=e.dateRange,f=Il((c==null?void 0:c.from)??null),m=Il((c==null?void 0:c.to)??null);return!f&&!m?null:{dateRange:{...f?{from:f}:{},...m?{to:m}:{}}}}if("widthCompare"in e){const c=e.widthCompare,f=Zh(c==null?void 0:c.op,c==null?void 0:c.value);return f?{widthCompare:f}:null}if("heightCompare"in e){const c=e.heightCompare,f=Zh(c==null?void 0:c.op,c==null?void 0:c.value);return f?{heightCompare:f}:null}if("metricRange"in e){const c=e.metricRange;if(!c||typeof c!="object")return null;const f=typeof c.key=="string"?c.key:"",m=Ec(c.min),g=Ec(c.max);return!f||m==null||g==null||m>g?null:{metricRange:{key:f,min:m,max:g}}}return null}function Li(e){if(!Array.isArray(e))return[];const t=[],n=new Set;for(const r of e){const s=typeof r=="number"?r:typeof r=="string"?Number(r):NaN;!Number.isInteger(s)||!zS.has(s)||n.has(s)||(n.add(s),t.push(s))}return t}function Qt(e){if(typeof e!="string")return null;const t=e.trim();return t||null}function Il(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=Date.parse(t);return Number.isNaN(n)?null:t}function Zh(e,t){if(typeof e!="string"||!Pd.has(e))return null;const n=Ec(t);return n==null?null:{op:e,value:n}}function em(e,t){if(!e)return null;const n=e.trim();if(!n)return null;const r=Date.parse(n);return Number.isNaN(r)?null:t&&AS.test(n)?r+24*60*60*1e3-1:r}function tm(e,t,n){switch(t){case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;default:return!0}}function Ec(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function nm(e){return e.addedAt?Date.parse(e.addedAt):0}function Fl(e,t){return e.name.localeCompare(t.name)}function sk(e,t){const n=nm(e),r=nm(t);return n===r?Fl(e,t):n-r}function ik(e){return(t,n)=>{var i,o;const r=(i=t.metrics)==null?void 0:i[e],s=(o=n.metrics)==null?void 0:o[e];return r==null&&s==null?Fl(t,n):r==null?1:s==null?-1:r===s?Fl(t,n):r-s}}function rm(e,t){return $S(e,t)}function ok(e){let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function lk(e,t){const n=ok(t||1),r=[...e];for(let s=r.length-1;s>0;s-=1){const i=Math.floor(n()*(s+1));[r[s],r[i]]=[r[i],r[s]]}return r}function ak(e,t,n){if(t.kind==="builtin"&&t.key==="random"){const i=n??Date.now();return lk(e,i)}let r=sk;t.kind==="metric"?r=ik(t.key):t.key==="name"&&(r=Fl);const s=[...e].sort(r);return t.dir==="desc"?s.reverse():s}const sm="leftW.folders",im="leftW.metrics",uk="leftW",om="rightW";function ck(e,t){const[n,r]=d.useState(240),[s,i]=d.useState(320),[o,l]=d.useState(240),u=t==="metrics"?s:n,c=d.useRef(u),f=d.useRef(o);return d.useEffect(()=>{c.current=u},[u]),d.useEffect(()=>{f.current=o},[o]),d.useEffect(()=>{try{const w=window.localStorage,k=Number(w.getItem(sm)??w.getItem(uk));Number.isFinite(k)&&k>0&&r(k);const N=Number(w.getItem(im));Number.isFinite(N)&&N>0&&i(N);const L=Number(w.getItem(om));Number.isFinite(L)&&L>0&&l(L)}catch{}},[]),{leftW:u,rightW:o,onResizeLeft:w=>{w.preventDefault();const k=e.current;if(!k)return;const N=k.getBoundingClientRect(),L=t==="metrics"?im:sm;let y=c.current;const h=v=>{const b=v.clientX-N.left,R=200,M=Math.max(R,N.width-f.current-200),E=Math.min(Math.max(b,R),M);y=E,t==="metrics"?i(E):r(E)},p=()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",p);try{window.localStorage.setItem(L,String(y))}catch{}};window.addEventListener("mousemove",h),window.addEventListener("mouseup",p)},onResizeRight:w=>{w.preventDefault();const k=e.current;if(!k)return;const N=k.getBoundingClientRect();let L=f.current;const y=p=>{const v=p.clientX-N.left,b=N.width-v,R=240,M=Math.max(R,N.width-c.current-200),E=Math.min(Math.max(b,R),M);L=E,f.current=E,l(E)},h=()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",h);try{window.localStorage.setItem(om,String(L))}catch{}};window.addEventListener("mousemove",y),window.addEventListener("mouseup",h)}}}function dk({x:e,y:t,items:n}){return a.jsx("div",{className:"dropdown-panel fixed",role:"menu",style:{left:e,top:t,minWidth:180},onClick:r=>r.stopPropagation(),children:n.map((r,s)=>a.jsxs("button",{className:`dropdown-item w-full ${r.danger?"text-danger hover:text-danger":""}`,role:"menuitem","aria-disabled":r.disabled,disabled:r.disabled,onClick:i=>{i.stopPropagation(),r.disabled||r.onClick()},children:[r.icon&&a.jsx("span",{className:"shrink-0",children:r.icon}),a.jsx("span",{children:r.label})]},s))})}function lm(e){return JSON.stringify(e,null,2)}function am(e){const t=s=>'"'+s.replaceAll('"','""')+'"',n="path,folder,name,star,type,size,width,height,tags,notes",r=e.map(s=>{const i=(s.tags||[]).join(" "),o=s.notes||"";return[s.path,s.folder,s.name,String(s.star??""),s.type??"",s.size??"",s.width??"",s.height??"",i,o].map(l=>t(String(l))).join(",")});return[n,...r].join(`
`)}function um(e){return e.map(t=>{const n=t.path.split("/").filter(Boolean);n.pop();const r=n.length?`/${n.join("/")}`:"/";return{path:t.path,folder:r,name:t.name,star:t.star??null,type:t.type,size:t.size,width:t.w,height:t.h}})}function fk(e,t=250){const[n,r]=sl.useState(e);return sl.useEffect(()=>{const s=window.setTimeout(()=>r(e),Math.max(0,t));return()=>window.clearTimeout(s)},[e,t]),n}const Nv="application/x-lenslet-paths",hk='[role="treeitem"].drop-target';function cm(e){var n;return Array.from(((n=e.dataTransfer)==null?void 0:n.types)||[]).includes(Nv)}function mk(e){document.querySelectorAll(hk).forEach(t=>{t!==e&&t.classList.remove("drop-target")})}function dm(e){mk(e),e.classList.add("drop-target")}function fm(e){return e.startsWith("/")?e:`/${e}`}function pk({path:e,isLeaf:t}){const n=rs(),r=d.useCallback(l=>{cm(l)&&(l.preventDefault(),t&&dm(l.currentTarget))},[t]),s=d.useCallback(l=>{!t||!cm(l)||(l.preventDefault(),dm(l.currentTarget))},[t]),i=d.useCallback(l=>{const u=l.currentTarget,c=document.elementFromPoint(l.clientX,l.clientY);c&&u.contains(c)||u.classList.remove("drop-target")},[]),o=d.useCallback(async l=>{const u=l.dataTransfer;if(!u)return;l.preventDefault(),l.currentTarget.classList.remove("drop-target");const c=u.getData(Nv),m=(c?JSON.parse(c):[]).filter(Boolean);if(!m.length)return;let g=m[0].split("/").slice(0,-1).join("/")||"/";g=fm(g);const w=fm(e);try{for(const k of m)await ge.moveFile(k,w);n.invalidateQueries({queryKey:["folder",g]}),n.invalidateQueries({queryKey:["folder",w]}),n.setQueryData(["folder",g],k=>!k||!Array.isArray(k.items)?k:{...k,items:k.items.filter(N=>!m.includes(N.path))})}catch{}},[e,n]);return{onDragOver:r,onDragEnter:s,onDragLeave:i,onDrop:o}}const gk='[role="tree"] [role="treeitem"]';function vk(){return Array.from(document.querySelectorAll(gk))}function yk(e,t){var i;const n=vk(),r=n.findIndex(o=>o===e);if(r===-1)return;let s=r;t==="ArrowDown"?s=Math.min(n.length-1,r+1):t==="ArrowUp"?s=Math.max(0,r-1):t==="Home"?s=0:t==="End"&&(s=n.length-1),(i=n[s])==null||i.focus()}function xk({path:e,isLeaf:t,isExpanded:n,setExpanded:r,onOpen:s}){return d.useCallback(i=>{if(i.key==="Enter"){i.preventDefault(),s(e);return}if(i.key==="ArrowRight"){!t&&!n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.add(e),l}));return}if(i.key==="ArrowLeft"){!t&&n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.delete(e),l}));return}(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="Home"||i.key==="End")&&(i.preventDefault(),yk(i.currentTarget,i.key))},[e,t,n,r,s])}function wk({current:e,roots:t,data:n,onOpen:r,onResize:s,onContextMenu:i,countVersion:o,className:l,showResizeHandle:u=!0}){const[c,f]=d.useState(new Set(["/"])),m=d.useRef(new Map),g=d.useRef(new Map),w=d.useCallback(async(N,L)=>{const y=ln(N||"/"),h=m.current,p=g.current,v=h.get(y);if(v!==void 0)return v;const b=p.get(y);if(b)return b;const R=(async()=>{let M=0;const E=new Set,T=[{path:y,index:L}];for(;T.length;){const C=T.pop(),{path:P,index:W}=C;if(E.has(P))continue;E.add(P);let D=W;if(!D)try{D=await ge.getFolder(P)}catch(z){console.warn(`Failed to count folder ${P}:`,z);continue}M+=D.items.length;for(const z of D.dirs)z.kind==="branch"&&T.push({path:vv(P,z.name)})}return h.set(y,M),p.delete(y),M})();return p.set(y,R),R},[]);d.useEffect(()=>{m.current.clear(),g.current.clear()},[o]),d.useEffect(()=>{const N=e.split("/").filter(Boolean),L=["/"];let y="";for(const h of N)y=y?`${y}/${h}`:`/${h}`,L.push(y);f(h=>{const p=new Set(h);for(const v of L)p.add(v);return p})},[e]);const k=l??"h-full overflow-auto bg-panel scrollbar-thin";return a.jsxs("div",{className:k,children:[a.jsx("div",{className:"p-1",role:"tree","aria-label":"Folders",children:t.map(N=>a.jsx(jv,{path:N.path,label:N.label,depth:0,current:e,expanded:c,setExpanded:f,onOpen:r,onContextMenu:i,initial:n,getSubtreeCount:w,countVersion:o},N.path))}),u&&a.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 left-[calc(var(--left)-3px)] hover:bg-accent/20",onMouseDown:s})]})}function jv({path:e,label:t,depth:n,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,initial:u,getSubtreeCount:c,countVersion:f}){var E,T;const m=s.has(e),{data:g}=gv(e),w=u&&e===u.path?u:g,k=r===e,N=(((E=w==null?void 0:w.dirs)==null?void 0:E.length)??0)===0,[L,y]=d.useState(w?w.items.length:null),h=xk({path:e,isLeaf:N,isExpanded:m,setExpanded:i,onOpen:o}),{onDragOver:p,onDragEnter:v,onDragLeave:b,onDrop:R}=pk({path:e,isLeaf:N}),M=C=>{C.stopPropagation(),i(P=>{const W=new Set(P);return W.has(e)?W.delete(e):W.add(e),W})};return d.useEffect(()=>{let C=!1;if(!w){y(null);return}return y(w.items.length),c(e,w).then(P=>{C||y(P)}).catch(P=>{C||console.warn(`Failed to compute subtree count for ${e}:`,P)}),()=>{C=!0}},[w,e,c,f]),a.jsxs("div",{children:[a.jsxs("div",{className:`flex items-center gap-1.5 py-0.5 px-2 rounded-md cursor-pointer min-h-[28px] outline-none transition-colors duration-75 ${k?"bg-accent/20 text-accent font-medium":"hover:bg-white/5 text-text"}`,role:"treeitem","aria-level":n+1,"aria-expanded":N?void 0:m,"aria-selected":k,tabIndex:k?0:-1,style:{paddingLeft:8+n*14},onClick:()=>o(e),onContextMenu:C=>{C.preventDefault(),C.stopPropagation(),l&&l(C,e)},onKeyDown:h,onDragOver:p,onDragEnter:v,onDragLeave:b,onDrop:R,children:[a.jsx("span",{className:"w-4 text-center opacity-60 hover:opacity-100 text-[10px]",onClick:M,children:m?"":""}),a.jsx("span",{className:"flex-1 overflow-hidden truncate text-sm",title:t,children:pS(t,28)}),L!==null&&a.jsx("span",{className:"text-[10px] opacity-50 bg-white/5 border border-white/5 rounded px-1.5 min-w-[24px] text-center",children:L})]}),m&&((T=w==null?void 0:w.dirs)==null?void 0:T.map(C=>a.jsx(jv,{path:vv(e,C.name),label:C.name,depth:n+1,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,getSubtreeCount:c,countVersion:f},C.name)))]})}const Or=40,Sk=12,hm=[5,4,3,2,1],mm=["<","<=",">",">="];function kk({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l,onChangeFilters:u}){const c=r&&r.length?a.jsx(Ck,{selectedItems:r,metricKeys:n}):null,f=a.jsx(bk,{filters:o,onChangeFilters:u});return n.length?a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,a.jsx(Ek,{items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}),f]}):a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,f,a.jsx("div",{className:"p-4 text-sm text-muted",children:"No metrics found in this dataset."})]})}function Ck({selectedItems:e,metricKeys:t}){const n=d.useMemo(()=>{if(!e.length)return null;const u=new Map;for(const m of e){const g=m.metrics;if(g)for(const[w,k]of Object.entries(g)){if(k==null||Number.isNaN(k))continue;const N=u.get(w);N?N.push(k):u.set(w,[k])}}return u.size?{entries:(t.length?t.filter(m=>u.has(m)):Array.from(u.keys()).sort()).map(m=>{const g=u.get(m)??[],w=Math.min(...g),k=Math.max(...g),N=g.reduce((L,y)=>L+y,0)/Math.max(1,g.length);return{key:m,value:g[0],min:w,max:k,avg:N,count:g.length}}),totalItems:e.length}:null},[e,t]);if(!n)return null;const{entries:r,totalItems:s}=n,i=r.slice(0,Sk),o=r.length-i.length,l=s>1;return a.jsxs("div",{className:"ui-card",children:[a.jsxs("div",{className:"ui-card-header",children:[a.jsx("div",{className:"ui-section-title",children:"Selected metrics"}),a.jsxs("div",{className:"text-[11px] text-muted",children:[s," item",s===1?"":"s"]})]}),a.jsxs("div",{className:"space-y-1 text-[12px]",children:[i.map(u=>a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-muted w-28 shrink-0 truncate",title:u.key,children:u.key}),a.jsxs("span",{className:"font-mono text-text text-right tabular-nums",children:[l?`${Pt(u.min)}  ${Pt(u.max)}`:Pt(u.value),l&&a.jsxs("span",{className:"text-[11px] text-muted ml-2",children:["avg ",Pt(u.avg),u.count!==s?`  ${u.count}/${s}`:""]})]})]},u.key)),o>0&&a.jsxs("div",{className:"text-[11px] text-muted",children:["+",o," more"]})]})]})}function bk({filters:e,onChangeFilters:t}){const n=d.useMemo(()=>WS(e),[e]),r=d.useMemo(()=>HS(e),[e]),s=d.useMemo(()=>VS(e)??"",[e]),i=d.useMemo(()=>QS(e)??"",[e]),o=d.useMemo(()=>KS(e)??"",[e]),l=d.useMemo(()=>qS(e)??"",[e]),u=d.useMemo(()=>YS(e)??"",[e]),c=d.useMemo(()=>GS(e)??"",[e]),f=d.useMemo(()=>XS(e)??{},[e]),m=d.useMemo(()=>Sm(f.from),[f.from]),g=d.useMemo(()=>Sm(f.to),[f.to]),w=d.useMemo(()=>JS(e),[e]),k=d.useMemo(()=>ZS(e),[e]),[N,L]=d.useState((w==null?void 0:w.op)??">="),[y,h]=d.useState((k==null?void 0:k.op)??">=");d.useEffect(()=>{w!=null&&w.op&&L(w.op)},[w==null?void 0:w.op]),d.useEffect(()=>{k!=null&&k.op&&h(k.op)},[k==null?void 0:k.op]);const p=(v,b)=>{const R=new Set(n),M=new Set(r);v==="include"?R.has(b)?R.delete(b):(R.add(b),M.delete(b)):M.has(b)?M.delete(b):(M.add(b),R.delete(b));let E=yv(e,Array.from(R));E=xv(E,Array.from(M)),t(E)};return a.jsxs("div",{className:"ui-card",children:[a.jsx("div",{className:"ui-section-title mb-3",children:"Attributes"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Rating"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Include"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[hm.map(v=>{const b=n.includes(v);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${b?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",v),"aria-pressed":b,title:`Include ${v} star${v>1?"s":""}`,children:[v,""]},`stars-in-${v}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${n.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",0),"aria-pressed":n.includes(0),title:"Include unrated",children:"None"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Exclude"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[hm.map(v=>{const b=r.includes(v);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${b?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",v),"aria-pressed":b,title:`Exclude ${v} star${v>1?"s":""}`,children:[v,""]},`stars-out-${v}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${r.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",0),"aria-pressed":r.includes(0),title:"Exclude unrated",children:"None"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Filename"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:s,placeholder:"e.g. draft",onChange:v=>t(wv(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:i,placeholder:"e.g. v1",onChange:v=>t(Sv(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Comments"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:o,placeholder:"e.g. hero",onChange:v=>t(kv(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:l,placeholder:"e.g. todo",onChange:v=>t(Cv(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"URL"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:u,placeholder:"e.g. s3://bucket",onChange:v=>t(bv(e,v.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:c,placeholder:"e.g. http://",onChange:v=>t(Ev(e,v.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Date Added"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"From"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:m,onChange:v=>t(bc(e,{from:v.target.value||null,to:f.to??null}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"To"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:g,onChange:v=>t(bc(e,{from:f.from??null,to:v.target.value||null}))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Dimensions"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Width"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:N,onChange:v=>{const b=v.target.value;L(b),w&&t(nl(e,{op:b,value:w.value}))},children:mm.map(v=>a.jsx("option",{value:v,children:v},`w-${v}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:w?String(w.value):"",min:0,placeholder:"px",onChange:v=>{const b=v.target.value;if(!b){t(nl(e,null));return}const R=Number(b);Number.isFinite(R)&&t(nl(e,{op:N,value:R}))}})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Height"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:y,onChange:v=>{const b=v.target.value;h(b),k&&t(rl(e,{op:b,value:k.value}))},children:mm.map(v=>a.jsx("option",{value:v,children:v},`h-${v}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:k?String(k.value):"",min:0,placeholder:"px",onChange:v=>{const b=v.target.value;if(!b){t(rl(e,null));return}const R=Number(b);Number.isFinite(R)&&t(rl(e,{op:y,value:R}))}})]})]})]})]})]})]})}function Ek({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}){const[u,c]=d.useState(!1),f=s&&n.includes(s)?s:n[0];return a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("label",{className:"ui-label",children:"Metric"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-[11px]",onClick:()=>c(m=>!m),"aria-pressed":u,children:u?"Show one":"Show all"})]}),u?a.jsx("div",{className:"ui-input ui-input-readonly w-full flex items-center text-xs",children:"All metrics"}):a.jsx("select",{className:"ui-select w-full",value:f,onChange:m=>i(m.target.value),children:n.map(m=>a.jsx("option",{value:m,children:m},m))})]}),u?a.jsx("div",{className:"space-y-3",children:n.map(m=>a.jsx(pm,{metricKey:m,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l,showTitle:!0},m))}):f?a.jsx(pm,{metricKey:f,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l}):a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]})}function pm({items:e,filteredItems:t,metricKey:n,selectedItems:r,filters:s,onChangeRange:i,showTitle:o=!1}){const l=d.useMemo(()=>gm(e,n),[e,n]),u=d.useMemo(()=>ru(l,Or),[l]),c=d.useMemo(()=>gm(t,n),[t,n]),f=d.useMemo(()=>u?ru(c,Or,u):null,[c,u]),m=ek(s,n),[g,w]=d.useState(null),[k,N]=d.useState(!1),L=d.useRef(null),y=d.useRef(null),h=d.useRef(!1),p=d.useRef(null),[v,b]=d.useState(null),[R,M]=d.useState(""),[E,T]=d.useState(""),[C,P]=d.useState(null),W=g??m,D=u?{min:u.min,max:u.max}:null,z=d.useMemo(()=>{var Y;if(!(r!=null&&r.length))return[];const H=[];for(const ne of r){const me=(Y=ne.metrics)==null?void 0:Y[n];me==null||Number.isNaN(me)||H.push(me)}return H},[r,n]),oe=z.length===1?z[0]:null,U=d.useMemo(()=>!u||z.length<2?null:ru(z,Or,u),[z,u]);d.useEffect(()=>{if(!m||!D){C!=="min"&&M(m?Yn(m.min):""),C!=="max"&&T(m?Yn(m.max):"");return}if(C!=="min"){const H=us(m.min,D.min)?"":Yn(m.min);M(H)}if(C!=="max"){const H=us(m.max,D.max)?"":Yn(m.max);T(H)}},[m,D,C]),d.useEffect(()=>{b(null)},[n,D==null?void 0:D.min,D==null?void 0:D.max]);const ue=H=>{var me;if(!D)return null;const Y=(me=p.current)==null?void 0:me.getBoundingClientRect();if(!Y)return null;const ne=Id((H.clientX-Y.left)/Y.width);return D.min+(D.max-D.min)*ne},F=(H,Y)=>{if(!D)return;const ne=L.current??H,me=ym(ne,H);w(me),Y&&i(n,me)},V=H=>{var ne;if(!D)return;H.preventDefault();const Y=ue(H);Y!=null&&(N(!0),w(null),L.current=Y,y.current=H.clientX,h.current=!1,b(Y),(ne=p.current)==null||ne.setPointerCapture(H.pointerId))},q=H=>{const Y=ue(H);if(Y==null){k||b(null);return}if(b(Y),k){const ne=y.current;if(!h.current&&ne!=null){if(Math.abs(H.clientX-ne)<4)return;h.current=!0}h.current&&F(Y,!1)}},he=H=>{var ne;if(!k)return;N(!1),(ne=p.current)==null||ne.releasePointerCapture(H.pointerId);const Y=ue(H);h.current&&Y!=null?(b(Y),F(Y,!0)):m&&i(n,null),L.current=null,y.current=null,h.current=!1,setTimeout(()=>w(null),0)},fe=(H,Y)=>{if(!D)return;const ne=xm(H),me=xm(Y);if(!ne.valid||!me.valid){ne.valid||M(m?Yn(m.min):""),me.valid||T(m?Yn(m.max):"");return}if(ne.value==null&&me.value==null){i(n,null);return}const He=ne.value??D.min,Ve=me.value??D.max,qe=wm(He,D.min,D.max),kt=wm(Ve,D.min,D.max),Me=ym(qe,kt);if(us(Me.min,D.min)&&us(Me.max,D.max)){i(n,null);return}i(n,Me)};if(!u||!D)return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]});const Ne=z.length;return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mb-2 tabular-nums",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{children:["Population: ",u.count]}),a.jsxs("span",{children:["Filtered: ",(f==null?void 0:f.count)??0]}),Ne>1&&a.jsxs("span",{className:"text-text",children:["Selected: ",Ne]})]}),oe!=null&&a.jsxs("span",{className:"text-text",children:["Selected: ",Pt(oe)]})]}),a.jsxs("svg",{ref:p,viewBox:`0 0 ${Or} 100`,preserveAspectRatio:"none",className:"w-full h-28 cursor-crosshair rounded-md bg-surface-inset",onPointerDown:V,onPointerMove:q,onPointerUp:he,onPointerLeave:()=>b(null),children:[su(u.bins,"#2e3a4b"),f&&su(f.bins,"#3a8fff"),U&&su(U.bins,"#f59e0b",{opacity:.55}),W&&Nk(W,D),oe!=null&&vm(oe,D,{color:"var(--highlight)",strokeWidth:.7}),v!=null&&vm(v,D,{color:"rgba(255,255,255,0.75)",strokeWidth:.5,dashed:!0})]}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mt-2 tabular-nums",children:[a.jsx("span",{children:Pt(D==null?void 0:D.min)}),a.jsxs("div",{className:"flex flex-col items-center text-center leading-tight",children:[W?a.jsx("span",{className:"text-text",children:us(W.min,D.min)?` ${Pt(W.max)}`:us(W.max,D.max)?` ${Pt(W.min)}`:`${Pt(W.min)}  ${Pt(W.max)}`}):v!=null?a.jsxs("span",{className:"text-text",children:["Cursor: ",Pt(v)]}):a.jsx("span",{children:"Drag to filter"}),W&&v!=null&&a.jsxs("span",{className:"text-[11px] text-muted",children:["Cursor: ",Pt(v)]})]}),a.jsx("span",{children:Pt(D==null?void 0:D.max)})]}),a.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-2 mt-3 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Min"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:R,placeholder:Yn(D.min),onFocus:()=>P("min"),onBlur:()=>{P(null),fe(R,E)},onChange:H=>M(H.target.value),onKeyDown:H=>{H.key==="Enter"&&H.currentTarget.blur()}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Max"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:E,placeholder:Yn(D.max),onFocus:()=>P("max"),onBlur:()=>{P(null),fe(R,E)},onChange:H=>T(H.target.value),onKeyDown:H=>{H.key==="Enter"&&H.currentTarget.blur()}})]}),a.jsx("button",{className:"btn btn-xs btn-ghost text-muted hover:text-text",onClick:()=>i(n,null),children:"Clear"})]})]})}function ru(e,t,n){if(!e.length)return null;const r=n?n.min:Math.min(...e);let s=n?n.max:Math.max(...e);r===s&&(s=r+1);const i=new Array(t).fill(0),o=t/(s-r);for(const l of e){const u=Math.max(0,Math.min(t-1,Math.floor((l-r)*o)));i[u]+=1}return{bins:i,min:r,max:s,count:e.length}}function gm(e,t){var r;const n=[];for(const s of e){const i=(r=s.metrics)==null?void 0:r[t];i==null||Number.isNaN(i)||n.push(i)}return n}function su(e,t,n){const r=Math.max(1,...e),s=(n==null?void 0:n.opacity)??.9;return e.map((i,o)=>{const l=i/r*100;return a.jsx("rect",{x:o+.05,y:100-l,width:.9,height:l,fill:t,opacity:s},`${t}-${o}`)})}function Nk(e,t){const n=(e.min-t.min)/(t.max-t.min),r=(e.max-t.min)/(t.max-t.min),s=Or*Id(Math.min(n,r)),i=Or*Math.abs(r-n);return a.jsx("rect",{x:s,y:0,width:Math.max(.5,i),height:100,fill:"rgba(255,255,255,0.08)",stroke:"rgba(255,255,255,0.4)",strokeWidth:.4})}function vm(e,t,n){const r=Id((e-t.min)/(t.max-t.min)),s=Or*r;return a.jsx("line",{x1:s,y1:0,x2:s,y2:100,stroke:n.color,strokeWidth:n.strokeWidth??.5,strokeDasharray:n.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function ym(e,t){return e<t?{min:e,max:t}:{min:t,max:e}}function Id(e){return e<0?0:e>1?1:e}function Pt(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Yn(e){if(!Number.isFinite(e))return"";const t=e.toString();return t.includes("e")?e.toFixed(6):t}function xm(e){const t=e.trim();if(!t)return{value:null,valid:!0};const n=Number(t);return Number.isFinite(n)?{value:n,valid:!0}:{value:null,valid:!1}}function wm(e,t,n){return e<t?t:e>n?n:e}function us(e,t){const n=Math.max(1,Math.abs(e),Math.abs(t));return Math.abs(e-t)<=1e-6*n}function Sm(e){return e?e.length>=10?e.slice(0,10):e:""}const jk=[{label:"Root",path:"/"}];function Mk({leftTool:e,onToolChange:t,compareEnabled:n,compareActive:r,onOpenCompare:s,views:i,activeViewId:o,onActivateView:l,onSaveView:u,current:c,data:f,onOpenFolder:m,onContextMenu:g,countVersion:w,items:k,filteredItems:N,metricKeys:L,selectedItems:y,selectedMetric:h,onSelectMetric:p,filters:v,onChangeRange:b,onChangeFilters:R,onResize:M}){const E=e==="folders"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",T=e==="metrics"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",C=r?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover";return a.jsxs("div",{className:"app-left-panel col-start-1 row-start-2 relative border-r border-border bg-panel overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-y-0 left-0 w-10 border-r border-border flex flex-col items-center gap-2 py-3 bg-surface-overlay",children:[a.jsx("button",{className:E,title:"Folders","aria-label":"Folders","aria-pressed":e==="folders",onClick:()=>t("folders"),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M3 7.5h6l2-2h10a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2z"})})}),a.jsx("button",{className:T,title:"Metrics / Filters","aria-label":"Metrics and Filters","aria-pressed":e==="metrics",onClick:()=>t("metrics"),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]})}),a.jsx("div",{className:"w-6 h-px bg-border/70 my-1"}),a.jsx("button",{className:`${C} ${n?"":"opacity-40 cursor-not-allowed"}`,title:n?"Compare selected images":"Compare (select 2+)","aria-label":"Compare selected images","aria-pressed":r,"aria-disabled":!n,disabled:!n,onClick:()=>{n&&s()},children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("rect",{x:"3",y:"4",width:"8",height:"16",rx:"1"}),a.jsx("rect",{x:"13",y:"4",width:"8",height:"16",rx:"1"})]})})]}),a.jsx("div",{className:"ml-10 h-full",children:e==="folders"?a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"px-2 py-2 border-b border-border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Smart Folders"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:u,title:"Save current view as Smart Folder",children:"+ New"})]}),i.length?a.jsx("div",{className:"flex flex-col gap-1",children:i.map(P=>{const W=P.id===o;return a.jsx("button",{className:`text-left px-2 py-1.5 rounded-md text-sm ${W?"bg-accent-muted text-accent":"hover:bg-hover text-text"}`,onClick:()=>l(P),children:P.name},P.id)})}):a.jsx("div",{className:"text-xs text-muted px-1 py-1.5",children:"No saved Smart Folders yet."})]}),a.jsx(wk,{current:c,roots:jk,data:f,onOpen:m,onContextMenu:g,countVersion:w,className:"flex-1 min-h-0 overflow-auto scrollbar-thin",showResizeHandle:!1})]}):a.jsx(kk,{items:k,filteredItems:N,metricKeys:L,selectedItems:y,selectedMetric:h,onSelectMetric:p,filters:v,onChangeRange:b,onChangeFilters:R})}),a.jsx("div",{className:"toolbar-offset absolute bottom-0 right-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20",onMouseDown:M})]})}function Rk({persistenceEnabled:e,recentSummary:t,onDismissRecent:n,onCloseRecent:r,browserZoomPercent:s}){const i=t?` (${t.names.join(", ")}${t.extra?` +${t.extra}`:""})`:"",o=!!(t!=null&&t.names.length),l=typeof s=="number"?s:null,u=l!==null&&Math.abs(l-100)>=2;return!e||u||!!t?a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-col gap-2",children:[!e&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("span",{className:"font-semibold",children:"Not persisted."})," Workspace is read-only; edits stay in memory until restart."]}),u&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs",children:[a.jsxs("span",{className:"font-semibold",children:["Browser zoom ",Math.round(l),"%."]})," For best results, set it to 100% so UI elements stay in correct proportions."]}),t&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex items-center justify-between gap-3",children:[a.jsxs("span",{children:["Recent updates: ",t.count," item",t.count===1?"":"s",o?i:""]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"text-muted hover:text-text transition-colors",onClick:n,"aria-label":"Hide recent activity until refresh",children:"Hide until refresh"}),a.jsx("button",{className:"text-muted hover:text-text transition-colors text-base leading-none",onClick:r,"aria-label":"Close recent activity",children:""})]})]})]})}):a.jsx(a.Fragment,{})}const km=6e3,Lk=15*6e4,Tk=1e4,_k=24*60*6e4,Be={sortKey:"sortKey",sortDir:"sortDir",sortSpec:"sortSpec",starFilters:"starFilters",filterAst:"filterAst",selectedMetric:"selectedMetric",viewMode:"viewMode",gridItemSize:"gridItemSize",leftOpen:"leftOpen",rightOpen:"rightOpen"};function Pk(e){switch(e){case"live":return"Live";case"reconnecting":return"Reconnecting";case"offline":return"Offline";case"connecting":case"idle":default:return"Connecting"}}function Ik(e){return e.isOffline?"offline":e.isUnstable?"unstable":e.recentEditActive?"recent":e.editingActive?"editing":"live"}function Mv(e,t){return t-e<_k?yS(e,t):xS(e)}function Fk(e,t){if(!e.length)return null;const n=new Set,r=[];for(const i of e)n.has(i.path)||(n.add(i.path),r.push(i.path));const s=r.slice(0,2).map(i=>{const o=t.find(l=>l.path===i);return(o==null?void 0:o.name)??i.split("/").pop()??i});return{count:r.length,names:s,extra:Math.max(0,r.length-s.length)}}function Ok(e,t,n){return e.length?e.map(r=>{const s=t.find(l=>l.path===r.path),i=(s==null?void 0:s.name)??r.path.split("/").pop()??r.path,o=Mv(r.ts,n);return{path:r.path,label:i,timeLabel:o}}):[]}function Dk(e,t){return e?t instanceof wn||t instanceof Error?t.message:"Failed to load embeddings.":null}function zk(e,t,n,r){return e||t?n:r}function Ak(e,t,n,r,s,i){return e?n:t||i==="/"?r:s}function $k(){var tf,nf,rf;const[e,t]=d.useState("/"),[n,r]=d.useState(""),[s,i]=d.useState([]),[o,l]=d.useState(!1),[u,c]=d.useState(null),[f,m]=d.useState(null),[g,w]=d.useState(!1),[k,N]=d.useState(0),[L,y]=d.useState(0),[h,p]=d.useState(null),[v,b]=d.useState(100),[R,M]=d.useState(null),[E,T]=d.useState(()=>({filters:{and:[]},sort:{kind:"builtin",key:"added",dir:"desc"},selectedMetric:void 0})),[C,P]=d.useState(()=>Date.now()),[W,D]=d.useState("adaptive"),[z,oe]=d.useState(220),[U,ue]=d.useState(!0),[F,V]=d.useState(!0),[q,he]=d.useState("folders"),[fe,Ne]=d.useState([]),[H,Y]=d.useState(null),[ne,me]=d.useState(null),[He,Ve]=d.useState(null),[qe,kt]=d.useState(0),[Me,kn]=d.useState({}),Te=d.useRef(null),$t=d.useRef(null),Wn=d.useRef(null),B=d.useRef(null),te=d.useRef(!1),se=d.useRef(!1),pe=d.useRef(null),ce=d.useRef(new Map),ve=d.useRef(new Map),Z=d.useRef(null),{leftW:Q,rightW:de,onResizeLeft:be,onResizeRight:Re}=ck(Te,q),[Ct,A]=d.useState(!1),[ie,le]=d.useState(null),ke=rs(),nt=oS(),ss=ea(),ti=aS(),[Cn,ra]=d.useState("idle"),[lt,Hn]=d.useState({}),[Vn,Rv]=d.useState([]),[Fd,Lv]=d.useState([]),[Od,Tv]=d.useState(null),[_v,Pv]=d.useState(!1),[Iv,Dd]=d.useState(new Set),sa=d.useRef(new Map),[Qn,Fv]=d.useState(null),[zd,Ov]=d.useState(null),[Dv,ia]=d.useState(!1),[ni,oa]=d.useState(()=>Date.now()),[zv,Av]=d.useState(!0);d.useEffect(()=>{const x=_=>{const I=ln(_),O=OS(I)?I:null,G=O?Xh(I):I;O?(m(O),i([O])):(m(null),te.current=!1),t(ae=>ae===G?ae:(y(X=>X+1),G))};x(Yh());const j=()=>x(Yh());return window.addEventListener("hashchange",j),()=>window.removeEventListener("hashchange",j)},[]),d.useEffect(()=>()=>{for(const x of sa.current.values())window.clearTimeout(x);sa.current.clear()},[]),d.useEffect(()=>{if(zd==null){ia(!1);return}ia(!0);const x=window.setTimeout(()=>ia(!1),km);return()=>window.clearTimeout(x)},[zd]),d.useEffect(()=>{if(Qn==null)return;oa(Date.now());const x=window.setInterval(()=>oa(Date.now()),1e4);return()=>window.clearInterval(x)},[Qn]);const{data:Ue,refetch:la,isLoading:Xk,isError:Jk}=gv(e,!0),Xt=u!==null,Nr=!Xt&&n.trim().length>0,Ad=fk(n,250),$d=d.useMemo(()=>Ad.trim().replace(/\s+/g," "),[Ad]),ao=TS(Nr?$d:"",e),is=PS(),Ud=((tf=is.data)==null?void 0:tf.embeddings)??[],$v=((nf=is.data)==null?void 0:nf.rejected)??[],Uv=Ud.length>0,Bv=Dk(is.isError,is.error),aa=d.useMemo(()=>Jh(E.filters),[E.filters]),Ut=d.useMemo(()=>{var j;return(Nr?((j=ao.data)==null?void 0:j.items)??[]:(Ue==null?void 0:Ue.items)??[]).map(_=>({..._,star:Me[_.path]!==void 0?Me[_.path]:_.star}))},[Nr,ao.data,Ue,Me]),Bd=d.useMemo(()=>{var _;const x=new Map;for(const I of Ut)x.set(I.path,I);const j=((_=ao.data)==null?void 0:_.items)??[];for(const I of j){if(x.has(I.path))continue;const O=Me[I.path]!==void 0?Me[I.path]:I.star;x.set(I.path,{...I,star:O})}return x},[Ut,ao.data,Me]),dn=d.useMemo(()=>u?u.items.map(x=>{const j=Bd.get(x.path);return j||Kk(x.path,Me[x.path])}):[],[u,Bd,Me]),Qe=d.useMemo(()=>{if(u)return rm(dn,E.filters);const x=rm(Ut,E.filters);return ak(x,E.sort,C)},[u,dn,Ut,E.filters,E.sort,C]),ri=u?dn.length:Ut.length,ua=Qe.length,Tt=d.useMemo(()=>Qe.map(x=>x.path),[Qe]),Wd=d.useMemo(()=>new Set(s),[s]),Wv=d.useMemo(()=>{if(!s.length)return[];const x=u?dn:Ut,j=new Map(x.map(I=>[I.path,I])),_=new Map(Qe.map(I=>[I.path,I]));return s.map(I=>j.get(I)??_.get(I)).filter(I=>!!I)},[s,u,dn,Ut,Qe]),_t=d.useMemo(()=>Qe.filter(x=>Wd.has(x.path)),[Qe,Wd]),uo=Math.max(0,_t.length-2),jr=Math.min(k,uo),Hv=_t[jr]??null,Vv=_t[jr+1]??null,Qv=jr>0,Kv=jr<_t.length-2,si=_t.length>=2,qv=u?dn:Ut,ii=u?null:E.sort.kind==="metric"?E.sort.key:null,Hd=d.useMemo(()=>ii?Qe.some(x=>{var _;const j=(_=x.metrics)==null?void 0:_[ii];return j!=null&&!Number.isNaN(j)}):!1,[Qe,ii]);d.useEffect(()=>{N(x=>x>uo?uo:x)},[uo]);const Vd=d.useCallback(x=>{Dd(O=>{if(O.has(x))return O;const G=new Set(O);return G.add(x),G});const j=sa.current,_=j.get(x);_&&window.clearTimeout(_);const I=window.setTimeout(()=>{Dd(O=>{if(!O.has(x))return O;const G=new Set(O);return G.delete(x),G}),j.delete(x)},km);j.set(x,I)},[]),ca=d.useCallback(x=>{const j=Date.now(),I=Vh(x)??j,O=I>j?j:I;Fv(G=>G==null?O:G>O?G:O),Ov(j),oa(j)},[]),da=d.useCallback((x,j,_)=>{const I=Date.now(),O=Vh(_)??I;Lv(G=>{const ae=G.filter(ee=>ee.path!==x);return[{path:x,ts:O,kind:j},...ae].slice(0,10)})},[]),fa=d.useCallback((x,j)=>{const _=Date.now();Rv(I=>{const O=I.filter(ae=>ae.path!==x);return[{path:x,ts:_,kind:j},...O].slice(0,6)}),Vd(x)},[Vd]),ha=d.useCallback(x=>{const j=Object.prototype.hasOwnProperty.call(x,"star"),_=x.metrics!==void 0,I=x.comments!==void 0;if(!j&&!_&&!I)return;const O=ae=>{if(ae.path!==x.path)return ae;let X=ae;return j&&ae.star!==x.star&&(X={...X,star:x.star??null}),_&&(X={...X,metrics:x.metrics??null}),I&&ae.comments!==x.comments&&(X={...X,comments:x.comments??""}),X},G=ae=>{if(!ae)return ae;let X=!1;const ee=ae.items.map(xe=>{const at=O(xe);return at!==xe&&(X=!0),at});return X?{...ae,items:ee}:ae};ke.setQueriesData({predicate:({queryKey:ae})=>Array.isArray(ae)&&ae[0]==="folder"},G),ke.setQueriesData({predicate:({queryKey:ae})=>Array.isArray(ae)&&ae[0]==="search"},G)},[ke]),ma=d.useCallback(async x=>{const j=ln(x||"/"),_=ce.current,I=ve.current,O=_.get(j);if(O!==void 0)return O;const G=I.get(j);if(G)return G;const ae=(async()=>{try{const ee=(await ge.getFolder(j,void 0,!0)).items.length;return _.set(j,ee),ee}finally{I.delete(j)}})();return I.set(j,ae),ae},[]),Yv=d.useCallback(()=>{ce.current.clear(),ve.current.clear(),me(null),Ve(null),kt(x=>x+1)},[]);d.useEffect(()=>{let x=!1;const j=ln(e||"/");return(async()=>{const I=ma("/"),O=j==="/"?I:ma(j),[G,ae]=await Promise.all([I,O]);x||(Ve(G),me(ae))})().catch(I=>console.warn("Failed to compute folder counts:",I)),()=>{x=!0}},[e,ma,qe]),d.useEffect(()=>{r1();const x=i1(_=>{if(_.type==="presence"){const G=_.data;if(!(G!=null&&G.gallery_id))return;Hn(ae=>({...ae,[G.gallery_id]:G}));return}const I=_.data;if(!(I!=null&&I.path))return;const O=I.path;if(_.type==="item-updated"){const G=_.data,ae={v:1,tags:G.tags??[],notes:G.notes??"",star:G.star??null,version:G.version??1,updated_at:G.updated_at??"",updated_by:G.updated_by??"server"};ke.setQueryData(Gi(O),ae),ha({path:O,star:G.star??null,metrics:G.metrics,comments:G.notes??""}),dS(O,ae),fa(O,"item-updated"),da(O,"item-updated",G.updated_at),ca(G.updated_at),kn(X=>{if(X[O]===void 0)return X;const ee={...X};return delete ee[O],ee})}else if(_.type==="metrics-updated"){const G=_.data;ha({path:O,metrics:G.metrics}),fa(O,"metrics-updated"),da(O,"metrics-updated",G.updated_at),ca(G.updated_at)}}),j=o1(ra);return()=>{x(),j(),s1()}},[fa,da,ke,ha,ca]),d.useEffect(()=>{let x=!1;const j=ln(e||"/"),_=async()=>{try{const O=await ge.postPresence(j);!x&&(O!=null&&O.gallery_id)&&Hn(G=>({...G,[O.gallery_id]:O}))}catch{}};_();const I=window.setInterval(_,3e4);return()=>{x=!0,window.clearInterval(I)}},[e]),d.useEffect(()=>{let x=!1;return ge.getHealth().then(j=>{var I;if(x)return;const _=((I=j==null?void 0:j.labels)==null?void 0:I.enabled)??!0;Av(_)}).catch(()=>{}),()=>{x=!0}},[]);const Gv=d.useMemo(()=>{const x=u?dn:Ut,j={0:0,1:0,2:0,3:0,4:0,5:0};for(const _ of x){const I=Me[_.path]??_.star??0;j[String(I)]=(j[String(I)]||0)+1}return j},[u,dn,Ut,Me]),Kn=d.useMemo(()=>{const x=new Set;let j=0;const _=u?dn:Ut;for(const I of _){const O=I.metrics;if(O)for(const G of Object.keys(O))x.add(G);if(j+=1,j>=250&&x.size>0)break}return Array.from(x).sort()},[u,dn,Ut]);d.useEffect(()=>{Xt||Kn.length&&T(x=>{const j=x.selectedMetric&&Kn.includes(x.selectedMetric)?x.selectedMetric:Kn[0];return j===x.selectedMetric?x:{...x,selectedMetric:j}})},[Kn,Xt]),d.useEffect(()=>{Xt||E.sort.kind==="metric"&&(Kn.includes(E.sort.key)||T(x=>({...x,sort:{kind:"builtin",key:"added",dir:x.sort.dir}})))},[Kn,E.sort,Xt]);const co=d.useMemo(()=>nk(E.filters),[E.filters]),pa=ne??ri,Xv=He??pa,Qd=Xt||Nr||co>0,fo=lt[e],Jv=nt.state==="syncing"?"Syncing":nt.state==="error"?nt.message?`Not saved  ${nt.message}`:"Not saved  retry":"All changes saved",Zv=Pk(Cn),ga=Qn!=null,ey=d.useMemo(()=>!ga||Qn==null?"No edits yet.":Mv(Qn,ni),[ga,Qn,ni]),Kd=Qn==null?null:Math.max(0,ni-Qn),ty=((fo==null?void 0:fo.editing)??0)>0||Kd!=null&&Kd<Lk,ny=ti!=null&&ti>Tk,ry=Cn==="offline"||Cn==="connecting"||Cn==="idle",sy=Cn==="reconnecting"||ss||nt.state==="error"||ny,iy=Ik({isOffline:ry,isUnstable:sy,recentEditActive:Dv,editingActive:ty}),oy=d.useMemo(()=>Fk(Vn,Qe),[Vn,Qe]),va=d.useMemo(()=>Vn.length?Vn.reduce((x,j)=>Math.max(x,j.ts),0):null,[Vn]),ly=_v||Od!=null&&va!=null&&va<=Od?null:oy,ay=d.useMemo(()=>Ok(Fd,Qe,ni),[Qe,ni,Fd]),uy=zk(Xt,Qd,ua,pa),cy=Ak(Xt,Qd,ri,pa,Xv,e),qd=d.useMemo(()=>{if(!u)return null;if(u.queryPath){const x=u.queryPath.split("/").filter(Boolean);return x.length?x[x.length-1]:u.queryPath}return u.queryVector?"Vector query":null},[u]),Yd=d.useMemo(()=>u?co>0?`${ua} of ${ri}`:`${ri}`:null,[u,co,ua,ri]),mt=d.useCallback(x=>{T(j=>({...j,filters:x(j.filters)}))},[]),dy=d.useCallback(x=>{T(j=>({...j,filters:x}))},[]),ho=d.useCallback(()=>{mt(x=>nu(x,[]))},[mt]),Gd=d.useCallback(()=>{T(x=>({...x,filters:{and:[]}}))},[]),fy=d.useCallback(()=>{c(null);const x=Z.current;Z.current=null,x&&x.length?(i(x),y(j=>j+1)):i([])},[]),hy=d.useCallback(async x=>{!u&&Z.current===null&&(Z.current=s);const j=await ge.searchEmbeddings(x);if(c({embedding:j.embedding,queryPath:x.query_path??null,queryVector:x.query_vector_b64??null,topK:x.top_k??50,minScore:x.min_score??null,items:j.items,createdAt:Date.now()}),j.items.length){const _=x.query_path&&j.items.some(I=>I.path===x.query_path)?x.query_path:j.items[0].path;i([_]),y(I=>I+1)}else i([])},[u,s]),ya=d.useCallback((x,j)=>{mt(_=>tk(_,x,j))},[mt]),Xd=d.useMemo(()=>{var j,_,I,O,G,ae;const x=[];for(const X of E.filters.and)if("stars"in X){const ee=X.stars||[];if(!ee.length)continue;x.push({id:"stars",label:`Rating in: ${iu(ee)}`,onRemove:()=>ho()})}else if("starsIn"in X){const ee=X.starsIn.values||[];if(!ee.length)continue;x.push({id:"stars-in",label:`Rating in: ${iu(ee)}`,onRemove:()=>ho()})}else if("starsNotIn"in X){const ee=X.starsNotIn.values||[];if(!ee.length)continue;x.push({id:"stars-not-in",label:`Rating not in: ${iu(ee)}`,onRemove:()=>mt(xe=>xv(xe,[]))})}else if("nameContains"in X){const ee=(j=X.nameContains.value)==null?void 0:j.trim();if(!ee)continue;x.push({id:"name-contains",label:`Filename contains: ${ee}`,onRemove:()=>mt(xe=>wv(xe,""))})}else if("nameNotContains"in X){const ee=(_=X.nameNotContains.value)==null?void 0:_.trim();if(!ee)continue;x.push({id:"name-not-contains",label:`Filename not: ${ee}`,onRemove:()=>mt(xe=>Sv(xe,""))})}else if("commentsContains"in X){const ee=(I=X.commentsContains.value)==null?void 0:I.trim();if(!ee)continue;x.push({id:"comments-contains",label:`Comments contain: ${ee}`,onRemove:()=>mt(xe=>kv(xe,""))})}else if("commentsNotContains"in X){const ee=(O=X.commentsNotContains.value)==null?void 0:O.trim();if(!ee)continue;x.push({id:"comments-not-contains",label:`Comments not: ${ee}`,onRemove:()=>mt(xe=>Cv(xe,""))})}else if("urlContains"in X){const ee=(G=X.urlContains.value)==null?void 0:G.trim();if(!ee)continue;x.push({id:"url-contains",label:`URL contains: ${ee}`,onRemove:()=>mt(xe=>bv(xe,""))})}else if("urlNotContains"in X){const ee=(ae=X.urlNotContains.value)==null?void 0:ae.trim();if(!ee)continue;x.push({id:"url-not-contains",label:`URL not: ${ee}`,onRemove:()=>mt(xe=>Ev(xe,""))})}else if("dateRange"in X){const{from:ee,to:xe}=X.dateRange;if(!ee&&!xe)continue;x.push({id:"date-range",label:`Date: ${Wk(ee,xe)}`,onRemove:()=>mt(at=>bc(at,null))})}else if("widthCompare"in X){const{op:ee,value:xe}=X.widthCompare;x.push({id:"width-compare",label:`Width ${ee} ${xe}`,onRemove:()=>mt(at=>nl(at,null))})}else if("heightCompare"in X){const{op:ee,value:xe}=X.heightCompare;x.push({id:"height-compare",label:`Height ${ee} ${xe}`,onRemove:()=>mt(at=>rl(at,null))})}else if("metricRange"in X){const{key:ee,min:xe,max:at}=X.metricRange;x.push({id:`metric:${ee}`,label:`${ee}: ${Vk(xe,at)}`,onRemove:()=>ya(ee,null)})}return x},[E.filters,ho,ya,mt]),my=d.useCallback(x=>{const j=new Set(aa);j.has(x)?j.delete(x):j.add(x),T(_=>({..._,filters:nu(_.filters,Array.from(j))}))},[aa]),py=d.useCallback(()=>{ue(!0),he("metrics")},[]),gy=d.useCallback(x=>{T(j=>({...j,sort:x})),x.kind==="builtin"&&x.key==="random"&&P(Date.now())},[]),Jd=d.useCallback(x=>{if(x==="/"||x==="")return"Lenslet | Root";const j=x.split("/").filter(Boolean);if(!j.length)return"Lenslet";const _=j.slice(-2).join("/");return`Lenslet | ${j.length>2?`.../${_}`:`/${_}`}`},[]),vy=d.useMemo(()=>Hk(e),[e]);d.useEffect(()=>{document.title=Jd(e)},[e,Jd]),d.useEffect(()=>{let x=!0;return ge.getViews().then(j=>{x&&Ne(j.views||[])}).catch(()=>{x&&Ne([])}),()=>{x=!1}},[]),d.useEffect(()=>{Nr&&(i([]),f&&(m(null),te.current=!1,zo(e)))},[Nr,f,e]),d.useEffect(()=>{const x=Te.current,j=B.current;if(!x||!j)return;const _=()=>{const I=Math.max(48,Math.round(j.getBoundingClientRect().height));x.style.setProperty("--toolbar-h",`${I}px`)};if(_(),"ResizeObserver"in window){const I=new ResizeObserver(_);return I.observe(j),()=>I.disconnect()}return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]),d.useEffect(()=>{try{const x=localStorage.getItem(Be.sortKey),j=localStorage.getItem(Be.sortDir),_=localStorage.getItem(Be.sortSpec),I=localStorage.getItem(Be.starFilters),O=localStorage.getItem(Be.filterAst),G=localStorage.getItem(Be.selectedMetric),ae=localStorage.getItem(Be.viewMode),X=localStorage.getItem(Be.gridItemSize),ee=localStorage.getItem(Be.leftOpen),xe=localStorage.getItem(Be.rightOpen),sf=(ut=>{if(!ut)return null;const Ye=Za(ut);return!Ye||typeof Ye!="object"?null:Ye.kind==="builtin"&&(Ye.key==="name"||Ye.key==="added"||Ye.key==="random")&&(Ye.dir==="asc"||Ye.dir==="desc")||Ye.kind==="metric"&&typeof Ye.key=="string"&&Ye.key.length>0&&(Ye.dir==="asc"||Ye.dir==="desc")?Ye:null})(_)??{kind:"builtin",key:x==="name"||x==="added"||x==="random"?x:"added",dir:j==="asc"||j==="desc"?j:"desc"};sf.key==="random"&&P(Date.now());let ka=(ut=>{if(!ut)return null;const Ye=Za(ut);return Cc(Ye)})(O)??{and:[]};if(I){const ut=Za(I);if(Array.isArray(ut)){const Ye=ut.filter(Ny=>[0,1,2,3,4,5].includes(Ny));ka=nu(ka,Ye)}}if(T(ut=>({...ut,sort:sf,filters:ka,selectedMetric:G||ut.selectedMetric})),(ae==="grid"||ae==="adaptive")&&D(ae),X){const ut=Number(X);!isNaN(ut)&&ut>=80&&ut<=500&&oe(ut)}(ee==="0"||ee==="false")&&ue(!1),(xe==="0"||xe==="false")&&V(!1)}catch{}},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia("(max-width: 900px)"),j=()=>{x.matches&&(ue(!1),V(!1))};return j(),"addEventListener"in x?(x.addEventListener("change",j),()=>x.removeEventListener("change",j)):(x.addListener(j),()=>x.removeListener(j))},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=[1,1.25,1.5,1.75,2,3,4],j=O=>x.reduce((G,ae)=>Math.abs(ae-O)<Math.abs(G-O)?ae:G,x[0]),_=()=>{var at;const O=window.devicePixelRatio||1,G=j(O),ae=((at=window.visualViewport)==null?void 0:at.scale)??1,X=O*ae/G;if(!Number.isFinite(X)){M(null);return}const ee=Math.round(X*100),xe=Math.min(500,Math.max(25,ee));M(xe)};_(),window.addEventListener("resize",_),window.addEventListener("orientationchange",_);const I=window.visualViewport;return I&&I.addEventListener("resize",_),()=>{window.removeEventListener("resize",_),window.removeEventListener("orientationchange",_),I&&I.removeEventListener("resize",_)}},[]),d.useEffect(()=>{try{localStorage.setItem(Be.sortKey,E.sort.kind==="builtin"?E.sort.key:"added"),localStorage.setItem(Be.sortDir,E.sort.dir),localStorage.setItem(Be.sortSpec,JSON.stringify(E.sort));const x=Jh(E.filters);localStorage.setItem(Be.starFilters,JSON.stringify(x)),localStorage.setItem(Be.filterAst,JSON.stringify(E.filters)),E.selectedMetric?localStorage.setItem(Be.selectedMetric,E.selectedMetric):localStorage.removeItem(Be.selectedMetric),localStorage.setItem(Be.viewMode,W),localStorage.setItem(Be.gridItemSize,String(z)),localStorage.setItem(Be.leftOpen,U?"1":"0"),localStorage.setItem(Be.rightOpen,F?"1":"0")}catch{}},[E,W,z,U,F]),d.useEffect(()=>{const x=$t.current;if(!x)return;const j=I=>Math.min(500,Math.max(80,I)),_=I=>{I.ctrlKey&&(f||g||(I.preventDefault(),oe(O=>j(O+(I.deltaY<0?20:-20)))))};return x.addEventListener("wheel",_,{passive:!1}),()=>x.removeEventListener("wheel",_)},[f,g]),d.useEffect(()=>{if(f||g)return;const x=$t.current;if(!x)return;const j=X=>Math.min(500,Math.max(80,X));let _=null;const I=X=>{if(X.length<2)return 0;const[ee,xe]=[X[0],X[1]];return Math.hypot(ee.clientX-xe.clientX,ee.clientY-xe.clientY)},O=X=>{if(X.touches.length!==2)return;const ee=I(X.touches);ee&&(_={dist:ee,size:z})},G=X=>{if(!_||X.touches.length!==2)return;const ee=I(X.touches);if(!ee)return;X.preventDefault();const xe=j(_.size*(ee/_.dist));oe(xe)},ae=()=>{_=null};return x.addEventListener("touchstart",O,{passive:!0}),x.addEventListener("touchmove",G,{passive:!1}),x.addEventListener("touchend",ae),x.addEventListener("touchcancel",ae),()=>{x.removeEventListener("touchstart",O),x.removeEventListener("touchmove",G),x.removeEventListener("touchend",ae),x.removeEventListener("touchcancel",ae)}},[f,g,z]),d.useEffect(()=>{if(!f)return;const x=Tt.indexOf(f);if(x===-1)return;const j=[Tt[x-2],Tt[x-1],Tt[x+1],Tt[x+2]].filter(_=>!!_);for(const _ of j)ge.prefetchFile(_),ge.prefetchThumb(_)},[f,Tt]),d.useEffect(()=>{var _;if(!g||_t.length<2)return;const x=jr,j=new Set;for(const I of[-2,-1,0,1,2,3]){const O=x+I;O>=0&&O<_t.length&&j.add(O)}for(const I of j){const O=(_=_t[I])==null?void 0:_.path;O&&(ge.prefetchFile(O),ge.prefetchThumb(O))}},[g,_t,jr]),d.useEffect(()=>{var j;if(!((j=Ue==null?void 0:Ue.items)!=null&&j.length))return;const x=Ue.items.slice(0,5);for(const _ of x)ge.prefetchFile(_.path)},[Ue==null?void 0:Ue.path,Ue==null?void 0:Ue.items]);const mo=d.useCallback(x=>{m(null),te.current=!1;const j=ln(x);t(j),Gh(j)},[]),yy=d.useCallback(async()=>{const x=window.prompt("Save Smart Folder as:","New Smart Folder");if(!x)return;const j=Uk(x,fe),_={id:j,name:x,pool:{kind:"folder",path:e},view:JSON.parse(JSON.stringify(E))},I=[...fe.filter(O=>O.id!==j),_];Ne(I),Y(j);try{await ge.saveViews({version:1,views:I})}catch(O){if(O instanceof wn&&O.status===403){const G=new Blob([JSON.stringify({version:1,views:I},null,2)],{type:"application/json"});Nc(G,`lenslet-smart-folder-${j}.json`),alert("No-write mode: exported Smart Folder JSON instead of saving.");return}console.error("Failed to save Smart Folder:",O)}},[e,E,fe]);d.useEffect(()=>{if(!H)return;const x=fe.find(I=>I.id===H);if(!x){Y(null);return}const j=x.pool.path===e,_=JSON.stringify(x.view)===JSON.stringify(E);(!j||!_)&&Y(null)},[H,fe,e,E]);const po=d.useCallback(x=>{if(!x)return;const j=document.getElementById(`cell-${encodeURIComponent(x)}`);j==null||j.focus()},[]),xy=d.useCallback(x=>{m(x),te.current=!0,Gh(x)},[]),Zd=d.useCallback(()=>{m(null),te.current?(te.current=!1,window.history.back()):zo(e),po(pe.current)},[po]),wy=d.useCallback(()=>{g||!si||(s[0]&&(pe.current=s[0]),N(0),w(!0),f&&(m(null),te.current&&(te.current=!1),zo(e)),se.current||(window.history.pushState({compare:!0},"",window.location.href),se.current=!0))},[g,si,s,f,e]),xa=d.useCallback(()=>{w(!1),se.current&&(se.current=!1,window.history.back()),po(pe.current??s[0])},[po,s]),Sy=d.useCallback(x=>{_t.length<2||N(j=>{const _=Math.max(0,_t.length-2);return Math.min(_,Math.max(0,j+x))})},[_t.length]);d.useEffect(()=>{g&&(si||xa())},[g,si,xa]),d.useEffect(()=>{const x=()=>{f&&(te.current=!1,m(null)),g&&(se.current=!1,w(!1))};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[f,g]),d.useEffect(()=>{const x=Te.current;if(!x)return;const j=O=>{O.dataTransfer&&Array.from(O.dataTransfer.types).includes("Files")&&(O.preventDefault(),A(!0))},_=O=>{const G=O.relatedTarget;G&&x.contains(G)||A(!1)},I=async O=>{var X,ee;O.preventDefault(),A(!1);const G=Array.from(((X=O.dataTransfer)==null?void 0:X.files)??[]);if(!G.length)return;if(!((((ee=Ue==null?void 0:Ue.dirs)==null?void 0:ee.length)??0)===0)){alert("Uploads are only allowed into folders without subdirectories.");return}for(const xe of G)try{await ge.uploadFile(e,xe)}catch(at){console.error(`Failed to upload ${xe.name}:`,at)}la()};return x.addEventListener("dragover",j),x.addEventListener("dragleave",_),x.addEventListener("drop",I),()=>{x.removeEventListener("dragover",j),x.removeEventListener("dragleave",_),x.removeEventListener("drop",I)}},[e,(rf=Ue==null?void 0:Ue.dirs)==null?void 0:rf.length,la]),d.useEffect(()=>{const x=()=>le(null),j=_=>{_.key==="Escape"&&le(null)};return window.addEventListener("click",x),window.addEventListener("keydown",j),()=>{window.removeEventListener("click",x),window.removeEventListener("keydown",j)}},[]),d.useEffect(()=>{const x=j=>{if(!Rd(j.target)){if((j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="b"){j.preventDefault(),j.altKey?V(_=>!_):ue(_=>!_);return}if(!(f||g)){if(j.key==="Backspace"||j.key==="Delete")j.preventDefault(),mo(Xh(e));else if((j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="a")j.preventDefault(),i(Qe.map(_=>_.path));else if(j.key==="Escape")s.length&&(j.preventDefault(),i([]));else if(j.key==="/"){j.preventDefault();const _=document.querySelector(".toolbar-right .input");_==null||_.focus()}}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,Qe,s,f,g,mo]);const ky=U?`${Q}px`:"0px",Cy=F?`${de}px`:"0px",ef=f??s[0]??null,wa=ef?Tt.indexOf(ef):-1,by=wa>0,Ey=wa>=0&&wa<Tt.length-1,Sa=d.useCallback(x=>{if(!Tt.length)return;const j=f??s[0];if(!j)return;const _=Tt.indexOf(j);if(_===-1)return;const I=Math.min(Tt.length-1,Math.max(0,_+x)),O=Tt[I];!O||O===j||(f&&(m(O),zo(O)),i([O]))},[Tt,f,s]);return a.jsxs("div",{className:"app-shell grid h-full grid-cols-[var(--left)_1fr_var(--right)]",ref:Te,style:{"--left":ky,"--right":Cy},children:[a.jsx($w,{rootRef:B,onSearch:r,viewerActive:!!f,onBack:Zd,zoomPercent:f?v:void 0,onZoomPercentChange:x=>p(x),currentLabel:vy,itemCount:uy,totalCount:cy,sortSpec:E.sort,metricKeys:Kn,onSortChange:gy,sortDisabled:Xt,filterCount:co,onOpenFilters:py,starFilters:aa,onToggleStar:my,onClearStars:ho,onClearFilters:Gd,starCounts:Gv,viewMode:W,onViewMode:D,gridItemSize:z,onGridItemSize:oe,leftOpen:U,rightOpen:F,onToggleLeft:()=>ue(x=>!x),onToggleRight:()=>V(x=>!x),onPrevImage:()=>Sa(-1),onNextImage:()=>Sa(1),canPrevImage:by,canNextImage:Ey,searchDisabled:Xt,searchPlaceholder:Xt?"Exit similarity to search":void 0,syncIndicator:{state:iy,presence:fo,syncLabel:Jv,connectionLabel:Zv,lastEditedLabel:ey,hasEdits:ga,recentTouches:ay}}),U&&a.jsx(Mk,{leftTool:q,onToolChange:he,compareEnabled:si,compareActive:g,onOpenCompare:wy,views:fe,activeViewId:H,onActivateView:x=>{var _;Y(x.id);const j=Cc((_=x.view)==null?void 0:_.filters)??{and:[]};T({...x.view,filters:j}),mo(x.pool.path)},onSaveView:yy,current:e,data:Ue,onOpenFolder:x=>{Y(null),mo(x)},onContextMenu:(x,j)=>{x.preventDefault(),le({x:x.clientX,y:x.clientY,kind:"tree",payload:{path:j}})},countVersion:qe,items:qv,filteredItems:Qe,metricKeys:Kn,selectedItems:Wv,selectedMetric:E.selectedMetric,onSelectMetric:x=>T(j=>({...j,selectedMetric:x})),filters:E.filters,onChangeRange:ya,onChangeFilters:dy,onResize:be}),a.jsxs("div",{className:"grid-shell col-start-2 row-start-2 relative overflow-hidden flex flex-col",ref:$t,children:[a.jsx("div",{"aria-live":"polite",className:"sr-only",children:s.length?`${s.length} selected`:""}),a.jsx(Rk,{persistenceEnabled:zv,recentSummary:ly,onDismissRecent:()=>Pv(!0),onCloseRecent:()=>Tv(va??Date.now()),browserZoomPercent:R}),u&&a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"font-semibold",children:"Similarity mode"}),a.jsxs("span",{className:"text-muted",children:["Embedding: ",u.embedding]}),qd&&a.jsxs("span",{className:"text-muted",children:["Query: ",qd]}),Yd&&a.jsxs("span",{className:"text-muted",children:["Results: ",Yd]}),a.jsxs("span",{className:"text-muted",children:["Top K: ",u.topK]}),u.minScore!=null&&a.jsxs("span",{className:"text-muted",children:["Min score: ",u.minScore]})]}),a.jsx("button",{className:"btn btn-sm",onClick:fy,children:"Exit similarity"})]})}),Xd.length>0&&a.jsx("div",{className:"sticky top-0 z-10 px-3 py-2 bg-panel border-b border-border",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Filters"}),Xd.map(x=>a.jsxs("span",{className:"filter-chip",children:[a.jsx("span",{className:"truncate max-w-[240px]",title:x.label,children:x.label}),a.jsx("button",{className:"filter-chip-remove","aria-label":`Clear filter ${x.label}`,onClick:x.onRemove,children:""})]},x.id)),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:Gd,children:"Clear all"})]})}),!1,a.jsxs("div",{className:"flex-1 min-h-0 relative",children:[a.jsx(I1,{items:Qe,selected:s,restoreToSelectionToken:L,onSelectionChange:i,onOpenViewer:x=>{try{pe.current=x}catch{}xy(x),i([x])},highlight:Nr?$d:"",recentlyUpdated:Iv,suppressSelectionHighlight:!!f||g,viewMode:W,targetCellSize:z,onContextMenuItem:(x,j)=>{x.preventDefault();const _=s.length?s:[j];le({x:x.clientX,y:x.clientY,kind:"grid",payload:{paths:_}})},scrollRef:Wn,hideScrollbar:Hd}),Hd&&ii&&a.jsx(D1,{items:Qe,metricKey:ii,scrollRef:Wn,sortDir:E.sort.dir})]})]}),F&&a.jsx(bS,{path:s[0]??null,selectedPaths:s,items:Qe,sortSpec:E.sort,onResize:Re,onStarChanged:(x,j)=>{kn(_=>{const I={..._};for(const O of x)I[O]=j;return I})},onFindSimilar:()=>l(!0),embeddingsAvailable:Uv,embeddingsLoading:is.isLoading}),a.jsx(ES,{open:o,embeddings:Ud,rejected:$v,selectedPath:s[0]??null,embeddingsLoading:is.isLoading,embeddingsError:Bv,onClose:()=>l(!1),onSearch:hy}),f&&a.jsx(Q1,{path:f,onClose:Zd,onZoomChange:x=>b(Math.round(x)),requestedZoomPercent:h,onZoomRequestConsumed:()=>p(null),onNavigate:Sa}),g&&a.jsx(X1,{aItem:Hv,bItem:Vv,index:jr,total:_t.length,canPrev:Qv,canNext:Kv,onNavigate:Sy,onClose:xa}),Ct&&a.jsx("div",{className:"toolbar-offset fixed inset-0 left-[var(--left)] right-[var(--right)] bg-accent/10 border-2 border-dashed border-accent text-text flex items-center justify-center text-lg z-overlay pointer-events-none",children:"Drop images to upload"}),ie&&a.jsx(qk,{ctx:ie,current:e,items:Qe,refetch:la,setCtx:le,onInvalidateCounts:Yv})]})}function Uk(e,t){const n=Bk(e)||"view",r=new Set(t.map(i=>i.id));if(!r.has(n))return n;let s=2;for(;r.has(`${n}-${s}`);)s+=1;return`${n}-${s}`}function Bk(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function iu(e){const t=e.filter(s=>s>0).sort((s,i)=>i-s),n=e.includes(0),r=[...t.map(s=>String(s))];return n&&r.push("None"),r.join(", ")}function Wk(e,t){return e&&t?`${e} to ${t}`:e?`from ${e}`:t?`to ${t}`:""}function Hk(e){if(e==="/"||e==="")return"Root";const t=e.split("/").filter(Boolean);return t.length?t.length<=2?`/${t.join("/")}`:`.../${t.slice(-2).join("/")}`:"Root"}function Vk(e,t){return`${Cm(e)}${Cm(t)}`}function Cm(e){const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Qk(e){const t=e.toLowerCase();return t.endsWith(".png")?"image/png":t.endsWith(".webp")?"image/webp":"image/jpeg"}function Kk(e,t){const n=e.split("/").pop()??e;return{path:e,name:n,type:Qk(e),w:0,h:0,size:0,hasThumb:!0,hasMeta:!1,star:t??null}}function Nc(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function qk({ctx:e,current:t,items:n,refetch:r,setCtx:s,onInvalidateCounts:i}){const o=DS(t),l=rs(),[u,c]=sl.useState(!1),[f,m]=sl.useState(null),g=()=>new Date().toISOString().replace(/[:.]/g,"-"),w=h=>{const p=v=>h==="/"?!0:v===h||v.startsWith(`${h}/`);l.invalidateQueries({predicate:({queryKey:v})=>{if(!Array.isArray(v)||v[0]!=="folder")return!1;const b=typeof v[1]=="string"?v[1]:"";return p(b)}})},k=h=>{const p=ln(h);return p===""?"/":p},N=async()=>{const h=k(e.payload.path||"/");c(!0);try{await ge.refreshFolder(h),w(h),i(),(t===h||t.startsWith(h==="/"?"/":`${h}/`))&&await r(),hc.evictPrefix(h),cs.evictPrefix(h)}catch(p){console.error("Failed to refresh folder:",p)}finally{c(!1),s(null)}},L=h=>async()=>{m(h);const p=e.payload.path||t;try{const b=(await ge.getFolder(p,void 0,!0)).items,R=um(b),M=h==="csv"?am(R):lm(R),E=h==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8",T=p==="/"?"root":(p.replace(/^\/+/,"")||"root").replace(/\//g,"_");Nc(new Blob([M],{type:E}),`metadata_${T}_${g()}.${h}`)}catch(v){console.error("Failed to export folder:",v),alert("Failed to export folder. See console for details.")}finally{m(null),s(null)}},y=e.kind==="tree"?[{label:u?"Refreshing":"Refresh",disabled:u,onClick:N},{label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f||u,onClick:L("csv")},{label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f||u,onClick:L("json")}]:(()=>{const h=e.payload.paths??[],p=[],v=b=>async()=>{m(b);try{const R=new Set(h),M=n.filter(P=>R.has(P.path)),E=um(M),T=b==="csv"?am(E):lm(E),C=b==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8";Nc(new Blob([T],{type:C}),`metadata_selection_${g()}.${b}`)}finally{m(null),s(null)}};return p.push({label:"Move to trash",disabled:o,onClick:async()=>{if(!o){for(const b of h)try{await ge.moveFile(b,"/_trash_")}catch(R){console.error(`Failed to trash ${b}:`,R)}r(),s(null)}}}),o&&(p.push({label:"Permanent delete",danger:!0,onClick:async()=>{if(confirm(`Delete ${h.length} file(s) permanently? This cannot be undone.`)){try{await ge.deleteFiles(h)}catch(b){console.error("Failed to delete files:",b)}r(),s(null)}}}),p.push({label:"Recover",onClick:async()=>{for(const b of h)try{const M=(await ge.getSidecar(b)).original_position,E=M&&M.split("/").slice(0,-1).join("/")||"/";await ge.moveFile(b,E)}catch(R){console.error(`Failed to recover ${b}:`,R)}r(),s(null)}})),h.length&&(p.push({label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f,onClick:v("csv")}),p.push({label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f,onClick:v("json")})),p})();return a.jsx(dk,{x:e.x,y:e.y,items:y})}const Yk=new bw({defaultOptions:{queries:{staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always"},mutations:{retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),5e3)}}});function Gk(){return a.jsx(Ew,{client:Yk,children:a.jsx($k,{})})}Kg(document.getElementById("root")).render(a.jsx(Gk,{}));
