var r0=Object.defineProperty;var Mf=e=>{throw TypeError(e)};var s0=(e,t,n)=>t in e?r0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Pn=(e,t,n)=>s0(e,typeof t!="symbol"?t+"":t,n),$a=(e,t,n)=>t.has(e)||Mf("Cannot "+n);var C=(e,t,n)=>($a(e,t,"read from private field"),n?n.call(e):t.get(e)),ae=(e,t,n)=>t.has(e)?Mf("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),V=(e,t,n,r)=>($a(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),me=(e,t,n)=>($a(e,t,"access private method"),n);var _o=(e,t,n,r)=>({set _(s){V(e,t,s,n)},get _(){return C(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function i0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ap={exports:{}},ea={},up={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ho=Symbol.for("react.element"),o0=Symbol.for("react.portal"),l0=Symbol.for("react.fragment"),a0=Symbol.for("react.strict_mode"),u0=Symbol.for("react.profiler"),c0=Symbol.for("react.provider"),d0=Symbol.for("react.context"),f0=Symbol.for("react.forward_ref"),h0=Symbol.for("react.suspense"),m0=Symbol.for("react.memo"),p0=Symbol.for("react.lazy"),Rf=Symbol.iterator;function g0(e){return e===null||typeof e!="object"?null:(e=Rf&&e[Rf]||e["@@iterator"],typeof e=="function"?e:null)}var cp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dp=Object.assign,fp={};function li(e,t,n){this.props=e,this.context=t,this.refs=fp,this.updater=n||cp}li.prototype.isReactComponent={};li.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};li.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function hp(){}hp.prototype=li.prototype;function qc(e,t,n){this.props=e,this.context=t,this.refs=fp,this.updater=n||cp}var Gc=qc.prototype=new hp;Gc.constructor=qc;dp(Gc,li.prototype);Gc.isPureReactComponent=!0;var Lf=Array.isArray,mp=Object.prototype.hasOwnProperty,Yc={current:null},pp={key:!0,ref:!0,__self:!0,__source:!0};function gp(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)mp.call(t,r)&&!pp.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ho,type:e,key:i,ref:o,props:s,_owner:Yc.current}}function v0(e,t){return{$$typeof:ho,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Xc(e){return typeof e=="object"&&e!==null&&e.$$typeof===ho}function y0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Tf=/\/+/g;function Ua(e,t){return typeof e=="object"&&e!==null&&e.key!=null?y0(""+e.key):t.toString(36)}function rl(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ho:case o0:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Ua(o,0):r,Lf(s)?(n="",e!=null&&(n=e.replace(Tf,"$&/")+"/"),rl(s,t,n,"",function(c){return c})):s!=null&&(Xc(s)&&(s=v0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Tf,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Lf(e))for(var l=0;l<e.length;l++){i=e[l];var u=r+Ua(i,l);o+=rl(i,t,n,u,s)}else if(u=g0(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=r+Ua(i,l++),o+=rl(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Po(e,t,n){if(e==null)return e;var r=[],s=0;return rl(e,r,"","",function(i){return t.call(n,i,s++)}),r}function x0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Et={current:null},sl={transition:null},w0={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:sl,ReactCurrentOwner:Yc};function vp(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Po,forEach:function(e,t,n){Po(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Po(e,function(){t++}),t},toArray:function(e){return Po(e,function(t){return t})||[]},only:function(e){if(!Xc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ve.Component=li;ve.Fragment=l0;ve.Profiler=u0;ve.PureComponent=qc;ve.StrictMode=a0;ve.Suspense=h0;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w0;ve.act=vp;ve.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=dp({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Yc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)mp.call(t,u)&&!pp.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:ho,type:e.type,key:s,ref:i,props:r,_owner:o}};ve.createContext=function(e){return e={$$typeof:d0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:c0,_context:e},e.Consumer=e};ve.createElement=gp;ve.createFactory=function(e){var t=gp.bind(null,e);return t.type=e,t};ve.createRef=function(){return{current:null}};ve.forwardRef=function(e){return{$$typeof:f0,render:e}};ve.isValidElement=Xc;ve.lazy=function(e){return{$$typeof:p0,_payload:{_status:-1,_result:e},_init:x0}};ve.memo=function(e,t){return{$$typeof:m0,type:e,compare:t===void 0?null:t}};ve.startTransition=function(e){var t=sl.transition;sl.transition={};try{e()}finally{sl.transition=t}};ve.unstable_act=vp;ve.useCallback=function(e,t){return Et.current.useCallback(e,t)};ve.useContext=function(e){return Et.current.useContext(e)};ve.useDebugValue=function(){};ve.useDeferredValue=function(e){return Et.current.useDeferredValue(e)};ve.useEffect=function(e,t){return Et.current.useEffect(e,t)};ve.useId=function(){return Et.current.useId()};ve.useImperativeHandle=function(e,t,n){return Et.current.useImperativeHandle(e,t,n)};ve.useInsertionEffect=function(e,t){return Et.current.useInsertionEffect(e,t)};ve.useLayoutEffect=function(e,t){return Et.current.useLayoutEffect(e,t)};ve.useMemo=function(e,t){return Et.current.useMemo(e,t)};ve.useReducer=function(e,t,n){return Et.current.useReducer(e,t,n)};ve.useRef=function(e){return Et.current.useRef(e)};ve.useState=function(e){return Et.current.useState(e)};ve.useSyncExternalStore=function(e,t,n){return Et.current.useSyncExternalStore(e,t,n)};ve.useTransition=function(){return Et.current.useTransition()};ve.version="18.3.1";up.exports=ve;var d=up.exports;const Cl=i0(d);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0=d,C0=Symbol.for("react.element"),k0=Symbol.for("react.fragment"),b0=Object.prototype.hasOwnProperty,E0=S0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N0={key:!0,ref:!0,__self:!0,__source:!0};function yp(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)b0.call(t,r)&&!N0.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:C0,type:e,key:i,ref:o,props:s,_owner:E0.current}}ea.Fragment=k0;ea.jsx=yp;ea.jsxs=yp;ap.exports=ea;var a=ap.exports,xp={exports:{}},$t={},wp={exports:{}},Sp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,H){var G=A.length;A.push(H);e:for(;0<G;){var J=G-1>>>1,ce=A[J];if(0<s(ce,H))A[J]=H,A[G]=ce,G=J;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var H=A[0],G=A.pop();if(G!==H){A[0]=G;e:for(var J=0,ce=A.length,Re=ce>>>1;J<Re;){var Q=2*(J+1)-1,K=A[Q],Z=Q+1,te=A[Z];if(0>s(K,G))Z<ce&&0>s(te,K)?(A[J]=te,A[Z]=G,J=Z):(A[J]=K,A[Q]=G,J=Q);else if(Z<ce&&0>s(te,G))A[J]=te,A[Z]=G,J=Z;else break e}}return H}function s(A,H){var G=A.sortIndex-H.sortIndex;return G!==0?G:A.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,h=null,v=3,S=!1,k=!1,E=!1,R=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(A){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=A)r(c),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(c)}}function p(A){if(E=!1,g(A),!k)if(n(u)!==null)k=!0,_(w);else{var H=n(c);H!==null&&fe(p,H.startTime-A)}}function w(A,H){k=!1,E&&(E=!1,y(b),b=-1),S=!0;var G=v;try{for(g(H),h=n(u);h!==null&&(!(h.expirationTime>H)||A&&!P());){var J=h.callback;if(typeof J=="function"){h.callback=null,v=h.priorityLevel;var ce=J(h.expirationTime<=H);H=e.unstable_now(),typeof ce=="function"?h.callback=ce:h===n(u)&&r(u),g(H)}else r(u);h=n(u)}if(h!==null)var Re=!0;else{var Q=n(c);Q!==null&&fe(p,Q.startTime-H),Re=!1}return Re}finally{h=null,v=G,S=!1}}var M=!1,L=null,b=-1,T=5,N=-1;function P(){return!(e.unstable_now()-N<T)}function U(){if(L!==null){var A=e.unstable_now();N=A;var H=!0;try{H=L(!0,A)}finally{H?D():(M=!1,L=null)}}else M=!1}var D;if(typeof m=="function")D=function(){m(U)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ue=oe.port2;oe.port1.onmessage=U,D=function(){ue.postMessage(null)}}else D=function(){R(U,0)};function _(A){L=A,M||(M=!0,D())}function fe(A,H){b=R(function(){A(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){k||S||(k=!0,_(w))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(A){switch(v){case 1:case 2:case 3:var H=3;break;default:H=v}var G=v;v=H;try{return A()}finally{v=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,H){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var G=v;v=A;try{return H()}finally{v=G}},e.unstable_scheduleCallback=function(A,H,G){var J=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?J+G:J):G=J,A){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=G+ce,A={id:f++,callback:H,priorityLevel:A,startTime:G,expirationTime:ce,sortIndex:-1},G>J?(A.sortIndex=G,t(c,A),n(u)===null&&A===n(c)&&(E?(y(b),b=-1):E=!0,fe(p,G-J))):(A.sortIndex=ce,t(u,A),k||S||(k=!0,_(w))),A},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(A){var H=v;return function(){var G=v;v=H;try{return A.apply(this,arguments)}finally{v=G}}}})(Sp);wp.exports=Sp;var j0=wp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0=d,At=j0;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cp=new Set,$i={};function cs(e,t){Zs(e,t),Zs(e+"Capture",t)}function Zs(e,t){for($i[e]=t,e=0;e<t.length;e++)Cp.add(t[e])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bu=Object.prototype.hasOwnProperty,R0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_f={},Pf={};function L0(e){return bu.call(Pf,e)?!0:bu.call(_f,e)?!1:R0.test(e)?Pf[e]=!0:(_f[e]=!0,!1)}function T0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _0(e,t,n,r){if(t===null||typeof t>"u"||T0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nt(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ut[e]=new Nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ut[t]=new Nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ut[e]=new Nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ut[e]=new Nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ut[e]=new Nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ut[e]=new Nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ut[e]=new Nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ut[e]=new Nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ut[e]=new Nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Jc=/[\-:]([a-z])/g;function Zc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Jc,Zc);ut[t]=new Nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Jc,Zc);ut[t]=new Nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Jc,Zc);ut[t]=new Nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ut[e]=new Nt(e,1,!1,e.toLowerCase(),null,!1,!1)});ut.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ut[e]=new Nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ed(e,t,n,r){var s=ut.hasOwnProperty(t)?ut[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_0(t,n,s,r)&&(n=null),r||s===null?L0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Jn=M0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Io=Symbol.for("react.element"),ws=Symbol.for("react.portal"),Ss=Symbol.for("react.fragment"),td=Symbol.for("react.strict_mode"),Eu=Symbol.for("react.profiler"),kp=Symbol.for("react.provider"),bp=Symbol.for("react.context"),nd=Symbol.for("react.forward_ref"),Nu=Symbol.for("react.suspense"),ju=Symbol.for("react.suspense_list"),rd=Symbol.for("react.memo"),rr=Symbol.for("react.lazy"),Ep=Symbol.for("react.offscreen"),If=Symbol.iterator;function mi(e){return e===null||typeof e!="object"?null:(e=If&&e[If]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,Ba;function bi(e){if(Ba===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ba=t&&t[1]||""}return`
`+Ba+e}var Wa=!1;function Ha(e,t){if(!e||Wa)return"";Wa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{Wa=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?bi(e):""}function P0(e){switch(e.tag){case 5:return bi(e.type);case 16:return bi("Lazy");case 13:return bi("Suspense");case 19:return bi("SuspenseList");case 0:case 2:case 15:return e=Ha(e.type,!1),e;case 11:return e=Ha(e.type.render,!1),e;case 1:return e=Ha(e.type,!0),e;default:return""}}function Mu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ss:return"Fragment";case ws:return"Portal";case Eu:return"Profiler";case td:return"StrictMode";case Nu:return"Suspense";case ju:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case bp:return(e.displayName||"Context")+".Consumer";case kp:return(e._context.displayName||"Context")+".Provider";case nd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rd:return t=e.displayName||null,t!==null?t:Mu(e.type)||"Memo";case rr:t=e._payload,e=e._init;try{return Mu(e(t))}catch{}}return null}function I0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mu(t);case 8:return t===td?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function jr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Np(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function F0(e){var t=Np(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fo(e){e._valueTracker||(e._valueTracker=F0(e))}function jp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Np(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function kl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ru(e,t){var n=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ff(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=jr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Mp(e,t){t=t.checked,t!=null&&ed(e,"checked",t,!1)}function Lu(e,t){Mp(e,t);var n=jr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Tu(e,t.type,n):t.hasOwnProperty("defaultValue")&&Tu(e,t.type,jr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Of(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Tu(e,t,n){(t!=="number"||kl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ei=Array.isArray;function _s(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+jr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function _u(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($(92));if(Ei(n)){if(1<n.length)throw Error($(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:jr(n)}}function Rp(e,t){var n=jr(t.value),r=jr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Df(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Lp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Lp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Oo,Tp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Oo=Oo||document.createElement("div"),Oo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Oo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ui(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Li={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O0=["Webkit","ms","Moz","O"];Object.keys(Li).forEach(function(e){O0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Li[t]=Li[e]})});function _p(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Li.hasOwnProperty(e)&&Li[e]?(""+t).trim():t+"px"}function Pp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=_p(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var z0=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Iu(e,t){if(t){if(z0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function Fu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ou=null;function sd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zu=null,Ps=null,Is=null;function Af(e){if(e=go(e)){if(typeof zu!="function")throw Error($(280));var t=e.stateNode;t&&(t=ia(t),zu(e.stateNode,e.type,t))}}function Ip(e){Ps?Is?Is.push(e):Is=[e]:Ps=e}function Fp(){if(Ps){var e=Ps,t=Is;if(Is=Ps=null,Af(e),t)for(e=0;e<t.length;e++)Af(t[e])}}function Op(e,t){return e(t)}function zp(){}var Va=!1;function Dp(e,t,n){if(Va)return e(t,n);Va=!0;try{return Op(e,t,n)}finally{Va=!1,(Ps!==null||Is!==null)&&(zp(),Fp())}}function Bi(e,t){var n=e.stateNode;if(n===null)return null;var r=ia(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,t,typeof n));return n}var Du=!1;if(qn)try{var pi={};Object.defineProperty(pi,"passive",{get:function(){Du=!0}}),window.addEventListener("test",pi,pi),window.removeEventListener("test",pi,pi)}catch{Du=!1}function D0(e,t,n,r,s,i,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var Ti=!1,bl=null,El=!1,Au=null,A0={onError:function(e){Ti=!0,bl=e}};function $0(e,t,n,r,s,i,o,l,u){Ti=!1,bl=null,D0.apply(A0,arguments)}function U0(e,t,n,r,s,i,o,l,u){if($0.apply(this,arguments),Ti){if(Ti){var c=bl;Ti=!1,bl=null}else throw Error($(198));El||(El=!0,Au=c)}}function ds(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ap(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $f(e){if(ds(e)!==e)throw Error($(188))}function B0(e){var t=e.alternate;if(!t){if(t=ds(e),t===null)throw Error($(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return $f(s),e;if(i===r)return $f(s),t;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:t}function $p(e){return e=B0(e),e!==null?Up(e):null}function Up(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Up(e);if(t!==null)return t;e=e.sibling}return null}var Bp=At.unstable_scheduleCallback,Uf=At.unstable_cancelCallback,W0=At.unstable_shouldYield,H0=At.unstable_requestPaint,He=At.unstable_now,V0=At.unstable_getCurrentPriorityLevel,id=At.unstable_ImmediatePriority,Wp=At.unstable_UserBlockingPriority,Nl=At.unstable_NormalPriority,Q0=At.unstable_LowPriority,Hp=At.unstable_IdlePriority,ta=null,Rn=null;function K0(e){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(ta,e,void 0,(e.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:Y0,q0=Math.log,G0=Math.LN2;function Y0(e){return e>>>=0,e===0?32:31-(q0(e)/G0|0)|0}var zo=64,Do=4194304;function Ni(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Ni(l):(i&=o,i!==0&&(r=Ni(i)))}else o=n&~s,o!==0?r=Ni(o):i!==0&&(r=Ni(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-mn(t),s=1<<n,r|=e[n],t&=~s;return r}function X0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-mn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=X0(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function $u(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Vp(){var e=zo;return zo<<=1,!(zo&4194240)&&(zo=64),e}function Qa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-mn(t),e[t]=n}function Z0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-mn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function od(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-mn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var be=0;function Qp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Kp,ld,qp,Gp,Yp,Uu=!1,Ao=[],yr=null,xr=null,wr=null,Wi=new Map,Hi=new Map,ir=[],ex="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bf(e,t){switch(e){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":Wi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hi.delete(t.pointerId)}}function gi(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=go(t),t!==null&&ld(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function tx(e,t,n,r,s){switch(t){case"focusin":return yr=gi(yr,e,t,n,r,s),!0;case"dragenter":return xr=gi(xr,e,t,n,r,s),!0;case"mouseover":return wr=gi(wr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Wi.set(i,gi(Wi.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Hi.set(i,gi(Hi.get(i)||null,e,t,n,r,s)),!0}return!1}function Xp(e){var t=Ar(e.target);if(t!==null){var n=ds(t);if(n!==null){if(t=n.tag,t===13){if(t=Ap(n),t!==null){e.blockedOn=t,Yp(e.priority,function(){qp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function il(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Bu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ou=r,n.target.dispatchEvent(r),Ou=null}else return t=go(n),t!==null&&ld(t),e.blockedOn=n,!1;t.shift()}return!0}function Wf(e,t,n){il(e)&&n.delete(t)}function nx(){Uu=!1,yr!==null&&il(yr)&&(yr=null),xr!==null&&il(xr)&&(xr=null),wr!==null&&il(wr)&&(wr=null),Wi.forEach(Wf),Hi.forEach(Wf)}function vi(e,t){e.blockedOn===t&&(e.blockedOn=null,Uu||(Uu=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,nx)))}function Vi(e){function t(s){return vi(s,e)}if(0<Ao.length){vi(Ao[0],e);for(var n=1;n<Ao.length;n++){var r=Ao[n];r.blockedOn===e&&(r.blockedOn=null)}}for(yr!==null&&vi(yr,e),xr!==null&&vi(xr,e),wr!==null&&vi(wr,e),Wi.forEach(t),Hi.forEach(t),n=0;n<ir.length;n++)r=ir[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ir.length&&(n=ir[0],n.blockedOn===null);)Xp(n),n.blockedOn===null&&ir.shift()}var Fs=Jn.ReactCurrentBatchConfig,Ml=!0;function rx(e,t,n,r){var s=be,i=Fs.transition;Fs.transition=null;try{be=1,ad(e,t,n,r)}finally{be=s,Fs.transition=i}}function sx(e,t,n,r){var s=be,i=Fs.transition;Fs.transition=null;try{be=4,ad(e,t,n,r)}finally{be=s,Fs.transition=i}}function ad(e,t,n,r){if(Ml){var s=Bu(e,t,n,r);if(s===null)nu(e,t,r,Rl,n),Bf(e,r);else if(tx(s,e,t,n,r))r.stopPropagation();else if(Bf(e,r),t&4&&-1<ex.indexOf(e)){for(;s!==null;){var i=go(s);if(i!==null&&Kp(i),i=Bu(e,t,n,r),i===null&&nu(e,t,r,Rl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else nu(e,t,r,null,n)}}var Rl=null;function Bu(e,t,n,r){if(Rl=null,e=sd(r),e=Ar(e),e!==null)if(t=ds(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ap(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Rl=e,null}function Jp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(V0()){case id:return 1;case Wp:return 4;case Nl:case Q0:return 16;case Hp:return 536870912;default:return 16}default:return 16}}var gr=null,ud=null,ol=null;function Zp(){if(ol)return ol;var e,t=ud,n=t.length,r,s="value"in gr?gr.value:gr.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return ol=s.slice(e,1<r?1-r:void 0)}function ll(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $o(){return!0}function Hf(){return!1}function Ut(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?$o:Hf,this.isPropagationStopped=Hf,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$o)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$o)},persist:function(){},isPersistent:$o}),t}var ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cd=Ut(ai),po=Oe({},ai,{view:0,detail:0}),ix=Ut(po),Ka,qa,yi,na=Oe({},po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yi&&(yi&&e.type==="mousemove"?(Ka=e.screenX-yi.screenX,qa=e.screenY-yi.screenY):qa=Ka=0,yi=e),Ka)},movementY:function(e){return"movementY"in e?e.movementY:qa}}),Vf=Ut(na),ox=Oe({},na,{dataTransfer:0}),lx=Ut(ox),ax=Oe({},po,{relatedTarget:0}),Ga=Ut(ax),ux=Oe({},ai,{animationName:0,elapsedTime:0,pseudoElement:0}),cx=Ut(ux),dx=Oe({},ai,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fx=Ut(dx),hx=Oe({},ai,{data:0}),Qf=Ut(hx),mx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},px={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gx[e])?!!t[e]:!1}function dd(){return vx}var yx=Oe({},po,{key:function(e){if(e.key){var t=mx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ll(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?px[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dd,charCode:function(e){return e.type==="keypress"?ll(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ll(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xx=Ut(yx),wx=Oe({},na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kf=Ut(wx),Sx=Oe({},po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dd}),Cx=Ut(Sx),kx=Oe({},ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),bx=Ut(kx),Ex=Oe({},na,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nx=Ut(Ex),jx=[9,13,27,32],fd=qn&&"CompositionEvent"in window,_i=null;qn&&"documentMode"in document&&(_i=document.documentMode);var Mx=qn&&"TextEvent"in window&&!_i,eg=qn&&(!fd||_i&&8<_i&&11>=_i),qf=" ",Gf=!1;function tg(e,t){switch(e){case"keyup":return jx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ng(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cs=!1;function Rx(e,t){switch(e){case"compositionend":return ng(t);case"keypress":return t.which!==32?null:(Gf=!0,qf);case"textInput":return e=t.data,e===qf&&Gf?null:e;default:return null}}function Lx(e,t){if(Cs)return e==="compositionend"||!fd&&tg(e,t)?(e=Zp(),ol=ud=gr=null,Cs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return eg&&t.locale!=="ko"?null:t.data;default:return null}}var Tx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Tx[e.type]:t==="textarea"}function rg(e,t,n,r){Ip(r),t=Ll(t,"onChange"),0<t.length&&(n=new cd("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Pi=null,Qi=null;function _x(e){mg(e,0)}function ra(e){var t=Es(e);if(jp(t))return e}function Px(e,t){if(e==="change")return t}var sg=!1;if(qn){var Ya;if(qn){var Xa="oninput"in document;if(!Xa){var Xf=document.createElement("div");Xf.setAttribute("oninput","return;"),Xa=typeof Xf.oninput=="function"}Ya=Xa}else Ya=!1;sg=Ya&&(!document.documentMode||9<document.documentMode)}function Jf(){Pi&&(Pi.detachEvent("onpropertychange",ig),Qi=Pi=null)}function ig(e){if(e.propertyName==="value"&&ra(Qi)){var t=[];rg(t,Qi,e,sd(e)),Dp(_x,t)}}function Ix(e,t,n){e==="focusin"?(Jf(),Pi=t,Qi=n,Pi.attachEvent("onpropertychange",ig)):e==="focusout"&&Jf()}function Fx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ra(Qi)}function Ox(e,t){if(e==="click")return ra(t)}function zx(e,t){if(e==="input"||e==="change")return ra(t)}function Dx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vn=typeof Object.is=="function"?Object.is:Dx;function Ki(e,t){if(vn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!bu.call(t,s)||!vn(e[s],t[s]))return!1}return!0}function Zf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function eh(e,t){var n=Zf(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zf(n)}}function og(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?og(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lg(){for(var e=window,t=kl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=kl(e.document)}return t}function hd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ax(e){var t=lg(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&og(n.ownerDocument.documentElement,n)){if(r!==null&&hd(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=eh(n,i);var o=eh(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $x=qn&&"documentMode"in document&&11>=document.documentMode,ks=null,Wu=null,Ii=null,Hu=!1;function th(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hu||ks==null||ks!==kl(r)||(r=ks,"selectionStart"in r&&hd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ii&&Ki(Ii,r)||(Ii=r,r=Ll(Wu,"onSelect"),0<r.length&&(t=new cd("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ks)))}function Uo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var bs={animationend:Uo("Animation","AnimationEnd"),animationiteration:Uo("Animation","AnimationIteration"),animationstart:Uo("Animation","AnimationStart"),transitionend:Uo("Transition","TransitionEnd")},Ja={},ag={};qn&&(ag=document.createElement("div").style,"AnimationEvent"in window||(delete bs.animationend.animation,delete bs.animationiteration.animation,delete bs.animationstart.animation),"TransitionEvent"in window||delete bs.transitionend.transition);function sa(e){if(Ja[e])return Ja[e];if(!bs[e])return e;var t=bs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ag)return Ja[e]=t[n];return e}var ug=sa("animationend"),cg=sa("animationiteration"),dg=sa("animationstart"),fg=sa("transitionend"),hg=new Map,nh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){hg.set(e,t),cs(t,[e])}for(var Za=0;Za<nh.length;Za++){var eu=nh[Za],Ux=eu.toLowerCase(),Bx=eu[0].toUpperCase()+eu.slice(1);Rr(Ux,"on"+Bx)}Rr(ug,"onAnimationEnd");Rr(cg,"onAnimationIteration");Rr(dg,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(fg,"onTransitionEnd");Zs("onMouseEnter",["mouseout","mouseover"]);Zs("onMouseLeave",["mouseout","mouseover"]);Zs("onPointerEnter",["pointerout","pointerover"]);Zs("onPointerLeave",["pointerout","pointerover"]);cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cs("onBeforeInput",["compositionend","keypress","textInput","paste"]);cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ji));function rh(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,U0(r,t,void 0,e),e.currentTarget=null}function mg(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;rh(s,l,c),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;rh(s,l,c),i=u}}}if(El)throw e=Au,El=!1,Au=null,e}function Te(e,t){var n=t[Gu];n===void 0&&(n=t[Gu]=new Set);var r=e+"__bubble";n.has(r)||(pg(t,e,2,!1),n.add(r))}function tu(e,t,n){var r=0;t&&(r|=4),pg(n,e,r,t)}var Bo="_reactListening"+Math.random().toString(36).slice(2);function qi(e){if(!e[Bo]){e[Bo]=!0,Cp.forEach(function(n){n!=="selectionchange"&&(Wx.has(n)||tu(n,!1,e),tu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bo]||(t[Bo]=!0,tu("selectionchange",!1,t))}}function pg(e,t,n,r){switch(Jp(t)){case 1:var s=rx;break;case 4:s=sx;break;default:s=ad}n=s.bind(null,t,n,e),s=void 0,!Du||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function nu(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ar(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Dp(function(){var c=i,f=sd(n),h=[];e:{var v=hg.get(e);if(v!==void 0){var S=cd,k=e;switch(e){case"keypress":if(ll(n)===0)break e;case"keydown":case"keyup":S=xx;break;case"focusin":k="focus",S=Ga;break;case"focusout":k="blur",S=Ga;break;case"beforeblur":case"afterblur":S=Ga;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Vf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=lx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Cx;break;case ug:case cg:case dg:S=cx;break;case fg:S=bx;break;case"scroll":S=ix;break;case"wheel":S=Nx;break;case"copy":case"cut":case"paste":S=fx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Kf}var E=(t&4)!==0,R=!E&&e==="scroll",y=E?v!==null?v+"Capture":null:v;E=[];for(var m=c,g;m!==null;){g=m;var p=g.stateNode;if(g.tag===5&&p!==null&&(g=p,y!==null&&(p=Bi(m,y),p!=null&&E.push(Gi(m,p,g)))),R)break;m=m.return}0<E.length&&(v=new S(v,k,null,n,f),h.push({event:v,listeners:E}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",v&&n!==Ou&&(k=n.relatedTarget||n.fromElement)&&(Ar(k)||k[Gn]))break e;if((S||v)&&(v=f.window===f?f:(v=f.ownerDocument)?v.defaultView||v.parentWindow:window,S?(k=n.relatedTarget||n.toElement,S=c,k=k?Ar(k):null,k!==null&&(R=ds(k),k!==R||k.tag!==5&&k.tag!==6)&&(k=null)):(S=null,k=c),S!==k)){if(E=Vf,p="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(E=Kf,p="onPointerLeave",y="onPointerEnter",m="pointer"),R=S==null?v:Es(S),g=k==null?v:Es(k),v=new E(p,m+"leave",S,n,f),v.target=R,v.relatedTarget=g,p=null,Ar(f)===c&&(E=new E(y,m+"enter",k,n,f),E.target=g,E.relatedTarget=R,p=E),R=p,S&&k)t:{for(E=S,y=k,m=0,g=E;g;g=gs(g))m++;for(g=0,p=y;p;p=gs(p))g++;for(;0<m-g;)E=gs(E),m--;for(;0<g-m;)y=gs(y),g--;for(;m--;){if(E===y||y!==null&&E===y.alternate)break t;E=gs(E),y=gs(y)}E=null}else E=null;S!==null&&sh(h,v,S,E,!1),k!==null&&R!==null&&sh(h,R,k,E,!0)}}e:{if(v=c?Es(c):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var w=Px;else if(Yf(v))if(sg)w=zx;else{w=Fx;var M=Ix}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(w=Ox);if(w&&(w=w(e,c))){rg(h,w,n,f);break e}M&&M(e,v,c),e==="focusout"&&(M=v._wrapperState)&&M.controlled&&v.type==="number"&&Tu(v,"number",v.value)}switch(M=c?Es(c):window,e){case"focusin":(Yf(M)||M.contentEditable==="true")&&(ks=M,Wu=c,Ii=null);break;case"focusout":Ii=Wu=ks=null;break;case"mousedown":Hu=!0;break;case"contextmenu":case"mouseup":case"dragend":Hu=!1,th(h,n,f);break;case"selectionchange":if($x)break;case"keydown":case"keyup":th(h,n,f)}var L;if(fd)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Cs?tg(e,n)&&(b="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(eg&&n.locale!=="ko"&&(Cs||b!=="onCompositionStart"?b==="onCompositionEnd"&&Cs&&(L=Zp()):(gr=f,ud="value"in gr?gr.value:gr.textContent,Cs=!0)),M=Ll(c,b),0<M.length&&(b=new Qf(b,e,null,n,f),h.push({event:b,listeners:M}),L?b.data=L:(L=ng(n),L!==null&&(b.data=L)))),(L=Mx?Rx(e,n):Lx(e,n))&&(c=Ll(c,"onBeforeInput"),0<c.length&&(f=new Qf("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:c}),f.data=L))}mg(h,t)})}function Gi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ll(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Bi(e,n),i!=null&&r.unshift(Gi(e,i,s)),i=Bi(e,t),i!=null&&r.push(Gi(e,i,s))),e=e.return}return r}function gs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function sh(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,s?(u=Bi(n,i),u!=null&&o.unshift(Gi(n,u,l))):s||(u=Bi(n,i),u!=null&&o.push(Gi(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Hx=/\r\n?/g,Vx=/\u0000|\uFFFD/g;function ih(e){return(typeof e=="string"?e:""+e).replace(Hx,`
`).replace(Vx,"")}function Wo(e,t,n){if(t=ih(t),ih(e)!==t&&n)throw Error($(425))}function Tl(){}var Vu=null,Qu=null;function Ku(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qu=typeof setTimeout=="function"?setTimeout:void 0,Qx=typeof clearTimeout=="function"?clearTimeout:void 0,oh=typeof Promise=="function"?Promise:void 0,Kx=typeof queueMicrotask=="function"?queueMicrotask:typeof oh<"u"?function(e){return oh.resolve(null).then(e).catch(qx)}:qu;function qx(e){setTimeout(function(){throw e})}function ru(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Vi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Vi(t)}function Sr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function lh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ui=Math.random().toString(36).slice(2),Mn="__reactFiber$"+ui,Yi="__reactProps$"+ui,Gn="__reactContainer$"+ui,Gu="__reactEvents$"+ui,Gx="__reactListeners$"+ui,Yx="__reactHandles$"+ui;function Ar(e){var t=e[Mn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Gn]||n[Mn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=lh(e);e!==null;){if(n=e[Mn])return n;e=lh(e)}return t}e=n,n=e.parentNode}return null}function go(e){return e=e[Mn]||e[Gn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Es(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function ia(e){return e[Yi]||null}var Yu=[],Ns=-1;function Lr(e){return{current:e}}function _e(e){0>Ns||(e.current=Yu[Ns],Yu[Ns]=null,Ns--)}function Me(e,t){Ns++,Yu[Ns]=e.current,e.current=t}var Mr={},yt=Lr(Mr),Tt=Lr(!1),rs=Mr;function ei(e,t){var n=e.type.contextTypes;if(!n)return Mr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function _t(e){return e=e.childContextTypes,e!=null}function _l(){_e(Tt),_e(yt)}function ah(e,t,n){if(yt.current!==Mr)throw Error($(168));Me(yt,t),Me(Tt,n)}function gg(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error($(108,I0(e)||"Unknown",s));return Oe({},n,r)}function Pl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mr,rs=yt.current,Me(yt,e),Me(Tt,Tt.current),!0}function uh(e,t,n){var r=e.stateNode;if(!r)throw Error($(169));n?(e=gg(e,t,rs),r.__reactInternalMemoizedMergedChildContext=e,_e(Tt),_e(yt),Me(yt,e)):_e(Tt),Me(Tt,n)}var zn=null,oa=!1,su=!1;function vg(e){zn===null?zn=[e]:zn.push(e)}function Xx(e){oa=!0,vg(e)}function Tr(){if(!su&&zn!==null){su=!0;var e=0,t=be;try{var n=zn;for(be=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}zn=null,oa=!1}catch(s){throw zn!==null&&(zn=zn.slice(e+1)),Bp(id,Tr),s}finally{be=t,su=!1}}return null}var js=[],Ms=0,Il=null,Fl=0,Qt=[],Kt=0,ss=null,Bn=1,Wn="";function zr(e,t){js[Ms++]=Fl,js[Ms++]=Il,Il=e,Fl=t}function yg(e,t,n){Qt[Kt++]=Bn,Qt[Kt++]=Wn,Qt[Kt++]=ss,ss=e;var r=Bn;e=Wn;var s=32-mn(r)-1;r&=~(1<<s),n+=1;var i=32-mn(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Bn=1<<32-mn(t)+s|n<<s|r,Wn=i+e}else Bn=1<<i|n<<s|r,Wn=e}function md(e){e.return!==null&&(zr(e,1),yg(e,1,0))}function pd(e){for(;e===Il;)Il=js[--Ms],js[Ms]=null,Fl=js[--Ms],js[Ms]=null;for(;e===ss;)ss=Qt[--Kt],Qt[Kt]=null,Wn=Qt[--Kt],Qt[Kt]=null,Bn=Qt[--Kt],Qt[Kt]=null}var Dt=null,zt=null,Pe=!1,hn=null;function xg(e,t){var n=Gt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ch(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dt=e,zt=Sr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dt=e,zt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ss!==null?{id:Bn,overflow:Wn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Gt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Dt=e,zt=null,!0):!1;default:return!1}}function Xu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ju(e){if(Pe){var t=zt;if(t){var n=t;if(!ch(e,t)){if(Xu(e))throw Error($(418));t=Sr(n.nextSibling);var r=Dt;t&&ch(e,t)?xg(r,n):(e.flags=e.flags&-4097|2,Pe=!1,Dt=e)}}else{if(Xu(e))throw Error($(418));e.flags=e.flags&-4097|2,Pe=!1,Dt=e}}}function dh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dt=e}function Ho(e){if(e!==Dt)return!1;if(!Pe)return dh(e),Pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ku(e.type,e.memoizedProps)),t&&(t=zt)){if(Xu(e))throw wg(),Error($(418));for(;t;)xg(e,t),t=Sr(t.nextSibling)}if(dh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zt=Sr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zt=null}}else zt=Dt?Sr(e.stateNode.nextSibling):null;return!0}function wg(){for(var e=zt;e;)e=Sr(e.nextSibling)}function ti(){zt=Dt=null,Pe=!1}function gd(e){hn===null?hn=[e]:hn.push(e)}var Jx=Jn.ReactCurrentBatchConfig;function xi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function Vo(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fh(e){var t=e._init;return t(e._payload)}function Sg(e){function t(y,m){if(e){var g=y.deletions;g===null?(y.deletions=[m],y.flags|=16):g.push(m)}}function n(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function s(y,m){return y=Er(y,m),y.index=0,y.sibling=null,y}function i(y,m,g){return y.index=g,e?(g=y.alternate,g!==null?(g=g.index,g<m?(y.flags|=2,m):g):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,m,g,p){return m===null||m.tag!==6?(m=du(g,y.mode,p),m.return=y,m):(m=s(m,g),m.return=y,m)}function u(y,m,g,p){var w=g.type;return w===Ss?f(y,m,g.props.children,p,g.key):m!==null&&(m.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===rr&&fh(w)===m.type)?(p=s(m,g.props),p.ref=xi(y,m,g),p.return=y,p):(p=ml(g.type,g.key,g.props,null,y.mode,p),p.ref=xi(y,m,g),p.return=y,p)}function c(y,m,g,p){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=fu(g,y.mode,p),m.return=y,m):(m=s(m,g.children||[]),m.return=y,m)}function f(y,m,g,p,w){return m===null||m.tag!==7?(m=ns(g,y.mode,p,w),m.return=y,m):(m=s(m,g),m.return=y,m)}function h(y,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=du(""+m,y.mode,g),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Io:return g=ml(m.type,m.key,m.props,null,y.mode,g),g.ref=xi(y,null,m),g.return=y,g;case ws:return m=fu(m,y.mode,g),m.return=y,m;case rr:var p=m._init;return h(y,p(m._payload),g)}if(Ei(m)||mi(m))return m=ns(m,y.mode,g,null),m.return=y,m;Vo(y,m)}return null}function v(y,m,g,p){var w=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return w!==null?null:l(y,m,""+g,p);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Io:return g.key===w?u(y,m,g,p):null;case ws:return g.key===w?c(y,m,g,p):null;case rr:return w=g._init,v(y,m,w(g._payload),p)}if(Ei(g)||mi(g))return w!==null?null:f(y,m,g,p,null);Vo(y,g)}return null}function S(y,m,g,p,w){if(typeof p=="string"&&p!==""||typeof p=="number")return y=y.get(g)||null,l(m,y,""+p,w);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Io:return y=y.get(p.key===null?g:p.key)||null,u(m,y,p,w);case ws:return y=y.get(p.key===null?g:p.key)||null,c(m,y,p,w);case rr:var M=p._init;return S(y,m,g,M(p._payload),w)}if(Ei(p)||mi(p))return y=y.get(g)||null,f(m,y,p,w,null);Vo(m,p)}return null}function k(y,m,g,p){for(var w=null,M=null,L=m,b=m=0,T=null;L!==null&&b<g.length;b++){L.index>b?(T=L,L=null):T=L.sibling;var N=v(y,L,g[b],p);if(N===null){L===null&&(L=T);break}e&&L&&N.alternate===null&&t(y,L),m=i(N,m,b),M===null?w=N:M.sibling=N,M=N,L=T}if(b===g.length)return n(y,L),Pe&&zr(y,b),w;if(L===null){for(;b<g.length;b++)L=h(y,g[b],p),L!==null&&(m=i(L,m,b),M===null?w=L:M.sibling=L,M=L);return Pe&&zr(y,b),w}for(L=r(y,L);b<g.length;b++)T=S(L,y,b,g[b],p),T!==null&&(e&&T.alternate!==null&&L.delete(T.key===null?b:T.key),m=i(T,m,b),M===null?w=T:M.sibling=T,M=T);return e&&L.forEach(function(P){return t(y,P)}),Pe&&zr(y,b),w}function E(y,m,g,p){var w=mi(g);if(typeof w!="function")throw Error($(150));if(g=w.call(g),g==null)throw Error($(151));for(var M=w=null,L=m,b=m=0,T=null,N=g.next();L!==null&&!N.done;b++,N=g.next()){L.index>b?(T=L,L=null):T=L.sibling;var P=v(y,L,N.value,p);if(P===null){L===null&&(L=T);break}e&&L&&P.alternate===null&&t(y,L),m=i(P,m,b),M===null?w=P:M.sibling=P,M=P,L=T}if(N.done)return n(y,L),Pe&&zr(y,b),w;if(L===null){for(;!N.done;b++,N=g.next())N=h(y,N.value,p),N!==null&&(m=i(N,m,b),M===null?w=N:M.sibling=N,M=N);return Pe&&zr(y,b),w}for(L=r(y,L);!N.done;b++,N=g.next())N=S(L,y,b,N.value,p),N!==null&&(e&&N.alternate!==null&&L.delete(N.key===null?b:N.key),m=i(N,m,b),M===null?w=N:M.sibling=N,M=N);return e&&L.forEach(function(U){return t(y,U)}),Pe&&zr(y,b),w}function R(y,m,g,p){if(typeof g=="object"&&g!==null&&g.type===Ss&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Io:e:{for(var w=g.key,M=m;M!==null;){if(M.key===w){if(w=g.type,w===Ss){if(M.tag===7){n(y,M.sibling),m=s(M,g.props.children),m.return=y,y=m;break e}}else if(M.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===rr&&fh(w)===M.type){n(y,M.sibling),m=s(M,g.props),m.ref=xi(y,M,g),m.return=y,y=m;break e}n(y,M);break}else t(y,M);M=M.sibling}g.type===Ss?(m=ns(g.props.children,y.mode,p,g.key),m.return=y,y=m):(p=ml(g.type,g.key,g.props,null,y.mode,p),p.ref=xi(y,m,g),p.return=y,y=p)}return o(y);case ws:e:{for(M=g.key;m!==null;){if(m.key===M)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(y,m.sibling),m=s(m,g.children||[]),m.return=y,y=m;break e}else{n(y,m);break}else t(y,m);m=m.sibling}m=fu(g,y.mode,p),m.return=y,y=m}return o(y);case rr:return M=g._init,R(y,m,M(g._payload),p)}if(Ei(g))return k(y,m,g,p);if(mi(g))return E(y,m,g,p);Vo(y,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(y,m.sibling),m=s(m,g),m.return=y,y=m):(n(y,m),m=du(g,y.mode,p),m.return=y,y=m),o(y)):n(y,m)}return R}var ni=Sg(!0),Cg=Sg(!1),Ol=Lr(null),zl=null,Rs=null,vd=null;function yd(){vd=Rs=zl=null}function xd(e){var t=Ol.current;_e(Ol),e._currentValue=t}function Zu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Os(e,t){zl=e,vd=Rs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Lt=!0),e.firstContext=null)}function Xt(e){var t=e._currentValue;if(vd!==e)if(e={context:e,memoizedValue:t,next:null},Rs===null){if(zl===null)throw Error($(308));Rs=e,zl.dependencies={lanes:0,firstContext:e}}else Rs=Rs.next=e;return t}var $r=null;function wd(e){$r===null?$r=[e]:$r.push(e)}function kg(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,wd(t)):(n.next=s.next,s.next=n),t.interleaved=n,Yn(e,r)}function Yn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var sr=!1;function Sd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Hn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Se&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Yn(e,n)}return s=r.interleaved,s===null?(t.next=t,wd(r)):(t.next=s.next,s.next=t),r.interleaved=t,Yn(e,n)}function al(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,od(e,n)}}function hh(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Dl(e,t,n,r){var s=e.updateQueue;sr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(i!==null){var h=s.baseState;o=0,f=c=u=null,l=i;do{var v=l.lane,S=l.eventTime;if((r&v)===v){f!==null&&(f=f.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=e,E=l;switch(v=t,S=n,E.tag){case 1:if(k=E.payload,typeof k=="function"){h=k.call(S,h,v);break e}h=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=E.payload,v=typeof k=="function"?k.call(S,h,v):k,v==null)break e;h=Oe({},h,v);break e;case 2:sr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else S={eventTime:S,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=S,u=h):f=f.next=S,o|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(f===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);os|=o,e.lanes=o,e.memoizedState=h}}function mh(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var vo={},Ln=Lr(vo),Xi=Lr(vo),Ji=Lr(vo);function Ur(e){if(e===vo)throw Error($(174));return e}function Cd(e,t){switch(Me(Ji,t),Me(Xi,e),Me(Ln,vo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Pu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Pu(t,e)}_e(Ln),Me(Ln,t)}function ri(){_e(Ln),_e(Xi),_e(Ji)}function Eg(e){Ur(Ji.current);var t=Ur(Ln.current),n=Pu(t,e.type);t!==n&&(Me(Xi,e),Me(Ln,n))}function kd(e){Xi.current===e&&(_e(Ln),_e(Xi))}var Ie=Lr(0);function Al(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var iu=[];function bd(){for(var e=0;e<iu.length;e++)iu[e]._workInProgressVersionPrimary=null;iu.length=0}var ul=Jn.ReactCurrentDispatcher,ou=Jn.ReactCurrentBatchConfig,is=0,Fe=null,Ye=null,et=null,$l=!1,Fi=!1,Zi=0,Zx=0;function pt(){throw Error($(321))}function Ed(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!vn(e[n],t[n]))return!1;return!0}function Nd(e,t,n,r,s,i){if(is=i,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ul.current=e===null||e.memoizedState===null?rw:sw,e=n(r,s),Fi){i=0;do{if(Fi=!1,Zi=0,25<=i)throw Error($(301));i+=1,et=Ye=null,t.updateQueue=null,ul.current=iw,e=n(r,s)}while(Fi)}if(ul.current=Ul,t=Ye!==null&&Ye.next!==null,is=0,et=Ye=Fe=null,$l=!1,t)throw Error($(300));return e}function jd(){var e=Zi!==0;return Zi=0,e}function bn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Fe.memoizedState=et=e:et=et.next=e,et}function Jt(){if(Ye===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=et===null?Fe.memoizedState:et.next;if(t!==null)et=t,Ye=e;else{if(e===null)throw Error($(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},et===null?Fe.memoizedState=et=e:et=et.next=e}return et}function eo(e,t){return typeof t=="function"?t(e):t}function lu(e){var t=Jt(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=Ye,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,c=i;do{var f=c.lane;if((is&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,o=r):u=u.next=h,Fe.lanes|=f,os|=f}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=l,vn(r,t.memoizedState)||(Lt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Fe.lanes|=i,os|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function au(e){var t=Jt(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);vn(i,t.memoizedState)||(Lt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ng(){}function jg(e,t){var n=Fe,r=Jt(),s=t(),i=!vn(r.memoizedState,s);if(i&&(r.memoizedState=s,Lt=!0),r=r.queue,Md(Lg.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,to(9,Rg.bind(null,n,r,s,t),void 0,null),tt===null)throw Error($(349));is&30||Mg(n,t,s)}return s}function Mg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Rg(e,t,n,r){t.value=n,t.getSnapshot=r,Tg(t)&&_g(e)}function Lg(e,t,n){return n(function(){Tg(t)&&_g(e)})}function Tg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vn(e,n)}catch{return!0}}function _g(e){var t=Yn(e,1);t!==null&&pn(t,e,1,-1)}function ph(e){var t=bn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eo,lastRenderedState:e},t.queue=e,e=e.dispatch=nw.bind(null,Fe,e),[t.memoizedState,e]}function to(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Pg(){return Jt().memoizedState}function cl(e,t,n,r){var s=bn();Fe.flags|=e,s.memoizedState=to(1|t,n,void 0,r===void 0?null:r)}function la(e,t,n,r){var s=Jt();r=r===void 0?null:r;var i=void 0;if(Ye!==null){var o=Ye.memoizedState;if(i=o.destroy,r!==null&&Ed(r,o.deps)){s.memoizedState=to(t,n,i,r);return}}Fe.flags|=e,s.memoizedState=to(1|t,n,i,r)}function gh(e,t){return cl(8390656,8,e,t)}function Md(e,t){return la(2048,8,e,t)}function Ig(e,t){return la(4,2,e,t)}function Fg(e,t){return la(4,4,e,t)}function Og(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zg(e,t,n){return n=n!=null?n.concat([e]):null,la(4,4,Og.bind(null,t,e),n)}function Rd(){}function Dg(e,t){var n=Jt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ed(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ag(e,t){var n=Jt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ed(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $g(e,t,n){return is&21?(vn(n,t)||(n=Vp(),Fe.lanes|=n,os|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Lt=!0),e.memoizedState=n)}function ew(e,t){var n=be;be=n!==0&&4>n?n:4,e(!0);var r=ou.transition;ou.transition={};try{e(!1),t()}finally{be=n,ou.transition=r}}function Ug(){return Jt().memoizedState}function tw(e,t,n){var r=br(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Bg(e))Wg(t,n);else if(n=kg(e,t,n,r),n!==null){var s=bt();pn(n,e,r,s),Hg(n,t,r)}}function nw(e,t,n){var r=br(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bg(e))Wg(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,vn(l,o)){var u=t.interleaved;u===null?(s.next=s,wd(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=kg(e,t,s,r),n!==null&&(s=bt(),pn(n,e,r,s),Hg(n,t,r))}}function Bg(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function Wg(e,t){Fi=$l=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Hg(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,od(e,n)}}var Ul={readContext:Xt,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},rw={readContext:Xt,useCallback:function(e,t){return bn().memoizedState=[e,t===void 0?null:t],e},useContext:Xt,useEffect:gh,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,cl(4194308,4,Og.bind(null,t,e),n)},useLayoutEffect:function(e,t){return cl(4194308,4,e,t)},useInsertionEffect:function(e,t){return cl(4,2,e,t)},useMemo:function(e,t){var n=bn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tw.bind(null,Fe,e),[r.memoizedState,e]},useRef:function(e){var t=bn();return e={current:e},t.memoizedState=e},useState:ph,useDebugValue:Rd,useDeferredValue:function(e){return bn().memoizedState=e},useTransition:function(){var e=ph(!1),t=e[0];return e=ew.bind(null,e[1]),bn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Fe,s=bn();if(Pe){if(n===void 0)throw Error($(407));n=n()}else{if(n=t(),tt===null)throw Error($(349));is&30||Mg(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,gh(Lg.bind(null,r,i,e),[e]),r.flags|=2048,to(9,Rg.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=bn(),t=tt.identifierPrefix;if(Pe){var n=Wn,r=Bn;n=(r&~(1<<32-mn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Zi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Zx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sw={readContext:Xt,useCallback:Dg,useContext:Xt,useEffect:Md,useImperativeHandle:zg,useInsertionEffect:Ig,useLayoutEffect:Fg,useMemo:Ag,useReducer:lu,useRef:Pg,useState:function(){return lu(eo)},useDebugValue:Rd,useDeferredValue:function(e){var t=Jt();return $g(t,Ye.memoizedState,e)},useTransition:function(){var e=lu(eo)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:Ng,useSyncExternalStore:jg,useId:Ug,unstable_isNewReconciler:!1},iw={readContext:Xt,useCallback:Dg,useContext:Xt,useEffect:Md,useImperativeHandle:zg,useInsertionEffect:Ig,useLayoutEffect:Fg,useMemo:Ag,useReducer:au,useRef:Pg,useState:function(){return au(eo)},useDebugValue:Rd,useDeferredValue:function(e){var t=Jt();return Ye===null?t.memoizedState=e:$g(t,Ye.memoizedState,e)},useTransition:function(){var e=au(eo)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:Ng,useSyncExternalStore:jg,useId:Ug,unstable_isNewReconciler:!1};function an(e,t){if(e&&e.defaultProps){t=Oe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ec(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Oe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var aa={isMounted:function(e){return(e=e._reactInternals)?ds(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=bt(),s=br(e),i=Hn(r,s);i.payload=t,n!=null&&(i.callback=n),t=Cr(e,i,s),t!==null&&(pn(t,e,s,r),al(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=bt(),s=br(e),i=Hn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Cr(e,i,s),t!==null&&(pn(t,e,s,r),al(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=bt(),r=br(e),s=Hn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Cr(e,s,r),t!==null&&(pn(t,e,r,n),al(t,e,r))}};function vh(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ki(n,r)||!Ki(s,i):!0}function Vg(e,t,n){var r=!1,s=Mr,i=t.contextType;return typeof i=="object"&&i!==null?i=Xt(i):(s=_t(t)?rs:yt.current,r=t.contextTypes,i=(r=r!=null)?ei(e,s):Mr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=aa,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function yh(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&aa.enqueueReplaceState(t,t.state,null)}function tc(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Sd(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Xt(i):(i=_t(t)?rs:yt.current,s.context=ei(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ec(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&aa.enqueueReplaceState(s,s.state,null),Dl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function si(e,t){try{var n="",r=t;do n+=P0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function uu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function nc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ow=typeof WeakMap=="function"?WeakMap:Map;function Qg(e,t,n){n=Hn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,fc=r),nc(e,t)},n}function Kg(e,t,n){n=Hn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){nc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){nc(e,t),typeof r!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function xh(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ow;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=ww.bind(null,e,t,n),t.then(e,e))}function wh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Sh(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Hn(-1,1),t.tag=2,Cr(n,t,1))),n.lanes|=1),e)}var lw=Jn.ReactCurrentOwner,Lt=!1;function Ct(e,t,n,r){t.child=e===null?Cg(t,null,n,r):ni(t,e.child,n,r)}function Ch(e,t,n,r,s){n=n.render;var i=t.ref;return Os(t,s),r=Nd(e,t,n,r,i,s),n=jd(),e!==null&&!Lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Xn(e,t,s)):(Pe&&n&&md(t),t.flags|=1,Ct(e,t,r,s),t.child)}function kh(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!zd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,qg(e,t,i,r,s)):(e=ml(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ki,n(o,r)&&e.ref===t.ref)return Xn(e,t,s)}return t.flags|=1,e=Er(i,r),e.ref=t.ref,e.return=t,t.child=e}function qg(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ki(i,r)&&e.ref===t.ref)if(Lt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Lt=!0);else return t.lanes=e.lanes,Xn(e,t,s)}return rc(e,t,n,r,s)}function Gg(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(Ts,Ot),Ot|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Me(Ts,Ot),Ot|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Me(Ts,Ot),Ot|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Me(Ts,Ot),Ot|=r;return Ct(e,t,s,n),t.child}function Yg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function rc(e,t,n,r,s){var i=_t(n)?rs:yt.current;return i=ei(t,i),Os(t,s),n=Nd(e,t,n,r,i,s),r=jd(),e!==null&&!Lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Xn(e,t,s)):(Pe&&r&&md(t),t.flags|=1,Ct(e,t,n,s),t.child)}function bh(e,t,n,r,s){if(_t(n)){var i=!0;Pl(t)}else i=!1;if(Os(t,s),t.stateNode===null)dl(e,t),Vg(t,n,r),tc(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Xt(c):(c=_t(n)?rs:yt.current,c=ei(t,c));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&yh(t,o,r,c),sr=!1;var v=t.memoizedState;o.state=v,Dl(t,r,o,s),u=t.memoizedState,l!==r||v!==u||Tt.current||sr?(typeof f=="function"&&(ec(t,n,f,r),u=t.memoizedState),(l=sr||vh(t,n,l,r,v,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,bg(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:an(t.type,l),o.props=c,h=t.pendingProps,v=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Xt(u):(u=_t(n)?rs:yt.current,u=ei(t,u));var S=n.getDerivedStateFromProps;(f=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||v!==u)&&yh(t,o,r,u),sr=!1,v=t.memoizedState,o.state=v,Dl(t,r,o,s);var k=t.memoizedState;l!==h||v!==k||Tt.current||sr?(typeof S=="function"&&(ec(t,n,S,r),k=t.memoizedState),(c=sr||vh(t,n,c,r,v,k,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),o.props=r,o.state=k,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return sc(e,t,n,r,i,s)}function sc(e,t,n,r,s,i){Yg(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&uh(t,n,!1),Xn(e,t,i);r=t.stateNode,lw.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=ni(t,e.child,null,i),t.child=ni(t,null,l,i)):Ct(e,t,l,i),t.memoizedState=r.state,s&&uh(t,n,!0),t.child}function Xg(e){var t=e.stateNode;t.pendingContext?ah(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ah(e,t.context,!1),Cd(e,t.containerInfo)}function Eh(e,t,n,r,s){return ti(),gd(s),t.flags|=256,Ct(e,t,n,r),t.child}var ic={dehydrated:null,treeContext:null,retryLane:0};function oc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jg(e,t,n){var r=t.pendingProps,s=Ie.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Me(Ie,s&1),e===null)return Ju(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=da(o,r,0,null),e=ns(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=oc(n),t.memoizedState=ic,e):Ld(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return aw(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Er(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Er(l,i):(i=ns(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?oc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=ic,r}return i=e.child,e=i.sibling,r=Er(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ld(e,t){return t=da({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qo(e,t,n,r){return r!==null&&gd(r),ni(t,e.child,null,n),e=Ld(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function aw(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=uu(Error($(422))),Qo(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=da({mode:"visible",children:r.children},s,0,null),i=ns(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ni(t,e.child,null,o),t.child.memoizedState=oc(o),t.memoizedState=ic,i);if(!(t.mode&1))return Qo(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=uu(i,r,void 0),Qo(e,t,o,r)}if(l=(o&e.childLanes)!==0,Lt||l){if(r=tt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Yn(e,s),pn(r,e,s,-1))}return Od(),r=uu(Error($(421))),Qo(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Sw.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,zt=Sr(s.nextSibling),Dt=t,Pe=!0,hn=null,e!==null&&(Qt[Kt++]=Bn,Qt[Kt++]=Wn,Qt[Kt++]=ss,Bn=e.id,Wn=e.overflow,ss=t),t=Ld(t,r.children),t.flags|=4096,t)}function Nh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Zu(e.return,t,n)}function cu(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Zg(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ct(e,t,r.children,n),r=Ie.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Nh(e,n,t);else if(e.tag===19)Nh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Me(Ie,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Al(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),cu(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Al(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}cu(t,!0,n,null,i);break;case"together":cu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function dl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),os|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,n=Er(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Er(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function uw(e,t,n){switch(t.tag){case 3:Xg(t),ti();break;case 5:Eg(t);break;case 1:_t(t.type)&&Pl(t);break;case 4:Cd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Me(Ol,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Me(Ie,Ie.current&1),t.flags|=128,null):n&t.child.childLanes?Jg(e,t,n):(Me(Ie,Ie.current&1),e=Xn(e,t,n),e!==null?e.sibling:null);Me(Ie,Ie.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Zg(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Me(Ie,Ie.current),r)break;return null;case 22:case 23:return t.lanes=0,Gg(e,t,n)}return Xn(e,t,n)}var ev,lc,tv,nv;ev=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lc=function(){};tv=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Ur(Ln.current);var i=null;switch(n){case"input":s=Ru(e,s),r=Ru(e,r),i=[];break;case"select":s=Oe({},s,{value:void 0}),r=Oe({},r,{value:void 0}),i=[];break;case"textarea":s=_u(e,s),r=_u(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Tl)}Iu(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&($i.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&($i.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Te("scroll",e),i||l===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};nv=function(e,t,n,r){n!==r&&(t.flags|=4)};function wi(e,t){if(!Pe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function cw(e,t,n){var r=t.pendingProps;switch(pd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(t),null;case 1:return _t(t.type)&&_l(),gt(t),null;case 3:return r=t.stateNode,ri(),_e(Tt),_e(yt),bd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ho(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hn!==null&&(pc(hn),hn=null))),lc(e,t),gt(t),null;case 5:kd(t);var s=Ur(Ji.current);if(n=t.type,e!==null&&t.stateNode!=null)tv(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error($(166));return gt(t),null}if(e=Ur(Ln.current),Ho(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Mn]=t,r[Yi]=i,e=(t.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(s=0;s<ji.length;s++)Te(ji[s],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":Ff(r,i),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Te("invalid",r);break;case"textarea":zf(r,i),Te("invalid",r)}Iu(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Wo(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Wo(r.textContent,l,e),s=["children",""+l]):$i.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Te("scroll",r)}switch(n){case"input":Fo(r),Of(r,i,!0);break;case"textarea":Fo(r),Df(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Tl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Lp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Mn]=t,e[Yi]=r,ev(e,t,!1,!1),t.stateNode=e;e:{switch(o=Fu(n,r),n){case"dialog":Te("cancel",e),Te("close",e),s=r;break;case"iframe":case"object":case"embed":Te("load",e),s=r;break;case"video":case"audio":for(s=0;s<ji.length;s++)Te(ji[s],e);s=r;break;case"source":Te("error",e),s=r;break;case"img":case"image":case"link":Te("error",e),Te("load",e),s=r;break;case"details":Te("toggle",e),s=r;break;case"input":Ff(e,r),s=Ru(e,r),Te("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Oe({},r,{value:void 0}),Te("invalid",e);break;case"textarea":zf(e,r),s=_u(e,r),Te("invalid",e);break;default:s=r}Iu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Pp(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Tp(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ui(e,u):typeof u=="number"&&Ui(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&($i.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Te("scroll",e):u!=null&&ed(e,i,u,o))}switch(n){case"input":Fo(e),Of(e,r,!1);break;case"textarea":Fo(e),Df(e);break;case"option":r.value!=null&&e.setAttribute("value",""+jr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?_s(e,!!r.multiple,i,!1):r.defaultValue!=null&&_s(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Tl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gt(t),null;case 6:if(e&&t.stateNode!=null)nv(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error($(166));if(n=Ur(Ji.current),Ur(Ln.current),Ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[Mn]=t,(i=r.nodeValue!==n)&&(e=Dt,e!==null))switch(e.tag){case 3:Wo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wo(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mn]=t,t.stateNode=r}return gt(t),null;case 13:if(_e(Ie),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pe&&zt!==null&&t.mode&1&&!(t.flags&128))wg(),ti(),t.flags|=98560,i=!1;else if(i=Ho(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error($(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Mn]=t}else ti(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gt(t),i=!1}else hn!==null&&(pc(hn),hn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ie.current&1?Je===0&&(Je=3):Od())),t.updateQueue!==null&&(t.flags|=4),gt(t),null);case 4:return ri(),lc(e,t),e===null&&qi(t.stateNode.containerInfo),gt(t),null;case 10:return xd(t.type._context),gt(t),null;case 17:return _t(t.type)&&_l(),gt(t),null;case 19:if(_e(Ie),i=t.memoizedState,i===null)return gt(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)wi(i,!1);else{if(Je!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Al(e),o!==null){for(t.flags|=128,wi(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Me(Ie,Ie.current&1|2),t.child}e=e.sibling}i.tail!==null&&He()>ii&&(t.flags|=128,r=!0,wi(i,!1),t.lanes=4194304)}else{if(!r)if(e=Al(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),wi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Pe)return gt(t),null}else 2*He()-i.renderingStartTime>ii&&n!==1073741824&&(t.flags|=128,r=!0,wi(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=He(),t.sibling=null,n=Ie.current,Me(Ie,r?n&1|2:n&1),t):(gt(t),null);case 22:case 23:return Fd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ot&1073741824&&(gt(t),t.subtreeFlags&6&&(t.flags|=8192)):gt(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function dw(e,t){switch(pd(t),t.tag){case 1:return _t(t.type)&&_l(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ri(),_e(Tt),_e(yt),bd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return kd(t),null;case 13:if(_e(Ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));ti()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _e(Ie),null;case 4:return ri(),null;case 10:return xd(t.type._context),null;case 22:case 23:return Fd(),null;case 24:return null;default:return null}}var Ko=!1,vt=!1,fw=typeof WeakSet=="function"?WeakSet:Set,q=null;function Ls(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(e,t,r)}else n.current=null}function ac(e,t,n){try{n()}catch(r){$e(e,t,r)}}var jh=!1;function hw(e,t){if(Vu=Ml,e=lg(),hd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,h=e,v=null;t:for(;;){for(var S;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(S=h.firstChild)!==null;)v=h,h=S;for(;;){if(h===e)break t;if(v===n&&++c===s&&(l=o),v===i&&++f===r&&(u=o),(S=h.nextSibling)!==null)break;h=v,v=h.parentNode}h=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qu={focusedElem:e,selectionRange:n},Ml=!1,q=t;q!==null;)if(t=q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,q=e;else for(;q!==null;){t=q;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var E=k.memoizedProps,R=k.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?E:an(t.type,E),R);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(p){$e(t,t.return,p)}if(e=t.sibling,e!==null){e.return=t.return,q=e;break}q=t.return}return k=jh,jh=!1,k}function Oi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&ac(t,n,i)}s=s.next}while(s!==r)}}function ua(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function uc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function rv(e){var t=e.alternate;t!==null&&(e.alternate=null,rv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Mn],delete t[Yi],delete t[Gu],delete t[Gx],delete t[Yx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sv(e){return e.tag===5||e.tag===3||e.tag===4}function Mh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||sv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Tl));else if(r!==4&&(e=e.child,e!==null))for(cc(e,t,n),e=e.sibling;e!==null;)cc(e,t,n),e=e.sibling}function dc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(dc(e,t,n),e=e.sibling;e!==null;)dc(e,t,n),e=e.sibling}var lt=null,fn=!1;function er(e,t,n){for(n=n.child;n!==null;)iv(e,t,n),n=n.sibling}function iv(e,t,n){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(ta,n)}catch{}switch(n.tag){case 5:vt||Ls(n,t);case 6:var r=lt,s=fn;lt=null,er(e,t,n),lt=r,fn=s,lt!==null&&(fn?(e=lt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(fn?(e=lt,n=n.stateNode,e.nodeType===8?ru(e.parentNode,n):e.nodeType===1&&ru(e,n),Vi(e)):ru(lt,n.stateNode));break;case 4:r=lt,s=fn,lt=n.stateNode.containerInfo,fn=!0,er(e,t,n),lt=r,fn=s;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ac(n,t,o),s=s.next}while(s!==r)}er(e,t,n);break;case 1:if(!vt&&(Ls(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){$e(n,t,l)}er(e,t,n);break;case 21:er(e,t,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,er(e,t,n),vt=r):er(e,t,n);break;default:er(e,t,n)}}function Rh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new fw),t.forEach(function(r){var s=Cw.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function on(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:lt=l.stateNode,fn=!1;break e;case 3:lt=l.stateNode.containerInfo,fn=!0;break e;case 4:lt=l.stateNode.containerInfo,fn=!0;break e}l=l.return}if(lt===null)throw Error($(160));iv(i,o,s),lt=null,fn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){$e(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ov(t,e),t=t.sibling}function ov(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(on(t,e),kn(e),r&4){try{Oi(3,e,e.return),ua(3,e)}catch(E){$e(e,e.return,E)}try{Oi(5,e,e.return)}catch(E){$e(e,e.return,E)}}break;case 1:on(t,e),kn(e),r&512&&n!==null&&Ls(n,n.return);break;case 5:if(on(t,e),kn(e),r&512&&n!==null&&Ls(n,n.return),e.flags&32){var s=e.stateNode;try{Ui(s,"")}catch(E){$e(e,e.return,E)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Mp(s,i),Fu(l,o);var c=Fu(l,i);for(o=0;o<u.length;o+=2){var f=u[o],h=u[o+1];f==="style"?Pp(s,h):f==="dangerouslySetInnerHTML"?Tp(s,h):f==="children"?Ui(s,h):ed(s,f,h,c)}switch(l){case"input":Lu(s,i);break;case"textarea":Rp(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?_s(s,!!i.multiple,S,!1):v!==!!i.multiple&&(i.defaultValue!=null?_s(s,!!i.multiple,i.defaultValue,!0):_s(s,!!i.multiple,i.multiple?[]:"",!1))}s[Yi]=i}catch(E){$e(e,e.return,E)}}break;case 6:if(on(t,e),kn(e),r&4){if(e.stateNode===null)throw Error($(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(E){$e(e,e.return,E)}}break;case 3:if(on(t,e),kn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vi(t.containerInfo)}catch(E){$e(e,e.return,E)}break;case 4:on(t,e),kn(e);break;case 13:on(t,e),kn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Pd=He())),r&4&&Rh(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(vt=(c=vt)||f,on(t,e),vt=c):on(t,e),kn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(q=e,f=e.child;f!==null;){for(h=q=f;q!==null;){switch(v=q,S=v.child,v.tag){case 0:case 11:case 14:case 15:Oi(4,v,v.return);break;case 1:Ls(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(E){$e(r,n,E)}}break;case 5:Ls(v,v.return);break;case 22:if(v.memoizedState!==null){Th(h);continue}}S!==null?(S.return=v,q=S):Th(h)}f=f.sibling}e:for(f=null,h=e;;){if(h.tag===5){if(f===null){f=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=_p("display",o))}catch(E){$e(e,e.return,E)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(E){$e(e,e.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:on(t,e),kn(e),r&4&&Rh(e);break;case 21:break;default:on(t,e),kn(e)}}function kn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(sv(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ui(s,""),r.flags&=-33);var i=Mh(e);dc(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Mh(e);cc(e,l,o);break;default:throw Error($(161))}}catch(u){$e(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mw(e,t,n){q=e,lv(e)}function lv(e,t,n){for(var r=(e.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ko;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||vt;l=Ko;var c=vt;if(Ko=o,(vt=u)&&!c)for(q=s;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?_h(s):u!==null?(u.return=o,q=u):_h(s);for(;i!==null;)q=i,lv(i),i=i.sibling;q=s,Ko=l,vt=c}Lh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Lh(e)}}function Lh(e){for(;q!==null;){var t=q;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:vt||ua(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!vt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:an(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&mh(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}mh(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Vi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}vt||t.flags&512&&uc(t)}catch(v){$e(t,t.return,v)}}if(t===e){q=null;break}if(n=t.sibling,n!==null){n.return=t.return,q=n;break}q=t.return}}function Th(e){for(;q!==null;){var t=q;if(t===e){q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,q=n;break}q=t.return}}function _h(e){for(;q!==null;){var t=q;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ua(4,t)}catch(u){$e(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){$e(t,s,u)}}var i=t.return;try{uc(t)}catch(u){$e(t,i,u)}break;case 5:var o=t.return;try{uc(t)}catch(u){$e(t,o,u)}}}catch(u){$e(t,t.return,u)}if(t===e){q=null;break}var l=t.sibling;if(l!==null){l.return=t.return,q=l;break}q=t.return}}var pw=Math.ceil,Bl=Jn.ReactCurrentDispatcher,Td=Jn.ReactCurrentOwner,Yt=Jn.ReactCurrentBatchConfig,Se=0,tt=null,Ke=null,at=0,Ot=0,Ts=Lr(0),Je=0,no=null,os=0,ca=0,_d=0,zi=null,Rt=null,Pd=0,ii=1/0,On=null,Wl=!1,fc=null,kr=null,qo=!1,vr=null,Hl=0,Di=0,hc=null,fl=-1,hl=0;function bt(){return Se&6?He():fl!==-1?fl:fl=He()}function br(e){return e.mode&1?Se&2&&at!==0?at&-at:Jx.transition!==null?(hl===0&&(hl=Vp()),hl):(e=be,e!==0||(e=window.event,e=e===void 0?16:Jp(e.type)),e):1}function pn(e,t,n,r){if(50<Di)throw Di=0,hc=null,Error($(185));mo(e,n,r),(!(Se&2)||e!==tt)&&(e===tt&&(!(Se&2)&&(ca|=n),Je===4&&or(e,at)),Pt(e,r),n===1&&Se===0&&!(t.mode&1)&&(ii=He()+500,oa&&Tr()))}function Pt(e,t){var n=e.callbackNode;J0(e,t);var r=jl(e,e===tt?at:0);if(r===0)n!==null&&Uf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Uf(n),t===1)e.tag===0?Xx(Ph.bind(null,e)):vg(Ph.bind(null,e)),Kx(function(){!(Se&6)&&Tr()}),n=null;else{switch(Qp(r)){case 1:n=id;break;case 4:n=Wp;break;case 16:n=Nl;break;case 536870912:n=Hp;break;default:n=Nl}n=pv(n,av.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function av(e,t){if(fl=-1,hl=0,Se&6)throw Error($(327));var n=e.callbackNode;if(zs()&&e.callbackNode!==n)return null;var r=jl(e,e===tt?at:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Vl(e,r);else{t=r;var s=Se;Se|=2;var i=cv();(tt!==e||at!==t)&&(On=null,ii=He()+500,ts(e,t));do try{yw();break}catch(l){uv(e,l)}while(!0);yd(),Bl.current=i,Se=s,Ke!==null?t=0:(tt=null,at=0,t=Je)}if(t!==0){if(t===2&&(s=$u(e),s!==0&&(r=s,t=mc(e,s))),t===1)throw n=no,ts(e,0),or(e,r),Pt(e,He()),n;if(t===6)or(e,r);else{if(s=e.current.alternate,!(r&30)&&!gw(s)&&(t=Vl(e,r),t===2&&(i=$u(e),i!==0&&(r=i,t=mc(e,i))),t===1))throw n=no,ts(e,0),or(e,r),Pt(e,He()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error($(345));case 2:Dr(e,Rt,On);break;case 3:if(or(e,r),(r&130023424)===r&&(t=Pd+500-He(),10<t)){if(jl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){bt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=qu(Dr.bind(null,e,Rt,On),t);break}Dr(e,Rt,On);break;case 4:if(or(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-mn(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pw(r/1960))-r,10<r){e.timeoutHandle=qu(Dr.bind(null,e,Rt,On),r);break}Dr(e,Rt,On);break;case 5:Dr(e,Rt,On);break;default:throw Error($(329))}}}return Pt(e,He()),e.callbackNode===n?av.bind(null,e):null}function mc(e,t){var n=zi;return e.current.memoizedState.isDehydrated&&(ts(e,t).flags|=256),e=Vl(e,t),e!==2&&(t=Rt,Rt=n,t!==null&&pc(t)),e}function pc(e){Rt===null?Rt=e:Rt.push.apply(Rt,e)}function gw(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function or(e,t){for(t&=~_d,t&=~ca,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-mn(t),r=1<<n;e[n]=-1,t&=~r}}function Ph(e){if(Se&6)throw Error($(327));zs();var t=jl(e,0);if(!(t&1))return Pt(e,He()),null;var n=Vl(e,t);if(e.tag!==0&&n===2){var r=$u(e);r!==0&&(t=r,n=mc(e,r))}if(n===1)throw n=no,ts(e,0),or(e,t),Pt(e,He()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dr(e,Rt,On),Pt(e,He()),null}function Id(e,t){var n=Se;Se|=1;try{return e(t)}finally{Se=n,Se===0&&(ii=He()+500,oa&&Tr())}}function ls(e){vr!==null&&vr.tag===0&&!(Se&6)&&zs();var t=Se;Se|=1;var n=Yt.transition,r=be;try{if(Yt.transition=null,be=1,e)return e()}finally{be=r,Yt.transition=n,Se=t,!(Se&6)&&Tr()}}function Fd(){Ot=Ts.current,_e(Ts)}function ts(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Qx(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(pd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_l();break;case 3:ri(),_e(Tt),_e(yt),bd();break;case 5:kd(r);break;case 4:ri();break;case 13:_e(Ie);break;case 19:_e(Ie);break;case 10:xd(r.type._context);break;case 22:case 23:Fd()}n=n.return}if(tt=e,Ke=e=Er(e.current,null),at=Ot=t,Je=0,no=null,_d=ca=os=0,Rt=zi=null,$r!==null){for(t=0;t<$r.length;t++)if(n=$r[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}$r=null}return e}function uv(e,t){do{var n=Ke;try{if(yd(),ul.current=Ul,$l){for(var r=Fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}$l=!1}if(is=0,et=Ye=Fe=null,Fi=!1,Zi=0,Td.current=null,n===null||n.return===null){Je=1,no=t,Ke=null;break}e:{var i=e,o=n.return,l=n,u=t;if(t=at,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.lanes=v.lanes):(f.updateQueue=null,f.memoizedState=null)}var S=wh(o);if(S!==null){S.flags&=-257,Sh(S,o,l,i,t),S.mode&1&&xh(i,c,t),t=S,u=c;var k=t.updateQueue;if(k===null){var E=new Set;E.add(u),t.updateQueue=E}else k.add(u);break e}else{if(!(t&1)){xh(i,c,t),Od();break e}u=Error($(426))}}else if(Pe&&l.mode&1){var R=wh(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Sh(R,o,l,i,t),gd(si(u,l));break e}}i=u=si(u,l),Je!==4&&(Je=2),zi===null?zi=[i]:zi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=Qg(i,u,t);hh(i,y);break e;case 1:l=u;var m=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(kr===null||!kr.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var p=Kg(i,l,t);hh(i,p);break e}}i=i.return}while(i!==null)}fv(n)}catch(w){t=w,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function cv(){var e=Bl.current;return Bl.current=Ul,e===null?Ul:e}function Od(){(Je===0||Je===3||Je===2)&&(Je=4),tt===null||!(os&268435455)&&!(ca&268435455)||or(tt,at)}function Vl(e,t){var n=Se;Se|=2;var r=cv();(tt!==e||at!==t)&&(On=null,ts(e,t));do try{vw();break}catch(s){uv(e,s)}while(!0);if(yd(),Se=n,Bl.current=r,Ke!==null)throw Error($(261));return tt=null,at=0,Je}function vw(){for(;Ke!==null;)dv(Ke)}function yw(){for(;Ke!==null&&!W0();)dv(Ke)}function dv(e){var t=mv(e.alternate,e,Ot);e.memoizedProps=e.pendingProps,t===null?fv(e):Ke=t,Td.current=null}function fv(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=dw(n,t),n!==null){n.flags&=32767,Ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,Ke=null;return}}else if(n=cw(n,t,Ot),n!==null){Ke=n;return}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);Je===0&&(Je=5)}function Dr(e,t,n){var r=be,s=Yt.transition;try{Yt.transition=null,be=1,xw(e,t,n,r)}finally{Yt.transition=s,be=r}return null}function xw(e,t,n,r){do zs();while(vr!==null);if(Se&6)throw Error($(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Z0(e,i),e===tt&&(Ke=tt=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qo||(qo=!0,pv(Nl,function(){return zs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Yt.transition,Yt.transition=null;var o=be;be=1;var l=Se;Se|=4,Td.current=null,hw(e,n),ov(n,e),Ax(Qu),Ml=!!Vu,Qu=Vu=null,e.current=n,mw(n),H0(),Se=l,be=o,Yt.transition=i}else e.current=n;if(qo&&(qo=!1,vr=e,Hl=s),i=e.pendingLanes,i===0&&(kr=null),K0(n.stateNode),Pt(e,He()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wl)throw Wl=!1,e=fc,fc=null,e;return Hl&1&&e.tag!==0&&zs(),i=e.pendingLanes,i&1?e===hc?Di++:(Di=0,hc=e):Di=0,Tr(),null}function zs(){if(vr!==null){var e=Qp(Hl),t=Yt.transition,n=be;try{if(Yt.transition=null,be=16>e?16:e,vr===null)var r=!1;else{if(e=vr,vr=null,Hl=0,Se&6)throw Error($(331));var s=Se;for(Se|=4,q=e.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(q=c;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:Oi(8,f,i)}var h=f.child;if(h!==null)h.return=f,q=h;else for(;q!==null;){f=q;var v=f.sibling,S=f.return;if(rv(f),f===c){q=null;break}if(v!==null){v.return=S,q=v;break}q=S}}}var k=i.alternate;if(k!==null){var E=k.child;if(E!==null){k.child=null;do{var R=E.sibling;E.sibling=null,E=R}while(E!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Oi(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,q=y;break e}q=i.return}}var m=e.current;for(q=m;q!==null;){o=q;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,q=g;else e:for(o=m;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ua(9,l)}}catch(w){$e(l,l.return,w)}if(l===o){q=null;break e}var p=l.sibling;if(p!==null){p.return=l.return,q=p;break e}q=l.return}}if(Se=s,Tr(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(ta,e)}catch{}r=!0}return r}finally{be=n,Yt.transition=t}}return!1}function Ih(e,t,n){t=si(n,t),t=Qg(e,t,1),e=Cr(e,t,1),t=bt(),e!==null&&(mo(e,1,t),Pt(e,t))}function $e(e,t,n){if(e.tag===3)Ih(e,e,n);else for(;t!==null;){if(t.tag===3){Ih(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(kr===null||!kr.has(r))){e=si(n,e),e=Kg(t,e,1),t=Cr(t,e,1),e=bt(),t!==null&&(mo(t,1,e),Pt(t,e));break}}t=t.return}}function ww(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=bt(),e.pingedLanes|=e.suspendedLanes&n,tt===e&&(at&n)===n&&(Je===4||Je===3&&(at&130023424)===at&&500>He()-Pd?ts(e,0):_d|=n),Pt(e,t)}function hv(e,t){t===0&&(e.mode&1?(t=Do,Do<<=1,!(Do&130023424)&&(Do=4194304)):t=1);var n=bt();e=Yn(e,t),e!==null&&(mo(e,t,n),Pt(e,n))}function Sw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),hv(e,n)}function Cw(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(t),hv(e,n)}var mv;mv=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tt.current)Lt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Lt=!1,uw(e,t,n);Lt=!!(e.flags&131072)}else Lt=!1,Pe&&t.flags&1048576&&yg(t,Fl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;dl(e,t),e=t.pendingProps;var s=ei(t,yt.current);Os(t,n),s=Nd(null,t,r,e,s,n);var i=jd();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_t(r)?(i=!0,Pl(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sd(t),s.updater=aa,t.stateNode=s,s._reactInternals=t,tc(t,r,e,n),t=sc(null,t,r,!0,i,n)):(t.tag=0,Pe&&i&&md(t),Ct(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(dl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=bw(r),e=an(r,e),s){case 0:t=rc(null,t,r,e,n);break e;case 1:t=bh(null,t,r,e,n);break e;case 11:t=Ch(null,t,r,e,n);break e;case 14:t=kh(null,t,r,an(r.type,e),n);break e}throw Error($(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:an(r,s),rc(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:an(r,s),bh(e,t,r,s,n);case 3:e:{if(Xg(t),e===null)throw Error($(387));r=t.pendingProps,i=t.memoizedState,s=i.element,bg(e,t),Dl(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=si(Error($(423)),t),t=Eh(e,t,r,n,s);break e}else if(r!==s){s=si(Error($(424)),t),t=Eh(e,t,r,n,s);break e}else for(zt=Sr(t.stateNode.containerInfo.firstChild),Dt=t,Pe=!0,hn=null,n=Cg(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ti(),r===s){t=Xn(e,t,n);break e}Ct(e,t,r,n)}t=t.child}return t;case 5:return Eg(t),e===null&&Ju(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ku(r,s)?o=null:i!==null&&Ku(r,i)&&(t.flags|=32),Yg(e,t),Ct(e,t,o,n),t.child;case 6:return e===null&&Ju(t),null;case 13:return Jg(e,t,n);case 4:return Cd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ni(t,null,r,n):Ct(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:an(r,s),Ch(e,t,r,s,n);case 7:return Ct(e,t,t.pendingProps,n),t.child;case 8:return Ct(e,t,t.pendingProps.children,n),t.child;case 12:return Ct(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Me(Ol,r._currentValue),r._currentValue=o,i!==null)if(vn(i.value,o)){if(i.children===s.children&&!Tt.current){t=Xn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Hn(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Zu(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Zu(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ct(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Os(t,n),s=Xt(s),r=r(s),t.flags|=1,Ct(e,t,r,n),t.child;case 14:return r=t.type,s=an(r,t.pendingProps),s=an(r.type,s),kh(e,t,r,s,n);case 15:return qg(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:an(r,s),dl(e,t),t.tag=1,_t(r)?(e=!0,Pl(t)):e=!1,Os(t,n),Vg(t,r,s),tc(t,r,s,n),sc(null,t,r,!0,e,n);case 19:return Zg(e,t,n);case 22:return Gg(e,t,n)}throw Error($(156,t.tag))};function pv(e,t){return Bp(e,t)}function kw(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,n,r){return new kw(e,t,n,r)}function zd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bw(e){if(typeof e=="function")return zd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===nd)return 11;if(e===rd)return 14}return 2}function Er(e,t){var n=e.alternate;return n===null?(n=Gt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ml(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")zd(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ss:return ns(n.children,s,i,t);case td:o=8,s|=8;break;case Eu:return e=Gt(12,n,t,s|2),e.elementType=Eu,e.lanes=i,e;case Nu:return e=Gt(13,n,t,s),e.elementType=Nu,e.lanes=i,e;case ju:return e=Gt(19,n,t,s),e.elementType=ju,e.lanes=i,e;case Ep:return da(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case kp:o=10;break e;case bp:o=9;break e;case nd:o=11;break e;case rd:o=14;break e;case rr:o=16,r=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=Gt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function ns(e,t,n,r){return e=Gt(7,e,r,t),e.lanes=n,e}function da(e,t,n,r){return e=Gt(22,e,r,t),e.elementType=Ep,e.lanes=n,e.stateNode={isHidden:!1},e}function du(e,t,n){return e=Gt(6,e,null,t),e.lanes=n,e}function fu(e,t,n){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ew(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qa(0),this.expirationTimes=Qa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qa(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Dd(e,t,n,r,s,i,o,l,u){return e=new Ew(e,t,n,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Gt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sd(i),e}function Nw(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ws,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function gv(e){if(!e)return Mr;e=e._reactInternals;e:{if(ds(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_t(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(_t(n))return gg(e,n,t)}return t}function vv(e,t,n,r,s,i,o,l,u){return e=Dd(n,r,!0,e,s,i,o,l,u),e.context=gv(null),n=e.current,r=bt(),s=br(n),i=Hn(r,s),i.callback=t??null,Cr(n,i,s),e.current.lanes=s,mo(e,s,r),Pt(e,r),e}function fa(e,t,n,r){var s=t.current,i=bt(),o=br(s);return n=gv(n),t.context===null?t.context=n:t.pendingContext=n,t=Hn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Cr(s,t,o),e!==null&&(pn(e,s,o,i),al(e,s,o)),o}function Ql(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Fh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ad(e,t){Fh(e,t),(e=e.alternate)&&Fh(e,t)}function jw(){return null}var yv=typeof reportError=="function"?reportError:function(e){console.error(e)};function $d(e){this._internalRoot=e}ha.prototype.render=$d.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));fa(e,t,null,null)};ha.prototype.unmount=$d.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ls(function(){fa(null,e,null,null)}),t[Gn]=null}};function ha(e){this._internalRoot=e}ha.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ir.length&&t!==0&&t<ir[n].priority;n++);ir.splice(n,0,e),n===0&&Xp(e)}};function Ud(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ma(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Oh(){}function Mw(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Ql(o);i.call(c)}}var o=vv(t,r,e,0,null,!1,!1,"",Oh);return e._reactRootContainer=o,e[Gn]=o.current,qi(e.nodeType===8?e.parentNode:e),ls(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=Ql(u);l.call(c)}}var u=Dd(e,0,!1,null,null,!1,!1,"",Oh);return e._reactRootContainer=u,e[Gn]=u.current,qi(e.nodeType===8?e.parentNode:e),ls(function(){fa(t,u,n,r)}),u}function pa(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Ql(o);l.call(u)}}fa(t,o,e,s)}else o=Mw(n,t,e,s,r);return Ql(o)}Kp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ni(t.pendingLanes);n!==0&&(od(t,n|1),Pt(t,He()),!(Se&6)&&(ii=He()+500,Tr()))}break;case 13:ls(function(){var r=Yn(e,1);if(r!==null){var s=bt();pn(r,e,1,s)}}),Ad(e,1)}};ld=function(e){if(e.tag===13){var t=Yn(e,134217728);if(t!==null){var n=bt();pn(t,e,134217728,n)}Ad(e,134217728)}};qp=function(e){if(e.tag===13){var t=br(e),n=Yn(e,t);if(n!==null){var r=bt();pn(n,e,t,r)}Ad(e,t)}};Gp=function(){return be};Yp=function(e,t){var n=be;try{return be=e,t()}finally{be=n}};zu=function(e,t,n){switch(t){case"input":if(Lu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ia(r);if(!s)throw Error($(90));jp(r),Lu(r,s)}}}break;case"textarea":Rp(e,n);break;case"select":t=n.value,t!=null&&_s(e,!!n.multiple,t,!1)}};Op=Id;zp=ls;var Rw={usingClientEntryPoint:!1,Events:[go,Es,ia,Ip,Fp,Id]},Si={findFiberByHostInstance:Ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lw={bundleType:Si.bundleType,version:Si.version,rendererPackageName:Si.rendererPackageName,rendererConfig:Si.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$p(e),e===null?null:e.stateNode},findFiberByHostInstance:Si.findFiberByHostInstance||jw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Go=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Go.isDisabled&&Go.supportsFiber)try{ta=Go.inject(Lw),Rn=Go}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rw;$t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ud(t))throw Error($(200));return Nw(e,t,null,n)};$t.createRoot=function(e,t){if(!Ud(e))throw Error($(299));var n=!1,r="",s=yv;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Dd(e,1,!1,null,null,n,!1,r,s),e[Gn]=t.current,qi(e.nodeType===8?e.parentNode:e),new $d(t)};$t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=$p(t),e=e===null?null:e.stateNode,e};$t.flushSync=function(e){return ls(e)};$t.hydrate=function(e,t,n){if(!ma(t))throw Error($(200));return pa(null,e,t,!0,n)};$t.hydrateRoot=function(e,t,n){if(!Ud(e))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=yv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=vv(t,null,e,1,n??null,s,!1,i,o),e[Gn]=t.current,qi(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new ha(t)};$t.render=function(e,t,n){if(!ma(t))throw Error($(200));return pa(null,e,t,!1,n)};$t.unmountComponentAtNode=function(e){if(!ma(e))throw Error($(40));return e._reactRootContainer?(ls(function(){pa(null,null,e,!1,function(){e._reactRootContainer=null,e[Gn]=null})}),!0):!1};$t.unstable_batchedUpdates=Id;$t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ma(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return pa(e,t,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function xv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xv)}catch(e){console.error(e)}}xv(),xp.exports=$t;var Bd=xp.exports,wv,zh=Bd;wv=zh.createRoot,zh.hydrateRoot;var ci=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Tw={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},lr,Kc,Xm,_w=(Xm=class{constructor(){ae(this,lr,Tw);ae(this,Kc,!1)}setTimeoutProvider(e){V(this,lr,e)}setTimeout(e,t){return C(this,lr).setTimeout(e,t)}clearTimeout(e){C(this,lr).clearTimeout(e)}setInterval(e,t){return C(this,lr).setInterval(e,t)}clearInterval(e){C(this,lr).clearInterval(e)}},lr=new WeakMap,Kc=new WeakMap,Xm),Br=new _w;function Pw(e){setTimeout(e,0)}var as=typeof window>"u"||"Deno"in globalThis;function kt(){}function Iw(e,t){return typeof e=="function"?e(t):e}function gc(e){return typeof e=="number"&&e>=0&&e!==1/0}function Sv(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Nr(e,t){return typeof e=="function"?e(t):e}function Vt(e,t){return typeof e=="function"?e(t):e}function Dh(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==Wd(o,t.options))return!1}else if(!ro(t.queryKey,o))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function Ah(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(us(t.options.mutationKey)!==us(i))return!1}else if(!ro(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Wd(e,t){return((t==null?void 0:t.queryKeyHashFn)||us)(e)}function us(e){return JSON.stringify(e,(t,n)=>vc(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ro(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>ro(e[n],t[n])):!1}var Fw=Object.prototype.hasOwnProperty;function Cv(e,t){if(e===t)return e;const n=$h(e)&&$h(t);if(!n&&!(vc(e)&&vc(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let u=0;for(let c=0;c<o;c++){const f=n?c:i[c],h=e[f],v=t[f];if(h===v){l[f]=h,(n?c<s:Fw.call(e,f))&&u++;continue}if(h===null||v===null||typeof h!="object"||typeof v!="object"){l[f]=v;continue}const S=Cv(h,v);l[f]=S,S===h&&u++}return s===o&&u===s?e:l}function Kl(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function $h(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function vc(e){if(!Uh(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Uh(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Uh(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ow(e){return new Promise(t=>{Br.setTimeout(t,e)})}function yc(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Cv(e,t):t}function zw(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function Dw(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Hd=Symbol();function kv(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Hd?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function bv(e,t){return typeof e=="function"?e(...t):!!e}function Aw(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var Qr,ar,Us,Jm,$w=(Jm=class extends ci{constructor(){super();ae(this,Qr);ae(this,ar);ae(this,Us);V(this,Us,t=>{if(!as&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){C(this,ar)||this.setEventListener(C(this,Us))}onUnsubscribe(){var t;this.hasListeners()||((t=C(this,ar))==null||t.call(this),V(this,ar,void 0))}setEventListener(t){var n;V(this,Us,t),(n=C(this,ar))==null||n.call(this),V(this,ar,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){C(this,Qr)!==t&&(V(this,Qr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof C(this,Qr)=="boolean"?C(this,Qr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Qr=new WeakMap,ar=new WeakMap,Us=new WeakMap,Jm),Vd=new $w;function xc(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var Uw=Pw;function Bw(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=Uw;const i=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;t++;try{u=l()}finally{t--,t||o()}return u},batchCalls:l=>(...u)=>{i(()=>{l(...u)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Xe=Bw(),Bs,ur,Ws,Zm,Ww=(Zm=class extends ci{constructor(){super();ae(this,Bs,!0);ae(this,ur);ae(this,Ws);V(this,Ws,t=>{if(!as&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){C(this,ur)||this.setEventListener(C(this,Ws))}onUnsubscribe(){var t;this.hasListeners()||((t=C(this,ur))==null||t.call(this),V(this,ur,void 0))}setEventListener(t){var n;V(this,Ws,t),(n=C(this,ur))==null||n.call(this),V(this,ur,t(this.setOnline.bind(this)))}setOnline(t){C(this,Bs)!==t&&(V(this,Bs,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return C(this,Bs)}},Bs=new WeakMap,ur=new WeakMap,Ws=new WeakMap,Zm),ql=new Ww;function Hw(e){return Math.min(1e3*2**e,3e4)}function Ev(e){return(e??"online")==="online"?ql.isOnline():!0}var wc=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Nv(e){let t=!1,n=0,r;const s=xc(),i=()=>s.status!=="pending",o=E=>{var R;if(!i()){const y=new wc(E);v(y),(R=e.onCancel)==null||R.call(e,y)}},l=()=>{t=!0},u=()=>{t=!1},c=()=>Vd.isFocused()&&(e.networkMode==="always"||ql.isOnline())&&e.canRun(),f=()=>Ev(e.networkMode)&&e.canRun(),h=E=>{i()||(r==null||r(),s.resolve(E))},v=E=>{i()||(r==null||r(),s.reject(E))},S=()=>new Promise(E=>{var R;r=y=>{(i()||c())&&E(y)},(R=e.onPause)==null||R.call(e)}).then(()=>{var E;r=void 0,i()||(E=e.onContinue)==null||E.call(e)}),k=()=>{if(i())return;let E;const R=n===0?e.initialPromise:void 0;try{E=R??e.fn()}catch(y){E=Promise.reject(y)}Promise.resolve(E).then(h).catch(y=>{var M;if(i())return;const m=e.retry??(as?0:3),g=e.retryDelay??Hw,p=typeof g=="function"?g(n,y):g,w=m===!0||typeof m=="number"&&n<m||typeof m=="function"&&m(n,y);if(t||!w){v(y);return}n++,(M=e.onFail)==null||M.call(e,n,y),Ow(p).then(()=>c()?void 0:S()).then(()=>{t?v(y):k()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:u,canStart:f,start:()=>(f()?k():S().then(k),s)}}var Kr,ep,jv=(ep=class{constructor(){ae(this,Kr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),gc(this.gcTime)&&V(this,Kr,Br.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(as?1/0:5*60*1e3))}clearGcTimeout(){C(this,Kr)&&(Br.clearTimeout(C(this,Kr)),V(this,Kr,void 0))}},Kr=new WeakMap,ep),qr,Hs,Ht,Gr,Ze,lo,Yr,cn,Fn,tp,Vw=(tp=class extends jv{constructor(t){super();ae(this,cn);ae(this,qr);ae(this,Hs);ae(this,Ht);ae(this,Gr);ae(this,Ze);ae(this,lo);ae(this,Yr);V(this,Yr,!1),V(this,lo,t.defaultOptions),this.setOptions(t.options),this.observers=[],V(this,Gr,t.client),V(this,Ht,C(this,Gr).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,V(this,qr,Wh(this.options)),this.state=t.state??C(this,qr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=C(this,Ze))==null?void 0:t.promise}setOptions(t){if(this.options={...C(this,lo),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Wh(this.options);n.data!==void 0&&(this.setState(Bh(n.data,n.dataUpdatedAt)),V(this,qr,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&C(this,Ht).remove(this)}setData(t,n){const r=yc(this.state.data,t,this.options);return me(this,cn,Fn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){me(this,cn,Fn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=C(this,Ze))==null?void 0:r.promise;return(s=C(this,Ze))==null||s.cancel(t),n?n.then(kt).catch(kt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(C(this,qr))}isActive(){return this.observers.some(t=>Vt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Hd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Nr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Sv(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=C(this,Ze))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=C(this,Ze))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),C(this,Ht).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(C(this,Ze)&&(C(this,Yr)?C(this,Ze).cancel({revert:!0}):C(this,Ze).cancelRetry()),this.scheduleGc()),C(this,Ht).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||me(this,cn,Fn).call(this,{type:"invalidate"})}async fetch(t,n){var u,c,f,h,v,S,k,E,R,y,m,g;if(this.state.fetchStatus!=="idle"&&((u=C(this,Ze))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(C(this,Ze))return C(this,Ze).continueRetry(),C(this,Ze).promise}if(t&&this.setOptions(t),!this.options.queryFn){const p=this.observers.find(w=>w.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,s=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(V(this,Yr,!0),r.signal)})},i=()=>{const p=kv(this.options,n),M=(()=>{const L={client:C(this,Gr),queryKey:this.queryKey,meta:this.meta};return s(L),L})();return V(this,Yr,!1),this.options.persister?this.options.persister(p,M,this):p(M)},l=(()=>{const p={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:C(this,Gr),state:this.state,fetchFn:i};return s(p),p})();(c=this.options.behavior)==null||c.onFetch(l,this),V(this,Hs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&me(this,cn,Fn).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),V(this,Ze,Nv({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:p=>{p instanceof wc&&p.revert&&this.setState({...C(this,Hs),fetchStatus:"idle"}),r.abort()},onFail:(p,w)=>{me(this,cn,Fn).call(this,{type:"failed",failureCount:p,error:w})},onPause:()=>{me(this,cn,Fn).call(this,{type:"pause"})},onContinue:()=>{me(this,cn,Fn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const p=await C(this,Ze).start();if(p===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(p),(S=(v=C(this,Ht).config).onSuccess)==null||S.call(v,p,this),(E=(k=C(this,Ht).config).onSettled)==null||E.call(k,p,this.state.error,this),p}catch(p){if(p instanceof wc){if(p.silent)return C(this,Ze).promise;if(p.revert){if(this.state.data===void 0)throw p;return this.state.data}}throw me(this,cn,Fn).call(this,{type:"error",error:p}),(y=(R=C(this,Ht).config).onError)==null||y.call(R,p,this),(g=(m=C(this,Ht).config).onSettled)==null||g.call(m,this.state.data,p,this),p}finally{this.scheduleGc()}}},qr=new WeakMap,Hs=new WeakMap,Ht=new WeakMap,Gr=new WeakMap,Ze=new WeakMap,lo=new WeakMap,Yr=new WeakMap,cn=new WeakSet,Fn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Mv(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...Bh(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return V(this,Hs,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Xe.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),C(this,Ht).notify({query:this,type:"updated",action:t})})},tp);function Mv(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ev(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Bh(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Wh(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var jt,we,ao,wt,Xr,Vs,Dn,cr,uo,Qs,Ks,Jr,Zr,dr,qs,ke,Mi,Sc,Cc,kc,bc,Ec,Nc,jc,Rv,np,Qw=(np=class extends ci{constructor(t,n){super();ae(this,ke);ae(this,jt);ae(this,we);ae(this,ao);ae(this,wt);ae(this,Xr);ae(this,Vs);ae(this,Dn);ae(this,cr);ae(this,uo);ae(this,Qs);ae(this,Ks);ae(this,Jr);ae(this,Zr);ae(this,dr);ae(this,qs,new Set);this.options=n,V(this,jt,t),V(this,cr,null),V(this,Dn,xc()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(C(this,we).addObserver(this),Hh(C(this,we),this.options)?me(this,ke,Mi).call(this):this.updateResult(),me(this,ke,bc).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Mc(C(this,we),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Mc(C(this,we),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,me(this,ke,Ec).call(this),me(this,ke,Nc).call(this),C(this,we).removeObserver(this)}setOptions(t){const n=this.options,r=C(this,we);if(this.options=C(this,jt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Vt(this.options.enabled,C(this,we))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");me(this,ke,jc).call(this),C(this,we).setOptions(this.options),n._defaulted&&!Kl(this.options,n)&&C(this,jt).getQueryCache().notify({type:"observerOptionsUpdated",query:C(this,we),observer:this});const s=this.hasListeners();s&&Vh(C(this,we),r,this.options,n)&&me(this,ke,Mi).call(this),this.updateResult(),s&&(C(this,we)!==r||Vt(this.options.enabled,C(this,we))!==Vt(n.enabled,C(this,we))||Nr(this.options.staleTime,C(this,we))!==Nr(n.staleTime,C(this,we)))&&me(this,ke,Sc).call(this);const i=me(this,ke,Cc).call(this);s&&(C(this,we)!==r||Vt(this.options.enabled,C(this,we))!==Vt(n.enabled,C(this,we))||i!==C(this,dr))&&me(this,ke,kc).call(this,i)}getOptimisticResult(t){const n=C(this,jt).getQueryCache().build(C(this,jt),t),r=this.createResult(n,t);return qw(this,r)&&(V(this,wt,r),V(this,Vs,this.options),V(this,Xr,C(this,we).state)),r}getCurrentResult(){return C(this,wt)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&C(this,Dn).status==="pending"&&C(this,Dn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){C(this,qs).add(t)}getCurrentQuery(){return C(this,we)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=C(this,jt).defaultQueryOptions(t),r=C(this,jt).getQueryCache().build(C(this,jt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return me(this,ke,Mi).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),C(this,wt)))}createResult(t,n){var T;const r=C(this,we),s=this.options,i=C(this,wt),o=C(this,Xr),l=C(this,Vs),c=t!==r?t.state:C(this,ao),{state:f}=t;let h={...f},v=!1,S;if(n._optimisticResults){const N=this.hasListeners(),P=!N&&Hh(t,n),U=N&&Vh(t,r,n,s);(P||U)&&(h={...h,...Mv(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:k,errorUpdatedAt:E,status:R}=h;S=h.data;let y=!1;if(n.placeholderData!==void 0&&S===void 0&&R==="pending"){let N;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(N=i.data,y=!0):N=typeof n.placeholderData=="function"?n.placeholderData((T=C(this,Ks))==null?void 0:T.state.data,C(this,Ks)):n.placeholderData,N!==void 0&&(R="success",S=yc(i==null?void 0:i.data,N,n),v=!0)}if(n.select&&S!==void 0&&!y)if(i&&S===(o==null?void 0:o.data)&&n.select===C(this,uo))S=C(this,Qs);else try{V(this,uo,n.select),S=n.select(S),S=yc(i==null?void 0:i.data,S,n),V(this,Qs,S),V(this,cr,null)}catch(N){V(this,cr,N)}C(this,cr)&&(k=C(this,cr),S=C(this,Qs),E=Date.now(),R="error");const m=h.fetchStatus==="fetching",g=R==="pending",p=R==="error",w=g&&m,M=S!==void 0,b={status:R,fetchStatus:h.fetchStatus,isPending:g,isSuccess:R==="success",isError:p,isInitialLoading:w,isLoading:w,data:S,dataUpdatedAt:h.dataUpdatedAt,error:k,errorUpdatedAt:E,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:m,isRefetching:m&&!g,isLoadingError:p&&!M,isPaused:h.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:p&&M,isStale:Qd(t,n),refetch:this.refetch,promise:C(this,Dn),isEnabled:Vt(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const N=D=>{b.status==="error"?D.reject(b.error):b.data!==void 0&&D.resolve(b.data)},P=()=>{const D=V(this,Dn,b.promise=xc());N(D)},U=C(this,Dn);switch(U.status){case"pending":t.queryHash===r.queryHash&&N(U);break;case"fulfilled":(b.status==="error"||b.data!==U.value)&&P();break;case"rejected":(b.status!=="error"||b.error!==U.reason)&&P();break}}return b}updateResult(){const t=C(this,wt),n=this.createResult(C(this,we),this.options);if(V(this,Xr,C(this,we).state),V(this,Vs,this.options),C(this,Xr).data!==void 0&&V(this,Ks,C(this,we)),Kl(n,t))return;V(this,wt,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!C(this,qs).size)return!0;const o=new Set(i??C(this,qs));return this.options.throwOnError&&o.add("error"),Object.keys(C(this,wt)).some(l=>{const u=l;return C(this,wt)[u]!==t[u]&&o.has(u)})};me(this,ke,Rv).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&me(this,ke,bc).call(this)}},jt=new WeakMap,we=new WeakMap,ao=new WeakMap,wt=new WeakMap,Xr=new WeakMap,Vs=new WeakMap,Dn=new WeakMap,cr=new WeakMap,uo=new WeakMap,Qs=new WeakMap,Ks=new WeakMap,Jr=new WeakMap,Zr=new WeakMap,dr=new WeakMap,qs=new WeakMap,ke=new WeakSet,Mi=function(t){me(this,ke,jc).call(this);let n=C(this,we).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(kt)),n},Sc=function(){me(this,ke,Ec).call(this);const t=Nr(this.options.staleTime,C(this,we));if(as||C(this,wt).isStale||!gc(t))return;const r=Sv(C(this,wt).dataUpdatedAt,t)+1;V(this,Jr,Br.setTimeout(()=>{C(this,wt).isStale||this.updateResult()},r))},Cc=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(C(this,we)):this.options.refetchInterval)??!1},kc=function(t){me(this,ke,Nc).call(this),V(this,dr,t),!(as||Vt(this.options.enabled,C(this,we))===!1||!gc(C(this,dr))||C(this,dr)===0)&&V(this,Zr,Br.setInterval(()=>{(this.options.refetchIntervalInBackground||Vd.isFocused())&&me(this,ke,Mi).call(this)},C(this,dr)))},bc=function(){me(this,ke,Sc).call(this),me(this,ke,kc).call(this,me(this,ke,Cc).call(this))},Ec=function(){C(this,Jr)&&(Br.clearTimeout(C(this,Jr)),V(this,Jr,void 0))},Nc=function(){C(this,Zr)&&(Br.clearInterval(C(this,Zr)),V(this,Zr,void 0))},jc=function(){const t=C(this,jt).getQueryCache().build(C(this,jt),this.options);if(t===C(this,we))return;const n=C(this,we);V(this,we,t),V(this,ao,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},Rv=function(t){Xe.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(C(this,wt))}),C(this,jt).getQueryCache().notify({query:C(this,we),type:"observerResultsUpdated"})})},np);function Kw(e,t){return Vt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Hh(e,t){return Kw(e,t)||e.state.data!==void 0&&Mc(e,t,t.refetchOnMount)}function Mc(e,t,n){if(Vt(t.enabled,e)!==!1&&Nr(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Qd(e,t)}return!1}function Vh(e,t,n,r){return(e!==t||Vt(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Qd(e,n)}function Qd(e,t){return Vt(t.enabled,e)!==!1&&e.isStaleByTime(Nr(t.staleTime,e))}function qw(e,t){return!Kl(e.getCurrentResult(),t)}function Qh(e){return{onFetch:(t,n)=>{var f,h,v,S,k;const r=t.options,s=(v=(h=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:h.fetchMore)==null?void 0:v.direction,i=((S=t.state.data)==null?void 0:S.pages)||[],o=((k=t.state.data)==null?void 0:k.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const c=async()=>{let E=!1;const R=g=>{Aw(g,()=>t.signal,()=>E=!0)},y=kv(t.options,t.fetchOptions),m=async(g,p,w)=>{if(E)return Promise.reject();if(p==null&&g.pages.length)return Promise.resolve(g);const L=(()=>{const P={client:t.client,queryKey:t.queryKey,pageParam:p,direction:w?"backward":"forward",meta:t.options.meta};return R(P),P})(),b=await y(L),{maxPages:T}=t.options,N=w?Dw:zw;return{pages:N(g.pages,b,T),pageParams:N(g.pageParams,p,T)}};if(s&&i.length){const g=s==="backward",p=g?Gw:Kh,w={pages:i,pageParams:o},M=p(r,w);l=await m(w,M,g)}else{const g=e??i.length;do{const p=u===0?o[0]??r.initialPageParam:Kh(r,l);if(u>0&&p==null)break;l=await m(l,p),u++}while(u<g)}return l};t.options.persister?t.fetchFn=()=>{var E,R;return(R=(E=t.options).persister)==null?void 0:R.call(E,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function Kh(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Gw(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var co,En,St,es,Nn,nr,rp,Yw=(rp=class extends jv{constructor(t){super();ae(this,Nn);ae(this,co);ae(this,En);ae(this,St);ae(this,es);V(this,co,t.client),this.mutationId=t.mutationId,V(this,St,t.mutationCache),V(this,En,[]),this.state=t.state||Lv(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){C(this,En).includes(t)||(C(this,En).push(t),this.clearGcTimeout(),C(this,St).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){V(this,En,C(this,En).filter(n=>n!==t)),this.scheduleGc(),C(this,St).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){C(this,En).length||(this.state.status==="pending"?this.scheduleGc():C(this,St).remove(this))}continue(){var t;return((t=C(this,es))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,u,c,f,h,v,S,k,E,R,y,m,g,p,w,M,L,b,T;const n=()=>{me(this,Nn,nr).call(this,{type:"continue"})},r={client:C(this,co),meta:this.options.meta,mutationKey:this.options.mutationKey};V(this,es,Nv({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(N,P)=>{me(this,Nn,nr).call(this,{type:"failed",failureCount:N,error:P})},onPause:()=>{me(this,Nn,nr).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>C(this,St).canRun(this)}));const s=this.state.status==="pending",i=!C(this,es).canStart();try{if(s)n();else{me(this,Nn,nr).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=C(this,St).config).onMutate)==null?void 0:l.call(o,t,this,r));const P=await((c=(u=this.options).onMutate)==null?void 0:c.call(u,t,r));P!==this.state.context&&me(this,Nn,nr).call(this,{type:"pending",context:P,variables:t,isPaused:i})}const N=await C(this,es).start();return await((h=(f=C(this,St).config).onSuccess)==null?void 0:h.call(f,N,t,this.state.context,this,r)),await((S=(v=this.options).onSuccess)==null?void 0:S.call(v,N,t,this.state.context,r)),await((E=(k=C(this,St).config).onSettled)==null?void 0:E.call(k,N,null,this.state.variables,this.state.context,this,r)),await((y=(R=this.options).onSettled)==null?void 0:y.call(R,N,null,t,this.state.context,r)),me(this,Nn,nr).call(this,{type:"success",data:N}),N}catch(N){try{await((g=(m=C(this,St).config).onError)==null?void 0:g.call(m,N,t,this.state.context,this,r))}catch(P){Promise.reject(P)}try{await((w=(p=this.options).onError)==null?void 0:w.call(p,N,t,this.state.context,r))}catch(P){Promise.reject(P)}try{await((L=(M=C(this,St).config).onSettled)==null?void 0:L.call(M,void 0,N,this.state.variables,this.state.context,this,r))}catch(P){Promise.reject(P)}try{await((T=(b=this.options).onSettled)==null?void 0:T.call(b,void 0,N,t,this.state.context,r))}catch(P){Promise.reject(P)}throw me(this,Nn,nr).call(this,{type:"error",error:N}),N}finally{C(this,St).runNext(this)}}},co=new WeakMap,En=new WeakMap,St=new WeakMap,es=new WeakMap,Nn=new WeakSet,nr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Xe.batch(()=>{C(this,En).forEach(r=>{r.onMutationUpdate(t)}),C(this,St).notify({mutation:this,type:"updated",action:t})})},rp);function Lv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var An,dn,fo,sp,Xw=(sp=class extends ci{constructor(t={}){super();ae(this,An);ae(this,dn);ae(this,fo);this.config=t,V(this,An,new Set),V(this,dn,new Map),V(this,fo,0)}build(t,n,r){const s=new Yw({client:t,mutationCache:this,mutationId:++_o(this,fo)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){C(this,An).add(t);const n=Yo(t);if(typeof n=="string"){const r=C(this,dn).get(n);r?r.push(t):C(this,dn).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(C(this,An).delete(t)){const n=Yo(t);if(typeof n=="string"){const r=C(this,dn).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&C(this,dn).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Yo(t);if(typeof n=="string"){const r=C(this,dn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Yo(t);if(typeof n=="string"){const s=(r=C(this,dn).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Xe.batch(()=>{C(this,An).forEach(t=>{this.notify({type:"removed",mutation:t})}),C(this,An).clear(),C(this,dn).clear()})}getAll(){return Array.from(C(this,An))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Ah(n,r))}findAll(t={}){return this.getAll().filter(n=>Ah(t,n))}notify(t){Xe.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Xe.batch(()=>Promise.all(t.map(n=>n.continue().catch(kt))))}},An=new WeakMap,dn=new WeakMap,fo=new WeakMap,sp);function Yo(e){var t;return(t=e.options.scope)==null?void 0:t.id}var $n,fr,Mt,Un,Kn,pl,Rc,ip,Jw=(ip=class extends ci{constructor(n,r){super();ae(this,Kn);ae(this,$n);ae(this,fr);ae(this,Mt);ae(this,Un);V(this,$n,n),this.setOptions(r),this.bindMethods(),me(this,Kn,pl).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=C(this,$n).defaultMutationOptions(n),Kl(this.options,r)||C(this,$n).getMutationCache().notify({type:"observerOptionsUpdated",mutation:C(this,Mt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&us(r.mutationKey)!==us(this.options.mutationKey)?this.reset():((s=C(this,Mt))==null?void 0:s.state.status)==="pending"&&C(this,Mt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=C(this,Mt))==null||n.removeObserver(this)}onMutationUpdate(n){me(this,Kn,pl).call(this),me(this,Kn,Rc).call(this,n)}getCurrentResult(){return C(this,fr)}reset(){var n;(n=C(this,Mt))==null||n.removeObserver(this),V(this,Mt,void 0),me(this,Kn,pl).call(this),me(this,Kn,Rc).call(this)}mutate(n,r){var s;return V(this,Un,r),(s=C(this,Mt))==null||s.removeObserver(this),V(this,Mt,C(this,$n).getMutationCache().build(C(this,$n),this.options)),C(this,Mt).addObserver(this),C(this,Mt).execute(n)}},$n=new WeakMap,fr=new WeakMap,Mt=new WeakMap,Un=new WeakMap,Kn=new WeakSet,pl=function(){var r;const n=((r=C(this,Mt))==null?void 0:r.state)??Lv();V(this,fr,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Rc=function(n){Xe.batch(()=>{var r,s,i,o,l,u,c,f;if(C(this,Un)&&this.hasListeners()){const h=C(this,fr).variables,v=C(this,fr).context,S={client:C(this,$n),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=C(this,Un)).onSuccess)==null||s.call(r,n.data,h,v,S)}catch(k){Promise.reject(k)}try{(o=(i=C(this,Un)).onSettled)==null||o.call(i,n.data,null,h,v,S)}catch(k){Promise.reject(k)}}else if((n==null?void 0:n.type)==="error"){try{(u=(l=C(this,Un)).onError)==null||u.call(l,n.error,h,v,S)}catch(k){Promise.reject(k)}try{(f=(c=C(this,Un)).onSettled)==null||f.call(c,void 0,n.error,h,v,S)}catch(k){Promise.reject(k)}}}this.listeners.forEach(h=>{h(C(this,fr))})})},ip),jn,op,Zw=(op=class extends ci{constructor(t={}){super();ae(this,jn);this.config=t,V(this,jn,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??Wd(s,n);let o=this.get(i);return o||(o=new Vw({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){C(this,jn).has(t.queryHash)||(C(this,jn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=C(this,jn).get(t.queryHash);n&&(t.destroy(),n===t&&C(this,jn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Xe.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return C(this,jn).get(t)}getAll(){return[...C(this,jn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Dh(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Dh(t,r)):n}notify(t){Xe.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Xe.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Xe.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},jn=new WeakMap,op),De,hr,mr,Gs,Ys,pr,Xs,Js,lp,e1=(lp=class{constructor(e={}){ae(this,De);ae(this,hr);ae(this,mr);ae(this,Gs);ae(this,Ys);ae(this,pr);ae(this,Xs);ae(this,Js);V(this,De,e.queryCache||new Zw),V(this,hr,e.mutationCache||new Xw),V(this,mr,e.defaultOptions||{}),V(this,Gs,new Map),V(this,Ys,new Map),V(this,pr,0)}mount(){_o(this,pr)._++,C(this,pr)===1&&(V(this,Xs,Vd.subscribe(async e=>{e&&(await this.resumePausedMutations(),C(this,De).onFocus())})),V(this,Js,ql.subscribe(async e=>{e&&(await this.resumePausedMutations(),C(this,De).onOnline())})))}unmount(){var e,t;_o(this,pr)._--,C(this,pr)===0&&((e=C(this,Xs))==null||e.call(this),V(this,Xs,void 0),(t=C(this,Js))==null||t.call(this),V(this,Js,void 0))}isFetching(e){return C(this,De).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return C(this,hr).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=C(this,De).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=C(this,De).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Nr(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return C(this,De).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=C(this,De).get(r.queryHash),i=s==null?void 0:s.state.data,o=Iw(t,i);if(o!==void 0)return C(this,De).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Xe.batch(()=>C(this,De).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=C(this,De).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=C(this,De);Xe.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=C(this,De);return Xe.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Xe.batch(()=>C(this,De).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(kt).catch(kt)}invalidateQueries(e,t={}){return Xe.batch(()=>(C(this,De).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Xe.batch(()=>C(this,De).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(kt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(kt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=C(this,De).build(this,t);return n.isStaleByTime(Nr(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(kt).catch(kt)}fetchInfiniteQuery(e){return e.behavior=Qh(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(kt).catch(kt)}ensureInfiniteQueryData(e){return e.behavior=Qh(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ql.isOnline()?C(this,hr).resumePausedMutations():Promise.resolve()}getQueryCache(){return C(this,De)}getMutationCache(){return C(this,hr)}getDefaultOptions(){return C(this,mr)}setDefaultOptions(e){V(this,mr,e)}setQueryDefaults(e,t){C(this,Gs).set(us(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...C(this,Gs).values()],n={};return t.forEach(r=>{ro(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){C(this,Ys).set(us(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...C(this,Ys).values()],n={};return t.forEach(r=>{ro(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...C(this,mr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Wd(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Hd&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...C(this,mr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){C(this,De).clear(),C(this,hr).clear()}},De=new WeakMap,hr=new WeakMap,mr=new WeakMap,Gs=new WeakMap,Ys=new WeakMap,pr=new WeakMap,Xs=new WeakMap,Js=new WeakMap,lp),Tv=d.createContext(void 0),_r=e=>{const t=d.useContext(Tv);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},t1=({client:e,children:t})=>(d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(Tv.Provider,{value:e,children:t})),_v=d.createContext(!1),n1=()=>d.useContext(_v);_v.Provider;function r1(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var s1=d.createContext(r1()),i1=()=>d.useContext(s1),o1=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},l1=e=>{d.useEffect(()=>{e.clearReset()},[e])},a1=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||bv(n,[e.error,r])),u1=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},c1=(e,t)=>e.isLoading&&e.isFetching&&!t,d1=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,qh=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function f1(e,t,n){var h,v,S,k,E;const r=n1(),s=i1(),i=_r(),o=i.defaultQueryOptions(e);(v=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||v.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",u1(o),o1(o,s),l1(s);const l=!i.getQueryCache().get(o.queryHash),[u]=d.useState(()=>new t(i,o)),c=u.getOptimisticResult(o),f=!r&&e.subscribed!==!1;if(d.useSyncExternalStore(d.useCallback(R=>{const y=f?u.subscribe(Xe.batchCalls(R)):kt;return u.updateResult(),y},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),d.useEffect(()=>{u.setOptions(o)},[o,u]),d1(o,c))throw qh(o,u,s);if(a1({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((k=(S=i.getDefaultOptions().queries)==null?void 0:S._experimental_afterQuery)==null||k.call(S,o,c),o.experimental_prefetchInRender&&!as&&c1(c,r)){const R=l?qh(o,u,s):(E=i.getQueryCache().get(o.queryHash))==null?void 0:E.promise;R==null||R.catch(kt).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?c:u.trackResult(c)}function ga(e,t){return f1(e,Qw)}function h1(e,t){const n=_r(),[r]=d.useState(()=>new Jw(n,e));d.useEffect(()=>{r.setOptions(e)},[r,e]);const s=d.useSyncExternalStore(d.useCallback(o=>r.subscribe(Xe.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=d.useCallback((o,l)=>{r.mutate(o,l).catch(kt)},[r]);if(s.error&&bv(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function Gh(e){return e.length>0&&"options"in e[0]}function Lc({value:e,onChange:t,options:n,placeholder:r="Select...",trigger:s,triggerClassName:i="",panelClassName:o="",align:l="left",width:u="auto",showChevron:c=!0,title:f,disabled:h=!1,"aria-label":v}){var b;const[S,k]=d.useState(!1),E=d.useRef(null),R=d.useRef(null),m=d.useCallback(()=>{const T=N=>{const P=N.find(U=>U.value===e);return P?P.label:null};if(Gh(n))for(const N of n){const P=T(N.options);if(P)return P}else{const N=T(n);if(N)return N}return r},[e,n,r])();d.useEffect(()=>{if(!S)return;const T=P=>{E.current&&!E.current.contains(P.target)&&k(!1)},N=P=>{var U;P.key==="Escape"&&(k(!1),(U=R.current)==null||U.focus())};return window.addEventListener("click",T),window.addEventListener("keydown",N),()=>{window.removeEventListener("click",T),window.removeEventListener("keydown",N)}},[S]);const g=T=>{var N;t(T),k(!1),(N=R.current)==null||N.focus()},p=T=>T.map(N=>a.jsxs("button",{className:"dropdown-item","data-active":N.value===e,disabled:N.disabled,onClick:()=>!N.disabled&&g(N.value),role:"menuitem",children:[N.icon&&a.jsx("span",{className:"shrink-0",children:N.icon}),a.jsx("span",{className:"flex-1 truncate",children:N.label}),N.value===e&&a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 text-accent",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})]},N.value)),w=((b=R.current)==null?void 0:b.offsetWidth)??0,M=u==="trigger"?w:u==="auto"?void 0:u,L={...M?{width:M,minWidth:M}:{},...l==="right"?{right:0}:{left:0}};return a.jsxs("div",{ref:E,className:"relative",children:[s?a.jsx("div",{onClick:()=>!h&&k(T=>!T),children:s}):a.jsxs("button",{ref:R,type:"button",className:`dropdown-trigger ${i}`,onClick:()=>k(T=>!T),disabled:h,title:f,"aria-label":v,"aria-haspopup":"listbox","aria-expanded":S,children:[a.jsx("span",{className:"truncate",children:m}),c&&a.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`shrink-0 opacity-60 transition-transform ${S?"rotate-180":""}`,children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),S&&a.jsx("div",{className:`dropdown-panel ${o}`,style:L,role:"listbox","aria-label":v,children:Gh(n)?n.map((T,N)=>a.jsxs("div",{children:[T.label&&a.jsx("div",{className:"dropdown-label",children:T.label}),p(T.options),N<n.length-1&&a.jsx("div",{className:"dropdown-divider"})]},T.label||N)):p(n)})]})}const m1={offline:"sync-dot-offline",unstable:"sync-dot-unstable",recent:"sync-dot-recent",editing:"sync-dot-editing",live:"sync-dot-live"};function p1({state:e,presence:t,syncLabel:n,connectionLabel:r,lastEditedLabel:s,hasEdits:i,localTypingActive:o,recentTouches:l,isNarrow:u}){const[c,f]=d.useState(!1),[h,v]=d.useState(null),S=d.useRef(null),k=d.useRef(null),E=d.useRef(null),R=t?`${t.viewing} viewing  ${t.editing} editing`:"- viewing  - editing",y=t?String(t.viewing):"-",m=d.useCallback(()=>{E.current&&(window.clearTimeout(E.current),E.current=null)},[]),g=d.useCallback((w,M)=>{var L;M&&((L=navigator.clipboard)==null||L.writeText(M).then(()=>{v(w),m(),E.current=window.setTimeout(()=>{v(b=>b===w?null:b)},1e3)}).catch(()=>{}))},[m]),p=d.useCallback(()=>{f(!1),window.requestAnimationFrame(()=>{var w;return(w=k.current)==null?void 0:w.focus()})},[]);return d.useEffect(()=>{if(!c)return;const w=L=>{!S.current||S.current.contains(L.target)||p()},M=L=>{L.key==="Escape"&&p()};return window.addEventListener("mousedown",w),window.addEventListener("keydown",M),()=>{window.removeEventListener("mousedown",w),window.removeEventListener("keydown",M)}},[c,p]),d.useEffect(()=>()=>{m()},[m]),a.jsxs("div",{ref:S,className:"sync-indicator",children:[a.jsxs("button",{ref:k,type:"button",className:"sync-indicator-button",onClick:()=>c?p():f(!0),"aria-haspopup":"dialog","aria-expanded":c,"aria-label":"Sync status",title:R,children:[a.jsx("span",{className:`sync-indicator-dot ${m1[e]}`,"aria-hidden":"true"}),!u&&a.jsx("span",{className:"sync-indicator-count tabular-nums",children:y}),!u&&o&&a.jsx("span",{className:"sync-indicator-local",children:"typing"})]}),c&&a.jsxs("div",{role:"dialog","aria-label":"Sync status",className:"sync-indicator-card select-text",children:[a.jsx("div",{className:"sync-indicator-line sync-indicator-primary",children:n}),a.jsx("div",{className:"sync-indicator-line",children:r}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:R}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:i?`Last edited: ${s}`:"No edits yet."}),o&&a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:"Local typing in progress (saved on blur)."}),a.jsxs("div",{className:"sync-indicator-section",children:[a.jsx("div",{className:"sync-indicator-section-title",children:"Recently touched files"}),l.length>0?a.jsx("div",{className:"sync-indicator-list",children:l.map(w=>a.jsxs("div",{className:"sync-indicator-item",children:[a.jsx("button",{type:"button",className:"sync-indicator-item-name",title:`Copy filename: ${w.label}`,onClick:()=>g(w.path,w.label),children:w.label}),a.jsx("span",{className:"sync-indicator-item-time tabular-nums",children:h===w.path?"Copied":w.timeLabel})]},w.path))}):a.jsx("div",{className:"sync-indicator-empty",children:"No recent touches."})]})]})]})}function g1({rootRef:e,onSearch:t,viewerActive:n,onBack:r,zoomPercent:s,onZoomPercentChange:i,currentLabel:o,itemCount:l,totalCount:u,sortSpec:c,metricKeys:f,onSortChange:h,sortDisabled:v=!1,filterCount:S,onOpenFilters:k,starFilters:E,onToggleStar:R,onClearStars:y,onClearFilters:m,starCounts:g,viewMode:p,onViewMode:w,gridItemSize:M,onGridItemSize:L,leftOpen:b,rightOpen:T,onToggleLeft:N,onToggleRight:P,onPrevImage:U,onNextImage:D,canPrevImage:oe,canNextImage:ue,searchDisabled:_=!1,searchPlaceholder:fe,syncIndicator:A}){const[H,G]=d.useState(!1),[J,ce]=d.useState(!1),[Re,Q]=d.useState(!1),K=d.useRef(null),Z=d.useRef(null);d.useEffect(()=>{if(!H)return;const B=X=>{K.current&&!K.current.contains(X.target)&&G(!1)};return window.addEventListener("click",B),()=>window.removeEventListener("click",B)},[H]),d.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const B=window.matchMedia("(max-width: 900px)"),X=de=>ce(de.matches);return ce(B.matches),"addEventListener"in B?(B.addEventListener("change",X),()=>B.removeEventListener("change",X)):(B.addListener(X),()=>B.removeListener(X))},[]),d.useEffect(()=>{if(_){Q(!1);return}if(!J||n){Q(!1);return}if(!Re)return;const B=window.requestAnimationFrame(()=>{var X;return(X=Z.current)==null?void 0:X.focus()});return()=>window.cancelAnimationFrame(B)},[J,Re,n,_]);const te=c??{kind:"builtin",key:"added",dir:"desc"},Ee=te.dir,ze=te.kind==="builtin"&&te.key==="random",qe=n||v,Ue=f!=null&&f.length?f.map(B=>({value:`metric:${B}`,label:B,disabled:v})):[],ct=[{value:"builtin:added",label:"Date added",disabled:v},{value:"builtin:name",label:"Filename",disabled:v},{value:"builtin:random",label:"Random",disabled:v},...Ue],yn=[{label:"Layout",options:[{value:"layout:grid",label:"Grid"},{value:"layout:masonry",label:"Masonry"}]},{label:"Sort by",options:ct}],dt=te.kind==="metric"?`metric:${te.key}`:`builtin:${te.key}`,Zt=[{label:"Sort by",options:ct}],Bt=J&&!n,en=B=>{if(B.startsWith("layout:")){const X=B==="layout:masonry"?"adaptive":"grid";w==null||w(X)}else{if(v)return;h==null||h(Yh(B,te))}},It=()=>{!h||v||h(ze?te:{...te,dir:Ee==="desc"?"asc":"desc"})},Be=E??[],nt=Be.length,F=y1(S,nt),ne=v1(l,u),ie=o||"Root";return a.jsxs("div",{ref:e,className:"toolbar-shell fixed top-0 left-0 right-0 h-12 grid grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] items-center px-3 gap-3 bg-panel border-b border-border z-[var(--z-toolbar)] col-span-full row-start-1 select-none",children:[a.jsxs("div",{className:"toolbar-left flex items-center gap-4 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsxs("div",{className:"flex flex-col min-w-0 leading-tight",children:[a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted",children:"Scope"}),a.jsx("span",{className:"text-sm font-medium text-text truncate",title:ie,children:ie})]}),ne&&a.jsx("span",{className:"toolbar-count text-xs text-muted whitespace-nowrap tabular-nums",children:ne})]}),a.jsxs("div",{className:"toolbar-sort flex items-center gap-2",children:[a.jsxs("div",{className:`toolbar-sort-controls flex items-center gap-2 ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsx(Lc,{value:dt,onChange:en,options:yn,title:"Sort and layout options","aria-label":"Sort and layout",triggerClassName:"min-w-[110px]"}),a.jsx("button",{className:"toolbar-sort-dir btn btn-icon",onClick:It,title:v?"Sorting disabled":ze?"Shuffle":`Sort ${Ee==="desc"?"descending":"ascending"}`,"aria-label":ze?"Shuffle":"Toggle sort direction","aria-disabled":qe,disabled:qe,children:ze?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Ee==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]}),a.jsxs("div",{ref:K,className:`toolbar-filter relative ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsxs("button",{className:`btn ${F>0?"btn-active":""}`,onClick:()=>G(B=>!B),"aria-haspopup":"dialog","aria-expanded":H,title:"Filters","aria-disabled":n,children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),a.jsx("span",{className:"toolbar-filters-label",children:"Filters"}),F>0&&a.jsx("span",{className:"toolbar-filters-count px-1.5 py-0.5 text-[11px] rounded-full bg-accent-strong text-text",children:F})]}),H&&a.jsxs("div",{role:"dialog","aria-label":"Filters",className:"dropdown-panel w-[240px]",style:{top:"38px",left:0},children:[a.jsx("div",{className:"dropdown-label",children:"Rating"}),a.jsxs("div",{className:"px-1",children:[[5,4,3,2,1].map(B=>{const X=Be.includes(B),de=(g==null?void 0:g[String(B)])??0;return a.jsxs("button",{onClick:()=>R==null?void 0:R(B),className:`dropdown-item justify-between ${X?"bg-accent-muted":""}`,children:[a.jsxs("span",{className:X?"text-star-active":"text-text",children:["".repeat(B),"".repeat(5-B)]}),a.jsx("span",{className:"text-xs text-muted",children:de})]},B)}),a.jsxs("button",{onClick:()=>R==null?void 0:R(0),className:`dropdown-item justify-between ${Be.includes(0)?"bg-accent-muted":""}`,children:[a.jsx("span",{className:"text-text",children:"Unrated"}),a.jsx("span",{className:"text-xs text-muted",children:(g==null?void 0:g["0"])??0})]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("div",{className:"dropdown-label",children:"Metrics"}),a.jsxs("button",{className:"dropdown-item",onClick:()=>{G(!1),k==null||k()},children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]}),a.jsx("span",{children:"Open Metrics Panel"}),(S||0)>0&&a.jsxs("span",{className:"ml-auto text-xs text-muted",children:[S," active"]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("button",{className:"dropdown-item text-muted hover:text-text",onClick:()=>{m?m():y==null||y()},disabled:F===0,children:"Clear all filters"})]})]}),n&&a.jsxs("button",{className:"btn btn-sm",onClick:r,title:"Back to grid",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})]})]}),a.jsx("div",{className:"toolbar-center flex items-center gap-3 justify-center min-w-0",children:n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"range",min:5,max:800,step:1,value:Math.round(Math.max(5,Math.min(800,s??100))),onChange:B=>i==null?void 0:i(Number(B.target.value)),className:"zoom-slider","aria-label":"Zoom level"}),a.jsxs("span",{className:"text-xs text-muted min-w-[42px] text-right",children:[Math.round(s??100),"%"]})]}):L&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted",children:"Size"}),a.jsx("input",{type:"range",min:80,max:500,step:10,value:M??220,onChange:B=>L(Number(B.target.value)),className:"w-28 h-1.5 bg-border rounded-full appearance-none cursor-pointer hover:bg-hover transition-colors [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-text [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-text [&::-moz-range-thumb]:border-0","aria-label":"Thumbnail size"})]})}),a.jsxs("div",{className:"toolbar-right flex items-center gap-2 justify-end",children:[a.jsxs("div",{className:`toolbar-nav flex items-center gap-1 mr-1 ${n?"":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,children:[a.jsx("button",{className:`btn btn-icon ${oe?"":"opacity-40 cursor-not-allowed"}`,title:"Previous image (A / )",onClick:()=>oe&&(U==null?void 0:U()),"aria-label":"Previous image","aria-disabled":!oe,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("button",{className:`btn btn-icon ${ue?"":"opacity-40 cursor-not-allowed"}`,title:"Next image (D / )",onClick:()=>ue&&(D==null?void 0:D()),"aria-label":"Next image","aria-disabled":!ue,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 6l6 6-6 6"})})})]}),a.jsxs("div",{className:"toolbar-panels flex items-center gap-1",children:[a.jsx("button",{className:`btn btn-icon ${b?"":"opacity-50"}`,title:b?"Hide left panel (Ctrl+B)":"Show left panel (Ctrl+B)",onClick:N,"aria-pressed":b,"aria-label":"Toggle left panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"11",y:"5",width:"10",height:"14",rx:"1.5"})]})}),a.jsx("button",{className:`btn btn-icon ${T?"":"opacity-50"}`,title:T?"Hide right panel (Ctrl+Alt+B)":"Show right panel (Ctrl+Alt+B)",onClick:P,"aria-pressed":T,"aria-label":"Toggle right panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"15",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"3",y:"5",width:"10",height:"14",rx:"1.5"})]})})]}),A&&a.jsx(p1,{...A,isNarrow:J}),!n&&J&&a.jsx("button",{className:`btn btn-icon ${Re?"btn-active":""} ${_?"opacity-50 cursor-not-allowed":""}`,"aria-label":Re?"Close search":"Open search",title:_?"Search disabled":Re?"Close search":"Search",onClick:()=>!_&&Q(B=>!B),disabled:_,children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("circle",{cx:"11",cy:"11",r:"7"}),a.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),!n&&!J?a.jsx("div",{className:"toolbar-search w-[240px]",children:a.jsx("input",{ref:Z,"aria-label":"Search filename, tags, notes",placeholder:_?fe??"Search disabled":"Search...",onChange:B=>t(B.target.value),className:"toolbar-search-input input w-full focus:w-full transition-all duration-200 select-text",disabled:_})}):n?a.jsx("div",{className:"toolbar-search w-[240px]","aria-hidden":"true"}):null]}),!n&&J&&Re&&!_&&a.jsx("div",{className:"toolbar-search-row",children:a.jsx("input",{ref:Z,"aria-label":"Search filename, tags, notes",placeholder:fe??"Search...",onChange:B=>t(B.target.value),className:"toolbar-search-input-mobile input input-lg w-full select-text"})}),Bt&&a.jsx("div",{className:"mobile-drawer",children:a.jsxs("div",{className:"mobile-drawer-row",children:[a.jsxs("div",{className:"mobile-pill-group",children:[a.jsx("button",{className:`mobile-pill ${p==="grid"?"is-active":""}`,onClick:()=>w==null?void 0:w("grid"),"aria-pressed":p==="grid",children:"Grid"}),a.jsx("button",{className:`mobile-pill ${p==="adaptive"?"is-active":""}`,onClick:()=>w==null?void 0:w("adaptive"),"aria-pressed":p==="adaptive",children:"Masonry"})]}),a.jsx(Lc,{value:dt,onChange:B=>h==null?void 0:h(Yh(B,te)),options:Zt,"aria-label":"Sort",triggerClassName:"mobile-pill mobile-pill-dropdown",panelClassName:"mobile-drawer-panel",disabled:v}),a.jsx("button",{className:`mobile-pill mobile-pill-icon ${qe?"opacity-50 cursor-not-allowed":""}`,onClick:It,title:v?"Sorting disabled":ze?"Shuffle":`Sort ${Ee==="desc"?"descending":"ascending"}`,"aria-label":ze?"Shuffle":"Toggle sort direction","aria-disabled":qe,disabled:qe,children:ze?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Ee==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]})})]})}function v1(e,t){if(typeof e!="number")return null;const n=e.toLocaleString();if(typeof t!="number")return`${n} items`;const r=t.toLocaleString();return t===e?`${n} items`:`${n} / ${r} items`}function y1(e,t){return typeof e=="number"?e:t>0?1:0}function Yh(e,t){if(e.startsWith("metric:")){const n=e.slice(7);return n?{kind:"metric",key:n,dir:t.dir}:t}if(e.startsWith("builtin:")){const n=e.slice(8);if(n==="name"||n==="added"||n==="random")return{kind:"builtin",key:n,dir:t.dir}}return t}class gn extends Error{constructor(n,r,s,i){super(r);Pn(this,"status");Pn(this,"url");Pn(this,"body");this.name="FetchError",this.status=n,this.url=s,this.body=i}}function x1(e){const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function Pv(e,t,n){if(t&&typeof t=="object"){const r=t,s=typeof r.error=="string"?r.error:null,i=typeof r.message=="string"?r.message:null;if(s&&i)return`${s}: ${i}`;if(s)return s;if(i)return i}return typeof t=="string"&&t?t:`HTTP ${e} for ${n}`}function ot(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{let u=null;const c=await l.text().catch(()=>"");if(c)if((l.headers.get("content-type")||"").includes("application/json")||x1(c))try{u=JSON.parse(c)}catch{u=c}else u=c;if(!l.ok)throw new gn(l.status,Pv(l.status,u,e),e,u);return u}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}function Xo(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{if(!l.ok){const u=await l.text().catch(()=>""),c=u||null;throw new gn(l.status,Pv(l.status,c,e),e,c)}return l.blob()}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}class Iv{constructor(t){Pn(this,"store",new Map);Pn(this,"inflight",new Map);Pn(this,"totalBytes",0);this.maxBytes=t}getMaxBytes(){return this.maxBytes}getTotalBytes(){return this.totalBytes}getSize(){return this.store.size}has(t){return this.store.has(t)}isInflight(t){return this.inflight.has(t)}get(t){const n=this.store.get(t);if(n)return this.store.delete(t),this.store.set(t,n),n.blob}evictIfNeeded(t){for(;this.totalBytes+t>this.maxBytes&&this.store.size>0;){const n=this.store.keys().next().value;if(n==null)break;const r=this.store.get(n);r&&(this.totalBytes-=r.size),this.store.delete(n)}}set(t,n){const r=n.size||0;if(!(r>this.maxBytes)){if(this.store.has(t)){const s=this.store.get(t);this.totalBytes-=s.size,this.store.delete(t)}this.evictIfNeeded(r),this.store.set(t,{blob:n,size:r}),this.totalBytes+=r}}async getOrFetch(t,n){const r=this.get(t);if(r)return r;const s=this.inflight.get(t);if(s)return s.promise;const i=n(),o=typeof i=="object"&&"promise"in i,l=o?i.promise:i,u=o?i.abort:void 0,c=l.then(f=>(this.set(t,f),f)).finally(()=>{this.inflight.delete(t)});return this.inflight.set(t,{promise:c,abort:u}),c}prefetch(t,n){if(this.store.has(t)||this.inflight.has(t))return;const r=n(),s=typeof r=="object"&&"promise"in r,i=s?r.promise:r,o=s?r.abort:void 0,l=i.then(u=>(this.set(t,u),u)).catch(()=>new Blob).finally(()=>{this.inflight.delete(t)});this.inflight.set(t,{promise:l,abort:o})}cancelPrefetch(t){const n=this.inflight.get(t);if(n!=null&&n.abort)try{n.abort()}catch{}this.inflight.delete(t)}clear(){for(const[t,n]of this.inflight)if(n.abort)try{n.abort()}catch{}this.inflight.clear(),this.store.clear(),this.totalBytes=0}evictPrefix(t){const n=(()=>{const s=t?`/${t.replace(/^\/+/,"")}`:"/";return s==="/"?"/":s.replace(/\/+$/,"")})(),r=s=>{const i=s.startsWith("/")?s.replace(/\/+$/,""):`/${s.replace(/\/+$/,"")}`;return n==="/"?!0:i===n||i.startsWith(`${n}/`)};for(const[s,i]of Array.from(this.store.entries()))r(s)&&(this.totalBytes-=i.size,this.store.delete(s));for(const[s,i]of Array.from(this.inflight.entries()))if(r(s)){if(i.abort)try{i.abort()}catch{}this.inflight.delete(s)}this.totalBytes<0&&(this.totalBytes=0)}}const xs=new Iv(60*1024*1024),Tc=new Iv(20*1024*1024),hu={};function w1(){const e=hu==null?void 0:hu.VITE_API_BASE,t=typeof window<"u",n=t?window.location.origin:"http://localhost",r=t?window.location.hostname:"localhost",s=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\]|.+\.localhost)$/i.test(r);if(!e)return"";let i;try{i=new URL(e,n)}catch{return""}const o=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\])$/i.test(i.hostname);return s?i.origin:o?"":i.origin}const Ae=w1();const S1=40*1024*1024;function C1(e){return e==="viewer"||e==="compare"}function Xh(e){return`${Ae}/thumb?path=${encodeURIComponent(e)}`}function Jh(e){return`${Ae}/file?path=${encodeURIComponent(e)}`}const mu="lenslet.client_id",Zh="lenslet.client_id.session",Fv="lenslet.last_event_id",k1=1e3,b1=3e4,E1=5;let _c=null,gl=null,em=0,Ds=null,As=0,va=!0,Gl=!1;function Ov(){return typeof window<"u"&&typeof EventSource<"u"}function tm(e,t){if(!e)return null;try{return e.getItem(t)}catch{return null}}function nm(e,t,n){if(e)try{e.setItem(t,n)}catch{}}function N1(e,t){if(e)try{e.removeItem(t)}catch{}}function j1(){if(typeof navigator>"u")return"server";const e=navigator.userAgent||"",t=navigator.language||"",n=navigator.platform||"",r=typeof Intl<"u"&&Intl.DateTimeFormat().resolvedOptions().timeZone||"",s=typeof screen<"u"?`${screen.width}x${screen.height}x${screen.colorDepth}`:"";return[e,t,n,r,s].join("|")}function M1(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=t*16777619>>>0;return t.toString(16).padStart(8,"0")}function rm(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`}function Ci(e){return _c=e,e}function oi(){if(_c)return _c;const e=typeof window<"u"?window.localStorage:null,t=typeof window<"u"?window.sessionStorage:null,n=tm(t,Zh);if(n)return Ci(n);const r=tm(e,mu);if(t){const i=rm();return nm(t,Zh,i),r&&N1(e,mu),Ci(i)}if(r)return Ci(r);if(e){const i=rm();return nm(e,mu,i),Ci(i)}const s=`fp_${M1(j1())}_${Math.random().toString(36).slice(2,8)}`;return Ci(s)}function so(e="lenslet"){em+=1;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`nonce_${Math.random().toString(36).slice(2,10)}_${Date.now()}_${em}`;return`${e}:${oi()}:${t}`}function R1(){if(gl!=null)return gl;if(typeof window>"u")return null;try{const e=window.localStorage.getItem(Fv);if(!e)return null;const t=Number(e);return!Number.isFinite(t)||t<=0?null:(gl=t,t)}catch{return null}}function L1(e){if(!(!Number.isFinite(e)||e<=0)&&(gl=e,!(typeof window>"u")))try{window.localStorage.setItem(Fv,String(e))}catch{}}function T1(){if(typeof window>"u")return`${Ae}/events`;const e=new URL(`${Ae}/events`,window.location.origin),t=R1();return t!=null&&Number.isFinite(t)&&e.searchParams.set("last_event_id",String(t)),e.toString()}function _1(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}let un=null,zv="idle";const Pc=new Set,Ic=new Set,Fc=new Set;function $s(e){zv=e;for(const t of Ic)t(e)}function Kd(e){if(Gl!==e){Gl=e;for(const t of Fc)t(e)}}function qd(){Ds!=null&&(window.clearTimeout(Ds),Ds=null)}function P1(){As=0,qd()}function I1(){if(!va||Ds!=null)return;As+=1;const e=Math.min(k1*Math.pow(2,As-1),b1);As>=E1?($s("offline"),Kd(!0)):$s("reconnecting"),Ds=window.setTimeout(()=>{Ds=null,Dv()},e)}function Dv(){if(!va||!Ov()||(un&&un.readyState===EventSource.CLOSED&&(un.close(),un=null),un))return;As>0?$s("reconnecting"):$s("connecting");const e=new EventSource(T1());un=e;const t=n=>r=>{const s=_1(r.data);if(!s)return;const i=r.lastEventId?Number(r.lastEventId):null,o=i!=null&&Number.isFinite(i)?i:null;o!=null&&L1(o);for(const l of Pc)l({type:n,id:o,data:s})};e.addEventListener("item-updated",t("item-updated")),e.addEventListener("metrics-updated",t("metrics-updated")),e.addEventListener("presence",t("presence")),e.onopen=()=>{P1(),Kd(!1),$s("live")},e.onerror=()=>{un===e&&(e.close(),un=null,I1())}}function F1(){va=!0,Ov()&&(qd(),Dv())}function O1(){va=!1,qd(),As=0,un&&(un.close(),un=null),Kd(!1),$s("offline")}function z1(e){return Pc.add(e),()=>{Pc.delete(e)}}function D1(e){return Ic.add(e),e(zv),()=>{Ic.delete(e)}}function A1(e){return Fc.add(e),e(Gl),()=>{Fc.delete(e)}}function $1(){return Gl}function U1(e,t){const n=JSON.stringify(t),r=`${Ae}${e}`;if(typeof navigator<"u"&&typeof navigator.sendBeacon=="function")try{if(navigator.sendBeacon(r,new Blob([n],{type:"application/json"})))return!0}catch{}if(typeof fetch!="function")return!1;try{return fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:n,keepalive:!0}),!0}catch{return!1}}function B1(e,t,n){return U1("/presence/leave",{gallery_id:e,lease_id:t,client_id:n??oi()})}function Jo(e){return e??oi()}function Zo(e,t){return ot(`${Ae}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).promise}function W1(e,t){const n=new URLSearchParams({path:e});return(t==null?void 0:t.page)!=null&&n.set("page",String(t.page)),(t==null?void 0:t.pageSize)!=null&&n.set("page_size",String(t.pageSize)),t!=null&&t.recursive&&n.set("recursive","1"),t!=null&&t.legacyRecursive&&n.set("legacy_recursive","1"),n.toString()}const xe={getFolder:(e,t)=>ot(`${Ae}/folders?${W1(e,t)}`).promise,search:(e,t)=>{const n=new URLSearchParams;return e&&n.set("q",e),t&&n.set("path",t),ot(`${Ae}/search?${n}`).promise},getEmbeddings:()=>ot(`${Ae}/embeddings`).promise,searchEmbeddings:e=>ot(`${Ae}/embeddings/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise,refreshFolder:e=>{const t=new URLSearchParams({path:e});return ot(`${Ae}/refresh?${t}`,{method:"POST"}).promise},getSidecar:e=>ot(`${Ae}/item?path=${encodeURIComponent(e)}`).promise,patchSidecar:(e,t,n)=>{const s={"Content-Type":"application/json","Idempotency-Key":(n==null?void 0:n.idempotencyKey)??so("patch"),"x-client-id":oi(),"x-updated-by":"web"};return(n==null?void 0:n.ifMatch)!=null&&(s["If-Match"]=String(n.ifMatch)),ot(`${Ae}/item?path=${encodeURIComponent(e)}`,{method:"PATCH",headers:s,body:JSON.stringify(t)}).promise},getMetadata:e=>ot(`${Ae}/metadata?path=${encodeURIComponent(e)}`).promise,putSidecar:(e,t)=>ot(`${Ae}/item?path=${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-client-id":oi(),"x-updated-by":"web"},body:JSON.stringify(t)}).promise,getHealth:()=>ot(`${Ae}/health`).promise,joinPresence:(e,t,n)=>Zo("/presence/join",{gallery_id:e,client_id:Jo(n),lease_id:t}),movePresence:(e,t,n,r)=>Zo("/presence/move",{from_gallery_id:e,to_gallery_id:t,client_id:Jo(r),lease_id:n}),leavePresence:(e,t,n)=>Zo("/presence/leave",{gallery_id:e,client_id:Jo(n),lease_id:t}),postPresence:(e,t,n)=>Zo("/presence",{gallery_id:e,client_id:Jo(n),lease_id:t}),getThumb:e=>Tc.getOrFetch(e,()=>Xo(Xh(e))),prefetchThumb:e=>{Tc.prefetch(e,()=>Xo(Xh(e)))},getFile:e=>xs.getOrFetch(e,()=>Xo(Jh(e))),prefetchFile:async(e,t)=>{if(C1(t)&&!(xs.has(e)||xs.isInflight(e)))try{const n=await Xo(Jh(e),{headers:{"x-lenslet-prefetch":t}}).promise;n.size<=S1&&xs.set(e,n)}catch{}},cancelPrefetch:e=>{xs.cancelPrefetch(e)},uploadFile:async(e,t)=>{const n=new FormData;return n.append("dest",e),n.append("file",t),ot(`${Ae}/file`,{method:"POST",body:n,timeoutMs:6e4}).promise},moveFile:async(e,t)=>{const n=new FormData;return n.append("src",e),n.append("dest",t),ot(`${Ae}/move`,{method:"POST",body:n}).promise},deleteFiles:async e=>ot(`${Ae}/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:e})}).promise,exportIntent:async e=>{const t=new FormData;return t.append("path",e),ot(`${Ae}/export-intent`,{method:"POST",body:t}).promise},getViews:()=>ot(`${Ae}/views`).promise,saveViews:e=>ot(`${Ae}/views`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise};class H1{constructor(t=400){Pn(this,"cache",new Map);Pn(this,"maxSize");this.maxSize=t,typeof window<"u"&&window.addEventListener("beforeunload",()=>this.clear(),{once:!0})}get(t){const n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){for(this.cache.has(t)&&this.cache.delete(t);this.cache.size>=this.maxSize;){const r=this.cache.keys().next().value;if(r===void 0)break;const s=this.cache.get(r);if(this.cache.delete(r),s)try{URL.revokeObjectURL(s)}catch{}}this.cache.set(t,n)}clear(){for(const t of this.cache.values())try{URL.revokeObjectURL(t)}catch{}this.cache.clear()}}const pu=new H1(400);function V1({path:e,name:t,onClick:n,selected:r,highlighted:s,highlightKey:i,displayW:o,displayH:l,ioRoot:u,isScrolling:c,priority:f}){const h=d.useRef(null),[v,S]=d.useState(()=>pu.get(e)??null),[k,E]=d.useState(!1),[R,y]=d.useState(()=>!!v);d.useEffect(()=>{const g=h.current;if(!g)return;const p=new IntersectionObserver(w=>{for(const M of w)M.target===g&&E(M.isIntersecting||M.intersectionRatio>0)},{root:u??null,rootMargin:"200px 0px",threshold:.01});return p.observe(g),()=>{p.unobserve(g),p.disconnect()}},[u]),d.useEffect(()=>{if(v||!(k&&!c||f))return;let g=!0;return xe.getThumb(e).then(p=>{if(!g)return;const w=URL.createObjectURL(p);pu.set(e,w),S(w)}).catch(()=>{}),()=>{g=!1}},[e,v,k,c,f]),d.useEffect(()=>{var p;if(!v){y(!1);return}const g=(p=h.current)==null?void 0:p.querySelector("img");g&&g.complete&&g.naturalWidth>0?y(!0):y(!1)},[v]),d.useEffect(()=>{S(pu.get(e)??null)},[e]);const m=["absolute inset-0 relative bg-hover border border-border rounded-lg overflow-hidden select-none",r?"outline-2 outline-accent":"",s?"thumb-updated-ring":"","hover:outline hover:outline-1 hover:outline-accent"].filter(Boolean).join(" ");return a.jsx("div",{ref:h,"data-highlight-key":i??void 0,className:m,onClick:n,children:v?a.jsx("img",{className:`w-full h-full object-cover block pointer-events-none select-none opacity-0 transition-opacity duration-[160ms] ${R?"opacity-100":""}`,src:v,alt:t,loading:"lazy",decoding:"async",onLoad:()=>y(!0),width:o?Math.round(o):void 0,height:l?Math.round(l):void 0}):null})}function vs(e,t,n){let r=n.initialDeps??[],s,i=!0;function o(){var l,u,c;let f;n.key&&((l=n.debug)!=null&&l.call(n))&&(f=Date.now());const h=e();if(!(h.length!==r.length||h.some((k,E)=>r[E]!==k)))return s;r=h;let S;if(n.key&&((u=n.debug)!=null&&u.call(n))&&(S=Date.now()),s=t(...h),n.key&&((c=n.debug)!=null&&c.call(n))){const k=Math.round((Date.now()-f)*100)/100,E=Math.round((Date.now()-S)*100)/100,R=E/16,y=(m,g)=>{for(m=String(m);m.length<g;)m=" "+m;return m};console.info(`%c ${y(E,5)} /${y(k,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*R,120))}deg 100% 31%);`,n==null?void 0:n.key)}return n!=null&&n.onChange&&!(i&&n.skipInitialOnChange)&&n.onChange(s),i=!1,s}return o.updateDeps=l=>{r=l},o}function sm(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const Q1=(e,t)=>Math.abs(e-t)<1.01,K1=(e,t,n)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,s),n)}},im=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},q1=e=>e,G1=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},Y1=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const s=o=>{const{width:l,height:u}=o;t({width:Math.round(l),height:Math.round(u)})};if(s(im(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const u=o[0];if(u!=null&&u.borderBoxSize){const c=u.borderBoxSize[0];if(c){s({width:c.inlineSize,height:c.blockSize});return}}s(im(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},om={passive:!0},lm=typeof window>"u"?!0:"onscrollend"in window,X1=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&lm?()=>{}:K1(r,()=>{t(s,!1)},e.options.isScrollingResetDelay),o=f=>()=>{const{horizontal:h,isRtl:v}=e.options;s=h?n.scrollLeft*(v&&-1||1):n.scrollTop,i(),t(s,f)},l=o(!0),u=o(!1);u(),n.addEventListener("scroll",l,om);const c=e.options.useScrollendEvent&&lm;return c&&n.addEventListener("scrollend",u,om),()=>{n.removeEventListener("scroll",l),c&&n.removeEventListener("scrollend",u)}},J1=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},Z1=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const o=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class eS{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:q1,rangeExtractor:G1,onChange:()=>{},measureElement:J1,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=vs(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=n[o];if(s.has(l.lane))continue;const u=i.get(l.lane);if(u==null||l.end>u.end?i.set(l.lane,l):l.end<u.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=vs(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,s,i,o,l)=>(this.prevLanes!==void 0&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=vs(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l},u)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const v of this.laneAssignments.keys())v>=n&&this.laneAssignments.delete(v);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(v=>{this.itemSizeCache.set(v.key,v.size)}));const c=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const f=this.measurementsCache.slice(0,c),h=new Array(l).fill(void 0);for(let v=0;v<c;v++){const S=f[v];S&&(h[S.lane]=v)}for(let v=c;v<n;v++){const S=i(v),k=this.laneAssignments.get(v);let E,R;if(k!==void 0&&this.options.lanes>1){E=k;const p=h[E],w=p!==void 0?f[p]:void 0;R=w?w.end+this.options.gap:r+s}else{const p=this.options.lanes===1?f[v-1]:this.getFurthestMeasurement(f,v);R=p?p.end+this.options.gap:r+s,E=p?p.lane:v%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(v,E)}const y=u.get(S),m=typeof y=="number"?y:this.options.estimateSize(v),g=R+m;f[v]={index:v,start:R,size:m,end:g,key:S,lane:E},h[E]=v}return this.measurementsCache=f,f},{key:!1,debug:()=>this.options.debug}),this.calculateRange=vs(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?tS({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=vs(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,o)=>i===null||o===null?[]:n({startIndex:i,endIndex:o,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=vs(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,o=n.length;i<o;i++){const l=n[i],u=r[l];s.push(u)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return sm(r[Av(0,r.length-1,s=>sm(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(s.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const o=10,l=c=>{if(!this.targetWindow)return;const f=this.getOffsetForIndex(n,c);if(!f){console.warn("Failed to get offset for index:",n);return}const[h,v]=f;this._scrollToOffset(h,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const S=this.getScrollOffset(),k=this.getOffsetForIndex(n,v);if(!k){console.warn("Failed to get offset for index:",n);return}Q1(k[0],S)||u(v)})},u=c=>{this.targetWindow&&(i++,i<o?this.targetWindow.requestAnimationFrame(()=>l(c)):console.warn(`Failed to scroll to index ${n} after ${o} attempts.`))};l(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}s=Math.max(...i.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const Av=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function tS({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const s=e.length-1,i=u=>e[u].start;if(e.length<=r)return{startIndex:0,endIndex:s};let o=Av(0,s,i,n),l=o;if(r===1)for(;l<s&&e[l].end<n+t;)l++;else if(r>1){const u=Array(r).fill(0);for(;l<s&&u.some(f=>f<n+t);){const f=e[l];u[f.lane]=f.end,l++}const c=Array(r).fill(n+t);for(;o>=0&&c.some(f=>f>=n);){const f=e[o];c[f.lane]=f.start,o--}o=Math.max(0,o-o%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const am=typeof document<"u"?d.useLayoutEffect:d.useEffect;function nS(e){const t=d.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var o;i?Bd.flushSync(t):t(),(o=e.onChange)==null||o.call(e,s,i)}},[r]=d.useState(()=>new eS(n));return r.setOptions(n),am(()=>r._didMount(),[]),am(()=>r._willUpdate()),r}function rS(e){return nS({observeElementRect:Y1,observeElementOffset:X1,scrollToFn:Z1,...e})}function sS({containerW:e,gap:t,targetCell:n,aspect:r,captionH:s}){const i=Math.max(1,Math.floor((e+t)/(n+t))),o=(e-t*(i-1))/i,l=o*r.h/r.w,u=l+s+t;return{columns:i,cellW:o,mediaH:l,rowH:u}}const iS=1.333;function oS({items:e,containerWidth:t,targetHeight:n,gap:r,captionH:s}){if(t<=0)return[];const i=[];let o=[],l=0;const u=(c,f)=>({index:i.length,height:f+s+r,imageH:f,items:c.map(h=>({item:h.item,displayW:h.aspect*f,displayH:f,originalIndex:h.originalIndex}))});for(let c=0;c<e.length;c++){const f=e[c],h=f.w>0&&f.h>0?f.w/f.h:iS;o.push({item:f,aspect:h,originalIndex:c}),l+=h;const v=(o.length-1)*r;if(l*n+v>=t){const k=(t-v)/l;i.push(u(o,k)),o=[],l=0}}return o.length>0&&i.push(u(o,n)),i}function lS(e,t,n){return{mode:"adaptive",rows:oS({items:t,containerWidth:e,targetHeight:n.targetCell,gap:n.gap,captionH:n.captionH})}}function aS(e,t,n){const{columns:r,cellW:s,mediaH:i,rowH:o}=sS({containerW:e,gap:n.gap,targetCell:n.targetCell,aspect:n.aspect,captionH:n.captionH}),l=Math.ceil(t.length/Math.max(1,r));return{mode:"grid",columns:r,cellW:s,mediaH:i,rowH:o,rowCount:l}}function uS(e,t,n){const[r,s]=d.useState(0);d.useLayoutEffect(()=>{const u=e.current;if(!u)return;const c=()=>{const h=getComputedStyle(u),v=u.clientWidth-parseFloat(h.paddingLeft)-parseFloat(h.paddingRight);s(v)},f=new ResizeObserver(c);return f.observe(u),c(),()=>f.disconnect()},[]);const i=d.useMemo(()=>n.viewMode==="adaptive"?lS(r,t,n):aS(r,t,n),[r,t,n.viewMode,n.gap,n.targetCell,n.aspect.w,n.aspect.h,n.captionH]),o=rS({count:i.mode==="adaptive"?i.rows.length:i.rowCount,getScrollElement:()=>e.current,estimateSize:u=>i.mode==="adaptive"?i.rows[u].height:i.rowH,overscan:8}),l=o.getVirtualItems();return d.useEffect(()=>{o.measure()},[i,o]),{width:r,layout:i,rowVirtualizer:o,virtualRows:l}}function cS(e,t,n,r){if(!e.length)return null;const s=n?e.findIndex(l=>l.path===n):0,i=Math.max(1,t);let o=s;if(r.key==="ArrowRight"||r.key==="d")o=Math.min(e.length-1,s+1);else if(r.key==="ArrowLeft"||r.key==="a")o=Math.max(0,s-1);else if(r.key==="ArrowDown"||r.key==="s")o=Math.min(e.length-1,s+i);else if(r.key==="ArrowUp"||r.key==="w")o=Math.max(0,s-i);else return r.key==="Enter"&&n?"open":null;return o}function dS(e,t,n){const r=[];for(const s of e){if(t.mode==="adaptive"){const l=t.rows[s.index];if(!l)continue;for(const u of l.items)r.push(u.item.path);continue}const i=s.index*t.columns,o=n.slice(i,i+t.columns);for(const l of o)r.push(l.path)}return Array.from(new Set(r))}const In=12,fS=44,hS={w:4,h:3},mS=350,pS=120;function gS(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function vS({items:e,selected:t,restoreToSelectionToken:n,onSelectionChange:r,onOpenViewer:s,onContextMenuItem:i,highlight:o,recentlyUpdated:l,onVisiblePathsChange:u,suppressSelectionHighlight:c=!1,viewMode:f="grid",targetCellSize:h=220,scrollRef:v,hideScrollbar:S=!1}){const[k,E]=d.useState(null),[R,y]=d.useState(null),[m,g]=d.useState(!1),[p,w]=d.useState(null),[M,L]=d.useState(null),b=d.useRef(null),T=d.useRef(null),N=d.useRef(null),P=v??N,U=d.useRef(null),D=d.useRef(new Set),oe=h,{width:ue,layout:_,rowVirtualizer:fe,virtualRows:A}=uS(P,e,{gap:In,targetCell:oe,aspect:hS,captionH:fS,viewMode:f}),H=d.useMemo(()=>{const F=new Map;for(let ne=0;ne<e.length;ne++)F.set(e[ne].path,ne);return F},[e]),G=d.useMemo(()=>{if(_.mode!=="adaptive")return null;const F=new Map;return _.rows.forEach((ne,ie)=>{let B=0;ne.items.forEach((X,de)=>{const le=B+X.displayW/2;F.set(X.item.path,{row:ie,center:le,order:de}),B+=X.displayW+In})}),F},[_]);d.useEffect(()=>{if(!t.length)return;const F=t[0];p!==F&&w(F)},[t,p]);const J=d.useMemo(()=>{if(_.mode!=="adaptive")return null;let F=0;return _.rows.map(ne=>{const ie=F;return F+=ne.height,{start:ie,height:ne.height}})},[_]),ce=d.useRef(null),Re=(F,ne)=>{try{if(ce.current!=null){try{cancelAnimationFrame(ce.current)}catch{}ce.current=null}const ie=F.scrollTop,B=ne-ie;if(Math.abs(B)<1){F.scrollTop=ne;return}const X=140,de=performance.now(),le=Ce=>1-Math.pow(1-Ce,3),pe=Ce=>{const Le=Math.min(1,(Ce-de)/X),Ne=le(Le);F.scrollTop=ie+B*Ne,Le<1?ce.current=requestAnimationFrame(pe):ce.current=null};ce.current=requestAnimationFrame(pe)}catch{F.scrollTop=ne}},[Q,K]=d.useState(!1);d.useEffect(()=>{const F=P.current;if(!F)return;let ne=0;const ie=()=>{K(!0),window.clearTimeout(ne),ne=window.setTimeout(()=>K(!1),pS)};return F.addEventListener("scroll",ie,{passive:!0}),()=>F.removeEventListener("scroll",ie)},[]);const Z=()=>{T.current!=null&&(window.clearTimeout(T.current),T.current=null)},te=()=>{if(Z(),g(!1),E(null),b.current){try{URL.revokeObjectURL(b.current)}catch{}b.current=null}y(null)},Ee=F=>{Q||(Z(),E(F),g(!1),T.current=window.setTimeout(async()=>{T.current=null;try{const ne=await xe.getFile(F),ie=URL.createObjectURL(ne);if(b.current)try{URL.revokeObjectURL(b.current)}catch{}b.current=ie,y(ie),g(!0)}catch{}},mS))},ze=_.mode==="grid"?_.columns:Math.max(1,Math.floor(ue/(oe+In))),qe=(F,ne)=>{if(_.mode!=="adaptive")return null;const ie=_.rows[F];if(!ie)return null;let B=0,X=null;for(const de of ie.items){const le=B+de.displayW/2,pe=Math.abs(le-ne);(!X||pe<X.dist)&&(X={path:de.item.path,dist:pe}),B+=de.displayW+In}return X?X.path:null},Ue=(F,ne)=>{var Ne,rt,Ve,st;if(!e.length)return null;const ie=F??e[0].path;if(_.mode!=="adaptive"){const tn=cS(e,ze,ie,ne);return tn==="open"||tn==null?tn:((Ne=e[tn])==null?void 0:Ne.path)??null}const B=G==null?void 0:G.get(ie);if(!B)return ie;const X=H.get(ie)??0,de=ne.key;if(de==="Enter")return"open";if(de==="ArrowRight"||de==="d")return((rt=e[Math.min(e.length-1,X+1)])==null?void 0:rt.path)??ie;if(de==="ArrowLeft"||de==="a")return((Ve=e[Math.max(0,X-1)])==null?void 0:Ve.path)??ie;const le=de==="ArrowDown"||de==="s"?1:de==="ArrowUp"||de==="w"?-1:0;if(le===0)return null;const pe=B.row+le;if(pe<0||pe>=(((st=_.rows)==null?void 0:st.length)??0))return ie;const Ce=B.center;return qe(pe,Ce)??ie},ct=F=>{var ne;try{(ne=document.getElementById(`cell-${encodeURIComponent(F)}`))==null||ne.focus()}catch{}},yn=d.useCallback(F=>{try{xe.prefetchThumb(F)}catch{}},[]),dt=(F,ne)=>{w(F),L(F);const ie=!!ne.shiftKey,B=!!(ne.ctrlKey||ne.metaKey);if(ie){const X=U.current??p??t[0]??F,de=H.get(X)??e.findIndex(pe=>pe.path===X),le=H.get(F)??e.findIndex(pe=>pe.path===F);if(de!==-1&&le!==-1){const pe=Math.min(de,le),Ce=Math.max(de,le),Le=e.slice(pe,Ce+1).map(Ne=>Ne.path);if(B){const Ne=new Set(t);for(const rt of Le)Ne.add(rt);r(Array.from(Ne))}else r(Le)}else r([F])}else if(B){const X=new Set(t);X.has(F)?X.delete(F):X.add(F),r(Array.from(X)),U.current=F}else r([F]),U.current=F;Q||yn(F),ct(F)},Zt=(F,ne)=>{var ie,B;try{const X=Bt.has(F)&&t.length>0?t:[F];(ie=ne.dataTransfer)==null||ie.setData("application/x-lenslet-paths",JSON.stringify(X)),ne.dataTransfer&&(ne.dataTransfer.effectAllowed="copyMove");try{document.body.classList.add("drag-active")}catch{}const le=ne.currentTarget.querySelector(".cell-content img"),pe=document.createElement("div");pe.className="drag-ghost";const Ce=document.createElement("img");Ce.draggable=!1,Ce.alt="drag",le&&le.src&&(Ce.src=le.src),pe.appendChild(Ce),document.body.appendChild(pe);const Le=pe.getBoundingClientRect().width||150;(B=ne.dataTransfer)==null||B.setDragImage(pe,Math.round(Le/2),0);const Ne=()=>{try{pe.remove()}catch{}try{document.body.classList.remove("drag-active")}catch{}window.removeEventListener("dragend",Ne),window.removeEventListener("pointerup",Ne),document.removeEventListener("visibilitychange",Ne)};window.addEventListener("dragend",Ne),window.addEventListener("pointerup",Ne),document.addEventListener("visibilitychange",Ne)}catch{}};d.useEffect(()=>{const F=P.current;if(!F)return;const ne=ie=>{var Ne,rt,Ve;const B=Ue(M,ie);if(B==null)return;if(ie.preventDefault(),B==="open"){M&&s(M);return}const X=e.find(st=>st.path===B);if(!X)return;L(X.path),w(X.path),r([X.path]);try{U.current=X.path}catch{}const de=_.mode==="grid"?Math.floor((H.get(X.path)??0)/Math.max(1,_.columns)):((Ne=G==null?void 0:G.get(X.path))==null?void 0:Ne.row)??0,le=F.scrollTop,pe=le+F.clientHeight,Ce=_.mode==="adaptive"?((rt=J==null?void 0:J[de])==null?void 0:rt.start)??0:de*_.rowH,Le=_.mode==="adaptive"?Ce+(((Ve=J==null?void 0:J[de])==null?void 0:Ve.height)??0):Ce+_.rowH;(Ce<le||Le>pe)&&Re(F,Ce),ct(X.path)};return F.addEventListener("keydown",ne),()=>{F.removeEventListener("keydown",ne)}},[e,M,ze,s,_,G,J,H]),d.useLayoutEffect(()=>{var de;const F=P.current;if(!F||!n||!t||t.length===0)return;const ne=t[0],ie=H.get(ne);if(ie==null||ie<0)return;let B=0;if(_.mode==="grid")B=Math.floor(ie/Math.max(1,_.columns));else{let le=0,pe=_.rows.length-1;for(;le<=pe;){const Ce=le+pe>>1,Le=_.rows[Ce];if(ie>=Le.items[0].originalIndex&&ie<=Le.items[Le.items.length-1].originalIndex){B=Ce;break}ie<Le.items[0].originalIndex?pe=Ce-1:le=Ce+1}}const X=_.mode==="adaptive"?((de=J==null?void 0:J[B])==null?void 0:de.start)??0:B*_.rowH;try{F.scrollTop=X}catch{}},[n,_,J]);const Bt=d.useMemo(()=>new Set(t),[t]),en=!!(k&&R&&m),It=d.useMemo(()=>dS(A,_,e),[e,_,A]);d.useEffect(()=>{if(!(Q||It.length===0))for(const F of It)yn(F)},[Q,It,yn]),d.useEffect(()=>{var F;(F=P.current)==null||F.focus()},[]),d.useEffect(()=>{var F;if(c){try{(F=P.current)==null||F.blur()}catch{}try{L(null)}catch{}}},[c]);const Be=d.useMemo(()=>{const F=new Set;for(const ne of A){if(_.mode==="adaptive"){const X=_.rows[ne.index];if(!X)continue;for(const de of X.items)F.add(de.item.path);continue}const ie=ne.index*_.columns,B=Math.min(e.length,ie+_.columns);for(let X=ie;X<B;X+=1){const de=e[X];de&&F.add(de.path)}}return F},[e,_,A]);d.useEffect(()=>{u&&(gS(D.current,Be)||(D.current=Be,u(Be)))},[u,Be]);const nt=M?`cell-${encodeURIComponent(M)}`:void 0;return a.jsx("div",{role:"grid","aria-label":"Gallery",className:`relative h-full overflow-auto p-3 outline-none ${S?"scrollbar-hidden pr-4":"scrollbar-thin"} ${en?"cursor-zoom-in":""}`,ref:P,tabIndex:0,"aria-activedescendant":nt,onMouseDown:()=>{var F;return(F=P.current)==null?void 0:F.focus()},style:{"--gap":`${In}px`},children:a.jsxs("div",{className:"relative w-full",style:{height:fe.getTotalSize()},children:[A.map(F=>{var de;let ne=[],ie={},B="";if(_.mode==="adaptive"){const le=_.rows[F.index];if(!le)return null;ne=le.items,ie={height:le.height,transform:`translate3d(0, ${F.start}px, 0)`,display:"flex",gap:In,paddingBottom:In},B="absolute top-0 left-0 right-0 w-full will-change-transform"}else{const le=F.index*_.columns;ne=e.slice(le,le+_.columns).map(Ce=>({item:Ce,displayW:_.cellW,displayH:_.mediaH})),ie={transform:`translate3d(0, ${F.start}px, 0)`,gridTemplateColumns:`repeat(${_.columns}, minmax(0, 1fr))`,gap:In,paddingBottom:In},B="absolute top-0 left-0 right-0 w-full grid will-change-transform"}const X=F.index===((de=A[0])==null?void 0:de.index);return a.jsx("div",{className:B,role:"row",style:ie,children:ne.map(({item:le,displayW:pe,displayH:Ce})=>{const Le=!c&&(p===le.path||Bt.has(le.path)),Ne=(l==null?void 0:l.get(le.path))??null,rt=Ne!=null,Ve=_.mode==="adaptive"?{width:pe}:{},st=_.mode==="adaptive"?{height:Ce}:{},tn=_.mode==="adaptive"?"relative rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group shrink-0":"relative aspect-[4/3] rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group";return a.jsxs("div",{id:`cell-${encodeURIComponent(le.path)}`,className:`relative min-w-0 ${Le?"outline outline-2 outline-accent outline-offset-2 rounded-[10px]":""}`,role:"gridcell","aria-selected":Le,tabIndex:M===le.path?0:-1,onFocus:()=>L(le.path),draggable:!0,style:Ve,onDragStart:O=>Zt(le.path,O),onDragEnd:()=>{},onContextMenu:O=>{O.preventDefault(),O.stopPropagation(),i&&i(O,le.path)},children:[a.jsxs("div",{className:tn,style:st,onDoubleClick:()=>s(le.path),onMouseLeave:te,children:[a.jsx("div",{className:"cell-content absolute inset-0",children:a.jsx(V1,{path:le.path,name:le.name,selected:Le,highlighted:rt,highlightKey:Ne,displayW:pe,displayH:Ce,ioRoot:P.current,isScrolling:Q,priority:X,onClick:O=>dt(le.path,O)})}),a.jsx("div",{className:"absolute right-0 bottom-0 w-7 h-7 cursor-zoom-in",onMouseEnter:()=>Ee(le.path),onMouseLeave:te,children:a.jsx("div",{className:"absolute right-0 bottom-0 h-[18px] w-[18px] flex items-center justify-center text-text select-none opacity-0 group-hover:opacity-50 hover:opacity-100 transition-all duration-[140ms]",style:{clipPath:'path("M0 9C0 4.02944 4.02944 0 9 0H18V18H0V9Z")',background:"linear-gradient(135deg, rgba(18,18,18,0.9) 0%, rgba(34,34,34,0.9) 60%, rgba(22,22,22,0.9) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",borderLeft:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 1px 2px rgba(0,0,0,0.45)",backdropFilter:"blur(1px)"},children:a.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#d9dce2]","aria-hidden":"true",style:{transform:"translate(0px,0px)"},children:[a.jsx("circle",{cx:"11",cy:"11",r:"5.4"}),a.jsx("path",{d:"M15.5 15.5 L19 19"})]})})})]}),a.jsxs("div",{className:"flex flex-col items-center text-center gap-0 mt-1 px-0.5 text-white/90",children:[a.jsx("div",{className:"text-sm leading-[18px] thumb-filename line-clamp-2 break-words hyphens-auto text-center",title:le.name,children:(()=>{const O=(o||"").trim();if(!O)return le.name;const re=le.name,ye=re.toLowerCase().indexOf(O.toLowerCase());if(ye===-1)return le.name;const je=re.slice(0,ye),xn=re.slice(ye,ye+O.length),nn=re.slice(ye+O.length);return a.jsxs(a.Fragment,{children:[je,a.jsx("mark",{className:"bg-accent/20 text-inherit rounded px-0.5",children:xn}),nn]})})()}),a.jsxs("div",{className:"text-[11px] leading-[15px] opacity-70",children:[le.w,"  ",le.h]})]})]},le.path)})},F.key)}),k&&R&&m&&Bd.createPortal(a.jsx("div",{className:"toolbar-offset fixed inset-0 z-[999] flex items-center justify-center pointer-events-none bg-black/20 opacity-100",children:a.jsx("img",{src:R,alt:"preview",className:"max-w-[80vw] max-h-[80vh] object-contain opacity-[0.98]"})}),document.body)]},`${f}-${ze}`)})}const yS=48,xS=[.1,.24,.5,.74,.9];function wS({items:e,metricKey:t,scrollRef:n,sortDir:r}){const{orderedValues:s,numericValues:i}=d.useMemo(()=>{var N;const b=[],T=[];for(const P of e){const U=(N=P.metrics)==null?void 0:N[t],D=U==null||Number.isNaN(U)?null:U;b.push(D),D!=null&&T.push(D)}return{orderedValues:b,numericValues:T}},[e,t]),o=d.useMemo(()=>SS(i,yS),[i]),l=d.useMemo(()=>CS(i,xS),[i]),[u,c]=d.useState(0),[f,h]=d.useState(null),[v,S]=d.useState(!1),k=d.useRef(null);if(d.useEffect(()=>{const b=n.current;if(!b)return;const T=()=>{const N=Math.max(1,b.scrollHeight-b.clientHeight),P=Wr(N>0?b.scrollTop/N:0);c(P)};return T(),b.addEventListener("scroll",T,{passive:!0}),window.addEventListener("resize",T),()=>{b.removeEventListener("scroll",T),window.removeEventListener("resize",T)}},[n,e.length]),d.useEffect(()=>{h(null)},[t,e.length]),!o)return null;const E={min:o.min,max:o.max},R=f!=null?cm(f):null,y=cm(u),m=r==="desc",g=d.useMemo(()=>f==null?null:ES(s,f),[s,f]);function p(b){h(Wr(b))}function w(){h(null)}function M(b){const T=n.current;if(!T)return;const N=Math.max(0,T.scrollHeight-T.clientHeight);T.scrollTop=Wr(b)*N}function L(b){var N;const T=(N=k.current)==null?void 0:N.getBoundingClientRect();return T?Wr((b.clientY-T.top)/T.height):null}return a.jsxs("div",{className:"absolute right-0 top-3 bottom-3 w-[14px] flex items-stretch pointer-events-auto",children:[a.jsxs("svg",{ref:k,viewBox:"0 0 10 100",preserveAspectRatio:"none",className:"w-full h-full rounded bg-surface-inset border border-border/60 cursor-ns-resize",onPointerDown:b=>{var N;b.preventDefault();const T=L(b);T!=null&&(S(!0),p(T),M(T),(N=k.current)==null||N.setPointerCapture(b.pointerId))},onPointerMove:b=>{const T=L(b);if(T==null){v||w();return}p(T),v&&M(T)},onPointerUp:b=>{var T;S(!1),(T=k.current)==null||T.releasePointerCapture(b.pointerId)},onPointerLeave:()=>{v||w()},children:[kS(o.bins,"var(--border-strong)",{flip:m}),bS(l,E,{flip:m,color:"var(--muted)"}),um(y,{color:"var(--highlight)",strokeWidth:.8}),R!=null&&um(R,{color:"var(--text-secondary)",strokeWidth:.6,dashed:!0})]}),g!=null&&f!=null&&a.jsx("div",{className:"pointer-events-none absolute right-full mr-2 px-1.5 py-0.5 rounded border border-border bg-surface text-[10px] text-text shadow",style:{top:`calc(${(f*100).toFixed(2)}% - 8px)`},children:jS(g)})]})}function SS(e,t){if(!e.length)return null;const n=Math.min(...e);let r=Math.max(...e);n===r&&(r=n+1);const s=new Array(t).fill(0),i=t/(r-n);for(const o of e){const l=Math.max(0,Math.min(t-1,Math.floor((o-n)*i)));s[l]+=1}return{bins:s,min:n,max:r}}function CS(e,t){if(!e.length)return[];const n=[...e].sort((s,i)=>s-i),r=n.length-1;return t.map(s=>{const i=r*s,o=Math.floor(i),l=Math.ceil(i);if(o===l)return n[o];const u=i-o;return n[o]+(n[l]-n[o])*u})}function kS(e,t,n){const r=Math.max(1,...e),s=100/e.length,i=(n==null?void 0:n.flip)??!1;return e.map((o,l)=>{const u=Math.max(.8,o/r*10),c=(i?e.length-1-l:l)*s;return a.jsx("rect",{x:10-u,y:c,width:u,height:Math.max(.2,s-.2),fill:t,opacity:.9},`sb-${l}`)})}function bS(e,t,n){const r=(n==null?void 0:n.flip)??!1,s=n==null?void 0:n.color;return e.map((i,o)=>{const l=NS(i,t,r),u=o===2;return a.jsx("line",{x1:0,y1:l,x2:10,y2:l,stroke:s,strokeWidth:u?.8:.5,opacity:u?.9:.6,vectorEffect:"non-scaling-stroke"},`qt-${o}-${i}`)})}function um(e,t){return a.jsx("line",{x1:0,y1:e,x2:10,y2:e,stroke:t.color,strokeWidth:t.strokeWidth??.6,strokeDasharray:t.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function ES(e,t){if(!e.length)return null;const n=Math.round(Wr(t)*(e.length-1)),r=e[n];if(r!=null)return r;for(let s=1;s<e.length;s++){const i=n-s;if(i>=0&&e[i]!=null)return e[i];const o=n+s;if(o<e.length&&e[o]!=null)return e[o]}return null}function NS(e,t,n){const r=t.max-t.min;if(r===0)return 0;const s=Wr((e-t.min)/r);return(n?1-s:s)*100}function cm(e){return Wr(e)*100}function Wr(e){return e<0?0:e>1?1:e}function jS(e){if(e==null||Number.isNaN(e))return"-";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Hr(e,t){const[n,r]=d.useState(null),s=d.useRef(null);return d.useEffect(()=>{if(!e){if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}r(null);return}let i=!0;return e().then(o=>{if(!i)return;const l=URL.createObjectURL(o);if(s.current)try{URL.revokeObjectURL(s.current)}catch{}s.current=l,r(l)}).catch(()=>{}),()=>{i=!1}},t),d.useEffect(()=>()=>{if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}},[]),n}function MS(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[o,l]=d.useState(1),[u,c]=d.useState(!1),[f,h]=d.useState(!1),[v,S]=d.useState(!1),k=d.useRef(null),E=d.useRef(null),R=()=>{const g=k.current,p=E.current;if(!g||!p||!p.naturalWidth||!p.naturalHeight)return;const w=g.getBoundingClientRect(),M=w.width/p.naturalWidth,L=w.height/p.naturalHeight,b=Math.min(1,Math.min(M,L));l(b);const T=p.naturalWidth*b,N=p.naturalHeight*b;r((w.width-T)/2),i((w.height-N)/2)};return d.useEffect(()=>{const g=k.current;if(!g)return;const p=new ResizeObserver(()=>{try{requestAnimationFrame(()=>R())}catch{R()}});return p.observe(g),()=>p.disconnect()},[]),{scale:e,setScale:t,tx:n,setTx:r,ty:s,setTy:i,base:o,setBase:l,ready:u,setReady:c,dragging:f,setDragging:h,visible:v,setVisible:S,containerRef:k,imgRef:E,fitAndCenter:R,handleWheel:g=>{g.preventDefault();const p=g.deltaY>0?-1:1,w=1.2,M=.05,L=8,b=k.current;if(!b)return;const T=b.getBoundingClientRect(),N=g.clientX-T.left,P=g.clientY-T.top;t(U=>{const D=Math.min(L,Math.max(M,U*Math.pow(w,p))),oe=D/U;return r(ue=>N-oe*(N-ue)),i(ue=>P-oe*(P-ue)),Number(D.toFixed(4))})},handleMouseDown:g=>{const p=k.current,w=E.current;if(!p||!w||g.target!==w)return;const L=p.getBoundingClientRect();if(g.clientX<L.left||g.clientX>L.right||g.clientY<L.top||g.clientY>L.bottom)return;g.preventDefault(),g.stopPropagation(),h(!0);const b=g.clientX,T=g.clientY,N=n,P=s,U=oe=>{r(N+(oe.clientX-b)),i(P+(oe.clientY-T))},D=()=>{window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",D),h(!1)};window.addEventListener("mousemove",U),window.addEventListener("mouseup",D)}}}function RS({path:e,onClose:t,onNavigate:n,onZoomChange:r,requestedZoomPercent:s,onZoomRequestConsumed:i}){const{scale:o,setScale:l,tx:u,setTx:c,ty:f,setTy:h,base:v,ready:S,setReady:k,dragging:E,visible:R,setVisible:y,containerRef:m,imgRef:g,fitAndCenter:p,handleWheel:w,handleMouseDown:M}=MS(),L=Hr(()=>xe.getFile(e),[e]),b=Hr(()=>xe.getThumb(e),[e]),T=d.useCallback(()=>{y(!1),window.setTimeout(t,110)},[t,y]);return d.useEffect(()=>{requestAnimationFrame(()=>{var N;y(!0),(N=m.current)==null||N.focus()})},[e]),d.useEffect(()=>{const N=P=>{P.key==="Escape"?T():(P.key==="ArrowRight"||P.key==="d")&&n?n(1):(P.key==="ArrowLeft"||P.key==="a")&&n&&n(-1)};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[t,n]),d.useEffect(()=>{k(!1)},[L]),d.useEffect(()=>{r&&r(v*o*100)},[v,o,r]),d.useEffect(()=>{if(s==null)return;const N=m.current;if(!N){i&&i();return}const P=Math.max(.05,Math.min(8,s/100/Math.max(1e-6,v))),U=N.getBoundingClientRect(),D=U.width/2,oe=U.height/2;l(ue=>{const _=P/ue;return c(fe=>D-_*(D-fe)),h(fe=>oe-_*(oe-fe)),Number(P.toFixed(4))}),i&&i()},[s,v,i]),a.jsxs("div",{ref:m,role:"dialog","aria-modal":!0,"aria-label":"Image viewer",tabIndex:-1,className:`toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] flex items-start justify-start bg-panel z-viewer overflow-hidden transition-opacity duration-[110ms] ease-out cursor-grab focus:outline-none focus-visible:outline-none ${E?"cursor-grabbing select-none":""} ${R?"opacity-100":"opacity-0"}`,style:{outline:"none"},onClick:T,onWheel:w,onMouseDown:M,onKeyDown:N=>{N.key==="Tab"&&N.preventDefault()},children:[a.jsxs("button",{"aria-label":"Close",onClick:N=>{N.stopPropagation(),T()},className:"btn btn-sm absolute top-3 right-3 z-10",title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]}),b&&a.jsx("img",{src:b,alt:"thumb",className:"absolute top-0 left-0 max-w-none max-h-none object-contain pointer-events-none transition-opacity duration-[110ms] ease-out",draggable:!1,onDragStart:N=>N.preventDefault(),style:{transform:`translate(${u}px, ${f}px) scale(${v})`,transformOrigin:"0 0",opacity:S?0:.5,filter:"blur(0.25px)"}}),L&&a.jsx("img",{ref:g,src:L,alt:"viewer",className:"max-w-none max-h-none object-contain transition-opacity duration-[110ms] ease-out will-change-transform select-none",draggable:!1,onDragStart:N=>{N.preventDefault()},onLoad:N=>{p(),l(1);try{requestAnimationFrame(()=>k(!0))}catch{k(!0)}},onClick:N=>N.stopPropagation(),style:{transform:`translate(${u}px, ${f}px) scale(${v*o})`,transformOrigin:"0 0",opacity:S?.99:0,WebkitUserDrag:"none"}})]})}function Gd(e){return!e||!(e instanceof HTMLElement)?!1:e.closest('input, textarea, [contenteditable="true"]')!==null}const LS=1.2,TS=.05,_S=8;function PS(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[o,l]=d.useState(0),[u,c]=d.useState(0),[f,h]=d.useState(1),[v,S]=d.useState(1),[k,E]=d.useState(!1),R=d.useRef(null),y=d.useRef(null),m=d.useRef(null),g=d.useCallback(()=>{const L=R.current;if(!L)return;const b=L.getBoundingClientRect(),T=(N,P,U,D)=>{if(!N||!N.naturalWidth||!N.naturalHeight)return;const oe=b.width/N.naturalWidth,ue=b.height/N.naturalHeight,_=Math.min(1,Math.min(oe,ue)),fe=N.naturalWidth*_,A=N.naturalHeight*_;P(_),U((b.width-fe)/2),D((b.height-A)/2)};T(y.current,h,r,i),T(m.current,S,l,c)},[]);d.useEffect(()=>{const L=R.current;if(!L)return;const b=new ResizeObserver(()=>{try{requestAnimationFrame(()=>g())}catch{g()}});return b.observe(L),()=>b.disconnect()},[g]);const p=d.useCallback(()=>{t(1),g()},[g]),w=d.useCallback(L=>{L.preventDefault();const b=L.deltaY>0?-1:1,T=R.current;if(!T)return;const N=T.getBoundingClientRect(),P=L.clientX-N.left,U=L.clientY-N.top;t(D=>{const oe=Math.min(_S,Math.max(TS,D*Math.pow(LS,b))),ue=oe/D;return r(_=>P-ue*(P-_)),i(_=>U-ue*(U-_)),l(_=>P-ue*(P-_)),c(_=>U-ue*(U-_)),Number(oe.toFixed(4))})},[]),M=d.useCallback(L=>{if(L.button!==0||!R.current)return;L.preventDefault(),E(!0);const T=L.clientX,N=L.clientY,P=n,U=s,D=o,oe=u,ue=fe=>{const A=fe.clientX-T,H=fe.clientY-N;r(P+A),i(U+H),l(D+A),c(oe+H)},_=()=>{window.removeEventListener("pointermove",ue),window.removeEventListener("pointerup",_),E(!1)};window.addEventListener("pointermove",ue),window.addEventListener("pointerup",_)},[n,s,o,u]);return{scale:e,baseA:f,baseB:v,txA:n,tyA:s,txB:o,tyB:u,dragging:k,containerRef:R,imgARef:y,imgBRef:m,fitAndCenter:g,resetView:p,handleWheel:w,handlePointerDown:M}}function IS({aItem:e,bItem:t,index:n,total:r,canPrev:s,canNext:i,onNavigate:o,onClose:l}){const u=d.useRef(null),[c,f]=d.useState(50),[h,v]=d.useState(!1),[S,k]=d.useState(!1),{scale:E,baseA:R,baseB:y,txA:m,tyA:g,txB:p,tyB:w,dragging:M,containerRef:L,imgARef:b,imgBRef:T,fitAndCenter:N,resetView:P,handleWheel:U,handlePointerDown:D}=PS(),oe=(e==null?void 0:e.path)??null,ue=(t==null?void 0:t.path)??null,_=(e==null?void 0:e.name)??oe??"Select an image",fe=(t==null?void 0:t.name)??ue??"Select another image";d.useEffect(()=>{requestAnimationFrame(()=>{var K;return(K=u.current)==null?void 0:K.focus()})},[oe,ue]),d.useEffect(()=>{P(),v(!1),k(!1)},[oe,ue,P]),d.useEffect(()=>{const K=Z=>{if(!Gd(Z.target)){if(Z.key==="Escape"){Z.preventDefault(),l();return}if((Z.key==="ArrowRight"||Z.key==="d")&&i){Z.preventDefault(),o(1);return}(Z.key==="ArrowLeft"||Z.key==="a")&&s&&(Z.preventDefault(),o(-1))}};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[l,o,s,i]);const A=Hr(oe?()=>xe.getFile(oe):null,[oe]),H=Hr(ue?()=>xe.getFile(ue):null,[ue]),G=Hr(oe?()=>xe.getThumb(oe):null,[oe]),J=Hr(ue?()=>xe.getThumb(ue):null,[ue]),ce=d.useCallback(K=>Math.min(95,Math.max(5,K)),[]),Re=d.useCallback(K=>{const Z=K.target;Z!=null&&Z.closest(".compare-label")||Z!=null&&Z.closest(".compare-divider-hit")||D(K)},[D]),Q=d.useCallback(K=>{const Z=L.current;if(!Z)return;K.preventDefault(),K.stopPropagation();const te=Z.getBoundingClientRect(),Ee=K.currentTarget;Ee.setPointerCapture(K.pointerId);const ze=Ue=>{const ct=(Ue.clientX-te.left)/te.width*100;f(ce(ct))},qe=Ue=>{Ee.releasePointerCapture(Ue.pointerId),window.removeEventListener("pointermove",ze),window.removeEventListener("pointerup",qe)};window.addEventListener("pointermove",ze),window.addEventListener("pointerup",qe)},[ce]);return a.jsxs("div",{ref:u,role:"dialog","aria-modal":!0,"aria-label":"Compare images",tabIndex:-1,className:"toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] bg-panel z-viewer flex flex-col overflow-hidden focus:outline-none",onKeyDown:K=>{K.key==="Tab"&&K.preventDefault()},children:[a.jsxs("div",{className:"compare-header flex items-center gap-3 px-3 py-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Compare"}),a.jsx("div",{className:"text-xs text-muted",children:r>=2?`${n+1}-${Math.min(n+2,r)} of ${r}`:"Select 2 images"}),a.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(-1),disabled:!s,title:"Previous (Left Arrow or A)",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Prev"]}),a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(1),disabled:!i,title:"Next (Right Arrow or D)",children:["Next",a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"btn btn-sm",onClick:l,title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]})]})]}),a.jsx("div",{className:"flex-1 min-h-0 p-3 bg-panel",children:a.jsx("div",{ref:L,className:`compare-stage ${M?"is-dragging":""}`,onWheel:U,onPointerDown:Re,children:!e||!t?a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-sm text-muted",children:"Select 2 images to compare."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"compare-label left-3",children:[a.jsx("span",{className:"compare-label-tag",children:"A"}),a.jsx("span",{className:"truncate",title:e.path,children:_})]}),a.jsxs("div",{className:"compare-label right-3",children:[a.jsx("span",{className:"compare-label-tag",children:"B"}),a.jsx("span",{className:"truncate",title:t.path,children:fe})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 ${100-c}% 0 0)`},children:[G&&a.jsx("img",{src:G,alt:"thumb A",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:K=>K.preventDefault(),style:{transform:`translate(${m}px, ${g}px) scale(${R})`,transformOrigin:"0 0",opacity:h?0:.5}}),A&&a.jsx("img",{ref:b,src:A,alt:"compare A",className:"compare-image",draggable:!1,onDragStart:K=>K.preventDefault(),onLoad:()=>{N();try{requestAnimationFrame(()=>v(!0))}catch{v(!0)}},style:{transform:`translate(${m}px, ${g}px) scale(${R*E})`,transformOrigin:"0 0",opacity:h?.99:0}})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 0 0 ${c}%)`},children:[J&&a.jsx("img",{src:J,alt:"thumb B",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:K=>K.preventDefault(),style:{transform:`translate(${p}px, ${w}px) scale(${y})`,transformOrigin:"0 0",opacity:S?0:.5}}),H&&a.jsx("img",{ref:T,src:H,alt:"compare B",className:"compare-image",draggable:!1,onDragStart:K=>K.preventDefault(),onLoad:()=>{N();try{requestAnimationFrame(()=>k(!0))}catch{k(!0)}},style:{transform:`translate(${p}px, ${w}px) scale(${y*E})`,transformOrigin:"0 0",opacity:S?.99:0}})]}),a.jsxs("div",{className:"compare-divider-hit",style:{left:`${c}%`},onPointerDown:Q,children:[a.jsx("div",{className:"compare-divider-line"}),a.jsx("div",{className:"compare-divider-handle"})]})]})})})]})}function ya(){const[e,t]=d.useState($1());return d.useEffect(()=>A1(t),[]),e}const io=e=>["item",e],FS={v:1,tags:[],notes:"",version:1,updated_at:"",updated_by:"web"},ln=new Map,vl=new Map,Oc=new Map,Yd=new Map;let dm=0;const Tn=new Map,Ri=new Map,OS=12e3,zc=new Set,Dc=new Set;let Xd={state:"idle"},oo=null,Ac=0;function el(e){Xd=e;for(const t of zc)t(e)}function Vn(){const e=Tn.size>0,t=ln.size+vl.size+Ac;if(e){el({state:"error",message:"Conflict detected"});return}if(oo){el({state:"error",message:oo});return}if(t>0){el({state:"syncing"});return}el({state:"idle"})}function Jd(){let e=null;for(const t of Oc.values())e=e==null?t:Math.min(e,t);for(const t of Yd.values())e=e==null?t:Math.min(e,t);return e}function Yl(){const e=Jd();for(const t of Dc)t(e)}function Xl(e){oo=e,Vn()}function $v(){oo&&(oo=null,Vn())}function fm(e){Ac=Math.max(0,Ac+e),Vn()}function zS(){dm+=1;const e=dm;return Yd.set(e,Date.now()),Yl(),e}function DS(e){e!=null&&Yd.delete(e)&&Yl()}function xa(e){const t=Ri.get(e);if(!t||!t.size)return;const n=Tn.get(e)??null;for(const r of t)r(n)}function hm(e){return Tn.get(e)??null}function wa(e){Tn.delete(e)&&(xa(e),Vn())}function AS(e,t){Tn.set(e,t),xa(e),Vn()}function $S(e,t){const n=Ri.get(e)??new Set;return n.add(t),Ri.set(e,n),t(Tn.get(e)??null),()=>{const r=Ri.get(e);r&&(r.delete(t),r.size||Ri.delete(e))}}function US(e){const[t,n]=d.useState(()=>e?hm(e):null);return d.useEffect(()=>{if(!e){n(null);return}return n(hm(e)),$S(e,n)},[e]),t}function BS(e){return zc.add(e),e(Xd),()=>{zc.delete(e)}}function WS(){const[e,t]=d.useState(Xd);return d.useEffect(()=>BS(t),[]),e}function HS(e){return Dc.add(e),e(Jd()),()=>{Dc.delete(e)}}function VS(){const[e,t]=d.useState(()=>Jd()),[n,r]=d.useState(()=>e==null?null:Date.now()-e);return d.useEffect(()=>HS(t),[]),d.useEffect(()=>{if(e==null){r(null);return}r(Date.now()-e);const s=window.setInterval(()=>{r(Date.now()-e)},1e3);return()=>window.clearInterval(s)},[e]),n}function $c(e){const t={};return Object.prototype.hasOwnProperty.call(e,"star")&&(t.set_star=e.star??null),Object.prototype.hasOwnProperty.call(e,"notes")&&(t.set_notes=e.notes??""),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.set_tags=Array.isArray(e.tags)?e.tags:[]),t}function Uc(e){var t,n;return e.set_star!==void 0||e.set_notes!==void 0||e.set_tags!==void 0||(((t=e.add_tags)==null?void 0:t.length)??0)>0||(((n=e.remove_tags)==null?void 0:n.length)??0)>0}function ki(e){const t=[],n=new Set;for(const r of e??[]){if(typeof r!="string")continue;const s=r.trim();!s||n.has(s)||(n.add(s),t.push(s))}return t}function QS(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}function KS(e,t){if(e.set_star!==void 0&&(t.star??null)!==e.set_star||e.set_notes!==void 0&&(t.notes??"")!==(e.set_notes??""))return!1;if(e.set_tags!==void 0){const r=ki(e.set_tags),s=ki(t.tags);return QS(r,s)}const n=ki(t.tags);for(const r of ki(e.add_tags))if(!n.includes(r))return!1;for(const r of ki(e.remove_tags))if(n.includes(r))return!1;return!0}function Uv(e,t,n){if(n instanceof gn&&n.status===409){const r=n.body;if(r!=null&&r.current)return AS(e,{path:e,current:r.current,pending:t,receivedAt:new Date().toISOString()}),!0}return!1}function qS(e,t){const n=Tn.get(e);if(n){if(KS(n.pending,t)){wa(e);return}Tn.set(e,{...n,current:t}),xa(e),Vn()}}function GS(e){const t=ya();return ga({queryKey:io(e),queryFn:()=>xe.getSidecar(e),enabled:!!e,staleTime:3e4,gcTime:5*6e4,retry:2,refetchInterval:t?OS:!1,refetchIntervalInBackground:t})}function YS(e){const t=_r();return h1({mutationFn:async({patch:n,baseVersion:r,idempotencyKey:s})=>{const i=$c(n);if(!Uc(i))return t.getQueryData(io(e))??FS;const o={...i,base_version:r};try{return await xe.patchSidecar(e,o,{idempotencyKey:s??so("patch"),ifMatch:r})}catch(l){throw Uv(e,i,l),l}},retry:(n,r)=>r instanceof gn&&r.status===409?!1:n<2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),4e3),onMutate:()=>($v(),fm(1),{inflightId:zS()}),onSuccess:n=>{wa(e),t.setQueryData(io(e),n)},onError:n=>{n instanceof gn&&n.status===409||(n instanceof gn?Xl(n.message):Xl("Failed to save"))},onSettled:(n,r,s,i)=>{fm(-1),DS(i==null?void 0:i.inflightId)}})}const XS=6;async function mm(e,t){if(!e.length)return;let n=0;const r=[],s=async()=>{for(;n<e.length;){const o=n++,l=e[o];try{await Bv(l,t)}catch(u){r.push({path:l,error:u}),console.error(`[bulkUpdateSidecars] Failed for ${l}:`,u)}}},i=Array.from({length:Math.min(XS,e.length)},()=>s());if(await Promise.all(i),r.length===e.length)throw new Error(`All ${e.length} sidecar updates failed`)}async function Bv(e,t){const n=ln.get(e)||{};ln.set(e,{...n,...t}),$v(),Vn();const r=vl.get(e);if(r)return r;Oc.set(e,Date.now()),Yl();const s=(async()=>{try{for(;ln.has(e);){const i=ln.get(e);if(!i)break;const o=$c(i);if(!Uc(o)){ln.get(e)===i&&ln.delete(e);continue}let l=1;try{l=(await xe.getSidecar(e)).version??1}catch{l=1}const u={...o,base_version:l};try{await xe.patchSidecar(e,u,{idempotencyKey:so("patch"),ifMatch:l}),wa(e),ln.get(e)===i&&ln.delete(e)}catch(c){if(Uv(e,o,c)){const h=ln.get(e);if(h&&h!==i){const v=$c(h);if(Uc(v)){const S=Tn.get(e);S&&(Tn.set(e,{...S,pending:v}),xa(e))}}ln.delete(e)}else c instanceof gn?Xl(c.message):Xl("Failed to save");throw c}}}finally{vl.delete(e),Oc.delete(e),Yl(),Vn()}})();return vl.set(e,s),Vn(),s}function gu(e){const t=["B","KB","MB","GB","TB"];let n=0,r=e;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${r.toFixed(1)} ${t[n]}`}function vu(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function JS(e,t=28){if(e.length<=t)return e;const n=Math.max(4,Math.floor((t-1)/2));return`${e.slice(0,n)}${e.slice(-n)}`}const ZS=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});function eC(e){const t=e.trim();return!t||/[zZ]|[+-]\d{2}:?\d{2}$/.test(t)?t:`${t.includes("T")?t:t.replace(" ","T")}Z`}function Wv(e){if(!e)return null;const t=Date.parse(eC(e));return Number.isFinite(t)?t:null}function tC(e,t=Date.now()){const n=Math.max(0,t-e),r=Math.max(1,Math.floor(n/1e3));if(r<60)return`${r} second${r===1?"":"s"} ago`;const s=Math.floor(r/60);if(s<60)return`${s} minute${s===1?"":"s"} ago`;const i=Math.floor(s/60);return`${i} hour${i===1?"":"s"} ago`}function nC(e){return ZS.format(new Date(e))}function yl(e){if(Array.isArray(e))return e.map(yl);if(e&&typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,yl(n)]));if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")||t.startsWith('"')&&t.endsWith('"'))try{const r=JSON.parse(t);return yl(r)}catch{return e}}return e}function yu(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function rC(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function pm(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}function sC(e){const t=/(\"(\\u[a-fA-F0-9]{4}|\\[^u]|[^\\"])*\"(?:\s*:)?|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\btrue\b|\bfalse\b|\bnull\b)/g;let n="",r=0;for(const s of e.matchAll(t)){const i=s.index??0,o=s[0];n+=yu(e.slice(r,i));let l="var(--json-fallback)";o.startsWith('"')&&o.trimEnd().endsWith(":")?l="var(--json-key)":o.startsWith('"')?l="var(--json-string)":/true|false|null/.test(o)?l="var(--json-literal)":l="var(--json-number)",n+=`<span style="color:${l}">${yu(o)}</span>`,r=i+o.length}return n+=yu(e.slice(r)),n}const iC=["overview","basics","metadata","notes"],gm="lenslet.inspector.sections",vm="lenslet.inspector.metricsExpanded",xu=12,oC={overview:!0,metadata:!0,basics:!0,notes:!0};function tl({title:e,open:t,onToggle:n,actions:r,children:s,contentClassName:i}){const[o,l]=d.useState(t),[u,c]=d.useState(t?"open":"closed");return d.useEffect(()=>{if(t){l(!0);const h=window.requestAnimationFrame(()=>c("open"));return()=>window.cancelAnimationFrame(h)}c("closing");const f=window.setTimeout(()=>{l(!1),c("closed")},140);return()=>window.clearTimeout(f)},[t]),a.jsxs("div",{className:"border-b border-border/60",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[a.jsxs("button",{type:"button",onClick:n,"aria-expanded":t,className:"flex items-center gap-2 inspector-section-title hover:text-text transition-colors",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform ${t?"rotate-90":""}`,"aria-hidden":"true",children:a.jsx("path",{d:"m9 18 6-6-6-6"})}),a.jsx("span",{children:e})]}),r]}),o&&a.jsx("div",{className:"inspector-section-body","data-state":u,"aria-hidden":!t,children:a.jsx("div",{className:i??"px-3 pb-3",children:s})})]})}function lC({path:e,selectedPaths:t=[],items:n=[],onResize:r,onStarChanged:s,sortSpec:i,onFindSimilar:o,embeddingsAvailable:l=!1,embeddingsLoading:u=!1,onLocalTypingChange:c}){const f=!!e,{data:h,isLoading:v}=GS(e??""),S=YS(e??""),k=_r(),[E,R]=d.useState(oC),y=d.useCallback(O=>{R(re=>({...re,[O]:!re[O]}))},[]),[m,g]=d.useState(!1),p=t.length>1,w=!!o&&l&&!p,M=o?l?p?"Select a single image to search.":null:u?"Loading embeddings...":"No embeddings detected.":null,[L,b]=d.useState(""),[T,N]=d.useState(""),[P,U]=d.useState(""),[D,oe]=d.useState(null),[ue,_]=d.useState("idle"),[fe,A]=d.useState(!1),[H,G]=d.useState(null),[J,ce]=d.useState({}),Re=d.useRef(!1),Q=d.useCallback(O=>{Re.current!==O&&(Re.current=O,c==null||c(O))},[c]),Z=d.useMemo(()=>{const O=n.find(re=>re.path===e);return O&&O.star!==void 0?O.star:null},[n,e])??(h==null?void 0:h.star)??null,te=US(p?null:e),Ee={tags:!!(te!=null&&te.pending.set_tags),notes:(te==null?void 0:te.pending.set_notes)!==void 0,star:(te==null?void 0:te.pending.set_star)!==void 0},ze=d.useMemo(()=>{const O=new Set(t);return n.filter(re=>O.has(re.path))},[n,t]),qe=d.useMemo(()=>ze.reduce((O,re)=>O+(re.size||0),0),[ze]);d.useEffect(()=>{h&&(b((h.tags||[]).join(", ")),N(h.notes||"")),U(""),oe(null),_("idle"),A(!1),Q(!1)},[h==null?void 0:h.updated_at,Q,e]),d.useEffect(()=>()=>{Q(!1)},[Q]);const Ue=d.useCallback(O=>{if(p&&t.length){mm(t,O);return}if(!e)return;const re=(h==null?void 0:h.version)??1;S.mutate({patch:O,baseVersion:re,idempotencyKey:so("patch")})},[p,t,e,h==null?void 0:h.version,S]),ct=d.useCallback(O=>{N(O),Q(!0)},[Q]),yn=d.useCallback(()=>{Ue({notes:T}),Q(!1)},[Ue,T,Q]),dt=d.useCallback(O=>{b(O),Q(!0)},[Q]),Zt=d.useCallback(()=>{Ue({tags:pm(L)}),Q(!1)},[Ue,Q,L]),Bt=d.useCallback(()=>{if(!te||!e)return;const O={};te.pending.set_tags!==void 0&&(O.tags=pm(L)),te.pending.set_notes!==void 0&&(O.notes=T),te.pending.set_star!==void 0&&(O.star=Z??null);const re=te.current.version??1;S.mutate({patch:O,baseVersion:re,idempotencyKey:so("patch")})},[te,e,L,T,Z,S]),en=d.useCallback(()=>{if(!te||!e)return;const O=te.current;b((O.tags||[]).join(", ")),N(O.notes||""),k.setQueryData(io(e),O),wa(e),s==null||s([e],O.star??null)},[te,e,k,s]);d.useEffect(()=>{if(!e)return;const O=re=>{if(Gd(re.target))return;const ye=re.key;if(!/^[0-5]$/.test(ye))return;re.preventDefault();const je=ye==="0"?null:Number(ye);if(p&&t.length){Ue({star:je}),s==null||s(t,je);return}Ue({star:je}),s==null||s([e],je)};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[e,p,t,Ue,s]);const It=Hr(e?()=>xe.getThumb(e):null,[e]),Be=e?e.split("/").pop()||e:"",nt=d.useMemo(()=>{var re;if(Be.includes("."))return Be.slice(Be.lastIndexOf(".")+1).toUpperCase();const O=n.find(ye=>ye.path===e);return(re=O==null?void 0:O.type)!=null&&re.includes("/")?O.type.split("/")[1].toUpperCase():""},[Be,n,e]),F=d.useMemo(()=>n.find(O=>O.path===e),[n,e]),ne=d.useMemo(()=>e?(F==null?void 0:F.source)??e:"",[F,e]),ie=d.useCallback(async()=>{if(e){_("loading"),oe(null);try{const O=await xe.getMetadata(e),re=yl(O.meta),ye=JSON.stringify(re,null,1);U(ye),_("loaded")}catch(O){const re=O instanceof Error?O.message:"Failed to load metadata";U(re),oe(re),_("error")}}},[e]),B=d.useCallback(()=>{var O;P&&((O=navigator.clipboard)==null||O.writeText(P).then(()=>{A(!0),setTimeout(()=>A(!1),1200)}).catch(re=>{const ye=re instanceof Error?re.message:"Copy failed";oe(ye)}))},[P]),X=d.useMemo(()=>P?sC(P):"",[P]),de=ue==="loading"?"Loading metadata":P||"PNG metadata not loaded yet.",le=ue==="loading",pe=ue==="loaded"&&!!P,Ce=pe?"h-48":"h-24",Le=le?"Loading":pe?fe?"Copied":"Copy":"Load meta",Ne=pe?B:ie,rt=p?null:a.jsx("div",{className:"flex items-center gap-2 text-xs",children:a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[78px]",onClick:Ne,disabled:!e||le,children:Le})});d.useEffect(()=>{try{const O=localStorage.getItem(gm);if(!O)return;const re=JSON.parse(O);if(!re||typeof re!="object")return;const ye={};for(const je of iC)typeof re[je]=="boolean"&&(ye[je]=re[je]);Object.keys(ye).length>0&&R(je=>({...je,...ye}))}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(gm,JSON.stringify(E))}catch{}},[E]),d.useEffect(()=>{try{const O=localStorage.getItem(vm);O==="1"||O==="true"?g(!0):(O==="0"||O==="false")&&g(!1)}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(vm,m?"1":"0")}catch{}},[m]);const Ve=d.useCallback((O,re)=>{var ye;re&&((ye=navigator.clipboard)==null||ye.writeText(re).then(()=>{G(O),setTimeout(()=>G(je=>je===O?null:je),1e3)}).catch(()=>{}))},[]),st=d.useCallback((O,re)=>{if(re&&!J[O]){const ye=re.offsetHeight;ye&&ce(je=>je[O]?je:{...je,[O]:ye})}},[J]),tn="toolbar-offset absolute bottom-0 left-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20";return f?a.jsxs("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:[!p&&a.jsx("div",{className:"p-3 border-b border-border flex justify-center",children:a.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border w-[220px] h-[160px] bg-panel select-none",children:[It&&a.jsx("img",{src:It,alt:"thumb",className:"block w-full h-full object-contain"}),!!nt&&a.jsx("div",{className:"absolute top-1.5 left-1.5 bg-surface border border-border text-text text-xs px-1.5 py-0.5 rounded-md select-none",children:nt})]})}),a.jsxs(tl,{title:p?"Selection":"Item",open:E.overview,onToggle:()=>y("overview"),contentClassName:"px-3 pb-3 space-y-2",actions:o&&a.jsx("button",{type:"button",className:"btn btn-sm",onClick:o,disabled:!w,title:M??"Find similar",children:"Find similar"}),children:[p?a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Selected"}),a.jsxs("div",{className:"inspector-field-value",children:[t.length," files"]})]}),a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Total size"}),a.jsx("div",{className:"inspector-field-value",children:gu(qe)})]})]}):a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Filename"}),a.jsx("div",{className:"inspector-field-value break-all",title:Be,children:Be})]}),M&&a.jsx("div",{className:"text-[11px] text-muted",children:M})]}),a.jsxs(tl,{title:"Basics",open:E.basics,onToggle:()=>y("basics"),children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",role:"radiogroup","aria-label":"Star rating",children:[a.jsx("span",{className:"ui-kv-label w-16 shrink-0",children:p?"Rating (all)":"Rating"}),a.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(O=>{const re=(Z??0)>=O;return a.jsx("button",{className:`w-6 h-6 flex items-center justify-center rounded-lg border border-border/60 bg-transparent text-[13px] ${re?"text-star-active":"text-star-inactive"} hover:border-border hover:text-star-hover transition-colors`,onClick:()=>{const ye=Z===O&&!p?null:O;p&&t.length?(s==null||s(t,ye),mm(t,{star:ye})):e&&(s==null||s([e],ye),Bv(e,{star:ye}))},title:`${O} star${O>1?"s":""} (key ${O})`,"aria-label":`${O} star${O>1?"s":""}`,"aria-pressed":Z===O,children:re?"":""},O)})})]}),!p&&te&&Ee.star&&a.jsxs("div",{className:"ui-banner ui-banner-danger mt-2 text-[11px] flex items-center justify-between gap-2",children:[a.jsx("span",{children:"Rating conflict."}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:Bt,children:"Apply again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:en,children:"Keep theirs"})]})]}),!p&&F&&a.jsxs("div",{className:"text-[12px] space-y-1.5 leading-relaxed",children:[a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Ve("dimensions",`${F.w}${F.h}`),children:"Dimensions"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:O=>st("dimensions",O),style:J.dimensions?{minHeight:J.dimensions}:void 0,children:H==="dimensions"?"Copied":`${F.w}${F.h}`})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Ve("size",gu(F.size)),children:"Size"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:O=>st("size",O),style:J.size?{minHeight:J.size}:void 0,children:H==="size"?"Copied":gu(F.size)})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Ve("type",F.type),children:"Type"}),a.jsx("span",{className:"ui-kv-value break-all text-right inline-block min-w-[80px]",ref:O=>st("type",O),style:J.type?{minHeight:J.type}:void 0,children:H==="type"?"Copied":F.type})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ne&&Ve("source",ne),children:"Source"}),a.jsx("span",{className:"ui-kv-value inspector-value-clamp break-words text-right max-w-[70%] inline-block min-w-[80px]",ref:O=>st("source",O),style:J.source?{minHeight:J.source}:void 0,title:ne,children:H==="source"?"Copied":ne})]}),(()=>{const O=F.metrics||null;if(!O)return null;const re=Object.entries(O).filter(([,ft])=>ft!=null);if(!re.length)return null;const ye=(i==null?void 0:i.kind)==="metric"?i.key:null,je=[...re].sort(([ft],[_n])=>ft.localeCompare(_n));let xn=je;if(ye){const ft=je.findIndex(([_n])=>_n===ye);ft>0&&(xn=[je[ft],...je.slice(0,ft),...je.slice(ft+1)])}const nn=xn.length>xu,yo=m||!nn?xn:xn.slice(0,xu),Sa=xn.length-xu;return a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"ui-subsection-title mb-1",children:"Metrics"}),a.jsxs("div",{className:"space-y-1",children:[yo.map(([ft,_n])=>{const Pr=ye===ft;return a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:`w-24 shrink-0 ${Pr?"text-accent font-medium":"ui-kv-label"}`,children:ft}),a.jsx("span",{className:`ui-kv-value text-right ${Pr?"text-accent font-medium":""}`,children:rC(_n)})]},ft)}),nn&&a.jsx("button",{type:"button",className:"text-[11px] text-muted underline underline-offset-2 hover:text-text",onClick:()=>g(ft=>!ft),"aria-expanded":m,children:m?"Show less":`+${Sa} more`})]})]})})()]})]}),!p&&a.jsxs(tl,{title:"Metadata",open:E.metadata,onToggle:()=>y("metadata"),actions:rt,children:[a.jsx("pre",{className:`ui-code-block ${Ce} overflow-auto whitespace-pre-wrap`,children:pe?a.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:X}}):de}),D&&a.jsx("div",{className:"text-[11px] text-danger mt-1 break-words",children:D})]}),a.jsxs(tl,{title:"Notes & Tags",open:E.notes,onToggle:()=>y("notes"),contentClassName:"px-3 pb-3 space-y-2",children:[!p&&te&&(Ee.tags||Ee.notes)&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Conflicting edits detected."}),a.jsx("div",{className:"text-[11px] text-muted mt-0.5",children:"Your changes were not saved because this item was updated elsewhere."}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:Bt,children:"Apply my changes again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:en,children:"Keep theirs"})]})]}),a.jsx("textarea",{className:"ui-textarea inspector-input w-full scrollbar-thin",placeholder:"Add notes",value:T,onChange:O=>ct(O.target.value),onBlur:yn,"aria-label":p?"Notes for selected items":"Notes"}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:p?"Tags (apply to all, comma-separated)":"Tags (comma-separated)"}),a.jsx("input",{className:"ui-input inspector-input w-full",placeholder:"tag1, tag2",value:L,onChange:O=>dt(O.target.value),onBlur:Zt,"aria-label":p?"Tags for selected items":"Tags"})]})]}),a.jsx("div",{className:tn,onMouseDown:r})]}):a.jsx("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:a.jsx("div",{className:tn,onMouseDown:r})})}function aC({open:e,embeddings:t,rejected:n=[],selectedPath:r,embeddingsLoading:s=!1,embeddingsError:i,onClose:o,onSearch:l}){const[u,c]=d.useState(""),[f,h]=d.useState("path"),[v,S]=d.useState(""),[k,E]=d.useState(""),[R,y]=d.useState("50"),[m,g]=d.useState(""),[p,w]=d.useState(null),[M,L]=d.useState(!1),b=d.useRef(null),T=d.useRef(null),N=d.useMemo(()=>t.find(_=>_.name===u)??t[0]??null,[t,u]);d.useEffect(()=>{e&&(w(null),t.length>0&&!t.some(_=>_.name===u)&&c(t[0].name),r?(h("path"),S(r)):(h("vector"),S("")))},[e,t,u,r]),d.useEffect(()=>{if(!e)return;const _=f==="vector"?T.current:b.current,fe=window.requestAnimationFrame(()=>_==null?void 0:_.focus());return()=>window.cancelAnimationFrame(fe)},[e,f]);const P=d.useCallback(async()=>{if(w(null),!t.length){w("No embeddings available for similarity search.");return}if(!N){w("Select an embedding to search.");return}const _=v.trim(),fe=k.trim(),A=Number(R);if(!Number.isFinite(A)||A<=0){w("Top K must be a positive number.");return}const H=Math.min(1e3,Math.max(1,Math.floor(A))),G=m.trim()===""?null:Number(m);if(G!=null&&!Number.isFinite(G)){w("Min score must be a valid number.");return}if(f==="path"&&!_){w("Select an image path for the query.");return}if(f==="vector"&&!fe){w("Paste a base64 vector for the query.");return}const J={embedding:N.name,query_path:f==="path"?_:null,query_vector_b64:f==="vector"?fe:null,top_k:H,min_score:G};L(!0);try{await l(J),o()}catch(ce){ce instanceof gn||ce instanceof Error?w(ce.message):w("Failed to run similarity search.")}finally{L(!1)}},[t.length,N,v,k,R,m,f,l,o]);d.useEffect(()=>{if(!e)return;const _=fe=>{if(fe.key==="Escape"){fe.preventDefault(),o();return}(fe.ctrlKey||fe.metaKey)&&fe.key==="Enter"&&(fe.preventDefault(),P())};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[e,o,P]);const U=d.useCallback(()=>{var _;r&&(h("path"),S(r),(_=b.current)==null||_.focus())},[r]);if(!e)return null;const D=t.map(_=>({value:_.name,label:_.name})),oe=n.length>0,ue=n.slice(0,3);return a.jsx("div",{className:"fixed inset-0 z-[var(--z-overlay)] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",onClick:_=>{_.target===_.currentTarget&&o()},children:a.jsxs("div",{className:"w-full max-w-2xl rounded-lg border border-border bg-panel shadow-[0_20px_50px_rgba(0,0,0,0.55)]",onClick:_=>_.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Find similar",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-text",children:"Find similar"}),a.jsx("div",{className:"text-xs text-muted",children:"Search with embeddings"})]}),a.jsx("button",{className:"btn btn-sm",onClick:o,"aria-label":"Close",children:"Close"})]}),a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[i&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:i}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Embedding"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Lc,{value:(N==null?void 0:N.name)??"",onChange:c,options:D,placeholder:s?"Loading embeddings...":"Select embedding",disabled:!t.length,triggerClassName:"min-w-[180px]"}),N&&a.jsxs("span",{className:"text-xs text-muted",children:[N.dimension," dims, ",N.metric,", ",N.dtype]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Query mode"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",className:`btn btn-sm ${f==="path"?"btn-active":""}`,onClick:()=>h("path"),"aria-pressed":f==="path",children:"Selected image"}),a.jsx("button",{type:"button",className:`btn btn-sm ${f==="vector"?"btn-active":""}`,onClick:()=>h("vector"),"aria-pressed":f==="vector",children:"Vector input"})]})]}),f==="path"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Image path"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:b,type:"text",className:"input w-full",value:v,onChange:_=>S(_.target.value),placeholder:r?"Selected image path":"Select an image first"}),a.jsx("button",{type:"button",className:"btn btn-sm",onClick:U,disabled:!r,title:r?"Use selected image":"Select an image first",children:"Use selected"})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Vector (base64 float32)"}),a.jsx("textarea",{ref:T,className:"ui-textarea w-full font-mono text-[11px]",rows:5,value:k,onChange:_=>E(_.target.value),placeholder:"Paste base64-encoded float32 vector"}),a.jsx("div",{className:"text-[11px] text-muted",children:"Base64 of little-endian float32. Length must match embedding dimension."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Top K"}),a.jsx("input",{type:"number",min:1,max:1e3,step:1,className:"input ui-number w-full",value:R,onChange:_=>y(_.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Min score"}),a.jsx("input",{type:"number",step:.01,className:"input ui-number w-full",value:m,onChange:_=>g(_.target.value),placeholder:"Optional"})]})]}),oe&&a.jsxs("div",{className:"ui-banner text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Skipped columns"}),a.jsxs("div",{className:"mt-1 space-y-1 text-muted",children:[ue.map(_=>a.jsxs("div",{children:[_.name,": ",_.reason]},_.name)),n.length>ue.length&&a.jsxs("div",{children:["+",n.length-ue.length," more"]})]})]}),p&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:p})]}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-border",children:[a.jsx("div",{className:"text-xs text-muted",children:N?`Metric: ${N.metric}`:"Metric: cosine"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:o,disabled:M,children:"Cancel"}),a.jsx("button",{className:"btn btn-sm btn-active",onClick:P,disabled:M||!t.length,children:M?"Searching...":"Find similar"})]})]})]})})}const Hv=1,xl=200,uC=5*6e4,cC=6e4,Vv=(e,t)=>t!=null&&t.recursive?["folder",e,"recursive",t.page??Hv,t.pageSize??xl]:["folder",e];function Qv(e){return e[0]!=="folder"||e[2]!=="recursive"||typeof e[1]!="string"||typeof e[3]!="number"||typeof e[4]!="number"?null:e}function dC(e){return Qv(e)!==null}function fC(e,t,n=!0){if(!dC(e))return!0;const r=Qv(e);if(r==null)return!1;const[,s,,i]=r;return i!==Hv?!1:!!(s===t||n&&s==="/")}function hC(e,t,n=!0){return!Array.isArray(e)||e[0]!=="folder"?!1:!fC(e,t,n)}const mC=15e3;function pC(e,t){return xe.getFolder(e,t)}function Bc(e,t=!1,n){const r=ya(),s={recursive:t,page:n==null?void 0:n.page,pageSize:n==null?void 0:n.pageSize,legacyRecursive:n==null?void 0:n.legacyRecursive},i=!!s.recursive;return ga({queryKey:Vv(e,s),queryFn:()=>pC(e,s),enabled:(n==null?void 0:n.enabled)??!0,staleTime:1e4,gcTime:i?cC:uC,retry:2,retryDelay:o=>Math.min(1e3*Math.pow(2,o),5e3),refetchOnWindowFocus:!1,refetchInterval:r?mC:!1,refetchIntervalInBackground:r})}const gC=(e,t)=>["search",e,t],vC=2e4;function yC(e,t){const n=ya();return ga({enabled:!!e.trim(),queryKey:gC(e,t),queryFn:()=>xe.search(e,t),staleTime:3e3,gcTime:6e4,placeholderData:r=>r,retry:1,refetchInterval:n?vC:!1,refetchIntervalInBackground:n})}const xC=()=>["embeddings"];function wC(){return ga({queryKey:xC(),queryFn:xe.getEmbeddings,staleTime:6e4,gcTime:5*6e4,retry:1,refetchOnWindowFocus:!1})}const SC=/^[\/@a-zA-Z0-9._\-\/]{1,512}$/,CC=[".jpg",".jpeg",".png",".webp"];function Qn(e){try{const t=decodeURI(e||""),r=(t.startsWith("/")?t:`/${t}`).replace(/\/{2,}/g,"/"),s=r.length>1?r.replace(/\/$/,""):r;return SC.test(s)?s:"/"}catch{return"/"}}function ym(){return(window.location.hash||"").replace(/^#/,"")}function xm(e){const t=Qn(e),n=`#${encodeURI(t)}`;window.location.hash!==n&&(window.location.hash=n)}function nl(e){const t=Qn(e),n=`#${encodeURI(t)}`;if(window.location.hash!==n){const r=`${window.location.pathname}${window.location.search}${n}`;window.history.replaceState(window.history.state,"",r)}}function kC(e){const n=Qn(e).toLowerCase();return CC.some(r=>n.endsWith(r))}function bC(e,t){const n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,""),s=[n,r].filter(Boolean).join("/");return s.startsWith("/")?s:`/${s}`}function wm(e){const n=Qn(e).split("/").filter(Boolean);return n.length<=1?"/":"/"+n.slice(0,-1).join("/")}function EC(e){return e.endsWith("/_trash_")}const NC=new Set([0,1,2,3,4,5]),Zd=new Set(["<","<=",">",">="]),jC=/^\d{4}-\d{2}-\d{2}$/;function MC(e,t){return!t||!t.and.length?e:e.filter(n=>RC(n,t.and))}function RC(e,t){for(const n of t)if(!LC(e,n))return!1;return!0}function LC(e,t){var n,r,s,i,o,l,u;if("stars"in t){const c=t.stars;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsIn"in t){const c=t.starsIn.values;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsNotIn"in t){const c=t.starsNotIn.values;if(!c||!c.length)return!0;const f=e.star??0;return!c.includes(f)}if("nameContains"in t){const c=(n=t.nameContains.value)==null?void 0:n.trim();return c?(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("nameNotContains"in t){const c=(r=t.nameNotContains.value)==null?void 0:r.trim();return c?!(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("commentsContains"in t){const c=(s=t.commentsContains.value)==null?void 0:s.trim();if(!c)return!0;const f=e.comments??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("commentsNotContains"in t){const c=(i=t.commentsNotContains.value)==null?void 0:i.trim();if(!c)return!0;const f=e.comments??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("urlContains"in t){const c=(o=t.urlContains.value)==null?void 0:o.trim();if(!c)return!0;const f=e.source??e.url??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("urlNotContains"in t){const c=(l=t.urlNotContains.value)==null?void 0:l.trim();if(!c)return!0;const f=e.source??e.url??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("dateRange"in t){const{from:c,to:f}=t.dateRange;if(!c&&!f)return!0;if(!e.addedAt)return!1;const h=Date.parse(e.addedAt);if(Number.isNaN(h))return!1;const v=km(c,!1),S=km(f,!0);return!(v!=null&&h<v||S!=null&&h>S)}if("widthCompare"in t){const{op:c,value:f}=t.widthCompare;if(!Number.isFinite(f))return!0;const h=e.w;return!Number.isFinite(h)||h<=0?!1:bm(h,c,f)}if("heightCompare"in t){const{op:c,value:f}=t.heightCompare;if(!Number.isFinite(f))return!0;const h=e.h;return!Number.isFinite(h)||h<=0?!1:bm(h,c,f)}if("metricRange"in t){const{key:c,min:f,max:h}=t.metricRange,v=(u=e.metrics)==null?void 0:u[c];return!(v==null||v<f||v>h)}return!0}function Wc(e){if(!e||typeof e!="object")return null;const t=e.and;if(!Array.isArray(t))return null;const n=[];for(const r of t){const s=VC(r);s&&n.push(s)}return{and:n}}function Sm(e){var r;const t=e.and.find(s=>"stars"in s),n=e.and.find(s=>"starsIn"in s);return(r=n==null?void 0:n.starsIn)!=null&&r.values?n.starsIn.values:(t==null?void 0:t.stars)??[]}function wu(e,t){return Kv(e,t)}function TC(e){var n;const t=e.and.find(r=>"starsIn"in r);return((n=t==null?void 0:t.starsIn)==null?void 0:n.values)??[]}function Kv(e,t){const n=Ai(t),r=e.and.filter(s=>!("starsIn"in s)&&!("stars"in s));return n.length?{and:[{starsIn:{values:n}},...r]}:{and:r}}function _C(e){var n;const t=e.and.find(r=>"starsNotIn"in r);return((n=t==null?void 0:t.starsNotIn)==null?void 0:n.values)??[]}function qv(e,t){const n=Ai(t),r=e.and.filter(s=>!("starsNotIn"in s));return n.length?{and:[{starsNotIn:{values:n}},...r]}:{and:r}}function PC(e){var n;const t=e.and.find(r=>"nameContains"in r);return((n=t==null?void 0:t.nameContains)==null?void 0:n.value)??null}function Gv(e,t){const n=qt(t),r=e.and.filter(s=>!("nameContains"in s));return n?{and:[{nameContains:{value:n}},...r]}:{and:r}}function IC(e){var n;const t=e.and.find(r=>"nameNotContains"in r);return((n=t==null?void 0:t.nameNotContains)==null?void 0:n.value)??null}function Yv(e,t){const n=qt(t),r=e.and.filter(s=>!("nameNotContains"in s));return n?{and:[{nameNotContains:{value:n}},...r]}:{and:r}}function FC(e){var n;const t=e.and.find(r=>"commentsContains"in r);return((n=t==null?void 0:t.commentsContains)==null?void 0:n.value)??null}function Xv(e,t){const n=qt(t),r=e.and.filter(s=>!("commentsContains"in s));return n?{and:[{commentsContains:{value:n}},...r]}:{and:r}}function OC(e){var n;const t=e.and.find(r=>"commentsNotContains"in r);return((n=t==null?void 0:t.commentsNotContains)==null?void 0:n.value)??null}function Jv(e,t){const n=qt(t),r=e.and.filter(s=>!("commentsNotContains"in s));return n?{and:[{commentsNotContains:{value:n}},...r]}:{and:r}}function zC(e){var n;const t=e.and.find(r=>"urlContains"in r);return((n=t==null?void 0:t.urlContains)==null?void 0:n.value)??null}function Zv(e,t){const n=qt(t),r=e.and.filter(s=>!("urlContains"in s));return n?{and:[{urlContains:{value:n}},...r]}:{and:r}}function DC(e){var n;const t=e.and.find(r=>"urlNotContains"in r);return((n=t==null?void 0:t.urlNotContains)==null?void 0:n.value)??null}function ey(e,t){const n=qt(t),r=e.and.filter(s=>!("urlNotContains"in s));return n?{and:[{urlNotContains:{value:n}},...r]}:{and:r}}function AC(e){const t=e.and.find(n=>"dateRange"in n);return(t==null?void 0:t.dateRange)??null}function Hc(e,t){const n=Jl((t==null?void 0:t.from)??null),r=Jl((t==null?void 0:t.to)??null),s=e.and.filter(i=>!("dateRange"in i));return!n&&!r?{and:s}:{and:[{dateRange:{...n?{from:n}:{},...r?{to:r}:{}}},...s]}}function $C(e){const t=e.and.find(n=>"widthCompare"in n);return(t==null?void 0:t.widthCompare)??null}function wl(e,t){const n=e.and.filter(r=>!("widthCompare"in r));return!t||!Number.isFinite(t.value)||!Zd.has(t.op)?{and:n}:{and:[{widthCompare:{op:t.op,value:t.value}},...n]}}function UC(e){const t=e.and.find(n=>"heightCompare"in n);return(t==null?void 0:t.heightCompare)??null}function Sl(e,t){const n=e.and.filter(r=>!("heightCompare"in r));return!t||!Number.isFinite(t.value)||!Zd.has(t.op)?{and:n}:{and:[{heightCompare:{op:t.op,value:t.value}},...n]}}function BC(e,t){const n=e.and.find(r=>"metricRange"in r&&r.metricRange.key===t);return(n==null?void 0:n.metricRange)??null}function WC(e,t,n){const r=e.and.filter(s=>!("metricRange"in s&&s.metricRange.key===t));return n?{and:[{metricRange:{key:t,min:n.min,max:n.max}},...r]}:{and:r}}function HC(e){const t=Wc(e);return t?t.and.length:0}function VC(e){var t,n,r,s,i,o,l,u;if(!e||typeof e!="object")return null;if("stars"in e){const c=Ai(e.stars);return c.length?{starsIn:{values:c}}:null}if("starsIn"in e){const c=Ai((t=e.starsIn)==null?void 0:t.values);return c.length?{starsIn:{values:c}}:null}if("starsNotIn"in e){const c=Ai((n=e.starsNotIn)==null?void 0:n.values);return c.length?{starsNotIn:{values:c}}:null}if("nameContains"in e){const c=qt((r=e.nameContains)==null?void 0:r.value);return c?{nameContains:{value:c}}:null}if("nameNotContains"in e){const c=qt((s=e.nameNotContains)==null?void 0:s.value);return c?{nameNotContains:{value:c}}:null}if("commentsContains"in e){const c=qt((i=e.commentsContains)==null?void 0:i.value);return c?{commentsContains:{value:c}}:null}if("commentsNotContains"in e){const c=qt((o=e.commentsNotContains)==null?void 0:o.value);return c?{commentsNotContains:{value:c}}:null}if("urlContains"in e){const c=qt((l=e.urlContains)==null?void 0:l.value);return c?{urlContains:{value:c}}:null}if("urlNotContains"in e){const c=qt((u=e.urlNotContains)==null?void 0:u.value);return c?{urlNotContains:{value:c}}:null}if("dateRange"in e){const c=e.dateRange,f=Jl((c==null?void 0:c.from)??null),h=Jl((c==null?void 0:c.to)??null);return!f&&!h?null:{dateRange:{...f?{from:f}:{},...h?{to:h}:{}}}}if("widthCompare"in e){const c=e.widthCompare,f=Cm(c==null?void 0:c.op,c==null?void 0:c.value);return f?{widthCompare:f}:null}if("heightCompare"in e){const c=e.heightCompare,f=Cm(c==null?void 0:c.op,c==null?void 0:c.value);return f?{heightCompare:f}:null}if("metricRange"in e){const c=e.metricRange;if(!c||typeof c!="object")return null;const f=typeof c.key=="string"?c.key:"",h=Vc(c.min),v=Vc(c.max);return!f||h==null||v==null||h>v?null:{metricRange:{key:f,min:h,max:v}}}return null}function Ai(e){if(!Array.isArray(e))return[];const t=[],n=new Set;for(const r of e){const s=typeof r=="number"?r:typeof r=="string"?Number(r):NaN;!Number.isInteger(s)||!NC.has(s)||n.has(s)||(n.add(s),t.push(s))}return t}function qt(e){if(typeof e!="string")return null;const t=e.trim();return t||null}function Jl(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=Date.parse(t);return Number.isNaN(n)?null:t}function Cm(e,t){if(typeof e!="string"||!Zd.has(e))return null;const n=Vc(t);return n==null?null:{op:e,value:n}}function km(e,t){if(!e)return null;const n=e.trim();if(!n)return null;const r=Date.parse(n);return Number.isNaN(r)?null:t&&jC.test(n)?r+24*60*60*1e3-1:r}function bm(e,t,n){switch(t){case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;default:return!0}}function Vc(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function Em(e){return e.addedAt?Date.parse(e.addedAt):0}function Zl(e,t){return e.name.localeCompare(t.name)}function QC(e,t){const n=Em(e),r=Em(t);return n===r?Zl(e,t):n-r}function KC(e){return(t,n)=>{var i,o;const r=(i=t.metrics)==null?void 0:i[e],s=(o=n.metrics)==null?void 0:o[e];return r==null&&s==null?Zl(t,n):r==null?1:s==null?-1:r===s?Zl(t,n):r-s}}function Nm(e,t){return MC(e,t)}function qC(e){let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function GC(e,t){const n=qC(t||1),r=[...e];for(let s=r.length-1;s>0;s-=1){const i=Math.floor(n()*(s+1));[r[s],r[i]]=[r[i],r[s]]}return r}function YC(e,t,n){if(t.kind==="builtin"&&t.key==="random"){const i=n??Date.now();return GC(e,i)}let r=QC;t.kind==="metric"?r=KC(t.key):t.key==="name"&&(r=Zl);const s=[...e].sort(r);return t.dir==="desc"?s.reverse():s}const jm="leftW.folders",Mm="leftW.metrics",XC="leftW",Rm="rightW";function JC(e,t){const[n,r]=d.useState(240),[s,i]=d.useState(320),[o,l]=d.useState(240),u=t==="metrics"?s:n,c=d.useRef(u),f=d.useRef(o);return d.useEffect(()=>{c.current=u},[u]),d.useEffect(()=>{f.current=o},[o]),d.useEffect(()=>{try{const S=window.localStorage,k=Number(S.getItem(jm)??S.getItem(XC));Number.isFinite(k)&&k>0&&r(k);const E=Number(S.getItem(Mm));Number.isFinite(E)&&E>0&&i(E);const R=Number(S.getItem(Rm));Number.isFinite(R)&&R>0&&l(R)}catch{}},[]),{leftW:u,rightW:o,onResizeLeft:S=>{S.preventDefault();const k=e.current;if(!k)return;const E=k.getBoundingClientRect(),R=t==="metrics"?Mm:jm;let y=c.current;const m=p=>{const w=p.clientX-E.left,M=200,L=Math.max(M,E.width-f.current-200),b=Math.min(Math.max(w,M),L);y=b,t==="metrics"?i(b):r(b)},g=()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",g);try{window.localStorage.setItem(R,String(y))}catch{}};window.addEventListener("mousemove",m),window.addEventListener("mouseup",g)},onResizeRight:S=>{S.preventDefault();const k=e.current;if(!k)return;const E=k.getBoundingClientRect();let R=f.current;const y=g=>{const p=g.clientX-E.left,w=E.width-p,M=240,L=Math.max(M,E.width-c.current-200),b=Math.min(Math.max(w,M),L);R=b,f.current=b,l(b)},m=()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",m);try{window.localStorage.setItem(Rm,String(R))}catch{}};window.addEventListener("mousemove",y),window.addEventListener("mouseup",m)}}}function ZC({x:e,y:t,items:n}){return a.jsx("div",{className:"dropdown-panel fixed",role:"menu",style:{left:e,top:t,minWidth:180},onClick:r=>r.stopPropagation(),children:n.map((r,s)=>a.jsxs("button",{className:`dropdown-item w-full ${r.danger?"text-danger hover:text-danger":""}`,role:"menuitem","aria-disabled":r.disabled,disabled:r.disabled,onClick:i=>{i.stopPropagation(),r.disabled||r.onClick()},children:[r.icon&&a.jsx("span",{className:"shrink-0",children:r.icon}),a.jsx("span",{children:r.label})]},s))})}function Lm(e){return JSON.stringify(e,null,2)}function Tm(e){const t=s=>'"'+s.replaceAll('"','""')+'"',n="path,folder,name,star,type,size,width,height,tags,notes",r=e.map(s=>{const i=(s.tags||[]).join(" "),o=s.notes||"";return[s.path,s.folder,s.name,String(s.star??""),s.type??"",s.size??"",s.width??"",s.height??"",i,o].map(l=>t(String(l))).join(",")});return[n,...r].join(`
`)}function _m(e){return e.map(t=>{const n=t.path.split("/").filter(Boolean);n.pop();const r=n.length?`/${n.join("/")}`:"/";return{path:t.path,folder:r,name:t.name,star:t.star??null,type:t.type,size:t.size,width:t.w,height:t.h}})}function ek(e,t=250){const[n,r]=Cl.useState(e);return Cl.useEffect(()=>{const s=window.setTimeout(()=>r(e),Math.max(0,t));return()=>window.clearTimeout(s)},[e,t]),n}const ty="application/x-lenslet-paths",tk='[role="treeitem"].drop-target';function Pm(e){var n;return Array.from(((n=e.dataTransfer)==null?void 0:n.types)||[]).includes(ty)}function nk(e){document.querySelectorAll(tk).forEach(t=>{t!==e&&t.classList.remove("drop-target")})}function Im(e){nk(e),e.classList.add("drop-target")}function Fm(e){return e.startsWith("/")?e:`/${e}`}function rk({path:e,isLeaf:t}){const n=_r(),r=d.useCallback(l=>{Pm(l)&&(l.preventDefault(),t&&Im(l.currentTarget))},[t]),s=d.useCallback(l=>{!t||!Pm(l)||(l.preventDefault(),Im(l.currentTarget))},[t]),i=d.useCallback(l=>{const u=l.currentTarget,c=document.elementFromPoint(l.clientX,l.clientY);c&&u.contains(c)||u.classList.remove("drop-target")},[]),o=d.useCallback(async l=>{const u=l.dataTransfer;if(!u)return;l.preventDefault(),l.currentTarget.classList.remove("drop-target");const c=u.getData(ty),h=(c?JSON.parse(c):[]).filter(Boolean);if(!h.length)return;let v=h[0].split("/").slice(0,-1).join("/")||"/";v=Fm(v);const S=Fm(e);try{for(const k of h)await xe.moveFile(k,S);n.invalidateQueries({queryKey:["folder",v]}),n.invalidateQueries({queryKey:["folder",S]}),n.setQueryData(["folder",v],k=>!k||!Array.isArray(k.items)?k:{...k,items:k.items.filter(E=>!h.includes(E.path))})}catch{}},[e,n]);return{onDragOver:r,onDragEnter:s,onDragLeave:i,onDrop:o}}const sk='[role="tree"] [role="treeitem"]';function ik(){return Array.from(document.querySelectorAll(sk))}function ok(e,t){var i;const n=ik(),r=n.findIndex(o=>o===e);if(r===-1)return;let s=r;t==="ArrowDown"?s=Math.min(n.length-1,r+1):t==="ArrowUp"?s=Math.max(0,r-1):t==="Home"?s=0:t==="End"&&(s=n.length-1),(i=n[s])==null||i.focus()}function lk({path:e,isLeaf:t,isExpanded:n,setExpanded:r,onOpen:s}){return d.useCallback(i=>{if(i.key==="Enter"){i.preventDefault(),s(e);return}if(i.key==="ArrowRight"){!t&&!n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.add(e),l}));return}if(i.key==="ArrowLeft"){!t&&n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.delete(e),l}));return}(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="Home"||i.key==="End")&&(i.preventDefault(),ok(i.currentTarget,i.key))},[e,t,n,r,s])}function ak({current:e,roots:t,data:n,onOpen:r,onResize:s,onContextMenu:i,countVersion:o,className:l,showResizeHandle:u=!0}){const[c,f]=d.useState(new Set(["/"])),h=d.useRef(new Map),v=d.useRef(new Map),S=_r(),k=d.useCallback(async R=>{const y=Qn(R||"/"),m=h.current,g=v.current,p=m.get(y);if(p!==void 0)return p;const w=S.getQueryData(Vv(y,{recursive:!0}));if(w){const b=w.totalItems??w.items.length;return m.set(y,b),b}const M=g.get(y);if(M)return M;const L=(async()=>{try{const b=await xe.getFolder(y,{recursive:!0}),T=b.totalItems??b.items.length;return m.set(y,T),T}finally{g.delete(y)}})();return g.set(y,L),L},[S]);d.useEffect(()=>{h.current.clear(),v.current.clear()},[o]),d.useEffect(()=>{const R=e.split("/").filter(Boolean),y=["/"];let m="";for(const g of R)m=m?`${m}/${g}`:`/${g}`,y.push(m);f(g=>{const p=new Set(g);for(const w of y)p.add(w);return p})},[e]);const E=l??"h-full overflow-auto bg-panel scrollbar-thin";return a.jsxs("div",{className:E,children:[a.jsx("div",{className:"p-1",role:"tree","aria-label":"Folders",children:t.map(R=>a.jsx(ny,{path:R.path,label:R.label,depth:0,current:e,expanded:c,setExpanded:f,onOpen:r,onContextMenu:i,initial:n,getSubtreeCount:k,countVersion:o},R.path))}),u&&a.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 left-[calc(var(--left)-3px)] hover:bg-accent/20",onMouseDown:s})]})}function ny({path:e,label:t,depth:n,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,initial:u,getSubtreeCount:c,countVersion:f}){var N;const h=s.has(e),v=r===e,S=e==="/"||h||v,{data:k}=Bc(e,!1,{enabled:S}),E=u&&e===u.path?u:k,y=!!E?E.dirs.length===0:!1,[m,g]=d.useState(E?E.items.length:null),p=lk({path:e,isLeaf:y,isExpanded:h,setExpanded:i,onOpen:o}),{onDragOver:w,onDragEnter:M,onDragLeave:L,onDrop:b}=rk({path:e,isLeaf:y}),T=P=>{P.stopPropagation(),i(U=>{const D=new Set(U);return D.has(e)?D.delete(e):D.add(e),D})};return d.useEffect(()=>{let P=!1;if(!E){g(null);return}if(g(E.items.length),!!(h&&(n>0||v)))return c(e).then(D=>{P||g(D)}).catch(D=>{P||console.warn(`Failed to compute subtree count for ${e}:`,D)}),()=>{P=!0}},[E,e,c,f,h,n,v]),a.jsxs("div",{children:[a.jsxs("div",{className:`flex items-center gap-1.5 py-0.5 px-2 rounded-md cursor-pointer min-h-[28px] outline-none transition-colors duration-75 ${v?"bg-accent/20 text-accent font-medium":"hover:bg-white/5 text-text"}`,role:"treeitem","aria-level":n+1,"aria-expanded":y?void 0:h,"aria-selected":v,tabIndex:v?0:-1,style:{paddingLeft:8+n*14},onClick:()=>o(e),onContextMenu:P=>{P.preventDefault(),P.stopPropagation(),l&&l(P,e)},onKeyDown:p,onDragOver:w,onDragEnter:M,onDragLeave:L,onDrop:b,children:[a.jsx("span",{className:"w-4 text-center opacity-60 hover:opacity-100 text-[10px]",onClick:T,children:h?"":""}),a.jsx("span",{className:"flex-1 overflow-hidden truncate text-sm",title:t,children:JS(t,28)}),m!==null&&a.jsx("span",{className:"text-[10px] opacity-50 bg-white/5 border border-white/5 rounded px-1.5 min-w-[24px] text-center",children:m})]}),h&&((N=E==null?void 0:E.dirs)==null?void 0:N.map(P=>a.jsx(ny,{path:bC(e,P.name),label:P.name,depth:n+1,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,getSubtreeCount:c,countVersion:f},P.name)))]})}const Vr=40,uk=12,Om=[5,4,3,2,1],zm=["<","<=",">",">="];function ck({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l,onChangeFilters:u}){const c=r&&r.length?a.jsx(dk,{selectedItems:r,metricKeys:n}):null,f=a.jsx(fk,{filters:o,onChangeFilters:u});return n.length?a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,a.jsx(hk,{items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}),f]}):a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,f,a.jsx("div",{className:"p-4 text-sm text-muted",children:"No metrics found in this dataset."})]})}function dk({selectedItems:e,metricKeys:t}){const n=d.useMemo(()=>{if(!e.length)return null;const u=new Map;for(const h of e){const v=h.metrics;if(v)for(const[S,k]of Object.entries(v)){if(k==null||Number.isNaN(k))continue;const E=u.get(S);E?E.push(k):u.set(S,[k])}}return u.size?{entries:(t.length?t.filter(h=>u.has(h)):Array.from(u.keys()).sort()).map(h=>{const v=u.get(h)??[],S=Math.min(...v),k=Math.max(...v),E=v.reduce((R,y)=>R+y,0)/Math.max(1,v.length);return{key:h,value:v[0],min:S,max:k,avg:E,count:v.length}}),totalItems:e.length}:null},[e,t]);if(!n)return null;const{entries:r,totalItems:s}=n,i=r.slice(0,uk),o=r.length-i.length,l=s>1;return a.jsxs("div",{className:"ui-card",children:[a.jsxs("div",{className:"ui-card-header",children:[a.jsx("div",{className:"ui-section-title",children:"Selected metrics"}),a.jsxs("div",{className:"text-[11px] text-muted",children:[s," item",s===1?"":"s"]})]}),a.jsxs("div",{className:"space-y-1 text-[12px]",children:[i.map(u=>a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-muted w-28 shrink-0 truncate",title:u.key,children:u.key}),a.jsxs("span",{className:"font-mono text-text text-right tabular-nums",children:[l?`${Ft(u.min)}  ${Ft(u.max)}`:Ft(u.value),l&&a.jsxs("span",{className:"text-[11px] text-muted ml-2",children:["avg ",Ft(u.avg),u.count!==s?`  ${u.count}/${s}`:""]})]})]},u.key)),o>0&&a.jsxs("div",{className:"text-[11px] text-muted",children:["+",o," more"]})]})]})}function fk({filters:e,onChangeFilters:t}){const n=d.useMemo(()=>TC(e),[e]),r=d.useMemo(()=>_C(e),[e]),s=d.useMemo(()=>PC(e)??"",[e]),i=d.useMemo(()=>IC(e)??"",[e]),o=d.useMemo(()=>FC(e)??"",[e]),l=d.useMemo(()=>OC(e)??"",[e]),u=d.useMemo(()=>zC(e)??"",[e]),c=d.useMemo(()=>DC(e)??"",[e]),f=d.useMemo(()=>AC(e)??{},[e]),h=d.useMemo(()=>Hm(f.from),[f.from]),v=d.useMemo(()=>Hm(f.to),[f.to]),S=d.useMemo(()=>$C(e),[e]),k=d.useMemo(()=>UC(e),[e]),[E,R]=d.useState((S==null?void 0:S.op)??">="),[y,m]=d.useState((k==null?void 0:k.op)??">=");d.useEffect(()=>{S!=null&&S.op&&R(S.op)},[S==null?void 0:S.op]),d.useEffect(()=>{k!=null&&k.op&&m(k.op)},[k==null?void 0:k.op]);const g=(p,w)=>{const M=new Set(n),L=new Set(r);p==="include"?M.has(w)?M.delete(w):(M.add(w),L.delete(w)):L.has(w)?L.delete(w):(L.add(w),M.delete(w));let b=Kv(e,Array.from(M));b=qv(b,Array.from(L)),t(b)};return a.jsxs("div",{className:"ui-card",children:[a.jsx("div",{className:"ui-section-title mb-3",children:"Attributes"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Rating"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Include"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[Om.map(p=>{const w=n.includes(p);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${w?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>g("include",p),"aria-pressed":w,title:`Include ${p} star${p>1?"s":""}`,children:[p,""]},`stars-in-${p}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${n.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>g("include",0),"aria-pressed":n.includes(0),title:"Include unrated",children:"None"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Exclude"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[Om.map(p=>{const w=r.includes(p);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${w?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>g("exclude",p),"aria-pressed":w,title:`Exclude ${p} star${p>1?"s":""}`,children:[p,""]},`stars-out-${p}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${r.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>g("exclude",0),"aria-pressed":r.includes(0),title:"Exclude unrated",children:"None"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Filename"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:s,placeholder:"e.g. draft",onChange:p=>t(Gv(e,p.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:i,placeholder:"e.g. v1",onChange:p=>t(Yv(e,p.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Comments"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:o,placeholder:"e.g. hero",onChange:p=>t(Xv(e,p.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:l,placeholder:"e.g. todo",onChange:p=>t(Jv(e,p.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"URL"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:u,placeholder:"e.g. s3://bucket",onChange:p=>t(Zv(e,p.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:c,placeholder:"e.g. http://",onChange:p=>t(ey(e,p.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Date Added"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"From"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:h,onChange:p=>t(Hc(e,{from:p.target.value||null,to:f.to??null}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"To"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:v,onChange:p=>t(Hc(e,{from:f.from??null,to:p.target.value||null}))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Dimensions"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Width"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:E,onChange:p=>{const w=p.target.value;R(w),S&&t(wl(e,{op:w,value:S.value}))},children:zm.map(p=>a.jsx("option",{value:p,children:p},`w-${p}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:S?String(S.value):"",min:0,placeholder:"px",onChange:p=>{const w=p.target.value;if(!w){t(wl(e,null));return}const M=Number(w);Number.isFinite(M)&&t(wl(e,{op:E,value:M}))}})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Height"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:y,onChange:p=>{const w=p.target.value;m(w),k&&t(Sl(e,{op:w,value:k.value}))},children:zm.map(p=>a.jsx("option",{value:p,children:p},`h-${p}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:k?String(k.value):"",min:0,placeholder:"px",onChange:p=>{const w=p.target.value;if(!w){t(Sl(e,null));return}const M=Number(w);Number.isFinite(M)&&t(Sl(e,{op:y,value:M}))}})]})]})]})]})]})]})}function hk({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}){const[u,c]=d.useState(!1),f=s&&n.includes(s)?s:n[0];return a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("label",{className:"ui-label",children:"Metric"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-[11px]",onClick:()=>c(h=>!h),"aria-pressed":u,children:u?"Show one":"Show all"})]}),u?a.jsx("div",{className:"ui-input ui-input-readonly w-full flex items-center text-xs",children:"All metrics"}):a.jsx("select",{className:"ui-select w-full",value:f,onChange:h=>i(h.target.value),children:n.map(h=>a.jsx("option",{value:h,children:h},h))})]}),u?a.jsx("div",{className:"space-y-3",children:n.map(h=>a.jsx(Dm,{metricKey:h,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l,showTitle:!0},h))}):f?a.jsx(Dm,{metricKey:f,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l}):a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]})}function Dm({items:e,filteredItems:t,metricKey:n,selectedItems:r,filters:s,onChangeRange:i,showTitle:o=!1}){const l=d.useMemo(()=>Am(e,n),[e,n]),u=d.useMemo(()=>Su(l,Vr),[l]),c=d.useMemo(()=>Am(t,n),[t,n]),f=d.useMemo(()=>u?Su(c,Vr,u):null,[c,u]),h=BC(s,n),[v,S]=d.useState(null),[k,E]=d.useState(!1),R=d.useRef(null),y=d.useRef(null),m=d.useRef(!1),g=d.useRef(null),[p,w]=d.useState(null),[M,L]=d.useState(""),[b,T]=d.useState(""),[N,P]=d.useState(null),U=v??h,D=u?{min:u.min,max:u.max}:null,oe=d.useMemo(()=>{var K;if(!(r!=null&&r.length))return[];const Q=[];for(const Z of r){const te=(K=Z.metrics)==null?void 0:K[n];te==null||Number.isNaN(te)||Q.push(te)}return Q},[r,n]),ue=oe.length===1?oe[0]:null,_=d.useMemo(()=>!u||oe.length<2?null:Su(oe,Vr,u),[oe,u]);d.useEffect(()=>{if(!h||!D){N!=="min"&&L(h?tr(h.min):""),N!=="max"&&T(h?tr(h.max):"");return}if(N!=="min"){const Q=ys(h.min,D.min)?"":tr(h.min);L(Q)}if(N!=="max"){const Q=ys(h.max,D.max)?"":tr(h.max);T(Q)}},[h,D,N]),d.useEffect(()=>{w(null)},[n,D==null?void 0:D.min,D==null?void 0:D.max]);const fe=Q=>{var te;if(!D)return null;const K=(te=g.current)==null?void 0:te.getBoundingClientRect();if(!K)return null;const Z=ef((Q.clientX-K.left)/K.width);return D.min+(D.max-D.min)*Z},A=(Q,K)=>{if(!D)return;const Z=R.current??Q,te=Um(Z,Q);S(te),K&&i(n,te)},H=Q=>{var Z;if(!D)return;Q.preventDefault();const K=fe(Q);K!=null&&(E(!0),S(null),R.current=K,y.current=Q.clientX,m.current=!1,w(K),(Z=g.current)==null||Z.setPointerCapture(Q.pointerId))},G=Q=>{const K=fe(Q);if(K==null){k||w(null);return}if(w(K),k){const Z=y.current;if(!m.current&&Z!=null){if(Math.abs(Q.clientX-Z)<4)return;m.current=!0}m.current&&A(K,!1)}},J=Q=>{var Z;if(!k)return;E(!1),(Z=g.current)==null||Z.releasePointerCapture(Q.pointerId);const K=fe(Q);m.current&&K!=null?(w(K),A(K,!0)):h&&i(n,null),R.current=null,y.current=null,m.current=!1,setTimeout(()=>S(null),0)},ce=(Q,K)=>{if(!D)return;const Z=Bm(Q),te=Bm(K);if(!Z.valid||!te.valid){Z.valid||L(h?tr(h.min):""),te.valid||T(h?tr(h.max):"");return}if(Z.value==null&&te.value==null){i(n,null);return}const Ee=Z.value??D.min,ze=te.value??D.max,qe=Wm(Ee,D.min,D.max),Ue=Wm(ze,D.min,D.max),ct=Um(qe,Ue);if(ys(ct.min,D.min)&&ys(ct.max,D.max)){i(n,null);return}i(n,ct)};if(!u||!D)return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]});const Re=oe.length;return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mb-2 tabular-nums",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{children:["Population: ",u.count]}),a.jsxs("span",{children:["Filtered: ",(f==null?void 0:f.count)??0]}),Re>1&&a.jsxs("span",{className:"text-text",children:["Selected: ",Re]})]}),ue!=null&&a.jsxs("span",{className:"text-text",children:["Selected: ",Ft(ue)]})]}),a.jsxs("svg",{ref:g,viewBox:`0 0 ${Vr} 100`,preserveAspectRatio:"none",className:"w-full h-28 cursor-crosshair rounded-md bg-surface-inset",onPointerDown:H,onPointerMove:G,onPointerUp:J,onPointerLeave:()=>w(null),children:[Cu(u.bins,"#2e3a4b"),f&&Cu(f.bins,"#3a8fff"),_&&Cu(_.bins,"#f59e0b",{opacity:.55}),U&&mk(U,D),ue!=null&&$m(ue,D,{color:"var(--highlight)",strokeWidth:.7}),p!=null&&$m(p,D,{color:"rgba(255,255,255,0.75)",strokeWidth:.5,dashed:!0})]}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mt-2 tabular-nums",children:[a.jsx("span",{children:Ft(D==null?void 0:D.min)}),a.jsxs("div",{className:"flex flex-col items-center text-center leading-tight",children:[U?a.jsx("span",{className:"text-text",children:ys(U.min,D.min)?` ${Ft(U.max)}`:ys(U.max,D.max)?` ${Ft(U.min)}`:`${Ft(U.min)}  ${Ft(U.max)}`}):p!=null?a.jsxs("span",{className:"text-text",children:["Cursor: ",Ft(p)]}):a.jsx("span",{children:"Drag to filter"}),U&&p!=null&&a.jsxs("span",{className:"text-[11px] text-muted",children:["Cursor: ",Ft(p)]})]}),a.jsx("span",{children:Ft(D==null?void 0:D.max)})]}),a.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-2 mt-3 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Min"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:M,placeholder:tr(D.min),onFocus:()=>P("min"),onBlur:()=>{P(null),ce(M,b)},onChange:Q=>L(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&Q.currentTarget.blur()}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Max"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:b,placeholder:tr(D.max),onFocus:()=>P("max"),onBlur:()=>{P(null),ce(M,b)},onChange:Q=>T(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&Q.currentTarget.blur()}})]}),a.jsx("button",{className:"btn btn-xs btn-ghost text-muted hover:text-text",onClick:()=>i(n,null),children:"Clear"})]})]})}function Su(e,t,n){if(!e.length)return null;const r=n?n.min:Math.min(...e);let s=n?n.max:Math.max(...e);r===s&&(s=r+1);const i=new Array(t).fill(0),o=t/(s-r);for(const l of e){const u=Math.max(0,Math.min(t-1,Math.floor((l-r)*o)));i[u]+=1}return{bins:i,min:r,max:s,count:e.length}}function Am(e,t){var r;const n=[];for(const s of e){const i=(r=s.metrics)==null?void 0:r[t];i==null||Number.isNaN(i)||n.push(i)}return n}function Cu(e,t,n){const r=Math.max(1,...e),s=(n==null?void 0:n.opacity)??.9;return e.map((i,o)=>{const l=i/r*100;return a.jsx("rect",{x:o+.05,y:100-l,width:.9,height:l,fill:t,opacity:s},`${t}-${o}`)})}function mk(e,t){const n=(e.min-t.min)/(t.max-t.min),r=(e.max-t.min)/(t.max-t.min),s=Vr*ef(Math.min(n,r)),i=Vr*Math.abs(r-n);return a.jsx("rect",{x:s,y:0,width:Math.max(.5,i),height:100,fill:"rgba(255,255,255,0.08)",stroke:"rgba(255,255,255,0.4)",strokeWidth:.4})}function $m(e,t,n){const r=ef((e-t.min)/(t.max-t.min)),s=Vr*r;return a.jsx("line",{x1:s,y1:0,x2:s,y2:100,stroke:n.color,strokeWidth:n.strokeWidth??.5,strokeDasharray:n.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function Um(e,t){return e<t?{min:e,max:t}:{min:t,max:e}}function ef(e){return e<0?0:e>1?1:e}function Ft(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function tr(e){if(!Number.isFinite(e))return"";const t=e.toString();return t.includes("e")?e.toFixed(6):t}function Bm(e){const t=e.trim();if(!t)return{value:null,valid:!0};const n=Number(t);return Number.isFinite(n)?{value:n,valid:!0}:{value:null,valid:!1}}function Wm(e,t,n){return e<t?t:e>n?n:e}function ys(e,t){const n=Math.max(1,Math.abs(e),Math.abs(t));return Math.abs(e-t)<=1e-6*n}function Hm(e){return e?e.length>=10?e.slice(0,10):e:""}const pk=[{label:"Root",path:"/"}];function gk({leftTool:e,onToolChange:t,compareEnabled:n,compareActive:r,onOpenCompare:s,views:i,activeViewId:o,onActivateView:l,onSaveView:u,current:c,data:f,onOpenFolder:h,onContextMenu:v,countVersion:S,items:k,filteredItems:E,metricKeys:R,selectedItems:y,selectedMetric:m,onSelectMetric:g,filters:p,onChangeRange:w,onChangeFilters:M,onResize:L}){const b=e==="folders"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",T=e==="metrics"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",N=r?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover";return a.jsxs("div",{className:"app-left-panel col-start-1 row-start-2 relative border-r border-border bg-panel overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-y-0 left-0 w-10 border-r border-border flex flex-col items-center gap-2 py-3 bg-surface-overlay",children:[a.jsx("button",{className:b,title:"Folders","aria-label":"Folders","aria-pressed":e==="folders",onClick:()=>t("folders"),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M3 7.5h6l2-2h10a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2z"})})}),a.jsx("button",{className:T,title:"Metrics / Filters","aria-label":"Metrics and Filters","aria-pressed":e==="metrics",onClick:()=>t("metrics"),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]})}),a.jsx("div",{className:"w-6 h-px bg-border/70 my-1"}),a.jsx("button",{className:`${N} ${n?"":"opacity-40 cursor-not-allowed"}`,title:n?"Compare selected images":"Compare (select 2+)","aria-label":"Compare selected images","aria-pressed":r,"aria-disabled":!n,disabled:!n,onClick:()=>{n&&s()},children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("rect",{x:"3",y:"4",width:"8",height:"16",rx:"1"}),a.jsx("rect",{x:"13",y:"4",width:"8",height:"16",rx:"1"})]})}),a.jsx("div",{className:"flex-1"}),a.jsx("a",{className:"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover cursor-pointer",href:"https://github.com/trojblue/lenslet",title:"Lenslet on GitHub","aria-label":"Lenslet on GitHub",target:"_blank",rel:"noreferrer",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M12 .5C5.73.5.5 5.74.5 12.02c0 5.1 3.29 9.42 7.86 10.95.58.11.79-.25.79-.56v-2.17c-3.2.7-3.88-1.55-3.88-1.55-.53-1.35-1.29-1.71-1.29-1.71-1.05-.72.08-.71.08-.71 1.16.08 1.78 1.2 1.78 1.2 1.03 1.77 2.71 1.26 3.37.96.1-.75.4-1.26.73-1.55-2.55-.29-5.23-1.29-5.23-5.74 0-1.27.45-2.31 1.19-3.13-.12-.29-.52-1.46.11-3.05 0 0 .97-.31 3.18 1.19.92-.26 1.91-.39 2.89-.39.98 0 1.97.13 2.89.39 2.2-1.5 3.18-1.19 3.18-1.19.63 1.59.23 2.76.11 3.05.74.82 1.19 1.86 1.19 3.13 0 4.46-2.69 5.45-5.25 5.73.41.36.78 1.07.78 2.16v3.2c0 .31.21.67.8.56 4.56-1.53 7.85-5.85 7.85-10.95C23.5 5.74 18.27.5 12 .5z"})})})]}),a.jsx("div",{className:"ml-10 h-full",children:e==="folders"?a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"px-2 py-2 border-b border-border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Smart Folders"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:u,title:"Save current view as Smart Folder",children:"+ New"})]}),i.length?a.jsx("div",{className:"flex flex-col gap-1",children:i.map(U=>{const D=U.id===o;return a.jsx("button",{className:`text-left px-2 py-1.5 rounded-md text-sm ${D?"bg-accent-muted text-accent":"hover:bg-hover text-text"}`,onClick:()=>l(U),children:U.name},U.id)})}):a.jsx("div",{className:"text-xs text-muted px-1 py-1.5",children:"No saved Smart Folders yet."})]}),a.jsx(ak,{current:c,roots:pk,data:f,onOpen:h,onContextMenu:v,countVersion:S,className:"flex-1 min-h-0 overflow-auto scrollbar-thin",showResizeHandle:!1})]}):a.jsx(ck,{items:k,filteredItems:E,metricKeys:R,selectedItems:y,selectedMetric:m,onSelectMetric:g,filters:p,onChangeRange:w,onChangeFilters:M})}),a.jsx("div",{className:"toolbar-offset absolute bottom-0 right-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20",onMouseDown:L})]})}function vk({persistenceEnabled:e,offViewSummary:t,onRevealOffView:n,canRevealOffView:r=!1,onClearOffView:s,browserZoomPercent:i}){const l=!!(t!=null&&t.names.length)&&t?` (${t.names.join(", ")}${t.extra?` +${t.extra}`:""})`:"",u=r&&n!=null,c=typeof i=="number"?i:null,f=c!==null&&Math.abs(c-100)>=2;return!e||f||!!t?a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-col gap-2",children:[!e&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("span",{className:"font-semibold",children:"Not persisted."})," Workspace is read-only; edits stay in memory until restart."]}),f&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs",children:[a.jsxs("span",{className:"font-semibold",children:["Browser zoom ",Math.round(c),"%."]})," For best results, set it to 100% so UI elements stay in correct proportions."]}),t&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex items-center justify-between gap-3",children:[a.jsxs("span",{children:["Updates outside current view: ",t.count," item",t.count===1?"":"s",l]}),a.jsxs("div",{className:"flex items-center gap-2",children:[u&&a.jsx("button",{className:"text-muted hover:text-text transition-colors",onClick:()=>n==null?void 0:n(),"aria-label":"Reveal off-view updates",children:"Reveal"}),a.jsx("button",{className:"text-muted hover:text-text transition-colors text-base leading-none",onClick:s,"aria-label":"Clear off-view updates",children:""})]})]})]})}):null}const yk=6e3,xk=1e4,wk=24*60*6e4,Sk=3e4,Ck=350,kk=1400,bk=2048,Ek=6,Nk=10;function ry(e){const t=new Map;for(const n of e)t.set(n.path,n.name);return t}function sy(e,t){return t.get(e)??e.split("/").pop()??e}function Vm(e,t){const n=e.filter(r=>!t.has(r.path));return n.length===e.length?e:n}function Qm(e,t,n,r,s){const i=e.filter(l=>l.path!==t);return[{path:t,ts:n,kind:r},...i].slice(0,s)}function jk(e,t){if(!e.length)return null;const n=ry(t),r=new Set,s=[];for(const o of e)r.has(o.path)||(r.add(o.path),s.push(o.path));const i=s.slice(0,2).map(o=>sy(o,n));return{count:s.length,names:i,extra:Math.max(0,s.length-i.length)}}function Mk(e,t,n,r){if(!e.length)return[];const s=ry(t);return e.map(i=>({path:i.path,label:sy(i.path,s),timeLabel:r(i.ts,n)}))}function Rk(e){const[t,n]=d.useState([]),[r,s]=d.useState([]),[i,o]=d.useState(new Map),l=d.useRef(new Map),u=d.useRef(new Set),c=d.useRef(new Set),f=d.useRef(new Set);d.useEffect(()=>()=>{for(const R of l.current.values())window.clearTimeout(R);l.current.clear(),u.current.clear()},[]),d.useEffect(()=>{c.current=new Set(e),n(R=>Vm(R,f.current))},[e]);const h=d.useCallback((R,y)=>{if(y!=null){if(u.current.has(y))return;if(u.current.add(y),u.current.size>bk){const M=u.current.values().next().value;M!=null&&u.current.delete(M)}}const m=y!=null?`event:${y}`:`event:${R}:${Date.now()}`;o(M=>{if(M.get(R)===m)return M;const L=new Map(M);return L.set(R,m),L});const g=l.current,p=g.get(R);p!=null&&window.clearTimeout(p);const w=window.setTimeout(()=>{o(M=>{if(M.get(R)!==m)return M;const L=new Map(M);return L.delete(R),L}),g.delete(R)},kk);g.set(R,w)},[]),v=d.useCallback(R=>{f.current=R,n(y=>Vm(y,R))},[]),S=d.useCallback((R,y,m)=>{const g=Date.now();c.current.has(R)&&f.current.has(R)||n(w=>Qm(w,R,g,y,Ek)),h(R,m)},[h]),k=d.useCallback((R,y,m)=>{const g=Date.now(),p=Wv(m)??g;s(w=>Qm(w,R,p,y,Nk))},[]),E=d.useCallback(()=>{n([])},[]);return{offViewActivity:t,recentTouches:r,highlightedPaths:i,onVisiblePathsChange:v,markRecentActivity:S,markRecentTouch:k,clearOffViewActivity:E}}function Lk(e){return e.isOffline?"offline":e.isUnstable?"unstable":e.recentEditActive?"recent":Number.isFinite(e.editingCount)&&e.editingCount>0?"editing":"live"}function iy(e){if(!e.length)return e;const t=new Set,n=[];for(const r of e)t.has(r.path)||(t.add(r.path),n.push(r));return n}function oy(e){return{...e,items:iy(e.items)}}function Tk(e,t){const n=e.pageCount??1,r=e.pageSize??t,s=(e.page??1)+1;return n<=1||s>n?null:{startPage:s,endPage:n,pageSize:r}}function _k(e,t){if(e.path!==t.path)return oy(t);const n=iy([...e.items,...t.items]);return{...e,generatedAt:t.generatedAt??e.generatedAt,dirs:e.dirs.length?e.dirs:t.dirs,items:n,page:t.page??e.page,pageSize:t.pageSize??e.pageSize,pageCount:t.pageCount??e.pageCount,totalItems:t.totalItems??e.totalItems}}async function Pk(e,t){const n=t.shouldContinue??(()=>!0);let r=oy(e);t.onUpdate(r);const s=Tk(e,t.defaultPageSize);if(s)for(let i=s.startPage;i<=s.endPage;i+=1){let o;try{o=await t.fetchPage(i,s.pageSize)}catch{return}if(!n())return;r=_k(r,o),t.onUpdate(r)}}const ly=[-2,-1,1,2],ay=[-2,-1,0,1,2,3];ly.length;ay.length;function Ik(e,t,n){return Math.min(Math.max(e,t),n)}function uy(e,t,n){const r=new Set,s=[];for(const i of n){const o=t+i;if(o<0||o>=e.length)continue;const l=e[o];!l||r.has(l)||(r.add(l),s.push(l))}return s}function Fk(e,t){if(!t)return[];const n=e.indexOf(t);return n<0?[]:uy(e,n,ly)}function Ok(e,t){if(e.length<2)return[];const n=Math.max(0,e.length-2),r=Ik(t,0,n);return uy(e,r,ay)}const We={sortKey:"sortKey",sortDir:"sortDir",sortSpec:"sortSpec",starFilters:"starFilters",filterAst:"filterAst",selectedMetric:"selectedMetric",viewMode:"viewMode",gridItemSize:"gridItemSize",leftOpen:"leftOpen",rightOpen:"rightOpen"};function zk(e){switch(e){case"live":return"Live";case"reconnecting":return"Reconnecting";case"offline":return"Offline";case"connecting":case"idle":default:return"Connecting"}}function Km(e){if(!(e instanceof gn))return null;const t=e.body;if(!t||typeof t!="object")return null;const n=t.error;return typeof n=="string"?n:null}function qm(e,t){for(const n of e)xe.prefetchFile(n,t),xe.prefetchThumb(n)}function Gm(e,t){return t-e<wk?tC(e,t):nC(e)}function Dk(e,t){return e?t instanceof gn||t instanceof Error?t.message:"Failed to load embeddings.":null}function Ak(e,t,n,r){return e||t?n:r}function $k(e,t,n,r,s,i){return e?n:t||i==="/"?r:s}function Uk(){var bf,Ef,Nf;const[e,t]=d.useState("/"),[n,r]=d.useState(""),[s,i]=d.useState([]),[o,l]=d.useState(!1),[u,c]=d.useState(null),[f,h]=d.useState(null),[v,S]=d.useState(!1),[k,E]=d.useState(0),[R,y]=d.useState(0),[m,g]=d.useState(null),[p,w]=d.useState(100),[M,L]=d.useState(null),[b,T]=d.useState(()=>({filters:{and:[]},sort:{kind:"builtin",key:"added",dir:"desc"},selectedMetric:void 0})),[N,P]=d.useState(()=>Date.now()),[U,D]=d.useState("adaptive"),[oe,ue]=d.useState(220),[_,fe]=d.useState(!0),[A,H]=d.useState(!0),[G,J]=d.useState("folders"),[ce,Re]=d.useState([]),[Q,K]=d.useState(null),[Z,te]=d.useState(0),[Ee,ze]=d.useState({}),qe=d.useRef(null),Ue=d.useRef(null),ct=d.useRef(null),yn=d.useRef(null),dt=d.useRef(!1),Zt=d.useRef(!1),Bt=d.useRef(null),en=d.useRef(null),It=d.useRef(oi()),Be=d.useRef(null),nt=d.useRef(null),F=d.useRef(null),ne=d.useRef(!1),ie=d.useRef(null),B=d.useRef("idle"),{leftW:X,rightW:de,onResizeLeft:le,onResizeRight:pe}=JC(qe,G),[Ce,Le]=d.useState(!1),[Ne,rt]=d.useState(null),Ve=_r(),st=WS(),tn=ya(),O=VS(),[re,ye]=d.useState("idle"),[je,xn]=d.useState({}),[nn,tf]=d.useState(null),[yo,Sa]=d.useState(null),[ft,_n]=d.useState(!1),[Pr,Ca]=d.useState(()=>Date.now()),[cy,dy]=d.useState(!0),[fy,hy]=d.useState(!1);d.useEffect(()=>{const x=I=>{const z=Qn(I),W=kC(z)?z:null,ee=W?wm(z):z;W?(h(W),i([W])):(h(null),dt.current=!1),t(he=>he===ee?he:(y(Y=>Y+1),ee))};x(ym());const j=()=>x(ym());return window.addEventListener("hashchange",j),()=>window.removeEventListener("hashchange",j)},[]),d.useEffect(()=>{if(yo==null){_n(!1);return}_n(!0);const x=window.setTimeout(()=>_n(!1),yk);return()=>window.clearTimeout(x)},[yo]),d.useEffect(()=>{if(nn==null)return;Ca(Date.now());const x=window.setInterval(()=>Ca(Date.now()),1e4);return()=>window.clearInterval(x)},[nn]);const{data:xo,refetch:nf,isLoading:Jk,isError:Zk}=Bc(e,!0,{page:1,pageSize:xl}),[it,rf]=d.useState(),ka=d.useRef(0),ba=d.useCallback(()=>nf(),[nf]),{data:fs}=Bc("/",!0,{enabled:!1,page:1,pageSize:xl});d.useEffect(()=>{Ve.removeQueries({predicate:({queryKey:x})=>hC(x,e,!0)})},[e,Ve]),d.useEffect(()=>{ka.current+=1,rf(void 0)},[e]),d.useEffect(()=>{if(!xo)return;const x=++ka.current;let j=!1;return Pk(xo,{defaultPageSize:xl,fetchPage:(I,z)=>xe.getFolder(xo.path,{recursive:!0,page:I,pageSize:z}),onUpdate:rf,shouldContinue:()=>!j&&ka.current===x}),()=>{j=!0}},[xo]);const rn=u!==null,Ir=!rn&&n.trim().length>0,sf=ek(n,250),of=d.useMemo(()=>sf.trim().replace(/\s+/g," "),[sf]),wo=yC(Ir?of:"",e),hs=wC(),lf=((bf=hs.data)==null?void 0:bf.embeddings)??[],my=((Ef=hs.data)==null?void 0:Ef.rejected)??[],py=lf.length>0,gy=Dk(hs.isError,hs.error),Fr=d.useMemo(()=>Qn(e||"/"),[e]),Ea=d.useMemo(()=>Sm(b.filters),[b.filters]),Wt=d.useMemo(()=>{var j;return(Ir?((j=wo.data)==null?void 0:j.items)??[]:(it==null?void 0:it.items)??[]).map(I=>({...I,star:Ee[I.path]!==void 0?Ee[I.path]:I.star}))},[Ir,wo.data,it,Ee]),af=d.useMemo(()=>{var I;const x=new Map;for(const z of Wt)x.set(z.path,z);const j=((I=wo.data)==null?void 0:I.items)??[];for(const z of j){if(x.has(z.path))continue;const W=Ee[z.path]!==void 0?Ee[z.path]:z.star;x.set(z.path,{...z,star:W})}return x},[Wt,wo.data,Ee]),wn=d.useMemo(()=>u?u.items.map(x=>{const j=af.get(x.path);return j||qk(x.path,Ee[x.path])}):[],[u,af,Ee]),Qe=d.useMemo(()=>{if(u)return Nm(wn,b.filters);const x=Nm(Wt,b.filters);return YC(x,b.sort,N)},[u,wn,Wt,b.filters,b.sort,N]),di=u?wn.length:Wt.length,Na=Qe.length,Sn=d.useMemo(()=>Qe.map(x=>x.path),[Qe]),{offViewActivity:uf,recentTouches:cf,highlightedPaths:vy,onVisiblePathsChange:yy,markRecentActivity:ja,markRecentTouch:Ma,clearOffViewActivity:xy}=Rk(Sn),df=d.useMemo(()=>new Set(s),[s]),wy=d.useMemo(()=>{if(!s.length)return[];const x=u?wn:Wt,j=new Map(x.map(z=>[z.path,z])),I=new Map(Qe.map(z=>[z.path,z]));return s.map(z=>j.get(z)??I.get(z)).filter(z=>!!z)},[s,u,wn,Wt,Qe]),sn=d.useMemo(()=>Qe.filter(x=>df.has(x.path)),[Qe,df]),ff=d.useMemo(()=>sn.map(x=>x.path),[sn]),So=Math.max(0,sn.length-2),Or=Math.min(k,So),Sy=sn[Or]??null,Cy=sn[Or+1]??null,ky=Or>0,by=Or<sn.length-2,fi=sn.length>=2,Ey=u?wn:Wt,hi=u?null:b.sort.kind==="metric"?b.sort.key:null,hf=d.useMemo(()=>hi?Qe.some(x=>{var I;const j=(I=x.metrics)==null?void 0:I[hi];return j!=null&&!Number.isNaN(j)}):!1,[Qe,hi]);d.useEffect(()=>{E(x=>x>So?So:x)},[So]);const Ra=d.useCallback(x=>{const j=Date.now(),z=Wv(x)??j,W=z>j?j:z;tf(ee=>ee==null?W:ee>W?ee:W),Sa(j),Ca(j)},[]),La=d.useCallback(x=>{const j=Object.prototype.hasOwnProperty.call(x,"star"),I=x.metrics!==void 0,z=x.comments!==void 0;if(!j&&!I&&!z)return;const W=he=>{if(he.path!==x.path)return he;let Y=he;return j&&he.star!==x.star&&(Y={...Y,star:x.star??null}),I&&(Y={...Y,metrics:x.metrics??null}),z&&he.comments!==x.comments&&(Y={...Y,comments:x.comments??""}),Y},ee=he=>{if(!he)return he;let Y=!1;const se=he.items.map(ge=>{const ht=W(ge);return ht!==ge&&(Y=!0),ht});return Y?{...he,items:se}:he};Ve.setQueriesData({predicate:({queryKey:he})=>Array.isArray(he)&&he[0]==="folder"},ee),Ve.setQueriesData({predicate:({queryKey:he})=>Array.isArray(he)&&he[0]==="search"},ee)},[Ve]),Ny=d.useCallback(()=>{te(x=>x+1)},[]),ms=d.useCallback(x=>{x.length&&xn(j=>{let I=!1;const z={...j};for(const W of x){const ee=j[W.gallery_id];ee&&ee.viewing===W.viewing&&ee.editing===W.editing||(z[W.gallery_id]=W,I=!0)}return I?z:j})},[]),Co=d.useCallback(()=>{ie.current!=null&&(window.clearTimeout(ie.current),ie.current=null)},[]),ko=d.useCallback(x=>{x&&xn(j=>{if(!(x in j))return j;const I={...j};return delete I[x],I})},[]),Ta=d.useCallback(x=>{Be.current=x.lease_id,nt.current=x.gallery_id,ms([x])},[ms]),Cn=d.useCallback(async(x,j=!1)=>{const I=It.current,z=j?void 0:Be.current??void 0,W=ee=>xe.joinPresence(x,ee,I);try{Ta(await W(z));return}catch(ee){if(!j&&Km(ee)==="invalid_lease"){Ta(await W(void 0));return}throw ee}},[Ta]),mf=d.useCallback(async(x,j)=>{if(x===j){await Cn(j);return}const I=Be.current;if(!I){await Cn(j,!0);return}try{const z=await xe.movePresence(x,j,I,It.current);nt.current=z.to_scope.gallery_id,ms([z.from_scope,z.to_scope]);return}catch(z){const W=Km(z);if(W==="invalid_lease"){await Cn(j,!0);return}if(W==="scope_mismatch"){await Cn(j);return}throw z}},[ms,Cn]),pf=d.useCallback(async x=>{const j=nt.current;if(!j){await Cn(x,!0);return}if(j===x){await Cn(x);return}await mf(j,x)},[Cn,mf]),bo=d.useCallback(async()=>{if(ne.current)return;const x=F.current;if(x){F.current=null,ne.current=!0;try{await pf(x)}catch{}finally{ne.current=!1;const j=F.current;j&&j!==nt.current&&bo()}}},[pf]),ps=d.useCallback((x,j=!1)=>{if(F.current=x,Co(),j||nt.current==null){bo();return}ie.current=window.setTimeout(()=>{ie.current=null,bo()},Ck)},[Co,bo]),gf=d.useCallback(()=>{nt.current=null,Be.current=null,F.current=null,Co()},[Co]),Eo=d.useCallback(x=>{const j=nt.current,I=Be.current;!j||!I||(B1(j,I,It.current),x&&ko(j),gf())},[ko,gf]);d.useEffect(()=>{F1();const x=z1(I=>{if(I.type==="presence"){const ee=I.data;if(!(ee!=null&&ee.gallery_id))return;ms([ee]);return}const z=I.data;if(!(z!=null&&z.path))return;const W=z.path;if(I.type==="item-updated"){const ee=I.data,he={v:1,tags:ee.tags??[],notes:ee.notes??"",star:ee.star??null,version:ee.version??1,updated_at:ee.updated_at??"",updated_by:ee.updated_by??"server"};Ve.setQueryData(io(W),he),La({path:W,star:ee.star??null,metrics:ee.metrics,comments:ee.notes??""}),qS(W,he),ja(W,"item-updated",I.id),Ma(W,"item-updated",ee.updated_at),Ra(ee.updated_at),ze(Y=>{if(Y[W]===void 0)return Y;const se={...Y};return delete se[W],se})}else if(I.type==="metrics-updated"){const ee=I.data;La({path:W,metrics:ee.metrics}),ja(W,"metrics-updated",I.id),Ma(W,"metrics-updated",ee.updated_at),Ra(ee.updated_at)}}),j=D1(ye);return()=>{x(),j(),O1()}},[ms,ja,Ma,Ve,La,Ra]),d.useEffect(()=>{const x=nt.current;x!==Fr&&ps(Fr,x==null)},[Fr,ps]),d.useEffect(()=>{const x=window.setInterval(()=>{const j=nt.current;j&&Cn(j)},Sk);return()=>{window.clearInterval(x)}},[Cn]),d.useEffect(()=>{const x=B.current;if(B.current=re,re==="live"&&x!=="live"){ps(Fr,!0);return}(re==="reconnecting"||re==="offline")&&ko(nt.current)},[ko,re,Fr,ps]),d.useEffect(()=>{const x=()=>Eo(!0),j=()=>Eo(!0),I=()=>{ps(Fr,!0)};return window.addEventListener("pagehide",x),window.addEventListener("beforeunload",j),window.addEventListener("pageshow",I),()=>{window.removeEventListener("pagehide",x),window.removeEventListener("beforeunload",j),window.removeEventListener("pageshow",I),Eo(!1)}},[Fr,ps,Eo]),d.useEffect(()=>{let x=!1;return xe.getHealth().then(j=>{var z;if(x)return;const I=((z=j==null?void 0:j.labels)==null?void 0:z.enabled)??!0;dy(I)}).catch(()=>{}),()=>{x=!0}},[]);const jy=d.useMemo(()=>{const x=u?wn:Wt,j={0:0,1:0,2:0,3:0,4:0,5:0};for(const I of x){const z=Ee[I.path]??I.star??0;j[String(z)]=(j[String(z)]||0)+1}return j},[u,wn,Wt,Ee]),Zn=d.useMemo(()=>{const x=new Set;let j=0;const I=u?wn:Wt;for(const z of I){const W=z.metrics;if(W)for(const ee of Object.keys(W))x.add(ee);if(j+=1,j>=250&&x.size>0)break}return Array.from(x).sort()},[u,wn,Wt]);d.useEffect(()=>{rn||Zn.length&&T(x=>{const j=x.selectedMetric&&Zn.includes(x.selectedMetric)?x.selectedMetric:Zn[0];return j===x.selectedMetric?x:{...x,selectedMetric:j}})},[Zn,rn]),d.useEffect(()=>{rn||b.sort.kind==="metric"&&(Zn.includes(b.sort.key)||T(x=>({...x,sort:{kind:"builtin",key:"added",dir:x.sort.dir}})))},[Zn,b.sort,rn]);const No=d.useMemo(()=>HC(b.filters),[b.filters]),jo=(it==null?void 0:it.totalItems)??(it==null?void 0:it.items.length)??di,My=e==="/"?jo:(fs==null?void 0:fs.totalItems)??(fs==null?void 0:fs.items.length)??jo,_a=rn||Ir||No>0,Mo=je[e],Ry=st.state==="syncing"?"Syncing":st.state==="error"?st.message?`Not saved  ${st.message}`:"Not saved  retry":"All changes saved",Ly=zk(re),Pa=nn!=null,Ty=d.useMemo(()=>!Pa||nn==null?"No edits yet.":Gm(nn,Pr),[Pa,nn,Pr]),_y=(Mo==null?void 0:Mo.editing)??0,Py=O!=null&&O>xk,Iy=re==="offline"||re==="connecting"||re==="idle",Fy=re==="reconnecting"||tn||st.state==="error"||Py,Oy=Lk({isOffline:Iy,isUnstable:Fy,recentEditActive:ft,editingCount:_y}),zy=d.useMemo(()=>jk(uf,Qe),[uf,Qe]),Dy=d.useMemo(()=>Mk(cf,Qe,Pr,Gm),[Qe,Pr,cf]),Ay=Ak(rn,_a,Na,jo),$y=$k(rn,_a,di,jo,My,e),vf=d.useMemo(()=>{if(!u)return null;if(u.queryPath){const x=u.queryPath.split("/").filter(Boolean);return x.length?x[x.length-1]:u.queryPath}return u.queryVector?"Vector query":null},[u]),yf=d.useMemo(()=>u?No>0?`${Na} of ${di}`:`${di}`:null,[u,No,Na,di]),xt=d.useCallback(x=>{T(j=>({...j,filters:x(j.filters)}))},[]),Uy=d.useCallback(x=>{T(j=>({...j,filters:x}))},[]),Ro=d.useCallback(()=>{xt(x=>wu(x,[]))},[xt]),xf=d.useCallback(()=>{T(x=>({...x,filters:{and:[]}}))},[]),Ia=d.useCallback(()=>{c(null);const x=en.current;en.current=null,x&&x.length?(i(x),y(j=>j+1)):i([])},[]),By=d.useCallback(()=>{u&&Ia(),r(""),T(x=>({...x,filters:{and:[]}}))},[Ia,u]),Wy=d.useCallback(async x=>{!u&&en.current===null&&(en.current=s);const j=await xe.searchEmbeddings(x);if(c({embedding:j.embedding,queryPath:x.query_path??null,queryVector:x.query_vector_b64??null,topK:x.top_k??50,minScore:x.min_score??null,items:j.items,createdAt:Date.now()}),j.items.length){const I=x.query_path&&j.items.some(z=>z.path===x.query_path)?x.query_path:j.items[0].path;i([I]),y(z=>z+1)}else i([])},[u,s]),Fa=d.useCallback((x,j)=>{xt(I=>WC(I,x,j))},[xt]),wf=d.useMemo(()=>{var j,I,z,W,ee,he;const x=[];for(const Y of b.filters.and)if("stars"in Y){const se=Y.stars||[];if(!se.length)continue;x.push({id:"stars",label:`Rating in: ${ku(se)}`,onRemove:()=>Ro()})}else if("starsIn"in Y){const se=Y.starsIn.values||[];if(!se.length)continue;x.push({id:"stars-in",label:`Rating in: ${ku(se)}`,onRemove:()=>Ro()})}else if("starsNotIn"in Y){const se=Y.starsNotIn.values||[];if(!se.length)continue;x.push({id:"stars-not-in",label:`Rating not in: ${ku(se)}`,onRemove:()=>xt(ge=>qv(ge,[]))})}else if("nameContains"in Y){const se=(j=Y.nameContains.value)==null?void 0:j.trim();if(!se)continue;x.push({id:"name-contains",label:`Filename contains: ${se}`,onRemove:()=>xt(ge=>Gv(ge,""))})}else if("nameNotContains"in Y){const se=(I=Y.nameNotContains.value)==null?void 0:I.trim();if(!se)continue;x.push({id:"name-not-contains",label:`Filename not: ${se}`,onRemove:()=>xt(ge=>Yv(ge,""))})}else if("commentsContains"in Y){const se=(z=Y.commentsContains.value)==null?void 0:z.trim();if(!se)continue;x.push({id:"comments-contains",label:`Comments contain: ${se}`,onRemove:()=>xt(ge=>Xv(ge,""))})}else if("commentsNotContains"in Y){const se=(W=Y.commentsNotContains.value)==null?void 0:W.trim();if(!se)continue;x.push({id:"comments-not-contains",label:`Comments not: ${se}`,onRemove:()=>xt(ge=>Jv(ge,""))})}else if("urlContains"in Y){const se=(ee=Y.urlContains.value)==null?void 0:ee.trim();if(!se)continue;x.push({id:"url-contains",label:`URL contains: ${se}`,onRemove:()=>xt(ge=>Zv(ge,""))})}else if("urlNotContains"in Y){const se=(he=Y.urlNotContains.value)==null?void 0:he.trim();if(!se)continue;x.push({id:"url-not-contains",label:`URL not: ${se}`,onRemove:()=>xt(ge=>ey(ge,""))})}else if("dateRange"in Y){const{from:se,to:ge}=Y.dateRange;if(!se&&!ge)continue;x.push({id:"date-range",label:`Date: ${Hk(se,ge)}`,onRemove:()=>xt(ht=>Hc(ht,null))})}else if("widthCompare"in Y){const{op:se,value:ge}=Y.widthCompare;x.push({id:"width-compare",label:`Width ${se} ${ge}`,onRemove:()=>xt(ht=>wl(ht,null))})}else if("heightCompare"in Y){const{op:se,value:ge}=Y.heightCompare;x.push({id:"height-compare",label:`Height ${se} ${ge}`,onRemove:()=>xt(ht=>Sl(ht,null))})}else if("metricRange"in Y){const{key:se,min:ge,max:ht}=Y.metricRange;x.push({id:`metric:${se}`,label:`${se}: ${Qk(ge,ht)}`,onRemove:()=>Fa(se,null)})}return x},[b.filters,Ro,Fa,xt]),Hy=d.useCallback(x=>{const j=new Set(Ea);j.has(x)?j.delete(x):j.add(x),T(I=>({...I,filters:wu(I.filters,Array.from(j))}))},[Ea]),Vy=d.useCallback(()=>{fe(!0),J("metrics")},[]),Qy=d.useCallback(x=>{T(j=>({...j,sort:x})),x.kind==="builtin"&&x.key==="random"&&P(Date.now())},[]),Sf=d.useCallback(x=>{if(x==="/"||x==="")return"Lenslet | Root";const j=x.split("/").filter(Boolean);if(!j.length)return"Lenslet";const I=j.slice(-2).join("/");return`Lenslet | ${j.length>2?`.../${I}`:`/${I}`}`},[]),Ky=d.useMemo(()=>Vk(e),[e]);d.useEffect(()=>{document.title=Sf(e)},[e,Sf]),d.useEffect(()=>{let x=!0;return xe.getViews().then(j=>{x&&Re(j.views||[])}).catch(()=>{x&&Re([])}),()=>{x=!1}},[]),d.useEffect(()=>{Ir&&(i([]),f&&(h(null),dt.current=!1,nl(e)))},[Ir,f,e]),d.useEffect(()=>{const x=qe.current,j=yn.current;if(!x||!j)return;const I=()=>{const z=Math.max(48,Math.round(j.getBoundingClientRect().height));x.style.setProperty("--toolbar-h",`${z}px`)};if(I(),"ResizeObserver"in window){const z=new ResizeObserver(I);return z.observe(j),()=>z.disconnect()}return window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]),d.useEffect(()=>{try{const x=localStorage.getItem(We.sortKey),j=localStorage.getItem(We.sortDir),I=localStorage.getItem(We.sortSpec),z=localStorage.getItem(We.starFilters),W=localStorage.getItem(We.filterAst),ee=localStorage.getItem(We.selectedMetric),he=localStorage.getItem(We.viewMode),Y=localStorage.getItem(We.gridItemSize),se=localStorage.getItem(We.leftOpen),ge=localStorage.getItem(We.rightOpen),jf=(mt=>{if(!mt)return null;const Ge=vu(mt);return!Ge||typeof Ge!="object"?null:Ge.kind==="builtin"&&(Ge.key==="name"||Ge.key==="added"||Ge.key==="random")&&(Ge.dir==="asc"||Ge.dir==="desc")||Ge.kind==="metric"&&typeof Ge.key=="string"&&Ge.key.length>0&&(Ge.dir==="asc"||Ge.dir==="desc")?Ge:null})(I)??{kind:"builtin",key:x==="name"||x==="added"||x==="random"?x:"added",dir:j==="asc"||j==="desc"?j:"desc"};jf.key==="random"&&P(Date.now());let Aa=(mt=>{if(!mt)return null;const Ge=vu(mt);return Wc(Ge)})(W)??{and:[]};if(z){const mt=vu(z);if(Array.isArray(mt)){const Ge=mt.filter(n0=>[0,1,2,3,4,5].includes(n0));Aa=wu(Aa,Ge)}}if(T(mt=>({...mt,sort:jf,filters:Aa,selectedMetric:ee||mt.selectedMetric})),(he==="grid"||he==="adaptive")&&D(he),Y){const mt=Number(Y);!isNaN(mt)&&mt>=80&&mt<=500&&ue(mt)}(se==="0"||se==="false")&&fe(!1),(ge==="0"||ge==="false")&&H(!1)}catch{}},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia("(max-width: 900px)"),j=()=>{x.matches&&(fe(!1),H(!1))};return j(),"addEventListener"in x?(x.addEventListener("change",j),()=>x.removeEventListener("change",j)):(x.addListener(j),()=>x.removeListener(j))},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=[1,1.25,1.5,1.75,2,3,4],j=W=>x.reduce((ee,he)=>Math.abs(he-W)<Math.abs(ee-W)?he:ee,x[0]),I=()=>{var ht;const W=window.devicePixelRatio||1,ee=j(W),he=((ht=window.visualViewport)==null?void 0:ht.scale)??1,Y=W*he/ee;if(!Number.isFinite(Y)){L(null);return}const se=Math.round(Y*100),ge=Math.min(500,Math.max(25,se));L(ge)};I(),window.addEventListener("resize",I),window.addEventListener("orientationchange",I);const z=window.visualViewport;return z&&z.addEventListener("resize",I),()=>{window.removeEventListener("resize",I),window.removeEventListener("orientationchange",I),z&&z.removeEventListener("resize",I)}},[]),d.useEffect(()=>{try{localStorage.setItem(We.sortKey,b.sort.kind==="builtin"?b.sort.key:"added"),localStorage.setItem(We.sortDir,b.sort.dir),localStorage.setItem(We.sortSpec,JSON.stringify(b.sort));const x=Sm(b.filters);localStorage.setItem(We.starFilters,JSON.stringify(x)),localStorage.setItem(We.filterAst,JSON.stringify(b.filters)),b.selectedMetric?localStorage.setItem(We.selectedMetric,b.selectedMetric):localStorage.removeItem(We.selectedMetric),localStorage.setItem(We.viewMode,U),localStorage.setItem(We.gridItemSize,String(oe)),localStorage.setItem(We.leftOpen,_?"1":"0"),localStorage.setItem(We.rightOpen,A?"1":"0")}catch{}},[b,U,oe,_,A]),d.useEffect(()=>{const x=Ue.current;if(!x)return;const j=z=>Math.min(500,Math.max(80,z)),I=z=>{z.ctrlKey&&(f||v||(z.preventDefault(),ue(W=>j(W+(z.deltaY<0?20:-20)))))};return x.addEventListener("wheel",I,{passive:!1}),()=>x.removeEventListener("wheel",I)},[f,v]),d.useEffect(()=>{if(f||v)return;const x=Ue.current;if(!x)return;const j=Y=>Math.min(500,Math.max(80,Y));let I=null;const z=Y=>{if(Y.length<2)return 0;const[se,ge]=[Y[0],Y[1]];return Math.hypot(se.clientX-ge.clientX,se.clientY-ge.clientY)},W=Y=>{if(Y.touches.length!==2)return;const se=z(Y.touches);se&&(I={dist:se,size:oe})},ee=Y=>{if(!I||Y.touches.length!==2)return;const se=z(Y.touches);if(!se)return;Y.preventDefault();const ge=j(I.size*(se/I.dist));ue(ge)},he=()=>{I=null};return x.addEventListener("touchstart",W,{passive:!0}),x.addEventListener("touchmove",ee,{passive:!1}),x.addEventListener("touchend",he),x.addEventListener("touchcancel",he),()=>{x.removeEventListener("touchstart",W),x.removeEventListener("touchmove",ee),x.removeEventListener("touchend",he),x.removeEventListener("touchcancel",he)}},[f,v,oe]),d.useEffect(()=>{qm(Fk(Sn,f),"viewer")},[f,Sn]),d.useEffect(()=>{v&&qm(Ok(ff,Or),"compare")},[v,ff,Or]);const Lo=d.useCallback(x=>{h(null),dt.current=!1;const j=Qn(x);t(j),xm(j)},[]),qy=d.useCallback(async()=>{const x=window.prompt("Save Smart Folder as:","New Smart Folder");if(!x)return;const j=Bk(x,ce),I={id:j,name:x,pool:{kind:"folder",path:e},view:JSON.parse(JSON.stringify(b))},z=[...ce.filter(W=>W.id!==j),I];Re(z),K(j);try{await xe.saveViews({version:1,views:z})}catch(W){if(W instanceof gn&&W.status===403){const ee=new Blob([JSON.stringify({version:1,views:z},null,2)],{type:"application/json"});Qc(ee,`lenslet-smart-folder-${j}.json`),alert("No-write mode: exported Smart Folder JSON instead of saving.");return}console.error("Failed to save Smart Folder:",W)}},[e,b,ce]);d.useEffect(()=>{if(!Q)return;const x=ce.find(z=>z.id===Q);if(!x){K(null);return}const j=x.pool.path===e,I=JSON.stringify(x.view)===JSON.stringify(b);(!j||!I)&&K(null)},[Q,ce,e,b]);const To=d.useCallback(x=>{if(!x)return;const j=document.getElementById(`cell-${encodeURIComponent(x)}`);j==null||j.focus()},[]),Gy=d.useCallback(x=>{h(x),dt.current=!0,xm(x)},[]),Cf=d.useCallback(()=>{h(null),dt.current?(dt.current=!1,window.history.back()):nl(e),To(Bt.current)},[To]),Yy=d.useCallback(()=>{v||!fi||(s[0]&&(Bt.current=s[0]),E(0),S(!0),f&&(h(null),dt.current&&(dt.current=!1),nl(e)),Zt.current||(window.history.pushState({compare:!0},"",window.location.href),Zt.current=!0))},[v,fi,s,f,e]),Oa=d.useCallback(()=>{S(!1),Zt.current&&(Zt.current=!1,window.history.back()),To(Bt.current??s[0])},[To,s]),Xy=d.useCallback(x=>{sn.length<2||E(j=>{const I=Math.max(0,sn.length-2);return Math.min(I,Math.max(0,j+x))})},[sn.length]);d.useEffect(()=>{v&&(fi||Oa())},[v,fi,Oa]),d.useEffect(()=>{const x=()=>{f&&(dt.current=!1,h(null)),v&&(Zt.current=!1,S(!1))};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[f,v]),d.useEffect(()=>{const x=qe.current;if(!x)return;const j=W=>{W.dataTransfer&&Array.from(W.dataTransfer.types).includes("Files")&&(W.preventDefault(),Le(!0))},I=W=>{const ee=W.relatedTarget;ee&&x.contains(ee)||Le(!1)},z=async W=>{var Y,se;W.preventDefault(),Le(!1);const ee=Array.from(((Y=W.dataTransfer)==null?void 0:Y.files)??[]);if(!ee.length)return;if(!((((se=it==null?void 0:it.dirs)==null?void 0:se.length)??0)===0)){alert("Uploads are only allowed into folders without subdirectories.");return}for(const ge of ee)try{await xe.uploadFile(e,ge)}catch(ht){console.error(`Failed to upload ${ge.name}:`,ht)}ba()};return x.addEventListener("dragover",j),x.addEventListener("dragleave",I),x.addEventListener("drop",z),()=>{x.removeEventListener("dragover",j),x.removeEventListener("dragleave",I),x.removeEventListener("drop",z)}},[e,(Nf=it==null?void 0:it.dirs)==null?void 0:Nf.length,ba]),d.useEffect(()=>{const x=()=>rt(null),j=I=>{I.key==="Escape"&&rt(null)};return window.addEventListener("click",x),window.addEventListener("keydown",j),()=>{window.removeEventListener("click",x),window.removeEventListener("keydown",j)}},[]),d.useEffect(()=>{const x=j=>{if(!Gd(j.target)){if((j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="b"){j.preventDefault(),j.altKey?H(I=>!I):fe(I=>!I);return}if(!(f||v)){if(j.key==="Backspace"||j.key==="Delete")j.preventDefault(),Lo(wm(e));else if((j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="a")j.preventDefault(),i(Qe.map(I=>I.path));else if(j.key==="Escape")s.length&&(j.preventDefault(),i([]));else if(j.key==="/"){j.preventDefault();const I=document.querySelector(".toolbar-right .input");I==null||I.focus()}}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,Qe,s,f,v,Lo]);const Jy=_?`${X}px`:"0px",Zy=A?`${de}px`:"0px",kf=f??s[0]??null,za=kf?Sn.indexOf(kf):-1,e0=za>0,t0=za>=0&&za<Sn.length-1,Da=d.useCallback(x=>{if(!Sn.length)return;const j=f??s[0];if(!j)return;const I=Sn.indexOf(j);if(I===-1)return;const z=Math.min(Sn.length-1,Math.max(0,I+x)),W=Sn[z];!W||W===j||(f&&(h(W),nl(W)),i([W]))},[Sn,f,s]);return a.jsxs("div",{className:"app-shell grid h-full grid-cols-[var(--left)_1fr_var(--right)]",ref:qe,style:{"--left":Jy,"--right":Zy},children:[a.jsx(g1,{rootRef:yn,onSearch:r,viewerActive:!!f,onBack:Cf,zoomPercent:f?p:void 0,onZoomPercentChange:x=>g(x),currentLabel:Ky,itemCount:Ay,totalCount:$y,sortSpec:b.sort,metricKeys:Zn,onSortChange:Qy,sortDisabled:rn,filterCount:No,onOpenFilters:Vy,starFilters:Ea,onToggleStar:Hy,onClearStars:Ro,onClearFilters:xf,starCounts:jy,viewMode:U,onViewMode:D,gridItemSize:oe,onGridItemSize:ue,leftOpen:_,rightOpen:A,onToggleLeft:()=>fe(x=>!x),onToggleRight:()=>H(x=>!x),onPrevImage:()=>Da(-1),onNextImage:()=>Da(1),canPrevImage:e0,canNextImage:t0,searchDisabled:rn,searchPlaceholder:rn?"Exit similarity to search":void 0,syncIndicator:{state:Oy,presence:Mo,syncLabel:Ry,connectionLabel:Ly,lastEditedLabel:Ty,hasEdits:Pa,localTypingActive:fy,recentTouches:Dy}}),_&&a.jsx(gk,{leftTool:G,onToolChange:J,compareEnabled:fi,compareActive:v,onOpenCompare:Yy,views:ce,activeViewId:Q,onActivateView:x=>{var I;K(x.id);const j=Wc((I=x.view)==null?void 0:I.filters)??{and:[]};T({...x.view,filters:j}),Lo(x.pool.path)},onSaveView:qy,current:e,data:it,onOpenFolder:x=>{K(null),Lo(x)},onContextMenu:(x,j)=>{x.preventDefault(),rt({x:x.clientX,y:x.clientY,kind:"tree",payload:{path:j}})},countVersion:Z,items:Ey,filteredItems:Qe,metricKeys:Zn,selectedItems:wy,selectedMetric:b.selectedMetric,onSelectMetric:x=>T(j=>({...j,selectedMetric:x})),filters:b.filters,onChangeRange:Fa,onChangeFilters:Uy,onResize:le}),a.jsxs("div",{className:"grid-shell col-start-2 row-start-2 relative overflow-hidden flex flex-col",ref:Ue,children:[a.jsx("div",{"aria-live":"polite",className:"sr-only",children:s.length?`${s.length} selected`:""}),a.jsx(vk,{persistenceEnabled:cy,offViewSummary:zy,canRevealOffView:_a,onRevealOffView:By,onClearOffView:xy,browserZoomPercent:M}),u&&a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"font-semibold",children:"Similarity mode"}),a.jsxs("span",{className:"text-muted",children:["Embedding: ",u.embedding]}),vf&&a.jsxs("span",{className:"text-muted",children:["Query: ",vf]}),yf&&a.jsxs("span",{className:"text-muted",children:["Results: ",yf]}),a.jsxs("span",{className:"text-muted",children:["Top K: ",u.topK]}),u.minScore!=null&&a.jsxs("span",{className:"text-muted",children:["Min score: ",u.minScore]})]}),a.jsx("button",{className:"btn btn-sm",onClick:Ia,children:"Exit similarity"})]})}),wf.length>0&&a.jsx("div",{className:"sticky top-0 z-10 px-3 py-2 bg-panel border-b border-border",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Filters"}),wf.map(x=>a.jsxs("span",{className:"filter-chip",children:[a.jsx("span",{className:"truncate max-w-[240px]",title:x.label,children:x.label}),a.jsx("button",{className:"filter-chip-remove","aria-label":`Clear filter ${x.label}`,onClick:x.onRemove,children:""})]},x.id)),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:xf,children:"Clear all"})]})}),!1,a.jsxs("div",{className:"flex-1 min-h-0 relative",children:[a.jsx(vS,{items:Qe,selected:s,restoreToSelectionToken:R,onSelectionChange:i,onOpenViewer:x=>{try{Bt.current=x}catch{}Gy(x),i([x])},highlight:Ir?of:"",recentlyUpdated:vy,onVisiblePathsChange:yy,suppressSelectionHighlight:!!f||v,viewMode:U,targetCellSize:oe,onContextMenuItem:(x,j)=>{x.preventDefault();const I=s.length?s:[j];rt({x:x.clientX,y:x.clientY,kind:"grid",payload:{paths:I}})},scrollRef:ct,hideScrollbar:hf}),hf&&hi&&a.jsx(wS,{items:Qe,metricKey:hi,scrollRef:ct,sortDir:b.sort.dir})]})]}),A&&a.jsx(lC,{path:s[0]??null,selectedPaths:s,items:Qe,sortSpec:b.sort,onResize:pe,onStarChanged:(x,j)=>{ze(I=>{const z={...I};for(const W of x)z[W]=j;return z})},onFindSimilar:()=>l(!0),embeddingsAvailable:py,embeddingsLoading:hs.isLoading,onLocalTypingChange:hy}),a.jsx(aC,{open:o,embeddings:lf,rejected:my,selectedPath:s[0]??null,embeddingsLoading:hs.isLoading,embeddingsError:gy,onClose:()=>l(!1),onSearch:Wy}),f&&a.jsx(RS,{path:f,onClose:Cf,onZoomChange:x=>w(Math.round(x)),requestedZoomPercent:m,onZoomRequestConsumed:()=>g(null),onNavigate:Da}),v&&a.jsx(IS,{aItem:Sy,bItem:Cy,index:Or,total:sn.length,canPrev:ky,canNext:by,onNavigate:Xy,onClose:Oa}),Ce&&a.jsx("div",{className:"toolbar-offset fixed inset-0 left-[var(--left)] right-[var(--right)] bg-accent/10 border-2 border-dashed border-accent text-text flex items-center justify-center text-lg z-overlay pointer-events-none",children:"Drop images to upload"}),Ne&&a.jsx(Gk,{ctx:Ne,current:e,items:Qe,refetch:ba,setCtx:rt,onInvalidateCounts:Ny})]})}function Bk(e,t){const n=Wk(e)||"view",r=new Set(t.map(i=>i.id));if(!r.has(n))return n;let s=2;for(;r.has(`${n}-${s}`);)s+=1;return`${n}-${s}`}function Wk(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function ku(e){const t=e.filter(s=>s>0).sort((s,i)=>i-s),n=e.includes(0),r=[...t.map(s=>String(s))];return n&&r.push("None"),r.join(", ")}function Hk(e,t){return e&&t?`${e} to ${t}`:e?`from ${e}`:t?`to ${t}`:""}function Vk(e){if(e==="/"||e==="")return"Root";const t=e.split("/").filter(Boolean);return t.length?t.length<=2?`/${t.join("/")}`:`.../${t.slice(-2).join("/")}`:"Root"}function Qk(e,t){return`${Ym(e)}${Ym(t)}`}function Ym(e){const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Kk(e){const t=e.toLowerCase();return t.endsWith(".png")?"image/png":t.endsWith(".webp")?"image/webp":"image/jpeg"}function qk(e,t){const n=e.split("/").pop()??e;return{path:e,name:n,type:Kk(e),w:0,h:0,size:0,hasThumb:!0,hasMeta:!1,star:t??null}}function Qc(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function Gk({ctx:e,current:t,items:n,refetch:r,setCtx:s,onInvalidateCounts:i}){const o=EC(t),l=_r(),[u,c]=Cl.useState(!1),[f,h]=Cl.useState(null),v=()=>new Date().toISOString().replace(/[:.]/g,"-"),S=m=>{const g=p=>m==="/"?!0:p===m||p.startsWith(`${m}/`);l.invalidateQueries({predicate:({queryKey:p})=>{if(!Array.isArray(p)||p[0]!=="folder")return!1;const w=typeof p[1]=="string"?p[1]:"";return g(w)}})},k=m=>{const g=Qn(m);return g===""?"/":g},E=async()=>{const m=k(e.payload.path||"/");c(!0);try{await xe.refreshFolder(m),S(m),i(),(t===m||t.startsWith(m==="/"?"/":`${m}/`))&&await r(),Tc.evictPrefix(m),xs.evictPrefix(m)}catch(g){console.error("Failed to refresh folder:",g)}finally{c(!1),s(null)}},R=m=>async()=>{h(m);const g=e.payload.path||t;try{const w=(await xe.getFolder(g,{recursive:!0,legacyRecursive:!0})).items,M=_m(w),L=m==="csv"?Tm(M):Lm(M),b=m==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8",T=g==="/"?"root":(g.replace(/^\/+/,"")||"root").replace(/\//g,"_");Qc(new Blob([L],{type:b}),`metadata_${T}_${v()}.${m}`)}catch(p){console.error("Failed to export folder:",p),alert("Failed to export folder. See console for details.")}finally{h(null),s(null)}},y=e.kind==="tree"?[{label:u?"Refreshing":"Refresh",disabled:u,onClick:E},{label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f||u,onClick:R("csv")},{label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f||u,onClick:R("json")}]:(()=>{const m=e.payload.paths??[],g=[],p=w=>async()=>{h(w);try{const M=new Set(m),L=n.filter(P=>M.has(P.path)),b=_m(L),T=w==="csv"?Tm(b):Lm(b),N=w==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8";Qc(new Blob([T],{type:N}),`metadata_selection_${v()}.${w}`)}finally{h(null),s(null)}};return g.push({label:"Move to trash",disabled:o,onClick:async()=>{if(!o){for(const w of m)try{await xe.moveFile(w,"/_trash_")}catch(M){console.error(`Failed to trash ${w}:`,M)}r(),s(null)}}}),o&&(g.push({label:"Permanent delete",danger:!0,onClick:async()=>{if(confirm(`Delete ${m.length} file(s) permanently? This cannot be undone.`)){try{await xe.deleteFiles(m)}catch(w){console.error("Failed to delete files:",w)}r(),s(null)}}}),g.push({label:"Recover",onClick:async()=>{for(const w of m)try{const L=(await xe.getSidecar(w)).original_position,b=L&&L.split("/").slice(0,-1).join("/")||"/";await xe.moveFile(w,b)}catch(M){console.error(`Failed to recover ${w}:`,M)}r(),s(null)}})),m.length&&(g.push({label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f,onClick:p("csv")}),g.push({label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f,onClick:p("json")})),g})();return a.jsx(ZC,{x:e.x,y:e.y,items:y})}const Yk=new e1({defaultOptions:{queries:{staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always"},mutations:{retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),5e3)}}});function Xk(){return a.jsx(t1,{client:Yk,children:a.jsx(Uk,{})})}wv(document.getElementById("root")).render(a.jsx(Xk,{}));
