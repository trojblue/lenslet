var Ey=Object.defineProperty;var of=e=>{throw TypeError(e)};var Ny=(e,t,n)=>t in e?Ey(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var bn=(e,t,n)=>Ny(e,typeof t!="symbol"?t+"":t,n),ka=(e,t,n)=>t.has(e)||of("Cannot "+n);var k=(e,t,n)=>(ka(e,t,"read from private field"),n?n.call(e):t.get(e)),se=(e,t,n)=>t.has(e)?of("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),K=(e,t,n,r)=>(ka(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ge=(e,t,n)=>(ka(e,t,"access private method"),n);var po=(e,t,n,r)=>({set _(s){K(e,t,s,n)},get _(){return k(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function jy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fm={exports:{}},Fl={},Om={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var no=Symbol.for("react.element"),My=Symbol.for("react.portal"),Ry=Symbol.for("react.fragment"),Ly=Symbol.for("react.strict_mode"),Ty=Symbol.for("react.profiler"),_y=Symbol.for("react.provider"),Py=Symbol.for("react.context"),Iy=Symbol.for("react.forward_ref"),Fy=Symbol.for("react.suspense"),Oy=Symbol.for("react.memo"),Dy=Symbol.for("react.lazy"),lf=Symbol.iterator;function zy(e){return e===null||typeof e!="object"?null:(e=lf&&e[lf]||e["@@iterator"],typeof e=="function"?e:null)}var Dm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zm=Object.assign,Am={};function Gs(e,t,n){this.props=e,this.context=t,this.refs=Am,this.updater=n||Dm}Gs.prototype.isReactComponent={};Gs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Gs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $m(){}$m.prototype=Gs.prototype;function jc(e,t,n){this.props=e,this.context=t,this.refs=Am,this.updater=n||Dm}var Mc=jc.prototype=new $m;Mc.constructor=jc;zm(Mc,Gs.prototype);Mc.isPureReactComponent=!0;var af=Array.isArray,Um=Object.prototype.hasOwnProperty,Rc={current:null},Bm={key:!0,ref:!0,__self:!0,__source:!0};function Wm(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Um.call(t,r)&&!Bm.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:no,type:e,key:i,ref:o,props:s,_owner:Rc.current}}function Ay(e,t){return{$$typeof:no,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Lc(e){return typeof e=="object"&&e!==null&&e.$$typeof===no}function $y(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var uf=/\/+/g;function Ca(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$y(""+e.key):t.toString(36)}function zo(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case no:case My:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Ca(o,0):r,af(s)?(n="",e!=null&&(n=e.replace(uf,"$&/")+"/"),zo(s,t,n,"",function(c){return c})):s!=null&&(Lc(s)&&(s=Ay(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(uf,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",af(e))for(var l=0;l<e.length;l++){i=e[l];var u=r+Ca(i,l);o+=zo(i,t,n,u,s)}else if(u=zy(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=r+Ca(i,l++),o+=zo(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function go(e,t,n){if(e==null)return e;var r=[],s=0;return zo(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Uy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var St={current:null},Ao={transition:null},By={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:Ao,ReactCurrentOwner:Rc};function Hm(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:go,forEach:function(e,t,n){go(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return go(e,function(){t++}),t},toArray:function(e){return go(e,function(t){return t})||[]},only:function(e){if(!Lc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xe.Component=Gs;xe.Fragment=Ry;xe.Profiler=Ty;xe.PureComponent=jc;xe.StrictMode=Ly;xe.Suspense=Fy;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=By;xe.act=Hm;xe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=zm({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Rc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)Um.call(t,u)&&!Bm.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:no,type:e.type,key:s,ref:i,props:r,_owner:o}};xe.createContext=function(e){return e={$$typeof:Py,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_y,_context:e},e.Consumer=e};xe.createElement=Wm;xe.createFactory=function(e){var t=Wm.bind(null,e);return t.type=e,t};xe.createRef=function(){return{current:null}};xe.forwardRef=function(e){return{$$typeof:Iy,render:e}};xe.isValidElement=Lc;xe.lazy=function(e){return{$$typeof:Dy,_payload:{_status:-1,_result:e},_init:Uy}};xe.memo=function(e,t){return{$$typeof:Oy,type:e,compare:t===void 0?null:t}};xe.startTransition=function(e){var t=Ao.transition;Ao.transition={};try{e()}finally{Ao.transition=t}};xe.unstable_act=Hm;xe.useCallback=function(e,t){return St.current.useCallback(e,t)};xe.useContext=function(e){return St.current.useContext(e)};xe.useDebugValue=function(){};xe.useDeferredValue=function(e){return St.current.useDeferredValue(e)};xe.useEffect=function(e,t){return St.current.useEffect(e,t)};xe.useId=function(){return St.current.useId()};xe.useImperativeHandle=function(e,t,n){return St.current.useImperativeHandle(e,t,n)};xe.useInsertionEffect=function(e,t){return St.current.useInsertionEffect(e,t)};xe.useLayoutEffect=function(e,t){return St.current.useLayoutEffect(e,t)};xe.useMemo=function(e,t){return St.current.useMemo(e,t)};xe.useReducer=function(e,t,n){return St.current.useReducer(e,t,n)};xe.useRef=function(e){return St.current.useRef(e)};xe.useState=function(e){return St.current.useState(e)};xe.useSyncExternalStore=function(e,t,n){return St.current.useSyncExternalStore(e,t,n)};xe.useTransition=function(){return St.current.useTransition()};xe.version="18.3.1";Om.exports=xe;var d=Om.exports;const rl=jy(d);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy=d,Hy=Symbol.for("react.element"),Vy=Symbol.for("react.fragment"),Qy=Object.prototype.hasOwnProperty,Ky=Wy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qy={key:!0,ref:!0,__self:!0,__source:!0};function Vm(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Qy.call(t,r)&&!qy.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Hy,type:e,key:i,ref:o,props:s,_owner:Ky.current}}Fl.Fragment=Vy;Fl.jsx=Vm;Fl.jsxs=Vm;Fm.exports=Fl;var a=Fm.exports,Qm={exports:{}},Dt={},Km={exports:{}},qm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,Q){var q=O.length;O.push(Q);e:for(;0<q;){var fe=q-1>>>1,de=O[fe];if(0<s(de,Q))O[fe]=Q,O[q]=de,q=fe;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var Q=O[0],q=O.pop();if(q!==Q){O[0]=q;e:for(var fe=0,de=O.length,be=de>>>1;fe<be;){var H=2*(fe+1)-1,Y=O[H],ne=H+1,he=O[ne];if(0>s(Y,q))ne<de&&0>s(he,Y)?(O[fe]=he,O[ne]=q,fe=ne):(O[fe]=Y,O[H]=q,fe=H);else if(ne<de&&0>s(he,q))O[fe]=he,O[ne]=q,fe=ne;else break e}}return Q}function s(O,Q){var q=O.sortIndex-Q.sortIndex;return q!==0?q:O.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,m=null,p=3,S=!1,w=!1,N=!1,T=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(O){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=O)r(c),Q.sortIndex=Q.expirationTime,t(u,Q);else break;Q=n(c)}}function g(O){if(N=!1,h(O),!w)if(n(u)!==null)w=!0,B(b);else{var Q=n(c);Q!==null&&ue(g,Q.startTime-O)}}function b(O,Q){w=!1,N&&(N=!1,y(E),E=-1),S=!0;var q=p;try{for(h(Q),m=n(u);m!==null&&(!(m.expirationTime>Q)||O&&!F());){var fe=m.callback;if(typeof fe=="function"){m.callback=null,p=m.priorityLevel;var de=fe(m.expirationTime<=Q);Q=e.unstable_now(),typeof de=="function"?m.callback=de:m===n(u)&&r(u),h(Q)}else r(u);m=n(u)}if(m!==null)var be=!0;else{var H=n(c);H!==null&&ue(g,H.startTime-Q),be=!1}return be}finally{m=null,p=q,S=!1}}var M=!1,R=null,E=-1,L=5,C=-1;function F(){return!(e.unstable_now()-C<L)}function V(){if(R!==null){var O=e.unstable_now();C=O;var Q=!0;try{Q=R(!0,O)}finally{Q?z():(M=!1,R=null)}}else M=!1}var z;if(typeof v=="function")z=function(){v(V)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,oe=$.port2;$.port1.onmessage=V,z=function(){oe.postMessage(null)}}else z=function(){T(V,0)};function B(O){R=O,M||(M=!0,z())}function ue(O,Q){E=T(function(){O(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){w||S||(w=!0,B(b))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(O){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var q=p;p=Q;try{return O()}finally{p=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,Q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var q=p;p=O;try{return Q()}finally{p=q}},e.unstable_scheduleCallback=function(O,Q,q){var fe=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?fe+q:fe):q=fe,O){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=q+de,O={id:f++,callback:Q,priorityLevel:O,startTime:q,expirationTime:de,sortIndex:-1},q>fe?(O.sortIndex=q,t(c,O),n(u)===null&&O===n(c)&&(N?(y(E),E=-1):N=!0,ue(g,q-fe))):(O.sortIndex=de,t(u,O),w||S||(w=!0,B(b))),O},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(O){var Q=p;return function(){var q=p;p=Q;try{return O.apply(this,arguments)}finally{p=q}}}})(qm);Km.exports=qm;var Yy=Km.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gy=d,Ot=Yy;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ym=new Set,Li={};function es(e,t){Ws(e,t),Ws(e+"Capture",t)}function Ws(e,t){for(Li[e]=t,e=0;e<t.length;e++)Ym.add(t[e])}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),iu=Object.prototype.hasOwnProperty,Xy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cf={},df={};function Jy(e){return iu.call(df,e)?!0:iu.call(cf,e)?!1:Xy.test(e)?df[e]=!0:(cf[e]=!0,!1)}function Zy(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function e0(e,t,n,r){if(t===null||typeof t>"u"||Zy(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function kt(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ot[e]=new kt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ot[t]=new kt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ot[e]=new kt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ot[e]=new kt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ot[e]=new kt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ot[e]=new kt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ot[e]=new kt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ot[e]=new kt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ot[e]=new kt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Tc=/[\-:]([a-z])/g;function _c(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Tc,_c);ot[t]=new kt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Tc,_c);ot[t]=new kt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Tc,_c);ot[t]=new kt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ot[e]=new kt(e,1,!1,e.toLowerCase(),null,!1,!1)});ot.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ot[e]=new kt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pc(e,t,n,r){var s=ot.hasOwnProperty(t)?ot[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(e0(t,n,s,r)&&(n=null),r||s===null?Jy(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Bn=Gy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vo=Symbol.for("react.element"),cs=Symbol.for("react.portal"),ds=Symbol.for("react.fragment"),Ic=Symbol.for("react.strict_mode"),ou=Symbol.for("react.profiler"),Gm=Symbol.for("react.provider"),Xm=Symbol.for("react.context"),Fc=Symbol.for("react.forward_ref"),lu=Symbol.for("react.suspense"),au=Symbol.for("react.suspense_list"),Oc=Symbol.for("react.memo"),Yn=Symbol.for("react.lazy"),Jm=Symbol.for("react.offscreen"),ff=Symbol.iterator;function ii(e){return e===null||typeof e!="object"?null:(e=ff&&e[ff]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,ba;function mi(e){if(ba===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ba=t&&t[1]||""}return`
`+ba+e}var Ea=!1;function Na(e,t){if(!e||Ea)return"";Ea=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{Ea=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?mi(e):""}function t0(e){switch(e.tag){case 5:return mi(e.type);case 16:return mi("Lazy");case 13:return mi("Suspense");case 19:return mi("SuspenseList");case 0:case 2:case 15:return e=Na(e.type,!1),e;case 11:return e=Na(e.type.render,!1),e;case 1:return e=Na(e.type,!0),e;default:return""}}function uu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ds:return"Fragment";case cs:return"Portal";case ou:return"Profiler";case Ic:return"StrictMode";case lu:return"Suspense";case au:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Xm:return(e.displayName||"Context")+".Consumer";case Gm:return(e._context.displayName||"Context")+".Provider";case Fc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Oc:return t=e.displayName||null,t!==null?t:uu(e.type)||"Memo";case Yn:t=e._payload,e=e._init;try{return uu(e(t))}catch{}}return null}function n0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uu(t);case 8:return t===Ic?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function r0(e){var t=Zm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yo(e){e._valueTracker||(e._valueTracker=r0(e))}function ep(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Zm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function sl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function cu(e,t){var n=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hf(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=xr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function tp(e,t){t=t.checked,t!=null&&Pc(e,"checked",t,!1)}function du(e,t){tp(e,t);var n=xr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?fu(e,t.type,n):t.hasOwnProperty("defaultValue")&&fu(e,t.type,xr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function fu(e,t,n){(t!=="number"||sl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var pi=Array.isArray;function ks(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+xr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function hu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(A(92));if(pi(n)){if(1<n.length)throw Error(A(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:xr(n)}}function np(e,t){var n=xr(t.value),r=xr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function gf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function rp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?rp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xo,sp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xo=xo||document.createElement("div"),xo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ti(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},s0=["Webkit","ms","Moz","O"];Object.keys(wi).forEach(function(e){s0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wi[t]=wi[e]})});function ip(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||wi.hasOwnProperty(e)&&wi[e]?(""+t).trim():t+"px"}function op(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ip(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var i0=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pu(e,t){if(t){if(i0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function gu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vu=null;function Dc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yu=null,Cs=null,bs=null;function vf(e){if(e=io(e)){if(typeof yu!="function")throw Error(A(280));var t=e.stateNode;t&&(t=$l(t),yu(e.stateNode,e.type,t))}}function lp(e){Cs?bs?bs.push(e):bs=[e]:Cs=e}function ap(){if(Cs){var e=Cs,t=bs;if(bs=Cs=null,vf(e),t)for(e=0;e<t.length;e++)vf(t[e])}}function up(e,t){return e(t)}function cp(){}var ja=!1;function dp(e,t,n){if(ja)return e(t,n);ja=!0;try{return up(e,t,n)}finally{ja=!1,(Cs!==null||bs!==null)&&(cp(),ap())}}function _i(e,t){var n=e.stateNode;if(n===null)return null;var r=$l(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(A(231,t,typeof n));return n}var xu=!1;if(zn)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){xu=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{xu=!1}function o0(e,t,n,r,s,i,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var Si=!1,il=null,ol=!1,wu=null,l0={onError:function(e){Si=!0,il=e}};function a0(e,t,n,r,s,i,o,l,u){Si=!1,il=null,o0.apply(l0,arguments)}function u0(e,t,n,r,s,i,o,l,u){if(a0.apply(this,arguments),Si){if(Si){var c=il;Si=!1,il=null}else throw Error(A(198));ol||(ol=!0,wu=c)}}function ts(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function fp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function yf(e){if(ts(e)!==e)throw Error(A(188))}function c0(e){var t=e.alternate;if(!t){if(t=ts(e),t===null)throw Error(A(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return yf(s),e;if(i===r)return yf(s),t;i=i.sibling}throw Error(A(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?e:t}function hp(e){return e=c0(e),e!==null?mp(e):null}function mp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=mp(e);if(t!==null)return t;e=e.sibling}return null}var pp=Ot.unstable_scheduleCallback,xf=Ot.unstable_cancelCallback,d0=Ot.unstable_shouldYield,f0=Ot.unstable_requestPaint,He=Ot.unstable_now,h0=Ot.unstable_getCurrentPriorityLevel,zc=Ot.unstable_ImmediatePriority,gp=Ot.unstable_UserBlockingPriority,ll=Ot.unstable_NormalPriority,m0=Ot.unstable_LowPriority,vp=Ot.unstable_IdlePriority,Ol=null,xn=null;function p0(e){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(Ol,e,void 0,(e.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:y0,g0=Math.log,v0=Math.LN2;function y0(e){return e>>>=0,e===0?32:31-(g0(e)/v0|0)|0}var wo=64,So=4194304;function gi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function al(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=gi(l):(i&=o,i!==0&&(r=gi(i)))}else o=n&~s,o!==0?r=gi(o):i!==0&&(r=gi(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ln(t),s=1<<n,r|=e[n],t&=~s;return r}function x0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ln(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=x0(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function Su(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yp(){var e=wo;return wo<<=1,!(wo&4194240)&&(wo=64),e}function Ma(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ro(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ln(t),e[t]=n}function S0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ln(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Ac(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ln(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ee=0;function xp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wp,$c,Sp,kp,Cp,ku=!1,ko=[],cr=null,dr=null,fr=null,Pi=new Map,Ii=new Map,Xn=[],k0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wf(e,t){switch(e){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Pi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ii.delete(t.pointerId)}}function li(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=io(t),t!==null&&$c(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function C0(e,t,n,r,s){switch(t){case"focusin":return cr=li(cr,e,t,n,r,s),!0;case"dragenter":return dr=li(dr,e,t,n,r,s),!0;case"mouseover":return fr=li(fr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Pi.set(i,li(Pi.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ii.set(i,li(Ii.get(i)||null,e,t,n,r,s)),!0}return!1}function bp(e){var t=Rr(e.target);if(t!==null){var n=ts(t);if(n!==null){if(t=n.tag,t===13){if(t=fp(n),t!==null){e.blockedOn=t,Cp(e.priority,function(){Sp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $o(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Cu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);vu=r,n.target.dispatchEvent(r),vu=null}else return t=io(n),t!==null&&$c(t),e.blockedOn=n,!1;t.shift()}return!0}function Sf(e,t,n){$o(e)&&n.delete(t)}function b0(){ku=!1,cr!==null&&$o(cr)&&(cr=null),dr!==null&&$o(dr)&&(dr=null),fr!==null&&$o(fr)&&(fr=null),Pi.forEach(Sf),Ii.forEach(Sf)}function ai(e,t){e.blockedOn===t&&(e.blockedOn=null,ku||(ku=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,b0)))}function Fi(e){function t(s){return ai(s,e)}if(0<ko.length){ai(ko[0],e);for(var n=1;n<ko.length;n++){var r=ko[n];r.blockedOn===e&&(r.blockedOn=null)}}for(cr!==null&&ai(cr,e),dr!==null&&ai(dr,e),fr!==null&&ai(fr,e),Pi.forEach(t),Ii.forEach(t),n=0;n<Xn.length;n++)r=Xn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Xn.length&&(n=Xn[0],n.blockedOn===null);)bp(n),n.blockedOn===null&&Xn.shift()}var Es=Bn.ReactCurrentBatchConfig,ul=!0;function E0(e,t,n,r){var s=Ee,i=Es.transition;Es.transition=null;try{Ee=1,Uc(e,t,n,r)}finally{Ee=s,Es.transition=i}}function N0(e,t,n,r){var s=Ee,i=Es.transition;Es.transition=null;try{Ee=4,Uc(e,t,n,r)}finally{Ee=s,Es.transition=i}}function Uc(e,t,n,r){if(ul){var s=Cu(e,t,n,r);if(s===null)za(e,t,r,cl,n),wf(e,r);else if(C0(s,e,t,n,r))r.stopPropagation();else if(wf(e,r),t&4&&-1<k0.indexOf(e)){for(;s!==null;){var i=io(s);if(i!==null&&wp(i),i=Cu(e,t,n,r),i===null&&za(e,t,r,cl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else za(e,t,r,null,n)}}var cl=null;function Cu(e,t,n,r){if(cl=null,e=Dc(r),e=Rr(e),e!==null)if(t=ts(e),t===null)e=null;else if(n=t.tag,n===13){if(e=fp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return cl=e,null}function Ep(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h0()){case zc:return 1;case gp:return 4;case ll:case m0:return 16;case vp:return 536870912;default:return 16}default:return 16}}var ar=null,Bc=null,Uo=null;function Np(){if(Uo)return Uo;var e,t=Bc,n=t.length,r,s="value"in ar?ar.value:ar.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Uo=s.slice(e,1<r?1-r:void 0)}function Bo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Co(){return!0}function kf(){return!1}function zt(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Co:kf,this.isPropagationStopped=kf,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Co)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Co)},persist:function(){},isPersistent:Co}),t}var Xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wc=zt(Xs),so=Oe({},Xs,{view:0,detail:0}),j0=zt(so),Ra,La,ui,Dl=Oe({},so,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ui&&(ui&&e.type==="mousemove"?(Ra=e.screenX-ui.screenX,La=e.screenY-ui.screenY):La=Ra=0,ui=e),Ra)},movementY:function(e){return"movementY"in e?e.movementY:La}}),Cf=zt(Dl),M0=Oe({},Dl,{dataTransfer:0}),R0=zt(M0),L0=Oe({},so,{relatedTarget:0}),Ta=zt(L0),T0=Oe({},Xs,{animationName:0,elapsedTime:0,pseudoElement:0}),_0=zt(T0),P0=Oe({},Xs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),I0=zt(P0),F0=Oe({},Xs,{data:0}),bf=zt(F0),O0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},D0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function A0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=z0[e])?!!t[e]:!1}function Hc(){return A0}var $0=Oe({},so,{key:function(e){if(e.key){var t=O0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?D0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hc,charCode:function(e){return e.type==="keypress"?Bo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),U0=zt($0),B0=Oe({},Dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ef=zt(B0),W0=Oe({},so,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hc}),H0=zt(W0),V0=Oe({},Xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q0=zt(V0),K0=Oe({},Dl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),q0=zt(K0),Y0=[9,13,27,32],Vc=zn&&"CompositionEvent"in window,ki=null;zn&&"documentMode"in document&&(ki=document.documentMode);var G0=zn&&"TextEvent"in window&&!ki,jp=zn&&(!Vc||ki&&8<ki&&11>=ki),Nf=" ",jf=!1;function Mp(e,t){switch(e){case"keyup":return Y0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fs=!1;function X0(e,t){switch(e){case"compositionend":return Rp(t);case"keypress":return t.which!==32?null:(jf=!0,Nf);case"textInput":return e=t.data,e===Nf&&jf?null:e;default:return null}}function J0(e,t){if(fs)return e==="compositionend"||!Vc&&Mp(e,t)?(e=Np(),Uo=Bc=ar=null,fs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jp&&t.locale!=="ko"?null:t.data;default:return null}}var Z0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Z0[e.type]:t==="textarea"}function Lp(e,t,n,r){lp(r),t=dl(t,"onChange"),0<t.length&&(n=new Wc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ci=null,Oi=null;function ex(e){Up(e,0)}function zl(e){var t=ps(e);if(ep(t))return e}function tx(e,t){if(e==="change")return t}var Tp=!1;if(zn){var _a;if(zn){var Pa="oninput"in document;if(!Pa){var Rf=document.createElement("div");Rf.setAttribute("oninput","return;"),Pa=typeof Rf.oninput=="function"}_a=Pa}else _a=!1;Tp=_a&&(!document.documentMode||9<document.documentMode)}function Lf(){Ci&&(Ci.detachEvent("onpropertychange",_p),Oi=Ci=null)}function _p(e){if(e.propertyName==="value"&&zl(Oi)){var t=[];Lp(t,Oi,e,Dc(e)),dp(ex,t)}}function nx(e,t,n){e==="focusin"?(Lf(),Ci=t,Oi=n,Ci.attachEvent("onpropertychange",_p)):e==="focusout"&&Lf()}function rx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zl(Oi)}function sx(e,t){if(e==="click")return zl(t)}function ix(e,t){if(e==="input"||e==="change")return zl(t)}function ox(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var un=typeof Object.is=="function"?Object.is:ox;function Di(e,t){if(un(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!iu.call(t,s)||!un(e[s],t[s]))return!1}return!0}function Tf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _f(e,t){var n=Tf(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Tf(n)}}function Pp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Pp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ip(){for(var e=window,t=sl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=sl(e.document)}return t}function Qc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lx(e){var t=Ip(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Pp(n.ownerDocument.documentElement,n)){if(r!==null&&Qc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=_f(n,i);var o=_f(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ax=zn&&"documentMode"in document&&11>=document.documentMode,hs=null,bu=null,bi=null,Eu=!1;function Pf(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Eu||hs==null||hs!==sl(r)||(r=hs,"selectionStart"in r&&Qc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bi&&Di(bi,r)||(bi=r,r=dl(bu,"onSelect"),0<r.length&&(t=new Wc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=hs)))}function bo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ms={animationend:bo("Animation","AnimationEnd"),animationiteration:bo("Animation","AnimationIteration"),animationstart:bo("Animation","AnimationStart"),transitionend:bo("Transition","TransitionEnd")},Ia={},Fp={};zn&&(Fp=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function Al(e){if(Ia[e])return Ia[e];if(!ms[e])return e;var t=ms[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Fp)return Ia[e]=t[n];return e}var Op=Al("animationend"),Dp=Al("animationiteration"),zp=Al("animationstart"),Ap=Al("transitionend"),$p=new Map,If="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){$p.set(e,t),es(t,[e])}for(var Fa=0;Fa<If.length;Fa++){var Oa=If[Fa],ux=Oa.toLowerCase(),cx=Oa[0].toUpperCase()+Oa.slice(1);Sr(ux,"on"+cx)}Sr(Op,"onAnimationEnd");Sr(Dp,"onAnimationIteration");Sr(zp,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(Ap,"onTransitionEnd");Ws("onMouseEnter",["mouseout","mouseover"]);Ws("onMouseLeave",["mouseout","mouseover"]);Ws("onPointerEnter",["pointerout","pointerover"]);Ws("onPointerLeave",["pointerout","pointerover"]);es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));es("onBeforeInput",["compositionend","keypress","textInput","paste"]);es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dx=new Set("cancel close invalid load scroll toggle".split(" ").concat(vi));function Ff(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,u0(r,t,void 0,e),e.currentTarget=null}function Up(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Ff(s,l,c),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Ff(s,l,c),i=u}}}if(ol)throw e=wu,ol=!1,wu=null,e}function Me(e,t){var n=t[Lu];n===void 0&&(n=t[Lu]=new Set);var r=e+"__bubble";n.has(r)||(Bp(t,e,2,!1),n.add(r))}function Da(e,t,n){var r=0;t&&(r|=4),Bp(n,e,r,t)}var Eo="_reactListening"+Math.random().toString(36).slice(2);function zi(e){if(!e[Eo]){e[Eo]=!0,Ym.forEach(function(n){n!=="selectionchange"&&(dx.has(n)||Da(n,!1,e),Da(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Eo]||(t[Eo]=!0,Da("selectionchange",!1,t))}}function Bp(e,t,n,r){switch(Ep(t)){case 1:var s=E0;break;case 4:s=N0;break;default:s=Uc}n=s.bind(null,t,n,e),s=void 0,!xu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function za(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Rr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}dp(function(){var c=i,f=Dc(n),m=[];e:{var p=$p.get(e);if(p!==void 0){var S=Wc,w=e;switch(e){case"keypress":if(Bo(n)===0)break e;case"keydown":case"keyup":S=U0;break;case"focusin":w="focus",S=Ta;break;case"focusout":w="blur",S=Ta;break;case"beforeblur":case"afterblur":S=Ta;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Cf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=R0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=H0;break;case Op:case Dp:case zp:S=_0;break;case Ap:S=Q0;break;case"scroll":S=j0;break;case"wheel":S=q0;break;case"copy":case"cut":case"paste":S=I0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Ef}var N=(t&4)!==0,T=!N&&e==="scroll",y=N?p!==null?p+"Capture":null:p;N=[];for(var v=c,h;v!==null;){h=v;var g=h.stateNode;if(h.tag===5&&g!==null&&(h=g,y!==null&&(g=_i(v,y),g!=null&&N.push(Ai(v,g,h)))),T)break;v=v.return}0<N.length&&(p=new S(p,w,null,n,f),m.push({event:p,listeners:N}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",p&&n!==vu&&(w=n.relatedTarget||n.fromElement)&&(Rr(w)||w[An]))break e;if((S||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,S?(w=n.relatedTarget||n.toElement,S=c,w=w?Rr(w):null,w!==null&&(T=ts(w),w!==T||w.tag!==5&&w.tag!==6)&&(w=null)):(S=null,w=c),S!==w)){if(N=Cf,g="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(N=Ef,g="onPointerLeave",y="onPointerEnter",v="pointer"),T=S==null?p:ps(S),h=w==null?p:ps(w),p=new N(g,v+"leave",S,n,f),p.target=T,p.relatedTarget=h,g=null,Rr(f)===c&&(N=new N(y,v+"enter",w,n,f),N.target=h,N.relatedTarget=T,g=N),T=g,S&&w)t:{for(N=S,y=w,v=0,h=N;h;h=is(h))v++;for(h=0,g=y;g;g=is(g))h++;for(;0<v-h;)N=is(N),v--;for(;0<h-v;)y=is(y),h--;for(;v--;){if(N===y||y!==null&&N===y.alternate)break t;N=is(N),y=is(y)}N=null}else N=null;S!==null&&Of(m,p,S,N,!1),w!==null&&T!==null&&Of(m,T,w,N,!0)}}e:{if(p=c?ps(c):window,S=p.nodeName&&p.nodeName.toLowerCase(),S==="select"||S==="input"&&p.type==="file")var b=tx;else if(Mf(p))if(Tp)b=ix;else{b=rx;var M=nx}else(S=p.nodeName)&&S.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(b=sx);if(b&&(b=b(e,c))){Lp(m,b,n,f);break e}M&&M(e,p,c),e==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&fu(p,"number",p.value)}switch(M=c?ps(c):window,e){case"focusin":(Mf(M)||M.contentEditable==="true")&&(hs=M,bu=c,bi=null);break;case"focusout":bi=bu=hs=null;break;case"mousedown":Eu=!0;break;case"contextmenu":case"mouseup":case"dragend":Eu=!1,Pf(m,n,f);break;case"selectionchange":if(ax)break;case"keydown":case"keyup":Pf(m,n,f)}var R;if(Vc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else fs?Mp(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(jp&&n.locale!=="ko"&&(fs||E!=="onCompositionStart"?E==="onCompositionEnd"&&fs&&(R=Np()):(ar=f,Bc="value"in ar?ar.value:ar.textContent,fs=!0)),M=dl(c,E),0<M.length&&(E=new bf(E,e,null,n,f),m.push({event:E,listeners:M}),R?E.data=R:(R=Rp(n),R!==null&&(E.data=R)))),(R=G0?X0(e,n):J0(e,n))&&(c=dl(c,"onBeforeInput"),0<c.length&&(f=new bf("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:c}),f.data=R))}Up(m,t)})}function Ai(e,t,n){return{instance:e,listener:t,currentTarget:n}}function dl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_i(e,n),i!=null&&r.unshift(Ai(e,i,s)),i=_i(e,t),i!=null&&r.push(Ai(e,i,s))),e=e.return}return r}function is(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Of(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,s?(u=_i(n,i),u!=null&&o.unshift(Ai(n,u,l))):s||(u=_i(n,i),u!=null&&o.push(Ai(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var fx=/\r\n?/g,hx=/\u0000|\uFFFD/g;function Df(e){return(typeof e=="string"?e:""+e).replace(fx,`
`).replace(hx,"")}function No(e,t,n){if(t=Df(t),Df(e)!==t&&n)throw Error(A(425))}function fl(){}var Nu=null,ju=null;function Mu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ru=typeof setTimeout=="function"?setTimeout:void 0,mx=typeof clearTimeout=="function"?clearTimeout:void 0,zf=typeof Promise=="function"?Promise:void 0,px=typeof queueMicrotask=="function"?queueMicrotask:typeof zf<"u"?function(e){return zf.resolve(null).then(e).catch(gx)}:Ru;function gx(e){setTimeout(function(){throw e})}function Aa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Fi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Fi(t)}function hr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Af(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Js=Math.random().toString(36).slice(2),yn="__reactFiber$"+Js,$i="__reactProps$"+Js,An="__reactContainer$"+Js,Lu="__reactEvents$"+Js,vx="__reactListeners$"+Js,yx="__reactHandles$"+Js;function Rr(e){var t=e[yn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[An]||n[yn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Af(e);e!==null;){if(n=e[yn])return n;e=Af(e)}return t}e=n,n=e.parentNode}return null}function io(e){return e=e[yn]||e[An],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ps(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function $l(e){return e[$i]||null}var Tu=[],gs=-1;function kr(e){return{current:e}}function Re(e){0>gs||(e.current=Tu[gs],Tu[gs]=null,gs--)}function je(e,t){gs++,Tu[gs]=e.current,e.current=t}var wr={},dt=kr(wr),jt=kr(!1),Kr=wr;function Hs(e,t){var n=e.type.contextTypes;if(!n)return wr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Mt(e){return e=e.childContextTypes,e!=null}function hl(){Re(jt),Re(dt)}function $f(e,t,n){if(dt.current!==wr)throw Error(A(168));je(dt,t),je(jt,n)}function Wp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(A(108,n0(e)||"Unknown",s));return Oe({},n,r)}function ml(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wr,Kr=dt.current,je(dt,e),je(jt,jt.current),!0}function Uf(e,t,n){var r=e.stateNode;if(!r)throw Error(A(169));n?(e=Wp(e,t,Kr),r.__reactInternalMemoizedMergedChildContext=e,Re(jt),Re(dt),je(dt,e)):Re(jt),je(jt,n)}var Mn=null,Ul=!1,$a=!1;function Hp(e){Mn===null?Mn=[e]:Mn.push(e)}function xx(e){Ul=!0,Hp(e)}function Cr(){if(!$a&&Mn!==null){$a=!0;var e=0,t=Ee;try{var n=Mn;for(Ee=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Mn=null,Ul=!1}catch(s){throw Mn!==null&&(Mn=Mn.slice(e+1)),pp(zc,Cr),s}finally{Ee=t,$a=!1}}return null}var vs=[],ys=0,pl=null,gl=0,Bt=[],Wt=0,qr=null,Pn=1,In="";function jr(e,t){vs[ys++]=gl,vs[ys++]=pl,pl=e,gl=t}function Vp(e,t,n){Bt[Wt++]=Pn,Bt[Wt++]=In,Bt[Wt++]=qr,qr=e;var r=Pn;e=In;var s=32-ln(r)-1;r&=~(1<<s),n+=1;var i=32-ln(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pn=1<<32-ln(t)+s|n<<s|r,In=i+e}else Pn=1<<i|n<<s|r,In=e}function Kc(e){e.return!==null&&(jr(e,1),Vp(e,1,0))}function qc(e){for(;e===pl;)pl=vs[--ys],vs[ys]=null,gl=vs[--ys],vs[ys]=null;for(;e===qr;)qr=Bt[--Wt],Bt[Wt]=null,In=Bt[--Wt],Bt[Wt]=null,Pn=Bt[--Wt],Bt[Wt]=null}var Ft=null,It=null,Te=!1,sn=null;function Qp(e,t){var n=Vt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ft=e,It=hr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ft=e,It=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=qr!==null?{id:Pn,overflow:In}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Vt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ft=e,It=null,!0):!1;default:return!1}}function _u(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Pu(e){if(Te){var t=It;if(t){var n=t;if(!Bf(e,t)){if(_u(e))throw Error(A(418));t=hr(n.nextSibling);var r=Ft;t&&Bf(e,t)?Qp(r,n):(e.flags=e.flags&-4097|2,Te=!1,Ft=e)}}else{if(_u(e))throw Error(A(418));e.flags=e.flags&-4097|2,Te=!1,Ft=e}}}function Wf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ft=e}function jo(e){if(e!==Ft)return!1;if(!Te)return Wf(e),Te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mu(e.type,e.memoizedProps)),t&&(t=It)){if(_u(e))throw Kp(),Error(A(418));for(;t;)Qp(e,t),t=hr(t.nextSibling)}if(Wf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){It=hr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}It=null}}else It=Ft?hr(e.stateNode.nextSibling):null;return!0}function Kp(){for(var e=It;e;)e=hr(e.nextSibling)}function Vs(){It=Ft=null,Te=!1}function Yc(e){sn===null?sn=[e]:sn.push(e)}var wx=Bn.ReactCurrentBatchConfig;function ci(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,e))}return e}function Mo(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hf(e){var t=e._init;return t(e._payload)}function qp(e){function t(y,v){if(e){var h=y.deletions;h===null?(y.deletions=[v],y.flags|=16):h.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function s(y,v){return y=vr(y,v),y.index=0,y.sibling=null,y}function i(y,v,h){return y.index=h,e?(h=y.alternate,h!==null?(h=h.index,h<v?(y.flags|=2,v):h):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,v,h,g){return v===null||v.tag!==6?(v=Ka(h,y.mode,g),v.return=y,v):(v=s(v,h),v.return=y,v)}function u(y,v,h,g){var b=h.type;return b===ds?f(y,v,h.props.children,g,h.key):v!==null&&(v.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Yn&&Hf(b)===v.type)?(g=s(v,h.props),g.ref=ci(y,v,h),g.return=y,g):(g=Yo(h.type,h.key,h.props,null,y.mode,g),g.ref=ci(y,v,h),g.return=y,g)}function c(y,v,h,g){return v===null||v.tag!==4||v.stateNode.containerInfo!==h.containerInfo||v.stateNode.implementation!==h.implementation?(v=qa(h,y.mode,g),v.return=y,v):(v=s(v,h.children||[]),v.return=y,v)}function f(y,v,h,g,b){return v===null||v.tag!==7?(v=Qr(h,y.mode,g,b),v.return=y,v):(v=s(v,h),v.return=y,v)}function m(y,v,h){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ka(""+v,y.mode,h),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case vo:return h=Yo(v.type,v.key,v.props,null,y.mode,h),h.ref=ci(y,null,v),h.return=y,h;case cs:return v=qa(v,y.mode,h),v.return=y,v;case Yn:var g=v._init;return m(y,g(v._payload),h)}if(pi(v)||ii(v))return v=Qr(v,y.mode,h,null),v.return=y,v;Mo(y,v)}return null}function p(y,v,h,g){var b=v!==null?v.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return b!==null?null:l(y,v,""+h,g);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case vo:return h.key===b?u(y,v,h,g):null;case cs:return h.key===b?c(y,v,h,g):null;case Yn:return b=h._init,p(y,v,b(h._payload),g)}if(pi(h)||ii(h))return b!==null?null:f(y,v,h,g,null);Mo(y,h)}return null}function S(y,v,h,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return y=y.get(h)||null,l(v,y,""+g,b);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case vo:return y=y.get(g.key===null?h:g.key)||null,u(v,y,g,b);case cs:return y=y.get(g.key===null?h:g.key)||null,c(v,y,g,b);case Yn:var M=g._init;return S(y,v,h,M(g._payload),b)}if(pi(g)||ii(g))return y=y.get(h)||null,f(v,y,g,b,null);Mo(v,g)}return null}function w(y,v,h,g){for(var b=null,M=null,R=v,E=v=0,L=null;R!==null&&E<h.length;E++){R.index>E?(L=R,R=null):L=R.sibling;var C=p(y,R,h[E],g);if(C===null){R===null&&(R=L);break}e&&R&&C.alternate===null&&t(y,R),v=i(C,v,E),M===null?b=C:M.sibling=C,M=C,R=L}if(E===h.length)return n(y,R),Te&&jr(y,E),b;if(R===null){for(;E<h.length;E++)R=m(y,h[E],g),R!==null&&(v=i(R,v,E),M===null?b=R:M.sibling=R,M=R);return Te&&jr(y,E),b}for(R=r(y,R);E<h.length;E++)L=S(R,y,E,h[E],g),L!==null&&(e&&L.alternate!==null&&R.delete(L.key===null?E:L.key),v=i(L,v,E),M===null?b=L:M.sibling=L,M=L);return e&&R.forEach(function(F){return t(y,F)}),Te&&jr(y,E),b}function N(y,v,h,g){var b=ii(h);if(typeof b!="function")throw Error(A(150));if(h=b.call(h),h==null)throw Error(A(151));for(var M=b=null,R=v,E=v=0,L=null,C=h.next();R!==null&&!C.done;E++,C=h.next()){R.index>E?(L=R,R=null):L=R.sibling;var F=p(y,R,C.value,g);if(F===null){R===null&&(R=L);break}e&&R&&F.alternate===null&&t(y,R),v=i(F,v,E),M===null?b=F:M.sibling=F,M=F,R=L}if(C.done)return n(y,R),Te&&jr(y,E),b;if(R===null){for(;!C.done;E++,C=h.next())C=m(y,C.value,g),C!==null&&(v=i(C,v,E),M===null?b=C:M.sibling=C,M=C);return Te&&jr(y,E),b}for(R=r(y,R);!C.done;E++,C=h.next())C=S(R,y,E,C.value,g),C!==null&&(e&&C.alternate!==null&&R.delete(C.key===null?E:C.key),v=i(C,v,E),M===null?b=C:M.sibling=C,M=C);return e&&R.forEach(function(V){return t(y,V)}),Te&&jr(y,E),b}function T(y,v,h,g){if(typeof h=="object"&&h!==null&&h.type===ds&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case vo:e:{for(var b=h.key,M=v;M!==null;){if(M.key===b){if(b=h.type,b===ds){if(M.tag===7){n(y,M.sibling),v=s(M,h.props.children),v.return=y,y=v;break e}}else if(M.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Yn&&Hf(b)===M.type){n(y,M.sibling),v=s(M,h.props),v.ref=ci(y,M,h),v.return=y,y=v;break e}n(y,M);break}else t(y,M);M=M.sibling}h.type===ds?(v=Qr(h.props.children,y.mode,g,h.key),v.return=y,y=v):(g=Yo(h.type,h.key,h.props,null,y.mode,g),g.ref=ci(y,v,h),g.return=y,y=g)}return o(y);case cs:e:{for(M=h.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===h.containerInfo&&v.stateNode.implementation===h.implementation){n(y,v.sibling),v=s(v,h.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=qa(h,y.mode,g),v.return=y,y=v}return o(y);case Yn:return M=h._init,T(y,v,M(h._payload),g)}if(pi(h))return w(y,v,h,g);if(ii(h))return N(y,v,h,g);Mo(y,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,v!==null&&v.tag===6?(n(y,v.sibling),v=s(v,h),v.return=y,y=v):(n(y,v),v=Ka(h,y.mode,g),v.return=y,y=v),o(y)):n(y,v)}return T}var Qs=qp(!0),Yp=qp(!1),vl=kr(null),yl=null,xs=null,Gc=null;function Xc(){Gc=xs=yl=null}function Jc(e){var t=vl.current;Re(vl),e._currentValue=t}function Iu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){yl=e,Gc=xs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nt=!0),e.firstContext=null)}function Kt(e){var t=e._currentValue;if(Gc!==e)if(e={context:e,memoizedValue:t,next:null},xs===null){if(yl===null)throw Error(A(308));xs=e,yl.dependencies={lanes:0,firstContext:e}}else xs=xs.next=e;return t}var Lr=null;function Zc(e){Lr===null?Lr=[e]:Lr.push(e)}function Gp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Zc(t)):(n.next=s.next,s.next=n),t.interleaved=n,$n(e,r)}function $n(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Gn=!1;function ed(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,$n(e,n)}return s=r.interleaved,s===null?(t.next=t,Zc(r)):(t.next=s.next,s.next=t),r.interleaved=t,$n(e,n)}function Wo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ac(e,n)}}function Vf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function xl(e,t,n,r){var s=e.updateQueue;Gn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=c=u=null,l=i;do{var p=l.lane,S=l.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,N=l;switch(p=t,S=n,N.tag){case 1:if(w=N.payload,typeof w=="function"){m=w.call(S,m,p);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=N.payload,p=typeof w=="function"?w.call(S,m,p):w,p==null)break e;m=Oe({},m,p);break e;case 2:Gn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else S={eventTime:S,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=S,u=m):f=f.next=S,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Gr|=o,e.lanes=o,e.memoizedState=m}}function Qf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(A(191,s));s.call(r)}}}var oo={},wn=kr(oo),Ui=kr(oo),Bi=kr(oo);function Tr(e){if(e===oo)throw Error(A(174));return e}function td(e,t){switch(je(Bi,t),je(Ui,e),je(wn,oo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:mu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=mu(t,e)}Re(wn),je(wn,t)}function Ks(){Re(wn),Re(Ui),Re(Bi)}function Jp(e){Tr(Bi.current);var t=Tr(wn.current),n=mu(t,e.type);t!==n&&(je(Ui,e),je(wn,n))}function nd(e){Ui.current===e&&(Re(wn),Re(Ui))}var Ie=kr(0);function wl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ua=[];function rd(){for(var e=0;e<Ua.length;e++)Ua[e]._workInProgressVersionPrimary=null;Ua.length=0}var Ho=Bn.ReactCurrentDispatcher,Ba=Bn.ReactCurrentBatchConfig,Yr=0,Fe=null,Xe=null,tt=null,Sl=!1,Ei=!1,Wi=0,Sx=0;function at(){throw Error(A(321))}function sd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!un(e[n],t[n]))return!1;return!0}function id(e,t,n,r,s,i){if(Yr=i,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ho.current=e===null||e.memoizedState===null?Ex:Nx,e=n(r,s),Ei){i=0;do{if(Ei=!1,Wi=0,25<=i)throw Error(A(301));i+=1,tt=Xe=null,t.updateQueue=null,Ho.current=jx,e=n(r,s)}while(Ei)}if(Ho.current=kl,t=Xe!==null&&Xe.next!==null,Yr=0,tt=Xe=Fe=null,Sl=!1,t)throw Error(A(300));return e}function od(){var e=Wi!==0;return Wi=0,e}function mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Fe.memoizedState=tt=e:tt=tt.next=e,tt}function qt(){if(Xe===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=tt===null?Fe.memoizedState:tt.next;if(t!==null)tt=t,Xe=e;else{if(e===null)throw Error(A(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},tt===null?Fe.memoizedState=tt=e:tt=tt.next=e}return tt}function Hi(e,t){return typeof t=="function"?t(e):t}function Wa(e){var t=qt(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=Xe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,c=i;do{var f=c.lane;if((Yr&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var m={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Fe.lanes|=f,Gr|=f}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=l,un(r,t.memoizedState)||(Nt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Fe.lanes|=i,Gr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ha(e){var t=qt(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);un(i,t.memoizedState)||(Nt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Zp(){}function eg(e,t){var n=Fe,r=qt(),s=t(),i=!un(r.memoizedState,s);if(i&&(r.memoizedState=s,Nt=!0),r=r.queue,ld(rg.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,Vi(9,ng.bind(null,n,r,s,t),void 0,null),nt===null)throw Error(A(349));Yr&30||tg(n,t,s)}return s}function tg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ng(e,t,n,r){t.value=n,t.getSnapshot=r,sg(t)&&ig(e)}function rg(e,t,n){return n(function(){sg(t)&&ig(e)})}function sg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!un(e,n)}catch{return!0}}function ig(e){var t=$n(e,1);t!==null&&an(t,e,1,-1)}function Kf(e){var t=mn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:e},t.queue=e,e=e.dispatch=bx.bind(null,Fe,e),[t.memoizedState,e]}function Vi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function og(){return qt().memoizedState}function Vo(e,t,n,r){var s=mn();Fe.flags|=e,s.memoizedState=Vi(1|t,n,void 0,r===void 0?null:r)}function Bl(e,t,n,r){var s=qt();r=r===void 0?null:r;var i=void 0;if(Xe!==null){var o=Xe.memoizedState;if(i=o.destroy,r!==null&&sd(r,o.deps)){s.memoizedState=Vi(t,n,i,r);return}}Fe.flags|=e,s.memoizedState=Vi(1|t,n,i,r)}function qf(e,t){return Vo(8390656,8,e,t)}function ld(e,t){return Bl(2048,8,e,t)}function lg(e,t){return Bl(4,2,e,t)}function ag(e,t){return Bl(4,4,e,t)}function ug(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cg(e,t,n){return n=n!=null?n.concat([e]):null,Bl(4,4,ug.bind(null,t,e),n)}function ad(){}function dg(e,t){var n=qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&sd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function fg(e,t){var n=qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&sd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function hg(e,t,n){return Yr&21?(un(n,t)||(n=yp(),Fe.lanes|=n,Gr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nt=!0),e.memoizedState=n)}function kx(e,t){var n=Ee;Ee=n!==0&&4>n?n:4,e(!0);var r=Ba.transition;Ba.transition={};try{e(!1),t()}finally{Ee=n,Ba.transition=r}}function mg(){return qt().memoizedState}function Cx(e,t,n){var r=gr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pg(e))gg(t,n);else if(n=Gp(e,t,n,r),n!==null){var s=wt();an(n,e,r,s),vg(n,t,r)}}function bx(e,t,n){var r=gr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pg(e))gg(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,un(l,o)){var u=t.interleaved;u===null?(s.next=s,Zc(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=Gp(e,t,s,r),n!==null&&(s=wt(),an(n,e,r,s),vg(n,t,r))}}function pg(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function gg(e,t){Ei=Sl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function vg(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ac(e,n)}}var kl={readContext:Kt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},Ex={readContext:Kt,useCallback:function(e,t){return mn().memoizedState=[e,t===void 0?null:t],e},useContext:Kt,useEffect:qf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Vo(4194308,4,ug.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=mn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=mn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Cx.bind(null,Fe,e),[r.memoizedState,e]},useRef:function(e){var t=mn();return e={current:e},t.memoizedState=e},useState:Kf,useDebugValue:ad,useDeferredValue:function(e){return mn().memoizedState=e},useTransition:function(){var e=Kf(!1),t=e[0];return e=kx.bind(null,e[1]),mn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Fe,s=mn();if(Te){if(n===void 0)throw Error(A(407));n=n()}else{if(n=t(),nt===null)throw Error(A(349));Yr&30||tg(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,qf(rg.bind(null,r,i,e),[e]),r.flags|=2048,Vi(9,ng.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=mn(),t=nt.identifierPrefix;if(Te){var n=In,r=Pn;n=(r&~(1<<32-ln(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Wi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Sx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Nx={readContext:Kt,useCallback:dg,useContext:Kt,useEffect:ld,useImperativeHandle:cg,useInsertionEffect:lg,useLayoutEffect:ag,useMemo:fg,useReducer:Wa,useRef:og,useState:function(){return Wa(Hi)},useDebugValue:ad,useDeferredValue:function(e){var t=qt();return hg(t,Xe.memoizedState,e)},useTransition:function(){var e=Wa(Hi)[0],t=qt().memoizedState;return[e,t]},useMutableSource:Zp,useSyncExternalStore:eg,useId:mg,unstable_isNewReconciler:!1},jx={readContext:Kt,useCallback:dg,useContext:Kt,useEffect:ld,useImperativeHandle:cg,useInsertionEffect:lg,useLayoutEffect:ag,useMemo:fg,useReducer:Ha,useRef:og,useState:function(){return Ha(Hi)},useDebugValue:ad,useDeferredValue:function(e){var t=qt();return Xe===null?t.memoizedState=e:hg(t,Xe.memoizedState,e)},useTransition:function(){var e=Ha(Hi)[0],t=qt().memoizedState;return[e,t]},useMutableSource:Zp,useSyncExternalStore:eg,useId:mg,unstable_isNewReconciler:!1};function Zt(e,t){if(e&&e.defaultProps){t=Oe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Fu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Oe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Wl={isMounted:function(e){return(e=e._reactInternals)?ts(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=wt(),s=gr(e),i=Fn(r,s);i.payload=t,n!=null&&(i.callback=n),t=mr(e,i,s),t!==null&&(an(t,e,s,r),Wo(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=wt(),s=gr(e),i=Fn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=mr(e,i,s),t!==null&&(an(t,e,s,r),Wo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=wt(),r=gr(e),s=Fn(n,r);s.tag=2,t!=null&&(s.callback=t),t=mr(e,s,r),t!==null&&(an(t,e,r,n),Wo(t,e,r))}};function Yf(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Di(n,r)||!Di(s,i):!0}function yg(e,t,n){var r=!1,s=wr,i=t.contextType;return typeof i=="object"&&i!==null?i=Kt(i):(s=Mt(t)?Kr:dt.current,r=t.contextTypes,i=(r=r!=null)?Hs(e,s):wr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Gf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Wl.enqueueReplaceState(t,t.state,null)}function Ou(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ed(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Kt(i):(i=Mt(t)?Kr:dt.current,s.context=Hs(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Fu(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Wl.enqueueReplaceState(s,s.state,null),xl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function qs(e,t){try{var n="",r=t;do n+=t0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Va(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Du(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Mx=typeof WeakMap=="function"?WeakMap:Map;function xg(e,t,n){n=Fn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){bl||(bl=!0,Ku=r),Du(e,t)},n}function wg(e,t,n){n=Fn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Du(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Du(e,t),typeof r!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Xf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Mx;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Bx.bind(null,e,t,n),t.then(e,e))}function Jf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zf(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Fn(-1,1),t.tag=2,mr(n,t,1))),n.lanes|=1),e)}var Rx=Bn.ReactCurrentOwner,Nt=!1;function yt(e,t,n,r){t.child=e===null?Yp(t,null,n,r):Qs(t,e.child,n,r)}function eh(e,t,n,r,s){n=n.render;var i=t.ref;return Ns(t,s),r=id(e,t,n,r,i,s),n=od(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Un(e,t,s)):(Te&&n&&Kc(t),t.flags|=1,yt(e,t,r,s),t.child)}function th(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!gd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Sg(e,t,i,r,s)):(e=Yo(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Di,n(o,r)&&e.ref===t.ref)return Un(e,t,s)}return t.flags|=1,e=vr(i,r),e.ref=t.ref,e.return=t,t.child=e}function Sg(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Di(i,r)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Nt=!0);else return t.lanes=e.lanes,Un(e,t,s)}return zu(e,t,n,r,s)}function kg(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Ss,Pt),Pt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,je(Ss,Pt),Pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,je(Ss,Pt),Pt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,je(Ss,Pt),Pt|=r;return yt(e,t,s,n),t.child}function Cg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function zu(e,t,n,r,s){var i=Mt(n)?Kr:dt.current;return i=Hs(t,i),Ns(t,s),n=id(e,t,n,r,i,s),r=od(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Un(e,t,s)):(Te&&r&&Kc(t),t.flags|=1,yt(e,t,n,s),t.child)}function nh(e,t,n,r,s){if(Mt(n)){var i=!0;ml(t)}else i=!1;if(Ns(t,s),t.stateNode===null)Qo(e,t),yg(t,n,r),Ou(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Kt(c):(c=Mt(n)?Kr:dt.current,c=Hs(t,c));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&Gf(t,o,r,c),Gn=!1;var p=t.memoizedState;o.state=p,xl(t,r,o,s),u=t.memoizedState,l!==r||p!==u||jt.current||Gn?(typeof f=="function"&&(Fu(t,n,f,r),u=t.memoizedState),(l=Gn||Yf(t,n,l,r,p,u,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Xp(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Zt(t.type,l),o.props=c,m=t.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Kt(u):(u=Mt(n)?Kr:dt.current,u=Hs(t,u));var S=n.getDerivedStateFromProps;(f=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||p!==u)&&Gf(t,o,r,u),Gn=!1,p=t.memoizedState,o.state=p,xl(t,r,o,s);var w=t.memoizedState;l!==m||p!==w||jt.current||Gn?(typeof S=="function"&&(Fu(t,n,S,r),w=t.memoizedState),(c=Gn||Yf(t,n,c,r,p,w,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,i,s)}function Au(e,t,n,r,s,i){Cg(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Uf(t,n,!1),Un(e,t,i);r=t.stateNode,Rx.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Qs(t,e.child,null,i),t.child=Qs(t,null,l,i)):yt(e,t,l,i),t.memoizedState=r.state,s&&Uf(t,n,!0),t.child}function bg(e){var t=e.stateNode;t.pendingContext?$f(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$f(e,t.context,!1),td(e,t.containerInfo)}function rh(e,t,n,r,s){return Vs(),Yc(s),t.flags|=256,yt(e,t,n,r),t.child}var $u={dehydrated:null,treeContext:null,retryLane:0};function Uu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Eg(e,t,n){var r=t.pendingProps,s=Ie.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),je(Ie,s&1),e===null)return Pu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ql(o,r,0,null),e=Qr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Uu(n),t.memoizedState=$u,e):ud(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Lx(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=vr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=vr(l,i):(i=Qr(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Uu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=$u,r}return i=e.child,e=i.sibling,r=vr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ud(e,t){return t=Ql({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ro(e,t,n,r){return r!==null&&Yc(r),Qs(t,e.child,null,n),e=ud(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Lx(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Va(Error(A(422))),Ro(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Ql({mode:"visible",children:r.children},s,0,null),i=Qr(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Qs(t,e.child,null,o),t.child.memoizedState=Uu(o),t.memoizedState=$u,i);if(!(t.mode&1))return Ro(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(A(419)),r=Va(i,r,void 0),Ro(e,t,o,r)}if(l=(o&e.childLanes)!==0,Nt||l){if(r=nt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$n(e,s),an(r,e,s,-1))}return pd(),r=Va(Error(A(421))),Ro(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Wx.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,It=hr(s.nextSibling),Ft=t,Te=!0,sn=null,e!==null&&(Bt[Wt++]=Pn,Bt[Wt++]=In,Bt[Wt++]=qr,Pn=e.id,In=e.overflow,qr=t),t=ud(t,r.children),t.flags|=4096,t)}function sh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Iu(e.return,t,n)}function Qa(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ng(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(yt(e,t,r.children,n),r=Ie.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sh(e,n,t);else if(e.tag===19)sh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(je(Ie,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&wl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Qa(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&wl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Qa(t,!0,n,null,i);break;case"together":Qa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Un(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Gr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,n=vr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=vr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Tx(e,t,n){switch(t.tag){case 3:bg(t),Vs();break;case 5:Jp(t);break;case 1:Mt(t.type)&&ml(t);break;case 4:td(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;je(vl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(je(Ie,Ie.current&1),t.flags|=128,null):n&t.child.childLanes?Eg(e,t,n):(je(Ie,Ie.current&1),e=Un(e,t,n),e!==null?e.sibling:null);je(Ie,Ie.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Ng(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),je(Ie,Ie.current),r)break;return null;case 22:case 23:return t.lanes=0,kg(e,t,n)}return Un(e,t,n)}var jg,Bu,Mg,Rg;jg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bu=function(){};Mg=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Tr(wn.current);var i=null;switch(n){case"input":s=cu(e,s),r=cu(e,r),i=[];break;case"select":s=Oe({},s,{value:void 0}),r=Oe({},r,{value:void 0}),i=[];break;case"textarea":s=hu(e,s),r=hu(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=fl)}pu(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Li.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Li.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Me("scroll",e),i||l===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Rg=function(e,t,n,r){n!==r&&(t.flags|=4)};function di(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function _x(e,t,n){var r=t.pendingProps;switch(qc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return Mt(t.type)&&hl(),ut(t),null;case 3:return r=t.stateNode,Ks(),Re(jt),Re(dt),rd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(jo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,sn!==null&&(Gu(sn),sn=null))),Bu(e,t),ut(t),null;case 5:nd(t);var s=Tr(Bi.current);if(n=t.type,e!==null&&t.stateNode!=null)Mg(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(A(166));return ut(t),null}if(e=Tr(wn.current),jo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[yn]=t,r[$i]=i,e=(t.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(s=0;s<vi.length;s++)Me(vi[s],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":hf(r,i),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Me("invalid",r);break;case"textarea":pf(r,i),Me("invalid",r)}pu(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&No(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&No(r.textContent,l,e),s=["children",""+l]):Li.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Me("scroll",r)}switch(n){case"input":yo(r),mf(r,i,!0);break;case"textarea":yo(r),gf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=fl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=rp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[yn]=t,e[$i]=r,jg(e,t,!1,!1),t.stateNode=e;e:{switch(o=gu(n,r),n){case"dialog":Me("cancel",e),Me("close",e),s=r;break;case"iframe":case"object":case"embed":Me("load",e),s=r;break;case"video":case"audio":for(s=0;s<vi.length;s++)Me(vi[s],e);s=r;break;case"source":Me("error",e),s=r;break;case"img":case"image":case"link":Me("error",e),Me("load",e),s=r;break;case"details":Me("toggle",e),s=r;break;case"input":hf(e,r),s=cu(e,r),Me("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Oe({},r,{value:void 0}),Me("invalid",e);break;case"textarea":pf(e,r),s=hu(e,r),Me("invalid",e);break;default:s=r}pu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?op(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&sp(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ti(e,u):typeof u=="number"&&Ti(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Li.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Me("scroll",e):u!=null&&Pc(e,i,u,o))}switch(n){case"input":yo(e),mf(e,r,!1);break;case"textarea":yo(e),gf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+xr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ks(e,!!r.multiple,i,!1):r.defaultValue!=null&&ks(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=fl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ut(t),null;case 6:if(e&&t.stateNode!=null)Rg(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(A(166));if(n=Tr(Bi.current),Tr(wn.current),jo(t)){if(r=t.stateNode,n=t.memoizedProps,r[yn]=t,(i=r.nodeValue!==n)&&(e=Ft,e!==null))switch(e.tag){case 3:No(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&No(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yn]=t,t.stateNode=r}return ut(t),null;case 13:if(Re(Ie),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Te&&It!==null&&t.mode&1&&!(t.flags&128))Kp(),Vs(),t.flags|=98560,i=!1;else if(i=jo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(A(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(A(317));i[yn]=t}else Vs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),i=!1}else sn!==null&&(Gu(sn),sn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ie.current&1?Ze===0&&(Ze=3):pd())),t.updateQueue!==null&&(t.flags|=4),ut(t),null);case 4:return Ks(),Bu(e,t),e===null&&zi(t.stateNode.containerInfo),ut(t),null;case 10:return Jc(t.type._context),ut(t),null;case 17:return Mt(t.type)&&hl(),ut(t),null;case 19:if(Re(Ie),i=t.memoizedState,i===null)return ut(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)di(i,!1);else{if(Ze!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=wl(e),o!==null){for(t.flags|=128,di(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return je(Ie,Ie.current&1|2),t.child}e=e.sibling}i.tail!==null&&He()>Ys&&(t.flags|=128,r=!0,di(i,!1),t.lanes=4194304)}else{if(!r)if(e=wl(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),di(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Te)return ut(t),null}else 2*He()-i.renderingStartTime>Ys&&n!==1073741824&&(t.flags|=128,r=!0,di(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=He(),t.sibling=null,n=Ie.current,je(Ie,r?n&1|2:n&1),t):(ut(t),null);case 22:case 23:return md(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Pt&1073741824&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function Px(e,t){switch(qc(t),t.tag){case 1:return Mt(t.type)&&hl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ks(),Re(jt),Re(dt),rd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return nd(t),null;case 13:if(Re(Ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));Vs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Re(Ie),null;case 4:return Ks(),null;case 10:return Jc(t.type._context),null;case 22:case 23:return md(),null;case 24:return null;default:return null}}var Lo=!1,ct=!1,Ix=typeof WeakSet=="function"?WeakSet:Set,Z=null;function ws(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(e,t,r)}else n.current=null}function Wu(e,t,n){try{n()}catch(r){Ue(e,t,r)}}var ih=!1;function Fx(e,t){if(Nu=ul,e=Ip(),Qc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,m=e,p=null;t:for(;;){for(var S;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(S=m.firstChild)!==null;)p=m,m=S;for(;;){if(m===e)break t;if(p===n&&++c===s&&(l=o),p===i&&++f===r&&(u=o),(S=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ju={focusedElem:e,selectionRange:n},ul=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var N=w.memoizedProps,T=w.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?N:Zt(t.type,N),T);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(g){Ue(t,t.return,g)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return w=ih,ih=!1,w}function Ni(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Wu(t,n,i)}s=s.next}while(s!==r)}}function Hl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Hu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Lg(e){var t=e.alternate;t!==null&&(e.alternate=null,Lg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yn],delete t[$i],delete t[Lu],delete t[vx],delete t[yx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tg(e){return e.tag===5||e.tag===3||e.tag===4}function oh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=fl));else if(r!==4&&(e=e.child,e!==null))for(Vu(e,t,n),e=e.sibling;e!==null;)Vu(e,t,n),e=e.sibling}function Qu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Qu(e,t,n),e=e.sibling;e!==null;)Qu(e,t,n),e=e.sibling}var st=null,rn=!1;function Qn(e,t,n){for(n=n.child;n!==null;)_g(e,t,n),n=n.sibling}function _g(e,t,n){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(Ol,n)}catch{}switch(n.tag){case 5:ct||ws(n,t);case 6:var r=st,s=rn;st=null,Qn(e,t,n),st=r,rn=s,st!==null&&(rn?(e=st,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(rn?(e=st,n=n.stateNode,e.nodeType===8?Aa(e.parentNode,n):e.nodeType===1&&Aa(e,n),Fi(e)):Aa(st,n.stateNode));break;case 4:r=st,s=rn,st=n.stateNode.containerInfo,rn=!0,Qn(e,t,n),st=r,rn=s;break;case 0:case 11:case 14:case 15:if(!ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Wu(n,t,o),s=s.next}while(s!==r)}Qn(e,t,n);break;case 1:if(!ct&&(ws(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ue(n,t,l)}Qn(e,t,n);break;case 21:Qn(e,t,n);break;case 22:n.mode&1?(ct=(r=ct)||n.memoizedState!==null,Qn(e,t,n),ct=r):Qn(e,t,n);break;default:Qn(e,t,n)}}function lh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ix),t.forEach(function(r){var s=Hx.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:st=l.stateNode,rn=!1;break e;case 3:st=l.stateNode.containerInfo,rn=!0;break e;case 4:st=l.stateNode.containerInfo,rn=!0;break e}l=l.return}if(st===null)throw Error(A(160));_g(i,o,s),st=null,rn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Ue(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Pg(t,e),t=t.sibling}function Pg(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xt(t,e),hn(e),r&4){try{Ni(3,e,e.return),Hl(3,e)}catch(N){Ue(e,e.return,N)}try{Ni(5,e,e.return)}catch(N){Ue(e,e.return,N)}}break;case 1:Xt(t,e),hn(e),r&512&&n!==null&&ws(n,n.return);break;case 5:if(Xt(t,e),hn(e),r&512&&n!==null&&ws(n,n.return),e.flags&32){var s=e.stateNode;try{Ti(s,"")}catch(N){Ue(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&tp(s,i),gu(l,o);var c=gu(l,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?op(s,m):f==="dangerouslySetInnerHTML"?sp(s,m):f==="children"?Ti(s,m):Pc(s,f,m,c)}switch(l){case"input":du(s,i);break;case"textarea":np(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?ks(s,!!i.multiple,S,!1):p!==!!i.multiple&&(i.defaultValue!=null?ks(s,!!i.multiple,i.defaultValue,!0):ks(s,!!i.multiple,i.multiple?[]:"",!1))}s[$i]=i}catch(N){Ue(e,e.return,N)}}break;case 6:if(Xt(t,e),hn(e),r&4){if(e.stateNode===null)throw Error(A(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(N){Ue(e,e.return,N)}}break;case 3:if(Xt(t,e),hn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fi(t.containerInfo)}catch(N){Ue(e,e.return,N)}break;case 4:Xt(t,e),hn(e);break;case 13:Xt(t,e),hn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(fd=He())),r&4&&lh(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(ct=(c=ct)||f,Xt(t,e),ct=c):Xt(t,e),hn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(Z=e,f=e.child;f!==null;){for(m=Z=f;Z!==null;){switch(p=Z,S=p.child,p.tag){case 0:case 11:case 14:case 15:Ni(4,p,p.return);break;case 1:ws(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(N){Ue(r,n,N)}}break;case 5:ws(p,p.return);break;case 22:if(p.memoizedState!==null){uh(m);continue}}S!==null?(S.return=p,Z=S):uh(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=ip("display",o))}catch(N){Ue(e,e.return,N)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(N){Ue(e,e.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Xt(t,e),hn(e),r&4&&lh(e);break;case 21:break;default:Xt(t,e),hn(e)}}function hn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Tg(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ti(s,""),r.flags&=-33);var i=oh(e);Qu(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=oh(e);Vu(e,l,o);break;default:throw Error(A(161))}}catch(u){Ue(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ox(e,t,n){Z=e,Ig(e)}function Ig(e,t,n){for(var r=(e.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Lo;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ct;l=Lo;var c=ct;if(Lo=o,(ct=u)&&!c)for(Z=s;Z!==null;)o=Z,u=o.child,o.tag===22&&o.memoizedState!==null?ch(s):u!==null?(u.return=o,Z=u):ch(s);for(;i!==null;)Z=i,Ig(i),i=i.sibling;Z=s,Lo=l,ct=c}ah(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):ah(e)}}function ah(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ct||Hl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ct)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Zt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Qf(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Qf(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Fi(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}ct||t.flags&512&&Hu(t)}catch(p){Ue(t,t.return,p)}}if(t===e){Z=null;break}if(n=t.sibling,n!==null){n.return=t.return,Z=n;break}Z=t.return}}function uh(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Z=n;break}Z=t.return}}function ch(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Hl(4,t)}catch(u){Ue(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){Ue(t,s,u)}}var i=t.return;try{Hu(t)}catch(u){Ue(t,i,u)}break;case 5:var o=t.return;try{Hu(t)}catch(u){Ue(t,o,u)}}}catch(u){Ue(t,t.return,u)}if(t===e){Z=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Z=l;break}Z=t.return}}var Dx=Math.ceil,Cl=Bn.ReactCurrentDispatcher,cd=Bn.ReactCurrentOwner,Qt=Bn.ReactCurrentBatchConfig,ke=0,nt=null,Ke=null,it=0,Pt=0,Ss=kr(0),Ze=0,Qi=null,Gr=0,Vl=0,dd=0,ji=null,Et=null,fd=0,Ys=1/0,jn=null,bl=!1,Ku=null,pr=null,To=!1,ur=null,El=0,Mi=0,qu=null,Ko=-1,qo=0;function wt(){return ke&6?He():Ko!==-1?Ko:Ko=He()}function gr(e){return e.mode&1?ke&2&&it!==0?it&-it:wx.transition!==null?(qo===0&&(qo=yp()),qo):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:Ep(e.type)),e):1}function an(e,t,n,r){if(50<Mi)throw Mi=0,qu=null,Error(A(185));ro(e,n,r),(!(ke&2)||e!==nt)&&(e===nt&&(!(ke&2)&&(Vl|=n),Ze===4&&Jn(e,it)),Rt(e,r),n===1&&ke===0&&!(t.mode&1)&&(Ys=He()+500,Ul&&Cr()))}function Rt(e,t){var n=e.callbackNode;w0(e,t);var r=al(e,e===nt?it:0);if(r===0)n!==null&&xf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&xf(n),t===1)e.tag===0?xx(dh.bind(null,e)):Hp(dh.bind(null,e)),px(function(){!(ke&6)&&Cr()}),n=null;else{switch(xp(r)){case 1:n=zc;break;case 4:n=gp;break;case 16:n=ll;break;case 536870912:n=vp;break;default:n=ll}n=Bg(n,Fg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Fg(e,t){if(Ko=-1,qo=0,ke&6)throw Error(A(327));var n=e.callbackNode;if(js()&&e.callbackNode!==n)return null;var r=al(e,e===nt?it:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Nl(e,r);else{t=r;var s=ke;ke|=2;var i=Dg();(nt!==e||it!==t)&&(jn=null,Ys=He()+500,Vr(e,t));do try{$x();break}catch(l){Og(e,l)}while(!0);Xc(),Cl.current=i,ke=s,Ke!==null?t=0:(nt=null,it=0,t=Ze)}if(t!==0){if(t===2&&(s=Su(e),s!==0&&(r=s,t=Yu(e,s))),t===1)throw n=Qi,Vr(e,0),Jn(e,r),Rt(e,He()),n;if(t===6)Jn(e,r);else{if(s=e.current.alternate,!(r&30)&&!zx(s)&&(t=Nl(e,r),t===2&&(i=Su(e),i!==0&&(r=i,t=Yu(e,i))),t===1))throw n=Qi,Vr(e,0),Jn(e,r),Rt(e,He()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(A(345));case 2:Mr(e,Et,jn);break;case 3:if(Jn(e,r),(r&130023424)===r&&(t=fd+500-He(),10<t)){if(al(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){wt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ru(Mr.bind(null,e,Et,jn),t);break}Mr(e,Et,jn);break;case 4:if(Jn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-ln(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Dx(r/1960))-r,10<r){e.timeoutHandle=Ru(Mr.bind(null,e,Et,jn),r);break}Mr(e,Et,jn);break;case 5:Mr(e,Et,jn);break;default:throw Error(A(329))}}}return Rt(e,He()),e.callbackNode===n?Fg.bind(null,e):null}function Yu(e,t){var n=ji;return e.current.memoizedState.isDehydrated&&(Vr(e,t).flags|=256),e=Nl(e,t),e!==2&&(t=Et,Et=n,t!==null&&Gu(t)),e}function Gu(e){Et===null?Et=e:Et.push.apply(Et,e)}function zx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!un(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jn(e,t){for(t&=~dd,t&=~Vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ln(t),r=1<<n;e[n]=-1,t&=~r}}function dh(e){if(ke&6)throw Error(A(327));js();var t=al(e,0);if(!(t&1))return Rt(e,He()),null;var n=Nl(e,t);if(e.tag!==0&&n===2){var r=Su(e);r!==0&&(t=r,n=Yu(e,r))}if(n===1)throw n=Qi,Vr(e,0),Jn(e,t),Rt(e,He()),n;if(n===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mr(e,Et,jn),Rt(e,He()),null}function hd(e,t){var n=ke;ke|=1;try{return e(t)}finally{ke=n,ke===0&&(Ys=He()+500,Ul&&Cr())}}function Xr(e){ur!==null&&ur.tag===0&&!(ke&6)&&js();var t=ke;ke|=1;var n=Qt.transition,r=Ee;try{if(Qt.transition=null,Ee=1,e)return e()}finally{Ee=r,Qt.transition=n,ke=t,!(ke&6)&&Cr()}}function md(){Pt=Ss.current,Re(Ss)}function Vr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,mx(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(qc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hl();break;case 3:Ks(),Re(jt),Re(dt),rd();break;case 5:nd(r);break;case 4:Ks();break;case 13:Re(Ie);break;case 19:Re(Ie);break;case 10:Jc(r.type._context);break;case 22:case 23:md()}n=n.return}if(nt=e,Ke=e=vr(e.current,null),it=Pt=t,Ze=0,Qi=null,dd=Vl=Gr=0,Et=ji=null,Lr!==null){for(t=0;t<Lr.length;t++)if(n=Lr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Lr=null}return e}function Og(e,t){do{var n=Ke;try{if(Xc(),Ho.current=kl,Sl){for(var r=Fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Sl=!1}if(Yr=0,tt=Xe=Fe=null,Ei=!1,Wi=0,cd.current=null,n===null||n.return===null){Ze=1,Qi=t,Ke=null;break}e:{var i=e,o=n.return,l=n,u=t;if(t=it,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var S=Jf(o);if(S!==null){S.flags&=-257,Zf(S,o,l,i,t),S.mode&1&&Xf(i,c,t),t=S,u=c;var w=t.updateQueue;if(w===null){var N=new Set;N.add(u),t.updateQueue=N}else w.add(u);break e}else{if(!(t&1)){Xf(i,c,t),pd();break e}u=Error(A(426))}}else if(Te&&l.mode&1){var T=Jf(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Zf(T,o,l,i,t),Yc(qs(u,l));break e}}i=u=qs(u,l),Ze!==4&&(Ze=2),ji===null?ji=[i]:ji.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=xg(i,u,t);Vf(i,y);break e;case 1:l=u;var v=i.type,h=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(pr===null||!pr.has(h)))){i.flags|=65536,t&=-t,i.lanes|=t;var g=wg(i,l,t);Vf(i,g);break e}}i=i.return}while(i!==null)}Ag(n)}catch(b){t=b,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function Dg(){var e=Cl.current;return Cl.current=kl,e===null?kl:e}function pd(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),nt===null||!(Gr&268435455)&&!(Vl&268435455)||Jn(nt,it)}function Nl(e,t){var n=ke;ke|=2;var r=Dg();(nt!==e||it!==t)&&(jn=null,Vr(e,t));do try{Ax();break}catch(s){Og(e,s)}while(!0);if(Xc(),ke=n,Cl.current=r,Ke!==null)throw Error(A(261));return nt=null,it=0,Ze}function Ax(){for(;Ke!==null;)zg(Ke)}function $x(){for(;Ke!==null&&!d0();)zg(Ke)}function zg(e){var t=Ug(e.alternate,e,Pt);e.memoizedProps=e.pendingProps,t===null?Ag(e):Ke=t,cd.current=null}function Ag(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Px(n,t),n!==null){n.flags&=32767,Ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ze=6,Ke=null;return}}else if(n=_x(n,t,Pt),n!==null){Ke=n;return}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);Ze===0&&(Ze=5)}function Mr(e,t,n){var r=Ee,s=Qt.transition;try{Qt.transition=null,Ee=1,Ux(e,t,n,r)}finally{Qt.transition=s,Ee=r}return null}function Ux(e,t,n,r){do js();while(ur!==null);if(ke&6)throw Error(A(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(S0(e,i),e===nt&&(Ke=nt=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||To||(To=!0,Bg(ll,function(){return js(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Qt.transition,Qt.transition=null;var o=Ee;Ee=1;var l=ke;ke|=4,cd.current=null,Fx(e,n),Pg(n,e),lx(ju),ul=!!Nu,ju=Nu=null,e.current=n,Ox(n),f0(),ke=l,Ee=o,Qt.transition=i}else e.current=n;if(To&&(To=!1,ur=e,El=s),i=e.pendingLanes,i===0&&(pr=null),p0(n.stateNode),Rt(e,He()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(bl)throw bl=!1,e=Ku,Ku=null,e;return El&1&&e.tag!==0&&js(),i=e.pendingLanes,i&1?e===qu?Mi++:(Mi=0,qu=e):Mi=0,Cr(),null}function js(){if(ur!==null){var e=xp(El),t=Qt.transition,n=Ee;try{if(Qt.transition=null,Ee=16>e?16:e,ur===null)var r=!1;else{if(e=ur,ur=null,El=0,ke&6)throw Error(A(331));var s=ke;for(ke|=4,Z=e.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(Z=c;Z!==null;){var f=Z;switch(f.tag){case 0:case 11:case 15:Ni(8,f,i)}var m=f.child;if(m!==null)m.return=f,Z=m;else for(;Z!==null;){f=Z;var p=f.sibling,S=f.return;if(Lg(f),f===c){Z=null;break}if(p!==null){p.return=S,Z=p;break}Z=S}}}var w=i.alternate;if(w!==null){var N=w.child;if(N!==null){w.child=null;do{var T=N.sibling;N.sibling=null,N=T}while(N!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ni(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Z=y;break e}Z=i.return}}var v=e.current;for(Z=v;Z!==null;){o=Z;var h=o.child;if(o.subtreeFlags&2064&&h!==null)h.return=o,Z=h;else e:for(o=v;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Hl(9,l)}}catch(b){Ue(l,l.return,b)}if(l===o){Z=null;break e}var g=l.sibling;if(g!==null){g.return=l.return,Z=g;break e}Z=l.return}}if(ke=s,Cr(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(Ol,e)}catch{}r=!0}return r}finally{Ee=n,Qt.transition=t}}return!1}function fh(e,t,n){t=qs(n,t),t=xg(e,t,1),e=mr(e,t,1),t=wt(),e!==null&&(ro(e,1,t),Rt(e,t))}function Ue(e,t,n){if(e.tag===3)fh(e,e,n);else for(;t!==null;){if(t.tag===3){fh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pr===null||!pr.has(r))){e=qs(n,e),e=wg(t,e,1),t=mr(t,e,1),e=wt(),t!==null&&(ro(t,1,e),Rt(t,e));break}}t=t.return}}function Bx(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=wt(),e.pingedLanes|=e.suspendedLanes&n,nt===e&&(it&n)===n&&(Ze===4||Ze===3&&(it&130023424)===it&&500>He()-fd?Vr(e,0):dd|=n),Rt(e,t)}function $g(e,t){t===0&&(e.mode&1?(t=So,So<<=1,!(So&130023424)&&(So=4194304)):t=1);var n=wt();e=$n(e,t),e!==null&&(ro(e,t,n),Rt(e,n))}function Wx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),$g(e,n)}function Hx(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(t),$g(e,n)}var Ug;Ug=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||jt.current)Nt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Nt=!1,Tx(e,t,n);Nt=!!(e.flags&131072)}else Nt=!1,Te&&t.flags&1048576&&Vp(t,gl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qo(e,t),e=t.pendingProps;var s=Hs(t,dt.current);Ns(t,n),s=id(null,t,r,e,s,n);var i=od();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mt(r)?(i=!0,ml(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ed(t),s.updater=Wl,t.stateNode=s,s._reactInternals=t,Ou(t,r,e,n),t=Au(null,t,r,!0,i,n)):(t.tag=0,Te&&i&&Kc(t),yt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qo(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Qx(r),e=Zt(r,e),s){case 0:t=zu(null,t,r,e,n);break e;case 1:t=nh(null,t,r,e,n);break e;case 11:t=eh(null,t,r,e,n);break e;case 14:t=th(null,t,r,Zt(r.type,e),n);break e}throw Error(A(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Zt(r,s),zu(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Zt(r,s),nh(e,t,r,s,n);case 3:e:{if(bg(t),e===null)throw Error(A(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Xp(e,t),xl(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=qs(Error(A(423)),t),t=rh(e,t,r,n,s);break e}else if(r!==s){s=qs(Error(A(424)),t),t=rh(e,t,r,n,s);break e}else for(It=hr(t.stateNode.containerInfo.firstChild),Ft=t,Te=!0,sn=null,n=Yp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vs(),r===s){t=Un(e,t,n);break e}yt(e,t,r,n)}t=t.child}return t;case 5:return Jp(t),e===null&&Pu(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Mu(r,s)?o=null:i!==null&&Mu(r,i)&&(t.flags|=32),Cg(e,t),yt(e,t,o,n),t.child;case 6:return e===null&&Pu(t),null;case 13:return Eg(e,t,n);case 4:return td(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Qs(t,null,r,n):yt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Zt(r,s),eh(e,t,r,s,n);case 7:return yt(e,t,t.pendingProps,n),t.child;case 8:return yt(e,t,t.pendingProps.children,n),t.child;case 12:return yt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,je(vl,r._currentValue),r._currentValue=o,i!==null)if(un(i.value,o)){if(i.children===s.children&&!jt.current){t=Un(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Fn(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Iu(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(A(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Iu(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}yt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ns(t,n),s=Kt(s),r=r(s),t.flags|=1,yt(e,t,r,n),t.child;case 14:return r=t.type,s=Zt(r,t.pendingProps),s=Zt(r.type,s),th(e,t,r,s,n);case 15:return Sg(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Zt(r,s),Qo(e,t),t.tag=1,Mt(r)?(e=!0,ml(t)):e=!1,Ns(t,n),yg(t,r,s),Ou(t,r,s,n),Au(null,t,r,!0,e,n);case 19:return Ng(e,t,n);case 22:return kg(e,t,n)}throw Error(A(156,t.tag))};function Bg(e,t){return pp(e,t)}function Vx(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(e,t,n,r){return new Vx(e,t,n,r)}function gd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qx(e){if(typeof e=="function")return gd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fc)return 11;if(e===Oc)return 14}return 2}function vr(e,t){var n=e.alternate;return n===null?(n=Vt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Yo(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")gd(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ds:return Qr(n.children,s,i,t);case Ic:o=8,s|=8;break;case ou:return e=Vt(12,n,t,s|2),e.elementType=ou,e.lanes=i,e;case lu:return e=Vt(13,n,t,s),e.elementType=lu,e.lanes=i,e;case au:return e=Vt(19,n,t,s),e.elementType=au,e.lanes=i,e;case Jm:return Ql(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Gm:o=10;break e;case Xm:o=9;break e;case Fc:o=11;break e;case Oc:o=14;break e;case Yn:o=16,r=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=Vt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Qr(e,t,n,r){return e=Vt(7,e,r,t),e.lanes=n,e}function Ql(e,t,n,r){return e=Vt(22,e,r,t),e.elementType=Jm,e.lanes=n,e.stateNode={isHidden:!1},e}function Ka(e,t,n){return e=Vt(6,e,null,t),e.lanes=n,e}function qa(e,t,n){return t=Vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Kx(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ma(0),this.expirationTimes=Ma(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ma(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function vd(e,t,n,r,s,i,o,l,u){return e=new Kx(e,t,n,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Vt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ed(i),e}function qx(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cs,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Wg(e){if(!e)return wr;e=e._reactInternals;e:{if(ts(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var n=e.type;if(Mt(n))return Wp(e,n,t)}return t}function Hg(e,t,n,r,s,i,o,l,u){return e=vd(n,r,!0,e,s,i,o,l,u),e.context=Wg(null),n=e.current,r=wt(),s=gr(n),i=Fn(r,s),i.callback=t??null,mr(n,i,s),e.current.lanes=s,ro(e,s,r),Rt(e,r),e}function Kl(e,t,n,r){var s=t.current,i=wt(),o=gr(s);return n=Wg(n),t.context===null?t.context=n:t.pendingContext=n,t=Fn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=mr(s,t,o),e!==null&&(an(e,s,o,i),Wo(e,s,o)),o}function jl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function yd(e,t){hh(e,t),(e=e.alternate)&&hh(e,t)}function Yx(){return null}var Vg=typeof reportError=="function"?reportError:function(e){console.error(e)};function xd(e){this._internalRoot=e}ql.prototype.render=xd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));Kl(e,t,null,null)};ql.prototype.unmount=xd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xr(function(){Kl(null,e,null,null)}),t[An]=null}};function ql(e){this._internalRoot=e}ql.prototype.unstable_scheduleHydration=function(e){if(e){var t=kp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xn.length&&t!==0&&t<Xn[n].priority;n++);Xn.splice(n,0,e),n===0&&bp(e)}};function wd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Yl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mh(){}function Gx(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=jl(o);i.call(c)}}var o=Hg(t,r,e,0,null,!1,!1,"",mh);return e._reactRootContainer=o,e[An]=o.current,zi(e.nodeType===8?e.parentNode:e),Xr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=jl(u);l.call(c)}}var u=vd(e,0,!1,null,null,!1,!1,"",mh);return e._reactRootContainer=u,e[An]=u.current,zi(e.nodeType===8?e.parentNode:e),Xr(function(){Kl(t,u,n,r)}),u}function Gl(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=jl(o);l.call(u)}}Kl(t,o,e,s)}else o=Gx(n,t,e,s,r);return jl(o)}wp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gi(t.pendingLanes);n!==0&&(Ac(t,n|1),Rt(t,He()),!(ke&6)&&(Ys=He()+500,Cr()))}break;case 13:Xr(function(){var r=$n(e,1);if(r!==null){var s=wt();an(r,e,1,s)}}),yd(e,1)}};$c=function(e){if(e.tag===13){var t=$n(e,134217728);if(t!==null){var n=wt();an(t,e,134217728,n)}yd(e,134217728)}};Sp=function(e){if(e.tag===13){var t=gr(e),n=$n(e,t);if(n!==null){var r=wt();an(n,e,t,r)}yd(e,t)}};kp=function(){return Ee};Cp=function(e,t){var n=Ee;try{return Ee=e,t()}finally{Ee=n}};yu=function(e,t,n){switch(t){case"input":if(du(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=$l(r);if(!s)throw Error(A(90));ep(r),du(r,s)}}}break;case"textarea":np(e,n);break;case"select":t=n.value,t!=null&&ks(e,!!n.multiple,t,!1)}};up=hd;cp=Xr;var Xx={usingClientEntryPoint:!1,Events:[io,ps,$l,lp,ap,hd]},fi={findFiberByHostInstance:Rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jx={bundleType:fi.bundleType,version:fi.version,rendererPackageName:fi.rendererPackageName,rendererConfig:fi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hp(e),e===null?null:e.stateNode},findFiberByHostInstance:fi.findFiberByHostInstance||Yx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_o.isDisabled&&_o.supportsFiber)try{Ol=_o.inject(Jx),xn=_o}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xx;Dt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wd(t))throw Error(A(200));return qx(e,t,null,n)};Dt.createRoot=function(e,t){if(!wd(e))throw Error(A(299));var n=!1,r="",s=Vg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=vd(e,1,!1,null,null,n,!1,r,s),e[An]=t.current,zi(e.nodeType===8?e.parentNode:e),new xd(t)};Dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=hp(t),e=e===null?null:e.stateNode,e};Dt.flushSync=function(e){return Xr(e)};Dt.hydrate=function(e,t,n){if(!Yl(t))throw Error(A(200));return Gl(null,e,t,!0,n)};Dt.hydrateRoot=function(e,t,n){if(!wd(e))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Vg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Hg(t,null,e,1,n??null,s,!1,i,o),e[An]=t.current,zi(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new ql(t)};Dt.render=function(e,t,n){if(!Yl(t))throw Error(A(200));return Gl(null,e,t,!1,n)};Dt.unmountComponentAtNode=function(e){if(!Yl(e))throw Error(A(40));return e._reactRootContainer?(Xr(function(){Gl(null,null,e,!1,function(){e._reactRootContainer=null,e[An]=null})}),!0):!1};Dt.unstable_batchedUpdates=hd;Dt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yl(n))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return Gl(e,t,n,!1,r)};Dt.version="18.3.1-next-f1338f8080-20240426";function Qg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qg)}catch(e){console.error(e)}}Qg(),Qm.exports=Dt;var Sd=Qm.exports,Kg,ph=Sd;Kg=ph.createRoot,ph.hydrateRoot;var Zs=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Zx={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Zn,Nc,bm,ew=(bm=class{constructor(){se(this,Zn,Zx);se(this,Nc,!1)}setTimeoutProvider(e){K(this,Zn,e)}setTimeout(e,t){return k(this,Zn).setTimeout(e,t)}clearTimeout(e){k(this,Zn).clearTimeout(e)}setInterval(e,t){return k(this,Zn).setInterval(e,t)}clearInterval(e){k(this,Zn).clearInterval(e)}},Zn=new WeakMap,Nc=new WeakMap,bm),_r=new ew;function tw(e){setTimeout(e,0)}var Jr=typeof window>"u"||"Deno"in globalThis;function xt(){}function nw(e,t){return typeof e=="function"?e(t):e}function Xu(e){return typeof e=="number"&&e>=0&&e!==1/0}function qg(e,t){return Math.max(e+(t||0)-Date.now(),0)}function yr(e,t){return typeof e=="function"?e(t):e}function Ut(e,t){return typeof e=="function"?e(t):e}function gh(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==kd(o,t.options))return!1}else if(!Ki(t.queryKey,o))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function vh(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Zr(t.options.mutationKey)!==Zr(i))return!1}else if(!Ki(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function kd(e,t){return((t==null?void 0:t.queryKeyHashFn)||Zr)(e)}function Zr(e){return JSON.stringify(e,(t,n)=>Ju(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ki(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Ki(e[n],t[n])):!1}var rw=Object.prototype.hasOwnProperty;function Yg(e,t){if(e===t)return e;const n=yh(e)&&yh(t);if(!n&&!(Ju(e)&&Ju(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let u=0;for(let c=0;c<o;c++){const f=n?c:i[c],m=e[f],p=t[f];if(m===p){l[f]=m,(n?c<s:rw.call(e,f))&&u++;continue}if(m===null||p===null||typeof m!="object"||typeof p!="object"){l[f]=p;continue}const S=Yg(m,p);l[f]=S,S===m&&u++}return s===o&&u===s?e:l}function Ml(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function yh(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ju(e){if(!xh(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!xh(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function xh(e){return Object.prototype.toString.call(e)==="[object Object]"}function sw(e){return new Promise(t=>{_r.setTimeout(t,e)})}function Zu(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Yg(e,t):t}function iw(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function ow(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Cd=Symbol();function Gg(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Cd?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Xg(e,t){return typeof e=="function"?e(...t):!!e}function lw(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var Or,er,Ts,Em,aw=(Em=class extends Zs{constructor(){super();se(this,Or);se(this,er);se(this,Ts);K(this,Ts,t=>{if(!Jr&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){k(this,er)||this.setEventListener(k(this,Ts))}onUnsubscribe(){var t;this.hasListeners()||((t=k(this,er))==null||t.call(this),K(this,er,void 0))}setEventListener(t){var n;K(this,Ts,t),(n=k(this,er))==null||n.call(this),K(this,er,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){k(this,Or)!==t&&(K(this,Or,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof k(this,Or)=="boolean"?k(this,Or):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Or=new WeakMap,er=new WeakMap,Ts=new WeakMap,Em),bd=new aw;function ec(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var uw=tw;function cw(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=uw;const i=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;t++;try{u=l()}finally{t--,t||o()}return u},batchCalls:l=>(...u)=>{i(()=>{l(...u)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Je=cw(),_s,tr,Ps,Nm,dw=(Nm=class extends Zs{constructor(){super();se(this,_s,!0);se(this,tr);se(this,Ps);K(this,Ps,t=>{if(!Jr&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){k(this,tr)||this.setEventListener(k(this,Ps))}onUnsubscribe(){var t;this.hasListeners()||((t=k(this,tr))==null||t.call(this),K(this,tr,void 0))}setEventListener(t){var n;K(this,Ps,t),(n=k(this,tr))==null||n.call(this),K(this,tr,t(this.setOnline.bind(this)))}setOnline(t){k(this,_s)!==t&&(K(this,_s,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return k(this,_s)}},_s=new WeakMap,tr=new WeakMap,Ps=new WeakMap,Nm),Rl=new dw;function fw(e){return Math.min(1e3*2**e,3e4)}function Jg(e){return(e??"online")==="online"?Rl.isOnline():!0}var tc=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Zg(e){let t=!1,n=0,r;const s=ec(),i=()=>s.status!=="pending",o=N=>{var T;if(!i()){const y=new tc(N);p(y),(T=e.onCancel)==null||T.call(e,y)}},l=()=>{t=!0},u=()=>{t=!1},c=()=>bd.isFocused()&&(e.networkMode==="always"||Rl.isOnline())&&e.canRun(),f=()=>Jg(e.networkMode)&&e.canRun(),m=N=>{i()||(r==null||r(),s.resolve(N))},p=N=>{i()||(r==null||r(),s.reject(N))},S=()=>new Promise(N=>{var T;r=y=>{(i()||c())&&N(y)},(T=e.onPause)==null||T.call(e)}).then(()=>{var N;r=void 0,i()||(N=e.onContinue)==null||N.call(e)}),w=()=>{if(i())return;let N;const T=n===0?e.initialPromise:void 0;try{N=T??e.fn()}catch(y){N=Promise.reject(y)}Promise.resolve(N).then(m).catch(y=>{var M;if(i())return;const v=e.retry??(Jr?0:3),h=e.retryDelay??fw,g=typeof h=="function"?h(n,y):h,b=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,y);if(t||!b){p(y);return}n++,(M=e.onFail)==null||M.call(e,n,y),sw(g).then(()=>c()?void 0:S()).then(()=>{t?p(y):w()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:u,canStart:f,start:()=>(f()?w():S().then(w),s)}}var Dr,jm,ev=(jm=class{constructor(){se(this,Dr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Xu(this.gcTime)&&K(this,Dr,_r.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Jr?1/0:5*60*1e3))}clearGcTimeout(){k(this,Dr)&&(_r.clearTimeout(k(this,Dr)),K(this,Dr,void 0))}},Dr=new WeakMap,jm),zr,Is,$t,Ar,et,Xi,$r,tn,Nn,Mm,hw=(Mm=class extends ev{constructor(t){super();se(this,tn);se(this,zr);se(this,Is);se(this,$t);se(this,Ar);se(this,et);se(this,Xi);se(this,$r);K(this,$r,!1),K(this,Xi,t.defaultOptions),this.setOptions(t.options),this.observers=[],K(this,Ar,t.client),K(this,$t,k(this,Ar).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,K(this,zr,Sh(this.options)),this.state=t.state??k(this,zr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=k(this,et))==null?void 0:t.promise}setOptions(t){if(this.options={...k(this,Xi),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Sh(this.options);n.data!==void 0&&(this.setState(wh(n.data,n.dataUpdatedAt)),K(this,zr,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&k(this,$t).remove(this)}setData(t,n){const r=Zu(this.state.data,t,this.options);return ge(this,tn,Nn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ge(this,tn,Nn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=k(this,et))==null?void 0:r.promise;return(s=k(this,et))==null||s.cancel(t),n?n.then(xt).catch(xt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(k(this,zr))}isActive(){return this.observers.some(t=>Ut(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Cd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>yr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!qg(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=k(this,et))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=k(this,et))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),k(this,$t).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(k(this,et)&&(k(this,$r)?k(this,et).cancel({revert:!0}):k(this,et).cancelRetry()),this.scheduleGc()),k(this,$t).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ge(this,tn,Nn).call(this,{type:"invalidate"})}async fetch(t,n){var u,c,f,m,p,S,w,N,T,y,v,h;if(this.state.fetchStatus!=="idle"&&((u=k(this,et))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(k(this,et))return k(this,et).continueRetry(),k(this,et).promise}if(t&&this.setOptions(t),!this.options.queryFn){const g=this.observers.find(b=>b.options.queryFn);g&&this.setOptions(g.options)}const r=new AbortController,s=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(K(this,$r,!0),r.signal)})},i=()=>{const g=Gg(this.options,n),M=(()=>{const R={client:k(this,Ar),queryKey:this.queryKey,meta:this.meta};return s(R),R})();return K(this,$r,!1),this.options.persister?this.options.persister(g,M,this):g(M)},l=(()=>{const g={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:k(this,Ar),state:this.state,fetchFn:i};return s(g),g})();(c=this.options.behavior)==null||c.onFetch(l,this),K(this,Is,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&ge(this,tn,Nn).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),K(this,et,Zg({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:g=>{g instanceof tc&&g.revert&&this.setState({...k(this,Is),fetchStatus:"idle"}),r.abort()},onFail:(g,b)=>{ge(this,tn,Nn).call(this,{type:"failed",failureCount:g,error:b})},onPause:()=>{ge(this,tn,Nn).call(this,{type:"pause"})},onContinue:()=>{ge(this,tn,Nn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const g=await k(this,et).start();if(g===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(g),(S=(p=k(this,$t).config).onSuccess)==null||S.call(p,g,this),(N=(w=k(this,$t).config).onSettled)==null||N.call(w,g,this.state.error,this),g}catch(g){if(g instanceof tc){if(g.silent)return k(this,et).promise;if(g.revert){if(this.state.data===void 0)throw g;return this.state.data}}throw ge(this,tn,Nn).call(this,{type:"error",error:g}),(y=(T=k(this,$t).config).onError)==null||y.call(T,g,this),(h=(v=k(this,$t).config).onSettled)==null||h.call(v,this.state.data,g,this),g}finally{this.scheduleGc()}}},zr=new WeakMap,Is=new WeakMap,$t=new WeakMap,Ar=new WeakMap,et=new WeakMap,Xi=new WeakMap,$r=new WeakMap,tn=new WeakSet,Nn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...tv(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...wh(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return K(this,Is,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Je.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),k(this,$t).notify({query:this,type:"updated",action:t})})},Mm);function tv(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Jg(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function wh(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Sh(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ct,Se,Ji,gt,Ur,Fs,Rn,nr,Zi,Os,Ds,Br,Wr,rr,zs,Ce,yi,nc,rc,sc,ic,oc,lc,ac,nv,Rm,mw=(Rm=class extends Zs{constructor(t,n){super();se(this,Ce);se(this,Ct);se(this,Se);se(this,Ji);se(this,gt);se(this,Ur);se(this,Fs);se(this,Rn);se(this,nr);se(this,Zi);se(this,Os);se(this,Ds);se(this,Br);se(this,Wr);se(this,rr);se(this,zs,new Set);this.options=n,K(this,Ct,t),K(this,nr,null),K(this,Rn,ec()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(k(this,Se).addObserver(this),kh(k(this,Se),this.options)?ge(this,Ce,yi).call(this):this.updateResult(),ge(this,Ce,ic).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return uc(k(this,Se),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return uc(k(this,Se),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ge(this,Ce,oc).call(this),ge(this,Ce,lc).call(this),k(this,Se).removeObserver(this)}setOptions(t){const n=this.options,r=k(this,Se);if(this.options=k(this,Ct).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ut(this.options.enabled,k(this,Se))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ge(this,Ce,ac).call(this),k(this,Se).setOptions(this.options),n._defaulted&&!Ml(this.options,n)&&k(this,Ct).getQueryCache().notify({type:"observerOptionsUpdated",query:k(this,Se),observer:this});const s=this.hasListeners();s&&Ch(k(this,Se),r,this.options,n)&&ge(this,Ce,yi).call(this),this.updateResult(),s&&(k(this,Se)!==r||Ut(this.options.enabled,k(this,Se))!==Ut(n.enabled,k(this,Se))||yr(this.options.staleTime,k(this,Se))!==yr(n.staleTime,k(this,Se)))&&ge(this,Ce,nc).call(this);const i=ge(this,Ce,rc).call(this);s&&(k(this,Se)!==r||Ut(this.options.enabled,k(this,Se))!==Ut(n.enabled,k(this,Se))||i!==k(this,rr))&&ge(this,Ce,sc).call(this,i)}getOptimisticResult(t){const n=k(this,Ct).getQueryCache().build(k(this,Ct),t),r=this.createResult(n,t);return gw(this,r)&&(K(this,gt,r),K(this,Fs,this.options),K(this,Ur,k(this,Se).state)),r}getCurrentResult(){return k(this,gt)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&k(this,Rn).status==="pending"&&k(this,Rn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){k(this,zs).add(t)}getCurrentQuery(){return k(this,Se)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=k(this,Ct).defaultQueryOptions(t),r=k(this,Ct).getQueryCache().build(k(this,Ct),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ge(this,Ce,yi).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),k(this,gt)))}createResult(t,n){var L;const r=k(this,Se),s=this.options,i=k(this,gt),o=k(this,Ur),l=k(this,Fs),c=t!==r?t.state:k(this,Ji),{state:f}=t;let m={...f},p=!1,S;if(n._optimisticResults){const C=this.hasListeners(),F=!C&&kh(t,n),V=C&&Ch(t,r,n,s);(F||V)&&(m={...m,...tv(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:w,errorUpdatedAt:N,status:T}=m;S=m.data;let y=!1;if(n.placeholderData!==void 0&&S===void 0&&T==="pending"){let C;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(C=i.data,y=!0):C=typeof n.placeholderData=="function"?n.placeholderData((L=k(this,Ds))==null?void 0:L.state.data,k(this,Ds)):n.placeholderData,C!==void 0&&(T="success",S=Zu(i==null?void 0:i.data,C,n),p=!0)}if(n.select&&S!==void 0&&!y)if(i&&S===(o==null?void 0:o.data)&&n.select===k(this,Zi))S=k(this,Os);else try{K(this,Zi,n.select),S=n.select(S),S=Zu(i==null?void 0:i.data,S,n),K(this,Os,S),K(this,nr,null)}catch(C){K(this,nr,C)}k(this,nr)&&(w=k(this,nr),S=k(this,Os),N=Date.now(),T="error");const v=m.fetchStatus==="fetching",h=T==="pending",g=T==="error",b=h&&v,M=S!==void 0,E={status:T,fetchStatus:m.fetchStatus,isPending:h,isSuccess:T==="success",isError:g,isInitialLoading:b,isLoading:b,data:S,dataUpdatedAt:m.dataUpdatedAt,error:w,errorUpdatedAt:N,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>c.dataUpdateCount||m.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!h,isLoadingError:g&&!M,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:g&&M,isStale:Ed(t,n),refetch:this.refetch,promise:k(this,Rn),isEnabled:Ut(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const C=z=>{E.status==="error"?z.reject(E.error):E.data!==void 0&&z.resolve(E.data)},F=()=>{const z=K(this,Rn,E.promise=ec());C(z)},V=k(this,Rn);switch(V.status){case"pending":t.queryHash===r.queryHash&&C(V);break;case"fulfilled":(E.status==="error"||E.data!==V.value)&&F();break;case"rejected":(E.status!=="error"||E.error!==V.reason)&&F();break}}return E}updateResult(){const t=k(this,gt),n=this.createResult(k(this,Se),this.options);if(K(this,Ur,k(this,Se).state),K(this,Fs,this.options),k(this,Ur).data!==void 0&&K(this,Ds,k(this,Se)),Ml(n,t))return;K(this,gt,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!k(this,zs).size)return!0;const o=new Set(i??k(this,zs));return this.options.throwOnError&&o.add("error"),Object.keys(k(this,gt)).some(l=>{const u=l;return k(this,gt)[u]!==t[u]&&o.has(u)})};ge(this,Ce,nv).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ge(this,Ce,ic).call(this)}},Ct=new WeakMap,Se=new WeakMap,Ji=new WeakMap,gt=new WeakMap,Ur=new WeakMap,Fs=new WeakMap,Rn=new WeakMap,nr=new WeakMap,Zi=new WeakMap,Os=new WeakMap,Ds=new WeakMap,Br=new WeakMap,Wr=new WeakMap,rr=new WeakMap,zs=new WeakMap,Ce=new WeakSet,yi=function(t){ge(this,Ce,ac).call(this);let n=k(this,Se).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(xt)),n},nc=function(){ge(this,Ce,oc).call(this);const t=yr(this.options.staleTime,k(this,Se));if(Jr||k(this,gt).isStale||!Xu(t))return;const r=qg(k(this,gt).dataUpdatedAt,t)+1;K(this,Br,_r.setTimeout(()=>{k(this,gt).isStale||this.updateResult()},r))},rc=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(k(this,Se)):this.options.refetchInterval)??!1},sc=function(t){ge(this,Ce,lc).call(this),K(this,rr,t),!(Jr||Ut(this.options.enabled,k(this,Se))===!1||!Xu(k(this,rr))||k(this,rr)===0)&&K(this,Wr,_r.setInterval(()=>{(this.options.refetchIntervalInBackground||bd.isFocused())&&ge(this,Ce,yi).call(this)},k(this,rr)))},ic=function(){ge(this,Ce,nc).call(this),ge(this,Ce,sc).call(this,ge(this,Ce,rc).call(this))},oc=function(){k(this,Br)&&(_r.clearTimeout(k(this,Br)),K(this,Br,void 0))},lc=function(){k(this,Wr)&&(_r.clearInterval(k(this,Wr)),K(this,Wr,void 0))},ac=function(){const t=k(this,Ct).getQueryCache().build(k(this,Ct),this.options);if(t===k(this,Se))return;const n=k(this,Se);K(this,Se,t),K(this,Ji,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},nv=function(t){Je.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(k(this,gt))}),k(this,Ct).getQueryCache().notify({query:k(this,Se),type:"observerResultsUpdated"})})},Rm);function pw(e,t){return Ut(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function kh(e,t){return pw(e,t)||e.state.data!==void 0&&uc(e,t,t.refetchOnMount)}function uc(e,t,n){if(Ut(t.enabled,e)!==!1&&yr(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Ed(e,t)}return!1}function Ch(e,t,n,r){return(e!==t||Ut(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Ed(e,n)}function Ed(e,t){return Ut(t.enabled,e)!==!1&&e.isStaleByTime(yr(t.staleTime,e))}function gw(e,t){return!Ml(e.getCurrentResult(),t)}function bh(e){return{onFetch:(t,n)=>{var f,m,p,S,w;const r=t.options,s=(p=(m=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:m.fetchMore)==null?void 0:p.direction,i=((S=t.state.data)==null?void 0:S.pages)||[],o=((w=t.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const c=async()=>{let N=!1;const T=h=>{lw(h,()=>t.signal,()=>N=!0)},y=Gg(t.options,t.fetchOptions),v=async(h,g,b)=>{if(N)return Promise.reject();if(g==null&&h.pages.length)return Promise.resolve(h);const R=(()=>{const F={client:t.client,queryKey:t.queryKey,pageParam:g,direction:b?"backward":"forward",meta:t.options.meta};return T(F),F})(),E=await y(R),{maxPages:L}=t.options,C=b?ow:iw;return{pages:C(h.pages,E,L),pageParams:C(h.pageParams,g,L)}};if(s&&i.length){const h=s==="backward",g=h?vw:Eh,b={pages:i,pageParams:o},M=g(r,b);l=await v(b,M,h)}else{const h=e??i.length;do{const g=u===0?o[0]??r.initialPageParam:Eh(r,l);if(u>0&&g==null)break;l=await v(l,g),u++}while(u<h)}return l};t.options.persister?t.fetchFn=()=>{var N,T;return(T=(N=t.options).persister)==null?void 0:T.call(N,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function Eh(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function vw(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var eo,pn,vt,Hr,gn,qn,Lm,yw=(Lm=class extends ev{constructor(t){super();se(this,gn);se(this,eo);se(this,pn);se(this,vt);se(this,Hr);K(this,eo,t.client),this.mutationId=t.mutationId,K(this,vt,t.mutationCache),K(this,pn,[]),this.state=t.state||rv(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){k(this,pn).includes(t)||(k(this,pn).push(t),this.clearGcTimeout(),k(this,vt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){K(this,pn,k(this,pn).filter(n=>n!==t)),this.scheduleGc(),k(this,vt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){k(this,pn).length||(this.state.status==="pending"?this.scheduleGc():k(this,vt).remove(this))}continue(){var t;return((t=k(this,Hr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,u,c,f,m,p,S,w,N,T,y,v,h,g,b,M,R,E,L;const n=()=>{ge(this,gn,qn).call(this,{type:"continue"})},r={client:k(this,eo),meta:this.options.meta,mutationKey:this.options.mutationKey};K(this,Hr,Zg({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(C,F)=>{ge(this,gn,qn).call(this,{type:"failed",failureCount:C,error:F})},onPause:()=>{ge(this,gn,qn).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>k(this,vt).canRun(this)}));const s=this.state.status==="pending",i=!k(this,Hr).canStart();try{if(s)n();else{ge(this,gn,qn).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=k(this,vt).config).onMutate)==null?void 0:l.call(o,t,this,r));const F=await((c=(u=this.options).onMutate)==null?void 0:c.call(u,t,r));F!==this.state.context&&ge(this,gn,qn).call(this,{type:"pending",context:F,variables:t,isPaused:i})}const C=await k(this,Hr).start();return await((m=(f=k(this,vt).config).onSuccess)==null?void 0:m.call(f,C,t,this.state.context,this,r)),await((S=(p=this.options).onSuccess)==null?void 0:S.call(p,C,t,this.state.context,r)),await((N=(w=k(this,vt).config).onSettled)==null?void 0:N.call(w,C,null,this.state.variables,this.state.context,this,r)),await((y=(T=this.options).onSettled)==null?void 0:y.call(T,C,null,t,this.state.context,r)),ge(this,gn,qn).call(this,{type:"success",data:C}),C}catch(C){try{await((h=(v=k(this,vt).config).onError)==null?void 0:h.call(v,C,t,this.state.context,this,r))}catch(F){Promise.reject(F)}try{await((b=(g=this.options).onError)==null?void 0:b.call(g,C,t,this.state.context,r))}catch(F){Promise.reject(F)}try{await((R=(M=k(this,vt).config).onSettled)==null?void 0:R.call(M,void 0,C,this.state.variables,this.state.context,this,r))}catch(F){Promise.reject(F)}try{await((L=(E=this.options).onSettled)==null?void 0:L.call(E,void 0,C,t,this.state.context,r))}catch(F){Promise.reject(F)}throw ge(this,gn,qn).call(this,{type:"error",error:C}),C}finally{k(this,vt).runNext(this)}}},eo=new WeakMap,pn=new WeakMap,vt=new WeakMap,Hr=new WeakMap,gn=new WeakSet,qn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Je.batch(()=>{k(this,pn).forEach(r=>{r.onMutationUpdate(t)}),k(this,vt).notify({mutation:this,type:"updated",action:t})})},Lm);function rv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ln,nn,to,Tm,xw=(Tm=class extends Zs{constructor(t={}){super();se(this,Ln);se(this,nn);se(this,to);this.config=t,K(this,Ln,new Set),K(this,nn,new Map),K(this,to,0)}build(t,n,r){const s=new yw({client:t,mutationCache:this,mutationId:++po(this,to)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){k(this,Ln).add(t);const n=Po(t);if(typeof n=="string"){const r=k(this,nn).get(n);r?r.push(t):k(this,nn).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(k(this,Ln).delete(t)){const n=Po(t);if(typeof n=="string"){const r=k(this,nn).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&k(this,nn).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Po(t);if(typeof n=="string"){const r=k(this,nn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Po(t);if(typeof n=="string"){const s=(r=k(this,nn).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Je.batch(()=>{k(this,Ln).forEach(t=>{this.notify({type:"removed",mutation:t})}),k(this,Ln).clear(),k(this,nn).clear()})}getAll(){return Array.from(k(this,Ln))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>vh(n,r))}findAll(t={}){return this.getAll().filter(n=>vh(t,n))}notify(t){Je.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Je.batch(()=>Promise.all(t.map(n=>n.continue().catch(xt))))}},Ln=new WeakMap,nn=new WeakMap,to=new WeakMap,Tm);function Po(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Tn,sr,bt,_n,Dn,Go,cc,_m,ww=(_m=class extends Zs{constructor(n,r){super();se(this,Dn);se(this,Tn);se(this,sr);se(this,bt);se(this,_n);K(this,Tn,n),this.setOptions(r),this.bindMethods(),ge(this,Dn,Go).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=k(this,Tn).defaultMutationOptions(n),Ml(this.options,r)||k(this,Tn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:k(this,bt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Zr(r.mutationKey)!==Zr(this.options.mutationKey)?this.reset():((s=k(this,bt))==null?void 0:s.state.status)==="pending"&&k(this,bt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=k(this,bt))==null||n.removeObserver(this)}onMutationUpdate(n){ge(this,Dn,Go).call(this),ge(this,Dn,cc).call(this,n)}getCurrentResult(){return k(this,sr)}reset(){var n;(n=k(this,bt))==null||n.removeObserver(this),K(this,bt,void 0),ge(this,Dn,Go).call(this),ge(this,Dn,cc).call(this)}mutate(n,r){var s;return K(this,_n,r),(s=k(this,bt))==null||s.removeObserver(this),K(this,bt,k(this,Tn).getMutationCache().build(k(this,Tn),this.options)),k(this,bt).addObserver(this),k(this,bt).execute(n)}},Tn=new WeakMap,sr=new WeakMap,bt=new WeakMap,_n=new WeakMap,Dn=new WeakSet,Go=function(){var r;const n=((r=k(this,bt))==null?void 0:r.state)??rv();K(this,sr,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},cc=function(n){Je.batch(()=>{var r,s,i,o,l,u,c,f;if(k(this,_n)&&this.hasListeners()){const m=k(this,sr).variables,p=k(this,sr).context,S={client:k(this,Tn),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=k(this,_n)).onSuccess)==null||s.call(r,n.data,m,p,S)}catch(w){Promise.reject(w)}try{(o=(i=k(this,_n)).onSettled)==null||o.call(i,n.data,null,m,p,S)}catch(w){Promise.reject(w)}}else if((n==null?void 0:n.type)==="error"){try{(u=(l=k(this,_n)).onError)==null||u.call(l,n.error,m,p,S)}catch(w){Promise.reject(w)}try{(f=(c=k(this,_n)).onSettled)==null||f.call(c,void 0,n.error,m,p,S)}catch(w){Promise.reject(w)}}}this.listeners.forEach(m=>{m(k(this,sr))})})},_m),vn,Pm,Sw=(Pm=class extends Zs{constructor(t={}){super();se(this,vn);this.config=t,K(this,vn,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??kd(s,n);let o=this.get(i);return o||(o=new hw({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){k(this,vn).has(t.queryHash)||(k(this,vn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=k(this,vn).get(t.queryHash);n&&(t.destroy(),n===t&&k(this,vn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Je.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return k(this,vn).get(t)}getAll(){return[...k(this,vn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>gh(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>gh(t,r)):n}notify(t){Je.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Je.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Je.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},vn=new WeakMap,Pm),$e,ir,or,As,$s,lr,Us,Bs,Im,kw=(Im=class{constructor(e={}){se(this,$e);se(this,ir);se(this,or);se(this,As);se(this,$s);se(this,lr);se(this,Us);se(this,Bs);K(this,$e,e.queryCache||new Sw),K(this,ir,e.mutationCache||new xw),K(this,or,e.defaultOptions||{}),K(this,As,new Map),K(this,$s,new Map),K(this,lr,0)}mount(){po(this,lr)._++,k(this,lr)===1&&(K(this,Us,bd.subscribe(async e=>{e&&(await this.resumePausedMutations(),k(this,$e).onFocus())})),K(this,Bs,Rl.subscribe(async e=>{e&&(await this.resumePausedMutations(),k(this,$e).onOnline())})))}unmount(){var e,t;po(this,lr)._--,k(this,lr)===0&&((e=k(this,Us))==null||e.call(this),K(this,Us,void 0),(t=k(this,Bs))==null||t.call(this),K(this,Bs,void 0))}isFetching(e){return k(this,$e).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return k(this,ir).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=k(this,$e).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=k(this,$e).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(yr(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return k(this,$e).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=k(this,$e).get(r.queryHash),i=s==null?void 0:s.state.data,o=nw(t,i);if(o!==void 0)return k(this,$e).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Je.batch(()=>k(this,$e).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=k(this,$e).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=k(this,$e);Je.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=k(this,$e);return Je.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Je.batch(()=>k(this,$e).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(xt).catch(xt)}invalidateQueries(e,t={}){return Je.batch(()=>(k(this,$e).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Je.batch(()=>k(this,$e).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(xt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(xt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=k(this,$e).build(this,t);return n.isStaleByTime(yr(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(xt).catch(xt)}fetchInfiniteQuery(e){return e.behavior=bh(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(xt).catch(xt)}ensureInfiniteQueryData(e){return e.behavior=bh(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Rl.isOnline()?k(this,ir).resumePausedMutations():Promise.resolve()}getQueryCache(){return k(this,$e)}getMutationCache(){return k(this,ir)}getDefaultOptions(){return k(this,or)}setDefaultOptions(e){K(this,or,e)}setQueryDefaults(e,t){k(this,As).set(Zr(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...k(this,As).values()],n={};return t.forEach(r=>{Ki(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){k(this,$s).set(Zr(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...k(this,$s).values()],n={};return t.forEach(r=>{Ki(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...k(this,or).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=kd(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Cd&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...k(this,or).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){k(this,$e).clear(),k(this,ir).clear()}},$e=new WeakMap,ir=new WeakMap,or=new WeakMap,As=new WeakMap,$s=new WeakMap,lr=new WeakMap,Us=new WeakMap,Bs=new WeakMap,Im),sv=d.createContext(void 0),ns=e=>{const t=d.useContext(sv);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Cw=({client:e,children:t})=>(d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(sv.Provider,{value:e,children:t})),iv=d.createContext(!1),bw=()=>d.useContext(iv);iv.Provider;function Ew(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Nw=d.createContext(Ew()),jw=()=>d.useContext(Nw),Mw=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Rw=e=>{d.useEffect(()=>{e.clearReset()},[e])},Lw=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||Xg(n,[e.error,r])),Tw=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},_w=(e,t)=>e.isLoading&&e.isFetching&&!t,Pw=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Nh=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Iw(e,t,n){var m,p,S,w,N;const r=bw(),s=jw(),i=ns(),o=i.defaultQueryOptions(e);(p=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||p.call(m,o),o._optimisticResults=r?"isRestoring":"optimistic",Tw(o),Mw(o,s),Rw(s);const l=!i.getQueryCache().get(o.queryHash),[u]=d.useState(()=>new t(i,o)),c=u.getOptimisticResult(o),f=!r&&e.subscribed!==!1;if(d.useSyncExternalStore(d.useCallback(T=>{const y=f?u.subscribe(Je.batchCalls(T)):xt;return u.updateResult(),y},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),d.useEffect(()=>{u.setOptions(o)},[o,u]),Pw(o,c))throw Nh(o,u,s);if(Lw({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((w=(S=i.getDefaultOptions().queries)==null?void 0:S._experimental_afterQuery)==null||w.call(S,o,c),o.experimental_prefetchInRender&&!Jr&&_w(c,r)){const T=l?Nh(o,u,s):(N=i.getQueryCache().get(o.queryHash))==null?void 0:N.promise;T==null||T.catch(xt).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?c:u.trackResult(c)}function Xl(e,t){return Iw(e,mw)}function Fw(e,t){const n=ns(),[r]=d.useState(()=>new ww(n,e));d.useEffect(()=>{r.setOptions(e)},[r,e]);const s=d.useSyncExternalStore(d.useCallback(o=>r.subscribe(Je.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=d.useCallback((o,l)=>{r.mutate(o,l).catch(xt)},[r]);if(s.error&&Xg(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function jh(e){return e.length>0&&"options"in e[0]}function dc({value:e,onChange:t,options:n,placeholder:r="Select...",trigger:s,triggerClassName:i="",panelClassName:o="",align:l="left",width:u="auto",showChevron:c=!0,title:f,disabled:m=!1,"aria-label":p}){var E;const[S,w]=d.useState(!1),N=d.useRef(null),T=d.useRef(null),v=d.useCallback(()=>{const L=C=>{const F=C.find(V=>V.value===e);return F?F.label:null};if(jh(n))for(const C of n){const F=L(C.options);if(F)return F}else{const C=L(n);if(C)return C}return r},[e,n,r])();d.useEffect(()=>{if(!S)return;const L=F=>{N.current&&!N.current.contains(F.target)&&w(!1)},C=F=>{var V;F.key==="Escape"&&(w(!1),(V=T.current)==null||V.focus())};return window.addEventListener("click",L),window.addEventListener("keydown",C),()=>{window.removeEventListener("click",L),window.removeEventListener("keydown",C)}},[S]);const h=L=>{var C;t(L),w(!1),(C=T.current)==null||C.focus()},g=L=>L.map(C=>a.jsxs("button",{className:"dropdown-item","data-active":C.value===e,disabled:C.disabled,onClick:()=>!C.disabled&&h(C.value),role:"menuitem",children:[C.icon&&a.jsx("span",{className:"shrink-0",children:C.icon}),a.jsx("span",{className:"flex-1 truncate",children:C.label}),C.value===e&&a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 text-accent",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})]},C.value)),b=((E=T.current)==null?void 0:E.offsetWidth)??0,M=u==="trigger"?b:u==="auto"?void 0:u,R={...M?{width:M,minWidth:M}:{},...l==="right"?{right:0}:{left:0}};return a.jsxs("div",{ref:N,className:"relative",children:[s?a.jsx("div",{onClick:()=>!m&&w(L=>!L),children:s}):a.jsxs("button",{ref:T,type:"button",className:`dropdown-trigger ${i}`,onClick:()=>w(L=>!L),disabled:m,title:f,"aria-label":p,"aria-haspopup":"listbox","aria-expanded":S,children:[a.jsx("span",{className:"truncate",children:v}),c&&a.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`shrink-0 opacity-60 transition-transform ${S?"rotate-180":""}`,children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),S&&a.jsx("div",{className:`dropdown-panel ${o}`,style:R,role:"listbox","aria-label":p,children:jh(n)?n.map((L,C)=>a.jsxs("div",{children:[L.label&&a.jsx("div",{className:"dropdown-label",children:L.label}),g(L.options),C<n.length-1&&a.jsx("div",{className:"dropdown-divider"})]},L.label||C)):g(n)})]})}const Ow={offline:"sync-dot-offline",unstable:"sync-dot-unstable",recent:"sync-dot-recent",editing:"sync-dot-editing",live:"sync-dot-live"};function Dw({state:e,presence:t,syncLabel:n,connectionLabel:r,lastEditedLabel:s,hasEdits:i,recentTouches:o,isNarrow:l}){const[u,c]=d.useState(!1),[f,m]=d.useState(null),p=d.useRef(null),S=d.useRef(null),w=d.useRef(null),N=t?`${t.viewing} viewing  ${t.editing} editing`:"- viewing  - editing",T=t?String(t.viewing):"-",y=d.useCallback(()=>{w.current&&(window.clearTimeout(w.current),w.current=null)},[]),v=d.useCallback((g,b)=>{var M;b&&((M=navigator.clipboard)==null||M.writeText(b).then(()=>{m(g),y(),w.current=window.setTimeout(()=>{m(R=>R===g?null:R)},1e3)}).catch(()=>{}))},[y]),h=d.useCallback(()=>{c(!1),window.requestAnimationFrame(()=>{var g;return(g=S.current)==null?void 0:g.focus()})},[]);return d.useEffect(()=>{if(!u)return;const g=M=>{!p.current||p.current.contains(M.target)||h()},b=M=>{M.key==="Escape"&&h()};return window.addEventListener("mousedown",g),window.addEventListener("keydown",b),()=>{window.removeEventListener("mousedown",g),window.removeEventListener("keydown",b)}},[u,h]),d.useEffect(()=>()=>{y()},[y]),a.jsxs("div",{ref:p,className:"sync-indicator",children:[a.jsxs("button",{ref:S,type:"button",className:"sync-indicator-button",onClick:()=>u?h():c(!0),"aria-haspopup":"dialog","aria-expanded":u,"aria-label":"Sync status",title:N,children:[a.jsx("span",{className:`sync-indicator-dot ${Ow[e]}`,"aria-hidden":"true"}),!l&&a.jsx("span",{className:"sync-indicator-count tabular-nums",children:T})]}),u&&a.jsxs("div",{role:"dialog","aria-label":"Sync status",className:"sync-indicator-card select-text",children:[a.jsx("div",{className:"sync-indicator-line sync-indicator-primary",children:n}),a.jsx("div",{className:"sync-indicator-line",children:r}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:N}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:i?`Last edited: ${s}`:"No edits yet."}),a.jsxs("div",{className:"sync-indicator-section",children:[a.jsx("div",{className:"sync-indicator-section-title",children:"Recently touched files"}),o.length>0?a.jsx("div",{className:"sync-indicator-list",children:o.map(g=>a.jsxs("div",{className:"sync-indicator-item",children:[a.jsx("button",{type:"button",className:"sync-indicator-item-name",title:`Copy filename: ${g.label}`,onClick:()=>v(g.path,g.label),children:g.label}),a.jsx("span",{className:"sync-indicator-item-time tabular-nums",children:f===g.path?"Copied":g.timeLabel})]},g.path))}):a.jsx("div",{className:"sync-indicator-empty",children:"No recent touches."})]})]})]})}function zw({rootRef:e,onSearch:t,viewerActive:n,onBack:r,zoomPercent:s,onZoomPercentChange:i,currentLabel:o,itemCount:l,totalCount:u,sortSpec:c,metricKeys:f,onSortChange:m,sortDisabled:p=!1,filterCount:S,onOpenFilters:w,starFilters:N,onToggleStar:T,onClearStars:y,onClearFilters:v,starCounts:h,viewMode:g,onViewMode:b,gridItemSize:M,onGridItemSize:R,leftOpen:E,rightOpen:L,onToggleLeft:C,onToggleRight:F,onPrevImage:V,onNextImage:z,canPrevImage:$,canNextImage:oe,searchDisabled:B=!1,searchPlaceholder:ue,syncIndicator:O}){const[Q,q]=d.useState(!1),[fe,de]=d.useState(!1),[be,H]=d.useState(!1),Y=d.useRef(null),ne=d.useRef(null);d.useEffect(()=>{if(!Q)return;const W=_=>{Y.current&&!Y.current.contains(_.target)&&q(!1)};return window.addEventListener("click",W),()=>window.removeEventListener("click",W)},[Q]),d.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const W=window.matchMedia("(max-width: 900px)"),_=G=>de(G.matches);return de(W.matches),"addEventListener"in W?(W.addEventListener("change",_),()=>W.removeEventListener("change",_)):(W.addListener(_),()=>W.removeListener(_))},[]),d.useEffect(()=>{if(B){H(!1);return}if(!fe||n){H(!1);return}if(!be)return;const W=window.requestAnimationFrame(()=>{var _;return(_=ne.current)==null?void 0:_.focus()});return()=>window.cancelAnimationFrame(W)},[fe,be,n,B]);const he=c??{kind:"builtin",key:"added",dir:"desc"},Ve=he.dir,qe=he.kind==="builtin"&&he.key==="random",Ne=n||p,ft=f!=null&&f.length?f.map(W=>({value:`metric:${W}`,label:W,disabled:p})):[],De=[{value:"builtin:added",label:"Date added",disabled:p},{value:"builtin:name",label:"Filename",disabled:p},{value:"builtin:random",label:"Random",disabled:p},...ft],cn=[{label:"Layout",options:[{value:"layout:grid",label:"Grid"},{value:"layout:masonry",label:"Masonry"}]},{label:"Sort by",options:De}],_e=he.kind==="metric"?`metric:${he.key}`:`builtin:${he.key}`,Yt=[{label:"Sort by",options:De}],ht=fe&&!n,U=W=>{if(W.startsWith("layout:")){const _=W==="layout:masonry"?"adaptive":"grid";b==null||b(_)}else{if(p)return;m==null||m(Mh(W,he))}},re=()=>{!m||p||m(qe?he:{...he,dir:Ve==="desc"?"asc":"desc"})},ae=N??[],ye=ae.length,ce=$w(S,ye),ve=Aw(l,u),ee=o||"Root";return a.jsxs("div",{ref:e,className:"toolbar-shell fixed top-0 left-0 right-0 h-12 grid grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] items-center px-3 gap-3 bg-panel border-b border-border z-[var(--z-toolbar)] col-span-full row-start-1 select-none",children:[a.jsxs("div",{className:"toolbar-left flex items-center gap-4 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsxs("div",{className:"flex flex-col min-w-0 leading-tight",children:[a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted",children:"Scope"}),a.jsx("span",{className:"text-sm font-medium text-text truncate",title:ee,children:ee})]}),ve&&a.jsx("span",{className:"toolbar-count text-xs text-muted whitespace-nowrap tabular-nums",children:ve})]}),a.jsxs("div",{className:"toolbar-sort flex items-center gap-2",children:[a.jsxs("div",{className:`toolbar-sort-controls flex items-center gap-2 ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsx(dc,{value:_e,onChange:U,options:cn,title:"Sort and layout options","aria-label":"Sort and layout",triggerClassName:"min-w-[110px]"}),a.jsx("button",{className:"toolbar-sort-dir btn btn-icon",onClick:re,title:p?"Sorting disabled":qe?"Shuffle":`Sort ${Ve==="desc"?"descending":"ascending"}`,"aria-label":qe?"Shuffle":"Toggle sort direction","aria-disabled":Ne,disabled:Ne,children:qe?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Ve==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]}),a.jsxs("div",{ref:Y,className:`toolbar-filter relative ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsxs("button",{className:`btn ${ce>0?"btn-active":""}`,onClick:()=>q(W=>!W),"aria-haspopup":"dialog","aria-expanded":Q,title:"Filters","aria-disabled":n,children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),a.jsx("span",{className:"toolbar-filters-label",children:"Filters"}),ce>0&&a.jsx("span",{className:"toolbar-filters-count px-1.5 py-0.5 text-[11px] rounded-full bg-accent-strong text-text",children:ce})]}),Q&&a.jsxs("div",{role:"dialog","aria-label":"Filters",className:"dropdown-panel w-[240px]",style:{top:"38px",left:0},children:[a.jsx("div",{className:"dropdown-label",children:"Rating"}),a.jsxs("div",{className:"px-1",children:[[5,4,3,2,1].map(W=>{const _=ae.includes(W),G=(h==null?void 0:h[String(W)])??0;return a.jsxs("button",{onClick:()=>T==null?void 0:T(W),className:`dropdown-item justify-between ${_?"bg-accent-muted":""}`,children:[a.jsxs("span",{className:_?"text-star-active":"text-text",children:["".repeat(W),"".repeat(5-W)]}),a.jsx("span",{className:"text-xs text-muted",children:G})]},W)}),a.jsxs("button",{onClick:()=>T==null?void 0:T(0),className:`dropdown-item justify-between ${ae.includes(0)?"bg-accent-muted":""}`,children:[a.jsx("span",{className:"text-text",children:"Unrated"}),a.jsx("span",{className:"text-xs text-muted",children:(h==null?void 0:h["0"])??0})]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("div",{className:"dropdown-label",children:"Metrics"}),a.jsxs("button",{className:"dropdown-item",onClick:()=>{q(!1),w==null||w()},children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]}),a.jsx("span",{children:"Open Metrics Panel"}),(S||0)>0&&a.jsxs("span",{className:"ml-auto text-xs text-muted",children:[S," active"]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("button",{className:"dropdown-item text-muted hover:text-text",onClick:()=>{v?v():y==null||y()},disabled:ce===0,children:"Clear all filters"})]})]}),n&&a.jsxs("button",{className:"btn btn-sm",onClick:r,title:"Back to grid",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})]})]}),a.jsx("div",{className:"toolbar-center flex items-center gap-3 justify-center min-w-0",children:n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"range",min:5,max:800,step:1,value:Math.round(Math.max(5,Math.min(800,s??100))),onChange:W=>i==null?void 0:i(Number(W.target.value)),className:"zoom-slider","aria-label":"Zoom level"}),a.jsxs("span",{className:"text-xs text-muted min-w-[42px] text-right",children:[Math.round(s??100),"%"]})]}):R&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted",children:"Size"}),a.jsx("input",{type:"range",min:80,max:500,step:10,value:M??220,onChange:W=>R(Number(W.target.value)),className:"w-28 h-1.5 bg-border rounded-full appearance-none cursor-pointer hover:bg-hover transition-colors [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-text [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-text [&::-moz-range-thumb]:border-0","aria-label":"Thumbnail size"})]})}),a.jsxs("div",{className:"toolbar-right flex items-center gap-2 justify-end",children:[a.jsxs("div",{className:`toolbar-nav flex items-center gap-1 mr-1 ${n?"":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,children:[a.jsx("button",{className:`btn btn-icon ${$?"":"opacity-40 cursor-not-allowed"}`,title:"Previous image (A / )",onClick:()=>$&&(V==null?void 0:V()),"aria-label":"Previous image","aria-disabled":!$,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("button",{className:`btn btn-icon ${oe?"":"opacity-40 cursor-not-allowed"}`,title:"Next image (D / )",onClick:()=>oe&&(z==null?void 0:z()),"aria-label":"Next image","aria-disabled":!oe,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 6l6 6-6 6"})})})]}),a.jsxs("div",{className:"toolbar-panels flex items-center gap-1",children:[a.jsx("button",{className:`btn btn-icon ${E?"":"opacity-50"}`,title:E?"Hide left panel (Ctrl+B)":"Show left panel (Ctrl+B)",onClick:C,"aria-pressed":E,"aria-label":"Toggle left panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"11",y:"5",width:"10",height:"14",rx:"1.5"})]})}),a.jsx("button",{className:`btn btn-icon ${L?"":"opacity-50"}`,title:L?"Hide right panel (Ctrl+Alt+B)":"Show right panel (Ctrl+Alt+B)",onClick:F,"aria-pressed":L,"aria-label":"Toggle right panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"15",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"3",y:"5",width:"10",height:"14",rx:"1.5"})]})})]}),O&&a.jsx(Dw,{...O,isNarrow:fe}),!n&&fe&&a.jsx("button",{className:`btn btn-icon ${be?"btn-active":""} ${B?"opacity-50 cursor-not-allowed":""}`,"aria-label":be?"Close search":"Open search",title:B?"Search disabled":be?"Close search":"Search",onClick:()=>!B&&H(W=>!W),disabled:B,children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("circle",{cx:"11",cy:"11",r:"7"}),a.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),!n&&!fe?a.jsx("div",{className:"toolbar-search w-[240px]",children:a.jsx("input",{ref:ne,"aria-label":"Search filename, tags, notes",placeholder:B?ue??"Search disabled":"Search...",onChange:W=>t(W.target.value),className:"toolbar-search-input input w-full focus:w-full transition-all duration-200 select-text",disabled:B})}):n?a.jsx("div",{className:"toolbar-search w-[240px]","aria-hidden":"true"}):null]}),!n&&fe&&be&&!B&&a.jsx("div",{className:"toolbar-search-row",children:a.jsx("input",{ref:ne,"aria-label":"Search filename, tags, notes",placeholder:ue??"Search...",onChange:W=>t(W.target.value),className:"toolbar-search-input-mobile input input-lg w-full select-text"})}),ht&&a.jsx("div",{className:"mobile-drawer",children:a.jsxs("div",{className:"mobile-drawer-row",children:[a.jsxs("div",{className:"mobile-pill-group",children:[a.jsx("button",{className:`mobile-pill ${g==="grid"?"is-active":""}`,onClick:()=>b==null?void 0:b("grid"),"aria-pressed":g==="grid",children:"Grid"}),a.jsx("button",{className:`mobile-pill ${g==="adaptive"?"is-active":""}`,onClick:()=>b==null?void 0:b("adaptive"),"aria-pressed":g==="adaptive",children:"Masonry"})]}),a.jsx(dc,{value:_e,onChange:W=>m==null?void 0:m(Mh(W,he)),options:Yt,"aria-label":"Sort",triggerClassName:"mobile-pill mobile-pill-dropdown",panelClassName:"mobile-drawer-panel",disabled:p}),a.jsx("button",{className:`mobile-pill mobile-pill-icon ${Ne?"opacity-50 cursor-not-allowed":""}`,onClick:re,title:p?"Sorting disabled":qe?"Shuffle":`Sort ${Ve==="desc"?"descending":"ascending"}`,"aria-label":qe?"Shuffle":"Toggle sort direction","aria-disabled":Ne,disabled:Ne,children:qe?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Ve==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]})})]})}function Aw(e,t){if(typeof e!="number")return null;const n=e.toLocaleString();if(typeof t!="number")return`${n} items`;const r=t.toLocaleString();return t===e?`${n} items`:`${n} / ${r} items`}function $w(e,t){return typeof e=="number"?e:t>0?1:0}function Mh(e,t){if(e.startsWith("metric:")){const n=e.slice(7);return n?{kind:"metric",key:n,dir:t.dir}:t}if(e.startsWith("builtin:")){const n=e.slice(8);if(n==="name"||n==="added"||n==="random")return{kind:"builtin",key:n,dir:t.dir}}return t}class Sn extends Error{constructor(n,r,s,i){super(r);bn(this,"status");bn(this,"url");bn(this,"body");this.name="FetchError",this.status=n,this.url=s,this.body=i}}function Uw(e){const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function ov(e,t,n){if(t&&typeof t=="object"){const r=t,s=typeof r.error=="string"?r.error:null,i=typeof r.message=="string"?r.message:null;if(s&&i)return`${s}: ${i}`;if(s)return s;if(i)return i}return typeof t=="string"&&t?t:`HTTP ${e} for ${n}`}function rt(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{let u=null;const c=await l.text().catch(()=>"");if(c)if((l.headers.get("content-type")||"").includes("application/json")||Uw(c))try{u=JSON.parse(c)}catch{u=c}else u=c;if(!l.ok)throw new Sn(l.status,ov(l.status,u,e),e,u);return u}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}function Io(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{if(!l.ok){const u=await l.text().catch(()=>""),c=u||null;throw new Sn(l.status,ov(l.status,c,e),e,c)}return l.blob()}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}class lv{constructor(t){bn(this,"store",new Map);bn(this,"inflight",new Map);bn(this,"totalBytes",0);this.maxBytes=t}getMaxBytes(){return this.maxBytes}getTotalBytes(){return this.totalBytes}getSize(){return this.store.size}has(t){return this.store.has(t)}isInflight(t){return this.inflight.has(t)}get(t){const n=this.store.get(t);if(n)return this.store.delete(t),this.store.set(t,n),n.blob}evictIfNeeded(t){for(;this.totalBytes+t>this.maxBytes&&this.store.size>0;){const n=this.store.keys().next().value;if(n==null)break;const r=this.store.get(n);r&&(this.totalBytes-=r.size),this.store.delete(n)}}set(t,n){const r=n.size||0;if(!(r>this.maxBytes)){if(this.store.has(t)){const s=this.store.get(t);this.totalBytes-=s.size,this.store.delete(t)}this.evictIfNeeded(r),this.store.set(t,{blob:n,size:r}),this.totalBytes+=r}}async getOrFetch(t,n){const r=this.get(t);if(r)return r;const s=this.inflight.get(t);if(s)return s.promise;const i=n(),o=typeof i=="object"&&"promise"in i,l=o?i.promise:i,u=o?i.abort:void 0,c=l.then(f=>(this.set(t,f),f)).finally(()=>{this.inflight.delete(t)});return this.inflight.set(t,{promise:c,abort:u}),c}prefetch(t,n){if(this.store.has(t)||this.inflight.has(t))return;const r=n(),s=typeof r=="object"&&"promise"in r,i=s?r.promise:r,o=s?r.abort:void 0,l=i.then(u=>(this.set(t,u),u)).catch(()=>new Blob).finally(()=>{this.inflight.delete(t)});this.inflight.set(t,{promise:l,abort:o})}cancelPrefetch(t){const n=this.inflight.get(t);if(n!=null&&n.abort)try{n.abort()}catch{}this.inflight.delete(t)}clear(){for(const[t,n]of this.inflight)if(n.abort)try{n.abort()}catch{}this.inflight.clear(),this.store.clear(),this.totalBytes=0}evictPrefix(t){const n=(()=>{const s=t?`/${t.replace(/^\/+/,"")}`:"/";return s==="/"?"/":s.replace(/\/+$/,"")})(),r=s=>{const i=s.startsWith("/")?s.replace(/\/+$/,""):`/${s.replace(/\/+$/,"")}`;return n==="/"?!0:i===n||i.startsWith(`${n}/`)};for(const[s,i]of Array.from(this.store.entries()))r(s)&&(this.totalBytes-=i.size,this.store.delete(s));for(const[s,i]of Array.from(this.inflight.entries()))if(r(s)){if(i.abort)try{i.abort()}catch{}this.inflight.delete(s)}this.totalBytes<0&&(this.totalBytes=0)}}const us=new lv(60*1024*1024),fc=new lv(20*1024*1024),Ya={};function Bw(){const e=Ya==null?void 0:Ya.VITE_API_BASE,t=typeof window<"u",n=t?window.location.origin:"http://localhost",r=t?window.location.hostname:"localhost",s=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\]|.+\.localhost)$/i.test(r);if(!e)return"";let i;try{i=new URL(e,n)}catch{return""}const o=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\])$/i.test(i.hostname);return s?i.origin:o?"":i.origin}const Pe=Bw();const Ww=40*1024*1024,Rh="lenslet.client_id",Lh="lenslet.client_id.session",av="lenslet.last_event_id",Hw=1e3,Vw=3e4,Qw=5;let os=null,Xo=null,Th=0,Ms=null,Rs=0,Jl=!0,Ll=!1;function uv(){return typeof window<"u"&&typeof EventSource<"u"}function _h(e,t){if(!e)return null;try{return e.getItem(t)}catch{return null}}function Ph(e,t,n){if(e)try{e.setItem(t,n)}catch{}}function Kw(){if(typeof navigator>"u")return"server";const e=navigator.userAgent||"",t=navigator.language||"",n=navigator.platform||"",r=typeof Intl<"u"&&Intl.DateTimeFormat().resolvedOptions().timeZone||"",s=typeof screen<"u"?`${screen.width}x${screen.height}x${screen.colorDepth}`:"";return[e,t,n,r,s].join("|")}function qw(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=t*16777619>>>0;return t.toString(16).padStart(8,"0")}function Jo(){if(os)return os;const e=typeof window<"u"?window.localStorage:null,t=typeof window<"u"?window.sessionStorage:null,n=_h(e,Rh)||_h(t,Lh);if(n)return os=n,n;const r=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`;if(e)return Ph(e,Rh,r),os=r,r;if(t)return Ph(t,Lh,r),os=r,r;const s=`fp_${qw(Kw())}`;return os=s,s}function qi(e="lenslet"){Th+=1;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`nonce_${Math.random().toString(36).slice(2,10)}_${Date.now()}_${Th}`;return`${e}:${Jo()}:${t}`}function Yw(){if(Xo!=null)return Xo;if(typeof window>"u")return null;try{const e=window.localStorage.getItem(av);if(!e)return null;const t=Number(e);return!Number.isFinite(t)||t<=0?null:(Xo=t,t)}catch{return null}}function Gw(e){if(!(!Number.isFinite(e)||e<=0)&&(Xo=e,!(typeof window>"u")))try{window.localStorage.setItem(av,String(e))}catch{}}function Xw(){if(typeof window>"u")return`${Pe}/events`;const e=new URL(`${Pe}/events`,window.location.origin),t=Yw();return t!=null&&Number.isFinite(t)&&e.searchParams.set("last_event_id",String(t)),e.toString()}function Jw(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}let en=null,cv="idle";const hc=new Set,mc=new Set,pc=new Set;function Ls(e){cv=e;for(const t of mc)t(e)}function Nd(e){if(Ll!==e){Ll=e;for(const t of pc)t(e)}}function jd(){Ms!=null&&(window.clearTimeout(Ms),Ms=null)}function Zw(){Rs=0,jd()}function e1(){if(!Jl||Ms!=null)return;Rs+=1;const e=Math.min(Hw*Math.pow(2,Rs-1),Vw);Rs>=Qw?(Ls("offline"),Nd(!0)):Ls("reconnecting"),Ms=window.setTimeout(()=>{Ms=null,dv()},e)}function dv(){if(!Jl||!uv()||(en&&en.readyState===EventSource.CLOSED&&(en.close(),en=null),en))return;Rs>0?Ls("reconnecting"):Ls("connecting");const e=new EventSource(Xw());en=e;const t=n=>r=>{const s=Jw(r.data);if(!s)return;const i=r.lastEventId?Number(r.lastEventId):null,o=i!=null&&Number.isFinite(i)?i:null;o!=null&&Gw(o);for(const l of hc)l({type:n,id:o,data:s})};e.addEventListener("item-updated",t("item-updated")),e.addEventListener("metrics-updated",t("metrics-updated")),e.addEventListener("presence",t("presence")),e.onopen=()=>{Zw(),Nd(!1),Ls("live")},e.onerror=()=>{en===e&&(e.close(),en=null,e1())}}function t1(){Jl=!0,uv()&&(jd(),dv())}function n1(){Jl=!1,jd(),Rs=0,en&&(en.close(),en=null),Nd(!1),Ls("offline")}function r1(e){return hc.add(e),()=>{hc.delete(e)}}function s1(e){return mc.add(e),e(cv),()=>{mc.delete(e)}}function i1(e){return pc.add(e),e(Ll),()=>{pc.delete(e)}}function o1(){return Ll}const pe={getFolder:(e,t)=>{const n=new URLSearchParams({path:e});return t!=null&&n.set("page",String(t)),rt(`${Pe}/folders?${n}`).promise},search:(e,t)=>{const n=new URLSearchParams;return e&&n.set("q",e),t&&n.set("path",t),rt(`${Pe}/search?${n}`).promise},getEmbeddings:()=>rt(`${Pe}/embeddings`).promise,searchEmbeddings:e=>rt(`${Pe}/embeddings/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise,refreshFolder:e=>{const t=new URLSearchParams({path:e});return rt(`${Pe}/refresh?${t}`,{method:"POST"}).promise},getSidecar:e=>rt(`${Pe}/item?path=${encodeURIComponent(e)}`).promise,patchSidecar:(e,t,n)=>{const s={"Content-Type":"application/json","Idempotency-Key":(n==null?void 0:n.idempotencyKey)??qi("patch"),"x-client-id":Jo(),"x-updated-by":"web"};return(n==null?void 0:n.ifMatch)!=null&&(s["If-Match"]=String(n.ifMatch)),rt(`${Pe}/item?path=${encodeURIComponent(e)}`,{method:"PATCH",headers:s,body:JSON.stringify(t)}).promise},getMetadata:e=>rt(`${Pe}/metadata?path=${encodeURIComponent(e)}`).promise,putSidecar:(e,t)=>rt(`${Pe}/item?path=${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-client-id":Jo(),"x-updated-by":"web"},body:JSON.stringify(t)}).promise,getHealth:()=>rt(`${Pe}/health`).promise,postPresence:(e,t)=>rt(`${Pe}/presence`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gallery_id:e,client_id:t??Jo()})}).promise,getThumb:e=>fc.getOrFetch(e,()=>Io(`${Pe}/thumb?path=${encodeURIComponent(e)}`)),prefetchThumb:e=>{fc.prefetch(e,()=>Io(`${Pe}/thumb?path=${encodeURIComponent(e)}`))},getFile:e=>us.getOrFetch(e,()=>Io(`${Pe}/file?path=${encodeURIComponent(e)}`)),prefetchFile:async e=>{if(!(us.has(e)||us.isInflight(e)))try{const t=await Io(`${Pe}/file?path=${encodeURIComponent(e)}`).promise;t.size<=Ww&&us.set(e,t)}catch{}},cancelPrefetch:e=>{us.cancelPrefetch(e)},uploadFile:async(e,t)=>{const n=new FormData;return n.append("dest",e),n.append("file",t),rt(`${Pe}/file`,{method:"POST",body:n,timeoutMs:6e4}).promise},moveFile:async(e,t)=>{const n=new FormData;return n.append("src",e),n.append("dest",t),rt(`${Pe}/move`,{method:"POST",body:n}).promise},deleteFiles:async e=>rt(`${Pe}/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:e})}).promise,exportIntent:async e=>{const t=new FormData;return t.append("path",e),rt(`${Pe}/export-intent`,{method:"POST",body:t}).promise},getViews:()=>rt(`${Pe}/views`).promise,saveViews:e=>rt(`${Pe}/views`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise};class l1{constructor(t=400){bn(this,"cache",new Map);bn(this,"maxSize");this.maxSize=t,typeof window<"u"&&window.addEventListener("beforeunload",()=>this.clear(),{once:!0})}get(t){const n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){for(this.cache.has(t)&&this.cache.delete(t);this.cache.size>=this.maxSize;){const r=this.cache.keys().next().value;if(r===void 0)break;const s=this.cache.get(r);if(this.cache.delete(r),s)try{URL.revokeObjectURL(s)}catch{}}this.cache.set(t,n)}clear(){for(const t of this.cache.values())try{URL.revokeObjectURL(t)}catch{}this.cache.clear()}}const Ga=new l1(400);function a1({path:e,name:t,onClick:n,selected:r,highlighted:s,displayW:i,displayH:o,ioRoot:l,isScrolling:u,priority:c}){const f=d.useRef(null),[m,p]=d.useState(()=>Ga.get(e)??null),[S,w]=d.useState(!1),[N,T]=d.useState(()=>!!m);return d.useEffect(()=>{const y=f.current;if(!y)return;const v=new IntersectionObserver(h=>{for(const g of h)g.target===y&&w(g.isIntersecting||g.intersectionRatio>0)},{root:l??null,rootMargin:"200px 0px",threshold:.01});return v.observe(y),()=>{v.unobserve(y),v.disconnect()}},[l]),d.useEffect(()=>{if(m||!(S&&!u||c))return;let y=!0;return pe.getThumb(e).then(v=>{if(!y)return;const h=URL.createObjectURL(v);Ga.set(e,h),p(h)}).catch(()=>{}),()=>{y=!1}},[e,m,S,u,c]),d.useEffect(()=>{var v;if(!m){T(!1);return}const y=(v=f.current)==null?void 0:v.querySelector("img");y&&y.complete&&y.naturalWidth>0?T(!0):T(!1)},[m]),d.useEffect(()=>{p(Ga.get(e)??null)},[e]),a.jsx("div",{ref:f,className:`absolute inset-0 relative bg-hover border border-border rounded-lg overflow-hidden select-none ${r?"outline-2 outline-accent":""} ${s?"ring-2 ring-accent/60 animate-pulse":""} hover:outline hover:outline-1 hover:outline-accent`,onClick:n,children:m?a.jsx("img",{className:`w-full h-full object-cover block pointer-events-none select-none opacity-0 transition-opacity duration-[160ms] ${N?"opacity-100":""}`,src:m,alt:t,loading:"lazy",decoding:"async",onLoad:()=>T(!0),width:i?Math.round(i):void 0,height:o?Math.round(o):void 0}):null})}function ls(e,t,n){let r=n.initialDeps??[],s,i=!0;function o(){var l,u,c;let f;n.key&&((l=n.debug)!=null&&l.call(n))&&(f=Date.now());const m=e();if(!(m.length!==r.length||m.some((w,N)=>r[N]!==w)))return s;r=m;let S;if(n.key&&((u=n.debug)!=null&&u.call(n))&&(S=Date.now()),s=t(...m),n.key&&((c=n.debug)!=null&&c.call(n))){const w=Math.round((Date.now()-f)*100)/100,N=Math.round((Date.now()-S)*100)/100,T=N/16,y=(v,h)=>{for(v=String(v);v.length<h;)v=" "+v;return v};console.info(`%c ${y(N,5)} /${y(w,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*T,120))}deg 100% 31%);`,n==null?void 0:n.key)}return n!=null&&n.onChange&&!(i&&n.skipInitialOnChange)&&n.onChange(s),i=!1,s}return o.updateDeps=l=>{r=l},o}function Ih(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const u1=(e,t)=>Math.abs(e-t)<1.01,c1=(e,t,n)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,s),n)}},Fh=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},d1=e=>e,f1=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},h1=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const s=o=>{const{width:l,height:u}=o;t({width:Math.round(l),height:Math.round(u)})};if(s(Fh(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const u=o[0];if(u!=null&&u.borderBoxSize){const c=u.borderBoxSize[0];if(c){s({width:c.inlineSize,height:c.blockSize});return}}s(Fh(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},Oh={passive:!0},Dh=typeof window>"u"?!0:"onscrollend"in window,m1=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&Dh?()=>{}:c1(r,()=>{t(s,!1)},e.options.isScrollingResetDelay),o=f=>()=>{const{horizontal:m,isRtl:p}=e.options;s=m?n.scrollLeft*(p&&-1||1):n.scrollTop,i(),t(s,f)},l=o(!0),u=o(!1);u(),n.addEventListener("scroll",l,Oh);const c=e.options.useScrollendEvent&&Dh;return c&&n.addEventListener("scrollend",u,Oh),()=>{n.removeEventListener("scroll",l),c&&n.removeEventListener("scrollend",u)}},p1=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},g1=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const o=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class v1{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:d1,rangeExtractor:f1,onChange:()=>{},measureElement:p1,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=ls(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=n[o];if(s.has(l.lane))continue;const u=i.get(l.lane);if(u==null||l.end>u.end?i.set(l.lane,l):l.end<u.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=ls(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,s,i,o,l)=>(this.prevLanes!==void 0&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=ls(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l},u)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const p of this.laneAssignments.keys())p>=n&&this.laneAssignments.delete(p);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(p=>{this.itemSizeCache.set(p.key,p.size)}));const c=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const f=this.measurementsCache.slice(0,c),m=new Array(l).fill(void 0);for(let p=0;p<c;p++){const S=f[p];S&&(m[S.lane]=p)}for(let p=c;p<n;p++){const S=i(p),w=this.laneAssignments.get(p);let N,T;if(w!==void 0&&this.options.lanes>1){N=w;const g=m[N],b=g!==void 0?f[g]:void 0;T=b?b.end+this.options.gap:r+s}else{const g=this.options.lanes===1?f[p-1]:this.getFurthestMeasurement(f,p);T=g?g.end+this.options.gap:r+s,N=g?g.lane:p%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(p,N)}const y=u.get(S),v=typeof y=="number"?y:this.options.estimateSize(p),h=T+v;f[p]={index:p,start:T,size:v,end:h,key:S,lane:N},m[N]=p}return this.measurementsCache=f,f},{key:!1,debug:()=>this.options.debug}),this.calculateRange=ls(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?y1({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=ls(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,o)=>i===null||o===null?[]:n({startIndex:i,endIndex:o,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=ls(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,o=n.length;i<o;i++){const l=n[i],u=r[l];s.push(u)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return Ih(r[fv(0,r.length-1,s=>Ih(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(s.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const o=10,l=c=>{if(!this.targetWindow)return;const f=this.getOffsetForIndex(n,c);if(!f){console.warn("Failed to get offset for index:",n);return}const[m,p]=f;this._scrollToOffset(m,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const S=this.getScrollOffset(),w=this.getOffsetForIndex(n,p);if(!w){console.warn("Failed to get offset for index:",n);return}u1(w[0],S)||u(p)})},u=c=>{this.targetWindow&&(i++,i<o?this.targetWindow.requestAnimationFrame(()=>l(c)):console.warn(`Failed to scroll to index ${n} after ${o} attempts.`))};l(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}s=Math.max(...i.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const fv=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function y1({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const s=e.length-1,i=u=>e[u].start;if(e.length<=r)return{startIndex:0,endIndex:s};let o=fv(0,s,i,n),l=o;if(r===1)for(;l<s&&e[l].end<n+t;)l++;else if(r>1){const u=Array(r).fill(0);for(;l<s&&u.some(f=>f<n+t);){const f=e[l];u[f.lane]=f.end,l++}const c=Array(r).fill(n+t);for(;o>=0&&c.some(f=>f>=n);){const f=e[o];c[f.lane]=f.start,o--}o=Math.max(0,o-o%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const zh=typeof document<"u"?d.useLayoutEffect:d.useEffect;function x1(e){const t=d.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var o;i?Sd.flushSync(t):t(),(o=e.onChange)==null||o.call(e,s,i)}},[r]=d.useState(()=>new v1(n));return r.setOptions(n),zh(()=>r._didMount(),[]),zh(()=>r._willUpdate()),r}function w1(e){return x1({observeElementRect:h1,observeElementOffset:m1,scrollToFn:g1,...e})}function S1({containerW:e,gap:t,targetCell:n,aspect:r,captionH:s}){const i=Math.max(1,Math.floor((e+t)/(n+t))),o=(e-t*(i-1))/i,l=o*r.h/r.w,u=l+s+t;return{columns:i,cellW:o,mediaH:l,rowH:u}}const k1=1.333;function C1({items:e,containerWidth:t,targetHeight:n,gap:r,captionH:s}){if(t<=0)return[];const i=[];let o=[],l=0;const u=(c,f)=>({index:i.length,height:f+s+r,imageH:f,items:c.map(m=>({item:m.item,displayW:m.aspect*f,displayH:f,originalIndex:m.originalIndex}))});for(let c=0;c<e.length;c++){const f=e[c],m=f.w>0&&f.h>0?f.w/f.h:k1;o.push({item:f,aspect:m,originalIndex:c}),l+=m;const p=(o.length-1)*r;if(l*n+p>=t){const w=(t-p)/l;i.push(u(o,w)),o=[],l=0}}return o.length>0&&i.push(u(o,n)),i}function b1(e,t,n){return{mode:"adaptive",rows:C1({items:t,containerWidth:e,targetHeight:n.targetCell,gap:n.gap,captionH:n.captionH})}}function E1(e,t,n){const{columns:r,cellW:s,mediaH:i,rowH:o}=S1({containerW:e,gap:n.gap,targetCell:n.targetCell,aspect:n.aspect,captionH:n.captionH}),l=Math.ceil(t.length/Math.max(1,r));return{mode:"grid",columns:r,cellW:s,mediaH:i,rowH:o,rowCount:l}}function N1(e,t,n){const[r,s]=d.useState(0);d.useLayoutEffect(()=>{const u=e.current;if(!u)return;const c=()=>{const m=getComputedStyle(u),p=u.clientWidth-parseFloat(m.paddingLeft)-parseFloat(m.paddingRight);s(p)},f=new ResizeObserver(c);return f.observe(u),c(),()=>f.disconnect()},[]);const i=d.useMemo(()=>n.viewMode==="adaptive"?b1(r,t,n):E1(r,t,n),[r,t,n.viewMode,n.gap,n.targetCell,n.aspect.w,n.aspect.h,n.captionH]),o=w1({count:i.mode==="adaptive"?i.rows.length:i.rowCount,getScrollElement:()=>e.current,estimateSize:u=>i.mode==="adaptive"?i.rows[u].height:i.rowH,overscan:8}),l=o.getVirtualItems();return d.useEffect(()=>{o.measure()},[i,o]),{width:r,layout:i,rowVirtualizer:o,virtualRows:l}}function j1(e,t,n,r){if(!e.length)return null;const s=n?e.findIndex(l=>l.path===n):0,i=Math.max(1,t);let o=s;if(r.key==="ArrowRight"||r.key==="d")o=Math.min(e.length-1,s+1);else if(r.key==="ArrowLeft"||r.key==="a")o=Math.max(0,s-1);else if(r.key==="ArrowDown"||r.key==="s")o=Math.min(e.length-1,s+i);else if(r.key==="ArrowUp"||r.key==="w")o=Math.max(0,s-i);else return r.key==="Enter"&&n?"open":null;return o}const En=12,M1=44,R1={w:4,h:3},L1=350,T1=120;function _1({items:e,selected:t,restoreToSelectionToken:n,onSelectionChange:r,onOpenViewer:s,onContextMenuItem:i,highlight:o,recentlyUpdated:l,suppressSelectionHighlight:u=!1,viewMode:c="grid",targetCellSize:f=220,scrollRef:m,hideScrollbar:p=!1}){const[S,w]=d.useState(null),[N,T]=d.useState(null),[y,v]=d.useState(!1),[h,g]=d.useState(null),[b,M]=d.useState(null),R=d.useRef(null),E=d.useRef(null),L=d.useRef(null),C=m??L,F=d.useRef(null),V=f,{width:z,layout:$,rowVirtualizer:oe,virtualRows:B}=N1(C,e,{gap:En,targetCell:V,aspect:R1,captionH:M1,viewMode:c}),ue=d.useMemo(()=>{const U=new Map;for(let re=0;re<e.length;re++)U.set(e[re].path,re);return U},[e]),O=d.useMemo(()=>{if($.mode!=="adaptive")return null;const U=new Map;return $.rows.forEach((re,ae)=>{let ye=0;re.items.forEach((ce,ve)=>{const ee=ye+ce.displayW/2;U.set(ce.item.path,{row:ae,center:ee,order:ve}),ye+=ce.displayW+En})}),U},[$]);d.useEffect(()=>{if(!t.length)return;const U=t[0];h!==U&&g(U)},[t,h]);const Q=d.useMemo(()=>{if($.mode!=="adaptive")return null;let U=0;return $.rows.map(re=>{const ae=U;return U+=re.height,{start:ae,height:re.height}})},[$]),q=d.useRef(null),fe=(U,re)=>{try{if(q.current!=null){try{cancelAnimationFrame(q.current)}catch{}q.current=null}const ae=U.scrollTop,ye=re-ae;if(Math.abs(ye)<1){U.scrollTop=re;return}const ce=140,ve=performance.now(),ee=_=>1-Math.pow(1-_,3),W=_=>{const G=Math.min(1,(_-ve)/ce),ie=ee(G);U.scrollTop=ae+ye*ie,G<1?q.current=requestAnimationFrame(W):q.current=null};q.current=requestAnimationFrame(W)}catch{U.scrollTop=re}},[de,be]=d.useState(!1);d.useEffect(()=>{const U=C.current;if(!U)return;let re=0;const ae=()=>{be(!0),window.clearTimeout(re),re=window.setTimeout(()=>be(!1),T1)};return U.addEventListener("scroll",ae,{passive:!0}),()=>U.removeEventListener("scroll",ae)},[]);const H=()=>{E.current!=null&&(window.clearTimeout(E.current),E.current=null)},Y=()=>{if(H(),v(!1),w(null),R.current){try{URL.revokeObjectURL(R.current)}catch{}R.current=null}T(null)},ne=U=>{de||(H(),w(U),v(!1),E.current=window.setTimeout(async()=>{E.current=null;try{const re=await pe.getFile(U),ae=URL.createObjectURL(re);if(R.current)try{URL.revokeObjectURL(R.current)}catch{}R.current=ae,T(ae),v(!0)}catch{}},L1))},he=$.mode==="grid"?$.columns:Math.max(1,Math.floor(z/(V+En))),Ve=(U,re)=>{if($.mode!=="adaptive")return null;const ae=$.rows[U];if(!ae)return null;let ye=0,ce=null;for(const ve of ae.items){const ee=ye+ve.displayW/2,W=Math.abs(ee-re);(!ce||W<ce.dist)&&(ce={path:ve.item.path,dist:W}),ye+=ve.displayW+En}return ce?ce.path:null},qe=(U,re)=>{var ie,we,Ye,mt;if(!e.length)return null;const ae=U??e[0].path;if($.mode!=="adaptive"){const Le=j1(e,he,ae,re);return Le==="open"||Le==null?Le:((ie=e[Le])==null?void 0:ie.path)??null}const ye=O==null?void 0:O.get(ae);if(!ye)return ae;const ce=ue.get(ae)??0,ve=re.key;if(ve==="Enter")return"open";if(ve==="ArrowRight"||ve==="d")return((we=e[Math.min(e.length-1,ce+1)])==null?void 0:we.path)??ae;if(ve==="ArrowLeft"||ve==="a")return((Ye=e[Math.max(0,ce-1)])==null?void 0:Ye.path)??ae;const ee=ve==="ArrowDown"||ve==="s"?1:ve==="ArrowUp"||ve==="w"?-1:0;if(ee===0)return null;const W=ye.row+ee;if(W<0||W>=(((mt=$.rows)==null?void 0:mt.length)??0))return ae;const _=ye.center;return Ve(W,_)??ae},Ne=U=>{var re;try{(re=document.getElementById(`cell-${encodeURIComponent(U)}`))==null||re.focus()}catch{}},ft=U=>{try{pe.prefetchFile(U),pe.prefetchThumb(U)}catch{}},De=(U,re)=>{g(U),M(U);const ae=!!re.shiftKey,ye=!!(re.ctrlKey||re.metaKey);if(ae){const ce=F.current??h??t[0]??U,ve=ue.get(ce)??e.findIndex(W=>W.path===ce),ee=ue.get(U)??e.findIndex(W=>W.path===U);if(ve!==-1&&ee!==-1){const W=Math.min(ve,ee),_=Math.max(ve,ee),G=e.slice(W,_+1).map(ie=>ie.path);if(ye){const ie=new Set(t);for(const we of G)ie.add(we);r(Array.from(ie))}else r(G)}else r([U])}else if(ye){const ce=new Set(t);ce.has(U)?ce.delete(U):ce.add(U),r(Array.from(ce)),F.current=U}else r([U]),F.current=U;de||ft(U),Ne(U)},cn=(U,re)=>{var ae,ye;try{const ce=_e.has(U)&&t.length>0?t:[U];(ae=re.dataTransfer)==null||ae.setData("application/x-lenslet-paths",JSON.stringify(ce)),re.dataTransfer&&(re.dataTransfer.effectAllowed="copyMove");try{document.body.classList.add("drag-active")}catch{}const ee=re.currentTarget.querySelector(".cell-content img"),W=document.createElement("div");W.className="drag-ghost";const _=document.createElement("img");_.draggable=!1,_.alt="drag",ee&&ee.src&&(_.src=ee.src),W.appendChild(_),document.body.appendChild(W);const G=W.getBoundingClientRect().width||150;(ye=re.dataTransfer)==null||ye.setDragImage(W,Math.round(G/2),0);const ie=()=>{try{W.remove()}catch{}try{document.body.classList.remove("drag-active")}catch{}window.removeEventListener("dragend",ie),window.removeEventListener("pointerup",ie),document.removeEventListener("visibilitychange",ie)};window.addEventListener("dragend",ie),window.addEventListener("pointerup",ie),document.addEventListener("visibilitychange",ie)}catch{}};d.useEffect(()=>{const U=C.current;if(!U)return;const re=ae=>{var ie,we,Ye;const ye=qe(b,ae);if(ye==null)return;if(ae.preventDefault(),ye==="open"){b&&s(b);return}const ce=e.find(mt=>mt.path===ye);if(!ce)return;M(ce.path),g(ce.path),r([ce.path]);try{F.current=ce.path}catch{}const ve=$.mode==="grid"?Math.floor((ue.get(ce.path)??0)/Math.max(1,$.columns)):((ie=O==null?void 0:O.get(ce.path))==null?void 0:ie.row)??0,ee=U.scrollTop,W=ee+U.clientHeight,_=$.mode==="adaptive"?((we=Q==null?void 0:Q[ve])==null?void 0:we.start)??0:ve*$.rowH,G=$.mode==="adaptive"?_+(((Ye=Q==null?void 0:Q[ve])==null?void 0:Ye.height)??0):_+$.rowH;(_<ee||G>W)&&fe(U,_),Ne(ce.path)};return U.addEventListener("keydown",re),()=>{U.removeEventListener("keydown",re)}},[e,b,he,s,$,O,Q,ue]),d.useLayoutEffect(()=>{var ve;const U=C.current;if(!U||!n||!t||t.length===0)return;const re=t[0],ae=ue.get(re);if(ae==null||ae<0)return;let ye=0;if($.mode==="grid")ye=Math.floor(ae/Math.max(1,$.columns));else{let ee=0,W=$.rows.length-1;for(;ee<=W;){const _=ee+W>>1,G=$.rows[_];if(ae>=G.items[0].originalIndex&&ae<=G.items[G.items.length-1].originalIndex){ye=_;break}ae<G.items[0].originalIndex?W=_-1:ee=_+1}}const ce=$.mode==="adaptive"?((ve=Q==null?void 0:Q[ye])==null?void 0:ve.start)??0:ye*$.rowH;try{U.scrollTop=ce}catch{}},[n,$,Q]);const _e=d.useMemo(()=>new Set(t),[t]),Yt=!!(S&&N&&y);d.useEffect(()=>{var U;(U=C.current)==null||U.focus()},[]),d.useEffect(()=>{var U;if(u){try{(U=C.current)==null||U.blur()}catch{}try{M(null)}catch{}}},[u]);const ht=b?`cell-${encodeURIComponent(b)}`:void 0;return a.jsx("div",{role:"grid","aria-label":"Gallery",className:`relative h-full overflow-auto p-3 outline-none ${p?"scrollbar-hidden pr-4":"scrollbar-thin"} ${Yt?"cursor-zoom-in":""}`,ref:C,tabIndex:0,"aria-activedescendant":ht,onMouseDown:()=>{var U;return(U=C.current)==null?void 0:U.focus()},style:{"--gap":`${En}px`},children:a.jsxs("div",{className:"relative w-full",style:{height:oe.getTotalSize()},children:[B.map(U=>{var ve;let re=[],ae={},ye="";if($.mode==="adaptive"){const ee=$.rows[U.index];if(!ee)return null;re=ee.items,ae={height:ee.height,transform:`translate3d(0, ${U.start}px, 0)`,display:"flex",gap:En,paddingBottom:En},ye="absolute top-0 left-0 right-0 w-full will-change-transform"}else{const ee=U.index*$.columns;re=e.slice(ee,ee+$.columns).map(_=>({item:_,displayW:$.cellW,displayH:$.mediaH})),ae={transform:`translate3d(0, ${U.start}px, 0)`,gridTemplateColumns:`repeat(${$.columns}, minmax(0, 1fr))`,gap:En,paddingBottom:En},ye="absolute top-0 left-0 right-0 w-full grid will-change-transform"}const ce=U.index===((ve=B[0])==null?void 0:ve.index);try{if(!de)for(const{item:ee}of re)try{pe.prefetchThumb(ee.path)}catch{}}catch{}return a.jsx("div",{className:ye,role:"row",style:ae,children:re.map(({item:ee,displayW:W,displayH:_})=>{const G=!u&&(h===ee.path||_e.has(ee.path)),ie=(l==null?void 0:l.has(ee.path))??!1,we=$.mode==="adaptive"?{width:W}:{},Ye=$.mode==="adaptive"?{height:_}:{},mt=$.mode==="adaptive"?"relative rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group shrink-0":"relative aspect-[4/3] rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group";return a.jsxs("div",{id:`cell-${encodeURIComponent(ee.path)}`,className:`relative min-w-0 ${G?"outline outline-2 outline-accent outline-offset-2 rounded-[10px]":""}`,role:"gridcell","aria-selected":G,tabIndex:b===ee.path?0:-1,onFocus:()=>M(ee.path),draggable:!0,style:we,onDragStart:Le=>cn(ee.path,Le),onDragEnd:()=>{},onContextMenu:Le=>{Le.preventDefault(),Le.stopPropagation(),i&&i(Le,ee.path)},children:[a.jsxs("div",{className:mt,style:Ye,onMouseEnter:()=>{try{pe.prefetchFile(ee.path)}catch{}},onDoubleClick:()=>s(ee.path),onMouseLeave:Y,children:[a.jsx("div",{className:"cell-content absolute inset-0",children:a.jsx(a1,{path:ee.path,name:ee.name,selected:G,highlighted:ie,displayW:W,displayH:_,ioRoot:C.current,isScrolling:de,priority:ce,onClick:Le=>De(ee.path,Le)})}),a.jsx("div",{className:"absolute right-0 bottom-0 w-7 h-7 cursor-zoom-in",onMouseEnter:()=>ne(ee.path),onMouseLeave:Y,children:a.jsx("div",{className:"absolute right-0 bottom-0 h-[18px] w-[18px] flex items-center justify-center text-text select-none opacity-0 group-hover:opacity-50 hover:opacity-100 transition-all duration-[140ms]",style:{clipPath:'path("M0 9C0 4.02944 4.02944 0 9 0H18V18H0V9Z")',background:"linear-gradient(135deg, rgba(18,18,18,0.9) 0%, rgba(34,34,34,0.9) 60%, rgba(22,22,22,0.9) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",borderLeft:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 1px 2px rgba(0,0,0,0.45)",backdropFilter:"blur(1px)"},children:a.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#d9dce2]","aria-hidden":"true",style:{transform:"translate(0px,0px)"},children:[a.jsx("circle",{cx:"11",cy:"11",r:"5.4"}),a.jsx("path",{d:"M15.5 15.5 L19 19"})]})})})]}),a.jsxs("div",{className:"flex flex-col items-center text-center gap-0 mt-1 px-0.5 text-white/90",children:[a.jsx("div",{className:"text-sm leading-[18px] thumb-filename line-clamp-2 break-words hyphens-auto text-center",title:ee.name,children:(()=>{const Le=(o||"").trim();if(!Le)return ee.name;const Wn=ee.name,dn=Wn.toLowerCase().indexOf(Le.toLowerCase());if(dn===-1)return ee.name;const ze=Wn.slice(0,dn),Cn=Wn.slice(dn,dn+Le.length),rs=Wn.slice(dn+Le.length);return a.jsxs(a.Fragment,{children:[ze,a.jsx("mark",{className:"bg-accent/20 text-inherit rounded px-0.5",children:Cn}),rs]})})()}),a.jsxs("div",{className:"text-[11px] leading-[15px] opacity-70",children:[ee.w,"  ",ee.h]})]})]},ee.path)})},U.key)}),S&&N&&y&&Sd.createPortal(a.jsx("div",{className:"toolbar-offset fixed inset-0 z-[999] flex items-center justify-center pointer-events-none bg-black/20 opacity-100",children:a.jsx("img",{src:N,alt:"preview",className:"max-w-[80vw] max-h-[80vh] object-contain opacity-[0.98]"})}),document.body)]},`${c}-${he}`)})}const P1=48,I1=[.1,.24,.5,.74,.9];function F1({items:e,metricKey:t,scrollRef:n,sortDir:r}){const{orderedValues:s,numericValues:i}=d.useMemo(()=>{var C;const E=[],L=[];for(const F of e){const V=(C=F.metrics)==null?void 0:C[t],z=V==null||Number.isNaN(V)?null:V;E.push(z),z!=null&&L.push(z)}return{orderedValues:E,numericValues:L}},[e,t]),o=d.useMemo(()=>O1(i,P1),[i]),l=d.useMemo(()=>D1(i,I1),[i]),[u,c]=d.useState(0),[f,m]=d.useState(null),[p,S]=d.useState(!1),w=d.useRef(null);if(d.useEffect(()=>{const E=n.current;if(!E)return;const L=()=>{const C=Math.max(1,E.scrollHeight-E.clientHeight),F=Pr(C>0?E.scrollTop/C:0);c(F)};return L(),E.addEventListener("scroll",L,{passive:!0}),window.addEventListener("resize",L),()=>{E.removeEventListener("scroll",L),window.removeEventListener("resize",L)}},[n,e.length]),d.useEffect(()=>{m(null)},[t,e.length]),!o)return null;const N={min:o.min,max:o.max},T=f!=null?$h(f):null,y=$h(u),v=r==="desc",h=d.useMemo(()=>f==null?null:$1(s,f),[s,f]);function g(E){m(Pr(E))}function b(){m(null)}function M(E){const L=n.current;if(!L)return;const C=Math.max(0,L.scrollHeight-L.clientHeight);L.scrollTop=Pr(E)*C}function R(E){var C;const L=(C=w.current)==null?void 0:C.getBoundingClientRect();return L?Pr((E.clientY-L.top)/L.height):null}return a.jsxs("div",{className:"absolute right-0 top-3 bottom-3 w-[14px] flex items-stretch pointer-events-auto",children:[a.jsxs("svg",{ref:w,viewBox:"0 0 10 100",preserveAspectRatio:"none",className:"w-full h-full rounded bg-surface-inset border border-border/60 cursor-ns-resize",onPointerDown:E=>{var C;E.preventDefault();const L=R(E);L!=null&&(S(!0),g(L),M(L),(C=w.current)==null||C.setPointerCapture(E.pointerId))},onPointerMove:E=>{const L=R(E);if(L==null){p||b();return}g(L),p&&M(L)},onPointerUp:E=>{var L;S(!1),(L=w.current)==null||L.releasePointerCapture(E.pointerId)},onPointerLeave:()=>{p||b()},children:[z1(o.bins,"var(--border-strong)",{flip:v}),A1(l,N,{flip:v,color:"var(--muted)"}),Ah(y,{color:"var(--highlight)",strokeWidth:.8}),T!=null&&Ah(T,{color:"var(--text-secondary)",strokeWidth:.6,dashed:!0})]}),h!=null&&f!=null&&a.jsx("div",{className:"pointer-events-none absolute right-full mr-2 px-1.5 py-0.5 rounded border border-border bg-surface text-[10px] text-text shadow",style:{top:`calc(${(f*100).toFixed(2)}% - 8px)`},children:B1(h)})]})}function O1(e,t){if(!e.length)return null;const n=Math.min(...e);let r=Math.max(...e);n===r&&(r=n+1);const s=new Array(t).fill(0),i=t/(r-n);for(const o of e){const l=Math.max(0,Math.min(t-1,Math.floor((o-n)*i)));s[l]+=1}return{bins:s,min:n,max:r}}function D1(e,t){if(!e.length)return[];const n=[...e].sort((s,i)=>s-i),r=n.length-1;return t.map(s=>{const i=r*s,o=Math.floor(i),l=Math.ceil(i);if(o===l)return n[o];const u=i-o;return n[o]+(n[l]-n[o])*u})}function z1(e,t,n){const r=Math.max(1,...e),s=100/e.length,i=(n==null?void 0:n.flip)??!1;return e.map((o,l)=>{const u=Math.max(.8,o/r*10),c=(i?e.length-1-l:l)*s;return a.jsx("rect",{x:10-u,y:c,width:u,height:Math.max(.2,s-.2),fill:t,opacity:.9},`sb-${l}`)})}function A1(e,t,n){const r=(n==null?void 0:n.flip)??!1,s=n==null?void 0:n.color;return e.map((i,o)=>{const l=U1(i,t,r),u=o===2;return a.jsx("line",{x1:0,y1:l,x2:10,y2:l,stroke:s,strokeWidth:u?.8:.5,opacity:u?.9:.6,vectorEffect:"non-scaling-stroke"},`qt-${o}-${i}`)})}function Ah(e,t){return a.jsx("line",{x1:0,y1:e,x2:10,y2:e,stroke:t.color,strokeWidth:t.strokeWidth??.6,strokeDasharray:t.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function $1(e,t){if(!e.length)return null;const n=Math.round(Pr(t)*(e.length-1)),r=e[n];if(r!=null)return r;for(let s=1;s<e.length;s++){const i=n-s;if(i>=0&&e[i]!=null)return e[i];const o=n+s;if(o<e.length&&e[o]!=null)return e[o]}return null}function U1(e,t,n){const r=t.max-t.min;if(r===0)return 0;const s=Pr((e-t.min)/r);return(n?1-s:s)*100}function $h(e){return Pr(e)*100}function Pr(e){return e<0?0:e>1?1:e}function B1(e){if(e==null||Number.isNaN(e))return"-";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Ir(e,t){const[n,r]=d.useState(null),s=d.useRef(null);return d.useEffect(()=>{if(!e){if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}r(null);return}let i=!0;return e().then(o=>{if(!i)return;const l=URL.createObjectURL(o);if(s.current)try{URL.revokeObjectURL(s.current)}catch{}s.current=l,r(l)}).catch(()=>{}),()=>{i=!1}},t),d.useEffect(()=>()=>{if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}},[]),n}function W1(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[o,l]=d.useState(1),[u,c]=d.useState(!1),[f,m]=d.useState(!1),[p,S]=d.useState(!1),w=d.useRef(null),N=d.useRef(null),T=()=>{const h=w.current,g=N.current;if(!h||!g||!g.naturalWidth||!g.naturalHeight)return;const b=h.getBoundingClientRect(),M=b.width/g.naturalWidth,R=b.height/g.naturalHeight,E=Math.min(1,Math.min(M,R));l(E);const L=g.naturalWidth*E,C=g.naturalHeight*E;r((b.width-L)/2),i((b.height-C)/2)};return d.useEffect(()=>{const h=w.current;if(!h)return;const g=new ResizeObserver(()=>{try{requestAnimationFrame(()=>T())}catch{T()}});return g.observe(h),()=>g.disconnect()},[]),{scale:e,setScale:t,tx:n,setTx:r,ty:s,setTy:i,base:o,setBase:l,ready:u,setReady:c,dragging:f,setDragging:m,visible:p,setVisible:S,containerRef:w,imgRef:N,fitAndCenter:T,handleWheel:h=>{h.preventDefault();const g=h.deltaY>0?-1:1,b=1.2,M=.05,R=8,E=w.current;if(!E)return;const L=E.getBoundingClientRect(),C=h.clientX-L.left,F=h.clientY-L.top;t(V=>{const z=Math.min(R,Math.max(M,V*Math.pow(b,g))),$=z/V;return r(oe=>C-$*(C-oe)),i(oe=>F-$*(F-oe)),Number(z.toFixed(4))})},handleMouseDown:h=>{const g=w.current,b=N.current;if(!g||!b||h.target!==b)return;const R=g.getBoundingClientRect();if(h.clientX<R.left||h.clientX>R.right||h.clientY<R.top||h.clientY>R.bottom)return;h.preventDefault(),h.stopPropagation(),m(!0);const E=h.clientX,L=h.clientY,C=n,F=s,V=$=>{r(C+($.clientX-E)),i(F+($.clientY-L))},z=()=>{window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",z),m(!1)};window.addEventListener("mousemove",V),window.addEventListener("mouseup",z)}}}function H1({path:e,onClose:t,onNavigate:n,onZoomChange:r,requestedZoomPercent:s,onZoomRequestConsumed:i}){const{scale:o,setScale:l,tx:u,setTx:c,ty:f,setTy:m,base:p,ready:S,setReady:w,dragging:N,visible:T,setVisible:y,containerRef:v,imgRef:h,fitAndCenter:g,handleWheel:b,handleMouseDown:M}=W1(),R=Ir(()=>pe.getFile(e),[e]),E=Ir(()=>pe.getThumb(e),[e]),L=d.useCallback(()=>{y(!1),window.setTimeout(t,110)},[t,y]);return d.useEffect(()=>{requestAnimationFrame(()=>{var C;y(!0),(C=v.current)==null||C.focus()})},[e]),d.useEffect(()=>{const C=F=>{F.key==="Escape"?L():(F.key==="ArrowRight"||F.key==="d")&&n?n(1):(F.key==="ArrowLeft"||F.key==="a")&&n&&n(-1)};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[t,n]),d.useEffect(()=>{w(!1)},[R]),d.useEffect(()=>{r&&r(p*o*100)},[p,o,r]),d.useEffect(()=>{if(s==null)return;const C=v.current;if(!C){i&&i();return}const F=Math.max(.05,Math.min(8,s/100/Math.max(1e-6,p))),V=C.getBoundingClientRect(),z=V.width/2,$=V.height/2;l(oe=>{const B=F/oe;return c(ue=>z-B*(z-ue)),m(ue=>$-B*($-ue)),Number(F.toFixed(4))}),i&&i()},[s,p,i]),a.jsxs("div",{ref:v,role:"dialog","aria-modal":!0,"aria-label":"Image viewer",tabIndex:-1,className:`toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] flex items-start justify-start bg-panel z-viewer overflow-hidden transition-opacity duration-[110ms] ease-out cursor-grab focus:outline-none focus-visible:outline-none ${N?"cursor-grabbing select-none":""} ${T?"opacity-100":"opacity-0"}`,style:{outline:"none"},onClick:L,onWheel:b,onMouseDown:M,onKeyDown:C=>{C.key==="Tab"&&C.preventDefault()},children:[a.jsxs("button",{"aria-label":"Close",onClick:C=>{C.stopPropagation(),L()},className:"btn btn-sm absolute top-3 right-3 z-10",title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]}),E&&a.jsx("img",{src:E,alt:"thumb",className:"absolute top-0 left-0 max-w-none max-h-none object-contain pointer-events-none transition-opacity duration-[110ms] ease-out",draggable:!1,onDragStart:C=>C.preventDefault(),style:{transform:`translate(${u}px, ${f}px) scale(${p})`,transformOrigin:"0 0",opacity:S?0:.5,filter:"blur(0.25px)"}}),R&&a.jsx("img",{ref:h,src:R,alt:"viewer",className:"max-w-none max-h-none object-contain transition-opacity duration-[110ms] ease-out will-change-transform select-none",draggable:!1,onDragStart:C=>{C.preventDefault()},onLoad:C=>{g(),l(1);try{requestAnimationFrame(()=>w(!0))}catch{w(!0)}},onClick:C=>C.stopPropagation(),style:{transform:`translate(${u}px, ${f}px) scale(${p*o})`,transformOrigin:"0 0",opacity:S?.99:0,WebkitUserDrag:"none"}})]})}function Md(e){return!e||!(e instanceof HTMLElement)?!1:e.closest('input, textarea, [contenteditable="true"]')!==null}const V1=1.2,Q1=.05,K1=8;function q1(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[o,l]=d.useState(0),[u,c]=d.useState(0),[f,m]=d.useState(1),[p,S]=d.useState(1),[w,N]=d.useState(!1),T=d.useRef(null),y=d.useRef(null),v=d.useRef(null),h=d.useCallback(()=>{const R=T.current;if(!R)return;const E=R.getBoundingClientRect(),L=(C,F,V,z)=>{if(!C||!C.naturalWidth||!C.naturalHeight)return;const $=E.width/C.naturalWidth,oe=E.height/C.naturalHeight,B=Math.min(1,Math.min($,oe)),ue=C.naturalWidth*B,O=C.naturalHeight*B;F(B),V((E.width-ue)/2),z((E.height-O)/2)};L(y.current,m,r,i),L(v.current,S,l,c)},[]);d.useEffect(()=>{const R=T.current;if(!R)return;const E=new ResizeObserver(()=>{try{requestAnimationFrame(()=>h())}catch{h()}});return E.observe(R),()=>E.disconnect()},[h]);const g=d.useCallback(()=>{t(1),h()},[h]),b=d.useCallback(R=>{R.preventDefault();const E=R.deltaY>0?-1:1,L=T.current;if(!L)return;const C=L.getBoundingClientRect(),F=R.clientX-C.left,V=R.clientY-C.top;t(z=>{const $=Math.min(K1,Math.max(Q1,z*Math.pow(V1,E))),oe=$/z;return r(B=>F-oe*(F-B)),i(B=>V-oe*(V-B)),l(B=>F-oe*(F-B)),c(B=>V-oe*(V-B)),Number($.toFixed(4))})},[]),M=d.useCallback(R=>{if(R.button!==0||!T.current)return;R.preventDefault(),N(!0);const L=R.clientX,C=R.clientY,F=n,V=s,z=o,$=u,oe=ue=>{const O=ue.clientX-L,Q=ue.clientY-C;r(F+O),i(V+Q),l(z+O),c($+Q)},B=()=>{window.removeEventListener("pointermove",oe),window.removeEventListener("pointerup",B),N(!1)};window.addEventListener("pointermove",oe),window.addEventListener("pointerup",B)},[n,s,o,u]);return{scale:e,baseA:f,baseB:p,txA:n,tyA:s,txB:o,tyB:u,dragging:w,containerRef:T,imgARef:y,imgBRef:v,fitAndCenter:h,resetView:g,handleWheel:b,handlePointerDown:M}}function Y1({aItem:e,bItem:t,index:n,total:r,canPrev:s,canNext:i,onNavigate:o,onClose:l}){const u=d.useRef(null),[c,f]=d.useState(50),[m,p]=d.useState(!1),[S,w]=d.useState(!1),{scale:N,baseA:T,baseB:y,txA:v,tyA:h,txB:g,tyB:b,dragging:M,containerRef:R,imgARef:E,imgBRef:L,fitAndCenter:C,resetView:F,handleWheel:V,handlePointerDown:z}=q1(),$=(e==null?void 0:e.path)??null,oe=(t==null?void 0:t.path)??null,B=(e==null?void 0:e.name)??$??"Select an image",ue=(t==null?void 0:t.name)??oe??"Select another image";d.useEffect(()=>{requestAnimationFrame(()=>{var Y;return(Y=u.current)==null?void 0:Y.focus()})},[$,oe]),d.useEffect(()=>{F(),p(!1),w(!1)},[$,oe,F]),d.useEffect(()=>{const Y=ne=>{if(!Md(ne.target)){if(ne.key==="Escape"){ne.preventDefault(),l();return}if((ne.key==="ArrowRight"||ne.key==="d")&&i){ne.preventDefault(),o(1);return}(ne.key==="ArrowLeft"||ne.key==="a")&&s&&(ne.preventDefault(),o(-1))}};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[l,o,s,i]);const O=Ir($?()=>pe.getFile($):null,[$]),Q=Ir(oe?()=>pe.getFile(oe):null,[oe]),q=Ir($?()=>pe.getThumb($):null,[$]),fe=Ir(oe?()=>pe.getThumb(oe):null,[oe]),de=d.useCallback(Y=>Math.min(95,Math.max(5,Y)),[]),be=d.useCallback(Y=>{const ne=Y.target;ne!=null&&ne.closest(".compare-label")||ne!=null&&ne.closest(".compare-divider-hit")||z(Y)},[z]),H=d.useCallback(Y=>{const ne=R.current;if(!ne)return;Y.preventDefault(),Y.stopPropagation();const he=ne.getBoundingClientRect(),Ve=Y.currentTarget;Ve.setPointerCapture(Y.pointerId);const qe=ft=>{const De=(ft.clientX-he.left)/he.width*100;f(de(De))},Ne=ft=>{Ve.releasePointerCapture(ft.pointerId),window.removeEventListener("pointermove",qe),window.removeEventListener("pointerup",Ne)};window.addEventListener("pointermove",qe),window.addEventListener("pointerup",Ne)},[de]);return a.jsxs("div",{ref:u,role:"dialog","aria-modal":!0,"aria-label":"Compare images",tabIndex:-1,className:"toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] bg-panel z-viewer flex flex-col overflow-hidden focus:outline-none",onKeyDown:Y=>{Y.key==="Tab"&&Y.preventDefault()},children:[a.jsxs("div",{className:"compare-header flex items-center gap-3 px-3 py-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Compare"}),a.jsx("div",{className:"text-xs text-muted",children:r>=2?`${n+1}-${Math.min(n+2,r)} of ${r}`:"Select 2 images"}),a.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(-1),disabled:!s,title:"Previous (Left Arrow or A)",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Prev"]}),a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(1),disabled:!i,title:"Next (Right Arrow or D)",children:["Next",a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"btn btn-sm",onClick:l,title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]})]})]}),a.jsx("div",{className:"flex-1 min-h-0 p-3 bg-panel",children:a.jsx("div",{ref:R,className:`compare-stage ${M?"is-dragging":""}`,onWheel:V,onPointerDown:be,children:!e||!t?a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-sm text-muted",children:"Select 2 images to compare."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"compare-label left-3",children:[a.jsx("span",{className:"compare-label-tag",children:"A"}),a.jsx("span",{className:"truncate",title:e.path,children:B})]}),a.jsxs("div",{className:"compare-label right-3",children:[a.jsx("span",{className:"compare-label-tag",children:"B"}),a.jsx("span",{className:"truncate",title:t.path,children:ue})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 ${100-c}% 0 0)`},children:[q&&a.jsx("img",{src:q,alt:"thumb A",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:Y=>Y.preventDefault(),style:{transform:`translate(${v}px, ${h}px) scale(${T})`,transformOrigin:"0 0",opacity:m?0:.5}}),O&&a.jsx("img",{ref:E,src:O,alt:"compare A",className:"compare-image",draggable:!1,onDragStart:Y=>Y.preventDefault(),onLoad:()=>{C();try{requestAnimationFrame(()=>p(!0))}catch{p(!0)}},style:{transform:`translate(${v}px, ${h}px) scale(${T*N})`,transformOrigin:"0 0",opacity:m?.99:0}})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 0 0 ${c}%)`},children:[fe&&a.jsx("img",{src:fe,alt:"thumb B",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:Y=>Y.preventDefault(),style:{transform:`translate(${g}px, ${b}px) scale(${y})`,transformOrigin:"0 0",opacity:S?0:.5}}),Q&&a.jsx("img",{ref:L,src:Q,alt:"compare B",className:"compare-image",draggable:!1,onDragStart:Y=>Y.preventDefault(),onLoad:()=>{C();try{requestAnimationFrame(()=>w(!0))}catch{w(!0)}},style:{transform:`translate(${g}px, ${b}px) scale(${y*N})`,transformOrigin:"0 0",opacity:S?.99:0}})]}),a.jsxs("div",{className:"compare-divider-hit",style:{left:`${c}%`},onPointerDown:H,children:[a.jsx("div",{className:"compare-divider-line"}),a.jsx("div",{className:"compare-divider-handle"})]})]})})})]})}function Zl(){const[e,t]=d.useState(o1());return d.useEffect(()=>i1(t),[]),e}const Yi=e=>["item",e],G1={v:1,tags:[],notes:"",version:1,updated_at:"",updated_by:"web"},Jt=new Map,Zo=new Map,gc=new Map,Rd=new Map;let Uh=0;const kn=new Map,xi=new Map,X1=12e3,vc=new Set,yc=new Set;let Ld={state:"idle"},Gi=null,xc=0;function Fo(e){Ld=e;for(const t of vc)t(e)}function On(){const e=kn.size>0,t=Jt.size+Zo.size+xc;if(e){Fo({state:"error",message:"Conflict detected"});return}if(Gi){Fo({state:"error",message:Gi});return}if(t>0){Fo({state:"syncing"});return}Fo({state:"idle"})}function Td(){let e=null;for(const t of gc.values())e=e==null?t:Math.min(e,t);for(const t of Rd.values())e=e==null?t:Math.min(e,t);return e}function Tl(){const e=Td();for(const t of yc)t(e)}function _l(e){Gi=e,On()}function hv(){Gi&&(Gi=null,On())}function Bh(e){xc=Math.max(0,xc+e),On()}function J1(){Uh+=1;const e=Uh;return Rd.set(e,Date.now()),Tl(),e}function Z1(e){e!=null&&Rd.delete(e)&&Tl()}function ea(e){const t=xi.get(e);if(!t||!t.size)return;const n=kn.get(e)??null;for(const r of t)r(n)}function Wh(e){return kn.get(e)??null}function ta(e){kn.delete(e)&&(ea(e),On())}function eS(e,t){kn.set(e,t),ea(e),On()}function tS(e,t){const n=xi.get(e)??new Set;return n.add(t),xi.set(e,n),t(kn.get(e)??null),()=>{const r=xi.get(e);r&&(r.delete(t),r.size||xi.delete(e))}}function nS(e){const[t,n]=d.useState(()=>e?Wh(e):null);return d.useEffect(()=>{if(!e){n(null);return}return n(Wh(e)),tS(e,n)},[e]),t}function rS(e){return vc.add(e),e(Ld),()=>{vc.delete(e)}}function sS(){const[e,t]=d.useState(Ld);return d.useEffect(()=>rS(t),[]),e}function iS(e){return yc.add(e),e(Td()),()=>{yc.delete(e)}}function oS(){const[e,t]=d.useState(()=>Td()),[n,r]=d.useState(()=>e==null?null:Date.now()-e);return d.useEffect(()=>iS(t),[]),d.useEffect(()=>{if(e==null){r(null);return}r(Date.now()-e);const s=window.setInterval(()=>{r(Date.now()-e)},1e3);return()=>window.clearInterval(s)},[e]),n}function wc(e){const t={};return Object.prototype.hasOwnProperty.call(e,"star")&&(t.set_star=e.star??null),Object.prototype.hasOwnProperty.call(e,"notes")&&(t.set_notes=e.notes??""),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.set_tags=Array.isArray(e.tags)?e.tags:[]),t}function Sc(e){var t,n;return e.set_star!==void 0||e.set_notes!==void 0||e.set_tags!==void 0||(((t=e.add_tags)==null?void 0:t.length)??0)>0||(((n=e.remove_tags)==null?void 0:n.length)??0)>0}function hi(e){const t=[],n=new Set;for(const r of e??[]){if(typeof r!="string")continue;const s=r.trim();!s||n.has(s)||(n.add(s),t.push(s))}return t}function lS(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}function aS(e,t){if(e.set_star!==void 0&&(t.star??null)!==e.set_star||e.set_notes!==void 0&&(t.notes??"")!==(e.set_notes??""))return!1;if(e.set_tags!==void 0){const r=hi(e.set_tags),s=hi(t.tags);return lS(r,s)}const n=hi(t.tags);for(const r of hi(e.add_tags))if(!n.includes(r))return!1;for(const r of hi(e.remove_tags))if(n.includes(r))return!1;return!0}function mv(e,t,n){if(n instanceof Sn&&n.status===409){const r=n.body;if(r!=null&&r.current)return eS(e,{path:e,current:r.current,pending:t,receivedAt:new Date().toISOString()}),!0}return!1}function uS(e,t){const n=kn.get(e);if(n){if(aS(n.pending,t)){ta(e);return}kn.set(e,{...n,current:t}),ea(e),On()}}function cS(e){const t=Zl();return Xl({queryKey:Yi(e),queryFn:()=>pe.getSidecar(e),enabled:!!e,staleTime:3e4,gcTime:5*6e4,retry:2,refetchInterval:t?X1:!1,refetchIntervalInBackground:t})}function dS(e){const t=ns();return Fw({mutationFn:async({patch:n,baseVersion:r,idempotencyKey:s})=>{const i=wc(n);if(!Sc(i))return t.getQueryData(Yi(e))??G1;const o={...i,base_version:r};try{return await pe.patchSidecar(e,o,{idempotencyKey:s??qi("patch"),ifMatch:r})}catch(l){throw mv(e,i,l),l}},retry:(n,r)=>r instanceof Sn&&r.status===409?!1:n<2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),4e3),onMutate:()=>(hv(),Bh(1),{inflightId:J1()}),onSuccess:n=>{ta(e),t.setQueryData(Yi(e),n)},onError:n=>{n instanceof Sn&&n.status===409||(n instanceof Sn?_l(n.message):_l("Failed to save"))},onSettled:(n,r,s,i)=>{Bh(-1),Z1(i==null?void 0:i.inflightId)}})}const fS=6;async function Hh(e,t){if(!e.length)return;let n=0;const r=[],s=async()=>{for(;n<e.length;){const o=n++,l=e[o];try{await pv(l,t)}catch(u){r.push({path:l,error:u}),console.error(`[bulkUpdateSidecars] Failed for ${l}:`,u)}}},i=Array.from({length:Math.min(fS,e.length)},()=>s());if(await Promise.all(i),r.length===e.length)throw new Error(`All ${e.length} sidecar updates failed`)}async function pv(e,t){const n=Jt.get(e)||{};Jt.set(e,{...n,...t}),hv(),On();const r=Zo.get(e);if(r)return r;gc.set(e,Date.now()),Tl();const s=(async()=>{try{for(;Jt.has(e);){const i=Jt.get(e);if(!i)break;const o=wc(i);if(!Sc(o)){Jt.get(e)===i&&Jt.delete(e);continue}let l=1;try{l=(await pe.getSidecar(e)).version??1}catch{l=1}const u={...o,base_version:l};try{await pe.patchSidecar(e,u,{idempotencyKey:qi("patch"),ifMatch:l}),ta(e),Jt.get(e)===i&&Jt.delete(e)}catch(c){if(mv(e,o,c)){const m=Jt.get(e);if(m&&m!==i){const p=wc(m);if(Sc(p)){const S=kn.get(e);S&&(kn.set(e,{...S,pending:p}),ea(e))}}Jt.delete(e)}else c instanceof Sn?_l(c.message):_l("Failed to save");throw c}}}finally{Zo.delete(e),gc.delete(e),Tl(),On()}})();return Zo.set(e,s),On(),s}function Xa(e){const t=["B","KB","MB","GB","TB"];let n=0,r=e;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${r.toFixed(1)} ${t[n]}`}function Ja(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function hS(e,t=28){if(e.length<=t)return e;const n=Math.max(4,Math.floor((t-1)/2));return`${e.slice(0,n)}${e.slice(-n)}`}const mS=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});function pS(e){const t=e.trim();return!t||/[zZ]|[+-]\d{2}:?\d{2}$/.test(t)?t:`${t.includes("T")?t:t.replace(" ","T")}Z`}function Vh(e){if(!e)return null;const t=Date.parse(pS(e));return Number.isFinite(t)?t:null}function gS(e,t=Date.now()){const n=Math.max(0,t-e),r=Math.max(1,Math.floor(n/1e3));if(r<60)return`${r} second${r===1?"":"s"} ago`;const s=Math.floor(r/60);if(s<60)return`${s} minute${s===1?"":"s"} ago`;const i=Math.floor(s/60);return`${i} hour${i===1?"":"s"} ago`}function vS(e){return mS.format(new Date(e))}function el(e){if(Array.isArray(e))return e.map(el);if(e&&typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,el(n)]));if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")||t.startsWith('"')&&t.endsWith('"'))try{const r=JSON.parse(t);return el(r)}catch{return e}}return e}function Za(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function yS(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Qh(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}function xS(e){const t=/(\"(\\u[a-fA-F0-9]{4}|\\[^u]|[^\\"])*\"(?:\s*:)?|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\btrue\b|\bfalse\b|\bnull\b)/g;let n="",r=0;for(const s of e.matchAll(t)){const i=s.index??0,o=s[0];n+=Za(e.slice(r,i));let l="var(--json-fallback)";o.startsWith('"')&&o.trimEnd().endsWith(":")?l="var(--json-key)":o.startsWith('"')?l="var(--json-string)":/true|false|null/.test(o)?l="var(--json-literal)":l="var(--json-number)",n+=`<span style="color:${l}">${Za(o)}</span>`,r=i+o.length}return n+=Za(e.slice(r)),n}const wS=["overview","basics","metadata","notes"],Kh="lenslet.inspector.sections",qh="lenslet.inspector.metricsExpanded",eu=12,SS={overview:!0,metadata:!0,basics:!0,notes:!0};function Oo({title:e,open:t,onToggle:n,actions:r,children:s,contentClassName:i}){const[o,l]=d.useState(t),[u,c]=d.useState(t?"open":"closed");return d.useEffect(()=>{if(t){l(!0);const m=window.requestAnimationFrame(()=>c("open"));return()=>window.cancelAnimationFrame(m)}c("closing");const f=window.setTimeout(()=>{l(!1),c("closed")},140);return()=>window.clearTimeout(f)},[t]),a.jsxs("div",{className:"border-b border-border/60",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[a.jsxs("button",{type:"button",onClick:n,"aria-expanded":t,className:"flex items-center gap-2 inspector-section-title hover:text-text transition-colors",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform ${t?"rotate-90":""}`,"aria-hidden":"true",children:a.jsx("path",{d:"m9 18 6-6-6-6"})}),a.jsx("span",{children:e})]}),r]}),o&&a.jsx("div",{className:"inspector-section-body","data-state":u,"aria-hidden":!t,children:a.jsx("div",{className:i??"px-3 pb-3",children:s})})]})}function kS({path:e,selectedPaths:t=[],items:n=[],onResize:r,onStarChanged:s,sortSpec:i,onFindSimilar:o,embeddingsAvailable:l=!1,embeddingsLoading:u=!1}){const c=!!e,{data:f,isLoading:m}=cS(e??""),p=dS(e??""),S=ns(),[w,N]=d.useState(SS),T=d.useCallback(_=>{N(G=>({...G,[_]:!G[_]}))},[]),[y,v]=d.useState(!1),h=t.length>1,g=!!o&&l&&!h,b=o?l?h?"Select a single image to search.":null:u?"Loading embeddings...":"No embeddings detected.":null,[M,R]=d.useState(""),[E,L]=d.useState(""),[C,F]=d.useState(""),[V,z]=d.useState(null),[$,oe]=d.useState("idle"),[B,ue]=d.useState(!1),[O,Q]=d.useState(null),[q,fe]=d.useState({}),be=d.useMemo(()=>{const _=n.find(G=>G.path===e);return _&&_.star!==void 0?_.star:null},[n,e])??(f==null?void 0:f.star)??null,H=nS(h?null:e),Y={tags:!!(H!=null&&H.pending.set_tags),notes:(H==null?void 0:H.pending.set_notes)!==void 0,star:(H==null?void 0:H.pending.set_star)!==void 0},ne=d.useMemo(()=>{const _=new Set(t);return n.filter(G=>_.has(G.path))},[n,t]),he=d.useMemo(()=>ne.reduce((_,G)=>_+(G.size||0),0),[ne]);d.useEffect(()=>{f&&(R((f.tags||[]).join(", ")),L(f.notes||"")),F(""),z(null),oe("idle"),ue(!1)},[f==null?void 0:f.updated_at,e]);const Ve=d.useCallback(_=>{if(h&&t.length){Hh(t,_);return}if(!e)return;const G=(f==null?void 0:f.version)??1;p.mutate({patch:_,baseVersion:G,idempotencyKey:qi("patch")})},[h,t,e,f==null?void 0:f.version,p]),qe=d.useCallback(()=>{if(!H||!e)return;const _={};H.pending.set_tags!==void 0&&(_.tags=Qh(M)),H.pending.set_notes!==void 0&&(_.notes=E),H.pending.set_star!==void 0&&(_.star=be??null);const G=H.current.version??1;p.mutate({patch:_,baseVersion:G,idempotencyKey:qi("patch")})},[H,e,M,E,be,p]),Ne=d.useCallback(()=>{if(!H||!e)return;const _=H.current;R((_.tags||[]).join(", ")),L(_.notes||""),S.setQueryData(Yi(e),_),ta(e),s==null||s([e],_.star??null)},[H,e,S,s]);d.useEffect(()=>{if(!e)return;const _=G=>{if(Md(G.target))return;const ie=G.key;if(!/^[0-5]$/.test(ie))return;G.preventDefault();const we=ie==="0"?null:Number(ie);if(h&&t.length){Ve({star:we}),s==null||s(t,we);return}Ve({star:we}),s==null||s([e],we)};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[e,h,t,Ve,s]);const ft=Ir(e?()=>pe.getThumb(e):null,[e]),De=e?e.split("/").pop()||e:"",cn=d.useMemo(()=>{var G;if(De.includes("."))return De.slice(De.lastIndexOf(".")+1).toUpperCase();const _=n.find(ie=>ie.path===e);return(G=_==null?void 0:_.type)!=null&&G.includes("/")?_.type.split("/")[1].toUpperCase():""},[De,n,e]),_e=d.useMemo(()=>n.find(_=>_.path===e),[n,e]),Yt=d.useMemo(()=>e?(_e==null?void 0:_e.source)??e:"",[_e,e]),ht=d.useCallback(async()=>{if(e){oe("loading"),z(null);try{const _=await pe.getMetadata(e),G=el(_.meta),ie=JSON.stringify(G,null,2);F(ie),oe("loaded")}catch(_){const G=_ instanceof Error?_.message:"Failed to load metadata";F(G),z(G),oe("error")}}},[e]),U=d.useCallback(()=>{var _;C&&((_=navigator.clipboard)==null||_.writeText(C).then(()=>{ue(!0),setTimeout(()=>ue(!1),1200)}).catch(G=>{const ie=G instanceof Error?G.message:"Copy failed";z(ie)}))},[C]),re=d.useMemo(()=>C?xS(C):"",[C]),ae=$==="loading"?"Loading metadata":C||"PNG metadata not loaded yet.",ye=$==="loaded"&&!!C,ce=ye?"h-48":"h-24",ve=h?null:a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[C&&a.jsx("button",{className:"text-muted underline underline-offset-2 hover:text-text disabled:opacity-60 min-w-[48px] text-center",onClick:U,disabled:!C,title:"Copy metadata",children:B?"Copied":"Copy"}),a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[78px]",onClick:ht,disabled:!e||$==="loading",children:$==="loading"?"Loading":"Load meta"})]});d.useEffect(()=>{try{const _=localStorage.getItem(Kh);if(!_)return;const G=JSON.parse(_);if(!G||typeof G!="object")return;const ie={};for(const we of wS)typeof G[we]=="boolean"&&(ie[we]=G[we]);Object.keys(ie).length>0&&N(we=>({...we,...ie}))}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(Kh,JSON.stringify(w))}catch{}},[w]),d.useEffect(()=>{try{const _=localStorage.getItem(qh);_==="1"||_==="true"?v(!0):(_==="0"||_==="false")&&v(!1)}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(qh,y?"1":"0")}catch{}},[y]);const ee=d.useCallback((_,G)=>{var ie;G&&((ie=navigator.clipboard)==null||ie.writeText(G).then(()=>{Q(_),setTimeout(()=>Q(we=>we===_?null:we),1e3)}).catch(()=>{}))},[]),W=d.useCallback((_,G)=>{if(G&&!q[_]){const ie=G.offsetHeight;ie&&fe(we=>we[_]?we:{...we,[_]:ie})}},[q]);return c?a.jsxs("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:[!h&&a.jsx("div",{className:"p-3 border-b border-border flex justify-center",children:a.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border w-[220px] h-[160px] bg-panel select-none",children:[ft&&a.jsx("img",{src:ft,alt:"thumb",className:"block w-full h-full object-contain"}),!!cn&&a.jsx("div",{className:"absolute top-1.5 left-1.5 bg-surface border border-border text-text text-xs px-1.5 py-0.5 rounded-md select-none",children:cn})]})}),a.jsxs(Oo,{title:h?"Selection":"Item",open:w.overview,onToggle:()=>T("overview"),contentClassName:"px-3 pb-3 space-y-2",actions:o&&a.jsx("button",{type:"button",className:"btn btn-sm",onClick:o,disabled:!g,title:b??"Find similar",children:"Find similar"}),children:[h?a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Selected"}),a.jsxs("div",{className:"inspector-field-value",children:[t.length," files"]})]}),a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Total size"}),a.jsx("div",{className:"inspector-field-value",children:Xa(he)})]})]}):a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Filename"}),a.jsx("div",{className:"inspector-field-value break-all",title:De,children:De})]}),b&&a.jsx("div",{className:"text-[11px] text-muted",children:b})]}),a.jsxs(Oo,{title:"Basics",open:w.basics,onToggle:()=>T("basics"),children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",role:"radiogroup","aria-label":"Star rating",children:[a.jsx("span",{className:"ui-kv-label w-16 shrink-0",children:h?"Rating (all)":"Rating"}),a.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(_=>{const G=(be??0)>=_;return a.jsx("button",{className:`w-6 h-6 flex items-center justify-center rounded-lg border border-border/60 bg-transparent text-[13px] ${G?"text-star-active":"text-star-inactive"} hover:border-border hover:text-star-hover transition-colors`,onClick:()=>{const ie=be===_&&!h?null:_;h&&t.length?(s==null||s(t,ie),Hh(t,{star:ie})):e&&(s==null||s([e],ie),pv(e,{star:ie}))},title:`${_} star${_>1?"s":""} (key ${_})`,"aria-label":`${_} star${_>1?"s":""}`,"aria-pressed":be===_,children:G?"":""},_)})})]}),!h&&H&&Y.star&&a.jsxs("div",{className:"ui-banner ui-banner-danger mt-2 text-[11px] flex items-center justify-between gap-2",children:[a.jsx("span",{children:"Rating conflict."}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:qe,children:"Apply again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:Ne,children:"Keep theirs"})]})]}),!h&&_e&&a.jsxs("div",{className:"text-[12px] space-y-1.5 leading-relaxed",children:[a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ee("dimensions",`${_e.w}${_e.h}`),children:"Dimensions"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:_=>W("dimensions",_),style:q.dimensions?{minHeight:q.dimensions}:void 0,children:O==="dimensions"?"Copied":`${_e.w}${_e.h}`})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ee("size",Xa(_e.size)),children:"Size"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:_=>W("size",_),style:q.size?{minHeight:q.size}:void 0,children:O==="size"?"Copied":Xa(_e.size)})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ee("type",_e.type),children:"Type"}),a.jsx("span",{className:"ui-kv-value break-all text-right inline-block min-w-[80px]",ref:_=>W("type",_),style:q.type?{minHeight:q.type}:void 0,children:O==="type"?"Copied":_e.type})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Yt&&ee("source",Yt),children:"Source"}),a.jsx("span",{className:"ui-kv-value inspector-value-clamp break-words text-right max-w-[70%] inline-block min-w-[80px]",ref:_=>W("source",_),style:q.source?{minHeight:q.source}:void 0,title:Yt,children:O==="source"?"Copied":Yt})]}),(()=>{const _=_e.metrics||null;if(!_)return null;const G=Object.entries(_).filter(([,ze])=>ze!=null);if(!G.length)return null;const ie=(i==null?void 0:i.kind)==="metric"?i.key:null,we=[...G].sort(([ze],[Cn])=>ze.localeCompare(Cn));let Ye=we;if(ie){const ze=we.findIndex(([Cn])=>Cn===ie);ze>0&&(Ye=[we[ze],...we.slice(0,ze),...we.slice(ze+1)])}const mt=Ye.length>eu,Wn=y||!mt?Ye:Ye.slice(0,eu),dn=Ye.length-eu;return a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"ui-subsection-title mb-1",children:"Metrics"}),a.jsxs("div",{className:"space-y-1",children:[Wn.map(([ze,Cn])=>{const rs=ie===ze;return a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:`w-24 shrink-0 ${rs?"text-accent font-medium":"ui-kv-label"}`,children:ze}),a.jsx("span",{className:`ui-kv-value text-right ${rs?"text-accent font-medium":""}`,children:yS(Cn)})]},ze)}),mt&&a.jsx("button",{type:"button",className:"text-[11px] text-muted underline underline-offset-2 hover:text-text",onClick:()=>v(ze=>!ze),"aria-expanded":y,children:y?"Show less":`+${dn} more`})]})]})})()]})]}),!h&&a.jsxs(Oo,{title:"Metadata",open:w.metadata,onToggle:()=>T("metadata"),actions:ve,children:[a.jsx("pre",{className:`ui-code-block ${ce} overflow-auto whitespace-pre-wrap`,children:ye?a.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:re}}):ae}),V&&a.jsx("div",{className:"text-[11px] text-danger mt-1 break-words",children:V})]}),a.jsxs(Oo,{title:"Notes & Tags",open:w.notes,onToggle:()=>T("notes"),contentClassName:"px-3 pb-3 space-y-2",children:[!h&&H&&(Y.tags||Y.notes)&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Conflicting edits detected."}),a.jsx("div",{className:"text-[11px] text-muted mt-0.5",children:"Your changes were not saved because this item was updated elsewhere."}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:qe,children:"Apply my changes again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:Ne,children:"Keep theirs"})]})]}),a.jsx("textarea",{className:"ui-textarea inspector-input w-full scrollbar-thin",placeholder:"Add notes",value:E,onChange:_=>L(_.target.value),onBlur:()=>{Ve({notes:E})},"aria-label":h?"Notes for selected items":"Notes"}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:h?"Tags (apply to all, comma-separated)":"Tags (comma-separated)"}),a.jsx("input",{className:"ui-input inspector-input w-full",placeholder:"tag1, tag2",value:M,onChange:_=>R(_.target.value),onBlur:()=>{Ve({tags:Qh(M)})},"aria-label":h?"Tags for selected items":"Tags"})]})]}),a.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 right-[calc(var(--right)-3px)] hover:bg-accent/20",onMouseDown:r})]}):a.jsx("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:a.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 right-[calc(var(--right)-3px)] hover:bg-accent/20",onMouseDown:r})})}function CS({open:e,embeddings:t,rejected:n=[],selectedPath:r,embeddingsLoading:s=!1,embeddingsError:i,onClose:o,onSearch:l}){const[u,c]=d.useState(""),[f,m]=d.useState("path"),[p,S]=d.useState(""),[w,N]=d.useState(""),[T,y]=d.useState("50"),[v,h]=d.useState(""),[g,b]=d.useState(null),[M,R]=d.useState(!1),E=d.useRef(null),L=d.useRef(null),C=d.useMemo(()=>t.find(B=>B.name===u)??t[0]??null,[t,u]);d.useEffect(()=>{e&&(b(null),t.length>0&&!t.some(B=>B.name===u)&&c(t[0].name),r?(m("path"),S(r)):(m("vector"),S("")))},[e,t,u,r]),d.useEffect(()=>{if(!e)return;const B=f==="vector"?L.current:E.current,ue=window.requestAnimationFrame(()=>B==null?void 0:B.focus());return()=>window.cancelAnimationFrame(ue)},[e,f]);const F=d.useCallback(async()=>{if(b(null),!t.length){b("No embeddings available for similarity search.");return}if(!C){b("Select an embedding to search.");return}const B=p.trim(),ue=w.trim(),O=Number(T);if(!Number.isFinite(O)||O<=0){b("Top K must be a positive number.");return}const Q=Math.min(1e3,Math.max(1,Math.floor(O))),q=v.trim()===""?null:Number(v);if(q!=null&&!Number.isFinite(q)){b("Min score must be a valid number.");return}if(f==="path"&&!B){b("Select an image path for the query.");return}if(f==="vector"&&!ue){b("Paste a base64 vector for the query.");return}const fe={embedding:C.name,query_path:f==="path"?B:null,query_vector_b64:f==="vector"?ue:null,top_k:Q,min_score:q};R(!0);try{await l(fe),o()}catch(de){de instanceof Sn||de instanceof Error?b(de.message):b("Failed to run similarity search.")}finally{R(!1)}},[t.length,C,p,w,T,v,f,l,o]);d.useEffect(()=>{if(!e)return;const B=ue=>{if(ue.key==="Escape"){ue.preventDefault(),o();return}(ue.ctrlKey||ue.metaKey)&&ue.key==="Enter"&&(ue.preventDefault(),F())};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[e,o,F]);const V=d.useCallback(()=>{var B;r&&(m("path"),S(r),(B=E.current)==null||B.focus())},[r]);if(!e)return null;const z=t.map(B=>({value:B.name,label:B.name})),$=n.length>0,oe=n.slice(0,3);return a.jsx("div",{className:"fixed inset-0 z-[var(--z-overlay)] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",onClick:B=>{B.target===B.currentTarget&&o()},children:a.jsxs("div",{className:"w-full max-w-2xl rounded-lg border border-border bg-panel shadow-[0_20px_50px_rgba(0,0,0,0.55)]",onClick:B=>B.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Find similar",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-text",children:"Find similar"}),a.jsx("div",{className:"text-xs text-muted",children:"Search with embeddings"})]}),a.jsx("button",{className:"btn btn-sm",onClick:o,"aria-label":"Close",children:"Close"})]}),a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[i&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:i}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Embedding"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(dc,{value:(C==null?void 0:C.name)??"",onChange:c,options:z,placeholder:s?"Loading embeddings...":"Select embedding",disabled:!t.length,triggerClassName:"min-w-[180px]"}),C&&a.jsxs("span",{className:"text-xs text-muted",children:[C.dimension," dims, ",C.metric,", ",C.dtype]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Query mode"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",className:`btn btn-sm ${f==="path"?"btn-active":""}`,onClick:()=>m("path"),"aria-pressed":f==="path",children:"Selected image"}),a.jsx("button",{type:"button",className:`btn btn-sm ${f==="vector"?"btn-active":""}`,onClick:()=>m("vector"),"aria-pressed":f==="vector",children:"Vector input"})]})]}),f==="path"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Image path"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:E,type:"text",className:"input w-full",value:p,onChange:B=>S(B.target.value),placeholder:r?"Selected image path":"Select an image first"}),a.jsx("button",{type:"button",className:"btn btn-sm",onClick:V,disabled:!r,title:r?"Use selected image":"Select an image first",children:"Use selected"})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Vector (base64 float32)"}),a.jsx("textarea",{ref:L,className:"ui-textarea w-full font-mono text-[11px]",rows:5,value:w,onChange:B=>N(B.target.value),placeholder:"Paste base64-encoded float32 vector"}),a.jsx("div",{className:"text-[11px] text-muted",children:"Base64 of little-endian float32. Length must match embedding dimension."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Top K"}),a.jsx("input",{type:"number",min:1,max:1e3,step:1,className:"input ui-number w-full",value:T,onChange:B=>y(B.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Min score"}),a.jsx("input",{type:"number",step:.01,className:"input ui-number w-full",value:v,onChange:B=>h(B.target.value),placeholder:"Optional"})]})]}),$&&a.jsxs("div",{className:"ui-banner text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Skipped columns"}),a.jsxs("div",{className:"mt-1 space-y-1 text-muted",children:[oe.map(B=>a.jsxs("div",{children:[B.name,": ",B.reason]},B.name)),n.length>oe.length&&a.jsxs("div",{children:["+",n.length-oe.length," more"]})]})]}),g&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:g})]}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-border",children:[a.jsx("div",{className:"text-xs text-muted",children:C?`Metric: ${C.metric}`:"Metric: cosine"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:o,disabled:M,children:"Cancel"}),a.jsx("button",{className:"btn btn-sm btn-active",onClick:F,disabled:M||!t.length,children:M?"Searching...":"Find similar"})]})]})]})})}const bS=e=>["folder",e],ES=15e3;function gv(e){const t=Zl();return Xl({queryKey:bS(e),queryFn:()=>pe.getFolder(e),staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),5e3),refetchOnWindowFocus:!1,refetchInterval:t?ES:!1,refetchIntervalInBackground:t})}const NS=(e,t)=>["search",e,t],jS=2e4;function MS(e,t){const n=Zl();return Xl({enabled:!!e.trim(),queryKey:NS(e,t),queryFn:()=>pe.search(e,t),staleTime:3e3,gcTime:6e4,placeholderData:r=>r,retry:1,refetchInterval:n?jS:!1,refetchIntervalInBackground:n})}const RS=()=>["embeddings"];function LS(){return Xl({queryKey:RS(),queryFn:pe.getEmbeddings,staleTime:6e4,gcTime:5*6e4,retry:1,refetchOnWindowFocus:!1})}const TS=/^[\/@a-zA-Z0-9._\-\/]{1,512}$/,_S=[".jpg",".jpeg",".png",".webp"];function on(e){try{const t=decodeURI(e||""),r=(t.startsWith("/")?t:`/${t}`).replace(/\/{2,}/g,"/"),s=r.length>1?r.replace(/\/$/,""):r;return TS.test(s)?s:"/"}catch{return"/"}}function Yh(){return(window.location.hash||"").replace(/^#/,"")}function Gh(e){const t=on(e),n=`#${encodeURI(t)}`;window.location.hash!==n&&(window.location.hash=n)}function Do(e){const t=on(e),n=`#${encodeURI(t)}`;if(window.location.hash!==n){const r=`${window.location.pathname}${window.location.search}${n}`;window.history.replaceState(window.history.state,"",r)}}function PS(e){const n=on(e).toLowerCase();return _S.some(r=>n.endsWith(r))}function _d(e,t){const n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,""),s=[n,r].filter(Boolean).join("/");return s.startsWith("/")?s:`/${s}`}function Xh(e){const n=on(e).split("/").filter(Boolean);return n.length<=1?"/":"/"+n.slice(0,-1).join("/")}function IS(e){return e.endsWith("/_trash_")}const FS=new Set([0,1,2,3,4,5]),Pd=new Set(["<","<=",">",">="]),OS=/^\d{4}-\d{2}-\d{2}$/;function DS(e,t){return!t||!t.and.length?e:e.filter(n=>zS(n,t.and))}function zS(e,t){for(const n of t)if(!AS(e,n))return!1;return!0}function AS(e,t){var n,r,s,i,o,l,u;if("stars"in t){const c=t.stars;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsIn"in t){const c=t.starsIn.values;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsNotIn"in t){const c=t.starsNotIn.values;if(!c||!c.length)return!0;const f=e.star??0;return!c.includes(f)}if("nameContains"in t){const c=(n=t.nameContains.value)==null?void 0:n.trim();return c?(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("nameNotContains"in t){const c=(r=t.nameNotContains.value)==null?void 0:r.trim();return c?!(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("commentsContains"in t){const c=(s=t.commentsContains.value)==null?void 0:s.trim();if(!c)return!0;const f=e.comments??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("commentsNotContains"in t){const c=(i=t.commentsNotContains.value)==null?void 0:i.trim();if(!c)return!0;const f=e.comments??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("urlContains"in t){const c=(o=t.urlContains.value)==null?void 0:o.trim();if(!c)return!0;const f=e.source??e.url??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("urlNotContains"in t){const c=(l=t.urlNotContains.value)==null?void 0:l.trim();if(!c)return!0;const f=e.source??e.url??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("dateRange"in t){const{from:c,to:f}=t.dateRange;if(!c&&!f)return!0;if(!e.addedAt)return!1;const m=Date.parse(e.addedAt);if(Number.isNaN(m))return!1;const p=em(c,!1),S=em(f,!0);return!(p!=null&&m<p||S!=null&&m>S)}if("widthCompare"in t){const{op:c,value:f}=t.widthCompare;if(!Number.isFinite(f))return!0;const m=e.w;return!Number.isFinite(m)||m<=0?!1:tm(m,c,f)}if("heightCompare"in t){const{op:c,value:f}=t.heightCompare;if(!Number.isFinite(f))return!0;const m=e.h;return!Number.isFinite(m)||m<=0?!1:tm(m,c,f)}if("metricRange"in t){const{key:c,min:f,max:m}=t.metricRange,p=(u=e.metrics)==null?void 0:u[c];return!(p==null||p<f||p>m)}return!0}function kc(e){if(!e||typeof e!="object")return null;const t=e.and;if(!Array.isArray(t))return null;const n=[];for(const r of t){const s=ek(r);s&&n.push(s)}return{and:n}}function Jh(e){var r;const t=e.and.find(s=>"stars"in s),n=e.and.find(s=>"starsIn"in s);return(r=n==null?void 0:n.starsIn)!=null&&r.values?n.starsIn.values:(t==null?void 0:t.stars)??[]}function tu(e,t){return vv(e,t)}function $S(e){var n;const t=e.and.find(r=>"starsIn"in r);return((n=t==null?void 0:t.starsIn)==null?void 0:n.values)??[]}function vv(e,t){const n=Ri(t),r=e.and.filter(s=>!("starsIn"in s)&&!("stars"in s));return n.length?{and:[{starsIn:{values:n}},...r]}:{and:r}}function US(e){var n;const t=e.and.find(r=>"starsNotIn"in r);return((n=t==null?void 0:t.starsNotIn)==null?void 0:n.values)??[]}function yv(e,t){const n=Ri(t),r=e.and.filter(s=>!("starsNotIn"in s));return n.length?{and:[{starsNotIn:{values:n}},...r]}:{and:r}}function BS(e){var n;const t=e.and.find(r=>"nameContains"in r);return((n=t==null?void 0:t.nameContains)==null?void 0:n.value)??null}function xv(e,t){const n=Ht(t),r=e.and.filter(s=>!("nameContains"in s));return n?{and:[{nameContains:{value:n}},...r]}:{and:r}}function WS(e){var n;const t=e.and.find(r=>"nameNotContains"in r);return((n=t==null?void 0:t.nameNotContains)==null?void 0:n.value)??null}function wv(e,t){const n=Ht(t),r=e.and.filter(s=>!("nameNotContains"in s));return n?{and:[{nameNotContains:{value:n}},...r]}:{and:r}}function HS(e){var n;const t=e.and.find(r=>"commentsContains"in r);return((n=t==null?void 0:t.commentsContains)==null?void 0:n.value)??null}function Sv(e,t){const n=Ht(t),r=e.and.filter(s=>!("commentsContains"in s));return n?{and:[{commentsContains:{value:n}},...r]}:{and:r}}function VS(e){var n;const t=e.and.find(r=>"commentsNotContains"in r);return((n=t==null?void 0:t.commentsNotContains)==null?void 0:n.value)??null}function kv(e,t){const n=Ht(t),r=e.and.filter(s=>!("commentsNotContains"in s));return n?{and:[{commentsNotContains:{value:n}},...r]}:{and:r}}function QS(e){var n;const t=e.and.find(r=>"urlContains"in r);return((n=t==null?void 0:t.urlContains)==null?void 0:n.value)??null}function Cv(e,t){const n=Ht(t),r=e.and.filter(s=>!("urlContains"in s));return n?{and:[{urlContains:{value:n}},...r]}:{and:r}}function KS(e){var n;const t=e.and.find(r=>"urlNotContains"in r);return((n=t==null?void 0:t.urlNotContains)==null?void 0:n.value)??null}function bv(e,t){const n=Ht(t),r=e.and.filter(s=>!("urlNotContains"in s));return n?{and:[{urlNotContains:{value:n}},...r]}:{and:r}}function qS(e){const t=e.and.find(n=>"dateRange"in n);return(t==null?void 0:t.dateRange)??null}function Cc(e,t){const n=Pl((t==null?void 0:t.from)??null),r=Pl((t==null?void 0:t.to)??null),s=e.and.filter(i=>!("dateRange"in i));return!n&&!r?{and:s}:{and:[{dateRange:{...n?{from:n}:{},...r?{to:r}:{}}},...s]}}function YS(e){const t=e.and.find(n=>"widthCompare"in n);return(t==null?void 0:t.widthCompare)??null}function tl(e,t){const n=e.and.filter(r=>!("widthCompare"in r));return!t||!Number.isFinite(t.value)||!Pd.has(t.op)?{and:n}:{and:[{widthCompare:{op:t.op,value:t.value}},...n]}}function GS(e){const t=e.and.find(n=>"heightCompare"in n);return(t==null?void 0:t.heightCompare)??null}function nl(e,t){const n=e.and.filter(r=>!("heightCompare"in r));return!t||!Number.isFinite(t.value)||!Pd.has(t.op)?{and:n}:{and:[{heightCompare:{op:t.op,value:t.value}},...n]}}function XS(e,t){const n=e.and.find(r=>"metricRange"in r&&r.metricRange.key===t);return(n==null?void 0:n.metricRange)??null}function JS(e,t,n){const r=e.and.filter(s=>!("metricRange"in s&&s.metricRange.key===t));return n?{and:[{metricRange:{key:t,min:n.min,max:n.max}},...r]}:{and:r}}function ZS(e){const t=kc(e);return t?t.and.length:0}function ek(e){var t,n,r,s,i,o,l,u;if(!e||typeof e!="object")return null;if("stars"in e){const c=Ri(e.stars);return c.length?{starsIn:{values:c}}:null}if("starsIn"in e){const c=Ri((t=e.starsIn)==null?void 0:t.values);return c.length?{starsIn:{values:c}}:null}if("starsNotIn"in e){const c=Ri((n=e.starsNotIn)==null?void 0:n.values);return c.length?{starsNotIn:{values:c}}:null}if("nameContains"in e){const c=Ht((r=e.nameContains)==null?void 0:r.value);return c?{nameContains:{value:c}}:null}if("nameNotContains"in e){const c=Ht((s=e.nameNotContains)==null?void 0:s.value);return c?{nameNotContains:{value:c}}:null}if("commentsContains"in e){const c=Ht((i=e.commentsContains)==null?void 0:i.value);return c?{commentsContains:{value:c}}:null}if("commentsNotContains"in e){const c=Ht((o=e.commentsNotContains)==null?void 0:o.value);return c?{commentsNotContains:{value:c}}:null}if("urlContains"in e){const c=Ht((l=e.urlContains)==null?void 0:l.value);return c?{urlContains:{value:c}}:null}if("urlNotContains"in e){const c=Ht((u=e.urlNotContains)==null?void 0:u.value);return c?{urlNotContains:{value:c}}:null}if("dateRange"in e){const c=e.dateRange,f=Pl((c==null?void 0:c.from)??null),m=Pl((c==null?void 0:c.to)??null);return!f&&!m?null:{dateRange:{...f?{from:f}:{},...m?{to:m}:{}}}}if("widthCompare"in e){const c=e.widthCompare,f=Zh(c==null?void 0:c.op,c==null?void 0:c.value);return f?{widthCompare:f}:null}if("heightCompare"in e){const c=e.heightCompare,f=Zh(c==null?void 0:c.op,c==null?void 0:c.value);return f?{heightCompare:f}:null}if("metricRange"in e){const c=e.metricRange;if(!c||typeof c!="object")return null;const f=typeof c.key=="string"?c.key:"",m=bc(c.min),p=bc(c.max);return!f||m==null||p==null||m>p?null:{metricRange:{key:f,min:m,max:p}}}return null}function Ri(e){if(!Array.isArray(e))return[];const t=[],n=new Set;for(const r of e){const s=typeof r=="number"?r:typeof r=="string"?Number(r):NaN;!Number.isInteger(s)||!FS.has(s)||n.has(s)||(n.add(s),t.push(s))}return t}function Ht(e){if(typeof e!="string")return null;const t=e.trim();return t||null}function Pl(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=Date.parse(t);return Number.isNaN(n)?null:t}function Zh(e,t){if(typeof e!="string"||!Pd.has(e))return null;const n=bc(t);return n==null?null:{op:e,value:n}}function em(e,t){if(!e)return null;const n=e.trim();if(!n)return null;const r=Date.parse(n);return Number.isNaN(r)?null:t&&OS.test(n)?r+24*60*60*1e3-1:r}function tm(e,t,n){switch(t){case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;default:return!0}}function bc(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function nm(e){return e.addedAt?Date.parse(e.addedAt):0}function Il(e,t){return e.name.localeCompare(t.name)}function tk(e,t){const n=nm(e),r=nm(t);return n===r?Il(e,t):n-r}function nk(e){return(t,n)=>{var i,o;const r=(i=t.metrics)==null?void 0:i[e],s=(o=n.metrics)==null?void 0:o[e];return r==null&&s==null?Il(t,n):r==null?1:s==null?-1:r===s?Il(t,n):r-s}}function rm(e,t){return DS(e,t)}function rk(e){let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function sk(e,t){const n=rk(t||1),r=[...e];for(let s=r.length-1;s>0;s-=1){const i=Math.floor(n()*(s+1));[r[s],r[i]]=[r[i],r[s]]}return r}function ik(e,t,n){if(t.kind==="builtin"&&t.key==="random"){const i=n??Date.now();return sk(e,i)}let r=tk;t.kind==="metric"?r=nk(t.key):t.key==="name"&&(r=Il);const s=[...e].sort(r);return t.dir==="desc"?s.reverse():s}const sm="leftW.folders",im="leftW.metrics",ok="leftW",om="rightW";function lk(e,t){const[n,r]=d.useState(240),[s,i]=d.useState(320),[o,l]=d.useState(240),u=t==="metrics"?s:n,c=d.useRef(u),f=d.useRef(o);return d.useEffect(()=>{c.current=u},[u]),d.useEffect(()=>{f.current=o},[o]),d.useEffect(()=>{try{const S=window.localStorage,w=Number(S.getItem(sm)??S.getItem(ok));Number.isFinite(w)&&w>0&&r(w);const N=Number(S.getItem(im));Number.isFinite(N)&&N>0&&i(N);const T=Number(S.getItem(om));Number.isFinite(T)&&T>0&&l(T)}catch{}},[]),{leftW:u,rightW:o,onResizeLeft:S=>{S.preventDefault();const w=e.current;if(!w)return;const N=w.getBoundingClientRect(),T=t==="metrics"?im:sm;let y=c.current;const v=g=>{const b=g.clientX-N.left,M=200,R=Math.max(M,N.width-f.current-200),E=Math.min(Math.max(b,M),R);y=E,t==="metrics"?i(E):r(E)},h=()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",h);try{window.localStorage.setItem(T,String(y))}catch{}};window.addEventListener("mousemove",v),window.addEventListener("mouseup",h)},onResizeRight:S=>{S.preventDefault();const w=e.current;if(!w)return;const N=w.getBoundingClientRect(),T=v=>{const h=v.clientX-N.left,g=N.width-h,b=240,M=Math.max(b,N.width-c.current-200),R=Math.min(Math.max(g,b),M);l(R)},y=()=>{window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",y);try{window.localStorage.setItem(om,String(f.current))}catch{}};window.addEventListener("mousemove",T),window.addEventListener("mouseup",y)}}}function ak({x:e,y:t,items:n}){return a.jsx("div",{className:"dropdown-panel fixed",role:"menu",style:{left:e,top:t,minWidth:180},onClick:r=>r.stopPropagation(),children:n.map((r,s)=>a.jsxs("button",{className:`dropdown-item w-full ${r.danger?"text-danger hover:text-danger":""}`,role:"menuitem","aria-disabled":r.disabled,disabled:r.disabled,onClick:i=>{i.stopPropagation(),r.disabled||r.onClick()},children:[r.icon&&a.jsx("span",{className:"shrink-0",children:r.icon}),a.jsx("span",{children:r.label})]},s))})}function lm(e){return JSON.stringify(e,null,2)}function am(e){const t=s=>'"'+s.replaceAll('"','""')+'"',n="path,folder,name,star,type,size,width,height,tags,notes",r=e.map(s=>{const i=(s.tags||[]).join(" "),o=s.notes||"";return[s.path,s.folder,s.name,String(s.star??""),s.type??"",s.size??"",s.width??"",s.height??"",i,o].map(l=>t(String(l))).join(",")});return[n,...r].join(`
`)}function um(e){return e.map(t=>{const n=t.path.split("/").filter(Boolean);n.pop();const r=n.length?`/${n.join("/")}`:"/";return{path:t.path,folder:r,name:t.name,star:t.star??null,type:t.type,size:t.size,width:t.w,height:t.h}})}function uk(e,t=250){const[n,r]=rl.useState(e);return rl.useEffect(()=>{const s=window.setTimeout(()=>r(e),Math.max(0,t));return()=>window.clearTimeout(s)},[e,t]),n}const Ev="application/x-lenslet-paths",ck='[role="treeitem"].drop-target';function cm(e){var n;return Array.from(((n=e.dataTransfer)==null?void 0:n.types)||[]).includes(Ev)}function dk(e){document.querySelectorAll(ck).forEach(t=>{t!==e&&t.classList.remove("drop-target")})}function dm(e){dk(e),e.classList.add("drop-target")}function fm(e){return e.startsWith("/")?e:`/${e}`}function fk({path:e,isLeaf:t}){const n=ns(),r=d.useCallback(l=>{cm(l)&&(l.preventDefault(),t&&dm(l.currentTarget))},[t]),s=d.useCallback(l=>{!t||!cm(l)||(l.preventDefault(),dm(l.currentTarget))},[t]),i=d.useCallback(l=>{const u=l.currentTarget,c=document.elementFromPoint(l.clientX,l.clientY);c&&u.contains(c)||u.classList.remove("drop-target")},[]),o=d.useCallback(async l=>{const u=l.dataTransfer;if(!u)return;l.preventDefault(),l.currentTarget.classList.remove("drop-target");const c=u.getData(Ev),m=(c?JSON.parse(c):[]).filter(Boolean);if(!m.length)return;let p=m[0].split("/").slice(0,-1).join("/")||"/";p=fm(p);const S=fm(e);try{for(const w of m)await pe.moveFile(w,S);n.invalidateQueries({queryKey:["folder",p]}),n.invalidateQueries({queryKey:["folder",S]}),n.setQueryData(["folder",p],w=>!w||!Array.isArray(w.items)?w:{...w,items:w.items.filter(N=>!m.includes(N.path))})}catch{}},[e,n]);return{onDragOver:r,onDragEnter:s,onDragLeave:i,onDrop:o}}const hk='[role="tree"] [role="treeitem"]';function mk(){return Array.from(document.querySelectorAll(hk))}function pk(e,t){var i;const n=mk(),r=n.findIndex(o=>o===e);if(r===-1)return;let s=r;t==="ArrowDown"?s=Math.min(n.length-1,r+1):t==="ArrowUp"?s=Math.max(0,r-1):t==="Home"?s=0:t==="End"&&(s=n.length-1),(i=n[s])==null||i.focus()}function gk({path:e,isLeaf:t,isExpanded:n,setExpanded:r,onOpen:s}){return d.useCallback(i=>{if(i.key==="Enter"){i.preventDefault(),s(e);return}if(i.key==="ArrowRight"){!t&&!n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.add(e),l}));return}if(i.key==="ArrowLeft"){!t&&n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.delete(e),l}));return}(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="Home"||i.key==="End")&&(i.preventDefault(),pk(i.currentTarget,i.key))},[e,t,n,r,s])}function vk({current:e,roots:t,data:n,onOpen:r,onResize:s,onContextMenu:i,className:o,showResizeHandle:l=!0}){const[u,c]=d.useState(new Set(["/"])),f=d.useRef(new Map),m=d.useRef(new Map),p=d.useCallback(async(w,N)=>{const T=on(w||"/"),y=f.current,v=m.current,h=y.get(T);if(h!==void 0)return h;const g=v.get(T);if(g)return g;const b=(async()=>{let M=0;const R=new Set,E=[{path:T,index:N}];for(;E.length;){const L=E.pop(),{path:C,index:F}=L;if(R.has(C))continue;R.add(C);let V=F;if(!V)try{V=await pe.getFolder(C)}catch(z){console.warn(`Failed to count folder ${C}:`,z);continue}M+=V.items.length;for(const z of V.dirs)z.kind==="branch"&&E.push({path:_d(C,z.name)})}return y.set(T,M),v.delete(T),M})();return v.set(T,b),b},[]);d.useEffect(()=>{const w=e.split("/").filter(Boolean),N=["/"];let T="";for(const y of w)T=T?`${T}/${y}`:`/${y}`,N.push(T);c(y=>{const v=new Set(y);for(const h of N)v.add(h);return v})},[e]);const S=o??"h-full overflow-auto bg-panel scrollbar-thin";return a.jsxs("div",{className:S,children:[a.jsx("div",{className:"p-1",role:"tree","aria-label":"Folders",children:t.map(w=>a.jsx(Nv,{path:w.path,label:w.label,depth:0,current:e,expanded:u,setExpanded:c,onOpen:r,onContextMenu:i,initial:n,getSubtreeCount:p},w.path))}),l&&a.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 left-[calc(var(--left)-3px)] hover:bg-accent/20",onMouseDown:s})]})}function Nv({path:e,label:t,depth:n,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,initial:u,getSubtreeCount:c}){var R,E;const f=s.has(e),{data:m}=gv(e),p=u&&e===u.path?u:m,S=r===e,w=(((R=p==null?void 0:p.dirs)==null?void 0:R.length)??0)===0,[N,T]=d.useState(p?p.items.length:null),y=gk({path:e,isLeaf:w,isExpanded:f,setExpanded:i,onOpen:o}),{onDragOver:v,onDragEnter:h,onDragLeave:g,onDrop:b}=fk({path:e,isLeaf:w}),M=L=>{L.stopPropagation(),i(C=>{const F=new Set(C);return F.has(e)?F.delete(e):F.add(e),F})};return d.useEffect(()=>{let L=!1;if(!p){T(null);return}return T(p.items.length),c(e,p).then(C=>{L||T(C)}).catch(C=>{L||console.warn(`Failed to compute subtree count for ${e}:`,C)}),()=>{L=!0}},[p,e,c]),a.jsxs("div",{children:[a.jsxs("div",{className:`flex items-center gap-1.5 py-0.5 px-2 rounded-md cursor-pointer min-h-[28px] outline-none transition-colors duration-75 ${S?"bg-accent/20 text-accent font-medium":"hover:bg-white/5 text-text"}`,role:"treeitem","aria-level":n+1,"aria-expanded":w?void 0:f,"aria-selected":S,tabIndex:S?0:-1,style:{paddingLeft:8+n*14},onClick:()=>o(e),onContextMenu:L=>{L.preventDefault(),L.stopPropagation(),l&&l(L,e)},onKeyDown:y,onDragOver:v,onDragEnter:h,onDragLeave:g,onDrop:b,children:[a.jsx("span",{className:"w-4 text-center opacity-60 hover:opacity-100 text-[10px]",onClick:M,children:f?"":""}),a.jsx("span",{className:"flex-1 overflow-hidden truncate text-sm",title:t,children:hS(t,28)}),N!==null&&a.jsx("span",{className:"text-[10px] opacity-50 bg-white/5 border border-white/5 rounded px-1.5 min-w-[24px] text-center",children:N})]}),f&&((E=p==null?void 0:p.dirs)==null?void 0:E.map(L=>a.jsx(Nv,{path:_d(e,L.name),label:L.name,depth:n+1,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,getSubtreeCount:c},L.name)))]})}const Fr=40,yk=12,hm=[5,4,3,2,1],mm=["<","<=",">",">="];function xk({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l,onChangeFilters:u}){const c=r&&r.length?a.jsx(wk,{selectedItems:r,metricKeys:n}):null,f=a.jsx(Sk,{filters:o,onChangeFilters:u});return n.length?a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,a.jsx(kk,{items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}),f]}):a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,f,a.jsx("div",{className:"p-4 text-sm text-muted",children:"No metrics found in this dataset."})]})}function wk({selectedItems:e,metricKeys:t}){const n=d.useMemo(()=>{if(!e.length)return null;const u=new Map;for(const m of e){const p=m.metrics;if(p)for(const[S,w]of Object.entries(p)){if(w==null||Number.isNaN(w))continue;const N=u.get(S);N?N.push(w):u.set(S,[w])}}return u.size?{entries:(t.length?t.filter(m=>u.has(m)):Array.from(u.keys()).sort()).map(m=>{const p=u.get(m)??[],S=Math.min(...p),w=Math.max(...p),N=p.reduce((T,y)=>T+y,0)/Math.max(1,p.length);return{key:m,value:p[0],min:S,max:w,avg:N,count:p.length}}),totalItems:e.length}:null},[e,t]);if(!n)return null;const{entries:r,totalItems:s}=n,i=r.slice(0,yk),o=r.length-i.length,l=s>1;return a.jsxs("div",{className:"ui-card",children:[a.jsxs("div",{className:"ui-card-header",children:[a.jsx("div",{className:"ui-section-title",children:"Selected metrics"}),a.jsxs("div",{className:"text-[11px] text-muted",children:[s," item",s===1?"":"s"]})]}),a.jsxs("div",{className:"space-y-1 text-[12px]",children:[i.map(u=>a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-muted w-28 shrink-0 truncate",title:u.key,children:u.key}),a.jsxs("span",{className:"font-mono text-text text-right tabular-nums",children:[l?`${_t(u.min)}  ${_t(u.max)}`:_t(u.value),l&&a.jsxs("span",{className:"text-[11px] text-muted ml-2",children:["avg ",_t(u.avg),u.count!==s?`  ${u.count}/${s}`:""]})]})]},u.key)),o>0&&a.jsxs("div",{className:"text-[11px] text-muted",children:["+",o," more"]})]})]})}function Sk({filters:e,onChangeFilters:t}){const n=d.useMemo(()=>$S(e),[e]),r=d.useMemo(()=>US(e),[e]),s=d.useMemo(()=>BS(e)??"",[e]),i=d.useMemo(()=>WS(e)??"",[e]),o=d.useMemo(()=>HS(e)??"",[e]),l=d.useMemo(()=>VS(e)??"",[e]),u=d.useMemo(()=>QS(e)??"",[e]),c=d.useMemo(()=>KS(e)??"",[e]),f=d.useMemo(()=>qS(e)??{},[e]),m=d.useMemo(()=>Sm(f.from),[f.from]),p=d.useMemo(()=>Sm(f.to),[f.to]),S=d.useMemo(()=>YS(e),[e]),w=d.useMemo(()=>GS(e),[e]),[N,T]=d.useState((S==null?void 0:S.op)??">="),[y,v]=d.useState((w==null?void 0:w.op)??">=");d.useEffect(()=>{S!=null&&S.op&&T(S.op)},[S==null?void 0:S.op]),d.useEffect(()=>{w!=null&&w.op&&v(w.op)},[w==null?void 0:w.op]);const h=(g,b)=>{const M=new Set(n),R=new Set(r);g==="include"?M.has(b)?M.delete(b):(M.add(b),R.delete(b)):R.has(b)?R.delete(b):(R.add(b),M.delete(b));let E=vv(e,Array.from(M));E=yv(E,Array.from(R)),t(E)};return a.jsxs("div",{className:"ui-card",children:[a.jsx("div",{className:"ui-section-title mb-3",children:"Attributes"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Rating"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Include"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[hm.map(g=>{const b=n.includes(g);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${b?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>h("include",g),"aria-pressed":b,title:`Include ${g} star${g>1?"s":""}`,children:[g,""]},`stars-in-${g}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${n.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>h("include",0),"aria-pressed":n.includes(0),title:"Include unrated",children:"None"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Exclude"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[hm.map(g=>{const b=r.includes(g);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${b?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>h("exclude",g),"aria-pressed":b,title:`Exclude ${g} star${g>1?"s":""}`,children:[g,""]},`stars-out-${g}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${r.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>h("exclude",0),"aria-pressed":r.includes(0),title:"Exclude unrated",children:"None"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Filename"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:s,placeholder:"e.g. draft",onChange:g=>t(xv(e,g.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:i,placeholder:"e.g. v1",onChange:g=>t(wv(e,g.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Comments"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:o,placeholder:"e.g. hero",onChange:g=>t(Sv(e,g.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:l,placeholder:"e.g. todo",onChange:g=>t(kv(e,g.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"URL"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:u,placeholder:"e.g. s3://bucket",onChange:g=>t(Cv(e,g.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:c,placeholder:"e.g. http://",onChange:g=>t(bv(e,g.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Date Added"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"From"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:m,onChange:g=>t(Cc(e,{from:g.target.value||null,to:f.to??null}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"To"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:p,onChange:g=>t(Cc(e,{from:f.from??null,to:g.target.value||null}))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Dimensions"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Width"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:N,onChange:g=>{const b=g.target.value;T(b),S&&t(tl(e,{op:b,value:S.value}))},children:mm.map(g=>a.jsx("option",{value:g,children:g},`w-${g}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:S?String(S.value):"",min:0,placeholder:"px",onChange:g=>{const b=g.target.value;if(!b){t(tl(e,null));return}const M=Number(b);Number.isFinite(M)&&t(tl(e,{op:N,value:M}))}})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Height"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:y,onChange:g=>{const b=g.target.value;v(b),w&&t(nl(e,{op:b,value:w.value}))},children:mm.map(g=>a.jsx("option",{value:g,children:g},`h-${g}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:w?String(w.value):"",min:0,placeholder:"px",onChange:g=>{const b=g.target.value;if(!b){t(nl(e,null));return}const M=Number(b);Number.isFinite(M)&&t(nl(e,{op:y,value:M}))}})]})]})]})]})]})]})}function kk({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}){const[u,c]=d.useState(!1),f=s&&n.includes(s)?s:n[0];return a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("label",{className:"ui-label",children:"Metric"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-[11px]",onClick:()=>c(m=>!m),"aria-pressed":u,children:u?"Show one":"Show all"})]}),u?a.jsx("div",{className:"ui-input ui-input-readonly w-full flex items-center text-xs",children:"All metrics"}):a.jsx("select",{className:"ui-select w-full",value:f,onChange:m=>i(m.target.value),children:n.map(m=>a.jsx("option",{value:m,children:m},m))})]}),u?a.jsx("div",{className:"space-y-3",children:n.map(m=>a.jsx(pm,{metricKey:m,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l,showTitle:!0},m))}):f?a.jsx(pm,{metricKey:f,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l}):a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]})}function pm({items:e,filteredItems:t,metricKey:n,selectedItems:r,filters:s,onChangeRange:i,showTitle:o=!1}){const l=d.useMemo(()=>gm(e,n),[e,n]),u=d.useMemo(()=>nu(l,Fr),[l]),c=d.useMemo(()=>gm(t,n),[t,n]),f=d.useMemo(()=>u?nu(c,Fr,u):null,[c,u]),m=XS(s,n),[p,S]=d.useState(null),[w,N]=d.useState(!1),T=d.useRef(null),y=d.useRef(null),v=d.useRef(!1),h=d.useRef(null),[g,b]=d.useState(null),[M,R]=d.useState(""),[E,L]=d.useState(""),[C,F]=d.useState(null),V=p??m,z=u?{min:u.min,max:u.max}:null,$=d.useMemo(()=>{var Y;if(!(r!=null&&r.length))return[];const H=[];for(const ne of r){const he=(Y=ne.metrics)==null?void 0:Y[n];he==null||Number.isNaN(he)||H.push(he)}return H},[r,n]),oe=$.length===1?$[0]:null,B=d.useMemo(()=>!u||$.length<2?null:nu($,Fr,u),[$,u]);d.useEffect(()=>{if(!m||!z){C!=="min"&&R(m?Kn(m.min):""),C!=="max"&&L(m?Kn(m.max):"");return}if(C!=="min"){const H=as(m.min,z.min)?"":Kn(m.min);R(H)}if(C!=="max"){const H=as(m.max,z.max)?"":Kn(m.max);L(H)}},[m,z,C]),d.useEffect(()=>{b(null)},[n,z==null?void 0:z.min,z==null?void 0:z.max]);const ue=H=>{var he;if(!z)return null;const Y=(he=h.current)==null?void 0:he.getBoundingClientRect();if(!Y)return null;const ne=Id((H.clientX-Y.left)/Y.width);return z.min+(z.max-z.min)*ne},O=(H,Y)=>{if(!z)return;const ne=T.current??H,he=ym(ne,H);S(he),Y&&i(n,he)},Q=H=>{var ne;if(!z)return;H.preventDefault();const Y=ue(H);Y!=null&&(N(!0),S(null),T.current=Y,y.current=H.clientX,v.current=!1,b(Y),(ne=h.current)==null||ne.setPointerCapture(H.pointerId))},q=H=>{const Y=ue(H);if(Y==null){w||b(null);return}if(b(Y),w){const ne=y.current;if(!v.current&&ne!=null){if(Math.abs(H.clientX-ne)<4)return;v.current=!0}v.current&&O(Y,!1)}},fe=H=>{var ne;if(!w)return;N(!1),(ne=h.current)==null||ne.releasePointerCapture(H.pointerId);const Y=ue(H);v.current&&Y!=null?(b(Y),O(Y,!0)):m&&i(n,null),T.current=null,y.current=null,v.current=!1,setTimeout(()=>S(null),0)},de=(H,Y)=>{if(!z)return;const ne=xm(H),he=xm(Y);if(!ne.valid||!he.valid){ne.valid||R(m?Kn(m.min):""),he.valid||L(m?Kn(m.max):"");return}if(ne.value==null&&he.value==null){i(n,null);return}const Ve=ne.value??z.min,qe=he.value??z.max,Ne=wm(Ve,z.min,z.max),ft=wm(qe,z.min,z.max),De=ym(Ne,ft);if(as(De.min,z.min)&&as(De.max,z.max)){i(n,null);return}i(n,De)};if(!u||!z)return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]});const be=$.length;return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mb-2 tabular-nums",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{children:["Population: ",u.count]}),a.jsxs("span",{children:["Filtered: ",(f==null?void 0:f.count)??0]}),be>1&&a.jsxs("span",{className:"text-text",children:["Selected: ",be]})]}),oe!=null&&a.jsxs("span",{className:"text-text",children:["Selected: ",_t(oe)]})]}),a.jsxs("svg",{ref:h,viewBox:`0 0 ${Fr} 100`,preserveAspectRatio:"none",className:"w-full h-28 cursor-crosshair rounded-md bg-surface-inset",onPointerDown:Q,onPointerMove:q,onPointerUp:fe,onPointerLeave:()=>b(null),children:[ru(u.bins,"#2e3a4b"),f&&ru(f.bins,"#3a8fff"),B&&ru(B.bins,"#f59e0b",{opacity:.55}),V&&Ck(V,z),oe!=null&&vm(oe,z,{color:"var(--highlight)",strokeWidth:.7}),g!=null&&vm(g,z,{color:"rgba(255,255,255,0.75)",strokeWidth:.5,dashed:!0})]}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mt-2 tabular-nums",children:[a.jsx("span",{children:_t(z==null?void 0:z.min)}),a.jsxs("div",{className:"flex flex-col items-center text-center leading-tight",children:[V?a.jsx("span",{className:"text-text",children:as(V.min,z.min)?` ${_t(V.max)}`:as(V.max,z.max)?` ${_t(V.min)}`:`${_t(V.min)}  ${_t(V.max)}`}):g!=null?a.jsxs("span",{className:"text-text",children:["Cursor: ",_t(g)]}):a.jsx("span",{children:"Drag to filter"}),V&&g!=null&&a.jsxs("span",{className:"text-[11px] text-muted",children:["Cursor: ",_t(g)]})]}),a.jsx("span",{children:_t(z==null?void 0:z.max)})]}),a.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-2 mt-3 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Min"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:M,placeholder:Kn(z.min),onFocus:()=>F("min"),onBlur:()=>{F(null),de(M,E)},onChange:H=>R(H.target.value),onKeyDown:H=>{H.key==="Enter"&&H.currentTarget.blur()}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Max"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:E,placeholder:Kn(z.max),onFocus:()=>F("max"),onBlur:()=>{F(null),de(M,E)},onChange:H=>L(H.target.value),onKeyDown:H=>{H.key==="Enter"&&H.currentTarget.blur()}})]}),a.jsx("button",{className:"btn btn-xs btn-ghost text-muted hover:text-text",onClick:()=>i(n,null),children:"Clear"})]})]})}function nu(e,t,n){if(!e.length)return null;const r=n?n.min:Math.min(...e);let s=n?n.max:Math.max(...e);r===s&&(s=r+1);const i=new Array(t).fill(0),o=t/(s-r);for(const l of e){const u=Math.max(0,Math.min(t-1,Math.floor((l-r)*o)));i[u]+=1}return{bins:i,min:r,max:s,count:e.length}}function gm(e,t){var r;const n=[];for(const s of e){const i=(r=s.metrics)==null?void 0:r[t];i==null||Number.isNaN(i)||n.push(i)}return n}function ru(e,t,n){const r=Math.max(1,...e),s=(n==null?void 0:n.opacity)??.9;return e.map((i,o)=>{const l=i/r*100;return a.jsx("rect",{x:o+.05,y:100-l,width:.9,height:l,fill:t,opacity:s},`${t}-${o}`)})}function Ck(e,t){const n=(e.min-t.min)/(t.max-t.min),r=(e.max-t.min)/(t.max-t.min),s=Fr*Id(Math.min(n,r)),i=Fr*Math.abs(r-n);return a.jsx("rect",{x:s,y:0,width:Math.max(.5,i),height:100,fill:"rgba(255,255,255,0.08)",stroke:"rgba(255,255,255,0.4)",strokeWidth:.4})}function vm(e,t,n){const r=Id((e-t.min)/(t.max-t.min)),s=Fr*r;return a.jsx("line",{x1:s,y1:0,x2:s,y2:100,stroke:n.color,strokeWidth:n.strokeWidth??.5,strokeDasharray:n.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function ym(e,t){return e<t?{min:e,max:t}:{min:t,max:e}}function Id(e){return e<0?0:e>1?1:e}function _t(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Kn(e){if(!Number.isFinite(e))return"";const t=e.toString();return t.includes("e")?e.toFixed(6):t}function xm(e){const t=e.trim();if(!t)return{value:null,valid:!0};const n=Number(t);return Number.isFinite(n)?{value:n,valid:!0}:{value:null,valid:!1}}function wm(e,t,n){return e<t?t:e>n?n:e}function as(e,t){const n=Math.max(1,Math.abs(e),Math.abs(t));return Math.abs(e-t)<=1e-6*n}function Sm(e){return e?e.length>=10?e.slice(0,10):e:""}const bk=[{label:"Root",path:"/"}];function Ek({leftTool:e,onToolChange:t,compareEnabled:n,compareActive:r,onOpenCompare:s,views:i,activeViewId:o,onActivateView:l,onSaveView:u,current:c,data:f,onOpenFolder:m,onContextMenu:p,items:S,filteredItems:w,metricKeys:N,selectedItems:T,selectedMetric:y,onSelectMetric:v,filters:h,onChangeRange:g,onChangeFilters:b,onResize:M}){const R=e==="folders"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",E=e==="metrics"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",L=r?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover";return a.jsxs("div",{className:"app-left-panel col-start-1 row-start-2 relative border-r border-border bg-panel overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-y-0 left-0 w-10 border-r border-border flex flex-col items-center gap-2 py-3 bg-surface-overlay",children:[a.jsx("button",{className:R,title:"Folders","aria-label":"Folders","aria-pressed":e==="folders",onClick:()=>t("folders"),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M3 7.5h6l2-2h10a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2z"})})}),a.jsx("button",{className:E,title:"Metrics / Filters","aria-label":"Metrics and Filters","aria-pressed":e==="metrics",onClick:()=>t("metrics"),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]})}),a.jsx("div",{className:"w-6 h-px bg-border/70 my-1"}),a.jsx("button",{className:`${L} ${n?"":"opacity-40 cursor-not-allowed"}`,title:n?"Compare selected images":"Compare (select 2+)","aria-label":"Compare selected images","aria-pressed":r,"aria-disabled":!n,disabled:!n,onClick:()=>{n&&s()},children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("rect",{x:"3",y:"4",width:"8",height:"16",rx:"1"}),a.jsx("rect",{x:"13",y:"4",width:"8",height:"16",rx:"1"})]})})]}),a.jsx("div",{className:"ml-10 h-full",children:e==="folders"?a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"px-2 py-2 border-b border-border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Smart Folders"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:u,title:"Save current view as Smart Folder",children:"+ New"})]}),i.length?a.jsx("div",{className:"flex flex-col gap-1",children:i.map(C=>{const F=C.id===o;return a.jsx("button",{className:`text-left px-2 py-1.5 rounded-md text-sm ${F?"bg-accent-muted text-accent":"hover:bg-hover text-text"}`,onClick:()=>l(C),children:C.name},C.id)})}):a.jsx("div",{className:"text-xs text-muted px-1 py-1.5",children:"No saved Smart Folders yet."})]}),a.jsx(vk,{current:c,roots:bk,data:f,onOpen:m,onContextMenu:p,className:"flex-1 min-h-0 overflow-auto scrollbar-thin",showResizeHandle:!1})]}):a.jsx(xk,{items:S,filteredItems:w,metricKeys:N,selectedItems:T,selectedMetric:y,onSelectMetric:v,filters:h,onChangeRange:g,onChangeFilters:b})}),a.jsx("div",{className:"toolbar-offset absolute bottom-0 right-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20",onMouseDown:M})]})}function Nk({persistenceEnabled:e,recentSummary:t,onDismissRecent:n,onCloseRecent:r,browserZoomPercent:s}){const i=t?` (${t.names.join(", ")}${t.extra?` +${t.extra}`:""})`:"",o=!!(t!=null&&t.names.length),l=typeof s=="number"?s:null,u=l!==null&&Math.abs(l-100)>=2;return!e||u||!!t?a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-col gap-2",children:[!e&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("span",{className:"font-semibold",children:"Not persisted."})," Workspace is read-only; edits stay in memory until restart."]}),u&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs",children:[a.jsxs("span",{className:"font-semibold",children:["Browser zoom ",Math.round(l),"%."]})," For best results, set it to 100% so UI elements stay in correct proportions."]}),t&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex items-center justify-between gap-3",children:[a.jsxs("span",{children:["Recent updates: ",t.count," item",t.count===1?"":"s",o?i:""]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"text-muted hover:text-text transition-colors",onClick:n,"aria-label":"Hide recent activity until refresh",children:"Hide until refresh"}),a.jsx("button",{className:"text-muted hover:text-text transition-colors text-base leading-none",onClick:r,"aria-label":"Close recent activity",children:""})]})]})]})}):a.jsx(a.Fragment,{})}const km=6e3,jk=15*6e4,Mk=1e4,Rk=24*60*6e4,We={sortKey:"sortKey",sortDir:"sortDir",sortSpec:"sortSpec",starFilters:"starFilters",filterAst:"filterAst",selectedMetric:"selectedMetric",viewMode:"viewMode",gridItemSize:"gridItemSize",leftOpen:"leftOpen",rightOpen:"rightOpen"};function Lk(e){switch(e){case"live":return"Live";case"reconnecting":return"Reconnecting";case"offline":return"Offline";case"connecting":case"idle":default:return"Connecting"}}function Tk(e){return e.isOffline?"offline":e.isUnstable?"unstable":e.recentEditActive?"recent":e.editingActive?"editing":"live"}function jv(e,t){return t-e<Rk?gS(e,t):vS(e)}function _k(e,t){if(!e.length)return null;const n=new Set,r=[];for(const i of e)n.has(i.path)||(n.add(i.path),r.push(i.path));const s=r.slice(0,2).map(i=>{const o=t.find(l=>l.path===i);return(o==null?void 0:o.name)??i.split("/").pop()??i});return{count:r.length,names:s,extra:Math.max(0,r.length-s.length)}}function Pk(e,t,n){return e.length?e.map(r=>{const s=t.find(l=>l.path===r.path),i=(s==null?void 0:s.name)??r.path.split("/").pop()??r.path,o=jv(r.ts,n);return{path:r.path,label:i,timeLabel:o}}):[]}function Ik(e,t){return e?t instanceof Sn||t instanceof Error?t.message:"Failed to load embeddings.":null}function Fk(e,t,n,r){return e||t?n:r}function Ok(e,t,n,r,s,i){return e?n:t||i==="/"?r:s}function Dk(){var nf,rf,sf;const[e,t]=d.useState("/"),[n,r]=d.useState(""),[s,i]=d.useState([]),[o,l]=d.useState(!1),[u,c]=d.useState(null),[f,m]=d.useState(null),[p,S]=d.useState(!1),[w,N]=d.useState(0),[T,y]=d.useState(0),[v,h]=d.useState(null),[g,b]=d.useState(100),[M,R]=d.useState(null),[E,L]=d.useState(()=>({filters:{and:[]},sort:{kind:"builtin",key:"added",dir:"desc"},selectedMetric:void 0})),[C,F]=d.useState(()=>Date.now()),[V,z]=d.useState("adaptive"),[$,oe]=d.useState(220),[B,ue]=d.useState(!0),[O,Q]=d.useState(!0),[q,fe]=d.useState("folders"),[de,be]=d.useState([]),[H,Y]=d.useState(null),[ne,he]=d.useState(null),[Ve,qe]=d.useState(null),[Ne,ft]=d.useState({}),De=d.useRef(null),cn=d.useRef(null),_e=d.useRef(null),Yt=d.useRef(null),ht=d.useRef(!1),U=d.useRef(!1),re=d.useRef(null),ae=d.useRef(new Map),ye=d.useRef(new Map),ce=d.useRef(null),{leftW:ve,rightW:ee,onResizeLeft:W,onResizeRight:_}=lk(De,q),[G,ie]=d.useState(!1),[we,Ye]=d.useState(null),mt=ns(),Le=sS(),Wn=Zl(),dn=oS(),[ze,Cn]=d.useState("idle"),[rs,Fd]=d.useState({}),[ei,Mv]=d.useState([]),[Od,Rv]=d.useState([]),[Dd,Lv]=d.useState(null),[Tv,_v]=d.useState(!1),[Pv,zd]=d.useState(new Set),na=d.useRef(new Map),[Hn,Iv]=d.useState(null),[Ad,Fv]=d.useState(null),[Ov,ra]=d.useState(!1),[ti,sa]=d.useState(()=>Date.now()),[Dv,zv]=d.useState(!0);d.useEffect(()=>{const x=P=>{const I=on(P),D=PS(I)?I:null,X=D?Xh(I):I;D?(m(D),i([D])):(m(null),ht.current=!1),t(le=>le===X?le:(y(J=>J+1),X))};x(Yh());const j=()=>x(Yh());return window.addEventListener("hashchange",j),()=>window.removeEventListener("hashchange",j)},[]),d.useEffect(()=>()=>{for(const x of na.current.values())window.clearTimeout(x);na.current.clear()},[]),d.useEffect(()=>{if(Ad==null){ra(!1);return}ra(!0);const x=window.setTimeout(()=>ra(!1),km);return()=>window.clearTimeout(x)},[Ad]),d.useEffect(()=>{if(Hn==null)return;sa(Date.now());const x=window.setInterval(()=>sa(Date.now()),1e4);return()=>window.clearInterval(x)},[Hn]);const{data:Be,refetch:ia,isLoading:qk,isError:Yk}=gv(e),Gt=u!==null,br=!Gt&&n.trim().length>0,$d=uk(n,250),Ud=d.useMemo(()=>$d.trim().replace(/\s+/g," "),[$d]),lo=MS(br?Ud:"",e),ss=LS(),Bd=((nf=ss.data)==null?void 0:nf.embeddings)??[],Av=((rf=ss.data)==null?void 0:rf.rejected)??[],$v=Bd.length>0,Uv=Ik(ss.isError,ss.error),oa=d.useMemo(()=>Jh(E.filters),[E.filters]),At=d.useMemo(()=>{var j;return(br?((j=lo.data)==null?void 0:j.items)??[]:(Be==null?void 0:Be.items)??[]).map(P=>({...P,star:Ne[P.path]!==void 0?Ne[P.path]:P.star}))},[br,lo.data,Be,Ne]),Wd=d.useMemo(()=>{var P;const x=new Map;for(const I of At)x.set(I.path,I);const j=((P=lo.data)==null?void 0:P.items)??[];for(const I of j){if(x.has(I.path))continue;const D=Ne[I.path]!==void 0?Ne[I.path]:I.star;x.set(I.path,{...I,star:D})}return x},[At,lo.data,Ne]),fn=d.useMemo(()=>u?u.items.map(x=>{const j=Wd.get(x.path);return j||Hk(x.path,Ne[x.path])}):[],[u,Wd,Ne]),Qe=d.useMemo(()=>{if(u)return rm(fn,E.filters);const x=rm(At,E.filters);return ik(x,E.sort,C)},[u,fn,At,E.filters,E.sort,C]),ni=u?fn.length:At.length,la=Qe.length,Lt=d.useMemo(()=>Qe.map(x=>x.path),[Qe]),Hd=d.useMemo(()=>new Set(s),[s]),Bv=d.useMemo(()=>{if(!s.length)return[];const x=u?fn:At,j=new Map(x.map(I=>[I.path,I])),P=new Map(Qe.map(I=>[I.path,I]));return s.map(I=>j.get(I)??P.get(I)).filter(I=>!!I)},[s,u,fn,At,Qe]),Tt=d.useMemo(()=>Qe.filter(x=>Hd.has(x.path)),[Qe,Hd]),ao=Math.max(0,Tt.length-2),Er=Math.min(w,ao),Wv=Tt[Er]??null,Hv=Tt[Er+1]??null,Vv=Er>0,Qv=Er<Tt.length-2,ri=Tt.length>=2,Kv=u?fn:At,si=u?null:E.sort.kind==="metric"?E.sort.key:null,Vd=d.useMemo(()=>si?Qe.some(x=>{var P;const j=(P=x.metrics)==null?void 0:P[si];return j!=null&&!Number.isNaN(j)}):!1,[Qe,si]);d.useEffect(()=>{N(x=>x>ao?ao:x)},[ao]);const Qd=d.useCallback(x=>{zd(D=>{if(D.has(x))return D;const X=new Set(D);return X.add(x),X});const j=na.current,P=j.get(x);P&&window.clearTimeout(P);const I=window.setTimeout(()=>{zd(D=>{if(!D.has(x))return D;const X=new Set(D);return X.delete(x),X}),j.delete(x)},km);j.set(x,I)},[]),aa=d.useCallback(x=>{const j=Date.now(),I=Vh(x)??j,D=I>j?j:I;Iv(X=>X==null?D:X>D?X:D),Fv(j),sa(j)},[]),ua=d.useCallback((x,j,P)=>{const I=Date.now(),D=Vh(P)??I;Rv(X=>{const le=X.filter(te=>te.path!==x);return[{path:x,ts:D,kind:j},...le].slice(0,10)})},[]),ca=d.useCallback((x,j)=>{const P=Date.now();Mv(I=>{const D=I.filter(le=>le.path!==x);return[{path:x,ts:P,kind:j},...D].slice(0,6)}),Qd(x)},[Qd]),da=d.useCallback(x=>{const j=Object.prototype.hasOwnProperty.call(x,"star"),P=x.metrics!==void 0,I=x.comments!==void 0;if(!j&&!P&&!I)return;const D=le=>{if(le.path!==x.path)return le;let J=le;return j&&le.star!==x.star&&(J={...J,star:x.star??null}),P&&(J={...J,metrics:x.metrics??null}),I&&le.comments!==x.comments&&(J={...J,comments:x.comments??""}),J},X=le=>{if(!le)return le;let J=!1;const te=le.items.map(me=>{const Ae=D(me);return Ae!==me&&(J=!0),Ae});return J?{...le,items:te}:le};mt.setQueriesData({predicate:({queryKey:le})=>Array.isArray(le)&&le[0]==="folder"},X),mt.setQueriesData({predicate:({queryKey:le})=>Array.isArray(le)&&le[0]==="search"},X)},[mt]),fa=d.useCallback(async x=>{const j=on(x||"/"),P=ae.current,I=ye.current,D=P.get(j);if(D!==void 0)return D;const X=I.get(j);if(X)return X;const le=(async()=>{const J=[j],te=new Set;let me=0;for(;J.length;){const Ae=J.pop();if(!te.has(Ae)){te.add(Ae);try{const Nr=await pe.getFolder(Ae);me+=Nr.items.length;for(const wa of Nr.dirs)wa.kind==="branch"&&J.push(_d(Ae,wa.name))}catch(Nr){console.warn(`Failed to count folder ${Ae}:`,Nr)}}}return P.set(j,me),I.delete(j),me})();return I.set(j,le),le},[]);d.useEffect(()=>{let x=!1;const j=on(e||"/");return(async()=>{const I=fa("/"),D=j==="/"?I:fa(j),[X,le]=await Promise.all([I,D]);x||(qe(X),he(le))})().catch(I=>console.warn("Failed to compute folder counts:",I)),()=>{x=!0}},[e,fa]),d.useEffect(()=>{t1();const x=r1(P=>{if(P.type==="presence"){const X=P.data;if(!(X!=null&&X.gallery_id))return;Fd(le=>({...le,[X.gallery_id]:X}));return}const I=P.data;if(!(I!=null&&I.path))return;const D=I.path;if(P.type==="item-updated"){const X=P.data,le={v:1,tags:X.tags??[],notes:X.notes??"",star:X.star??null,version:X.version??1,updated_at:X.updated_at??"",updated_by:X.updated_by??"server"};mt.setQueryData(Yi(D),le),da({path:D,star:X.star??null,metrics:X.metrics,comments:X.notes??""}),uS(D,le),ca(D,"item-updated"),ua(D,"item-updated",X.updated_at),aa(X.updated_at),ft(J=>{if(J[D]===void 0)return J;const te={...J};return delete te[D],te})}else if(P.type==="metrics-updated"){const X=P.data;da({path:D,metrics:X.metrics}),ca(D,"metrics-updated"),ua(D,"metrics-updated",X.updated_at),aa(X.updated_at)}}),j=s1(Cn);return()=>{x(),j(),n1()}},[ca,ua,mt,da,aa]),d.useEffect(()=>{let x=!1;const j=on(e||"/"),P=async()=>{try{const D=await pe.postPresence(j);!x&&(D!=null&&D.gallery_id)&&Fd(X=>({...X,[D.gallery_id]:D}))}catch{}};P();const I=window.setInterval(P,3e4);return()=>{x=!0,window.clearInterval(I)}},[e]),d.useEffect(()=>{let x=!1;return pe.getHealth().then(j=>{var I;if(x)return;const P=((I=j==null?void 0:j.labels)==null?void 0:I.enabled)??!0;zv(P)}).catch(()=>{}),()=>{x=!0}},[]);const qv=d.useMemo(()=>{const x=u?fn:At,j={0:0,1:0,2:0,3:0,4:0,5:0};for(const P of x){const I=Ne[P.path]??P.star??0;j[String(I)]=(j[String(I)]||0)+1}return j},[u,fn,At,Ne]),Vn=d.useMemo(()=>{const x=new Set;let j=0;const P=u?fn:At;for(const I of P){const D=I.metrics;if(D)for(const X of Object.keys(D))x.add(X);if(j+=1,j>=250&&x.size>0)break}return Array.from(x).sort()},[u,fn,At]);d.useEffect(()=>{Gt||Vn.length&&L(x=>{const j=x.selectedMetric&&Vn.includes(x.selectedMetric)?x.selectedMetric:Vn[0];return j===x.selectedMetric?x:{...x,selectedMetric:j}})},[Vn,Gt]),d.useEffect(()=>{Gt||E.sort.kind==="metric"&&(Vn.includes(E.sort.key)||L(x=>({...x,sort:{kind:"builtin",key:"added",dir:x.sort.dir}})))},[Vn,E.sort,Gt]);const uo=d.useMemo(()=>ZS(E.filters),[E.filters]),ha=ne??ni,Yv=Ve??ha,Kd=Gt||br||uo>0,co=rs[e],Gv=Le.state==="syncing"?"Syncing":Le.state==="error"?Le.message?`Not saved  ${Le.message}`:"Not saved  retry":"All changes saved",Xv=Lk(ze),ma=Hn!=null,Jv=d.useMemo(()=>!ma||Hn==null?"No edits yet.":jv(Hn,ti),[ma,Hn,ti]),qd=Hn==null?null:Math.max(0,ti-Hn),Zv=((co==null?void 0:co.editing)??0)>0||qd!=null&&qd<jk,ey=dn!=null&&dn>Mk,ty=ze==="offline"||ze==="connecting"||ze==="idle",ny=ze==="reconnecting"||Wn||Le.state==="error"||ey,ry=Tk({isOffline:ty,isUnstable:ny,recentEditActive:Ov,editingActive:Zv}),sy=d.useMemo(()=>_k(ei,Qe),[ei,Qe]),pa=d.useMemo(()=>ei.length?ei.reduce((x,j)=>Math.max(x,j.ts),0):null,[ei]),iy=Tv||Dd!=null&&pa!=null&&pa<=Dd?null:sy,oy=d.useMemo(()=>Pk(Od,Qe,ti),[Qe,ti,Od]),ly=Fk(Gt,Kd,la,ha),ay=Ok(Gt,Kd,ni,ha,Yv,e),Yd=d.useMemo(()=>{if(!u)return null;if(u.queryPath){const x=u.queryPath.split("/").filter(Boolean);return x.length?x[x.length-1]:u.queryPath}return u.queryVector?"Vector query":null},[u]),Gd=d.useMemo(()=>u?uo>0?`${la} of ${ni}`:`${ni}`:null,[u,uo,la,ni]),pt=d.useCallback(x=>{L(j=>({...j,filters:x(j.filters)}))},[]),uy=d.useCallback(x=>{L(j=>({...j,filters:x}))},[]),fo=d.useCallback(()=>{pt(x=>tu(x,[]))},[pt]),Xd=d.useCallback(()=>{L(x=>({...x,filters:{and:[]}}))},[]),cy=d.useCallback(()=>{c(null);const x=ce.current;ce.current=null,x&&x.length?(i(x),y(j=>j+1)):i([])},[]),dy=d.useCallback(async x=>{!u&&ce.current===null&&(ce.current=s);const j=await pe.searchEmbeddings(x);if(c({embedding:j.embedding,queryPath:x.query_path??null,queryVector:x.query_vector_b64??null,topK:x.top_k??50,minScore:x.min_score??null,items:j.items,createdAt:Date.now()}),j.items.length){const P=x.query_path&&j.items.some(I=>I.path===x.query_path)?x.query_path:j.items[0].path;i([P]),y(I=>I+1)}else i([])},[u,s]),ga=d.useCallback((x,j)=>{pt(P=>JS(P,x,j))},[pt]),Jd=d.useMemo(()=>{var j,P,I,D,X,le;const x=[];for(const J of E.filters.and)if("stars"in J){const te=J.stars||[];if(!te.length)continue;x.push({id:"stars",label:`Rating in: ${su(te)}`,onRemove:()=>fo()})}else if("starsIn"in J){const te=J.starsIn.values||[];if(!te.length)continue;x.push({id:"stars-in",label:`Rating in: ${su(te)}`,onRemove:()=>fo()})}else if("starsNotIn"in J){const te=J.starsNotIn.values||[];if(!te.length)continue;x.push({id:"stars-not-in",label:`Rating not in: ${su(te)}`,onRemove:()=>pt(me=>yv(me,[]))})}else if("nameContains"in J){const te=(j=J.nameContains.value)==null?void 0:j.trim();if(!te)continue;x.push({id:"name-contains",label:`Filename contains: ${te}`,onRemove:()=>pt(me=>xv(me,""))})}else if("nameNotContains"in J){const te=(P=J.nameNotContains.value)==null?void 0:P.trim();if(!te)continue;x.push({id:"name-not-contains",label:`Filename not: ${te}`,onRemove:()=>pt(me=>wv(me,""))})}else if("commentsContains"in J){const te=(I=J.commentsContains.value)==null?void 0:I.trim();if(!te)continue;x.push({id:"comments-contains",label:`Comments contain: ${te}`,onRemove:()=>pt(me=>Sv(me,""))})}else if("commentsNotContains"in J){const te=(D=J.commentsNotContains.value)==null?void 0:D.trim();if(!te)continue;x.push({id:"comments-not-contains",label:`Comments not: ${te}`,onRemove:()=>pt(me=>kv(me,""))})}else if("urlContains"in J){const te=(X=J.urlContains.value)==null?void 0:X.trim();if(!te)continue;x.push({id:"url-contains",label:`URL contains: ${te}`,onRemove:()=>pt(me=>Cv(me,""))})}else if("urlNotContains"in J){const te=(le=J.urlNotContains.value)==null?void 0:le.trim();if(!te)continue;x.push({id:"url-not-contains",label:`URL not: ${te}`,onRemove:()=>pt(me=>bv(me,""))})}else if("dateRange"in J){const{from:te,to:me}=J.dateRange;if(!te&&!me)continue;x.push({id:"date-range",label:`Date: ${$k(te,me)}`,onRemove:()=>pt(Ae=>Cc(Ae,null))})}else if("widthCompare"in J){const{op:te,value:me}=J.widthCompare;x.push({id:"width-compare",label:`Width ${te} ${me}`,onRemove:()=>pt(Ae=>tl(Ae,null))})}else if("heightCompare"in J){const{op:te,value:me}=J.heightCompare;x.push({id:"height-compare",label:`Height ${te} ${me}`,onRemove:()=>pt(Ae=>nl(Ae,null))})}else if("metricRange"in J){const{key:te,min:me,max:Ae}=J.metricRange;x.push({id:`metric:${te}`,label:`${te}: ${Bk(me,Ae)}`,onRemove:()=>ga(te,null)})}return x},[E.filters,fo,ga,pt]),fy=d.useCallback(x=>{const j=new Set(oa);j.has(x)?j.delete(x):j.add(x),L(P=>({...P,filters:tu(P.filters,Array.from(j))}))},[oa]),hy=d.useCallback(()=>{ue(!0),fe("metrics")},[]),my=d.useCallback(x=>{L(j=>({...j,sort:x})),x.kind==="builtin"&&x.key==="random"&&F(Date.now())},[]),Zd=d.useCallback(x=>{if(x==="/"||x==="")return"Lenslet | Root";const j=x.split("/").filter(Boolean);if(!j.length)return"Lenslet";const P=j.slice(-2).join("/");return`Lenslet | ${j.length>2?`.../${P}`:`/${P}`}`},[]),py=d.useMemo(()=>Uk(e),[e]);d.useEffect(()=>{document.title=Zd(e)},[e,Zd]),d.useEffect(()=>{let x=!0;return pe.getViews().then(j=>{x&&be(j.views||[])}).catch(()=>{x&&be([])}),()=>{x=!1}},[]),d.useEffect(()=>{br&&(i([]),f&&(m(null),ht.current=!1,Do(e)))},[br,f,e]),d.useEffect(()=>{const x=De.current,j=Yt.current;if(!x||!j)return;const P=()=>{const I=Math.max(48,Math.round(j.getBoundingClientRect().height));x.style.setProperty("--toolbar-h",`${I}px`)};if(P(),"ResizeObserver"in window){const I=new ResizeObserver(P);return I.observe(j),()=>I.disconnect()}return window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]),d.useEffect(()=>{try{const x=localStorage.getItem(We.sortKey),j=localStorage.getItem(We.sortDir),P=localStorage.getItem(We.sortSpec),I=localStorage.getItem(We.starFilters),D=localStorage.getItem(We.filterAst),X=localStorage.getItem(We.selectedMetric),le=localStorage.getItem(We.viewMode),J=localStorage.getItem(We.gridItemSize),te=localStorage.getItem(We.leftOpen),me=localStorage.getItem(We.rightOpen),Nr=(lt=>{if(!lt)return null;const Ge=Ja(lt);return!Ge||typeof Ge!="object"?null:Ge.kind==="builtin"&&(Ge.key==="name"||Ge.key==="added"||Ge.key==="random")&&(Ge.dir==="asc"||Ge.dir==="desc")||Ge.kind==="metric"&&typeof Ge.key=="string"&&Ge.key.length>0&&(Ge.dir==="asc"||Ge.dir==="desc")?Ge:null})(P)??{kind:"builtin",key:x==="name"||x==="added"||x==="random"?x:"added",dir:j==="asc"||j==="desc"?j:"desc"};Nr.key==="random"&&F(Date.now());let Sa=(lt=>{if(!lt)return null;const Ge=Ja(lt);return kc(Ge)})(D)??{and:[]};if(I){const lt=Ja(I);if(Array.isArray(lt)){const Ge=lt.filter(by=>[0,1,2,3,4,5].includes(by));Sa=tu(Sa,Ge)}}if(L(lt=>({...lt,sort:Nr,filters:Sa,selectedMetric:X||lt.selectedMetric})),(le==="grid"||le==="adaptive")&&z(le),J){const lt=Number(J);!isNaN(lt)&&lt>=80&&lt<=500&&oe(lt)}(te==="0"||te==="false")&&ue(!1),(me==="0"||me==="false")&&Q(!1)}catch{}},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia("(max-width: 900px)"),j=()=>{x.matches&&(ue(!1),Q(!1))};return j(),"addEventListener"in x?(x.addEventListener("change",j),()=>x.removeEventListener("change",j)):(x.addListener(j),()=>x.removeListener(j))},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=[1,1.25,1.5,1.75,2,3,4],j=D=>x.reduce((X,le)=>Math.abs(le-D)<Math.abs(X-D)?le:X,x[0]),P=()=>{var Ae;const D=window.devicePixelRatio||1,X=j(D),le=((Ae=window.visualViewport)==null?void 0:Ae.scale)??1,J=D*le/X;if(!Number.isFinite(J)){R(null);return}const te=Math.round(J*100),me=Math.min(500,Math.max(25,te));R(me)};P(),window.addEventListener("resize",P),window.addEventListener("orientationchange",P);const I=window.visualViewport;return I&&I.addEventListener("resize",P),()=>{window.removeEventListener("resize",P),window.removeEventListener("orientationchange",P),I&&I.removeEventListener("resize",P)}},[]),d.useEffect(()=>{try{localStorage.setItem(We.sortKey,E.sort.kind==="builtin"?E.sort.key:"added"),localStorage.setItem(We.sortDir,E.sort.dir),localStorage.setItem(We.sortSpec,JSON.stringify(E.sort));const x=Jh(E.filters);localStorage.setItem(We.starFilters,JSON.stringify(x)),localStorage.setItem(We.filterAst,JSON.stringify(E.filters)),E.selectedMetric?localStorage.setItem(We.selectedMetric,E.selectedMetric):localStorage.removeItem(We.selectedMetric),localStorage.setItem(We.viewMode,V),localStorage.setItem(We.gridItemSize,String($)),localStorage.setItem(We.leftOpen,B?"1":"0"),localStorage.setItem(We.rightOpen,O?"1":"0")}catch{}},[E,V,$,B,O]),d.useEffect(()=>{const x=cn.current;if(!x)return;const j=I=>Math.min(500,Math.max(80,I)),P=I=>{I.ctrlKey&&(f||p||(I.preventDefault(),oe(D=>j(D+(I.deltaY<0?20:-20)))))};return x.addEventListener("wheel",P,{passive:!1}),()=>x.removeEventListener("wheel",P)},[f,p]),d.useEffect(()=>{if(f||p)return;const x=cn.current;if(!x)return;const j=J=>Math.min(500,Math.max(80,J));let P=null;const I=J=>{if(J.length<2)return 0;const[te,me]=[J[0],J[1]];return Math.hypot(te.clientX-me.clientX,te.clientY-me.clientY)},D=J=>{if(J.touches.length!==2)return;const te=I(J.touches);te&&(P={dist:te,size:$})},X=J=>{if(!P||J.touches.length!==2)return;const te=I(J.touches);if(!te)return;J.preventDefault();const me=j(P.size*(te/P.dist));oe(me)},le=()=>{P=null};return x.addEventListener("touchstart",D,{passive:!0}),x.addEventListener("touchmove",X,{passive:!1}),x.addEventListener("touchend",le),x.addEventListener("touchcancel",le),()=>{x.removeEventListener("touchstart",D),x.removeEventListener("touchmove",X),x.removeEventListener("touchend",le),x.removeEventListener("touchcancel",le)}},[f,p,$]),d.useEffect(()=>{if(!f)return;const x=Lt.indexOf(f);if(x===-1)return;const j=[Lt[x-2],Lt[x-1],Lt[x+1],Lt[x+2]].filter(P=>!!P);for(const P of j)pe.prefetchFile(P),pe.prefetchThumb(P)},[f,Lt]),d.useEffect(()=>{var P;if(!p||Tt.length<2)return;const x=Er,j=new Set;for(const I of[-2,-1,0,1,2,3]){const D=x+I;D>=0&&D<Tt.length&&j.add(D)}for(const I of j){const D=(P=Tt[I])==null?void 0:P.path;D&&(pe.prefetchFile(D),pe.prefetchThumb(D))}},[p,Tt,Er]),d.useEffect(()=>{var j;if(!((j=Be==null?void 0:Be.items)!=null&&j.length))return;const x=Be.items.slice(0,5);for(const P of x)pe.prefetchFile(P.path)},[Be==null?void 0:Be.path,Be==null?void 0:Be.items]);const ho=d.useCallback(x=>{m(null),ht.current=!1;const j=on(x);t(j),Gh(j)},[]),gy=d.useCallback(async()=>{const x=window.prompt("Save Smart Folder as:","New Smart Folder");if(!x)return;const j=zk(x,de),P={id:j,name:x,pool:{kind:"folder",path:e},view:JSON.parse(JSON.stringify(E))},I=[...de.filter(D=>D.id!==j),P];be(I),Y(j);try{await pe.saveViews({version:1,views:I})}catch(D){if(D instanceof Sn&&D.status===403){const X=new Blob([JSON.stringify({version:1,views:I},null,2)],{type:"application/json"});Ec(X,`lenslet-smart-folder-${j}.json`),alert("No-write mode: exported Smart Folder JSON instead of saving.");return}console.error("Failed to save Smart Folder:",D)}},[e,E,de]);d.useEffect(()=>{if(!H)return;const x=de.find(I=>I.id===H);if(!x){Y(null);return}const j=x.pool.path===e,P=JSON.stringify(x.view)===JSON.stringify(E);(!j||!P)&&Y(null)},[H,de,e,E]);const mo=d.useCallback(x=>{if(!x)return;const j=document.getElementById(`cell-${encodeURIComponent(x)}`);j==null||j.focus()},[]),vy=d.useCallback(x=>{m(x),ht.current=!0,Gh(x)},[]),ef=d.useCallback(()=>{m(null),ht.current?(ht.current=!1,window.history.back()):Do(e),mo(re.current)},[mo]),yy=d.useCallback(()=>{p||!ri||(s[0]&&(re.current=s[0]),N(0),S(!0),f&&(m(null),ht.current&&(ht.current=!1),Do(e)),U.current||(window.history.pushState({compare:!0},"",window.location.href),U.current=!0))},[p,ri,s,f,e]),va=d.useCallback(()=>{S(!1),U.current&&(U.current=!1,window.history.back()),mo(re.current??s[0])},[mo,s]),xy=d.useCallback(x=>{Tt.length<2||N(j=>{const P=Math.max(0,Tt.length-2);return Math.min(P,Math.max(0,j+x))})},[Tt.length]);d.useEffect(()=>{p&&(ri||va())},[p,ri,va]),d.useEffect(()=>{const x=()=>{f&&(ht.current=!1,m(null)),p&&(U.current=!1,S(!1))};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[f,p]),d.useEffect(()=>{const x=De.current;if(!x)return;const j=D=>{D.dataTransfer&&Array.from(D.dataTransfer.types).includes("Files")&&(D.preventDefault(),ie(!0))},P=D=>{const X=D.relatedTarget;X&&x.contains(X)||ie(!1)},I=async D=>{var J,te;D.preventDefault(),ie(!1);const X=Array.from(((J=D.dataTransfer)==null?void 0:J.files)??[]);if(!X.length)return;if(!((((te=Be==null?void 0:Be.dirs)==null?void 0:te.length)??0)===0)){alert("Uploads are only allowed into folders without subdirectories.");return}for(const me of X)try{await pe.uploadFile(e,me)}catch(Ae){console.error(`Failed to upload ${me.name}:`,Ae)}ia()};return x.addEventListener("dragover",j),x.addEventListener("dragleave",P),x.addEventListener("drop",I),()=>{x.removeEventListener("dragover",j),x.removeEventListener("dragleave",P),x.removeEventListener("drop",I)}},[e,(sf=Be==null?void 0:Be.dirs)==null?void 0:sf.length,ia]),d.useEffect(()=>{const x=()=>Ye(null),j=P=>{P.key==="Escape"&&Ye(null)};return window.addEventListener("click",x),window.addEventListener("keydown",j),()=>{window.removeEventListener("click",x),window.removeEventListener("keydown",j)}},[]),d.useEffect(()=>{const x=j=>{if(!Md(j.target)){if((j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="b"){j.preventDefault(),j.altKey?Q(P=>!P):ue(P=>!P);return}if(!(f||p)){if(j.key==="Backspace"||j.key==="Delete")j.preventDefault(),ho(Xh(e));else if((j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="a")j.preventDefault(),i(Qe.map(P=>P.path));else if(j.key==="Escape")s.length&&(j.preventDefault(),i([]));else if(j.key==="/"){j.preventDefault();const P=document.querySelector(".toolbar-right .input");P==null||P.focus()}}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,Qe,s,f,p,ho]);const wy=B?`${ve}px`:"0px",Sy=O?`${ee}px`:"0px",tf=f??s[0]??null,ya=tf?Lt.indexOf(tf):-1,ky=ya>0,Cy=ya>=0&&ya<Lt.length-1,xa=d.useCallback(x=>{if(!Lt.length)return;const j=f??s[0];if(!j)return;const P=Lt.indexOf(j);if(P===-1)return;const I=Math.min(Lt.length-1,Math.max(0,P+x)),D=Lt[I];!D||D===j||(f&&(m(D),Do(D)),i([D]))},[Lt,f,s]);return a.jsxs("div",{className:"app-shell grid h-full grid-cols-[var(--left)_1fr_var(--right)]",ref:De,style:{"--left":wy,"--right":Sy},children:[a.jsx(zw,{rootRef:Yt,onSearch:r,viewerActive:!!f,onBack:ef,zoomPercent:f?g:void 0,onZoomPercentChange:x=>h(x),currentLabel:py,itemCount:ly,totalCount:ay,sortSpec:E.sort,metricKeys:Vn,onSortChange:my,sortDisabled:Gt,filterCount:uo,onOpenFilters:hy,starFilters:oa,onToggleStar:fy,onClearStars:fo,onClearFilters:Xd,starCounts:qv,viewMode:V,onViewMode:z,gridItemSize:$,onGridItemSize:oe,leftOpen:B,rightOpen:O,onToggleLeft:()=>ue(x=>!x),onToggleRight:()=>Q(x=>!x),onPrevImage:()=>xa(-1),onNextImage:()=>xa(1),canPrevImage:ky,canNextImage:Cy,searchDisabled:Gt,searchPlaceholder:Gt?"Exit similarity to search":void 0,syncIndicator:{state:ry,presence:co,syncLabel:Gv,connectionLabel:Xv,lastEditedLabel:Jv,hasEdits:ma,recentTouches:oy}}),B&&a.jsx(Ek,{leftTool:q,onToolChange:fe,compareEnabled:ri,compareActive:p,onOpenCompare:yy,views:de,activeViewId:H,onActivateView:x=>{var P;Y(x.id);const j=kc((P=x.view)==null?void 0:P.filters)??{and:[]};L({...x.view,filters:j}),ho(x.pool.path)},onSaveView:gy,current:e,data:Be,onOpenFolder:x=>{Y(null),ho(x)},onContextMenu:(x,j)=>{x.preventDefault(),Ye({x:x.clientX,y:x.clientY,kind:"tree",payload:{path:j}})},items:Kv,filteredItems:Qe,metricKeys:Vn,selectedItems:Bv,selectedMetric:E.selectedMetric,onSelectMetric:x=>L(j=>({...j,selectedMetric:x})),filters:E.filters,onChangeRange:ga,onChangeFilters:uy,onResize:W}),a.jsxs("div",{className:"grid-shell col-start-2 row-start-2 relative overflow-hidden flex flex-col",ref:cn,children:[a.jsx("div",{"aria-live":"polite",className:"sr-only",children:s.length?`${s.length} selected`:""}),a.jsx(Nk,{persistenceEnabled:Dv,recentSummary:iy,onDismissRecent:()=>_v(!0),onCloseRecent:()=>Lv(pa??Date.now()),browserZoomPercent:M}),u&&a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"font-semibold",children:"Similarity mode"}),a.jsxs("span",{className:"text-muted",children:["Embedding: ",u.embedding]}),Yd&&a.jsxs("span",{className:"text-muted",children:["Query: ",Yd]}),Gd&&a.jsxs("span",{className:"text-muted",children:["Results: ",Gd]}),a.jsxs("span",{className:"text-muted",children:["Top K: ",u.topK]}),u.minScore!=null&&a.jsxs("span",{className:"text-muted",children:["Min score: ",u.minScore]})]}),a.jsx("button",{className:"btn btn-sm",onClick:cy,children:"Exit similarity"})]})}),Jd.length>0&&a.jsx("div",{className:"sticky top-0 z-10 px-3 py-2 bg-panel border-b border-border",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Filters"}),Jd.map(x=>a.jsxs("span",{className:"filter-chip",children:[a.jsx("span",{className:"truncate max-w-[240px]",title:x.label,children:x.label}),a.jsx("button",{className:"filter-chip-remove","aria-label":`Clear filter ${x.label}`,onClick:x.onRemove,children:""})]},x.id)),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:Xd,children:"Clear all"})]})}),!1,a.jsxs("div",{className:"flex-1 min-h-0 relative",children:[a.jsx(_1,{items:Qe,selected:s,restoreToSelectionToken:T,onSelectionChange:i,onOpenViewer:x=>{try{re.current=x}catch{}vy(x),i([x])},highlight:br?Ud:"",recentlyUpdated:Pv,suppressSelectionHighlight:!!f||p,viewMode:V,targetCellSize:$,onContextMenuItem:(x,j)=>{x.preventDefault();const P=s.length?s:[j];Ye({x:x.clientX,y:x.clientY,kind:"grid",payload:{paths:P}})},scrollRef:_e,hideScrollbar:Vd}),Vd&&si&&a.jsx(F1,{items:Qe,metricKey:si,scrollRef:_e,sortDir:E.sort.dir})]})]}),O&&a.jsx(kS,{path:s[0]??null,selectedPaths:s,items:Qe,sortSpec:E.sort,onResize:_,onStarChanged:(x,j)=>{ft(P=>{const I={...P};for(const D of x)I[D]=j;return I})},onFindSimilar:()=>l(!0),embeddingsAvailable:$v,embeddingsLoading:ss.isLoading}),a.jsx(CS,{open:o,embeddings:Bd,rejected:Av,selectedPath:s[0]??null,embeddingsLoading:ss.isLoading,embeddingsError:Uv,onClose:()=>l(!1),onSearch:dy}),f&&a.jsx(H1,{path:f,onClose:ef,onZoomChange:x=>b(Math.round(x)),requestedZoomPercent:v,onZoomRequestConsumed:()=>h(null),onNavigate:xa}),p&&a.jsx(Y1,{aItem:Wv,bItem:Hv,index:Er,total:Tt.length,canPrev:Vv,canNext:Qv,onNavigate:xy,onClose:va}),G&&a.jsx("div",{className:"toolbar-offset fixed inset-0 left-[var(--left)] right-[var(--right)] bg-accent/10 border-2 border-dashed border-accent text-text flex items-center justify-center text-lg z-overlay pointer-events-none",children:"Drop images to upload"}),we&&a.jsx(Vk,{ctx:we,current:e,items:Qe,refetch:ia,setCtx:Ye})]})}function zk(e,t){const n=Ak(e)||"view",r=new Set(t.map(i=>i.id));if(!r.has(n))return n;let s=2;for(;r.has(`${n}-${s}`);)s+=1;return`${n}-${s}`}function Ak(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function su(e){const t=e.filter(s=>s>0).sort((s,i)=>i-s),n=e.includes(0),r=[...t.map(s=>String(s))];return n&&r.push("None"),r.join(", ")}function $k(e,t){return e&&t?`${e} to ${t}`:e?`from ${e}`:t?`to ${t}`:""}function Uk(e){if(e==="/"||e==="")return"Root";const t=e.split("/").filter(Boolean);return t.length?t.length<=2?`/${t.join("/")}`:`.../${t.slice(-2).join("/")}`:"Root"}function Bk(e,t){return`${Cm(e)}${Cm(t)}`}function Cm(e){const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Wk(e){const t=e.toLowerCase();return t.endsWith(".png")?"image/png":t.endsWith(".webp")?"image/webp":"image/jpeg"}function Hk(e,t){const n=e.split("/").pop()??e;return{path:e,name:n,type:Wk(e),w:0,h:0,size:0,hasThumb:!0,hasMeta:!1,star:t??null}}function Ec(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function Vk({ctx:e,current:t,items:n,refetch:r,setCtx:s}){const i=IS(t),o=(h,g)=>h==="/"?`/${g}`:`${h}/${g}`,l=ns(),[u,c]=rl.useState(!1),[f,m]=rl.useState(null),p=()=>new Date().toISOString().replace(/[:.]/g,"-"),S=h=>{const g=b=>h==="/"?!0:b===h||b.startsWith(`${h}/`);l.invalidateQueries({predicate:({queryKey:b})=>{if(!Array.isArray(b)||b[0]!=="folder")return!1;const M=typeof b[1]=="string"?b[1]:"";return g(M)}})},w=h=>{const g=on(h);return g===""?"/":g},N=async()=>{const h=w(e.payload.path||"/");c(!0);try{await pe.refreshFolder(h),S(h),(t===h||t.startsWith(h==="/"?"/":`${h}/`))&&await r(),fc.evictPrefix(h),us.evictPrefix(h)}catch(g){console.error("Failed to refresh folder:",g)}finally{c(!1),s(null)}},T=async h=>{const g=[h],b=new Set,M=[];for(;g.length;){const R=g.pop();if(!b.has(R)){b.add(R);try{const E=await pe.getFolder(R);M.push(...E.items);for(const L of E.dirs)L.kind==="branch"&&g.push(o(R,L.name))}catch(E){console.error(`Failed to fetch folder ${R}:`,E)}}}return M},y=h=>async()=>{m(h);const g=e.payload.path||t;try{const b=await T(g),M=um(b),R=h==="csv"?am(M):lm(M),E=h==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8",L=g==="/"?"root":(g.replace(/^\/+/,"")||"root").replace(/\//g,"_");Ec(new Blob([R],{type:E}),`metadata_${L}_${p()}.${h}`)}catch(b){console.error("Failed to export folder:",b),alert("Failed to export folder. See console for details.")}finally{m(null),s(null)}},v=e.kind==="tree"?[{label:u?"Refreshing":"Refresh",disabled:u,onClick:N},{label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f||u,onClick:y("csv")},{label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f||u,onClick:y("json")}]:(()=>{const h=e.payload.paths??[],g=[],b=M=>async()=>{m(M);try{const R=new Set(h),E=n.filter(V=>R.has(V.path)),L=um(E),C=M==="csv"?am(L):lm(L),F=M==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8";Ec(new Blob([C],{type:F}),`metadata_selection_${p()}.${M}`)}finally{m(null),s(null)}};return g.push({label:"Move to trash",disabled:i,onClick:async()=>{if(!i){for(const M of h)try{await pe.moveFile(M,"/_trash_")}catch(R){console.error(`Failed to trash ${M}:`,R)}r(),s(null)}}}),i&&(g.push({label:"Permanent delete",danger:!0,onClick:async()=>{if(confirm(`Delete ${h.length} file(s) permanently? This cannot be undone.`)){try{await pe.deleteFiles(h)}catch(M){console.error("Failed to delete files:",M)}r(),s(null)}}}),g.push({label:"Recover",onClick:async()=>{for(const M of h)try{const E=(await pe.getSidecar(M)).original_position,L=E&&E.split("/").slice(0,-1).join("/")||"/";await pe.moveFile(M,L)}catch(R){console.error(`Failed to recover ${M}:`,R)}r(),s(null)}})),h.length&&(g.push({label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f,onClick:b("csv")}),g.push({label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f,onClick:b("json")})),g})();return a.jsx(ak,{x:e.x,y:e.y,items:v})}const Qk=new kw({defaultOptions:{queries:{staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always"},mutations:{retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),5e3)}}});function Kk(){return a.jsx(Cw,{client:Qk,children:a.jsx(Dk,{})})}Kg(document.getElementById("root")).render(a.jsx(Kk,{}));
