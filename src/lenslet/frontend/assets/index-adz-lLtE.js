var i0=Object.defineProperty;var If=e=>{throw TypeError(e)};var o0=(e,t,n)=>t in e?i0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Fn=(e,t,n)=>o0(e,typeof t!="symbol"?t+"":t,n),Ga=(e,t,n)=>t.has(e)||If("Cannot "+n);var S=(e,t,n)=>(Ga(e,t,"read from private field"),n?n.call(e):t.get(e)),le=(e,t,n)=>t.has(e)?If("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),H=(e,t,n,r)=>(Ga(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),me=(e,t,n)=>(Ga(e,t,"access private method"),n);var Uo=(e,t,n,r)=>({set _(s){H(e,t,s,n)},get _(){return S(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function l0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var mp={exports:{}},ca={},pp={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var So=Symbol.for("react.element"),a0=Symbol.for("react.portal"),u0=Symbol.for("react.fragment"),c0=Symbol.for("react.strict_mode"),d0=Symbol.for("react.profiler"),f0=Symbol.for("react.provider"),h0=Symbol.for("react.context"),m0=Symbol.for("react.forward_ref"),p0=Symbol.for("react.suspense"),g0=Symbol.for("react.memo"),v0=Symbol.for("react.lazy"),Ff=Symbol.iterator;function y0(e){return e===null||typeof e!="object"?null:(e=Ff&&e[Ff]||e["@@iterator"],typeof e=="function"?e:null)}var gp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vp=Object.assign,yp={};function hi(e,t,n){this.props=e,this.context=t,this.refs=yp,this.updater=n||gp}hi.prototype.isReactComponent={};hi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function xp(){}xp.prototype=hi.prototype;function td(e,t,n){this.props=e,this.context=t,this.refs=yp,this.updater=n||gp}var nd=td.prototype=new xp;nd.constructor=td;vp(nd,hi.prototype);nd.isPureReactComponent=!0;var Of=Array.isArray,wp=Object.prototype.hasOwnProperty,rd={current:null},Sp={key:!0,ref:!0,__self:!0,__source:!0};function Cp(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)wp.call(t,r)&&!Sp.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:So,type:e,key:i,ref:o,props:s,_owner:rd.current}}function x0(e,t){return{$$typeof:So,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function sd(e){return typeof e=="object"&&e!==null&&e.$$typeof===So}function w0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var zf=/\/+/g;function Ya(e,t){return typeof e=="object"&&e!==null&&e.key!=null?w0(""+e.key):t.toString(36)}function fl(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case So:case a0:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Ya(o,0):r,Of(s)?(n="",e!=null&&(n=e.replace(zf,"$&/")+"/"),fl(s,t,n,"",function(c){return c})):s!=null&&(sd(s)&&(s=x0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(zf,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Of(e))for(var l=0;l<e.length;l++){i=e[l];var u=r+Ya(i,l);o+=fl(i,t,n,u,s)}else if(u=y0(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=r+Ya(i,l++),o+=fl(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Bo(e,t,n){if(e==null)return e;var r=[],s=0;return fl(e,r,"","",function(i){return t.call(n,i,s++)}),r}function S0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var jt={current:null},hl={transition:null},C0={ReactCurrentDispatcher:jt,ReactCurrentBatchConfig:hl,ReactCurrentOwner:rd};function kp(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Bo,forEach:function(e,t,n){Bo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Bo(e,function(){t++}),t},toArray:function(e){return Bo(e,function(t){return t})||[]},only:function(e){if(!sd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ve.Component=hi;ve.Fragment=u0;ve.Profiler=d0;ve.PureComponent=td;ve.StrictMode=c0;ve.Suspense=p0;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C0;ve.act=kp;ve.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=vp({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=rd.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)wp.call(t,u)&&!Sp.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:So,type:e.type,key:s,ref:i,props:r,_owner:o}};ve.createContext=function(e){return e={$$typeof:h0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:f0,_context:e},e.Consumer=e};ve.createElement=Cp;ve.createFactory=function(e){var t=Cp.bind(null,e);return t.type=e,t};ve.createRef=function(){return{current:null}};ve.forwardRef=function(e){return{$$typeof:m0,render:e}};ve.isValidElement=sd;ve.lazy=function(e){return{$$typeof:v0,_payload:{_status:-1,_result:e},_init:S0}};ve.memo=function(e,t){return{$$typeof:g0,type:e,compare:t===void 0?null:t}};ve.startTransition=function(e){var t=hl.transition;hl.transition={};try{e()}finally{hl.transition=t}};ve.unstable_act=kp;ve.useCallback=function(e,t){return jt.current.useCallback(e,t)};ve.useContext=function(e){return jt.current.useContext(e)};ve.useDebugValue=function(){};ve.useDeferredValue=function(e){return jt.current.useDeferredValue(e)};ve.useEffect=function(e,t){return jt.current.useEffect(e,t)};ve.useId=function(){return jt.current.useId()};ve.useImperativeHandle=function(e,t,n){return jt.current.useImperativeHandle(e,t,n)};ve.useInsertionEffect=function(e,t){return jt.current.useInsertionEffect(e,t)};ve.useLayoutEffect=function(e,t){return jt.current.useLayoutEffect(e,t)};ve.useMemo=function(e,t){return jt.current.useMemo(e,t)};ve.useReducer=function(e,t,n){return jt.current.useReducer(e,t,n)};ve.useRef=function(e){return jt.current.useRef(e)};ve.useState=function(e){return jt.current.useState(e)};ve.useSyncExternalStore=function(e,t,n){return jt.current.useSyncExternalStore(e,t,n)};ve.useTransition=function(){return jt.current.useTransition()};ve.version="18.3.1";pp.exports=ve;var d=pp.exports;const Pl=l0(d);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0=d,b0=Symbol.for("react.element"),E0=Symbol.for("react.fragment"),N0=Object.prototype.hasOwnProperty,j0=k0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,M0={key:!0,ref:!0,__self:!0,__source:!0};function bp(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)N0.call(t,r)&&!M0.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:b0,type:e,key:i,ref:o,props:s,_owner:j0.current}}ca.Fragment=E0;ca.jsx=bp;ca.jsxs=bp;mp.exports=ca;var a=mp.exports,Ep={exports:{}},Bt={},Np={exports:{}},jp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,V){var q=D.length;D.push(V);e:for(;0<q;){var Z=q-1>>>1,ce=D[Z];if(0<s(ce,V))D[Z]=V,D[q]=ce,q=Z;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var V=D[0],q=D.pop();if(q!==V){D[0]=q;e:for(var Z=0,ce=D.length,Pe=ce>>>1;Z<Pe;){var X=2*(Z+1)-1,Q=D[X],K=X+1,fe=D[K];if(0>s(Q,q))K<ce&&0>s(fe,Q)?(D[Z]=fe,D[K]=q,Z=K):(D[Z]=Q,D[X]=q,Z=X);else if(K<ce&&0>s(fe,q))D[Z]=fe,D[K]=q,Z=K;else break e}}return V}function s(D,V){var q=D.sortIndex-V.sortIndex;return q!==0?q:D.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,h=null,v=3,w=!1,b=!1,E=!1,L=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(D){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=D)r(c),V.sortIndex=V.expirationTime,t(u,V);else break;V=n(c)}}function g(D){if(E=!1,p(D),!b)if(n(u)!==null)b=!0,P(C);else{var V=n(c);V!==null&&de(g,V.startTime-D)}}function C(D,V){b=!1,E&&(E=!1,y(k),k=-1),w=!0;var q=v;try{for(p(V),h=n(u);h!==null&&(!(h.expirationTime>V)||D&&!_());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,v=h.priorityLevel;var ce=Z(h.expirationTime<=V);V=e.unstable_now(),typeof ce=="function"?h.callback=ce:h===n(u)&&r(u),p(V)}else r(u);h=n(u)}if(h!==null)var Pe=!0;else{var X=n(c);X!==null&&de(g,X.startTime-V),Pe=!1}return Pe}finally{h=null,v=q,w=!1}}var M=!1,R=null,k=-1,T=5,N=-1;function _(){return!(e.unstable_now()-N<T)}function B(){if(R!==null){var D=e.unstable_now();N=D;var V=!0;try{V=R(!0,D)}finally{V?z():(M=!1,R=null)}}else M=!1}var z;if(typeof m=="function")z=function(){m(B)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ue=oe.port2;oe.port1.onmessage=B,z=function(){ue.postMessage(null)}}else z=function(){L(B,0)};function P(D){R=D,M||(M=!0,z())}function de(D,V){k=L(function(){D(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){b||w||(b=!0,P(C))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(D){switch(v){case 1:case 2:case 3:var V=3;break;default:V=v}var q=v;v=V;try{return D()}finally{v=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,V){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var q=v;v=D;try{return V()}finally{v=q}},e.unstable_scheduleCallback=function(D,V,q){var Z=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Z+q:Z):q=Z,D){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=q+ce,D={id:f++,callback:V,priorityLevel:D,startTime:q,expirationTime:ce,sortIndex:-1},q>Z?(D.sortIndex=q,t(c,D),n(u)===null&&D===n(c)&&(E?(y(k),k=-1):E=!0,de(g,q-Z))):(D.sortIndex=ce,t(u,D),b||w||(b=!0,P(C))),D},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(D){var V=v;return function(){var q=v;v=V;try{return D.apply(this,arguments)}finally{v=q}}}})(jp);Np.exports=jp;var R0=Np.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0=d,Ut=R0;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Mp=new Set,qi={};function fs(e,t){ii(e,t),ii(e+"Capture",t)}function ii(e,t){for(qi[e]=t,e=0;e<t.length;e++)Mp.add(t[e])}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pu=Object.prototype.hasOwnProperty,T0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Df={},Af={};function P0(e){return Pu.call(Af,e)?!0:Pu.call(Df,e)?!1:T0.test(e)?Af[e]=!0:(Df[e]=!0,!1)}function _0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function I0(e,t,n,r){if(t===null||typeof t>"u"||_0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mt(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dt[e]=new Mt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];dt[t]=new Mt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){dt[e]=new Mt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dt[e]=new Mt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dt[e]=new Mt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){dt[e]=new Mt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){dt[e]=new Mt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){dt[e]=new Mt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){dt[e]=new Mt(e,5,!1,e.toLowerCase(),null,!1,!1)});var id=/[\-:]([a-z])/g;function od(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(id,od);dt[t]=new Mt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(id,od);dt[t]=new Mt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(id,od);dt[t]=new Mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){dt[e]=new Mt(e,1,!1,e.toLowerCase(),null,!1,!1)});dt.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){dt[e]=new Mt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ld(e,t,n,r){var s=dt.hasOwnProperty(t)?dt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(I0(t,n,s,r)&&(n=null),r||s===null?P0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Zn=L0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wo=Symbol.for("react.element"),Ns=Symbol.for("react.portal"),js=Symbol.for("react.fragment"),ad=Symbol.for("react.strict_mode"),_u=Symbol.for("react.profiler"),Rp=Symbol.for("react.provider"),Lp=Symbol.for("react.context"),ud=Symbol.for("react.forward_ref"),Iu=Symbol.for("react.suspense"),Fu=Symbol.for("react.suspense_list"),cd=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),Tp=Symbol.for("react.offscreen"),$f=Symbol.iterator;function Si(e){return e===null||typeof e!="object"?null:(e=$f&&e[$f]||e["@@iterator"],typeof e=="function"?e:null)}var De=Object.assign,Xa;function Pi(e){if(Xa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xa=t&&t[1]||""}return`
`+Xa+e}var Ja=!1;function Za(e,t){if(!e||Ja)return"";Ja=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{Ja=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Pi(e):""}function F0(e){switch(e.tag){case 5:return Pi(e.type);case 16:return Pi("Lazy");case 13:return Pi("Suspense");case 19:return Pi("SuspenseList");case 0:case 2:case 15:return e=Za(e.type,!1),e;case 11:return e=Za(e.type.render,!1),e;case 1:return e=Za(e.type,!0),e;default:return""}}function Ou(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case js:return"Fragment";case Ns:return"Portal";case _u:return"Profiler";case ad:return"StrictMode";case Iu:return"Suspense";case Fu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Lp:return(e.displayName||"Context")+".Consumer";case Rp:return(e._context.displayName||"Context")+".Provider";case ud:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case cd:return t=e.displayName||null,t!==null?t:Ou(e.type)||"Memo";case sr:t=e._payload,e=e._init;try{return Ou(e(t))}catch{}}return null}function O0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ou(t);case 8:return t===ad?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Mr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Pp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function z0(e){var t=Pp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ho(e){e._valueTracker||(e._valueTracker=z0(e))}function _p(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Pp(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function _l(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function zu(e,t){var n=t.checked;return De({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Uf(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Mr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ip(e,t){t=t.checked,t!=null&&ld(e,"checked",t,!1)}function Du(e,t){Ip(e,t);var n=Mr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Au(e,t.type,n):t.hasOwnProperty("defaultValue")&&Au(e,t.type,Mr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Bf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Au(e,t,n){(t!=="number"||_l(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var _i=Array.isArray;function Ds(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Mr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function $u(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return De({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Wf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($(92));if(_i(n)){if(1<n.length)throw Error($(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Mr(n)}}function Fp(e,t){var n=Mr(t.value),r=Mr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Hf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Op(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Op(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vo,zp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vo=Vo||document.createElement("div"),Vo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Di={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D0=["Webkit","ms","Moz","O"];Object.keys(Di).forEach(function(e){D0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Di[t]=Di[e]})});function Dp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Di.hasOwnProperty(e)&&Di[e]?(""+t).trim():t+"px"}function Ap(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Dp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var A0=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bu(e,t){if(t){if(A0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function Wu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hu=null;function dd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vu=null,As=null,$s=null;function Vf(e){if(e=bo(e)){if(typeof Vu!="function")throw Error($(280));var t=e.stateNode;t&&(t=pa(t),Vu(e.stateNode,e.type,t))}}function $p(e){As?$s?$s.push(e):$s=[e]:As=e}function Up(){if(As){var e=As,t=$s;if($s=As=null,Vf(e),t)for(e=0;e<t.length;e++)Vf(t[e])}}function Bp(e,t){return e(t)}function Wp(){}var eu=!1;function Hp(e,t,n){if(eu)return e(t,n);eu=!0;try{return Bp(e,t,n)}finally{eu=!1,(As!==null||$s!==null)&&(Wp(),Up())}}function Yi(e,t){var n=e.stateNode;if(n===null)return null;var r=pa(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,t,typeof n));return n}var Qu=!1;if(Gn)try{var Ci={};Object.defineProperty(Ci,"passive",{get:function(){Qu=!0}}),window.addEventListener("test",Ci,Ci),window.removeEventListener("test",Ci,Ci)}catch{Qu=!1}function $0(e,t,n,r,s,i,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var Ai=!1,Il=null,Fl=!1,Ku=null,U0={onError:function(e){Ai=!0,Il=e}};function B0(e,t,n,r,s,i,o,l,u){Ai=!1,Il=null,$0.apply(U0,arguments)}function W0(e,t,n,r,s,i,o,l,u){if(B0.apply(this,arguments),Ai){if(Ai){var c=Il;Ai=!1,Il=null}else throw Error($(198));Fl||(Fl=!0,Ku=c)}}function hs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Vp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Qf(e){if(hs(e)!==e)throw Error($(188))}function H0(e){var t=e.alternate;if(!t){if(t=hs(e),t===null)throw Error($(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Qf(s),e;if(i===r)return Qf(s),t;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:t}function Qp(e){return e=H0(e),e!==null?Kp(e):null}function Kp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Kp(e);if(t!==null)return t;e=e.sibling}return null}var qp=Ut.unstable_scheduleCallback,Kf=Ut.unstable_cancelCallback,V0=Ut.unstable_shouldYield,Q0=Ut.unstable_requestPaint,He=Ut.unstable_now,K0=Ut.unstable_getCurrentPriorityLevel,fd=Ut.unstable_ImmediatePriority,Gp=Ut.unstable_UserBlockingPriority,Ol=Ut.unstable_NormalPriority,q0=Ut.unstable_LowPriority,Yp=Ut.unstable_IdlePriority,da=null,Ln=null;function G0(e){if(Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(da,e,void 0,(e.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:J0,Y0=Math.log,X0=Math.LN2;function J0(e){return e>>>=0,e===0?32:31-(Y0(e)/X0|0)|0}var Qo=64,Ko=4194304;function Ii(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Ii(l):(i&=o,i!==0&&(r=Ii(i)))}else o=n&~s,o!==0?r=Ii(o):i!==0&&(r=Ii(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-mn(t),s=1<<n,r|=e[n],t&=~s;return r}function Z0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ex(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-mn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=Z0(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function qu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Xp(){var e=Qo;return Qo<<=1,!(Qo&4194240)&&(Qo=64),e}function tu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Co(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-mn(t),e[t]=n}function tx(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-mn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function hd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-mn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var je=0;function Jp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Zp,md,eg,tg,ng,Gu=!1,qo=[],xr=null,wr=null,Sr=null,Xi=new Map,Ji=new Map,or=[],nx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qf(e,t){switch(e){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":Xi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ji.delete(t.pointerId)}}function ki(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=bo(t),t!==null&&md(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function rx(e,t,n,r,s){switch(t){case"focusin":return xr=ki(xr,e,t,n,r,s),!0;case"dragenter":return wr=ki(wr,e,t,n,r,s),!0;case"mouseover":return Sr=ki(Sr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Xi.set(i,ki(Xi.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ji.set(i,ki(Ji.get(i)||null,e,t,n,r,s)),!0}return!1}function rg(e){var t=Ur(e.target);if(t!==null){var n=hs(t);if(n!==null){if(t=n.tag,t===13){if(t=Vp(n),t!==null){e.blockedOn=t,ng(e.priority,function(){eg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ml(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Hu=r,n.target.dispatchEvent(r),Hu=null}else return t=bo(n),t!==null&&md(t),e.blockedOn=n,!1;t.shift()}return!0}function Gf(e,t,n){ml(e)&&n.delete(t)}function sx(){Gu=!1,xr!==null&&ml(xr)&&(xr=null),wr!==null&&ml(wr)&&(wr=null),Sr!==null&&ml(Sr)&&(Sr=null),Xi.forEach(Gf),Ji.forEach(Gf)}function bi(e,t){e.blockedOn===t&&(e.blockedOn=null,Gu||(Gu=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,sx)))}function Zi(e){function t(s){return bi(s,e)}if(0<qo.length){bi(qo[0],e);for(var n=1;n<qo.length;n++){var r=qo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(xr!==null&&bi(xr,e),wr!==null&&bi(wr,e),Sr!==null&&bi(Sr,e),Xi.forEach(t),Ji.forEach(t),n=0;n<or.length;n++)r=or[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<or.length&&(n=or[0],n.blockedOn===null);)rg(n),n.blockedOn===null&&or.shift()}var Us=Zn.ReactCurrentBatchConfig,Dl=!0;function ix(e,t,n,r){var s=je,i=Us.transition;Us.transition=null;try{je=1,pd(e,t,n,r)}finally{je=s,Us.transition=i}}function ox(e,t,n,r){var s=je,i=Us.transition;Us.transition=null;try{je=4,pd(e,t,n,r)}finally{je=s,Us.transition=i}}function pd(e,t,n,r){if(Dl){var s=Yu(e,t,n,r);if(s===null)du(e,t,r,Al,n),qf(e,r);else if(rx(s,e,t,n,r))r.stopPropagation();else if(qf(e,r),t&4&&-1<nx.indexOf(e)){for(;s!==null;){var i=bo(s);if(i!==null&&Zp(i),i=Yu(e,t,n,r),i===null&&du(e,t,r,Al,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else du(e,t,r,null,n)}}var Al=null;function Yu(e,t,n,r){if(Al=null,e=dd(r),e=Ur(e),e!==null)if(t=hs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Vp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Al=e,null}function sg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(K0()){case fd:return 1;case Gp:return 4;case Ol:case q0:return 16;case Yp:return 536870912;default:return 16}default:return 16}}var vr=null,gd=null,pl=null;function ig(){if(pl)return pl;var e,t=gd,n=t.length,r,s="value"in vr?vr.value:vr.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return pl=s.slice(e,1<r?1-r:void 0)}function gl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Go(){return!0}function Yf(){return!1}function Wt(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Go:Yf,this.isPropagationStopped=Yf,this}return De(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Go)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Go)},persist:function(){},isPersistent:Go}),t}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vd=Wt(mi),ko=De({},mi,{view:0,detail:0}),lx=Wt(ko),nu,ru,Ei,fa=De({},ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ei&&(Ei&&e.type==="mousemove"?(nu=e.screenX-Ei.screenX,ru=e.screenY-Ei.screenY):ru=nu=0,Ei=e),nu)},movementY:function(e){return"movementY"in e?e.movementY:ru}}),Xf=Wt(fa),ax=De({},fa,{dataTransfer:0}),ux=Wt(ax),cx=De({},ko,{relatedTarget:0}),su=Wt(cx),dx=De({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),fx=Wt(dx),hx=De({},mi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mx=Wt(hx),px=De({},mi,{data:0}),Jf=Wt(px),gx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=yx[e])?!!t[e]:!1}function yd(){return xx}var wx=De({},ko,{key:function(e){if(e.key){var t=gx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yd,charCode:function(e){return e.type==="keypress"?gl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Sx=Wt(wx),Cx=De({},fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zf=Wt(Cx),kx=De({},ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yd}),bx=Wt(kx),Ex=De({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nx=Wt(Ex),jx=De({},fa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mx=Wt(jx),Rx=[9,13,27,32],xd=Gn&&"CompositionEvent"in window,$i=null;Gn&&"documentMode"in document&&($i=document.documentMode);var Lx=Gn&&"TextEvent"in window&&!$i,og=Gn&&(!xd||$i&&8<$i&&11>=$i),eh=" ",th=!1;function lg(e,t){switch(e){case"keyup":return Rx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ag(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ms=!1;function Tx(e,t){switch(e){case"compositionend":return ag(t);case"keypress":return t.which!==32?null:(th=!0,eh);case"textInput":return e=t.data,e===eh&&th?null:e;default:return null}}function Px(e,t){if(Ms)return e==="compositionend"||!xd&&lg(e,t)?(e=ig(),pl=gd=vr=null,Ms=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return og&&t.locale!=="ko"?null:t.data;default:return null}}var _x={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_x[e.type]:t==="textarea"}function ug(e,t,n,r){$p(r),t=$l(t,"onChange"),0<t.length&&(n=new vd("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ui=null,eo=null;function Ix(e){wg(e,0)}function ha(e){var t=Ts(e);if(_p(t))return e}function Fx(e,t){if(e==="change")return t}var cg=!1;if(Gn){var iu;if(Gn){var ou="oninput"in document;if(!ou){var rh=document.createElement("div");rh.setAttribute("oninput","return;"),ou=typeof rh.oninput=="function"}iu=ou}else iu=!1;cg=iu&&(!document.documentMode||9<document.documentMode)}function sh(){Ui&&(Ui.detachEvent("onpropertychange",dg),eo=Ui=null)}function dg(e){if(e.propertyName==="value"&&ha(eo)){var t=[];ug(t,eo,e,dd(e)),Hp(Ix,t)}}function Ox(e,t,n){e==="focusin"?(sh(),Ui=t,eo=n,Ui.attachEvent("onpropertychange",dg)):e==="focusout"&&sh()}function zx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ha(eo)}function Dx(e,t){if(e==="click")return ha(t)}function Ax(e,t){if(e==="input"||e==="change")return ha(t)}function $x(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vn=typeof Object.is=="function"?Object.is:$x;function to(e,t){if(vn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Pu.call(t,s)||!vn(e[s],t[s]))return!1}return!0}function ih(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function oh(e,t){var n=ih(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ih(n)}}function fg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?fg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hg(){for(var e=window,t=_l();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_l(e.document)}return t}function wd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ux(e){var t=hg(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fg(n.ownerDocument.documentElement,n)){if(r!==null&&wd(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=oh(n,i);var o=oh(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Bx=Gn&&"documentMode"in document&&11>=document.documentMode,Rs=null,Xu=null,Bi=null,Ju=!1;function lh(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ju||Rs==null||Rs!==_l(r)||(r=Rs,"selectionStart"in r&&wd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bi&&to(Bi,r)||(Bi=r,r=$l(Xu,"onSelect"),0<r.length&&(t=new vd("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Rs)))}function Yo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ls={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionend:Yo("Transition","TransitionEnd")},lu={},mg={};Gn&&(mg=document.createElement("div").style,"AnimationEvent"in window||(delete Ls.animationend.animation,delete Ls.animationiteration.animation,delete Ls.animationstart.animation),"TransitionEvent"in window||delete Ls.transitionend.transition);function ma(e){if(lu[e])return lu[e];if(!Ls[e])return e;var t=Ls[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in mg)return lu[e]=t[n];return e}var pg=ma("animationend"),gg=ma("animationiteration"),vg=ma("animationstart"),yg=ma("transitionend"),xg=new Map,ah="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){xg.set(e,t),fs(t,[e])}for(var au=0;au<ah.length;au++){var uu=ah[au],Wx=uu.toLowerCase(),Hx=uu[0].toUpperCase()+uu.slice(1);Lr(Wx,"on"+Hx)}Lr(pg,"onAnimationEnd");Lr(gg,"onAnimationIteration");Lr(vg,"onAnimationStart");Lr("dblclick","onDoubleClick");Lr("focusin","onFocus");Lr("focusout","onBlur");Lr(yg,"onTransitionEnd");ii("onMouseEnter",["mouseout","mouseover"]);ii("onMouseLeave",["mouseout","mouseover"]);ii("onPointerEnter",["pointerout","pointerover"]);ii("onPointerLeave",["pointerout","pointerover"]);fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fi));function uh(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,W0(r,t,void 0,e),e.currentTarget=null}function wg(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;uh(s,l,c),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;uh(s,l,c),i=u}}}if(Fl)throw e=Ku,Fl=!1,Ku=null,e}function _e(e,t){var n=t[rc];n===void 0&&(n=t[rc]=new Set);var r=e+"__bubble";n.has(r)||(Sg(t,e,2,!1),n.add(r))}function cu(e,t,n){var r=0;t&&(r|=4),Sg(n,e,r,t)}var Xo="_reactListening"+Math.random().toString(36).slice(2);function no(e){if(!e[Xo]){e[Xo]=!0,Mp.forEach(function(n){n!=="selectionchange"&&(Vx.has(n)||cu(n,!1,e),cu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xo]||(t[Xo]=!0,cu("selectionchange",!1,t))}}function Sg(e,t,n,r){switch(sg(t)){case 1:var s=ix;break;case 4:s=ox;break;default:s=pd}n=s.bind(null,t,n,e),s=void 0,!Qu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function du(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ur(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Hp(function(){var c=i,f=dd(n),h=[];e:{var v=xg.get(e);if(v!==void 0){var w=vd,b=e;switch(e){case"keypress":if(gl(n)===0)break e;case"keydown":case"keyup":w=Sx;break;case"focusin":b="focus",w=su;break;case"focusout":b="blur",w=su;break;case"beforeblur":case"afterblur":w=su;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Xf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=ux;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=bx;break;case pg:case gg:case vg:w=fx;break;case yg:w=Nx;break;case"scroll":w=lx;break;case"wheel":w=Mx;break;case"copy":case"cut":case"paste":w=mx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Zf}var E=(t&4)!==0,L=!E&&e==="scroll",y=E?v!==null?v+"Capture":null:v;E=[];for(var m=c,p;m!==null;){p=m;var g=p.stateNode;if(p.tag===5&&g!==null&&(p=g,y!==null&&(g=Yi(m,y),g!=null&&E.push(ro(m,g,p)))),L)break;m=m.return}0<E.length&&(v=new w(v,b,null,n,f),h.push({event:v,listeners:E}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",v&&n!==Hu&&(b=n.relatedTarget||n.fromElement)&&(Ur(b)||b[Yn]))break e;if((w||v)&&(v=f.window===f?f:(v=f.ownerDocument)?v.defaultView||v.parentWindow:window,w?(b=n.relatedTarget||n.toElement,w=c,b=b?Ur(b):null,b!==null&&(L=hs(b),b!==L||b.tag!==5&&b.tag!==6)&&(b=null)):(w=null,b=c),w!==b)){if(E=Xf,g="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(E=Zf,g="onPointerLeave",y="onPointerEnter",m="pointer"),L=w==null?v:Ts(w),p=b==null?v:Ts(b),v=new E(g,m+"leave",w,n,f),v.target=L,v.relatedTarget=p,g=null,Ur(f)===c&&(E=new E(y,m+"enter",b,n,f),E.target=p,E.relatedTarget=L,g=E),L=g,w&&b)t:{for(E=w,y=b,m=0,p=E;p;p=Cs(p))m++;for(p=0,g=y;g;g=Cs(g))p++;for(;0<m-p;)E=Cs(E),m--;for(;0<p-m;)y=Cs(y),p--;for(;m--;){if(E===y||y!==null&&E===y.alternate)break t;E=Cs(E),y=Cs(y)}E=null}else E=null;w!==null&&ch(h,v,w,E,!1),b!==null&&L!==null&&ch(h,L,b,E,!0)}}e:{if(v=c?Ts(c):window,w=v.nodeName&&v.nodeName.toLowerCase(),w==="select"||w==="input"&&v.type==="file")var C=Fx;else if(nh(v))if(cg)C=Ax;else{C=zx;var M=Ox}else(w=v.nodeName)&&w.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(C=Dx);if(C&&(C=C(e,c))){ug(h,C,n,f);break e}M&&M(e,v,c),e==="focusout"&&(M=v._wrapperState)&&M.controlled&&v.type==="number"&&Au(v,"number",v.value)}switch(M=c?Ts(c):window,e){case"focusin":(nh(M)||M.contentEditable==="true")&&(Rs=M,Xu=c,Bi=null);break;case"focusout":Bi=Xu=Rs=null;break;case"mousedown":Ju=!0;break;case"contextmenu":case"mouseup":case"dragend":Ju=!1,lh(h,n,f);break;case"selectionchange":if(Bx)break;case"keydown":case"keyup":lh(h,n,f)}var R;if(xd)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Ms?lg(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(og&&n.locale!=="ko"&&(Ms||k!=="onCompositionStart"?k==="onCompositionEnd"&&Ms&&(R=ig()):(vr=f,gd="value"in vr?vr.value:vr.textContent,Ms=!0)),M=$l(c,k),0<M.length&&(k=new Jf(k,e,null,n,f),h.push({event:k,listeners:M}),R?k.data=R:(R=ag(n),R!==null&&(k.data=R)))),(R=Lx?Tx(e,n):Px(e,n))&&(c=$l(c,"onBeforeInput"),0<c.length&&(f=new Jf("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:c}),f.data=R))}wg(h,t)})}function ro(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $l(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Yi(e,n),i!=null&&r.unshift(ro(e,i,s)),i=Yi(e,t),i!=null&&r.push(ro(e,i,s))),e=e.return}return r}function Cs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ch(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,s?(u=Yi(n,i),u!=null&&o.unshift(ro(n,u,l))):s||(u=Yi(n,i),u!=null&&o.push(ro(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Qx=/\r\n?/g,Kx=/\u0000|\uFFFD/g;function dh(e){return(typeof e=="string"?e:""+e).replace(Qx,`
`).replace(Kx,"")}function Jo(e,t,n){if(t=dh(t),dh(e)!==t&&n)throw Error($(425))}function Ul(){}var Zu=null,ec=null;function tc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nc=typeof setTimeout=="function"?setTimeout:void 0,qx=typeof clearTimeout=="function"?clearTimeout:void 0,fh=typeof Promise=="function"?Promise:void 0,Gx=typeof queueMicrotask=="function"?queueMicrotask:typeof fh<"u"?function(e){return fh.resolve(null).then(e).catch(Yx)}:nc;function Yx(e){setTimeout(function(){throw e})}function fu(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Zi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Zi(t)}function Cr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var pi=Math.random().toString(36).slice(2),Rn="__reactFiber$"+pi,so="__reactProps$"+pi,Yn="__reactContainer$"+pi,rc="__reactEvents$"+pi,Xx="__reactListeners$"+pi,Jx="__reactHandles$"+pi;function Ur(e){var t=e[Rn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yn]||n[Rn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=hh(e);e!==null;){if(n=e[Rn])return n;e=hh(e)}return t}e=n,n=e.parentNode}return null}function bo(e){return e=e[Rn]||e[Yn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ts(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function pa(e){return e[so]||null}var sc=[],Ps=-1;function Tr(e){return{current:e}}function Ie(e){0>Ps||(e.current=sc[Ps],sc[Ps]=null,Ps--)}function Te(e,t){Ps++,sc[Ps]=e.current,e.current=t}var Rr={},xt=Tr(Rr),It=Tr(!1),is=Rr;function oi(e,t){var n=e.type.contextTypes;if(!n)return Rr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ft(e){return e=e.childContextTypes,e!=null}function Bl(){Ie(It),Ie(xt)}function mh(e,t,n){if(xt.current!==Rr)throw Error($(168));Te(xt,t),Te(It,n)}function Cg(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error($(108,O0(e)||"Unknown",s));return De({},n,r)}function Wl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rr,is=xt.current,Te(xt,e),Te(It,It.current),!0}function ph(e,t,n){var r=e.stateNode;if(!r)throw Error($(169));n?(e=Cg(e,t,is),r.__reactInternalMemoizedMergedChildContext=e,Ie(It),Ie(xt),Te(xt,e)):Ie(It),Te(It,n)}var An=null,ga=!1,hu=!1;function kg(e){An===null?An=[e]:An.push(e)}function Zx(e){ga=!0,kg(e)}function Pr(){if(!hu&&An!==null){hu=!0;var e=0,t=je;try{var n=An;for(je=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}An=null,ga=!1}catch(s){throw An!==null&&(An=An.slice(e+1)),qp(fd,Pr),s}finally{je=t,hu=!1}}return null}var _s=[],Is=0,Hl=null,Vl=0,Gt=[],Yt=0,os=null,Hn=1,Vn="";function Ar(e,t){_s[Is++]=Vl,_s[Is++]=Hl,Hl=e,Vl=t}function bg(e,t,n){Gt[Yt++]=Hn,Gt[Yt++]=Vn,Gt[Yt++]=os,os=e;var r=Hn;e=Vn;var s=32-mn(r)-1;r&=~(1<<s),n+=1;var i=32-mn(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Hn=1<<32-mn(t)+s|n<<s|r,Vn=i+e}else Hn=1<<i|n<<s|r,Vn=e}function Sd(e){e.return!==null&&(Ar(e,1),bg(e,1,0))}function Cd(e){for(;e===Hl;)Hl=_s[--Is],_s[Is]=null,Vl=_s[--Is],_s[Is]=null;for(;e===os;)os=Gt[--Yt],Gt[Yt]=null,Vn=Gt[--Yt],Gt[Yt]=null,Hn=Gt[--Yt],Gt[Yt]=null}var $t=null,At=null,Fe=!1,hn=null;function Eg(e,t){var n=Jt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function gh(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$t=e,At=Cr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$t=e,At=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=os!==null?{id:Hn,overflow:Vn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Jt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,$t=e,At=null,!0):!1;default:return!1}}function ic(e){return(e.mode&1)!==0&&(e.flags&128)===0}function oc(e){if(Fe){var t=At;if(t){var n=t;if(!gh(e,t)){if(ic(e))throw Error($(418));t=Cr(n.nextSibling);var r=$t;t&&gh(e,t)?Eg(r,n):(e.flags=e.flags&-4097|2,Fe=!1,$t=e)}}else{if(ic(e))throw Error($(418));e.flags=e.flags&-4097|2,Fe=!1,$t=e}}}function vh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$t=e}function Zo(e){if(e!==$t)return!1;if(!Fe)return vh(e),Fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!tc(e.type,e.memoizedProps)),t&&(t=At)){if(ic(e))throw Ng(),Error($(418));for(;t;)Eg(e,t),t=Cr(t.nextSibling)}if(vh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){At=Cr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}At=null}}else At=$t?Cr(e.stateNode.nextSibling):null;return!0}function Ng(){for(var e=At;e;)e=Cr(e.nextSibling)}function li(){At=$t=null,Fe=!1}function kd(e){hn===null?hn=[e]:hn.push(e)}var ew=Zn.ReactCurrentBatchConfig;function Ni(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function el(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yh(e){var t=e._init;return t(e._payload)}function jg(e){function t(y,m){if(e){var p=y.deletions;p===null?(y.deletions=[m],y.flags|=16):p.push(m)}}function n(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function s(y,m){return y=Nr(y,m),y.index=0,y.sibling=null,y}function i(y,m,p){return y.index=p,e?(p=y.alternate,p!==null?(p=p.index,p<m?(y.flags|=2,m):p):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,m,p,g){return m===null||m.tag!==6?(m=wu(p,y.mode,g),m.return=y,m):(m=s(m,p),m.return=y,m)}function u(y,m,p,g){var C=p.type;return C===js?f(y,m,p.props.children,g,p.key):m!==null&&(m.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===sr&&yh(C)===m.type)?(g=s(m,p.props),g.ref=Ni(y,m,p),g.return=y,g):(g=kl(p.type,p.key,p.props,null,y.mode,g),g.ref=Ni(y,m,p),g.return=y,g)}function c(y,m,p,g){return m===null||m.tag!==4||m.stateNode.containerInfo!==p.containerInfo||m.stateNode.implementation!==p.implementation?(m=Su(p,y.mode,g),m.return=y,m):(m=s(m,p.children||[]),m.return=y,m)}function f(y,m,p,g,C){return m===null||m.tag!==7?(m=ss(p,y.mode,g,C),m.return=y,m):(m=s(m,p),m.return=y,m)}function h(y,m,p){if(typeof m=="string"&&m!==""||typeof m=="number")return m=wu(""+m,y.mode,p),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Wo:return p=kl(m.type,m.key,m.props,null,y.mode,p),p.ref=Ni(y,null,m),p.return=y,p;case Ns:return m=Su(m,y.mode,p),m.return=y,m;case sr:var g=m._init;return h(y,g(m._payload),p)}if(_i(m)||Si(m))return m=ss(m,y.mode,p,null),m.return=y,m;el(y,m)}return null}function v(y,m,p,g){var C=m!==null?m.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return C!==null?null:l(y,m,""+p,g);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Wo:return p.key===C?u(y,m,p,g):null;case Ns:return p.key===C?c(y,m,p,g):null;case sr:return C=p._init,v(y,m,C(p._payload),g)}if(_i(p)||Si(p))return C!==null?null:f(y,m,p,g,null);el(y,p)}return null}function w(y,m,p,g,C){if(typeof g=="string"&&g!==""||typeof g=="number")return y=y.get(p)||null,l(m,y,""+g,C);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Wo:return y=y.get(g.key===null?p:g.key)||null,u(m,y,g,C);case Ns:return y=y.get(g.key===null?p:g.key)||null,c(m,y,g,C);case sr:var M=g._init;return w(y,m,p,M(g._payload),C)}if(_i(g)||Si(g))return y=y.get(p)||null,f(m,y,g,C,null);el(m,g)}return null}function b(y,m,p,g){for(var C=null,M=null,R=m,k=m=0,T=null;R!==null&&k<p.length;k++){R.index>k?(T=R,R=null):T=R.sibling;var N=v(y,R,p[k],g);if(N===null){R===null&&(R=T);break}e&&R&&N.alternate===null&&t(y,R),m=i(N,m,k),M===null?C=N:M.sibling=N,M=N,R=T}if(k===p.length)return n(y,R),Fe&&Ar(y,k),C;if(R===null){for(;k<p.length;k++)R=h(y,p[k],g),R!==null&&(m=i(R,m,k),M===null?C=R:M.sibling=R,M=R);return Fe&&Ar(y,k),C}for(R=r(y,R);k<p.length;k++)T=w(R,y,k,p[k],g),T!==null&&(e&&T.alternate!==null&&R.delete(T.key===null?k:T.key),m=i(T,m,k),M===null?C=T:M.sibling=T,M=T);return e&&R.forEach(function(_){return t(y,_)}),Fe&&Ar(y,k),C}function E(y,m,p,g){var C=Si(p);if(typeof C!="function")throw Error($(150));if(p=C.call(p),p==null)throw Error($(151));for(var M=C=null,R=m,k=m=0,T=null,N=p.next();R!==null&&!N.done;k++,N=p.next()){R.index>k?(T=R,R=null):T=R.sibling;var _=v(y,R,N.value,g);if(_===null){R===null&&(R=T);break}e&&R&&_.alternate===null&&t(y,R),m=i(_,m,k),M===null?C=_:M.sibling=_,M=_,R=T}if(N.done)return n(y,R),Fe&&Ar(y,k),C;if(R===null){for(;!N.done;k++,N=p.next())N=h(y,N.value,g),N!==null&&(m=i(N,m,k),M===null?C=N:M.sibling=N,M=N);return Fe&&Ar(y,k),C}for(R=r(y,R);!N.done;k++,N=p.next())N=w(R,y,k,N.value,g),N!==null&&(e&&N.alternate!==null&&R.delete(N.key===null?k:N.key),m=i(N,m,k),M===null?C=N:M.sibling=N,M=N);return e&&R.forEach(function(B){return t(y,B)}),Fe&&Ar(y,k),C}function L(y,m,p,g){if(typeof p=="object"&&p!==null&&p.type===js&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Wo:e:{for(var C=p.key,M=m;M!==null;){if(M.key===C){if(C=p.type,C===js){if(M.tag===7){n(y,M.sibling),m=s(M,p.props.children),m.return=y,y=m;break e}}else if(M.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===sr&&yh(C)===M.type){n(y,M.sibling),m=s(M,p.props),m.ref=Ni(y,M,p),m.return=y,y=m;break e}n(y,M);break}else t(y,M);M=M.sibling}p.type===js?(m=ss(p.props.children,y.mode,g,p.key),m.return=y,y=m):(g=kl(p.type,p.key,p.props,null,y.mode,g),g.ref=Ni(y,m,p),g.return=y,y=g)}return o(y);case Ns:e:{for(M=p.key;m!==null;){if(m.key===M)if(m.tag===4&&m.stateNode.containerInfo===p.containerInfo&&m.stateNode.implementation===p.implementation){n(y,m.sibling),m=s(m,p.children||[]),m.return=y,y=m;break e}else{n(y,m);break}else t(y,m);m=m.sibling}m=Su(p,y.mode,g),m.return=y,y=m}return o(y);case sr:return M=p._init,L(y,m,M(p._payload),g)}if(_i(p))return b(y,m,p,g);if(Si(p))return E(y,m,p,g);el(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,m!==null&&m.tag===6?(n(y,m.sibling),m=s(m,p),m.return=y,y=m):(n(y,m),m=wu(p,y.mode,g),m.return=y,y=m),o(y)):n(y,m)}return L}var ai=jg(!0),Mg=jg(!1),Ql=Tr(null),Kl=null,Fs=null,bd=null;function Ed(){bd=Fs=Kl=null}function Nd(e){var t=Ql.current;Ie(Ql),e._currentValue=t}function lc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Bs(e,t){Kl=e,bd=Fs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_t=!0),e.firstContext=null)}function en(e){var t=e._currentValue;if(bd!==e)if(e={context:e,memoizedValue:t,next:null},Fs===null){if(Kl===null)throw Error($(308));Fs=e,Kl.dependencies={lanes:0,firstContext:e}}else Fs=Fs.next=e;return t}var Br=null;function jd(e){Br===null?Br=[e]:Br.push(e)}function Rg(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,jd(t)):(n.next=s.next,s.next=n),t.interleaved=n,Xn(e,r)}function Xn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ir=!1;function Md(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Xn(e,n)}return s=r.interleaved,s===null?(t.next=t,jd(r)):(t.next=s.next,s.next=t),r.interleaved=t,Xn(e,n)}function vl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,hd(e,n)}}function xh(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ql(e,t,n,r){var s=e.updateQueue;ir=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(i!==null){var h=s.baseState;o=0,f=c=u=null,l=i;do{var v=l.lane,w=l.eventTime;if((r&v)===v){f!==null&&(f=f.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,E=l;switch(v=t,w=n,E.tag){case 1:if(b=E.payload,typeof b=="function"){h=b.call(w,h,v);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=E.payload,v=typeof b=="function"?b.call(w,h,v):b,v==null)break e;h=De({},h,v);break e;case 2:ir=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else w={eventTime:w,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=w,u=h):f=f.next=w,o|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(f===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);as|=o,e.lanes=o,e.memoizedState=h}}function wh(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Eo={},Tn=Tr(Eo),io=Tr(Eo),oo=Tr(Eo);function Wr(e){if(e===Eo)throw Error($(174));return e}function Rd(e,t){switch(Te(oo,t),Te(io,e),Te(Tn,Eo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Uu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Uu(t,e)}Ie(Tn),Te(Tn,t)}function ui(){Ie(Tn),Ie(io),Ie(oo)}function Tg(e){Wr(oo.current);var t=Wr(Tn.current),n=Uu(t,e.type);t!==n&&(Te(io,e),Te(Tn,n))}function Ld(e){io.current===e&&(Ie(Tn),Ie(io))}var Oe=Tr(0);function Gl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mu=[];function Td(){for(var e=0;e<mu.length;e++)mu[e]._workInProgressVersionPrimary=null;mu.length=0}var yl=Zn.ReactCurrentDispatcher,pu=Zn.ReactCurrentBatchConfig,ls=0,ze=null,Ye=null,rt=null,Yl=!1,Wi=!1,lo=0,tw=0;function gt(){throw Error($(321))}function Pd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!vn(e[n],t[n]))return!1;return!0}function _d(e,t,n,r,s,i){if(ls=i,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,yl.current=e===null||e.memoizedState===null?iw:ow,e=n(r,s),Wi){i=0;do{if(Wi=!1,lo=0,25<=i)throw Error($(301));i+=1,rt=Ye=null,t.updateQueue=null,yl.current=lw,e=n(r,s)}while(Wi)}if(yl.current=Xl,t=Ye!==null&&Ye.next!==null,ls=0,rt=Ye=ze=null,Yl=!1,t)throw Error($(300));return e}function Id(){var e=lo!==0;return lo=0,e}function En(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?ze.memoizedState=rt=e:rt=rt.next=e,rt}function tn(){if(Ye===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=rt===null?ze.memoizedState:rt.next;if(t!==null)rt=t,Ye=e;else{if(e===null)throw Error($(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},rt===null?ze.memoizedState=rt=e:rt=rt.next=e}return rt}function ao(e,t){return typeof t=="function"?t(e):t}function gu(e){var t=tn(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=Ye,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,c=i;do{var f=c.lane;if((ls&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,o=r):u=u.next=h,ze.lanes|=f,as|=f}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=l,vn(r,t.memoizedState)||(_t=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,ze.lanes|=i,as|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function vu(e){var t=tn(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);vn(i,t.memoizedState)||(_t=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Pg(){}function _g(e,t){var n=ze,r=tn(),s=t(),i=!vn(r.memoizedState,s);if(i&&(r.memoizedState=s,_t=!0),r=r.queue,Fd(Og.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,uo(9,Fg.bind(null,n,r,s,t),void 0,null),st===null)throw Error($(349));ls&30||Ig(n,t,s)}return s}function Ig(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Fg(e,t,n,r){t.value=n,t.getSnapshot=r,zg(t)&&Dg(e)}function Og(e,t,n){return n(function(){zg(t)&&Dg(e)})}function zg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vn(e,n)}catch{return!0}}function Dg(e){var t=Xn(e,1);t!==null&&pn(t,e,1,-1)}function Sh(e){var t=En();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:e},t.queue=e,e=e.dispatch=sw.bind(null,ze,e),[t.memoizedState,e]}function uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ag(){return tn().memoizedState}function xl(e,t,n,r){var s=En();ze.flags|=e,s.memoizedState=uo(1|t,n,void 0,r===void 0?null:r)}function va(e,t,n,r){var s=tn();r=r===void 0?null:r;var i=void 0;if(Ye!==null){var o=Ye.memoizedState;if(i=o.destroy,r!==null&&Pd(r,o.deps)){s.memoizedState=uo(t,n,i,r);return}}ze.flags|=e,s.memoizedState=uo(1|t,n,i,r)}function Ch(e,t){return xl(8390656,8,e,t)}function Fd(e,t){return va(2048,8,e,t)}function $g(e,t){return va(4,2,e,t)}function Ug(e,t){return va(4,4,e,t)}function Bg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Wg(e,t,n){return n=n!=null?n.concat([e]):null,va(4,4,Bg.bind(null,t,e),n)}function Od(){}function Hg(e,t){var n=tn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Pd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Vg(e,t){var n=tn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Pd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qg(e,t,n){return ls&21?(vn(n,t)||(n=Xp(),ze.lanes|=n,as|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_t=!0),e.memoizedState=n)}function nw(e,t){var n=je;je=n!==0&&4>n?n:4,e(!0);var r=pu.transition;pu.transition={};try{e(!1),t()}finally{je=n,pu.transition=r}}function Kg(){return tn().memoizedState}function rw(e,t,n){var r=Er(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qg(e))Gg(t,n);else if(n=Rg(e,t,n,r),n!==null){var s=Nt();pn(n,e,r,s),Yg(n,t,r)}}function sw(e,t,n){var r=Er(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qg(e))Gg(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,vn(l,o)){var u=t.interleaved;u===null?(s.next=s,jd(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=Rg(e,t,s,r),n!==null&&(s=Nt(),pn(n,e,r,s),Yg(n,t,r))}}function qg(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function Gg(e,t){Wi=Yl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yg(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,hd(e,n)}}var Xl={readContext:en,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},iw={readContext:en,useCallback:function(e,t){return En().memoizedState=[e,t===void 0?null:t],e},useContext:en,useEffect:Ch,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,xl(4194308,4,Bg.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xl(4194308,4,e,t)},useInsertionEffect:function(e,t){return xl(4,2,e,t)},useMemo:function(e,t){var n=En();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=En();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=rw.bind(null,ze,e),[r.memoizedState,e]},useRef:function(e){var t=En();return e={current:e},t.memoizedState=e},useState:Sh,useDebugValue:Od,useDeferredValue:function(e){return En().memoizedState=e},useTransition:function(){var e=Sh(!1),t=e[0];return e=nw.bind(null,e[1]),En().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ze,s=En();if(Fe){if(n===void 0)throw Error($(407));n=n()}else{if(n=t(),st===null)throw Error($(349));ls&30||Ig(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Ch(Og.bind(null,r,i,e),[e]),r.flags|=2048,uo(9,Fg.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=En(),t=st.identifierPrefix;if(Fe){var n=Vn,r=Hn;n=(r&~(1<<32-mn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=lo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=tw++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ow={readContext:en,useCallback:Hg,useContext:en,useEffect:Fd,useImperativeHandle:Wg,useInsertionEffect:$g,useLayoutEffect:Ug,useMemo:Vg,useReducer:gu,useRef:Ag,useState:function(){return gu(ao)},useDebugValue:Od,useDeferredValue:function(e){var t=tn();return Qg(t,Ye.memoizedState,e)},useTransition:function(){var e=gu(ao)[0],t=tn().memoizedState;return[e,t]},useMutableSource:Pg,useSyncExternalStore:_g,useId:Kg,unstable_isNewReconciler:!1},lw={readContext:en,useCallback:Hg,useContext:en,useEffect:Fd,useImperativeHandle:Wg,useInsertionEffect:$g,useLayoutEffect:Ug,useMemo:Vg,useReducer:vu,useRef:Ag,useState:function(){return vu(ao)},useDebugValue:Od,useDeferredValue:function(e){var t=tn();return Ye===null?t.memoizedState=e:Qg(t,Ye.memoizedState,e)},useTransition:function(){var e=vu(ao)[0],t=tn().memoizedState;return[e,t]},useMutableSource:Pg,useSyncExternalStore:_g,useId:Kg,unstable_isNewReconciler:!1};function an(e,t){if(e&&e.defaultProps){t=De({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ac(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:De({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ya={isMounted:function(e){return(e=e._reactInternals)?hs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Nt(),s=Er(e),i=Qn(r,s);i.payload=t,n!=null&&(i.callback=n),t=kr(e,i,s),t!==null&&(pn(t,e,s,r),vl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Nt(),s=Er(e),i=Qn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=kr(e,i,s),t!==null&&(pn(t,e,s,r),vl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Nt(),r=Er(e),s=Qn(n,r);s.tag=2,t!=null&&(s.callback=t),t=kr(e,s,r),t!==null&&(pn(t,e,r,n),vl(t,e,r))}};function kh(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!to(n,r)||!to(s,i):!0}function Xg(e,t,n){var r=!1,s=Rr,i=t.contextType;return typeof i=="object"&&i!==null?i=en(i):(s=Ft(t)?is:xt.current,r=t.contextTypes,i=(r=r!=null)?oi(e,s):Rr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ya,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function bh(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ya.enqueueReplaceState(t,t.state,null)}function uc(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Md(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=en(i):(i=Ft(t)?is:xt.current,s.context=oi(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ac(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ya.enqueueReplaceState(s,s.state,null),ql(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ci(e,t){try{var n="",r=t;do n+=F0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function yu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function cc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var aw=typeof WeakMap=="function"?WeakMap:Map;function Jg(e,t,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zl||(Zl=!0,wc=r),cc(e,t)},n}function Zg(e,t,n){n=Qn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){cc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){cc(e,t),typeof r!="function"&&(br===null?br=new Set([this]):br.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Eh(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new aw;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Cw.bind(null,e,t,n),t.then(e,e))}function Nh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function jh(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qn(-1,1),t.tag=2,kr(n,t,1))),n.lanes|=1),e)}var uw=Zn.ReactCurrentOwner,_t=!1;function bt(e,t,n,r){t.child=e===null?Mg(t,null,n,r):ai(t,e.child,n,r)}function Mh(e,t,n,r,s){n=n.render;var i=t.ref;return Bs(t,s),r=_d(e,t,n,r,i,s),n=Id(),e!==null&&!_t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Jn(e,t,s)):(Fe&&n&&Sd(t),t.flags|=1,bt(e,t,r,s),t.child)}function Rh(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Hd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,ev(e,t,i,r,s)):(e=kl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:to,n(o,r)&&e.ref===t.ref)return Jn(e,t,s)}return t.flags|=1,e=Nr(i,r),e.ref=t.ref,e.return=t,t.child=e}function ev(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(to(i,r)&&e.ref===t.ref)if(_t=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(_t=!0);else return t.lanes=e.lanes,Jn(e,t,s)}return dc(e,t,n,r,s)}function tv(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(zs,Dt),Dt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Te(zs,Dt),Dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(zs,Dt),Dt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Te(zs,Dt),Dt|=r;return bt(e,t,s,n),t.child}function nv(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function dc(e,t,n,r,s){var i=Ft(n)?is:xt.current;return i=oi(t,i),Bs(t,s),n=_d(e,t,n,r,i,s),r=Id(),e!==null&&!_t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Jn(e,t,s)):(Fe&&r&&Sd(t),t.flags|=1,bt(e,t,n,s),t.child)}function Lh(e,t,n,r,s){if(Ft(n)){var i=!0;Wl(t)}else i=!1;if(Bs(t,s),t.stateNode===null)wl(e,t),Xg(t,n,r),uc(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=en(c):(c=Ft(n)?is:xt.current,c=oi(t,c));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&bh(t,o,r,c),ir=!1;var v=t.memoizedState;o.state=v,ql(t,r,o,s),u=t.memoizedState,l!==r||v!==u||It.current||ir?(typeof f=="function"&&(ac(t,n,f,r),u=t.memoizedState),(l=ir||kh(t,n,l,r,v,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Lg(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:an(t.type,l),o.props=c,h=t.pendingProps,v=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=en(u):(u=Ft(n)?is:xt.current,u=oi(t,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||v!==u)&&bh(t,o,r,u),ir=!1,v=t.memoizedState,o.state=v,ql(t,r,o,s);var b=t.memoizedState;l!==h||v!==b||It.current||ir?(typeof w=="function"&&(ac(t,n,w,r),b=t.memoizedState),(c=ir||kh(t,n,c,r,v,b,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),o.props=r,o.state=b,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return fc(e,t,n,r,i,s)}function fc(e,t,n,r,s,i){nv(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&ph(t,n,!1),Jn(e,t,i);r=t.stateNode,uw.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=ai(t,e.child,null,i),t.child=ai(t,null,l,i)):bt(e,t,l,i),t.memoizedState=r.state,s&&ph(t,n,!0),t.child}function rv(e){var t=e.stateNode;t.pendingContext?mh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&mh(e,t.context,!1),Rd(e,t.containerInfo)}function Th(e,t,n,r,s){return li(),kd(s),t.flags|=256,bt(e,t,n,r),t.child}var hc={dehydrated:null,treeContext:null,retryLane:0};function mc(e){return{baseLanes:e,cachePool:null,transitions:null}}function sv(e,t,n){var r=t.pendingProps,s=Oe.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Te(Oe,s&1),e===null)return oc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Sa(o,r,0,null),e=ss(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=mc(n),t.memoizedState=hc,e):zd(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return cw(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Nr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Nr(l,i):(i=ss(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?mc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=hc,r}return i=e.child,e=i.sibling,r=Nr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function zd(e,t){return t=Sa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function tl(e,t,n,r){return r!==null&&kd(r),ai(t,e.child,null,n),e=zd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cw(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=yu(Error($(422))),tl(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Sa({mode:"visible",children:r.children},s,0,null),i=ss(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ai(t,e.child,null,o),t.child.memoizedState=mc(o),t.memoizedState=hc,i);if(!(t.mode&1))return tl(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=yu(i,r,void 0),tl(e,t,o,r)}if(l=(o&e.childLanes)!==0,_t||l){if(r=st,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Xn(e,s),pn(r,e,s,-1))}return Wd(),r=yu(Error($(421))),tl(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=kw.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,At=Cr(s.nextSibling),$t=t,Fe=!0,hn=null,e!==null&&(Gt[Yt++]=Hn,Gt[Yt++]=Vn,Gt[Yt++]=os,Hn=e.id,Vn=e.overflow,os=t),t=zd(t,r.children),t.flags|=4096,t)}function Ph(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),lc(e.return,t,n)}function xu(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function iv(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(bt(e,t,r.children,n),r=Oe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ph(e,n,t);else if(e.tag===19)Ph(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Te(Oe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Gl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),xu(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Gl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}xu(t,!0,n,null,i);break;case"together":xu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),as|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,n=Nr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Nr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function dw(e,t,n){switch(t.tag){case 3:rv(t),li();break;case 5:Tg(t);break;case 1:Ft(t.type)&&Wl(t);break;case 4:Rd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Te(Ql,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Te(Oe,Oe.current&1),t.flags|=128,null):n&t.child.childLanes?sv(e,t,n):(Te(Oe,Oe.current&1),e=Jn(e,t,n),e!==null?e.sibling:null);Te(Oe,Oe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return iv(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Oe,Oe.current),r)break;return null;case 22:case 23:return t.lanes=0,tv(e,t,n)}return Jn(e,t,n)}var ov,pc,lv,av;ov=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pc=function(){};lv=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Wr(Tn.current);var i=null;switch(n){case"input":s=zu(e,s),r=zu(e,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=$u(e,s),r=$u(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ul)}Bu(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(qi.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(qi.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&_e("scroll",e),i||l===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};av=function(e,t,n,r){n!==r&&(t.flags|=4)};function ji(e,t){if(!Fe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function fw(e,t,n){var r=t.pendingProps;switch(Cd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return Ft(t.type)&&Bl(),vt(t),null;case 3:return r=t.stateNode,ui(),Ie(It),Ie(xt),Td(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Zo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hn!==null&&(kc(hn),hn=null))),pc(e,t),vt(t),null;case 5:Ld(t);var s=Wr(oo.current);if(n=t.type,e!==null&&t.stateNode!=null)lv(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error($(166));return vt(t),null}if(e=Wr(Tn.current),Zo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Rn]=t,r[so]=i,e=(t.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<Fi.length;s++)_e(Fi[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":Uf(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":Wf(r,i),_e("invalid",r)}Bu(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Jo(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Jo(r.textContent,l,e),s=["children",""+l]):qi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":Ho(r),Bf(r,i,!0);break;case"textarea":Ho(r),Hf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ul)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Op(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Rn]=t,e[so]=r,ov(e,t,!1,!1),t.stateNode=e;e:{switch(o=Wu(n,r),n){case"dialog":_e("cancel",e),_e("close",e),s=r;break;case"iframe":case"object":case"embed":_e("load",e),s=r;break;case"video":case"audio":for(s=0;s<Fi.length;s++)_e(Fi[s],e);s=r;break;case"source":_e("error",e),s=r;break;case"img":case"image":case"link":_e("error",e),_e("load",e),s=r;break;case"details":_e("toggle",e),s=r;break;case"input":Uf(e,r),s=zu(e,r),_e("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),_e("invalid",e);break;case"textarea":Wf(e,r),s=$u(e,r),_e("invalid",e);break;default:s=r}Bu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Ap(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&zp(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Gi(e,u):typeof u=="number"&&Gi(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&_e("scroll",e):u!=null&&ld(e,i,u,o))}switch(n){case"input":Ho(e),Bf(e,r,!1);break;case"textarea":Ho(e),Hf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Mr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Ds(e,!!r.multiple,i,!1):r.defaultValue!=null&&Ds(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ul)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vt(t),null;case 6:if(e&&t.stateNode!=null)av(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error($(166));if(n=Wr(oo.current),Wr(Tn.current),Zo(t)){if(r=t.stateNode,n=t.memoizedProps,r[Rn]=t,(i=r.nodeValue!==n)&&(e=$t,e!==null))switch(e.tag){case 3:Jo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Jo(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rn]=t,t.stateNode=r}return vt(t),null;case 13:if(Ie(Oe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Fe&&At!==null&&t.mode&1&&!(t.flags&128))Ng(),li(),t.flags|=98560,i=!1;else if(i=Zo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error($(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Rn]=t}else li(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vt(t),i=!1}else hn!==null&&(kc(hn),hn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Oe.current&1?Je===0&&(Je=3):Wd())),t.updateQueue!==null&&(t.flags|=4),vt(t),null);case 4:return ui(),pc(e,t),e===null&&no(t.stateNode.containerInfo),vt(t),null;case 10:return Nd(t.type._context),vt(t),null;case 17:return Ft(t.type)&&Bl(),vt(t),null;case 19:if(Ie(Oe),i=t.memoizedState,i===null)return vt(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)ji(i,!1);else{if(Je!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Gl(e),o!==null){for(t.flags|=128,ji(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Te(Oe,Oe.current&1|2),t.child}e=e.sibling}i.tail!==null&&He()>di&&(t.flags|=128,r=!0,ji(i,!1),t.lanes=4194304)}else{if(!r)if(e=Gl(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ji(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Fe)return vt(t),null}else 2*He()-i.renderingStartTime>di&&n!==1073741824&&(t.flags|=128,r=!0,ji(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=He(),t.sibling=null,n=Oe.current,Te(Oe,r?n&1|2:n&1),t):(vt(t),null);case 22:case 23:return Bd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Dt&1073741824&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function hw(e,t){switch(Cd(t),t.tag){case 1:return Ft(t.type)&&Bl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ui(),Ie(It),Ie(xt),Td(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ld(t),null;case 13:if(Ie(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie(Oe),null;case 4:return ui(),null;case 10:return Nd(t.type._context),null;case 22:case 23:return Bd(),null;case 24:return null;default:return null}}var nl=!1,yt=!1,mw=typeof WeakSet=="function"?WeakSet:Set,G=null;function Os(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(e,t,r)}else n.current=null}function gc(e,t,n){try{n()}catch(r){Be(e,t,r)}}var _h=!1;function pw(e,t){if(Zu=Dl,e=hg(),wd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,h=e,v=null;t:for(;;){for(var w;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(w=h.firstChild)!==null;)v=h,h=w;for(;;){if(h===e)break t;if(v===n&&++c===s&&(l=o),v===i&&++f===r&&(u=o),(w=h.nextSibling)!==null)break;h=v,v=h.parentNode}h=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ec={focusedElem:e,selectionRange:n},Dl=!1,G=t;G!==null;)if(t=G,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,G=e;else for(;G!==null;){t=G;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var E=b.memoizedProps,L=b.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?E:an(t.type,E),L);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(g){Be(t,t.return,g)}if(e=t.sibling,e!==null){e.return=t.return,G=e;break}G=t.return}return b=_h,_h=!1,b}function Hi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&gc(t,n,i)}s=s.next}while(s!==r)}}function xa(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function vc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function uv(e){var t=e.alternate;t!==null&&(e.alternate=null,uv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Rn],delete t[so],delete t[rc],delete t[Xx],delete t[Jx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cv(e){return e.tag===5||e.tag===3||e.tag===4}function Ih(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||cv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ul));else if(r!==4&&(e=e.child,e!==null))for(yc(e,t,n),e=e.sibling;e!==null;)yc(e,t,n),e=e.sibling}function xc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(xc(e,t,n),e=e.sibling;e!==null;)xc(e,t,n),e=e.sibling}var ut=null,fn=!1;function tr(e,t,n){for(n=n.child;n!==null;)dv(e,t,n),n=n.sibling}function dv(e,t,n){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(da,n)}catch{}switch(n.tag){case 5:yt||Os(n,t);case 6:var r=ut,s=fn;ut=null,tr(e,t,n),ut=r,fn=s,ut!==null&&(fn?(e=ut,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(fn?(e=ut,n=n.stateNode,e.nodeType===8?fu(e.parentNode,n):e.nodeType===1&&fu(e,n),Zi(e)):fu(ut,n.stateNode));break;case 4:r=ut,s=fn,ut=n.stateNode.containerInfo,fn=!0,tr(e,t,n),ut=r,fn=s;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&gc(n,t,o),s=s.next}while(s!==r)}tr(e,t,n);break;case 1:if(!yt&&(Os(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Be(n,t,l)}tr(e,t,n);break;case 21:tr(e,t,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,tr(e,t,n),yt=r):tr(e,t,n);break;default:tr(e,t,n)}}function Fh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new mw),t.forEach(function(r){var s=bw.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function on(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ut=l.stateNode,fn=!1;break e;case 3:ut=l.stateNode.containerInfo,fn=!0;break e;case 4:ut=l.stateNode.containerInfo,fn=!0;break e}l=l.return}if(ut===null)throw Error($(160));dv(i,o,s),ut=null,fn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Be(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fv(t,e),t=t.sibling}function fv(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(on(t,e),bn(e),r&4){try{Hi(3,e,e.return),xa(3,e)}catch(E){Be(e,e.return,E)}try{Hi(5,e,e.return)}catch(E){Be(e,e.return,E)}}break;case 1:on(t,e),bn(e),r&512&&n!==null&&Os(n,n.return);break;case 5:if(on(t,e),bn(e),r&512&&n!==null&&Os(n,n.return),e.flags&32){var s=e.stateNode;try{Gi(s,"")}catch(E){Be(e,e.return,E)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Ip(s,i),Wu(l,o);var c=Wu(l,i);for(o=0;o<u.length;o+=2){var f=u[o],h=u[o+1];f==="style"?Ap(s,h):f==="dangerouslySetInnerHTML"?zp(s,h):f==="children"?Gi(s,h):ld(s,f,h,c)}switch(l){case"input":Du(s,i);break;case"textarea":Fp(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Ds(s,!!i.multiple,w,!1):v!==!!i.multiple&&(i.defaultValue!=null?Ds(s,!!i.multiple,i.defaultValue,!0):Ds(s,!!i.multiple,i.multiple?[]:"",!1))}s[so]=i}catch(E){Be(e,e.return,E)}}break;case 6:if(on(t,e),bn(e),r&4){if(e.stateNode===null)throw Error($(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(E){Be(e,e.return,E)}}break;case 3:if(on(t,e),bn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zi(t.containerInfo)}catch(E){Be(e,e.return,E)}break;case 4:on(t,e),bn(e);break;case 13:on(t,e),bn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||($d=He())),r&4&&Fh(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(yt=(c=yt)||f,on(t,e),yt=c):on(t,e),bn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(G=e,f=e.child;f!==null;){for(h=G=f;G!==null;){switch(v=G,w=v.child,v.tag){case 0:case 11:case 14:case 15:Hi(4,v,v.return);break;case 1:Os(v,v.return);var b=v.stateNode;if(typeof b.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(E){Be(r,n,E)}}break;case 5:Os(v,v.return);break;case 22:if(v.memoizedState!==null){zh(h);continue}}w!==null?(w.return=v,G=w):zh(h)}f=f.sibling}e:for(f=null,h=e;;){if(h.tag===5){if(f===null){f=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Dp("display",o))}catch(E){Be(e,e.return,E)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(E){Be(e,e.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:on(t,e),bn(e),r&4&&Fh(e);break;case 21:break;default:on(t,e),bn(e)}}function bn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(cv(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Gi(s,""),r.flags&=-33);var i=Ih(e);xc(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Ih(e);yc(e,l,o);break;default:throw Error($(161))}}catch(u){Be(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gw(e,t,n){G=e,hv(e)}function hv(e,t,n){for(var r=(e.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||nl;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||yt;l=nl;var c=yt;if(nl=o,(yt=u)&&!c)for(G=s;G!==null;)o=G,u=o.child,o.tag===22&&o.memoizedState!==null?Dh(s):u!==null?(u.return=o,G=u):Dh(s);for(;i!==null;)G=i,hv(i),i=i.sibling;G=s,nl=l,yt=c}Oh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):Oh(e)}}function Oh(e){for(;G!==null;){var t=G;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yt||xa(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!yt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:an(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&wh(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}wh(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Zi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}yt||t.flags&512&&vc(t)}catch(v){Be(t,t.return,v)}}if(t===e){G=null;break}if(n=t.sibling,n!==null){n.return=t.return,G=n;break}G=t.return}}function zh(e){for(;G!==null;){var t=G;if(t===e){G=null;break}var n=t.sibling;if(n!==null){n.return=t.return,G=n;break}G=t.return}}function Dh(e){for(;G!==null;){var t=G;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{xa(4,t)}catch(u){Be(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){Be(t,s,u)}}var i=t.return;try{vc(t)}catch(u){Be(t,i,u)}break;case 5:var o=t.return;try{vc(t)}catch(u){Be(t,o,u)}}}catch(u){Be(t,t.return,u)}if(t===e){G=null;break}var l=t.sibling;if(l!==null){l.return=t.return,G=l;break}G=t.return}}var vw=Math.ceil,Jl=Zn.ReactCurrentDispatcher,Dd=Zn.ReactCurrentOwner,Zt=Zn.ReactCurrentBatchConfig,ke=0,st=null,Ke=null,ct=0,Dt=0,zs=Tr(0),Je=0,co=null,as=0,wa=0,Ad=0,Vi=null,Pt=null,$d=0,di=1/0,Dn=null,Zl=!1,wc=null,br=null,rl=!1,yr=null,ea=0,Qi=0,Sc=null,Sl=-1,Cl=0;function Nt(){return ke&6?He():Sl!==-1?Sl:Sl=He()}function Er(e){return e.mode&1?ke&2&&ct!==0?ct&-ct:ew.transition!==null?(Cl===0&&(Cl=Xp()),Cl):(e=je,e!==0||(e=window.event,e=e===void 0?16:sg(e.type)),e):1}function pn(e,t,n,r){if(50<Qi)throw Qi=0,Sc=null,Error($(185));Co(e,n,r),(!(ke&2)||e!==st)&&(e===st&&(!(ke&2)&&(wa|=n),Je===4&&lr(e,ct)),Ot(e,r),n===1&&ke===0&&!(t.mode&1)&&(di=He()+500,ga&&Pr()))}function Ot(e,t){var n=e.callbackNode;ex(e,t);var r=zl(e,e===st?ct:0);if(r===0)n!==null&&Kf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Kf(n),t===1)e.tag===0?Zx(Ah.bind(null,e)):kg(Ah.bind(null,e)),Gx(function(){!(ke&6)&&Pr()}),n=null;else{switch(Jp(r)){case 1:n=fd;break;case 4:n=Gp;break;case 16:n=Ol;break;case 536870912:n=Yp;break;default:n=Ol}n=Sv(n,mv.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function mv(e,t){if(Sl=-1,Cl=0,ke&6)throw Error($(327));var n=e.callbackNode;if(Ws()&&e.callbackNode!==n)return null;var r=zl(e,e===st?ct:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ta(e,r);else{t=r;var s=ke;ke|=2;var i=gv();(st!==e||ct!==t)&&(Dn=null,di=He()+500,rs(e,t));do try{ww();break}catch(l){pv(e,l)}while(!0);Ed(),Jl.current=i,ke=s,Ke!==null?t=0:(st=null,ct=0,t=Je)}if(t!==0){if(t===2&&(s=qu(e),s!==0&&(r=s,t=Cc(e,s))),t===1)throw n=co,rs(e,0),lr(e,r),Ot(e,He()),n;if(t===6)lr(e,r);else{if(s=e.current.alternate,!(r&30)&&!yw(s)&&(t=ta(e,r),t===2&&(i=qu(e),i!==0&&(r=i,t=Cc(e,i))),t===1))throw n=co,rs(e,0),lr(e,r),Ot(e,He()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error($(345));case 2:$r(e,Pt,Dn);break;case 3:if(lr(e,r),(r&130023424)===r&&(t=$d+500-He(),10<t)){if(zl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Nt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=nc($r.bind(null,e,Pt,Dn),t);break}$r(e,Pt,Dn);break;case 4:if(lr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-mn(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vw(r/1960))-r,10<r){e.timeoutHandle=nc($r.bind(null,e,Pt,Dn),r);break}$r(e,Pt,Dn);break;case 5:$r(e,Pt,Dn);break;default:throw Error($(329))}}}return Ot(e,He()),e.callbackNode===n?mv.bind(null,e):null}function Cc(e,t){var n=Vi;return e.current.memoizedState.isDehydrated&&(rs(e,t).flags|=256),e=ta(e,t),e!==2&&(t=Pt,Pt=n,t!==null&&kc(t)),e}function kc(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function yw(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function lr(e,t){for(t&=~Ad,t&=~wa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-mn(t),r=1<<n;e[n]=-1,t&=~r}}function Ah(e){if(ke&6)throw Error($(327));Ws();var t=zl(e,0);if(!(t&1))return Ot(e,He()),null;var n=ta(e,t);if(e.tag!==0&&n===2){var r=qu(e);r!==0&&(t=r,n=Cc(e,r))}if(n===1)throw n=co,rs(e,0),lr(e,t),Ot(e,He()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$r(e,Pt,Dn),Ot(e,He()),null}function Ud(e,t){var n=ke;ke|=1;try{return e(t)}finally{ke=n,ke===0&&(di=He()+500,ga&&Pr())}}function us(e){yr!==null&&yr.tag===0&&!(ke&6)&&Ws();var t=ke;ke|=1;var n=Zt.transition,r=je;try{if(Zt.transition=null,je=1,e)return e()}finally{je=r,Zt.transition=n,ke=t,!(ke&6)&&Pr()}}function Bd(){Dt=zs.current,Ie(zs)}function rs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,qx(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(Cd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bl();break;case 3:ui(),Ie(It),Ie(xt),Td();break;case 5:Ld(r);break;case 4:ui();break;case 13:Ie(Oe);break;case 19:Ie(Oe);break;case 10:Nd(r.type._context);break;case 22:case 23:Bd()}n=n.return}if(st=e,Ke=e=Nr(e.current,null),ct=Dt=t,Je=0,co=null,Ad=wa=as=0,Pt=Vi=null,Br!==null){for(t=0;t<Br.length;t++)if(n=Br[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Br=null}return e}function pv(e,t){do{var n=Ke;try{if(Ed(),yl.current=Xl,Yl){for(var r=ze.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Yl=!1}if(ls=0,rt=Ye=ze=null,Wi=!1,lo=0,Dd.current=null,n===null||n.return===null){Je=1,co=t,Ke=null;break}e:{var i=e,o=n.return,l=n,u=t;if(t=ct,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.lanes=v.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=Nh(o);if(w!==null){w.flags&=-257,jh(w,o,l,i,t),w.mode&1&&Eh(i,c,t),t=w,u=c;var b=t.updateQueue;if(b===null){var E=new Set;E.add(u),t.updateQueue=E}else b.add(u);break e}else{if(!(t&1)){Eh(i,c,t),Wd();break e}u=Error($(426))}}else if(Fe&&l.mode&1){var L=Nh(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),jh(L,o,l,i,t),kd(ci(u,l));break e}}i=u=ci(u,l),Je!==4&&(Je=2),Vi===null?Vi=[i]:Vi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=Jg(i,u,t);xh(i,y);break e;case 1:l=u;var m=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(br===null||!br.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var g=Zg(i,l,t);xh(i,g);break e}}i=i.return}while(i!==null)}yv(n)}catch(C){t=C,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function gv(){var e=Jl.current;return Jl.current=Xl,e===null?Xl:e}function Wd(){(Je===0||Je===3||Je===2)&&(Je=4),st===null||!(as&268435455)&&!(wa&268435455)||lr(st,ct)}function ta(e,t){var n=ke;ke|=2;var r=gv();(st!==e||ct!==t)&&(Dn=null,rs(e,t));do try{xw();break}catch(s){pv(e,s)}while(!0);if(Ed(),ke=n,Jl.current=r,Ke!==null)throw Error($(261));return st=null,ct=0,Je}function xw(){for(;Ke!==null;)vv(Ke)}function ww(){for(;Ke!==null&&!V0();)vv(Ke)}function vv(e){var t=wv(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,t===null?yv(e):Ke=t,Dd.current=null}function yv(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=hw(n,t),n!==null){n.flags&=32767,Ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,Ke=null;return}}else if(n=fw(n,t,Dt),n!==null){Ke=n;return}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);Je===0&&(Je=5)}function $r(e,t,n){var r=je,s=Zt.transition;try{Zt.transition=null,je=1,Sw(e,t,n,r)}finally{Zt.transition=s,je=r}return null}function Sw(e,t,n,r){do Ws();while(yr!==null);if(ke&6)throw Error($(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(tx(e,i),e===st&&(Ke=st=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rl||(rl=!0,Sv(Ol,function(){return Ws(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Zt.transition,Zt.transition=null;var o=je;je=1;var l=ke;ke|=4,Dd.current=null,pw(e,n),fv(n,e),Ux(ec),Dl=!!Zu,ec=Zu=null,e.current=n,gw(n),Q0(),ke=l,je=o,Zt.transition=i}else e.current=n;if(rl&&(rl=!1,yr=e,ea=s),i=e.pendingLanes,i===0&&(br=null),G0(n.stateNode),Ot(e,He()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zl)throw Zl=!1,e=wc,wc=null,e;return ea&1&&e.tag!==0&&Ws(),i=e.pendingLanes,i&1?e===Sc?Qi++:(Qi=0,Sc=e):Qi=0,Pr(),null}function Ws(){if(yr!==null){var e=Jp(ea),t=Zt.transition,n=je;try{if(Zt.transition=null,je=16>e?16:e,yr===null)var r=!1;else{if(e=yr,yr=null,ea=0,ke&6)throw Error($(331));var s=ke;for(ke|=4,G=e.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(G=c;G!==null;){var f=G;switch(f.tag){case 0:case 11:case 15:Hi(8,f,i)}var h=f.child;if(h!==null)h.return=f,G=h;else for(;G!==null;){f=G;var v=f.sibling,w=f.return;if(uv(f),f===c){G=null;break}if(v!==null){v.return=w,G=v;break}G=w}}}var b=i.alternate;if(b!==null){var E=b.child;if(E!==null){b.child=null;do{var L=E.sibling;E.sibling=null,E=L}while(E!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Hi(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,G=y;break e}G=i.return}}var m=e.current;for(G=m;G!==null;){o=G;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,G=p;else e:for(o=m;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xa(9,l)}}catch(C){Be(l,l.return,C)}if(l===o){G=null;break e}var g=l.sibling;if(g!==null){g.return=l.return,G=g;break e}G=l.return}}if(ke=s,Pr(),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(da,e)}catch{}r=!0}return r}finally{je=n,Zt.transition=t}}return!1}function $h(e,t,n){t=ci(n,t),t=Jg(e,t,1),e=kr(e,t,1),t=Nt(),e!==null&&(Co(e,1,t),Ot(e,t))}function Be(e,t,n){if(e.tag===3)$h(e,e,n);else for(;t!==null;){if(t.tag===3){$h(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(br===null||!br.has(r))){e=ci(n,e),e=Zg(t,e,1),t=kr(t,e,1),e=Nt(),t!==null&&(Co(t,1,e),Ot(t,e));break}}t=t.return}}function Cw(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Nt(),e.pingedLanes|=e.suspendedLanes&n,st===e&&(ct&n)===n&&(Je===4||Je===3&&(ct&130023424)===ct&&500>He()-$d?rs(e,0):Ad|=n),Ot(e,t)}function xv(e,t){t===0&&(e.mode&1?(t=Ko,Ko<<=1,!(Ko&130023424)&&(Ko=4194304)):t=1);var n=Nt();e=Xn(e,t),e!==null&&(Co(e,t,n),Ot(e,n))}function kw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),xv(e,n)}function bw(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(t),xv(e,n)}var wv;wv=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||It.current)_t=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return _t=!1,dw(e,t,n);_t=!!(e.flags&131072)}else _t=!1,Fe&&t.flags&1048576&&bg(t,Vl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;wl(e,t),e=t.pendingProps;var s=oi(t,xt.current);Bs(t,n),s=_d(null,t,r,e,s,n);var i=Id();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ft(r)?(i=!0,Wl(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Md(t),s.updater=ya,t.stateNode=s,s._reactInternals=t,uc(t,r,e,n),t=fc(null,t,r,!0,i,n)):(t.tag=0,Fe&&i&&Sd(t),bt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(wl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Nw(r),e=an(r,e),s){case 0:t=dc(null,t,r,e,n);break e;case 1:t=Lh(null,t,r,e,n);break e;case 11:t=Mh(null,t,r,e,n);break e;case 14:t=Rh(null,t,r,an(r.type,e),n);break e}throw Error($(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:an(r,s),dc(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:an(r,s),Lh(e,t,r,s,n);case 3:e:{if(rv(t),e===null)throw Error($(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Lg(e,t),ql(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ci(Error($(423)),t),t=Th(e,t,r,n,s);break e}else if(r!==s){s=ci(Error($(424)),t),t=Th(e,t,r,n,s);break e}else for(At=Cr(t.stateNode.containerInfo.firstChild),$t=t,Fe=!0,hn=null,n=Mg(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(li(),r===s){t=Jn(e,t,n);break e}bt(e,t,r,n)}t=t.child}return t;case 5:return Tg(t),e===null&&oc(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,tc(r,s)?o=null:i!==null&&tc(r,i)&&(t.flags|=32),nv(e,t),bt(e,t,o,n),t.child;case 6:return e===null&&oc(t),null;case 13:return sv(e,t,n);case 4:return Rd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ai(t,null,r,n):bt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:an(r,s),Mh(e,t,r,s,n);case 7:return bt(e,t,t.pendingProps,n),t.child;case 8:return bt(e,t,t.pendingProps.children,n),t.child;case 12:return bt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Te(Ql,r._currentValue),r._currentValue=o,i!==null)if(vn(i.value,o)){if(i.children===s.children&&!It.current){t=Jn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Qn(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),lc(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),lc(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}bt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Bs(t,n),s=en(s),r=r(s),t.flags|=1,bt(e,t,r,n),t.child;case 14:return r=t.type,s=an(r,t.pendingProps),s=an(r.type,s),Rh(e,t,r,s,n);case 15:return ev(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:an(r,s),wl(e,t),t.tag=1,Ft(r)?(e=!0,Wl(t)):e=!1,Bs(t,n),Xg(t,r,s),uc(t,r,s,n),fc(null,t,r,!0,e,n);case 19:return iv(e,t,n);case 22:return tv(e,t,n)}throw Error($(156,t.tag))};function Sv(e,t){return qp(e,t)}function Ew(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(e,t,n,r){return new Ew(e,t,n,r)}function Hd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Nw(e){if(typeof e=="function")return Hd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ud)return 11;if(e===cd)return 14}return 2}function Nr(e,t){var n=e.alternate;return n===null?(n=Jt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function kl(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")Hd(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case js:return ss(n.children,s,i,t);case ad:o=8,s|=8;break;case _u:return e=Jt(12,n,t,s|2),e.elementType=_u,e.lanes=i,e;case Iu:return e=Jt(13,n,t,s),e.elementType=Iu,e.lanes=i,e;case Fu:return e=Jt(19,n,t,s),e.elementType=Fu,e.lanes=i,e;case Tp:return Sa(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Rp:o=10;break e;case Lp:o=9;break e;case ud:o=11;break e;case cd:o=14;break e;case sr:o=16,r=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=Jt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function ss(e,t,n,r){return e=Jt(7,e,r,t),e.lanes=n,e}function Sa(e,t,n,r){return e=Jt(22,e,r,t),e.elementType=Tp,e.lanes=n,e.stateNode={isHidden:!1},e}function wu(e,t,n){return e=Jt(6,e,null,t),e.lanes=n,e}function Su(e,t,n){return t=Jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jw(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tu(0),this.expirationTimes=tu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vd(e,t,n,r,s,i,o,l,u){return e=new jw(e,t,n,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Jt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Md(i),e}function Mw(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ns,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Cv(e){if(!e)return Rr;e=e._reactInternals;e:{if(hs(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(Ft(n))return Cg(e,n,t)}return t}function kv(e,t,n,r,s,i,o,l,u){return e=Vd(n,r,!0,e,s,i,o,l,u),e.context=Cv(null),n=e.current,r=Nt(),s=Er(n),i=Qn(r,s),i.callback=t??null,kr(n,i,s),e.current.lanes=s,Co(e,s,r),Ot(e,r),e}function Ca(e,t,n,r){var s=t.current,i=Nt(),o=Er(s);return n=Cv(n),t.context===null?t.context=n:t.pendingContext=n,t=Qn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=kr(s,t,o),e!==null&&(pn(e,s,o,i),vl(e,s,o)),o}function na(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Uh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Qd(e,t){Uh(e,t),(e=e.alternate)&&Uh(e,t)}function Rw(){return null}var bv=typeof reportError=="function"?reportError:function(e){console.error(e)};function Kd(e){this._internalRoot=e}ka.prototype.render=Kd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));Ca(e,t,null,null)};ka.prototype.unmount=Kd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;us(function(){Ca(null,e,null,null)}),t[Yn]=null}};function ka(e){this._internalRoot=e}ka.prototype.unstable_scheduleHydration=function(e){if(e){var t=tg();e={blockedOn:null,target:e,priority:t};for(var n=0;n<or.length&&t!==0&&t<or[n].priority;n++);or.splice(n,0,e),n===0&&rg(e)}};function qd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ba(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Bh(){}function Lw(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=na(o);i.call(c)}}var o=kv(t,r,e,0,null,!1,!1,"",Bh);return e._reactRootContainer=o,e[Yn]=o.current,no(e.nodeType===8?e.parentNode:e),us(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=na(u);l.call(c)}}var u=Vd(e,0,!1,null,null,!1,!1,"",Bh);return e._reactRootContainer=u,e[Yn]=u.current,no(e.nodeType===8?e.parentNode:e),us(function(){Ca(t,u,n,r)}),u}function Ea(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=na(o);l.call(u)}}Ca(t,o,e,s)}else o=Lw(n,t,e,s,r);return na(o)}Zp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ii(t.pendingLanes);n!==0&&(hd(t,n|1),Ot(t,He()),!(ke&6)&&(di=He()+500,Pr()))}break;case 13:us(function(){var r=Xn(e,1);if(r!==null){var s=Nt();pn(r,e,1,s)}}),Qd(e,1)}};md=function(e){if(e.tag===13){var t=Xn(e,134217728);if(t!==null){var n=Nt();pn(t,e,134217728,n)}Qd(e,134217728)}};eg=function(e){if(e.tag===13){var t=Er(e),n=Xn(e,t);if(n!==null){var r=Nt();pn(n,e,t,r)}Qd(e,t)}};tg=function(){return je};ng=function(e,t){var n=je;try{return je=e,t()}finally{je=n}};Vu=function(e,t,n){switch(t){case"input":if(Du(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=pa(r);if(!s)throw Error($(90));_p(r),Du(r,s)}}}break;case"textarea":Fp(e,n);break;case"select":t=n.value,t!=null&&Ds(e,!!n.multiple,t,!1)}};Bp=Ud;Wp=us;var Tw={usingClientEntryPoint:!1,Events:[bo,Ts,pa,$p,Up,Ud]},Mi={findFiberByHostInstance:Ur,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Pw={bundleType:Mi.bundleType,version:Mi.version,rendererPackageName:Mi.rendererPackageName,rendererConfig:Mi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Qp(e),e===null?null:e.stateNode},findFiberByHostInstance:Mi.findFiberByHostInstance||Rw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{da=sl.inject(Pw),Ln=sl}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tw;Bt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qd(t))throw Error($(200));return Mw(e,t,null,n)};Bt.createRoot=function(e,t){if(!qd(e))throw Error($(299));var n=!1,r="",s=bv;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Vd(e,1,!1,null,null,n,!1,r,s),e[Yn]=t.current,no(e.nodeType===8?e.parentNode:e),new Kd(t)};Bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=Qp(t),e=e===null?null:e.stateNode,e};Bt.flushSync=function(e){return us(e)};Bt.hydrate=function(e,t,n){if(!ba(t))throw Error($(200));return Ea(null,e,t,!0,n)};Bt.hydrateRoot=function(e,t,n){if(!qd(e))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=bv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=kv(t,null,e,1,n??null,s,!1,i,o),e[Yn]=t.current,no(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new ka(t)};Bt.render=function(e,t,n){if(!ba(t))throw Error($(200));return Ea(null,e,t,!1,n)};Bt.unmountComponentAtNode=function(e){if(!ba(e))throw Error($(40));return e._reactRootContainer?(us(function(){Ea(null,null,e,!1,function(){e._reactRootContainer=null,e[Yn]=null})}),!0):!1};Bt.unstable_batchedUpdates=Ud;Bt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ba(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return Ea(e,t,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function Ev(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ev)}catch(e){console.error(e)}}Ev(),Ep.exports=Bt;var Gd=Ep.exports,Nv,Wh=Gd;Nv=Wh.createRoot,Wh.hydrateRoot;var gi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_w={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},ar,ed,rp,Iw=(rp=class{constructor(){le(this,ar,_w);le(this,ed,!1)}setTimeoutProvider(e){H(this,ar,e)}setTimeout(e,t){return S(this,ar).setTimeout(e,t)}clearTimeout(e){S(this,ar).clearTimeout(e)}setInterval(e,t){return S(this,ar).setInterval(e,t)}clearInterval(e){S(this,ar).clearInterval(e)}},ar=new WeakMap,ed=new WeakMap,rp),Hr=new Iw;function Fw(e){setTimeout(e,0)}var cs=typeof window>"u"||"Deno"in globalThis;function Et(){}function Ow(e,t){return typeof e=="function"?e(t):e}function bc(e){return typeof e=="number"&&e>=0&&e!==1/0}function jv(e,t){return Math.max(e+(t||0)-Date.now(),0)}function jr(e,t){return typeof e=="function"?e(t):e}function qt(e,t){return typeof e=="function"?e(t):e}function Hh(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==Yd(o,t.options))return!1}else if(!fo(t.queryKey,o))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function Vh(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(ds(t.options.mutationKey)!==ds(i))return!1}else if(!fo(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Yd(e,t){return((t==null?void 0:t.queryKeyHashFn)||ds)(e)}function ds(e){return JSON.stringify(e,(t,n)=>Ec(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function fo(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>fo(e[n],t[n])):!1}var zw=Object.prototype.hasOwnProperty;function Mv(e,t){if(e===t)return e;const n=Qh(e)&&Qh(t);if(!n&&!(Ec(e)&&Ec(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let u=0;for(let c=0;c<o;c++){const f=n?c:i[c],h=e[f],v=t[f];if(h===v){l[f]=h,(n?c<s:zw.call(e,f))&&u++;continue}if(h===null||v===null||typeof h!="object"||typeof v!="object"){l[f]=v;continue}const w=Mv(h,v);l[f]=w,w===h&&u++}return s===o&&u===s?e:l}function ra(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Qh(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ec(e){if(!Kh(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Kh(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Kh(e){return Object.prototype.toString.call(e)==="[object Object]"}function Dw(e){return new Promise(t=>{Hr.setTimeout(t,e)})}function Nc(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Mv(e,t):t}function Aw(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function $w(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Xd=Symbol();function Rv(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Xd?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Lv(e,t){return typeof e=="function"?e(...t):!!e}function Uw(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var qr,ur,Ks,sp,Bw=(sp=class extends gi{constructor(){super();le(this,qr);le(this,ur);le(this,Ks);H(this,Ks,t=>{if(!cs&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){S(this,ur)||this.setEventListener(S(this,Ks))}onUnsubscribe(){var t;this.hasListeners()||((t=S(this,ur))==null||t.call(this),H(this,ur,void 0))}setEventListener(t){var n;H(this,Ks,t),(n=S(this,ur))==null||n.call(this),H(this,ur,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){S(this,qr)!==t&&(H(this,qr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof S(this,qr)=="boolean"?S(this,qr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},qr=new WeakMap,ur=new WeakMap,Ks=new WeakMap,sp),Jd=new Bw;function jc(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var Ww=Fw;function Hw(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=Ww;const i=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;t++;try{u=l()}finally{t--,t||o()}return u},batchCalls:l=>(...u)=>{i(()=>{l(...u)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Xe=Hw(),qs,cr,Gs,ip,Vw=(ip=class extends gi{constructor(){super();le(this,qs,!0);le(this,cr);le(this,Gs);H(this,Gs,t=>{if(!cs&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){S(this,cr)||this.setEventListener(S(this,Gs))}onUnsubscribe(){var t;this.hasListeners()||((t=S(this,cr))==null||t.call(this),H(this,cr,void 0))}setEventListener(t){var n;H(this,Gs,t),(n=S(this,cr))==null||n.call(this),H(this,cr,t(this.setOnline.bind(this)))}setOnline(t){S(this,qs)!==t&&(H(this,qs,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return S(this,qs)}},qs=new WeakMap,cr=new WeakMap,Gs=new WeakMap,ip),sa=new Vw;function Qw(e){return Math.min(1e3*2**e,3e4)}function Tv(e){return(e??"online")==="online"?sa.isOnline():!0}var Mc=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Pv(e){let t=!1,n=0,r;const s=jc(),i=()=>s.status!=="pending",o=E=>{var L;if(!i()){const y=new Mc(E);v(y),(L=e.onCancel)==null||L.call(e,y)}},l=()=>{t=!0},u=()=>{t=!1},c=()=>Jd.isFocused()&&(e.networkMode==="always"||sa.isOnline())&&e.canRun(),f=()=>Tv(e.networkMode)&&e.canRun(),h=E=>{i()||(r==null||r(),s.resolve(E))},v=E=>{i()||(r==null||r(),s.reject(E))},w=()=>new Promise(E=>{var L;r=y=>{(i()||c())&&E(y)},(L=e.onPause)==null||L.call(e)}).then(()=>{var E;r=void 0,i()||(E=e.onContinue)==null||E.call(e)}),b=()=>{if(i())return;let E;const L=n===0?e.initialPromise:void 0;try{E=L??e.fn()}catch(y){E=Promise.reject(y)}Promise.resolve(E).then(h).catch(y=>{var M;if(i())return;const m=e.retry??(cs?0:3),p=e.retryDelay??Qw,g=typeof p=="function"?p(n,y):p,C=m===!0||typeof m=="number"&&n<m||typeof m=="function"&&m(n,y);if(t||!C){v(y);return}n++,(M=e.onFail)==null||M.call(e,n,y),Dw(g).then(()=>c()?void 0:w()).then(()=>{t?v(y):b()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:u,canStart:f,start:()=>(f()?b():w().then(b),s)}}var Gr,op,_v=(op=class{constructor(){le(this,Gr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),bc(this.gcTime)&&H(this,Gr,Hr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(cs?1/0:5*60*1e3))}clearGcTimeout(){S(this,Gr)&&(Hr.clearTimeout(S(this,Gr)),H(this,Gr,void 0))}},Gr=new WeakMap,op),Yr,Ys,Kt,Xr,nt,go,Jr,cn,zn,lp,Kw=(lp=class extends _v{constructor(t){super();le(this,cn);le(this,Yr);le(this,Ys);le(this,Kt);le(this,Xr);le(this,nt);le(this,go);le(this,Jr);H(this,Jr,!1),H(this,go,t.defaultOptions),this.setOptions(t.options),this.observers=[],H(this,Xr,t.client),H(this,Kt,S(this,Xr).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,H(this,Yr,Gh(this.options)),this.state=t.state??S(this,Yr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=S(this,nt))==null?void 0:t.promise}setOptions(t){if(this.options={...S(this,go),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Gh(this.options);n.data!==void 0&&(this.setState(qh(n.data,n.dataUpdatedAt)),H(this,Yr,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&S(this,Kt).remove(this)}setData(t,n){const r=Nc(this.state.data,t,this.options);return me(this,cn,zn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){me(this,cn,zn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=S(this,nt))==null?void 0:r.promise;return(s=S(this,nt))==null||s.cancel(t),n?n.then(Et).catch(Et):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(S(this,Yr))}isActive(){return this.observers.some(t=>qt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Xd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>jr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!jv(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=S(this,nt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=S(this,nt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),S(this,Kt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(S(this,nt)&&(S(this,Jr)?S(this,nt).cancel({revert:!0}):S(this,nt).cancelRetry()),this.scheduleGc()),S(this,Kt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||me(this,cn,zn).call(this,{type:"invalidate"})}async fetch(t,n){var u,c,f,h,v,w,b,E,L,y,m,p;if(this.state.fetchStatus!=="idle"&&((u=S(this,nt))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(S(this,nt))return S(this,nt).continueRetry(),S(this,nt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const g=this.observers.find(C=>C.options.queryFn);g&&this.setOptions(g.options)}const r=new AbortController,s=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(H(this,Jr,!0),r.signal)})},i=()=>{const g=Rv(this.options,n),M=(()=>{const R={client:S(this,Xr),queryKey:this.queryKey,meta:this.meta};return s(R),R})();return H(this,Jr,!1),this.options.persister?this.options.persister(g,M,this):g(M)},l=(()=>{const g={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:S(this,Xr),state:this.state,fetchFn:i};return s(g),g})();(c=this.options.behavior)==null||c.onFetch(l,this),H(this,Ys,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&me(this,cn,zn).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),H(this,nt,Pv({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:g=>{g instanceof Mc&&g.revert&&this.setState({...S(this,Ys),fetchStatus:"idle"}),r.abort()},onFail:(g,C)=>{me(this,cn,zn).call(this,{type:"failed",failureCount:g,error:C})},onPause:()=>{me(this,cn,zn).call(this,{type:"pause"})},onContinue:()=>{me(this,cn,zn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const g=await S(this,nt).start();if(g===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(g),(w=(v=S(this,Kt).config).onSuccess)==null||w.call(v,g,this),(E=(b=S(this,Kt).config).onSettled)==null||E.call(b,g,this.state.error,this),g}catch(g){if(g instanceof Mc){if(g.silent)return S(this,nt).promise;if(g.revert){if(this.state.data===void 0)throw g;return this.state.data}}throw me(this,cn,zn).call(this,{type:"error",error:g}),(y=(L=S(this,Kt).config).onError)==null||y.call(L,g,this),(p=(m=S(this,Kt).config).onSettled)==null||p.call(m,this.state.data,g,this),g}finally{this.scheduleGc()}}},Yr=new WeakMap,Ys=new WeakMap,Kt=new WeakMap,Xr=new WeakMap,nt=new WeakMap,go=new WeakMap,Jr=new WeakMap,cn=new WeakSet,zn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Iv(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...qh(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return H(this,Ys,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Xe.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),S(this,Kt).notify({query:this,type:"updated",action:t})})},lp);function Iv(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Tv(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function qh(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Gh(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Lt,Se,vo,Ct,Zr,Xs,$n,dr,yo,Js,Zs,es,ts,fr,ei,Ne,Oi,Rc,Lc,Tc,Pc,_c,Ic,Fc,Fv,ap,qw=(ap=class extends gi{constructor(t,n){super();le(this,Ne);le(this,Lt);le(this,Se);le(this,vo);le(this,Ct);le(this,Zr);le(this,Xs);le(this,$n);le(this,dr);le(this,yo);le(this,Js);le(this,Zs);le(this,es);le(this,ts);le(this,fr);le(this,ei,new Set);this.options=n,H(this,Lt,t),H(this,dr,null),H(this,$n,jc()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(S(this,Se).addObserver(this),Yh(S(this,Se),this.options)?me(this,Ne,Oi).call(this):this.updateResult(),me(this,Ne,Pc).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Oc(S(this,Se),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Oc(S(this,Se),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,me(this,Ne,_c).call(this),me(this,Ne,Ic).call(this),S(this,Se).removeObserver(this)}setOptions(t){const n=this.options,r=S(this,Se);if(this.options=S(this,Lt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof qt(this.options.enabled,S(this,Se))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");me(this,Ne,Fc).call(this),S(this,Se).setOptions(this.options),n._defaulted&&!ra(this.options,n)&&S(this,Lt).getQueryCache().notify({type:"observerOptionsUpdated",query:S(this,Se),observer:this});const s=this.hasListeners();s&&Xh(S(this,Se),r,this.options,n)&&me(this,Ne,Oi).call(this),this.updateResult(),s&&(S(this,Se)!==r||qt(this.options.enabled,S(this,Se))!==qt(n.enabled,S(this,Se))||jr(this.options.staleTime,S(this,Se))!==jr(n.staleTime,S(this,Se)))&&me(this,Ne,Rc).call(this);const i=me(this,Ne,Lc).call(this);s&&(S(this,Se)!==r||qt(this.options.enabled,S(this,Se))!==qt(n.enabled,S(this,Se))||i!==S(this,fr))&&me(this,Ne,Tc).call(this,i)}getOptimisticResult(t){const n=S(this,Lt).getQueryCache().build(S(this,Lt),t),r=this.createResult(n,t);return Yw(this,r)&&(H(this,Ct,r),H(this,Xs,this.options),H(this,Zr,S(this,Se).state)),r}getCurrentResult(){return S(this,Ct)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&S(this,$n).status==="pending"&&S(this,$n).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){S(this,ei).add(t)}getCurrentQuery(){return S(this,Se)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=S(this,Lt).defaultQueryOptions(t),r=S(this,Lt).getQueryCache().build(S(this,Lt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return me(this,Ne,Oi).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),S(this,Ct)))}createResult(t,n){var T;const r=S(this,Se),s=this.options,i=S(this,Ct),o=S(this,Zr),l=S(this,Xs),c=t!==r?t.state:S(this,vo),{state:f}=t;let h={...f},v=!1,w;if(n._optimisticResults){const N=this.hasListeners(),_=!N&&Yh(t,n),B=N&&Xh(t,r,n,s);(_||B)&&(h={...h,...Iv(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:b,errorUpdatedAt:E,status:L}=h;w=h.data;let y=!1;if(n.placeholderData!==void 0&&w===void 0&&L==="pending"){let N;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(N=i.data,y=!0):N=typeof n.placeholderData=="function"?n.placeholderData((T=S(this,Zs))==null?void 0:T.state.data,S(this,Zs)):n.placeholderData,N!==void 0&&(L="success",w=Nc(i==null?void 0:i.data,N,n),v=!0)}if(n.select&&w!==void 0&&!y)if(i&&w===(o==null?void 0:o.data)&&n.select===S(this,yo))w=S(this,Js);else try{H(this,yo,n.select),w=n.select(w),w=Nc(i==null?void 0:i.data,w,n),H(this,Js,w),H(this,dr,null)}catch(N){H(this,dr,N)}S(this,dr)&&(b=S(this,dr),w=S(this,Js),E=Date.now(),L="error");const m=h.fetchStatus==="fetching",p=L==="pending",g=L==="error",C=p&&m,M=w!==void 0,k={status:L,fetchStatus:h.fetchStatus,isPending:p,isSuccess:L==="success",isError:g,isInitialLoading:C,isLoading:C,data:w,dataUpdatedAt:h.dataUpdatedAt,error:b,errorUpdatedAt:E,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:m,isRefetching:m&&!p,isLoadingError:g&&!M,isPaused:h.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:g&&M,isStale:Zd(t,n),refetch:this.refetch,promise:S(this,$n),isEnabled:qt(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const N=z=>{k.status==="error"?z.reject(k.error):k.data!==void 0&&z.resolve(k.data)},_=()=>{const z=H(this,$n,k.promise=jc());N(z)},B=S(this,$n);switch(B.status){case"pending":t.queryHash===r.queryHash&&N(B);break;case"fulfilled":(k.status==="error"||k.data!==B.value)&&_();break;case"rejected":(k.status!=="error"||k.error!==B.reason)&&_();break}}return k}updateResult(){const t=S(this,Ct),n=this.createResult(S(this,Se),this.options);if(H(this,Zr,S(this,Se).state),H(this,Xs,this.options),S(this,Zr).data!==void 0&&H(this,Zs,S(this,Se)),ra(n,t))return;H(this,Ct,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!S(this,ei).size)return!0;const o=new Set(i??S(this,ei));return this.options.throwOnError&&o.add("error"),Object.keys(S(this,Ct)).some(l=>{const u=l;return S(this,Ct)[u]!==t[u]&&o.has(u)})};me(this,Ne,Fv).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&me(this,Ne,Pc).call(this)}},Lt=new WeakMap,Se=new WeakMap,vo=new WeakMap,Ct=new WeakMap,Zr=new WeakMap,Xs=new WeakMap,$n=new WeakMap,dr=new WeakMap,yo=new WeakMap,Js=new WeakMap,Zs=new WeakMap,es=new WeakMap,ts=new WeakMap,fr=new WeakMap,ei=new WeakMap,Ne=new WeakSet,Oi=function(t){me(this,Ne,Fc).call(this);let n=S(this,Se).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Et)),n},Rc=function(){me(this,Ne,_c).call(this);const t=jr(this.options.staleTime,S(this,Se));if(cs||S(this,Ct).isStale||!bc(t))return;const r=jv(S(this,Ct).dataUpdatedAt,t)+1;H(this,es,Hr.setTimeout(()=>{S(this,Ct).isStale||this.updateResult()},r))},Lc=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(S(this,Se)):this.options.refetchInterval)??!1},Tc=function(t){me(this,Ne,Ic).call(this),H(this,fr,t),!(cs||qt(this.options.enabled,S(this,Se))===!1||!bc(S(this,fr))||S(this,fr)===0)&&H(this,ts,Hr.setInterval(()=>{(this.options.refetchIntervalInBackground||Jd.isFocused())&&me(this,Ne,Oi).call(this)},S(this,fr)))},Pc=function(){me(this,Ne,Rc).call(this),me(this,Ne,Tc).call(this,me(this,Ne,Lc).call(this))},_c=function(){S(this,es)&&(Hr.clearTimeout(S(this,es)),H(this,es,void 0))},Ic=function(){S(this,ts)&&(Hr.clearInterval(S(this,ts)),H(this,ts,void 0))},Fc=function(){const t=S(this,Lt).getQueryCache().build(S(this,Lt),this.options);if(t===S(this,Se))return;const n=S(this,Se);H(this,Se,t),H(this,vo,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},Fv=function(t){Xe.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(S(this,Ct))}),S(this,Lt).getQueryCache().notify({query:S(this,Se),type:"observerResultsUpdated"})})},ap);function Gw(e,t){return qt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Yh(e,t){return Gw(e,t)||e.state.data!==void 0&&Oc(e,t,t.refetchOnMount)}function Oc(e,t,n){if(qt(t.enabled,e)!==!1&&jr(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Zd(e,t)}return!1}function Xh(e,t,n,r){return(e!==t||qt(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Zd(e,n)}function Zd(e,t){return qt(t.enabled,e)!==!1&&e.isStaleByTime(jr(t.staleTime,e))}function Yw(e,t){return!ra(e.getCurrentResult(),t)}function Jh(e){return{onFetch:(t,n)=>{var f,h,v,w,b;const r=t.options,s=(v=(h=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:h.fetchMore)==null?void 0:v.direction,i=((w=t.state.data)==null?void 0:w.pages)||[],o=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const c=async()=>{let E=!1;const L=p=>{Uw(p,()=>t.signal,()=>E=!0)},y=Rv(t.options,t.fetchOptions),m=async(p,g,C)=>{if(E)return Promise.reject();if(g==null&&p.pages.length)return Promise.resolve(p);const R=(()=>{const _={client:t.client,queryKey:t.queryKey,pageParam:g,direction:C?"backward":"forward",meta:t.options.meta};return L(_),_})(),k=await y(R),{maxPages:T}=t.options,N=C?$w:Aw;return{pages:N(p.pages,k,T),pageParams:N(p.pageParams,g,T)}};if(s&&i.length){const p=s==="backward",g=p?Xw:Zh,C={pages:i,pageParams:o},M=g(r,C);l=await m(C,M,p)}else{const p=e??i.length;do{const g=u===0?o[0]??r.initialPageParam:Zh(r,l);if(u>0&&g==null)break;l=await m(l,g),u++}while(u<p)}return l};t.options.persister?t.fetchFn=()=>{var E,L;return(L=(E=t.options).persister)==null?void 0:L.call(E,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function Zh(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Xw(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var xo,Nn,kt,ns,jn,rr,up,Jw=(up=class extends _v{constructor(t){super();le(this,jn);le(this,xo);le(this,Nn);le(this,kt);le(this,ns);H(this,xo,t.client),this.mutationId=t.mutationId,H(this,kt,t.mutationCache),H(this,Nn,[]),this.state=t.state||Ov(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){S(this,Nn).includes(t)||(S(this,Nn).push(t),this.clearGcTimeout(),S(this,kt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){H(this,Nn,S(this,Nn).filter(n=>n!==t)),this.scheduleGc(),S(this,kt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){S(this,Nn).length||(this.state.status==="pending"?this.scheduleGc():S(this,kt).remove(this))}continue(){var t;return((t=S(this,ns))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,u,c,f,h,v,w,b,E,L,y,m,p,g,C,M,R,k,T;const n=()=>{me(this,jn,rr).call(this,{type:"continue"})},r={client:S(this,xo),meta:this.options.meta,mutationKey:this.options.mutationKey};H(this,ns,Pv({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(N,_)=>{me(this,jn,rr).call(this,{type:"failed",failureCount:N,error:_})},onPause:()=>{me(this,jn,rr).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>S(this,kt).canRun(this)}));const s=this.state.status==="pending",i=!S(this,ns).canStart();try{if(s)n();else{me(this,jn,rr).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=S(this,kt).config).onMutate)==null?void 0:l.call(o,t,this,r));const _=await((c=(u=this.options).onMutate)==null?void 0:c.call(u,t,r));_!==this.state.context&&me(this,jn,rr).call(this,{type:"pending",context:_,variables:t,isPaused:i})}const N=await S(this,ns).start();return await((h=(f=S(this,kt).config).onSuccess)==null?void 0:h.call(f,N,t,this.state.context,this,r)),await((w=(v=this.options).onSuccess)==null?void 0:w.call(v,N,t,this.state.context,r)),await((E=(b=S(this,kt).config).onSettled)==null?void 0:E.call(b,N,null,this.state.variables,this.state.context,this,r)),await((y=(L=this.options).onSettled)==null?void 0:y.call(L,N,null,t,this.state.context,r)),me(this,jn,rr).call(this,{type:"success",data:N}),N}catch(N){try{await((p=(m=S(this,kt).config).onError)==null?void 0:p.call(m,N,t,this.state.context,this,r))}catch(_){Promise.reject(_)}try{await((C=(g=this.options).onError)==null?void 0:C.call(g,N,t,this.state.context,r))}catch(_){Promise.reject(_)}try{await((R=(M=S(this,kt).config).onSettled)==null?void 0:R.call(M,void 0,N,this.state.variables,this.state.context,this,r))}catch(_){Promise.reject(_)}try{await((T=(k=this.options).onSettled)==null?void 0:T.call(k,void 0,N,t,this.state.context,r))}catch(_){Promise.reject(_)}throw me(this,jn,rr).call(this,{type:"error",error:N}),N}finally{S(this,kt).runNext(this)}}},xo=new WeakMap,Nn=new WeakMap,kt=new WeakMap,ns=new WeakMap,jn=new WeakSet,rr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Xe.batch(()=>{S(this,Nn).forEach(r=>{r.onMutationUpdate(t)}),S(this,kt).notify({mutation:this,type:"updated",action:t})})},up);function Ov(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Un,dn,wo,cp,Zw=(cp=class extends gi{constructor(t={}){super();le(this,Un);le(this,dn);le(this,wo);this.config=t,H(this,Un,new Set),H(this,dn,new Map),H(this,wo,0)}build(t,n,r){const s=new Jw({client:t,mutationCache:this,mutationId:++Uo(this,wo)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){S(this,Un).add(t);const n=il(t);if(typeof n=="string"){const r=S(this,dn).get(n);r?r.push(t):S(this,dn).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(S(this,Un).delete(t)){const n=il(t);if(typeof n=="string"){const r=S(this,dn).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&S(this,dn).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=il(t);if(typeof n=="string"){const r=S(this,dn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=il(t);if(typeof n=="string"){const s=(r=S(this,dn).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Xe.batch(()=>{S(this,Un).forEach(t=>{this.notify({type:"removed",mutation:t})}),S(this,Un).clear(),S(this,dn).clear()})}getAll(){return Array.from(S(this,Un))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Vh(n,r))}findAll(t={}){return this.getAll().filter(n=>Vh(t,n))}notify(t){Xe.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Xe.batch(()=>Promise.all(t.map(n=>n.continue().catch(Et))))}},Un=new WeakMap,dn=new WeakMap,wo=new WeakMap,cp);function il(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Bn,hr,Tt,Wn,qn,bl,zc,dp,e1=(dp=class extends gi{constructor(n,r){super();le(this,qn);le(this,Bn);le(this,hr);le(this,Tt);le(this,Wn);H(this,Bn,n),this.setOptions(r),this.bindMethods(),me(this,qn,bl).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=S(this,Bn).defaultMutationOptions(n),ra(this.options,r)||S(this,Bn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:S(this,Tt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&ds(r.mutationKey)!==ds(this.options.mutationKey)?this.reset():((s=S(this,Tt))==null?void 0:s.state.status)==="pending"&&S(this,Tt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=S(this,Tt))==null||n.removeObserver(this)}onMutationUpdate(n){me(this,qn,bl).call(this),me(this,qn,zc).call(this,n)}getCurrentResult(){return S(this,hr)}reset(){var n;(n=S(this,Tt))==null||n.removeObserver(this),H(this,Tt,void 0),me(this,qn,bl).call(this),me(this,qn,zc).call(this)}mutate(n,r){var s;return H(this,Wn,r),(s=S(this,Tt))==null||s.removeObserver(this),H(this,Tt,S(this,Bn).getMutationCache().build(S(this,Bn),this.options)),S(this,Tt).addObserver(this),S(this,Tt).execute(n)}},Bn=new WeakMap,hr=new WeakMap,Tt=new WeakMap,Wn=new WeakMap,qn=new WeakSet,bl=function(){var r;const n=((r=S(this,Tt))==null?void 0:r.state)??Ov();H(this,hr,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},zc=function(n){Xe.batch(()=>{var r,s,i,o,l,u,c,f;if(S(this,Wn)&&this.hasListeners()){const h=S(this,hr).variables,v=S(this,hr).context,w={client:S(this,Bn),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=S(this,Wn)).onSuccess)==null||s.call(r,n.data,h,v,w)}catch(b){Promise.reject(b)}try{(o=(i=S(this,Wn)).onSettled)==null||o.call(i,n.data,null,h,v,w)}catch(b){Promise.reject(b)}}else if((n==null?void 0:n.type)==="error"){try{(u=(l=S(this,Wn)).onError)==null||u.call(l,n.error,h,v,w)}catch(b){Promise.reject(b)}try{(f=(c=S(this,Wn)).onSettled)==null||f.call(c,void 0,n.error,h,v,w)}catch(b){Promise.reject(b)}}}this.listeners.forEach(h=>{h(S(this,hr))})})},dp),Mn,fp,t1=(fp=class extends gi{constructor(t={}){super();le(this,Mn);this.config=t,H(this,Mn,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??Yd(s,n);let o=this.get(i);return o||(o=new Kw({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){S(this,Mn).has(t.queryHash)||(S(this,Mn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=S(this,Mn).get(t.queryHash);n&&(t.destroy(),n===t&&S(this,Mn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Xe.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return S(this,Mn).get(t)}getAll(){return[...S(this,Mn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Hh(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Hh(t,r)):n}notify(t){Xe.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Xe.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Xe.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Mn=new WeakMap,fp),$e,mr,pr,ti,ni,gr,ri,si,hp,n1=(hp=class{constructor(e={}){le(this,$e);le(this,mr);le(this,pr);le(this,ti);le(this,ni);le(this,gr);le(this,ri);le(this,si);H(this,$e,e.queryCache||new t1),H(this,mr,e.mutationCache||new Zw),H(this,pr,e.defaultOptions||{}),H(this,ti,new Map),H(this,ni,new Map),H(this,gr,0)}mount(){Uo(this,gr)._++,S(this,gr)===1&&(H(this,ri,Jd.subscribe(async e=>{e&&(await this.resumePausedMutations(),S(this,$e).onFocus())})),H(this,si,sa.subscribe(async e=>{e&&(await this.resumePausedMutations(),S(this,$e).onOnline())})))}unmount(){var e,t;Uo(this,gr)._--,S(this,gr)===0&&((e=S(this,ri))==null||e.call(this),H(this,ri,void 0),(t=S(this,si))==null||t.call(this),H(this,si,void 0))}isFetching(e){return S(this,$e).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return S(this,mr).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=S(this,$e).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=S(this,$e).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(jr(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return S(this,$e).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=S(this,$e).get(r.queryHash),i=s==null?void 0:s.state.data,o=Ow(t,i);if(o!==void 0)return S(this,$e).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Xe.batch(()=>S(this,$e).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=S(this,$e).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=S(this,$e);Xe.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=S(this,$e);return Xe.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Xe.batch(()=>S(this,$e).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Et).catch(Et)}invalidateQueries(e,t={}){return Xe.batch(()=>(S(this,$e).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Xe.batch(()=>S(this,$e).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Et)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Et)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=S(this,$e).build(this,t);return n.isStaleByTime(jr(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Et).catch(Et)}fetchInfiniteQuery(e){return e.behavior=Jh(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Et).catch(Et)}ensureInfiniteQueryData(e){return e.behavior=Jh(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return sa.isOnline()?S(this,mr).resumePausedMutations():Promise.resolve()}getQueryCache(){return S(this,$e)}getMutationCache(){return S(this,mr)}getDefaultOptions(){return S(this,pr)}setDefaultOptions(e){H(this,pr,e)}setQueryDefaults(e,t){S(this,ti).set(ds(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...S(this,ti).values()],n={};return t.forEach(r=>{fo(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){S(this,ni).set(ds(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...S(this,ni).values()],n={};return t.forEach(r=>{fo(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...S(this,pr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Yd(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Xd&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...S(this,pr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){S(this,$e).clear(),S(this,mr).clear()}},$e=new WeakMap,mr=new WeakMap,pr=new WeakMap,ti=new WeakMap,ni=new WeakMap,gr=new WeakMap,ri=new WeakMap,si=new WeakMap,hp),zv=d.createContext(void 0),_r=e=>{const t=d.useContext(zv);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},r1=({client:e,children:t})=>(d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(zv.Provider,{value:e,children:t})),Dv=d.createContext(!1),s1=()=>d.useContext(Dv);Dv.Provider;function i1(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var o1=d.createContext(i1()),l1=()=>d.useContext(o1),a1=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},u1=e=>{d.useEffect(()=>{e.clearReset()},[e])},c1=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||Lv(n,[e.error,r])),d1=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},f1=(e,t)=>e.isLoading&&e.isFetching&&!t,h1=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,em=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function m1(e,t,n){var h,v,w,b,E;const r=s1(),s=l1(),i=_r(),o=i.defaultQueryOptions(e);(v=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||v.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",d1(o),a1(o,s),u1(s);const l=!i.getQueryCache().get(o.queryHash),[u]=d.useState(()=>new t(i,o)),c=u.getOptimisticResult(o),f=!r&&e.subscribed!==!1;if(d.useSyncExternalStore(d.useCallback(L=>{const y=f?u.subscribe(Xe.batchCalls(L)):Et;return u.updateResult(),y},[u,f]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),d.useEffect(()=>{u.setOptions(o)},[o,u]),h1(o,c))throw em(o,u,s);if(c1({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((b=(w=i.getDefaultOptions().queries)==null?void 0:w._experimental_afterQuery)==null||b.call(w,o,c),o.experimental_prefetchInRender&&!cs&&f1(c,r)){const L=l?em(o,u,s):(E=i.getQueryCache().get(o.queryHash))==null?void 0:E.promise;L==null||L.catch(Et).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?c:u.trackResult(c)}function Na(e,t){return m1(e,qw)}function p1(e,t){const n=_r(),[r]=d.useState(()=>new e1(n,e));d.useEffect(()=>{r.setOptions(e)},[r,e]);const s=d.useSyncExternalStore(d.useCallback(o=>r.subscribe(Xe.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=d.useCallback((o,l)=>{r.mutate(o,l).catch(Et)},[r]);if(s.error&&Lv(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function tm(e){return e.length>0&&"options"in e[0]}function Dc({value:e,onChange:t,options:n,placeholder:r="Select...",trigger:s,triggerClassName:i="",panelClassName:o="",align:l="left",width:u="auto",showChevron:c=!0,title:f,disabled:h=!1,"aria-label":v}){var k;const[w,b]=d.useState(!1),E=d.useRef(null),L=d.useRef(null),m=d.useCallback(()=>{const T=N=>{const _=N.find(B=>B.value===e);return _?_.label:null};if(tm(n))for(const N of n){const _=T(N.options);if(_)return _}else{const N=T(n);if(N)return N}return r},[e,n,r])();d.useEffect(()=>{if(!w)return;const T=_=>{E.current&&!E.current.contains(_.target)&&b(!1)},N=_=>{var B;_.key==="Escape"&&(b(!1),(B=L.current)==null||B.focus())};return window.addEventListener("click",T),window.addEventListener("keydown",N),()=>{window.removeEventListener("click",T),window.removeEventListener("keydown",N)}},[w]);const p=T=>{var N;t(T),b(!1),(N=L.current)==null||N.focus()},g=T=>T.map(N=>a.jsxs("button",{className:"dropdown-item","data-active":N.value===e,disabled:N.disabled,onClick:()=>!N.disabled&&p(N.value),role:"menuitem",children:[N.icon&&a.jsx("span",{className:"shrink-0",children:N.icon}),a.jsx("span",{className:"flex-1 truncate",children:N.label}),N.value===e&&a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 text-accent",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})]},N.value)),C=((k=L.current)==null?void 0:k.offsetWidth)??0,M=u==="trigger"?C:u==="auto"?void 0:u,R={...M?{width:M,minWidth:M}:{},...l==="right"?{right:0}:{left:0}};return a.jsxs("div",{ref:E,className:"relative",children:[s?a.jsx("div",{onClick:()=>!h&&b(T=>!T),children:s}):a.jsxs("button",{ref:L,type:"button",className:`dropdown-trigger ${i}`,onClick:()=>b(T=>!T),disabled:h,title:f,"aria-label":v,"aria-haspopup":"listbox","aria-expanded":w,children:[a.jsx("span",{className:"truncate",children:m}),c&&a.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`shrink-0 opacity-60 transition-transform ${w?"rotate-180":""}`,children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),w&&a.jsx("div",{className:`dropdown-panel ${o}`,style:R,role:"listbox","aria-label":v,children:tm(n)?n.map((T,N)=>a.jsxs("div",{children:[T.label&&a.jsx("div",{className:"dropdown-label",children:T.label}),g(T.options),N<n.length-1&&a.jsx("div",{className:"dropdown-divider"})]},T.label||N)):g(n)})]})}const g1={offline:"sync-dot-offline",unstable:"sync-dot-unstable",recent:"sync-dot-recent",editing:"sync-dot-editing",live:"sync-dot-live"};function v1({state:e,presence:t,syncLabel:n,connectionLabel:r,lastEditedLabel:s,hasEdits:i,localTypingActive:o,recentTouches:l,isNarrow:u}){const[c,f]=d.useState(!1),[h,v]=d.useState(null),w=d.useRef(null),b=d.useRef(null),E=d.useRef(null),L=t?`${t.viewing} viewing  ${t.editing} editing`:"- viewing  - editing",y=t?String(t.viewing):"-",m=d.useCallback(()=>{E.current&&(window.clearTimeout(E.current),E.current=null)},[]),p=d.useCallback((C,M)=>{var R;M&&((R=navigator.clipboard)==null||R.writeText(M).then(()=>{v(C),m(),E.current=window.setTimeout(()=>{v(k=>k===C?null:k)},1e3)}).catch(()=>{}))},[m]),g=d.useCallback(()=>{f(!1),window.requestAnimationFrame(()=>{var C;return(C=b.current)==null?void 0:C.focus()})},[]);return d.useEffect(()=>{if(!c)return;const C=R=>{!w.current||w.current.contains(R.target)||g()},M=R=>{R.key==="Escape"&&g()};return window.addEventListener("mousedown",C),window.addEventListener("keydown",M),()=>{window.removeEventListener("mousedown",C),window.removeEventListener("keydown",M)}},[c,g]),d.useEffect(()=>()=>{m()},[m]),a.jsxs("div",{ref:w,className:"sync-indicator",children:[a.jsxs("button",{ref:b,type:"button",className:"sync-indicator-button",onClick:()=>c?g():f(!0),"aria-haspopup":"dialog","aria-expanded":c,"aria-label":"Sync status",title:L,children:[a.jsx("span",{className:`sync-indicator-dot ${g1[e]}`,"aria-hidden":"true"}),!u&&a.jsx("span",{className:"sync-indicator-count tabular-nums",children:y}),!u&&o&&a.jsx("span",{className:"sync-indicator-local",children:"typing"})]}),c&&a.jsxs("div",{role:"dialog","aria-label":"Sync status",className:"sync-indicator-card select-text",children:[a.jsx("div",{className:"sync-indicator-line sync-indicator-primary",children:n}),a.jsx("div",{className:"sync-indicator-line",children:r}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:L}),a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:i?`Last edited: ${s}`:"No edits yet."}),o&&a.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:"Local typing in progress (saved on blur)."}),a.jsxs("div",{className:"sync-indicator-section",children:[a.jsx("div",{className:"sync-indicator-section-title",children:"Recently touched files"}),l.length>0?a.jsx("div",{className:"sync-indicator-list",children:l.map(C=>a.jsxs("div",{className:"sync-indicator-item",children:[a.jsx("button",{type:"button",className:"sync-indicator-item-name",title:`Copy filename: ${C.label}`,onClick:()=>p(C.path,C.label),children:C.label}),a.jsx("span",{className:"sync-indicator-item-time tabular-nums",children:h===C.path?"Copied":C.timeLabel})]},C.path))}):a.jsx("div",{className:"sync-indicator-empty",children:"No recent touches."})]})]})]})}function y1({rootRef:e,onSearch:t,viewerActive:n,onBack:r,zoomPercent:s,onZoomPercentChange:i,currentLabel:o,itemCount:l,totalCount:u,sortSpec:c,metricKeys:f,onSortChange:h,sortDisabled:v=!1,filterCount:w,onOpenFilters:b,starFilters:E,onToggleStar:L,onClearStars:y,onClearFilters:m,starCounts:p,viewMode:g,onViewMode:C,gridItemSize:M,onGridItemSize:R,leftOpen:k,rightOpen:T,onToggleLeft:N,onToggleRight:_,onPrevImage:B,onNextImage:z,canPrevImage:oe,canNextImage:ue,searchDisabled:P=!1,searchPlaceholder:de,syncIndicator:D}){const[V,q]=d.useState(!1),[Z,ce]=d.useState(!1),[Pe,X]=d.useState(!1),Q=d.useRef(null),K=d.useRef(null);d.useEffect(()=>{if(!V)return;const U=J=>{Q.current&&!Q.current.contains(J.target)&&q(!1)};return window.addEventListener("click",U),()=>window.removeEventListener("click",U)},[V]),d.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const U=window.matchMedia("(max-width: 900px)"),J=se=>ce(se.matches);return ce(U.matches),"addEventListener"in U?(U.addEventListener("change",J),()=>U.removeEventListener("change",J)):(U.addListener(J),()=>U.removeListener(J))},[]),d.useEffect(()=>{if(P){X(!1);return}if(!Z||n){X(!1);return}if(!Pe)return;const U=window.requestAnimationFrame(()=>{var J;return(J=K.current)==null?void 0:J.focus()});return()=>window.cancelAnimationFrame(U)},[Z,Pe,n,P]);const fe=c??{kind:"builtin",key:"added",dir:"desc"},Le=fe.dir,be=fe.kind==="builtin"&&fe.key==="random",Ze=n||v,qe=f!=null&&f.length?f.map(U=>({value:`metric:${U}`,label:U,disabled:v})):[],we=[{value:"builtin:added",label:"Date added",disabled:v},{value:"builtin:name",label:"Filename",disabled:v},{value:"builtin:random",label:"Random",disabled:v},...qe],Ht=[{label:"Layout",options:[{value:"layout:grid",label:"Grid"},{value:"layout:masonry",label:"Masonry"}]},{label:"Sort by",options:we}],it=fe.kind==="metric"?`metric:${fe.key}`:`builtin:${fe.key}`,nn=[{label:"Sort by",options:we}],ot=Z&&!n,yn=U=>{if(U.startsWith("layout:")){const J=U==="layout:masonry"?"adaptive":"grid";C==null||C(J)}else{if(v)return;h==null||h(nm(U,fe))}},Vt=()=>{!h||v||h(be?fe:{...fe,dir:Le==="desc"?"asc":"desc"})},ft=E??[],ht=ft.length,A=w1(w,ht),ne=x1(l,u),re=o||"Root";return a.jsxs("div",{ref:e,className:"toolbar-shell fixed top-0 left-0 right-0 h-12 grid grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] items-center px-3 gap-3 bg-panel border-b border-border z-[var(--z-toolbar)] col-span-full row-start-1 select-none",children:[a.jsxs("div",{className:"toolbar-left flex items-center gap-4 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsxs("div",{className:"flex flex-col min-w-0 leading-tight",children:[a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted",children:"Scope"}),a.jsx("span",{className:"text-sm font-medium text-text truncate",title:re,children:re})]}),ne&&a.jsx("span",{className:"toolbar-count text-xs text-muted whitespace-nowrap tabular-nums",children:ne})]}),a.jsxs("div",{className:"toolbar-sort flex items-center gap-2",children:[a.jsxs("div",{className:`toolbar-sort-controls flex items-center gap-2 ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsx(Dc,{value:it,onChange:yn,options:Ht,title:"Sort and layout options","aria-label":"Sort and layout",triggerClassName:"min-w-[110px]"}),a.jsx("button",{className:"toolbar-sort-dir btn btn-icon",onClick:Vt,title:v?"Sorting disabled":be?"Shuffle":`Sort ${Le==="desc"?"descending":"ascending"}`,"aria-label":be?"Shuffle":"Toggle sort direction","aria-disabled":Ze,disabled:Ze,children:be?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Le==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]}),a.jsxs("div",{ref:Q,className:`toolbar-filter relative ${n?"opacity-40 pointer-events-none":""}`,children:[a.jsxs("button",{className:`btn ${A>0?"btn-active":""}`,onClick:()=>q(U=>!U),"aria-haspopup":"dialog","aria-expanded":V,title:"Filters","aria-disabled":n,children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),a.jsx("span",{className:"toolbar-filters-label",children:"Filters"}),A>0&&a.jsx("span",{className:"toolbar-filters-count px-1.5 py-0.5 text-[11px] rounded-full bg-accent-strong text-text",children:A})]}),V&&a.jsxs("div",{role:"dialog","aria-label":"Filters",className:"dropdown-panel w-[240px]",style:{top:"38px",left:0},children:[a.jsx("div",{className:"dropdown-label",children:"Rating"}),a.jsxs("div",{className:"px-1",children:[[5,4,3,2,1].map(U=>{const J=ft.includes(U),se=(p==null?void 0:p[String(U)])??0;return a.jsxs("button",{onClick:()=>L==null?void 0:L(U),className:`dropdown-item justify-between ${J?"bg-accent-muted":""}`,children:[a.jsxs("span",{className:J?"text-star-active":"text-text",children:["".repeat(U),"".repeat(5-U)]}),a.jsx("span",{className:"text-xs text-muted",children:se})]},U)}),a.jsxs("button",{onClick:()=>L==null?void 0:L(0),className:`dropdown-item justify-between ${ft.includes(0)?"bg-accent-muted":""}`,children:[a.jsx("span",{className:"text-text",children:"Unrated"}),a.jsx("span",{className:"text-xs text-muted",children:(p==null?void 0:p["0"])??0})]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("div",{className:"dropdown-label",children:"Metrics"}),a.jsxs("button",{className:"dropdown-item",onClick:()=>{q(!1),b==null||b()},children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]}),a.jsx("span",{children:"Open Metrics Panel"}),(w||0)>0&&a.jsxs("span",{className:"ml-auto text-xs text-muted",children:[w," active"]})]}),a.jsx("div",{className:"dropdown-divider"}),a.jsx("button",{className:"dropdown-item text-muted hover:text-text",onClick:()=>{m?m():y==null||y()},disabled:A===0,children:"Clear all filters"})]})]}),n&&a.jsxs("button",{className:"btn btn-sm",onClick:r,title:"Back to grid",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})]})]}),a.jsx("div",{className:"toolbar-center flex items-center gap-3 justify-center min-w-0",children:n?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"range",min:5,max:800,step:1,value:Math.round(Math.max(5,Math.min(800,s??100))),onChange:U=>i==null?void 0:i(Number(U.target.value)),className:"zoom-slider","aria-label":"Zoom level"}),a.jsxs("span",{className:"text-xs text-muted min-w-[42px] text-right",children:[Math.round(s??100),"%"]})]}):R&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted",children:"Size"}),a.jsx("input",{type:"range",min:80,max:500,step:10,value:M??220,onChange:U=>R(Number(U.target.value)),className:"w-28 h-1.5 bg-border rounded-full appearance-none cursor-pointer hover:bg-hover transition-colors [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-text [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-text [&::-moz-range-thumb]:border-0","aria-label":"Thumbnail size"})]})}),a.jsxs("div",{className:"toolbar-right flex items-center gap-2 justify-end",children:[a.jsxs("div",{className:`toolbar-nav flex items-center gap-1 mr-1 ${n?"":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,children:[a.jsx("button",{className:`btn btn-icon ${oe?"":"opacity-40 cursor-not-allowed"}`,title:"Previous image (A / )",onClick:()=>oe&&(B==null?void 0:B()),"aria-label":"Previous image","aria-disabled":!oe,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("button",{className:`btn btn-icon ${ue?"":"opacity-40 cursor-not-allowed"}`,title:"Next image (D / )",onClick:()=>ue&&(z==null?void 0:z()),"aria-label":"Next image","aria-disabled":!ue,children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 6l6 6-6 6"})})})]}),a.jsxs("div",{className:"toolbar-panels flex items-center gap-1",children:[a.jsx("button",{className:`btn btn-icon ${k?"":"opacity-50"}`,title:k?"Hide left panel (Ctrl+B)":"Show left panel (Ctrl+B)",onClick:N,"aria-pressed":k,"aria-label":"Toggle left panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"11",y:"5",width:"10",height:"14",rx:"1.5"})]})}),a.jsx("button",{className:`btn btn-icon ${T?"":"opacity-50"}`,title:T?"Hide right panel (Ctrl+Alt+B)":"Show right panel (Ctrl+Alt+B)",onClick:_,"aria-pressed":T,"aria-label":"Toggle right panel",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"15",y:"5",width:"6",height:"14",rx:"1.5"}),a.jsx("rect",{x:"3",y:"5",width:"10",height:"14",rx:"1.5"})]})})]}),D&&a.jsx(v1,{...D,isNarrow:Z}),!n&&Z&&a.jsx("button",{className:`btn btn-icon ${Pe?"btn-active":""} ${P?"opacity-50 cursor-not-allowed":""}`,"aria-label":Pe?"Close search":"Open search",title:P?"Search disabled":Pe?"Close search":"Search",onClick:()=>!P&&X(U=>!U),disabled:P,children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("circle",{cx:"11",cy:"11",r:"7"}),a.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),!n&&!Z?a.jsx("div",{className:"toolbar-search w-[240px]",children:a.jsx("input",{ref:K,"aria-label":"Search filename, tags, notes",placeholder:P?de??"Search disabled":"Search...",onChange:U=>t(U.target.value),className:"toolbar-search-input input w-full focus:w-full transition-all duration-200 select-text",disabled:P})}):n?a.jsx("div",{className:"toolbar-search w-[240px]","aria-hidden":"true"}):null]}),!n&&Z&&Pe&&!P&&a.jsx("div",{className:"toolbar-search-row",children:a.jsx("input",{ref:K,"aria-label":"Search filename, tags, notes",placeholder:de??"Search...",onChange:U=>t(U.target.value),className:"toolbar-search-input-mobile input input-lg w-full select-text"})}),ot&&a.jsx("div",{className:"mobile-drawer",children:a.jsxs("div",{className:"mobile-drawer-row",children:[a.jsxs("div",{className:"mobile-pill-group",children:[a.jsx("button",{className:`mobile-pill ${g==="grid"?"is-active":""}`,onClick:()=>C==null?void 0:C("grid"),"aria-pressed":g==="grid",children:"Grid"}),a.jsx("button",{className:`mobile-pill ${g==="adaptive"?"is-active":""}`,onClick:()=>C==null?void 0:C("adaptive"),"aria-pressed":g==="adaptive",children:"Masonry"})]}),a.jsx(Dc,{value:it,onChange:U=>h==null?void 0:h(nm(U,fe)),options:nn,"aria-label":"Sort",triggerClassName:"mobile-pill mobile-pill-dropdown",panelClassName:"mobile-drawer-panel",disabled:v}),a.jsx("button",{className:`mobile-pill mobile-pill-icon ${Ze?"opacity-50 cursor-not-allowed":""}`,onClick:Vt,title:v?"Sorting disabled":be?"Shuffle":`Sort ${Le==="desc"?"descending":"ascending"}`,"aria-label":be?"Shuffle":"Toggle sort direction","aria-disabled":Ze,disabled:Ze,children:be?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),a.jsx("path",{d:"M21 3v5h-5"})]}):Le==="desc"?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M19 12l-7 7-7-7"})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 19V5"}),a.jsx("path",{d:"M5 12l7-7 7 7"})]})})]})})]})}function x1(e,t){if(typeof e!="number")return null;const n=e.toLocaleString();if(typeof t!="number")return`${n} items`;const r=t.toLocaleString();return t===e?`${n} items`:`${n} / ${r} items`}function w1(e,t){return typeof e=="number"?e:t>0?1:0}function nm(e,t){if(e.startsWith("metric:")){const n=e.slice(7);return n?{kind:"metric",key:n,dir:t.dir}:t}if(e.startsWith("builtin:")){const n=e.slice(8);if(n==="name"||n==="added"||n==="random")return{kind:"builtin",key:n,dir:t.dir}}return t}class gn extends Error{constructor(n,r,s,i){super(r);Fn(this,"status");Fn(this,"url");Fn(this,"body");this.name="FetchError",this.status=n,this.url=s,this.body=i}}function S1(e){const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function Av(e,t,n){if(t&&typeof t=="object"){const r=t,s=typeof r.error=="string"?r.error:null,i=typeof r.message=="string"?r.message:null;if(s&&i)return`${s}: ${i}`;if(s)return s;if(i)return i}return typeof t=="string"&&t?t:`HTTP ${e} for ${n}`}function at(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{let u=null;const c=await l.text().catch(()=>"");if(c)if((l.headers.get("content-type")||"").includes("application/json")||S1(c))try{u=JSON.parse(c)}catch{u=c}else u=c;if(!l.ok)throw new gn(l.status,Av(l.status,u,e),e,u);return u}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}function ol(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{if(!l.ok){const u=await l.text().catch(()=>""),c=u||null;throw new gn(l.status,Av(l.status,c,e),e,c)}return l.blob()}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}class $v{constructor(t){Fn(this,"store",new Map);Fn(this,"inflight",new Map);Fn(this,"totalBytes",0);this.maxBytes=t}getMaxBytes(){return this.maxBytes}getTotalBytes(){return this.totalBytes}getSize(){return this.store.size}has(t){return this.store.has(t)}isInflight(t){return this.inflight.has(t)}get(t){const n=this.store.get(t);if(n)return this.store.delete(t),this.store.set(t,n),n.blob}evictIfNeeded(t){for(;this.totalBytes+t>this.maxBytes&&this.store.size>0;){const n=this.store.keys().next().value;if(n==null)break;const r=this.store.get(n);r&&(this.totalBytes-=r.size),this.store.delete(n)}}set(t,n){const r=n.size||0;if(!(r>this.maxBytes)){if(this.store.has(t)){const s=this.store.get(t);this.totalBytes-=s.size,this.store.delete(t)}this.evictIfNeeded(r),this.store.set(t,{blob:n,size:r}),this.totalBytes+=r}}async getOrFetch(t,n){const r=this.get(t);if(r)return r;const s=this.inflight.get(t);if(s)return s.promise;const i=n(),o=typeof i=="object"&&"promise"in i,l=o?i.promise:i,u=o?i.abort:void 0,c=l.then(f=>(this.set(t,f),f)).finally(()=>{this.inflight.delete(t)});return this.inflight.set(t,{promise:c,abort:u}),c}prefetch(t,n){if(this.store.has(t)||this.inflight.has(t))return;const r=n(),s=typeof r=="object"&&"promise"in r,i=s?r.promise:r,o=s?r.abort:void 0,l=i.then(u=>(this.set(t,u),u)).catch(()=>new Blob).finally(()=>{this.inflight.delete(t)});this.inflight.set(t,{promise:l,abort:o})}cancelPrefetch(t){const n=this.inflight.get(t);if(n!=null&&n.abort)try{n.abort()}catch{}this.inflight.delete(t)}clear(){for(const[t,n]of this.inflight)if(n.abort)try{n.abort()}catch{}this.inflight.clear(),this.store.clear(),this.totalBytes=0}evictPrefix(t){const n=(()=>{const s=t?`/${t.replace(/^\/+/,"")}`:"/";return s==="/"?"/":s.replace(/\/+$/,"")})(),r=s=>{const i=s.startsWith("/")?s.replace(/\/+$/,""):`/${s.replace(/\/+$/,"")}`;return n==="/"?!0:i===n||i.startsWith(`${n}/`)};for(const[s,i]of Array.from(this.store.entries()))r(s)&&(this.totalBytes-=i.size,this.store.delete(s));for(const[s,i]of Array.from(this.inflight.entries()))if(r(s)){if(i.abort)try{i.abort()}catch{}this.inflight.delete(s)}this.totalBytes<0&&(this.totalBytes=0)}}const Es=new $v(60*1024*1024),Ac=new $v(20*1024*1024),Cu={};function C1(){const e=Cu==null?void 0:Cu.VITE_API_BASE,t=typeof window<"u",n=t?window.location.origin:"http://localhost",r=t?window.location.hostname:"localhost",s=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\]|.+\.localhost)$/i.test(r);if(!e)return"";let i;try{i=new URL(e,n)}catch{return""}const o=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\])$/i.test(i.hostname);return s?i.origin:o?"":i.origin}const Ue=C1();const k1=40*1024*1024;function b1(e){return e==="viewer"||e==="compare"}function rm(e){return`${Ue}/thumb?path=${encodeURIComponent(e)}`}function sm(e){return`${Ue}/file?path=${encodeURIComponent(e)}`}const ku="lenslet.client_id",im="lenslet.client_id.session",Uv="lenslet.last_event_id",E1=1e3,N1=3e4,j1=5;let $c=null,El=null,om=0,Hs=null,Vs=0,ja=!0,ia=!1;function Bv(){return typeof window<"u"&&typeof EventSource<"u"}function lm(e,t){if(!e)return null;try{return e.getItem(t)}catch{return null}}function am(e,t,n){if(e)try{e.setItem(t,n)}catch{}}function M1(e,t){if(e)try{e.removeItem(t)}catch{}}function R1(){if(typeof navigator>"u")return"server";const e=navigator.userAgent||"",t=navigator.language||"",n=navigator.platform||"",r=typeof Intl<"u"&&Intl.DateTimeFormat().resolvedOptions().timeZone||"",s=typeof screen<"u"?`${screen.width}x${screen.height}x${screen.colorDepth}`:"";return[e,t,n,r,s].join("|")}function L1(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=t*16777619>>>0;return t.toString(16).padStart(8,"0")}function um(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`}function Ri(e){return $c=e,e}function fi(){if($c)return $c;const e=typeof window<"u"?window.localStorage:null,t=typeof window<"u"?window.sessionStorage:null,n=lm(t,im);if(n)return Ri(n);const r=lm(e,ku);if(t){const i=um();return am(t,im,i),r&&M1(e,ku),Ri(i)}if(r)return Ri(r);if(e){const i=um();return am(e,ku,i),Ri(i)}const s=`fp_${L1(R1())}_${Math.random().toString(36).slice(2,8)}`;return Ri(s)}function ho(e="lenslet"){om+=1;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`nonce_${Math.random().toString(36).slice(2,10)}_${Date.now()}_${om}`;return`${e}:${fi()}:${t}`}function T1(){if(El!=null)return El;if(typeof window>"u")return null;try{const e=window.localStorage.getItem(Uv);if(!e)return null;const t=Number(e);return!Number.isFinite(t)||t<=0?null:(El=t,t)}catch{return null}}function P1(e){if(!(!Number.isFinite(e)||e<=0)&&(El=e,!(typeof window>"u")))try{window.localStorage.setItem(Uv,String(e))}catch{}}function _1(){if(typeof window>"u")return`${Ue}/events`;const e=new URL(`${Ue}/events`,window.location.origin),t=T1();return t!=null&&Number.isFinite(t)&&e.searchParams.set("last_event_id",String(t)),e.toString()}function I1(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}let un=null,Wv="idle";const Uc=new Set,Bc=new Set,Wc=new Set;function Qs(e){Wv=e;for(const t of Bc)t(e)}function ef(e){if(ia!==e){ia=e;for(const t of Wc)t(e)}}function tf(){Hs!=null&&(window.clearTimeout(Hs),Hs=null)}function F1(){Vs=0,tf()}function O1(){if(!ja||Hs!=null)return;Vs+=1;const e=Math.min(E1*Math.pow(2,Vs-1),N1);Vs>=j1?(Qs("offline"),ef(!0)):Qs("reconnecting"),Hs=window.setTimeout(()=>{Hs=null,Hv()},e)}function Hv(){if(!ja||!Bv()||(un&&un.readyState===EventSource.CLOSED&&(un.close(),un=null),un))return;Vs>0?Qs("reconnecting"):Qs("connecting");const e=new EventSource(_1());un=e;const t=n=>r=>{const s=I1(r.data);if(!s)return;const i=r.lastEventId?Number(r.lastEventId):null,o=i!=null&&Number.isFinite(i)?i:null;o!=null&&P1(o);for(const l of Uc)l({type:n,id:o,data:s})};e.addEventListener("item-updated",t("item-updated")),e.addEventListener("metrics-updated",t("metrics-updated")),e.addEventListener("presence",t("presence")),e.onopen=()=>{F1(),ef(!1),Qs("live")},e.onerror=()=>{un===e&&(e.close(),un=null,O1())}}function z1(){ja=!0,Bv()&&(tf(),Hv())}function D1(){ja=!1,tf(),Vs=0,un&&(un.close(),un=null),ef(!1),Qs("offline")}function A1(e){return Uc.add(e),()=>{Uc.delete(e)}}function $1(e){return Bc.add(e),e(Wv),()=>{Bc.delete(e)}}function U1(e){return Wc.add(e),e(ia),()=>{Wc.delete(e)}}function B1(){return ia}function W1(e,t){const n=JSON.stringify(t),r=`${Ue}${e}`;if(typeof navigator<"u"&&typeof navigator.sendBeacon=="function")try{if(navigator.sendBeacon(r,new Blob([n],{type:"application/json"})))return!0}catch{}if(typeof fetch!="function")return!1;try{return fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:n,keepalive:!0}),!0}catch{return!1}}function H1(e,t,n){return W1("/presence/leave",{gallery_id:e,lease_id:t,client_id:n??fi()})}function ll(e){return e??fi()}function al(e,t){return at(`${Ue}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).promise}function V1(e,t){const n=new URLSearchParams({path:e});return(t==null?void 0:t.page)!=null&&n.set("page",String(t.page)),(t==null?void 0:t.pageSize)!=null&&n.set("page_size",String(t.pageSize)),t!=null&&t.recursive&&n.set("recursive","1"),t!=null&&t.legacyRecursive&&n.set("legacy_recursive","1"),n.toString()}const ge={getFolder:(e,t)=>at(`${Ue}/folders?${V1(e,t)}`).promise,search:(e,t)=>{const n=new URLSearchParams;return e&&n.set("q",e),t&&n.set("path",t),at(`${Ue}/search?${n}`).promise},getEmbeddings:()=>at(`${Ue}/embeddings`).promise,searchEmbeddings:e=>at(`${Ue}/embeddings/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise,refreshFolder:e=>{const t=new URLSearchParams({path:e});return at(`${Ue}/refresh?${t}`,{method:"POST"}).promise},getSidecar:e=>at(`${Ue}/item?path=${encodeURIComponent(e)}`).promise,patchSidecar:(e,t,n)=>{const s={"Content-Type":"application/json","Idempotency-Key":(n==null?void 0:n.idempotencyKey)??ho("patch"),"x-client-id":fi(),"x-updated-by":"web"};return(n==null?void 0:n.ifMatch)!=null&&(s["If-Match"]=String(n.ifMatch)),at(`${Ue}/item?path=${encodeURIComponent(e)}`,{method:"PATCH",headers:s,body:JSON.stringify(t)}).promise},getMetadata:e=>at(`${Ue}/metadata?path=${encodeURIComponent(e)}`).promise,putSidecar:(e,t)=>at(`${Ue}/item?path=${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-client-id":fi(),"x-updated-by":"web"},body:JSON.stringify(t)}).promise,getHealth:()=>at(`${Ue}/health`).promise,joinPresence:(e,t,n)=>al("/presence/join",{gallery_id:e,client_id:ll(n),lease_id:t}),movePresence:(e,t,n,r)=>al("/presence/move",{from_gallery_id:e,to_gallery_id:t,client_id:ll(r),lease_id:n}),leavePresence:(e,t,n)=>al("/presence/leave",{gallery_id:e,client_id:ll(n),lease_id:t}),postPresence:(e,t,n)=>al("/presence",{gallery_id:e,client_id:ll(n),lease_id:t}),getThumb:e=>Ac.getOrFetch(e,()=>ol(rm(e))),prefetchThumb:e=>{Ac.prefetch(e,()=>ol(rm(e)))},getFile:e=>Es.getOrFetch(e,()=>ol(sm(e))),prefetchFile:async(e,t)=>{if(b1(t)&&!(Es.has(e)||Es.isInflight(e)))try{const n=await ol(sm(e),{headers:{"x-lenslet-prefetch":t}}).promise;n.size<=k1&&Es.set(e,n)}catch{}},cancelPrefetch:e=>{Es.cancelPrefetch(e)},uploadFile:async(e,t)=>{const n=new FormData;return n.append("dest",e),n.append("file",t),at(`${Ue}/file`,{method:"POST",body:n,timeoutMs:6e4}).promise},moveFile:async(e,t)=>{const n=new FormData;return n.append("src",e),n.append("dest",t),at(`${Ue}/move`,{method:"POST",body:n}).promise},deleteFiles:async e=>at(`${Ue}/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:e})}).promise,exportIntent:async e=>{const t=new FormData;return t.append("path",e),at(`${Ue}/export-intent`,{method:"POST",body:t}).promise},getViews:()=>at(`${Ue}/views`).promise,saveViews:e=>at(`${Ue}/views`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise};class Q1{constructor(t=400){Fn(this,"cache",new Map);Fn(this,"maxSize");this.maxSize=t,typeof window<"u"&&window.addEventListener("beforeunload",()=>this.clear(),{once:!0})}get(t){const n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){for(this.cache.has(t)&&this.cache.delete(t);this.cache.size>=this.maxSize;){const r=this.cache.keys().next().value;if(r===void 0)break;const s=this.cache.get(r);if(this.cache.delete(r),s)try{URL.revokeObjectURL(s)}catch{}}this.cache.set(t,n)}clear(){for(const t of this.cache.values())try{URL.revokeObjectURL(t)}catch{}this.cache.clear()}}const bu=new Q1(400);function K1({path:e,name:t,onClick:n,selected:r,highlighted:s,highlightKey:i,displayW:o,displayH:l,ioRoot:u,isScrolling:c,priority:f}){const h=d.useRef(null),[v,w]=d.useState(()=>bu.get(e)??null),[b,E]=d.useState(!1),[L,y]=d.useState(()=>!!v);d.useEffect(()=>{const p=h.current;if(!p)return;const g=new IntersectionObserver(C=>{for(const M of C)M.target===p&&E(M.isIntersecting||M.intersectionRatio>0)},{root:u??null,rootMargin:"200px 0px",threshold:.01});return g.observe(p),()=>{g.unobserve(p),g.disconnect()}},[u]),d.useEffect(()=>{if(v||!(b&&!c||f))return;let p=!0;return ge.getThumb(e).then(g=>{if(!p)return;const C=URL.createObjectURL(g);bu.set(e,C),w(C)}).catch(()=>{}),()=>{p=!1}},[e,v,b,c,f]),d.useEffect(()=>{var g;if(!v){y(!1);return}const p=(g=h.current)==null?void 0:g.querySelector("img");p&&p.complete&&p.naturalWidth>0?y(!0):y(!1)},[v]),d.useEffect(()=>{w(bu.get(e)??null)},[e]);const m=["absolute inset-0 relative bg-hover border border-border rounded-lg overflow-hidden select-none",r?"outline-2 outline-accent":"",s?"thumb-updated-ring":"","hover:outline hover:outline-1 hover:outline-accent"].filter(Boolean).join(" ");return a.jsx("div",{ref:h,"data-highlight-key":i??void 0,className:m,onClick:n,children:v?a.jsx("img",{className:`w-full h-full object-cover block pointer-events-none select-none opacity-0 transition-opacity duration-[160ms] ${L?"opacity-100":""}`,src:v,alt:t,loading:"lazy",decoding:"async",onLoad:()=>y(!0),width:o?Math.round(o):void 0,height:l?Math.round(l):void 0}):null})}function ks(e,t,n){let r=n.initialDeps??[],s,i=!0;function o(){var l,u,c;let f;n.key&&((l=n.debug)!=null&&l.call(n))&&(f=Date.now());const h=e();if(!(h.length!==r.length||h.some((b,E)=>r[E]!==b)))return s;r=h;let w;if(n.key&&((u=n.debug)!=null&&u.call(n))&&(w=Date.now()),s=t(...h),n.key&&((c=n.debug)!=null&&c.call(n))){const b=Math.round((Date.now()-f)*100)/100,E=Math.round((Date.now()-w)*100)/100,L=E/16,y=(m,p)=>{for(m=String(m);m.length<p;)m=" "+m;return m};console.info(`%c ${y(E,5)} /${y(b,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*L,120))}deg 100% 31%);`,n==null?void 0:n.key)}return n!=null&&n.onChange&&!(i&&n.skipInitialOnChange)&&n.onChange(s),i=!1,s}return o.updateDeps=l=>{r=l},o}function cm(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const q1=(e,t)=>Math.abs(e-t)<1.01,G1=(e,t,n)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,s),n)}},dm=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},Y1=e=>e,X1=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},J1=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const s=o=>{const{width:l,height:u}=o;t({width:Math.round(l),height:Math.round(u)})};if(s(dm(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const u=o[0];if(u!=null&&u.borderBoxSize){const c=u.borderBoxSize[0];if(c){s({width:c.inlineSize,height:c.blockSize});return}}s(dm(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},fm={passive:!0},hm=typeof window>"u"?!0:"onscrollend"in window,Z1=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&hm?()=>{}:G1(r,()=>{t(s,!1)},e.options.isScrollingResetDelay),o=f=>()=>{const{horizontal:h,isRtl:v}=e.options;s=h?n.scrollLeft*(v&&-1||1):n.scrollTop,i(),t(s,f)},l=o(!0),u=o(!1);u(),n.addEventListener("scroll",l,fm);const c=e.options.useScrollendEvent&&hm;return c&&n.addEventListener("scrollend",u,fm),()=>{n.removeEventListener("scroll",l),c&&n.removeEventListener("scrollend",u)}},eS=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},tS=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const o=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class nS{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Y1,rangeExtractor:X1,onChange:()=>{},measureElement:eS,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=ks(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=n[o];if(s.has(l.lane))continue;const u=i.get(l.lane);if(u==null||l.end>u.end?i.set(l.lane,l):l.end<u.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=ks(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,s,i,o,l)=>(this.prevLanes!==void 0&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=ks(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l},u)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const v of this.laneAssignments.keys())v>=n&&this.laneAssignments.delete(v);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(v=>{this.itemSizeCache.set(v.key,v.size)}));const c=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const f=this.measurementsCache.slice(0,c),h=new Array(l).fill(void 0);for(let v=0;v<c;v++){const w=f[v];w&&(h[w.lane]=v)}for(let v=c;v<n;v++){const w=i(v),b=this.laneAssignments.get(v);let E,L;if(b!==void 0&&this.options.lanes>1){E=b;const g=h[E],C=g!==void 0?f[g]:void 0;L=C?C.end+this.options.gap:r+s}else{const g=this.options.lanes===1?f[v-1]:this.getFurthestMeasurement(f,v);L=g?g.end+this.options.gap:r+s,E=g?g.lane:v%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(v,E)}const y=u.get(w),m=typeof y=="number"?y:this.options.estimateSize(v),p=L+m;f[v]={index:v,start:L,size:m,end:p,key:w,lane:E},h[E]=v}return this.measurementsCache=f,f},{key:!1,debug:()=>this.options.debug}),this.calculateRange=ks(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?rS({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=ks(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,o)=>i===null||o===null?[]:n({startIndex:i,endIndex:o,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=ks(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,o=n.length;i<o;i++){const l=n[i],u=r[l];s.push(u)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return cm(r[Vv(0,r.length-1,s=>cm(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(s.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const o=10,l=c=>{if(!this.targetWindow)return;const f=this.getOffsetForIndex(n,c);if(!f){console.warn("Failed to get offset for index:",n);return}const[h,v]=f;this._scrollToOffset(h,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const w=this.getScrollOffset(),b=this.getOffsetForIndex(n,v);if(!b){console.warn("Failed to get offset for index:",n);return}q1(b[0],w)||u(v)})},u=c=>{this.targetWindow&&(i++,i<o?this.targetWindow.requestAnimationFrame(()=>l(c)):console.warn(`Failed to scroll to index ${n} after ${o} attempts.`))};l(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}s=Math.max(...i.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const Vv=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function rS({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const s=e.length-1,i=u=>e[u].start;if(e.length<=r)return{startIndex:0,endIndex:s};let o=Vv(0,s,i,n),l=o;if(r===1)for(;l<s&&e[l].end<n+t;)l++;else if(r>1){const u=Array(r).fill(0);for(;l<s&&u.some(f=>f<n+t);){const f=e[l];u[f.lane]=f.end,l++}const c=Array(r).fill(n+t);for(;o>=0&&c.some(f=>f>=n);){const f=e[o];c[f.lane]=f.start,o--}o=Math.max(0,o-o%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const mm=typeof document<"u"?d.useLayoutEffect:d.useEffect;function sS(e){const t=d.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var o;i?Gd.flushSync(t):t(),(o=e.onChange)==null||o.call(e,s,i)}},[r]=d.useState(()=>new nS(n));return r.setOptions(n),mm(()=>r._didMount(),[]),mm(()=>r._willUpdate()),r}function iS(e){return sS({observeElementRect:J1,observeElementOffset:Z1,scrollToFn:tS,...e})}function oS({containerW:e,gap:t,targetCell:n,aspect:r,captionH:s}){const i=Math.max(1,Math.floor((e+t)/(n+t))),o=(e-t*(i-1))/i,l=o*r.h/r.w,u=l+s+t;return{columns:i,cellW:o,mediaH:l,rowH:u}}const lS=1.333;function aS({items:e,containerWidth:t,targetHeight:n,gap:r,captionH:s}){if(t<=0)return[];const i=[];let o=[],l=0;const u=(c,f)=>({index:i.length,height:f+s+r,imageH:f,items:c.map(h=>({item:h.item,displayW:h.aspect*f,displayH:f,originalIndex:h.originalIndex}))});for(let c=0;c<e.length;c++){const f=e[c],h=f.w>0&&f.h>0?f.w/f.h:lS;o.push({item:f,aspect:h,originalIndex:c}),l+=h;const v=(o.length-1)*r;if(l*n+v>=t){const b=(t-v)/l;i.push(u(o,b)),o=[],l=0}}return o.length>0&&i.push(u(o,n)),i}function uS(e,t,n){return{mode:"adaptive",rows:aS({items:t,containerWidth:e,targetHeight:n.targetCell,gap:n.gap,captionH:n.captionH})}}function cS(e,t,n){const{columns:r,cellW:s,mediaH:i,rowH:o}=oS({containerW:e,gap:n.gap,targetCell:n.targetCell,aspect:n.aspect,captionH:n.captionH}),l=Math.ceil(t.length/Math.max(1,r));return{mode:"grid",columns:r,cellW:s,mediaH:i,rowH:o,rowCount:l}}function dS(e,t,n){const[r,s]=d.useState(0);d.useLayoutEffect(()=>{const u=e.current;if(!u)return;const c=()=>{const h=getComputedStyle(u),v=u.clientWidth-parseFloat(h.paddingLeft)-parseFloat(h.paddingRight);s(v)},f=new ResizeObserver(c);return f.observe(u),c(),()=>f.disconnect()},[]);const i=d.useMemo(()=>n.viewMode==="adaptive"?uS(r,t,n):cS(r,t,n),[r,t,n.viewMode,n.gap,n.targetCell,n.aspect.w,n.aspect.h,n.captionH]),o=iS({count:i.mode==="adaptive"?i.rows.length:i.rowCount,getScrollElement:()=>e.current,estimateSize:u=>i.mode==="adaptive"?i.rows[u].height:i.rowH,overscan:8}),l=o.getVirtualItems();return d.useEffect(()=>{o.measure()},[i,o]),{width:r,layout:i,rowVirtualizer:o,virtualRows:l}}function fS(e,t,n,r){if(!e.length)return null;const s=n?e.findIndex(l=>l.path===n):0,i=Math.max(1,t);let o=s;if(r.key==="ArrowRight"||r.key==="d")o=Math.min(e.length-1,s+1);else if(r.key==="ArrowLeft"||r.key==="a")o=Math.max(0,s-1);else if(r.key==="ArrowDown"||r.key==="s")o=Math.min(e.length-1,s+i);else if(r.key==="ArrowUp"||r.key==="w")o=Math.max(0,s-i);else return r.key==="Enter"&&n?"open":null;return o}function hS(e,t,n){const r=[];for(const s of e){if(t.mode==="adaptive"){const l=t.rows[s.index];if(!l)continue;for(const u of l.items)r.push(u.item.path);continue}const i=s.index*t.columns,o=n.slice(i,i+t.columns);for(const l of o)r.push(l.path)}return Array.from(new Set(r))}const On=12,mS=44,pS={w:4,h:3},gS=350,vS=120;function yS(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function xS({items:e,selected:t,restoreToSelectionToken:n,onSelectionChange:r,onOpenViewer:s,onContextMenuItem:i,highlight:o,recentlyUpdated:l,onVisiblePathsChange:u,suppressSelectionHighlight:c=!1,viewMode:f="grid",targetCellSize:h=220,scrollRef:v,hideScrollbar:w=!1}){const[b,E]=d.useState(null),[L,y]=d.useState(null),[m,p]=d.useState(!1),[g,C]=d.useState(null),[M,R]=d.useState(null),k=d.useRef(null),T=d.useRef(null),N=d.useRef(null),_=v??N,B=d.useRef(null),z=d.useRef(new Set),oe=h,{width:ue,layout:P,rowVirtualizer:de,virtualRows:D}=dS(_,e,{gap:On,targetCell:oe,aspect:pS,captionH:mS,viewMode:f}),V=d.useMemo(()=>{const A=new Map;for(let ne=0;ne<e.length;ne++)A.set(e[ne].path,ne);return A},[e]),q=d.useMemo(()=>{if(P.mode!=="adaptive")return null;const A=new Map;return P.rows.forEach((ne,re)=>{let U=0;ne.items.forEach((J,se)=>{const ie=U+J.displayW/2;A.set(J.item.path,{row:re,center:ie,order:se}),U+=J.displayW+On})}),A},[P]);d.useEffect(()=>{if(!t.length)return;const A=t[0];g!==A&&C(A)},[t,g]);const Z=d.useMemo(()=>{if(P.mode!=="adaptive")return null;let A=0;return P.rows.map(ne=>{const re=A;return A+=ne.height,{start:re,height:ne.height}})},[P]),ce=d.useRef(null),Pe=(A,ne)=>{try{if(ce.current!=null){try{cancelAnimationFrame(ce.current)}catch{}ce.current=null}const re=A.scrollTop,U=ne-re;if(Math.abs(U)<1){A.scrollTop=ne;return}const J=140,se=performance.now(),ie=Ce=>1-Math.pow(1-Ce,3),ye=Ce=>{const Me=Math.min(1,(Ce-se)/J),Re=ie(Me);A.scrollTop=re+U*Re,Me<1?ce.current=requestAnimationFrame(ye):ce.current=null};ce.current=requestAnimationFrame(ye)}catch{A.scrollTop=ne}},[X,Q]=d.useState(!1);d.useEffect(()=>{const A=_.current;if(!A)return;let ne=0;const re=()=>{Q(!0),window.clearTimeout(ne),ne=window.setTimeout(()=>Q(!1),vS)};return A.addEventListener("scroll",re,{passive:!0}),()=>A.removeEventListener("scroll",re)},[]);const K=()=>{T.current!=null&&(window.clearTimeout(T.current),T.current=null)},fe=()=>{if(K(),p(!1),E(null),k.current){try{URL.revokeObjectURL(k.current)}catch{}k.current=null}y(null)},Le=A=>{X||(K(),E(A),p(!1),T.current=window.setTimeout(async()=>{T.current=null;try{const ne=await ge.getFile(A),re=URL.createObjectURL(ne);if(k.current)try{URL.revokeObjectURL(k.current)}catch{}k.current=re,y(re),p(!0)}catch{}},gS))},be=P.mode==="grid"?P.columns:Math.max(1,Math.floor(ue/(oe+On))),Ze=(A,ne)=>{if(P.mode!=="adaptive")return null;const re=P.rows[A];if(!re)return null;let U=0,J=null;for(const se of re.items){const ie=U+se.displayW/2,ye=Math.abs(ie-ne);(!J||ye<J.dist)&&(J={path:se.item.path,dist:ye}),U+=se.displayW+On}return J?J.path:null},qe=(A,ne)=>{var Re,et,lt,Rt;if(!e.length)return null;const re=A??e[0].path;if(P.mode!=="adaptive"){const xn=fS(e,be,re,ne);return xn==="open"||xn==null?xn:((Re=e[xn])==null?void 0:Re.path)??null}const U=q==null?void 0:q.get(re);if(!U)return re;const J=V.get(re)??0,se=ne.key;if(se==="Enter")return"open";if(se==="ArrowRight"||se==="d")return((et=e[Math.min(e.length-1,J+1)])==null?void 0:et.path)??re;if(se==="ArrowLeft"||se==="a")return((lt=e[Math.max(0,J-1)])==null?void 0:lt.path)??re;const ie=se==="ArrowDown"||se==="s"?1:se==="ArrowUp"||se==="w"?-1:0;if(ie===0)return null;const ye=U.row+ie;if(ye<0||ye>=(((Rt=P.rows)==null?void 0:Rt.length)??0))return re;const Ce=U.center;return Ze(ye,Ce)??re},we=A=>{var ne;try{(ne=document.getElementById(`cell-${encodeURIComponent(A)}`))==null||ne.focus()}catch{}},Ht=d.useCallback(A=>{try{ge.prefetchThumb(A)}catch{}},[]),it=(A,ne)=>{C(A),R(A);const re=!!ne.shiftKey,U=!!(ne.ctrlKey||ne.metaKey);if(re){const J=B.current??g??t[0]??A,se=V.get(J)??e.findIndex(ye=>ye.path===J),ie=V.get(A)??e.findIndex(ye=>ye.path===A);if(se!==-1&&ie!==-1){const ye=Math.min(se,ie),Ce=Math.max(se,ie),Me=e.slice(ye,Ce+1).map(Re=>Re.path);if(U){const Re=new Set(t);for(const et of Me)Re.add(et);r(Array.from(Re))}else r(Me)}else r([A])}else if(U){const J=new Set(t);J.has(A)?J.delete(A):J.add(A),r(Array.from(J)),B.current=A}else r([A]),B.current=A;X||Ht(A),we(A)},nn=(A,ne)=>{var re,U;try{const J=ot.has(A)&&t.length>0?t:[A];(re=ne.dataTransfer)==null||re.setData("application/x-lenslet-paths",JSON.stringify(J)),ne.dataTransfer&&(ne.dataTransfer.effectAllowed="copyMove");try{document.body.classList.add("drag-active")}catch{}const ie=ne.currentTarget.querySelector(".cell-content img"),ye=document.createElement("div");ye.className="drag-ghost";const Ce=document.createElement("img");Ce.draggable=!1,Ce.alt="drag",ie&&ie.src&&(Ce.src=ie.src),ye.appendChild(Ce),document.body.appendChild(ye);const Me=ye.getBoundingClientRect().width||150;(U=ne.dataTransfer)==null||U.setDragImage(ye,Math.round(Me/2),0);const Re=()=>{try{ye.remove()}catch{}try{document.body.classList.remove("drag-active")}catch{}window.removeEventListener("dragend",Re),window.removeEventListener("pointerup",Re),document.removeEventListener("visibilitychange",Re)};window.addEventListener("dragend",Re),window.addEventListener("pointerup",Re),document.addEventListener("visibilitychange",Re)}catch{}};d.useEffect(()=>{const A=_.current;if(!A)return;const ne=re=>{var Re,et,lt;const U=qe(M,re);if(U==null)return;if(re.preventDefault(),U==="open"){M&&s(M);return}const J=e.find(Rt=>Rt.path===U);if(!J)return;R(J.path),C(J.path),r([J.path]);try{B.current=J.path}catch{}const se=P.mode==="grid"?Math.floor((V.get(J.path)??0)/Math.max(1,P.columns)):((Re=q==null?void 0:q.get(J.path))==null?void 0:Re.row)??0,ie=A.scrollTop,ye=ie+A.clientHeight,Ce=P.mode==="adaptive"?((et=Z==null?void 0:Z[se])==null?void 0:et.start)??0:se*P.rowH,Me=P.mode==="adaptive"?Ce+(((lt=Z==null?void 0:Z[se])==null?void 0:lt.height)??0):Ce+P.rowH;(Ce<ie||Me>ye)&&Pe(A,Ce),we(J.path)};return A.addEventListener("keydown",ne),()=>{A.removeEventListener("keydown",ne)}},[e,M,be,s,P,q,Z,V]),d.useLayoutEffect(()=>{var se;const A=_.current;if(!A||!n||!t||t.length===0)return;const ne=t[0],re=V.get(ne);if(re==null||re<0)return;let U=0;if(P.mode==="grid")U=Math.floor(re/Math.max(1,P.columns));else{let ie=0,ye=P.rows.length-1;for(;ie<=ye;){const Ce=ie+ye>>1,Me=P.rows[Ce];if(re>=Me.items[0].originalIndex&&re<=Me.items[Me.items.length-1].originalIndex){U=Ce;break}re<Me.items[0].originalIndex?ye=Ce-1:ie=Ce+1}}const J=P.mode==="adaptive"?((se=Z==null?void 0:Z[U])==null?void 0:se.start)??0:U*P.rowH;try{A.scrollTop=J}catch{}},[n,P,Z]);const ot=d.useMemo(()=>new Set(t),[t]),yn=!!(b&&L&&m),Vt=d.useMemo(()=>hS(D,P,e),[e,P,D]);d.useEffect(()=>{if(!(X||Vt.length===0))for(const A of Vt)Ht(A)},[X,Vt,Ht]),d.useEffect(()=>{var A;(A=_.current)==null||A.focus()},[]),d.useEffect(()=>{var A;if(c){try{(A=_.current)==null||A.blur()}catch{}try{R(null)}catch{}}},[c]);const ft=d.useMemo(()=>{const A=new Set;for(const ne of D){if(P.mode==="adaptive"){const J=P.rows[ne.index];if(!J)continue;for(const se of J.items)A.add(se.item.path);continue}const re=ne.index*P.columns,U=Math.min(e.length,re+P.columns);for(let J=re;J<U;J+=1){const se=e[J];se&&A.add(se.path)}}return A},[e,P,D]);d.useEffect(()=>{u&&(yS(z.current,ft)||(z.current=ft,u(ft)))},[u,ft]);const ht=M?`cell-${encodeURIComponent(M)}`:void 0;return a.jsx("div",{role:"grid","aria-label":"Gallery",className:`relative h-full overflow-auto p-3 outline-none ${w?"scrollbar-hidden pr-4":"scrollbar-thin"} ${yn?"cursor-zoom-in":""}`,ref:_,tabIndex:0,"aria-activedescendant":ht,onMouseDown:()=>{var A;return(A=_.current)==null?void 0:A.focus()},style:{"--gap":`${On}px`},children:a.jsxs("div",{className:"relative w-full",style:{height:de.getTotalSize()},children:[D.map(A=>{var se;let ne=[],re={},U="";if(P.mode==="adaptive"){const ie=P.rows[A.index];if(!ie)return null;ne=ie.items,re={height:ie.height,transform:`translate3d(0, ${A.start}px, 0)`,display:"flex",gap:On,paddingBottom:On},U="absolute top-0 left-0 right-0 w-full will-change-transform"}else{const ie=A.index*P.columns;ne=e.slice(ie,ie+P.columns).map(Ce=>({item:Ce,displayW:P.cellW,displayH:P.mediaH})),re={transform:`translate3d(0, ${A.start}px, 0)`,gridTemplateColumns:`repeat(${P.columns}, minmax(0, 1fr))`,gap:On,paddingBottom:On},U="absolute top-0 left-0 right-0 w-full grid will-change-transform"}const J=A.index===((se=D[0])==null?void 0:se.index);return a.jsx("div",{className:U,role:"row",style:re,children:ne.map(({item:ie,displayW:ye,displayH:Ce})=>{const Me=!c&&(g===ie.path||ot.has(ie.path)),Re=(l==null?void 0:l.get(ie.path))??null,et=Re!=null,lt=P.mode==="adaptive"?{width:ye}:{},Rt=P.mode==="adaptive"?{height:Ce}:{},xn=P.mode==="adaptive"?"relative rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group shrink-0":"relative aspect-[4/3] rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group";return a.jsxs("div",{id:`cell-${encodeURIComponent(ie.path)}`,className:`relative min-w-0 ${Me?"outline outline-2 outline-accent outline-offset-2 rounded-[10px]":""}`,role:"gridcell","aria-selected":Me,tabIndex:M===ie.path?0:-1,onFocus:()=>R(ie.path),draggable:!0,style:lt,onDragStart:tt=>nn(ie.path,tt),onDragEnd:()=>{},onContextMenu:tt=>{tt.preventDefault(),tt.stopPropagation(),i&&i(tt,ie.path)},children:[a.jsxs("div",{className:xn,style:Rt,onDoubleClick:()=>s(ie.path),onMouseLeave:fe,children:[a.jsx("div",{className:"cell-content absolute inset-0",children:a.jsx(K1,{path:ie.path,name:ie.name,selected:Me,highlighted:et,highlightKey:Re,displayW:ye,displayH:Ce,ioRoot:_.current,isScrolling:X,priority:J,onClick:tt=>it(ie.path,tt)})}),a.jsx("div",{className:"absolute right-0 bottom-0 w-7 h-7 cursor-zoom-in",onMouseEnter:()=>Le(ie.path),onMouseLeave:fe,children:a.jsx("div",{className:"absolute right-0 bottom-0 h-[18px] w-[18px] flex items-center justify-center text-text select-none opacity-0 group-hover:opacity-50 hover:opacity-100 transition-all duration-[140ms]",style:{clipPath:'path("M0 9C0 4.02944 4.02944 0 9 0H18V18H0V9Z")',background:"linear-gradient(135deg, rgba(18,18,18,0.9) 0%, rgba(34,34,34,0.9) 60%, rgba(22,22,22,0.9) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",borderLeft:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 1px 2px rgba(0,0,0,0.45)",backdropFilter:"blur(1px)"},children:a.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#d9dce2]","aria-hidden":"true",style:{transform:"translate(0px,0px)"},children:[a.jsx("circle",{cx:"11",cy:"11",r:"5.4"}),a.jsx("path",{d:"M15.5 15.5 L19 19"})]})})})]}),a.jsxs("div",{className:"flex flex-col items-center text-center gap-0 mt-1 px-0.5 text-white/90",children:[a.jsx("div",{className:"text-sm leading-[18px] thumb-filename line-clamp-2 break-words hyphens-auto text-center",title:ie.name,children:(()=>{const tt=(o||"").trim();if(!tt)return ie.name;const Ae=ie.name,In=Ae.toLowerCase().indexOf(tt.toLowerCase());if(In===-1)return ie.name;const vi=Ae.slice(0,In),ms=Ae.slice(In,In+tt.length),wn=Ae.slice(In+tt.length);return a.jsxs(a.Fragment,{children:[vi,a.jsx("mark",{className:"bg-accent/20 text-inherit rounded px-0.5",children:ms}),wn]})})()}),a.jsxs("div",{className:"text-[11px] leading-[15px] opacity-70",children:[ie.w,"  ",ie.h]})]})]},ie.path)})},A.key)}),b&&L&&m&&Gd.createPortal(a.jsx("div",{className:"toolbar-offset fixed inset-0 z-[999] flex items-center justify-center pointer-events-none bg-black/20 opacity-100",children:a.jsx("img",{src:L,alt:"preview",className:"max-w-[80vw] max-h-[80vh] object-contain opacity-[0.98]"})}),document.body)]},`${f}-${be}`)})}const wS=48,SS=[.1,.24,.5,.74,.9];function CS({items:e,metricKey:t,scrollRef:n,sortDir:r}){const{orderedValues:s,numericValues:i}=d.useMemo(()=>{var N;const k=[],T=[];for(const _ of e){const B=(N=_.metrics)==null?void 0:N[t],z=B==null||Number.isNaN(B)?null:B;k.push(z),z!=null&&T.push(z)}return{orderedValues:k,numericValues:T}},[e,t]),o=d.useMemo(()=>kS(i,wS),[i]),l=d.useMemo(()=>bS(i,SS),[i]),[u,c]=d.useState(0),[f,h]=d.useState(null),[v,w]=d.useState(!1),b=d.useRef(null);if(d.useEffect(()=>{const k=n.current;if(!k)return;const T=()=>{const N=Math.max(1,k.scrollHeight-k.clientHeight),_=Vr(N>0?k.scrollTop/N:0);c(_)};return T(),k.addEventListener("scroll",T,{passive:!0}),window.addEventListener("resize",T),()=>{k.removeEventListener("scroll",T),window.removeEventListener("resize",T)}},[n,e.length]),d.useEffect(()=>{h(null)},[t,e.length]),!o)return null;const E={min:o.min,max:o.max},L=f!=null?gm(f):null,y=gm(u),m=r==="desc",p=d.useMemo(()=>f==null?null:jS(s,f),[s,f]);function g(k){h(Vr(k))}function C(){h(null)}function M(k){const T=n.current;if(!T)return;const N=Math.max(0,T.scrollHeight-T.clientHeight);T.scrollTop=Vr(k)*N}function R(k){var N;const T=(N=b.current)==null?void 0:N.getBoundingClientRect();return T?Vr((k.clientY-T.top)/T.height):null}return a.jsxs("div",{className:"absolute right-0 top-3 bottom-3 w-[14px] flex items-stretch pointer-events-auto",children:[a.jsxs("svg",{ref:b,viewBox:"0 0 10 100",preserveAspectRatio:"none",className:"w-full h-full rounded bg-surface-inset border border-border/60 cursor-ns-resize",onPointerDown:k=>{var N;k.preventDefault();const T=R(k);T!=null&&(w(!0),g(T),M(T),(N=b.current)==null||N.setPointerCapture(k.pointerId))},onPointerMove:k=>{const T=R(k);if(T==null){v||C();return}g(T),v&&M(T)},onPointerUp:k=>{var T;w(!1),(T=b.current)==null||T.releasePointerCapture(k.pointerId)},onPointerLeave:()=>{v||C()},children:[ES(o.bins,"var(--border-strong)",{flip:m}),NS(l,E,{flip:m,color:"var(--muted)"}),pm(y,{color:"var(--highlight)",strokeWidth:.8}),L!=null&&pm(L,{color:"var(--text-secondary)",strokeWidth:.6,dashed:!0})]}),p!=null&&f!=null&&a.jsx("div",{className:"pointer-events-none absolute right-full mr-2 px-1.5 py-0.5 rounded border border-border bg-surface text-[10px] text-text shadow",style:{top:`calc(${(f*100).toFixed(2)}% - 8px)`},children:RS(p)})]})}function kS(e,t){if(!e.length)return null;const n=Math.min(...e);let r=Math.max(...e);n===r&&(r=n+1);const s=new Array(t).fill(0),i=t/(r-n);for(const o of e){const l=Math.max(0,Math.min(t-1,Math.floor((o-n)*i)));s[l]+=1}return{bins:s,min:n,max:r}}function bS(e,t){if(!e.length)return[];const n=[...e].sort((s,i)=>s-i),r=n.length-1;return t.map(s=>{const i=r*s,o=Math.floor(i),l=Math.ceil(i);if(o===l)return n[o];const u=i-o;return n[o]+(n[l]-n[o])*u})}function ES(e,t,n){const r=Math.max(1,...e),s=100/e.length,i=(n==null?void 0:n.flip)??!1;return e.map((o,l)=>{const u=Math.max(.8,o/r*10),c=(i?e.length-1-l:l)*s;return a.jsx("rect",{x:10-u,y:c,width:u,height:Math.max(.2,s-.2),fill:t,opacity:.9},`sb-${l}`)})}function NS(e,t,n){const r=(n==null?void 0:n.flip)??!1,s=n==null?void 0:n.color;return e.map((i,o)=>{const l=MS(i,t,r),u=o===2;return a.jsx("line",{x1:0,y1:l,x2:10,y2:l,stroke:s,strokeWidth:u?.8:.5,opacity:u?.9:.6,vectorEffect:"non-scaling-stroke"},`qt-${o}-${i}`)})}function pm(e,t){return a.jsx("line",{x1:0,y1:e,x2:10,y2:e,stroke:t.color,strokeWidth:t.strokeWidth??.6,strokeDasharray:t.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function jS(e,t){if(!e.length)return null;const n=Math.round(Vr(t)*(e.length-1)),r=e[n];if(r!=null)return r;for(let s=1;s<e.length;s++){const i=n-s;if(i>=0&&e[i]!=null)return e[i];const o=n+s;if(o<e.length&&e[o]!=null)return e[o]}return null}function MS(e,t,n){const r=t.max-t.min;if(r===0)return 0;const s=Vr((e-t.min)/r);return(n?1-s:s)*100}function gm(e){return Vr(e)*100}function Vr(e){return e<0?0:e>1?1:e}function RS(e){if(e==null||Number.isNaN(e))return"-";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Qr(e,t){const[n,r]=d.useState(null),s=d.useRef(null);return d.useEffect(()=>{if(!e){if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}r(null);return}let i=!0;return e().then(o=>{if(!i)return;const l=URL.createObjectURL(o);if(s.current)try{URL.revokeObjectURL(s.current)}catch{}s.current=l,r(l)}).catch(()=>{}),()=>{i=!1}},t),d.useEffect(()=>()=>{if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}},[]),n}function LS(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[o,l]=d.useState(1),[u,c]=d.useState(!1),[f,h]=d.useState(!1),[v,w]=d.useState(!1),b=d.useRef(null),E=d.useRef(null),L=()=>{const p=b.current,g=E.current;if(!p||!g||!g.naturalWidth||!g.naturalHeight)return;const C=p.getBoundingClientRect(),M=C.width/g.naturalWidth,R=C.height/g.naturalHeight,k=Math.min(1,Math.min(M,R));l(k);const T=g.naturalWidth*k,N=g.naturalHeight*k;r((C.width-T)/2),i((C.height-N)/2)};return d.useEffect(()=>{const p=b.current;if(!p)return;const g=new ResizeObserver(()=>{try{requestAnimationFrame(()=>L())}catch{L()}});return g.observe(p),()=>g.disconnect()},[]),{scale:e,setScale:t,tx:n,setTx:r,ty:s,setTy:i,base:o,setBase:l,ready:u,setReady:c,dragging:f,setDragging:h,visible:v,setVisible:w,containerRef:b,imgRef:E,fitAndCenter:L,handleWheel:p=>{p.preventDefault();const g=p.deltaY>0?-1:1,C=1.2,M=.05,R=8,k=b.current;if(!k)return;const T=k.getBoundingClientRect(),N=p.clientX-T.left,_=p.clientY-T.top;t(B=>{const z=Math.min(R,Math.max(M,B*Math.pow(C,g))),oe=z/B;return r(ue=>N-oe*(N-ue)),i(ue=>_-oe*(_-ue)),Number(z.toFixed(4))})},handleMouseDown:p=>{const g=b.current,C=E.current;if(!g||!C||p.target!==C)return;const R=g.getBoundingClientRect();if(p.clientX<R.left||p.clientX>R.right||p.clientY<R.top||p.clientY>R.bottom)return;p.preventDefault(),p.stopPropagation(),h(!0);const k=p.clientX,T=p.clientY,N=n,_=s,B=oe=>{r(N+(oe.clientX-k)),i(_+(oe.clientY-T))},z=()=>{window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",z),h(!1)};window.addEventListener("mousemove",B),window.addEventListener("mouseup",z)}}}function TS({path:e,onClose:t,onNavigate:n,onZoomChange:r,requestedZoomPercent:s,onZoomRequestConsumed:i}){const{scale:o,setScale:l,tx:u,setTx:c,ty:f,setTy:h,base:v,ready:w,setReady:b,dragging:E,visible:L,setVisible:y,containerRef:m,imgRef:p,fitAndCenter:g,handleWheel:C,handleMouseDown:M}=LS(),R=Qr(()=>ge.getFile(e),[e]),k=Qr(()=>ge.getThumb(e),[e]),T=d.useCallback(()=>{y(!1),window.setTimeout(t,110)},[t,y]);return d.useEffect(()=>{requestAnimationFrame(()=>{var N;y(!0),(N=m.current)==null||N.focus()})},[e]),d.useEffect(()=>{const N=_=>{_.key==="Escape"?T():(_.key==="ArrowRight"||_.key==="d")&&n?n(1):(_.key==="ArrowLeft"||_.key==="a")&&n&&n(-1)};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[t,n]),d.useEffect(()=>{b(!1)},[R]),d.useEffect(()=>{r&&r(v*o*100)},[v,o,r]),d.useEffect(()=>{if(s==null)return;const N=m.current;if(!N){i&&i();return}const _=Math.max(.05,Math.min(8,s/100/Math.max(1e-6,v))),B=N.getBoundingClientRect(),z=B.width/2,oe=B.height/2;l(ue=>{const P=_/ue;return c(de=>z-P*(z-de)),h(de=>oe-P*(oe-de)),Number(_.toFixed(4))}),i&&i()},[s,v,i]),a.jsxs("div",{ref:m,role:"dialog","aria-modal":!0,"aria-label":"Image viewer",tabIndex:-1,className:`toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] flex items-start justify-start bg-panel z-viewer overflow-hidden transition-opacity duration-[110ms] ease-out cursor-grab focus:outline-none focus-visible:outline-none ${E?"cursor-grabbing select-none":""} ${L?"opacity-100":"opacity-0"}`,style:{outline:"none"},onClick:T,onWheel:C,onMouseDown:M,onKeyDown:N=>{N.key==="Tab"&&N.preventDefault()},children:[a.jsxs("button",{"aria-label":"Close",onClick:N=>{N.stopPropagation(),T()},className:"btn btn-sm absolute top-3 right-3 z-10",title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]}),k&&a.jsx("img",{src:k,alt:"thumb",className:"absolute top-0 left-0 max-w-none max-h-none object-contain pointer-events-none transition-opacity duration-[110ms] ease-out",draggable:!1,onDragStart:N=>N.preventDefault(),style:{transform:`translate(${u}px, ${f}px) scale(${v})`,transformOrigin:"0 0",opacity:w?0:.5,filter:"blur(0.25px)"}}),R&&a.jsx("img",{ref:p,src:R,alt:"viewer",className:"max-w-none max-h-none object-contain transition-opacity duration-[110ms] ease-out will-change-transform select-none",draggable:!1,onDragStart:N=>{N.preventDefault()},onLoad:N=>{g(),l(1);try{requestAnimationFrame(()=>b(!0))}catch{b(!0)}},onClick:N=>N.stopPropagation(),style:{transform:`translate(${u}px, ${f}px) scale(${v*o})`,transformOrigin:"0 0",opacity:w?.99:0,WebkitUserDrag:"none"}})]})}function nf(e){return!e||!(e instanceof HTMLElement)?!1:e.closest('input, textarea, [contenteditable="true"]')!==null}const PS=1.2,_S=.05,IS=8;function FS(){const[e,t]=d.useState(1),[n,r]=d.useState(0),[s,i]=d.useState(0),[o,l]=d.useState(0),[u,c]=d.useState(0),[f,h]=d.useState(1),[v,w]=d.useState(1),[b,E]=d.useState(!1),L=d.useRef(null),y=d.useRef(null),m=d.useRef(null),p=d.useCallback(()=>{const R=L.current;if(!R)return;const k=R.getBoundingClientRect(),T=(N,_,B,z)=>{if(!N||!N.naturalWidth||!N.naturalHeight)return;const oe=k.width/N.naturalWidth,ue=k.height/N.naturalHeight,P=Math.min(1,Math.min(oe,ue)),de=N.naturalWidth*P,D=N.naturalHeight*P;_(P),B((k.width-de)/2),z((k.height-D)/2)};T(y.current,h,r,i),T(m.current,w,l,c)},[]);d.useEffect(()=>{const R=L.current;if(!R)return;const k=new ResizeObserver(()=>{try{requestAnimationFrame(()=>p())}catch{p()}});return k.observe(R),()=>k.disconnect()},[p]);const g=d.useCallback(()=>{t(1),p()},[p]),C=d.useCallback(R=>{R.preventDefault();const k=R.deltaY>0?-1:1,T=L.current;if(!T)return;const N=T.getBoundingClientRect(),_=R.clientX-N.left,B=R.clientY-N.top;t(z=>{const oe=Math.min(IS,Math.max(_S,z*Math.pow(PS,k))),ue=oe/z;return r(P=>_-ue*(_-P)),i(P=>B-ue*(B-P)),l(P=>_-ue*(_-P)),c(P=>B-ue*(B-P)),Number(oe.toFixed(4))})},[]),M=d.useCallback(R=>{if(R.button!==0||!L.current)return;R.preventDefault(),E(!0);const T=R.clientX,N=R.clientY,_=n,B=s,z=o,oe=u,ue=de=>{const D=de.clientX-T,V=de.clientY-N;r(_+D),i(B+V),l(z+D),c(oe+V)},P=()=>{window.removeEventListener("pointermove",ue),window.removeEventListener("pointerup",P),E(!1)};window.addEventListener("pointermove",ue),window.addEventListener("pointerup",P)},[n,s,o,u]);return{scale:e,baseA:f,baseB:v,txA:n,tyA:s,txB:o,tyB:u,dragging:b,containerRef:L,imgARef:y,imgBRef:m,fitAndCenter:p,resetView:g,handleWheel:C,handlePointerDown:M}}function OS({aItem:e,bItem:t,index:n,total:r,canPrev:s,canNext:i,onNavigate:o,onClose:l}){const u=d.useRef(null),[c,f]=d.useState(50),[h,v]=d.useState(!1),[w,b]=d.useState(!1),{scale:E,baseA:L,baseB:y,txA:m,tyA:p,txB:g,tyB:C,dragging:M,containerRef:R,imgARef:k,imgBRef:T,fitAndCenter:N,resetView:_,handleWheel:B,handlePointerDown:z}=FS(),oe=(e==null?void 0:e.path)??null,ue=(t==null?void 0:t.path)??null,P=(e==null?void 0:e.name)??oe??"Select an image",de=(t==null?void 0:t.name)??ue??"Select another image";d.useEffect(()=>{requestAnimationFrame(()=>{var Q;return(Q=u.current)==null?void 0:Q.focus()})},[oe,ue]),d.useEffect(()=>{_(),v(!1),b(!1)},[oe,ue,_]),d.useEffect(()=>{const Q=K=>{if(!nf(K.target)){if(K.key==="Escape"){K.preventDefault(),l();return}if((K.key==="ArrowRight"||K.key==="d")&&i){K.preventDefault(),o(1);return}(K.key==="ArrowLeft"||K.key==="a")&&s&&(K.preventDefault(),o(-1))}};return window.addEventListener("keydown",Q),()=>window.removeEventListener("keydown",Q)},[l,o,s,i]);const D=Qr(oe?()=>ge.getFile(oe):null,[oe]),V=Qr(ue?()=>ge.getFile(ue):null,[ue]),q=Qr(oe?()=>ge.getThumb(oe):null,[oe]),Z=Qr(ue?()=>ge.getThumb(ue):null,[ue]),ce=d.useCallback(Q=>Math.min(95,Math.max(5,Q)),[]),Pe=d.useCallback(Q=>{const K=Q.target;K!=null&&K.closest(".compare-label")||K!=null&&K.closest(".compare-divider-hit")||z(Q)},[z]),X=d.useCallback(Q=>{const K=R.current;if(!K)return;Q.preventDefault(),Q.stopPropagation();const fe=K.getBoundingClientRect(),Le=Q.currentTarget;Le.setPointerCapture(Q.pointerId);const be=qe=>{const we=(qe.clientX-fe.left)/fe.width*100;f(ce(we))},Ze=qe=>{Le.releasePointerCapture(qe.pointerId),window.removeEventListener("pointermove",be),window.removeEventListener("pointerup",Ze)};window.addEventListener("pointermove",be),window.addEventListener("pointerup",Ze)},[ce]);return a.jsxs("div",{ref:u,role:"dialog","aria-modal":!0,"aria-label":"Compare images",tabIndex:-1,className:"toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] bg-panel z-viewer flex flex-col overflow-hidden focus:outline-none",onKeyDown:Q=>{Q.key==="Tab"&&Q.preventDefault()},children:[a.jsxs("div",{className:"compare-header flex items-center gap-3 px-3 py-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Compare"}),a.jsx("div",{className:"text-xs text-muted",children:r>=2?`${n+1}-${Math.min(n+2,r)} of ${r}`:"Select 2 images"}),a.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(-1),disabled:!s,title:"Previous (Left Arrow or A)",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Prev"]}),a.jsxs("button",{className:"btn btn-sm",onClick:()=>o(1),disabled:!i,title:"Next (Right Arrow or D)",children:["Next",a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"btn btn-sm",onClick:l,title:"Close (Esc)",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"M6 6l12 12"})]}),"Close"]})]})]}),a.jsx("div",{className:"flex-1 min-h-0 p-3 bg-panel",children:a.jsx("div",{ref:R,className:`compare-stage ${M?"is-dragging":""}`,onWheel:B,onPointerDown:Pe,children:!e||!t?a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-sm text-muted",children:"Select 2 images to compare."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"compare-label left-3",children:[a.jsx("span",{className:"compare-label-tag",children:"A"}),a.jsx("span",{className:"truncate",title:e.path,children:P})]}),a.jsxs("div",{className:"compare-label right-3",children:[a.jsx("span",{className:"compare-label-tag",children:"B"}),a.jsx("span",{className:"truncate",title:t.path,children:de})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 ${100-c}% 0 0)`},children:[q&&a.jsx("img",{src:q,alt:"thumb A",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:Q=>Q.preventDefault(),style:{transform:`translate(${m}px, ${p}px) scale(${L})`,transformOrigin:"0 0",opacity:h?0:.5}}),D&&a.jsx("img",{ref:k,src:D,alt:"compare A",className:"compare-image",draggable:!1,onDragStart:Q=>Q.preventDefault(),onLoad:()=>{N();try{requestAnimationFrame(()=>v(!0))}catch{v(!0)}},style:{transform:`translate(${m}px, ${p}px) scale(${L*E})`,transformOrigin:"0 0",opacity:h?.99:0}})]}),a.jsxs("div",{className:"compare-layer",style:{clipPath:`inset(0 0 0 ${c}%)`},children:[Z&&a.jsx("img",{src:Z,alt:"thumb B",className:"compare-image compare-image-thumb",draggable:!1,onDragStart:Q=>Q.preventDefault(),style:{transform:`translate(${g}px, ${C}px) scale(${y})`,transformOrigin:"0 0",opacity:w?0:.5}}),V&&a.jsx("img",{ref:T,src:V,alt:"compare B",className:"compare-image",draggable:!1,onDragStart:Q=>Q.preventDefault(),onLoad:()=>{N();try{requestAnimationFrame(()=>b(!0))}catch{b(!0)}},style:{transform:`translate(${g}px, ${C}px) scale(${y*E})`,transformOrigin:"0 0",opacity:w?.99:0}})]}),a.jsxs("div",{className:"compare-divider-hit",style:{left:`${c}%`},onPointerDown:X,children:[a.jsx("div",{className:"compare-divider-line"}),a.jsx("div",{className:"compare-divider-handle"})]})]})})})]})}function Ma(){const[e,t]=d.useState(B1());return d.useEffect(()=>U1(t),[]),e}const mo=e=>["item",e],zS={v:1,tags:[],notes:"",version:1,updated_at:"",updated_by:"web"},ln=new Map,Nl=new Map,Hc=new Map,rf=new Map;let vm=0;const _n=new Map,zi=new Map,DS=12e3,Vc=new Set,Qc=new Set;let sf={state:"idle"},po=null,Kc=0;function ul(e){sf=e;for(const t of Vc)t(e)}function Kn(){const e=_n.size>0,t=ln.size+Nl.size+Kc;if(e){ul({state:"error",message:"Conflict detected"});return}if(po){ul({state:"error",message:po});return}if(t>0){ul({state:"syncing"});return}ul({state:"idle"})}function of(){let e=null;for(const t of Hc.values())e=e==null?t:Math.min(e,t);for(const t of rf.values())e=e==null?t:Math.min(e,t);return e}function oa(){const e=of();for(const t of Qc)t(e)}function la(e){po=e,Kn()}function Qv(){po&&(po=null,Kn())}function ym(e){Kc=Math.max(0,Kc+e),Kn()}function AS(){vm+=1;const e=vm;return rf.set(e,Date.now()),oa(),e}function $S(e){e!=null&&rf.delete(e)&&oa()}function Ra(e){const t=zi.get(e);if(!t||!t.size)return;const n=_n.get(e)??null;for(const r of t)r(n)}function xm(e){return _n.get(e)??null}function La(e){_n.delete(e)&&(Ra(e),Kn())}function US(e,t){_n.set(e,t),Ra(e),Kn()}function BS(e,t){const n=zi.get(e)??new Set;return n.add(t),zi.set(e,n),t(_n.get(e)??null),()=>{const r=zi.get(e);r&&(r.delete(t),r.size||zi.delete(e))}}function WS(e){const[t,n]=d.useState(()=>e?xm(e):null);return d.useEffect(()=>{if(!e){n(null);return}return n(xm(e)),BS(e,n)},[e]),t}function HS(e){return Vc.add(e),e(sf),()=>{Vc.delete(e)}}function VS(){const[e,t]=d.useState(sf);return d.useEffect(()=>HS(t),[]),e}function QS(e){return Qc.add(e),e(of()),()=>{Qc.delete(e)}}function KS(){const[e,t]=d.useState(()=>of()),[n,r]=d.useState(()=>e==null?null:Date.now()-e);return d.useEffect(()=>QS(t),[]),d.useEffect(()=>{if(e==null){r(null);return}r(Date.now()-e);const s=window.setInterval(()=>{r(Date.now()-e)},1e3);return()=>window.clearInterval(s)},[e]),n}function qc(e){const t={};return Object.prototype.hasOwnProperty.call(e,"star")&&(t.set_star=e.star??null),Object.prototype.hasOwnProperty.call(e,"notes")&&(t.set_notes=e.notes??""),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.set_tags=Array.isArray(e.tags)?e.tags:[]),t}function Gc(e){var t,n;return e.set_star!==void 0||e.set_notes!==void 0||e.set_tags!==void 0||(((t=e.add_tags)==null?void 0:t.length)??0)>0||(((n=e.remove_tags)==null?void 0:n.length)??0)>0}function Li(e){const t=[],n=new Set;for(const r of e??[]){if(typeof r!="string")continue;const s=r.trim();!s||n.has(s)||(n.add(s),t.push(s))}return t}function qS(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}function GS(e,t){if(e.set_star!==void 0&&(t.star??null)!==e.set_star||e.set_notes!==void 0&&(t.notes??"")!==(e.set_notes??""))return!1;if(e.set_tags!==void 0){const r=Li(e.set_tags),s=Li(t.tags);return qS(r,s)}const n=Li(t.tags);for(const r of Li(e.add_tags))if(!n.includes(r))return!1;for(const r of Li(e.remove_tags))if(n.includes(r))return!1;return!0}function Kv(e,t,n){if(n instanceof gn&&n.status===409){const r=n.body;if(r!=null&&r.current)return US(e,{path:e,current:r.current,pending:t,receivedAt:new Date().toISOString()}),!0}return!1}function YS(e,t){const n=_n.get(e);if(n){if(GS(n.pending,t)){La(e);return}_n.set(e,{...n,current:t}),Ra(e),Kn()}}function XS(e){const t=Ma();return Na({queryKey:mo(e),queryFn:()=>ge.getSidecar(e),enabled:!!e,staleTime:3e4,gcTime:5*6e4,retry:2,refetchInterval:t?DS:!1,refetchIntervalInBackground:t})}function JS(e){const t=_r();return p1({mutationFn:async({patch:n,baseVersion:r,idempotencyKey:s})=>{const i=qc(n);if(!Gc(i))return t.getQueryData(mo(e))??zS;const o={...i,base_version:r};try{return await ge.patchSidecar(e,o,{idempotencyKey:s??ho("patch"),ifMatch:r})}catch(l){throw Kv(e,i,l),l}},retry:(n,r)=>r instanceof gn&&r.status===409?!1:n<2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),4e3),onMutate:()=>(Qv(),ym(1),{inflightId:AS()}),onSuccess:n=>{La(e),t.setQueryData(mo(e),n)},onError:n=>{n instanceof gn&&n.status===409||(n instanceof gn?la(n.message):la("Failed to save"))},onSettled:(n,r,s,i)=>{ym(-1),$S(i==null?void 0:i.inflightId)}})}const ZS=6;async function wm(e,t){if(!e.length)return;let n=0;const r=[],s=async()=>{for(;n<e.length;){const o=n++,l=e[o];try{await qv(l,t)}catch(u){r.push({path:l,error:u}),console.error(`[bulkUpdateSidecars] Failed for ${l}:`,u)}}},i=Array.from({length:Math.min(ZS,e.length)},()=>s());if(await Promise.all(i),r.length===e.length)throw new Error(`All ${e.length} sidecar updates failed`)}async function qv(e,t){const n=ln.get(e)||{};ln.set(e,{...n,...t}),Qv(),Kn();const r=Nl.get(e);if(r)return r;Hc.set(e,Date.now()),oa();const s=(async()=>{try{for(;ln.has(e);){const i=ln.get(e);if(!i)break;const o=qc(i);if(!Gc(o)){ln.get(e)===i&&ln.delete(e);continue}let l=1;try{l=(await ge.getSidecar(e)).version??1}catch{l=1}const u={...o,base_version:l};try{await ge.patchSidecar(e,u,{idempotencyKey:ho("patch"),ifMatch:l}),La(e),ln.get(e)===i&&ln.delete(e)}catch(c){if(Kv(e,o,c)){const h=ln.get(e);if(h&&h!==i){const v=qc(h);if(Gc(v)){const w=_n.get(e);w&&(_n.set(e,{...w,pending:v}),Ra(e))}}ln.delete(e)}else c instanceof gn?la(c.message):la("Failed to save");throw c}}}finally{Nl.delete(e),Hc.delete(e),oa(),Kn()}})();return Nl.set(e,s),Kn(),s}function Eu(e){const t=["B","KB","MB","GB","TB"];let n=0,r=e;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${r.toFixed(1)} ${t[n]}`}function Nu(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function eC(e,t=28){if(e.length<=t)return e;const n=Math.max(4,Math.floor((t-1)/2));return`${e.slice(0,n)}${e.slice(-n)}`}const tC=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});function nC(e){const t=e.trim();return!t||/[zZ]|[+-]\d{2}:?\d{2}$/.test(t)?t:`${t.includes("T")?t:t.replace(" ","T")}Z`}function Gv(e){if(!e)return null;const t=Date.parse(nC(e));return Number.isFinite(t)?t:null}function rC(e,t=Date.now()){const n=Math.max(0,t-e),r=Math.max(1,Math.floor(n/1e3));if(r<60)return`${r} second${r===1?"":"s"} ago`;const s=Math.floor(r/60);if(s<60)return`${s} minute${s===1?"":"s"} ago`;const i=Math.floor(s/60);return`${i} hour${i===1?"":"s"} ago`}function sC(e){return tC.format(new Date(e))}function jl(e){if(Array.isArray(e))return e.map(jl);if(e&&typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,jl(n)]));if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")||t.startsWith('"')&&t.endsWith('"'))try{const r=JSON.parse(t);return jl(r)}catch{return e}}return e}function Ti(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function iC(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Sm(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}function oC(e){const t=/(\"(\\u[a-fA-F0-9]{4}|\\[^u]|[^\\"])*\"(?:\s*:)?|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\btrue\b|\bfalse\b|\bnull\b)/g;let n="",r=0;for(const s of e.matchAll(t)){const i=s.index??0,o=s[0];n+=Ti(e.slice(r,i));let l="var(--json-fallback)",u=null;if(o.startsWith('"')&&o.trimEnd().endsWith(":")){l="var(--json-key)";const c=o.trim().replace(/:\s*$/,"");try{u=JSON.parse(c)}catch{u=null}}else o.startsWith('"')?l="var(--json-string)":/true|false|null/.test(o)?l="var(--json-literal)":l="var(--json-number)";u?n+=`<span class="ui-json-key" data-json-key="${Ti(u)}" style="color:${l}">${Ti(o)}</span>`:n+=`<span style="color:${l}">${Ti(o)}</span>`,r=i+o.length}return n+=Ti(e.slice(r)),n}const lC=["overview","basics","metadata","notes"],Cm="lenslet.inspector.sections",km="lenslet.inspector.metricsExpanded",ju=12,aC={overview:!0,metadata:!0,basics:!0,notes:!0};function cl({title:e,open:t,onToggle:n,actions:r,children:s,contentClassName:i}){const[o,l]=d.useState(t),[u,c]=d.useState(t?"open":"closed");return d.useEffect(()=>{if(t){l(!0);const h=window.requestAnimationFrame(()=>c("open"));return()=>window.cancelAnimationFrame(h)}c("closing");const f=window.setTimeout(()=>{l(!1),c("closed")},140);return()=>window.clearTimeout(f)},[t]),a.jsxs("div",{className:"border-b border-border/60",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[a.jsxs("button",{type:"button",onClick:n,"aria-expanded":t,className:"flex items-center gap-2 inspector-section-title hover:text-text transition-colors",children:[a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform ${t?"rotate-90":""}`,"aria-hidden":"true",children:a.jsx("path",{d:"m9 18 6-6-6-6"})}),a.jsx("span",{children:e})]}),r]}),o&&a.jsx("div",{className:"inspector-section-body","data-state":u,"aria-hidden":!t,children:a.jsx("div",{className:i??"px-3 pb-3",children:s})})]})}function uC({path:e,selectedPaths:t=[],items:n=[],onResize:r,onStarChanged:s,sortSpec:i,onFindSimilar:o,embeddingsAvailable:l=!1,embeddingsLoading:u=!1,onLocalTypingChange:c}){const f=!!e,{data:h,isLoading:v}=XS(e??""),w=JS(e??""),b=_r(),[E,L]=d.useState(aC),y=d.useCallback(F=>{L(ae=>({...ae,[F]:!ae[F]}))},[]),[m,p]=d.useState(!1),g=t.length>1,C=!!o&&l&&!g,M=o?l?g?"Select a single image to search.":null:u?"Loading embeddings...":"No embeddings detected.":null,[R,k]=d.useState(""),[T,N]=d.useState(""),[_,B]=d.useState(null),[z,oe]=d.useState(null),[ue,P]=d.useState("idle"),[de,D]=d.useState(!1),[V,q]=d.useState(null),Z=d.useRef(null),[ce,Pe]=d.useState(!1),[X,Q]=d.useState(null),[K,fe]=d.useState({}),Le=d.useRef(!1),be=d.useCallback(F=>{Le.current!==F&&(Le.current=F,c==null||c(F))},[c]),qe=d.useMemo(()=>{const F=n.find(ae=>ae.path===e);return F&&F.star!==void 0?F.star:null},[n,e])??(h==null?void 0:h.star)??null,we=WS(g?null:e),Ht={tags:!!(we!=null&&we.pending.set_tags),notes:(we==null?void 0:we.pending.set_notes)!==void 0,star:(we==null?void 0:we.pending.set_star)!==void 0},it=d.useMemo(()=>{const F=new Set(t);return n.filter(ae=>F.has(ae.path))},[n,t]),nn=d.useMemo(()=>it.reduce((F,ae)=>F+(ae.size||0),0),[it]);d.useEffect(()=>{h&&(k((h.tags||[]).join(", ")),N(h.notes||"")),B(null),oe(null),P("idle"),D(!1),q(null),Z.current&&(window.clearTimeout(Z.current),Z.current=null),Pe(!1),be(!1)},[h==null?void 0:h.updated_at,be,e]),d.useEffect(()=>()=>{Z.current&&(window.clearTimeout(Z.current),Z.current=null),be(!1)},[be]);const ot=d.useCallback(F=>{if(g&&t.length){wm(t,F);return}if(!e)return;const ae=(h==null?void 0:h.version)??1;w.mutate({patch:F,baseVersion:ae,idempotencyKey:ho("patch")})},[g,t,e,h==null?void 0:h.version,w]),yn=d.useCallback(F=>{N(F),be(!0)},[be]),Vt=d.useCallback(()=>{ot({notes:T}),be(!1)},[ot,T,be]),ft=d.useCallback(F=>{k(F),be(!0)},[be]),ht=d.useCallback(()=>{ot({tags:Sm(R)}),be(!1)},[ot,be,R]),A=d.useCallback(()=>{if(!we||!e)return;const F={};we.pending.set_tags!==void 0&&(F.tags=Sm(R)),we.pending.set_notes!==void 0&&(F.notes=T),we.pending.set_star!==void 0&&(F.star=qe??null);const ae=we.current.version??1;w.mutate({patch:F,baseVersion:ae,idempotencyKey:ho("patch")})},[we,e,R,T,qe,w]),ne=d.useCallback(()=>{if(!we||!e)return;const F=we.current;k((F.tags||[]).join(", ")),N(F.notes||""),b.setQueryData(mo(e),F),La(e),s==null||s([e],F.star??null)},[we,e,b,s]);d.useEffect(()=>{if(!e)return;const F=ae=>{if(nf(ae.target))return;const xe=ae.key;if(!/^[0-5]$/.test(xe))return;ae.preventDefault();const Ee=xe==="0"?null:Number(xe);if(g&&t.length){ot({star:Ee}),s==null||s(t,Ee);return}ot({star:Ee}),s==null||s([e],Ee)};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[e,g,t,ot,s]);const re=Qr(e?()=>ge.getThumb(e):null,[e]),U=e?e.split("/").pop()||e:"",J=d.useMemo(()=>{var ae;if(U.includes("."))return U.slice(U.lastIndexOf(".")+1).toUpperCase();const F=n.find(xe=>xe.path===e);return(ae=F==null?void 0:F.type)!=null&&ae.includes("/")?F.type.split("/")[1].toUpperCase():""},[U,n,e]),se=d.useMemo(()=>n.find(F=>F.path===e),[n,e]),ie=d.useMemo(()=>e?(se==null?void 0:se.source)??e:"",[se,e]),ye=d.useCallback(async()=>{if(e){P("loading"),oe(null);try{const F=await ge.getMetadata(e);B(F.meta),P("loaded")}catch(F){const ae=F instanceof Error?F.message:"Failed to load metadata";B(null),oe(ae),P("error")}}},[e]),Ce=d.useMemo(()=>{if(!_)return"";try{return JSON.stringify(_,null,1)}catch{return""}},[_]),Me=d.useMemo(()=>{if(!_)return"";const F=jl(_);if(!ce&&F&&typeof F=="object"&&!Array.isArray(F)&&"pil_info"in F){const ae={};for(const[xe,Ee]of Object.entries(F))ae[xe]=xe==="pil_info"?"Hidden (toggle Show PIL info to expand)":Ee;return JSON.stringify(ae,null,1)}return JSON.stringify(F,null,1)},[_,ce]),Re=d.useCallback(()=>{var F;Ce&&((F=navigator.clipboard)==null||F.writeText(Ce).then(()=>{D(!0),setTimeout(()=>D(!1),1200)}).catch(ae=>{const xe=ae instanceof Error?ae.message:"Copy failed";oe(xe)}))},[Ce]),et=d.useCallback(F=>{var ae;F&&((ae=navigator.clipboard)==null||ae.writeText(F).then(()=>{q(F),Z.current&&window.clearTimeout(Z.current),Z.current=window.setTimeout(()=>{q(null),Z.current=null},900)}).catch(()=>{}))},[]),lt=d.useCallback(F=>{const ae=F.target;if(!ae)return;const xe=ae.closest("[data-json-key]");if(!xe)return;const Ee=xe.getAttribute("data-json-key");Ee&&(F.preventDefault(),et(Ee))},[et]),Rt=d.useMemo(()=>Me?oC(Me):"",[Me]),xn=ue==="loading"?"Loading metadata":ue==="error"&&z?z:Me||"PNG metadata not loaded yet.",tt=ue==="loading",Ae=ue==="loaded"&&!!Ce,In=Ae?"h-48":"h-24",vi=tt?"Loading":Ae?de?"Copied":"Copy":"Load meta",ms=Ae?Re:ye,wn=!!_&&typeof _=="object"&&!Array.isArray(_)&&"pil_info"in _,Ta=g?null:a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[Ae&&wn&&a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors",onClick:()=>Pe(F=>!F),disabled:!Ae,children:ce?"Hide PIL info":"Show PIL info"}),a.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[78px]",onClick:ms,disabled:!e||tt,children:vi})]});d.useEffect(()=>{try{const F=localStorage.getItem(Cm);if(!F)return;const ae=JSON.parse(F);if(!ae||typeof ae!="object")return;const xe={};for(const Ee of lC)typeof ae[Ee]=="boolean"&&(xe[Ee]=ae[Ee]);Object.keys(xe).length>0&&L(Ee=>({...Ee,...xe}))}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(Cm,JSON.stringify(E))}catch{}},[E]),d.useEffect(()=>{try{const F=localStorage.getItem(km);F==="1"||F==="true"?p(!0):(F==="0"||F==="false")&&p(!1)}catch{}},[]),d.useEffect(()=>{try{localStorage.setItem(km,m?"1":"0")}catch{}},[m]);const Ir=d.useCallback((F,ae)=>{var xe;ae&&((xe=navigator.clipboard)==null||xe.writeText(ae).then(()=>{Q(F),setTimeout(()=>Q(Ee=>Ee===F?null:Ee),1e3)}).catch(()=>{}))},[]),ps=d.useCallback((F,ae)=>{if(ae&&!K[F]){const xe=ae.offsetHeight;xe&&fe(Ee=>Ee[F]?Ee:{...Ee,[F]:xe})}},[K]),No="toolbar-offset absolute bottom-0 left-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20";return f?a.jsxs("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:[!g&&a.jsx("div",{className:"p-3 border-b border-border flex justify-center",children:a.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border w-[220px] h-[160px] bg-panel select-none",children:[re&&a.jsx("img",{src:re,alt:"thumb",className:"block w-full h-full object-contain"}),!!J&&a.jsx("div",{className:"absolute top-1.5 left-1.5 bg-surface border border-border text-text text-xs px-1.5 py-0.5 rounded-md select-none",children:J})]})}),a.jsxs(cl,{title:g?"Selection":"Item",open:E.overview,onToggle:()=>y("overview"),contentClassName:"px-3 pb-3 space-y-2",actions:o&&a.jsx("button",{type:"button",className:"btn btn-sm",onClick:o,disabled:!C,title:M??"Find similar",children:"Find similar"}),children:[g?a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Selected"}),a.jsxs("div",{className:"inspector-field-value",children:[t.length," files"]})]}),a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Total size"}),a.jsx("div",{className:"inspector-field-value",children:Eu(nn)})]})]}):a.jsxs("div",{className:"inspector-field",children:[a.jsx("div",{className:"inspector-field-label",children:"Filename"}),a.jsx("div",{className:"inspector-field-value break-all",title:U,children:U})]}),M&&a.jsx("div",{className:"text-[11px] text-muted",children:M})]}),a.jsxs(cl,{title:"Basics",open:E.basics,onToggle:()=>y("basics"),children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",role:"radiogroup","aria-label":"Star rating",children:[a.jsx("span",{className:"ui-kv-label w-16 shrink-0",children:g?"Rating (all)":"Rating"}),a.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(F=>{const ae=(qe??0)>=F;return a.jsx("button",{className:`w-6 h-6 flex items-center justify-center rounded-lg border border-border/60 bg-transparent text-[13px] ${ae?"text-star-active":"text-star-inactive"} hover:border-border hover:text-star-hover transition-colors`,onClick:()=>{const xe=qe===F&&!g?null:F;g&&t.length?(s==null||s(t,xe),wm(t,{star:xe})):e&&(s==null||s([e],xe),qv(e,{star:xe}))},title:`${F} star${F>1?"s":""} (key ${F})`,"aria-label":`${F} star${F>1?"s":""}`,"aria-pressed":qe===F,children:ae?"":""},F)})})]}),!g&&we&&Ht.star&&a.jsxs("div",{className:"ui-banner ui-banner-danger mt-2 text-[11px] flex items-center justify-between gap-2",children:[a.jsx("span",{children:"Rating conflict."}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:A,children:"Apply again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:ne,children:"Keep theirs"})]})]}),!g&&se&&a.jsxs("div",{className:"text-[12px] space-y-1.5 leading-relaxed",children:[a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Ir("dimensions",`${se.w}${se.h}`),children:"Dimensions"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:F=>ps("dimensions",F),style:K.dimensions?{minHeight:K.dimensions}:void 0,children:X==="dimensions"?"Copied":`${se.w}${se.h}`})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Ir("size",Eu(se.size)),children:"Size"}),a.jsx("span",{className:"ui-kv-value inline-block text-right min-w-[80px]",ref:F=>ps("size",F),style:K.size?{minHeight:K.size}:void 0,children:X==="size"?"Copied":Eu(se.size)})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>Ir("type",se.type),children:"Type"}),a.jsx("span",{className:"ui-kv-value break-all text-right inline-block min-w-[80px]",ref:F=>ps("type",F),style:K.type?{minHeight:K.type}:void 0,children:X==="type"?"Copied":se.type})]}),a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:"ui-kv-label ui-kv-label-action w-20 shrink-0",onClick:()=>ie&&Ir("source",ie),children:"Source"}),a.jsx("span",{className:"ui-kv-value inspector-value-clamp break-words text-right max-w-[70%] inline-block min-w-[80px]",ref:F=>ps("source",F),style:K.source?{minHeight:K.source}:void 0,title:ie,children:X==="source"?"Copied":ie})]}),(()=>{const F=se.metrics||null;if(!F)return null;const ae=Object.entries(F).filter(([,wt])=>wt!=null);if(!ae.length)return null;const xe=(i==null?void 0:i.kind)==="metric"?i.key:null,Ee=[...ae].sort(([wt],[vs])=>wt.localeCompare(vs));let Fr=Ee;if(xe){const wt=Ee.findIndex(([vs])=>vs===xe);wt>0&&(Fr=[Ee[wt],...Ee.slice(0,wt),...Ee.slice(wt+1)])}const jo=Fr.length>ju,gs=m||!jo?Fr:Fr.slice(0,ju),Mo=Fr.length-ju;return a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"ui-subsection-title mb-1",children:"Metrics"}),a.jsxs("div",{className:"space-y-1",children:[gs.map(([wt,vs])=>{const Ve=xe===wt;return a.jsxs("div",{className:"ui-kv-row",children:[a.jsx("span",{className:`w-24 shrink-0 ${Ve?"text-accent font-medium":"ui-kv-label"}`,children:wt}),a.jsx("span",{className:`ui-kv-value text-right ${Ve?"text-accent font-medium":""}`,children:iC(vs)})]},wt)}),jo&&a.jsx("button",{type:"button",className:"text-[11px] text-muted underline underline-offset-2 hover:text-text",onClick:()=>p(wt=>!wt),"aria-expanded":m,children:m?"Show less":`+${Mo} more`})]})]})})()]})]}),!g&&a.jsxs(cl,{title:"Metadata",open:E.metadata,onToggle:()=>y("metadata"),actions:Ta,children:[a.jsxs("div",{className:"relative",children:[V&&a.jsxs("div",{className:"ui-json-key-toast",children:["Copied key: ",V]}),a.jsx("pre",{className:`ui-code-block ui-code-block-resizable ${In} overflow-auto whitespace-pre-wrap`,onClick:lt,children:Ae?a.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:Rt}}):xn})]}),z&&a.jsx("div",{className:"text-[11px] text-danger mt-1 break-words",children:z})]}),a.jsxs(cl,{title:"Notes & Tags",open:E.notes,onToggle:()=>y("notes"),contentClassName:"px-3 pb-3 space-y-2",children:[!g&&we&&(Ht.tags||Ht.notes)&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Conflicting edits detected."}),a.jsx("div",{className:"text-[11px] text-muted mt-0.5",children:"Your changes were not saved because this item was updated elsewhere."}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("button",{className:"btn btn-sm",onClick:A,children:"Apply my changes again"}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:ne,children:"Keep theirs"})]})]}),a.jsx("textarea",{className:"ui-textarea inspector-input w-full scrollbar-thin",placeholder:"Add notes",value:T,onChange:F=>yn(F.target.value),onBlur:Vt,"aria-label":g?"Notes for selected items":"Notes"}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:g?"Tags (apply to all, comma-separated)":"Tags (comma-separated)"}),a.jsx("input",{className:"ui-input inspector-input w-full",placeholder:"tag1, tag2",value:R,onChange:F=>ft(F.target.value),onBlur:ht,"aria-label":g?"Tags for selected items":"Tags"})]})]}),a.jsx("div",{className:No,onMouseDown:r})]}):a.jsx("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:a.jsx("div",{className:No,onMouseDown:r})})}function cC({open:e,embeddings:t,rejected:n=[],selectedPath:r,embeddingsLoading:s=!1,embeddingsError:i,onClose:o,onSearch:l}){const[u,c]=d.useState(""),[f,h]=d.useState("path"),[v,w]=d.useState(""),[b,E]=d.useState(""),[L,y]=d.useState("50"),[m,p]=d.useState(""),[g,C]=d.useState(null),[M,R]=d.useState(!1),k=d.useRef(null),T=d.useRef(null),N=d.useMemo(()=>t.find(P=>P.name===u)??t[0]??null,[t,u]);d.useEffect(()=>{e&&(C(null),t.length>0&&!t.some(P=>P.name===u)&&c(t[0].name),r?(h("path"),w(r)):(h("vector"),w("")))},[e,t,u,r]),d.useEffect(()=>{if(!e)return;const P=f==="vector"?T.current:k.current,de=window.requestAnimationFrame(()=>P==null?void 0:P.focus());return()=>window.cancelAnimationFrame(de)},[e,f]);const _=d.useCallback(async()=>{if(C(null),!t.length){C("No embeddings available for similarity search.");return}if(!N){C("Select an embedding to search.");return}const P=v.trim(),de=b.trim(),D=Number(L);if(!Number.isFinite(D)||D<=0){C("Top K must be a positive number.");return}const V=Math.min(1e3,Math.max(1,Math.floor(D))),q=m.trim()===""?null:Number(m);if(q!=null&&!Number.isFinite(q)){C("Min score must be a valid number.");return}if(f==="path"&&!P){C("Select an image path for the query.");return}if(f==="vector"&&!de){C("Paste a base64 vector for the query.");return}const Z={embedding:N.name,query_path:f==="path"?P:null,query_vector_b64:f==="vector"?de:null,top_k:V,min_score:q};R(!0);try{await l(Z),o()}catch(ce){ce instanceof gn||ce instanceof Error?C(ce.message):C("Failed to run similarity search.")}finally{R(!1)}},[t.length,N,v,b,L,m,f,l,o]);d.useEffect(()=>{if(!e)return;const P=de=>{if(de.key==="Escape"){de.preventDefault(),o();return}(de.ctrlKey||de.metaKey)&&de.key==="Enter"&&(de.preventDefault(),_())};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[e,o,_]);const B=d.useCallback(()=>{var P;r&&(h("path"),w(r),(P=k.current)==null||P.focus())},[r]);if(!e)return null;const z=t.map(P=>({value:P.name,label:P.name})),oe=n.length>0,ue=n.slice(0,3);return a.jsx("div",{className:"fixed inset-0 z-[var(--z-overlay)] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",onClick:P=>{P.target===P.currentTarget&&o()},children:a.jsxs("div",{className:"w-full max-w-2xl rounded-lg border border-border bg-panel shadow-[0_20px_50px_rgba(0,0,0,0.55)]",onClick:P=>P.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Find similar",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-text",children:"Find similar"}),a.jsx("div",{className:"text-xs text-muted",children:"Search with embeddings"})]}),a.jsx("button",{className:"btn btn-sm",onClick:o,"aria-label":"Close",children:"Close"})]}),a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[i&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:i}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Embedding"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dc,{value:(N==null?void 0:N.name)??"",onChange:c,options:z,placeholder:s?"Loading embeddings...":"Select embedding",disabled:!t.length,triggerClassName:"min-w-[180px]"}),N&&a.jsxs("span",{className:"text-xs text-muted",children:[N.dimension," dims, ",N.metric,", ",N.dtype]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Query mode"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",className:`btn btn-sm ${f==="path"?"btn-active":""}`,onClick:()=>h("path"),"aria-pressed":f==="path",children:"Selected image"}),a.jsx("button",{type:"button",className:`btn btn-sm ${f==="vector"?"btn-active":""}`,onClick:()=>h("vector"),"aria-pressed":f==="vector",children:"Vector input"})]})]}),f==="path"?a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Image path"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:k,type:"text",className:"input w-full",value:v,onChange:P=>w(P.target.value),placeholder:r?"Selected image path":"Select an image first"}),a.jsx("button",{type:"button",className:"btn btn-sm",onClick:B,disabled:!r,title:r?"Use selected image":"Select an image first",children:"Use selected"})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Vector (base64 float32)"}),a.jsx("textarea",{ref:T,className:"ui-textarea w-full font-mono text-[11px]",rows:5,value:b,onChange:P=>E(P.target.value),placeholder:"Paste base64-encoded float32 vector"}),a.jsx("div",{className:"text-[11px] text-muted",children:"Base64 of little-endian float32. Length must match embedding dimension."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Top K"}),a.jsx("input",{type:"number",min:1,max:1e3,step:1,className:"input ui-number w-full",value:L,onChange:P=>y(P.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"ui-label",children:"Min score"}),a.jsx("input",{type:"number",step:.01,className:"input ui-number w-full",value:m,onChange:P=>p(P.target.value),placeholder:"Optional"})]})]}),oe&&a.jsxs("div",{className:"ui-banner text-xs",children:[a.jsx("div",{className:"font-semibold",children:"Skipped columns"}),a.jsxs("div",{className:"mt-1 space-y-1 text-muted",children:[ue.map(P=>a.jsxs("div",{children:[P.name,": ",P.reason]},P.name)),n.length>ue.length&&a.jsxs("div",{children:["+",n.length-ue.length," more"]})]})]}),g&&a.jsx("div",{className:"ui-banner ui-banner-danger text-xs",role:"alert",children:g})]}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-border",children:[a.jsx("div",{className:"text-xs text-muted",children:N?`Metric: ${N.metric}`:"Metric: cosine"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:o,disabled:M,children:"Cancel"}),a.jsx("button",{className:"btn btn-sm btn-active",onClick:_,disabled:M||!t.length,children:M?"Searching...":"Find similar"})]})]})]})})}const Yv=1,Ml=200,dC=5*6e4,fC=6e4,Xv=(e,t)=>t!=null&&t.recursive?["folder",e,"recursive",t.page??Yv,t.pageSize??Ml]:["folder",e];function Jv(e){return e[0]!=="folder"||e[2]!=="recursive"||typeof e[1]!="string"||typeof e[3]!="number"||typeof e[4]!="number"?null:e}function hC(e){return Jv(e)!==null}function mC(e,t,n=!0){if(!hC(e))return!0;const r=Jv(e);if(r==null)return!1;const[,s,,i]=r;return i!==Yv?!1:!!(s===t||n&&s==="/")}function pC(e,t,n=!0){return!Array.isArray(e)||e[0]!=="folder"?!1:!mC(e,t,n)}const gC=15e3;function vC(e,t){return ge.getFolder(e,t)}function Yc(e,t=!1,n){const r=Ma(),s={recursive:t,page:n==null?void 0:n.page,pageSize:n==null?void 0:n.pageSize,legacyRecursive:n==null?void 0:n.legacyRecursive},i=!!s.recursive;return Na({queryKey:Xv(e,s),queryFn:()=>vC(e,s),enabled:(n==null?void 0:n.enabled)??!0,staleTime:1e4,gcTime:i?fC:dC,retry:2,retryDelay:o=>Math.min(1e3*Math.pow(2,o),5e3),refetchOnWindowFocus:!1,refetchInterval:r?gC:!1,refetchIntervalInBackground:r})}const yC=(e,t)=>["search",e,t],xC=2e4;function wC(e,t){const n=Ma();return Na({enabled:!!e.trim(),queryKey:yC(e,t),queryFn:()=>ge.search(e,t),staleTime:3e3,gcTime:6e4,placeholderData:r=>r,retry:1,refetchInterval:n?xC:!1,refetchIntervalInBackground:n})}const SC=()=>["embeddings"];function CC(){return Na({queryKey:SC(),queryFn:ge.getEmbeddings,staleTime:6e4,gcTime:5*6e4,retry:1,refetchOnWindowFocus:!1})}const kC=/^[\/@a-zA-Z0-9._\-\/]{1,512}$/,bC=[".jpg",".jpeg",".png",".webp"];function Pn(e){try{const t=decodeURI(e||""),r=(t.startsWith("/")?t:`/${t}`).replace(/\/{2,}/g,"/"),s=r.length>1?r.replace(/\/$/,""):r;return kC.test(s)?s:"/"}catch{return"/"}}function bm(){return(window.location.hash||"").replace(/^#/,"")}function Em(e){const t=Pn(e),n=`#${encodeURI(t)}`;window.location.hash!==n&&(window.location.hash=n)}function dl(e){const t=Pn(e),n=`#${encodeURI(t)}`;if(window.location.hash!==n){const r=`${window.location.pathname}${window.location.search}${n}`;window.history.replaceState(window.history.state,"",r)}}function EC(e){const n=Pn(e).toLowerCase();return bC.some(r=>n.endsWith(r))}function NC(e,t){const n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,""),s=[n,r].filter(Boolean).join("/");return s.startsWith("/")?s:`/${s}`}function Nm(e){const n=Pn(e).split("/").filter(Boolean);return n.length<=1?"/":"/"+n.slice(0,-1).join("/")}function jC(e){return Pn(e).split("/").filter(Boolean).pop()||""}function MC(e){return e.endsWith("/_trash_")}const RC=new Set([0,1,2,3,4,5]),lf=new Set(["<","<=",">",">="]),LC=/^\d{4}-\d{2}-\d{2}$/;function TC(e,t){return!t||!t.and.length?e:e.filter(n=>PC(n,t.and))}function PC(e,t){for(const n of t)if(!_C(e,n))return!1;return!0}function _C(e,t){var n,r,s,i,o,l,u;if("stars"in t){const c=t.stars;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsIn"in t){const c=t.starsIn.values;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsNotIn"in t){const c=t.starsNotIn.values;if(!c||!c.length)return!0;const f=e.star??0;return!c.includes(f)}if("nameContains"in t){const c=(n=t.nameContains.value)==null?void 0:n.trim();return c?(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("nameNotContains"in t){const c=(r=t.nameNotContains.value)==null?void 0:r.trim();return c?!(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("commentsContains"in t){const c=(s=t.commentsContains.value)==null?void 0:s.trim();if(!c)return!0;const f=e.comments??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("commentsNotContains"in t){const c=(i=t.commentsNotContains.value)==null?void 0:i.trim();if(!c)return!0;const f=e.comments??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("urlContains"in t){const c=(o=t.urlContains.value)==null?void 0:o.trim();if(!c)return!0;const f=e.source??e.url??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("urlNotContains"in t){const c=(l=t.urlNotContains.value)==null?void 0:l.trim();if(!c)return!0;const f=e.source??e.url??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("dateRange"in t){const{from:c,to:f}=t.dateRange;if(!c&&!f)return!0;if(!e.addedAt)return!1;const h=Date.parse(e.addedAt);if(Number.isNaN(h))return!1;const v=Rm(c,!1),w=Rm(f,!0);return!(v!=null&&h<v||w!=null&&h>w)}if("widthCompare"in t){const{op:c,value:f}=t.widthCompare;if(!Number.isFinite(f))return!0;const h=e.w;return!Number.isFinite(h)||h<=0?!1:Lm(h,c,f)}if("heightCompare"in t){const{op:c,value:f}=t.heightCompare;if(!Number.isFinite(f))return!0;const h=e.h;return!Number.isFinite(h)||h<=0?!1:Lm(h,c,f)}if("metricRange"in t){const{key:c,min:f,max:h}=t.metricRange,v=(u=e.metrics)==null?void 0:u[c];return!(v==null||v<f||v>h)}return!0}function Xc(e){if(!e||typeof e!="object")return null;const t=e.and;if(!Array.isArray(t))return null;const n=[];for(const r of t){const s=qC(r);s&&n.push(s)}return{and:n}}function jm(e){var r;const t=e.and.find(s=>"stars"in s),n=e.and.find(s=>"starsIn"in s);return(r=n==null?void 0:n.starsIn)!=null&&r.values?n.starsIn.values:(t==null?void 0:t.stars)??[]}function Mu(e,t){return Zv(e,t)}function IC(e){var n;const t=e.and.find(r=>"starsIn"in r);return((n=t==null?void 0:t.starsIn)==null?void 0:n.values)??[]}function Zv(e,t){const n=Ki(t),r=e.and.filter(s=>!("starsIn"in s)&&!("stars"in s));return n.length?{and:[{starsIn:{values:n}},...r]}:{and:r}}function FC(e){var n;const t=e.and.find(r=>"starsNotIn"in r);return((n=t==null?void 0:t.starsNotIn)==null?void 0:n.values)??[]}function ey(e,t){const n=Ki(t),r=e.and.filter(s=>!("starsNotIn"in s));return n.length?{and:[{starsNotIn:{values:n}},...r]}:{and:r}}function OC(e){var n;const t=e.and.find(r=>"nameContains"in r);return((n=t==null?void 0:t.nameContains)==null?void 0:n.value)??null}function ty(e,t){const n=Xt(t),r=e.and.filter(s=>!("nameContains"in s));return n?{and:[{nameContains:{value:n}},...r]}:{and:r}}function zC(e){var n;const t=e.and.find(r=>"nameNotContains"in r);return((n=t==null?void 0:t.nameNotContains)==null?void 0:n.value)??null}function ny(e,t){const n=Xt(t),r=e.and.filter(s=>!("nameNotContains"in s));return n?{and:[{nameNotContains:{value:n}},...r]}:{and:r}}function DC(e){var n;const t=e.and.find(r=>"commentsContains"in r);return((n=t==null?void 0:t.commentsContains)==null?void 0:n.value)??null}function ry(e,t){const n=Xt(t),r=e.and.filter(s=>!("commentsContains"in s));return n?{and:[{commentsContains:{value:n}},...r]}:{and:r}}function AC(e){var n;const t=e.and.find(r=>"commentsNotContains"in r);return((n=t==null?void 0:t.commentsNotContains)==null?void 0:n.value)??null}function sy(e,t){const n=Xt(t),r=e.and.filter(s=>!("commentsNotContains"in s));return n?{and:[{commentsNotContains:{value:n}},...r]}:{and:r}}function $C(e){var n;const t=e.and.find(r=>"urlContains"in r);return((n=t==null?void 0:t.urlContains)==null?void 0:n.value)??null}function iy(e,t){const n=Xt(t),r=e.and.filter(s=>!("urlContains"in s));return n?{and:[{urlContains:{value:n}},...r]}:{and:r}}function UC(e){var n;const t=e.and.find(r=>"urlNotContains"in r);return((n=t==null?void 0:t.urlNotContains)==null?void 0:n.value)??null}function oy(e,t){const n=Xt(t),r=e.and.filter(s=>!("urlNotContains"in s));return n?{and:[{urlNotContains:{value:n}},...r]}:{and:r}}function BC(e){const t=e.and.find(n=>"dateRange"in n);return(t==null?void 0:t.dateRange)??null}function Jc(e,t){const n=aa((t==null?void 0:t.from)??null),r=aa((t==null?void 0:t.to)??null),s=e.and.filter(i=>!("dateRange"in i));return!n&&!r?{and:s}:{and:[{dateRange:{...n?{from:n}:{},...r?{to:r}:{}}},...s]}}function WC(e){const t=e.and.find(n=>"widthCompare"in n);return(t==null?void 0:t.widthCompare)??null}function Rl(e,t){const n=e.and.filter(r=>!("widthCompare"in r));return!t||!Number.isFinite(t.value)||!lf.has(t.op)?{and:n}:{and:[{widthCompare:{op:t.op,value:t.value}},...n]}}function HC(e){const t=e.and.find(n=>"heightCompare"in n);return(t==null?void 0:t.heightCompare)??null}function Ll(e,t){const n=e.and.filter(r=>!("heightCompare"in r));return!t||!Number.isFinite(t.value)||!lf.has(t.op)?{and:n}:{and:[{heightCompare:{op:t.op,value:t.value}},...n]}}function VC(e,t){const n=e.and.find(r=>"metricRange"in r&&r.metricRange.key===t);return(n==null?void 0:n.metricRange)??null}function QC(e,t,n){const r=e.and.filter(s=>!("metricRange"in s&&s.metricRange.key===t));return n?{and:[{metricRange:{key:t,min:n.min,max:n.max}},...r]}:{and:r}}function KC(e){const t=Xc(e);return t?t.and.length:0}function qC(e){var t,n,r,s,i,o,l,u;if(!e||typeof e!="object")return null;if("stars"in e){const c=Ki(e.stars);return c.length?{starsIn:{values:c}}:null}if("starsIn"in e){const c=Ki((t=e.starsIn)==null?void 0:t.values);return c.length?{starsIn:{values:c}}:null}if("starsNotIn"in e){const c=Ki((n=e.starsNotIn)==null?void 0:n.values);return c.length?{starsNotIn:{values:c}}:null}if("nameContains"in e){const c=Xt((r=e.nameContains)==null?void 0:r.value);return c?{nameContains:{value:c}}:null}if("nameNotContains"in e){const c=Xt((s=e.nameNotContains)==null?void 0:s.value);return c?{nameNotContains:{value:c}}:null}if("commentsContains"in e){const c=Xt((i=e.commentsContains)==null?void 0:i.value);return c?{commentsContains:{value:c}}:null}if("commentsNotContains"in e){const c=Xt((o=e.commentsNotContains)==null?void 0:o.value);return c?{commentsNotContains:{value:c}}:null}if("urlContains"in e){const c=Xt((l=e.urlContains)==null?void 0:l.value);return c?{urlContains:{value:c}}:null}if("urlNotContains"in e){const c=Xt((u=e.urlNotContains)==null?void 0:u.value);return c?{urlNotContains:{value:c}}:null}if("dateRange"in e){const c=e.dateRange,f=aa((c==null?void 0:c.from)??null),h=aa((c==null?void 0:c.to)??null);return!f&&!h?null:{dateRange:{...f?{from:f}:{},...h?{to:h}:{}}}}if("widthCompare"in e){const c=e.widthCompare,f=Mm(c==null?void 0:c.op,c==null?void 0:c.value);return f?{widthCompare:f}:null}if("heightCompare"in e){const c=e.heightCompare,f=Mm(c==null?void 0:c.op,c==null?void 0:c.value);return f?{heightCompare:f}:null}if("metricRange"in e){const c=e.metricRange;if(!c||typeof c!="object")return null;const f=typeof c.key=="string"?c.key:"",h=Zc(c.min),v=Zc(c.max);return!f||h==null||v==null||h>v?null:{metricRange:{key:f,min:h,max:v}}}return null}function Ki(e){if(!Array.isArray(e))return[];const t=[],n=new Set;for(const r of e){const s=typeof r=="number"?r:typeof r=="string"?Number(r):NaN;!Number.isInteger(s)||!RC.has(s)||n.has(s)||(n.add(s),t.push(s))}return t}function Xt(e){if(typeof e!="string")return null;const t=e.trim();return t||null}function aa(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=Date.parse(t);return Number.isNaN(n)?null:t}function Mm(e,t){if(typeof e!="string"||!lf.has(e))return null;const n=Zc(t);return n==null?null:{op:e,value:n}}function Rm(e,t){if(!e)return null;const n=e.trim();if(!n)return null;const r=Date.parse(n);return Number.isNaN(r)?null:t&&LC.test(n)?r+24*60*60*1e3-1:r}function Lm(e,t,n){switch(t){case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;default:return!0}}function Zc(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function Tm(e){return e.addedAt?Date.parse(e.addedAt):0}function ua(e,t){return e.name.localeCompare(t.name)}function GC(e,t){const n=Tm(e),r=Tm(t);return n===r?ua(e,t):n-r}function YC(e){return(t,n)=>{var i,o;const r=(i=t.metrics)==null?void 0:i[e],s=(o=n.metrics)==null?void 0:o[e];return r==null&&s==null?ua(t,n):r==null?1:s==null?-1:r===s?ua(t,n):r-s}}function Pm(e,t){return TC(e,t)}function XC(e){let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function JC(e,t){const n=XC(t||1),r=[...e];for(let s=r.length-1;s>0;s-=1){const i=Math.floor(n()*(s+1));[r[s],r[i]]=[r[i],r[s]]}return r}function ZC(e,t,n){if(t.kind==="builtin"&&t.key==="random"){const i=n??Date.now();return JC(e,i)}let r=GC;t.kind==="metric"?r=YC(t.key):t.key==="name"&&(r=ua);const s=[...e].sort(r);return t.dir==="desc"?s.reverse():s}const _m="leftW.folders",Im="leftW.metrics",ek="leftW",Fm="rightW";function tk(e,t){const[n,r]=d.useState(240),[s,i]=d.useState(320),[o,l]=d.useState(240),u=t==="metrics"?s:n,c=d.useRef(u),f=d.useRef(o);return d.useEffect(()=>{c.current=u},[u]),d.useEffect(()=>{f.current=o},[o]),d.useEffect(()=>{try{const w=window.localStorage,b=Number(w.getItem(_m)??w.getItem(ek));Number.isFinite(b)&&b>0&&r(b);const E=Number(w.getItem(Im));Number.isFinite(E)&&E>0&&i(E);const L=Number(w.getItem(Fm));Number.isFinite(L)&&L>0&&l(L)}catch{}},[]),{leftW:u,rightW:o,onResizeLeft:w=>{w.preventDefault();const b=e.current;if(!b)return;const E=b.getBoundingClientRect(),L=t==="metrics"?Im:_m;let y=c.current;const m=g=>{const C=g.clientX-E.left,M=200,R=Math.max(M,E.width-f.current-200),k=Math.min(Math.max(C,M),R);y=k,t==="metrics"?i(k):r(k)},p=()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",p);try{window.localStorage.setItem(L,String(y))}catch{}};window.addEventListener("mousemove",m),window.addEventListener("mouseup",p)},onResizeRight:w=>{w.preventDefault();const b=e.current;if(!b)return;const E=b.getBoundingClientRect();let L=f.current;const y=p=>{const g=p.clientX-E.left,C=E.width-g,M=240,R=Math.max(M,E.width-c.current-200),k=Math.min(Math.max(C,M),R);L=k,f.current=k,l(k)},m=()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",m);try{window.localStorage.setItem(Fm,String(L))}catch{}};window.addEventListener("mousemove",y),window.addEventListener("mouseup",m)}}}function nk({x:e,y:t,items:n}){return a.jsx("div",{className:"dropdown-panel fixed",role:"menu",style:{left:e,top:t,minWidth:180},onClick:r=>r.stopPropagation(),children:n.map((r,s)=>a.jsxs("button",{className:`dropdown-item w-full ${r.danger?"text-danger hover:text-danger":""}`,role:"menuitem","aria-disabled":r.disabled,disabled:r.disabled,onClick:i=>{i.stopPropagation(),r.disabled||r.onClick()},children:[r.icon&&a.jsx("span",{className:"shrink-0",children:r.icon}),a.jsx("span",{children:r.label})]},s))})}function Om(e){return JSON.stringify(e,null,2)}function zm(e){const t=s=>'"'+s.replaceAll('"','""')+'"',n="path,folder,name,star,type,size,width,height,tags,notes",r=e.map(s=>{const i=(s.tags||[]).join(" "),o=s.notes||"";return[s.path,s.folder,s.name,String(s.star??""),s.type??"",s.size??"",s.width??"",s.height??"",i,o].map(l=>t(String(l))).join(",")});return[n,...r].join(`
`)}function Dm(e){return e.map(t=>{const n=t.path.split("/").filter(Boolean);n.pop();const r=n.length?`/${n.join("/")}`:"/";return{path:t.path,folder:r,name:t.name,star:t.star??null,type:t.type,size:t.size,width:t.w,height:t.h}})}function rk(e,t=250){const[n,r]=Pl.useState(e);return Pl.useEffect(()=>{const s=window.setTimeout(()=>r(e),Math.max(0,t));return()=>window.clearTimeout(s)},[e,t]),n}const ly="application/x-lenslet-paths",sk='[role="treeitem"].drop-target';function Am(e){var n;return Array.from(((n=e.dataTransfer)==null?void 0:n.types)||[]).includes(ly)}function ik(e){document.querySelectorAll(sk).forEach(t=>{t!==e&&t.classList.remove("drop-target")})}function $m(e){ik(e),e.classList.add("drop-target")}function Um(e){return e.startsWith("/")?e:`/${e}`}function ok({path:e,isLeaf:t}){const n=_r(),r=d.useCallback(l=>{Am(l)&&(l.preventDefault(),t&&$m(l.currentTarget))},[t]),s=d.useCallback(l=>{!t||!Am(l)||(l.preventDefault(),$m(l.currentTarget))},[t]),i=d.useCallback(l=>{const u=l.currentTarget,c=document.elementFromPoint(l.clientX,l.clientY);c&&u.contains(c)||u.classList.remove("drop-target")},[]),o=d.useCallback(async l=>{const u=l.dataTransfer;if(!u)return;l.preventDefault(),l.currentTarget.classList.remove("drop-target");const c=u.getData(ly),h=(c?JSON.parse(c):[]).filter(Boolean);if(!h.length)return;let v=h[0].split("/").slice(0,-1).join("/")||"/";v=Um(v);const w=Um(e);try{for(const b of h)await ge.moveFile(b,w);n.invalidateQueries({queryKey:["folder",v]}),n.invalidateQueries({queryKey:["folder",w]}),n.setQueryData(["folder",v],b=>!b||!Array.isArray(b.items)?b:{...b,items:b.items.filter(E=>!h.includes(E.path))})}catch{}},[e,n]);return{onDragOver:r,onDragEnter:s,onDragLeave:i,onDrop:o}}const lk='[role="tree"] [role="treeitem"]';function ak(){return Array.from(document.querySelectorAll(lk))}function uk(e,t){var i;const n=ak(),r=n.findIndex(o=>o===e);if(r===-1)return;let s=r;t==="ArrowDown"?s=Math.min(n.length-1,r+1):t==="ArrowUp"?s=Math.max(0,r-1):t==="Home"?s=0:t==="End"&&(s=n.length-1),(i=n[s])==null||i.focus()}function ck({path:e,isLeaf:t,isExpanded:n,setExpanded:r,onOpen:s}){return d.useCallback(i=>{if(i.key==="Enter"){i.preventDefault(),s(e);return}if(i.key==="ArrowRight"){!t&&!n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.add(e),l}));return}if(i.key==="ArrowLeft"){!t&&n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.delete(e),l}));return}(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="Home"||i.key==="End")&&(i.preventDefault(),uk(i.currentTarget,i.key))},[e,t,n,r,s])}function dk({current:e,roots:t,data:n,onOpen:r,onResize:s,onContextMenu:i,countVersion:o,className:l,showResizeHandle:u=!0}){const[c,f]=d.useState(new Set(["/"])),h=d.useRef(new Map),v=d.useRef(new Map),w=_r(),b=d.useCallback(async L=>{const y=Pn(L||"/"),m=h.current,p=v.current,g=m.get(y);if(g!==void 0)return g;const C=w.getQueryData(Xv(y,{recursive:!0}));if(C){const k=C.totalItems??C.items.length;return m.set(y,k),k}const M=p.get(y);if(M)return M;const R=(async()=>{try{const k=await ge.getFolder(y,{recursive:!0}),T=k.totalItems??k.items.length;return m.set(y,T),T}finally{p.delete(y)}})();return p.set(y,R),R},[w]);d.useEffect(()=>{h.current.clear(),v.current.clear()},[o]),d.useEffect(()=>{const L=e.split("/").filter(Boolean),y=["/"];let m="";for(const p of L)m=m?`${m}/${p}`:`/${p}`,y.push(m);f(p=>{const g=new Set(p);for(const C of y)g.add(C);return g})},[e]);const E=l??"h-full overflow-auto bg-panel scrollbar-thin";return a.jsxs("div",{className:E,children:[a.jsx("div",{className:"p-1",role:"tree","aria-label":"Folders",children:t.map(L=>a.jsx(ay,{path:L.path,label:L.label,depth:0,current:e,expanded:c,setExpanded:f,onOpen:r,onContextMenu:i,initial:n,getSubtreeCount:b,countVersion:o},L.path))}),u&&a.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 left-[calc(var(--left)-3px)] hover:bg-accent/20",onMouseDown:s})]})}function ay({path:e,label:t,depth:n,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,initial:u,getSubtreeCount:c,countVersion:f}){var N;const h=s.has(e),v=r===e,w=e==="/"||h||v,{data:b}=Yc(e,!1,{enabled:w}),E=u&&e===u.path?u:b,y=!!E?E.dirs.length===0:!1,[m,p]=d.useState(E?E.items.length:null),g=ck({path:e,isLeaf:y,isExpanded:h,setExpanded:i,onOpen:o}),{onDragOver:C,onDragEnter:M,onDragLeave:R,onDrop:k}=ok({path:e,isLeaf:y}),T=_=>{_.stopPropagation(),i(B=>{const z=new Set(B);return z.has(e)?z.delete(e):z.add(e),z})};return d.useEffect(()=>{let _=!1;if(!E){p(null);return}if(p(E.items.length),!!(h&&(n>0||v)))return c(e).then(z=>{_||p(z)}).catch(z=>{_||console.warn(`Failed to compute subtree count for ${e}:`,z)}),()=>{_=!0}},[E,e,c,f,h,n,v]),a.jsxs("div",{children:[a.jsxs("div",{className:`flex items-center gap-1.5 py-0.5 px-2 rounded-md cursor-pointer min-h-[28px] outline-none transition-colors duration-75 ${v?"bg-accent/20 text-accent font-medium":"hover:bg-white/5 text-text"}`,role:"treeitem","aria-level":n+1,"aria-expanded":y?void 0:h,"aria-selected":v,tabIndex:v?0:-1,style:{paddingLeft:8+n*14},onClick:()=>o(e),onContextMenu:_=>{_.preventDefault(),_.stopPropagation(),l&&l(_,e)},onKeyDown:g,onDragOver:C,onDragEnter:M,onDragLeave:R,onDrop:k,children:[a.jsx("span",{className:"w-4 text-center opacity-60 hover:opacity-100 text-[10px]",onClick:T,children:h?"":""}),a.jsx("span",{className:"flex-1 overflow-hidden truncate text-sm",title:t,children:eC(t,28)}),m!==null&&a.jsx("span",{className:"text-[10px] opacity-50 bg-white/5 border border-white/5 rounded px-1.5 min-w-[24px] text-center",children:m})]}),h&&((N=E==null?void 0:E.dirs)==null?void 0:N.map(_=>a.jsx(ay,{path:NC(e,_.name),label:_.name,depth:n+1,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,getSubtreeCount:c,countVersion:f},_.name)))]})}const Kr=40,fk=12,Bm=[5,4,3,2,1],Wm=["<","<=",">",">="];function hk({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l,onChangeFilters:u}){const c=r&&r.length?a.jsx(mk,{selectedItems:r,metricKeys:n}):null,f=a.jsx(pk,{filters:o,onChangeFilters:u});return n.length?a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,a.jsx(gk,{items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}),f]}):a.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,f,a.jsx("div",{className:"p-4 text-sm text-muted",children:"No metrics found in this dataset."})]})}function mk({selectedItems:e,metricKeys:t}){const n=d.useMemo(()=>{if(!e.length)return null;const u=new Map;for(const h of e){const v=h.metrics;if(v)for(const[w,b]of Object.entries(v)){if(b==null||Number.isNaN(b))continue;const E=u.get(w);E?E.push(b):u.set(w,[b])}}return u.size?{entries:(t.length?t.filter(h=>u.has(h)):Array.from(u.keys()).sort()).map(h=>{const v=u.get(h)??[],w=Math.min(...v),b=Math.max(...v),E=v.reduce((L,y)=>L+y,0)/Math.max(1,v.length);return{key:h,value:v[0],min:w,max:b,avg:E,count:v.length}}),totalItems:e.length}:null},[e,t]);if(!n)return null;const{entries:r,totalItems:s}=n,i=r.slice(0,fk),o=r.length-i.length,l=s>1;return a.jsxs("div",{className:"ui-card",children:[a.jsxs("div",{className:"ui-card-header",children:[a.jsx("div",{className:"ui-section-title",children:"Selected metrics"}),a.jsxs("div",{className:"text-[11px] text-muted",children:[s," item",s===1?"":"s"]})]}),a.jsxs("div",{className:"space-y-1 text-[12px]",children:[i.map(u=>a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-muted w-28 shrink-0 truncate",title:u.key,children:u.key}),a.jsxs("span",{className:"font-mono text-text text-right tabular-nums",children:[l?`${zt(u.min)}  ${zt(u.max)}`:zt(u.value),l&&a.jsxs("span",{className:"text-[11px] text-muted ml-2",children:["avg ",zt(u.avg),u.count!==s?`  ${u.count}/${s}`:""]})]})]},u.key)),o>0&&a.jsxs("div",{className:"text-[11px] text-muted",children:["+",o," more"]})]})]})}function pk({filters:e,onChangeFilters:t}){const n=d.useMemo(()=>IC(e),[e]),r=d.useMemo(()=>FC(e),[e]),s=d.useMemo(()=>OC(e)??"",[e]),i=d.useMemo(()=>zC(e)??"",[e]),o=d.useMemo(()=>DC(e)??"",[e]),l=d.useMemo(()=>AC(e)??"",[e]),u=d.useMemo(()=>$C(e)??"",[e]),c=d.useMemo(()=>UC(e)??"",[e]),f=d.useMemo(()=>BC(e)??{},[e]),h=d.useMemo(()=>Ym(f.from),[f.from]),v=d.useMemo(()=>Ym(f.to),[f.to]),w=d.useMemo(()=>WC(e),[e]),b=d.useMemo(()=>HC(e),[e]),[E,L]=d.useState((w==null?void 0:w.op)??">="),[y,m]=d.useState((b==null?void 0:b.op)??">=");d.useEffect(()=>{w!=null&&w.op&&L(w.op)},[w==null?void 0:w.op]),d.useEffect(()=>{b!=null&&b.op&&m(b.op)},[b==null?void 0:b.op]);const p=(g,C)=>{const M=new Set(n),R=new Set(r);g==="include"?M.has(C)?M.delete(C):(M.add(C),R.delete(C)):R.has(C)?R.delete(C):(R.add(C),M.delete(C));let k=Zv(e,Array.from(M));k=ey(k,Array.from(R)),t(k)};return a.jsxs("div",{className:"ui-card",children:[a.jsx("div",{className:"ui-section-title mb-3",children:"Attributes"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Rating"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Include"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[Bm.map(g=>{const C=n.includes(g);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${C?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",g),"aria-pressed":C,title:`Include ${g} star${g>1?"s":""}`,children:[g,""]},`stars-in-${g}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${n.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",0),"aria-pressed":n.includes(0),title:"Include unrated",children:"None"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-label",children:"Exclude"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[Bm.map(g=>{const C=r.includes(g);return a.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${C?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",g),"aria-pressed":C,title:`Exclude ${g} star${g>1?"s":""}`,children:[g,""]},`stars-out-${g}`)}),a.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded-lg border text-[11px] flex items-center justify-center transition-colors ${r.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",0),"aria-pressed":r.includes(0),title:"Exclude unrated",children:"None"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Filename"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:s,placeholder:"e.g. draft",onChange:g=>t(ty(e,g.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:i,placeholder:"e.g. v1",onChange:g=>t(ny(e,g.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Comments"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:o,placeholder:"e.g. hero",onChange:g=>t(ry(e,g.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:l,placeholder:"e.g. todo",onChange:g=>t(sy(e,g.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"URL"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Contains"}),a.jsx("input",{className:"ui-input w-full",value:u,placeholder:"e.g. s3://bucket",onChange:g=>t(iy(e,g.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Does not contain"}),a.jsx("input",{className:"ui-input w-full",value:c,placeholder:"e.g. http://",onChange:g=>t(oy(e,g.target.value))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Date Added"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"From"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:h,onChange:g=>t(Jc(e,{from:g.target.value||null,to:f.to??null}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"To"}),a.jsx("input",{type:"date",className:"ui-input w-full",value:v,onChange:g=>t(Jc(e,{from:f.from??null,to:g.target.value||null}))})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"ui-subsection-title mb-2",children:"Dimensions"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Width"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:E,onChange:g=>{const C=g.target.value;L(C),w&&t(Rl(e,{op:C,value:w.value}))},children:Wm.map(g=>a.jsx("option",{value:g,children:g},`w-${g}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:w?String(w.value):"",min:0,placeholder:"px",onChange:g=>{const C=g.target.value;if(!C){t(Rl(e,null));return}const M=Number(C);Number.isFinite(M)&&t(Rl(e,{op:E,value:M}))}})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Height"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{className:"ui-select ui-select-compact w-16",value:y,onChange:g=>{const C=g.target.value;m(C),b&&t(Ll(e,{op:C,value:b.value}))},children:Wm.map(g=>a.jsx("option",{value:g,children:g},`h-${g}`))}),a.jsx("input",{type:"number",className:"ui-input ui-number w-full",value:b?String(b.value):"",min:0,placeholder:"px",onChange:g=>{const C=g.target.value;if(!C){t(Ll(e,null));return}const M=Number(C);Number.isFinite(M)&&t(Ll(e,{op:y,value:M}))}})]})]})]})]})]})]})}function gk({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}){const[u,c]=d.useState(!1),f=s&&n.includes(s)?s:n[0];return a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("label",{className:"ui-label",children:"Metric"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-[11px]",onClick:()=>c(h=>!h),"aria-pressed":u,children:u?"Show one":"Show all"})]}),u?a.jsx("div",{className:"ui-input ui-input-readonly w-full flex items-center text-xs",children:"All metrics"}):a.jsx("select",{className:"ui-select w-full",value:f,onChange:h=>i(h.target.value),children:n.map(h=>a.jsx("option",{value:h,children:h},h))})]}),u?a.jsx("div",{className:"space-y-3",children:n.map(h=>a.jsx(Hm,{metricKey:h,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l,showTitle:!0},h))}):f?a.jsx(Hm,{metricKey:f,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l}):a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]})}function Hm({items:e,filteredItems:t,metricKey:n,selectedItems:r,filters:s,onChangeRange:i,showTitle:o=!1}){const l=d.useMemo(()=>Vm(e,n),[e,n]),u=d.useMemo(()=>Ru(l,Kr),[l]),c=d.useMemo(()=>Vm(t,n),[t,n]),f=d.useMemo(()=>u?Ru(c,Kr,u):null,[c,u]),h=VC(s,n),[v,w]=d.useState(null),[b,E]=d.useState(!1),L=d.useRef(null),y=d.useRef(null),m=d.useRef(!1),p=d.useRef(null),[g,C]=d.useState(null),[M,R]=d.useState(""),[k,T]=d.useState(""),[N,_]=d.useState(null),B=v??h,z=u?{min:u.min,max:u.max}:null,oe=d.useMemo(()=>{var Q;if(!(r!=null&&r.length))return[];const X=[];for(const K of r){const fe=(Q=K.metrics)==null?void 0:Q[n];fe==null||Number.isNaN(fe)||X.push(fe)}return X},[r,n]),ue=oe.length===1?oe[0]:null,P=d.useMemo(()=>!u||oe.length<2?null:Ru(oe,Kr,u),[oe,u]);d.useEffect(()=>{if(!h||!z){N!=="min"&&R(h?nr(h.min):""),N!=="max"&&T(h?nr(h.max):"");return}if(N!=="min"){const X=bs(h.min,z.min)?"":nr(h.min);R(X)}if(N!=="max"){const X=bs(h.max,z.max)?"":nr(h.max);T(X)}},[h,z,N]),d.useEffect(()=>{C(null)},[n,z==null?void 0:z.min,z==null?void 0:z.max]);const de=X=>{var fe;if(!z)return null;const Q=(fe=p.current)==null?void 0:fe.getBoundingClientRect();if(!Q)return null;const K=af((X.clientX-Q.left)/Q.width);return z.min+(z.max-z.min)*K},D=(X,Q)=>{if(!z)return;const K=L.current??X,fe=Km(K,X);w(fe),Q&&i(n,fe)},V=X=>{var K;if(!z)return;X.preventDefault();const Q=de(X);Q!=null&&(E(!0),w(null),L.current=Q,y.current=X.clientX,m.current=!1,C(Q),(K=p.current)==null||K.setPointerCapture(X.pointerId))},q=X=>{const Q=de(X);if(Q==null){b||C(null);return}if(C(Q),b){const K=y.current;if(!m.current&&K!=null){if(Math.abs(X.clientX-K)<4)return;m.current=!0}m.current&&D(Q,!1)}},Z=X=>{var K;if(!b)return;E(!1),(K=p.current)==null||K.releasePointerCapture(X.pointerId);const Q=de(X);m.current&&Q!=null?(C(Q),D(Q,!0)):h&&i(n,null),L.current=null,y.current=null,m.current=!1,setTimeout(()=>w(null),0)},ce=(X,Q)=>{if(!z)return;const K=qm(X),fe=qm(Q);if(!K.valid||!fe.valid){K.valid||R(h?nr(h.min):""),fe.valid||T(h?nr(h.max):"");return}if(K.value==null&&fe.value==null){i(n,null);return}const Le=K.value??z.min,be=fe.value??z.max,Ze=Gm(Le,z.min,z.max),qe=Gm(be,z.min,z.max),we=Km(Ze,qe);if(bs(we.min,z.min)&&bs(we.max,z.max)){i(n,null);return}i(n,we)};if(!u||!z)return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]});const Pe=oe.length;return a.jsxs("div",{className:"ui-card",children:[o&&a.jsx("div",{className:"ui-section-title mb-2",children:n}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mb-2 tabular-nums",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{children:["Population: ",u.count]}),a.jsxs("span",{children:["Filtered: ",(f==null?void 0:f.count)??0]}),Pe>1&&a.jsxs("span",{className:"text-text",children:["Selected: ",Pe]})]}),ue!=null&&a.jsxs("span",{className:"text-text",children:["Selected: ",zt(ue)]})]}),a.jsxs("svg",{ref:p,viewBox:`0 0 ${Kr} 100`,preserveAspectRatio:"none",className:"w-full h-28 cursor-crosshair rounded-md bg-surface-inset",onPointerDown:V,onPointerMove:q,onPointerUp:Z,onPointerLeave:()=>C(null),children:[Lu(u.bins,"#2e3a4b"),f&&Lu(f.bins,"#3a8fff"),P&&Lu(P.bins,"#f59e0b",{opacity:.55}),B&&vk(B,z),ue!=null&&Qm(ue,z,{color:"var(--highlight)",strokeWidth:.7}),g!=null&&Qm(g,z,{color:"rgba(255,255,255,0.75)",strokeWidth:.5,dashed:!0})]}),a.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mt-2 tabular-nums",children:[a.jsx("span",{children:zt(z==null?void 0:z.min)}),a.jsxs("div",{className:"flex flex-col items-center text-center leading-tight",children:[B?a.jsx("span",{className:"text-text",children:bs(B.min,z.min)?` ${zt(B.max)}`:bs(B.max,z.max)?` ${zt(B.min)}`:`${zt(B.min)}  ${zt(B.max)}`}):g!=null?a.jsxs("span",{className:"text-text",children:["Cursor: ",zt(g)]}):a.jsx("span",{children:"Drag to filter"}),B&&g!=null&&a.jsxs("span",{className:"text-[11px] text-muted",children:["Cursor: ",zt(g)]})]}),a.jsx("span",{children:zt(z==null?void 0:z.max)})]}),a.jsxs("div",{className:"grid grid-cols-[1fr_1fr_auto] gap-2 mt-3 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Min"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:M,placeholder:nr(z.min),onFocus:()=>_("min"),onBlur:()=>{_(null),ce(M,k)},onChange:X=>R(X.target.value),onKeyDown:X=>{X.key==="Enter"&&X.currentTarget.blur()}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"ui-label",children:"Max"}),a.jsx("input",{type:"number",step:"any",className:"ui-input ui-number w-full",value:k,placeholder:nr(z.max),onFocus:()=>_("max"),onBlur:()=>{_(null),ce(M,k)},onChange:X=>T(X.target.value),onKeyDown:X=>{X.key==="Enter"&&X.currentTarget.blur()}})]}),a.jsx("button",{className:"btn btn-xs btn-ghost text-muted hover:text-text",onClick:()=>i(n,null),children:"Clear"})]})]})}function Ru(e,t,n){if(!e.length)return null;const r=n?n.min:Math.min(...e);let s=n?n.max:Math.max(...e);r===s&&(s=r+1);const i=new Array(t).fill(0),o=t/(s-r);for(const l of e){const u=Math.max(0,Math.min(t-1,Math.floor((l-r)*o)));i[u]+=1}return{bins:i,min:r,max:s,count:e.length}}function Vm(e,t){var r;const n=[];for(const s of e){const i=(r=s.metrics)==null?void 0:r[t];i==null||Number.isNaN(i)||n.push(i)}return n}function Lu(e,t,n){const r=Math.max(1,...e),s=(n==null?void 0:n.opacity)??.9;return e.map((i,o)=>{const l=i/r*100;return a.jsx("rect",{x:o+.05,y:100-l,width:.9,height:l,fill:t,opacity:s},`${t}-${o}`)})}function vk(e,t){const n=(e.min-t.min)/(t.max-t.min),r=(e.max-t.min)/(t.max-t.min),s=Kr*af(Math.min(n,r)),i=Kr*Math.abs(r-n);return a.jsx("rect",{x:s,y:0,width:Math.max(.5,i),height:100,fill:"rgba(255,255,255,0.08)",stroke:"rgba(255,255,255,0.4)",strokeWidth:.4})}function Qm(e,t,n){const r=af((e-t.min)/(t.max-t.min)),s=Kr*r;return a.jsx("line",{x1:s,y1:0,x2:s,y2:100,stroke:n.color,strokeWidth:n.strokeWidth??.5,strokeDasharray:n.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function Km(e,t){return e<t?{min:e,max:t}:{min:t,max:e}}function af(e){return e<0?0:e>1?1:e}function zt(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function nr(e){if(!Number.isFinite(e))return"";const t=e.toString();return t.includes("e")?e.toFixed(6):t}function qm(e){const t=e.trim();if(!t)return{value:null,valid:!0};const n=Number(t);return Number.isFinite(n)?{value:n,valid:!0}:{value:null,valid:!1}}function Gm(e,t,n){return e<t?t:e>n?n:e}function bs(e,t){const n=Math.max(1,Math.abs(e),Math.abs(t));return Math.abs(e-t)<=1e-6*n}function Ym(e){return e?e.length>=10?e.slice(0,10):e:""}const yk=[{label:"Root",path:"/"}];function xk({leftTool:e,onToolChange:t,compareEnabled:n,compareActive:r,onOpenCompare:s,views:i,activeViewId:o,onActivateView:l,onSaveView:u,current:c,data:f,onOpenFolder:h,onContextMenu:v,countVersion:w,items:b,filteredItems:E,metricKeys:L,selectedItems:y,selectedMetric:m,onSelectMetric:p,filters:g,onChangeRange:C,onChangeFilters:M,onResize:R}){const k=e==="folders"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",T=e==="metrics"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",N=r?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover";return a.jsxs("div",{className:"app-left-panel col-start-1 row-start-2 relative border-r border-border bg-panel overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-y-0 left-0 w-10 border-r border-border flex flex-col items-center gap-2 py-3 bg-surface-overlay",children:[a.jsx("button",{className:k,title:"Folders","aria-label":"Folders","aria-pressed":e==="folders",onClick:()=>t("folders"),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:a.jsx("path",{d:"M3 7.5h6l2-2h10a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2z"})})}),a.jsx("button",{className:T,title:"Metrics / Filters","aria-label":"Metrics and Filters","aria-pressed":e==="metrics",onClick:()=>t("metrics"),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("path",{d:"M4 19V9"}),a.jsx("path",{d:"M10 19V5"}),a.jsx("path",{d:"M16 19v-7"}),a.jsx("path",{d:"M3 19h18"})]})}),a.jsx("div",{className:"w-6 h-px bg-border/70 my-1"}),a.jsx("button",{className:`${N} ${n?"":"opacity-40 cursor-not-allowed"}`,title:n?"Compare selected images":"Compare (select 2+)","aria-label":"Compare selected images","aria-pressed":r,"aria-disabled":!n,disabled:!n,onClick:()=>{n&&s()},children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[a.jsx("rect",{x:"3",y:"4",width:"8",height:"16",rx:"1"}),a.jsx("rect",{x:"13",y:"4",width:"8",height:"16",rx:"1"})]})}),a.jsx("div",{className:"flex-1"}),a.jsx("a",{className:"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover cursor-pointer",href:"https://github.com/trojblue/lenslet",title:"Lenslet on GitHub","aria-label":"Lenslet on GitHub",target:"_blank",rel:"noreferrer",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M12 .5C5.73.5.5 5.74.5 12.02c0 5.1 3.29 9.42 7.86 10.95.58.11.79-.25.79-.56v-2.17c-3.2.7-3.88-1.55-3.88-1.55-.53-1.35-1.29-1.71-1.29-1.71-1.05-.72.08-.71.08-.71 1.16.08 1.78 1.2 1.78 1.2 1.03 1.77 2.71 1.26 3.37.96.1-.75.4-1.26.73-1.55-2.55-.29-5.23-1.29-5.23-5.74 0-1.27.45-2.31 1.19-3.13-.12-.29-.52-1.46.11-3.05 0 0 .97-.31 3.18 1.19.92-.26 1.91-.39 2.89-.39.98 0 1.97.13 2.89.39 2.2-1.5 3.18-1.19 3.18-1.19.63 1.59.23 2.76.11 3.05.74.82 1.19 1.86 1.19 3.13 0 4.46-2.69 5.45-5.25 5.73.41.36.78 1.07.78 2.16v3.2c0 .31.21.67.8.56 4.56-1.53 7.85-5.85 7.85-10.95C23.5 5.74 18.27.5 12 .5z"})})})]}),a.jsx("div",{className:"ml-10 h-full",children:e==="folders"?a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"px-2 py-2 border-b border-border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Smart Folders"}),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:u,title:"Save current view as Smart Folder",children:"+ New"})]}),i.length?a.jsx("div",{className:"flex flex-col gap-1",children:i.map(B=>{const z=B.id===o;return a.jsx("button",{className:`text-left px-2 py-1.5 rounded-md text-sm ${z?"bg-accent-muted text-accent":"hover:bg-hover text-text"}`,onClick:()=>l(B),children:B.name},B.id)})}):a.jsx("div",{className:"text-xs text-muted px-1 py-1.5",children:"No saved Smart Folders yet."})]}),a.jsx(dk,{current:c,roots:yk,data:f,onOpen:h,onContextMenu:v,countVersion:w,className:"flex-1 min-h-0 overflow-auto scrollbar-thin",showResizeHandle:!1})]}):a.jsx(hk,{items:b,filteredItems:E,metricKeys:L,selectedItems:y,selectedMetric:m,onSelectMetric:p,filters:g,onChangeRange:C,onChangeFilters:M})}),a.jsx("div",{className:"toolbar-offset absolute bottom-0 right-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20",onMouseDown:R})]})}function wk({persistenceEnabled:e,offViewSummary:t,onRevealOffView:n,canRevealOffView:r=!1,onClearOffView:s,browserZoomPercent:i}){const l=!!(t!=null&&t.names.length)&&t?` (${t.names.join(", ")}${t.extra?` +${t.extra}`:""})`:"",u=r&&n!=null,c=typeof i=="number"?i:null,f=c!==null&&Math.abs(c-100)>=2;return!e||f||!!t?a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-col gap-2",children:[!e&&a.jsxs("div",{className:"ui-banner ui-banner-danger text-xs",children:[a.jsx("span",{className:"font-semibold",children:"Not persisted."})," Workspace is read-only; edits stay in memory until restart."]}),f&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs",children:[a.jsxs("span",{className:"font-semibold",children:["Browser zoom ",Math.round(c),"%."]})," For best results, set it to 100% so UI elements stay in correct proportions."]}),t&&a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex items-center justify-between gap-3",children:[a.jsxs("span",{children:["Updates outside current view: ",t.count," item",t.count===1?"":"s",l]}),a.jsxs("div",{className:"flex items-center gap-2",children:[u&&a.jsx("button",{className:"text-muted hover:text-text transition-colors",onClick:()=>n==null?void 0:n(),"aria-label":"Reveal off-view updates",children:"Reveal"}),a.jsx("button",{className:"text-muted hover:text-text transition-colors text-base leading-none",onClick:s,"aria-label":"Clear off-view updates",children:""})]})]})]})}):null}const Sk=6e3,Ck=1e4,kk=24*60*6e4,bk=3e4,Ek=350,Nk=1400,jk=2048,Mk=6,Rk=10;function uy(e){const t=new Map;for(const n of e)t.set(n.path,n.name);return t}function cy(e,t){return t.get(e)??e.split("/").pop()??e}function Xm(e,t){const n=e.filter(r=>!t.has(r.path));return n.length===e.length?e:n}function Jm(e,t,n,r,s){const i=e.filter(l=>l.path!==t);return[{path:t,ts:n,kind:r},...i].slice(0,s)}function Lk(e,t){if(!e.length)return null;const n=uy(t),r=new Set,s=[];for(const o of e)r.has(o.path)||(r.add(o.path),s.push(o.path));const i=s.slice(0,2).map(o=>cy(o,n));return{count:s.length,names:i,extra:Math.max(0,s.length-i.length)}}function Tk(e,t,n,r){if(!e.length)return[];const s=uy(t);return e.map(i=>({path:i.path,label:cy(i.path,s),timeLabel:r(i.ts,n)}))}function Pk(e){const[t,n]=d.useState([]),[r,s]=d.useState([]),[i,o]=d.useState(new Map),l=d.useRef(new Map),u=d.useRef(new Set),c=d.useRef(new Set),f=d.useRef(new Set);d.useEffect(()=>()=>{for(const L of l.current.values())window.clearTimeout(L);l.current.clear(),u.current.clear()},[]),d.useEffect(()=>{c.current=new Set(e),n(L=>Xm(L,f.current))},[e]);const h=d.useCallback((L,y)=>{if(y!=null){if(u.current.has(y))return;if(u.current.add(y),u.current.size>jk){const M=u.current.values().next().value;M!=null&&u.current.delete(M)}}const m=y!=null?`event:${y}`:`event:${L}:${Date.now()}`;o(M=>{if(M.get(L)===m)return M;const R=new Map(M);return R.set(L,m),R});const p=l.current,g=p.get(L);g!=null&&window.clearTimeout(g);const C=window.setTimeout(()=>{o(M=>{if(M.get(L)!==m)return M;const R=new Map(M);return R.delete(L),R}),p.delete(L)},Nk);p.set(L,C)},[]),v=d.useCallback(L=>{f.current=L,n(y=>Xm(y,L))},[]),w=d.useCallback((L,y,m)=>{const p=Date.now();c.current.has(L)&&f.current.has(L)||n(C=>Jm(C,L,p,y,Mk)),h(L,m)},[h]),b=d.useCallback((L,y,m)=>{const p=Date.now(),g=Gv(m)??p;s(C=>Jm(C,L,g,y,Rk))},[]),E=d.useCallback(()=>{n([])},[]);return{offViewActivity:t,recentTouches:r,highlightedPaths:i,onVisiblePathsChange:v,markRecentActivity:w,markRecentTouch:b,clearOffViewActivity:E}}function _k(e){return e.isOffline?"offline":e.isUnstable?"unstable":e.recentEditActive?"recent":Number.isFinite(e.editingCount)&&e.editingCount>0?"editing":"live"}function dy(e){if(!e.length)return e;const t=new Set,n=[];for(const r of e)t.has(r.path)||(t.add(r.path),n.push(r));return n}function fy(e){return{...e,items:dy(e.items)}}function Ik(e,t){const n=e.pageCount??1,r=e.pageSize??t,s=(e.page??1)+1;return n<=1||s>n?null:{startPage:s,endPage:n,pageSize:r}}function Fk(e,t){if(e.path!==t.path)return fy(t);const n=dy([...e.items,...t.items]);return{...e,generatedAt:t.generatedAt??e.generatedAt,dirs:e.dirs.length?e.dirs:t.dirs,items:n,page:t.page??e.page,pageSize:t.pageSize??e.pageSize,pageCount:t.pageCount??e.pageCount,totalItems:t.totalItems??e.totalItems}}async function Ok(e,t){const n=t.shouldContinue??(()=>!0);let r=fy(e);t.onUpdate(r);const s=Ik(e,t.defaultPageSize);if(s)for(let i=s.startPage;i<=s.endPage;i+=1){let o;try{o=await t.fetchPage(i,s.pageSize)}catch{return}if(!n())return;r=Fk(r,o),t.onUpdate(r)}}const hy=[-2,-1,1,2],my=[-2,-1,0,1,2,3];hy.length;my.length;function zk(e,t,n){return Math.min(Math.max(e,t),n)}function py(e,t,n){const r=new Set,s=[];for(const i of n){const o=t+i;if(o<0||o>=e.length)continue;const l=e[o];!l||r.has(l)||(r.add(l),s.push(l))}return s}function Dk(e,t){if(!t)return[];const n=e.indexOf(t);return n<0?[]:py(e,n,hy)}function Ak(e,t){if(e.length<2)return[];const n=Math.max(0,e.length-2),r=zk(t,0,n);return py(e,r,my)}const We={sortKey:"sortKey",sortDir:"sortDir",sortSpec:"sortSpec",starFilters:"starFilters",filterAst:"filterAst",selectedMetric:"selectedMetric",viewMode:"viewMode",gridItemSize:"gridItemSize",leftOpen:"leftOpen",rightOpen:"rightOpen"};function $k(e){switch(e){case"live":return"Live";case"reconnecting":return"Reconnecting";case"offline":return"Offline";case"connecting":case"idle":default:return"Connecting"}}function Zm(e){if(!(e instanceof gn))return null;const t=e.body;if(!t||typeof t!="object")return null;const n=t.error;return typeof n=="string"?n:null}function ep(e,t){for(const n of e)ge.prefetchFile(n,t),ge.prefetchThumb(n)}function tp(e,t){return t-e<kk?rC(e,t):sC(e)}function Uk(e,t){return e?t instanceof gn||t instanceof Error?t.message:"Failed to load embeddings.":null}function Bk(e,t,n,r){return e||t?n:r}function Wk(e,t,n,r,s,i){return e?n:t||i==="/"?r:s}function Hk(){var Lf,Tf,Pf;const[e,t]=d.useState("/"),[n,r]=d.useState(""),[s,i]=d.useState([]),[o,l]=d.useState(!1),[u,c]=d.useState(null),[f,h]=d.useState(null),[v,w]=d.useState(!1),[b,E]=d.useState(0),[L,y]=d.useState(0),[m,p]=d.useState(null),[g,C]=d.useState(100),[M,R]=d.useState(null),[k,T]=d.useState(()=>({filters:{and:[]},sort:{kind:"builtin",key:"added",dir:"desc"},selectedMetric:void 0})),[N,_]=d.useState(()=>Date.now()),[B,z]=d.useState("adaptive"),[oe,ue]=d.useState(220),[P,de]=d.useState(!0),[D,V]=d.useState(!0),[q,Z]=d.useState("folders"),[ce,Pe]=d.useState([]),[X,Q]=d.useState(null),[K,fe]=d.useState(0),[Le,be]=d.useState({}),Ze=d.useRef(null),qe=d.useRef(null),we=d.useRef(null),Ht=d.useRef(null),it=d.useRef(!1),nn=d.useRef(!1),ot=d.useRef(null),yn=d.useRef(null),Vt=d.useRef(fi()),ft=d.useRef(null),ht=d.useRef(null),A=d.useRef(null),ne=d.useRef(!1),re=d.useRef(null),U=d.useRef("idle"),{leftW:J,rightW:se,onResizeLeft:ie,onResizeRight:ye}=tk(Ze,q),[Ce,Me]=d.useState(!1),[Re,et]=d.useState(null),lt=_r(),Rt=VS(),xn=Ma(),tt=KS(),[Ae,In]=d.useState("idle"),[vi,ms]=d.useState({}),[wn,Ta]=d.useState(null),[Ir,ps]=d.useState(null),[No,F]=d.useState(!1),[ae,xe]=d.useState(()=>Date.now()),[Ee,Fr]=d.useState(!0),[jo,uf]=d.useState(!1);d.useEffect(()=>{const x=I=>{const O=Pn(I),W=EC(O)?O:null,ee=W?Nm(O):O;W?(h(W),i([W])):(h(null),it.current=!1),t(he=>he===ee?he:(y(Y=>Y+1),ee))};x(bm());const j=()=>x(bm());return window.addEventListener("hashchange",j),()=>window.removeEventListener("hashchange",j)},[]),d.useEffect(()=>{if(Ir==null){F(!1);return}F(!0);const x=window.setTimeout(()=>F(!1),Sk);return()=>window.clearTimeout(x)},[Ir]),d.useEffect(()=>{if(wn==null)return;xe(Date.now());const x=window.setInterval(()=>xe(Date.now()),1e4);return()=>window.clearInterval(x)},[wn]);const{data:gs,refetch:Mo,isLoading:wt,isError:vs}=Yc(e,!0,{page:1,pageSize:Ml}),[Ve,cf]=d.useState(),Pa=d.useRef(0),_a=d.useCallback(()=>Mo(),[Mo]),{data:ys}=Yc("/",!0,{enabled:!1,page:1,pageSize:Ml});d.useEffect(()=>{lt.removeQueries({predicate:({queryKey:x})=>pC(x,e,!0)})},[e,lt]),d.useEffect(()=>{Pa.current+=1,cf(void 0)},[e]),d.useEffect(()=>{if(!gs)return;const x=++Pa.current;let j=!1;return Ok(gs,{defaultPageSize:Ml,fetchPage:(I,O)=>ge.getFolder(gs.path,{recursive:!0,page:I,pageSize:O}),onUpdate:cf,shouldContinue:()=>!j&&Pa.current===x}),()=>{j=!0}},[gs]);const rn=u!==null,Or=!rn&&n.trim().length>0,df=rk(n,250),ff=d.useMemo(()=>df.trim().replace(/\s+/g," "),[df]),Ro=wC(Or?ff:"",e),xs=CC(),hf=((Lf=xs.data)==null?void 0:Lf.embeddings)??[],gy=((Tf=xs.data)==null?void 0:Tf.rejected)??[],vy=hf.length>0,yy=Uk(xs.isError,xs.error),zr=d.useMemo(()=>Pn(e||"/"),[e]),Ia=d.useMemo(()=>jm(k.filters),[k.filters]),Qt=d.useMemo(()=>{var j;return(Or?((j=Ro.data)==null?void 0:j.items)??[]:(Ve==null?void 0:Ve.items)??[]).map(I=>({...I,star:Le[I.path]!==void 0?Le[I.path]:I.star}))},[Or,Ro.data,Ve,Le]),mf=d.useMemo(()=>{var I;const x=new Map;for(const O of Qt)x.set(O.path,O);const j=((I=Ro.data)==null?void 0:I.items)??[];for(const O of j){if(x.has(O.path))continue;const W=Le[O.path]!==void 0?Le[O.path]:O.star;x.set(O.path,{...O,star:W})}return x},[Qt,Ro.data,Le]),Sn=d.useMemo(()=>u?u.items.map(x=>{const j=mf.get(x.path);return j||Xk(x.path,Le[x.path])}):[],[u,mf,Le]),Qe=d.useMemo(()=>{if(u)return Pm(Sn,k.filters);const x=Pm(Qt,k.filters);return ZC(x,k.sort,N)},[u,Sn,Qt,k.filters,k.sort,N]),yi=u?Sn.length:Qt.length,Fa=Qe.length,Cn=d.useMemo(()=>Qe.map(x=>x.path),[Qe]),{offViewActivity:pf,recentTouches:gf,highlightedPaths:xy,onVisiblePathsChange:wy,markRecentActivity:Oa,markRecentTouch:za,clearOffViewActivity:Sy}=Pk(Cn),vf=d.useMemo(()=>new Set(s),[s]),Cy=d.useMemo(()=>{if(!s.length)return[];const x=u?Sn:Qt,j=new Map(x.map(O=>[O.path,O])),I=new Map(Qe.map(O=>[O.path,O]));return s.map(O=>j.get(O)??I.get(O)).filter(O=>!!O)},[s,u,Sn,Qt,Qe]),sn=d.useMemo(()=>Qe.filter(x=>vf.has(x.path)),[Qe,vf]),yf=d.useMemo(()=>sn.map(x=>x.path),[sn]),Lo=Math.max(0,sn.length-2),Dr=Math.min(b,Lo),ky=sn[Dr]??null,by=sn[Dr+1]??null,Ey=Dr>0,Ny=Dr<sn.length-2,xi=sn.length>=2,jy=u?Sn:Qt,wi=u?null:k.sort.kind==="metric"?k.sort.key:null,xf=d.useMemo(()=>wi?Qe.some(x=>{var I;const j=(I=x.metrics)==null?void 0:I[wi];return j!=null&&!Number.isNaN(j)}):!1,[Qe,wi]);d.useEffect(()=>{E(x=>x>Lo?Lo:x)},[Lo]);const Da=d.useCallback(x=>{const j=Date.now(),O=Gv(x)??j,W=O>j?j:O;Ta(ee=>ee==null?W:ee>W?ee:W),ps(j),xe(j)},[]),Aa=d.useCallback(x=>{const j=Object.prototype.hasOwnProperty.call(x,"star"),I=x.metrics!==void 0,O=x.comments!==void 0;if(!j&&!I&&!O)return;const W=he=>{if(he.path!==x.path)return he;let Y=he;return j&&he.star!==x.star&&(Y={...Y,star:x.star??null}),I&&(Y={...Y,metrics:x.metrics??null}),O&&he.comments!==x.comments&&(Y={...Y,comments:x.comments??""}),Y},ee=he=>{if(!he)return he;let Y=!1;const te=he.items.map(pe=>{const mt=W(pe);return mt!==pe&&(Y=!0),mt});return Y?{...he,items:te}:he};lt.setQueriesData({predicate:({queryKey:he})=>Array.isArray(he)&&he[0]==="folder"},ee),lt.setQueriesData({predicate:({queryKey:he})=>Array.isArray(he)&&he[0]==="search"},ee)},[lt]),My=d.useCallback(()=>{fe(x=>x+1)},[]),ws=d.useCallback(x=>{x.length&&ms(j=>{let I=!1;const O={...j};for(const W of x){const ee=j[W.gallery_id];ee&&ee.viewing===W.viewing&&ee.editing===W.editing||(O[W.gallery_id]=W,I=!0)}return I?O:j})},[]),To=d.useCallback(()=>{re.current!=null&&(window.clearTimeout(re.current),re.current=null)},[]),Po=d.useCallback(x=>{x&&ms(j=>{if(!(x in j))return j;const I={...j};return delete I[x],I})},[]),$a=d.useCallback(x=>{ft.current=x.lease_id,ht.current=x.gallery_id,ws([x])},[ws]),kn=d.useCallback(async(x,j=!1)=>{const I=Vt.current,O=j?void 0:ft.current??void 0,W=ee=>ge.joinPresence(x,ee,I);try{$a(await W(O));return}catch(ee){if(!j&&Zm(ee)==="invalid_lease"){$a(await W(void 0));return}throw ee}},[$a]),wf=d.useCallback(async(x,j)=>{if(x===j){await kn(j);return}const I=ft.current;if(!I){await kn(j,!0);return}try{const O=await ge.movePresence(x,j,I,Vt.current);ht.current=O.to_scope.gallery_id,ws([O.from_scope,O.to_scope]);return}catch(O){const W=Zm(O);if(W==="invalid_lease"){await kn(j,!0);return}if(W==="scope_mismatch"){await kn(j);return}throw O}},[ws,kn]),Sf=d.useCallback(async x=>{const j=ht.current;if(!j){await kn(x,!0);return}if(j===x){await kn(x);return}await wf(j,x)},[kn,wf]),_o=d.useCallback(async()=>{if(ne.current)return;const x=A.current;if(x){A.current=null,ne.current=!0;try{await Sf(x)}catch{}finally{ne.current=!1;const j=A.current;j&&j!==ht.current&&_o()}}},[Sf]),Ss=d.useCallback((x,j=!1)=>{if(A.current=x,To(),j||ht.current==null){_o();return}re.current=window.setTimeout(()=>{re.current=null,_o()},Ek)},[To,_o]),Cf=d.useCallback(()=>{ht.current=null,ft.current=null,A.current=null,To()},[To]),Io=d.useCallback(x=>{const j=ht.current,I=ft.current;!j||!I||(H1(j,I,Vt.current),x&&Po(j),Cf())},[Po,Cf]);d.useEffect(()=>{z1();const x=A1(I=>{if(I.type==="presence"){const ee=I.data;if(!(ee!=null&&ee.gallery_id))return;ws([ee]);return}const O=I.data;if(!(O!=null&&O.path))return;const W=O.path;if(I.type==="item-updated"){const ee=I.data,he={v:1,tags:ee.tags??[],notes:ee.notes??"",star:ee.star??null,version:ee.version??1,updated_at:ee.updated_at??"",updated_by:ee.updated_by??"server"};lt.setQueryData(mo(W),he),Aa({path:W,star:ee.star??null,metrics:ee.metrics,comments:ee.notes??""}),YS(W,he),Oa(W,"item-updated",I.id),za(W,"item-updated",ee.updated_at),Da(ee.updated_at),be(Y=>{if(Y[W]===void 0)return Y;const te={...Y};return delete te[W],te})}else if(I.type==="metrics-updated"){const ee=I.data;Aa({path:W,metrics:ee.metrics}),Oa(W,"metrics-updated",I.id),za(W,"metrics-updated",ee.updated_at),Da(ee.updated_at)}}),j=$1(In);return()=>{x(),j(),D1()}},[ws,Oa,za,lt,Aa,Da]),d.useEffect(()=>{const x=ht.current;x!==zr&&Ss(zr,x==null)},[zr,Ss]),d.useEffect(()=>{const x=window.setInterval(()=>{const j=ht.current;j&&kn(j)},bk);return()=>{window.clearInterval(x)}},[kn]),d.useEffect(()=>{const x=U.current;if(U.current=Ae,Ae==="live"&&x!=="live"){Ss(zr,!0);return}(Ae==="reconnecting"||Ae==="offline")&&Po(ht.current)},[Po,Ae,zr,Ss]),d.useEffect(()=>{const x=()=>Io(!0),j=()=>Io(!0),I=()=>{Ss(zr,!0)};return window.addEventListener("pagehide",x),window.addEventListener("beforeunload",j),window.addEventListener("pageshow",I),()=>{window.removeEventListener("pagehide",x),window.removeEventListener("beforeunload",j),window.removeEventListener("pageshow",I),Io(!1)}},[zr,Ss,Io]),d.useEffect(()=>{let x=!1;return ge.getHealth().then(j=>{var O;if(x)return;const I=((O=j==null?void 0:j.labels)==null?void 0:O.enabled)??!0;Fr(I)}).catch(()=>{}),()=>{x=!0}},[]);const Ry=d.useMemo(()=>{const x=u?Sn:Qt,j={0:0,1:0,2:0,3:0,4:0,5:0};for(const I of x){const O=Le[I.path]??I.star??0;j[String(O)]=(j[String(O)]||0)+1}return j},[u,Sn,Qt,Le]),er=d.useMemo(()=>{const x=new Set;let j=0;const I=u?Sn:Qt;for(const O of I){const W=O.metrics;if(W)for(const ee of Object.keys(W))x.add(ee);if(j+=1,j>=250&&x.size>0)break}return Array.from(x).sort()},[u,Sn,Qt]);d.useEffect(()=>{rn||er.length&&T(x=>{const j=x.selectedMetric&&er.includes(x.selectedMetric)?x.selectedMetric:er[0];return j===x.selectedMetric?x:{...x,selectedMetric:j}})},[er,rn]),d.useEffect(()=>{rn||k.sort.kind==="metric"&&(er.includes(k.sort.key)||T(x=>({...x,sort:{kind:"builtin",key:"added",dir:x.sort.dir}})))},[er,k.sort,rn]);const Fo=d.useMemo(()=>KC(k.filters),[k.filters]),Oo=(Ve==null?void 0:Ve.totalItems)??(Ve==null?void 0:Ve.items.length)??yi,Ly=e==="/"?Oo:(ys==null?void 0:ys.totalItems)??(ys==null?void 0:ys.items.length)??Oo,Ua=rn||Or||Fo>0,zo=vi[e],Ty=Rt.state==="syncing"?"Syncing":Rt.state==="error"?Rt.message?`Not saved  ${Rt.message}`:"Not saved  retry":"All changes saved",Py=$k(Ae),Ba=wn!=null,_y=d.useMemo(()=>!Ba||wn==null?"No edits yet.":tp(wn,ae),[Ba,wn,ae]),Iy=(zo==null?void 0:zo.editing)??0,Fy=tt!=null&&tt>Ck,Oy=Ae==="offline"||Ae==="connecting"||Ae==="idle",zy=Ae==="reconnecting"||xn||Rt.state==="error"||Fy,Dy=_k({isOffline:Oy,isUnstable:zy,recentEditActive:No,editingCount:Iy}),Ay=d.useMemo(()=>Lk(pf,Qe),[pf,Qe]),$y=d.useMemo(()=>Tk(gf,Qe,ae,tp),[Qe,ae,gf]),Uy=Bk(rn,Ua,Fa,Oo),By=Wk(rn,Ua,yi,Oo,Ly,e),kf=d.useMemo(()=>{if(!u)return null;if(u.queryPath){const x=u.queryPath.split("/").filter(Boolean);return x.length?x[x.length-1]:u.queryPath}return u.queryVector?"Vector query":null},[u]),bf=d.useMemo(()=>u?Fo>0?`${Fa} of ${yi}`:`${yi}`:null,[u,Fo,Fa,yi]),St=d.useCallback(x=>{T(j=>({...j,filters:x(j.filters)}))},[]),Wy=d.useCallback(x=>{T(j=>({...j,filters:x}))},[]),Do=d.useCallback(()=>{St(x=>Mu(x,[]))},[St]),Ef=d.useCallback(()=>{T(x=>({...x,filters:{and:[]}}))},[]),Wa=d.useCallback(()=>{c(null);const x=yn.current;yn.current=null,x&&x.length?(i(x),y(j=>j+1)):i([])},[]),Hy=d.useCallback(()=>{u&&Wa(),r(""),T(x=>({...x,filters:{and:[]}}))},[Wa,u]),Vy=d.useCallback(async x=>{!u&&yn.current===null&&(yn.current=s);const j=await ge.searchEmbeddings(x);if(c({embedding:j.embedding,queryPath:x.query_path??null,queryVector:x.query_vector_b64??null,topK:x.top_k??50,minScore:x.min_score??null,items:j.items,createdAt:Date.now()}),j.items.length){const I=x.query_path&&j.items.some(O=>O.path===x.query_path)?x.query_path:j.items[0].path;i([I]),y(O=>O+1)}else i([])},[u,s]),Ha=d.useCallback((x,j)=>{St(I=>QC(I,x,j))},[St]),Nf=d.useMemo(()=>{var j,I,O,W,ee,he;const x=[];for(const Y of k.filters.and)if("stars"in Y){const te=Y.stars||[];if(!te.length)continue;x.push({id:"stars",label:`Rating in: ${Tu(te)}`,onRemove:()=>Do()})}else if("starsIn"in Y){const te=Y.starsIn.values||[];if(!te.length)continue;x.push({id:"stars-in",label:`Rating in: ${Tu(te)}`,onRemove:()=>Do()})}else if("starsNotIn"in Y){const te=Y.starsNotIn.values||[];if(!te.length)continue;x.push({id:"stars-not-in",label:`Rating not in: ${Tu(te)}`,onRemove:()=>St(pe=>ey(pe,[]))})}else if("nameContains"in Y){const te=(j=Y.nameContains.value)==null?void 0:j.trim();if(!te)continue;x.push({id:"name-contains",label:`Filename contains: ${te}`,onRemove:()=>St(pe=>ty(pe,""))})}else if("nameNotContains"in Y){const te=(I=Y.nameNotContains.value)==null?void 0:I.trim();if(!te)continue;x.push({id:"name-not-contains",label:`Filename not: ${te}`,onRemove:()=>St(pe=>ny(pe,""))})}else if("commentsContains"in Y){const te=(O=Y.commentsContains.value)==null?void 0:O.trim();if(!te)continue;x.push({id:"comments-contains",label:`Comments contain: ${te}`,onRemove:()=>St(pe=>ry(pe,""))})}else if("commentsNotContains"in Y){const te=(W=Y.commentsNotContains.value)==null?void 0:W.trim();if(!te)continue;x.push({id:"comments-not-contains",label:`Comments not: ${te}`,onRemove:()=>St(pe=>sy(pe,""))})}else if("urlContains"in Y){const te=(ee=Y.urlContains.value)==null?void 0:ee.trim();if(!te)continue;x.push({id:"url-contains",label:`URL contains: ${te}`,onRemove:()=>St(pe=>iy(pe,""))})}else if("urlNotContains"in Y){const te=(he=Y.urlNotContains.value)==null?void 0:he.trim();if(!te)continue;x.push({id:"url-not-contains",label:`URL not: ${te}`,onRemove:()=>St(pe=>oy(pe,""))})}else if("dateRange"in Y){const{from:te,to:pe}=Y.dateRange;if(!te&&!pe)continue;x.push({id:"date-range",label:`Date: ${Kk(te,pe)}`,onRemove:()=>St(mt=>Jc(mt,null))})}else if("widthCompare"in Y){const{op:te,value:pe}=Y.widthCompare;x.push({id:"width-compare",label:`Width ${te} ${pe}`,onRemove:()=>St(mt=>Rl(mt,null))})}else if("heightCompare"in Y){const{op:te,value:pe}=Y.heightCompare;x.push({id:"height-compare",label:`Height ${te} ${pe}`,onRemove:()=>St(mt=>Ll(mt,null))})}else if("metricRange"in Y){const{key:te,min:pe,max:mt}=Y.metricRange;x.push({id:`metric:${te}`,label:`${te}: ${Gk(pe,mt)}`,onRemove:()=>Ha(te,null)})}return x},[k.filters,Do,Ha,St]),Qy=d.useCallback(x=>{const j=new Set(Ia);j.has(x)?j.delete(x):j.add(x),T(I=>({...I,filters:Mu(I.filters,Array.from(j))}))},[Ia]),Ky=d.useCallback(()=>{de(!0),Z("metrics")},[]),qy=d.useCallback(x=>{T(j=>({...j,sort:x})),x.kind==="builtin"&&x.key==="random"&&_(Date.now())},[]),jf=d.useCallback(x=>{if(x==="/"||x==="")return"Lenslet | Root";const j=x.split("/").filter(Boolean);if(!j.length)return"Lenslet";const I=j.slice(-2).join("/");return`Lenslet | ${j.length>2?`.../${I}`:`/${I}`}`},[]),Gy=d.useMemo(()=>qk(e),[e]);d.useEffect(()=>{document.title=jf(e)},[e,jf]),d.useEffect(()=>{let x=!0;return ge.getViews().then(j=>{x&&Pe(j.views||[])}).catch(()=>{x&&Pe([])}),()=>{x=!1}},[]),d.useEffect(()=>{Or&&(i([]),f&&(h(null),it.current=!1,dl(e)))},[Or,f,e]),d.useEffect(()=>{const x=Ze.current,j=Ht.current;if(!x||!j)return;const I=()=>{const O=Math.max(48,Math.round(j.getBoundingClientRect().height));x.style.setProperty("--toolbar-h",`${O}px`)};if(I(),"ResizeObserver"in window){const O=new ResizeObserver(I);return O.observe(j),()=>O.disconnect()}return window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]),d.useEffect(()=>{try{const x=localStorage.getItem(We.sortKey),j=localStorage.getItem(We.sortDir),I=localStorage.getItem(We.sortSpec),O=localStorage.getItem(We.starFilters),W=localStorage.getItem(We.filterAst),ee=localStorage.getItem(We.selectedMetric),he=localStorage.getItem(We.viewMode),Y=localStorage.getItem(We.gridItemSize),te=localStorage.getItem(We.leftOpen),pe=localStorage.getItem(We.rightOpen),_f=(pt=>{if(!pt)return null;const Ge=Nu(pt);return!Ge||typeof Ge!="object"?null:Ge.kind==="builtin"&&(Ge.key==="name"||Ge.key==="added"||Ge.key==="random")&&(Ge.dir==="asc"||Ge.dir==="desc")||Ge.kind==="metric"&&typeof Ge.key=="string"&&Ge.key.length>0&&(Ge.dir==="asc"||Ge.dir==="desc")?Ge:null})(I)??{kind:"builtin",key:x==="name"||x==="added"||x==="random"?x:"added",dir:j==="asc"||j==="desc"?j:"desc"};_f.key==="random"&&_(Date.now());let qa=(pt=>{if(!pt)return null;const Ge=Nu(pt);return Xc(Ge)})(W)??{and:[]};if(O){const pt=Nu(O);if(Array.isArray(pt)){const Ge=pt.filter(s0=>[0,1,2,3,4,5].includes(s0));qa=Mu(qa,Ge)}}if(T(pt=>({...pt,sort:_f,filters:qa,selectedMetric:ee||pt.selectedMetric})),(he==="grid"||he==="adaptive")&&z(he),Y){const pt=Number(Y);!isNaN(pt)&&pt>=80&&pt<=500&&ue(pt)}(te==="0"||te==="false")&&de(!1),(pe==="0"||pe==="false")&&V(!1)}catch{}},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia("(max-width: 900px)"),j=()=>{x.matches&&(de(!1),V(!1))};return j(),"addEventListener"in x?(x.addEventListener("change",j),()=>x.removeEventListener("change",j)):(x.addListener(j),()=>x.removeListener(j))},[]),d.useEffect(()=>{if(typeof window>"u")return;const x=[1,1.25,1.5,1.75,2,3,4],j=W=>x.reduce((ee,he)=>Math.abs(he-W)<Math.abs(ee-W)?he:ee,x[0]),I=()=>{var mt;const W=window.devicePixelRatio||1,ee=j(W),he=((mt=window.visualViewport)==null?void 0:mt.scale)??1,Y=W*he/ee;if(!Number.isFinite(Y)){R(null);return}const te=Math.round(Y*100),pe=Math.min(500,Math.max(25,te));R(pe)};I(),window.addEventListener("resize",I),window.addEventListener("orientationchange",I);const O=window.visualViewport;return O&&O.addEventListener("resize",I),()=>{window.removeEventListener("resize",I),window.removeEventListener("orientationchange",I),O&&O.removeEventListener("resize",I)}},[]),d.useEffect(()=>{try{localStorage.setItem(We.sortKey,k.sort.kind==="builtin"?k.sort.key:"added"),localStorage.setItem(We.sortDir,k.sort.dir),localStorage.setItem(We.sortSpec,JSON.stringify(k.sort));const x=jm(k.filters);localStorage.setItem(We.starFilters,JSON.stringify(x)),localStorage.setItem(We.filterAst,JSON.stringify(k.filters)),k.selectedMetric?localStorage.setItem(We.selectedMetric,k.selectedMetric):localStorage.removeItem(We.selectedMetric),localStorage.setItem(We.viewMode,B),localStorage.setItem(We.gridItemSize,String(oe)),localStorage.setItem(We.leftOpen,P?"1":"0"),localStorage.setItem(We.rightOpen,D?"1":"0")}catch{}},[k,B,oe,P,D]),d.useEffect(()=>{const x=qe.current;if(!x)return;const j=O=>Math.min(500,Math.max(80,O)),I=O=>{O.ctrlKey&&(f||v||(O.preventDefault(),ue(W=>j(W+(O.deltaY<0?20:-20)))))};return x.addEventListener("wheel",I,{passive:!1}),()=>x.removeEventListener("wheel",I)},[f,v]),d.useEffect(()=>{if(f||v)return;const x=qe.current;if(!x)return;const j=Y=>Math.min(500,Math.max(80,Y));let I=null;const O=Y=>{if(Y.length<2)return 0;const[te,pe]=[Y[0],Y[1]];return Math.hypot(te.clientX-pe.clientX,te.clientY-pe.clientY)},W=Y=>{if(Y.touches.length!==2)return;const te=O(Y.touches);te&&(I={dist:te,size:oe})},ee=Y=>{if(!I||Y.touches.length!==2)return;const te=O(Y.touches);if(!te)return;Y.preventDefault();const pe=j(I.size*(te/I.dist));ue(pe)},he=()=>{I=null};return x.addEventListener("touchstart",W,{passive:!0}),x.addEventListener("touchmove",ee,{passive:!1}),x.addEventListener("touchend",he),x.addEventListener("touchcancel",he),()=>{x.removeEventListener("touchstart",W),x.removeEventListener("touchmove",ee),x.removeEventListener("touchend",he),x.removeEventListener("touchcancel",he)}},[f,v,oe]),d.useEffect(()=>{ep(Dk(Cn,f),"viewer")},[f,Cn]),d.useEffect(()=>{v&&ep(Ak(yf,Dr),"compare")},[v,yf,Dr]);const Ao=d.useCallback(x=>{h(null),it.current=!1;const j=Pn(x);t(j),Em(j)},[]),Yy=d.useCallback(async()=>{const x=window.prompt("Save Smart Folder as:","New Smart Folder");if(!x)return;const j=Vk(x,ce),I={id:j,name:x,pool:{kind:"folder",path:e},view:JSON.parse(JSON.stringify(k))},O=[...ce.filter(W=>W.id!==j),I];Pe(O),Q(j);try{await ge.saveViews({version:1,views:O})}catch(W){if(W instanceof gn&&W.status===403){const ee=new Blob([JSON.stringify({version:1,views:O},null,2)],{type:"application/json"});Tl(ee,`lenslet-smart-folder-${j}.json`),alert("No-write mode: exported Smart Folder JSON instead of saving.");return}console.error("Failed to save Smart Folder:",W)}},[e,k,ce]);d.useEffect(()=>{if(!X)return;const x=ce.find(O=>O.id===X);if(!x){Q(null);return}const j=x.pool.path===e,I=JSON.stringify(x.view)===JSON.stringify(k);(!j||!I)&&Q(null)},[X,ce,e,k]);const $o=d.useCallback(x=>{if(!x)return;const j=document.getElementById(`cell-${encodeURIComponent(x)}`);j==null||j.focus()},[]),Xy=d.useCallback(x=>{h(x),it.current=!0,Em(x)},[]),Mf=d.useCallback(()=>{h(null),it.current?(it.current=!1,window.history.back()):dl(e),$o(ot.current)},[$o]),Jy=d.useCallback(()=>{v||!xi||(s[0]&&(ot.current=s[0]),E(0),w(!0),f&&(h(null),it.current&&(it.current=!1),dl(e)),nn.current||(window.history.pushState({compare:!0},"",window.location.href),nn.current=!0))},[v,xi,s,f,e]),Va=d.useCallback(()=>{w(!1),nn.current&&(nn.current=!1,window.history.back()),$o(ot.current??s[0])},[$o,s]),Zy=d.useCallback(x=>{sn.length<2||E(j=>{const I=Math.max(0,sn.length-2);return Math.min(I,Math.max(0,j+x))})},[sn.length]);d.useEffect(()=>{v&&(xi||Va())},[v,xi,Va]),d.useEffect(()=>{const x=()=>{f&&(it.current=!1,h(null)),v&&(nn.current=!1,w(!1))};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[f,v]),d.useEffect(()=>{const x=Ze.current;if(!x)return;const j=W=>{W.dataTransfer&&Array.from(W.dataTransfer.types).includes("Files")&&(W.preventDefault(),Me(!0))},I=W=>{const ee=W.relatedTarget;ee&&x.contains(ee)||Me(!1)},O=async W=>{var Y,te;W.preventDefault(),Me(!1);const ee=Array.from(((Y=W.dataTransfer)==null?void 0:Y.files)??[]);if(!ee.length)return;if(!((((te=Ve==null?void 0:Ve.dirs)==null?void 0:te.length)??0)===0)){alert("Uploads are only allowed into folders without subdirectories.");return}for(const pe of ee)try{await ge.uploadFile(e,pe)}catch(mt){console.error(`Failed to upload ${pe.name}:`,mt)}_a()};return x.addEventListener("dragover",j),x.addEventListener("dragleave",I),x.addEventListener("drop",O),()=>{x.removeEventListener("dragover",j),x.removeEventListener("dragleave",I),x.removeEventListener("drop",O)}},[e,(Pf=Ve==null?void 0:Ve.dirs)==null?void 0:Pf.length,_a]),d.useEffect(()=>{const x=()=>et(null),j=I=>{I.key==="Escape"&&et(null)};return window.addEventListener("click",x),window.addEventListener("keydown",j),()=>{window.removeEventListener("click",x),window.removeEventListener("keydown",j)}},[]),d.useEffect(()=>{const x=j=>{if(!nf(j.target)){if((j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="b"){j.preventDefault(),j.altKey?V(I=>!I):de(I=>!I);return}if(!(f||v)){if(j.key==="Backspace"||j.key==="Delete")j.preventDefault(),Ao(Nm(e));else if((j.ctrlKey||j.metaKey)&&j.key.toLowerCase()==="a")j.preventDefault(),i(Qe.map(I=>I.path));else if(j.key==="Escape")s.length&&(j.preventDefault(),i([]));else if(j.key==="/"){j.preventDefault();const I=document.querySelector(".toolbar-right .input");I==null||I.focus()}}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,Qe,s,f,v,Ao]);const e0=P?`${J}px`:"0px",t0=D?`${se}px`:"0px",Rf=f??s[0]??null,Qa=Rf?Cn.indexOf(Rf):-1,n0=Qa>0,r0=Qa>=0&&Qa<Cn.length-1,Ka=d.useCallback(x=>{if(!Cn.length)return;const j=f??s[0];if(!j)return;const I=Cn.indexOf(j);if(I===-1)return;const O=Math.min(Cn.length-1,Math.max(0,I+x)),W=Cn[O];!W||W===j||(f&&(h(W),dl(W)),i([W]))},[Cn,f,s]);return a.jsxs("div",{className:"app-shell grid h-full grid-cols-[var(--left)_1fr_var(--right)]",ref:Ze,style:{"--left":e0,"--right":t0},children:[a.jsx(y1,{rootRef:Ht,onSearch:r,viewerActive:!!f,onBack:Mf,zoomPercent:f?g:void 0,onZoomPercentChange:x=>p(x),currentLabel:Gy,itemCount:Uy,totalCount:By,sortSpec:k.sort,metricKeys:er,onSortChange:qy,sortDisabled:rn,filterCount:Fo,onOpenFilters:Ky,starFilters:Ia,onToggleStar:Qy,onClearStars:Do,onClearFilters:Ef,starCounts:Ry,viewMode:B,onViewMode:z,gridItemSize:oe,onGridItemSize:ue,leftOpen:P,rightOpen:D,onToggleLeft:()=>de(x=>!x),onToggleRight:()=>V(x=>!x),onPrevImage:()=>Ka(-1),onNextImage:()=>Ka(1),canPrevImage:n0,canNextImage:r0,searchDisabled:rn,searchPlaceholder:rn?"Exit similarity to search":void 0,syncIndicator:{state:Dy,presence:zo,syncLabel:Ty,connectionLabel:Py,lastEditedLabel:_y,hasEdits:Ba,localTypingActive:jo,recentTouches:$y}}),P&&a.jsx(xk,{leftTool:q,onToolChange:Z,compareEnabled:xi,compareActive:v,onOpenCompare:Jy,views:ce,activeViewId:X,onActivateView:x=>{var I;Q(x.id);const j=Xc((I=x.view)==null?void 0:I.filters)??{and:[]};T({...x.view,filters:j}),Ao(x.pool.path)},onSaveView:Yy,current:e,data:Ve,onOpenFolder:x=>{Q(null),Ao(x)},onContextMenu:(x,j)=>{x.preventDefault(),et({x:x.clientX,y:x.clientY,kind:"tree",payload:{path:j}})},countVersion:K,items:jy,filteredItems:Qe,metricKeys:er,selectedItems:Cy,selectedMetric:k.selectedMetric,onSelectMetric:x=>T(j=>({...j,selectedMetric:x})),filters:k.filters,onChangeRange:Ha,onChangeFilters:Wy,onResize:ie}),a.jsxs("div",{className:"grid-shell col-start-2 row-start-2 relative overflow-hidden flex flex-col",ref:qe,children:[a.jsx("div",{"aria-live":"polite",className:"sr-only",children:s.length?`${s.length} selected`:""}),a.jsx(wk,{persistenceEnabled:Ee,offViewSummary:Ay,canRevealOffView:Ua,onRevealOffView:Hy,onClearOffView:Sy,browserZoomPercent:M}),u&&a.jsx("div",{className:"border-b border-border bg-panel",children:a.jsxs("div",{className:"px-3 py-2 flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"ui-banner ui-banner-accent text-xs flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"font-semibold",children:"Similarity mode"}),a.jsxs("span",{className:"text-muted",children:["Embedding: ",u.embedding]}),kf&&a.jsxs("span",{className:"text-muted",children:["Query: ",kf]}),bf&&a.jsxs("span",{className:"text-muted",children:["Results: ",bf]}),a.jsxs("span",{className:"text-muted",children:["Top K: ",u.topK]}),u.minScore!=null&&a.jsxs("span",{className:"text-muted",children:["Min score: ",u.minScore]})]}),a.jsx("button",{className:"btn btn-sm",onClick:Wa,children:"Exit similarity"})]})}),Nf.length>0&&a.jsx("div",{className:"sticky top-0 z-10 px-3 py-2 bg-panel border-b border-border",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Filters"}),Nf.map(x=>a.jsxs("span",{className:"filter-chip",children:[a.jsx("span",{className:"truncate max-w-[240px]",title:x.label,children:x.label}),a.jsx("button",{className:"filter-chip-remove","aria-label":`Clear filter ${x.label}`,onClick:x.onRemove,children:""})]},x.id)),a.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:Ef,children:"Clear all"})]})}),!1,a.jsxs("div",{className:"flex-1 min-h-0 relative",children:[a.jsx(xS,{items:Qe,selected:s,restoreToSelectionToken:L,onSelectionChange:i,onOpenViewer:x=>{try{ot.current=x}catch{}Xy(x),i([x])},highlight:Or?ff:"",recentlyUpdated:xy,onVisiblePathsChange:wy,suppressSelectionHighlight:!!f||v,viewMode:B,targetCellSize:oe,onContextMenuItem:(x,j)=>{x.preventDefault();const I=s.length?s:[j];et({x:x.clientX,y:x.clientY,kind:"grid",payload:{paths:I}})},scrollRef:we,hideScrollbar:xf}),xf&&wi&&a.jsx(CS,{items:Qe,metricKey:wi,scrollRef:we,sortDir:k.sort.dir})]})]}),D&&a.jsx(uC,{path:s[0]??null,selectedPaths:s,items:Qe,sortSpec:k.sort,onResize:ye,onStarChanged:(x,j)=>{be(I=>{const O={...I};for(const W of x)O[W]=j;return O})},onFindSimilar:()=>l(!0),embeddingsAvailable:vy,embeddingsLoading:xs.isLoading,onLocalTypingChange:uf}),a.jsx(cC,{open:o,embeddings:hf,rejected:gy,selectedPath:s[0]??null,embeddingsLoading:xs.isLoading,embeddingsError:yy,onClose:()=>l(!1),onSearch:Vy}),f&&a.jsx(TS,{path:f,onClose:Mf,onZoomChange:x=>C(Math.round(x)),requestedZoomPercent:m,onZoomRequestConsumed:()=>p(null),onNavigate:Ka}),v&&a.jsx(OS,{aItem:ky,bItem:by,index:Dr,total:sn.length,canPrev:Ey,canNext:Ny,onNavigate:Zy,onClose:Va}),Ce&&a.jsx("div",{className:"toolbar-offset fixed inset-0 left-[var(--left)] right-[var(--right)] bg-accent/10 border-2 border-dashed border-accent text-text flex items-center justify-center text-lg z-overlay pointer-events-none",children:"Drop images to upload"}),Re&&a.jsx(Jk,{ctx:Re,current:e,items:Qe,refetch:_a,setCtx:et,onInvalidateCounts:My})]})}function Vk(e,t){const n=Qk(e)||"view",r=new Set(t.map(i=>i.id));if(!r.has(n))return n;let s=2;for(;r.has(`${n}-${s}`);)s+=1;return`${n}-${s}`}function Qk(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function Tu(e){const t=e.filter(s=>s>0).sort((s,i)=>i-s),n=e.includes(0),r=[...t.map(s=>String(s))];return n&&r.push("None"),r.join(", ")}function Kk(e,t){return e&&t?`${e} to ${t}`:e?`from ${e}`:t?`to ${t}`:""}function qk(e){if(e==="/"||e==="")return"Root";const t=e.split("/").filter(Boolean);return t.length?t.length<=2?`/${t.join("/")}`:`.../${t.slice(-2).join("/")}`:"Root"}function Gk(e,t){return`${np(e)}${np(t)}`}function np(e){const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Yk(e){const t=e.toLowerCase();return t.endsWith(".png")?"image/png":t.endsWith(".webp")?"image/webp":"image/jpeg"}function Xk(e,t){const n=e.split("/").pop()??e;return{path:e,name:n,type:Yk(e),w:0,h:0,size:0,hasThumb:!0,hasMeta:!1,star:t??null}}function Tl(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function Jk({ctx:e,current:t,items:n,refetch:r,setCtx:s,onInvalidateCounts:i}){const o=MC(t),l=_r(),[u,c]=Pl.useState(!1),[f,h]=Pl.useState(null),v=()=>new Date().toISOString().replace(/[:.]/g,"-"),w=m=>{const p=g=>m==="/"?!0:g===m||g.startsWith(`${m}/`);l.invalidateQueries({predicate:({queryKey:g})=>{if(!Array.isArray(g)||g[0]!=="folder")return!1;const C=typeof g[1]=="string"?g[1]:"";return p(C)}})},b=m=>{const p=Pn(m);return p===""?"/":p},E=async()=>{const m=b(e.payload.path||"/");c(!0);try{await ge.refreshFolder(m),w(m),i(),(t===m||t.startsWith(m==="/"?"/":`${m}/`))&&await r(),Ac.evictPrefix(m),Es.evictPrefix(m)}catch(p){console.error("Failed to refresh folder:",p)}finally{c(!1),s(null)}},L=m=>async()=>{h(m);const p=e.payload.path||t;try{const C=(await ge.getFolder(p,{recursive:!0,legacyRecursive:!0})).items,M=Dm(C),R=m==="csv"?zm(M):Om(M),k=m==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8",T=p==="/"?"root":(p.replace(/^\/+/,"")||"root").replace(/\//g,"_");Tl(new Blob([R],{type:k}),`metadata_${T}_${v()}.${m}`)}catch(g){console.error("Failed to export folder:",g),alert("Failed to export folder. See console for details.")}finally{h(null),s(null)}},y=e.kind==="tree"?[{label:u?"Refreshing":"Refresh",disabled:u,onClick:E},{label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f||u,onClick:L("csv")},{label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f||u,onClick:L("json")}]:(()=>{const m=e.payload.paths??[],p=[],g=M=>async()=>{h(M);try{const R=new Set(m),k=n.filter(B=>R.has(B.path)),T=Dm(k),N=M==="csv"?zm(T):Om(T),_=M==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8";Tl(new Blob([N],{type:_}),`metadata_selection_${v()}.${M}`)}finally{h(null),s(null)}},C=async()=>{var R;if(!m.length)return;s(null);const M=new Map(n.map(k=>[k.path,k]));for(const k of m)try{const T=await ge.getFile(k),N=((R=M.get(k))==null?void 0:R.name)||jC(k)||"image";Tl(T,N)}catch(T){console.error(`Failed to download ${k}:`,T)}};return m.length&&p.push({label:m.length>1?`Download (${m.length})`:"Download",onClick:C}),p.push({label:"Move to trash",disabled:o,onClick:async()=>{if(!o){for(const M of m)try{await ge.moveFile(M,"/_trash_")}catch(R){console.error(`Failed to trash ${M}:`,R)}r(),s(null)}}}),o&&(p.push({label:"Permanent delete",danger:!0,onClick:async()=>{if(confirm(`Delete ${m.length} file(s) permanently? This cannot be undone.`)){try{await ge.deleteFiles(m)}catch(M){console.error("Failed to delete files:",M)}r(),s(null)}}}),p.push({label:"Recover",onClick:async()=>{for(const M of m)try{const k=(await ge.getSidecar(M)).original_position,T=k&&k.split("/").slice(0,-1).join("/")||"/";await ge.moveFile(M,T)}catch(R){console.error(`Failed to recover ${M}:`,R)}r(),s(null)}})),m.length&&(p.push({label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f,onClick:g("csv")}),p.push({label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f,onClick:g("json")})),p})();return a.jsx(nk,{x:e.x,y:e.y,items:y})}const Zk=new n1({defaultOptions:{queries:{staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always"},mutations:{retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),5e3)}}});function eb(){return a.jsx(r1,{client:Zk,children:a.jsx(Hk,{})})}Nv(document.getElementById("root")).render(a.jsx(eb,{}));
