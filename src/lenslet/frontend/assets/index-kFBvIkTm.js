var xv=Object.defineProperty;var Rd=e=>{throw TypeError(e)};var wv=(e,t,n)=>t in e?xv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var pn=(e,t,n)=>wv(e,typeof t!="symbol"?t+"":t,n),na=(e,t,n)=>t.has(e)||Rd("Cannot "+n);var w=(e,t,n)=>(na(e,t,"read from private field"),n?n.call(e):t.get(e)),te=(e,t,n)=>t.has(e)?Rd("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),V=(e,t,n,r)=>(na(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ae=(e,t,n)=>(na(e,t,"access private method"),n);var Zi=(e,t,n,r)=>({set _(s){V(e,t,s,n)},get _(){return w(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Sv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Yh={exports:{}},wl={},qh={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bi=Symbol.for("react.element"),kv=Symbol.for("react.portal"),Cv=Symbol.for("react.fragment"),Ev=Symbol.for("react.strict_mode"),bv=Symbol.for("react.profiler"),Nv=Symbol.for("react.provider"),jv=Symbol.for("react.context"),Mv=Symbol.for("react.forward_ref"),Rv=Symbol.for("react.suspense"),Lv=Symbol.for("react.memo"),Tv=Symbol.for("react.lazy"),Ld=Symbol.iterator;function Iv(e){return e===null||typeof e!="object"?null:(e=Ld&&e[Ld]||e["@@iterator"],typeof e=="function"?e:null)}var Xh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jh=Object.assign,Zh={};function As(e,t,n){this.props=e,this.context=t,this.refs=Zh,this.updater=n||Xh}As.prototype.isReactComponent={};As.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};As.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ep(){}ep.prototype=As.prototype;function lc(e,t,n){this.props=e,this.context=t,this.refs=Zh,this.updater=n||Xh}var ac=lc.prototype=new ep;ac.constructor=lc;Jh(ac,As.prototype);ac.isPureReactComponent=!0;var Td=Array.isArray,tp=Object.prototype.hasOwnProperty,uc={current:null},np={key:!0,ref:!0,__self:!0,__source:!0};function rp(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)tp.call(t,r)&&!np.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Bi,type:e,key:i,ref:o,props:s,_owner:uc.current}}function _v(e,t){return{$$typeof:Bi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bi}function Pv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Id=/\/+/g;function ra(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Pv(""+e.key):t.toString(36)}function ko(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Bi:case kv:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+ra(o,0):r,Td(s)?(n="",e!=null&&(n=e.replace(Id,"$&/")+"/"),ko(s,t,n,"",function(c){return c})):s!=null&&(cc(s)&&(s=_v(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Id,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Td(e))for(var l=0;l<e.length;l++){i=e[l];var a=r+ra(i,l);o+=ko(i,t,n,a,s)}else if(a=Iv(e),typeof a=="function")for(e=a.call(e),l=0;!(i=e.next()).done;)i=i.value,a=r+ra(i,l++),o+=ko(i,t,n,a,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function eo(e,t,n){if(e==null)return e;var r=[],s=0;return ko(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Ov(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gt={current:null},Co={transition:null},Fv={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:Co,ReactCurrentOwner:uc};function sp(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:eo,forEach:function(e,t,n){eo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return eo(e,function(){t++}),t},toArray:function(e){return eo(e,function(t){return t})||[]},only:function(e){if(!cc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ue.Component=As;ue.Fragment=Cv;ue.Profiler=bv;ue.PureComponent=lc;ue.StrictMode=Ev;ue.Suspense=Rv;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fv;ue.act=sp;ue.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Jh({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=uc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)tp.call(t,a)&&!np.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Bi,type:e.type,key:s,ref:i,props:r,_owner:o}};ue.createContext=function(e){return e={$$typeof:jv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Nv,_context:e},e.Consumer=e};ue.createElement=rp;ue.createFactory=function(e){var t=rp.bind(null,e);return t.type=e,t};ue.createRef=function(){return{current:null}};ue.forwardRef=function(e){return{$$typeof:Mv,render:e}};ue.isValidElement=cc;ue.lazy=function(e){return{$$typeof:Tv,_payload:{_status:-1,_result:e},_init:Ov}};ue.memo=function(e,t){return{$$typeof:Lv,type:e,compare:t===void 0?null:t}};ue.startTransition=function(e){var t=Co.transition;Co.transition={};try{e()}finally{Co.transition=t}};ue.unstable_act=sp;ue.useCallback=function(e,t){return gt.current.useCallback(e,t)};ue.useContext=function(e){return gt.current.useContext(e)};ue.useDebugValue=function(){};ue.useDeferredValue=function(e){return gt.current.useDeferredValue(e)};ue.useEffect=function(e,t){return gt.current.useEffect(e,t)};ue.useId=function(){return gt.current.useId()};ue.useImperativeHandle=function(e,t,n){return gt.current.useImperativeHandle(e,t,n)};ue.useInsertionEffect=function(e,t){return gt.current.useInsertionEffect(e,t)};ue.useLayoutEffect=function(e,t){return gt.current.useLayoutEffect(e,t)};ue.useMemo=function(e,t){return gt.current.useMemo(e,t)};ue.useReducer=function(e,t,n){return gt.current.useReducer(e,t,n)};ue.useRef=function(e){return gt.current.useRef(e)};ue.useState=function(e){return gt.current.useState(e)};ue.useSyncExternalStore=function(e,t,n){return gt.current.useSyncExternalStore(e,t,n)};ue.useTransition=function(){return gt.current.useTransition()};ue.version="18.3.1";qh.exports=ue;var h=qh.exports;const Bo=Sv(h);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv=h,zv=Symbol.for("react.element"),Av=Symbol.for("react.fragment"),$v=Object.prototype.hasOwnProperty,Uv=Dv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bv={key:!0,ref:!0,__self:!0,__source:!0};function ip(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)$v.call(t,r)&&!Bv.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:zv,type:e,key:i,ref:o,props:s,_owner:Uv.current}}wl.Fragment=Av;wl.jsx=ip;wl.jsxs=ip;Yh.exports=wl;var u=Yh.exports,op={exports:{}},It={},lp={exports:{}},ap={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,U){var q=O.length;O.push(U);e:for(;0<q;){var de=q-1>>>1,Q=O[de];if(0<s(Q,U))O[de]=U,O[q]=Q,q=de;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var U=O[0],q=O.pop();if(q!==U){O[0]=q;e:for(var de=0,Q=O.length,oe=Q>>>1;de<oe;){var re=2*(de+1)-1,fe=O[re],ke=re+1,_e=O[ke];if(0>s(fe,q))ke<Q&&0>s(_e,fe)?(O[de]=_e,O[ke]=q,de=ke):(O[de]=fe,O[re]=q,de=re);else if(ke<Q&&0>s(_e,q))O[de]=_e,O[ke]=q,de=ke;else break e}}return U}function s(O,U){var q=O.sortIndex-U.sortIndex;return q!==0?q:O.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],c=[],f=1,d=null,v=3,S=!1,k=!1,b=!1,N=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(O){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=O)r(c),U.sortIndex=U.expirationTime,t(a,U);else break;U=n(c)}}function m(O){if(b=!1,p(O),!k)if(n(a)!==null)k=!0,be(C);else{var U=n(c);U!==null&&me(m,U.startTime-O)}}function C(O,U){k=!1,b&&(b=!1,y(M),M=-1),S=!0;var q=v;try{for(p(U),d=n(a);d!==null&&(!(d.expirationTime>U)||O&&!P());){var de=d.callback;if(typeof de=="function"){d.callback=null,v=d.priorityLevel;var Q=de(d.expirationTime<=U);U=e.unstable_now(),typeof Q=="function"?d.callback=Q:d===n(a)&&r(a),p(U)}else r(a);d=n(a)}if(d!==null)var oe=!0;else{var re=n(c);re!==null&&me(m,re.startTime-U),oe=!1}return oe}finally{d=null,v=q,S=!1}}var L=!1,T=null,M=-1,I=5,E=-1;function P(){return!(e.unstable_now()-E<I)}function ee(){if(T!==null){var O=e.unstable_now();E=O;var U=!0;try{U=T(!0,O)}finally{U?ne():(L=!1,T=null)}}else L=!1}var ne;if(typeof g=="function")ne=function(){g(ee)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Ie=H.port2;H.port1.onmessage=ee,ne=function(){Ie.postMessage(null)}}else ne=function(){N(ee,0)};function be(O){T=O,L||(L=!0,ne())}function me(O,U){M=N(function(){O(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){k||S||(k=!0,be(C))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(O){switch(v){case 1:case 2:case 3:var U=3;break;default:U=v}var q=v;v=U;try{return O()}finally{v=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,U){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var q=v;v=O;try{return U()}finally{v=q}},e.unstable_scheduleCallback=function(O,U,q){var de=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?de+q:de):q=de,O){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=q+Q,O={id:f++,callback:U,priorityLevel:O,startTime:q,expirationTime:Q,sortIndex:-1},q>de?(O.sortIndex=q,t(c,O),n(a)===null&&O===n(c)&&(b?(y(M),M=-1):b=!0,me(m,q-de))):(O.sortIndex=Q,t(a,O),k||S||(k=!0,be(C))),O},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(O){var U=v;return function(){var q=v;v=U;try{return O.apply(this,arguments)}finally{v=q}}}})(ap);lp.exports=ap;var Wv=lp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv=h,Tt=Wv;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var up=new Set,gi={};function Qr(e,t){Is(e,t),Is(e+"Capture",t)}function Is(e,t){for(gi[e]=t,e=0;e<t.length;e++)up.add(t[e])}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$a=Object.prototype.hasOwnProperty,Vv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_d={},Pd={};function Qv(e){return $a.call(Pd,e)?!0:$a.call(_d,e)?!1:Vv.test(e)?Pd[e]=!0:(_d[e]=!0,!1)}function Kv(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Gv(e,t,n,r){if(t===null||typeof t>"u"||Kv(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function vt(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Je[e]=new vt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Je[t]=new vt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Je[e]=new vt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Je[e]=new vt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Je[e]=new vt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Je[e]=new vt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Je[e]=new vt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Je[e]=new vt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Je[e]=new vt(e,5,!1,e.toLowerCase(),null,!1,!1)});var dc=/[\-:]([a-z])/g;function fc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dc,fc);Je[t]=new vt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dc,fc);Je[t]=new vt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dc,fc);Je[t]=new vt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Je[e]=new vt(e,1,!1,e.toLowerCase(),null,!1,!1)});Je.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Je[e]=new vt(e,1,!1,e.toLowerCase(),null,!0,!0)});function hc(e,t,n,r){var s=Je.hasOwnProperty(t)?Je[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Gv(t,n,s,r)&&(n=null),r||s===null?Qv(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var In=Hv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,to=Symbol.for("react.element"),Zr=Symbol.for("react.portal"),es=Symbol.for("react.fragment"),pc=Symbol.for("react.strict_mode"),Ua=Symbol.for("react.profiler"),cp=Symbol.for("react.provider"),dp=Symbol.for("react.context"),mc=Symbol.for("react.forward_ref"),Ba=Symbol.for("react.suspense"),Wa=Symbol.for("react.suspense_list"),gc=Symbol.for("react.memo"),zn=Symbol.for("react.lazy"),fp=Symbol.for("react.offscreen"),Od=Symbol.iterator;function Hs(e){return e===null||typeof e!="object"?null:(e=Od&&e[Od]||e["@@iterator"],typeof e=="function"?e:null)}var Te=Object.assign,sa;function ei(e){if(sa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);sa=t&&t[1]||""}return`
`+sa+e}var ia=!1;function oa(e,t){if(!e||ia)return"";ia=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var a=`
`+s[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{ia=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ei(e):""}function Yv(e){switch(e.tag){case 5:return ei(e.type);case 16:return ei("Lazy");case 13:return ei("Suspense");case 19:return ei("SuspenseList");case 0:case 2:case 15:return e=oa(e.type,!1),e;case 11:return e=oa(e.type.render,!1),e;case 1:return e=oa(e.type,!0),e;default:return""}}function Ha(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case es:return"Fragment";case Zr:return"Portal";case Ua:return"Profiler";case pc:return"StrictMode";case Ba:return"Suspense";case Wa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case dp:return(e.displayName||"Context")+".Consumer";case cp:return(e._context.displayName||"Context")+".Provider";case mc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gc:return t=e.displayName||null,t!==null?t:Ha(e.type)||"Memo";case zn:t=e._payload,e=e._init;try{return Ha(e(t))}catch{}}return null}function qv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ha(t);case 8:return t===pc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ur(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xv(e){var t=hp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function no(e){e._valueTracker||(e._valueTracker=Xv(e))}function pp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=hp(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Wo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Va(e,t){var n=t.checked;return Te({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Fd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ur(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function mp(e,t){t=t.checked,t!=null&&hc(e,"checked",t,!1)}function Qa(e,t){mp(e,t);var n=ur(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ka(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ka(e,t.type,ur(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Dd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ka(e,t,n){(t!=="number"||Wo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ti=Array.isArray;function ds(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ur(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ga(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return Te({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(ti(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ur(n)}}function gp(e,t){var n=ur(t.value),r=ur(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ad(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function vp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ya(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?vp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ro,yp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ro=ro||document.createElement("div"),ro.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ro.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var oi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jv=["Webkit","ms","Moz","O"];Object.keys(oi).forEach(function(e){Jv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),oi[t]=oi[e]})});function xp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||oi.hasOwnProperty(e)&&oi[e]?(""+t).trim():t+"px"}function wp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=xp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Zv=Te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qa(e,t){if(t){if(Zv[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Xa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ja=null;function vc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Za=null,fs=null,hs=null;function $d(e){if(e=Vi(e)){if(typeof Za!="function")throw Error(D(280));var t=e.stateNode;t&&(t=bl(t),Za(e.stateNode,e.type,t))}}function Sp(e){fs?hs?hs.push(e):hs=[e]:fs=e}function kp(){if(fs){var e=fs,t=hs;if(hs=fs=null,$d(e),t)for(e=0;e<t.length;e++)$d(t[e])}}function Cp(e,t){return e(t)}function Ep(){}var la=!1;function bp(e,t,n){if(la)return e(t,n);la=!0;try{return Cp(e,t,n)}finally{la=!1,(fs!==null||hs!==null)&&(Ep(),kp())}}function yi(e,t){var n=e.stateNode;if(n===null)return null;var r=bl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var eu=!1;if(Mn)try{var Vs={};Object.defineProperty(Vs,"passive",{get:function(){eu=!0}}),window.addEventListener("test",Vs,Vs),window.removeEventListener("test",Vs,Vs)}catch{eu=!1}function ey(e,t,n,r,s,i,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var li=!1,Ho=null,Vo=!1,tu=null,ty={onError:function(e){li=!0,Ho=e}};function ny(e,t,n,r,s,i,o,l,a){li=!1,Ho=null,ey.apply(ty,arguments)}function ry(e,t,n,r,s,i,o,l,a){if(ny.apply(this,arguments),li){if(li){var c=Ho;li=!1,Ho=null}else throw Error(D(198));Vo||(Vo=!0,tu=c)}}function Kr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Np(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ud(e){if(Kr(e)!==e)throw Error(D(188))}function sy(e){var t=e.alternate;if(!t){if(t=Kr(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ud(s),e;if(i===r)return Ud(s),t;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function jp(e){return e=sy(e),e!==null?Mp(e):null}function Mp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Mp(e);if(t!==null)return t;e=e.sibling}return null}var Rp=Tt.unstable_scheduleCallback,Bd=Tt.unstable_cancelCallback,iy=Tt.unstable_shouldYield,oy=Tt.unstable_requestPaint,$e=Tt.unstable_now,ly=Tt.unstable_getCurrentPriorityLevel,yc=Tt.unstable_ImmediatePriority,Lp=Tt.unstable_UserBlockingPriority,Qo=Tt.unstable_NormalPriority,ay=Tt.unstable_LowPriority,Tp=Tt.unstable_IdlePriority,Sl=null,cn=null;function uy(e){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Sl,e,void 0,(e.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:fy,cy=Math.log,dy=Math.LN2;function fy(e){return e>>>=0,e===0?32:31-(cy(e)/dy|0)|0}var so=64,io=4194304;function ni(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ko(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=ni(l):(i&=o,i!==0&&(r=ni(i)))}else o=n&~s,o!==0?r=ni(o):i!==0&&(r=ni(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Xt(t),s=1<<n,r|=e[n],t&=~s;return r}function hy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function py(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Xt(i),l=1<<o,a=s[o];a===-1?(!(l&n)||l&r)&&(s[o]=hy(l,t)):a<=t&&(e.expiredLanes|=l),i&=~l}}function nu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ip(){var e=so;return so<<=1,!(so&4194240)&&(so=64),e}function aa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Wi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xt(t),e[t]=n}function my(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Xt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function xc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Xt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ye=0;function _p(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Pp,wc,Op,Fp,Dp,ru=!1,oo=[],Zn=null,er=null,tr=null,xi=new Map,wi=new Map,$n=[],gy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wd(e,t){switch(e){case"focusin":case"focusout":Zn=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":xi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wi.delete(t.pointerId)}}function Qs(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Vi(t),t!==null&&wc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function vy(e,t,n,r,s){switch(t){case"focusin":return Zn=Qs(Zn,e,t,n,r,s),!0;case"dragenter":return er=Qs(er,e,t,n,r,s),!0;case"mouseover":return tr=Qs(tr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return xi.set(i,Qs(xi.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,wi.set(i,Qs(wi.get(i)||null,e,t,n,r,s)),!0}return!1}function zp(e){var t=kr(e.target);if(t!==null){var n=Kr(t);if(n!==null){if(t=n.tag,t===13){if(t=Np(n),t!==null){e.blockedOn=t,Dp(e.priority,function(){Op(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Eo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=su(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ja=r,n.target.dispatchEvent(r),Ja=null}else return t=Vi(n),t!==null&&wc(t),e.blockedOn=n,!1;t.shift()}return!0}function Hd(e,t,n){Eo(e)&&n.delete(t)}function yy(){ru=!1,Zn!==null&&Eo(Zn)&&(Zn=null),er!==null&&Eo(er)&&(er=null),tr!==null&&Eo(tr)&&(tr=null),xi.forEach(Hd),wi.forEach(Hd)}function Ks(e,t){e.blockedOn===t&&(e.blockedOn=null,ru||(ru=!0,Tt.unstable_scheduleCallback(Tt.unstable_NormalPriority,yy)))}function Si(e){function t(s){return Ks(s,e)}if(0<oo.length){Ks(oo[0],e);for(var n=1;n<oo.length;n++){var r=oo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Zn!==null&&Ks(Zn,e),er!==null&&Ks(er,e),tr!==null&&Ks(tr,e),xi.forEach(t),wi.forEach(t),n=0;n<$n.length;n++)r=$n[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<$n.length&&(n=$n[0],n.blockedOn===null);)zp(n),n.blockedOn===null&&$n.shift()}var ps=In.ReactCurrentBatchConfig,Go=!0;function xy(e,t,n,r){var s=ye,i=ps.transition;ps.transition=null;try{ye=1,Sc(e,t,n,r)}finally{ye=s,ps.transition=i}}function wy(e,t,n,r){var s=ye,i=ps.transition;ps.transition=null;try{ye=4,Sc(e,t,n,r)}finally{ye=s,ps.transition=i}}function Sc(e,t,n,r){if(Go){var s=su(e,t,n,r);if(s===null)ya(e,t,r,Yo,n),Wd(e,r);else if(vy(s,e,t,n,r))r.stopPropagation();else if(Wd(e,r),t&4&&-1<gy.indexOf(e)){for(;s!==null;){var i=Vi(s);if(i!==null&&Pp(i),i=su(e,t,n,r),i===null&&ya(e,t,r,Yo,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ya(e,t,r,null,n)}}var Yo=null;function su(e,t,n,r){if(Yo=null,e=vc(r),e=kr(e),e!==null)if(t=Kr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Np(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yo=e,null}function Ap(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ly()){case yc:return 1;case Lp:return 4;case Qo:case ay:return 16;case Tp:return 536870912;default:return 16}default:return 16}}var Xn=null,kc=null,bo=null;function $p(){if(bo)return bo;var e,t=kc,n=t.length,r,s="value"in Xn?Xn.value:Xn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return bo=s.slice(e,1<r?1-r:void 0)}function No(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lo(){return!0}function Vd(){return!1}function _t(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?lo:Vd,this.isPropagationStopped=Vd,this}return Te(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lo)},persist:function(){},isPersistent:lo}),t}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cc=_t($s),Hi=Te({},$s,{view:0,detail:0}),Sy=_t(Hi),ua,ca,Gs,kl=Te({},Hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ec,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gs&&(Gs&&e.type==="mousemove"?(ua=e.screenX-Gs.screenX,ca=e.screenY-Gs.screenY):ca=ua=0,Gs=e),ua)},movementY:function(e){return"movementY"in e?e.movementY:ca}}),Qd=_t(kl),ky=Te({},kl,{dataTransfer:0}),Cy=_t(ky),Ey=Te({},Hi,{relatedTarget:0}),da=_t(Ey),by=Te({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),Ny=_t(by),jy=Te({},$s,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),My=_t(jy),Ry=Te({},$s,{data:0}),Kd=_t(Ry),Ly={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ty={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _y(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Iy[e])?!!t[e]:!1}function Ec(){return _y}var Py=Te({},Hi,{key:function(e){if(e.key){var t=Ly[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=No(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ty[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ec,charCode:function(e){return e.type==="keypress"?No(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?No(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Oy=_t(Py),Fy=Te({},kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gd=_t(Fy),Dy=Te({},Hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ec}),zy=_t(Dy),Ay=Te({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),$y=_t(Ay),Uy=Te({},kl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),By=_t(Uy),Wy=[9,13,27,32],bc=Mn&&"CompositionEvent"in window,ai=null;Mn&&"documentMode"in document&&(ai=document.documentMode);var Hy=Mn&&"TextEvent"in window&&!ai,Up=Mn&&(!bc||ai&&8<ai&&11>=ai),Yd=" ",qd=!1;function Bp(e,t){switch(e){case"keyup":return Wy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ts=!1;function Vy(e,t){switch(e){case"compositionend":return Wp(t);case"keypress":return t.which!==32?null:(qd=!0,Yd);case"textInput":return e=t.data,e===Yd&&qd?null:e;default:return null}}function Qy(e,t){if(ts)return e==="compositionend"||!bc&&Bp(e,t)?(e=$p(),bo=kc=Xn=null,ts=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Up&&t.locale!=="ko"?null:t.data;default:return null}}var Ky={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ky[e.type]:t==="textarea"}function Hp(e,t,n,r){Sp(r),t=qo(t,"onChange"),0<t.length&&(n=new Cc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ui=null,ki=null;function Gy(e){tm(e,0)}function Cl(e){var t=ss(e);if(pp(t))return e}function Yy(e,t){if(e==="change")return t}var Vp=!1;if(Mn){var fa;if(Mn){var ha="oninput"in document;if(!ha){var Jd=document.createElement("div");Jd.setAttribute("oninput","return;"),ha=typeof Jd.oninput=="function"}fa=ha}else fa=!1;Vp=fa&&(!document.documentMode||9<document.documentMode)}function Zd(){ui&&(ui.detachEvent("onpropertychange",Qp),ki=ui=null)}function Qp(e){if(e.propertyName==="value"&&Cl(ki)){var t=[];Hp(t,ki,e,vc(e)),bp(Gy,t)}}function qy(e,t,n){e==="focusin"?(Zd(),ui=t,ki=n,ui.attachEvent("onpropertychange",Qp)):e==="focusout"&&Zd()}function Xy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Cl(ki)}function Jy(e,t){if(e==="click")return Cl(t)}function Zy(e,t){if(e==="input"||e==="change")return Cl(t)}function e0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zt=typeof Object.is=="function"?Object.is:e0;function Ci(e,t){if(Zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!$a.call(t,s)||!Zt(e[s],t[s]))return!1}return!0}function ef(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tf(e,t){var n=ef(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ef(n)}}function Kp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Kp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Gp(){for(var e=window,t=Wo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wo(e.document)}return t}function Nc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function t0(e){var t=Gp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Kp(n.ownerDocument.documentElement,n)){if(r!==null&&Nc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=tf(n,i);var o=tf(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var n0=Mn&&"documentMode"in document&&11>=document.documentMode,ns=null,iu=null,ci=null,ou=!1;function nf(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ou||ns==null||ns!==Wo(r)||(r=ns,"selectionStart"in r&&Nc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ci&&Ci(ci,r)||(ci=r,r=qo(iu,"onSelect"),0<r.length&&(t=new Cc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ns)))}function ao(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var rs={animationend:ao("Animation","AnimationEnd"),animationiteration:ao("Animation","AnimationIteration"),animationstart:ao("Animation","AnimationStart"),transitionend:ao("Transition","TransitionEnd")},pa={},Yp={};Mn&&(Yp=document.createElement("div").style,"AnimationEvent"in window||(delete rs.animationend.animation,delete rs.animationiteration.animation,delete rs.animationstart.animation),"TransitionEvent"in window||delete rs.transitionend.transition);function El(e){if(pa[e])return pa[e];if(!rs[e])return e;var t=rs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Yp)return pa[e]=t[n];return e}var qp=El("animationend"),Xp=El("animationiteration"),Jp=El("animationstart"),Zp=El("transitionend"),em=new Map,rf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dr(e,t){em.set(e,t),Qr(t,[e])}for(var ma=0;ma<rf.length;ma++){var ga=rf[ma],r0=ga.toLowerCase(),s0=ga[0].toUpperCase()+ga.slice(1);dr(r0,"on"+s0)}dr(qp,"onAnimationEnd");dr(Xp,"onAnimationIteration");dr(Jp,"onAnimationStart");dr("dblclick","onDoubleClick");dr("focusin","onFocus");dr("focusout","onBlur");dr(Zp,"onTransitionEnd");Is("onMouseEnter",["mouseout","mouseover"]);Is("onMouseLeave",["mouseout","mouseover"]);Is("onPointerEnter",["pointerout","pointerover"]);Is("onPointerLeave",["pointerout","pointerover"]);Qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ri));function sf(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,ry(r,t,void 0,e),e.currentTarget=null}function tm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==i&&s.isPropagationStopped())break e;sf(s,l,c),i=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==i&&s.isPropagationStopped())break e;sf(s,l,c),i=a}}}if(Vo)throw e=tu,Vo=!1,tu=null,e}function Ce(e,t){var n=t[du];n===void 0&&(n=t[du]=new Set);var r=e+"__bubble";n.has(r)||(nm(t,e,2,!1),n.add(r))}function va(e,t,n){var r=0;t&&(r|=4),nm(n,e,r,t)}var uo="_reactListening"+Math.random().toString(36).slice(2);function Ei(e){if(!e[uo]){e[uo]=!0,up.forEach(function(n){n!=="selectionchange"&&(i0.has(n)||va(n,!1,e),va(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[uo]||(t[uo]=!0,va("selectionchange",!1,t))}}function nm(e,t,n,r){switch(Ap(t)){case 1:var s=xy;break;case 4:s=wy;break;default:s=Sc}n=s.bind(null,t,n,e),s=void 0,!eu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ya(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=kr(l),o===null)return;if(a=o.tag,a===5||a===6){r=i=o;continue e}l=l.parentNode}}r=r.return}bp(function(){var c=i,f=vc(n),d=[];e:{var v=em.get(e);if(v!==void 0){var S=Cc,k=e;switch(e){case"keypress":if(No(n)===0)break e;case"keydown":case"keyup":S=Oy;break;case"focusin":k="focus",S=da;break;case"focusout":k="blur",S=da;break;case"beforeblur":case"afterblur":S=da;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Qd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Cy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=zy;break;case qp:case Xp:case Jp:S=Ny;break;case Zp:S=$y;break;case"scroll":S=Sy;break;case"wheel":S=By;break;case"copy":case"cut":case"paste":S=My;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Gd}var b=(t&4)!==0,N=!b&&e==="scroll",y=b?v!==null?v+"Capture":null:v;b=[];for(var g=c,p;g!==null;){p=g;var m=p.stateNode;if(p.tag===5&&m!==null&&(p=m,y!==null&&(m=yi(g,y),m!=null&&b.push(bi(g,m,p)))),N)break;g=g.return}0<b.length&&(v=new S(v,k,null,n,f),d.push({event:v,listeners:b}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",v&&n!==Ja&&(k=n.relatedTarget||n.fromElement)&&(kr(k)||k[Rn]))break e;if((S||v)&&(v=f.window===f?f:(v=f.ownerDocument)?v.defaultView||v.parentWindow:window,S?(k=n.relatedTarget||n.toElement,S=c,k=k?kr(k):null,k!==null&&(N=Kr(k),k!==N||k.tag!==5&&k.tag!==6)&&(k=null)):(S=null,k=c),S!==k)){if(b=Qd,m="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(b=Gd,m="onPointerLeave",y="onPointerEnter",g="pointer"),N=S==null?v:ss(S),p=k==null?v:ss(k),v=new b(m,g+"leave",S,n,f),v.target=N,v.relatedTarget=p,m=null,kr(f)===c&&(b=new b(y,g+"enter",k,n,f),b.target=p,b.relatedTarget=N,m=b),N=m,S&&k)t:{for(b=S,y=k,g=0,p=b;p;p=Yr(p))g++;for(p=0,m=y;m;m=Yr(m))p++;for(;0<g-p;)b=Yr(b),g--;for(;0<p-g;)y=Yr(y),p--;for(;g--;){if(b===y||y!==null&&b===y.alternate)break t;b=Yr(b),y=Yr(y)}b=null}else b=null;S!==null&&of(d,v,S,b,!1),k!==null&&N!==null&&of(d,N,k,b,!0)}}e:{if(v=c?ss(c):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var C=Yy;else if(Xd(v))if(Vp)C=Zy;else{C=Xy;var L=qy}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(C=Jy);if(C&&(C=C(e,c))){Hp(d,C,n,f);break e}L&&L(e,v,c),e==="focusout"&&(L=v._wrapperState)&&L.controlled&&v.type==="number"&&Ka(v,"number",v.value)}switch(L=c?ss(c):window,e){case"focusin":(Xd(L)||L.contentEditable==="true")&&(ns=L,iu=c,ci=null);break;case"focusout":ci=iu=ns=null;break;case"mousedown":ou=!0;break;case"contextmenu":case"mouseup":case"dragend":ou=!1,nf(d,n,f);break;case"selectionchange":if(n0)break;case"keydown":case"keyup":nf(d,n,f)}var T;if(bc)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else ts?Bp(e,n)&&(M="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(Up&&n.locale!=="ko"&&(ts||M!=="onCompositionStart"?M==="onCompositionEnd"&&ts&&(T=$p()):(Xn=f,kc="value"in Xn?Xn.value:Xn.textContent,ts=!0)),L=qo(c,M),0<L.length&&(M=new Kd(M,e,null,n,f),d.push({event:M,listeners:L}),T?M.data=T:(T=Wp(n),T!==null&&(M.data=T)))),(T=Hy?Vy(e,n):Qy(e,n))&&(c=qo(c,"onBeforeInput"),0<c.length&&(f=new Kd("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=T))}tm(d,t)})}function bi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=yi(e,n),i!=null&&r.unshift(bi(e,i,s)),i=yi(e,t),i!=null&&r.push(bi(e,i,s))),e=e.return}return r}function Yr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function of(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,s?(a=yi(n,i),a!=null&&o.unshift(bi(n,a,l))):s||(a=yi(n,i),a!=null&&o.push(bi(n,a,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var o0=/\r\n?/g,l0=/\u0000|\uFFFD/g;function lf(e){return(typeof e=="string"?e:""+e).replace(o0,`
`).replace(l0,"")}function co(e,t,n){if(t=lf(t),lf(e)!==t&&n)throw Error(D(425))}function Xo(){}var lu=null,au=null;function uu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cu=typeof setTimeout=="function"?setTimeout:void 0,a0=typeof clearTimeout=="function"?clearTimeout:void 0,af=typeof Promise=="function"?Promise:void 0,u0=typeof queueMicrotask=="function"?queueMicrotask:typeof af<"u"?function(e){return af.resolve(null).then(e).catch(c0)}:cu;function c0(e){setTimeout(function(){throw e})}function xa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Si(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Si(t)}function nr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function uf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Us=Math.random().toString(36).slice(2),un="__reactFiber$"+Us,Ni="__reactProps$"+Us,Rn="__reactContainer$"+Us,du="__reactEvents$"+Us,d0="__reactListeners$"+Us,f0="__reactHandles$"+Us;function kr(e){var t=e[un];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Rn]||n[un]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=uf(e);e!==null;){if(n=e[un])return n;e=uf(e)}return t}e=n,n=e.parentNode}return null}function Vi(e){return e=e[un]||e[Rn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ss(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function bl(e){return e[Ni]||null}var fu=[],is=-1;function fr(e){return{current:e}}function Ee(e){0>is||(e.current=fu[is],fu[is]=null,is--)}function Se(e,t){is++,fu[is]=e.current,e.current=t}var cr={},it=fr(cr),Ct=fr(!1),Ar=cr;function _s(e,t){var n=e.type.contextTypes;if(!n)return cr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Et(e){return e=e.childContextTypes,e!=null}function Jo(){Ee(Ct),Ee(it)}function cf(e,t,n){if(it.current!==cr)throw Error(D(168));Se(it,t),Se(Ct,n)}function rm(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(D(108,qv(e)||"Unknown",s));return Te({},n,r)}function Zo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cr,Ar=it.current,Se(it,e),Se(Ct,Ct.current),!0}function df(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=rm(e,t,Ar),r.__reactInternalMemoizedMergedChildContext=e,Ee(Ct),Ee(it),Se(it,e)):Ee(Ct),Se(Ct,n)}var yn=null,Nl=!1,wa=!1;function sm(e){yn===null?yn=[e]:yn.push(e)}function h0(e){Nl=!0,sm(e)}function hr(){if(!wa&&yn!==null){wa=!0;var e=0,t=ye;try{var n=yn;for(ye=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}yn=null,Nl=!1}catch(s){throw yn!==null&&(yn=yn.slice(e+1)),Rp(yc,hr),s}finally{ye=t,wa=!1}}return null}var os=[],ls=0,el=null,tl=0,Ft=[],Dt=0,$r=null,Cn=1,En="";function wr(e,t){os[ls++]=tl,os[ls++]=el,el=e,tl=t}function im(e,t,n){Ft[Dt++]=Cn,Ft[Dt++]=En,Ft[Dt++]=$r,$r=e;var r=Cn;e=En;var s=32-Xt(r)-1;r&=~(1<<s),n+=1;var i=32-Xt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Cn=1<<32-Xt(t)+s|n<<s|r,En=i+e}else Cn=1<<i|n<<s|r,En=e}function jc(e){e.return!==null&&(wr(e,1),im(e,1,0))}function Mc(e){for(;e===el;)el=os[--ls],os[ls]=null,tl=os[--ls],os[ls]=null;for(;e===$r;)$r=Ft[--Dt],Ft[Dt]=null,En=Ft[--Dt],Ft[Dt]=null,Cn=Ft[--Dt],Ft[Dt]=null}var Lt=null,Rt=null,Ne=!1,qt=null;function om(e,t){var n=At(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ff(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Lt=e,Rt=nr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Lt=e,Rt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=$r!==null?{id:Cn,overflow:En}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=At(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Lt=e,Rt=null,!0):!1;default:return!1}}function hu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function pu(e){if(Ne){var t=Rt;if(t){var n=t;if(!ff(e,t)){if(hu(e))throw Error(D(418));t=nr(n.nextSibling);var r=Lt;t&&ff(e,t)?om(r,n):(e.flags=e.flags&-4097|2,Ne=!1,Lt=e)}}else{if(hu(e))throw Error(D(418));e.flags=e.flags&-4097|2,Ne=!1,Lt=e}}}function hf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Lt=e}function fo(e){if(e!==Lt)return!1;if(!Ne)return hf(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!uu(e.type,e.memoizedProps)),t&&(t=Rt)){if(hu(e))throw lm(),Error(D(418));for(;t;)om(e,t),t=nr(t.nextSibling)}if(hf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Rt=nr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Rt=null}}else Rt=Lt?nr(e.stateNode.nextSibling):null;return!0}function lm(){for(var e=Rt;e;)e=nr(e.nextSibling)}function Ps(){Rt=Lt=null,Ne=!1}function Rc(e){qt===null?qt=[e]:qt.push(e)}var p0=In.ReactCurrentBatchConfig;function Ys(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function ho(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pf(e){var t=e._init;return t(e._payload)}function am(e){function t(y,g){if(e){var p=y.deletions;p===null?(y.deletions=[g],y.flags|=16):p.push(g)}}function n(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function s(y,g){return y=or(y,g),y.index=0,y.sibling=null,y}function i(y,g,p){return y.index=p,e?(p=y.alternate,p!==null?(p=p.index,p<g?(y.flags|=2,g):p):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,g,p,m){return g===null||g.tag!==6?(g=ja(p,y.mode,m),g.return=y,g):(g=s(g,p),g.return=y,g)}function a(y,g,p,m){var C=p.type;return C===es?f(y,g,p.props.children,m,p.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===zn&&pf(C)===g.type)?(m=s(g,p.props),m.ref=Ys(y,g,p),m.return=y,m):(m=_o(p.type,p.key,p.props,null,y.mode,m),m.ref=Ys(y,g,p),m.return=y,m)}function c(y,g,p,m){return g===null||g.tag!==4||g.stateNode.containerInfo!==p.containerInfo||g.stateNode.implementation!==p.implementation?(g=Ma(p,y.mode,m),g.return=y,g):(g=s(g,p.children||[]),g.return=y,g)}function f(y,g,p,m,C){return g===null||g.tag!==7?(g=zr(p,y.mode,m,C),g.return=y,g):(g=s(g,p),g.return=y,g)}function d(y,g,p){if(typeof g=="string"&&g!==""||typeof g=="number")return g=ja(""+g,y.mode,p),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case to:return p=_o(g.type,g.key,g.props,null,y.mode,p),p.ref=Ys(y,null,g),p.return=y,p;case Zr:return g=Ma(g,y.mode,p),g.return=y,g;case zn:var m=g._init;return d(y,m(g._payload),p)}if(ti(g)||Hs(g))return g=zr(g,y.mode,p,null),g.return=y,g;ho(y,g)}return null}function v(y,g,p,m){var C=g!==null?g.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return C!==null?null:l(y,g,""+p,m);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case to:return p.key===C?a(y,g,p,m):null;case Zr:return p.key===C?c(y,g,p,m):null;case zn:return C=p._init,v(y,g,C(p._payload),m)}if(ti(p)||Hs(p))return C!==null?null:f(y,g,p,m,null);ho(y,p)}return null}function S(y,g,p,m,C){if(typeof m=="string"&&m!==""||typeof m=="number")return y=y.get(p)||null,l(g,y,""+m,C);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case to:return y=y.get(m.key===null?p:m.key)||null,a(g,y,m,C);case Zr:return y=y.get(m.key===null?p:m.key)||null,c(g,y,m,C);case zn:var L=m._init;return S(y,g,p,L(m._payload),C)}if(ti(m)||Hs(m))return y=y.get(p)||null,f(g,y,m,C,null);ho(g,m)}return null}function k(y,g,p,m){for(var C=null,L=null,T=g,M=g=0,I=null;T!==null&&M<p.length;M++){T.index>M?(I=T,T=null):I=T.sibling;var E=v(y,T,p[M],m);if(E===null){T===null&&(T=I);break}e&&T&&E.alternate===null&&t(y,T),g=i(E,g,M),L===null?C=E:L.sibling=E,L=E,T=I}if(M===p.length)return n(y,T),Ne&&wr(y,M),C;if(T===null){for(;M<p.length;M++)T=d(y,p[M],m),T!==null&&(g=i(T,g,M),L===null?C=T:L.sibling=T,L=T);return Ne&&wr(y,M),C}for(T=r(y,T);M<p.length;M++)I=S(T,y,M,p[M],m),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?M:I.key),g=i(I,g,M),L===null?C=I:L.sibling=I,L=I);return e&&T.forEach(function(P){return t(y,P)}),Ne&&wr(y,M),C}function b(y,g,p,m){var C=Hs(p);if(typeof C!="function")throw Error(D(150));if(p=C.call(p),p==null)throw Error(D(151));for(var L=C=null,T=g,M=g=0,I=null,E=p.next();T!==null&&!E.done;M++,E=p.next()){T.index>M?(I=T,T=null):I=T.sibling;var P=v(y,T,E.value,m);if(P===null){T===null&&(T=I);break}e&&T&&P.alternate===null&&t(y,T),g=i(P,g,M),L===null?C=P:L.sibling=P,L=P,T=I}if(E.done)return n(y,T),Ne&&wr(y,M),C;if(T===null){for(;!E.done;M++,E=p.next())E=d(y,E.value,m),E!==null&&(g=i(E,g,M),L===null?C=E:L.sibling=E,L=E);return Ne&&wr(y,M),C}for(T=r(y,T);!E.done;M++,E=p.next())E=S(T,y,M,E.value,m),E!==null&&(e&&E.alternate!==null&&T.delete(E.key===null?M:E.key),g=i(E,g,M),L===null?C=E:L.sibling=E,L=E);return e&&T.forEach(function(ee){return t(y,ee)}),Ne&&wr(y,M),C}function N(y,g,p,m){if(typeof p=="object"&&p!==null&&p.type===es&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case to:e:{for(var C=p.key,L=g;L!==null;){if(L.key===C){if(C=p.type,C===es){if(L.tag===7){n(y,L.sibling),g=s(L,p.props.children),g.return=y,y=g;break e}}else if(L.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===zn&&pf(C)===L.type){n(y,L.sibling),g=s(L,p.props),g.ref=Ys(y,L,p),g.return=y,y=g;break e}n(y,L);break}else t(y,L);L=L.sibling}p.type===es?(g=zr(p.props.children,y.mode,m,p.key),g.return=y,y=g):(m=_o(p.type,p.key,p.props,null,y.mode,m),m.ref=Ys(y,g,p),m.return=y,y=m)}return o(y);case Zr:e:{for(L=p.key;g!==null;){if(g.key===L)if(g.tag===4&&g.stateNode.containerInfo===p.containerInfo&&g.stateNode.implementation===p.implementation){n(y,g.sibling),g=s(g,p.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else t(y,g);g=g.sibling}g=Ma(p,y.mode,m),g.return=y,y=g}return o(y);case zn:return L=p._init,N(y,g,L(p._payload),m)}if(ti(p))return k(y,g,p,m);if(Hs(p))return b(y,g,p,m);ho(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,g!==null&&g.tag===6?(n(y,g.sibling),g=s(g,p),g.return=y,y=g):(n(y,g),g=ja(p,y.mode,m),g.return=y,y=g),o(y)):n(y,g)}return N}var Os=am(!0),um=am(!1),nl=fr(null),rl=null,as=null,Lc=null;function Tc(){Lc=as=rl=null}function Ic(e){var t=nl.current;Ee(nl),e._currentValue=t}function mu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ms(e,t){rl=e,Lc=as=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(kt=!0),e.firstContext=null)}function Ut(e){var t=e._currentValue;if(Lc!==e)if(e={context:e,memoizedValue:t,next:null},as===null){if(rl===null)throw Error(D(308));as=e,rl.dependencies={lanes:0,firstContext:e}}else as=as.next=e;return t}var Cr=null;function _c(e){Cr===null?Cr=[e]:Cr.push(e)}function cm(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,_c(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ln(e,r)}function Ln(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var An=!1;function Pc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ln(e,n)}return s=r.interleaved,s===null?(t.next=t,_c(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ln(e,n)}function jo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xc(e,n)}}function mf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sl(e,t,n,r){var s=e.updateQueue;An=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?i=c:o.next=c,o=a;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=a))}if(i!==null){var d=s.baseState;o=0,f=c=a=null,l=i;do{var v=l.lane,S=l.eventTime;if((r&v)===v){f!==null&&(f=f.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=e,b=l;switch(v=t,S=n,b.tag){case 1:if(k=b.payload,typeof k=="function"){d=k.call(S,d,v);break e}d=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=b.payload,v=typeof k=="function"?k.call(S,d,v):k,v==null)break e;d=Te({},d,v);break e;case 2:An=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else S={eventTime:S,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=S,a=d):f=f.next=S,o|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(f===null&&(a=d),s.baseState=a,s.firstBaseUpdate=c,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Br|=o,e.lanes=o,e.memoizedState=d}}function gf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var Qi={},dn=fr(Qi),ji=fr(Qi),Mi=fr(Qi);function Er(e){if(e===Qi)throw Error(D(174));return e}function Oc(e,t){switch(Se(Mi,t),Se(ji,e),Se(dn,Qi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ya(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ya(t,e)}Ee(dn),Se(dn,t)}function Fs(){Ee(dn),Ee(ji),Ee(Mi)}function fm(e){Er(Mi.current);var t=Er(dn.current),n=Ya(t,e.type);t!==n&&(Se(ji,e),Se(dn,n))}function Fc(e){ji.current===e&&(Ee(dn),Ee(ji))}var Re=fr(0);function il(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Sa=[];function Dc(){for(var e=0;e<Sa.length;e++)Sa[e]._workInProgressVersionPrimary=null;Sa.length=0}var Mo=In.ReactCurrentDispatcher,ka=In.ReactCurrentBatchConfig,Ur=0,Le=null,He=null,Ge=null,ol=!1,di=!1,Ri=0,m0=0;function nt(){throw Error(D(321))}function zc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zt(e[n],t[n]))return!1;return!0}function Ac(e,t,n,r,s,i){if(Ur=i,Le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Mo.current=e===null||e.memoizedState===null?x0:w0,e=n(r,s),di){i=0;do{if(di=!1,Ri=0,25<=i)throw Error(D(301));i+=1,Ge=He=null,t.updateQueue=null,Mo.current=S0,e=n(r,s)}while(di)}if(Mo.current=ll,t=He!==null&&He.next!==null,Ur=0,Ge=He=Le=null,ol=!1,t)throw Error(D(300));return e}function $c(){var e=Ri!==0;return Ri=0,e}function rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Le.memoizedState=Ge=e:Ge=Ge.next=e,Ge}function Bt(){if(He===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=Ge===null?Le.memoizedState:Ge.next;if(t!==null)Ge=t,He=e;else{if(e===null)throw Error(D(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ge===null?Le.memoizedState=Ge=e:Ge=Ge.next=e}return Ge}function Li(e,t){return typeof t=="function"?t(e):t}function Ca(e){var t=Bt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=He,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,a=null,c=i;do{var f=c.lane;if((Ur&f)===f)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,Le.lanes|=f,Br|=f}c=c.next}while(c!==null&&c!==i);a===null?o=r:a.next=l,Zt(r,t.memoizedState)||(kt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Le.lanes|=i,Br|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ea(e){var t=Bt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Zt(i,t.memoizedState)||(kt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function hm(){}function pm(e,t){var n=Le,r=Bt(),s=t(),i=!Zt(r.memoizedState,s);if(i&&(r.memoizedState=s,kt=!0),r=r.queue,Uc(vm.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,Ti(9,gm.bind(null,n,r,s,t),void 0,null),Ye===null)throw Error(D(349));Ur&30||mm(n,t,s)}return s}function mm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function gm(e,t,n,r){t.value=n,t.getSnapshot=r,ym(t)&&xm(e)}function vm(e,t,n){return n(function(){ym(t)&&xm(e)})}function ym(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zt(e,n)}catch{return!0}}function xm(e){var t=Ln(e,1);t!==null&&Jt(t,e,1,-1)}function vf(e){var t=rn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:e},t.queue=e,e=e.dispatch=y0.bind(null,Le,e),[t.memoizedState,e]}function Ti(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function wm(){return Bt().memoizedState}function Ro(e,t,n,r){var s=rn();Le.flags|=e,s.memoizedState=Ti(1|t,n,void 0,r===void 0?null:r)}function jl(e,t,n,r){var s=Bt();r=r===void 0?null:r;var i=void 0;if(He!==null){var o=He.memoizedState;if(i=o.destroy,r!==null&&zc(r,o.deps)){s.memoizedState=Ti(t,n,i,r);return}}Le.flags|=e,s.memoizedState=Ti(1|t,n,i,r)}function yf(e,t){return Ro(8390656,8,e,t)}function Uc(e,t){return jl(2048,8,e,t)}function Sm(e,t){return jl(4,2,e,t)}function km(e,t){return jl(4,4,e,t)}function Cm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Em(e,t,n){return n=n!=null?n.concat([e]):null,jl(4,4,Cm.bind(null,t,e),n)}function Bc(){}function bm(e,t){var n=Bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Nm(e,t){var n=Bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function jm(e,t,n){return Ur&21?(Zt(n,t)||(n=Ip(),Le.lanes|=n,Br|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,kt=!0),e.memoizedState=n)}function g0(e,t){var n=ye;ye=n!==0&&4>n?n:4,e(!0);var r=ka.transition;ka.transition={};try{e(!1),t()}finally{ye=n,ka.transition=r}}function Mm(){return Bt().memoizedState}function v0(e,t,n){var r=ir(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Rm(e))Lm(t,n);else if(n=cm(e,t,n,r),n!==null){var s=mt();Jt(n,e,r,s),Tm(n,t,r)}}function y0(e,t,n){var r=ir(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Rm(e))Lm(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Zt(l,o)){var a=t.interleaved;a===null?(s.next=s,_c(t)):(s.next=a.next,a.next=s),t.interleaved=s;return}}catch{}finally{}n=cm(e,t,s,r),n!==null&&(s=mt(),Jt(n,e,r,s),Tm(n,t,r))}}function Rm(e){var t=e.alternate;return e===Le||t!==null&&t===Le}function Lm(e,t){di=ol=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Tm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xc(e,n)}}var ll={readContext:Ut,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},x0={readContext:Ut,useCallback:function(e,t){return rn().memoizedState=[e,t===void 0?null:t],e},useContext:Ut,useEffect:yf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ro(4194308,4,Cm.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ro(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ro(4,2,e,t)},useMemo:function(e,t){var n=rn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=rn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=v0.bind(null,Le,e),[r.memoizedState,e]},useRef:function(e){var t=rn();return e={current:e},t.memoizedState=e},useState:vf,useDebugValue:Bc,useDeferredValue:function(e){return rn().memoizedState=e},useTransition:function(){var e=vf(!1),t=e[0];return e=g0.bind(null,e[1]),rn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Le,s=rn();if(Ne){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),Ye===null)throw Error(D(349));Ur&30||mm(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,yf(vm.bind(null,r,i,e),[e]),r.flags|=2048,Ti(9,gm.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=rn(),t=Ye.identifierPrefix;if(Ne){var n=En,r=Cn;n=(r&~(1<<32-Xt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ri++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=m0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},w0={readContext:Ut,useCallback:bm,useContext:Ut,useEffect:Uc,useImperativeHandle:Em,useInsertionEffect:Sm,useLayoutEffect:km,useMemo:Nm,useReducer:Ca,useRef:wm,useState:function(){return Ca(Li)},useDebugValue:Bc,useDeferredValue:function(e){var t=Bt();return jm(t,He.memoizedState,e)},useTransition:function(){var e=Ca(Li)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:hm,useSyncExternalStore:pm,useId:Mm,unstable_isNewReconciler:!1},S0={readContext:Ut,useCallback:bm,useContext:Ut,useEffect:Uc,useImperativeHandle:Em,useInsertionEffect:Sm,useLayoutEffect:km,useMemo:Nm,useReducer:Ea,useRef:wm,useState:function(){return Ea(Li)},useDebugValue:Bc,useDeferredValue:function(e){var t=Bt();return He===null?t.memoizedState=e:jm(t,He.memoizedState,e)},useTransition:function(){var e=Ea(Li)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:hm,useSyncExternalStore:pm,useId:Mm,unstable_isNewReconciler:!1};function Vt(e,t){if(e&&e.defaultProps){t=Te({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function gu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Te({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ml={isMounted:function(e){return(e=e._reactInternals)?Kr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=mt(),s=ir(e),i=bn(r,s);i.payload=t,n!=null&&(i.callback=n),t=rr(e,i,s),t!==null&&(Jt(t,e,s,r),jo(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=mt(),s=ir(e),i=bn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=rr(e,i,s),t!==null&&(Jt(t,e,s,r),jo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mt(),r=ir(e),s=bn(n,r);s.tag=2,t!=null&&(s.callback=t),t=rr(e,s,r),t!==null&&(Jt(t,e,r,n),jo(t,e,r))}};function xf(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ci(n,r)||!Ci(s,i):!0}function Im(e,t,n){var r=!1,s=cr,i=t.contextType;return typeof i=="object"&&i!==null?i=Ut(i):(s=Et(t)?Ar:it.current,r=t.contextTypes,i=(r=r!=null)?_s(e,s):cr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ml,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function wf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ml.enqueueReplaceState(t,t.state,null)}function vu(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Pc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Ut(i):(i=Et(t)?Ar:it.current,s.context=_s(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(gu(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ml.enqueueReplaceState(s,s.state,null),sl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ds(e,t){try{var n="",r=t;do n+=Yv(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function ba(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function yu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var k0=typeof WeakMap=="function"?WeakMap:Map;function _m(e,t,n){n=bn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ul||(ul=!0,Mu=r),yu(e,t)},n}function Pm(e,t,n){n=bn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){yu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){yu(e,t),typeof r!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Sf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new k0;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=F0.bind(null,e,t,n),t.then(e,e))}function kf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Cf(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bn(-1,1),t.tag=2,rr(n,t,1))),n.lanes|=1),e)}var C0=In.ReactCurrentOwner,kt=!1;function ht(e,t,n,r){t.child=e===null?um(t,null,n,r):Os(t,e.child,n,r)}function Ef(e,t,n,r,s){n=n.render;var i=t.ref;return ms(t,s),r=Ac(e,t,n,r,i,s),n=$c(),e!==null&&!kt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tn(e,t,s)):(Ne&&n&&jc(t),t.flags|=1,ht(e,t,r,s),t.child)}function bf(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!qc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Om(e,t,i,r,s)):(e=_o(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ci,n(o,r)&&e.ref===t.ref)return Tn(e,t,s)}return t.flags|=1,e=or(i,r),e.ref=t.ref,e.return=t,t.child=e}function Om(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ci(i,r)&&e.ref===t.ref)if(kt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(kt=!0);else return t.lanes=e.lanes,Tn(e,t,s)}return xu(e,t,n,r,s)}function Fm(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(cs,Mt),Mt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Se(cs,Mt),Mt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Se(cs,Mt),Mt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Se(cs,Mt),Mt|=r;return ht(e,t,s,n),t.child}function Dm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xu(e,t,n,r,s){var i=Et(n)?Ar:it.current;return i=_s(t,i),ms(t,s),n=Ac(e,t,n,r,i,s),r=$c(),e!==null&&!kt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tn(e,t,s)):(Ne&&r&&jc(t),t.flags|=1,ht(e,t,n,s),t.child)}function Nf(e,t,n,r,s){if(Et(n)){var i=!0;Zo(t)}else i=!1;if(ms(t,s),t.stateNode===null)Lo(e,t),Im(t,n,r),vu(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ut(c):(c=Et(n)?Ar:it.current,c=_s(t,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&wf(t,o,r,c),An=!1;var v=t.memoizedState;o.state=v,sl(t,r,o,s),a=t.memoizedState,l!==r||v!==a||Ct.current||An?(typeof f=="function"&&(gu(t,n,f,r),a=t.memoizedState),(l=An||xf(t,n,l,r,v,a,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,dm(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Vt(t.type,l),o.props=c,d=t.pendingProps,v=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Ut(a):(a=Et(n)?Ar:it.current,a=_s(t,a));var S=n.getDerivedStateFromProps;(f=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||v!==a)&&wf(t,o,r,a),An=!1,v=t.memoizedState,o.state=v,sl(t,r,o,s);var k=t.memoizedState;l!==d||v!==k||Ct.current||An?(typeof S=="function"&&(gu(t,n,S,r),k=t.memoizedState),(c=An||xf(t,n,c,r,v,k,a)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),o.props=r,o.state=k,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return wu(e,t,n,r,i,s)}function wu(e,t,n,r,s,i){Dm(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&df(t,n,!1),Tn(e,t,i);r=t.stateNode,C0.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Os(t,e.child,null,i),t.child=Os(t,null,l,i)):ht(e,t,l,i),t.memoizedState=r.state,s&&df(t,n,!0),t.child}function zm(e){var t=e.stateNode;t.pendingContext?cf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&cf(e,t.context,!1),Oc(e,t.containerInfo)}function jf(e,t,n,r,s){return Ps(),Rc(s),t.flags|=256,ht(e,t,n,r),t.child}var Su={dehydrated:null,treeContext:null,retryLane:0};function ku(e){return{baseLanes:e,cachePool:null,transitions:null}}function Am(e,t,n){var r=t.pendingProps,s=Re.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Se(Re,s&1),e===null)return pu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Tl(o,r,0,null),e=zr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ku(n),t.memoizedState=Su,e):Wc(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return E0(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=or(s,a),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=or(l,i):(i=zr(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?ku(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Su,r}return i=e.child,e=i.sibling,r=or(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Wc(e,t){return t=Tl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function po(e,t,n,r){return r!==null&&Rc(r),Os(t,e.child,null,n),e=Wc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function E0(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=ba(Error(D(422))),po(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Tl({mode:"visible",children:r.children},s,0,null),i=zr(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Os(t,e.child,null,o),t.child.memoizedState=ku(o),t.memoizedState=Su,i);if(!(t.mode&1))return po(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(D(419)),r=ba(i,r,void 0),po(e,t,o,r)}if(l=(o&e.childLanes)!==0,kt||l){if(r=Ye,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ln(e,s),Jt(r,e,s,-1))}return Yc(),r=ba(Error(D(421))),po(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=D0.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Rt=nr(s.nextSibling),Lt=t,Ne=!0,qt=null,e!==null&&(Ft[Dt++]=Cn,Ft[Dt++]=En,Ft[Dt++]=$r,Cn=e.id,En=e.overflow,$r=t),t=Wc(t,r.children),t.flags|=4096,t)}function Mf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),mu(e.return,t,n)}function Na(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function $m(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(ht(e,t,r.children,n),r=Re.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mf(e,n,t);else if(e.tag===19)Mf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Se(Re,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&il(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Na(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&il(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Na(t,!0,n,null,i);break;case"together":Na(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Lo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Br|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=or(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=or(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function b0(e,t,n){switch(t.tag){case 3:zm(t),Ps();break;case 5:fm(t);break;case 1:Et(t.type)&&Zo(t);break;case 4:Oc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Se(nl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Se(Re,Re.current&1),t.flags|=128,null):n&t.child.childLanes?Am(e,t,n):(Se(Re,Re.current&1),e=Tn(e,t,n),e!==null?e.sibling:null);Se(Re,Re.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return $m(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Se(Re,Re.current),r)break;return null;case 22:case 23:return t.lanes=0,Fm(e,t,n)}return Tn(e,t,n)}var Um,Cu,Bm,Wm;Um=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cu=function(){};Bm=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Er(dn.current);var i=null;switch(n){case"input":s=Va(e,s),r=Va(e,r),i=[];break;case"select":s=Te({},s,{value:void 0}),r=Te({},r,{value:void 0}),i=[];break;case"textarea":s=Ga(e,s),r=Ga(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Xo)}qa(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(gi.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var a=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(i||(i=[]),i.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(gi.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Ce("scroll",e),i||l===a||(i=[])):(i=i||[]).push(c,a))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Wm=function(e,t,n,r){n!==r&&(t.flags|=4)};function qs(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function N0(e,t,n){var r=t.pendingProps;switch(Mc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(t),null;case 1:return Et(t.type)&&Jo(),rt(t),null;case 3:return r=t.stateNode,Fs(),Ee(Ct),Ee(it),Dc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(fo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qt!==null&&(Tu(qt),qt=null))),Cu(e,t),rt(t),null;case 5:Fc(t);var s=Er(Mi.current);if(n=t.type,e!==null&&t.stateNode!=null)Bm(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return rt(t),null}if(e=Er(dn.current),fo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[un]=t,r[Ni]=i,e=(t.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(s=0;s<ri.length;s++)Ce(ri[s],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Fd(r,i),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ce("invalid",r);break;case"textarea":zd(r,i),Ce("invalid",r)}qa(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&co(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&co(r.textContent,l,e),s=["children",""+l]):gi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":no(r),Dd(r,i,!0);break;case"textarea":no(r),Ad(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Xo)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=vp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[un]=t,e[Ni]=r,Um(e,t,!1,!1),t.stateNode=e;e:{switch(o=Xa(n,r),n){case"dialog":Ce("cancel",e),Ce("close",e),s=r;break;case"iframe":case"object":case"embed":Ce("load",e),s=r;break;case"video":case"audio":for(s=0;s<ri.length;s++)Ce(ri[s],e);s=r;break;case"source":Ce("error",e),s=r;break;case"img":case"image":case"link":Ce("error",e),Ce("load",e),s=r;break;case"details":Ce("toggle",e),s=r;break;case"input":Fd(e,r),s=Va(e,r),Ce("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Te({},r,{value:void 0}),Ce("invalid",e);break;case"textarea":zd(e,r),s=Ga(e,r),Ce("invalid",e);break;default:s=r}qa(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?wp(e,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&yp(e,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&vi(e,a):typeof a=="number"&&vi(e,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(gi.hasOwnProperty(i)?a!=null&&i==="onScroll"&&Ce("scroll",e):a!=null&&hc(e,i,a,o))}switch(n){case"input":no(e),Dd(e,r,!1);break;case"textarea":no(e),Ad(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ur(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ds(e,!!r.multiple,i,!1):r.defaultValue!=null&&ds(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Xo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return rt(t),null;case 6:if(e&&t.stateNode!=null)Wm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=Er(Mi.current),Er(dn.current),fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[un]=t,(i=r.nodeValue!==n)&&(e=Lt,e!==null))switch(e.tag){case 3:co(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&co(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=t,t.stateNode=r}return rt(t),null;case 13:if(Ee(Re),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&Rt!==null&&t.mode&1&&!(t.flags&128))lm(),Ps(),t.flags|=98560,i=!1;else if(i=fo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(D(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[un]=t}else Ps(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;rt(t),i=!1}else qt!==null&&(Tu(qt),qt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Re.current&1?Qe===0&&(Qe=3):Yc())),t.updateQueue!==null&&(t.flags|=4),rt(t),null);case 4:return Fs(),Cu(e,t),e===null&&Ei(t.stateNode.containerInfo),rt(t),null;case 10:return Ic(t.type._context),rt(t),null;case 17:return Et(t.type)&&Jo(),rt(t),null;case 19:if(Ee(Re),i=t.memoizedState,i===null)return rt(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)qs(i,!1);else{if(Qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=il(e),o!==null){for(t.flags|=128,qs(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Se(Re,Re.current&1|2),t.child}e=e.sibling}i.tail!==null&&$e()>zs&&(t.flags|=128,r=!0,qs(i,!1),t.lanes=4194304)}else{if(!r)if(e=il(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),qs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ne)return rt(t),null}else 2*$e()-i.renderingStartTime>zs&&n!==1073741824&&(t.flags|=128,r=!0,qs(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=$e(),t.sibling=null,n=Re.current,Se(Re,r?n&1|2:n&1),t):(rt(t),null);case 22:case 23:return Gc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Mt&1073741824&&(rt(t),t.subtreeFlags&6&&(t.flags|=8192)):rt(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function j0(e,t){switch(Mc(t),t.tag){case 1:return Et(t.type)&&Jo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fs(),Ee(Ct),Ee(it),Dc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Fc(t),null;case 13:if(Ee(Re),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Ps()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ee(Re),null;case 4:return Fs(),null;case 10:return Ic(t.type._context),null;case 22:case 23:return Gc(),null;case 24:return null;default:return null}}var mo=!1,st=!1,M0=typeof WeakSet=="function"?WeakSet:Set,Y=null;function us(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(e,t,r)}else n.current=null}function Eu(e,t,n){try{n()}catch(r){Fe(e,t,r)}}var Rf=!1;function R0(e,t){if(lu=Go,e=Gp(),Nc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,f=0,d=e,v=null;t:for(;;){for(var S;d!==n||s!==0&&d.nodeType!==3||(l=o+s),d!==i||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(S=d.firstChild)!==null;)v=d,d=S;for(;;){if(d===e)break t;if(v===n&&++c===s&&(l=o),v===i&&++f===r&&(a=o),(S=d.nextSibling)!==null)break;d=v,v=d.parentNode}d=S}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(au={focusedElem:e,selectionRange:n},Go=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var b=k.memoizedProps,N=k.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?b:Vt(t.type,b),N);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(m){Fe(t,t.return,m)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return k=Rf,Rf=!1,k}function fi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Eu(t,n,i)}s=s.next}while(s!==r)}}function Rl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function bu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Hm(e){var t=e.alternate;t!==null&&(e.alternate=null,Hm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[un],delete t[Ni],delete t[du],delete t[d0],delete t[f0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Vm(e){return e.tag===5||e.tag===3||e.tag===4}function Lf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Nu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Xo));else if(r!==4&&(e=e.child,e!==null))for(Nu(e,t,n),e=e.sibling;e!==null;)Nu(e,t,n),e=e.sibling}function ju(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ju(e,t,n),e=e.sibling;e!==null;)ju(e,t,n),e=e.sibling}var qe=null,Yt=!1;function On(e,t,n){for(n=n.child;n!==null;)Qm(e,t,n),n=n.sibling}function Qm(e,t,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Sl,n)}catch{}switch(n.tag){case 5:st||us(n,t);case 6:var r=qe,s=Yt;qe=null,On(e,t,n),qe=r,Yt=s,qe!==null&&(Yt?(e=qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Yt?(e=qe,n=n.stateNode,e.nodeType===8?xa(e.parentNode,n):e.nodeType===1&&xa(e,n),Si(e)):xa(qe,n.stateNode));break;case 4:r=qe,s=Yt,qe=n.stateNode.containerInfo,Yt=!0,On(e,t,n),qe=r,Yt=s;break;case 0:case 11:case 14:case 15:if(!st&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Eu(n,t,o),s=s.next}while(s!==r)}On(e,t,n);break;case 1:if(!st&&(us(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Fe(n,t,l)}On(e,t,n);break;case 21:On(e,t,n);break;case 22:n.mode&1?(st=(r=st)||n.memoizedState!==null,On(e,t,n),st=r):On(e,t,n);break;default:On(e,t,n)}}function Tf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new M0),t.forEach(function(r){var s=z0.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Wt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:qe=l.stateNode,Yt=!1;break e;case 3:qe=l.stateNode.containerInfo,Yt=!0;break e;case 4:qe=l.stateNode.containerInfo,Yt=!0;break e}l=l.return}if(qe===null)throw Error(D(160));Qm(i,o,s),qe=null,Yt=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(c){Fe(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Km(t,e),t=t.sibling}function Km(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Wt(t,e),nn(e),r&4){try{fi(3,e,e.return),Rl(3,e)}catch(b){Fe(e,e.return,b)}try{fi(5,e,e.return)}catch(b){Fe(e,e.return,b)}}break;case 1:Wt(t,e),nn(e),r&512&&n!==null&&us(n,n.return);break;case 5:if(Wt(t,e),nn(e),r&512&&n!==null&&us(n,n.return),e.flags&32){var s=e.stateNode;try{vi(s,"")}catch(b){Fe(e,e.return,b)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&mp(s,i),Xa(l,o);var c=Xa(l,i);for(o=0;o<a.length;o+=2){var f=a[o],d=a[o+1];f==="style"?wp(s,d):f==="dangerouslySetInnerHTML"?yp(s,d):f==="children"?vi(s,d):hc(s,f,d,c)}switch(l){case"input":Qa(s,i);break;case"textarea":gp(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?ds(s,!!i.multiple,S,!1):v!==!!i.multiple&&(i.defaultValue!=null?ds(s,!!i.multiple,i.defaultValue,!0):ds(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ni]=i}catch(b){Fe(e,e.return,b)}}break;case 6:if(Wt(t,e),nn(e),r&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(b){Fe(e,e.return,b)}}break;case 3:if(Wt(t,e),nn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Si(t.containerInfo)}catch(b){Fe(e,e.return,b)}break;case 4:Wt(t,e),nn(e);break;case 13:Wt(t,e),nn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Qc=$e())),r&4&&Tf(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(st=(c=st)||f,Wt(t,e),st=c):Wt(t,e),nn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(Y=e,f=e.child;f!==null;){for(d=Y=f;Y!==null;){switch(v=Y,S=v.child,v.tag){case 0:case 11:case 14:case 15:fi(4,v,v.return);break;case 1:us(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(b){Fe(r,n,b)}}break;case 5:us(v,v.return);break;case 22:if(v.memoizedState!==null){_f(d);continue}}S!==null?(S.return=v,Y=S):_f(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=xp("display",o))}catch(b){Fe(e,e.return,b)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(b){Fe(e,e.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Wt(t,e),nn(e),r&4&&Tf(e);break;case 21:break;default:Wt(t,e),nn(e)}}function nn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Vm(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(vi(s,""),r.flags&=-33);var i=Lf(e);ju(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Lf(e);Nu(e,l,o);break;default:throw Error(D(161))}}catch(a){Fe(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function L0(e,t,n){Y=e,Gm(e)}function Gm(e,t,n){for(var r=(e.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||mo;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||st;l=mo;var c=st;if(mo=o,(st=a)&&!c)for(Y=s;Y!==null;)o=Y,a=o.child,o.tag===22&&o.memoizedState!==null?Pf(s):a!==null?(a.return=o,Y=a):Pf(s);for(;i!==null;)Y=i,Gm(i),i=i.sibling;Y=s,mo=l,st=c}If(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):If(e)}}function If(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:st||Rl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!st)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Vt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&gf(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}gf(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Si(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}st||t.flags&512&&bu(t)}catch(v){Fe(t,t.return,v)}}if(t===e){Y=null;break}if(n=t.sibling,n!==null){n.return=t.return,Y=n;break}Y=t.return}}function _f(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Y=n;break}Y=t.return}}function Pf(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Rl(4,t)}catch(a){Fe(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(a){Fe(t,s,a)}}var i=t.return;try{bu(t)}catch(a){Fe(t,i,a)}break;case 5:var o=t.return;try{bu(t)}catch(a){Fe(t,o,a)}}}catch(a){Fe(t,t.return,a)}if(t===e){Y=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Y=l;break}Y=t.return}}var T0=Math.ceil,al=In.ReactCurrentDispatcher,Hc=In.ReactCurrentOwner,$t=In.ReactCurrentBatchConfig,pe=0,Ye=null,Ue=null,Xe=0,Mt=0,cs=fr(0),Qe=0,Ii=null,Br=0,Ll=0,Vc=0,hi=null,St=null,Qc=0,zs=1/0,vn=null,ul=!1,Mu=null,sr=null,go=!1,Jn=null,cl=0,pi=0,Ru=null,To=-1,Io=0;function mt(){return pe&6?$e():To!==-1?To:To=$e()}function ir(e){return e.mode&1?pe&2&&Xe!==0?Xe&-Xe:p0.transition!==null?(Io===0&&(Io=Ip()),Io):(e=ye,e!==0||(e=window.event,e=e===void 0?16:Ap(e.type)),e):1}function Jt(e,t,n,r){if(50<pi)throw pi=0,Ru=null,Error(D(185));Wi(e,n,r),(!(pe&2)||e!==Ye)&&(e===Ye&&(!(pe&2)&&(Ll|=n),Qe===4&&Un(e,Xe)),bt(e,r),n===1&&pe===0&&!(t.mode&1)&&(zs=$e()+500,Nl&&hr()))}function bt(e,t){var n=e.callbackNode;py(e,t);var r=Ko(e,e===Ye?Xe:0);if(r===0)n!==null&&Bd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Bd(n),t===1)e.tag===0?h0(Of.bind(null,e)):sm(Of.bind(null,e)),u0(function(){!(pe&6)&&hr()}),n=null;else{switch(_p(r)){case 1:n=yc;break;case 4:n=Lp;break;case 16:n=Qo;break;case 536870912:n=Tp;break;default:n=Qo}n=ng(n,Ym.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ym(e,t){if(To=-1,Io=0,pe&6)throw Error(D(327));var n=e.callbackNode;if(gs()&&e.callbackNode!==n)return null;var r=Ko(e,e===Ye?Xe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=dl(e,r);else{t=r;var s=pe;pe|=2;var i=Xm();(Ye!==e||Xe!==t)&&(vn=null,zs=$e()+500,Dr(e,t));do try{P0();break}catch(l){qm(e,l)}while(!0);Tc(),al.current=i,pe=s,Ue!==null?t=0:(Ye=null,Xe=0,t=Qe)}if(t!==0){if(t===2&&(s=nu(e),s!==0&&(r=s,t=Lu(e,s))),t===1)throw n=Ii,Dr(e,0),Un(e,r),bt(e,$e()),n;if(t===6)Un(e,r);else{if(s=e.current.alternate,!(r&30)&&!I0(s)&&(t=dl(e,r),t===2&&(i=nu(e),i!==0&&(r=i,t=Lu(e,i))),t===1))throw n=Ii,Dr(e,0),Un(e,r),bt(e,$e()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:Sr(e,St,vn);break;case 3:if(Un(e,r),(r&130023424)===r&&(t=Qc+500-$e(),10<t)){if(Ko(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){mt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=cu(Sr.bind(null,e,St,vn),t);break}Sr(e,St,vn);break;case 4:if(Un(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Xt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*T0(r/1960))-r,10<r){e.timeoutHandle=cu(Sr.bind(null,e,St,vn),r);break}Sr(e,St,vn);break;case 5:Sr(e,St,vn);break;default:throw Error(D(329))}}}return bt(e,$e()),e.callbackNode===n?Ym.bind(null,e):null}function Lu(e,t){var n=hi;return e.current.memoizedState.isDehydrated&&(Dr(e,t).flags|=256),e=dl(e,t),e!==2&&(t=St,St=n,t!==null&&Tu(t)),e}function Tu(e){St===null?St=e:St.push.apply(St,e)}function I0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Zt(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Un(e,t){for(t&=~Vc,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Xt(t),r=1<<n;e[n]=-1,t&=~r}}function Of(e){if(pe&6)throw Error(D(327));gs();var t=Ko(e,0);if(!(t&1))return bt(e,$e()),null;var n=dl(e,t);if(e.tag!==0&&n===2){var r=nu(e);r!==0&&(t=r,n=Lu(e,r))}if(n===1)throw n=Ii,Dr(e,0),Un(e,t),bt(e,$e()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sr(e,St,vn),bt(e,$e()),null}function Kc(e,t){var n=pe;pe|=1;try{return e(t)}finally{pe=n,pe===0&&(zs=$e()+500,Nl&&hr())}}function Wr(e){Jn!==null&&Jn.tag===0&&!(pe&6)&&gs();var t=pe;pe|=1;var n=$t.transition,r=ye;try{if($t.transition=null,ye=1,e)return e()}finally{ye=r,$t.transition=n,pe=t,!(pe&6)&&hr()}}function Gc(){Mt=cs.current,Ee(cs)}function Dr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,a0(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(Mc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jo();break;case 3:Fs(),Ee(Ct),Ee(it),Dc();break;case 5:Fc(r);break;case 4:Fs();break;case 13:Ee(Re);break;case 19:Ee(Re);break;case 10:Ic(r.type._context);break;case 22:case 23:Gc()}n=n.return}if(Ye=e,Ue=e=or(e.current,null),Xe=Mt=t,Qe=0,Ii=null,Vc=Ll=Br=0,St=hi=null,Cr!==null){for(t=0;t<Cr.length;t++)if(n=Cr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Cr=null}return e}function qm(e,t){do{var n=Ue;try{if(Tc(),Mo.current=ll,ol){for(var r=Le.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ol=!1}if(Ur=0,Ge=He=Le=null,di=!1,Ri=0,Hc.current=null,n===null||n.return===null){Qe=1,Ii=t,Ue=null;break}e:{var i=e,o=n.return,l=n,a=t;if(t=Xe,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.lanes=v.lanes):(f.updateQueue=null,f.memoizedState=null)}var S=kf(o);if(S!==null){S.flags&=-257,Cf(S,o,l,i,t),S.mode&1&&Sf(i,c,t),t=S,a=c;var k=t.updateQueue;if(k===null){var b=new Set;b.add(a),t.updateQueue=b}else k.add(a);break e}else{if(!(t&1)){Sf(i,c,t),Yc();break e}a=Error(D(426))}}else if(Ne&&l.mode&1){var N=kf(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Cf(N,o,l,i,t),Rc(Ds(a,l));break e}}i=a=Ds(a,l),Qe!==4&&(Qe=2),hi===null?hi=[i]:hi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=_m(i,a,t);mf(i,y);break e;case 1:l=a;var g=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(sr===null||!sr.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var m=Pm(i,l,t);mf(i,m);break e}}i=i.return}while(i!==null)}Zm(n)}catch(C){t=C,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function Xm(){var e=al.current;return al.current=ll,e===null?ll:e}function Yc(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),Ye===null||!(Br&268435455)&&!(Ll&268435455)||Un(Ye,Xe)}function dl(e,t){var n=pe;pe|=2;var r=Xm();(Ye!==e||Xe!==t)&&(vn=null,Dr(e,t));do try{_0();break}catch(s){qm(e,s)}while(!0);if(Tc(),pe=n,al.current=r,Ue!==null)throw Error(D(261));return Ye=null,Xe=0,Qe}function _0(){for(;Ue!==null;)Jm(Ue)}function P0(){for(;Ue!==null&&!iy();)Jm(Ue)}function Jm(e){var t=tg(e.alternate,e,Mt);e.memoizedProps=e.pendingProps,t===null?Zm(e):Ue=t,Hc.current=null}function Zm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=j0(n,t),n!==null){n.flags&=32767,Ue=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qe=6,Ue=null;return}}else if(n=N0(n,t,Mt),n!==null){Ue=n;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);Qe===0&&(Qe=5)}function Sr(e,t,n){var r=ye,s=$t.transition;try{$t.transition=null,ye=1,O0(e,t,n,r)}finally{$t.transition=s,ye=r}return null}function O0(e,t,n,r){do gs();while(Jn!==null);if(pe&6)throw Error(D(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(my(e,i),e===Ye&&(Ue=Ye=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||go||(go=!0,ng(Qo,function(){return gs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=$t.transition,$t.transition=null;var o=ye;ye=1;var l=pe;pe|=4,Hc.current=null,R0(e,n),Km(n,e),t0(au),Go=!!lu,au=lu=null,e.current=n,L0(n),oy(),pe=l,ye=o,$t.transition=i}else e.current=n;if(go&&(go=!1,Jn=e,cl=s),i=e.pendingLanes,i===0&&(sr=null),uy(n.stateNode),bt(e,$e()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ul)throw ul=!1,e=Mu,Mu=null,e;return cl&1&&e.tag!==0&&gs(),i=e.pendingLanes,i&1?e===Ru?pi++:(pi=0,Ru=e):pi=0,hr(),null}function gs(){if(Jn!==null){var e=_p(cl),t=$t.transition,n=ye;try{if($t.transition=null,ye=16>e?16:e,Jn===null)var r=!1;else{if(e=Jn,Jn=null,cl=0,pe&6)throw Error(D(331));var s=pe;for(pe|=4,Y=e.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(Y=c;Y!==null;){var f=Y;switch(f.tag){case 0:case 11:case 15:fi(8,f,i)}var d=f.child;if(d!==null)d.return=f,Y=d;else for(;Y!==null;){f=Y;var v=f.sibling,S=f.return;if(Hm(f),f===c){Y=null;break}if(v!==null){v.return=S,Y=v;break}Y=S}}}var k=i.alternate;if(k!==null){var b=k.child;if(b!==null){k.child=null;do{var N=b.sibling;b.sibling=null,b=N}while(b!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fi(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Y=y;break e}Y=i.return}}var g=e.current;for(Y=g;Y!==null;){o=Y;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,Y=p;else e:for(o=g;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Rl(9,l)}}catch(C){Fe(l,l.return,C)}if(l===o){Y=null;break e}var m=l.sibling;if(m!==null){m.return=l.return,Y=m;break e}Y=l.return}}if(pe=s,hr(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Sl,e)}catch{}r=!0}return r}finally{ye=n,$t.transition=t}}return!1}function Ff(e,t,n){t=Ds(n,t),t=_m(e,t,1),e=rr(e,t,1),t=mt(),e!==null&&(Wi(e,1,t),bt(e,t))}function Fe(e,t,n){if(e.tag===3)Ff(e,e,n);else for(;t!==null;){if(t.tag===3){Ff(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sr===null||!sr.has(r))){e=Ds(n,e),e=Pm(t,e,1),t=rr(t,e,1),e=mt(),t!==null&&(Wi(t,1,e),bt(t,e));break}}t=t.return}}function F0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=mt(),e.pingedLanes|=e.suspendedLanes&n,Ye===e&&(Xe&n)===n&&(Qe===4||Qe===3&&(Xe&130023424)===Xe&&500>$e()-Qc?Dr(e,0):Vc|=n),bt(e,t)}function eg(e,t){t===0&&(e.mode&1?(t=io,io<<=1,!(io&130023424)&&(io=4194304)):t=1);var n=mt();e=Ln(e,t),e!==null&&(Wi(e,t,n),bt(e,n))}function D0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),eg(e,n)}function z0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),eg(e,n)}var tg;tg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ct.current)kt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return kt=!1,b0(e,t,n);kt=!!(e.flags&131072)}else kt=!1,Ne&&t.flags&1048576&&im(t,tl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Lo(e,t),e=t.pendingProps;var s=_s(t,it.current);ms(t,n),s=Ac(null,t,r,e,s,n);var i=$c();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Et(r)?(i=!0,Zo(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Pc(t),s.updater=Ml,t.stateNode=s,s._reactInternals=t,vu(t,r,e,n),t=wu(null,t,r,!0,i,n)):(t.tag=0,Ne&&i&&jc(t),ht(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Lo(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=$0(r),e=Vt(r,e),s){case 0:t=xu(null,t,r,e,n);break e;case 1:t=Nf(null,t,r,e,n);break e;case 11:t=Ef(null,t,r,e,n);break e;case 14:t=bf(null,t,r,Vt(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vt(r,s),xu(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vt(r,s),Nf(e,t,r,s,n);case 3:e:{if(zm(t),e===null)throw Error(D(387));r=t.pendingProps,i=t.memoizedState,s=i.element,dm(e,t),sl(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ds(Error(D(423)),t),t=jf(e,t,r,n,s);break e}else if(r!==s){s=Ds(Error(D(424)),t),t=jf(e,t,r,n,s);break e}else for(Rt=nr(t.stateNode.containerInfo.firstChild),Lt=t,Ne=!0,qt=null,n=um(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ps(),r===s){t=Tn(e,t,n);break e}ht(e,t,r,n)}t=t.child}return t;case 5:return fm(t),e===null&&pu(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,uu(r,s)?o=null:i!==null&&uu(r,i)&&(t.flags|=32),Dm(e,t),ht(e,t,o,n),t.child;case 6:return e===null&&pu(t),null;case 13:return Am(e,t,n);case 4:return Oc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Os(t,null,r,n):ht(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vt(r,s),Ef(e,t,r,s,n);case 7:return ht(e,t,t.pendingProps,n),t.child;case 8:return ht(e,t,t.pendingProps.children,n),t.child;case 12:return ht(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Se(nl,r._currentValue),r._currentValue=o,i!==null)if(Zt(i.value,o)){if(i.children===s.children&&!Ct.current){t=Tn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=bn(-1,n&-n),a.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?a.next=a:(a.next=f.next,f.next=a),c.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),mu(i.return,n,t),l.lanes|=n;break}a=a.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(D(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),mu(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ht(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ms(t,n),s=Ut(s),r=r(s),t.flags|=1,ht(e,t,r,n),t.child;case 14:return r=t.type,s=Vt(r,t.pendingProps),s=Vt(r.type,s),bf(e,t,r,s,n);case 15:return Om(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Vt(r,s),Lo(e,t),t.tag=1,Et(r)?(e=!0,Zo(t)):e=!1,ms(t,n),Im(t,r,s),vu(t,r,s,n),wu(null,t,r,!0,e,n);case 19:return $m(e,t,n);case 22:return Fm(e,t,n)}throw Error(D(156,t.tag))};function ng(e,t){return Rp(e,t)}function A0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(e,t,n,r){return new A0(e,t,n,r)}function qc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $0(e){if(typeof e=="function")return qc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mc)return 11;if(e===gc)return 14}return 2}function or(e,t){var n=e.alternate;return n===null?(n=At(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _o(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")qc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case es:return zr(n.children,s,i,t);case pc:o=8,s|=8;break;case Ua:return e=At(12,n,t,s|2),e.elementType=Ua,e.lanes=i,e;case Ba:return e=At(13,n,t,s),e.elementType=Ba,e.lanes=i,e;case Wa:return e=At(19,n,t,s),e.elementType=Wa,e.lanes=i,e;case fp:return Tl(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cp:o=10;break e;case dp:o=9;break e;case mc:o=11;break e;case gc:o=14;break e;case zn:o=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=At(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function zr(e,t,n,r){return e=At(7,e,r,t),e.lanes=n,e}function Tl(e,t,n,r){return e=At(22,e,r,t),e.elementType=fp,e.lanes=n,e.stateNode={isHidden:!1},e}function ja(e,t,n){return e=At(6,e,null,t),e.lanes=n,e}function Ma(e,t,n){return t=At(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function U0(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aa(0),this.expirationTimes=aa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aa(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Xc(e,t,n,r,s,i,o,l,a){return e=new U0(e,t,n,l,a),t===1?(t=1,i===!0&&(t|=8)):t=0,i=At(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pc(i),e}function B0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function rg(e){if(!e)return cr;e=e._reactInternals;e:{if(Kr(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(Et(n))return rm(e,n,t)}return t}function sg(e,t,n,r,s,i,o,l,a){return e=Xc(n,r,!0,e,s,i,o,l,a),e.context=rg(null),n=e.current,r=mt(),s=ir(n),i=bn(r,s),i.callback=t??null,rr(n,i,s),e.current.lanes=s,Wi(e,s,r),bt(e,r),e}function Il(e,t,n,r){var s=t.current,i=mt(),o=ir(s);return n=rg(n),t.context===null?t.context=n:t.pendingContext=n,t=bn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=rr(s,t,o),e!==null&&(Jt(e,s,o,i),jo(e,s,o)),o}function fl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Df(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Jc(e,t){Df(e,t),(e=e.alternate)&&Df(e,t)}function W0(){return null}var ig=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}_l.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));Il(e,t,null,null)};_l.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wr(function(){Il(null,e,null,null)}),t[Rn]=null}};function _l(e){this._internalRoot=e}_l.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$n.length&&t!==0&&t<$n[n].priority;n++);$n.splice(n,0,e),n===0&&zp(e)}};function ed(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function zf(){}function H0(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=fl(o);i.call(c)}}var o=sg(t,r,e,0,null,!1,!1,"",zf);return e._reactRootContainer=o,e[Rn]=o.current,Ei(e.nodeType===8?e.parentNode:e),Wr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=fl(a);l.call(c)}}var a=Xc(e,0,!1,null,null,!1,!1,"",zf);return e._reactRootContainer=a,e[Rn]=a.current,Ei(e.nodeType===8?e.parentNode:e),Wr(function(){Il(t,a,n,r)}),a}function Ol(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var a=fl(o);l.call(a)}}Il(t,o,e,s)}else o=H0(n,t,e,s,r);return fl(o)}Pp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ni(t.pendingLanes);n!==0&&(xc(t,n|1),bt(t,$e()),!(pe&6)&&(zs=$e()+500,hr()))}break;case 13:Wr(function(){var r=Ln(e,1);if(r!==null){var s=mt();Jt(r,e,1,s)}}),Jc(e,1)}};wc=function(e){if(e.tag===13){var t=Ln(e,134217728);if(t!==null){var n=mt();Jt(t,e,134217728,n)}Jc(e,134217728)}};Op=function(e){if(e.tag===13){var t=ir(e),n=Ln(e,t);if(n!==null){var r=mt();Jt(n,e,t,r)}Jc(e,t)}};Fp=function(){return ye};Dp=function(e,t){var n=ye;try{return ye=e,t()}finally{ye=n}};Za=function(e,t,n){switch(t){case"input":if(Qa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=bl(r);if(!s)throw Error(D(90));pp(r),Qa(r,s)}}}break;case"textarea":gp(e,n);break;case"select":t=n.value,t!=null&&ds(e,!!n.multiple,t,!1)}};Cp=Kc;Ep=Wr;var V0={usingClientEntryPoint:!1,Events:[Vi,ss,bl,Sp,kp,Kc]},Xs={findFiberByHostInstance:kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Q0={bundleType:Xs.bundleType,version:Xs.version,rendererPackageName:Xs.rendererPackageName,rendererConfig:Xs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:In.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=jp(e),e===null?null:e.stateNode},findFiberByHostInstance:Xs.findFiberByHostInstance||W0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vo.isDisabled&&vo.supportsFiber)try{Sl=vo.inject(Q0),cn=vo}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V0;It.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ed(t))throw Error(D(200));return B0(e,t,null,n)};It.createRoot=function(e,t){if(!ed(e))throw Error(D(299));var n=!1,r="",s=ig;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Xc(e,1,!1,null,null,n,!1,r,s),e[Rn]=t.current,Ei(e.nodeType===8?e.parentNode:e),new Zc(t)};It.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=jp(t),e=e===null?null:e.stateNode,e};It.flushSync=function(e){return Wr(e)};It.hydrate=function(e,t,n){if(!Pl(t))throw Error(D(200));return Ol(null,e,t,!0,n)};It.hydrateRoot=function(e,t,n){if(!ed(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=ig;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=sg(t,null,e,1,n??null,s,!1,i,o),e[Rn]=t.current,Ei(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new _l(t)};It.render=function(e,t,n){if(!Pl(t))throw Error(D(200));return Ol(null,e,t,!1,n)};It.unmountComponentAtNode=function(e){if(!Pl(e))throw Error(D(40));return e._reactRootContainer?(Wr(function(){Ol(null,null,e,!1,function(){e._reactRootContainer=null,e[Rn]=null})}),!0):!1};It.unstable_batchedUpdates=Kc;It.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Pl(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return Ol(e,t,n,!1,r)};It.version="18.3.1-next-f1338f8080-20240426";function og(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(og)}catch(e){console.error(e)}}og(),op.exports=It;var td=op.exports,lg,Af=td;lg=Af.createRoot,Af.hydrateRoot;var Bs=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},K0={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Bn,oc,zh,G0=(zh=class{constructor(){te(this,Bn,K0);te(this,oc,!1)}setTimeoutProvider(e){V(this,Bn,e)}setTimeout(e,t){return w(this,Bn).setTimeout(e,t)}clearTimeout(e){w(this,Bn).clearTimeout(e)}setInterval(e,t){return w(this,Bn).setInterval(e,t)}clearInterval(e){w(this,Bn).clearInterval(e)}},Bn=new WeakMap,oc=new WeakMap,zh),br=new G0;function Y0(e){setTimeout(e,0)}var Hr=typeof window>"u"||"Deno"in globalThis;function pt(){}function q0(e,t){return typeof e=="function"?e(t):e}function Iu(e){return typeof e=="number"&&e>=0&&e!==1/0}function ag(e,t){return Math.max(e+(t||0)-Date.now(),0)}function lr(e,t){return typeof e=="function"?e(t):e}function Ot(e,t){return typeof e=="function"?e(t):e}function $f(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==nd(o,t.options))return!1}else if(!_i(t.queryKey,o))return!1}if(n!=="all"){const a=t.isActive();if(n==="active"&&!a||n==="inactive"&&a)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function Uf(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Vr(t.options.mutationKey)!==Vr(i))return!1}else if(!_i(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function nd(e,t){return((t==null?void 0:t.queryKeyHashFn)||Vr)(e)}function Vr(e){return JSON.stringify(e,(t,n)=>_u(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function _i(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>_i(e[n],t[n])):!1}var X0=Object.prototype.hasOwnProperty;function ug(e,t){if(e===t)return e;const n=Bf(e)&&Bf(t);if(!n&&!(_u(e)&&_u(t)))return t;const s=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let a=0;for(let c=0;c<o;c++){const f=n?c:i[c],d=e[f],v=t[f];if(d===v){l[f]=d,(n?c<s:X0.call(e,f))&&a++;continue}if(d===null||v===null||typeof d!="object"||typeof v!="object"){l[f]=v;continue}const S=ug(d,v);l[f]=S,S===d&&a++}return s===o&&a===s?e:l}function hl(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Bf(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function _u(e){if(!Wf(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Wf(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Wf(e){return Object.prototype.toString.call(e)==="[object Object]"}function J0(e){return new Promise(t=>{br.setTimeout(t,e)})}function Pu(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?ug(e,t):t}function Z0(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function ex(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var rd=Symbol();function cg(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===rd?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function dg(e,t){return typeof e=="function"?e(...t):!!e}function tx(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var Mr,Wn,ws,Ah,nx=(Ah=class extends Bs{constructor(){super();te(this,Mr);te(this,Wn);te(this,ws);V(this,ws,t=>{if(!Hr&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){w(this,Wn)||this.setEventListener(w(this,ws))}onUnsubscribe(){var t;this.hasListeners()||((t=w(this,Wn))==null||t.call(this),V(this,Wn,void 0))}setEventListener(t){var n;V(this,ws,t),(n=w(this,Wn))==null||n.call(this),V(this,Wn,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){w(this,Mr)!==t&&(V(this,Mr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof w(this,Mr)=="boolean"?w(this,Mr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Mr=new WeakMap,Wn=new WeakMap,ws=new WeakMap,Ah),sd=new nx;function Ou(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var rx=Y0;function sx(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=rx;const i=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(a=>{n(a)})})})};return{batch:l=>{let a;t++;try{a=l()}finally{t--,t||o()}return a},batchCalls:l=>(...a)=>{i(()=>{l(...a)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Ve=sx(),Ss,Hn,ks,$h,ix=($h=class extends Bs{constructor(){super();te(this,Ss,!0);te(this,Hn);te(this,ks);V(this,ks,t=>{if(!Hr&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){w(this,Hn)||this.setEventListener(w(this,ks))}onUnsubscribe(){var t;this.hasListeners()||((t=w(this,Hn))==null||t.call(this),V(this,Hn,void 0))}setEventListener(t){var n;V(this,ks,t),(n=w(this,Hn))==null||n.call(this),V(this,Hn,t(this.setOnline.bind(this)))}setOnline(t){w(this,Ss)!==t&&(V(this,Ss,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return w(this,Ss)}},Ss=new WeakMap,Hn=new WeakMap,ks=new WeakMap,$h),pl=new ix;function ox(e){return Math.min(1e3*2**e,3e4)}function fg(e){return(e??"online")==="online"?pl.isOnline():!0}var Fu=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function hg(e){let t=!1,n=0,r;const s=Ou(),i=()=>s.status!=="pending",o=b=>{var N;if(!i()){const y=new Fu(b);v(y),(N=e.onCancel)==null||N.call(e,y)}},l=()=>{t=!0},a=()=>{t=!1},c=()=>sd.isFocused()&&(e.networkMode==="always"||pl.isOnline())&&e.canRun(),f=()=>fg(e.networkMode)&&e.canRun(),d=b=>{i()||(r==null||r(),s.resolve(b))},v=b=>{i()||(r==null||r(),s.reject(b))},S=()=>new Promise(b=>{var N;r=y=>{(i()||c())&&b(y)},(N=e.onPause)==null||N.call(e)}).then(()=>{var b;r=void 0,i()||(b=e.onContinue)==null||b.call(e)}),k=()=>{if(i())return;let b;const N=n===0?e.initialPromise:void 0;try{b=N??e.fn()}catch(y){b=Promise.reject(y)}Promise.resolve(b).then(d).catch(y=>{var L;if(i())return;const g=e.retry??(Hr?0:3),p=e.retryDelay??ox,m=typeof p=="function"?p(n,y):p,C=g===!0||typeof g=="number"&&n<g||typeof g=="function"&&g(n,y);if(t||!C){v(y);return}n++,(L=e.onFail)==null||L.call(e,n,y),J0(m).then(()=>c()?void 0:S()).then(()=>{t?v(y):k()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:a,canStart:f,start:()=>(f()?k():S().then(k),s)}}var Rr,Uh,pg=(Uh=class{constructor(){te(this,Rr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Iu(this.gcTime)&&V(this,Rr,br.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Hr?1/0:5*60*1e3))}clearGcTimeout(){w(this,Rr)&&(br.clearTimeout(w(this,Rr)),V(this,Rr,void 0))}},Rr=new WeakMap,Uh),Lr,Cs,Pt,Tr,Ke,Di,Ir,Kt,gn,Bh,lx=(Bh=class extends pg{constructor(t){super();te(this,Kt);te(this,Lr);te(this,Cs);te(this,Pt);te(this,Tr);te(this,Ke);te(this,Di);te(this,Ir);V(this,Ir,!1),V(this,Di,t.defaultOptions),this.setOptions(t.options),this.observers=[],V(this,Tr,t.client),V(this,Pt,w(this,Tr).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,V(this,Lr,Vf(this.options)),this.state=t.state??w(this,Lr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=w(this,Ke))==null?void 0:t.promise}setOptions(t){if(this.options={...w(this,Di),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Vf(this.options);n.data!==void 0&&(this.setState(Hf(n.data,n.dataUpdatedAt)),V(this,Lr,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&w(this,Pt).remove(this)}setData(t,n){const r=Pu(this.state.data,t,this.options);return ae(this,Kt,gn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ae(this,Kt,gn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=w(this,Ke))==null?void 0:r.promise;return(s=w(this,Ke))==null||s.cancel(t),n?n.then(pt).catch(pt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(w(this,Lr))}isActive(){return this.observers.some(t=>Ot(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===rd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>lr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!ag(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=w(this,Ke))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=w(this,Ke))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),w(this,Pt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(w(this,Ke)&&(w(this,Ir)?w(this,Ke).cancel({revert:!0}):w(this,Ke).cancelRetry()),this.scheduleGc()),w(this,Pt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ae(this,Kt,gn).call(this,{type:"invalidate"})}async fetch(t,n){var a,c,f,d,v,S,k,b,N,y,g,p;if(this.state.fetchStatus!=="idle"&&((a=w(this,Ke))==null?void 0:a.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(w(this,Ke))return w(this,Ke).continueRetry(),w(this,Ke).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(C=>C.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(V(this,Ir,!0),r.signal)})},i=()=>{const m=cg(this.options,n),L=(()=>{const T={client:w(this,Tr),queryKey:this.queryKey,meta:this.meta};return s(T),T})();return V(this,Ir,!1),this.options.persister?this.options.persister(m,L,this):m(L)},l=(()=>{const m={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:w(this,Tr),state:this.state,fetchFn:i};return s(m),m})();(c=this.options.behavior)==null||c.onFetch(l,this),V(this,Cs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&ae(this,Kt,gn).call(this,{type:"fetch",meta:(d=l.fetchOptions)==null?void 0:d.meta}),V(this,Ke,hg({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:m=>{m instanceof Fu&&m.revert&&this.setState({...w(this,Cs),fetchStatus:"idle"}),r.abort()},onFail:(m,C)=>{ae(this,Kt,gn).call(this,{type:"failed",failureCount:m,error:C})},onPause:()=>{ae(this,Kt,gn).call(this,{type:"pause"})},onContinue:()=>{ae(this,Kt,gn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const m=await w(this,Ke).start();if(m===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(m),(S=(v=w(this,Pt).config).onSuccess)==null||S.call(v,m,this),(b=(k=w(this,Pt).config).onSettled)==null||b.call(k,m,this.state.error,this),m}catch(m){if(m instanceof Fu){if(m.silent)return w(this,Ke).promise;if(m.revert){if(this.state.data===void 0)throw m;return this.state.data}}throw ae(this,Kt,gn).call(this,{type:"error",error:m}),(y=(N=w(this,Pt).config).onError)==null||y.call(N,m,this),(p=(g=w(this,Pt).config).onSettled)==null||p.call(g,this.state.data,m,this),m}finally{this.scheduleGc()}}},Lr=new WeakMap,Cs=new WeakMap,Pt=new WeakMap,Tr=new WeakMap,Ke=new WeakMap,Di=new WeakMap,Ir=new WeakMap,Kt=new WeakSet,gn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...mg(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...Hf(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return V(this,Cs,t.manual?s:void 0),s;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Ve.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),w(this,Pt).notify({query:this,type:"updated",action:t})})},Bh);function mg(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:fg(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Hf(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Vf(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var xt,ce,zi,dt,_r,Es,xn,Vn,Ai,bs,Ns,Pr,Or,Qn,js,ve,si,Du,zu,Au,$u,Uu,Bu,Wu,gg,Wh,ax=(Wh=class extends Bs{constructor(t,n){super();te(this,ve);te(this,xt);te(this,ce);te(this,zi);te(this,dt);te(this,_r);te(this,Es);te(this,xn);te(this,Vn);te(this,Ai);te(this,bs);te(this,Ns);te(this,Pr);te(this,Or);te(this,Qn);te(this,js,new Set);this.options=n,V(this,xt,t),V(this,Vn,null),V(this,xn,Ou()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(w(this,ce).addObserver(this),Qf(w(this,ce),this.options)?ae(this,ve,si).call(this):this.updateResult(),ae(this,ve,$u).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Hu(w(this,ce),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Hu(w(this,ce),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ae(this,ve,Uu).call(this),ae(this,ve,Bu).call(this),w(this,ce).removeObserver(this)}setOptions(t){const n=this.options,r=w(this,ce);if(this.options=w(this,xt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ot(this.options.enabled,w(this,ce))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ae(this,ve,Wu).call(this),w(this,ce).setOptions(this.options),n._defaulted&&!hl(this.options,n)&&w(this,xt).getQueryCache().notify({type:"observerOptionsUpdated",query:w(this,ce),observer:this});const s=this.hasListeners();s&&Kf(w(this,ce),r,this.options,n)&&ae(this,ve,si).call(this),this.updateResult(),s&&(w(this,ce)!==r||Ot(this.options.enabled,w(this,ce))!==Ot(n.enabled,w(this,ce))||lr(this.options.staleTime,w(this,ce))!==lr(n.staleTime,w(this,ce)))&&ae(this,ve,Du).call(this);const i=ae(this,ve,zu).call(this);s&&(w(this,ce)!==r||Ot(this.options.enabled,w(this,ce))!==Ot(n.enabled,w(this,ce))||i!==w(this,Qn))&&ae(this,ve,Au).call(this,i)}getOptimisticResult(t){const n=w(this,xt).getQueryCache().build(w(this,xt),t),r=this.createResult(n,t);return cx(this,r)&&(V(this,dt,r),V(this,Es,this.options),V(this,_r,w(this,ce).state)),r}getCurrentResult(){return w(this,dt)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&w(this,xn).status==="pending"&&w(this,xn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){w(this,js).add(t)}getCurrentQuery(){return w(this,ce)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=w(this,xt).defaultQueryOptions(t),r=w(this,xt).getQueryCache().build(w(this,xt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ae(this,ve,si).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),w(this,dt)))}createResult(t,n){var I;const r=w(this,ce),s=this.options,i=w(this,dt),o=w(this,_r),l=w(this,Es),c=t!==r?t.state:w(this,zi),{state:f}=t;let d={...f},v=!1,S;if(n._optimisticResults){const E=this.hasListeners(),P=!E&&Qf(t,n),ee=E&&Kf(t,r,n,s);(P||ee)&&(d={...d,...mg(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:k,errorUpdatedAt:b,status:N}=d;S=d.data;let y=!1;if(n.placeholderData!==void 0&&S===void 0&&N==="pending"){let E;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(E=i.data,y=!0):E=typeof n.placeholderData=="function"?n.placeholderData((I=w(this,Ns))==null?void 0:I.state.data,w(this,Ns)):n.placeholderData,E!==void 0&&(N="success",S=Pu(i==null?void 0:i.data,E,n),v=!0)}if(n.select&&S!==void 0&&!y)if(i&&S===(o==null?void 0:o.data)&&n.select===w(this,Ai))S=w(this,bs);else try{V(this,Ai,n.select),S=n.select(S),S=Pu(i==null?void 0:i.data,S,n),V(this,bs,S),V(this,Vn,null)}catch(E){V(this,Vn,E)}w(this,Vn)&&(k=w(this,Vn),S=w(this,bs),b=Date.now(),N="error");const g=d.fetchStatus==="fetching",p=N==="pending",m=N==="error",C=p&&g,L=S!==void 0,M={status:N,fetchStatus:d.fetchStatus,isPending:p,isSuccess:N==="success",isError:m,isInitialLoading:C,isLoading:C,data:S,dataUpdatedAt:d.dataUpdatedAt,error:k,errorUpdatedAt:b,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:g,isRefetching:g&&!p,isLoadingError:m&&!L,isPaused:d.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:m&&L,isStale:id(t,n),refetch:this.refetch,promise:w(this,xn),isEnabled:Ot(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const E=ne=>{M.status==="error"?ne.reject(M.error):M.data!==void 0&&ne.resolve(M.data)},P=()=>{const ne=V(this,xn,M.promise=Ou());E(ne)},ee=w(this,xn);switch(ee.status){case"pending":t.queryHash===r.queryHash&&E(ee);break;case"fulfilled":(M.status==="error"||M.data!==ee.value)&&P();break;case"rejected":(M.status!=="error"||M.error!==ee.reason)&&P();break}}return M}updateResult(){const t=w(this,dt),n=this.createResult(w(this,ce),this.options);if(V(this,_r,w(this,ce).state),V(this,Es,this.options),w(this,_r).data!==void 0&&V(this,Ns,w(this,ce)),hl(n,t))return;V(this,dt,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!w(this,js).size)return!0;const o=new Set(i??w(this,js));return this.options.throwOnError&&o.add("error"),Object.keys(w(this,dt)).some(l=>{const a=l;return w(this,dt)[a]!==t[a]&&o.has(a)})};ae(this,ve,gg).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ae(this,ve,$u).call(this)}},xt=new WeakMap,ce=new WeakMap,zi=new WeakMap,dt=new WeakMap,_r=new WeakMap,Es=new WeakMap,xn=new WeakMap,Vn=new WeakMap,Ai=new WeakMap,bs=new WeakMap,Ns=new WeakMap,Pr=new WeakMap,Or=new WeakMap,Qn=new WeakMap,js=new WeakMap,ve=new WeakSet,si=function(t){ae(this,ve,Wu).call(this);let n=w(this,ce).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(pt)),n},Du=function(){ae(this,ve,Uu).call(this);const t=lr(this.options.staleTime,w(this,ce));if(Hr||w(this,dt).isStale||!Iu(t))return;const r=ag(w(this,dt).dataUpdatedAt,t)+1;V(this,Pr,br.setTimeout(()=>{w(this,dt).isStale||this.updateResult()},r))},zu=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(w(this,ce)):this.options.refetchInterval)??!1},Au=function(t){ae(this,ve,Bu).call(this),V(this,Qn,t),!(Hr||Ot(this.options.enabled,w(this,ce))===!1||!Iu(w(this,Qn))||w(this,Qn)===0)&&V(this,Or,br.setInterval(()=>{(this.options.refetchIntervalInBackground||sd.isFocused())&&ae(this,ve,si).call(this)},w(this,Qn)))},$u=function(){ae(this,ve,Du).call(this),ae(this,ve,Au).call(this,ae(this,ve,zu).call(this))},Uu=function(){w(this,Pr)&&(br.clearTimeout(w(this,Pr)),V(this,Pr,void 0))},Bu=function(){w(this,Or)&&(br.clearInterval(w(this,Or)),V(this,Or,void 0))},Wu=function(){const t=w(this,xt).getQueryCache().build(w(this,xt),this.options);if(t===w(this,ce))return;const n=w(this,ce);V(this,ce,t),V(this,zi,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},gg=function(t){Ve.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(w(this,dt))}),w(this,xt).getQueryCache().notify({query:w(this,ce),type:"observerResultsUpdated"})})},Wh);function ux(e,t){return Ot(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Qf(e,t){return ux(e,t)||e.state.data!==void 0&&Hu(e,t,t.refetchOnMount)}function Hu(e,t,n){if(Ot(t.enabled,e)!==!1&&lr(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&id(e,t)}return!1}function Kf(e,t,n,r){return(e!==t||Ot(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&id(e,n)}function id(e,t){return Ot(t.enabled,e)!==!1&&e.isStaleByTime(lr(t.staleTime,e))}function cx(e,t){return!hl(e.getCurrentResult(),t)}function Gf(e){return{onFetch:(t,n)=>{var f,d,v,S,k;const r=t.options,s=(v=(d=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:d.fetchMore)==null?void 0:v.direction,i=((S=t.state.data)==null?void 0:S.pages)||[],o=((k=t.state.data)==null?void 0:k.pageParams)||[];let l={pages:[],pageParams:[]},a=0;const c=async()=>{let b=!1;const N=p=>{tx(p,()=>t.signal,()=>b=!0)},y=cg(t.options,t.fetchOptions),g=async(p,m,C)=>{if(b)return Promise.reject();if(m==null&&p.pages.length)return Promise.resolve(p);const T=(()=>{const P={client:t.client,queryKey:t.queryKey,pageParam:m,direction:C?"backward":"forward",meta:t.options.meta};return N(P),P})(),M=await y(T),{maxPages:I}=t.options,E=C?ex:Z0;return{pages:E(p.pages,M,I),pageParams:E(p.pageParams,m,I)}};if(s&&i.length){const p=s==="backward",m=p?dx:Yf,C={pages:i,pageParams:o},L=m(r,C);l=await g(C,L,p)}else{const p=e??i.length;do{const m=a===0?o[0]??r.initialPageParam:Yf(r,l);if(a>0&&m==null)break;l=await g(l,m),a++}while(a<p)}return l};t.options.persister?t.fetchFn=()=>{var b,N;return(N=(b=t.options).persister)==null?void 0:N.call(b,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function Yf(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function dx(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var $i,sn,ft,Fr,on,Dn,Hh,fx=(Hh=class extends pg{constructor(t){super();te(this,on);te(this,$i);te(this,sn);te(this,ft);te(this,Fr);V(this,$i,t.client),this.mutationId=t.mutationId,V(this,ft,t.mutationCache),V(this,sn,[]),this.state=t.state||vg(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){w(this,sn).includes(t)||(w(this,sn).push(t),this.clearGcTimeout(),w(this,ft).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){V(this,sn,w(this,sn).filter(n=>n!==t)),this.scheduleGc(),w(this,ft).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){w(this,sn).length||(this.state.status==="pending"?this.scheduleGc():w(this,ft).remove(this))}continue(){var t;return((t=w(this,Fr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,a,c,f,d,v,S,k,b,N,y,g,p,m,C,L,T,M,I;const n=()=>{ae(this,on,Dn).call(this,{type:"continue"})},r={client:w(this,$i),meta:this.options.meta,mutationKey:this.options.mutationKey};V(this,Fr,hg({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(E,P)=>{ae(this,on,Dn).call(this,{type:"failed",failureCount:E,error:P})},onPause:()=>{ae(this,on,Dn).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>w(this,ft).canRun(this)}));const s=this.state.status==="pending",i=!w(this,Fr).canStart();try{if(s)n();else{ae(this,on,Dn).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=w(this,ft).config).onMutate)==null?void 0:l.call(o,t,this,r));const P=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,t,r));P!==this.state.context&&ae(this,on,Dn).call(this,{type:"pending",context:P,variables:t,isPaused:i})}const E=await w(this,Fr).start();return await((d=(f=w(this,ft).config).onSuccess)==null?void 0:d.call(f,E,t,this.state.context,this,r)),await((S=(v=this.options).onSuccess)==null?void 0:S.call(v,E,t,this.state.context,r)),await((b=(k=w(this,ft).config).onSettled)==null?void 0:b.call(k,E,null,this.state.variables,this.state.context,this,r)),await((y=(N=this.options).onSettled)==null?void 0:y.call(N,E,null,t,this.state.context,r)),ae(this,on,Dn).call(this,{type:"success",data:E}),E}catch(E){try{await((p=(g=w(this,ft).config).onError)==null?void 0:p.call(g,E,t,this.state.context,this,r))}catch(P){Promise.reject(P)}try{await((C=(m=this.options).onError)==null?void 0:C.call(m,E,t,this.state.context,r))}catch(P){Promise.reject(P)}try{await((T=(L=w(this,ft).config).onSettled)==null?void 0:T.call(L,void 0,E,this.state.variables,this.state.context,this,r))}catch(P){Promise.reject(P)}try{await((I=(M=this.options).onSettled)==null?void 0:I.call(M,void 0,E,t,this.state.context,r))}catch(P){Promise.reject(P)}throw ae(this,on,Dn).call(this,{type:"error",error:E}),E}finally{w(this,ft).runNext(this)}}},$i=new WeakMap,sn=new WeakMap,ft=new WeakMap,Fr=new WeakMap,on=new WeakSet,Dn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ve.batch(()=>{w(this,sn).forEach(r=>{r.onMutationUpdate(t)}),w(this,ft).notify({mutation:this,type:"updated",action:t})})},Hh);function vg(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var wn,Gt,Ui,Vh,hx=(Vh=class extends Bs{constructor(t={}){super();te(this,wn);te(this,Gt);te(this,Ui);this.config=t,V(this,wn,new Set),V(this,Gt,new Map),V(this,Ui,0)}build(t,n,r){const s=new fx({client:t,mutationCache:this,mutationId:++Zi(this,Ui)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){w(this,wn).add(t);const n=yo(t);if(typeof n=="string"){const r=w(this,Gt).get(n);r?r.push(t):w(this,Gt).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(w(this,wn).delete(t)){const n=yo(t);if(typeof n=="string"){const r=w(this,Gt).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&w(this,Gt).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=yo(t);if(typeof n=="string"){const r=w(this,Gt).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=yo(t);if(typeof n=="string"){const s=(r=w(this,Gt).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ve.batch(()=>{w(this,wn).forEach(t=>{this.notify({type:"removed",mutation:t})}),w(this,wn).clear(),w(this,Gt).clear()})}getAll(){return Array.from(w(this,wn))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Uf(n,r))}findAll(t={}){return this.getAll().filter(n=>Uf(t,n))}notify(t){Ve.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Ve.batch(()=>Promise.all(t.map(n=>n.continue().catch(pt))))}},wn=new WeakMap,Gt=new WeakMap,Ui=new WeakMap,Vh);function yo(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Sn,Kn,wt,kn,jn,Po,Vu,Qh,px=(Qh=class extends Bs{constructor(n,r){super();te(this,jn);te(this,Sn);te(this,Kn);te(this,wt);te(this,kn);V(this,Sn,n),this.setOptions(r),this.bindMethods(),ae(this,jn,Po).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=w(this,Sn).defaultMutationOptions(n),hl(this.options,r)||w(this,Sn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:w(this,wt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Vr(r.mutationKey)!==Vr(this.options.mutationKey)?this.reset():((s=w(this,wt))==null?void 0:s.state.status)==="pending"&&w(this,wt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=w(this,wt))==null||n.removeObserver(this)}onMutationUpdate(n){ae(this,jn,Po).call(this),ae(this,jn,Vu).call(this,n)}getCurrentResult(){return w(this,Kn)}reset(){var n;(n=w(this,wt))==null||n.removeObserver(this),V(this,wt,void 0),ae(this,jn,Po).call(this),ae(this,jn,Vu).call(this)}mutate(n,r){var s;return V(this,kn,r),(s=w(this,wt))==null||s.removeObserver(this),V(this,wt,w(this,Sn).getMutationCache().build(w(this,Sn),this.options)),w(this,wt).addObserver(this),w(this,wt).execute(n)}},Sn=new WeakMap,Kn=new WeakMap,wt=new WeakMap,kn=new WeakMap,jn=new WeakSet,Po=function(){var r;const n=((r=w(this,wt))==null?void 0:r.state)??vg();V(this,Kn,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Vu=function(n){Ve.batch(()=>{var r,s,i,o,l,a,c,f;if(w(this,kn)&&this.hasListeners()){const d=w(this,Kn).variables,v=w(this,Kn).context,S={client:w(this,Sn),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=w(this,kn)).onSuccess)==null||s.call(r,n.data,d,v,S)}catch(k){Promise.reject(k)}try{(o=(i=w(this,kn)).onSettled)==null||o.call(i,n.data,null,d,v,S)}catch(k){Promise.reject(k)}}else if((n==null?void 0:n.type)==="error"){try{(a=(l=w(this,kn)).onError)==null||a.call(l,n.error,d,v,S)}catch(k){Promise.reject(k)}try{(f=(c=w(this,kn)).onSettled)==null||f.call(c,void 0,n.error,d,v,S)}catch(k){Promise.reject(k)}}}this.listeners.forEach(d=>{d(w(this,Kn))})})},Qh),ln,Kh,mx=(Kh=class extends Bs{constructor(t={}){super();te(this,ln);this.config=t,V(this,ln,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??nd(s,n);let o=this.get(i);return o||(o=new lx({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){w(this,ln).has(t.queryHash)||(w(this,ln).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=w(this,ln).get(t.queryHash);n&&(t.destroy(),n===t&&w(this,ln).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ve.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return w(this,ln).get(t)}getAll(){return[...w(this,ln).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>$f(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>$f(t,r)):n}notify(t){Ve.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Ve.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ve.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ln=new WeakMap,Kh),Oe,Gn,Yn,Ms,Rs,qn,Ls,Ts,Gh,gx=(Gh=class{constructor(e={}){te(this,Oe);te(this,Gn);te(this,Yn);te(this,Ms);te(this,Rs);te(this,qn);te(this,Ls);te(this,Ts);V(this,Oe,e.queryCache||new mx),V(this,Gn,e.mutationCache||new hx),V(this,Yn,e.defaultOptions||{}),V(this,Ms,new Map),V(this,Rs,new Map),V(this,qn,0)}mount(){Zi(this,qn)._++,w(this,qn)===1&&(V(this,Ls,sd.subscribe(async e=>{e&&(await this.resumePausedMutations(),w(this,Oe).onFocus())})),V(this,Ts,pl.subscribe(async e=>{e&&(await this.resumePausedMutations(),w(this,Oe).onOnline())})))}unmount(){var e,t;Zi(this,qn)._--,w(this,qn)===0&&((e=w(this,Ls))==null||e.call(this),V(this,Ls,void 0),(t=w(this,Ts))==null||t.call(this),V(this,Ts,void 0))}isFetching(e){return w(this,Oe).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return w(this,Gn).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=w(this,Oe).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=w(this,Oe).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(lr(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return w(this,Oe).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=w(this,Oe).get(r.queryHash),i=s==null?void 0:s.state.data,o=q0(t,i);if(o!==void 0)return w(this,Oe).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Ve.batch(()=>w(this,Oe).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=w(this,Oe).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=w(this,Oe);Ve.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=w(this,Oe);return Ve.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Ve.batch(()=>w(this,Oe).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(pt).catch(pt)}invalidateQueries(e,t={}){return Ve.batch(()=>(w(this,Oe).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Ve.batch(()=>w(this,Oe).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(pt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(pt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=w(this,Oe).build(this,t);return n.isStaleByTime(lr(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(pt).catch(pt)}fetchInfiniteQuery(e){return e.behavior=Gf(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(pt).catch(pt)}ensureInfiniteQueryData(e){return e.behavior=Gf(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return pl.isOnline()?w(this,Gn).resumePausedMutations():Promise.resolve()}getQueryCache(){return w(this,Oe)}getMutationCache(){return w(this,Gn)}getDefaultOptions(){return w(this,Yn)}setDefaultOptions(e){V(this,Yn,e)}setQueryDefaults(e,t){w(this,Ms).set(Vr(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...w(this,Ms).values()],n={};return t.forEach(r=>{_i(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){w(this,Rs).set(Vr(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...w(this,Rs).values()],n={};return t.forEach(r=>{_i(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...w(this,Yn).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=nd(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===rd&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...w(this,Yn).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){w(this,Oe).clear(),w(this,Gn).clear()}},Oe=new WeakMap,Gn=new WeakMap,Yn=new WeakMap,Ms=new WeakMap,Rs=new WeakMap,qn=new WeakMap,Ls=new WeakMap,Ts=new WeakMap,Gh),yg=h.createContext(void 0),Gr=e=>{const t=h.useContext(yg);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},vx=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),u.jsx(yg.Provider,{value:e,children:t})),xg=h.createContext(!1),yx=()=>h.useContext(xg);xg.Provider;function xx(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var wx=h.createContext(xx()),Sx=()=>h.useContext(wx),kx=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Cx=e=>{h.useEffect(()=>{e.clearReset()},[e])},Ex=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||dg(n,[e.error,r])),bx=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Nx=(e,t)=>e.isLoading&&e.isFetching&&!t,jx=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,qf=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Mx(e,t,n){var d,v,S,k,b;const r=yx(),s=Sx(),i=Gr(),o=i.defaultQueryOptions(e);(v=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||v.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",bx(o),kx(o,s),Cx(s);const l=!i.getQueryCache().get(o.queryHash),[a]=h.useState(()=>new t(i,o)),c=a.getOptimisticResult(o),f=!r&&e.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(N=>{const y=f?a.subscribe(Ve.batchCalls(N)):pt;return a.updateResult(),y},[a,f]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),h.useEffect(()=>{a.setOptions(o)},[o,a]),jx(o,c))throw qf(o,a,s);if(Ex({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((k=(S=i.getDefaultOptions().queries)==null?void 0:S._experimental_afterQuery)==null||k.call(S,o,c),o.experimental_prefetchInRender&&!Hr&&Nx(c,r)){const N=l?qf(o,a,s):(b=i.getQueryCache().get(o.queryHash))==null?void 0:b.promise;N==null||N.catch(pt).finally(()=>{a.updateResult()})}return o.notifyOnChangeProps?c:a.trackResult(c)}function od(e,t){return Mx(e,ax)}function Rx(e,t){const n=Gr(),[r]=h.useState(()=>new px(n,e));h.useEffect(()=>{r.setOptions(e)},[r,e]);const s=h.useSyncExternalStore(h.useCallback(o=>r.subscribe(Ve.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=h.useCallback((o,l)=>{r.mutate(o,l).catch(pt)},[r]);if(s.error&&dg(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function Xf(e){return e.length>0&&"options"in e[0]}function Jf({value:e,onChange:t,options:n,placeholder:r="Select...",trigger:s,triggerClassName:i="",panelClassName:o="",align:l="left",width:a="auto",showChevron:c=!0,title:f,disabled:d=!1,"aria-label":v}){var M;const[S,k]=h.useState(!1),b=h.useRef(null),N=h.useRef(null),g=h.useCallback(()=>{const I=E=>{const P=E.find(ee=>ee.value===e);return P?P.label:null};if(Xf(n))for(const E of n){const P=I(E.options);if(P)return P}else{const E=I(n);if(E)return E}return r},[e,n,r])();h.useEffect(()=>{if(!S)return;const I=P=>{b.current&&!b.current.contains(P.target)&&k(!1)},E=P=>{var ee;P.key==="Escape"&&(k(!1),(ee=N.current)==null||ee.focus())};return window.addEventListener("click",I),window.addEventListener("keydown",E),()=>{window.removeEventListener("click",I),window.removeEventListener("keydown",E)}},[S]);const p=I=>{var E;t(I),k(!1),(E=N.current)==null||E.focus()},m=I=>I.map(E=>u.jsxs("button",{className:"dropdown-item","data-active":E.value===e,disabled:E.disabled,onClick:()=>!E.disabled&&p(E.value),role:"menuitem",children:[E.icon&&u.jsx("span",{className:"shrink-0",children:E.icon}),u.jsx("span",{className:"flex-1 truncate",children:E.label}),E.value===e&&u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 text-accent",children:u.jsx("polyline",{points:"20 6 9 17 4 12"})})]},E.value)),C=((M=N.current)==null?void 0:M.offsetWidth)??0,L=a==="trigger"?C:a==="auto"?void 0:a,T={...L?{width:L,minWidth:L}:{},...l==="right"?{right:0}:{left:0}};return u.jsxs("div",{ref:b,className:"relative",children:[s?u.jsx("div",{onClick:()=>!d&&k(I=>!I),children:s}):u.jsxs("button",{ref:N,type:"button",className:`dropdown-trigger ${i}`,onClick:()=>k(I=>!I),disabled:d,title:f,"aria-label":v,"aria-haspopup":"listbox","aria-expanded":S,children:[u.jsx("span",{className:"truncate",children:g}),c&&u.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`shrink-0 opacity-60 transition-transform ${S?"rotate-180":""}`,children:u.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),S&&u.jsx("div",{className:`dropdown-panel ${o}`,style:T,role:"listbox","aria-label":v,children:Xf(n)?n.map((I,E)=>u.jsxs("div",{children:[I.label&&u.jsx("div",{className:"dropdown-label",children:I.label}),m(I.options),E<n.length-1&&u.jsx("div",{className:"dropdown-divider"})]},I.label||E)):m(n)})]})}const Lx={offline:"sync-dot-offline",unstable:"sync-dot-unstable",recent:"sync-dot-recent",editing:"sync-dot-editing",live:"sync-dot-live"};function Tx({state:e,presence:t,syncLabel:n,connectionLabel:r,lastEditedLabel:s,hasEdits:i,isNarrow:o}){const[l,a]=h.useState(!1),c=h.useRef(null),f=h.useRef(null),d=h.useMemo(()=>t?`${t.viewing} viewing  ${t.editing} editing`:"- viewing  - editing",[t]),v=t?String(t.viewing):"-",S=h.useCallback(()=>{a(!1),window.requestAnimationFrame(()=>{var k;return(k=f.current)==null?void 0:k.focus()})},[]);return h.useEffect(()=>{if(!l)return;const k=N=>{!c.current||c.current.contains(N.target)||S()},b=N=>{N.key==="Escape"&&S()};return window.addEventListener("mousedown",k),window.addEventListener("keydown",b),()=>{window.removeEventListener("mousedown",k),window.removeEventListener("keydown",b)}},[l,S]),u.jsxs("div",{ref:c,className:"sync-indicator",children:[u.jsxs("button",{ref:f,type:"button",className:"sync-indicator-button",onClick:()=>l?S():a(!0),"aria-haspopup":"dialog","aria-expanded":l,"aria-label":"Sync status",title:d,children:[u.jsx("span",{className:`sync-indicator-dot ${Lx[e]}`,"aria-hidden":"true"}),!o&&u.jsx("span",{className:"sync-indicator-count tabular-nums",children:v})]}),l&&u.jsxs("div",{role:"dialog","aria-label":"Sync status",className:"sync-indicator-card",children:[u.jsx("div",{className:"sync-indicator-line sync-indicator-primary",children:n}),u.jsx("div",{className:"sync-indicator-line",children:r}),u.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:d}),u.jsx("div",{className:"sync-indicator-line sync-indicator-muted",children:i?`Last edited: ${s}`:"No edits yet."})]})]})}function Ix({rootRef:e,onSearch:t,viewerActive:n,onBack:r,zoomPercent:s,onZoomPercentChange:i,currentLabel:o,itemCount:l,totalCount:a,sortSpec:c,metricKeys:f,onSortChange:d,filterCount:v,onOpenFilters:S,starFilters:k,onToggleStar:b,onClearStars:N,onClearFilters:y,starCounts:g,viewMode:p,onViewMode:m,gridItemSize:C,onGridItemSize:L,leftOpen:T,rightOpen:M,onToggleLeft:I,onToggleRight:E,onPrevImage:P,onNextImage:ee,canPrevImage:ne,canNextImage:H,syncIndicator:Ie}){const[be,me]=h.useState(!1),[O,U]=h.useState(!1),[q,de]=h.useState(!1),Q=h.useRef(null),oe=h.useRef(null);h.useEffect(()=>{if(!be)return;const j=F=>{Q.current&&!Q.current.contains(F.target)&&me(!1)};return window.addEventListener("click",j),()=>window.removeEventListener("click",j)},[be]),h.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const j=window.matchMedia("(max-width: 900px)"),F=K=>U(K.matches);return U(j.matches),"addEventListener"in j?(j.addEventListener("change",F),()=>j.removeEventListener("change",F)):(j.addListener(F),()=>j.removeListener(F))},[]),h.useEffect(()=>{if(!O||n){de(!1);return}if(!q)return;const j=window.requestAnimationFrame(()=>{var F;return(F=oe.current)==null?void 0:F.focus()});return()=>window.cancelAnimationFrame(j)},[O,q,n]);const re=c??{kind:"builtin",key:"added",dir:"desc"},fe=re.dir,ke=re.kind==="builtin"&&re.key==="random",_e=f!=null&&f.length?f.map(j=>({value:`metric:${j}`,label:j})):[],ot=[{value:"builtin:added",label:"Date added"},{value:"builtin:name",label:"Filename"},{value:"builtin:random",label:"Random"},..._e],je=[{label:"Layout",options:[{value:"layout:grid",label:"Grid"},{value:"layout:masonry",label:"Masonry"}]},{label:"Sort by",options:ot}],lt=re.kind==="metric"?`metric:${re.key}`:`builtin:${re.key}`,pr=[{label:"Sort by",options:ot}],mr=O&&!n,gr=j=>{if(j.startsWith("layout:")){const F=j==="layout:masonry"?"adaptive":"grid";m==null||m(F)}else d==null||d(Zf(j,re))},hn=()=>{d&&d(ke?re:{...re,dir:fe==="desc"?"asc":"desc"})},en=k??[],vr=en.length,A=Px(v,vr),J=_x(l,a),Z=o||"Root";return u.jsxs("div",{ref:e,className:"toolbar-shell fixed top-0 left-0 right-0 h-12 grid grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] items-center px-3 gap-3 bg-panel border-b border-border z-[var(--z-toolbar)] col-span-full row-start-1 select-none",children:[u.jsxs("div",{className:"toolbar-left flex items-center gap-4 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[u.jsxs("div",{className:"flex flex-col min-w-0 leading-tight",children:[u.jsx("span",{className:"text-[10px] uppercase tracking-widest text-muted",children:"Scope"}),u.jsx("span",{className:"text-sm font-medium text-text truncate",title:Z,children:Z})]}),J&&u.jsx("span",{className:"toolbar-count text-xs text-muted whitespace-nowrap tabular-nums",children:J}),n&&u.jsxs("button",{className:"btn btn-sm",onClick:r,title:"Back to grid",children:[u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})]}),u.jsxs("div",{className:`toolbar-sort flex items-center gap-2 ${n?"opacity-40 pointer-events-none":""}`,children:[u.jsxs("div",{className:"toolbar-sort-controls flex items-center gap-2",children:[u.jsx(Jf,{value:lt,onChange:gr,options:je,title:"Sort and layout options","aria-label":"Sort and layout",triggerClassName:"min-w-[110px]"}),u.jsx("button",{className:"toolbar-sort-dir btn btn-icon",onClick:hn,title:ke?"Shuffle":`Sort ${fe==="desc"?"descending":"ascending"}`,"aria-label":ke?"Shuffle":"Toggle sort direction","aria-disabled":n,children:ke?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),u.jsx("path",{d:"M21 3v5h-5"})]}):fe==="desc"?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 5v14"}),u.jsx("path",{d:"M19 12l-7 7-7-7"})]}):u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 19V5"}),u.jsx("path",{d:"M5 12l7-7 7 7"})]})})]}),u.jsxs("div",{ref:Q,className:"toolbar-filter relative",children:[u.jsxs("button",{className:`btn ${A>0?"btn-active":""}`,onClick:()=>me(j=>!j),"aria-haspopup":"dialog","aria-expanded":be,title:"Filters","aria-disabled":n,children:[u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),u.jsx("span",{className:"toolbar-filters-label",children:"Filters"}),A>0&&u.jsx("span",{className:"toolbar-filters-count px-1.5 py-0.5 text-[11px] rounded-full bg-accent-strong text-text",children:A})]}),be&&u.jsxs("div",{role:"dialog","aria-label":"Filters",className:"dropdown-panel w-[240px]",style:{top:"38px",left:0},children:[u.jsx("div",{className:"dropdown-label",children:"Rating"}),u.jsxs("div",{className:"px-1",children:[[5,4,3,2,1].map(j=>{const F=en.includes(j),K=(g==null?void 0:g[String(j)])??0;return u.jsxs("button",{onClick:()=>b==null?void 0:b(j),className:`dropdown-item justify-between ${F?"bg-accent-muted":""}`,children:[u.jsxs("span",{className:F?"text-star-active":"text-text",children:["".repeat(j),"".repeat(5-j)]}),u.jsx("span",{className:"text-xs text-muted",children:K})]},j)}),u.jsxs("button",{onClick:()=>b==null?void 0:b(0),className:`dropdown-item justify-between ${en.includes(0)?"bg-accent-muted":""}`,children:[u.jsx("span",{className:"text-text",children:"Unrated"}),u.jsx("span",{className:"text-xs text-muted",children:(g==null?void 0:g["0"])??0})]})]}),u.jsx("div",{className:"dropdown-divider"}),u.jsx("div",{className:"dropdown-label",children:"Metrics"}),u.jsxs("button",{className:"dropdown-item",onClick:()=>{me(!1),S==null||S()},children:[u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M4 19V9"}),u.jsx("path",{d:"M10 19V5"}),u.jsx("path",{d:"M16 19v-7"}),u.jsx("path",{d:"M3 19h18"})]}),u.jsx("span",{children:"Open Metrics Panel"}),(v||0)>0&&u.jsxs("span",{className:"ml-auto text-xs text-muted",children:[v," active"]})]}),u.jsx("div",{className:"dropdown-divider"}),u.jsx("button",{className:"dropdown-item text-muted hover:text-text",onClick:()=>{y?y():N==null||N()},disabled:A===0,children:"Clear all filters"})]})]})]})]}),u.jsx("div",{className:"toolbar-center flex items-center gap-3 justify-center min-w-0",children:n?u.jsxs(u.Fragment,{children:[u.jsx("input",{type:"range",min:5,max:800,step:1,value:Math.round(Math.max(5,Math.min(800,s??100))),onChange:j=>i==null?void 0:i(Number(j.target.value)),className:"zoom-slider","aria-label":"Zoom level"}),u.jsxs("span",{className:"text-xs text-muted min-w-[42px] text-right",children:[Math.round(s??100),"%"]})]}):L&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs text-muted",children:"Size"}),u.jsx("input",{type:"range",min:80,max:500,step:10,value:C??220,onChange:j=>L(Number(j.target.value)),className:"w-28 h-1.5 bg-border rounded-full appearance-none cursor-pointer hover:bg-hover transition-colors [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-text [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-text [&::-moz-range-thumb]:border-0","aria-label":"Thumbnail size"})]})}),u.jsxs("div",{className:"toolbar-right flex items-center gap-2 justify-end",children:[u.jsxs("div",{className:`toolbar-nav flex items-center gap-1 mr-1 ${n?"":"opacity-0 pointer-events-none"}`,"aria-hidden":!n,children:[u.jsx("button",{className:`btn btn-icon ${ne?"":"opacity-40 cursor-not-allowed"}`,title:"Previous image (A / )",onClick:()=>ne&&(P==null?void 0:P()),"aria-label":"Previous image","aria-disabled":!ne,children:u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M15 18l-6-6 6-6"})})}),u.jsx("button",{className:`btn btn-icon ${H?"":"opacity-40 cursor-not-allowed"}`,title:"Next image (D / )",onClick:()=>H&&(ee==null?void 0:ee()),"aria-label":"Next image","aria-disabled":!H,children:u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M9 6l6 6-6 6"})})})]}),u.jsxs("div",{className:"toolbar-panels flex items-center gap-1",children:[u.jsx("button",{className:`btn btn-icon ${T?"":"opacity-50"}`,title:T?"Hide left panel (Ctrl+B)":"Show left panel (Ctrl+B)",onClick:I,"aria-pressed":T,"aria-label":"Toggle left panel",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"3",y:"5",width:"6",height:"14",rx:"1.5"}),u.jsx("rect",{x:"11",y:"5",width:"10",height:"14",rx:"1.5"})]})}),u.jsx("button",{className:`btn btn-icon ${M?"":"opacity-50"}`,title:M?"Hide right panel (Ctrl+Alt+B)":"Show right panel (Ctrl+Alt+B)",onClick:E,"aria-pressed":M,"aria-label":"Toggle right panel",children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"15",y:"5",width:"6",height:"14",rx:"1.5"}),u.jsx("rect",{x:"3",y:"5",width:"10",height:"14",rx:"1.5"})]})})]}),Ie&&u.jsx(Tx,{...Ie,isNarrow:O}),!n&&O&&u.jsx("button",{className:`btn btn-icon ${q?"btn-active":""}`,"aria-label":q?"Close search":"Open search",title:q?"Close search":"Search",onClick:()=>de(j=>!j),children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[u.jsx("circle",{cx:"11",cy:"11",r:"7"}),u.jsx("path",{d:"M21 21l-4.35-4.35"})]})}),!n&&!O?u.jsx("div",{className:"toolbar-search w-[240px]",children:u.jsx("input",{ref:oe,"aria-label":"Search filename, tags, notes",placeholder:"Search...",onChange:j=>t(j.target.value),className:"toolbar-search-input input h-8 w-full focus:w-full transition-all duration-200 rounded-lg px-3 border border-border bg-surface text-text placeholder:text-muted select-text"})}):n?u.jsx("div",{className:"toolbar-search w-[240px]","aria-hidden":"true"}):null]}),!n&&O&&q&&u.jsx("div",{className:"toolbar-search-row",children:u.jsx("input",{ref:oe,"aria-label":"Search filename, tags, notes",placeholder:"Search...",onChange:j=>t(j.target.value),className:"toolbar-search-input-mobile h-9 w-full rounded-lg px-3 border border-border bg-surface text-text placeholder:text-muted select-text"})}),mr&&u.jsx("div",{className:"mobile-drawer",children:u.jsxs("div",{className:"mobile-drawer-row",children:[u.jsxs("div",{className:"mobile-pill-group",children:[u.jsx("button",{className:`mobile-pill ${p==="grid"?"is-active":""}`,onClick:()=>m==null?void 0:m("grid"),"aria-pressed":p==="grid",children:"Grid"}),u.jsx("button",{className:`mobile-pill ${p==="adaptive"?"is-active":""}`,onClick:()=>m==null?void 0:m("adaptive"),"aria-pressed":p==="adaptive",children:"Masonry"})]}),u.jsx(Jf,{value:lt,onChange:j=>d==null?void 0:d(Zf(j,re)),options:pr,"aria-label":"Sort",triggerClassName:"mobile-pill mobile-pill-dropdown",panelClassName:"mobile-drawer-panel"}),u.jsx("button",{className:"mobile-pill mobile-pill-icon",onClick:hn,title:ke?"Shuffle":`Sort ${fe==="desc"?"descending":"ascending"}`,"aria-label":ke?"Shuffle":"Toggle sort direction",children:ke?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),u.jsx("path",{d:"M21 3v5h-5"})]}):fe==="desc"?u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 5v14"}),u.jsx("path",{d:"M19 12l-7 7-7-7"})]}):u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 19V5"}),u.jsx("path",{d:"M5 12l7-7 7 7"})]})})]})})]})}function _x(e,t){if(typeof e!="number")return null;const n=e.toLocaleString();if(typeof t!="number")return`${n} items`;const r=t.toLocaleString();return t===e?`${n} items`:`${n} / ${r} items`}function Px(e,t){return typeof e=="number"?e:t>0?1:0}function Zf(e,t){if(e.startsWith("metric:")){const n=e.slice(7);return n?{kind:"metric",key:n,dir:t.dir}:t}if(e.startsWith("builtin:")){const n=e.slice(8);if(n==="name"||n==="added"||n==="random")return{kind:"builtin",key:n,dir:t.dir}}return t}class ar extends Error{constructor(n,r,s,i){super(r);pn(this,"status");pn(this,"url");pn(this,"body");this.name="FetchError",this.status=n,this.url=s,this.body=i}}function Ox(e){const t=e.trim();return t.startsWith("{")||t.startsWith("[")}function wg(e,t,n){if(t&&typeof t=="object"){const r=t,s=typeof r.error=="string"?r.error:null,i=typeof r.message=="string"?r.message:null;if(s&&i)return`${s}: ${i}`;if(s)return s;if(i)return i}return typeof t=="string"&&t?t:`HTTP ${e} for ${n}`}function ct(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{let a=null;const c=await l.text().catch(()=>"");if(c)if((l.headers.get("content-type")||"").includes("application/json")||Ox(c))try{a=JSON.parse(c)}catch{a=c}else a=c;if(!l.ok)throw new ar(l.status,wg(l.status,a,e),e,a);return a}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}function xo(e,t={}){const{timeoutMs:n,...r}=t,s=new AbortController;let i;return n&&(i=window.setTimeout(()=>s.abort(),n)),{promise:fetch(e,{...r,signal:s.signal}).then(async l=>{if(!l.ok){const a=await l.text().catch(()=>""),c=a||null;throw new ar(l.status,wg(l.status,c,e),e,c)}return l.blob()}).finally(()=>{i&&window.clearTimeout(i)}),abort:()=>s.abort()}}class Sg{constructor(t){pn(this,"store",new Map);pn(this,"inflight",new Map);pn(this,"totalBytes",0);this.maxBytes=t}getMaxBytes(){return this.maxBytes}getTotalBytes(){return this.totalBytes}getSize(){return this.store.size}has(t){return this.store.has(t)}isInflight(t){return this.inflight.has(t)}get(t){const n=this.store.get(t);if(n)return this.store.delete(t),this.store.set(t,n),n.blob}evictIfNeeded(t){for(;this.totalBytes+t>this.maxBytes&&this.store.size>0;){const n=this.store.keys().next().value;if(n==null)break;const r=this.store.get(n);r&&(this.totalBytes-=r.size),this.store.delete(n)}}set(t,n){const r=n.size||0;if(!(r>this.maxBytes)){if(this.store.has(t)){const s=this.store.get(t);this.totalBytes-=s.size,this.store.delete(t)}this.evictIfNeeded(r),this.store.set(t,{blob:n,size:r}),this.totalBytes+=r}}async getOrFetch(t,n){const r=this.get(t);if(r)return r;const s=this.inflight.get(t);if(s)return s.promise;const i=n(),o=typeof i=="object"&&"promise"in i,l=o?i.promise:i,a=o?i.abort:void 0,c=l.then(f=>(this.set(t,f),f)).finally(()=>{this.inflight.delete(t)});return this.inflight.set(t,{promise:c,abort:a}),c}prefetch(t,n){if(this.store.has(t)||this.inflight.has(t))return;const r=n(),s=typeof r=="object"&&"promise"in r,i=s?r.promise:r,o=s?r.abort:void 0,l=i.then(a=>(this.set(t,a),a)).catch(()=>new Blob).finally(()=>{this.inflight.delete(t)});this.inflight.set(t,{promise:l,abort:o})}cancelPrefetch(t){const n=this.inflight.get(t);if(n!=null&&n.abort)try{n.abort()}catch{}this.inflight.delete(t)}clear(){for(const[t,n]of this.inflight)if(n.abort)try{n.abort()}catch{}this.inflight.clear(),this.store.clear(),this.totalBytes=0}evictPrefix(t){const n=(()=>{const s=t?`/${t.replace(/^\/+/,"")}`:"/";return s==="/"?"/":s.replace(/\/+$/,"")})(),r=s=>{const i=s.startsWith("/")?s.replace(/\/+$/,""):`/${s.replace(/\/+$/,"")}`;return n==="/"?!0:i===n||i.startsWith(`${n}/`)};for(const[s,i]of Array.from(this.store.entries()))r(s)&&(this.totalBytes-=i.size,this.store.delete(s));for(const[s,i]of Array.from(this.inflight.entries()))if(r(s)){if(i.abort)try{i.abort()}catch{}this.inflight.delete(s)}this.totalBytes<0&&(this.totalBytes=0)}}const Jr=new Sg(60*1024*1024),Qu=new Sg(20*1024*1024),Ra={};function Fx(){const e=Ra==null?void 0:Ra.VITE_API_BASE,t=typeof window<"u",n=t?window.location.origin:"http://localhost",r=t?window.location.hostname:"localhost",s=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\]|.+\.localhost)$/i.test(r);if(!e)return"";let i;try{i=new URL(e,n)}catch{return""}const o=/^(localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\])$/i.test(i.hostname);return s?i.origin:o?"":i.origin}const Ae=Fx();const Dx=40*1024*1024,eh="lenslet.client_id",kg="lenslet.last_event_id",zx=1e3,Ax=3e4,$x=5;let Js=null,Oo=null,th=0,vs=null,ys=0,Fl=!0,ml=!1;function Cg(){return typeof window<"u"&&typeof EventSource<"u"}function Fo(){if(Js)return Js;try{const e=window.localStorage.getItem(eh);if(e)return Js=e,e;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`;return window.localStorage.setItem(eh,t),Js=t,t}catch{const e=`client_${Math.random().toString(36).slice(2,10)}_${Date.now()}`;return Js=e,e}}function Pi(e="lenslet"){th+=1;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`nonce_${Math.random().toString(36).slice(2,10)}_${Date.now()}_${th}`;return`${e}:${Fo()}:${t}`}function Ux(){if(Oo!=null)return Oo;if(typeof window>"u")return null;try{const e=window.localStorage.getItem(kg);if(!e)return null;const t=Number(e);return!Number.isFinite(t)||t<=0?null:(Oo=t,t)}catch{return null}}function Bx(e){if(!(!Number.isFinite(e)||e<=0)&&(Oo=e,!(typeof window>"u")))try{window.localStorage.setItem(kg,String(e))}catch{}}function Wx(){if(typeof window>"u")return`${Ae}/events`;const e=new URL(`${Ae}/events`,window.location.origin),t=Ux();return t!=null&&Number.isFinite(t)&&e.searchParams.set("last_event_id",String(t)),e.toString()}function Hx(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}let Qt=null,Eg="idle";const Ku=new Set,Gu=new Set,Yu=new Set;function xs(e){Eg=e;for(const t of Gu)t(e)}function ld(e){if(ml!==e){ml=e;for(const t of Yu)t(e)}}function ad(){vs!=null&&(window.clearTimeout(vs),vs=null)}function Vx(){ys=0,ad()}function Qx(){if(!Fl||vs!=null)return;ys+=1;const e=Math.min(zx*Math.pow(2,ys-1),Ax);ys>=$x?(xs("offline"),ld(!0)):xs("reconnecting"),vs=window.setTimeout(()=>{vs=null,bg()},e)}function bg(){if(!Fl||!Cg()||(Qt&&Qt.readyState===EventSource.CLOSED&&(Qt.close(),Qt=null),Qt))return;ys>0?xs("reconnecting"):xs("connecting");const e=new EventSource(Wx());Qt=e;const t=n=>r=>{const s=Hx(r.data);if(!s)return;const i=r.lastEventId?Number(r.lastEventId):null,o=i!=null&&Number.isFinite(i)?i:null;o!=null&&Bx(o);for(const l of Ku)l({type:n,id:o,data:s})};e.addEventListener("item-updated",t("item-updated")),e.addEventListener("metrics-updated",t("metrics-updated")),e.addEventListener("presence",t("presence")),e.onopen=()=>{Vx(),ld(!1),xs("live")},e.onerror=()=>{Qt===e&&(e.close(),Qt=null,Qx())}}function Kx(){Fl=!0,Cg()&&(ad(),bg())}function Gx(){Fl=!1,ad(),ys=0,Qt&&(Qt.close(),Qt=null),ld(!1),xs("offline")}function Yx(e){return Ku.add(e),()=>{Ku.delete(e)}}function qx(e){return Gu.add(e),e(Eg),()=>{Gu.delete(e)}}function Xx(e){return Yu.add(e),e(ml),()=>{Yu.delete(e)}}function Jx(){return ml}const he={getFolder:(e,t)=>{const n=new URLSearchParams({path:e});return t!=null&&n.set("page",String(t)),ct(`${Ae}/folders?${n}`).promise},search:(e,t)=>{const n=new URLSearchParams;return e&&n.set("q",e),t&&n.set("path",t),ct(`${Ae}/search?${n}`).promise},refreshFolder:e=>{const t=new URLSearchParams({path:e});return ct(`${Ae}/refresh?${t}`,{method:"POST"}).promise},getSidecar:e=>ct(`${Ae}/item?path=${encodeURIComponent(e)}`).promise,patchSidecar:(e,t,n)=>{const s={"Content-Type":"application/json","Idempotency-Key":(n==null?void 0:n.idempotencyKey)??Pi("patch"),"x-client-id":Fo(),"x-updated-by":"web"};return(n==null?void 0:n.ifMatch)!=null&&(s["If-Match"]=String(n.ifMatch)),ct(`${Ae}/item?path=${encodeURIComponent(e)}`,{method:"PATCH",headers:s,body:JSON.stringify(t)}).promise},getMetadata:e=>ct(`${Ae}/metadata?path=${encodeURIComponent(e)}`).promise,putSidecar:(e,t)=>ct(`${Ae}/item?path=${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-client-id":Fo(),"x-updated-by":"web"},body:JSON.stringify(t)}).promise,getHealth:()=>ct(`${Ae}/health`).promise,postPresence:(e,t)=>ct(`${Ae}/presence`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gallery_id:e,client_id:t??Fo()})}).promise,getThumb:e=>Qu.getOrFetch(e,()=>xo(`${Ae}/thumb?path=${encodeURIComponent(e)}`)),prefetchThumb:e=>{Qu.prefetch(e,()=>xo(`${Ae}/thumb?path=${encodeURIComponent(e)}`))},getFile:e=>Jr.getOrFetch(e,()=>xo(`${Ae}/file?path=${encodeURIComponent(e)}`)),prefetchFile:async e=>{if(!(Jr.has(e)||Jr.isInflight(e)))try{const t=await xo(`${Ae}/file?path=${encodeURIComponent(e)}`).promise;t.size<=Dx&&Jr.set(e,t)}catch{}},cancelPrefetch:e=>{Jr.cancelPrefetch(e)},uploadFile:async(e,t)=>{const n=new FormData;return n.append("dest",e),n.append("file",t),ct(`${Ae}/file`,{method:"POST",body:n,timeoutMs:6e4}).promise},moveFile:async(e,t)=>{const n=new FormData;return n.append("src",e),n.append("dest",t),ct(`${Ae}/move`,{method:"POST",body:n}).promise},deleteFiles:async e=>ct(`${Ae}/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paths:e})}).promise,exportIntent:async e=>{const t=new FormData;return t.append("path",e),ct(`${Ae}/export-intent`,{method:"POST",body:t}).promise},getViews:()=>ct(`${Ae}/views`).promise,saveViews:e=>ct(`${Ae}/views`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).promise};class Zx{constructor(t=400){pn(this,"cache",new Map);pn(this,"maxSize");this.maxSize=t,typeof window<"u"&&window.addEventListener("beforeunload",()=>this.clear(),{once:!0})}get(t){const n=this.cache.get(t);return n&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){for(this.cache.has(t)&&this.cache.delete(t);this.cache.size>=this.maxSize;){const r=this.cache.keys().next().value;if(r===void 0)break;const s=this.cache.get(r);if(this.cache.delete(r),s)try{URL.revokeObjectURL(s)}catch{}}this.cache.set(t,n)}clear(){for(const t of this.cache.values())try{URL.revokeObjectURL(t)}catch{}this.cache.clear()}}const La=new Zx(400);function ew({path:e,name:t,onClick:n,selected:r,highlighted:s,displayW:i,displayH:o,ioRoot:l,isScrolling:a,priority:c}){const f=h.useRef(null),[d,v]=h.useState(()=>La.get(e)??null),[S,k]=h.useState(!1),[b,N]=h.useState(()=>!!d);return h.useEffect(()=>{const y=f.current;if(!y)return;const g=new IntersectionObserver(p=>{for(const m of p)m.target===y&&k(m.isIntersecting||m.intersectionRatio>0)},{root:l??null,rootMargin:"200px 0px",threshold:.01});return g.observe(y),()=>{g.unobserve(y),g.disconnect()}},[l]),h.useEffect(()=>{if(d||!(S&&!a||c))return;let y=!0;return he.getThumb(e).then(g=>{if(!y)return;const p=URL.createObjectURL(g);La.set(e,p),v(p)}).catch(()=>{}),()=>{y=!1}},[e,d,S,a,c]),h.useEffect(()=>{var g;if(!d){N(!1);return}const y=(g=f.current)==null?void 0:g.querySelector("img");y&&y.complete&&y.naturalWidth>0?N(!0):N(!1)},[d]),h.useEffect(()=>{v(La.get(e)??null)},[e]),u.jsx("div",{ref:f,className:`absolute inset-0 relative bg-hover border border-border rounded-lg overflow-hidden select-none ${r?"outline-2 outline-accent":""} ${s?"ring-2 ring-accent/60 animate-pulse":""} hover:outline hover:outline-1 hover:outline-accent`,onClick:n,children:d?u.jsx("img",{className:`w-full h-full object-cover block pointer-events-none select-none opacity-0 transition-opacity duration-[160ms] ${b?"opacity-100":""}`,src:d,alt:t,loading:"lazy",decoding:"async",onLoad:()=>N(!0),width:i?Math.round(i):void 0,height:o?Math.round(o):void 0}):null})}function qr(e,t,n){let r=n.initialDeps??[],s,i=!0;function o(){var l,a,c;let f;n.key&&((l=n.debug)!=null&&l.call(n))&&(f=Date.now());const d=e();if(!(d.length!==r.length||d.some((k,b)=>r[b]!==k)))return s;r=d;let S;if(n.key&&((a=n.debug)!=null&&a.call(n))&&(S=Date.now()),s=t(...d),n.key&&((c=n.debug)!=null&&c.call(n))){const k=Math.round((Date.now()-f)*100)/100,b=Math.round((Date.now()-S)*100)/100,N=b/16,y=(g,p)=>{for(g=String(g);g.length<p;)g=" "+g;return g};console.info(`%c ${y(b,5)} /${y(k,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*N,120))}deg 100% 31%);`,n==null?void 0:n.key)}return n!=null&&n.onChange&&!(i&&n.skipInitialOnChange)&&n.onChange(s),i=!1,s}return o.updateDeps=l=>{r=l},o}function nh(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const tw=(e,t)=>Math.abs(e-t)<1.01,nw=(e,t,n)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,s),n)}},rh=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},rw=e=>e,sw=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},iw=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const s=o=>{const{width:l,height:a}=o;t({width:Math.round(l),height:Math.round(a)})};if(s(rh(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const a=o[0];if(a!=null&&a.borderBoxSize){const c=a.borderBoxSize[0];if(c){s({width:c.inlineSize,height:c.blockSize});return}}s(rh(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},sh={passive:!0},ih=typeof window>"u"?!0:"onscrollend"in window,ow=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&ih?()=>{}:nw(r,()=>{t(s,!1)},e.options.isScrollingResetDelay),o=f=>()=>{const{horizontal:d,isRtl:v}=e.options;s=d?n.scrollLeft*(v&&-1||1):n.scrollTop,i(),t(s,f)},l=o(!0),a=o(!1);a(),n.addEventListener("scroll",l,sh);const c=e.options.useScrollendEvent&&ih;return c&&n.addEventListener("scrollend",a,sh),()=>{n.removeEventListener("scroll",l),c&&n.removeEventListener("scrollend",a)}},lw=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},aw=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const o=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class uw{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:rw,rangeExtractor:sw,onChange:()=>{},measureElement:lw,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=qr(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=n[o];if(s.has(l.lane))continue;const a=i.get(l.lane);if(a==null||l.end>a.end?i.set(l.lane,l):l.end<a.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=qr(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(n,r,s,i,o,l)=>(this.prevLanes!==void 0&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=qr(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o,lanes:l},a)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>n)for(const v of this.laneAssignments.keys())v>=n&&this.laneAssignments.delete(v);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(v=>{this.itemSizeCache.set(v.key,v.size)}));const c=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===n&&(this.lanesSettling=!1);const f=this.measurementsCache.slice(0,c),d=new Array(l).fill(void 0);for(let v=0;v<c;v++){const S=f[v];S&&(d[S.lane]=v)}for(let v=c;v<n;v++){const S=i(v),k=this.laneAssignments.get(v);let b,N;if(k!==void 0&&this.options.lanes>1){b=k;const m=d[b],C=m!==void 0?f[m]:void 0;N=C?C.end+this.options.gap:r+s}else{const m=this.options.lanes===1?f[v-1]:this.getFurthestMeasurement(f,v);N=m?m.end+this.options.gap:r+s,b=m?m.lane:v%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(v,b)}const y=a.get(S),g=typeof y=="number"?y:this.options.estimateSize(v),p=N+g;f[v]={index:v,start:N,size:g,end:p,key:S,lane:b},d[b]=v}return this.measurementsCache=f,f},{key:!1,debug:()=>this.options.debug}),this.calculateRange=qr(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?cw({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=qr(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,o)=>i===null||o===null?[]:n({startIndex:i,endIndex:o,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=qr(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,o=n.length;i<o;i++){const l=n[i],a=r[l];s.push(a)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return nh(r[Ng(0,r.length-1,s=>nh(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(s.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const o=10,l=c=>{if(!this.targetWindow)return;const f=this.getOffsetForIndex(n,c);if(!f){console.warn("Failed to get offset for index:",n);return}const[d,v]=f;this._scrollToOffset(d,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const S=this.getScrollOffset(),k=this.getOffsetForIndex(n,v);if(!k){console.warn("Failed to get offset for index:",n);return}tw(k[0],S)||a(v)})},a=c=>{this.targetWindow&&(i++,i<o?this.targetWindow.requestAnimationFrame(()=>l(c)):console.warn(`Failed to scroll to index ${n} after ${o} attempts.`))};l(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}s=Math.max(...i.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const Ng=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function cw({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const s=e.length-1,i=a=>e[a].start;if(e.length<=r)return{startIndex:0,endIndex:s};let o=Ng(0,s,i,n),l=o;if(r===1)for(;l<s&&e[l].end<n+t;)l++;else if(r>1){const a=Array(r).fill(0);for(;l<s&&a.some(f=>f<n+t);){const f=e[l];a[f.lane]=f.end,l++}const c=Array(r).fill(n+t);for(;o>=0&&c.some(f=>f>=n);){const f=e[o];c[f.lane]=f.start,o--}o=Math.max(0,o-o%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const oh=typeof document<"u"?h.useLayoutEffect:h.useEffect;function dw(e){const t=h.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var o;i?td.flushSync(t):t(),(o=e.onChange)==null||o.call(e,s,i)}},[r]=h.useState(()=>new uw(n));return r.setOptions(n),oh(()=>r._didMount(),[]),oh(()=>r._willUpdate()),r}function fw(e){return dw({observeElementRect:iw,observeElementOffset:ow,scrollToFn:aw,...e})}function hw({containerW:e,gap:t,targetCell:n,aspect:r,captionH:s}){const i=Math.max(1,Math.floor((e+t)/(n+t))),o=(e-t*(i-1))/i,l=o*r.h/r.w,a=l+s+t;return{columns:i,cellW:o,mediaH:l,rowH:a}}const pw=1.333;function mw({items:e,containerWidth:t,targetHeight:n,gap:r,captionH:s}){if(t<=0)return[];const i=[];let o=[],l=0;const a=(c,f)=>({index:i.length,height:f+s+r,imageH:f,items:c.map(d=>({item:d.item,displayW:d.aspect*f,displayH:f,originalIndex:d.originalIndex}))});for(let c=0;c<e.length;c++){const f=e[c],d=f.w>0&&f.h>0?f.w/f.h:pw;o.push({item:f,aspect:d,originalIndex:c}),l+=d;const v=(o.length-1)*r;if(l*n+v>=t){const k=(t-v)/l;i.push(a(o,k)),o=[],l=0}}return o.length>0&&i.push(a(o,n)),i}function gw(e,t,n){return{mode:"adaptive",rows:mw({items:t,containerWidth:e,targetHeight:n.targetCell,gap:n.gap,captionH:n.captionH})}}function vw(e,t,n){const{columns:r,cellW:s,mediaH:i,rowH:o}=hw({containerW:e,gap:n.gap,targetCell:n.targetCell,aspect:n.aspect,captionH:n.captionH}),l=Math.ceil(t.length/Math.max(1,r));return{mode:"grid",columns:r,cellW:s,mediaH:i,rowH:o,rowCount:l}}function yw(e,t,n){const[r,s]=h.useState(0);h.useLayoutEffect(()=>{const a=e.current;if(!a)return;const c=()=>{const d=getComputedStyle(a),v=a.clientWidth-parseFloat(d.paddingLeft)-parseFloat(d.paddingRight);s(v)},f=new ResizeObserver(c);return f.observe(a),c(),()=>f.disconnect()},[]);const i=h.useMemo(()=>n.viewMode==="adaptive"?gw(r,t,n):vw(r,t,n),[r,t,n.viewMode,n.gap,n.targetCell,n.aspect.w,n.aspect.h,n.captionH]),o=fw({count:i.mode==="adaptive"?i.rows.length:i.rowCount,getScrollElement:()=>e.current,estimateSize:a=>i.mode==="adaptive"?i.rows[a].height:i.rowH,overscan:8}),l=o.getVirtualItems();return h.useEffect(()=>{o.measure()},[i,o]),{width:r,layout:i,rowVirtualizer:o,virtualRows:l}}function xw(e,t,n,r){if(!e.length)return null;const s=n?e.findIndex(l=>l.path===n):0,i=Math.max(1,t);let o=s;if(r.key==="ArrowRight"||r.key==="d")o=Math.min(e.length-1,s+1);else if(r.key==="ArrowLeft"||r.key==="a")o=Math.max(0,s-1);else if(r.key==="ArrowDown"||r.key==="s")o=Math.min(e.length-1,s+i);else if(r.key==="ArrowUp"||r.key==="w")o=Math.max(0,s-i);else return r.key==="Enter"&&n?"open":null;return o}const mn=12,ww=44,Sw={w:4,h:3},kw=350,Cw=120;function Ew({items:e,selected:t,restoreToSelectionToken:n,onSelectionChange:r,onOpenViewer:s,onContextMenuItem:i,highlight:o,recentlyUpdated:l,suppressSelectionHighlight:a=!1,viewMode:c="grid",targetCellSize:f=220,scrollRef:d,hideScrollbar:v=!1}){const[S,k]=h.useState(null),[b,N]=h.useState(null),[y,g]=h.useState(!1),[p,m]=h.useState(null),[C,L]=h.useState(null),T=h.useRef(null),M=h.useRef(null),I=h.useRef(null),E=d??I,P=h.useRef(null),ee=f,{width:ne,layout:H,rowVirtualizer:Ie,virtualRows:be}=yw(E,e,{gap:mn,targetCell:ee,aspect:Sw,captionH:ww,viewMode:c}),me=h.useMemo(()=>{const A=new Map;for(let J=0;J<e.length;J++)A.set(e[J].path,J);return A},[e]),O=h.useMemo(()=>{if(H.mode!=="adaptive")return null;const A=new Map;return H.rows.forEach((J,Z)=>{let j=0;J.items.forEach((F,K)=>{const B=j+F.displayW/2;A.set(F.item.path,{row:Z,center:B,order:K}),j+=F.displayW+mn})}),A},[H]);h.useEffect(()=>{if(!t.length)return;const A=t[0];p!==A&&m(A)},[t,p]);const U=h.useMemo(()=>{if(H.mode!=="adaptive")return null;let A=0;return H.rows.map(J=>{const Z=A;return A+=J.height,{start:Z,height:J.height}})},[H]),q=h.useRef(null),de=(A,J)=>{try{if(q.current!=null){try{cancelAnimationFrame(q.current)}catch{}q.current=null}const Z=A.scrollTop,j=J-Z;if(Math.abs(j)<1){A.scrollTop=J;return}const F=140,K=performance.now(),B=ge=>1-Math.pow(1-ge,3),se=ge=>{const Pe=Math.min(1,(ge-K)/F),xe=B(Pe);A.scrollTop=Z+j*xe,Pe<1?q.current=requestAnimationFrame(se):q.current=null};q.current=requestAnimationFrame(se)}catch{A.scrollTop=J}},[Q,oe]=h.useState(!1);h.useEffect(()=>{const A=E.current;if(!A)return;let J=0;const Z=()=>{oe(!0),window.clearTimeout(J),J=window.setTimeout(()=>oe(!1),Cw)};return A.addEventListener("scroll",Z,{passive:!0}),()=>A.removeEventListener("scroll",Z)},[]);const re=()=>{M.current!=null&&(window.clearTimeout(M.current),M.current=null)},fe=()=>{if(re(),g(!1),k(null),T.current){try{URL.revokeObjectURL(T.current)}catch{}T.current=null}N(null)},ke=A=>{Q||(re(),k(A),g(!1),M.current=window.setTimeout(async()=>{M.current=null;try{const J=await he.getFile(A),Z=URL.createObjectURL(J);if(T.current)try{URL.revokeObjectURL(T.current)}catch{}T.current=Z,N(Z),g(!0)}catch{}},kw))},_e=H.mode==="grid"?H.columns:Math.max(1,Math.floor(ne/(ee+mn))),ot=(A,J)=>{if(H.mode!=="adaptive")return null;const Z=H.rows[A];if(!Z)return null;let j=0,F=null;for(const K of Z.items){const B=j+K.displayW/2,se=Math.abs(B-J);(!F||se<F.dist)&&(F={path:K.item.path,dist:se}),j+=K.displayW+mn}return F?F.path:null},je=(A,J)=>{var xe,at,we,yt;if(!e.length)return null;const Z=A??e[0].path;if(H.mode!=="adaptive"){const Me=xw(e,_e,Z,J);return Me==="open"||Me==null?Me:((xe=e[Me])==null?void 0:xe.path)??null}const j=O==null?void 0:O.get(Z);if(!j)return Z;const F=me.get(Z)??0,K=J.key;if(K==="Enter")return"open";if(K==="ArrowRight"||K==="d")return((at=e[Math.min(e.length-1,F+1)])==null?void 0:at.path)??Z;if(K==="ArrowLeft"||K==="a")return((we=e[Math.max(0,F-1)])==null?void 0:we.path)??Z;const B=K==="ArrowDown"||K==="s"?1:K==="ArrowUp"||K==="w"?-1:0;if(B===0)return null;const se=j.row+B;if(se<0||se>=(((yt=H.rows)==null?void 0:yt.length)??0))return Z;const ge=j.center;return ot(se,ge)??Z},lt=A=>{var J;try{(J=document.getElementById(`cell-${encodeURIComponent(A)}`))==null||J.focus()}catch{}},pr=A=>{try{he.prefetchFile(A),he.prefetchThumb(A)}catch{}},mr=(A,J)=>{m(A),L(A);const Z=!!J.shiftKey,j=!!(J.ctrlKey||J.metaKey);if(Z){const F=P.current??p??t[0]??A,K=me.get(F)??e.findIndex(se=>se.path===F),B=me.get(A)??e.findIndex(se=>se.path===A);if(K!==-1&&B!==-1){const se=Math.min(K,B),ge=Math.max(K,B),Pe=e.slice(se,ge+1).map(xe=>xe.path);if(j){const xe=new Set(t);for(const at of Pe)xe.add(at);r(Array.from(xe))}else r(Pe)}else r([A])}else if(j){const F=new Set(t);F.has(A)?F.delete(A):F.add(A),r(Array.from(F)),P.current=A}else r([A]),P.current=A;Q||pr(A),lt(A)},gr=(A,J)=>{var Z,j;try{const F=hn.has(A)&&t.length>0?t:[A];(Z=J.dataTransfer)==null||Z.setData("application/x-lenslet-paths",JSON.stringify(F)),J.dataTransfer&&(J.dataTransfer.effectAllowed="copyMove");try{document.body.classList.add("drag-active")}catch{}const B=J.currentTarget.querySelector(".cell-content img"),se=document.createElement("div");se.className="drag-ghost";const ge=document.createElement("img");ge.draggable=!1,ge.alt="drag",B&&B.src&&(ge.src=B.src),se.appendChild(ge),document.body.appendChild(se);const Pe=se.getBoundingClientRect().width||150;(j=J.dataTransfer)==null||j.setDragImage(se,Math.round(Pe/2),0);const xe=()=>{try{se.remove()}catch{}try{document.body.classList.remove("drag-active")}catch{}window.removeEventListener("dragend",xe),window.removeEventListener("pointerup",xe),document.removeEventListener("visibilitychange",xe)};window.addEventListener("dragend",xe),window.addEventListener("pointerup",xe),document.addEventListener("visibilitychange",xe)}catch{}};h.useEffect(()=>{const A=E.current;if(!A)return;const J=Z=>{var xe,at,we;const j=je(C,Z);if(j==null)return;if(Z.preventDefault(),j==="open"){C&&s(C);return}const F=e.find(yt=>yt.path===j);if(!F)return;L(F.path),m(F.path),r([F.path]);try{P.current=F.path}catch{}const K=H.mode==="grid"?Math.floor((me.get(F.path)??0)/Math.max(1,H.columns)):((xe=O==null?void 0:O.get(F.path))==null?void 0:xe.row)??0,B=A.scrollTop,se=B+A.clientHeight,ge=H.mode==="adaptive"?((at=U==null?void 0:U[K])==null?void 0:at.start)??0:K*H.rowH,Pe=H.mode==="adaptive"?ge+(((we=U==null?void 0:U[K])==null?void 0:we.height)??0):ge+H.rowH;(ge<B||Pe>se)&&de(A,ge),lt(F.path)};return A.addEventListener("keydown",J),()=>{A.removeEventListener("keydown",J)}},[e,C,_e,s,H,O,U,me]),h.useLayoutEffect(()=>{var K;const A=E.current;if(!A||!n||!t||t.length===0)return;const J=t[0],Z=me.get(J);if(Z==null||Z<0)return;let j=0;if(H.mode==="grid")j=Math.floor(Z/Math.max(1,H.columns));else{let B=0,se=H.rows.length-1;for(;B<=se;){const ge=B+se>>1,Pe=H.rows[ge];if(Z>=Pe.items[0].originalIndex&&Z<=Pe.items[Pe.items.length-1].originalIndex){j=ge;break}Z<Pe.items[0].originalIndex?se=ge-1:B=ge+1}}const F=H.mode==="adaptive"?((K=U==null?void 0:U[j])==null?void 0:K.start)??0:j*H.rowH;try{A.scrollTop=F}catch{}},[n,H,U]);const hn=h.useMemo(()=>new Set(t),[t]),en=!!(S&&b&&y);h.useEffect(()=>{var A;(A=E.current)==null||A.focus()},[]),h.useEffect(()=>{var A;if(a){try{(A=E.current)==null||A.blur()}catch{}try{L(null)}catch{}}},[a]);const vr=C?`cell-${encodeURIComponent(C)}`:void 0;return u.jsx("div",{role:"grid","aria-label":"Gallery",className:`relative h-full overflow-auto p-3 outline-none ${v?"scrollbar-hidden":"scrollbar-thin"} ${en?"cursor-zoom-in":""}`,ref:E,tabIndex:0,"aria-activedescendant":vr,onMouseDown:()=>{var A;return(A=E.current)==null?void 0:A.focus()},style:{"--gap":`${mn}px`},children:u.jsxs("div",{className:"relative w-full",style:{height:Ie.getTotalSize()},children:[be.map(A=>{var K;let J=[],Z={},j="";if(H.mode==="adaptive"){const B=H.rows[A.index];if(!B)return null;J=B.items,Z={height:B.height,transform:`translate3d(0, ${A.start}px, 0)`,display:"flex",gap:mn,paddingBottom:mn},j="absolute top-0 left-0 right-0 w-full will-change-transform"}else{const B=A.index*H.columns;J=e.slice(B,B+H.columns).map(ge=>({item:ge,displayW:H.cellW,displayH:H.mediaH})),Z={transform:`translate3d(0, ${A.start}px, 0)`,gridTemplateColumns:`repeat(${H.columns}, minmax(0, 1fr))`,gap:mn,paddingBottom:mn},j="absolute top-0 left-0 right-0 w-full grid will-change-transform"}const F=A.index===((K=be[0])==null?void 0:K.index);try{if(!Q)for(const{item:B}of J)try{he.prefetchThumb(B.path)}catch{}}catch{}return u.jsx("div",{className:j,role:"row",style:Z,children:J.map(({item:B,displayW:se,displayH:ge})=>{const Pe=!a&&(p===B.path||hn.has(B.path)),xe=(l==null?void 0:l.has(B.path))??!1,at=H.mode==="adaptive"?{width:se}:{},we=H.mode==="adaptive"?{height:ge}:{},yt=H.mode==="adaptive"?"relative rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group shrink-0":"relative aspect-[4/3] rounded-lg overflow-hidden bg-[var(--thumb-bg,#121212)] group";return u.jsxs("div",{id:`cell-${encodeURIComponent(B.path)}`,className:`relative min-w-0 ${Pe?"outline outline-2 outline-accent outline-offset-2 rounded-[10px]":""}`,role:"gridcell","aria-selected":Pe,tabIndex:C===B.path?0:-1,onFocus:()=>L(B.path),draggable:!0,style:at,onDragStart:Me=>gr(B.path,Me),onDragEnd:()=>{},onContextMenu:Me=>{Me.preventDefault(),Me.stopPropagation(),i&&i(Me,B.path)},children:[u.jsxs("div",{className:yt,style:we,onMouseEnter:()=>{try{he.prefetchFile(B.path)}catch{}},onDoubleClick:()=>s(B.path),onMouseLeave:fe,children:[u.jsx("div",{className:"cell-content absolute inset-0",children:u.jsx(ew,{path:B.path,name:B.name,selected:Pe,highlighted:xe,displayW:se,displayH:ge,ioRoot:E.current,isScrolling:Q,priority:F,onClick:Me=>mr(B.path,Me)})}),u.jsx("div",{className:"absolute right-0 bottom-0 w-7 h-7 cursor-zoom-in",onMouseEnter:()=>ke(B.path),onMouseLeave:fe,children:u.jsx("div",{className:"absolute right-0 bottom-0 h-[18px] w-[18px] flex items-center justify-center text-text select-none opacity-0 group-hover:opacity-50 hover:opacity-100 transition-all duration-[140ms]",style:{clipPath:'path("M0 9C0 4.02944 4.02944 0 9 0H18V18H0V9Z")',background:"linear-gradient(135deg, rgba(18,18,18,0.9) 0%, rgba(34,34,34,0.9) 60%, rgba(22,22,22,0.9) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",borderLeft:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 1px 2px rgba(0,0,0,0.45)",backdropFilter:"blur(1px)"},children:u.jsxs("svg",{width:"11",height:"11",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#d9dce2]","aria-hidden":"true",style:{transform:"translate(0px,0px)"},children:[u.jsx("circle",{cx:"11",cy:"11",r:"5.4"}),u.jsx("path",{d:"M15.5 15.5 L19 19"})]})})})]}),u.jsxs("div",{className:"flex flex-col items-center text-center gap-0 mt-1 px-0.5 text-white/90",children:[u.jsx("div",{className:"text-sm leading-[18px] thumb-filename line-clamp-2 break-words hyphens-auto text-center",title:B.name,children:(()=>{const Me=(o||"").trim();if(!Me)return B.name;const _n=B.name,Ze=_n.toLowerCase().indexOf(Me.toLowerCase());if(Ze===-1)return B.name;const $l=_n.slice(0,Ze),Ki=_n.slice(Ze,Ze+Me.length),Ul=_n.slice(Ze+Me.length);return u.jsxs(u.Fragment,{children:[$l,u.jsx("mark",{className:"bg-accent/20 text-inherit rounded px-0.5",children:Ki}),Ul]})})()}),u.jsxs("div",{className:"text-[11px] leading-[15px] opacity-70",children:[B.w,"  ",B.h]})]})]},B.path)})},A.key)}),S&&b&&y&&td.createPortal(u.jsx("div",{className:"toolbar-offset fixed inset-0 z-[999] flex items-center justify-center pointer-events-none bg-black/20 opacity-100",children:u.jsx("img",{src:b,alt:"preview",className:"max-w-[80vw] max-h-[80vh] object-contain opacity-[0.98]"})}),document.body)]},`${c}-${_e}`)})}const bw=48,Nw=[.1,.24,.5,.74,.9];function jw({items:e,metricKey:t,scrollRef:n,sortDir:r}){const{orderedValues:s,numericValues:i}=h.useMemo(()=>{var E;const M=[],I=[];for(const P of e){const ee=(E=P.metrics)==null?void 0:E[t],ne=ee==null||Number.isNaN(ee)?null:ee;M.push(ne),ne!=null&&I.push(ne)}return{orderedValues:M,numericValues:I}},[e,t]),o=h.useMemo(()=>Mw(i,bw),[i]),l=h.useMemo(()=>Rw(i,Nw),[i]),[a,c]=h.useState(0),[f,d]=h.useState(null),[v,S]=h.useState(!1),k=h.useRef(null);if(h.useEffect(()=>{const M=n.current;if(!M)return;const I=()=>{const E=Math.max(1,M.scrollHeight-M.clientHeight),P=Nr(E>0?M.scrollTop/E:0);c(P)};return I(),M.addEventListener("scroll",I,{passive:!0}),window.addEventListener("resize",I),()=>{M.removeEventListener("scroll",I),window.removeEventListener("resize",I)}},[n,e.length]),h.useEffect(()=>{d(null)},[t,e.length]),!o)return null;const b={min:o.min,max:o.max},N=f!=null?ah(f):null,y=ah(a),g=r==="desc",p=h.useMemo(()=>f==null?null:Iw(s,f),[s,f]);function m(M){d(Nr(M))}function C(){d(null)}function L(M){const I=n.current;if(!I)return;const E=Math.max(0,I.scrollHeight-I.clientHeight);I.scrollTop=Nr(M)*E}function T(M){var E;const I=(E=k.current)==null?void 0:E.getBoundingClientRect();return I?Nr((M.clientY-I.top)/I.height):null}return u.jsxs("div",{className:"absolute right-3 top-3 bottom-3 w-3 flex items-stretch pointer-events-auto",children:[u.jsxs("svg",{ref:k,viewBox:"0 0 10 100",preserveAspectRatio:"none",className:"w-full h-full rounded bg-surface-inset border border-border/60 cursor-ns-resize",onPointerDown:M=>{var E;M.preventDefault();const I=T(M);I!=null&&(S(!0),m(I),L(I),(E=k.current)==null||E.setPointerCapture(M.pointerId))},onPointerMove:M=>{const I=T(M);if(I==null){v||C();return}m(I),v&&L(I)},onPointerUp:M=>{var I;S(!1),(I=k.current)==null||I.releasePointerCapture(M.pointerId)},onPointerLeave:()=>{v||C()},children:[Lw(o.bins,"#2e3a4b",{flip:g}),Tw(l,b,{flip:g}),lh(y,{color:"var(--accent)",strokeWidth:.8}),N!=null&&lh(N,{color:"rgba(255,255,255,0.75)",strokeWidth:.6,dashed:!0})]}),p!=null&&f!=null&&u.jsx("div",{className:"pointer-events-none absolute right-full mr-2 px-1.5 py-0.5 rounded border border-border bg-surface text-[10px] text-text shadow",style:{top:`calc(${(f*100).toFixed(2)}% - 8px)`},children:Pw(p)})]})}function Mw(e,t){if(!e.length)return null;const n=Math.min(...e);let r=Math.max(...e);n===r&&(r=n+1);const s=new Array(t).fill(0),i=t/(r-n);for(const o of e){const l=Math.max(0,Math.min(t-1,Math.floor((o-n)*i)));s[l]+=1}return{bins:s,min:n,max:r}}function Rw(e,t){if(!e.length)return[];const n=[...e].sort((s,i)=>s-i),r=n.length-1;return t.map(s=>{const i=r*s,o=Math.floor(i),l=Math.ceil(i);if(o===l)return n[o];const a=i-o;return n[o]+(n[l]-n[o])*a})}function Lw(e,t,n){const r=Math.max(1,...e),s=100/e.length,i=(n==null?void 0:n.flip)??!1;return e.map((o,l)=>{const a=Math.max(.8,o/r*10),c=(i?e.length-1-l:l)*s;return u.jsx("rect",{x:10-a,y:c,width:a,height:Math.max(.2,s-.2),fill:t,opacity:.9},`sb-${l}`)})}function Tw(e,t,n){const r=(n==null?void 0:n.flip)??!1;return e.map((s,i)=>{const o=_w(s,t,r),l=i===2;return u.jsx("line",{x1:0,y1:o,x2:10,y2:o,stroke:"rgba(255,255,255,0.45)",strokeWidth:l?.8:.5,opacity:l?.9:.6,vectorEffect:"non-scaling-stroke"},`qt-${i}-${s}`)})}function lh(e,t){return u.jsx("line",{x1:0,y1:e,x2:10,y2:e,stroke:t.color,strokeWidth:t.strokeWidth??.6,strokeDasharray:t.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function Iw(e,t){if(!e.length)return null;const n=Math.round(Nr(t)*(e.length-1)),r=e[n];if(r!=null)return r;for(let s=1;s<e.length;s++){const i=n-s;if(i>=0&&e[i]!=null)return e[i];const o=n+s;if(o<e.length&&e[o]!=null)return e[o]}return null}function _w(e,t,n){const r=t.max-t.min;if(r===0)return 0;const s=Nr((e-t.min)/r);return(n?1-s:s)*100}function ah(e){return Nr(e)*100}function Nr(e){return e<0?0:e>1?1:e}function Pw(e){if(e==null||Number.isNaN(e))return"-";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function qu(e,t){const[n,r]=h.useState(null),s=h.useRef(null);return h.useEffect(()=>{if(!e){if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}r(null);return}let i=!0;return e().then(o=>{if(!i)return;const l=URL.createObjectURL(o);if(s.current)try{URL.revokeObjectURL(s.current)}catch{}s.current=l,r(l)}).catch(()=>{}),()=>{i=!1}},t),h.useEffect(()=>()=>{if(s.current){try{URL.revokeObjectURL(s.current)}catch{}s.current=null}},[]),n}function Ow(){const[e,t]=h.useState(1),[n,r]=h.useState(0),[s,i]=h.useState(0),[o,l]=h.useState(1),[a,c]=h.useState(!1),[f,d]=h.useState(!1),[v,S]=h.useState(!1),k=h.useRef(null),b=h.useRef(null),N=()=>{const p=k.current,m=b.current;if(!p||!m||!m.naturalWidth||!m.naturalHeight)return;const C=p.getBoundingClientRect(),L=C.width/m.naturalWidth,T=C.height/m.naturalHeight,M=Math.min(1,Math.min(L,T));l(M);const I=m.naturalWidth*M,E=m.naturalHeight*M;r((C.width-I)/2),i((C.height-E)/2)};return h.useEffect(()=>{const p=k.current;if(!p)return;const m=new ResizeObserver(()=>{try{requestAnimationFrame(()=>N())}catch{N()}});return m.observe(p),()=>m.disconnect()},[]),{scale:e,setScale:t,tx:n,setTx:r,ty:s,setTy:i,base:o,setBase:l,ready:a,setReady:c,dragging:f,setDragging:d,visible:v,setVisible:S,containerRef:k,imgRef:b,fitAndCenter:N,handleWheel:p=>{p.preventDefault();const m=p.deltaY>0?-1:1,C=1.2,L=.05,T=8,M=k.current;if(!M)return;const I=M.getBoundingClientRect(),E=p.clientX-I.left,P=p.clientY-I.top;t(ee=>{const ne=Math.min(T,Math.max(L,ee*Math.pow(C,m))),H=ne/ee;return r(Ie=>E-H*(E-Ie)),i(Ie=>P-H*(P-Ie)),Number(ne.toFixed(4))})},handleMouseDown:p=>{const m=k.current,C=b.current;if(!m||!C||p.target!==C)return;const T=m.getBoundingClientRect();if(p.clientX<T.left||p.clientX>T.right||p.clientY<T.top||p.clientY>T.bottom)return;p.preventDefault(),p.stopPropagation(),d(!0);const M=p.clientX,I=p.clientY,E=n,P=s,ee=H=>{r(E+(H.clientX-M)),i(P+(H.clientY-I))},ne=()=>{window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",ne),d(!1)};window.addEventListener("mousemove",ee),window.addEventListener("mouseup",ne)}}}function Fw({path:e,onClose:t,onNavigate:n,onZoomChange:r,requestedZoomPercent:s,onZoomRequestConsumed:i}){const{scale:o,setScale:l,tx:a,setTx:c,ty:f,setTy:d,base:v,ready:S,setReady:k,dragging:b,visible:N,setVisible:y,containerRef:g,imgRef:p,fitAndCenter:m,handleWheel:C,handleMouseDown:L}=Ow(),T=qu(()=>he.getFile(e),[e]),M=qu(()=>he.getThumb(e),[e]),I=h.useCallback(()=>{y(!1),window.setTimeout(t,110)},[t,y]);return h.useEffect(()=>{requestAnimationFrame(()=>{var E;y(!0),(E=g.current)==null||E.focus()})},[e]),h.useEffect(()=>{const E=P=>{P.key==="Escape"?I():(P.key==="ArrowRight"||P.key==="d")&&n?n(1):(P.key==="ArrowLeft"||P.key==="a")&&n&&n(-1)};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[t,n]),h.useEffect(()=>{k(!1)},[T]),h.useEffect(()=>{r&&r(v*o*100)},[v,o,r]),h.useEffect(()=>{if(s==null)return;const E=g.current;if(!E){i&&i();return}const P=Math.max(.05,Math.min(8,s/100/Math.max(1e-6,v))),ee=E.getBoundingClientRect(),ne=ee.width/2,H=ee.height/2;l(Ie=>{const be=P/Ie;return c(me=>ne-be*(ne-me)),d(me=>H-be*(H-me)),Number(P.toFixed(4))}),i&&i()},[s,v,i]),u.jsxs("div",{ref:g,role:"dialog","aria-modal":!0,"aria-label":"Image viewer",tabIndex:-1,className:`toolbar-offset absolute inset-0 left-[var(--left)] right-[var(--right)] flex items-start justify-start bg-panel z-viewer overflow-hidden transition-opacity duration-[110ms] ease-out cursor-grab focus:outline-none focus-visible:outline-none ${b?"cursor-grabbing select-none":""} ${N?"opacity-100":"opacity-0"}`,style:{outline:"none"},onClick:I,onWheel:C,onMouseDown:L,onKeyDown:E=>{E.key==="Tab"&&E.preventDefault()},children:[u.jsxs("button",{"aria-label":"Close",onClick:E=>{E.stopPropagation(),I()},className:"btn btn-sm absolute top-3 right-3 z-10",title:"Close (Esc)",children:[u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"M6 6l12 12"})]}),"Close"]}),M&&u.jsx("img",{src:M,alt:"thumb",className:"absolute top-0 left-0 max-w-none max-h-none object-contain pointer-events-none transition-opacity duration-[110ms] ease-out",draggable:!1,onDragStart:E=>E.preventDefault(),style:{transform:`translate(${a}px, ${f}px) scale(${v})`,transformOrigin:"0 0",opacity:S?0:.5,filter:"blur(0.25px)"}}),T&&u.jsx("img",{ref:p,src:T,alt:"viewer",className:"max-w-none max-h-none object-contain transition-opacity duration-[110ms] ease-out will-change-transform select-none",draggable:!1,onDragStart:E=>{E.preventDefault()},onLoad:E=>{m(),l(1);try{requestAnimationFrame(()=>k(!0))}catch{k(!0)}},onClick:E=>E.stopPropagation(),style:{transform:`translate(${a}px, ${f}px) scale(${v*o})`,transformOrigin:"0 0",opacity:S?.99:0,WebkitUserDrag:"none"}})]})}function Dl(){const[e,t]=h.useState(Jx());return h.useEffect(()=>Xx(t),[]),e}const Oi=e=>["item",e],Dw={v:1,tags:[],notes:"",version:1,updated_at:"",updated_by:"web"},Ht=new Map,Do=new Map,Xu=new Map,ud=new Map;let uh=0;const fn=new Map,ii=new Map,zw=12e3,Ju=new Set,Zu=new Set;let cd={state:"idle"},Fi=null,ec=0;function wo(e){cd=e;for(const t of Ju)t(e)}function Nn(){const e=fn.size>0,t=Ht.size+Do.size+ec;if(e){wo({state:"error",message:"Conflict detected"});return}if(Fi){wo({state:"error",message:Fi});return}if(t>0){wo({state:"syncing"});return}wo({state:"idle"})}function dd(){let e=null;for(const t of Xu.values())e=e==null?t:Math.min(e,t);for(const t of ud.values())e=e==null?t:Math.min(e,t);return e}function gl(){const e=dd();for(const t of Zu)t(e)}function vl(e){Fi=e,Nn()}function jg(){Fi&&(Fi=null,Nn())}function ch(e){ec=Math.max(0,ec+e),Nn()}function Aw(){uh+=1;const e=uh;return ud.set(e,Date.now()),gl(),e}function $w(e){e!=null&&ud.delete(e)&&gl()}function zl(e){const t=ii.get(e);if(!t||!t.size)return;const n=fn.get(e)??null;for(const r of t)r(n)}function dh(e){return fn.get(e)??null}function Al(e){fn.delete(e)&&(zl(e),Nn())}function Uw(e,t){fn.set(e,t),zl(e),Nn()}function Bw(e,t){const n=ii.get(e)??new Set;return n.add(t),ii.set(e,n),t(fn.get(e)??null),()=>{const r=ii.get(e);r&&(r.delete(t),r.size||ii.delete(e))}}function Ww(e){const[t,n]=h.useState(()=>e?dh(e):null);return h.useEffect(()=>{if(!e){n(null);return}return n(dh(e)),Bw(e,n)},[e]),t}function Hw(e){return Ju.add(e),e(cd),()=>{Ju.delete(e)}}function Vw(){const[e,t]=h.useState(cd);return h.useEffect(()=>Hw(t),[]),e}function Qw(e){return Zu.add(e),e(dd()),()=>{Zu.delete(e)}}function Kw(){const[e,t]=h.useState(()=>dd()),[n,r]=h.useState(()=>e==null?null:Date.now()-e);return h.useEffect(()=>Qw(t),[]),h.useEffect(()=>{if(e==null){r(null);return}r(Date.now()-e);const s=window.setInterval(()=>{r(Date.now()-e)},1e3);return()=>window.clearInterval(s)},[e]),n}function tc(e){const t={};return Object.prototype.hasOwnProperty.call(e,"star")&&(t.set_star=e.star??null),Object.prototype.hasOwnProperty.call(e,"notes")&&(t.set_notes=e.notes??""),Object.prototype.hasOwnProperty.call(e,"tags")&&(t.set_tags=Array.isArray(e.tags)?e.tags:[]),t}function nc(e){var t,n;return e.set_star!==void 0||e.set_notes!==void 0||e.set_tags!==void 0||(((t=e.add_tags)==null?void 0:t.length)??0)>0||(((n=e.remove_tags)==null?void 0:n.length)??0)>0}function Zs(e){const t=[],n=new Set;for(const r of e??[]){if(typeof r!="string")continue;const s=r.trim();!s||n.has(s)||(n.add(s),t.push(s))}return t}function Gw(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}function Yw(e,t){if(e.set_star!==void 0&&(t.star??null)!==e.set_star||e.set_notes!==void 0&&(t.notes??"")!==(e.set_notes??""))return!1;if(e.set_tags!==void 0){const r=Zs(e.set_tags),s=Zs(t.tags);return Gw(r,s)}const n=Zs(t.tags);for(const r of Zs(e.add_tags))if(!n.includes(r))return!1;for(const r of Zs(e.remove_tags))if(n.includes(r))return!1;return!0}function Mg(e,t,n){if(n instanceof ar&&n.status===409){const r=n.body;if(r!=null&&r.current)return Uw(e,{path:e,current:r.current,pending:t,receivedAt:new Date().toISOString()}),!0}return!1}function qw(e,t){const n=fn.get(e);if(n){if(Yw(n.pending,t)){Al(e);return}fn.set(e,{...n,current:t}),zl(e),Nn()}}function Xw(e){const t=Dl();return od({queryKey:Oi(e),queryFn:()=>he.getSidecar(e),enabled:!!e,staleTime:3e4,gcTime:5*6e4,retry:2,refetchInterval:t?zw:!1,refetchIntervalInBackground:t})}function Jw(e){const t=Gr();return Rx({mutationFn:async({patch:n,baseVersion:r,idempotencyKey:s})=>{const i=tc(n);if(!nc(i))return t.getQueryData(Oi(e))??Dw;const o={...i,base_version:r};try{return await he.patchSidecar(e,o,{idempotencyKey:s??Pi("patch"),ifMatch:r})}catch(l){throw Mg(e,i,l),l}},retry:(n,r)=>r instanceof ar&&r.status===409?!1:n<2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),4e3),onMutate:()=>(jg(),ch(1),{inflightId:Aw()}),onSuccess:n=>{Al(e),t.setQueryData(Oi(e),n)},onError:n=>{n instanceof ar&&n.status===409||(n instanceof ar?vl(n.message):vl("Failed to save"))},onSettled:(n,r,s,i)=>{ch(-1),$w(i==null?void 0:i.inflightId)}})}const Zw=6;async function fh(e,t){if(!e.length)return;let n=0;const r=[],s=async()=>{for(;n<e.length;){const o=n++,l=e[o];try{await Rg(l,t)}catch(a){r.push({path:l,error:a}),console.error(`[bulkUpdateSidecars] Failed for ${l}:`,a)}}},i=Array.from({length:Math.min(Zw,e.length)},()=>s());if(await Promise.all(i),r.length===e.length)throw new Error(`All ${e.length} sidecar updates failed`)}async function Rg(e,t){const n=Ht.get(e)||{};Ht.set(e,{...n,...t}),jg(),Nn();const r=Do.get(e);if(r)return r;Xu.set(e,Date.now()),gl();const s=(async()=>{try{for(;Ht.has(e);){const i=Ht.get(e);if(!i)break;const o=tc(i);if(!nc(o)){Ht.get(e)===i&&Ht.delete(e);continue}let l=1;try{l=(await he.getSidecar(e)).version??1}catch{l=1}const a={...o,base_version:l};try{await he.patchSidecar(e,a,{idempotencyKey:Pi("patch"),ifMatch:l}),Al(e),Ht.get(e)===i&&Ht.delete(e)}catch(c){if(Mg(e,o,c)){const d=Ht.get(e);if(d&&d!==i){const v=tc(d);if(nc(v)){const S=fn.get(e);S&&(fn.set(e,{...S,pending:v}),zl(e))}}Ht.delete(e)}else c instanceof ar?vl(c.message):vl("Failed to save");throw c}}}finally{Do.delete(e),Xu.delete(e),gl(),Nn()}})();return Do.set(e,s),Nn(),s}function Ta(e){const t=["B","KB","MB","GB","TB"];let n=0,r=e;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${r.toFixed(1)} ${t[n]}`}function Ia(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function e1(e,t=28){if(e.length<=t)return e;const n=Math.max(4,Math.floor((t-1)/2));return`${e.slice(0,n)}${e.slice(-n)}`}const t1=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});function n1(e){if(!e)return null;const t=Date.parse(e);return Number.isFinite(t)?t:null}function r1(e,t=Date.now()){const n=Math.max(0,t-e),r=Math.max(1,Math.floor(n/1e3));if(r<60)return`${r} second${r===1?"":"s"} ago`;const s=Math.floor(r/60);if(s<60)return`${s} minute${s===1?"":"s"} ago`;const i=Math.floor(s/60);return`${i} hour${i===1?"":"s"} ago`}function s1(e){return t1.format(new Date(e))}function Lg(e){return!e||!(e instanceof HTMLElement)?!1:e.closest('input, textarea, [contenteditable="true"]')!==null}function zo(e){if(Array.isArray(e))return e.map(zo);if(e&&typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,zo(n)]));if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")||t.startsWith('"')&&t.endsWith('"'))try{const r=JSON.parse(t);return zo(r)}catch{return e}}return e}function _a(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function i1(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function hh(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}function o1(e){const t=/(\"(\\u[a-fA-F0-9]{4}|\\[^u]|[^\\"])*\"(?:\s*:)?|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\btrue\b|\bfalse\b|\bnull\b)/g;let n="",r=0;for(const s of e.matchAll(t)){const i=s.index??0,o=s[0];n+=_a(e.slice(r,i));let l="#cdd3dd";o.startsWith('"')&&o.trimEnd().endsWith(":")?l="#a7c4ff":o.startsWith('"')?l="#9ad4b5":/true|false|null/.test(o)?l="#c4b4f5":l="#d7c08c",n+=`<span style="color:${l}">${_a(o)}</span>`,r=i+o.length}return n+=_a(e.slice(r)),n}const l1=["overview","notes","metadata","basics"],ph="lenslet.inspector.sections",mh="lenslet.inspector.metricsExpanded",Pa=12,a1={overview:!0,notes:!0,metadata:!0,basics:!0};function So({title:e,open:t,onToggle:n,actions:r,children:s,contentClassName:i}){const[o,l]=h.useState(t),[a,c]=h.useState(t?"open":"closed");return h.useEffect(()=>{if(t){l(!0);const d=window.requestAnimationFrame(()=>c("open"));return()=>window.cancelAnimationFrame(d)}c("closing");const f=window.setTimeout(()=>{l(!1),c("closed")},140);return()=>window.clearTimeout(f)},[t]),u.jsxs("div",{className:"border-b border-border",children:[u.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[u.jsxs("button",{type:"button",onClick:n,"aria-expanded":t,className:"flex items-center gap-2 text-xs uppercase tracking-wide text-muted hover:text-text transition-colors",children:[u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform ${t?"rotate-90":""}`,"aria-hidden":"true",children:u.jsx("path",{d:"m9 18 6-6-6-6"})}),u.jsx("span",{children:e})]}),r]}),o&&u.jsx("div",{className:"inspector-section-body","data-state":a,"aria-hidden":!t,children:u.jsx("div",{className:i??"px-3 pb-3",children:s})})]})}function u1({path:e,selectedPaths:t=[],items:n=[],onResize:r,onStarChanged:s,sortSpec:i}){const o=!!e,{data:l,isLoading:a}=Xw(e??""),c=Jw(e??""),f=Gr(),[d,v]=h.useState(a1),S=h.useCallback(j=>{v(F=>({...F,[j]:!F[j]}))},[]),[k,b]=h.useState(!1),[N,y]=h.useState(""),[g,p]=h.useState(""),[m,C]=h.useState(""),[L,T]=h.useState(null),[M,I]=h.useState("idle"),[E,P]=h.useState(!1),[ee,ne]=h.useState(null),[H,Ie]=h.useState({}),me=h.useMemo(()=>{const j=n.find(F=>F.path===e);return j&&j.star!==void 0?j.star:null},[n,e])??(l==null?void 0:l.star)??null,O=t.length>1,U=Ww(O?null:e),q={tags:!!(U!=null&&U.pending.set_tags),notes:(U==null?void 0:U.pending.set_notes)!==void 0,star:(U==null?void 0:U.pending.set_star)!==void 0},de=h.useMemo(()=>{const j=new Set(t);return n.filter(F=>j.has(F.path))},[n,t]),Q=h.useMemo(()=>de.reduce((j,F)=>j+(F.size||0),0),[de]);h.useEffect(()=>{l&&(y((l.tags||[]).join(", ")),p(l.notes||"")),C(""),T(null),I("idle"),P(!1)},[l==null?void 0:l.updated_at,e]);const oe=h.useCallback(j=>{if(O&&t.length){fh(t,j);return}if(!e)return;const F=(l==null?void 0:l.version)??1;c.mutate({patch:j,baseVersion:F,idempotencyKey:Pi("patch")})},[O,t,e,l==null?void 0:l.version,c]),re=h.useCallback(()=>{if(!U||!e)return;const j={};U.pending.set_tags!==void 0&&(j.tags=hh(N)),U.pending.set_notes!==void 0&&(j.notes=g),U.pending.set_star!==void 0&&(j.star=me??null);const F=U.current.version??1;c.mutate({patch:j,baseVersion:F,idempotencyKey:Pi("patch")})},[U,e,N,g,me,c]),fe=h.useCallback(()=>{if(!U||!e)return;const j=U.current;y((j.tags||[]).join(", ")),p(j.notes||""),f.setQueryData(Oi(e),j),Al(e),s==null||s([e],j.star??null)},[U,e,f,s]);h.useEffect(()=>{if(!e)return;const j=F=>{if(Lg(F.target))return;const K=F.key;if(!/^[0-5]$/.test(K))return;F.preventDefault();const B=K==="0"?null:Number(K);if(O&&t.length){oe({star:B}),s==null||s(t,B);return}oe({star:B}),s==null||s([e],B)};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[e,O,t,oe,s]);const ke=qu(e?()=>he.getThumb(e):null,[e]),_e=e?e.split("/").pop()||e:"",ot=h.useMemo(()=>{var F;if(_e.includes("."))return _e.slice(_e.lastIndexOf(".")+1).toUpperCase();const j=n.find(K=>K.path===e);return(F=j==null?void 0:j.type)!=null&&F.includes("/")?j.type.split("/")[1].toUpperCase():""},[_e,n,e]),je=h.useMemo(()=>n.find(j=>j.path===e),[n,e]),lt=h.useMemo(()=>e?(je==null?void 0:je.source)??e:"",[je,e]),pr=h.useCallback(async()=>{if(e){I("loading"),T(null);try{const j=await he.getMetadata(e),F=zo(j.meta),K=JSON.stringify(F,null,2);C(K),I("loaded")}catch(j){const F=j instanceof Error?j.message:"Failed to load metadata";C(F),T(F),I("error")}}},[e]),mr=h.useCallback(()=>{var j;m&&((j=navigator.clipboard)==null||j.writeText(m).then(()=>{P(!0),setTimeout(()=>P(!1),1200)}).catch(F=>{const K=F instanceof Error?F.message:"Copy failed";T(K)}))},[m]),gr=h.useMemo(()=>m?o1(m):"",[m]),hn=M==="loading"?"Loading metadata":m||"PNG metadata not loaded yet.",en=M==="loaded"&&!!m,vr=en?"h-48":"h-24",A=O?null:u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[m&&u.jsx("button",{className:"text-muted underline underline-offset-2 hover:text-text disabled:opacity-60 min-w-[48px] text-center",onClick:mr,disabled:!m,title:"Copy metadata",children:E?"Copied":"Copy"}),u.jsx("button",{className:"px-2 py-1 bg-transparent text-muted border border-border/60 rounded-md disabled:opacity-60 hover:border-border hover:text-text transition-colors min-w-[78px]",onClick:pr,disabled:!e||M==="loading",children:M==="loading"?"Loading":"Load meta"})]});h.useEffect(()=>{try{const j=localStorage.getItem(ph);if(!j)return;const F=JSON.parse(j);if(!F||typeof F!="object")return;const K={};for(const B of l1)typeof F[B]=="boolean"&&(K[B]=F[B]);Object.keys(K).length>0&&v(B=>({...B,...K}))}catch{}},[]),h.useEffect(()=>{try{localStorage.setItem(ph,JSON.stringify(d))}catch{}},[d]),h.useEffect(()=>{try{const j=localStorage.getItem(mh);j==="1"||j==="true"?b(!0):(j==="0"||j==="false")&&b(!1)}catch{}},[]),h.useEffect(()=>{try{localStorage.setItem(mh,k?"1":"0")}catch{}},[k]);const J=h.useCallback((j,F)=>{var K;F&&((K=navigator.clipboard)==null||K.writeText(F).then(()=>{ne(j),setTimeout(()=>ne(B=>B===j?null:B),1e3)}).catch(()=>{}))},[]),Z=h.useCallback((j,F)=>{if(F&&!H[j]){const K=F.offsetHeight;K&&Ie(B=>B[j]?B:{...B,[j]:K})}},[H]);return o?u.jsxs("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:[!O&&u.jsx("div",{className:"p-3 border-b border-border flex justify-center",children:u.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border w-[220px] h-[160px] bg-panel select-none",children:[ke&&u.jsx("img",{src:ke,alt:"thumb",className:"block w-full h-full object-contain"}),!!ot&&u.jsx("div",{className:"absolute top-1.5 left-1.5 bg-surface border border-border text-text text-xs px-1.5 py-0.5 rounded-md select-none",children:ot})]})}),u.jsx(So,{title:O?"Selection":"Item",open:d.overview,onToggle:()=>S("overview"),children:O?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"font-mono text-muted break-all",children:[t.length," files selected"]}),u.jsxs("div",{className:"font-mono text-muted break-all",children:["Total size: ",Ta(Q)]})]}):u.jsx("div",{className:"font-mono text-text break-all",title:_e,children:_e})}),u.jsxs(So,{title:"Notes & Tags",open:d.notes,onToggle:()=>S("notes"),contentClassName:"px-3 pb-3 space-y-1.5",children:[!O&&U&&(q.tags||q.notes)&&u.jsxs("div",{className:"rounded-md border border-danger/40 bg-danger/10 text-danger text-xs px-2.5 py-2",children:[u.jsx("div",{className:"font-semibold",children:"Conflicting edits detected."}),u.jsx("div",{className:"text-[11px] text-muted mt-0.5",children:"Your changes were not saved because this item was updated elsewhere."}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsx("button",{className:"btn btn-sm",onClick:re,children:"Apply my changes again"}),u.jsx("button",{className:"btn btn-sm btn-ghost",onClick:fe,children:"Keep theirs"})]})]}),u.jsx("textarea",{className:"w-full bg-transparent text-text border border-border/60 rounded-md px-2 py-1 min-h-[32px] resize-y scrollbar-thin placeholder:text-muted focus:border-border",placeholder:"Add notes",value:g,onChange:j=>p(j.target.value),onBlur:()=>{oe({notes:g})},"aria-label":O?"Notes for selected items":"Notes"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[11px] text-muted mb-1",children:O?"Tags (apply to all, comma-separated)":"Tags (comma-separated)"}),u.jsx("input",{className:"w-full h-9 bg-transparent text-text border border-border/60 rounded-md px-2 placeholder:text-muted focus:border-border",placeholder:"tag1, tag2",value:N,onChange:j=>y(j.target.value),onBlur:()=>{oe({tags:hh(N)})},"aria-label":O?"Tags for selected items":"Tags"})]})]}),!O&&u.jsxs(So,{title:"Metadata",open:d.metadata,onToggle:()=>S("metadata"),actions:A,children:[u.jsx("pre",{className:`bg-surface-inset text-[11px] font-mono text-muted border border-border rounded-lg p-2 ${vr} overflow-auto whitespace-pre-wrap leading-[1.3]`,children:en?u.jsx("code",{className:"block whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:gr}}):hn}),L&&u.jsx("div",{className:"text-[11px] text-danger mt-1 break-words",children:L})]}),u.jsxs(So,{title:"Basics",open:d.basics,onToggle:()=>S("basics"),children:[u.jsxs("div",{className:"flex items-center gap-2 text-[12px] mb-1",role:"radiogroup","aria-label":"Star rating",children:[u.jsx("span",{className:"text-muted w-16 shrink-0",children:O?"Rating (all)":"Rating"}),u.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(j=>{const F=(me??0)>=j;return u.jsx("button",{className:`w-6 h-6 flex items-center justify-center rounded border border-border/60 bg-transparent text-[13px] ${F?"text-star-active":"text-star-inactive"} hover:border-border hover:text-star-hover transition-colors`,onClick:()=>{const K=me===j&&!O?null:j;O&&t.length?(s==null||s(t,K),fh(t,{star:K})):e&&(s==null||s([e],K),Rg(e,{star:K}))},title:`${j} star${j>1?"s":""} (key ${j})`,"aria-label":`${j} star${j>1?"s":""}`,"aria-pressed":me===j,children:F?"":""},j)})})]}),!O&&U&&q.star&&u.jsxs("div",{className:"mt-2 rounded-md border border-danger/40 bg-danger/10 text-danger text-[11px] px-2 py-1 flex items-center justify-between gap-2",children:[u.jsx("span",{children:"Rating conflict."}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{className:"btn btn-sm",onClick:re,children:"Apply again"}),u.jsx("button",{className:"btn btn-sm btn-ghost",onClick:fe,children:"Keep theirs"})]})]}),!O&&je&&u.jsxs("div",{className:"text-[12px] space-y-1",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted w-20 shrink-0 cursor-pointer",onClick:()=>J("dimensions",`${je.w}${je.h}`),children:"Dimensions"}),u.jsx("span",{className:"font-mono text-text inline-block text-right min-w-[80px]",ref:j=>Z("dimensions",j),style:H.dimensions?{minHeight:H.dimensions}:void 0,children:ee==="dimensions"?"Copied":`${je.w}${je.h}`})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted w-20 shrink-0 cursor-pointer",onClick:()=>J("size",Ta(je.size)),children:"Size"}),u.jsx("span",{className:"font-mono text-text inline-block text-right min-w-[80px]",ref:j=>Z("size",j),style:H.size?{minHeight:H.size}:void 0,children:ee==="size"?"Copied":Ta(je.size)})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted w-20 shrink-0 cursor-pointer",onClick:()=>J("type",je.type),children:"Type"}),u.jsx("span",{className:"font-mono text-text break-all text-right inline-block min-w-[80px]",ref:j=>Z("type",j),style:H.type?{minHeight:H.type}:void 0,children:ee==="type"?"Copied":je.type})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-muted w-20 shrink-0 cursor-pointer",onClick:()=>lt&&J("source",lt),children:"Source"}),u.jsx("span",{className:"font-mono text-text break-all text-right max-w-[70%] inline-block min-w-[80px]",ref:j=>Z("source",j),style:H.source?{minHeight:H.source}:void 0,children:ee==="source"?"Copied":lt})]}),(()=>{const j=je.metrics||null;if(!j)return null;const F=Object.entries(j).filter(([,we])=>we!=null);if(!F.length)return null;const K=(i==null?void 0:i.kind)==="metric"?i.key:null,B=[...F].sort(([we],[yt])=>we.localeCompare(yt));let se=B;if(K){const we=B.findIndex(([yt])=>yt===K);we>0&&(se=[B[we],...B.slice(0,we),...B.slice(we+1)])}const ge=se.length>Pa,xe=k||!ge?se:se.slice(0,Pa),at=se.length-Pa;return u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"text-muted text-xs uppercase tracking-wide mb-1",children:"Metrics"}),u.jsxs("div",{className:"space-y-1",children:[xe.map(([we,yt])=>{const Me=K===we;return u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:`w-24 shrink-0 ${Me?"text-accent font-medium":"text-muted"}`,children:we}),u.jsx("span",{className:`font-mono text-right ${Me?"text-accent font-medium":"text-text"}`,children:i1(yt)})]},we)}),ge&&u.jsx("button",{type:"button",className:"text-[11px] text-muted underline underline-offset-2 hover:text-text",onClick:()=>b(we=>!we),"aria-expanded":k,children:k?"Show less":`+${at} more`})]})]})})()]})]}),u.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 right-[calc(var(--right)-3px)] hover:bg-accent/20",onMouseDown:r})]}):u.jsx("div",{className:"app-right-panel col-start-3 row-start-2 border-l border-border bg-panel overflow-auto scrollbar-thin relative",children:u.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 right-[calc(var(--right)-3px)] hover:bg-accent/20",onMouseDown:r})})}const c1=e=>["folder",e],d1=15e3;function Tg(e){const t=Dl();return od({queryKey:c1(e),queryFn:()=>he.getFolder(e),staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:n=>Math.min(1e3*Math.pow(2,n),5e3),refetchOnWindowFocus:!1,refetchInterval:t?d1:!1,refetchIntervalInBackground:t})}const f1=(e,t)=>["search",e,t],h1=2e4;function p1(e,t){const n=Dl();return od({enabled:!!e.trim(),queryKey:f1(e,t),queryFn:()=>he.search(e,t),staleTime:3e3,gcTime:6e4,placeholderData:r=>r,retry:1,refetchInterval:n?h1:!1,refetchIntervalInBackground:n})}const m1=/^[\/@a-zA-Z0-9._\-\/]{1,512}$/;function an(e){try{const t=decodeURI(e||""),r=(t.startsWith("/")?t:`/${t}`).replace(/\/{2,}/g,"/"),s=r.length>1?r.replace(/\/$/,""):r;return m1.test(s)?s:"/"}catch{return"/"}}function gh(){return(window.location.hash||"").replace(/^#/,"")}function g1(e){const t=an(e),n=`#${encodeURI(t)}`;window.location.hash!==n&&(window.location.hash=n)}function fd(e,t){const n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,""),s=[n,r].filter(Boolean).join("/");return s.startsWith("/")?s:`/${s}`}function v1(e){const n=an(e).split("/").filter(Boolean);return n.length<=1?"/":"/"+n.slice(0,-1).join("/")}function y1(e){return e.endsWith("/_trash_")}const x1=new Set([0,1,2,3,4,5]),hd=new Set(["<","<=",">",">="]),w1=/^\d{4}-\d{2}-\d{2}$/;function S1(e,t){return!t||!t.and.length?e:e.filter(n=>k1(n,t.and))}function k1(e,t){for(const n of t)if(!C1(e,n))return!1;return!0}function C1(e,t){var n,r,s,i,o,l,a;if("stars"in t){const c=t.stars;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsIn"in t){const c=t.starsIn.values;if(!c||!c.length)return!0;const f=e.star??0;return c.includes(f)}if("starsNotIn"in t){const c=t.starsNotIn.values;if(!c||!c.length)return!0;const f=e.star??0;return!c.includes(f)}if("nameContains"in t){const c=(n=t.nameContains.value)==null?void 0:n.trim();return c?(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("nameNotContains"in t){const c=(r=t.nameNotContains.value)==null?void 0:r.trim();return c?!(e.name??"").toLowerCase().includes(c.toLowerCase()):!0}if("commentsContains"in t){const c=(s=t.commentsContains.value)==null?void 0:s.trim();if(!c)return!0;const f=e.comments??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("commentsNotContains"in t){const c=(i=t.commentsNotContains.value)==null?void 0:i.trim();if(!c)return!0;const f=e.comments??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("urlContains"in t){const c=(o=t.urlContains.value)==null?void 0:o.trim();if(!c)return!0;const f=e.source??e.url??"";return f?f.toLowerCase().includes(c.toLowerCase()):!1}if("urlNotContains"in t){const c=(l=t.urlNotContains.value)==null?void 0:l.trim();if(!c)return!0;const f=e.source??e.url??"";return f?!f.toLowerCase().includes(c.toLowerCase()):!1}if("dateRange"in t){const{from:c,to:f}=t.dateRange;if(!c&&!f)return!0;if(!e.addedAt)return!1;const d=Date.parse(e.addedAt);if(Number.isNaN(d))return!1;const v=xh(c,!1),S=xh(f,!0);return!(v!=null&&d<v||S!=null&&d>S)}if("widthCompare"in t){const{op:c,value:f}=t.widthCompare;if(!Number.isFinite(f))return!0;const d=e.w;return!Number.isFinite(d)||d<=0?!1:wh(d,c,f)}if("heightCompare"in t){const{op:c,value:f}=t.heightCompare;if(!Number.isFinite(f))return!0;const d=e.h;return!Number.isFinite(d)||d<=0?!1:wh(d,c,f)}if("metricRange"in t){const{key:c,min:f,max:d}=t.metricRange,v=(a=e.metrics)==null?void 0:a[c];return!(v==null||v<f||v>d)}return!0}function rc(e){if(!e||typeof e!="object")return null;const t=e.and;if(!Array.isArray(t))return null;const n=[];for(const r of t){const s=z1(r);s&&n.push(s)}return{and:n}}function vh(e){var r;const t=e.and.find(s=>"stars"in s),n=e.and.find(s=>"starsIn"in s);return(r=n==null?void 0:n.starsIn)!=null&&r.values?n.starsIn.values:(t==null?void 0:t.stars)??[]}function Oa(e,t){return Ig(e,t)}function E1(e){var n;const t=e.and.find(r=>"starsIn"in r);return((n=t==null?void 0:t.starsIn)==null?void 0:n.values)??[]}function Ig(e,t){const n=mi(t),r=e.and.filter(s=>!("starsIn"in s)&&!("stars"in s));return n.length?{and:[{starsIn:{values:n}},...r]}:{and:r}}function b1(e){var n;const t=e.and.find(r=>"starsNotIn"in r);return((n=t==null?void 0:t.starsNotIn)==null?void 0:n.values)??[]}function _g(e,t){const n=mi(t),r=e.and.filter(s=>!("starsNotIn"in s));return n.length?{and:[{starsNotIn:{values:n}},...r]}:{and:r}}function N1(e){var n;const t=e.and.find(r=>"nameContains"in r);return((n=t==null?void 0:t.nameContains)==null?void 0:n.value)??null}function Pg(e,t){const n=zt(t),r=e.and.filter(s=>!("nameContains"in s));return n?{and:[{nameContains:{value:n}},...r]}:{and:r}}function j1(e){var n;const t=e.and.find(r=>"nameNotContains"in r);return((n=t==null?void 0:t.nameNotContains)==null?void 0:n.value)??null}function Og(e,t){const n=zt(t),r=e.and.filter(s=>!("nameNotContains"in s));return n?{and:[{nameNotContains:{value:n}},...r]}:{and:r}}function M1(e){var n;const t=e.and.find(r=>"commentsContains"in r);return((n=t==null?void 0:t.commentsContains)==null?void 0:n.value)??null}function Fg(e,t){const n=zt(t),r=e.and.filter(s=>!("commentsContains"in s));return n?{and:[{commentsContains:{value:n}},...r]}:{and:r}}function R1(e){var n;const t=e.and.find(r=>"commentsNotContains"in r);return((n=t==null?void 0:t.commentsNotContains)==null?void 0:n.value)??null}function Dg(e,t){const n=zt(t),r=e.and.filter(s=>!("commentsNotContains"in s));return n?{and:[{commentsNotContains:{value:n}},...r]}:{and:r}}function L1(e){var n;const t=e.and.find(r=>"urlContains"in r);return((n=t==null?void 0:t.urlContains)==null?void 0:n.value)??null}function zg(e,t){const n=zt(t),r=e.and.filter(s=>!("urlContains"in s));return n?{and:[{urlContains:{value:n}},...r]}:{and:r}}function T1(e){var n;const t=e.and.find(r=>"urlNotContains"in r);return((n=t==null?void 0:t.urlNotContains)==null?void 0:n.value)??null}function Ag(e,t){const n=zt(t),r=e.and.filter(s=>!("urlNotContains"in s));return n?{and:[{urlNotContains:{value:n}},...r]}:{and:r}}function I1(e){const t=e.and.find(n=>"dateRange"in n);return(t==null?void 0:t.dateRange)??null}function sc(e,t){const n=yl((t==null?void 0:t.from)??null),r=yl((t==null?void 0:t.to)??null),s=e.and.filter(i=>!("dateRange"in i));return!n&&!r?{and:s}:{and:[{dateRange:{...n?{from:n}:{},...r?{to:r}:{}}},...s]}}function _1(e){const t=e.and.find(n=>"widthCompare"in n);return(t==null?void 0:t.widthCompare)??null}function Ao(e,t){const n=e.and.filter(r=>!("widthCompare"in r));return!t||!Number.isFinite(t.value)||!hd.has(t.op)?{and:n}:{and:[{widthCompare:{op:t.op,value:t.value}},...n]}}function P1(e){const t=e.and.find(n=>"heightCompare"in n);return(t==null?void 0:t.heightCompare)??null}function $o(e,t){const n=e.and.filter(r=>!("heightCompare"in r));return!t||!Number.isFinite(t.value)||!hd.has(t.op)?{and:n}:{and:[{heightCompare:{op:t.op,value:t.value}},...n]}}function O1(e,t){const n=e.and.find(r=>"metricRange"in r&&r.metricRange.key===t);return(n==null?void 0:n.metricRange)??null}function F1(e,t,n){const r=e.and.filter(s=>!("metricRange"in s&&s.metricRange.key===t));return n?{and:[{metricRange:{key:t,min:n.min,max:n.max}},...r]}:{and:r}}function D1(e){const t=rc(e);return t?t.and.length:0}function z1(e){var t,n,r,s,i,o,l,a;if(!e||typeof e!="object")return null;if("stars"in e){const c=mi(e.stars);return c.length?{starsIn:{values:c}}:null}if("starsIn"in e){const c=mi((t=e.starsIn)==null?void 0:t.values);return c.length?{starsIn:{values:c}}:null}if("starsNotIn"in e){const c=mi((n=e.starsNotIn)==null?void 0:n.values);return c.length?{starsNotIn:{values:c}}:null}if("nameContains"in e){const c=zt((r=e.nameContains)==null?void 0:r.value);return c?{nameContains:{value:c}}:null}if("nameNotContains"in e){const c=zt((s=e.nameNotContains)==null?void 0:s.value);return c?{nameNotContains:{value:c}}:null}if("commentsContains"in e){const c=zt((i=e.commentsContains)==null?void 0:i.value);return c?{commentsContains:{value:c}}:null}if("commentsNotContains"in e){const c=zt((o=e.commentsNotContains)==null?void 0:o.value);return c?{commentsNotContains:{value:c}}:null}if("urlContains"in e){const c=zt((l=e.urlContains)==null?void 0:l.value);return c?{urlContains:{value:c}}:null}if("urlNotContains"in e){const c=zt((a=e.urlNotContains)==null?void 0:a.value);return c?{urlNotContains:{value:c}}:null}if("dateRange"in e){const c=e.dateRange,f=yl((c==null?void 0:c.from)??null),d=yl((c==null?void 0:c.to)??null);return!f&&!d?null:{dateRange:{...f?{from:f}:{},...d?{to:d}:{}}}}if("widthCompare"in e){const c=e.widthCompare,f=yh(c==null?void 0:c.op,c==null?void 0:c.value);return f?{widthCompare:f}:null}if("heightCompare"in e){const c=e.heightCompare,f=yh(c==null?void 0:c.op,c==null?void 0:c.value);return f?{heightCompare:f}:null}if("metricRange"in e){const c=e.metricRange;if(!c||typeof c!="object")return null;const f=typeof c.key=="string"?c.key:"",d=ic(c.min),v=ic(c.max);return!f||d==null||v==null||d>v?null:{metricRange:{key:f,min:d,max:v}}}return null}function mi(e){if(!Array.isArray(e))return[];const t=[],n=new Set;for(const r of e){const s=typeof r=="number"?r:typeof r=="string"?Number(r):NaN;!Number.isInteger(s)||!x1.has(s)||n.has(s)||(n.add(s),t.push(s))}return t}function zt(e){if(typeof e!="string")return null;const t=e.trim();return t||null}function yl(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const n=Date.parse(t);return Number.isNaN(n)?null:t}function yh(e,t){if(typeof e!="string"||!hd.has(e))return null;const n=ic(t);return n==null?null:{op:e,value:n}}function xh(e,t){if(!e)return null;const n=e.trim();if(!n)return null;const r=Date.parse(n);return Number.isNaN(r)?null:t&&w1.test(n)?r+24*60*60*1e3-1:r}function wh(e,t,n){switch(t){case"<":return e<n;case"<=":return e<=n;case">":return e>n;case">=":return e>=n;default:return!0}}function ic(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t))return t}return null}function Sh(e){return e.addedAt?Date.parse(e.addedAt):0}function xl(e,t){return e.name.localeCompare(t.name)}function A1(e,t){const n=Sh(e),r=Sh(t);return n===r?xl(e,t):n-r}function $1(e){return(t,n)=>{var i,o;const r=(i=t.metrics)==null?void 0:i[e],s=(o=n.metrics)==null?void 0:o[e];return r==null&&s==null?xl(t,n):r==null?1:s==null?-1:r===s?xl(t,n):r-s}}function U1(e,t){return S1(e,t)}function B1(e){let t=e>>>0;return()=>{t+=1831565813;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function W1(e,t){const n=B1(t||1),r=[...e];for(let s=r.length-1;s>0;s-=1){const i=Math.floor(n()*(s+1));[r[s],r[i]]=[r[i],r[s]]}return r}function H1(e,t,n){if(t.kind==="builtin"&&t.key==="random"){const i=n??Date.now();return W1(e,i)}let r=A1;t.kind==="metric"?r=$1(t.key):t.key==="name"&&(r=xl);const s=[...e].sort(r);return t.dir==="desc"?s.reverse():s}function V1(e){const[t,n]=h.useState(250),[r,s]=h.useState(240),i=h.useRef(t),o=h.useRef(r);return h.useEffect(()=>{i.current=t},[t]),h.useEffect(()=>{o.current=r},[r]),h.useEffect(()=>{try{const c=window.localStorage,f=Number(c.getItem("leftW"));Number.isFinite(f)&&f>0&&n(f);const d=Number(c.getItem("rightW"));Number.isFinite(d)&&d>0&&s(d)}catch{}},[]),{leftW:t,rightW:r,onResizeLeft:c=>{c.preventDefault();const f=e.current;if(!f)return;const d=f.getBoundingClientRect(),v=k=>{const b=k.clientX-d.left,N=200,y=Math.max(N,d.width-o.current-200),g=Math.min(Math.max(b,N),y);n(g)},S=()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",S);try{window.localStorage.setItem("leftW",String(i.current))}catch{}};window.addEventListener("mousemove",v),window.addEventListener("mouseup",S)},onResizeRight:c=>{c.preventDefault();const f=e.current;if(!f)return;const d=f.getBoundingClientRect(),v=k=>{const b=k.clientX-d.left,N=d.width-b,y=240,g=Math.max(y,d.width-i.current-200),p=Math.min(Math.max(N,y),g);s(p)},S=()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",S);try{window.localStorage.setItem("rightW",String(o.current))}catch{}};window.addEventListener("mousemove",v),window.addEventListener("mouseup",S)}}}function Q1({x:e,y:t,items:n}){return u.jsx("div",{className:"dropdown-panel fixed",role:"menu",style:{left:e,top:t,minWidth:180},onClick:r=>r.stopPropagation(),children:n.map((r,s)=>u.jsxs("button",{className:`dropdown-item w-full ${r.danger?"text-danger hover:text-danger":""}`,role:"menuitem","aria-disabled":r.disabled,disabled:r.disabled,onClick:i=>{i.stopPropagation(),r.disabled||r.onClick()},children:[r.icon&&u.jsx("span",{className:"shrink-0",children:r.icon}),u.jsx("span",{children:r.label})]},s))})}function kh(e){return JSON.stringify(e,null,2)}function Ch(e){const t=s=>'"'+s.replaceAll('"','""')+'"',n="path,folder,name,star,type,size,width,height,tags,notes",r=e.map(s=>{const i=(s.tags||[]).join(" "),o=s.notes||"";return[s.path,s.folder,s.name,String(s.star??""),s.type??"",s.size??"",s.width??"",s.height??"",i,o].map(l=>t(String(l))).join(",")});return[n,...r].join(`
`)}function Fa(e){return e.map(t=>{const n=t.path.split("/").filter(Boolean);n.pop();const r=n.length?`/${n.join("/")}`:"/";return{path:t.path,folder:r,name:t.name,star:t.star??null,type:t.type,size:t.size,width:t.w,height:t.h}})}function K1(e,t=250){const[n,r]=Bo.useState(e);return Bo.useEffect(()=>{const s=window.setTimeout(()=>r(e),Math.max(0,t));return()=>window.clearTimeout(s)},[e,t]),n}const $g="application/x-lenslet-paths",G1='[role="treeitem"].drop-target';function Eh(e){var n;return Array.from(((n=e.dataTransfer)==null?void 0:n.types)||[]).includes($g)}function Y1(e){document.querySelectorAll(G1).forEach(t=>{t!==e&&t.classList.remove("drop-target")})}function bh(e){Y1(e),e.classList.add("drop-target")}function Nh(e){return e.startsWith("/")?e:`/${e}`}function q1({path:e,isLeaf:t}){const n=Gr(),r=h.useCallback(l=>{Eh(l)&&(l.preventDefault(),t&&bh(l.currentTarget))},[t]),s=h.useCallback(l=>{!t||!Eh(l)||(l.preventDefault(),bh(l.currentTarget))},[t]),i=h.useCallback(l=>{const a=l.currentTarget,c=document.elementFromPoint(l.clientX,l.clientY);c&&a.contains(c)||a.classList.remove("drop-target")},[]),o=h.useCallback(async l=>{const a=l.dataTransfer;if(!a)return;l.preventDefault(),l.currentTarget.classList.remove("drop-target");const c=a.getData($g),d=(c?JSON.parse(c):[]).filter(Boolean);if(!d.length)return;let v=d[0].split("/").slice(0,-1).join("/")||"/";v=Nh(v);const S=Nh(e);try{for(const k of d)await he.moveFile(k,S);n.invalidateQueries({queryKey:["folder",v]}),n.invalidateQueries({queryKey:["folder",S]}),n.setQueryData(["folder",v],k=>!k||!Array.isArray(k.items)?k:{...k,items:k.items.filter(b=>!d.includes(b.path))})}catch{}},[e,n]);return{onDragOver:r,onDragEnter:s,onDragLeave:i,onDrop:o}}const X1='[role="tree"] [role="treeitem"]';function J1(){return Array.from(document.querySelectorAll(X1))}function Z1(e,t){var i;const n=J1(),r=n.findIndex(o=>o===e);if(r===-1)return;let s=r;t==="ArrowDown"?s=Math.min(n.length-1,r+1):t==="ArrowUp"?s=Math.max(0,r-1):t==="Home"?s=0:t==="End"&&(s=n.length-1),(i=n[s])==null||i.focus()}function eS({path:e,isLeaf:t,isExpanded:n,setExpanded:r,onOpen:s}){return h.useCallback(i=>{if(i.key==="Enter"){i.preventDefault(),s(e);return}if(i.key==="ArrowRight"){!t&&!n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.add(e),l}));return}if(i.key==="ArrowLeft"){!t&&n&&(i.preventDefault(),r(o=>{const l=new Set(o);return l.delete(e),l}));return}(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="Home"||i.key==="End")&&(i.preventDefault(),Z1(i.currentTarget,i.key))},[e,t,n,r,s])}function tS({current:e,roots:t,data:n,onOpen:r,onResize:s,onContextMenu:i,className:o,showResizeHandle:l=!0}){const[a,c]=h.useState(new Set(["/"])),f=h.useRef(new Map),d=h.useRef(new Map),v=h.useCallback(async(k,b)=>{const N=an(k||"/"),y=f.current,g=d.current,p=y.get(N);if(p!==void 0)return p;const m=g.get(N);if(m)return m;const C=(async()=>{let L=0;const T=new Set,M=[{path:N,index:b}];for(;M.length;){const I=M.pop(),{path:E,index:P}=I;if(T.has(E))continue;T.add(E);let ee=P;if(!ee)try{ee=await he.getFolder(E)}catch(ne){console.warn(`Failed to count folder ${E}:`,ne);continue}L+=ee.items.length;for(const ne of ee.dirs)ne.kind==="branch"&&M.push({path:fd(E,ne.name)})}return y.set(N,L),g.delete(N),L})();return g.set(N,C),C},[]);h.useEffect(()=>{const k=e.split("/").filter(Boolean),b=["/"];let N="";for(const y of k)N=N?`${N}/${y}`:`/${y}`,b.push(N);c(y=>{const g=new Set(y);for(const p of b)g.add(p);return g})},[e]);const S=o??"h-full overflow-auto bg-panel scrollbar-thin";return u.jsxs("div",{className:S,children:[u.jsx("div",{className:"p-1",role:"tree","aria-label":"Folders",children:t.map(k=>u.jsx(Ug,{path:k.path,label:k.label,depth:0,current:e,expanded:a,setExpanded:c,onOpen:r,onContextMenu:i,initial:n,getSubtreeCount:v},k.path))}),l&&u.jsx("div",{className:"toolbar-offset absolute bottom-0 w-1.5 cursor-col-resize z-10 left-[calc(var(--left)-3px)] hover:bg-accent/20",onMouseDown:s})]})}function Ug({path:e,label:t,depth:n,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,initial:a,getSubtreeCount:c}){var T,M;const f=s.has(e),{data:d}=Tg(e),v=a&&e===a.path?a:d,S=r===e,k=(((T=v==null?void 0:v.dirs)==null?void 0:T.length)??0)===0,[b,N]=h.useState(v?v.items.length:null),y=eS({path:e,isLeaf:k,isExpanded:f,setExpanded:i,onOpen:o}),{onDragOver:g,onDragEnter:p,onDragLeave:m,onDrop:C}=q1({path:e,isLeaf:k}),L=I=>{I.stopPropagation(),i(E=>{const P=new Set(E);return P.has(e)?P.delete(e):P.add(e),P})};return h.useEffect(()=>{let I=!1;if(!v){N(null);return}return N(v.items.length),c(e,v).then(E=>{I||N(E)}).catch(E=>{I||console.warn(`Failed to compute subtree count for ${e}:`,E)}),()=>{I=!0}},[v,e,c]),u.jsxs("div",{children:[u.jsxs("div",{className:`flex items-center gap-1.5 py-0.5 px-2 rounded-md cursor-pointer min-h-[28px] outline-none transition-colors duration-75 ${S?"bg-accent/20 text-accent font-medium":"hover:bg-white/5 text-text"}`,role:"treeitem","aria-level":n+1,"aria-expanded":k?void 0:f,"aria-selected":S,tabIndex:S?0:-1,style:{paddingLeft:8+n*14},onClick:()=>o(e),onContextMenu:I=>{I.preventDefault(),I.stopPropagation(),l&&l(I,e)},onKeyDown:y,onDragOver:g,onDragEnter:p,onDragLeave:m,onDrop:C,children:[u.jsx("span",{className:"w-4 text-center opacity-60 hover:opacity-100 text-[10px]",onClick:L,children:f?"":""}),u.jsx("span",{className:"flex-1 overflow-hidden truncate text-sm",title:t,children:e1(t,28)}),b!==null&&u.jsx("span",{className:"text-[10px] opacity-50 bg-white/5 border border-white/5 rounded px-1.5 min-w-[24px] text-center",children:b})]}),f&&((M=v==null?void 0:v.dirs)==null?void 0:M.map(I=>u.jsx(Ug,{path:fd(e,I.name),label:I.name,depth:n+1,current:r,expanded:s,setExpanded:i,onOpen:o,onContextMenu:l,getSubtreeCount:c},I.name)))]})}const jr=40,nS=12,jh=[5,4,3,2,1],Mh=["<","<=",">",">="];function rS({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l,onChangeFilters:a}){const c=r&&r.length?u.jsx(sS,{selectedItems:r,metricKeys:n}):null,f=u.jsx(iS,{filters:o,onChangeFilters:a});return n.length?u.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,u.jsx(oS,{items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}),f]}):u.jsxs("div",{className:"h-full flex flex-col gap-3 p-3 overflow-auto scrollbar-thin",children:[c,f,u.jsx("div",{className:"p-4 text-sm text-muted",children:"No metrics found in this dataset."})]})}function sS({selectedItems:e,metricKeys:t}){const n=h.useMemo(()=>{if(!e.length)return null;const a=new Map;for(const d of e){const v=d.metrics;if(v)for(const[S,k]of Object.entries(v)){if(k==null||Number.isNaN(k))continue;const b=a.get(S);b?b.push(k):a.set(S,[k])}}return a.size?{entries:(t.length?t.filter(d=>a.has(d)):Array.from(a.keys()).sort()).map(d=>{const v=a.get(d)??[],S=Math.min(...v),k=Math.max(...v),b=v.reduce((N,y)=>N+y,0)/Math.max(1,v.length);return{key:d,value:v[0],min:S,max:k,avg:b,count:v.length}}),totalItems:e.length}:null},[e,t]);if(!n)return null;const{entries:r,totalItems:s}=n,i=r.slice(0,nS),o=r.length-i.length,l=s>1;return u.jsxs("div",{className:"rounded-xl border border-border bg-panel p-3",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Selected metrics"}),u.jsxs("div",{className:"text-[11px] text-muted",children:[s," item",s===1?"":"s"]})]}),u.jsxs("div",{className:"space-y-1",children:[i.map(a=>u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsx("span",{className:"text-muted w-28 shrink-0 truncate",title:a.key,children:a.key}),u.jsxs("span",{className:"font-mono text-text text-right",children:[l?`${jt(a.min)}  ${jt(a.max)}`:jt(a.value),l&&u.jsxs("span",{className:"text-[10px] text-muted ml-2",children:["avg ",jt(a.avg),a.count!==s?`  ${a.count}/${s}`:""]})]})]},a.key)),o>0&&u.jsxs("div",{className:"text-[11px] text-muted",children:["+",o," more"]})]})]})}function iS({filters:e,onChangeFilters:t}){const n=h.useMemo(()=>E1(e),[e]),r=h.useMemo(()=>b1(e),[e]),s=h.useMemo(()=>N1(e)??"",[e]),i=h.useMemo(()=>j1(e)??"",[e]),o=h.useMemo(()=>M1(e)??"",[e]),l=h.useMemo(()=>R1(e)??"",[e]),a=h.useMemo(()=>L1(e)??"",[e]),c=h.useMemo(()=>T1(e)??"",[e]),f=h.useMemo(()=>I1(e)??{},[e]),d=h.useMemo(()=>Oh(f.from),[f.from]),v=h.useMemo(()=>Oh(f.to),[f.to]),S=h.useMemo(()=>_1(e),[e]),k=h.useMemo(()=>P1(e),[e]),[b,N]=h.useState((S==null?void 0:S.op)??">="),[y,g]=h.useState((k==null?void 0:k.op)??">=");h.useEffect(()=>{S!=null&&S.op&&N(S.op)},[S==null?void 0:S.op]),h.useEffect(()=>{k!=null&&k.op&&g(k.op)},[k==null?void 0:k.op]);const p=(m,C)=>{const L=new Set(n),T=new Set(r);m==="include"?L.has(C)?L.delete(C):(L.add(C),T.delete(C)):T.has(C)?T.delete(C):(T.add(C),L.delete(C));let M=Ig(e,Array.from(L));M=_g(M,Array.from(T)),t(M)};return u.jsxs("div",{className:"rounded-xl border border-border bg-panel p-3",children:[u.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted mb-3",children:"Attributes"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-muted mb-2",children:"Rating"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-[11px] text-muted mb-1",children:"Include"}),u.jsxs("div",{className:"flex flex-wrap gap-1",children:[jh.map(m=>{const C=n.includes(m);return u.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded border text-[11px] flex items-center justify-center transition-colors ${C?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",m),"aria-pressed":C,title:`Include ${m} star${m>1?"s":""}`,children:[m,""]},`stars-in-${m}`)}),u.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded border text-[11px] flex items-center justify-center transition-colors ${n.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("include",0),"aria-pressed":n.includes(0),title:"Include unrated",children:"None"})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[11px] text-muted mb-1",children:"Exclude"}),u.jsxs("div",{className:"flex flex-wrap gap-1",children:[jh.map(m=>{const C=r.includes(m);return u.jsxs("button",{className:`h-7 min-w-[32px] px-2 rounded border text-[11px] flex items-center justify-center transition-colors ${C?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",m),"aria-pressed":C,title:`Exclude ${m} star${m>1?"s":""}`,children:[m,""]},`stars-out-${m}`)}),u.jsx("button",{className:`h-7 min-w-[48px] px-2 rounded border text-[11px] flex items-center justify-center transition-colors ${r.includes(0)?"bg-accent-muted text-star-active border-border":"bg-surface text-text border-border/70 hover:bg-surface-hover"}`,onClick:()=>p("exclude",0),"aria-pressed":r.includes(0),title:"Exclude unrated",children:"None"})]})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-muted mb-2",children:"Filename"}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Contains"}),u.jsx("input",{className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:s,placeholder:"e.g. draft",onChange:m=>t(Pg(e,m.target.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Does not contain"}),u.jsx("input",{className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:i,placeholder:"e.g. v1",onChange:m=>t(Og(e,m.target.value))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-muted mb-2",children:"Comments"}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Contains"}),u.jsx("input",{className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:o,placeholder:"e.g. hero",onChange:m=>t(Fg(e,m.target.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Does not contain"}),u.jsx("input",{className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:l,placeholder:"e.g. todo",onChange:m=>t(Dg(e,m.target.value))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-muted mb-2",children:"URL"}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Contains"}),u.jsx("input",{className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:a,placeholder:"e.g. s3://bucket",onChange:m=>t(zg(e,m.target.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Does not contain"}),u.jsx("input",{className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:c,placeholder:"e.g. http://",onChange:m=>t(Ag(e,m.target.value))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-muted mb-2",children:"Date Added"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"From"}),u.jsx("input",{type:"date",className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:d,onChange:m=>t(sc(e,{from:m.target.value||null,to:f.to??null}))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"To"}),u.jsx("input",{type:"date",className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:v,onChange:m=>t(sc(e,{from:f.from??null,to:m.target.value||null}))})]})]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide text-muted mb-2",children:"Dimensions"}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Width"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("select",{className:"h-8 w-16 rounded-lg px-1 border border-border bg-surface text-text",value:b,onChange:m=>{const C=m.target.value;N(C),S&&t(Ao(e,{op:C,value:S.value}))},children:Mh.map(m=>u.jsx("option",{value:m,children:m},`w-${m}`))}),u.jsx("input",{type:"number",className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:S?String(S.value):"",min:0,placeholder:"px",onChange:m=>{const C=m.target.value;if(!C){t(Ao(e,null));return}const L=Number(C);Number.isFinite(L)&&t(Ao(e,{op:b,value:L}))}})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Height"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("select",{className:"h-8 w-16 rounded-lg px-1 border border-border bg-surface text-text",value:y,onChange:m=>{const C=m.target.value;g(C),k&&t($o(e,{op:C,value:k.value}))},children:Mh.map(m=>u.jsx("option",{value:m,children:m},`h-${m}`))}),u.jsx("input",{type:"number",className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:k?String(k.value):"",min:0,placeholder:"px",onChange:m=>{const C=m.target.value;if(!C){t($o(e,null));return}const L=Number(C);Number.isFinite(L)&&t($o(e,{op:y,value:L}))}})]})]})]})]})]})]})}function oS({items:e,filteredItems:t,metricKeys:n,selectedItems:r,selectedMetric:s,onSelectMetric:i,filters:o,onChangeRange:l}){const[a,c]=h.useState(!1),f=s&&n.includes(s)?s:n[0];return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-end justify-between gap-2",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"block text-xs uppercase tracking-wide text-muted mb-1",children:"Metric"}),a?u.jsx("div",{className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-[12px] text-muted flex items-center",children:"All metrics"}):u.jsx("select",{className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:f,onChange:d=>i(d.target.value),children:n.map(d=>u.jsx("option",{value:d,children:d},d))})]}),u.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:()=>c(d=>!d),"aria-pressed":a,children:a?"Show one":"Show all"})]}),a?u.jsx("div",{className:"space-y-3",children:n.map(d=>u.jsx(Rh,{metricKey:d,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l,showTitle:!0},d))}):f?u.jsx(Rh,{metricKey:f,items:e,filteredItems:t,selectedItems:r,filters:o,onChangeRange:l}):u.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]})}function Rh({items:e,filteredItems:t,metricKey:n,selectedItems:r,filters:s,onChangeRange:i,showTitle:o=!1}){const l=h.useMemo(()=>Lh(e,n),[e,n]),a=h.useMemo(()=>Da(l,jr),[l]),c=h.useMemo(()=>Lh(t,n),[t,n]),f=h.useMemo(()=>a?Da(c,jr,a):null,[c,a]),d=O1(s,n),[v,S]=h.useState(null),[k,b]=h.useState(!1),N=h.useRef(null),y=h.useRef(null),[g,p]=h.useState(null),[m,C]=h.useState(""),[L,T]=h.useState(""),[M,I]=h.useState(null),E=v??d,P=a?{min:a.min,max:a.max}:null,ee=h.useMemo(()=>{var oe;if(!(r!=null&&r.length))return[];const Q=[];for(const re of r){const fe=(oe=re.metrics)==null?void 0:oe[n];fe==null||Number.isNaN(fe)||Q.push(fe)}return Q},[r,n]),ne=ee.length===1?ee[0]:null,H=h.useMemo(()=>!a||ee.length<2?null:Da(ee,jr,a),[ee,a]);h.useEffect(()=>{if(!d||!P){M!=="min"&&C(d?Fn(d.min):""),M!=="max"&&T(d?Fn(d.max):"");return}if(M!=="min"){const Q=Xr(d.min,P.min)?"":Fn(d.min);C(Q)}if(M!=="max"){const Q=Xr(d.max,P.max)?"":Fn(d.max);T(Q)}},[d,P,M]),h.useEffect(()=>{p(null)},[n,P==null?void 0:P.min,P==null?void 0:P.max]);const Ie=Q=>{var fe;if(!P)return null;const oe=(fe=y.current)==null?void 0:fe.getBoundingClientRect();if(!oe)return null;const re=pd((Q.clientX-oe.left)/oe.width);return P.min+(P.max-P.min)*re},be=(Q,oe)=>{if(!P)return;const re=N.current??Q,fe=Ih(re,Q);S(fe),oe&&i(n,fe)},me=Q=>{var re;if(!P)return;Q.preventDefault();const oe=Ie(Q);oe!=null&&(b(!0),S(null),N.current=oe,p(oe),(re=y.current)==null||re.setPointerCapture(Q.pointerId),be(oe,!1))},O=Q=>{const oe=Ie(Q);if(oe==null){k||p(null);return}p(oe),k&&be(oe,!1)},U=Q=>{var re;if(!k)return;b(!1),(re=y.current)==null||re.releasePointerCapture(Q.pointerId);const oe=Ie(Q);oe!=null&&(p(oe),be(oe,!0)),N.current=null,setTimeout(()=>S(null),0)},q=(Q,oe)=>{if(!P)return;const re=_h(Q),fe=_h(oe);if(!re.valid||!fe.valid){re.valid||C(d?Fn(d.min):""),fe.valid||T(d?Fn(d.max):"");return}if(re.value==null&&fe.value==null){i(n,null);return}const ke=re.value??P.min,_e=fe.value??P.max,ot=Ph(ke,P.min,P.max),je=Ph(_e,P.min,P.max),lt=Ih(ot,je);if(Xr(lt.min,P.min)&&Xr(lt.max,P.max)){i(n,null);return}i(n,lt)};if(!a||!P)return u.jsxs("div",{className:"rounded-xl border border-border bg-panel p-3",children:[o&&u.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted mb-2",children:n}),u.jsx("div",{className:"text-sm text-muted",children:"No values found for this metric."})]});const de=ee.length;return u.jsxs("div",{className:"rounded-xl border border-border bg-panel p-3",children:[o&&u.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted mb-2",children:n}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-muted mb-2",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{children:["Population: ",a.count]}),u.jsxs("span",{children:["Filtered: ",(f==null?void 0:f.count)??0]}),de>1&&u.jsxs("span",{className:"text-text",children:["Selected: ",de]})]}),ne!=null&&u.jsxs("span",{className:"text-text",children:["Selected: ",jt(ne)]})]}),u.jsxs("svg",{ref:y,viewBox:`0 0 ${jr} 100`,preserveAspectRatio:"none",className:"w-full h-28 cursor-crosshair rounded-md bg-surface-inset",onPointerDown:me,onPointerMove:O,onPointerUp:U,onPointerLeave:()=>p(null),children:[za(a.bins,"#2e3a4b"),f&&za(f.bins,"#3a8fff"),H&&za(H.bins,"#f59e0b",{opacity:.55}),E&&lS(E,P),ne!=null&&Th(ne,P,{color:"var(--highlight)",strokeWidth:.7}),g!=null&&Th(g,P,{color:"rgba(255,255,255,0.75)",strokeWidth:.5,dashed:!0})]}),u.jsxs("div",{className:"flex items-center justify-between text-[11px] text-muted mt-2",children:[u.jsx("span",{children:jt(P==null?void 0:P.min)}),u.jsxs("div",{className:"flex flex-col items-center text-center leading-tight",children:[E?u.jsx("span",{className:"text-text",children:Xr(E.min,P.min)?` ${jt(E.max)}`:Xr(E.max,P.max)?` ${jt(E.min)}`:`${jt(E.min)}  ${jt(E.max)}`}):g!=null?u.jsxs("span",{className:"text-text",children:["Cursor: ",jt(g)]}):u.jsx("span",{children:"Drag to filter"}),E&&g!=null&&u.jsxs("span",{className:"text-[10px] text-muted",children:["Cursor: ",jt(g)]})]}),u.jsx("span",{children:jt(P==null?void 0:P.max)})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Min"}),u.jsx("input",{type:"number",step:"any",className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:m,placeholder:Fn(P.min),onFocus:()=>I("min"),onBlur:()=>{I(null),q(m,L)},onChange:Q=>C(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&Q.currentTarget.blur()}})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[11px] text-muted mb-1",children:"Max"}),u.jsx("input",{type:"number",step:"any",className:"h-8 w-full rounded-lg px-2.5 border border-border bg-surface text-text",value:L,placeholder:Fn(P.max),onFocus:()=>I("max"),onBlur:()=>{I(null),q(m,L)},onChange:Q=>T(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&Q.currentTarget.blur()}})]})]}),u.jsx("div",{className:"flex items-center gap-2 mt-2",children:u.jsx("button",{className:"btn btn-sm",onClick:()=>i(n,null),children:"Clear"})})]})}function Da(e,t,n){if(!e.length)return null;const r=n?n.min:Math.min(...e);let s=n?n.max:Math.max(...e);r===s&&(s=r+1);const i=new Array(t).fill(0),o=t/(s-r);for(const l of e){const a=Math.max(0,Math.min(t-1,Math.floor((l-r)*o)));i[a]+=1}return{bins:i,min:r,max:s,count:e.length}}function Lh(e,t){var r;const n=[];for(const s of e){const i=(r=s.metrics)==null?void 0:r[t];i==null||Number.isNaN(i)||n.push(i)}return n}function za(e,t,n){const r=Math.max(1,...e),s=(n==null?void 0:n.opacity)??.9;return e.map((i,o)=>{const l=i/r*100;return u.jsx("rect",{x:o+.05,y:100-l,width:.9,height:l,fill:t,opacity:s},`${t}-${o}`)})}function lS(e,t){const n=(e.min-t.min)/(t.max-t.min),r=(e.max-t.min)/(t.max-t.min),s=jr*pd(Math.min(n,r)),i=jr*Math.abs(r-n);return u.jsx("rect",{x:s,y:0,width:Math.max(.5,i),height:100,fill:"rgba(255,255,255,0.08)",stroke:"rgba(255,255,255,0.4)",strokeWidth:.4})}function Th(e,t,n){const r=pd((e-t.min)/(t.max-t.min)),s=jr*r;return u.jsx("line",{x1:s,y1:0,x2:s,y2:100,stroke:n.color,strokeWidth:n.strokeWidth??.5,strokeDasharray:n.dashed?"1.2 1.2":void 0,opacity:.95,vectorEffect:"non-scaling-stroke"})}function Ih(e,t){return e<t?{min:e,max:t}:{min:t,max:e}}function pd(e){return e<0?0:e>1?1:e}function jt(e){if(e==null||Number.isNaN(e))return"";const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Fn(e){if(!Number.isFinite(e))return"";const t=e.toString();return t.includes("e")?e.toFixed(6):t}function _h(e){const t=e.trim();if(!t)return{value:null,valid:!0};const n=Number(t);return Number.isFinite(n)?{value:n,valid:!0}:{value:null,valid:!1}}function Ph(e,t,n){return e<t?t:e>n?n:e}function Xr(e,t){const n=Math.max(1,Math.abs(e),Math.abs(t));return Math.abs(e-t)<=1e-6*n}function Oh(e){return e?e.length>=10?e.slice(0,10):e:""}const aS=[{label:"Root",path:"/"}];function uS({leftTool:e,onToolChange:t,views:n,activeViewId:r,onActivateView:s,onSaveView:i,current:o,data:l,onOpenFolder:a,onContextMenu:c,items:f,filteredItems:d,metricKeys:v,selectedItems:S,selectedMetric:k,onSelectMetric:b,filters:N,onChangeRange:y,onChangeFilters:g,onResize:p}){const m=e==="folders"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover",C=e==="metrics"?"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-accent-muted text-accent":"w-7 h-7 rounded-md border border-border flex items-center justify-center transition-colors bg-surface text-text hover:bg-surface-hover";return u.jsxs("div",{className:"app-left-panel col-start-1 row-start-2 relative border-r border-border bg-panel overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-y-0 left-0 w-10 border-r border-border flex flex-col items-center gap-2 py-3 bg-surface-overlay",children:[u.jsx("button",{className:m,title:"Folders","aria-label":"Folders","aria-pressed":e==="folders",onClick:()=>t("folders"),children:u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:u.jsx("path",{d:"M3 7.5h6l2-2h10a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2z"})})}),u.jsx("button",{className:C,title:"Metrics / Filters","aria-label":"Metrics and Filters","aria-pressed":e==="metrics",onClick:()=>t("metrics"),children:u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[u.jsx("path",{d:"M4 19V9"}),u.jsx("path",{d:"M10 19V5"}),u.jsx("path",{d:"M16 19v-7"}),u.jsx("path",{d:"M3 19h18"})]})})]}),u.jsx("div",{className:"ml-10 h-full",children:e==="folders"?u.jsxs("div",{className:"h-full flex flex-col",children:[u.jsxs("div",{className:"px-2 py-2 border-b border-border",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("div",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Smart Folders"}),u.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:i,title:"Save current view as Smart Folder",children:"+ New"})]}),n.length?u.jsx("div",{className:"flex flex-col gap-1",children:n.map(L=>{const T=L.id===r;return u.jsx("button",{className:`text-left px-2 py-1.5 rounded-md text-sm ${T?"bg-accent-muted text-accent":"hover:bg-hover text-text"}`,onClick:()=>s(L),children:L.name},L.id)})}):u.jsx("div",{className:"text-xs text-muted px-1 py-1.5",children:"No saved Smart Folders yet."})]}),u.jsx(tS,{current:o,roots:aS,data:l,onOpen:a,onContextMenu:c,className:"flex-1 min-h-0 overflow-auto scrollbar-thin",showResizeHandle:!1})]}):u.jsx(rS,{items:f,filteredItems:d,metricKeys:v,selectedItems:S,selectedMetric:k,onSelectMetric:b,filters:N,onChangeRange:y,onChangeFilters:g})}),u.jsx("div",{className:"toolbar-offset absolute bottom-0 right-0 w-1.5 cursor-col-resize z-10 hover:bg-accent/20",onMouseDown:p})]})}function cS({persistenceEnabled:e,recentSummary:t,onDismissRecent:n,browserZoomPercent:r}){const s=t?` (${t.names.join(", ")}${t.extra?` +${t.extra}`:""})`:"",i=!!(t!=null&&t.names.length),o=typeof r=="number"?r:null,l=o!==null&&Math.abs(o-100)>=2;return!e||l||!!t?u.jsx("div",{className:"border-b border-border bg-panel",children:u.jsxs("div",{className:"px-3 py-2 flex flex-col gap-2",children:[!e&&u.jsxs("div",{className:"rounded-md border border-danger/40 bg-danger/10 text-danger text-xs px-2.5 py-1.5",children:[u.jsx("span",{className:"font-semibold",children:"Not persisted."})," Workspace is read-only; edits stay in memory until restart."]}),l&&u.jsxs("div",{className:"rounded-md border border-accent/30 bg-accent/10 text-text text-xs px-2.5 py-1.5",children:[u.jsxs("span",{className:"font-semibold",children:["Browser zoom ",Math.round(o),"%."]})," For best results, set it to 100% so UI elements stay in correct proportions."]}),t&&u.jsxs("div",{className:"rounded-md border border-accent/30 bg-accent/10 text-text text-xs px-2.5 py-1.5 flex items-center justify-between gap-3",children:[u.jsxs("span",{children:["Recent updates: ",t.count," item",t.count===1?"":"s",i?s:""]}),u.jsx("button",{className:"text-muted hover:text-text transition-colors",onClick:n,"aria-label":"Dismiss recent activity",children:"Dismiss"})]})]})}):u.jsx(u.Fragment,{})}const Fh=6e3,dS=15*6e4,fS=1e4,hS=24*60*6e4,ze={sortKey:"sortKey",sortDir:"sortDir",sortSpec:"sortSpec",starFilters:"starFilters",filterAst:"filterAst",selectedMetric:"selectedMetric",viewMode:"viewMode",gridItemSize:"gridItemSize",leftOpen:"leftOpen",rightOpen:"rightOpen"};function pS(){var Md;const[e,t]=h.useState("/"),[n,r]=h.useState(""),[s,i]=h.useState([]),[o,l]=h.useState(null),[a,c]=h.useState(0),[f,d]=h.useState(null),[v,S]=h.useState(100),[k,b]=h.useState(null),[N,y]=h.useState(()=>({filters:{and:[]},sort:{kind:"builtin",key:"added",dir:"desc"},selectedMetric:void 0})),[g,p]=h.useState(()=>Date.now()),[m,C]=h.useState("adaptive"),[L,T]=h.useState(220),[M,I]=h.useState(!0),[E,P]=h.useState(!0),[ee,ne]=h.useState("folders"),[H,Ie]=h.useState([]),[be,me]=h.useState(null),[O,U]=h.useState(null),[q,de]=h.useState(null),[Q,oe]=h.useState({}),re=h.useRef(null),fe=h.useRef(null),ke=h.useRef(null),_e=h.useRef(null),ot=h.useRef(!1),je=h.useRef(null),lt=h.useRef(new Map),pr=h.useRef(new Map),{leftW:mr,rightW:gr,onResizeLeft:hn,onResizeRight:en}=V1(re),[vr,A]=h.useState(!1),[J,Z]=h.useState(null),j=Gr(),F=Vw(),K=Dl(),B=Kw(),[se,ge]=h.useState("idle"),[Pe,xe]=h.useState({}),[at,we]=h.useState([]),[yt,Me]=h.useState(new Set),_n=h.useRef(new Map),[Ze,$l]=h.useState(null),[Ki,Ul]=h.useState(null),[Bg,Bl]=h.useState(!1),[Gi,Wl]=h.useState(()=>Date.now()),[Wg,Hg]=h.useState(!0);h.useEffect(()=>{const x=an(gh());t(x);const R=()=>{const _=an(gh());l(null),t(z=>z===_?z:(c($=>$+1),_))};return window.addEventListener("hashchange",R),()=>window.removeEventListener("hashchange",R)},[]),h.useEffect(()=>()=>{for(const x of _n.current.values())window.clearTimeout(x);_n.current.clear()},[]),h.useEffect(()=>{if(Ki==null){Bl(!1);return}Bl(!0);const x=window.setTimeout(()=>Bl(!1),Fh);return()=>window.clearTimeout(x)},[Ki]),h.useEffect(()=>{if(Ze==null)return;Wl(Date.now());const x=window.setInterval(()=>Wl(Date.now()),1e4);return()=>window.clearInterval(x)},[Ze]),h.useEffect(()=>{const x=window.setInterval(()=>{const R=Date.now();we(_=>_.filter(z=>R-z.ts<3e4))},5e3);return()=>window.clearInterval(x)},[]);const{data:De,refetch:Hl,isLoading:CS,isError:ES}=Tg(e),yr=n.trim().length>0,md=K1(n,250),gd=h.useMemo(()=>md.trim().replace(/\s+/g," "),[md]),vd=p1(yr?gd:"",e),Vl=h.useMemo(()=>vh(N.filters),[N.filters]),tn=h.useMemo(()=>{var R;return(yr?((R=vd.data)==null?void 0:R.items)??[]:(De==null?void 0:De.items)??[]).map(_=>({..._,star:Q[_.path]!==void 0?Q[_.path]:_.star}))},[yr,vd.data,De,Q]),et=h.useMemo(()=>{const x=U1(tn,N.filters);return H1(x,N.sort,g)},[tn,N.filters,N.sort,g]),Vg=tn.length,Qg=et.length,Nt=h.useMemo(()=>et.map(x=>x.path),[et]),Kg=h.useMemo(()=>{if(!s.length)return[];const x=new Map(tn.map(_=>[_.path,_])),R=new Map(et.map(_=>[_.path,_]));return s.map(_=>x.get(_)??R.get(_)).filter(_=>!!_)},[s,tn,et]),Ws=N.sort.kind==="metric"?N.sort.key:null,yd=h.useMemo(()=>Ws?et.some(x=>{var _;const R=(_=x.metrics)==null?void 0:_[Ws];return R!=null&&!Number.isNaN(R)}):!1,[et,Ws]),xd=h.useCallback(x=>{Me($=>{if($.has(x))return $;const W=new Set($);return W.add(x),W});const R=_n.current,_=R.get(x);_&&window.clearTimeout(_);const z=window.setTimeout(()=>{Me($=>{if(!$.has(x))return $;const W=new Set($);return W.delete(x),W}),R.delete(x)},Fh);R.set(x,z)},[]),Ql=h.useCallback(x=>{const R=Date.now(),z=n1(x)??R;$l($=>$==null?z:$>z?$:z),Ul(R),Wl(R)},[]),Kl=h.useCallback((x,R)=>{const _=Date.now();we(z=>{const $=z.filter(le=>_-le.ts<3e4&&le.path!==x);return[{path:x,ts:_,kind:R},...$].slice(0,6)}),xd(x)},[xd]),Gl=h.useCallback(x=>{const R=Object.prototype.hasOwnProperty.call(x,"star"),_=x.metrics!==void 0,z=x.comments!==void 0;if(!R&&!_&&!z)return;const $=W=>{if(W.path!==x.path)return W;let le=W;return R&&W.star!==x.star&&(le={...le,star:x.star??null}),_&&(le={...le,metrics:x.metrics??null}),z&&W.comments!==x.comments&&(le={...le,comments:x.comments??""}),le};j.setQueriesData({predicate:({queryKey:W})=>Array.isArray(W)&&W[0]==="folder"},W=>{if(!W)return W;let le=!1;const X=W.items.map(G=>{const ie=$(G);return ie!==G&&(le=!0),ie});return le?{...W,items:X}:W}),j.setQueriesData({predicate:({queryKey:W})=>Array.isArray(W)&&W[0]==="search"},W=>{if(!W)return W;let le=!1;const X=W.items.map(G=>{const ie=$(G);return ie!==G&&(le=!0),ie});return le?{...W,items:X}:W})},[j]),Yl=h.useCallback(async x=>{const R=an(x||"/"),_=lt.current,z=pr.current,$=_.get(R);if($!==void 0)return $;const W=z.get(R);if(W)return W;const le=(async()=>{const X=[R],G=new Set;let ie=0;for(;X.length;){const Be=X.pop();if(!G.has(Be)){G.add(Be);try{const xr=await he.getFolder(Be);ie+=xr.items.length;for(const ea of xr.dirs)ea.kind==="branch"&&X.push(fd(Be,ea.name))}catch(xr){console.warn(`Failed to count folder ${Be}:`,xr)}}}return _.set(R,ie),z.delete(R),ie})();return z.set(R,le),le},[]);h.useEffect(()=>{let x=!1;const R=an(e||"/");return(async()=>{const z=Yl("/"),$=R==="/"?z:Yl(R),[W,le]=await Promise.all([z,$]);x||(de(W),U(le))})().catch(z=>console.warn("Failed to compute folder counts:",z)),()=>{x=!0}},[e,Yl]),h.useEffect(()=>{Kx();const x=Yx(_=>{if(_.type==="presence"){const W=_.data;if(!(W!=null&&W.gallery_id))return;xe(le=>({...le,[W.gallery_id]:W}));return}const z=_.data;if(!(z!=null&&z.path))return;const $=z.path;if(_.type==="item-updated"){const W=_.data,le={v:1,tags:W.tags??[],notes:W.notes??"",star:W.star??null,version:W.version??1,updated_at:W.updated_at??"",updated_by:W.updated_by??"server"};j.setQueryData(Oi($),le),Gl({path:$,star:W.star??null,metrics:W.metrics,comments:W.notes??""}),qw($,le),Kl($,"item-updated"),Ql(W.updated_at),oe(X=>{if(X[$]===void 0)return X;const G={...X};return delete G[$],G})}else if(_.type==="metrics-updated"){const W=_.data;Gl({path:$,metrics:W.metrics}),Kl($,"metrics-updated"),Ql(W.updated_at)}}),R=qx(ge);return()=>{x(),R(),Gx()}},[Kl,j,Gl,Ql]),h.useEffect(()=>{let x=!1;const R=an(e||"/"),_=async()=>{try{const $=await he.postPresence(R);!x&&($!=null&&$.gallery_id)&&xe(W=>({...W,[$.gallery_id]:$}))}catch{}};_();const z=window.setInterval(_,3e4);return()=>{x=!0,window.clearInterval(z)}},[e]),h.useEffect(()=>{let x=!1;return he.getHealth().then(R=>{var z;if(x)return;const _=((z=R==null?void 0:R.labels)==null?void 0:z.enabled)??!0;Hg(_)}).catch(()=>{}),()=>{x=!0}},[]);const Gg=h.useMemo(()=>{const x=tn,R={0:0,1:0,2:0,3:0,4:0,5:0};for(const _ of x){const z=Q[_.path]??_.star??0;R[String(z)]=(R[String(z)]||0)+1}return R},[tn,Q]),Pn=h.useMemo(()=>{const x=new Set;let R=0;for(const _ of tn){const z=_.metrics;if(z)for(const $ of Object.keys(z))x.add($);if(R+=1,R>=250&&x.size>0)break}return Array.from(x).sort()},[tn]);h.useEffect(()=>{Pn.length&&y(x=>{const R=x.selectedMetric&&Pn.includes(x.selectedMetric)?x.selectedMetric:Pn[0];return R===x.selectedMetric?x:{...x,selectedMetric:R}})},[Pn]),h.useEffect(()=>{N.sort.kind==="metric"&&(Pn.includes(N.sort.key)||y(x=>({...x,sort:{kind:"builtin",key:"added",dir:x.sort.dir}})))},[Pn,N.sort]);const wd=h.useMemo(()=>D1(N.filters),[N.filters]),Yi=O??Vg,Yg=q??Yi,Sd=yr||wd>0,qi=Pe[e],qg=F.state==="syncing"?"Syncing":F.state==="error"?F.message?`Not saved  ${F.message}`:"Not saved  retry":"All changes saved",Xg=se==="live"?"Live":se==="reconnecting"?"Reconnecting":se==="offline"?"Offline":"Connecting",ql=Ze!=null,Jg=h.useMemo(()=>!ql||Ze==null?"No edits yet.":Gi-Ze<hS?r1(Ze,Gi):s1(Ze),[ql,Ze,Gi]),kd=Ze==null?null:Math.max(0,Gi-Ze),Zg=((qi==null?void 0:qi.editing)??0)>0||kd!=null&&kd<dS,ev=B!=null&&B>fS,tv=se==="offline"||se==="connecting"||se==="idle",nv=se==="reconnecting"||K||F.state==="error"||ev,rv=tv?"offline":nv?"unstable":Bg?"recent":Zg?"editing":"live",sv=h.useMemo(()=>{if(!at.length)return null;const x=new Set,R=[];for(const z of at)x.has(z.path)||(x.add(z.path),R.push(z.path));const _=R.slice(0,2).map(z=>{const $=et.find(W=>W.path===z);return($==null?void 0:$.name)??z.split("/").pop()??z});return{count:R.length,names:_,extra:Math.max(0,R.length-_.length)}},[at,et]),iv=Sd?Qg:Yi,ov=Sd||e==="/"?Yi:Yg,ut=h.useCallback(x=>{y(R=>({...R,filters:x(R.filters)}))},[]),lv=h.useCallback(x=>{y(R=>({...R,filters:x}))},[]),Xi=h.useCallback(()=>{ut(x=>Oa(x,[]))},[ut]),Cd=h.useCallback(()=>{y(x=>({...x,filters:{and:[]}}))},[]),Xl=h.useCallback((x,R)=>{ut(_=>F1(_,x,R))},[ut]),Ed=h.useMemo(()=>{var R,_,z,$,W,le;const x=[];for(const X of N.filters.and)if("stars"in X){const G=X.stars||[];if(!G.length)continue;x.push({id:"stars",label:`Rating in: ${Aa(G)}`,onRemove:()=>Xi()})}else if("starsIn"in X){const G=X.starsIn.values||[];if(!G.length)continue;x.push({id:"stars-in",label:`Rating in: ${Aa(G)}`,onRemove:()=>Xi()})}else if("starsNotIn"in X){const G=X.starsNotIn.values||[];if(!G.length)continue;x.push({id:"stars-not-in",label:`Rating not in: ${Aa(G)}`,onRemove:()=>ut(ie=>_g(ie,[]))})}else if("nameContains"in X){const G=(R=X.nameContains.value)==null?void 0:R.trim();if(!G)continue;x.push({id:"name-contains",label:`Filename contains: ${G}`,onRemove:()=>ut(ie=>Pg(ie,""))})}else if("nameNotContains"in X){const G=(_=X.nameNotContains.value)==null?void 0:_.trim();if(!G)continue;x.push({id:"name-not-contains",label:`Filename not: ${G}`,onRemove:()=>ut(ie=>Og(ie,""))})}else if("commentsContains"in X){const G=(z=X.commentsContains.value)==null?void 0:z.trim();if(!G)continue;x.push({id:"comments-contains",label:`Comments contain: ${G}`,onRemove:()=>ut(ie=>Fg(ie,""))})}else if("commentsNotContains"in X){const G=($=X.commentsNotContains.value)==null?void 0:$.trim();if(!G)continue;x.push({id:"comments-not-contains",label:`Comments not: ${G}`,onRemove:()=>ut(ie=>Dg(ie,""))})}else if("urlContains"in X){const G=(W=X.urlContains.value)==null?void 0:W.trim();if(!G)continue;x.push({id:"url-contains",label:`URL contains: ${G}`,onRemove:()=>ut(ie=>zg(ie,""))})}else if("urlNotContains"in X){const G=(le=X.urlNotContains.value)==null?void 0:le.trim();if(!G)continue;x.push({id:"url-not-contains",label:`URL not: ${G}`,onRemove:()=>ut(ie=>Ag(ie,""))})}else if("dateRange"in X){const{from:G,to:ie}=X.dateRange;if(!G&&!ie)continue;x.push({id:"date-range",label:`Date: ${vS(G,ie)}`,onRemove:()=>ut(Be=>sc(Be,null))})}else if("widthCompare"in X){const{op:G,value:ie}=X.widthCompare;x.push({id:"width-compare",label:`Width ${G} ${ie}`,onRemove:()=>ut(Be=>Ao(Be,null))})}else if("heightCompare"in X){const{op:G,value:ie}=X.heightCompare;x.push({id:"height-compare",label:`Height ${G} ${ie}`,onRemove:()=>ut(Be=>$o(Be,null))})}else if("metricRange"in X){const{key:G,min:ie,max:Be}=X.metricRange;x.push({id:`metric:${G}`,label:`${G}: ${xS(ie,Be)}`,onRemove:()=>Xl(G,null)})}return x},[N.filters,Xi,Xl,ut]),av=h.useCallback(x=>{const R=new Set(Vl);R.has(x)?R.delete(x):R.add(x),y(_=>({..._,filters:Oa(_.filters,Array.from(R))}))},[Vl]),uv=h.useCallback(()=>{I(!0),ne("metrics")},[]),cv=h.useCallback(x=>{y(R=>({...R,sort:x})),x.kind==="builtin"&&x.key==="random"&&p(Date.now())},[]),bd=h.useCallback(x=>{if(x==="/"||x==="")return"Lenslet | Root";const R=x.split("/").filter(Boolean);if(!R.length)return"Lenslet";const _=R.slice(-2).join("/");return`Lenslet | ${R.length>2?`.../${_}`:`/${_}`}`},[]),dv=h.useMemo(()=>yS(e),[e]);h.useEffect(()=>{document.title=bd(e)},[e,bd]),h.useEffect(()=>{let x=!0;return he.getViews().then(R=>{x&&Ie(R.views||[])}).catch(()=>{x&&Ie([])}),()=>{x=!1}},[]),h.useEffect(()=>{yr&&(i([]),l(null))},[yr]),h.useEffect(()=>{const x=re.current,R=_e.current;if(!x||!R)return;const _=()=>{const z=Math.max(48,Math.round(R.getBoundingClientRect().height));x.style.setProperty("--toolbar-h",`${z}px`)};if(_(),"ResizeObserver"in window){const z=new ResizeObserver(_);return z.observe(R),()=>z.disconnect()}return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]),h.useEffect(()=>{try{const x=localStorage.getItem(ze.sortKey),R=localStorage.getItem(ze.sortDir),_=localStorage.getItem(ze.sortSpec),z=localStorage.getItem(ze.starFilters),$=localStorage.getItem(ze.filterAst),W=localStorage.getItem(ze.selectedMetric),le=localStorage.getItem(ze.viewMode),X=localStorage.getItem(ze.gridItemSize),G=localStorage.getItem(ze.leftOpen),ie=localStorage.getItem(ze.rightOpen),xr=(tt=>{if(!tt)return null;const We=Ia(tt);return!We||typeof We!="object"?null:We.kind==="builtin"&&(We.key==="name"||We.key==="added"||We.key==="random")&&(We.dir==="asc"||We.dir==="desc")||We.kind==="metric"&&typeof We.key=="string"&&We.key.length>0&&(We.dir==="asc"||We.dir==="desc")?We:null})(_)??{kind:"builtin",key:x==="name"||x==="added"||x==="random"?x:"added",dir:R==="asc"||R==="desc"?R:"desc"};xr.key==="random"&&p(Date.now());let ta=(tt=>{if(!tt)return null;const We=Ia(tt);return rc(We)})($)??{and:[]};if(z){const tt=Ia(z);if(Array.isArray(tt)){const We=tt.filter(yv=>[0,1,2,3,4,5].includes(yv));ta=Oa(ta,We)}}if(y(tt=>({...tt,sort:xr,filters:ta,selectedMetric:W||tt.selectedMetric})),(le==="grid"||le==="adaptive")&&C(le),X){const tt=Number(X);!isNaN(tt)&&tt>=80&&tt<=500&&T(tt)}(G==="0"||G==="false")&&I(!1),(ie==="0"||ie==="false")&&P(!1)}catch{}},[]),h.useEffect(()=>{if(typeof window>"u")return;const x=window.matchMedia("(max-width: 900px)"),R=()=>{x.matches&&(I(!1),P(!1))};return R(),"addEventListener"in x?(x.addEventListener("change",R),()=>x.removeEventListener("change",R)):(x.addListener(R),()=>x.removeListener(R))},[]),h.useEffect(()=>{if(typeof window>"u")return;const x=[1,1.25,1.5,1.75,2,3,4],R=$=>x.reduce((W,le)=>Math.abs(le-$)<Math.abs(W-$)?le:W,x[0]),_=()=>{var Be;const $=window.devicePixelRatio||1,W=R($),le=((Be=window.visualViewport)==null?void 0:Be.scale)??1,X=$*le/W;if(!Number.isFinite(X)){b(null);return}const G=Math.round(X*100),ie=Math.min(500,Math.max(25,G));b(ie)};_(),window.addEventListener("resize",_),window.addEventListener("orientationchange",_);const z=window.visualViewport;return z&&z.addEventListener("resize",_),()=>{window.removeEventListener("resize",_),window.removeEventListener("orientationchange",_),z&&z.removeEventListener("resize",_)}},[]),h.useEffect(()=>{try{localStorage.setItem(ze.sortKey,N.sort.kind==="builtin"?N.sort.key:"added"),localStorage.setItem(ze.sortDir,N.sort.dir),localStorage.setItem(ze.sortSpec,JSON.stringify(N.sort));const x=vh(N.filters);localStorage.setItem(ze.starFilters,JSON.stringify(x)),localStorage.setItem(ze.filterAst,JSON.stringify(N.filters)),N.selectedMetric?localStorage.setItem(ze.selectedMetric,N.selectedMetric):localStorage.removeItem(ze.selectedMetric),localStorage.setItem(ze.viewMode,m),localStorage.setItem(ze.gridItemSize,String(L)),localStorage.setItem(ze.leftOpen,M?"1":"0"),localStorage.setItem(ze.rightOpen,E?"1":"0")}catch{}},[N,m,L,M,E]),h.useEffect(()=>{const x=fe.current;if(!x)return;const R=z=>Math.min(500,Math.max(80,z)),_=z=>{z.ctrlKey&&(z.preventDefault(),T($=>R($+(z.deltaY<0?20:-20))))};return x.addEventListener("wheel",_,{passive:!1}),()=>x.removeEventListener("wheel",_)},[]),h.useEffect(()=>{if(o)return;const x=fe.current;if(!x)return;const R=X=>Math.min(500,Math.max(80,X));let _=null;const z=X=>{if(X.length<2)return 0;const[G,ie]=[X[0],X[1]];return Math.hypot(G.clientX-ie.clientX,G.clientY-ie.clientY)},$=X=>{if(X.touches.length!==2)return;const G=z(X.touches);G&&(_={dist:G,size:L})},W=X=>{if(!_||X.touches.length!==2)return;const G=z(X.touches);if(!G)return;X.preventDefault();const ie=R(_.size*(G/_.dist));T(ie)},le=()=>{_=null};return x.addEventListener("touchstart",$,{passive:!0}),x.addEventListener("touchmove",W,{passive:!1}),x.addEventListener("touchend",le),x.addEventListener("touchcancel",le),()=>{x.removeEventListener("touchstart",$),x.removeEventListener("touchmove",W),x.removeEventListener("touchend",le),x.removeEventListener("touchcancel",le)}},[o,L]),h.useEffect(()=>{if(!o)return;const x=Nt.indexOf(o);if(x===-1)return;const R=[Nt[x-2],Nt[x-1],Nt[x+1],Nt[x+2]].filter(_=>!!_);for(const _ of R)he.prefetchFile(_),he.prefetchThumb(_)},[o,Nt]),h.useEffect(()=>{var R;if(!((R=De==null?void 0:De.items)!=null&&R.length))return;const x=De.items.slice(0,5);for(const _ of x)he.prefetchFile(_.path)},[De==null?void 0:De.path,De==null?void 0:De.items]);const Ji=h.useCallback(x=>{l(null);const R=an(x);t(R),g1(R)},[]),fv=h.useCallback(async()=>{const x=window.prompt("Save Smart Folder as:","New Smart Folder");if(!x)return;const R=mS(x,H),_={id:R,name:x,pool:{kind:"folder",path:e},view:JSON.parse(JSON.stringify(N))},z=[...H.filter($=>$.id!==R),_];Ie(z),me(R);try{await he.saveViews({version:1,views:z})}catch($){if($ instanceof ar&&$.status===403){const W=new Blob([JSON.stringify({version:1,views:z},null,2)],{type:"application/json"});Uo(W,`lenslet-smart-folder-${R}.json`),alert("No-write mode: exported Smart Folder JSON instead of saving.");return}console.error("Failed to save Smart Folder:",$)}},[e,N,H]);h.useEffect(()=>{if(!be)return;const x=H.find(z=>z.id===be);if(!x){me(null);return}const R=x.pool.path===e,_=JSON.stringify(x.view)===JSON.stringify(N);(!R||!_)&&me(null)},[be,H,e,N]);const hv=h.useCallback(x=>{l(x),ot.current||(window.history.pushState({viewer:!0},"",window.location.href),ot.current=!0)},[]),Nd=h.useCallback(()=>{l(null),ot.current&&(ot.current=!1,window.history.back());const x=je.current;if(x){const R=document.getElementById(`cell-${encodeURIComponent(x)}`);R==null||R.focus()}},[]);h.useEffect(()=>{const x=()=>{o&&(ot.current=!1,l(null))};return window.addEventListener("popstate",x),()=>window.removeEventListener("popstate",x)},[o]),h.useEffect(()=>{const x=re.current;if(!x)return;const R=$=>{$.dataTransfer&&Array.from($.dataTransfer.types).includes("Files")&&($.preventDefault(),A(!0))},_=$=>{const W=$.relatedTarget;W&&x.contains(W)||A(!1)},z=async $=>{var X,G;$.preventDefault(),A(!1);const W=Array.from(((X=$.dataTransfer)==null?void 0:X.files)??[]);if(!W.length)return;if(!((((G=De==null?void 0:De.dirs)==null?void 0:G.length)??0)===0)){alert("Uploads are only allowed into folders without subdirectories.");return}for(const ie of W)try{await he.uploadFile(e,ie)}catch(Be){console.error(`Failed to upload ${ie.name}:`,Be)}Hl()};return x.addEventListener("dragover",R),x.addEventListener("dragleave",_),x.addEventListener("drop",z),()=>{x.removeEventListener("dragover",R),x.removeEventListener("dragleave",_),x.removeEventListener("drop",z)}},[e,(Md=De==null?void 0:De.dirs)==null?void 0:Md.length,Hl]),h.useEffect(()=>{const x=()=>Z(null),R=_=>{_.key==="Escape"&&Z(null)};return window.addEventListener("click",x),window.addEventListener("keydown",R),()=>{window.removeEventListener("click",x),window.removeEventListener("keydown",R)}},[]),h.useEffect(()=>{const x=R=>{if(!Lg(R.target)){if((R.ctrlKey||R.metaKey)&&R.key.toLowerCase()==="b"){R.preventDefault(),R.altKey?P(_=>!_):I(_=>!_);return}if(!o){if(R.key==="Backspace"||R.key==="Delete")R.preventDefault(),Ji(v1(e));else if((R.ctrlKey||R.metaKey)&&R.key.toLowerCase()==="a")R.preventDefault(),i(et.map(_=>_.path));else if(R.key==="Escape")s.length&&(R.preventDefault(),i([]));else if(R.key==="/"){R.preventDefault();const _=document.querySelector(".toolbar-right .input");_==null||_.focus()}}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,et,s,o,Ji]);const pv=M?`${mr}px`:"0px",mv=E?`${gr}px`:"0px",jd=o??s[0]??null,Jl=jd?Nt.indexOf(jd):-1,gv=Jl>0,vv=Jl>=0&&Jl<Nt.length-1,Zl=h.useCallback(x=>{if(!Nt.length)return;const R=o??s[0];if(!R)return;const _=Nt.indexOf(R);if(_===-1)return;const z=Math.min(Nt.length-1,Math.max(0,_+x)),$=Nt[z];!$||$===R||(o&&l($),i([$]))},[Nt,o,s]);return u.jsxs("div",{className:"app-shell grid h-full grid-cols-[var(--left)_1fr_var(--right)]",ref:re,style:{"--left":pv,"--right":mv},children:[u.jsx(Ix,{rootRef:_e,onSearch:r,viewerActive:!!o,onBack:Nd,zoomPercent:o?v:void 0,onZoomPercentChange:x=>d(x),currentLabel:dv,itemCount:iv,totalCount:ov,sortSpec:N.sort,metricKeys:Pn,onSortChange:cv,filterCount:wd,onOpenFilters:uv,starFilters:Vl,onToggleStar:av,onClearStars:Xi,onClearFilters:Cd,starCounts:Gg,viewMode:m,onViewMode:C,gridItemSize:L,onGridItemSize:T,leftOpen:M,rightOpen:E,onToggleLeft:()=>I(x=>!x),onToggleRight:()=>P(x=>!x),onPrevImage:()=>Zl(-1),onNextImage:()=>Zl(1),canPrevImage:gv,canNextImage:vv,syncIndicator:{state:rv,presence:qi,syncLabel:qg,connectionLabel:Xg,lastEditedLabel:Jg,hasEdits:ql}}),M&&u.jsx(uS,{leftTool:ee,onToolChange:ne,views:H,activeViewId:be,onActivateView:x=>{var _;me(x.id);const R=rc((_=x.view)==null?void 0:_.filters)??{and:[]};y({...x.view,filters:R}),Ji(x.pool.path),ne("metrics")},onSaveView:fv,current:e,data:De,onOpenFolder:x=>{me(null),Ji(x)},onContextMenu:(x,R)=>{x.preventDefault(),Z({x:x.clientX,y:x.clientY,kind:"tree",payload:{path:R}})},items:tn,filteredItems:et,metricKeys:Pn,selectedItems:Kg,selectedMetric:N.selectedMetric,onSelectMetric:x=>y(R=>({...R,selectedMetric:x})),filters:N.filters,onChangeRange:Xl,onChangeFilters:lv,onResize:hn}),u.jsxs("div",{className:"grid-shell col-start-2 row-start-2 relative overflow-hidden flex flex-col",ref:fe,children:[u.jsx("div",{"aria-live":"polite",className:"sr-only",children:s.length?`${s.length} selected`:""}),u.jsx(cS,{persistenceEnabled:Wg,recentSummary:sv,onDismissRecent:()=>we([]),browserZoomPercent:k}),Ed.length>0&&u.jsx("div",{className:"sticky top-0 z-10 px-3 py-2 bg-panel border-b border-border",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsx("span",{className:"text-[11px] uppercase tracking-wide text-muted",children:"Filters"}),Ed.map(x=>u.jsxs("span",{className:"filter-chip",children:[u.jsx("span",{className:"truncate max-w-[240px]",title:x.label,children:x.label}),u.jsx("button",{className:"filter-chip-remove","aria-label":`Clear filter ${x.label}`,onClick:x.onRemove,children:""})]},x.id)),u.jsx("button",{className:"btn btn-sm btn-ghost text-xs",onClick:Cd,children:"Clear all"})]})}),!1,u.jsxs("div",{className:"flex-1 min-h-0 relative",children:[u.jsx(Ew,{items:et,selected:s,restoreToSelectionToken:a,onSelectionChange:i,onOpenViewer:x=>{try{je.current=x}catch{}hv(x),i([x])},highlight:yr?gd:"",recentlyUpdated:yt,suppressSelectionHighlight:!!o,viewMode:m,targetCellSize:L,onContextMenuItem:(x,R)=>{x.preventDefault();const _=s.length?s:[R];Z({x:x.clientX,y:x.clientY,kind:"grid",payload:{paths:_}})},scrollRef:ke,hideScrollbar:yd}),yd&&Ws&&u.jsx(jw,{items:et,metricKey:Ws,scrollRef:ke,sortDir:N.sort.dir})]})]}),E&&u.jsx(u1,{path:s[0]??null,selectedPaths:s,items:et,sortSpec:N.sort,onResize:en,onStarChanged:(x,R)=>{oe(_=>{const z={..._};for(const $ of x)z[$]=R;return z})}}),o&&u.jsx(Fw,{path:o,onClose:Nd,onZoomChange:x=>S(Math.round(x)),requestedZoomPercent:f,onZoomRequestConsumed:()=>d(null),onNavigate:Zl}),vr&&u.jsx("div",{className:"toolbar-offset fixed inset-0 left-[var(--left)] right-[var(--right)] bg-accent/10 border-2 border-dashed border-accent text-text flex items-center justify-center text-lg z-overlay pointer-events-none",children:"Drop images to upload"}),J&&u.jsx(wS,{ctx:J,current:e,items:et,refetch:Hl,setCtx:Z})]})}function mS(e,t){const n=gS(e)||"view",r=new Set(t.map(i=>i.id));if(!r.has(n))return n;let s=2;for(;r.has(`${n}-${s}`);)s+=1;return`${n}-${s}`}function gS(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function Aa(e){const t=e.filter(s=>s>0).sort((s,i)=>i-s),n=e.includes(0),r=[...t.map(s=>String(s))];return n&&r.push("None"),r.join(", ")}function vS(e,t){return e&&t?`${e} to ${t}`:e?`from ${e}`:t?`to ${t}`:""}function yS(e){if(e==="/"||e==="")return"Root";const t=e.split("/").filter(Boolean);return t.length?t.length<=2?`/${t.join("/")}`:`.../${t.slice(-2).join("/")}`:"Root"}function xS(e,t){return`${Dh(e)}${Dh(t)}`}function Dh(e){const t=Math.abs(e);return t>=1e3?e.toFixed(0):t>=10?e.toFixed(2):e.toFixed(3)}function Uo(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function wS({ctx:e,current:t,items:n,refetch:r,setCtx:s}){const i=y1(t),o=(p,m)=>p==="/"?`/${m}`:`${p}/${m}`,l=Gr(),[a,c]=Bo.useState(!1),[f,d]=Bo.useState(null),v=()=>new Date().toISOString().replace(/[:.]/g,"-"),S=p=>{const m=C=>p==="/"?!0:C===p||C.startsWith(`${p}/`);l.invalidateQueries({predicate:({queryKey:C})=>{if(!Array.isArray(C)||C[0]!=="folder")return!1;const L=typeof C[1]=="string"?C[1]:"";return m(L)}})},k=p=>{const m=an(p);return m===""?"/":m},b=async()=>{const p=k(e.payload.path||"/");c(!0);try{await he.refreshFolder(p),S(p),(t===p||t.startsWith(p==="/"?"/":`${p}/`))&&await r(),Qu.evictPrefix(p),Jr.evictPrefix(p)}catch(m){console.error("Failed to refresh folder:",m)}finally{c(!1),s(null)}},N=async p=>{const m=[p],C=new Set,L=[];for(;m.length;){const T=m.pop();if(!C.has(T)){C.add(T);try{const M=await he.getFolder(T);L.push(...M.items);for(const I of M.dirs)I.kind==="branch"&&m.push(o(T,I.name))}catch(M){console.error(`Failed to fetch folder ${T}:`,M)}}}return L},y=p=>async()=>{d(p);const m=e.payload.path||t;try{const C=await N(m),L=Fa(C),T=p==="csv"?Ch(L):kh(L),M=p==="csv"?"text/csv;charset=utf-8":"application/json;charset=utf-8",I=m==="/"?"root":(m.replace(/^\/+/,"")||"root").replace(/\//g,"_");Uo(new Blob([T],{type:M}),`metadata_${I}_${v()}.${p}`)}catch(C){console.error("Failed to export folder:",C),alert("Failed to export folder. See console for details.")}finally{d(null),s(null)}},g=e.kind==="tree"?[{label:a?"Refreshing":"Refresh",disabled:a,onClick:b},{label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f||a,onClick:y("csv")},{label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f||a,onClick:y("json")}]:(()=>{const p=e.payload.paths??[],m=[];return m.push({label:"Move to trash",disabled:i,onClick:async()=>{if(!i){for(const C of p)try{await he.moveFile(C,"/_trash_")}catch(L){console.error(`Failed to trash ${C}:`,L)}r(),s(null)}}}),i&&(m.push({label:"Permanent delete",danger:!0,onClick:async()=>{if(confirm(`Delete ${p.length} file(s) permanently? This cannot be undone.`)){try{await he.deleteFiles(p)}catch(C){console.error("Failed to delete files:",C)}r(),s(null)}}}),m.push({label:"Recover",onClick:async()=>{for(const C of p)try{const T=(await he.getSidecar(C)).original_position,M=T&&T.split("/").slice(0,-1).join("/")||"/";await he.moveFile(C,M)}catch(L){console.error(`Failed to recover ${C}:`,L)}r(),s(null)}})),p.length&&(m.push({label:f==="csv"?"Exporting CSV":"Export metadata (CSV)",disabled:!!f,onClick:async()=>{d("csv");try{const C=new Set(p),L=n.filter(I=>C.has(I.path)),T=Fa(L),M=Ch(T);Uo(new Blob([M],{type:"text/csv;charset=utf-8"}),`metadata_selection_${v()}.csv`)}finally{d(null),s(null)}}}),m.push({label:f==="json"?"Exporting JSON":"Export metadata (JSON)",disabled:!!f,onClick:async()=>{d("json");try{const C=new Set(p),L=n.filter(I=>C.has(I.path)),T=Fa(L),M=kh(T);Uo(new Blob([M],{type:"application/json;charset=utf-8"}),`metadata_selection_${v()}.json`)}finally{d(null),s(null)}}})),m})();return u.jsx(Q1,{x:e.x,y:e.y,items:g})}const SS=new gx({defaultOptions:{queries:{staleTime:1e4,gcTime:5*6e4,retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always"},mutations:{retry:2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),5e3)}}});function kS(){return u.jsx(vx,{client:SS,children:u.jsx(pS,{})})}lg(document.getElementById("root")).render(u.jsx(kS,{}));
